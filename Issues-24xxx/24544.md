# Issue 24544: cleaning linbox declarations + reimplement modn interface

archive/issues_024307.json:
```json
{
    "body": "We organize linbox declarations (`sage/libs/linbox/`) and make the Sage code almost independent of the `interfaces/sage` that is in linbox (see #26178 for the last step).\n\nSwitching from `LinBox::DenseVector<Givaro::Modular<unsigned int>>` to `LinBox::DenseVector<Givaro::Modular<int64_t>>` presented some compilation issues (see discussion from [comment:43 comment:43]). That will be dealt with in #26178.\n\n(see also #22872 for the linbox task ticket)\n\nSome upstream reports to linbox and Cython\n\n- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)\n- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)\n- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)\n- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using `uint64_t`)\n\n\nCC:  @ClementPernet @tscrim\n\nKeywords: linbox\n\nBranch/Commit: 8acfbc98500f2ef619c7df6f2e9800804ea61e75\n\nReviewer: Travis Scrimshaw, Jeroen Demeyer\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24544\n\n",
    "closed_at": "2018-09-05T16:43:54Z",
    "created_at": "2018-01-15T16:11:49Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "cleaning linbox declarations + reimplement modn interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24544",
    "user": "https://github.com/videlec"
}
```
We organize linbox declarations (`sage/libs/linbox/`) and make the Sage code almost independent of the `interfaces/sage` that is in linbox (see #26178 for the last step).

Switching from `LinBox::DenseVector<Givaro::Modular<unsigned int>>` to `LinBox::DenseVector<Givaro::Modular<int64_t>>` presented some compilation issues (see discussion from [comment:43 comment:43]). That will be dealt with in #26178.

(see also #22872 for the linbox task ticket)

Some upstream reports to linbox and Cython

- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)
- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)
- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)
- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using `uint64_t`)


CC:  @ClementPernet @tscrim

Keywords: linbox

Branch/Commit: 8acfbc98500f2ef619c7df6f2e9800804ea61e75

Reviewer: Travis Scrimshaw, Jeroen Demeyer

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24544





---

archive/issue_comments_362219.json:
```json
{
    "body": "<a id='comment:1'></a>See the attached branch for an experimental version. All tests pass on my computer. Though many tests in `sage/matrix/linbox_solver_modn_sparse.pyx` are there for showing potential bugs in linbox `solve`.\n\n---\nNew commits:",
    "created_at": "2018-01-15T16:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362219",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>See the attached branch for an experimental version. All tests pass on my computer. Though many tests in `sage/matrix/linbox_solver_modn_sparse.pyx` are there for showing potential bugs in linbox `solve`.

---
New commits:



---

archive/issue_comments_362220.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code independent of the \\`interfaces/sage\\` that is in linbox.\n+\n+- [Cython bug thread?](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)\n \n Author: Vincent Delecroix\n \n```\n",
    "created_at": "2018-01-15T16:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362220",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
 We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code independent of the \`interfaces/sage\` that is in linbox.
+
+- [Cython bug thread?](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)
 
 Author: Vincent Delecroix
 
```




---

archive/issue_comments_362221.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n+We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code independent of the \\`interfaces/sage\\` that is in linbox.\n \n+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)\n+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw)\n \n Author: Vincent Delecroix\n \n```\n",
    "created_at": "2018-01-15T16:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362221",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,7 @@
+We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code independent of the \`interfaces/sage\` that is in linbox.
 
+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)
+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw)
 
 Author: Vincent Delecroix
 
```




---

archive/issue_comments_362222.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-15T16:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_362223.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code independent of the \\`interfaces/sage\\` that is in linbox.\n \n+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)\n+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw)\n+- [This is the Trac macro *LinBox issue* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#LinBox issue-macro)\n \n Author: Vincent Delecroix\n \n```\n",
    "created_at": "2018-01-15T17:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362223",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code independent of the \`interfaces/sage\` that is in linbox.
 
+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)
+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw)
+- [This is the Trac macro *LinBox issue* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#LinBox issue-macro)
 
 Author: Vincent Delecroix
 
```




---

archive/issue_comments_362224.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code independent of the \\`interfaces/sage\\` that is in linbox.\n \n+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)\n+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw)\n+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105)\n \n Author: Vincent Delecroix\n \n```\n",
    "created_at": "2018-01-15T17:30:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362224",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,8 @@
+We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code independent of the \`interfaces/sage\` that is in linbox.
 
+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)
+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw)
+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105)
 
 Author: Vincent Delecroix
 
```




---

archive/issue_comments_362225.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-03T12:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362225",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_362226.json:
```json
{
    "body": "<a id='comment:8'></a>The current branch at `7ec9610` does compile but Sage crashes when launched with\n\n```\n/opt/sage/local/lib/python2.7/site-packages/sage/matrix/linbox_solver_modn_sparse.pxd in init sage.matrix.matrix_modn_sparse()\n      6 from sage.modules.vector_modn_dense cimport Vector_modn_dense\n      7 \n----> 8 cdef class LinBoxSolver_modn_sparse(object):\n        global cdef = undefined\n        global LinBoxSolver_modn_sparse = undefined\n        global object = undefined\n      9     r\"\"\"\n     10     Solving linear equations in Sage using LinBox.\n     11     \"\"\"\n     12     cdef object Vin\nImportError: /opt/sage/local/lib/python2.7/site-packages/sage/matrix/linbox_solver_modn_sparse.so: undefined symbol:\n_ZNK6LinBox15MVProductDomainIN6Givaro7ModularImmEEE22mulColDenseSpecializedINS_10BlasVectorIS3_St6vectorImSaImEEEENS_15TransposeMatrixINS_9Protected19SparseMatrixGenericIS3_S7_ISt4pairImmESaISF_EENS_16VectorCategories23SparseSequenceVectorTagEEENS_16MatrixCategories12RowMatrixTagEEES9_EERT_RKNS_12VectorDomainIS3_EESP_RKT0_RKT1_SJ_\n```",
    "created_at": "2018-02-03T16:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362226",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>The current branch at `7ec9610` does compile but Sage crashes when launched with

```
/opt/sage/local/lib/python2.7/site-packages/sage/matrix/linbox_solver_modn_sparse.pxd in init sage.matrix.matrix_modn_sparse()
      6 from sage.modules.vector_modn_dense cimport Vector_modn_dense
      7 
----> 8 cdef class LinBoxSolver_modn_sparse(object):
        global cdef = undefined
        global LinBoxSolver_modn_sparse = undefined
        global object = undefined
      9     r"""
     10     Solving linear equations in Sage using LinBox.
     11     """
     12     cdef object Vin
ImportError: /opt/sage/local/lib/python2.7/site-packages/sage/matrix/linbox_solver_modn_sparse.so: undefined symbol:
_ZNK6LinBox15MVProductDomainIN6Givaro7ModularImmEEE22mulColDenseSpecializedINS_10BlasVectorIS3_St6vectorImSaImEEEENS_15TransposeMatrixINS_9Protected19SparseMatrixGenericIS3_S7_ISt4pairImmESaISF_EENS_16VectorCategories23SparseSequenceVectorTagEEENS_16MatrixCategories12RowMatrixTagEEES9_EERT_RKNS_12VectorDomainIS3_EESP_RKT0_RKT1_SJ_
```



---

archive/issue_comments_362227.json:
```json
{
    "body": "<a id='comment:9'></a>Why are you using comments like\n\n```\n# return a new LinBox vector from a Sage vector\n# (such vector has to be deallocated with a \"del\" statement)\n# INPUT:\n#   F - LinBox field\n#   v - Sage vector\n```\ninstead of docstring syntax like\n\n```\n\"\"\"\nReturn a new LinBox vector from a Sage vector\n(such vector has to be deallocated with a \"del\" statement)\n\nINPUT:\n\n- F -- LinBox field\n- v -- Sage vector\n\"\"\"\n```",
    "created_at": "2018-02-03T20:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362227",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>Why are you using comments like

```
# return a new LinBox vector from a Sage vector
# (such vector has to be deallocated with a "del" statement)
# INPUT:
#   F - LinBox field
#   v - Sage vector
```
instead of docstring syntax like

```
"""
Return a new LinBox vector from a Sage vector
(such vector has to be deallocated with a "del" statement)

INPUT:

- F -- LinBox field
- v -- Sage vector
"""
```



---

archive/issue_comments_362228.json:
```json
{
    "body": "<a id='comment:10'></a>Regarding\n\n```\n# without this function, Cython produces a wrong C file\n# Namely, at compilation\n#\n#\ndef _dummy():\n    raise RuntimeError(\"this is a cython bug\")\n```\ncould you report that bug on the Cython github page and put a link to that bug report in the comment?",
    "created_at": "2018-02-03T20:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362228",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Regarding

```
# without this function, Cython produces a wrong C file
# Namely, at compilation
#
#
def _dummy():
    raise RuntimeError("this is a cython bug")
```
could you report that bug on the Cython github page and put a link to that bug report in the comment?



---

archive/issue_comments_362229.json:
```json
{
    "body": "<a id='comment:11'></a>Same for the other places where you claim \"Cython bug\".",
    "created_at": "2018-02-03T20:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362229",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>Same for the other places where you claim "Cython bug".



---

archive/issue_comments_362230.json:
```json
{
    "body": "<a id='comment:12'></a>This ticket does a lot of things... would it be possible to separate the changes to `src/sage/libs/linbox`?",
    "created_at": "2018-02-03T20:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362230",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>This ticket does a lot of things... would it be possible to separate the changes to `src/sage/libs/linbox`?



---

archive/issue_comments_362231.json:
```json
{
    "body": "<a id='comment:13'></a>`src/sage/libs/linbox/linbox_flint_interface.pxd` defines only Cython functions, why did you add the `# distutils` stuff?",
    "created_at": "2018-02-03T20:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362231",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>`src/sage/libs/linbox/linbox_flint_interface.pxd` defines only Cython functions, why did you add the `# distutils` stuff?



---

archive/issue_comments_362232.json:
```json
{
    "body": "<a id='comment:14'></a>Typo: `Inteer` -> `Integer`",
    "created_at": "2018-02-03T20:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362232",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Typo: `Inteer` -> `Integer`



---

archive/issue_comments_362233.json:
```json
{
    "body": "<a id='comment:15'></a>Why the explicit `PyInt_FromLong` here?\n\n```\nreturn PyInt_FromLong(A_rank)\n```\nCython knows how to convert a `long` to a Python object.",
    "created_at": "2018-02-03T20:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362233",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>Why the explicit `PyInt_FromLong` here?

```
return PyInt_FromLong(A_rank)
```
Cython knows how to convert a `long` to a Python object.



---

archive/issue_comments_362234.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-03-05T17:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362234",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_362235.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 jdemeyer]:\n> Why the explicit `PyInt_FromLong` here?\n> \n> ```\n> return PyInt_FromLong(A_rank)\n> ```\n> Cython knows how to convert a `long` to a Python object.\n\n\nOtherwise, I obtain a Python long by default which is not the same behavior as the other rank functions on matrices.",
    "created_at": "2018-03-05T17:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362235",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'></a>Replying to [comment:15 jdemeyer]:
> Why the explicit `PyInt_FromLong` here?
> 
> ```
> return PyInt_FromLong(A_rank)
> ```
> Cython knows how to convert a `long` to a Python object.


Otherwise, I obtain a Python long by default which is not the same behavior as the other rank functions on matrices.



---

archive/issue_comments_362236.json:
```json
{
    "body": "<a id='comment:18'></a>The current branch based on sage-7.2.beta7 (commit `6e8aa61`) crashes similarly to what is described in [comment:8 comment:8].",
    "created_at": "2018-03-05T17:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362236",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>The current branch based on sage-7.2.beta7 (commit `6e8aa61`) crashes similarly to what is described in [comment:8 comment:8].



---

archive/issue_comments_362237.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n+We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code independent of the \\`interfaces/sage\\` that is in linbox.\n \n+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)\n+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw)\n+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)\n+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \\`uint64_t\\`)\n \n Author: Vincent Delecroix\n \n```\n",
    "created_at": "2018-04-29T09:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362237",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,9 @@
+We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code independent of the \`interfaces/sage\` that is in linbox.
 
+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE)
+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw)
+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)
+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \`uint64_t\`)
 
 Author: Vincent Delecroix
 
```




---

archive/issue_events_061887.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-04-29T12:52:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24544#event-61887"
}
```



---

archive/issue_comments_362238.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-04-29T12:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362238",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_362239.json:
```json
{
    "body": "<a id='comment:21'></a>Apparently, I can not use `Modular<uint64_t>` within solve (see [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117)). The rest looks fine! Needs review :-)\n\n---\nNew commits:",
    "created_at": "2018-04-29T12:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362239",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>Apparently, I can not use `Modular<uint64_t>` within solve (see [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117)). The rest looks fine! Needs review :-)

---
New commits:



---

archive/issue_comments_362240.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n+We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code independent of the \\`interfaces/sage\\` that is in linbox.\n \n+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)\n+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)\n+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)\n+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \\`uint64_t\\`)\n \n Author: Vincent Delecroix\n \n```\n",
    "created_at": "2018-04-29T12:54:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362240",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,9 @@
+We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code independent of the \`interfaces/sage\` that is in linbox.
 
+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)
+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)
+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)
+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \`uint64_t\`)
 
 Author: Vincent Delecroix
 
```




---

archive/issue_comments_362241.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-30T10:58:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362241",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_362242.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,11 @@\n+We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code independent of the \\`interfaces/sage\\` that is in linbox.\n \n+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)\n+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)\n+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)\n+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \\`uint64_t\\`)\n+\n+(see also #22872 for the linbox task ticket) \n \n Author: Vincent Delecroix\n \n```\n",
    "created_at": "2018-05-01T12:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362242",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,11 @@
+We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code independent of the \`interfaces/sage\` that is in linbox.
 
+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)
+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)
+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)
+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \`uint64_t\`)
+
+(see also #22872 for the linbox task ticket) 
 
 Author: Vincent Delecroix
 
```




---

archive/issue_comments_362243.json:
```json
{
    "body": "<a id='comment:25'></a>From my look-over, everything seems okay, but I don't have as experienced of an eye as Jeroen for these things. So Jeoren, I would appreciate it if you could give it another quick look-over.\n\nMinor nitpick from me is the formatting of the docstrings in `conversion.pxd`.",
    "created_at": "2018-05-02T00:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362243",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>From my look-over, everything seems okay, but I don't have as experienced of an eye as Jeroen for these things. So Jeoren, I would appreciate it if you could give it another quick look-over.

Minor nitpick from me is the formatting of the docstrings in `conversion.pxd`.



---

archive/issue_comments_362244.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 tscrim]:\n> From my look-over, everything seems okay, but I don't have as experienced of an eye as Jeroen for these things. So Jeoren, I would appreciate it if you could give it another quick look-over.\n> \n> Minor nitpick from me is the formatting of the docstrings in `conversion.pxd`.\n\n\nThese are inline C functions that will not appear anywhere and are not even accessible from `??`. These docstrings as for people using the code. Adding extra ```a``` make them less readable I think.",
    "created_at": "2018-05-02T05:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362244",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>Replying to [comment:25 tscrim]:
> From my look-over, everything seems okay, but I don't have as experienced of an eye as Jeroen for these things. So Jeoren, I would appreciate it if you could give it another quick look-over.
> 
> Minor nitpick from me is the formatting of the docstrings in `conversion.pxd`.


These are inline C functions that will not appear anywhere and are not even accessible from `??`. These docstrings as for people using the code. Adding extra ```a``` make them less readable I think.



---

archive/issue_comments_362245.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 vdelecroix]:\n> Replying to [comment:25 tscrim]:\n> > Minor nitpick from me is the formatting of the docstrings in `conversion.pxd`.\n\n> \n> These are inline C functions that will not appear anywhere and are not even accessible from `??`. These docstrings as for people using the code. Adding extra ```a``` make them less readable I think.\n\n\nI don't care that strongly. I am so used to seeing the Sage-formatted docstrings, it took me a little bit of extra time to mentally parse it. So if you are opposed to such a change, then I am okay to call it bikeshedding and move on.",
    "created_at": "2018-05-02T05:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362245",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>Replying to [comment:26 vdelecroix]:
> Replying to [comment:25 tscrim]:
> > Minor nitpick from me is the formatting of the docstrings in `conversion.pxd`.

> 
> These are inline C functions that will not appear anywhere and are not even accessible from `??`. These docstrings as for people using the code. Adding extra ```a``` make them less readable I think.


I don't care that strongly. I am so used to seeing the Sage-formatted docstrings, it took me a little bit of extra time to mentally parse it. So if you are opposed to such a change, then I am okay to call it bikeshedding and move on.



---

archive/issue_comments_362246.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-02T17:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_362247.json:
```json
{
    "body": "<a id='comment:29'></a>What does this mean?\n\n```\nNOTE: this function is not part of the interface (ie the .pxd file) to keep the\nmodule C-compatible\n```",
    "created_at": "2018-05-02T21:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362247",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>What does this mean?

```
NOTE: this function is not part of the interface (ie the .pxd file) to keep the
module C-compatible
```



---

archive/issue_comments_362248.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 jdemeyer]:\n> What does this mean?\n> \n> ```\n> NOTE: this function is not part of the interface (ie the .pxd file) to keep the\n> module C-compatible\n> ```\n\n\nThe pxd file only contains C declarations and is hence compatible with Cython C files compiled with `gcc` not `g++`. I don't know whether it makes a difference but as flint is a pure C library I thought it would be better this way.",
    "created_at": "2018-05-02T21:38:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362248",
    "user": "https://github.com/videlec"
}
```

<a id='comment:30'></a>Replying to [comment:29 jdemeyer]:
> What does this mean?
> 
> ```
> NOTE: this function is not part of the interface (ie the .pxd file) to keep the
> module C-compatible
> ```


The pxd file only contains C declarations and is hence compatible with Cython C files compiled with `gcc` not `g++`. I don't know whether it makes a difference but as flint is a pure C library I thought it would be better this way.



---

archive/issue_comments_362249.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-02T21:39:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362249",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_362250.json:
```json
{
    "body": "<a id='comment:32'></a>Still conflicts with #24742.",
    "created_at": "2018-05-03T07:36:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362250",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>Still conflicts with #24742.



---

archive/issue_comments_362251.json:
```json
{
    "body": "<a id='comment:33'></a>The determinant of a 0x0 matrix should be 1.",
    "created_at": "2018-05-03T07:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362251",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>The determinant of a 0x0 matrix should be 1.



---

archive/issue_comments_362252.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-03T08:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362252",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_362253.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-03T08:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362253",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_362254.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-03T20:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_362255.json:
```json
{
    "body": "<a id='comment:37'></a>Anything more? I would like this one merged before touching #23214.",
    "created_at": "2018-05-10T14:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362255",
    "user": "https://github.com/videlec"
}
```

<a id='comment:37'></a>Anything more? I would like this one merged before touching #23214.



---

archive/issue_comments_362256.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-14T23:04:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362256",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_362257.json:
```json
{
    "body": "<a id='comment:38'></a>LGTM.",
    "created_at": "2018-05-14T23:04:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362257",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:38'></a>LGTM.



---

archive/issue_comments_362258.json:
```json
{
    "body": "<a id='comment:39'></a>Merge conflict",
    "created_at": "2018-05-15T22:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362258",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:39'></a>Merge conflict



---

archive/issue_comments_362259.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-05-15T22:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362259",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_362260.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2018-05-18T20:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_362261.json:
```json
{
    "body": "<a id='comment:41'></a>rebased on 8.3-beta2 (build and all tests pass in matrix/ currently building doc)",
    "created_at": "2018-05-18T20:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362261",
    "user": "https://github.com/videlec"
}
```

<a id='comment:41'></a>rebased on 8.3-beta2 (build and all tests pass in matrix/ currently building doc)



---

archive/issue_comments_362262.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-18T20:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362262",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_362263.json:
```json
{
    "body": "<a id='comment:42'></a>Everything's fine (as far as I can test). Since nothing changed (beyond the rebase) I am setting back to positive review.",
    "created_at": "2018-05-19T17:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362263",
    "user": "https://github.com/videlec"
}
```

<a id='comment:42'></a>Everything's fine (as far as I can test). Since nothing changed (beyond the rebase) I am setting back to positive review.



---

archive/issue_comments_362264.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-19T17:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362264",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_362265.json:
```json
{
    "body": "<a id='comment:43'></a>Fails on OSX:\n\n```\n[sagelib-8.3.beta2] In file included from build/cythonized/sage/matrix/matrix_modn_sparse.cpp:689:\n[sagelib-8.3.beta2] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/dense-matrix.h:79:\n[sagelib-8.3.beta2] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/densematrix/blas-matrix.h:44:\n[sagelib-8.3.beta2] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:306:11: error: member reference base type 'const long' is not a structure or union\n[sagelib-8.3.beta2]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)\n[sagelib-8.3.beta2]                               ~^~~~~\n```\nFull log: http://build.sagemath.org/#/builders/32/builds/83/steps/5/logs/stdio",
    "created_at": "2018-05-21T22:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362265",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:43'></a>Fails on OSX:

```
[sagelib-8.3.beta2] In file included from build/cythonized/sage/matrix/matrix_modn_sparse.cpp:689:
[sagelib-8.3.beta2] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/dense-matrix.h:79:
[sagelib-8.3.beta2] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/densematrix/blas-matrix.h:44:
[sagelib-8.3.beta2] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:306:11: error: member reference base type 'const long' is not a structure or union
[sagelib-8.3.beta2]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)
[sagelib-8.3.beta2]                               ~^~~~~
```
Full log: http://build.sagemath.org/#/builders/32/builds/83/steps/5/logs/stdio



---

archive/issue_comments_362266.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-05-21T22:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362266",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_362267.json:
```json
{
    "body": "Changing keywords from \"\" to \"linbox\".",
    "created_at": "2018-06-26T14:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362267",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "linbox".



---

archive/issue_comments_362268.json:
```json
{
    "body": "<a id='comment:45'></a>What's the status of the problem on OsX ?",
    "created_at": "2018-06-26T14:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362268",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:45'></a>What's the status of the problem on OsX ?



---

archive/issue_comments_362269.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:45 chapoton]:\n> What's the status of the problem on OsX ?\n\n\nThanks for your concern. I don't have any OSX machine and don't plan to buy any. I can not help with this issue. The only thing I know is [comment:43 comment:43].",
    "created_at": "2018-06-26T18:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362269",
    "user": "https://github.com/videlec"
}
```

<a id='comment:46'></a>Replying to [comment:45 chapoton]:
> What's the status of the problem on OsX ?


Thanks for your concern. I don't have any OSX machine and don't plan to buy any. I can not help with this issue. The only thing I know is [comment:43 comment:43].



---

archive/issue_comments_362270.json:
```json
{
    "body": "<a id='comment:47'></a>is this not an issue that should be reported to linbox ?",
    "created_at": "2018-06-26T20:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362270",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:47'></a>is this not an issue that should be reported to linbox ?



---

archive/issue_comments_362271.json:
```json
{
    "body": "<a id='comment:48'></a>Replying to [comment:47 chapoton]:\n> is this not an issue that should be reported to linbox ?\n\n\nWould be better to have something reproducible outside of Sage. Otherwise it might just be closed by upstream as was [issue 118](https://github.com/linbox-team/linbox/issues/118).",
    "created_at": "2018-06-26T20:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362271",
    "user": "https://github.com/videlec"
}
```

<a id='comment:48'></a>Replying to [comment:47 chapoton]:
> is this not an issue that should be reported to linbox ?


Would be better to have something reproducible outside of Sage. Otherwise it might just be closed by upstream as was [issue 118](https://github.com/linbox-team/linbox/issues/118).



---

archive/issue_comments_362272.json:
```json
{
    "body": "<a id='comment:49'></a>but this looks like something that breaks the build, nothing really sage related ?",
    "created_at": "2018-06-26T20:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362272",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:49'></a>but this looks like something that breaks the build, nothing really sage related ?



---

archive/issue_comments_362273.json:
```json
{
    "body": "<a id='comment:50'></a>Replying to [comment:49 chapoton]:\n> but this looks like something that breaks the build, nothing really sage related ?\n\n\nSure, you can open an issue on github. My comment was just what I thought was best.",
    "created_at": "2018-06-26T20:15:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362273",
    "user": "https://github.com/videlec"
}
```

<a id='comment:50'></a>Replying to [comment:49 chapoton]:
> but this looks like something that breaks the build, nothing really sage related ?


Sure, you can open an issue on github. My comment was just what I thought was best.



---

archive/issue_comments_362274.json:
```json
{
    "body": "<a id='comment:51'></a>The link given by Volker in comment:43 leads to an empty page.\n\nIs there somebody around with a mac, that could help ? Or maybe Clement has an idea on the problem ?",
    "created_at": "2018-07-06T13:07:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362274",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:51'></a>The link given by Volker in comment:43 leads to an empty page.

Is there somebody around with a mac, that could help ? Or maybe Clement has an idea on the problem ?



---

archive/issue_comments_362275.json:
```json
{
    "body": "Attachment [log](tarball://root/attachments/some-uuid/ticket24544/log) by @alexjbest created at 2018-07-08 19:29:38\n\nLog of failure",
    "created_at": "2018-07-08T19:29:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362275",
    "user": "https://github.com/alexjbest"
}
```

Attachment [log](tarball://root/attachments/some-uuid/ticket24544/log) by @alexjbest created at 2018-07-08 19:29:38

Log of failure



---

archive/issue_comments_362276.json:
```json
{
    "body": "<a id='comment:52'></a>I tried this on my laptop running OS X with `git trac try 24544` and `make` and it failed, I have attached the log. If anyone has suggestions I'm happy to try them out on my machine.",
    "created_at": "2018-07-08T19:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362276",
    "user": "https://github.com/alexjbest"
}
```

<a id='comment:52'></a>I tried this on my laptop running OS X with `git trac try 24544` and `make` and it failed, I have attached the log. If anyone has suggestions I'm happy to try them out on my machine.



---

archive/issue_comments_362277.json:
```json
{
    "body": "<a id='comment:53'></a>according to the log given by Alex (thanks !), and by looking at `matrix_modn_sparse.cpp`, maybe the problematic lines are\n\n```\n\"sage/matrix/matrix_modn_sparse.pyx\":1053\n```\nand\n\n```\n\"sage/matrix/matrix_modn_sparse.pyx\":1146\n```\nNamely\n\n```\n        cdef DenseVector_Modular_int64 * b = new DenseVector_Modular_int64(F[0], self._nrows)\n```\nand\n\n```\n        cdef DenseVector_Modular_int64 * b = new DenseVector_Modular_int64(F[0], self._nrows)\n```",
    "created_at": "2018-07-17T07:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362277",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:53'></a>according to the log given by Alex (thanks !), and by looking at `matrix_modn_sparse.cpp`, maybe the problematic lines are

```
"sage/matrix/matrix_modn_sparse.pyx":1053
```
and

```
"sage/matrix/matrix_modn_sparse.pyx":1146
```
Namely

```
        cdef DenseVector_Modular_int64 * b = new DenseVector_Modular_int64(F[0], self._nrows)
```
and

```
        cdef DenseVector_Modular_int64 * b = new DenseVector_Modular_int64(F[0], self._nrows)
```



---

archive/issue_events_061888.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24544#event-61888"
}
```



---

archive/issue_events_061889.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24544#event-61889"
}
```



---

archive/issue_comments_362278.json:
```json
{
    "body": "<a id='comment:54'></a>update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362278",
    "user": "https://github.com/videlec"
}
```

<a id='comment:54'></a>update milestone 8.3 -> 8.4



---

archive/issue_comments_362279.json:
```json
{
    "body": "<a id='comment:55'></a>This is why I don't understand. The exact same lines appear in the function `new_linbox_vector_modn_dense` (`sage/libs/linbox/conversion.pxd`) and correspond to the constructor `DenseVector_Modular_int64 (Field &F, long& m)` of the class `DenseVector_Modular_int64` that corresponds to `LinBox::DenseVector<Givaro::Modular<int64_t>>`.",
    "created_at": "2018-08-30T12:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362279",
    "user": "https://github.com/videlec"
}
```

<a id='comment:55'></a>This is why I don't understand. The exact same lines appear in the function `new_linbox_vector_modn_dense` (`sage/libs/linbox/conversion.pxd`) and correspond to the constructor `DenseVector_Modular_int64 (Field &F, long& m)` of the class `DenseVector_Modular_int64` that corresponds to `LinBox::DenseVector<Givaro::Modular<int64_t>>`.



---

archive/issue_comments_362280.json:
```json
{
    "body": "<a id='comment:56'></a>I would really like to see progress here, and on the sequel ticket.. but not able to help..\n\nBranch is red now.",
    "created_at": "2018-09-02T17:01:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362280",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:56'></a>I would really like to see progress here, and on the sequel ticket.. but not able to help..

Branch is red now.



---

archive/issue_comments_362281.json:
```json
{
    "body": "<a id='comment:57'></a>I am working on it. I will isolate the problematic change from `LinBox::DenseVector<Givaro::Modular<unsigned int>>` to `LinBox::DenseVector<Givaro::Modular<int64_t>>`. Clement gave me the advice to do this change but since then (~6 months ago) it does not compile and Clement did not answer any of my mail.",
    "created_at": "2018-09-02T18:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362281",
    "user": "https://github.com/videlec"
}
```

<a id='comment:57'></a>I am working on it. I will isolate the problematic change from `LinBox::DenseVector<Givaro::Modular<unsigned int>>` to `LinBox::DenseVector<Givaro::Modular<int64_t>>`. Clement gave me the advice to do this change but since then (~6 months ago) it does not compile and Clement did not answer any of my mail.



---

archive/issue_comments_362282.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-09-02T18:40:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_362283.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,13 @@\n+We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code independent of the \\`interfaces/sage\\` that is in linbox.\n \n+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)\n+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)\n+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)\n+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \\`uint64_t\\`)\n+\n+Switching from \\`LinBox::DenseVector<Givaro::Modular<unsigned int>>\\` to \\`LinBox::DenseVector<Givaro::Modular<int64_t>>\\` presented some compilation issues (see discussion from [comment:43 comment:43]). That will be dealt with in #26178.\n+\n+(see also #22872 for the linbox task ticket)\n \n Author: Vincent Delecroix\n \n```\n",
    "created_at": "2018-09-02T18:45:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362283",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,13 @@
+We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code independent of the \`interfaces/sage\` that is in linbox.
 
+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)
+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)
+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)
+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \`uint64_t\`)
+
+Switching from \`LinBox::DenseVector<Givaro::Modular<unsigned int>>\` to \`LinBox::DenseVector<Givaro::Modular<int64_t>>\` presented some compilation issues (see discussion from [comment:43 comment:43]). That will be dealt with in #26178.
+
+(see also #22872 for the linbox task ticket)
 
 Author: Vincent Delecroix
 
```




---

archive/issue_comments_362284.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-09-02T18:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362284",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_362285.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,15 @@\n+We organize linbox declarations (\\`sage/libs/linbox/\\`) and make the Sage code almost independent of the \\`interfaces/sage\\` that is in linbox (see #26178 for the last step).\n+\n+Switching from \\`LinBox::DenseVector<Givaro::Modular<unsigned int>>\\` to \\`LinBox::DenseVector<Givaro::Modular<int64_t>>\\` presented some compilation issues (see discussion from [comment:43 comment:43]). That will be dealt with in #26178.\n+\n+(see also #22872 for the linbox task ticket)\n+\n+Some upstream reports to linbox and Cython\n+\n+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)\n+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)\n+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)\n+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \\`uint64_t\\`)\n \n \n Author: Vincent Delecroix\n```\n",
    "created_at": "2018-09-02T18:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362285",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,15 @@
+We organize linbox declarations (\`sage/libs/linbox/\`) and make the Sage code almost independent of the \`interfaces/sage\` that is in linbox (see #26178 for the last step).
+
+Switching from \`LinBox::DenseVector<Givaro::Modular<unsigned int>>\` to \`LinBox::DenseVector<Givaro::Modular<int64_t>>\` presented some compilation issues (see discussion from [comment:43 comment:43]). That will be dealt with in #26178.
+
+(see also #22872 for the linbox task ticket)
+
+Some upstream reports to linbox and Cython
+
+- [Cython bug 1 (RuntimeError)](https://groups.google.com/forum/#!topic/cython-users/FYIh0OZ1qeE) (not relevant anymore)
+- [Cython bug 2 (cimported module vs typedef in classes)](https://groups.google.com/forum/#!topic/cython-users/81wTNLKZ2mw) (not relevant anymore)
+- [LinBox issue](https://github.com/linbox-team/linbox/issues/105) (solve is broken for rectangular matrices)
+- [LinBox issue 117](https://github.com/linbox-team/linbox/issues/117) (givaro modular field using \`uint64_t\`)
 
 
 Author: Vincent Delecroix
```




---

archive/issue_comments_362286.json:
```json
{
    "body": "<a id='comment:62'></a>Strange doctests failure with the petitbonum patchbot\n\n```\nsage -t --long --warn-long 58.5 src/sage/interfaces/ecm.py\n**********************************************************************\nFile \"src/sage/interfaces/ecm.py\", line 457, in sage.interfaces.ecm.ECM.one_curve\nFailed example:\n    f.one_curve(n, B1=500000, algorithm=\"P-1\")\nExpected:\n    [67872792749091946529, 6366805760909027985741435139224233]\nGot:\n    [1, 432132887883903108009802143314445113500016816977037257]\n**********************************************************************\nFile \"src/sage/interfaces/ecm.py\", line 460, in sage.interfaces.ecm.ECM.one_curve\nFailed example:\n    f.one_curve(n, B1=2000, algorithm=\"P+1\", x0=5)\nExpected:\n    [328006342451, 6366805760909027985741435139224233]\nGot:\n    [1, 2088352670731726262548647919416588631875815083]\n**********************************************************************\n1 item had failures:\n   2 of   9 in sage.interfaces.ecm.ECM.one_curve\n    [44 tests, 2 failures, 5.94 s]\n```",
    "created_at": "2018-09-02T20:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362286",
    "user": "https://github.com/videlec"
}
```

<a id='comment:62'></a>Strange doctests failure with the petitbonum patchbot

```
sage -t --long --warn-long 58.5 src/sage/interfaces/ecm.py
**********************************************************************
File "src/sage/interfaces/ecm.py", line 457, in sage.interfaces.ecm.ECM.one_curve
Failed example:
    f.one_curve(n, B1=500000, algorithm="P-1")
Expected:
    [67872792749091946529, 6366805760909027985741435139224233]
Got:
    [1, 432132887883903108009802143314445113500016816977037257]
**********************************************************************
File "src/sage/interfaces/ecm.py", line 460, in sage.interfaces.ecm.ECM.one_curve
Failed example:
    f.one_curve(n, B1=2000, algorithm="P+1", x0=5)
Expected:
    [328006342451, 6366805760909027985741435139224233]
Got:
    [1, 2088352670731726262548647919416588631875815083]
**********************************************************************
1 item had failures:
   2 of   9 in sage.interfaces.ecm.ECM.one_curve
    [44 tests, 2 failures, 5.94 s]
```



---

archive/issue_comments_362287.json:
```json
{
    "body": "<a id='comment:63'></a>Though patchbot arando is happy :-)",
    "created_at": "2018-09-02T20:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362287",
    "user": "https://github.com/videlec"
}
```

<a id='comment:63'></a>Though patchbot arando is happy :-)



---

archive/issue_comments_362288.json:
```json
{
    "body": "<a id='comment:64'></a>LGTM (from the description, the failures in comment:43 should no longer apply). (I've also seen the failures in comment:62 on other tickets that patchbot has tested.)",
    "created_at": "2018-09-03T02:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362288",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:64'></a>LGTM (from the description, the failures in comment:43 should no longer apply). (I've also seen the failures in comment:62 on other tickets that patchbot has tested.)



---

archive/issue_comments_362289.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-09-03T02:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362289",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_362290.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-09-05T16:43:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24544#issuecomment-362290",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_061890.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-05T16:43:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24544",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24544#event-61890"
}
```
