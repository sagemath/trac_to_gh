# Issue 24396: test failure in manifolds/differentiable/tensorfield.py (8.2.beta0)

archive/issues_024159.json:
```json
{
    "body": "The following fails when `--long` is not specified\n\n```\n$ sage -t manifolds/differentiable/tensorfield.py\n**********************************************************************\nFile \"manifolds/differentiable/tensorfield.py\", line 295, in sage.manifolds.differentiable.tensorfield.TensorField\nFailed example:\n    t[eV,1,1,c_uv].expr()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.manifolds.differentiable.tensorfield.TensorField[36]>\", line 1, in <module>\n        t[eV,Integer(1),Integer(1),c_uv].expr()\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py\", line 1472, in __getitem__\n        return self.comp(frame)[args]\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py\", line 1235, in comp\n        return rst.comp(basis=basis, from_basis=from_basis)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield_paral.py\", line 921, in comp\n        from_basis=from_basis)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/tensor/modules/free_module_tensor.py\", line 1076, in components\n        \"the components in the {}\".format(basis))\n    ValueError: no basis could be found for computing the components in the Coordinate frame (V, (d/du,d/dv))\n**********************************************************************\nFile \"manifolds/differentiable/tensorfield.py\", line 298, in sage.manifolds.differentiable.tensorfield.TensorField\nFailed example:\n    type(t[eV,1,1,c_uv].expr())\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.manifolds.differentiable.tensorfield.TensorField[37]>\", line 1, in <module>\n        type(t[eV,Integer(1),Integer(1),c_uv].expr())\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py\", line 1472, in __getitem__\n        return self.comp(frame)[args]\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py\", line 1235, in comp\n        return rst.comp(basis=basis, from_basis=from_basis)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield_paral.py\", line 921, in comp\n        from_basis=from_basis)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/tensor/modules/free_module_tensor.py\", line 1076, in components\n        \"the components in the {}\".format(basis))\n    ValueError: no basis could be found for computing the components in the Coordinate frame (V, (d/du,d/dv))\n**********************************************************************\nFile \"manifolds/differentiable/tensorfield.py\", line 318, in sage.manifolds.differentiable.tensorfield.TensorField\nFailed example:\n    f = t(a,b)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.manifolds.differentiable.tensorfield.TensorField[46]>\", line 1, in <module>\n        f = t(a,b)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py\", line 2348, in __call__\n        resu_rr = self_rr(*args_rr)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield_paral.py\", line 1461, in __call__\n        return FreeModuleTensor.__call__(self_r, *args_r)\n      File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/tensor/modules/free_module_tensor.py\", line 2130, in __call__\n        raise ValueError(\"no common basis for the components\")\n    ValueError: no common basis for the components\nKilling test manifolds/differentiable/tensorfield.py\n----------------------------------------------------------------------\nDoctests interrupted: 0/1 files tested\n----------------------------------------------------------------------\nTotal time for all tests: 26.5 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 0.0 seconds\n```\n\nCC:  @egourgoulhon\n\nBranch/Commit: 95bd140bddeb7bdc0f0fd2656206d41c8106429c\n\nReviewer: Eric Gourgoulhon\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24396\n\n",
    "closed_at": "2017-12-22T23:29:46Z",
    "created_at": "2017-12-16T21:43:48Z",
    "labels": [
        "component: documentation",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "test failure in manifolds/differentiable/tensorfield.py (8.2.beta0)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24396",
    "user": "https://github.com/videlec"
}
```
The following fails when `--long` is not specified

```
$ sage -t manifolds/differentiable/tensorfield.py
**********************************************************************
File "manifolds/differentiable/tensorfield.py", line 295, in sage.manifolds.differentiable.tensorfield.TensorField
Failed example:
    t[eV,1,1,c_uv].expr()
Exception raised:
    Traceback (most recent call last):
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.manifolds.differentiable.tensorfield.TensorField[36]>", line 1, in <module>
        t[eV,Integer(1),Integer(1),c_uv].expr()
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py", line 1472, in __getitem__
        return self.comp(frame)[args]
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py", line 1235, in comp
        return rst.comp(basis=basis, from_basis=from_basis)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield_paral.py", line 921, in comp
        from_basis=from_basis)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/tensor/modules/free_module_tensor.py", line 1076, in components
        "the components in the {}".format(basis))
    ValueError: no basis could be found for computing the components in the Coordinate frame (V, (d/du,d/dv))
**********************************************************************
File "manifolds/differentiable/tensorfield.py", line 298, in sage.manifolds.differentiable.tensorfield.TensorField
Failed example:
    type(t[eV,1,1,c_uv].expr())
Exception raised:
    Traceback (most recent call last):
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.manifolds.differentiable.tensorfield.TensorField[37]>", line 1, in <module>
        type(t[eV,Integer(1),Integer(1),c_uv].expr())
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py", line 1472, in __getitem__
        return self.comp(frame)[args]
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py", line 1235, in comp
        return rst.comp(basis=basis, from_basis=from_basis)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield_paral.py", line 921, in comp
        from_basis=from_basis)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/tensor/modules/free_module_tensor.py", line 1076, in components
        "the components in the {}".format(basis))
    ValueError: no basis could be found for computing the components in the Coordinate frame (V, (d/du,d/dv))
**********************************************************************
File "manifolds/differentiable/tensorfield.py", line 318, in sage.manifolds.differentiable.tensorfield.TensorField
Failed example:
    f = t(a,b)
Exception raised:
    Traceback (most recent call last):
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.manifolds.differentiable.tensorfield.TensorField[46]>", line 1, in <module>
        f = t(a,b)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield.py", line 2348, in __call__
        resu_rr = self_rr(*args_rr)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/manifolds/differentiable/tensorfield_paral.py", line 1461, in __call__
        return FreeModuleTensor.__call__(self_r, *args_r)
      File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage/tensor/modules/free_module_tensor.py", line 2130, in __call__
        raise ValueError("no common basis for the components")
    ValueError: no common basis for the components
Killing test manifolds/differentiable/tensorfield.py
----------------------------------------------------------------------
Doctests interrupted: 0/1 files tested
----------------------------------------------------------------------
Total time for all tests: 26.5 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 0.0 seconds
```

CC:  @egourgoulhon

Branch/Commit: 95bd140bddeb7bdc0f0fd2656206d41c8106429c

Reviewer: Eric Gourgoulhon

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24396





---

archive/issue_comments_461922.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n-On Ubuntu with no optional package and 8.2.beta0 compiled from source\n+The following fails when `--long` is not specified\n \n ```\n-sage -t manifolds/differentiable/tensorfield.py\n+$ sage -t manifolds/differentiable/tensorfield.py\n **********************************************************************\n File \"manifolds/differentiable/tensorfield.py\", line 295, in sage.manifolds.differentiable.tensorfield.TensorField\n Failed example:\n``````\n",
    "created_at": "2017-12-16T23:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461922",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
-On Ubuntu with no optional package and 8.2.beta0 compiled from source
+The following fails when `--long` is not specified
 
 ```
-sage -t manifolds/differentiable/tensorfield.py
+$ sage -t manifolds/differentiable/tensorfield.py
 **********************************************************************
 File "manifolds/differentiable/tensorfield.py", line 295, in sage.manifolds.differentiable.tensorfield.TensorField
 Failed example:
``````




---

archive/issue_comments_461923.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2017-12-16T23:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461923",
    "user": "https://github.com/videlec"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_461924.json:
```json
{
    "body": "Changing component from geometry to documentation.",
    "created_at": "2017-12-16T23:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461924",
    "user": "https://github.com/videlec"
}
```

Changing component from geometry to documentation.



---

archive/issue_comments_461925.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-16T23:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461925",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_461926.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[95bd140](https://git.sagemath.org/sage.git/commit?id=95bd140bddeb7bdc0f0fd2656206d41c8106429c)|`24396: fix doctest failure in manifolds`|",
    "created_at": "2017-12-16T23:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461926",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[95bd140](https://git.sagemath.org/sage.git/commit?id=95bd140bddeb7bdc0f0fd2656206d41c8106429c)|`24396: fix doctest failure in manifolds`|



---

archive/issue_comments_461927.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/24396\"",
    "created_at": "2017-12-16T23:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461927",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/24396"



---

archive/issue_comments_461928.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Delecroix\"",
    "created_at": "2017-12-16T23:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461928",
    "user": "https://github.com/videlec"
}
```

Changing author from "" to "Vincent Delecroix"



---

archive/issue_comments_461929.json:
```json
{
    "body": "Changing commit from \"\" to \"95bd140bddeb7bdc0f0fd2656206d41c8106429c\"",
    "created_at": "2017-12-16T23:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461929",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "95bd140bddeb7bdc0f0fd2656206d41c8106429c"



---

archive/issue_comments_461930.json:
```json
{
    "body": "<a id='comment:3'></a>\nThank you for the fix!",
    "created_at": "2017-12-19T09:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461930",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:3'></a>
Thank you for the fix!



---

archive/issue_comments_461931.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2017-12-19T09:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461931",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_461932.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-12-19T09:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461932",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_061667.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-22T23:29:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24396#event-61667"
}
```



---

archive/issue_comments_461933.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-22T23:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461933",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_461934.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/24396\" to \"95bd140bddeb7bdc0f0fd2656206d41c8106429c\"",
    "created_at": "2017-12-22T23:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24396",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24396#issuecomment-461934",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/24396" to "95bd140bddeb7bdc0f0fd2656206d41c8106429c"
