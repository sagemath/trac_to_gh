# Issue 24625: Some small improvements to polynomial_complex_arb

archive/issues_024388.json:
```json
{
    "body": "\n\n**Branch/Commit:** [d6dd6a0cc8bc231dacc8eb98c935db56f8fea459](https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Marc Mezzarobba\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24625\n\n",
    "closed_at": "2018-02-02T12:05:28Z",
    "created_at": "2018-01-31T16:34:28Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Some small improvements to polynomial_complex_arb",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24625",
    "user": "https://github.com/mezzarobba"
}
```


**Branch/Commit:** [d6dd6a0cc8bc231dacc8eb98c935db56f8fea459](https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459)

**Reviewer:** Travis Scrimshaw

**Author:** Marc Mezzarobba

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/24625





---

archive/issue_comments_468902.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2018-01-31T16:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468902",
    "user": "https://github.com/mezzarobba"
}
```


**Changing status** from new to needs_review.



---

archive/issue_comments_468903.json:
```json
{
    "body": "<a id='comment:2'></a>\nA few things:\n\n- You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.\n- The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?\n- The generic `revert_series` `EXAMPLES` is missing a second colon `:`. You should also add a test the generic code (which it would be good to have a more explicit message).\n- For both `revert_series`, you have a latex formatted `self`, which will look a little strange in the, e.g., html doc.",
    "created_at": "2018-01-31T17:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468903",
    "user": "https://github.com/tscrim"
}
```


<a id='comment:2'></a>
A few things:

- You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.
- The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?
- The generic `revert_series` `EXAMPLES` is missing a second colon `:`. You should also add a test the generic code (which it would be good to have a more explicit message).
- For both `revert_series`, you have a latex formatted `self`, which will look a little strange in the, e.g., html doc.



---

archive/issue_comments_468904.json:
```json
{
    "body": "<a id='comment:3'></a>\nThanks for your comments!\n\nReplying to [tscrim](#comment%3A2):\n> - You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.\n\n\nI thought the coercion system took care of that?\n\n> - The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?\n\n\nIt depends what you mean by that. For example, the reversion of a power series of valuation 2 would be a Puiseux series.\n\n> - The generic `revert_series` `EXAMPLES` is missing a second colon `:`. You should also add a test the generic code (which it would be good to have a more explicit message).\n> - For both `revert_series`, you have a latex formatted `self`, which will look a little strange in the, e.g., html doc.\n\n\nThanks, I'll fix that.",
    "created_at": "2018-01-31T18:33:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468904",
    "user": "https://github.com/mezzarobba"
}
```


<a id='comment:3'></a>
Thanks for your comments!

Replying to [tscrim](#comment%3A2):
> - You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.


I thought the coercion system took care of that?

> - The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?


It depends what you mean by that. For example, the reversion of a power series of valuation 2 would be a Puiseux series.

> - The generic `revert_series` `EXAMPLES` is missing a second colon `:`. You should also add a test the generic code (which it would be good to have a more explicit message).
> - For both `revert_series`, you have a latex formatted `self`, which will look a little strange in the, e.g., html doc.


Thanks, I'll fix that.



---

archive/issue_comments_468905.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5\">a72d138</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>\n",
    "created_at": "2018-01-31T18:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5">a72d138</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>




---

archive/issue_comments_468906.json:
```json
{
    "body": "**Changing commit** from \"[828a99ae42645a7cb472f67a87bea3d5cf233f2e](https://github.com/sagemath/sagetrac-mirror/commit/828a99ae42645a7cb472f67a87bea3d5cf233f2e)\" to \"[a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5](https://github.com/sagemath/sagetrac-mirror/commit/a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5)\".",
    "created_at": "2018-01-31T18:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[828a99ae42645a7cb472f67a87bea3d5cf233f2e](https://github.com/sagemath/sagetrac-mirror/commit/828a99ae42645a7cb472f67a87bea3d5cf233f2e)" to "[a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5](https://github.com/sagemath/sagetrac-mirror/commit/a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5)".



---

archive/issue_comments_468907.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [mmezzarobba](#comment%3A3):\n> Thanks for your comments!\n> \n> Replying to [tscrim](#comment%3A2):\n> > - You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.\n \n> \n> I thought the coercion system took care of that?\n\n\nI am not completely sure. I think it makes an attempt at executing the methods if they are defined. However, it never hurts to have a few tests. :)\n\n> > - The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?\n \n> \n> It depends what you mean by that. For example, the reversion of a power series of valuation 2 would be a Puiseux series.\n\n\nSo there is not a theoretical limitation on the result? (This is outside my mathematical knowledge, please bear with me.)",
    "created_at": "2018-01-31T18:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468907",
    "user": "https://github.com/tscrim"
}
```


<a id='comment:5'></a>
Replying to [mmezzarobba](#comment%3A3):
> Thanks for your comments!
> 
> Replying to [tscrim](#comment%3A2):
> > - You should add tests for `_rmul_` and `_lmul_` for bad inputs and make sure they fail gracefully.
 
> 
> I thought the coercion system took care of that?


I am not completely sure. I think it makes an attempt at executing the methods if they are defined. However, it never hurts to have a few tests. :)

> > - The `revert_series` for arb, are those actual things that prevent you from finding such an `f` or is it just something you cannot currently handle?
 
> 
> It depends what you mean by that. For example, the reversion of a power series of valuation 2 would be a Puiseux series.


So there is not a theoretical limitation on the result? (This is outside my mathematical knowledge, please bear with me.)



---

archive/issue_comments_468908.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [tscrim](#comment%3A5):\n> I am not completely sure. I think it makes an attempt at executing the methods if they are defined. However, it never hurts to have a few tests. :)\n\n\nFine :-)\n\n> So there is not a theoretical limitation on the result? (This is outside my mathematical knowledge, please bear with me.)\n\n\nSorry if my answer was not clear. It *is* a limitation if we want the result to be a power series (which I'd say we do, in this context), but not if we allow for more general series expansions.",
    "created_at": "2018-01-31T19:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468908",
    "user": "https://github.com/mezzarobba"
}
```


<a id='comment:6'></a>
Replying to [tscrim](#comment%3A5):
> I am not completely sure. I think it makes an attempt at executing the methods if they are defined. However, it never hurts to have a few tests. :)


Fine :-)

> So there is not a theoretical limitation on the result? (This is outside my mathematical knowledge, please bear with me.)


Sorry if my answer was not clear. It *is* a limitation if we want the result to be a power series (which I'd say we do, in this context), but not if we allow for more general series expansions.



---

archive/issue_comments_468909.json:
```json
{
    "body": "**Changing commit** from \"[a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5](https://github.com/sagemath/sagetrac-mirror/commit/a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5)\" to \"[f5b3aa3789bf8d563736b59e101311e54b523296](https://github.com/sagemath/sagetrac-mirror/commit/f5b3aa3789bf8d563736b59e101311e54b523296)\".",
    "created_at": "2018-01-31T19:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468909",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5](https://github.com/sagemath/sagetrac-mirror/commit/a72d138549b2fd7176d0a1d4f9bb12047f1ce4b5)" to "[f5b3aa3789bf8d563736b59e101311e54b523296](https://github.com/sagemath/sagetrac-mirror/commit/f5b3aa3789bf8d563736b59e101311e54b523296)".



---

archive/issue_comments_468910.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5b3aa3789bf8d563736b59e101311e54b523296\">f5b3aa3</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>\n",
    "created_at": "2018-01-31T19:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468910",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5b3aa3789bf8d563736b59e101311e54b523296">f5b3aa3</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>




---

archive/issue_comments_468911.json:
```json
{
    "body": "<a id='comment:8'></a>\nOkay, thank you for the explanations and updates. If you could just add something like\n\n```\nraise NotImplementedError(\"only implemented for certain base rings\")\n```\nand add a doctest showing the error is properly raised, then this is a positive review.",
    "created_at": "2018-01-31T19:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468911",
    "user": "https://github.com/tscrim"
}
```


<a id='comment:8'></a>
Okay, thank you for the explanations and updates. If you could just add something like

```
raise NotImplementedError("only implemented for certain base rings")
```
and add a doctest showing the error is properly raised, then this is a positive review.



---

archive/issue_comments_468912.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459\">d6dd6a0</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>\n",
    "created_at": "2018-01-31T19:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468912",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459">d6dd6a0</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>




---

archive/issue_comments_468913.json:
```json
{
    "body": "**Changing commit** from \"[f5b3aa3789bf8d563736b59e101311e54b523296](https://github.com/sagemath/sagetrac-mirror/commit/f5b3aa3789bf8d563736b59e101311e54b523296)\" to \"[d6dd6a0cc8bc231dacc8eb98c935db56f8fea459](https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459)\".",
    "created_at": "2018-01-31T19:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468913",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[f5b3aa3789bf8d563736b59e101311e54b523296](https://github.com/sagemath/sagetrac-mirror/commit/f5b3aa3789bf8d563736b59e101311e54b523296)" to "[d6dd6a0cc8bc231dacc8eb98c935db56f8fea459](https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459)".



---

archive/issue_comments_468914.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [tscrim](#comment%3A8):\n> Okay, thank you for the explanations and updates. If you could just add something like\n> \n> ```\n> raise NotImplementedError(\"only implemented for certain base rings\")\n> ```\n> and add a doctest showing the error is properly raised, then this is a positive review.\n\n\nDone, thanks a lot for the quick review!\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459\">d6dd6a0</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459\">d6dd6a0</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>\n",
    "created_at": "2018-01-31T19:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468914",
    "user": "https://github.com/mezzarobba"
}
```


<a id='comment:10'></a>
Replying to [tscrim](#comment%3A8):
> Okay, thank you for the explanations and updates. If you could just add something like
> 
> ```
> raise NotImplementedError("only implemented for certain base rings")
> ```
> and add a doctest showing the error is properly raised, then this is a positive review.


Done, thanks a lot for the quick review!

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459">d6dd6a0</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459">d6dd6a0</a></td><td><code>polynomial_complex_arb: revert_series()</code></td></tr></table>




---

archive/issue_comments_468915.json:
```json
{
    "body": "<a id='comment:11'></a>\nNo problem.",
    "created_at": "2018-01-31T21:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468915",
    "user": "https://github.com/tscrim"
}
```


<a id='comment:11'></a>
No problem.



---

archive/issue_comments_468916.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2018-01-31T21:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468916",
    "user": "https://github.com/tscrim"
}
```


**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_468917.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2018-01-31T21:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468917",
    "user": "https://github.com/tscrim"
}
```


**Changing status** from needs_review to positive_review.



---

archive/issue_comments_468918.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2018-02-02T12:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468918",
    "user": "https://github.com/vbraun"
}
```


**Resolution:** fixed



---

archive/issue_comments_468919.json:
```json
{
    "body": "**Changing branch** from \"[u/mmezzarobba/acb_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/acb_poly)\" to \"[d6dd6a0cc8bc231dacc8eb98c935db56f8fea459](https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459)\".",
    "created_at": "2018-02-02T12:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24625#issuecomment-468919",
    "user": "https://github.com/vbraun"
}
```


**Changing branch** from "[u/mmezzarobba/acb_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/acb_poly)" to "[d6dd6a0cc8bc231dacc8eb98c935db56f8fea459](https://github.com/sagemath/sagetrac-mirror/commit/d6dd6a0cc8bc231dacc8eb98c935db56f8fea459)".



---

archive/issue_events_070546.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-02T12:05:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24625",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24625#event-70546"
}
```

