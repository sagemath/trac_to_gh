# Issue 24175: Optimizations to generating rigged configurations

archive/issues_023938.json:
```json
{
    "body": "We get more speed by\n\n- Faster method to compute `phi` and `_calc_vacancy_number` for `i = oo`.\n- Cythonization of `RiggedPartition`.\n\nNote #24141 is not a strict dependency, but it does take those optimizations of the Kleber tree further.\n\n**CC:**  sage-combinat @anneschilling bsalisbury01\n\n**Keywords:** rigged configurations, crystals\n\n**Branch/Commit:** [65df5a1a720fb949838ad045aa4a526a3631f047](https://github.com/sagemath/sagetrac-mirror/commit/65df5a1a720fb949838ad045aa4a526a3631f047)\n\n**Reviewer:** Ben Salisbury\n\n**Author:** Travis Scrimshaw\n\n**Dependencies:** #24141\n\nIssue created by migration from https://trac.sagemath.org/ticket/24175\n\n",
    "closed_at": "2018-02-03T21:22:01Z",
    "created_at": "2017-11-08T05:55:59Z",
    "labels": [
        "component: performance",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Optimizations to generating rigged configurations",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24175",
    "user": "https://github.com/tscrim"
}
```
We get more speed by

- Faster method to compute `phi` and `_calc_vacancy_number` for `i = oo`.
- Cythonization of `RiggedPartition`.

Note #24141 is not a strict dependency, but it does take those optimizations of the Kleber tree further.

**CC:**  sage-combinat @anneschilling bsalisbury01

**Keywords:** rigged configurations, crystals

**Branch/Commit:** [65df5a1a720fb949838ad045aa4a526a3631f047](https://github.com/sagemath/sagetrac-mirror/commit/65df5a1a720fb949838ad045aa4a526a3631f047)

**Reviewer:** Ben Salisbury

**Author:** Travis Scrimshaw

**Dependencies:** #24141

Issue created by migration from https://trac.sagemath.org/ticket/24175





---

archive/issue_comments_437088.json:
```json
{
    "body": "**Commit:** [65df5a1a720fb949838ad045aa4a526a3631f047](https://github.com/sagemath/sagetrac-mirror/commit/65df5a1a720fb949838ad045aa4a526a3631f047)",
    "created_at": "2017-11-08T06:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24175#issuecomment-437088",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [65df5a1a720fb949838ad045aa4a526a3631f047](https://github.com/sagemath/sagetrac-mirror/commit/65df5a1a720fb949838ad045aa4a526a3631f047)



---

archive/issue_comments_437089.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2017-11-08T06:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24175#issuecomment-437089",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_437090.json:
```json
{
    "body": "**Branch:** [public/combinat/optimize_rc_generation-24175](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/optimize_rc_generation-24175)",
    "created_at": "2017-11-08T06:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24175#issuecomment-437090",
    "user": "https://github.com/tscrim"
}
```

**Branch:** [public/combinat/optimize_rc_generation-24175](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/optimize_rc_generation-24175)



---

archive/issue_comments_437091.json:
```json
{
    "body": "<a id='comment:1'></a>\n\n```\nsage: RC = RiggedConfigurations(['F',4,1], [[3,9]])\nsage: K = RC.kleber_tree()\nsage: %time len(RC.module_generators)\nCPU times: user 3.4 s, sys: 92 ms, total: 3.49 s\nWall time: 3.32 s\n71009\nsage: %time L = [mg.weight() for mg in RC.module_generators]\nCPU times: user 4.82 s, sys: 56 ms, total: 4.87 s\nWall time: 4.78 s\n```\nvs 8.1.beta9 with #24141:\n\n```\nsage: %time len(RC.module_generators)\nCPU times: user 4.12 s, sys: 80 ms, total: 4.2 s\nWall time: 4.18 s\n71009\nsage: %time L = [mg.weight() for mg in RC.module_generators]\nCPU times: user 7.42 s, sys: 52 ms, total: 7.47 s\nWall time: 7.42 s\n```\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82bc1fb522d3bedabdb639debf88f75d73d60d09\">82bc1fb</a></td><td><code>Initial optimization to avoid polytopes for small number of possible choices.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65df5a1a720fb949838ad045aa4a526a3631f047\">65df5a1</a></td><td><code>Faster _calc_vacancy_number and phi. Cythonized RiggedPartition.</code></td></tr></table>\n",
    "created_at": "2017-11-08T06:01:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24175#issuecomment-437091",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>

```
sage: RC = RiggedConfigurations(['F',4,1], [[3,9]])
sage: K = RC.kleber_tree()
sage: %time len(RC.module_generators)
CPU times: user 3.4 s, sys: 92 ms, total: 3.49 s
Wall time: 3.32 s
71009
sage: %time L = [mg.weight() for mg in RC.module_generators]
CPU times: user 4.82 s, sys: 56 ms, total: 4.87 s
Wall time: 4.78 s
```
vs 8.1.beta9 with #24141:

```
sage: %time len(RC.module_generators)
CPU times: user 4.12 s, sys: 80 ms, total: 4.2 s
Wall time: 4.18 s
71009
sage: %time L = [mg.weight() for mg in RC.module_generators]
CPU times: user 7.42 s, sys: 52 ms, total: 7.47 s
Wall time: 7.42 s
```

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82bc1fb522d3bedabdb639debf88f75d73d60d09">82bc1fb</a></td><td><code>Initial optimization to avoid polytopes for small number of possible choices.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65df5a1a720fb949838ad045aa4a526a3631f047">65df5a1</a></td><td><code>Faster _calc_vacancy_number and phi. Cythonized RiggedPartition.</code></td></tr></table>




---

archive/issue_comments_437092.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2018-02-03T00:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24175#issuecomment-437092",
    "user": "https://github.com/bsalisbury1"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_437093.json:
```json
{
    "body": "**Reviewer:** Ben Salisbury",
    "created_at": "2018-02-03T00:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24175#issuecomment-437093",
    "user": "https://github.com/bsalisbury1"
}
```

**Reviewer:** Ben Salisbury



---

archive/issue_comments_437094.json:
```json
{
    "body": "**Changing branch** from \"[public/combinat/optimize_rc_generation-24175](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/optimize_rc_generation-24175)\" to \"[65df5a1a720fb949838ad045aa4a526a3631f047](https://github.com/sagemath/sagetrac-mirror/commit/65df5a1a720fb949838ad045aa4a526a3631f047)\".",
    "created_at": "2018-02-03T21:22:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24175#issuecomment-437094",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/combinat/optimize_rc_generation-24175](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/optimize_rc_generation-24175)" to "[65df5a1a720fb949838ad045aa4a526a3631f047](https://github.com/sagemath/sagetrac-mirror/commit/65df5a1a720fb949838ad045aa4a526a3631f047)".



---

archive/issue_events_070006.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-03T21:22:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24175",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24175#event-70006"
}
```
