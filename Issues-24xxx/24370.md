# Issue 24370: Riemann surfaces: algebraization and automorphisms

archive/issues_024133.json:
```json
{
    "assignees": [],
    "body": "This is a small amount of new code for Riemann surfaces. Main features:\n\n* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;\n\n* algebraizing said tangential representations;\n\n* determining automorphism groups.\n\nKeywords: **endomorphisms, automorphisms**\n\nBranch/Commit: **[`4a98393`](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**\n\nReviewer: **Julian R\u00fcth**\n\nAuthor: **Nils Bruin, Jeroen Sijsling**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24370_\n\n",
    "closed_at": "2018-05-09T09:49:56Z",
    "created_at": "2017-12-12T14:03:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Riemann surfaces: algebraization and automorphisms",
    "type": "issue",
    "updated_at": "2018-05-09T09:49:56Z",
    "url": "https://github.com/sagemath/sage/issues/24370",
    "user": "https://github.com/JRSijsling"
}
```
This is a small amount of new code for Riemann surfaces. Main features:

* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;

* algebraizing said tangential representations;

* determining automorphism groups.

Keywords: **endomorphisms, automorphisms**

Branch/Commit: **[`4a98393`](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**

Reviewer: **Julian RÃ¼th**

Author: **Nils Bruin, Jeroen Sijsling**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/24370_





---

archive/issue_events_334950.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:03:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334950"
}
```



---

archive/issue_events_334951.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:03:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334951"
}
```



---

archive/issue_comments_368893.json:
```json
{
    "body": "Branch: **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**",
    "created_at": "2017-12-12T14:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368893",
    "user": "https://github.com/JRSijsling"
}
```

Branch: **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**



---

archive/issue_comments_368894.json:
```json
{
    "body": "Commit: **[`07d6c37`](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)**",
    "created_at": "2017-12-12T14:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368894",
    "user": "https://github.com/JRSijsling"
}
```

Commit: **[`07d6c37`](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)**



---

archive/issue_comments_368895.json:
```json
{
    "body": "Changed keywords from none to **endomorphisms, automorphisms**",
    "created_at": "2017-12-12T14:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368895",
    "user": "https://github.com/JRSijsling"
}
```

Changed keywords from none to **endomorphisms, automorphisms**



---

archive/issue_comments_368896.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n+This is a small amount of new code for Riemann surfaces. Main features:\n \n+* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;\n+\n+* algebraizing said tangential representations;\n+\n+* determining automorphism groups.\n``````\n",
    "created_at": "2017-12-12T14:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368896",
    "user": "https://github.com/JRSijsling"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
+This is a small amount of new code for Riemann surfaces. Main features:
 
+* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;
+
+* algebraizing said tangential representations;
+
+* determining automorphism groups.
``````




---

archive/issue_events_334952.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334952"
}
```



---

archive/issue_events_334953.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334953"
}
```



---

archive/issue_events_334954.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334954"
}
```



---

archive/issue_events_334955.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334955"
}
```



---

archive/issue_events_334956.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334956"
}
```



---

archive/issue_events_334957.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:44:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "title_is": "RIemann surfaces: algebraization and automorphisms",
    "title_was": "rs_alg_and_aut",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334957"
}
```



---

archive/issue_events_334958.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:44:33Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "title_is": "Riemann surfaces: algebraization and automorphisms",
    "title_was": "RIemann surfaces: algebraization and automorphisms",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334958"
}
```



---

archive/issue_comments_368897.json:
```json
{
    "body": "Author: **Jeroen Sijsling**",
    "created_at": "2017-12-12T14:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368897",
    "user": "https://github.com/JRSijsling"
}
```

Author: **Jeroen Sijsling**



---

archive/issue_comments_368898.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSorry for the lack of content so far, I messed up the branch and lost code. It is on the way...",
    "created_at": "2017-12-13T08:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368898",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:6" align="right">comment:6</div>

Sorry for the lack of content so far, I messed up the branch and lost code. It is on the way...



---

archive/issue_comments_368899.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d\"><code>5b6ffcb</code></a></td><td><code>Riemann surfaces: algebraization and automorphisms</code></td></tr></table>\n",
    "created_at": "2017-12-13T10:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368899",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d"><code>5b6ffcb</code></a></td><td><code>Riemann surfaces: algebraization and automorphisms</code></td></tr></table>




---

archive/issue_comments_368900.json:
```json
{
    "body": "Changed commit from **[`07d6c37`](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)** to **[`5b6ffcb`](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)**",
    "created_at": "2017-12-13T10:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368900",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`07d6c37`](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)** to **[`5b6ffcb`](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)**



---

archive/issue_comments_368901.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNice!\n\nFor each function, the documentation string should follow the rules listed at\n    http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content\n\nThat is: a short one-line sentence description followed by an optional longer paragraph.",
    "created_at": "2017-12-13T18:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368901",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Nice!

For each function, the documentation string should follow the rules listed at
    http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content

That is: a short one-line sentence description followed by an optional longer paragraph.



---

archive/issue_comments_368902.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nTo find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.",
    "created_at": "2017-12-13T18:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368902",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.



---

archive/issue_comments_368903.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nWhat is the point of taking power of `10` for everything? It is much more natural to consider precision in bits...",
    "created_at": "2017-12-13T18:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368903",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

What is the point of taking power of `10` for everything? It is much more natural to consider precision in bits...



---

archive/issue_events_334959.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-13T18:14:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334959"
}
```



---

archive/issue_events_334960.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-13T18:14:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334960"
}
```



---

archive/issue_comments_368904.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@videlec](#comment%3A9):\n> To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.\n\nmpmath has a multiprecision version if necessary but hopefully we can just get away with the single precision version here.\n\nhttp://mpmath.org/doc/current/matrices.html#matrix-factorization",
    "created_at": "2017-12-13T18:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368904",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@videlec](#comment%3A9):
> To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.

mpmath has a multiprecision version if necessary but hopefully we can just get away with the single precision version here.

http://mpmath.org/doc/current/matrices.html#matrix-factorization



---

archive/issue_comments_368905.json:
```json
{
    "body": "Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**",
    "created_at": "2017-12-14T03:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368905",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**



---

archive/issue_comments_368906.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nSome small updates. Your old branch should still be there if you prefer. I haven't amended the code to use LU decomp yet, but the code as it was didn't work as intended anyway.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45\"><code>179dac9</code></a></td><td><code>trac 24370: Some small fixes and improvements:</code></td></tr></table>\n",
    "created_at": "2017-12-14T04:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368906",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:14" align="right">comment:14</div>

Some small updates. Your old branch should still be there if you prefer. I haven't amended the code to use LU decomp yet, but the code as it was didn't work as intended anyway.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45"><code>179dac9</code></a></td><td><code>trac 24370: Some small fixes and improvements:</code></td></tr></table>




---

archive/issue_comments_368907.json:
```json
{
    "body": "Changed commit from **[`5b6ffcb`](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)** to **[`179dac9`](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)**",
    "created_at": "2017-12-14T04:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368907",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[`5b6ffcb`](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)** to **[`179dac9`](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)**



---

archive/issue_comments_368908.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAnother note: can we choose default values for the various epsilons based on the precision provided? It's probably good to have some margin but it probably doesn't need to be more than 5-10 bits.",
    "created_at": "2017-12-14T18:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368908",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Another note: can we choose default values for the various epsilons based on the precision provided? It's probably good to have some margin but it probably doesn't need to be more than 5-10 bits.



---

archive/issue_comments_368909.json:
```json
{
    "body": "Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**",
    "created_at": "2017-12-20T10:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368909",
    "user": "https://github.com/JRSijsling"
}
```

Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**



---

archive/issue_comments_368910.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThanks for all your comments!\n\nI pulled Nils' modifications (please check) and added functionality for homomorphisms and isomorphisms as well. I will soon add some files that test this in Attachments.\n\nI modified the descriptions to start with a single one-line summary. I have also used precision where relevant, and in bits, not in decimal digits.\n\nThere is just one problem remaining, which is the extraction of an invertible submatrix. I have used scipy.linalg.lu, but it gives an extremely uninformative error message. Moreover, that function seems to work for some matrices and fail for others, which does not help to isolate the source of the error. To see what I am talking about, try using invertible_submatrix_lu. I truly have no idea what to do to get this to work, but perhaps someone else sees a simple fix.",
    "created_at": "2017-12-20T10:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368910",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:17" align="right">comment:17</div>

Thanks for all your comments!

I pulled Nils' modifications (please check) and added functionality for homomorphisms and isomorphisms as well. I will soon add some files that test this in Attachments.

I modified the descriptions to start with a single one-line summary. I have also used precision where relevant, and in bits, not in decimal digits.

There is just one problem remaining, which is the extraction of an invertible submatrix. I have used scipy.linalg.lu, but it gives an extremely uninformative error message. Moreover, that function seems to work for some matrices and fail for others, which does not help to isolate the source of the error. To see what I am talking about, try using invertible_submatrix_lu. I truly have no idea what to do to get this to work, but perhaps someone else sees a simple fix.



---

archive/issue_comments_368911.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136\"><code>b1d4a83</code></a></td><td><code>Trac 24370: Added suggestions and isomorphisms</code></td></tr></table>\n",
    "created_at": "2017-12-20T11:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368911",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136"><code>b1d4a83</code></a></td><td><code>Trac 24370: Added suggestions and isomorphisms</code></td></tr></table>




---

archive/issue_comments_368912.json:
```json
{
    "body": "Changed commit from **[`179dac9`](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)** to **[`b1d4a83`](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)**",
    "created_at": "2017-12-20T11:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368912",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`179dac9`](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)** to **[`b1d4a83`](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)**



---

archive/issue_comments_368913.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe\"><code>9e5a396</code></a></td><td><code>Trac 24370: Further improvements</code></td></tr></table>\n",
    "created_at": "2017-12-20T18:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368913",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe"><code>9e5a396</code></a></td><td><code>Trac 24370: Further improvements</code></td></tr></table>




---

archive/issue_comments_368914.json:
```json
{
    "body": "Changed commit from **[`b1d4a83`](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)** to **[`9e5a396`](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)**",
    "created_at": "2017-12-20T18:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368914",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b1d4a83`](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)** to **[`9e5a396`](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)**



---

archive/issue_comments_368915.json:
```json
{
    "body": "Attachment: **[test-lu.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-lu.sage.gz)**",
    "created_at": "2017-12-20T18:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368915",
    "user": "https://github.com/JRSijsling"
}
```

Attachment: **[test-lu.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-lu.sage.gz)**



---

archive/issue_comments_368916.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAttachments now contains examples of failing LU decompositions.",
    "created_at": "2017-12-20T18:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368916",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:20" align="right">comment:20</div>

Attachments now contains examples of failing LU decompositions.



---

archive/issue_comments_368917.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nscipy failure: You're hitting fortran code here. It's hard to imagine it would be capable of working with sage multiprecision floats. If you convert to python standard complex floats it's probably OK:\n\n```\ndef invertible_submatrix_lu(M):\n    Mt = M.transpose()\n    rowsMt = Mt.rows()\n    colsMt = Mt.columns()\n    ccMt=scipy.matrix([[p.__complex__() for p in r] for r in Mt ])\n    P, L, U = lu(ccMt)\n    rowsP = matrix(P).rows()\n    col_nums = [ ]\n    for i in range(len(rowsP)):\n        if any([ (rowsP[i][j].abs() > 0.1) for j in range(len(colsMt)) ]):\n            col_nums.append(i)\n    subM = Matrix([ rowsMt[i] for i in col_nums ]).transpose()\n    return subM, col_nums\n```\nAt least it helps with the example you gave.\n\nAnother observation: \n\nThe first block of the large period matrix `P=(A|B)` MUST be invertible (these are the integrals wrt to first half of the symplectic basis). In fact, to get the small period matrix we compute `A^(-1)*B` anyway. So: is it worth looking for a \"better\" invertible submatrix than just the first block? I doubt it.\n\nI've looked at the examples you've posted. `lu` decomposition often chooses something else than the first `g` columns, but the determinant of the matrix it chooses isn't always larger in absolute value (that's not the only measure: we'd like the matrix to be well-conditioned as well).\n\nSo I think you can defend just not doing any work and just taking the first block. I suspect that should work about as well. If you have examples to the contrary it'll be interesting to see, of course!",
    "created_at": "2017-12-20T22:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368917",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:21" align="right">comment:21</div>

scipy failure: You're hitting fortran code here. It's hard to imagine it would be capable of working with sage multiprecision floats. If you convert to python standard complex floats it's probably OK:

```
def invertible_submatrix_lu(M):
    Mt = M.transpose()
    rowsMt = Mt.rows()
    colsMt = Mt.columns()
    ccMt=scipy.matrix([[p.__complex__() for p in r] for r in Mt ])
    P, L, U = lu(ccMt)
    rowsP = matrix(P).rows()
    col_nums = [ ]
    for i in range(len(rowsP)):
        if any([ (rowsP[i][j].abs() > 0.1) for j in range(len(colsMt)) ]):
            col_nums.append(i)
    subM = Matrix([ rowsMt[i] for i in col_nums ]).transpose()
    return subM, col_nums
```
At least it helps with the example you gave.

Another observation: 

The first block of the large period matrix `P=(A|B)` MUST be invertible (these are the integrals wrt to first half of the symplectic basis). In fact, to get the small period matrix we compute `A^(-1)*B` anyway. So: is it worth looking for a "better" invertible submatrix than just the first block? I doubt it.

I've looked at the examples you've posted. `lu` decomposition often chooses something else than the first `g` columns, but the determinant of the matrix it chooses isn't always larger in absolute value (that's not the only measure: we'd like the matrix to be well-conditioned as well).

So I think you can defend just not doing any work and just taking the first block. I suspect that should work about as well. If you have examples to the contrary it'll be interesting to see, of course!



---

archive/issue_comments_368918.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThank you for giving me two solutions. What you suggest already convinces me that we should just take the first g columns. I did not do this before simply because of previous habits in circumstances where the first columns did not always give an invertible submatrix. Still, I should have realized that things do work out in this context. New version coming up.",
    "created_at": "2017-12-20T22:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368918",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:22" align="right">comment:22</div>

Thank you for giving me two solutions. What you suggest already convinces me that we should just take the first g columns. I did not do this before simply because of previous habits in circumstances where the first columns did not always give an invertible submatrix. Still, I should have realized that things do work out in this context. New version coming up.



---

archive/issue_comments_368919.json:
```json
{
    "body": "Changed commit from **[`9e5a396`](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)** to **[`0b64696`](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)**",
    "created_at": "2017-12-20T22:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368919",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e5a396`](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)** to **[`0b64696`](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)**



---

archive/issue_comments_368920.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88\"><code>0b64696</code></a></td><td><code>Trac 24370: Simplified invertible submatrix</code></td></tr></table>\n",
    "created_at": "2017-12-20T22:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368920",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88"><code>0b64696</code></a></td><td><code>Trac 24370: Simplified invertible submatrix</code></td></tr></table>




---

archive/issue_comments_368921.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nYou should pull out the inverse from the loop, of course :-).\nFurthermore, I'm not so sure that explicitly changing to the base ring of Q is better, so why not leave it to the system to choose the appropriate precision (it would probably choose the minimum of the two). Perhaps you shouldn't even base change back to `P.base_ring()` for that reason.\n\nIf course, if you think we have enough precision lying around already to get better results by doing the intermediate computations at a higher precision then you should do that explicitly. So I think the body can be shortened to something along the lines of:\n\n```\n        P = self.period_matrix()\n        Q = other.period_matrix()\n        g = P.nrows()\n        s = range(g)\n        subP = (P[:g,:g]).inverse()\n        Ts = [(Q*R)[:,:g].transpose() * subP for R in Rs]\n        return [ T.change_ring(P.base_ring()) for T in Ts ]\n```\n(if you need the number of rows you shouldn't ask for the length of the list constructed from the rows. Slicing vs. submatrix is probably just a matter of taste)\n\nAnother point: I see that \"automorphism group\" now returns a permutation group. I think you should also return the action of the group on something meaningful (returning the thing as a matrix group as was done previously did that).",
    "created_at": "2017-12-20T23:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368921",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:24" align="right">comment:24</div>

You should pull out the inverse from the loop, of course :-).
Furthermore, I'm not so sure that explicitly changing to the base ring of Q is better, so why not leave it to the system to choose the appropriate precision (it would probably choose the minimum of the two). Perhaps you shouldn't even base change back to `P.base_ring()` for that reason.

If course, if you think we have enough precision lying around already to get better results by doing the intermediate computations at a higher precision then you should do that explicitly. So I think the body can be shortened to something along the lines of:

```
        P = self.period_matrix()
        Q = other.period_matrix()
        g = P.nrows()
        s = range(g)
        subP = (P[:g,:g]).inverse()
        Ts = [(Q*R)[:,:g].transpose() * subP for R in Rs]
        return [ T.change_ring(P.base_ring()) for T in Ts ]
```
(if you need the number of rows you shouldn't ask for the length of the list constructed from the rows. Slicing vs. submatrix is probably just a matter of taste)

Another point: I see that "automorphism group" now returns a permutation group. I think you should also return the action of the group on something meaningful (returning the thing as a matrix group as was done previously did that).



---

archive/issue_comments_368922.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nPerfect. There was no transpose needed, but your code suggestion is much better. I have also reverted to returning a matrix group. This is also better if one ever wants to divide out by -1, like in the non-hyperelliptic case, and the example shows how to obtain a permutation group anyway.",
    "created_at": "2017-12-21T07:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368922",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:25" align="right">comment:25</div>

Perfect. There was no transpose needed, but your code suggestion is much better. I have also reverted to returning a matrix group. This is also better if one ever wants to divide out by -1, like in the non-hyperelliptic case, and the example shows how to obtain a permutation group anyway.



---

archive/issue_comments_368923.json:
```json
{
    "body": "Changed commit from **[`0b64696`](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)** to **[`79861be`](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)**",
    "created_at": "2017-12-21T07:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368923",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0b64696`](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)** to **[`79861be`](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)**



---

archive/issue_comments_368924.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039\"><code>79861be</code></a></td><td><code>Trace 24370: Further improvements</code></td></tr></table>\n",
    "created_at": "2017-12-21T07:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368924",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039"><code>79861be</code></a></td><td><code>Trace 24370: Further improvements</code></td></tr></table>




---

archive/issue_comments_368925.json:
```json
{
    "body": "Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**",
    "created_at": "2017-12-30T04:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368925",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**



---

archive/issue_comments_368926.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nCompute matrix inverse using LU decomposition. This should be numerically a little better behaved.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432\"><code>3310e22</code></a></td><td><code>Implement numerical matrix inverse via LU decomposition</code></td></tr></table>\n",
    "created_at": "2017-12-30T04:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368926",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:28" align="right">comment:28</div>

Compute matrix inverse using LU decomposition. This should be numerically a little better behaved.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432"><code>3310e22</code></a></td><td><code>Implement numerical matrix inverse via LU decomposition</code></td></tr></table>




---

archive/issue_comments_368927.json:
```json
{
    "body": "Changed commit from **[`79861be`](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)** to **[`3310e22`](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)**",
    "created_at": "2017-12-30T04:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368927",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[`79861be`](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)** to **[`3310e22`](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)**



---

archive/issue_comments_368928.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280\"><code>a2ebec5</code></a></td><td><code>Equip RiemannSurfaceSum with \"genus\" (being the sum of the genera of the terms)</code></td></tr></table>\n",
    "created_at": "2018-01-03T00:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368928",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280"><code>a2ebec5</code></a></td><td><code>Equip RiemannSurfaceSum with "genus" (being the sum of the genera of the terms)</code></td></tr></table>




---

archive/issue_comments_368929.json:
```json
{
    "body": "Changed commit from **[`3310e22`](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)** to **[`a2ebec5`](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)**",
    "created_at": "2018-01-03T00:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368929",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3310e22`](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)** to **[`a2ebec5`](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)**



---

archive/issue_comments_368930.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nEnsuring that this works:\n\n```\nsage: E=EllipticCurve([0,1])\nsage: SE=E.riemann_surface()\nsage: J=SE+SE\nsage: J.symplectic_automorphism_group()\nMatrix group over Integer Ring with 36 generators\n```",
    "created_at": "2018-01-03T00:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368930",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:30" align="right">comment:30</div>

Ensuring that this works:

```
sage: E=EllipticCurve([0,1])
sage: SE=E.riemann_surface()
sage: J=SE+SE
sage: J.symplectic_automorphism_group()
Matrix group over Integer Ring with 36 generators
```



---

archive/issue_comments_368931.json:
```json
{
    "body": "Changed author from **Jeroen Sijsling** to **Nils Bruin, Jeroen Sijsling**",
    "created_at": "2018-01-07T19:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368931",
    "user": "https://github.com/JRSijsling"
}
```

Changed author from **Jeroen Sijsling** to **Nils Bruin, Jeroen Sijsling**



---

archive/issue_comments_368932.json:
```json
{
    "body": "Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**",
    "created_at": "2018-01-07T19:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368932",
    "user": "https://github.com/JRSijsling"
}
```

Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**



---

archive/issue_comments_368933.json:
```json
{
    "body": "Attachment: **[test-other.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-other.sage.gz)**",
    "created_at": "2018-01-07T19:04:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368933",
    "user": "https://github.com/JRSijsling"
}
```

Attachment: **[test-other.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-other.sage.gz)**



---

archive/issue_comments_368934.json:
```json
{
    "body": "Attachment: **[test-other.2.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-other.2.sage.gz)**",
    "created_at": "2018-01-07T19:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368934",
    "user": "https://github.com/JRSijsling"
}
```

Attachment: **[test-other.2.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-other.2.sage.gz)**



---

archive/issue_comments_368935.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nAttachment: **[test-self.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-self.sage.gz)**\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79\"><code>6553907</code></a></td><td><code>Typo in docstring</code></td></tr></table>\n",
    "created_at": "2018-01-07T21:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">comment:33</div>

Attachment: **[test-self.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-self.sage.gz)**

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79"><code>6553907</code></a></td><td><code>Typo in docstring</code></td></tr></table>




---

archive/issue_comments_368936.json:
```json
{
    "body": "Changed commit from **[`a2ebec5`](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)** to **[`6553907`](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)**",
    "created_at": "2018-01-07T21:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368936",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a2ebec5`](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)** to **[`6553907`](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)**



---

archive/issue_comments_368937.json:
```json
{
    "body": "Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**",
    "created_at": "2018-01-08T23:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368937",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**



---

archive/issue_comments_368938.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nvery temporary patch to get nonsquare LU decomp from mpmath.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6\"><code>f2ccf44</code></a></td><td><code>TEMPORARY COMMIT. DO NOT BUILD ON THIS!</code></td></tr></table>\n",
    "created_at": "2018-01-08T23:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368938",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:35" align="right">comment:35</div>

very temporary patch to get nonsquare LU decomp from mpmath.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6"><code>f2ccf44</code></a></td><td><code>TEMPORARY COMMIT. DO NOT BUILD ON THIS!</code></td></tr></table>




---

archive/issue_comments_368939.json:
```json
{
    "body": "Changed commit from **[`6553907`](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)** to **[`f2ccf44`](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)**",
    "created_at": "2018-01-08T23:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368939",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[`6553907`](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)** to **[`f2ccf44`](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)**



---

archive/issue_comments_368940.json:
```json
{
    "body": "Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**",
    "created_at": "2018-01-11T21:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368940",
    "user": "https://github.com/JRSijsling"
}
```

Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**



---

archive/issue_comments_368941.json:
```json
{
    "body": "Changed commit from **[`f2ccf44`](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)** to **[`13c6d4f`](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)**",
    "created_at": "2018-01-12T09:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368941",
    "user": "https://github.com/JRSijsling"
}
```

Changed commit from **[`f2ccf44`](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)** to **[`13c6d4f`](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)**



---

archive/issue_events_334961.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2018-01-12T09:28:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334961"
}
```



---

archive/issue_events_334962.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2018-01-12T09:28:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334962"
}
```



---

archive/issue_comments_368942.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f\"><code>13c6d4f</code></a></td><td><code>Use first g columns of period matrix instead of lu</code></td></tr></table>\n",
    "created_at": "2018-01-12T09:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368942",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:37"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f"><code>13c6d4f</code></a></td><td><code>Use first g columns of period matrix instead of lu</code></td></tr></table>




---

archive/issue_comments_368943.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873\"><code>65bf692</code></a></td><td><code>Use first g columns for inverse instead of lu</code></td></tr></table>\n",
    "created_at": "2018-01-12T10:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368943",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873"><code>65bf692</code></a></td><td><code>Use first g columns for inverse instead of lu</code></td></tr></table>




---

archive/issue_comments_368944.json:
```json
{
    "body": "Changed commit from **[`13c6d4f`](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)** to **[`65bf692`](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)**",
    "created_at": "2018-01-12T10:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368944",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`13c6d4f`](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)** to **[`65bf692`](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)**



---

archive/issue_comments_368945.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nTODO: I think it could be quite common for people to first compute the endomorphism ring (which is expensive) and then compute the automorphism group. Currently this is quite horrible because we don't cache the result of the endomorphism ring computation. We should have something in the user interface that allows re-use of precomputed endomorphism ring info. Given that the endomorphism computation is subject to tuning parameters (although in practice this seems fairly robust), I can see why we might not want to cache  the result outright. But then at least we might want an interface, comparable to how `tangent_representation_*` works, that can take as input a list of matrices and then computes the automorphisms from it. That's actually something that should only need the Rosati involution.",
    "created_at": "2018-01-17T11:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368945",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:39" align="right">comment:39</div>

TODO: I think it could be quite common for people to first compute the endomorphism ring (which is expensive) and then compute the automorphism group. Currently this is quite horrible because we don't cache the result of the endomorphism ring computation. We should have something in the user interface that allows re-use of precomputed endomorphism ring info. Given that the endomorphism computation is subject to tuning parameters (although in practice this seems fairly robust), I can see why we might not want to cache  the result outright. But then at least we might want an interface, comparable to how `tangent_representation_*` works, that can take as input a list of matrices and then computes the automorphisms from it. That's actually something that should only need the Rosati involution.



---

archive/issue_comments_368946.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThat is true. I will add `Rs` as a keyword argument to the `symplectic_*` methods, so that they are calculated by default but can be passed by the user who already has the endomorphism/homomorphism basis.",
    "created_at": "2018-01-18T09:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368946",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:40" align="right">comment:40</div>

That is true. I will add `Rs` as a keyword argument to the `symplectic_*` methods, so that they are calculated by default but can be passed by the user who already has the endomorphism/homomorphism basis.



---

archive/issue_comments_368947.json:
```json
{
    "body": "Changed commit from **[`65bf692`](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)** to **[`f8d70fa`](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)**",
    "created_at": "2018-01-18T09:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368947",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`65bf692`](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)** to **[`f8d70fa`](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)**



---

archive/issue_comments_368948.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45\"><code>f8d70fa</code></a></td><td><code>Add precomputed bases as keyword arguments</code></td></tr></table>\n",
    "created_at": "2018-01-18T09:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368948",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45"><code>f8d70fa</code></a></td><td><code>Add precomputed bases as keyword arguments</code></td></tr></table>




---

archive/issue_comments_368949.json:
```json
{
    "body": "Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)**",
    "created_at": "2018-02-09T11:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368949",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)**



---

archive/issue_comments_368950.json:
```json
{
    "body": "Changed commit from **[`f8d70fa`](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)** to none",
    "created_at": "2018-02-09T11:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368950",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[`f8d70fa`](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)** to none



---

archive/issue_comments_368951.json:
```json
{
    "body": "Changed branch from **[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**",
    "created_at": "2018-02-09T11:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368951",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**



---

archive/issue_comments_368952.json:
```json
{
    "body": "Commit: **[`7c548bb`](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)**",
    "created_at": "2018-02-19T12:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368952",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`7c548bb`](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)**



---

archive/issue_comments_368953.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb\"><code>7c548bb</code></a></td><td><code>Make choice of base ring in integer_matrix_relations robust in the face of different precisions.</code></td></tr></table>\n",
    "created_at": "2018-02-19T12:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368953",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb"><code>7c548bb</code></a></td><td><code>Make choice of base ring in integer_matrix_relations robust in the face of different precisions.</code></td></tr></table>




---

archive/issue_comments_368954.json:
```json
{
    "body": "Work Issues: **merge conflicts**",
    "created_at": "2018-03-23T21:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368954",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **merge conflicts**



---

archive/issue_comments_368955.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c\"><code>05e7855</code></a></td><td><code>Merge remote-tracking branch 'origin/u/nbruin/rs_alg_and_aut' into develop</code></td></tr></table>\n",
    "created_at": "2018-03-24T03:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368955",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c"><code>05e7855</code></a></td><td><code>Merge remote-tracking branch 'origin/u/nbruin/rs_alg_and_aut' into develop</code></td></tr></table>




---

archive/issue_comments_368956.json:
```json
{
    "body": "Changed commit from **[`7c548bb`](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)** to **[`05e7855`](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)**",
    "created_at": "2018-03-24T03:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368956",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7c548bb`](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)** to **[`05e7855`](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)**



---

archive/issue_comments_368957.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nMerge conflict resolved (it wasn't clear to me what the conflict was, actually). This ticket has been tested quite a bit and contains very useful code. Ready to be reviewed and merged!\n\nAlso: patchbots are reporting no problems due to this ticket.",
    "created_at": "2018-03-24T04:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368957",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:47" align="right">comment:47</div>

Merge conflict resolved (it wasn't clear to me what the conflict was, actually). This ticket has been tested quite a bit and contains very useful code. Ready to be reviewed and merged!

Also: patchbots are reporting no problems due to this ticket.



---

archive/issue_events_334963.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-24T04:02:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334963"
}
```



---

archive/issue_events_334964.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-24T04:02:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334964"
}
```



---

archive/issue_comments_368958.json:
```json
{
    "body": "Changed commit from **[`05e7855`](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)** to **[`54fe63a`](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)**",
    "created_at": "2018-03-26T02:33:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368958",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`05e7855`](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)** to **[`54fe63a`](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)**



---

archive/issue_comments_368959.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0\"><code>54fe63a</code></a></td><td><code>Equip homology computation with cache for computed arguments (for orientation computations)</code></td></tr></table>\n",
    "created_at": "2018-03-26T02:33:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368959",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0"><code>54fe63a</code></a></td><td><code>Equip homology computation with cache for computed arguments (for orientation computations)</code></td></tr></table>




---

archive/issue_comments_368960.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nSurprisingly, argument computation (used in the intersection pairing) can impose a quite measurable cost, so caching it makes sense. For instance with\n\n```\nR.<x,y>=QQ[]\nf = x^10 + y^10 + x^3*y^3 + 1\nC=Curve(f)\nS=C.riemann_surface()\n%time M=S.period_matrix()\n```\n**PRE:**\n\n```\nCPU times: user 5min 56s, sys: 151 ms, total: 5min 56s\nWall time: 5min 57s\n```\n**POST:**\n\n```\nCPU times: user 3min 8s, sys: 104 ms, total: 3min 8s\nWall time: 3min 9s\n```",
    "created_at": "2018-03-26T02:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368960",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:49" align="right">comment:49</div>

Surprisingly, argument computation (used in the intersection pairing) can impose a quite measurable cost, so caching it makes sense. For instance with

```
R.<x,y>=QQ[]
f = x^10 + y^10 + x^3*y^3 + 1
C=Curve(f)
S=C.riemann_surface()
%time M=S.period_matrix()
```
**PRE:**

```
CPU times: user 5min 56s, sys: 151 ms, total: 5min 56s
Wall time: 5min 57s
```
**POST:**

```
CPU times: user 3min 8s, sys: 104 ms, total: 3min 8s
Wall time: 3min 9s
```



---

archive/issue_comments_368961.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8\"><code>47a2f30</code></a></td><td><code>Make sure documentation actually is processed as part of the reference manual</code></td></tr></table>\n",
    "created_at": "2018-03-28T17:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368961",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8"><code>47a2f30</code></a></td><td><code>Make sure documentation actually is processed as part of the reference manual</code></td></tr></table>




---

archive/issue_comments_368962.json:
```json
{
    "body": "Changed commit from **[`54fe63a`](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)** to **[`47a2f30`](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)**",
    "created_at": "2018-03-28T17:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368962",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`54fe63a`](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)** to **[`47a2f30`](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)**



---

archive/issue_comments_368963.json:
```json
{
    "body": "Changed work issues from **merge conflicts** to none",
    "created_at": "2018-03-29T11:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368963",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **merge conflicts** to none



---

archive/issue_comments_368964.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2018-03-29T11:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368964",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian RÃ¼th**



---

archive/issue_comments_368965.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nFeel free to set this to positive review if you have checked that all tests actually pass. (The patchbot produces lots of errors but I guess that this is some sort of noise.)",
    "created_at": "2018-03-29T11:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368965",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:52" align="right">comment:52</div>

Feel free to set this to positive review if you have checked that all tests actually pass. (The patchbot produces lots of errors but I guess that this is some sort of noise.)



---

archive/issue_comments_368966.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThank you, Julian!\n\nI've run the doctests and I get good results:\n\nMy own build has some failing tests, but those aren't due to the commits here; and neither are the problems that the bots report. So: positive it is. Great work.\n\n(we should watch the ticket in case it bitrots before it gets merged)",
    "created_at": "2018-03-29T16:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368966",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:53" align="right">comment:53</div>

Thank you, Julian!

I've run the doctests and I get good results:

My own build has some failing tests, but those aren't due to the commits here; and neither are the problems that the bots report. So: positive it is. Great work.

(we should watch the ticket in case it bitrots before it gets merged)



---

archive/issue_events_334965.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-29T16:02:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334965"
}
```



---

archive/issue_events_334966.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-29T16:02:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334966"
}
```



---

archive/issue_events_334967.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-07T17:59:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334967"
}
```



---

archive/issue_events_334968.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-07T17:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334968"
}
```



---

archive/issue_comments_368967.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nThe release manager might not agree that I'm setting this to needs_work, but this breaks with #24742:\n\n```\nsage -t src/sage/schemes/riemann_surfaces/riemann_surface.py\n**********************************************************************\nFile \"src/sage/schemes/riemann_surfaces/riemann_surface.py\", line 353, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface\nFailed example:\n    A = S.endomorphism_basis()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface[11]>\", line 1, in <module>\n        A = S.endomorphism_basis()\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 1693, in endomorphism_basis\n        return integer_matrix_relations(M,M,b,r)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 2089, in integer_matrix_relations\n        A = Matrix(R,g1,g2,V[:g1*g2])\n      File \"sage/matrix/constructor.pyx\", line 626, in sage.matrix.constructor.MatrixFactory.__call__ (build/cythonized/sage/matrix/constructor.c:2519)\n        return MatrixArgs(*args, **kwds).matrix()\n      File \"sage/matrix/args.pyx\", line 646, in sage.matrix.args.MatrixArgs.matrix (build/cythonized/sage/matrix/args.c:7896)\n        self.finalize()\n      File \"sage/matrix/args.pyx\", line 853, in sage.matrix.args.MatrixArgs.finalize (build/cythonized/sage/matrix/args.c:9655)\n        raise TypeError(f\"unable to convert {self.entries!r} to a matrix\")\n    TypeError: unable to convert ['a1'] to a matrix\n**********************************************************************\n```\n\nThis is because #24742 disallows using strings to construct matrix entries.",
    "created_at": "2018-05-07T17:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368967",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">comment:54</div>

The release manager might not agree that I'm setting this to needs_work, but this breaks with #24742:

```
sage -t src/sage/schemes/riemann_surfaces/riemann_surface.py
**********************************************************************
File "src/sage/schemes/riemann_surfaces/riemann_surface.py", line 353, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface
Failed example:
    A = S.endomorphism_basis()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface[11]>", line 1, in <module>
        A = S.endomorphism_basis()
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 1693, in endomorphism_basis
        return integer_matrix_relations(M,M,b,r)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 2089, in integer_matrix_relations
        A = Matrix(R,g1,g2,V[:g1*g2])
      File "sage/matrix/constructor.pyx", line 626, in sage.matrix.constructor.MatrixFactory.__call__ (build/cythonized/sage/matrix/constructor.c:2519)
        return MatrixArgs(*args, **kwds).matrix()
      File "sage/matrix/args.pyx", line 646, in sage.matrix.args.MatrixArgs.matrix (build/cythonized/sage/matrix/args.c:7896)
        self.finalize()
      File "sage/matrix/args.pyx", line 853, in sage.matrix.args.MatrixArgs.finalize (build/cythonized/sage/matrix/args.c:9655)
        raise TypeError(f"unable to convert {self.entries!r} to a matrix")
    TypeError: unable to convert ['a1'] to a matrix
**********************************************************************
```

This is because #24742 disallows using strings to construct matrix entries.



---

archive/issue_comments_368968.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI think that the old code\n\n```\n    names = [\"%s%s\"%(n, i+1) for n in [\"a\",\"b\",\"c\",\"d\"] for i in range(g**2)]\n    R = PolynomialRing(CC, names)\n    vars = R.gens()\n    A = Matrix(R, g, g, vars[:g**2])\n    B = Matrix(R, g, g, vars[g**2:2*g**2])\n    C = Matrix(R, g, g, vars[2*g**2:3*g**2])\n    D = Matrix(R, g, g, vars[3*g**2:4*g**2])\n```\nis clearly better than the new code from this ticket\n\n```\n    V = [\"%s%s\"%(n,i) for n in [\"a\",\"b\",\"c\",\"d\"] for i in srange(1,1+g1*g2)]\n    R = PolynomialRing(CC,V)\n    A = Matrix(R,g1,g2,V[:g1*g2])\n    B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])\n    C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])\n    D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])\n```",
    "created_at": "2018-05-07T18:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368968",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">comment:55</div>

I think that the old code

```
    names = ["%s%s"%(n, i+1) for n in ["a","b","c","d"] for i in range(g**2)]
    R = PolynomialRing(CC, names)
    vars = R.gens()
    A = Matrix(R, g, g, vars[:g**2])
    B = Matrix(R, g, g, vars[g**2:2*g**2])
    C = Matrix(R, g, g, vars[2*g**2:3*g**2])
    D = Matrix(R, g, g, vars[3*g**2:4*g**2])
```
is clearly better than the new code from this ticket

```
    V = ["%s%s"%(n,i) for n in ["a","b","c","d"] for i in srange(1,1+g1*g2)]
    R = PolynomialRing(CC,V)
    A = Matrix(R,g1,g2,V[:g1*g2])
    B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])
    C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])
    D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])
```



---

archive/issue_comments_368969.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@jdemeyer](#comment%3A55):\n> I think that the old code\n> \n> ```\n>     names = [\"%s%s\"%(n, i+1) for n in [\"a\",\"b\",\"c\",\"d\"] for i in range(g**2)]\n>     R = PolynomialRing(CC, names)\n>     vars = R.gens()\n>     A = Matrix(R, g, g, vars[:g**2])\n>     B = Matrix(R, g, g, vars[g**2:2*g**2])\n>     C = Matrix(R, g, g, vars[2*g**2:3*g**2])\n>     D = Matrix(R, g, g, vars[3*g**2:4*g**2])\n> ```\n> is clearly better than the new code from this ticket\n> \n> ```\n>     V = [\"%s%s\"%(n,i) for n in [\"a\",\"b\",\"c\",\"d\"] for i in srange(1,1+g1*g2)]\n>     R = PolynomialRing(CC,V)\n>     A = Matrix(R,g1,g2,V[:g1*g2])\n>     B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])\n>     C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])\n>     D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])\n> ```\n\nI agree with that in principle; I'll leave it to Jeroen to fix this. Perhaps he had a good reason to prefer strings (I fail to see any). I'm also fine with merging this ticket as-is, but that's unlikely to happen now that someone has reverted the positive review (grr).",
    "created_at": "2018-05-07T19:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368969",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@jdemeyer](#comment%3A55):
> I think that the old code
> 
> ```
>     names = ["%s%s"%(n, i+1) for n in ["a","b","c","d"] for i in range(g**2)]
>     R = PolynomialRing(CC, names)
>     vars = R.gens()
>     A = Matrix(R, g, g, vars[:g**2])
>     B = Matrix(R, g, g, vars[g**2:2*g**2])
>     C = Matrix(R, g, g, vars[2*g**2:3*g**2])
>     D = Matrix(R, g, g, vars[3*g**2:4*g**2])
> ```
> is clearly better than the new code from this ticket
> 
> ```
>     V = ["%s%s"%(n,i) for n in ["a","b","c","d"] for i in srange(1,1+g1*g2)]
>     R = PolynomialRing(CC,V)
>     A = Matrix(R,g1,g2,V[:g1*g2])
>     B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])
>     C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])
>     D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])
> ```

I agree with that in principle; I'll leave it to Jeroen to fix this. Perhaps he had a good reason to prefer strings (I fail to see any). I'm also fine with merging this ticket as-is, but that's unlikely to happen now that someone has reverted the positive review (grr).



---

archive/issue_comments_368970.json:
```json
{
    "body": "Changed commit from **[`47a2f30`](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)** to **[`4a98393`](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**",
    "created_at": "2018-05-07T20:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368970",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`47a2f30`](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)** to **[`4a98393`](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**



---

archive/issue_comments_368971.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37a50255414a4b869a9b10586a94ad5dd46924dc\"><code>37a5025</code></a></td><td><code>Merge branch 'develop' into t/24370/rs_alg_and_aut</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa\"><code>4a98393</code></a></td><td><code>Change to initialize matrices using variables instead of strings</code></td></tr></table>\n",
    "created_at": "2018-05-07T20:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368971",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37a50255414a4b869a9b10586a94ad5dd46924dc"><code>37a5025</code></a></td><td><code>Merge branch 'develop' into t/24370/rs_alg_and_aut</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa"><code>4a98393</code></a></td><td><code>Change to initialize matrices using variables instead of strings</code></td></tr></table>




---

archive/issue_comments_368972.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nJeroen can revert this if he wants strings. In the mean time, the quickest way forward is to just initialize with the variable objects instead.",
    "created_at": "2018-05-07T20:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368972",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:58" align="right">comment:58</div>

Jeroen can revert this if he wants strings. In the mean time, the quickest way forward is to just initialize with the variable objects instead.



---

archive/issue_events_334969.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-05-07T20:34:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334969"
}
```



---

archive/issue_events_334970.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-05-07T20:34:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334970"
}
```



---

archive/issue_comments_368973.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nWhen you said \"Jeroen\" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.",
    "created_at": "2018-05-07T21:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368973",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">comment:59</div>

When you said "Jeroen" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.



---

archive/issue_comments_368974.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@jdemeyer](#comment%3A59):\n> When you said \"Jeroen\" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.\n\nWell, that's a namespace issue you'll have to solve yourselves :-)",
    "created_at": "2018-05-08T04:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368974",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@jdemeyer](#comment%3A59):
> When you said "Jeroen" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.

Well, that's a namespace issue you'll have to solve yourselves :-)



---

archive/issue_comments_368975.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nThis part of the functionality seems to date from before this particular ticket (thus saith git blame). And I do not recall changing this. Anyway, no need to revert on my account.",
    "created_at": "2018-05-08T14:29:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368975",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:61" align="right">comment:61</div>

This part of the functionality seems to date from before this particular ticket (thus saith git blame). And I do not recall changing this. Anyway, no need to revert on my account.



---

archive/issue_comments_368976.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nHm. It is a little weird where this change happened. It takes a `git log --follow` to find the change:\nIt seems the change was made on #24884 to use variables instead of strings. Oddly enough, there is nothing in the history of the file that has since undone that change if I look in the history of the file. It seems git trac is basing its diffs on an alternate timeline ...",
    "created_at": "2018-05-08T20:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368976",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:62" align="right">comment:62</div>

Hm. It is a little weird where this change happened. It takes a `git log --follow` to find the change:
It seems the change was made on #24884 to use variables instead of strings. Oddly enough, there is nothing in the history of the file that has since undone that change if I look in the history of the file. It seems git trac is basing its diffs on an alternate timeline ...



---

archive/issue_comments_368977.json:
```json
{
    "body": "Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[`4a98393`](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**",
    "created_at": "2018-05-09T09:49:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-368977",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[`4a98393`](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**



---

archive/issue_events_334971.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-09T09:49:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334971"
}
```



---

archive/issue_events_334972.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "13fd23bb8034b0793582f00e0768bb52dd3cd54d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-09T09:49:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-334972"
}
```
