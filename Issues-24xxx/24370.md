# Issue 24370: Riemann surfaces: algebraization and automorphisms

archive/issues_024133.json:
```json
{
    "body": "This is a small amount of new code for Riemann surfaces. Main features:\n\n* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;\n\n* algebraizing said tangential representations;\n\n* determining automorphism groups.\n\n**Keywords:** endomorphisms, automorphisms\n\n**Branch/Commit:** [4a98393c80a4f40cb5e0043dfc6755f78d3beafa](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)\n\n**Reviewer:** Julian R\u00fcth\n\n**Author:** Nils Bruin, Jeroen Sijsling\n\nIssue created by migration from https://trac.sagemath.org/ticket/24370\n\n",
    "closed_at": "2018-05-09T09:49:56Z",
    "created_at": "2017-12-12T14:03:37Z",
    "labels": [
        "component: algebraic geometry",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "title": "Riemann surfaces: algebraization and automorphisms",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/24370",
    "user": "https://github.com/JRSijsling"
}
```
This is a small amount of new code for Riemann surfaces. Main features:

* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;

* algebraizing said tangential representations;

* determining automorphism groups.

**Keywords:** endomorphisms, automorphisms

**Branch/Commit:** [4a98393c80a4f40cb5e0043dfc6755f78d3beafa](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)

**Reviewer:** Julian RÃ¼th

**Author:** Nils Bruin, Jeroen Sijsling

Issue created by migration from https://trac.sagemath.org/ticket/24370





---

archive/issue_comments_371495.json:
```json
{
    "body": "**Branch:** [u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)",
    "created_at": "2017-12-12T14:36:30Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371495",
    "user": "https://github.com/JRSijsling"
}
```

**Branch:** [u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)



---

archive/issue_comments_371496.json:
```json
{
    "body": "**Commit:** [07d6c37d18811e2b377a9689790a7c5e24da16ba](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)",
    "created_at": "2017-12-12T14:42:29Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371496",
    "user": "https://github.com/JRSijsling"
}
```

**Commit:** [07d6c37d18811e2b377a9689790a7c5e24da16ba](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)



---

archive/issue_comments_371497.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"endomorphisms, automorphisms\".",
    "created_at": "2017-12-12T14:42:29Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371497",
    "user": "https://github.com/JRSijsling"
}
```

**Changing keywords** from "" to "endomorphisms, automorphisms".



---

archive/issue_comments_371498.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n+This is a small amount of new code for Riemann surfaces. Main features:\n \n+* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;\n+\n+* algebraizing said tangential representations;\n+\n+* determining automorphism groups.\n``````\n",
    "created_at": "2017-12-12T14:42:29Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371498",
    "user": "https://github.com/JRSijsling"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,7 @@
+This is a small amount of new code for Riemann surfaces. Main features:
 
+* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;
+
+* algebraizing said tangential representations;
+
+* determining automorphism groups.
``````




---

archive/issue_events_216277.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "component: algebraic geometry",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216277"
}
```



---

archive/issue_events_216278.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216278"
}
```



---

archive/issue_events_216279.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216279"
}
```



---

archive/issue_events_216280.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216280"
}
```



---

archive/issue_events_216281.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:44:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "rename": {
        "from": "rs_alg_and_aut",
        "to": "RIemann surfaces: algebraization and automorphisms"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216281"
}
```



---

archive/issue_events_216282.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:44:33Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "rename": {
        "from": "RIemann surfaces: algebraization and automorphisms",
        "to": "Riemann surfaces: algebraization and automorphisms"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216282"
}
```



---

archive/issue_comments_371499.json:
```json
{
    "body": "**Author:** Jeroen Sijsling",
    "created_at": "2017-12-12T14:56:22Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371499",
    "user": "https://github.com/JRSijsling"
}
```

**Author:** Jeroen Sijsling



---

archive/issue_comments_371500.json:
```json
{
    "body": "<a id='comment:6'></a>\nSorry for the lack of content so far, I messed up the branch and lost code. It is on the way...",
    "created_at": "2017-12-13T08:13:34Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371500",
    "user": "https://github.com/JRSijsling"
}
```

<a id='comment:6'></a>
Sorry for the lack of content so far, I messed up the branch and lost code. It is on the way...



---

archive/issue_comments_371501.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d\">5b6ffcb</a></td><td><code>Riemann surfaces: algebraization and automorphisms</code></td></tr></table>\n",
    "created_at": "2017-12-13T10:23:53Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d">5b6ffcb</a></td><td><code>Riemann surfaces: algebraization and automorphisms</code></td></tr></table>




---

archive/issue_comments_371502.json:
```json
{
    "body": "**Changing commit** from \"[07d6c37d18811e2b377a9689790a7c5e24da16ba](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)\" to \"[5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)\".",
    "created_at": "2017-12-13T10:23:53Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371502",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[07d6c37d18811e2b377a9689790a7c5e24da16ba](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)" to "[5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)".



---

archive/issue_comments_371503.json:
```json
{
    "body": "<a id='comment:8'></a>\nNice!\n\nFor each function, the documentation string should follow the rules listed at\n    http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content\n\nThat is: a short one-line sentence description followed by an optional longer paragraph.",
    "created_at": "2017-12-13T18:07:13Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371503",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
Nice!

For each function, the documentation string should follow the rules listed at
    http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content

That is: a short one-line sentence description followed by an optional longer paragraph.



---

archive/issue_comments_371504.json:
```json
{
    "body": "<a id='comment:9'></a>\nTo find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.",
    "created_at": "2017-12-13T18:10:26Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371504",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.



---

archive/issue_comments_371505.json:
```json
{
    "body": "<a id='comment:10'></a>\nWhat is the point of taking power of `10` for everything? It is much more natural to consider precision in bits...",
    "created_at": "2017-12-13T18:12:26Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371505",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
What is the point of taking power of `10` for everything? It is much more natural to consider precision in bits...



---

archive/issue_events_216283.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-13T18:14:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216283"
}
```



---

archive/issue_events_216284.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-13T18:14:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216284"
}
```



---

archive/issue_comments_371506.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [vdelecroix](#comment%3A9):\n> To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.\n\n\nmpmath has a multiprecision version if necessary but hopefully we can just get away with the single precision version here.\n\nhttp://mpmath.org/doc/current/matrices.html#matrix-factorization",
    "created_at": "2017-12-13T18:36:05Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371506",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:12'></a>
Replying to [vdelecroix](#comment%3A9):
> To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.


mpmath has a multiprecision version if necessary but hopefully we can just get away with the single precision version here.

http://mpmath.org/doc/current/matrices.html#matrix-factorization



---

archive/issue_comments_371507.json:
```json
{
    "body": "**Changing branch** from \"[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)\" to \"[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)\".",
    "created_at": "2017-12-14T03:59:19Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371507",
    "user": "https://github.com/nbruin"
}
```

**Changing branch** from "[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)" to "[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)".



---

archive/issue_comments_371508.json:
```json
{
    "body": "<a id='comment:14'></a>\nSome small updates. Your old branch should still be there if you prefer. I haven't amended the code to use LU decomp yet, but the code as it was didn't work as intended anyway.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45\">179dac9</a></td><td><code>trac 24370: Some small fixes and improvements:</code></td></tr></table>\n",
    "created_at": "2017-12-14T04:06:20Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371508",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:14'></a>
Some small updates. Your old branch should still be there if you prefer. I haven't amended the code to use LU decomp yet, but the code as it was didn't work as intended anyway.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45">179dac9</a></td><td><code>trac 24370: Some small fixes and improvements:</code></td></tr></table>




---

archive/issue_comments_371509.json:
```json
{
    "body": "**Changing commit** from \"[5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)\" to \"[179dac95f1528a237179dd49e736a6b6e38d8e45](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)\".",
    "created_at": "2017-12-14T04:06:20Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371509",
    "user": "https://github.com/nbruin"
}
```

**Changing commit** from "[5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)" to "[179dac95f1528a237179dd49e736a6b6e38d8e45](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)".



---

archive/issue_comments_371510.json:
```json
{
    "body": "<a id='comment:15'></a>\nAnother note: can we choose default values for the various epsilons based on the precision provided? It's probably good to have some margin but it probably doesn't need to be more than 5-10 bits.",
    "created_at": "2017-12-14T18:04:46Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371510",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:15'></a>
Another note: can we choose default values for the various epsilons based on the precision provided? It's probably good to have some margin but it probably doesn't need to be more than 5-10 bits.



---

archive/issue_comments_371511.json:
```json
{
    "body": "**Changing branch** from \"[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)\" to \"[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)\".",
    "created_at": "2017-12-20T10:51:36Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371511",
    "user": "https://github.com/JRSijsling"
}
```

**Changing branch** from "[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)" to "[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)".



---

archive/issue_comments_371512.json:
```json
{
    "body": "<a id='comment:17'></a>\nThanks for all your comments!\n\nI pulled Nils' modifications (please check) and added functionality for homomorphisms and isomorphisms as well. I will soon add some files that test this in Attachments.\n\nI modified the descriptions to start with a single one-line summary. I have also used precision where relevant, and in bits, not in decimal digits.\n\nThere is just one problem remaining, which is the extraction of an invertible submatrix. I have used scipy.linalg.lu, but it gives an extremely uninformative error message. Moreover, that function seems to work for some matrices and fail for others, which does not help to isolate the source of the error. To see what I am talking about, try using invertible_submatrix_lu. I truly have no idea what to do to get this to work, but perhaps someone else sees a simple fix.",
    "created_at": "2017-12-20T10:56:52Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371512",
    "user": "https://github.com/JRSijsling"
}
```

<a id='comment:17'></a>
Thanks for all your comments!

I pulled Nils' modifications (please check) and added functionality for homomorphisms and isomorphisms as well. I will soon add some files that test this in Attachments.

I modified the descriptions to start with a single one-line summary. I have also used precision where relevant, and in bits, not in decimal digits.

There is just one problem remaining, which is the extraction of an invertible submatrix. I have used scipy.linalg.lu, but it gives an extremely uninformative error message. Moreover, that function seems to work for some matrices and fail for others, which does not help to isolate the source of the error. To see what I am talking about, try using invertible_submatrix_lu. I truly have no idea what to do to get this to work, but perhaps someone else sees a simple fix.



---

archive/issue_comments_371513.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136\">b1d4a83</a></td><td><code>Trac 24370: Added suggestions and isomorphisms</code></td></tr></table>\n",
    "created_at": "2017-12-20T11:01:18Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136">b1d4a83</a></td><td><code>Trac 24370: Added suggestions and isomorphisms</code></td></tr></table>




---

archive/issue_comments_371514.json:
```json
{
    "body": "**Changing commit** from \"[179dac95f1528a237179dd49e736a6b6e38d8e45](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)\" to \"[b1d4a830b3a91394b47a15cd7a3caed32bb19136](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)\".",
    "created_at": "2017-12-20T11:01:18Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[179dac95f1528a237179dd49e736a6b6e38d8e45](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)" to "[b1d4a830b3a91394b47a15cd7a3caed32bb19136](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)".



---

archive/issue_comments_371515.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe\">9e5a396</a></td><td><code>Trac 24370: Further improvements</code></td></tr></table>\n",
    "created_at": "2017-12-20T18:30:30Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe">9e5a396</a></td><td><code>Trac 24370: Further improvements</code></td></tr></table>




---

archive/issue_comments_371516.json:
```json
{
    "body": "**Changing commit** from \"[b1d4a830b3a91394b47a15cd7a3caed32bb19136](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)\" to \"[9e5a3968e4811297d0e41a89431d7dc6efbc9cbe](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)\".",
    "created_at": "2017-12-20T18:30:30Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b1d4a830b3a91394b47a15cd7a3caed32bb19136](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)" to "[9e5a3968e4811297d0e41a89431d7dc6efbc9cbe](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)".



---

archive/attachments_020999.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "test-lu.sage",
    "asset_url": "tarball://root/attachments/ticket24370/test-lu.sage",
    "created_at": "2017-12-20T18:31:19Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket24370/test-lu.sage",
    "user": "https://github.com/JRSijsling"
}
```



---

archive/issue_comments_371517.json:
```json
{
    "body": "Attachment [test-lu.sage](https://github.com/sagemath/sage/files/ticket24370/test-lu.sage) by @JRSijsling created at 2017-12-20 18:31:19",
    "created_at": "2017-12-20T18:31:19Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371517",
    "user": "https://github.com/JRSijsling"
}
```

Attachment [test-lu.sage](https://github.com/sagemath/sage/files/ticket24370/test-lu.sage) by @JRSijsling created at 2017-12-20 18:31:19



---

archive/issue_comments_371518.json:
```json
{
    "body": "<a id='comment:20'></a>\nAttachments now contains examples of failing LU decompositions.",
    "created_at": "2017-12-20T18:31:51Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371518",
    "user": "https://github.com/JRSijsling"
}
```

<a id='comment:20'></a>
Attachments now contains examples of failing LU decompositions.



---

archive/issue_comments_371519.json:
```json
{
    "body": "<a id='comment:21'></a>\nscipy failure: You're hitting fortran code here. It's hard to imagine it would be capable of working with sage multiprecision floats. If you convert to python standard complex floats it's probably OK:\n\n```\ndef invertible_submatrix_lu(M):\n    Mt = M.transpose()\n    rowsMt = Mt.rows()\n    colsMt = Mt.columns()\n    ccMt=scipy.matrix([[p.__complex__() for p in r] for r in Mt ])\n    P, L, U = lu(ccMt)\n    rowsP = matrix(P).rows()\n    col_nums = [ ]\n    for i in range(len(rowsP)):\n        if any([ (rowsP[i][j].abs() > 0.1) for j in range(len(colsMt)) ]):\n            col_nums.append(i)\n    subM = Matrix([ rowsMt[i] for i in col_nums ]).transpose()\n    return subM, col_nums\n```\nAt least it helps with the example you gave.\n\nAnother observation: \n\nThe first block of the large period matrix `P=(A|B)` MUST be invertible (these are the integrals wrt to first half of the symplectic basis). In fact, to get the small period matrix we compute `A^(-1)*B` anyway. So: is it worth looking for a \"better\" invertible submatrix than just the first block? I doubt it.\n\nI've looked at the examples you've posted. `lu` decomposition often chooses something else than the first `g` columns, but the determinant of the matrix it chooses isn't always larger in absolute value (that's not the only measure: we'd like the matrix to be well-conditioned as well).\n\nSo I think you can defend just not doing any work and just taking the first block. I suspect that should work about as well. If you have examples to the contrary it'll be interesting to see, of course!",
    "created_at": "2017-12-20T22:28:19Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371519",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:21'></a>
scipy failure: You're hitting fortran code here. It's hard to imagine it would be capable of working with sage multiprecision floats. If you convert to python standard complex floats it's probably OK:

```
def invertible_submatrix_lu(M):
    Mt = M.transpose()
    rowsMt = Mt.rows()
    colsMt = Mt.columns()
    ccMt=scipy.matrix([[p.__complex__() for p in r] for r in Mt ])
    P, L, U = lu(ccMt)
    rowsP = matrix(P).rows()
    col_nums = [ ]
    for i in range(len(rowsP)):
        if any([ (rowsP[i][j].abs() > 0.1) for j in range(len(colsMt)) ]):
            col_nums.append(i)
    subM = Matrix([ rowsMt[i] for i in col_nums ]).transpose()
    return subM, col_nums
```
At least it helps with the example you gave.

Another observation: 

The first block of the large period matrix `P=(A|B)` MUST be invertible (these are the integrals wrt to first half of the symplectic basis). In fact, to get the small period matrix we compute `A^(-1)*B` anyway. So: is it worth looking for a "better" invertible submatrix than just the first block? I doubt it.

I've looked at the examples you've posted. `lu` decomposition often chooses something else than the first `g` columns, but the determinant of the matrix it chooses isn't always larger in absolute value (that's not the only measure: we'd like the matrix to be well-conditioned as well).

So I think you can defend just not doing any work and just taking the first block. I suspect that should work about as well. If you have examples to the contrary it'll be interesting to see, of course!



---

archive/issue_comments_371520.json:
```json
{
    "body": "<a id='comment:22'></a>\nThank you for giving me two solutions. What you suggest already convinces me that we should just take the first g columns. I did not do this before simply because of previous habits in circumstances where the first columns did not always give an invertible submatrix. Still, I should have realized that things do work out in this context. New version coming up.",
    "created_at": "2017-12-20T22:54:06Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371520",
    "user": "https://github.com/JRSijsling"
}
```

<a id='comment:22'></a>
Thank you for giving me two solutions. What you suggest already convinces me that we should just take the first g columns. I did not do this before simply because of previous habits in circumstances where the first columns did not always give an invertible submatrix. Still, I should have realized that things do work out in this context. New version coming up.



---

archive/issue_comments_371521.json:
```json
{
    "body": "**Changing commit** from \"[9e5a3968e4811297d0e41a89431d7dc6efbc9cbe](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)\" to \"[0b64696d99b83ffdd204640c20840cfc270f4f88](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)\".",
    "created_at": "2017-12-20T22:54:28Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9e5a3968e4811297d0e41a89431d7dc6efbc9cbe](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)" to "[0b64696d99b83ffdd204640c20840cfc270f4f88](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)".



---

archive/issue_comments_371522.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88\">0b64696</a></td><td><code>Trac 24370: Simplified invertible submatrix</code></td></tr></table>\n",
    "created_at": "2017-12-20T22:54:28Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88">0b64696</a></td><td><code>Trac 24370: Simplified invertible submatrix</code></td></tr></table>




---

archive/issue_comments_371523.json:
```json
{
    "body": "<a id='comment:24'></a>\nYou should pull out the inverse from the loop, of course :-).\nFurthermore, I'm not so sure that explicitly changing to the base ring of Q is better, so why not leave it to the system to choose the appropriate precision (it would probably choose the minimum of the two). Perhaps you shouldn't even base change back to `P.base_ring()` for that reason.\n\nIf course, if you think we have enough precision lying around already to get better results by doing the intermediate computations at a higher precision then you should do that explicitly. So I think the body can be shortened to something along the lines of:\n\n```\n        P = self.period_matrix()\n        Q = other.period_matrix()\n        g = P.nrows()\n        s = range(g)\n        subP = (P[:g,:g]).inverse()\n        Ts = [(Q*R)[:,:g].transpose() * subP for R in Rs]\n        return [ T.change_ring(P.base_ring()) for T in Ts ]\n```\n(if you need the number of rows you shouldn't ask for the length of the list constructed from the rows. Slicing vs. submatrix is probably just a matter of taste)\n\nAnother point: I see that \"automorphism group\" now returns a permutation group. I think you should also return the action of the group on something meaningful (returning the thing as a matrix group as was done previously did that).",
    "created_at": "2017-12-20T23:06:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371523",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:24'></a>
You should pull out the inverse from the loop, of course :-).
Furthermore, I'm not so sure that explicitly changing to the base ring of Q is better, so why not leave it to the system to choose the appropriate precision (it would probably choose the minimum of the two). Perhaps you shouldn't even base change back to `P.base_ring()` for that reason.

If course, if you think we have enough precision lying around already to get better results by doing the intermediate computations at a higher precision then you should do that explicitly. So I think the body can be shortened to something along the lines of:

```
        P = self.period_matrix()
        Q = other.period_matrix()
        g = P.nrows()
        s = range(g)
        subP = (P[:g,:g]).inverse()
        Ts = [(Q*R)[:,:g].transpose() * subP for R in Rs]
        return [ T.change_ring(P.base_ring()) for T in Ts ]
```
(if you need the number of rows you shouldn't ask for the length of the list constructed from the rows. Slicing vs. submatrix is probably just a matter of taste)

Another point: I see that "automorphism group" now returns a permutation group. I think you should also return the action of the group on something meaningful (returning the thing as a matrix group as was done previously did that).



---

archive/issue_comments_371524.json:
```json
{
    "body": "<a id='comment:25'></a>\nPerfect. There was no transpose needed, but your code suggestion is much better. I have also reverted to returning a matrix group. This is also better if one ever wants to divide out by -1, like in the non-hyperelliptic case, and the example shows how to obtain a permutation group anyway.",
    "created_at": "2017-12-21T07:16:10Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371524",
    "user": "https://github.com/JRSijsling"
}
```

<a id='comment:25'></a>
Perfect. There was no transpose needed, but your code suggestion is much better. I have also reverted to returning a matrix group. This is also better if one ever wants to divide out by -1, like in the non-hyperelliptic case, and the example shows how to obtain a permutation group anyway.



---

archive/issue_comments_371525.json:
```json
{
    "body": "**Changing commit** from \"[0b64696d99b83ffdd204640c20840cfc270f4f88](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)\" to \"[79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)\".",
    "created_at": "2017-12-21T07:16:26Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0b64696d99b83ffdd204640c20840cfc270f4f88](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)" to "[79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)".



---

archive/issue_comments_371526.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039\">79861be</a></td><td><code>Trace 24370: Further improvements</code></td></tr></table>\n",
    "created_at": "2017-12-21T07:16:26Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039">79861be</a></td><td><code>Trace 24370: Further improvements</code></td></tr></table>




---

archive/issue_comments_371527.json:
```json
{
    "body": "**Changing branch** from \"[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)\" to \"[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)\".",
    "created_at": "2017-12-30T04:19:16Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371527",
    "user": "https://github.com/nbruin"
}
```

**Changing branch** from "[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)" to "[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)".



---

archive/issue_comments_371528.json:
```json
{
    "body": "<a id='comment:28'></a>\nCompute matrix inverse using LU decomposition. This should be numerically a little better behaved.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432\">3310e22</a></td><td><code>Implement numerical matrix inverse via LU decomposition</code></td></tr></table>\n",
    "created_at": "2017-12-30T04:20:23Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371528",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:28'></a>
Compute matrix inverse using LU decomposition. This should be numerically a little better behaved.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432">3310e22</a></td><td><code>Implement numerical matrix inverse via LU decomposition</code></td></tr></table>




---

archive/issue_comments_371529.json:
```json
{
    "body": "**Changing commit** from \"[79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)\" to \"[3310e2238764984f8fcc160ae79172875837b432](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)\".",
    "created_at": "2017-12-30T04:20:23Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371529",
    "user": "https://github.com/nbruin"
}
```

**Changing commit** from "[79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)" to "[3310e2238764984f8fcc160ae79172875837b432](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)".



---

archive/issue_comments_371530.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280\">a2ebec5</a></td><td><code>Equip RiemannSurfaceSum with \"genus\" (being the sum of the genera of the terms)</code></td></tr></table>\n",
    "created_at": "2018-01-03T00:13:01Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280">a2ebec5</a></td><td><code>Equip RiemannSurfaceSum with "genus" (being the sum of the genera of the terms)</code></td></tr></table>




---

archive/issue_comments_371531.json:
```json
{
    "body": "**Changing commit** from \"[3310e2238764984f8fcc160ae79172875837b432](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)\" to \"[a2ebec55927353fc0717a5b292e8a6369135a280](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)\".",
    "created_at": "2018-01-03T00:13:01Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3310e2238764984f8fcc160ae79172875837b432](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)" to "[a2ebec55927353fc0717a5b292e8a6369135a280](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)".



---

archive/issue_comments_371532.json:
```json
{
    "body": "<a id='comment:30'></a>\nEnsuring that this works:\n\n```\nsage: E=EllipticCurve([0,1])\nsage: SE=E.riemann_surface()\nsage: J=SE+SE\nsage: J.symplectic_automorphism_group()\nMatrix group over Integer Ring with 36 generators\n```",
    "created_at": "2018-01-03T00:16:41Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371532",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:30'></a>
Ensuring that this works:

```
sage: E=EllipticCurve([0,1])
sage: SE=E.riemann_surface()
sage: J=SE+SE
sage: J.symplectic_automorphism_group()
Matrix group over Integer Ring with 36 generators
```



---

archive/issue_comments_371533.json:
```json
{
    "body": "**Changing author** from \"Jeroen Sijsling\" to \"Nils Bruin, Jeroen Sijsling\".",
    "created_at": "2018-01-07T19:00:39Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371533",
    "user": "https://github.com/JRSijsling"
}
```

**Changing author** from "Jeroen Sijsling" to "Nils Bruin, Jeroen Sijsling".



---

archive/issue_comments_371534.json:
```json
{
    "body": "**Changing branch** from \"[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)\" to \"[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)\".",
    "created_at": "2018-01-07T19:02:00Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371534",
    "user": "https://github.com/JRSijsling"
}
```

**Changing branch** from "[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)" to "[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)".



---

archive/attachments_021000.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "test-other.sage",
    "asset_url": "tarball://root/attachments/ticket24370/test-other.sage",
    "created_at": "2018-01-07T19:04:42Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket24370/test-other.sage",
    "user": "https://github.com/JRSijsling"
}
```



---

archive/issue_comments_371535.json:
```json
{
    "body": "Attachment [test-other.sage](https://github.com/sagemath/sage/files/ticket24370/test-other.sage) by @JRSijsling created at 2018-01-07 19:04:42",
    "created_at": "2018-01-07T19:04:42Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371535",
    "user": "https://github.com/JRSijsling"
}
```

Attachment [test-other.sage](https://github.com/sagemath/sage/files/ticket24370/test-other.sage) by @JRSijsling created at 2018-01-07 19:04:42



---

archive/attachments_021001.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "test-other.2.sage",
    "asset_url": "tarball://root/attachments/ticket24370/test-other.2.sage",
    "created_at": "2018-01-07T19:05:25Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket24370/test-other.2.sage",
    "user": "https://github.com/JRSijsling"
}
```



---

archive/issue_comments_371536.json:
```json
{
    "body": "Attachment [test-other.2.sage](https://github.com/sagemath/sage/files/ticket24370/test-other.2.sage) by @JRSijsling created at 2018-01-07 19:05:25",
    "created_at": "2018-01-07T19:05:25Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371536",
    "user": "https://github.com/JRSijsling"
}
```

Attachment [test-other.2.sage](https://github.com/sagemath/sage/files/ticket24370/test-other.2.sage) by @JRSijsling created at 2018-01-07 19:05:25



---

archive/attachments_021002.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "test-self.sage",
    "asset_url": "tarball://root/attachments/ticket24370/test-self.sage",
    "created_at": "2018-01-07T21:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket24370/test-self.sage",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```



---

archive/issue_comments_371537.json:
```json
{
    "body": "<a id='comment:33'></a>\nAttachment [test-self.sage](https://github.com/sagemath/sage/files/ticket24370/test-self.sage) by git created at 2018-01-07 21:57:33\n\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79\">6553907</a></td><td><code>Typo in docstring</code></td></tr></table>\n",
    "created_at": "2018-01-07T21:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
Attachment [test-self.sage](https://github.com/sagemath/sage/files/ticket24370/test-self.sage) by git created at 2018-01-07 21:57:33

**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79">6553907</a></td><td><code>Typo in docstring</code></td></tr></table>




---

archive/issue_comments_371538.json:
```json
{
    "body": "**Changing commit** from \"[a2ebec55927353fc0717a5b292e8a6369135a280](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)\" to \"[65539074ada8a630fe23e22879c476db3ced8c79](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)\".",
    "created_at": "2018-01-07T21:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a2ebec55927353fc0717a5b292e8a6369135a280](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)" to "[65539074ada8a630fe23e22879c476db3ced8c79](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)".



---

archive/issue_comments_371539.json:
```json
{
    "body": "**Changing branch** from \"[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)\" to \"[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)\".",
    "created_at": "2018-01-08T23:05:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371539",
    "user": "https://github.com/nbruin"
}
```

**Changing branch** from "[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)" to "[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)".



---

archive/issue_comments_371540.json:
```json
{
    "body": "<a id='comment:35'></a>\nvery temporary patch to get nonsquare LU decomp from mpmath.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6\">f2ccf44</a></td><td><code>TEMPORARY COMMIT. DO NOT BUILD ON THIS!</code></td></tr></table>\n",
    "created_at": "2018-01-08T23:12:16Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371540",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:35'></a>
very temporary patch to get nonsquare LU decomp from mpmath.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6">f2ccf44</a></td><td><code>TEMPORARY COMMIT. DO NOT BUILD ON THIS!</code></td></tr></table>




---

archive/issue_comments_371541.json:
```json
{
    "body": "**Changing commit** from \"[65539074ada8a630fe23e22879c476db3ced8c79](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)\" to \"[f2ccf44acc673458aba3cf92d7692c7a92a505b6](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)\".",
    "created_at": "2018-01-08T23:12:16Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371541",
    "user": "https://github.com/nbruin"
}
```

**Changing commit** from "[65539074ada8a630fe23e22879c476db3ced8c79](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)" to "[f2ccf44acc673458aba3cf92d7692c7a92a505b6](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)".



---

archive/issue_comments_371542.json:
```json
{
    "body": "**Changing branch** from \"[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)\" to \"[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)\".",
    "created_at": "2018-01-11T21:15:21Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371542",
    "user": "https://github.com/JRSijsling"
}
```

**Changing branch** from "[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)" to "[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)".



---

archive/issue_comments_371543.json:
```json
{
    "body": "**Changing commit** from \"[f2ccf44acc673458aba3cf92d7692c7a92a505b6](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)\" to \"[13c6d4f71a1d1a4249d8ad5c42accbecca09705f](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)\".",
    "created_at": "2018-01-12T09:28:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371543",
    "user": "https://github.com/JRSijsling"
}
```

**Changing commit** from "[f2ccf44acc673458aba3cf92d7692c7a92a505b6](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)" to "[13c6d4f71a1d1a4249d8ad5c42accbecca09705f](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)".



---

archive/issue_events_216285.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2018-01-12T09:28:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216285"
}
```



---

archive/issue_events_216286.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2018-01-12T09:28:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216286"
}
```



---

archive/issue_comments_371544.json:
```json
{
    "body": "<a id='comment:37'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f\">13c6d4f</a></td><td><code>Use first g columns of period matrix instead of lu</code></td></tr></table>\n",
    "created_at": "2018-01-12T09:28:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371544",
    "user": "https://github.com/JRSijsling"
}
```

<a id='comment:37'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f">13c6d4f</a></td><td><code>Use first g columns of period matrix instead of lu</code></td></tr></table>




---

archive/issue_comments_371545.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873\">65bf692</a></td><td><code>Use first g columns for inverse instead of lu</code></td></tr></table>\n",
    "created_at": "2018-01-12T10:57:04Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873">65bf692</a></td><td><code>Use first g columns for inverse instead of lu</code></td></tr></table>




---

archive/issue_comments_371546.json:
```json
{
    "body": "**Changing commit** from \"[13c6d4f71a1d1a4249d8ad5c42accbecca09705f](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)\" to \"[65bf692f4dfcc03fecae7bafa9d04fbc73244873](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)\".",
    "created_at": "2018-01-12T10:57:04Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[13c6d4f71a1d1a4249d8ad5c42accbecca09705f](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)" to "[65bf692f4dfcc03fecae7bafa9d04fbc73244873](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)".



---

archive/issue_comments_371547.json:
```json
{
    "body": "<a id='comment:39'></a>\nTODO: I think it could be quite common for people to first compute the endomorphism ring (which is expensive) and then compute the automorphism group. Currently this is quite horrible because we don't cache the result of the endomorphism ring computation. We should have something in the user interface that allows re-use of precomputed endomorphism ring info. Given that the endomorphism computation is subject to tuning parameters (although in practice this seems fairly robust), I can see why we might not want to cache  the result outright. But then at least we might want an interface, comparable to how `tangent_representation_*` works, that can take as input a list of matrices and then computes the automorphisms from it. That's actually something that should only need the Rosati involution.",
    "created_at": "2018-01-17T11:31:57Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371547",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:39'></a>
TODO: I think it could be quite common for people to first compute the endomorphism ring (which is expensive) and then compute the automorphism group. Currently this is quite horrible because we don't cache the result of the endomorphism ring computation. We should have something in the user interface that allows re-use of precomputed endomorphism ring info. Given that the endomorphism computation is subject to tuning parameters (although in practice this seems fairly robust), I can see why we might not want to cache  the result outright. But then at least we might want an interface, comparable to how `tangent_representation_*` works, that can take as input a list of matrices and then computes the automorphisms from it. That's actually something that should only need the Rosati involution.



---

archive/issue_comments_371548.json:
```json
{
    "body": "<a id='comment:40'></a>\nThat is true. I will add `Rs` as a keyword argument to the `symplectic_*` methods, so that they are calculated by default but can be passed by the user who already has the endomorphism/homomorphism basis.",
    "created_at": "2018-01-18T09:33:40Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371548",
    "user": "https://github.com/JRSijsling"
}
```

<a id='comment:40'></a>
That is true. I will add `Rs` as a keyword argument to the `symplectic_*` methods, so that they are calculated by default but can be passed by the user who already has the endomorphism/homomorphism basis.



---

archive/issue_comments_371549.json:
```json
{
    "body": "**Changing commit** from \"[65bf692f4dfcc03fecae7bafa9d04fbc73244873](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)\" to \"[f8d70fa0c1d804d1fc6af5531b6db86791488a45](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)\".",
    "created_at": "2018-01-18T09:46:26Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[65bf692f4dfcc03fecae7bafa9d04fbc73244873](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)" to "[f8d70fa0c1d804d1fc6af5531b6db86791488a45](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)".



---

archive/issue_comments_371550.json:
```json
{
    "body": "<a id='comment:41'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45\">f8d70fa</a></td><td><code>Add precomputed bases as keyword arguments</code></td></tr></table>\n",
    "created_at": "2018-01-18T09:46:26Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45">f8d70fa</a></td><td><code>Add precomputed bases as keyword arguments</code></td></tr></table>




---

archive/issue_comments_371551.json:
```json
{
    "body": "**Changing branch** from \"[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)\" to \"[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)\".",
    "created_at": "2018-02-09T11:58:27Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371551",
    "user": "https://github.com/nbruin"
}
```

**Changing branch** from "[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)" to "[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)".



---

archive/issue_comments_371552.json:
```json
{
    "body": "**Changing commit** from \"[f8d70fa0c1d804d1fc6af5531b6db86791488a45](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)\" to \"\".",
    "created_at": "2018-02-09T11:58:27Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371552",
    "user": "https://github.com/nbruin"
}
```

**Changing commit** from "[f8d70fa0c1d804d1fc6af5531b6db86791488a45](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)" to "".



---

archive/issue_comments_371553.json:
```json
{
    "body": "**Changing branch** from \"[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)\" to \"[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)\".",
    "created_at": "2018-02-09T11:59:55Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371553",
    "user": "https://github.com/nbruin"
}
```

**Changing branch** from "[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)" to "[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)".



---

archive/issue_comments_371554.json:
```json
{
    "body": "**Commit:** [7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)",
    "created_at": "2018-02-19T12:10:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)



---

archive/issue_comments_371555.json:
```json
{
    "body": "<a id='comment:44'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb\">7c548bb</a></td><td><code>Make choice of base ring in integer_matrix_relations robust in the face of different precisions.</code></td></tr></table>\n",
    "created_at": "2018-02-19T12:10:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb">7c548bb</a></td><td><code>Make choice of base ring in integer_matrix_relations robust in the face of different precisions.</code></td></tr></table>




---

archive/issue_comments_371556.json:
```json
{
    "body": "**Work_Issues:** merge conflicts",
    "created_at": "2018-03-23T21:59:07Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371556",
    "user": "https://github.com/saraedum"
}
```

**Work_Issues:** merge conflicts



---

archive/issue_comments_371557.json:
```json
{
    "body": "<a id='comment:46'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c\">05e7855</a></td><td><code>Merge remote-tracking branch 'origin/u/nbruin/rs_alg_and_aut' into develop</code></td></tr></table>\n",
    "created_at": "2018-03-24T03:57:51Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c">05e7855</a></td><td><code>Merge remote-tracking branch 'origin/u/nbruin/rs_alg_and_aut' into develop</code></td></tr></table>




---

archive/issue_comments_371558.json:
```json
{
    "body": "**Changing commit** from \"[7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)\" to \"[05e78556ff4303f4aaa251e30f4b9122992b3c1c](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)\".",
    "created_at": "2018-03-24T03:57:51Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)" to "[05e78556ff4303f4aaa251e30f4b9122992b3c1c](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)".



---

archive/issue_comments_371559.json:
```json
{
    "body": "<a id='comment:47'></a>\nMerge conflict resolved (it wasn't clear to me what the conflict was, actually). This ticket has been tested quite a bit and contains very useful code. Ready to be reviewed and merged!\n\nAlso: patchbots are reporting no problems due to this ticket.",
    "created_at": "2018-03-24T04:02:17Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371559",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:47'></a>
Merge conflict resolved (it wasn't clear to me what the conflict was, actually). This ticket has been tested quite a bit and contains very useful code. Ready to be reviewed and merged!

Also: patchbots are reporting no problems due to this ticket.



---

archive/issue_events_216287.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-24T04:02:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216287"
}
```



---

archive/issue_comments_371560.json:
```json
{
    "body": "**Changing commit** from \"[05e78556ff4303f4aaa251e30f4b9122992b3c1c](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)\" to \"[54fe63acfc36534f8dee4943660f83b76b89d3f0](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)\".",
    "created_at": "2018-03-26T02:33:44Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[05e78556ff4303f4aaa251e30f4b9122992b3c1c](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)" to "[54fe63acfc36534f8dee4943660f83b76b89d3f0](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)".



---

archive/issue_comments_371561.json:
```json
{
    "body": "<a id='comment:48'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0\">54fe63a</a></td><td><code>Equip homology computation with cache for computed arguments (for orientation computations)</code></td></tr></table>\n",
    "created_at": "2018-03-26T02:33:44Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0">54fe63a</a></td><td><code>Equip homology computation with cache for computed arguments (for orientation computations)</code></td></tr></table>




---

archive/issue_comments_371562.json:
```json
{
    "body": "<a id='comment:49'></a>\nSurprisingly, argument computation (used in the intersection pairing) can impose a quite measurable cost, so caching it makes sense. For instance with\n\n```\nR.<x,y>=QQ[]\nf = x^10 + y^10 + x^3*y^3 + 1\nC=Curve(f)\nS=C.riemann_surface()\n%time M=S.period_matrix()\n```\n**PRE:**\n\n```\nCPU times: user 5min 56s, sys: 151 ms, total: 5min 56s\nWall time: 5min 57s\n```\n**POST:**\n\n```\nCPU times: user 3min 8s, sys: 104 ms, total: 3min 8s\nWall time: 3min 9s\n```",
    "created_at": "2018-03-26T02:43:59Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371562",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:49'></a>
Surprisingly, argument computation (used in the intersection pairing) can impose a quite measurable cost, so caching it makes sense. For instance with

```
R.<x,y>=QQ[]
f = x^10 + y^10 + x^3*y^3 + 1
C=Curve(f)
S=C.riemann_surface()
%time M=S.period_matrix()
```
**PRE:**

```
CPU times: user 5min 56s, sys: 151 ms, total: 5min 56s
Wall time: 5min 57s
```
**POST:**

```
CPU times: user 3min 8s, sys: 104 ms, total: 3min 8s
Wall time: 3min 9s
```



---

archive/issue_comments_371563.json:
```json
{
    "body": "<a id='comment:50'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8\">47a2f30</a></td><td><code>Make sure documentation actually is processed as part of the reference manual</code></td></tr></table>\n",
    "created_at": "2018-03-28T17:50:37Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371563",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8">47a2f30</a></td><td><code>Make sure documentation actually is processed as part of the reference manual</code></td></tr></table>




---

archive/issue_comments_371564.json:
```json
{
    "body": "**Changing commit** from \"[54fe63acfc36534f8dee4943660f83b76b89d3f0](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)\" to \"[47a2f30d2ab7a5c944b04cc88c53278612ccd0e8](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)\".",
    "created_at": "2018-03-28T17:50:37Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[54fe63acfc36534f8dee4943660f83b76b89d3f0](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)" to "[47a2f30d2ab7a5c944b04cc88c53278612ccd0e8](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)".



---

archive/issue_comments_371565.json:
```json
{
    "body": "**Changing work_issues** from \"merge conflicts\" to \"\".",
    "created_at": "2018-03-29T11:41:54Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371565",
    "user": "https://github.com/saraedum"
}
```

**Changing work_issues** from "merge conflicts" to "".



---

archive/issue_comments_371566.json:
```json
{
    "body": "**Reviewer:** Julian R\u00fcth",
    "created_at": "2018-03-29T11:45:00Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371566",
    "user": "https://github.com/saraedum"
}
```

**Reviewer:** Julian RÃ¼th



---

archive/issue_comments_371567.json:
```json
{
    "body": "<a id='comment:52'></a>\nFeel free to set this to positive review if you have checked that all tests actually pass. (The patchbot produces lots of errors but I guess that this is some sort of noise.)",
    "created_at": "2018-03-29T11:45:00Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371567",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:52'></a>
Feel free to set this to positive review if you have checked that all tests actually pass. (The patchbot produces lots of errors but I guess that this is some sort of noise.)



---

archive/issue_comments_371568.json:
```json
{
    "body": "<a id='comment:53'></a>\nThank you, Julian!\n\nI've run the doctests and I get good results:\n\nMy own build has some failing tests, but those aren't due to the commits here; and neither are the problems that the bots report. So: positive it is. Great work.\n\n(we should watch the ticket in case it bitrots before it gets merged)",
    "created_at": "2018-03-29T16:02:14Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371568",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:53'></a>
Thank you, Julian!

I've run the doctests and I get good results:

My own build has some failing tests, but those aren't due to the commits here; and neither are the problems that the bots report. So: positive it is. Great work.

(we should watch the ticket in case it bitrots before it gets merged)



---

archive/issue_events_216288.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-29T16:02:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216288"
}
```



---

archive/issue_events_216289.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-29T16:02:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216289"
}
```



---

archive/issue_events_216290.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-07T17:59:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216290"
}
```



---

archive/issue_events_216291.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-07T17:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216291"
}
```



---

archive/issue_comments_371569.json:
```json
{
    "body": "<a id='comment:54'></a>\nThe release manager might not agree that I'm setting this to needs_work, but this breaks with #24742:\n\n```\nsage -t src/sage/schemes/riemann_surfaces/riemann_surface.py\n**********************************************************************\nFile \"src/sage/schemes/riemann_surfaces/riemann_surface.py\", line 353, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface\nFailed example:\n    A = S.endomorphism_basis()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface[11]>\", line 1, in <module>\n        A = S.endomorphism_basis()\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 1693, in endomorphism_basis\n        return integer_matrix_relations(M,M,b,r)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 2089, in integer_matrix_relations\n        A = Matrix(R,g1,g2,V[:g1*g2])\n      File \"sage/matrix/constructor.pyx\", line 626, in sage.matrix.constructor.MatrixFactory.__call__ (build/cythonized/sage/matrix/constructor.c:2519)\n        return MatrixArgs(*args, **kwds).matrix()\n      File \"sage/matrix/args.pyx\", line 646, in sage.matrix.args.MatrixArgs.matrix (build/cythonized/sage/matrix/args.c:7896)\n        self.finalize()\n      File \"sage/matrix/args.pyx\", line 853, in sage.matrix.args.MatrixArgs.finalize (build/cythonized/sage/matrix/args.c:9655)\n        raise TypeError(f\"unable to convert {self.entries!r} to a matrix\")\n    TypeError: unable to convert ['a1'] to a matrix\n**********************************************************************\n```\n\nThis is because #24742 disallows using strings to construct matrix entries.",
    "created_at": "2018-05-07T17:59:48Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371569",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>
The release manager might not agree that I'm setting this to needs_work, but this breaks with #24742:

```
sage -t src/sage/schemes/riemann_surfaces/riemann_surface.py
**********************************************************************
File "src/sage/schemes/riemann_surfaces/riemann_surface.py", line 353, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface
Failed example:
    A = S.endomorphism_basis()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface[11]>", line 1, in <module>
        A = S.endomorphism_basis()
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 1693, in endomorphism_basis
        return integer_matrix_relations(M,M,b,r)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 2089, in integer_matrix_relations
        A = Matrix(R,g1,g2,V[:g1*g2])
      File "sage/matrix/constructor.pyx", line 626, in sage.matrix.constructor.MatrixFactory.__call__ (build/cythonized/sage/matrix/constructor.c:2519)
        return MatrixArgs(*args, **kwds).matrix()
      File "sage/matrix/args.pyx", line 646, in sage.matrix.args.MatrixArgs.matrix (build/cythonized/sage/matrix/args.c:7896)
        self.finalize()
      File "sage/matrix/args.pyx", line 853, in sage.matrix.args.MatrixArgs.finalize (build/cythonized/sage/matrix/args.c:9655)
        raise TypeError(f"unable to convert {self.entries!r} to a matrix")
    TypeError: unable to convert ['a1'] to a matrix
**********************************************************************
```

This is because #24742 disallows using strings to construct matrix entries.



---

archive/issue_comments_371570.json:
```json
{
    "body": "<a id='comment:55'></a>\nI think that the old code\n\n```\n    names = [\"%s%s\"%(n, i+1) for n in [\"a\",\"b\",\"c\",\"d\"] for i in range(g**2)]\n    R = PolynomialRing(CC, names)\n    vars = R.gens()\n    A = Matrix(R, g, g, vars[:g**2])\n    B = Matrix(R, g, g, vars[g**2:2*g**2])\n    C = Matrix(R, g, g, vars[2*g**2:3*g**2])\n    D = Matrix(R, g, g, vars[3*g**2:4*g**2])\n```\nis clearly better than the new code from this ticket\n\n```\n    V = [\"%s%s\"%(n,i) for n in [\"a\",\"b\",\"c\",\"d\"] for i in srange(1,1+g1*g2)]\n    R = PolynomialRing(CC,V)\n    A = Matrix(R,g1,g2,V[:g1*g2])\n    B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])\n    C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])\n    D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])\n```",
    "created_at": "2018-05-07T18:03:24Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371570",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>
I think that the old code

```
    names = ["%s%s"%(n, i+1) for n in ["a","b","c","d"] for i in range(g**2)]
    R = PolynomialRing(CC, names)
    vars = R.gens()
    A = Matrix(R, g, g, vars[:g**2])
    B = Matrix(R, g, g, vars[g**2:2*g**2])
    C = Matrix(R, g, g, vars[2*g**2:3*g**2])
    D = Matrix(R, g, g, vars[3*g**2:4*g**2])
```
is clearly better than the new code from this ticket

```
    V = ["%s%s"%(n,i) for n in ["a","b","c","d"] for i in srange(1,1+g1*g2)]
    R = PolynomialRing(CC,V)
    A = Matrix(R,g1,g2,V[:g1*g2])
    B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])
    C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])
    D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])
```



---

archive/issue_comments_371571.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [jdemeyer](#comment%3A55):\n> I think that the old code\n> \n> ```\n>     names = [\"%s%s\"%(n, i+1) for n in [\"a\",\"b\",\"c\",\"d\"] for i in range(g**2)]\n>     R = PolynomialRing(CC, names)\n>     vars = R.gens()\n>     A = Matrix(R, g, g, vars[:g**2])\n>     B = Matrix(R, g, g, vars[g**2:2*g**2])\n>     C = Matrix(R, g, g, vars[2*g**2:3*g**2])\n>     D = Matrix(R, g, g, vars[3*g**2:4*g**2])\n> ```\n> is clearly better than the new code from this ticket\n> \n> ```\n>     V = [\"%s%s\"%(n,i) for n in [\"a\",\"b\",\"c\",\"d\"] for i in srange(1,1+g1*g2)]\n>     R = PolynomialRing(CC,V)\n>     A = Matrix(R,g1,g2,V[:g1*g2])\n>     B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])\n>     C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])\n>     D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])\n> ```\n\n\nI agree with that in principle; I'll leave it to Jeroen to fix this. Perhaps he had a good reason to prefer strings (I fail to see any). I'm also fine with merging this ticket as-is, but that's unlikely to happen now that someone has reverted the positive review (grr).",
    "created_at": "2018-05-07T19:37:21Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371571",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:56'></a>
Replying to [jdemeyer](#comment%3A55):
> I think that the old code
> 
> ```
>     names = ["%s%s"%(n, i+1) for n in ["a","b","c","d"] for i in range(g**2)]
>     R = PolynomialRing(CC, names)
>     vars = R.gens()
>     A = Matrix(R, g, g, vars[:g**2])
>     B = Matrix(R, g, g, vars[g**2:2*g**2])
>     C = Matrix(R, g, g, vars[2*g**2:3*g**2])
>     D = Matrix(R, g, g, vars[3*g**2:4*g**2])
> ```
> is clearly better than the new code from this ticket
> 
> ```
>     V = ["%s%s"%(n,i) for n in ["a","b","c","d"] for i in srange(1,1+g1*g2)]
>     R = PolynomialRing(CC,V)
>     A = Matrix(R,g1,g2,V[:g1*g2])
>     B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])
>     C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])
>     D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])
> ```


I agree with that in principle; I'll leave it to Jeroen to fix this. Perhaps he had a good reason to prefer strings (I fail to see any). I'm also fine with merging this ticket as-is, but that's unlikely to happen now that someone has reverted the positive review (grr).



---

archive/issue_comments_371572.json:
```json
{
    "body": "**Changing commit** from \"[47a2f30d2ab7a5c944b04cc88c53278612ccd0e8](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)\" to \"[4a98393c80a4f40cb5e0043dfc6755f78d3beafa](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)\".",
    "created_at": "2018-05-07T20:32:21Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[47a2f30d2ab7a5c944b04cc88c53278612ccd0e8](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)" to "[4a98393c80a4f40cb5e0043dfc6755f78d3beafa](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)".



---

archive/issue_comments_371573.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37a50255414a4b869a9b10586a94ad5dd46924dc\">37a5025</a></td><td><code>Merge branch 'develop' into t/24370/rs_alg_and_aut</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa\">4a98393</a></td><td><code>Change to initialize matrices using variables instead of strings</code></td></tr></table>\n",
    "created_at": "2018-05-07T20:32:21Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371573",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37a50255414a4b869a9b10586a94ad5dd46924dc">37a5025</a></td><td><code>Merge branch 'develop' into t/24370/rs_alg_and_aut</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa">4a98393</a></td><td><code>Change to initialize matrices using variables instead of strings</code></td></tr></table>




---

archive/issue_comments_371574.json:
```json
{
    "body": "<a id='comment:58'></a>\nJeroen can revert this if he wants strings. In the mean time, the quickest way forward is to just initialize with the variable objects instead.",
    "created_at": "2018-05-07T20:34:21Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371574",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:58'></a>
Jeroen can revert this if he wants strings. In the mean time, the quickest way forward is to just initialize with the variable objects instead.



---

archive/issue_events_216292.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-05-07T20:34:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216292"
}
```



---

archive/issue_events_216293.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-05-07T20:34:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216293"
}
```



---

archive/issue_comments_371575.json:
```json
{
    "body": "<a id='comment:59'></a>\nWhen you said \"Jeroen\" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.",
    "created_at": "2018-05-07T21:55:33Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371575",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:59'></a>
When you said "Jeroen" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.



---

archive/issue_comments_371576.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [jdemeyer](#comment%3A59):\n> When you said \"Jeroen\" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.\n\nWell, that's a namespace issue you'll have to solve yourselves :-)",
    "created_at": "2018-05-08T04:53:42Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371576",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:60'></a>
Replying to [jdemeyer](#comment%3A59):
> When you said "Jeroen" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.

Well, that's a namespace issue you'll have to solve yourselves :-)



---

archive/issue_comments_371577.json:
```json
{
    "body": "<a id='comment:61'></a>\nThis part of the functionality seems to date from before this particular ticket (thus saith git blame). And I do not recall changing this. Anyway, no need to revert on my account.",
    "created_at": "2018-05-08T14:29:01Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371577",
    "user": "https://github.com/JRSijsling"
}
```

<a id='comment:61'></a>
This part of the functionality seems to date from before this particular ticket (thus saith git blame). And I do not recall changing this. Anyway, no need to revert on my account.



---

archive/issue_comments_371578.json:
```json
{
    "body": "<a id='comment:62'></a>\nHm. It is a little weird where this change happened. It takes a `git log --follow` to find the change:\nIt seems the change was made on #24884 to use variables instead of strings. Oddly enough, there is nothing in the history of the file that has since undone that change if I look in the history of the file. It seems git trac is basing its diffs on an alternate timeline ...",
    "created_at": "2018-05-08T20:35:27Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371578",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:62'></a>
Hm. It is a little weird where this change happened. It takes a `git log --follow` to find the change:
It seems the change was made on #24884 to use variables instead of strings. Oddly enough, there is nothing in the history of the file that has since undone that change if I look in the history of the file. It seems git trac is basing its diffs on an alternate timeline ...



---

archive/issue_comments_371579.json:
```json
{
    "body": "**Changing branch** from \"[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)\" to \"[4a98393c80a4f40cb5e0043dfc6755f78d3beafa](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)\".",
    "created_at": "2018-05-09T09:49:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371579",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)" to "[4a98393c80a4f40cb5e0043dfc6755f78d3beafa](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)".



---

archive/issue_events_216294.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-09T09:49:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216294"
}
```



---

archive/issue_events_216295.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "13fd23bb8034b0793582f00e0768bb52dd3cd54d",
    "created_at": "2018-05-09T09:49:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-216295"
}
```
