# Issue 24370: Riemann surfaces: algebraization and automorphisms

archive/issues_024133.json:
```json
{
    "assignees": [],
    "body": "This is a small amount of new code for Riemann surfaces. Main features:\n\n* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;\n\n* algebraizing said tangential representations;\n\n* determining automorphism groups.\n\nKeywords: **endomorphisms, automorphisms**\n\nBranch/Commit: **[4a98393](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**\n\nReviewer: **Julian R\u00fcth**\n\nAuthor: **Nils Bruin, Jeroen Sijsling**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24370_\n\n",
    "closed_at": "2018-05-09T09:49:56Z",
    "created_at": "2017-12-12T14:03:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Riemann surfaces: algebraization and automorphisms",
    "type": "issue",
    "updated_at": "2018-05-09T09:49:56Z",
    "url": "https://github.com/sagemath/sage/issues/24370",
    "user": "https://github.com/JRSijsling"
}
```
This is a small amount of new code for Riemann surfaces. Main features:

* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;

* algebraizing said tangential representations;

* determining automorphism groups.

Keywords: **endomorphisms, automorphisms**

Branch/Commit: **[4a98393](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**

Reviewer: **Julian RÃ¼th**

Author: **Nils Bruin, Jeroen Sijsling**

_Issue created by migration from https://trac.sagemath.org/ticket/24370_





---

archive/issue_events_319846.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:03:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319846"
}
```



---

archive/issue_events_319847.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:03:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319847"
}
```



---

archive/issue_comments_371657.json:
```json
{
    "body": "Branch: **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**",
    "created_at": "2017-12-12T14:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371657",
    "user": "https://github.com/JRSijsling"
}
```

Branch: **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**



---

archive/issue_comments_371658.json:
```json
{
    "body": "Commit: **[07d6c37](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)**",
    "created_at": "2017-12-12T14:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371658",
    "user": "https://github.com/JRSijsling"
}
```

Commit: **[07d6c37](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)**



---

archive/issue_comments_371659.json:
```json
{
    "body": "Changed keywords from none to **endomorphisms, automorphisms**",
    "created_at": "2017-12-12T14:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371659",
    "user": "https://github.com/JRSijsling"
}
```

Changed keywords from none to **endomorphisms, automorphisms**



---

archive/issue_comments_371660.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n+This is a small amount of new code for Riemann surfaces. Main features:\n \n+* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;\n+\n+* algebraizing said tangential representations;\n+\n+* determining automorphism groups.\n``````\n",
    "created_at": "2017-12-12T14:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371660",
    "user": "https://github.com/JRSijsling"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
+This is a small amount of new code for Riemann surfaces. Main features:
 
+* converting endomorphism representations on the homology of the Jacobian into representations on the tangent space;
+
+* algebraizing said tangential representations;
+
+* determining automorphism groups.
``````




---

archive/issue_events_319848.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "component: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319848"
}
```



---

archive/issue_events_319849.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319849"
}
```



---

archive/issue_events_319850.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319850"
}
```



---

archive/issue_events_319851.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319851"
}
```



---

archive/issue_events_319852.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319852"
}
```



---

archive/issue_events_319853.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:44:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "title_is": "RIemann surfaces: algebraization and automorphisms",
    "title_was": "rs_alg_and_aut",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319853"
}
```



---

archive/issue_events_319854.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2017-12-12T14:44:33Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "title_is": "Riemann surfaces: algebraization and automorphisms",
    "title_was": "RIemann surfaces: algebraization and automorphisms",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319854"
}
```



---

archive/issue_comments_371661.json:
```json
{
    "body": "Author: **Jeroen Sijsling**",
    "created_at": "2017-12-12T14:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371661",
    "user": "https://github.com/JRSijsling"
}
```

Author: **Jeroen Sijsling**



---

archive/issue_comments_371662.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nSorry for the lack of content so far, I messed up the branch and lost code. It is on the way...",
    "created_at": "2017-12-13T08:13:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371662",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:6" align="right">Comment 6</div>

Sorry for the lack of content so far, I messed up the branch and lost code. It is on the way...



---

archive/issue_comments_371663.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d\">5b6ffcb</a></td><td><code>Riemann surfaces: algebraization and automorphisms</code></td></tr></table>\n",
    "created_at": "2017-12-13T10:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371663",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d">5b6ffcb</a></td><td><code>Riemann surfaces: algebraization and automorphisms</code></td></tr></table>




---

archive/issue_comments_371664.json:
```json
{
    "body": "Changed commit from **[07d6c37](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)** to **[5b6ffcb](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)**",
    "created_at": "2017-12-13T10:23:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371664",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[07d6c37](https://github.com/sagemath/sagetrac-mirror/commit/07d6c37d18811e2b377a9689790a7c5e24da16ba)** to **[5b6ffcb](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)**



---

archive/issue_comments_371665.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nNice!\n\nFor each function, the documentation string should follow the rules listed at\n    http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content\n\nThat is: a short one-line sentence description followed by an optional longer paragraph.",
    "created_at": "2017-12-13T18:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371665",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">Comment 8</div>

Nice!

For each function, the documentation string should follow the rules listed at
    http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content

That is: a short one-line sentence description followed by an optional longer paragraph.



---

archive/issue_comments_371666.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nTo find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.",
    "created_at": "2017-12-13T18:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371666",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">Comment 9</div>

To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.



---

archive/issue_comments_371667.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nWhat is the point of taking power of `10` for everything? It is much more natural to consider precision in bits...",
    "created_at": "2017-12-13T18:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371667",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">Comment 10</div>

What is the point of taking power of `10` for everything? It is much more natural to consider precision in bits...



---

archive/issue_events_319855.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-13T18:14:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319855"
}
```



---

archive/issue_events_319856.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-13T18:14:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319856"
}
```



---

archive/issue_comments_371668.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@videlec](#comment%3A9):\n> To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.\n\nmpmath has a multiprecision version if necessary but hopefully we can just get away with the single precision version here.\n\nhttp://mpmath.org/doc/current/matrices.html#matrix-factorization",
    "created_at": "2017-12-13T18:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371668",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@videlec](#comment%3A9):
> To find an invertible submatrix it is much better to perform an LU decomposition. This is implemented in scipy for standard floating point precision (https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.linalg.lu.html) and much more numerically stable than what you did.

mpmath has a multiprecision version if necessary but hopefully we can just get away with the single precision version here.

http://mpmath.org/doc/current/matrices.html#matrix-factorization



---

archive/issue_comments_371669.json:
```json
{
    "body": "Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**",
    "created_at": "2017-12-14T03:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371669",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**



---

archive/issue_comments_371670.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nSome small updates. Your old branch should still be there if you prefer. I haven't amended the code to use LU decomp yet, but the code as it was didn't work as intended anyway.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45\">179dac9</a></td><td><code>trac 24370: Some small fixes and improvements:</code></td></tr></table>\n",
    "created_at": "2017-12-14T04:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371670",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:14" align="right">Comment 14</div>

Some small updates. Your old branch should still be there if you prefer. I haven't amended the code to use LU decomp yet, but the code as it was didn't work as intended anyway.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45">179dac9</a></td><td><code>trac 24370: Some small fixes and improvements:</code></td></tr></table>




---

archive/issue_comments_371671.json:
```json
{
    "body": "Changed commit from **[5b6ffcb](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)** to **[179dac9](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)**",
    "created_at": "2017-12-14T04:06:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371671",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[5b6ffcb](https://github.com/sagemath/sagetrac-mirror/commit/5b6ffcb1474d45d3b9087c73ea3a8e70b0d4105d)** to **[179dac9](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)**



---

archive/issue_comments_371672.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nAnother note: can we choose default values for the various epsilons based on the precision provided? It's probably good to have some margin but it probably doesn't need to be more than 5-10 bits.",
    "created_at": "2017-12-14T18:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371672",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:15" align="right">Comment 15</div>

Another note: can we choose default values for the various epsilons based on the precision provided? It's probably good to have some margin but it probably doesn't need to be more than 5-10 bits.



---

archive/issue_comments_371673.json:
```json
{
    "body": "Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**",
    "created_at": "2017-12-20T10:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371673",
    "user": "https://github.com/JRSijsling"
}
```

Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**



---

archive/issue_comments_371674.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nThanks for all your comments!\n\nI pulled Nils' modifications (please check) and added functionality for homomorphisms and isomorphisms as well. I will soon add some files that test this in Attachments.\n\nI modified the descriptions to start with a single one-line summary. I have also used precision where relevant, and in bits, not in decimal digits.\n\nThere is just one problem remaining, which is the extraction of an invertible submatrix. I have used scipy.linalg.lu, but it gives an extremely uninformative error message. Moreover, that function seems to work for some matrices and fail for others, which does not help to isolate the source of the error. To see what I am talking about, try using invertible_submatrix_lu. I truly have no idea what to do to get this to work, but perhaps someone else sees a simple fix.",
    "created_at": "2017-12-20T10:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371674",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:17" align="right">Comment 17</div>

Thanks for all your comments!

I pulled Nils' modifications (please check) and added functionality for homomorphisms and isomorphisms as well. I will soon add some files that test this in Attachments.

I modified the descriptions to start with a single one-line summary. I have also used precision where relevant, and in bits, not in decimal digits.

There is just one problem remaining, which is the extraction of an invertible submatrix. I have used scipy.linalg.lu, but it gives an extremely uninformative error message. Moreover, that function seems to work for some matrices and fail for others, which does not help to isolate the source of the error. To see what I am talking about, try using invertible_submatrix_lu. I truly have no idea what to do to get this to work, but perhaps someone else sees a simple fix.



---

archive/issue_comments_371675.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136\">b1d4a83</a></td><td><code>Trac 24370: Added suggestions and isomorphisms</code></td></tr></table>\n",
    "created_at": "2017-12-20T11:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371675",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136">b1d4a83</a></td><td><code>Trac 24370: Added suggestions and isomorphisms</code></td></tr></table>




---

archive/issue_comments_371676.json:
```json
{
    "body": "Changed commit from **[179dac9](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)** to **[b1d4a83](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)**",
    "created_at": "2017-12-20T11:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371676",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[179dac9](https://github.com/sagemath/sagetrac-mirror/commit/179dac95f1528a237179dd49e736a6b6e38d8e45)** to **[b1d4a83](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)**



---

archive/issue_comments_371677.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe\">9e5a396</a></td><td><code>Trac 24370: Further improvements</code></td></tr></table>\n",
    "created_at": "2017-12-20T18:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371677",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19" align="right">Comment 19</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe">9e5a396</a></td><td><code>Trac 24370: Further improvements</code></td></tr></table>




---

archive/issue_comments_371678.json:
```json
{
    "body": "Changed commit from **[b1d4a83](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)** to **[9e5a396](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)**",
    "created_at": "2017-12-20T18:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371678",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b1d4a83](https://github.com/sagemath/sagetrac-mirror/commit/b1d4a830b3a91394b47a15cd7a3caed32bb19136)** to **[9e5a396](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)**



---

archive/issue_comments_371679.json:
```json
{
    "body": "Attachment: **[test-lu.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-lu.sage.gz)**",
    "created_at": "2017-12-20T18:31:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371679",
    "user": "https://github.com/JRSijsling"
}
```

Attachment: **[test-lu.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-lu.sage.gz)**



---

archive/issue_comments_371680.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nAttachments now contains examples of failing LU decompositions.",
    "created_at": "2017-12-20T18:31:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371680",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:20" align="right">Comment 20</div>

Attachments now contains examples of failing LU decompositions.



---

archive/issue_comments_371681.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nscipy failure: You're hitting fortran code here. It's hard to imagine it would be capable of working with sage multiprecision floats. If you convert to python standard complex floats it's probably OK:\n\n```\ndef invertible_submatrix_lu(M):\n    Mt = M.transpose()\n    rowsMt = Mt.rows()\n    colsMt = Mt.columns()\n    ccMt=scipy.matrix([[p.__complex__() for p in r] for r in Mt ])\n    P, L, U = lu(ccMt)\n    rowsP = matrix(P).rows()\n    col_nums = [ ]\n    for i in range(len(rowsP)):\n        if any([ (rowsP[i][j].abs() > 0.1) for j in range(len(colsMt)) ]):\n            col_nums.append(i)\n    subM = Matrix([ rowsMt[i] for i in col_nums ]).transpose()\n    return subM, col_nums\n```\nAt least it helps with the example you gave.\n\nAnother observation: \n\nThe first block of the large period matrix `P=(A|B)` MUST be invertible (these are the integrals wrt to first half of the symplectic basis). In fact, to get the small period matrix we compute `A^(-1)*B` anyway. So: is it worth looking for a \"better\" invertible submatrix than just the first block? I doubt it.\n\nI've looked at the examples you've posted. `lu` decomposition often chooses something else than the first `g` columns, but the determinant of the matrix it chooses isn't always larger in absolute value (that's not the only measure: we'd like the matrix to be well-conditioned as well).\n\nSo I think you can defend just not doing any work and just taking the first block. I suspect that should work about as well. If you have examples to the contrary it'll be interesting to see, of course!",
    "created_at": "2017-12-20T22:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371681",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:21" align="right">Comment 21</div>

scipy failure: You're hitting fortran code here. It's hard to imagine it would be capable of working with sage multiprecision floats. If you convert to python standard complex floats it's probably OK:

```
def invertible_submatrix_lu(M):
    Mt = M.transpose()
    rowsMt = Mt.rows()
    colsMt = Mt.columns()
    ccMt=scipy.matrix([[p.__complex__() for p in r] for r in Mt ])
    P, L, U = lu(ccMt)
    rowsP = matrix(P).rows()
    col_nums = [ ]
    for i in range(len(rowsP)):
        if any([ (rowsP[i][j].abs() > 0.1) for j in range(len(colsMt)) ]):
            col_nums.append(i)
    subM = Matrix([ rowsMt[i] for i in col_nums ]).transpose()
    return subM, col_nums
```
At least it helps with the example you gave.

Another observation: 

The first block of the large period matrix `P=(A|B)` MUST be invertible (these are the integrals wrt to first half of the symplectic basis). In fact, to get the small period matrix we compute `A^(-1)*B` anyway. So: is it worth looking for a "better" invertible submatrix than just the first block? I doubt it.

I've looked at the examples you've posted. `lu` decomposition often chooses something else than the first `g` columns, but the determinant of the matrix it chooses isn't always larger in absolute value (that's not the only measure: we'd like the matrix to be well-conditioned as well).

So I think you can defend just not doing any work and just taking the first block. I suspect that should work about as well. If you have examples to the contrary it'll be interesting to see, of course!



---

archive/issue_comments_371682.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nThank you for giving me two solutions. What you suggest already convinces me that we should just take the first g columns. I did not do this before simply because of previous habits in circumstances where the first columns did not always give an invertible submatrix. Still, I should have realized that things do work out in this context. New version coming up.",
    "created_at": "2017-12-20T22:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371682",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:22" align="right">Comment 22</div>

Thank you for giving me two solutions. What you suggest already convinces me that we should just take the first g columns. I did not do this before simply because of previous habits in circumstances where the first columns did not always give an invertible submatrix. Still, I should have realized that things do work out in this context. New version coming up.



---

archive/issue_comments_371683.json:
```json
{
    "body": "Changed commit from **[9e5a396](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)** to **[0b64696](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)**",
    "created_at": "2017-12-20T22:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9e5a396](https://github.com/sagemath/sagetrac-mirror/commit/9e5a3968e4811297d0e41a89431d7dc6efbc9cbe)** to **[0b64696](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)**



---

archive/issue_comments_371684.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88\">0b64696</a></td><td><code>Trac 24370: Simplified invertible submatrix</code></td></tr></table>\n",
    "created_at": "2017-12-20T22:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371684",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88">0b64696</a></td><td><code>Trac 24370: Simplified invertible submatrix</code></td></tr></table>




---

archive/issue_comments_371685.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nYou should pull out the inverse from the loop, of course :-).\nFurthermore, I'm not so sure that explicitly changing to the base ring of Q is better, so why not leave it to the system to choose the appropriate precision (it would probably choose the minimum of the two). Perhaps you shouldn't even base change back to `P.base_ring()` for that reason.\n\nIf course, if you think we have enough precision lying around already to get better results by doing the intermediate computations at a higher precision then you should do that explicitly. So I think the body can be shortened to something along the lines of:\n\n```\n        P = self.period_matrix()\n        Q = other.period_matrix()\n        g = P.nrows()\n        s = range(g)\n        subP = (P[:g,:g]).inverse()\n        Ts = [(Q*R)[:,:g].transpose() * subP for R in Rs]\n        return [ T.change_ring(P.base_ring()) for T in Ts ]\n```\n(if you need the number of rows you shouldn't ask for the length of the list constructed from the rows. Slicing vs. submatrix is probably just a matter of taste)\n\nAnother point: I see that \"automorphism group\" now returns a permutation group. I think you should also return the action of the group on something meaningful (returning the thing as a matrix group as was done previously did that).",
    "created_at": "2017-12-20T23:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371685",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:24" align="right">Comment 24</div>

You should pull out the inverse from the loop, of course :-).
Furthermore, I'm not so sure that explicitly changing to the base ring of Q is better, so why not leave it to the system to choose the appropriate precision (it would probably choose the minimum of the two). Perhaps you shouldn't even base change back to `P.base_ring()` for that reason.

If course, if you think we have enough precision lying around already to get better results by doing the intermediate computations at a higher precision then you should do that explicitly. So I think the body can be shortened to something along the lines of:

```
        P = self.period_matrix()
        Q = other.period_matrix()
        g = P.nrows()
        s = range(g)
        subP = (P[:g,:g]).inverse()
        Ts = [(Q*R)[:,:g].transpose() * subP for R in Rs]
        return [ T.change_ring(P.base_ring()) for T in Ts ]
```
(if you need the number of rows you shouldn't ask for the length of the list constructed from the rows. Slicing vs. submatrix is probably just a matter of taste)

Another point: I see that "automorphism group" now returns a permutation group. I think you should also return the action of the group on something meaningful (returning the thing as a matrix group as was done previously did that).



---

archive/issue_comments_371686.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nPerfect. There was no transpose needed, but your code suggestion is much better. I have also reverted to returning a matrix group. This is also better if one ever wants to divide out by -1, like in the non-hyperelliptic case, and the example shows how to obtain a permutation group anyway.",
    "created_at": "2017-12-21T07:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371686",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:25" align="right">Comment 25</div>

Perfect. There was no transpose needed, but your code suggestion is much better. I have also reverted to returning a matrix group. This is also better if one ever wants to divide out by -1, like in the non-hyperelliptic case, and the example shows how to obtain a permutation group anyway.



---

archive/issue_comments_371687.json:
```json
{
    "body": "Changed commit from **[0b64696](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)** to **[79861be](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)**",
    "created_at": "2017-12-21T07:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371687",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0b64696](https://github.com/sagemath/sagetrac-mirror/commit/0b64696d99b83ffdd204640c20840cfc270f4f88)** to **[79861be](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)**



---

archive/issue_comments_371688.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039\">79861be</a></td><td><code>Trace 24370: Further improvements</code></td></tr></table>\n",
    "created_at": "2017-12-21T07:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371688",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26" align="right">Comment 26</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039">79861be</a></td><td><code>Trace 24370: Further improvements</code></td></tr></table>




---

archive/issue_comments_371689.json:
```json
{
    "body": "Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**",
    "created_at": "2017-12-30T04:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371689",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**



---

archive/issue_comments_371690.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nCompute matrix inverse using LU decomposition. This should be numerically a little better behaved.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432\">3310e22</a></td><td><code>Implement numerical matrix inverse via LU decomposition</code></td></tr></table>\n",
    "created_at": "2017-12-30T04:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371690",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:28" align="right">Comment 28</div>

Compute matrix inverse using LU decomposition. This should be numerically a little better behaved.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432">3310e22</a></td><td><code>Implement numerical matrix inverse via LU decomposition</code></td></tr></table>




---

archive/issue_comments_371691.json:
```json
{
    "body": "Changed commit from **[79861be](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)** to **[3310e22](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)**",
    "created_at": "2017-12-30T04:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371691",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[79861be](https://github.com/sagemath/sagetrac-mirror/commit/79861be2e2fe4b9e3b5c22e7ff2f47d7c2d18039)** to **[3310e22](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)**



---

archive/issue_comments_371692.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280\">a2ebec5</a></td><td><code>Equip RiemannSurfaceSum with \"genus\" (being the sum of the genera of the terms)</code></td></tr></table>\n",
    "created_at": "2018-01-03T00:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371692",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29" align="right">Comment 29</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280">a2ebec5</a></td><td><code>Equip RiemannSurfaceSum with "genus" (being the sum of the genera of the terms)</code></td></tr></table>




---

archive/issue_comments_371693.json:
```json
{
    "body": "Changed commit from **[3310e22](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)** to **[a2ebec5](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)**",
    "created_at": "2018-01-03T00:13:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371693",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3310e22](https://github.com/sagemath/sagetrac-mirror/commit/3310e2238764984f8fcc160ae79172875837b432)** to **[a2ebec5](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)**



---

archive/issue_comments_371694.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nEnsuring that this works:\n\n```\nsage: E=EllipticCurve([0,1])\nsage: SE=E.riemann_surface()\nsage: J=SE+SE\nsage: J.symplectic_automorphism_group()\nMatrix group over Integer Ring with 36 generators\n```",
    "created_at": "2018-01-03T00:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371694",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:30" align="right">Comment 30</div>

Ensuring that this works:

```
sage: E=EllipticCurve([0,1])
sage: SE=E.riemann_surface()
sage: J=SE+SE
sage: J.symplectic_automorphism_group()
Matrix group over Integer Ring with 36 generators
```



---

archive/issue_comments_371695.json:
```json
{
    "body": "Changed author from **Jeroen Sijsling** to **Nils Bruin, Jeroen Sijsling**",
    "created_at": "2018-01-07T19:00:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371695",
    "user": "https://github.com/JRSijsling"
}
```

Changed author from **Jeroen Sijsling** to **Nils Bruin, Jeroen Sijsling**



---

archive/issue_comments_371696.json:
```json
{
    "body": "Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**",
    "created_at": "2018-01-07T19:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371696",
    "user": "https://github.com/JRSijsling"
}
```

Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**



---

archive/issue_comments_371697.json:
```json
{
    "body": "Attachment: **[test-other.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-other.sage.gz)**",
    "created_at": "2018-01-07T19:04:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371697",
    "user": "https://github.com/JRSijsling"
}
```

Attachment: **[test-other.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-other.sage.gz)**



---

archive/issue_comments_371698.json:
```json
{
    "body": "Attachment: **[test-other.2.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-other.2.sage.gz)**",
    "created_at": "2018-01-07T19:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371698",
    "user": "https://github.com/JRSijsling"
}
```

Attachment: **[test-other.2.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-other.2.sage.gz)**



---

archive/issue_comments_371699.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nAttachment: **[test-self.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-self.sage.gz)**\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79\">6553907</a></td><td><code>Typo in docstring</code></td></tr></table>\n",
    "created_at": "2018-01-07T21:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371699",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Attachment: **[test-self.sage.gz](https://github.com/sagemath/sage/files/ticket24370/test-self.sage.gz)**

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79">6553907</a></td><td><code>Typo in docstring</code></td></tr></table>




---

archive/issue_comments_371700.json:
```json
{
    "body": "Changed commit from **[a2ebec5](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)** to **[6553907](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)**",
    "created_at": "2018-01-07T21:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371700",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a2ebec5](https://github.com/sagemath/sagetrac-mirror/commit/a2ebec55927353fc0717a5b292e8a6369135a280)** to **[6553907](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)**



---

archive/issue_comments_371701.json:
```json
{
    "body": "Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**",
    "created_at": "2018-01-08T23:05:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371701",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**



---

archive/issue_comments_371702.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nvery temporary patch to get nonsquare LU decomp from mpmath.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6\">f2ccf44</a></td><td><code>TEMPORARY COMMIT. DO NOT BUILD ON THIS!</code></td></tr></table>\n",
    "created_at": "2018-01-08T23:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371702",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:35" align="right">Comment 35</div>

very temporary patch to get nonsquare LU decomp from mpmath.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6">f2ccf44</a></td><td><code>TEMPORARY COMMIT. DO NOT BUILD ON THIS!</code></td></tr></table>




---

archive/issue_comments_371703.json:
```json
{
    "body": "Changed commit from **[6553907](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)** to **[f2ccf44](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)**",
    "created_at": "2018-01-08T23:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371703",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[6553907](https://github.com/sagemath/sagetrac-mirror/commit/65539074ada8a630fe23e22879c476db3ced8c79)** to **[f2ccf44](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)**



---

archive/issue_comments_371704.json:
```json
{
    "body": "Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**",
    "created_at": "2018-01-11T21:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371704",
    "user": "https://github.com/JRSijsling"
}
```

Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)**



---

archive/issue_comments_371705.json:
```json
{
    "body": "Changed commit from **[f2ccf44](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)** to **[13c6d4f](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)**",
    "created_at": "2018-01-12T09:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371705",
    "user": "https://github.com/JRSijsling"
}
```

Changed commit from **[f2ccf44](https://github.com/sagemath/sagetrac-mirror/commit/f2ccf44acc673458aba3cf92d7692c7a92a505b6)** to **[13c6d4f](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)**



---

archive/issue_events_319857.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2018-01-12T09:28:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319857"
}
```



---

archive/issue_events_319858.json:
```json
{
    "actor": "https://github.com/JRSijsling",
    "created_at": "2018-01-12T09:28:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319858"
}
```



---

archive/issue_comments_371706.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f\">13c6d4f</a></td><td><code>Use first g columns of period matrix instead of lu</code></td></tr></table>\n",
    "created_at": "2018-01-12T09:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371706",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:37" align="right">Comment 37</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f">13c6d4f</a></td><td><code>Use first g columns of period matrix instead of lu</code></td></tr></table>




---

archive/issue_comments_371707.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873\">65bf692</a></td><td><code>Use first g columns for inverse instead of lu</code></td></tr></table>\n",
    "created_at": "2018-01-12T10:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371707",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38" align="right">Comment 38</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873">65bf692</a></td><td><code>Use first g columns for inverse instead of lu</code></td></tr></table>




---

archive/issue_comments_371708.json:
```json
{
    "body": "Changed commit from **[13c6d4f](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)** to **[65bf692](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)**",
    "created_at": "2018-01-12T10:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371708",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[13c6d4f](https://github.com/sagemath/sagetrac-mirror/commit/13c6d4f71a1d1a4249d8ad5c42accbecca09705f)** to **[65bf692](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)**



---

archive/issue_comments_371709.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nTODO: I think it could be quite common for people to first compute the endomorphism ring (which is expensive) and then compute the automorphism group. Currently this is quite horrible because we don't cache the result of the endomorphism ring computation. We should have something in the user interface that allows re-use of precomputed endomorphism ring info. Given that the endomorphism computation is subject to tuning parameters (although in practice this seems fairly robust), I can see why we might not want to cache  the result outright. But then at least we might want an interface, comparable to how `tangent_representation_*` works, that can take as input a list of matrices and then computes the automorphisms from it. That's actually something that should only need the Rosati involution.",
    "created_at": "2018-01-17T11:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371709",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:39" align="right">Comment 39</div>

TODO: I think it could be quite common for people to first compute the endomorphism ring (which is expensive) and then compute the automorphism group. Currently this is quite horrible because we don't cache the result of the endomorphism ring computation. We should have something in the user interface that allows re-use of precomputed endomorphism ring info. Given that the endomorphism computation is subject to tuning parameters (although in practice this seems fairly robust), I can see why we might not want to cache  the result outright. But then at least we might want an interface, comparable to how `tangent_representation_*` works, that can take as input a list of matrices and then computes the automorphisms from it. That's actually something that should only need the Rosati involution.



---

archive/issue_comments_371710.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nThat is true. I will add `Rs` as a keyword argument to the `symplectic_*` methods, so that they are calculated by default but can be passed by the user who already has the endomorphism/homomorphism basis.",
    "created_at": "2018-01-18T09:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371710",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:40" align="right">Comment 40</div>

That is true. I will add `Rs` as a keyword argument to the `symplectic_*` methods, so that they are calculated by default but can be passed by the user who already has the endomorphism/homomorphism basis.



---

archive/issue_comments_371711.json:
```json
{
    "body": "Changed commit from **[65bf692](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)** to **[f8d70fa](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)**",
    "created_at": "2018-01-18T09:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371711",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[65bf692](https://github.com/sagemath/sagetrac-mirror/commit/65bf692f4dfcc03fecae7bafa9d04fbc73244873)** to **[f8d70fa](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)**



---

archive/issue_comments_371712.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45\">f8d70fa</a></td><td><code>Add precomputed bases as keyword arguments</code></td></tr></table>\n",
    "created_at": "2018-01-18T09:46:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371712",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41" align="right">Comment 41</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45">f8d70fa</a></td><td><code>Add precomputed bases as keyword arguments</code></td></tr></table>




---

archive/issue_comments_371713.json:
```json
{
    "body": "Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)**",
    "created_at": "2018-02-09T11:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371713",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/sijsling/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/sijsling/rs_alg_and_aut)** to **[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)**



---

archive/issue_comments_371714.json:
```json
{
    "body": "Changed commit from **[f8d70fa](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)** to none",
    "created_at": "2018-02-09T11:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371714",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[f8d70fa](https://github.com/sagemath/sagetrac-mirror/commit/f8d70fa0c1d804d1fc6af5531b6db86791488a45)** to none



---

archive/issue_comments_371715.json:
```json
{
    "body": "Changed branch from **[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**",
    "created_at": "2018-02-09T11:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371715",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/bruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/bruin/rs_alg_and_aut)** to **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)**



---

archive/issue_comments_371716.json:
```json
{
    "body": "Commit: **[7c548bb](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)**",
    "created_at": "2018-02-19T12:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371716",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[7c548bb](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)**



---

archive/issue_comments_371717.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb\">7c548bb</a></td><td><code>Make choice of base ring in integer_matrix_relations robust in the face of different precisions.</code></td></tr></table>\n",
    "created_at": "2018-02-19T12:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371717",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44" align="right">Comment 44</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb">7c548bb</a></td><td><code>Make choice of base ring in integer_matrix_relations robust in the face of different precisions.</code></td></tr></table>




---

archive/issue_comments_371718.json:
```json
{
    "body": "Work Issues: **merge conflicts**",
    "created_at": "2018-03-23T21:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371718",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **merge conflicts**



---

archive/issue_comments_371719.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c\">05e7855</a></td><td><code>Merge remote-tracking branch 'origin/u/nbruin/rs_alg_and_aut' into develop</code></td></tr></table>\n",
    "created_at": "2018-03-24T03:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371719",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46" align="right">Comment 46</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c">05e7855</a></td><td><code>Merge remote-tracking branch 'origin/u/nbruin/rs_alg_and_aut' into develop</code></td></tr></table>




---

archive/issue_comments_371720.json:
```json
{
    "body": "Changed commit from **[7c548bb](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)** to **[05e7855](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)**",
    "created_at": "2018-03-24T03:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371720",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7c548bb](https://github.com/sagemath/sagetrac-mirror/commit/7c548bb6b75ff7d4c2a688ad9c1dac0be8cb53bb)** to **[05e7855](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)**



---

archive/issue_comments_371721.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nMerge conflict resolved (it wasn't clear to me what the conflict was, actually). This ticket has been tested quite a bit and contains very useful code. Ready to be reviewed and merged!\n\nAlso: patchbots are reporting no problems due to this ticket.",
    "created_at": "2018-03-24T04:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371721",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:47" align="right">Comment 47</div>

Merge conflict resolved (it wasn't clear to me what the conflict was, actually). This ticket has been tested quite a bit and contains very useful code. Ready to be reviewed and merged!

Also: patchbots are reporting no problems due to this ticket.



---

archive/issue_events_319859.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-24T04:02:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319859"
}
```



---

archive/issue_events_319860.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-24T04:02:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319860"
}
```



---

archive/issue_comments_371722.json:
```json
{
    "body": "Changed commit from **[05e7855](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)** to **[54fe63a](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)**",
    "created_at": "2018-03-26T02:33:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371722",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[05e7855](https://github.com/sagemath/sagetrac-mirror/commit/05e78556ff4303f4aaa251e30f4b9122992b3c1c)** to **[54fe63a](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)**



---

archive/issue_comments_371723.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0\">54fe63a</a></td><td><code>Equip homology computation with cache for computed arguments (for orientation computations)</code></td></tr></table>\n",
    "created_at": "2018-03-26T02:33:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371723",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48" align="right">Comment 48</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0">54fe63a</a></td><td><code>Equip homology computation with cache for computed arguments (for orientation computations)</code></td></tr></table>




---

archive/issue_comments_371724.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nSurprisingly, argument computation (used in the intersection pairing) can impose a quite measurable cost, so caching it makes sense. For instance with\n\n```\nR.<x,y>=QQ[]\nf = x^10 + y^10 + x^3*y^3 + 1\nC=Curve(f)\nS=C.riemann_surface()\n%time M=S.period_matrix()\n```\n**PRE:**\n\n```\nCPU times: user 5min 56s, sys: 151 ms, total: 5min 56s\nWall time: 5min 57s\n```\n**POST:**\n\n```\nCPU times: user 3min 8s, sys: 104 ms, total: 3min 8s\nWall time: 3min 9s\n```",
    "created_at": "2018-03-26T02:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371724",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:49" align="right">Comment 49</div>

Surprisingly, argument computation (used in the intersection pairing) can impose a quite measurable cost, so caching it makes sense. For instance with

```
R.<x,y>=QQ[]
f = x^10 + y^10 + x^3*y^3 + 1
C=Curve(f)
S=C.riemann_surface()
%time M=S.period_matrix()
```
**PRE:**

```
CPU times: user 5min 56s, sys: 151 ms, total: 5min 56s
Wall time: 5min 57s
```
**POST:**

```
CPU times: user 3min 8s, sys: 104 ms, total: 3min 8s
Wall time: 3min 9s
```



---

archive/issue_comments_371725.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8\">47a2f30</a></td><td><code>Make sure documentation actually is processed as part of the reference manual</code></td></tr></table>\n",
    "created_at": "2018-03-28T17:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371725",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50" align="right">Comment 50</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8">47a2f30</a></td><td><code>Make sure documentation actually is processed as part of the reference manual</code></td></tr></table>




---

archive/issue_comments_371726.json:
```json
{
    "body": "Changed commit from **[54fe63a](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)** to **[47a2f30](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)**",
    "created_at": "2018-03-28T17:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371726",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[54fe63a](https://github.com/sagemath/sagetrac-mirror/commit/54fe63acfc36534f8dee4943660f83b76b89d3f0)** to **[47a2f30](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)**



---

archive/issue_comments_371727.json:
```json
{
    "body": "Changed work issues from **merge conflicts** to none",
    "created_at": "2018-03-29T11:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371727",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **merge conflicts** to none



---

archive/issue_comments_371728.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2018-03-29T11:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371728",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian RÃ¼th**



---

archive/issue_comments_371729.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nFeel free to set this to positive review if you have checked that all tests actually pass. (The patchbot produces lots of errors but I guess that this is some sort of noise.)",
    "created_at": "2018-03-29T11:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371729",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:52" align="right">Comment 52</div>

Feel free to set this to positive review if you have checked that all tests actually pass. (The patchbot produces lots of errors but I guess that this is some sort of noise.)



---

archive/issue_comments_371730.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nThank you, Julian!\n\nI've run the doctests and I get good results:\n\nMy own build has some failing tests, but those aren't due to the commits here; and neither are the problems that the bots report. So: positive it is. Great work.\n\n(we should watch the ticket in case it bitrots before it gets merged)",
    "created_at": "2018-03-29T16:02:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371730",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:53" align="right">Comment 53</div>

Thank you, Julian!

I've run the doctests and I get good results:

My own build has some failing tests, but those aren't due to the commits here; and neither are the problems that the bots report. So: positive it is. Great work.

(we should watch the ticket in case it bitrots before it gets merged)



---

archive/issue_events_319861.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-29T16:02:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319861"
}
```



---

archive/issue_events_319862.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-03-29T16:02:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319862"
}
```



---

archive/issue_events_319863.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-07T17:59:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319863"
}
```



---

archive/issue_events_319864.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-07T17:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319864"
}
```



---

archive/issue_comments_371731.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nThe release manager might not agree that I'm setting this to needs_work, but this breaks with #24742:\n\n```\nsage -t src/sage/schemes/riemann_surfaces/riemann_surface.py\n**********************************************************************\nFile \"src/sage/schemes/riemann_surfaces/riemann_surface.py\", line 353, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface\nFailed example:\n    A = S.endomorphism_basis()\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 551, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 961, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface[11]>\", line 1, in <module>\n        A = S.endomorphism_basis()\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 1693, in endomorphism_basis\n        return integer_matrix_relations(M,M,b,r)\n      File \"/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py\", line 2089, in integer_matrix_relations\n        A = Matrix(R,g1,g2,V[:g1*g2])\n      File \"sage/matrix/constructor.pyx\", line 626, in sage.matrix.constructor.MatrixFactory.__call__ (build/cythonized/sage/matrix/constructor.c:2519)\n        return MatrixArgs(*args, **kwds).matrix()\n      File \"sage/matrix/args.pyx\", line 646, in sage.matrix.args.MatrixArgs.matrix (build/cythonized/sage/matrix/args.c:7896)\n        self.finalize()\n      File \"sage/matrix/args.pyx\", line 853, in sage.matrix.args.MatrixArgs.finalize (build/cythonized/sage/matrix/args.c:9655)\n        raise TypeError(f\"unable to convert {self.entries!r} to a matrix\")\n    TypeError: unable to convert ['a1'] to a matrix\n**********************************************************************\n```\n\nThis is because #24742 disallows using strings to construct matrix entries.",
    "created_at": "2018-05-07T17:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371731",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:54" align="right">Comment 54</div>

The release manager might not agree that I'm setting this to needs_work, but this breaks with #24742:

```
sage -t src/sage/schemes/riemann_surfaces/riemann_surface.py
**********************************************************************
File "src/sage/schemes/riemann_surfaces/riemann_surface.py", line 353, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface
Failed example:
    A = S.endomorphism_basis()
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 551, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 961, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface[11]>", line 1, in <module>
        A = S.endomorphism_basis()
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 1693, in endomorphism_basis
        return integer_matrix_relations(M,M,b,r)
      File "/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/schemes/riemann_surfaces/riemann_surface.py", line 2089, in integer_matrix_relations
        A = Matrix(R,g1,g2,V[:g1*g2])
      File "sage/matrix/constructor.pyx", line 626, in sage.matrix.constructor.MatrixFactory.__call__ (build/cythonized/sage/matrix/constructor.c:2519)
        return MatrixArgs(*args, **kwds).matrix()
      File "sage/matrix/args.pyx", line 646, in sage.matrix.args.MatrixArgs.matrix (build/cythonized/sage/matrix/args.c:7896)
        self.finalize()
      File "sage/matrix/args.pyx", line 853, in sage.matrix.args.MatrixArgs.finalize (build/cythonized/sage/matrix/args.c:9655)
        raise TypeError(f"unable to convert {self.entries!r} to a matrix")
    TypeError: unable to convert ['a1'] to a matrix
**********************************************************************
```

This is because #24742 disallows using strings to construct matrix entries.



---

archive/issue_comments_371732.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nI think that the old code\n\n```\n    names = [\"%s%s\"%(n, i+1) for n in [\"a\",\"b\",\"c\",\"d\"] for i in range(g**2)]\n    R = PolynomialRing(CC, names)\n    vars = R.gens()\n    A = Matrix(R, g, g, vars[:g**2])\n    B = Matrix(R, g, g, vars[g**2:2*g**2])\n    C = Matrix(R, g, g, vars[2*g**2:3*g**2])\n    D = Matrix(R, g, g, vars[3*g**2:4*g**2])\n```\nis clearly better than the new code from this ticket\n\n```\n    V = [\"%s%s\"%(n,i) for n in [\"a\",\"b\",\"c\",\"d\"] for i in srange(1,1+g1*g2)]\n    R = PolynomialRing(CC,V)\n    A = Matrix(R,g1,g2,V[:g1*g2])\n    B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])\n    C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])\n    D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])\n```",
    "created_at": "2018-05-07T18:03:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371732",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">Comment 55</div>

I think that the old code

```
    names = ["%s%s"%(n, i+1) for n in ["a","b","c","d"] for i in range(g**2)]
    R = PolynomialRing(CC, names)
    vars = R.gens()
    A = Matrix(R, g, g, vars[:g**2])
    B = Matrix(R, g, g, vars[g**2:2*g**2])
    C = Matrix(R, g, g, vars[2*g**2:3*g**2])
    D = Matrix(R, g, g, vars[3*g**2:4*g**2])
```
is clearly better than the new code from this ticket

```
    V = ["%s%s"%(n,i) for n in ["a","b","c","d"] for i in srange(1,1+g1*g2)]
    R = PolynomialRing(CC,V)
    A = Matrix(R,g1,g2,V[:g1*g2])
    B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])
    C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])
    D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])
```



---

archive/issue_comments_371733.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nReplying to [@jdemeyer](#comment%3A55):\n> I think that the old code\n> \n> ```\n>     names = [\"%s%s\"%(n, i+1) for n in [\"a\",\"b\",\"c\",\"d\"] for i in range(g**2)]\n>     R = PolynomialRing(CC, names)\n>     vars = R.gens()\n>     A = Matrix(R, g, g, vars[:g**2])\n>     B = Matrix(R, g, g, vars[g**2:2*g**2])\n>     C = Matrix(R, g, g, vars[2*g**2:3*g**2])\n>     D = Matrix(R, g, g, vars[3*g**2:4*g**2])\n> ```\n> is clearly better than the new code from this ticket\n> \n> ```\n>     V = [\"%s%s\"%(n,i) for n in [\"a\",\"b\",\"c\",\"d\"] for i in srange(1,1+g1*g2)]\n>     R = PolynomialRing(CC,V)\n>     A = Matrix(R,g1,g2,V[:g1*g2])\n>     B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])\n>     C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])\n>     D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])\n> ```\n\nI agree with that in principle; I'll leave it to Jeroen to fix this. Perhaps he had a good reason to prefer strings (I fail to see any). I'm also fine with merging this ticket as-is, but that's unlikely to happen now that someone has reverted the positive review (grr).",
    "created_at": "2018-05-07T19:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371733",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:56" align="right">Comment 56</div>

Replying to [@jdemeyer](#comment%3A55):
> I think that the old code
> 
> ```
>     names = ["%s%s"%(n, i+1) for n in ["a","b","c","d"] for i in range(g**2)]
>     R = PolynomialRing(CC, names)
>     vars = R.gens()
>     A = Matrix(R, g, g, vars[:g**2])
>     B = Matrix(R, g, g, vars[g**2:2*g**2])
>     C = Matrix(R, g, g, vars[2*g**2:3*g**2])
>     D = Matrix(R, g, g, vars[3*g**2:4*g**2])
> ```
> is clearly better than the new code from this ticket
> 
> ```
>     V = ["%s%s"%(n,i) for n in ["a","b","c","d"] for i in srange(1,1+g1*g2)]
>     R = PolynomialRing(CC,V)
>     A = Matrix(R,g1,g2,V[:g1*g2])
>     B = Matrix(R,g1,g2,V[g1*g2:2*g1*g2])
>     C = Matrix(R,g1,g2,V[2*g1*g2:3*g1*g2])
>     D = Matrix(R,g1,g2,V[3*g1*g2:4*g1*g2])
> ```

I agree with that in principle; I'll leave it to Jeroen to fix this. Perhaps he had a good reason to prefer strings (I fail to see any). I'm also fine with merging this ticket as-is, but that's unlikely to happen now that someone has reverted the positive review (grr).



---

archive/issue_comments_371734.json:
```json
{
    "body": "Changed commit from **[47a2f30](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)** to **[4a98393](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**",
    "created_at": "2018-05-07T20:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371734",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[47a2f30](https://github.com/sagemath/sagetrac-mirror/commit/47a2f30d2ab7a5c944b04cc88c53278612ccd0e8)** to **[4a98393](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**



---

archive/issue_comments_371735.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37a50255414a4b869a9b10586a94ad5dd46924dc\">37a5025</a></td><td><code>Merge branch 'develop' into t/24370/rs_alg_and_aut</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa\">4a98393</a></td><td><code>Change to initialize matrices using variables instead of strings</code></td></tr></table>\n",
    "created_at": "2018-05-07T20:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371735",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57" align="right">Comment 57</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37a50255414a4b869a9b10586a94ad5dd46924dc">37a5025</a></td><td><code>Merge branch 'develop' into t/24370/rs_alg_and_aut</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa">4a98393</a></td><td><code>Change to initialize matrices using variables instead of strings</code></td></tr></table>




---

archive/issue_comments_371736.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nJeroen can revert this if he wants strings. In the mean time, the quickest way forward is to just initialize with the variable objects instead.",
    "created_at": "2018-05-07T20:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371736",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:58" align="right">Comment 58</div>

Jeroen can revert this if he wants strings. In the mean time, the quickest way forward is to just initialize with the variable objects instead.



---

archive/issue_events_319865.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-05-07T20:34:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319865"
}
```



---

archive/issue_events_319866.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2018-05-07T20:34:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319866"
}
```



---

archive/issue_comments_371737.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nWhen you said \"Jeroen\" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.",
    "created_at": "2018-05-07T21:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371737",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">Comment 59</div>

When you said "Jeroen" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.



---

archive/issue_comments_371738.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nReplying to [@jdemeyer](#comment%3A59):\n> When you said \"Jeroen\" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.\n\nWell, that's a namespace issue you'll have to solve yourselves :-)",
    "created_at": "2018-05-08T04:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371738",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:60" align="right">Comment 60</div>

Replying to [@jdemeyer](#comment%3A59):
> When you said "Jeroen" in the last few comments, I guess you refer to Jeroen Sijsling? I didn't get that initially.

Well, that's a namespace issue you'll have to solve yourselves :-)



---

archive/issue_comments_371739.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nThis part of the functionality seems to date from before this particular ticket (thus saith git blame). And I do not recall changing this. Anyway, no need to revert on my account.",
    "created_at": "2018-05-08T14:29:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371739",
    "user": "https://github.com/JRSijsling"
}
```

<div id="comment:61" align="right">Comment 61</div>

This part of the functionality seems to date from before this particular ticket (thus saith git blame). And I do not recall changing this. Anyway, no need to revert on my account.



---

archive/issue_comments_371740.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nHm. It is a little weird where this change happened. It takes a `git log --follow` to find the change:\nIt seems the change was made on #24884 to use variables instead of strings. Oddly enough, there is nothing in the history of the file that has since undone that change if I look in the history of the file. It seems git trac is basing its diffs on an alternate timeline ...",
    "created_at": "2018-05-08T20:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371740",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:62" align="right">Comment 62</div>

Hm. It is a little weird where this change happened. It takes a `git log --follow` to find the change:
It seems the change was made on #24884 to use variables instead of strings. Oddly enough, there is nothing in the history of the file that has since undone that change if I look in the history of the file. It seems git trac is basing its diffs on an alternate timeline ...



---

archive/issue_comments_371741.json:
```json
{
    "body": "Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[4a98393](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**",
    "created_at": "2018-05-09T09:49:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24370#issuecomment-371741",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/nbruin/rs_alg_and_aut](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/rs_alg_and_aut)** to **[4a98393](https://github.com/sagemath/sagetrac-mirror/commit/4a98393c80a4f40cb5e0043dfc6755f78d3beafa)**



---

archive/issue_events_319867.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-09T09:49:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319867"
}
```



---

archive/issue_events_319868.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "13fd23bb8034b0793582f00e0768bb52dd3cd54d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-09T09:49:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24370",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24370#event-319868"
}
```
