# Issue 24666: Use return instead of raising StopIteration

archive/issues_024429.json:
```json
{
    "body": "See end of discussion at #24639 and https://www.python.org/dev/peps/pep-0479/.\n\n\nCC:  @tscrim @fchapoton\n\nBranch/Commit: [5ef7a25adfbe29cd7eb5c9c0924761828a36df7f](https://github.com/sagemath/sagetrac-mirror/commit/5ef7a25adfbe29cd7eb5c9c0924761828a36df7f)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jori M\u00e4ntysalo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24666\n\n",
    "closed_at": "2018-02-09T23:47:10Z",
    "created_at": "2018-02-06T06:24:39Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Use return instead of raising StopIteration",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24666",
    "user": "https://github.com/jm58660"
}
```
See end of discussion at #24639 and https://www.python.org/dev/peps/pep-0479/.


CC:  @tscrim @fchapoton

Branch/Commit: [5ef7a25adfbe29cd7eb5c9c0924761828a36df7f](https://github.com/sagemath/sagetrac-mirror/commit/5ef7a25adfbe29cd7eb5c9c0924761828a36df7f)

Reviewer: Travis Scrimshaw

Author: Jori Mäntysalo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24666





---

archive/issue_comments_470403.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks Travis. Fr\u00e9d\u00e9ric, FYI because of Python3. At least in `hasse_diagram.py` I have used `raise StopIteration`.",
    "created_at": "2018-02-06T06:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470403",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:1'></a>
Thanks Travis. Frédéric, FYI because of Python3. At least in `hasse_diagram.py` I have used `raise StopIteration`.



---

archive/issue_comments_470404.json:
```json
{
    "body": "Branch: [u/jmantysalo/use_return_instead_of_raising_stopiteration](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/use_return_instead_of_raising_stopiteration)",
    "created_at": "2018-02-06T06:58:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470404",
    "user": "https://github.com/jm58660"
}
```

Branch: [u/jmantysalo/use_return_instead_of_raising_stopiteration](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/use_return_instead_of_raising_stopiteration)



---

archive/issue_comments_470405.json:
```json
{
    "body": "Author: Jori M\u00e4ntysalo",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470405",
    "user": "https://github.com/jm58660"
}
```

Author: Jori Mäntysalo



---

archive/issue_comments_470406.json:
```json
{
    "body": "<a id='comment:3'></a>\nDoes the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\n---\nNew commits:\n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[5ef7a25](https://github.com/sagemath/sagetrac-mirror/commit/5ef7a25adfbe29cd7eb5c9c0924761828a36df7f)|`Few StopIterations to return.`|",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470406",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:3'></a>
Does the same apply to `__next__`-functions where there is kind of implicit `yield`?

---
New commits:
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[5ef7a25](https://github.com/sagemath/sagetrac-mirror/commit/5ef7a25adfbe29cd7eb5c9c0924761828a36df7f)|`Few StopIterations to return.`|



---

archive/issue_comments_470407.json:
```json
{
    "body": "Commit: [5ef7a25adfbe29cd7eb5c9c0924761828a36df7f](https://github.com/sagemath/sagetrac-mirror/commit/5ef7a25adfbe29cd7eb5c9c0924761828a36df7f)",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470407",
    "user": "https://github.com/jm58660"
}
```

Commit: [5ef7a25adfbe29cd7eb5c9c0924761828a36df7f](https://github.com/sagemath/sagetrac-mirror/commit/5ef7a25adfbe29cd7eb5c9c0924761828a36df7f)



---

archive/issue_comments_470408.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [jmantysalo](#comment%3A3):\n> Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\n\nNo it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.",
    "created_at": "2018-02-06T07:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470408",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
Replying to [jmantysalo](#comment%3A3):
> Does the same apply to `__next__`-functions where there is kind of implicit `yield`?


No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.



---

archive/issue_comments_470409.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [tscrim](#comment%3A4):\n> Replying to [jmantysalo](#comment%3A3):\n> > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\n> \n> No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.\n\n\nThen I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?",
    "created_at": "2018-02-06T07:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470409",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>
Replying to [tscrim](#comment%3A4):
> Replying to [jmantysalo](#comment%3A3):
> > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?

> 
> No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.


Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?



---

archive/issue_comments_470410.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [jmantysalo](#comment%3A5):\n> Replying to [tscrim](#comment%3A4):\n> > Replying to [jmantysalo](#comment%3A3):\n> > > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\n> > \n> > No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.\n\n> \n> Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?\n\n\nI don't think we can do this in general (although maybe for doctests, but that's not very useful IMO). Typically we just add it to individual files, but I don't really see people typically raising `StopIteration` (as opposed to, e.g., `print \"foo\"`).",
    "created_at": "2018-02-06T07:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470410",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
Replying to [jmantysalo](#comment%3A5):
> Replying to [tscrim](#comment%3A4):
> > Replying to [jmantysalo](#comment%3A3):
> > > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?

> > 
> > No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.

> 
> Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?


I don't think we can do this in general (although maybe for doctests, but that's not very useful IMO). Typically we just add it to individual files, but I don't really see people typically raising `StopIteration` (as opposed to, e.g., `print "foo"`).



---

archive/issue_comments_470411.json:
```json
{
    "body": "<a id='comment:7'></a>\nOK, then I just mark this as needs_review and try to remember this in future.",
    "created_at": "2018-02-06T07:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470411",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'></a>
OK, then I just mark this as needs_review and try to remember this in future.



---

archive/issue_comments_470412.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-06T07:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470412",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_470413.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jmantysalo](#comment%3A7):\n> OK, then I just mark this as needs_review and try to remember this in future.\n\n\nSounds good. LGTM.",
    "created_at": "2018-02-06T07:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470413",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Replying to [jmantysalo](#comment%3A7):
> OK, then I just mark this as needs_review and try to remember this in future.


Sounds good. LGTM.



---

archive/issue_comments_470414.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-06T07:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470414",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_470415.json:
```json
{
    "body": "Reviewer: Travis Scrimshaw",
    "created_at": "2018-02-06T07:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470415",
    "user": "https://github.com/tscrim"
}
```

Reviewer: Travis Scrimshaw



---

archive/issue_comments_470416.json:
```json
{
    "body": "Changing branch from \"[u/jmantysalo/use_return_instead_of_raising_stopiteration](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/use_return_instead_of_raising_stopiteration)\" to \"[5ef7a25adfbe29cd7eb5c9c0924761828a36df7f](https://github.com/sagemath/sagetrac-mirror/commit/5ef7a25adfbe29cd7eb5c9c0924761828a36df7f)\"",
    "created_at": "2018-02-09T23:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470416",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/jmantysalo/use_return_instead_of_raising_stopiteration](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/use_return_instead_of_raising_stopiteration)" to "[5ef7a25adfbe29cd7eb5c9c0924761828a36df7f](https://github.com/sagemath/sagetrac-mirror/commit/5ef7a25adfbe29cd7eb5c9c0924761828a36df7f)"



---

archive/issue_events_070626.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-09T23:47:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24666#event-70626"
}
```



---

archive/issue_comments_470417.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-09T23:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-470417",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
