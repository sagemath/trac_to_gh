# Issue 24666: Use return instead of raising StopIteration

archive/issues_024429.json:
```json
{
    "body": "See end of discussion at #24639 and https://www.python.org/dev/peps/pep-0479/.\n\n\nCC:  @tscrim @fchapoton\n\nBranch/Commit: 5ef7a25adfbe29cd7eb5c9c0924761828a36df7f\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jori M\u00e4ntysalo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24666\n\n",
    "closed_at": "2018-02-09T23:47:10Z",
    "created_at": "2018-02-06T06:24:39Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Use return instead of raising StopIteration",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24666",
    "user": "https://github.com/jm58660"
}
```
See end of discussion at #24639 and https://www.python.org/dev/peps/pep-0479/.


CC:  @tscrim @fchapoton

Branch/Commit: 5ef7a25adfbe29cd7eb5c9c0924761828a36df7f

Reviewer: Travis Scrimshaw

Author: Jori Mäntysalo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24666





---

archive/issue_comments_364801.json:
```json
{
    "body": "<a id='comment:1'></a>Thanks Travis. Fr\u00e9d\u00e9ric, FYI because of Python3. At least in `hasse_diagram.py` I have used `raise StopIteration`.",
    "created_at": "2018-02-06T06:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364801",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:1'></a>Thanks Travis. Frédéric, FYI because of Python3. At least in `hasse_diagram.py` I have used `raise StopIteration`.



---

archive/issue_comments_364802.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to python3.",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364802",
    "user": "https://github.com/jm58660"
}
```

Changing component from PLEASE CHANGE to python3.



---

archive/issue_comments_364803.json:
```json
{
    "body": "<a id='comment:3'></a>Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\n---\nNew commits:",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364803",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:3'></a>Does the same apply to `__next__`-functions where there is kind of implicit `yield`?

---
New commits:



---

archive/issue_comments_364804.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364804",
    "user": "https://github.com/jm58660"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_364805.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 jmantysalo]:\n> Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\n\nNo it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.",
    "created_at": "2018-02-06T07:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364805",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Replying to [comment:3 jmantysalo]:
> Does the same apply to `__next__`-functions where there is kind of implicit `yield`?


No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.



---

archive/issue_comments_364806.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 tscrim]:\n> Replying to [comment:3 jmantysalo]:\n> > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\n> \n> No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.\n\n\nThen I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?",
    "created_at": "2018-02-06T07:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364806",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>Replying to [comment:4 tscrim]:
> Replying to [comment:3 jmantysalo]:
> > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?

> 
> No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.


Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?



---

archive/issue_comments_364807.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 jmantysalo]:\n> Replying to [comment:4 tscrim]:\n> > Replying to [comment:3 jmantysalo]:\n> > > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\n> > \n> > No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.\n\n> \n> Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?\n\n\nI don't think we can do this in general (although maybe for doctests, but that's not very useful IMO). Typically we just add it to individual files, but I don't really see people typically raising `StopIteration` (as opposed to, e.g., `print \"foo\"`).",
    "created_at": "2018-02-06T07:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364807",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>Replying to [comment:5 jmantysalo]:
> Replying to [comment:4 tscrim]:
> > Replying to [comment:3 jmantysalo]:
> > > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?

> > 
> > No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.

> 
> Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?


I don't think we can do this in general (although maybe for doctests, but that's not very useful IMO). Typically we just add it to individual files, but I don't really see people typically raising `StopIteration` (as opposed to, e.g., `print "foo"`).



---

archive/issue_comments_364808.json:
```json
{
    "body": "<a id='comment:7'></a>OK, then I just mark this as needs_review and try to remember this in future.",
    "created_at": "2018-02-06T07:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364808",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'></a>OK, then I just mark this as needs_review and try to remember this in future.



---

archive/issue_comments_364809.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-06T07:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364809",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_364810.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 jmantysalo]:\n> OK, then I just mark this as needs_review and try to remember this in future.\n\n\nSounds good. LGTM.",
    "created_at": "2018-02-06T07:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364810",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Replying to [comment:7 jmantysalo]:
> OK, then I just mark this as needs_review and try to remember this in future.


Sounds good. LGTM.



---

archive/issue_comments_364811.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-06T07:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364811",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_062099.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-09T23:47:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24666#event-62099"
}
```



---

archive/issue_comments_364812.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-09T23:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24666#issuecomment-364812",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
