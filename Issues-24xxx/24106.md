# Issue 24106: Install packages in temporary root before copying to $SAGE_LOCAL (simplified)

archive/issues_023869.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis is a stripped-down version of the patch in #22509, demonstrating the bare minimum functionality required to support staged installation via `DESTDIR`.  It does not add support for this to all packages as #22509 does.  That will require additional followups.\n\nIn particular, this supports passing a `SAGE_DESTDIR` variable to spkg build scripts.  In the case of packages installed with `make install`, this is passed to `make` as `DESTDIR=$SAGE_DESTDIR`.  Not all packages that use make support this (but most do).  For those that don't this is a no-op. The `sage-spkg` command then takes advantage of this by setting `$SAGE_DESTDIR` to a standard value before running the package build/install scripts.  It then uses the temporary install directory to generate a manifest for the package.  Currently this can be seen in action with the `patch` package (the only package currently using `sdh_make_install`).  With this patch applied:\n\n```\n$ ./sage -f patch\n...\n$ cat local/var/lib/sage/installed/patch-2.7.5\n{\n    \"package_name\": \"patch\",\n    \"package_version\": \"2.7.5\",\n    \"install_date\": \"Wed Oct 25 14:32:16 UTC 2017\",\n    \"system_uname\": \"Linux sage-docker 3.13.0-123-generic #172-Ubuntu SMP Mon Jun 26 18:04:35 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\",\n    \"sage_version\": \"SageMath version 8.1.beta7, Release Date: 2017-10-03\",\n    \"test_result\": \"\",\n    \"files\": [\n        \"bin/patch\",\n        \"share/man/man1/patch.1\"\n    ]\n}\n```\n\nThe installed files are listed relative to `$SAGE_LOCAL`, and does not include empty directories (in a git-like manner).  This is because directories are not typically owned by a single package, only files.  In the rare case where an empty directory needs to be owned by a specific package, a placeholder file should be added to that directory (this is typical in some Linux distributions as well).\n\nThe same could be done easily for Python packages by having `sdh_pip_install` add `--root=${SAGE_DESTDIR}`, but currently that breaks a tiny set of Python packages whose build scripts do not fully support this kind of staged installation, so their case will be addressed separately.\n\nDepends on #24017\n\nCC:  @mkoeppe @jdemeyer @jhpalmieri\n\nComponent: **build**\n\nAuthor: **Erik Bray**\n\nBranch: **[`97ebe8e`](https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039)**\n\nReviewer: **Dima Pasechnik, Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24106_\n\n",
    "closed_at": "2018-01-20T20:20:20Z",
    "created_at": "2017-10-25T14:52:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Install packages in temporary root before copying to $SAGE_LOCAL (simplified)",
    "type": "issue",
    "updated_at": "2023-01-08T15:47:03Z",
    "url": "https://github.com/sagemath/sage/issues/24106",
    "user": "https://github.com/embray"
}
```
<div id="comment:0"></div>

This is a stripped-down version of the patch in #22509, demonstrating the bare minimum functionality required to support staged installation via `DESTDIR`.  It does not add support for this to all packages as #22509 does.  That will require additional followups.

In particular, this supports passing a `SAGE_DESTDIR` variable to spkg build scripts.  In the case of packages installed with `make install`, this is passed to `make` as `DESTDIR=$SAGE_DESTDIR`.  Not all packages that use make support this (but most do).  For those that don't this is a no-op. The `sage-spkg` command then takes advantage of this by setting `$SAGE_DESTDIR` to a standard value before running the package build/install scripts.  It then uses the temporary install directory to generate a manifest for the package.  Currently this can be seen in action with the `patch` package (the only package currently using `sdh_make_install`).  With this patch applied:

```
$ ./sage -f patch
...
$ cat local/var/lib/sage/installed/patch-2.7.5
{
    "package_name": "patch",
    "package_version": "2.7.5",
    "install_date": "Wed Oct 25 14:32:16 UTC 2017",
    "system_uname": "Linux sage-docker 3.13.0-123-generic #172-Ubuntu SMP Mon Jun 26 18:04:35 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux",
    "sage_version": "SageMath version 8.1.beta7, Release Date: 2017-10-03",
    "test_result": "",
    "files": [
        "bin/patch",
        "share/man/man1/patch.1"
    ]
}
```

The installed files are listed relative to `$SAGE_LOCAL`, and does not include empty directories (in a git-like manner).  This is because directories are not typically owned by a single package, only files.  In the rare case where an empty directory needs to be owned by a specific package, a placeholder file should be added to that directory (this is typical in some Linux distributions as well).

The same could be done easily for Python packages by having `sdh_pip_install` add `--root=${SAGE_DESTDIR}`, but currently that breaks a tiny set of Python packages whose build scripts do not fully support this kind of staged installation, so their case will be addressed separately.

Depends on #24017

CC:  @mkoeppe @jdemeyer @jhpalmieri

Component: **build**

Author: **Erik Bray**

Branch: **[`97ebe8e`](https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039)**

Reviewer: **Dima Pasechnik, Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/24106_





---

archive/issue_events_331751.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-25T14:52:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331751"
}
```



---

archive/issue_events_331752.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-25T14:52:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331752"
}
```



---

archive/issue_events_331753.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-25T14:52:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331753"
}
```



---

archive/issue_events_331754.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-25T14:54:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331754"
}
```



---

archive/issue_comments_364513.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nCC'd people who have already shown interest in this work.",
    "created_at": "2017-10-25T14:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364513",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

CC'd people who have already shown interest in this work.



---

archive/issue_events_331755.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-25T14:54:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331755"
}
```



---

archive/issue_comments_364514.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nDepends on #24017 for merge consistency.",
    "created_at": "2017-10-25T14:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364514",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

Depends on #24017 for merge consistency.



---

archive/issue_comments_364515.json:
```json
{
    "body": "Dependencies: **#24017**",
    "created_at": "2017-10-25T14:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364515",
    "user": "https://github.com/embray"
}
```

Dependencies: **#24017**



---

archive/issue_comments_364516.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa61235596bc867ece2e5b2996d54be290157cc7\"><code>aa61235</code></a></td><td><code>Fix typo in comment</code></td></tr></table>\n",
    "created_at": "2017-10-25T15:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364516",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa61235596bc867ece2e5b2996d54be290157cc7"><code>aa61235</code></a></td><td><code>Fix typo in comment</code></td></tr></table>




---

archive/issue_comments_364517.json:
```json
{
    "body": "Changed commit from **[`5be15df`](https://github.com/sagemath/sagetrac-mirror/commit/5be15df378dadda50289eb7fd0158eda77583750)** to **[`aa61235`](https://github.com/sagemath/sagetrac-mirror/commit/aa61235596bc867ece2e5b2996d54be290157cc7)**",
    "created_at": "2017-10-25T15:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364517",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5be15df`](https://github.com/sagemath/sagetrac-mirror/commit/5be15df378dadda50289eb7fd0158eda77583750)** to **[`aa61235`](https://github.com/sagemath/sagetrac-mirror/commit/aa61235596bc867ece2e5b2996d54be290157cc7)**



---

archive/issue_comments_364518.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe patchbot failure is due to #24092 so I'm going to merge that *sigh*",
    "created_at": "2017-10-31T15:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364518",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">comment:4</div>

The patchbot failure is due to #24092 so I'm going to merge that *sigh*



---

archive/issue_comments_364519.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dd69fd79f45218a900bd4fb98a98d2ec0480138\"><code>6dd69fd</code></a></td><td><code>Add pip to brial's dependencies, replace the use of PIP_INSTALL as per #24014.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d0ad4ef0d35074d389421ef530253614d488398\"><code>4d0ad4e</code></a></td><td><code>Merge branch 'u/fbissey/brial_pip' into u/embray/build/destdir-2</code></td></tr></table>\n",
    "created_at": "2017-10-31T15:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364519",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dd69fd79f45218a900bd4fb98a98d2ec0480138"><code>6dd69fd</code></a></td><td><code>Add pip to brial's dependencies, replace the use of PIP_INSTALL as per #24014.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d0ad4ef0d35074d389421ef530253614d488398"><code>4d0ad4e</code></a></td><td><code>Merge branch 'u/fbissey/brial_pip' into u/embray/build/destdir-2</code></td></tr></table>




---

archive/issue_comments_364520.json:
```json
{
    "body": "Changed commit from **[`aa61235`](https://github.com/sagemath/sagetrac-mirror/commit/aa61235596bc867ece2e5b2996d54be290157cc7)** to **[`4d0ad4e`](https://github.com/sagemath/sagetrac-mirror/commit/4d0ad4ef0d35074d389421ef530253614d488398)**",
    "created_at": "2017-10-31T15:19:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364520",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa61235`](https://github.com/sagemath/sagetrac-mirror/commit/aa61235596bc867ece2e5b2996d54be290157cc7)** to **[`4d0ad4e`](https://github.com/sagemath/sagetrac-mirror/commit/4d0ad4ef0d35074d389421ef530253614d488398)**



---

archive/issue_comments_364521.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nWhat is the proof of concept package to test with this ticket? It's not clear to me.",
    "created_at": "2017-11-27T16:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364521",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

What is the proof of concept package to test with this ticket? It's not clear to me.



---

archive/issue_comments_364522.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nPatch, mainly.",
    "created_at": "2017-11-27T16:48:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364522",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

Patch, mainly.



---

archive/issue_comments_364523.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'm getting a 500 Internal Server Error when clicking the branch on this ticket.",
    "created_at": "2017-11-28T09:48:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364523",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I'm getting a 500 Internal Server Error when clicking the branch on this ticket.



---

archive/issue_comments_364524.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWhat is `$(pwd)` in this case?\n\n```\nexport SAGE_DESTDIR=\"$(pwd)/inst\"\n```\nCan we be more explicit and write\n\n```\nexport SAGE_DESTDIR=\"${SAGE_BUILD_DIR}/${PKG_NAME}/inst\"\n```",
    "created_at": "2017-11-28T09:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364524",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

What is `$(pwd)` in this case?

```
export SAGE_DESTDIR="$(pwd)/inst"
```
Can we be more explicit and write

```
export SAGE_DESTDIR="${SAGE_BUILD_DIR}/${PKG_NAME}/inst"
```



---

archive/issue_comments_364525.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI'd rather wait until #24025 has been merged in a beta before fully reviewing this.",
    "created_at": "2017-11-28T09:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364525",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

I'd rather wait until #24025 has been merged in a beta before fully reviewing this.



---

archive/issue_comments_364526.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWell the \"milestone\" for #24025 is set to 8.1, but that is apparently meaningless...",
    "created_at": "2017-11-28T13:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364526",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

Well the "milestone" for #24025 is set to 8.1, but that is apparently meaningless...



---

archive/issue_events_331756.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:27:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331756"
}
```



---

archive/issue_events_331757.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:27:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331757"
}
```



---

archive/issue_comments_364527.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nwith `ccache` installed, I get a problem with this ticket; it tries to rebuild `ccache`, and at the very end of the installation of `ccache` I get\n\n```\nCopying package files from temporary location /home/dima/Sage/sage-dev/local/var/tmp/sage/build/ccache-3.2.2.p0/inst to /home/dima/Sage/sage-dev/local\ncp: cannot create regular file '/home/dima/Sage/sage-dev/local/bin/ccache': Text file busy\n************************************************************************\nError copying files for ccache.\n************************************************************************\n```\n\nSo probably one needs to somehow uninstall ccache beforehand...",
    "created_at": "2017-12-18T10:17:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364527",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

with `ccache` installed, I get a problem with this ticket; it tries to rebuild `ccache`, and at the very end of the installation of `ccache` I get

```
Copying package files from temporary location /home/dima/Sage/sage-dev/local/var/tmp/sage/build/ccache-3.2.2.p0/inst to /home/dima/Sage/sage-dev/local
cp: cannot create regular file '/home/dima/Sage/sage-dev/local/bin/ccache': Text file busy
************************************************************************
Error copying files for ccache.
************************************************************************
```

So probably one needs to somehow uninstall ccache beforehand...



---

archive/issue_comments_364528.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n1. As mentioned in [comment:9], it would be nice to more explicit here:\n\n```\nexport SAGE_DESTDIR=\"$(pwd)/inst\"\n```\n\n2. It could possibly be a lot more efficient (and also simpler) to *move* instead of *copy* the files from `SAGE_DESTDIR` to `SAGE_LOCAL`. Is there any good reason to keep the files in `SAGE_DESTDIR`?",
    "created_at": "2018-01-05T10:53:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364528",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

1. As mentioned in [comment:9], it would be nice to more explicit here:

```
export SAGE_DESTDIR="$(pwd)/inst"
```

2. It could possibly be a lot more efficient (and also simpler) to *move* instead of *copy* the files from `SAGE_DESTDIR` to `SAGE_LOCAL`. Is there any good reason to keep the files in `SAGE_DESTDIR`?



---

archive/issue_events_331758.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-05T10:53:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331758"
}
```



---

archive/issue_events_331759.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-05T10:53:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331759"
}
```



---

archive/issue_comments_364529.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@dimpase](#comment%3A13):\n> `cp: cannot create regular file '/home/dima/Sage/sage-dev/local/bin/ccache': Text file busy`\n\nThis is also fixed by moving instead of copying (on my Linux box at least, but that might be POSIX-specified behaviour)",
    "created_at": "2018-01-05T10:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364529",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@dimpase](#comment%3A13):
> `cp: cannot create regular file '/home/dima/Sage/sage-dev/local/bin/ccache': Text file busy`

This is also fixed by moving instead of copying (on my Linux box at least, but that might be POSIX-specified behaviour)



---

archive/issue_comments_364530.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOn occasion I've found it useful for debugging purposes to be able to inspect the contents of the destdir.  That said, as long as the system is working correctly, the results can just as easily be inspected directly in `$SAGE_LOCAL`, so I wouldn't be opposed to giving move a try.",
    "created_at": "2018-01-05T12:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364530",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">comment:16</div>

On occasion I've found it useful for debugging purposes to be able to inspect the contents of the destdir.  That said, as long as the system is working correctly, the results can just as easily be inspected directly in `$SAGE_LOCAL`, so I wouldn't be opposed to giving move a try.



---

archive/issue_comments_364531.json:
```json
{
    "body": "Changed commit from **[`4d0ad4e`](https://github.com/sagemath/sagetrac-mirror/commit/4d0ad4ef0d35074d389421ef530253614d488398)** to **[`c0cb165`](https://github.com/sagemath/sagetrac-mirror/commit/c0cb165d227eee2c2c7bd4014acee542a2865051)**",
    "created_at": "2018-01-15T10:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364531",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4d0ad4e`](https://github.com/sagemath/sagetrac-mirror/commit/4d0ad4ef0d35074d389421ef530253614d488398)** to **[`c0cb165`](https://github.com/sagemath/sagetrac-mirror/commit/c0cb165d227eee2c2c7bd4014acee542a2865051)**



---

archive/issue_comments_364532.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce7e0a44383eb38ba1d746616d758ae1e12737e2\"><code>ce7e0a4</code></a></td><td><code>Add the ability to temporarily install to an alternate installation root</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0cb165d227eee2c2c7bd4014acee542a2865051\"><code>c0cb165</code></a></td><td><code>Fix typo in comment</code></td></tr></table>\n",
    "created_at": "2018-01-15T10:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364532",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce7e0a44383eb38ba1d746616d758ae1e12737e2"><code>ce7e0a4</code></a></td><td><code>Add the ability to temporarily install to an alternate installation root</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0cb165d227eee2c2c7bd4014acee542a2865051"><code>c0cb165</code></a></td><td><code>Fix typo in comment</code></td></tr></table>




---

archive/issue_comments_364533.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nTurns out this is also broken until and unless at least a few packages get some small updates to their spkg-installs to support this mode of installation.",
    "created_at": "2018-01-15T10:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364533",
    "user": "https://github.com/embray"
}
```

<div id="comment:18" align="right">comment:18</div>

Turns out this is also broken until and unless at least a few packages get some small updates to their spkg-installs to support this mode of installation.



---

archive/issue_comments_364534.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nwhat are these small updates? are they already in?",
    "created_at": "2018-01-15T11:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364534",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

what are these small updates? are they already in?



---

archive/issue_comments_364535.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nNo, I'll push them to this branch once I know what they are (i.e. after the build completes successfully).  I think it's small enough for now that it's okay to roll into this.",
    "created_at": "2018-01-15T15:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364535",
    "user": "https://github.com/embray"
}
```

<div id="comment:20" align="right">comment:20</div>

No, I'll push them to this branch once I know what they are (i.e. after the build completes successfully).  I think it's small enough for now that it's okay to roll into this.



---

archive/issue_comments_364536.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@embray](#comment%3A20):\n> No, I'll push them to this branch once I know what they are (i.e. after the build completes successfully).  I think it's small enough for now that it's okay to roll into this.\n\nIf it turns out to be more I'll split it out.  This is mostly a matter of some packages that were updated in #24025 that perform a few additional actions on files in `$SAGE_LOCAL` that really should be working on `$SAGE_DESTDIR$SAGE_LOCAL`.",
    "created_at": "2018-01-15T15:20:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364536",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@embray](#comment%3A20):
> No, I'll push them to this branch once I know what they are (i.e. after the build completes successfully).  I think it's small enough for now that it's okay to roll into this.

If it turns out to be more I'll split it out.  This is mostly a matter of some packages that were updated in #24025 that perform a few additional actions on files in `$SAGE_LOCAL` that really should be working on `$SAGE_DESTDIR$SAGE_LOCAL`.



---

archive/issue_comments_364537.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6bc73324b370910856165b7dc3673c227d83db2d\"><code>6bc7332</code></a></td><td><code>Make $SAGE_DESTDIR explicitly relative to $SAGE_BUILD_DIR, and not whatever</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed41210d578b395009e76a50e38b1987c0e0fa2d\"><code>ed41210</code></a></td><td><code>Move files from SAGE_DESTDIR into SAGE_LOCAL instead of copying.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91dfc131ed8d0b98a87d50c10d16f05cd0df8b1d\"><code>91dfc13</code></a></td><td><code>ecl: create post-build links in SAGE_DESTDIR instead of directly in SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edf5898ef0ca0d40e6d44a6fa613f3f51c330a8b\"><code>edf5898</code></a></td><td><code>mpfi: perform this sanity check relative to $SAGE_DESTDIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1398d1dc63059066819d31491d0335aa1550827c\"><code>1398d1d</code></a></td><td><code>patch: On Cygwin, ensure the .manifest file is installed relative to $SAGE_DESTDIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039\"><code>97ebe8e</code></a></td><td><code>readline: these post-build steps should be performed relative to $SAGE_DESTDIR</code></td></tr></table>\n",
    "created_at": "2018-01-16T12:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364537",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6bc73324b370910856165b7dc3673c227d83db2d"><code>6bc7332</code></a></td><td><code>Make $SAGE_DESTDIR explicitly relative to $SAGE_BUILD_DIR, and not whatever</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed41210d578b395009e76a50e38b1987c0e0fa2d"><code>ed41210</code></a></td><td><code>Move files from SAGE_DESTDIR into SAGE_LOCAL instead of copying.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91dfc131ed8d0b98a87d50c10d16f05cd0df8b1d"><code>91dfc13</code></a></td><td><code>ecl: create post-build links in SAGE_DESTDIR instead of directly in SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edf5898ef0ca0d40e6d44a6fa613f3f51c330a8b"><code>edf5898</code></a></td><td><code>mpfi: perform this sanity check relative to $SAGE_DESTDIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1398d1dc63059066819d31491d0335aa1550827c"><code>1398d1d</code></a></td><td><code>patch: On Cygwin, ensure the .manifest file is installed relative to $SAGE_DESTDIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039"><code>97ebe8e</code></a></td><td><code>readline: these post-build steps should be performed relative to $SAGE_DESTDIR</code></td></tr></table>




---

archive/issue_comments_364538.json:
```json
{
    "body": "Changed commit from **[`c0cb165`](https://github.com/sagemath/sagetrac-mirror/commit/c0cb165d227eee2c2c7bd4014acee542a2865051)** to **[`97ebe8e`](https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039)**",
    "created_at": "2018-01-16T12:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364538",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c0cb165`](https://github.com/sagemath/sagetrac-mirror/commit/c0cb165d227eee2c2c7bd4014acee542a2865051)** to **[`97ebe8e`](https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039)**



---

archive/issue_comments_364539.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI added the aforementioned tweaks.  It's likely others are needed, but these were the minimal fixes I needed for a successful build from scratch.\n\nThe one change that's a bit sketchy is the removal of the \"sanity check\" from patch's `spkg-install`.  I really don't think it's needed at all, but if we really wanted to keep it it would make more sense as a post-install step.\n\n#22509 has a feature of allowing packages to include a `spkg-postinst` script that is run on the package after it's already been fully copied into `$SAGE_LOCAL`.  I left it out of this ticket to keep things simple, but I could add it back in, as it doesn't add very much complexity at all.",
    "created_at": "2018-01-16T12:58:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364539",
    "user": "https://github.com/embray"
}
```

<div id="comment:23" align="right">comment:23</div>

I added the aforementioned tweaks.  It's likely others are needed, but these were the minimal fixes I needed for a successful build from scratch.

The one change that's a bit sketchy is the removal of the "sanity check" from patch's `spkg-install`.  I really don't think it's needed at all, but if we really wanted to keep it it would make more sense as a post-install step.

#22509 has a feature of allowing packages to include a `spkg-postinst` script that is run on the package after it's already been fully copied into `$SAGE_LOCAL`.  I left it out of this ticket to keep things simple, but I could add it back in, as it doesn't add very much complexity at all.



---

archive/issue_events_331760.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T14:33:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331760"
}
```



---

archive/issue_events_331761.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T14:33:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331761"
}
```



---

archive/issue_comments_364540.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nLooks good on first sight. Am I right that this affects only packages using `sdh_make_install`?",
    "created_at": "2018-01-16T15:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364540",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Looks good on first sight. Am I right that this affects only packages using `sdh_make_install`?



---

archive/issue_comments_364541.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jdemeyer](#comment%3A25):\n> Looks good on first sight. Am I right that this affects only packages using `sdh_make_install`?\n\nRight now, yes.  Obviously long-term it will affect all packages (as is the case for the original #22509), but for this ticket those are the only packages that are affected.",
    "created_at": "2018-01-16T16:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364541",
    "user": "https://github.com/embray"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jdemeyer](#comment%3A25):
> Looks good on first sight. Am I right that this affects only packages using `sdh_make_install`?

Right now, yes.  Obviously long-term it will affect all packages (as is the case for the original #22509), but for this ticket those are the only packages that are affected.



---

archive/issue_comments_364542.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nIs blocking internet access to unknown ports \"a thing\" in France? I'm in Besan\u00e7on right now and both the university network as well as my hotel network block SSH access (on a non-standard port) to a testing machine that I use for testing build-related tickets such as this one. I'd rather not reinstall Sage from scratch on my laptop, so could you please double-check that `make distclean; make ptest` passes with this ticket applied?",
    "created_at": "2018-01-16T18:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364542",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Is blocking internet access to unknown ports "a thing" in France? I'm in Besançon right now and both the university network as well as my hotel network block SSH access (on a non-standard port) to a testing machine that I use for testing build-related tickets such as this one. I'd rather not reinstall Sage from scratch on my laptop, so could you please double-check that `make distclean; make ptest` passes with this ticket applied?



---

archive/issue_comments_364543.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI don't think it's \"a thing\" in France any more than it is at any other random network.  I've also had problems at my university with very tight firewalls.",
    "created_at": "2018-01-17T12:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364543",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

I don't think it's "a thing" in France any more than it is at any other random network.  I've also had problems at my university with very tight firewalls.



---

archive/issue_comments_364544.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI feel like I just tested that that works yesterday, but I'll do it one more time....",
    "created_at": "2018-01-17T12:17:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364544",
    "user": "https://github.com/embray"
}
```

<div id="comment:29" align="right">comment:29</div>

I feel like I just tested that that works yesterday, but I'll do it one more time....



---

archive/issue_comments_364545.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThe recent build failure of this on the Cygwin patchbot appears to be unrelated, though it's not entirely clear to me what happened.  I have a feeling there are still some unresolved race conditions involved in running DLL rebase.",
    "created_at": "2018-01-17T13:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364545",
    "user": "https://github.com/embray"
}
```

<div id="comment:30" align="right">comment:30</div>

The recent build failure of this on the Cygwin patchbot appears to be unrelated, though it's not entirely clear to me what happened.  I have a feeling there are still some unresolved race conditions involved in running DLL rebase.



---

archive/issue_comments_364546.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nConfirmed, build from scratch worked, at least on Linux.  I'm going to try on OSX too.  I now have (supposedly) access to an OSX machine to test on, though I haven't actually tried building Sage on it yet...",
    "created_at": "2018-01-17T15:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364546",
    "user": "https://github.com/embray"
}
```

<div id="comment:31" align="right">comment:31</div>

Confirmed, build from scratch worked, at least on Linux.  I'm going to try on OSX too.  I now have (supposedly) access to an OSX machine to test on, though I haven't actually tried building Sage on it yet...



---

archive/issue_comments_364547.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@embray](#comment%3A31):\n> Confirmed, build from scratch worked, at least on Linux.  I'm going to try on OSX too.  I now have (supposedly) access to an OSX machine to test on, though I haven't actually tried building Sage on it yet...\n\nI am using an OSX machine at LRI, trac.lri.fr, to run tests, etc.\nIf it's the same as you mean to use, it's probably better not to try doing it at the same time...\n\nIf you like I can test this branch there, as I'm planning to try the new beta from scratch anyway.",
    "created_at": "2018-01-18T09:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364547",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@embray](#comment%3A31):
> Confirmed, build from scratch worked, at least on Linux.  I'm going to try on OSX too.  I now have (supposedly) access to an OSX machine to test on, though I haven't actually tried building Sage on it yet...

I am using an OSX machine at LRI, trac.lri.fr, to run tests, etc.
If it's the same as you mean to use, it's probably better not to try doing it at the same time...

If you like I can test this branch there, as I'm planning to try the new beta from scratch anyway.



---

archive/issue_comments_364548.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nPlease do test!",
    "created_at": "2018-01-18T09:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364548",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

Please do test!



---

archive/issue_comments_364549.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nWorked fine for me on Cygwin locally--whatever went wrong with the patchbot is probably an unrelated fluke.",
    "created_at": "2018-01-18T10:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364549",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">comment:34</div>

Worked fine for me on Cygwin locally--whatever went wrong with the patchbot is probably an unrelated fluke.



---

archive/issue_comments_364550.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nit builds on OSX just fine. Any other tests to run?",
    "created_at": "2018-01-19T01:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364550",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

it builds on OSX just fine. Any other tests to run?



---

archive/issue_comments_364551.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@dimpase](#comment%3A35):\n> it builds on OSX just fine.\n\nThanks for checking that!\n\n> Any other tests to run?\n\nNot as far as I'm concerned.  It might be nice to get a patch bot to say it's good.  I think I'm going to reconfigure the docker patchbot to run \"unsafe\" tickets.",
    "created_at": "2018-01-19T09:33:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364551",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@dimpase](#comment%3A35):
> it builds on OSX just fine.

Thanks for checking that!

> Any other tests to run?

Not as far as I'm concerned.  It might be nice to get a patch bot to say it's good.  I think I'm going to reconfigure the docker patchbot to run "unsafe" tickets.



---

archive/issue_events_331762.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-19T09:50:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331762"
}
```



---

archive/issue_events_331763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-19T09:50:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331763"
}
```



---

archive/issue_comments_364552.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik, Jeroen Demeyer**",
    "created_at": "2018-01-19T09:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364552",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Dima Pasechnik, Jeroen Demeyer**



---

archive/issue_events_331764.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-20T20:20:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331764"
}
```



---

archive/issue_events_331765.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "617db2f5403c9a0fbb937f0141ac4f582f4d1835",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-01-20T20:20:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24106#event-331765"
}
```



---

archive/issue_comments_364553.json:
```json
{
    "body": "Changed branch from **[u/embray/build/destdir-2](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/destdir-2)** to **[`97ebe8e`](https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039)**",
    "created_at": "2018-01-20T20:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364553",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/build/destdir-2](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/destdir-2)** to **[`97ebe8e`](https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039)**



---

archive/issue_comments_364554.json:
```json
{
    "body": "Changed commit from **[`97ebe8e`](https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039)** to none",
    "created_at": "2023-01-08T15:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24106#issuecomment-364554",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`97ebe8e`](https://github.com/sagemath/sagetrac-mirror/commit/97ebe8e6bdeb6ed2db9fd0d2374107b7b5fd8039)** to none
