# Issue 24554: Refactoring in Chebyshev functions

archive/issues_024317.json:
```json
{
    "body": "While other orthogonal polynomial functions (as well as almost all other symbolic functions) are simply `BuiltinFunction`s or `GinacFunction`s this ticket suffers from the fact that the Cheby functions in Sage allow the `algorithm` keyword (by using a `__call__` method in the superclass). The way such polymorphisms are resolved in other functions is by having the interface (the callable global function `chebyshev_T()`) dispatching on the keyword, especially because doctests involving all kind of Sage objects as function argument are expected to work eternally.\n\nThe goal of this ticket is to move the `__call__` method out of the `Function` class (as well as other methods used as interface) into a separate interface class; to 2. make the remaining class inherit from `BuiltinFunction` and, 3., to remove the `ChebyshevFunction` superclass as it is then no longer used.\n\nAuthor: Ralf Stephan\n\nBranch: u/rws/24554\n\nCommit: 957ce14029a9ce8878fa66444f50f9b0372e7fa8\n\nIssue created by migration from https://trac.sagemath.org/ticket/24554\n\n",
    "created_at": "2018-01-17T08:27:05Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Refactoring in Chebyshev functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24554",
    "user": "https://github.com/rwst"
}
```
While other orthogonal polynomial functions (as well as almost all other symbolic functions) are simply `BuiltinFunction`s or `GinacFunction`s this ticket suffers from the fact that the Cheby functions in Sage allow the `algorithm` keyword (by using a `__call__` method in the superclass). The way such polymorphisms are resolved in other functions is by having the interface (the callable global function `chebyshev_T()`) dispatching on the keyword, especially because doctests involving all kind of Sage objects as function argument are expected to work eternally.

The goal of this ticket is to move the `__call__` method out of the `Function` class (as well as other methods used as interface) into a separate interface class; to 2. make the remaining class inherit from `BuiltinFunction` and, 3., to remove the `ChebyshevFunction` superclass as it is then no longer used.

Author: Ralf Stephan

Branch: u/rws/24554

Commit: 957ce14029a9ce8878fa66444f50f9b0372e7fa8

Issue created by migration from https://trac.sagemath.org/ticket/24554





---

archive/issue_comments_340066.json:
```json
{
    "body": "<a id='comment:2'></a>The usage `chebyshev_T(...algorithm='pari'` silently uses normal evaluation because there is no `_eval_pari_` member, so Pari was never supported.",
    "created_at": "2018-01-18T09:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340066",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>The usage `chebyshev_T(...algorithm='pari'` silently uses normal evaluation because there is no `_eval_pari_` member, so Pari was never supported.



---

archive/issue_comments_340067.json:
```json
{
    "body": "<a id='comment:5'></a>Also the usage `chebyshev_T(...algorithm='maxima')` used normal evaluation. Maxima returns a polynomial in `(x-1)` which probably is useful so I'm changing doctests. In a later step this could be renamed to a more descriptive name and computed by Sage.",
    "created_at": "2018-01-20T14:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340067",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>Also the usage `chebyshev_T(...algorithm='maxima')` used normal evaluation. Maxima returns a polynomial in `(x-1)` which probably is useful so I'm changing doctests. In a later step this could be renamed to a more descriptive name and computed by Sage.



---

archive/issue_comments_340068.json:
```json
{
    "body": "<a id='comment:6'></a>Also `eval_formula()` should become `algorithm='hypergeometric'`. The Maxima \"algorithm\" is variant of it, see https://en.wikipedia.org/wiki/Chebyshev_polynomials#Explicit_expressions",
    "created_at": "2018-01-20T15:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340068",
    "user": "https://github.com/rwst"
}
```

<a id='comment:6'></a>Also `eval_formula()` should become `algorithm='hypergeometric'`. The Maxima "algorithm" is variant of it, see https://en.wikipedia.org/wiki/Chebyshev_polynomials#Explicit_expressions



---

archive/issue_comments_340069.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-21T07:58:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340069",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_340070.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-21T07:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340070",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_340071.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-03-03T15:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340071",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_340072.json:
```json
{
    "body": "<a id='comment:10'></a>Docs fail to build, doctest errors in three files:\n* `sage -t --long src/sage/rings/polynomial/polynomial_element.pyx  # 6 doctests failed`\n* `sage -t --long src/sage/rings/number_field/splitting_field.py  # 2 doctests failed`\n* `sage -t --long src/sage/graphs/bipartite_graph.py  # 1 doctest failed`",
    "created_at": "2018-03-03T15:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340072",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>Docs fail to build, doctest errors in three files:
* `sage -t --long src/sage/rings/polynomial/polynomial_element.pyx  # 6 doctests failed`
* `sage -t --long src/sage/rings/number_field/splitting_field.py  # 2 doctests failed`
* `sage -t --long src/sage/graphs/bipartite_graph.py  # 1 doctest failed`



---

archive/issue_comments_340073.json:
```json
{
    "body": "<a id='comment:12'></a>New commits:",
    "created_at": "2018-03-03T16:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340073",
    "user": "https://github.com/rwst"
}
```

<a id='comment:12'></a>New commits:



---

archive/issue_comments_340074.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-03T16:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340074",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_340075.json:
```json
{
    "body": "<a id='comment:13'></a>merge failure",
    "created_at": "2020-02-22T15:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340075",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>merge failure



---

archive/issue_comments_340076.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-02-22T15:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340076",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_061908.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-22T15:29:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61908"
}
```



---

archive/issue_comments_340077.json:
```json
{
    "body": "<a id='comment:15'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340077",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_061909.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61909"
}
```



---

archive/issue_events_061910.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61910"
}
```



---

archive/issue_events_061911.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61911"
}
```



---

archive/issue_events_061912.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61912"
}
```



---

archive/issue_comments_340078.json:
```json
{
    "body": "<a id='comment:17'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340078",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_061913.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61913"
}
```



---

archive/issue_events_061914.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61914"
}
```



---

archive/issue_comments_340079.json:
```json
{
    "body": "<a id='comment:18'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24554#issuecomment-340079",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_061915.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61915"
}
```



---

archive/issue_events_061916.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61916"
}
```



---

archive/issue_events_061917.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61917"
}
```



---

archive/issue_events_061918.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61918"
}
```



---

archive/issue_events_061919.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61919"
}
```



---

archive/issue_events_061920.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61920"
}
```



---

archive/issue_events_061921.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61921"
}
```



---

archive/issue_events_061922.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24554",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24554#event-61922"
}
```
