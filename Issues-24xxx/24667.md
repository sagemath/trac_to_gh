# Issue 24667: Clean up partitions_c.cc

archive/issues_024430.json:
```json
{
    "body": "1. Remove some unused stuff.\n\n2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.\n\n3. No longer use the header file `partitions_c.h`. Instead, include the `.cc` file in Cython.\n\nPoints 2. and 3. above allow to remove some platform-specific hacks.\n\n4. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.\n\n5. Only one temporary MPFR variable is really needed, call it `mptemp`.\n\n6. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.\n\n7. Use some more specialized MPFR functions like `mpfr_set_prec()` where applicable.\n\n8. Define all internal functions as `static`.\n\n9. Use `MPFR_RNDF` rounding mode where exact rounding is not required.\n\n10. Ensure that the file compiles without compiler warnings.\n\n21. Various style improvements.\n\n**CC:**  @dimpase\n\n**Branch/Commit:** [2dba6c8af0c1613b667b37ba17e9520f68f711f8](https://github.com/sagemath/sagetrac-mirror/commit/2dba6c8af0c1613b667b37ba17e9520f68f711f8)\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/24667\n\n",
    "closed_at": "2018-02-16T23:38:45Z",
    "created_at": "2018-02-06T08:50:12Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Clean up partitions_c.cc",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24667",
    "user": "https://github.com/jdemeyer"
}
```
1. Remove some unused stuff.

2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.

3. No longer use the header file `partitions_c.h`. Instead, include the `.cc` file in Cython.

Points 2. and 3. above allow to remove some platform-specific hacks.

4. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.

5. Only one temporary MPFR variable is really needed, call it `mptemp`.

6. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.

7. Use some more specialized MPFR functions like `mpfr_set_prec()` where applicable.

8. Define all internal functions as `static`.

9. Use `MPFR_RNDF` rounding mode where exact rounding is not required.

10. Ensure that the file compiles without compiler warnings.

21. Various style improvements.

**CC:**  @dimpase

**Branch/Commit:** [2dba6c8af0c1613b667b37ba17e9520f68f711f8](https://github.com/sagemath/sagetrac-mirror/commit/2dba6c8af0c1613b667b37ba17e9520f68f711f8)

**Reviewer:** Dima Pasechnik

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/24667





---

archive/issue_events_070274.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "rename": {
        "from": "Remove unused stuff from partitions_c.cc",
        "to": "Clean up partitions_c.cc"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24667#event-70274"
}
```



---

archive/issue_comments_448164.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+1. Remove some unused stuff.\n \n+2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.\n``````\n",
    "created_at": "2018-02-06T09:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448164",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+1. Remove some unused stuff.
 
+2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.
``````




---

archive/issue_comments_448165.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n 1. Remove some unused stuff.\n \n 2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.\n+\n+3. Replace `T(int(x))` by `T(x)`.\n``````\n",
    "created_at": "2018-02-06T09:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448165",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 1. Remove some unused stuff.
 
 2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.
+
+3. Replace `T(int(x))` by `T(x)`.
``````




---

archive/issue_comments_448166.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n 2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.\n \n 3. Replace `T(int(x))` by `T(x)`.\n+\n+4. Only one temporary MPFR variable is really needed, call it `mp_temp`.\n``````\n",
    "created_at": "2018-02-06T09:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448166",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.
 
 3. Replace `T(int(x))` by `T(x)`.
+
+4. Only one temporary MPFR variable is really needed, call it `mp_temp`.
``````




---

archive/issue_comments_448167.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n 3. Replace `T(int(x))` by `T(x)`.\n \n-4. Only one temporary MPFR variable is really needed, call it `mp_temp`.\n+4. Only one temporary MPFR variable is really needed, call it `mptemp`.\n``````\n",
    "created_at": "2018-02-06T09:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448167",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 3. Replace `T(int(x))` by `T(x)`.
 
-4. Only one temporary MPFR variable is really needed, call it `mp_temp`.
+4. Only one temporary MPFR variable is really needed, call it `mptemp`.
``````




---

archive/issue_comments_448168.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n 3. Replace `T(int(x))` by `T(x)`.\n \n 4. Only one temporary MPFR variable is really needed, call it `mptemp`.\n+\n+5. Merge `initialize_mpz_and_mpq_variables` and `initialize_mpfr_variables` in one function `initialize_temp_variables`.\n``````\n",
    "created_at": "2018-02-06T09:54:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448168",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 3. Replace `T(int(x))` by `T(x)`.
 
 4. Only one temporary MPFR variable is really needed, call it `mptemp`.
+
+5. Merge `initialize_mpz_and_mpq_variables` and `initialize_mpfr_variables` in one function `initialize_temp_variables`.
``````




---

archive/issue_comments_448169.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,3 +7,5 @@\n 4. Only one temporary MPFR variable is really needed, call it `mptemp`.\n \n 5. Merge `initialize_mpz_and_mpq_variables` and `initialize_mpfr_variables` in one function `initialize_temp_variables`.\n+\n+6. Use `mpfr_set_prec()` where applicable.\n``````\n",
    "created_at": "2018-02-06T10:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448169",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,3 +7,5 @@
 4. Only one temporary MPFR variable is really needed, call it `mptemp`.
 
 5. Merge `initialize_mpz_and_mpq_variables` and `initialize_mpfr_variables` in one function `initialize_temp_variables`.
+
+6. Use `mpfr_set_prec()` where applicable.
``````




---

archive/issue_comments_448170.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,6 @@\n \n 4. Only one temporary MPFR variable is really needed, call it `mptemp`.\n \n-5. Merge `initialize_mpz_and_mpq_variables` and `initialize_mpfr_variables` in one function `initialize_temp_variables`.\n+5. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.\n \n 6. Use `mpfr_set_prec()` where applicable.\n``````\n",
    "created_at": "2018-02-06T10:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448170",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,6 @@
 
 4. Only one temporary MPFR variable is really needed, call it `mptemp`.
 
-5. Merge `initialize_mpz_and_mpq_variables` and `initialize_mpfr_variables` in one function `initialize_temp_variables`.
+5. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.
 
 6. Use `mpfr_set_prec()` where applicable.
``````




---

archive/issue_comments_448171.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n 1. Remove some unused stuff.\n \n-2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.\n+2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants. This way, we can remove some platform-specific hacks.\n \n-3. Replace `T(int(x))` by `T(x)`.\n+3. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.\n \n 4. Only one temporary MPFR variable is really needed, call it `mptemp`.\n \n``````\n",
    "created_at": "2018-02-06T10:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448171",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 1. Remove some unused stuff.
 
-2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.
+2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants. This way, we can remove some platform-specific hacks.
 
-3. Replace `T(int(x))` by `T(x)`.
+3. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.
 
 4. Only one temporary MPFR variable is really needed, call it `mptemp`.
 
``````




---

archive/issue_comments_448172.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,3 +9,5 @@\n 5. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.\n \n 6. Use `mpfr_set_prec()` where applicable.\n+\n+7. Define all internal functions as `static`.\n``````\n",
    "created_at": "2018-02-06T10:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448172",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,3 +9,5 @@
 5. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.
 
 6. Use `mpfr_set_prec()` where applicable.
+
+7. Define all internal functions as `static`.
``````




---

archive/issue_comments_448173.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,12 +2,16 @@\n \n 2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants. This way, we can remove some platform-specific hacks.\n \n-3. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.\n+3. No longer use the header file `partitions_c.h`. Instead, include the `.cc` file in Cython.\n \n-4. Only one temporary MPFR variable is really needed, call it `mptemp`.\n+4. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.\n \n-5. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.\n+5. Only one temporary MPFR variable is really needed, call it `mptemp`.\n \n-6. Use `mpfr_set_prec()` where applicable.\n+6. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.\n \n-7. Define all internal functions as `static`.\n+7. Use `mpfr_set_prec()` and `mpfr_add_d` where applicable.\n+\n+8. Define all internal functions as `static`.\n+\n+9. Use `MPFR_RNDF` rounding mode where exact rounding is not required.\n``````\n",
    "created_at": "2018-02-06T10:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448173",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,12 +2,16 @@
 
 2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants. This way, we can remove some platform-specific hacks.
 
-3. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.
+3. No longer use the header file `partitions_c.h`. Instead, include the `.cc` file in Cython.
 
-4. Only one temporary MPFR variable is really needed, call it `mptemp`.
+4. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.
 
-5. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.
+5. Only one temporary MPFR variable is really needed, call it `mptemp`.
 
-6. Use `mpfr_set_prec()` where applicable.
+6. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.
 
-7. Define all internal functions as `static`.
+7. Use `mpfr_set_prec()` and `mpfr_add_d` where applicable.
+
+8. Define all internal functions as `static`.
+
+9. Use `MPFR_RNDF` rounding mode where exact rounding is not required.
``````




---

archive/issue_comments_448174.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,3 +15,5 @@\n 8. Define all internal functions as `static`.\n \n 9. Use `MPFR_RNDF` rounding mode where exact rounding is not required.\n+\n+10. Ensure that the file compiles without compiler warnings.\n``````\n",
    "created_at": "2018-02-06T10:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448174",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,3 +15,5 @@
 8. Define all internal functions as `static`.
 
 9. Use `MPFR_RNDF` rounding mode where exact rounding is not required.
+
+10. Ensure that the file compiles without compiler warnings.
``````




---

archive/issue_comments_448175.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,10 +10,12 @@\n \n 6. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.\n \n-7. Use `mpfr_set_prec()` and `mpfr_add_d` where applicable.\n+7. Use some more specialized MPFR functions like `mpfr_set_prec()` where applicable.\n \n 8. Define all internal functions as `static`.\n \n 9. Use `MPFR_RNDF` rounding mode where exact rounding is not required.\n \n 10. Ensure that the file compiles without compiler warnings.\n+\n+21. Various style improvements.\n``````\n",
    "created_at": "2018-02-06T11:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448175",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,10 +10,12 @@
 
 6. Merge `initialize_mpz_and_mpq_variables`, `initialize_mpfr_variables` and `initialize_constants` in one function `initialize_globals`.
 
-7. Use `mpfr_set_prec()` and `mpfr_add_d` where applicable.
+7. Use some more specialized MPFR functions like `mpfr_set_prec()` where applicable.
 
 8. Define all internal functions as `static`.
 
 9. Use `MPFR_RNDF` rounding mode where exact rounding is not required.
 
 10. Ensure that the file compiles without compiler warnings.
+
+21. Various style improvements.
``````




---

archive/issue_comments_448176.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/remove_unused_stuff_from_partitions_c_cc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/remove_unused_stuff_from_partitions_c_cc)",
    "created_at": "2018-02-06T11:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448176",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/remove_unused_stuff_from_partitions_c_cc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/remove_unused_stuff_from_partitions_c_cc)



---

archive/issue_comments_448177.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2018-02-06T11:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448177",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_448178.json:
```json
{
    "body": "<a id='comment:15'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93de16e381c300c875604494092027d086a83f50\">93de16e</a></td><td><code>Clean up partitions_c.cc</code></td></tr></table>\n",
    "created_at": "2018-02-06T11:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448178",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93de16e381c300c875604494092027d086a83f50">93de16e</a></td><td><code>Clean up partitions_c.cc</code></td></tr></table>




---

archive/issue_comments_448179.json:
```json
{
    "body": "**Commit:** [93de16e381c300c875604494092027d086a83f50](https://github.com/sagemath/sagetrac-mirror/commit/93de16e381c300c875604494092027d086a83f50)",
    "created_at": "2018-02-06T11:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448179",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [93de16e381c300c875604494092027d086a83f50](https://github.com/sagemath/sagetrac-mirror/commit/93de16e381c300c875604494092027d086a83f50)



---

archive/issue_comments_448180.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,10 @@\n 1. Remove some unused stuff.\n \n-2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants. This way, we can remove some platform-specific hacks.\n+2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.\n \n 3. No longer use the header file `partitions_c.h`. Instead, include the `.cc` file in Cython.\n+\n+Points 2. and 3. above allow to remove some platform-specific hacks.\n \n 4. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.\n \n``````\n",
    "created_at": "2018-02-06T11:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448180",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,10 @@
 1. Remove some unused stuff.
 
-2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants. This way, we can remove some platform-specific hacks.
+2. Compute the `double` and `long double` constants using MPFR. This makes a lot of sense since we already computed MPFR versions of these constants anyway. For extra safety, we also increase the precision used to compute these constants.
 
 3. No longer use the header file `partitions_c.h`. Instead, include the `.cc` file in Cython.
+
+Points 2. and 3. above allow to remove some platform-specific hacks.
 
 4. Replace `T(int(x))` by `T(x)` to convert `x` to type `T`.
 
``````




---

archive/issue_comments_448181.json:
```json
{
    "body": "<a id='comment:16'></a>\nin this chunk\n\n```\n@@ -83,16 +86,6 @@\n  *      along with this program.  If not, see <http://www.gnu.org/licenses/>.\n  */\n \n-\n-#if defined(__sun) || defined(__CYGWIN__)\n-extern \"C\" long double fabsl (long double);\n-extern \"C\" long double sinl (long double);\n-extern \"C\" long double cosl (long double);\n-extern \"C\" long double sqrtl (long double);\n-extern \"C\" long double coshl (long double);\n-extern \"C\" long double sinhl (long double);\n-#endif\n```\nyou're removing Gygwin stuff. Are you sure it's OK?",
    "created_at": "2018-02-07T14:14:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448181",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>
in this chunk

```
@@ -83,16 +86,6 @@
  *      along with this program.  If not, see <http://www.gnu.org/licenses/>.
  */
 
-
-#if defined(__sun) || defined(__CYGWIN__)
-extern "C" long double fabsl (long double);
-extern "C" long double sinl (long double);
-extern "C" long double cosl (long double);
-extern "C" long double sqrtl (long double);
-extern "C" long double coshl (long double);
-extern "C" long double sinhl (long double);
-#endif
```
you're removing Gygwin stuff. Are you sure it's OK?



---

archive/issue_comments_448182.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [dimpase](#comment%3A16):\n> Are you sure it's OK?\n\n\nYes because I removed the *calls* to those functions. That is what point 2 in the ticket description achieves.",
    "created_at": "2018-02-07T19:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448182",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Replying to [dimpase](#comment%3A16):
> Are you sure it's OK?


Yes because I removed the *calls* to those functions. That is what point 2 in the ticket description achieves.



---

archive/issue_comments_448183.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dba6c8af0c1613b667b37ba17e9520f68f711f8\">2dba6c8</a></td><td><code>Minor fixes</code></td></tr></table>\n",
    "created_at": "2018-02-07T19:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dba6c8af0c1613b667b37ba17e9520f68f711f8">2dba6c8</a></td><td><code>Minor fixes</code></td></tr></table>




---

archive/issue_comments_448184.json:
```json
{
    "body": "**Changing commit** from \"[93de16e381c300c875604494092027d086a83f50](https://github.com/sagemath/sagetrac-mirror/commit/93de16e381c300c875604494092027d086a83f50)\" to \"[2dba6c8af0c1613b667b37ba17e9520f68f711f8](https://github.com/sagemath/sagetrac-mirror/commit/2dba6c8af0c1613b667b37ba17e9520f68f711f8)\".",
    "created_at": "2018-02-07T19:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448184",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[93de16e381c300c875604494092027d086a83f50](https://github.com/sagemath/sagetrac-mirror/commit/93de16e381c300c875604494092027d086a83f50)" to "[2dba6c8af0c1613b667b37ba17e9520f68f711f8](https://github.com/sagemath/sagetrac-mirror/commit/2dba6c8af0c1613b667b37ba17e9520f68f711f8)".



---

archive/issue_comments_448185.json:
```json
{
    "body": "<a id='comment:19'></a>\nPerhaps a stupid question, sorry, but is there any reason to use this implementation instead of [the one in arb](http://arblib.org/partitions.html#c.partitions_fmpz_fmpz)?",
    "created_at": "2018-02-12T17:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448185",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:19'></a>
Perhaps a stupid question, sorry, but is there any reason to use this implementation instead of [the one in arb](http://arblib.org/partitions.html#c.partitions_fmpz_fmpz)?



---

archive/issue_comments_448186.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [mmezzarobba](#comment%3A19):\n> Perhaps a stupid question, sorry, but is there any reason to use this implementation instead of [the one in arb](http://arblib.org/partitions.html#c.partitions_fmpz_fmpz)?\n\n\nI don't know. I'm just fixing the existing code.",
    "created_at": "2018-02-12T19:45:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448186",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Replying to [mmezzarobba](#comment%3A19):
> Perhaps a stupid question, sorry, but is there any reason to use this implementation instead of [the one in arb](http://arblib.org/partitions.html#c.partitions_fmpz_fmpz)?


I don't know. I'm just fixing the existing code.



---

archive/issue_comments_448187.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [jdemeyer](#comment%3A20):\n> Replying to [mmezzarobba](#comment%3A19):\n> > Perhaps a stupid question, sorry, but is there any reason to use this implementation instead of [the one in arb](http://arblib.org/partitions.html#c.partitions_fmpz_fmpz)?\n\n> \n> I don't know. I'm just fixing the existing code.\n\n\nIMO, it is not a bad thing to have redundancy checking with independent implementations.",
    "created_at": "2018-02-13T00:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448187",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
Replying to [jdemeyer](#comment%3A20):
> Replying to [mmezzarobba](#comment%3A19):
> > Perhaps a stupid question, sorry, but is there any reason to use this implementation instead of [the one in arb](http://arblib.org/partitions.html#c.partitions_fmpz_fmpz)?

> 
> I don't know. I'm just fixing the existing code.


IMO, it is not a bad thing to have redundancy checking with independent implementations.



---

archive/issue_comments_448188.json:
```json
{
    "body": "<a id='comment:22'></a>\nnaturally, we can have several backends to computing a function. Patches are welcome.",
    "created_at": "2018-02-15T13:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448188",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
naturally, we can have several backends to computing a function. Patches are welcome.



---

archive/issue_comments_448189.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2018-02-15T13:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448189",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_448190.json:
```json
{
    "body": "<a id='comment:23'></a>\nlooks good to me. Send it to the bots!",
    "created_at": "2018-02-15T14:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448190",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
looks good to me. Send it to the bots!



---

archive/issue_comments_448191.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2018-02-15T14:14:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448191",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_448192.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/remove_unused_stuff_from_partitions_c_cc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/remove_unused_stuff_from_partitions_c_cc)\" to \"[2dba6c8af0c1613b667b37ba17e9520f68f711f8](https://github.com/sagemath/sagetrac-mirror/commit/2dba6c8af0c1613b667b37ba17e9520f68f711f8)\".",
    "created_at": "2018-02-16T23:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24667#issuecomment-448192",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/remove_unused_stuff_from_partitions_c_cc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/remove_unused_stuff_from_partitions_c_cc)" to "[2dba6c8af0c1613b667b37ba17e9520f68f711f8](https://github.com/sagemath/sagetrac-mirror/commit/2dba6c8af0c1613b667b37ba17e9520f68f711f8)".



---

archive/issue_events_070275.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-16T23:38:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24667",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24667#event-70275"
}
```
