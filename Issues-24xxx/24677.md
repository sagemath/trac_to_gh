# Issue 24677: Fix arithmetic functions for non-Sage numbers

archive/issues_024440.json:
```json
{
    "body": "In many functions, integer type checking is done via `isinstance(x, integer_types)` where `integer_types` is sometimes `int` or obtained from the `six` library. This approach is ignoring custom integer types implemented in external libraries such as gmpy2. One solution would be to use duck typing or `numbers.Integral` instead.\n\nThe example of the `factor` function in `sage.arith.misc`\n\n```\nsage: import gmpy2\nsage: factor(gmpy2.mpz(4))\nTraceback (most recent call last):\n...\nTypeError: unable to factor n\n```\n\nList of function to modify : `binomial_coefficients`, `crt`, `CRT_list`, `divisors`, `factor`, `falling_factorial`, `gcd`, `is_square`, `is_square_free`, `moebius`, `mqrr_rational_reconstruction`, `multinomial_coefficients`, `radical`,  `rational_reconstruction`, `rising_factorial`, `xgcd` and `xlcm`.\n\nAssignee: @vinklein\n\nCC:  @vinklein\n\nKeywords: thursdaysbdx\n\nBranch/Commit: 4365384808d5df95a2ba509f654ce57d30a73a78\n\nReviewer: Vincent Delecroix\n\nAuthor: Vincent Klein\n\nDependencies: #25512, #25514\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24677\n\n",
    "closed_at": "2018-09-01T09:10:27Z",
    "created_at": "2018-02-07T08:42:08Z",
    "labels": [
        "component: basic arithmetic"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Fix arithmetic functions for non-Sage numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24677",
    "user": "https://github.com/videlec"
}
```
In many functions, integer type checking is done via `isinstance(x, integer_types)` where `integer_types` is sometimes `int` or obtained from the `six` library. This approach is ignoring custom integer types implemented in external libraries such as gmpy2. One solution would be to use duck typing or `numbers.Integral` instead.

The example of the `factor` function in `sage.arith.misc`

```
sage: import gmpy2
sage: factor(gmpy2.mpz(4))
Traceback (most recent call last):
...
TypeError: unable to factor n
```

List of function to modify : `binomial_coefficients`, `crt`, `CRT_list`, `divisors`, `factor`, `falling_factorial`, `gcd`, `is_square`, `is_square_free`, `moebius`, `mqrr_rational_reconstruction`, `multinomial_coefficients`, `radical`,  `rational_reconstruction`, `rising_factorial`, `xgcd` and `xlcm`.

Assignee: @vinklein

CC:  @vinklein

Keywords: thursdaysbdx

Branch/Commit: 4365384808d5df95a2ba509f654ce57d30a73a78

Reviewer: Vincent Delecroix

Author: Vincent Klein

Dependencies: #25512, #25514

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24677





---

archive/issue_comments_342379.json:
```json
{
    "body": "<a id='comment:1'></a>I think that we should avoid both `six.integer_types` and `numbers.Integral`. Use duck typing as much as possible.",
    "created_at": "2018-02-07T09:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342379",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>I think that we should avoid both `six.integer_types` and `numbers.Integral`. Use duck typing as much as possible.



---

archive/issue_comments_342380.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 jdemeyer]:\n> I think that we should avoid both `six.integer_types` and `numbers.Integral`. Use duck typing as much as possible.\n\n\nHow would you do for `factor`?",
    "created_at": "2018-02-07T09:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342380",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>Replying to [comment:1 jdemeyer]:
> I think that we should avoid both `six.integer_types` and `numbers.Integral`. Use duck typing as much as possible.


How would you do for `factor`?



---

archive/issue_comments_342381.json:
```json
{
    "body": "<a id='comment:6'></a>See #24679 for `factor()`.",
    "created_at": "2018-02-07T10:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342381",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>See #24679 for `factor()`.



---

archive/issue_comments_342382.json:
```json
{
    "body": "<a id='comment:7'></a>If you like my approach there, you can copy it for other functions.",
    "created_at": "2018-02-07T10:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342382",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>If you like my approach there, you can copy it for other functions.



---

archive/issue_comments_342383.json:
```json
{
    "body": "<a id='comment:9'></a>New commits:",
    "created_at": "2018-02-08T07:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342383",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>New commits:



---

archive/issue_comments_342384.json:
```json
{
    "body": "Set assignee to @vinklein.",
    "created_at": "2018-05-01T20:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342384",
    "user": "https://github.com/vinklein"
}
```

Set assignee to @vinklein.



---

archive/issue_events_062128.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2018-05-03T08:33:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24677#event-62128"
}
```



---

archive/issue_comments_342385.json:
```json
{
    "body": "<a id='comment:15'></a>New commits:",
    "created_at": "2018-05-14T15:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342385",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:15'></a>New commits:



---

archive/issue_comments_342386.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-17T14:18:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342386",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342387.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-17T14:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342388.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-17T14:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342389.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-17T14:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342389",
    "user": "https://github.com/vinklein"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_342390.json:
```json
{
    "body": "Changing keywords from \"\" to \"thursdaysbdx\".",
    "created_at": "2018-05-18T07:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342390",
    "user": "https://github.com/vinklein"
}
```

Changing keywords from "" to "thursdaysbdx".



---

archive/issue_comments_342391.json:
```json
{
    "body": "<a id='comment:27'></a>merge failure on beta3",
    "created_at": "2018-05-29T05:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342391",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>merge failure on beta3



---

archive/issue_comments_342392.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-29T05:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342392",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_342393.json:
```json
{
    "body": "<a id='comment:28'></a>There are trailing whitespaces that needs to be removed.\n\nIn doctests, a comment line must be followed by a linebreak. The following\n\n```\nTESTS with numpy and gmpy2 numbers::\n    sage: from numpy import int8\n```\nshoud be changed to\n\n```\nTests with numpy and gmpy2 numbers::\n\n    sage: from numpy import int8\n```\n\nThere is no need to write `TESTS` in upper case unless it corresponds to the section in the docstring.\n\nYou should get rid of `integer_types` in the whole file. This kind of conversion\n\n```\n    if isinstance(n, integer_types):\n        n = ZZ(n)\n```\nis better and faster with\n\n```\n    n = py_scalar_to_element()\n```\n(Moreover the former is not working for gmpy2 elements)",
    "created_at": "2018-05-29T06:07:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342393",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'></a>There are trailing whitespaces that needs to be removed.

In doctests, a comment line must be followed by a linebreak. The following

```
TESTS with numpy and gmpy2 numbers::
    sage: from numpy import int8
```
shoud be changed to

```
Tests with numpy and gmpy2 numbers::

    sage: from numpy import int8
```

There is no need to write `TESTS` in upper case unless it corresponds to the section in the docstring.

You should get rid of `integer_types` in the whole file. This kind of conversion

```
    if isinstance(n, integer_types):
        n = ZZ(n)
```
is better and faster with

```
    n = py_scalar_to_element()
```
(Moreover the former is not working for gmpy2 elements)



---

archive/issue_comments_342394.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:28 vdelecroix]:\n> (Moreover the former is not working for gmpy2 elements)\n\nThe remaining functions works for other reasons. \n\\\\\nFor example `is_square` call gmpy2 native `is_square` function. \nBut it's true that this solution may be incompatible with another future number type.",
    "created_at": "2018-05-29T08:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342394",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:29'></a>Replying to [comment:28 vdelecroix]:
> (Moreover the former is not working for gmpy2 elements)

The remaining functions works for other reasons. 
\\
For example `is_square` call gmpy2 native `is_square` function. 
But it's true that this solution may be incompatible with another future number type.



---

archive/issue_comments_342395.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-05-29T15:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342396.json:
```json
{
    "body": "<a id='comment:33'></a>Rebase on 8.3.beta3 and fix Trailing whitespace doctests issues.",
    "created_at": "2018-05-29T15:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342396",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:33'></a>Rebase on 8.3.beta3 and fix Trailing whitespace doctests issues.



---

archive/issue_comments_342397.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-30T09:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342398.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-30T12:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342399.json:
```json
{
    "body": "<a id='comment:36'></a>Usage of `six.integer_types` removed.",
    "created_at": "2018-05-30T12:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342399",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:36'></a>Usage of `six.integer_types` removed.



---

archive/issue_comments_342400.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-30T12:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342400",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_342401.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-30T14:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342402.json:
```json
{
    "body": "<a id='comment:38'></a>I don't think that\n\n```\n     if not n:\n         raise ValueError(\"n must be nonzero\")\n```\nshould remain at the begining of `divisors`. Something like `divisors([])` should raise a `TypeError` and not a `ValueError`.\n\nThe rest looks good.",
    "created_at": "2018-06-01T08:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342402",
    "user": "https://github.com/videlec"
}
```

<a id='comment:38'></a>I don't think that

```
     if not n:
         raise ValueError("n must be nonzero")
```
should remain at the begining of `divisors`. Something like `divisors([])` should raise a `TypeError` and not a `ValueError`.

The rest looks good.



---

archive/issue_comments_342403.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-01T13:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342403",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_342404.json:
```json
{
    "body": "<a id='comment:40'></a>As i don't know a good way to check the valids/invalid types for `divisors` as a pre-condition, i just let `factor` function throw `TypeError` when needed.\n\nI prefer to keep the message `TypeError: unable to factor []` rather than catch and reraise the Error (as the Error stack is quite simple to understand).",
    "created_at": "2018-06-01T13:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342404",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:40'></a>As i don't know a good way to check the valids/invalid types for `divisors` as a pre-condition, i just let `factor` function throw `TypeError` when needed.

I prefer to keep the message `TypeError: unable to factor []` rather than catch and reraise the Error (as the Error stack is quite simple to understand).



---

archive/issue_comments_342405.json:
```json
{
    "body": "<a id='comment:41'></a>It is good this way.\n\nIf the patchbot has nothing bad to say about documentation and doctests I am ok with the ticket.",
    "created_at": "2018-06-01T13:32:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342405",
    "user": "https://github.com/videlec"
}
```

<a id='comment:41'></a>It is good this way.

If the patchbot has nothing bad to say about documentation and doctests I am ok with the ticket.



---

archive/issue_comments_342406.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-03T08:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342406",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_342407.json:
```json
{
    "body": "<a id='comment:42'></a>Needs rebase on beta3 and doctests need to be marked as optional\n\n```\nsage -t --long src/sage/arith/misc.py\n**********************************************************************\nFile \"src/sage/arith/misc.py\", line 1020, in sage.arith.misc.primes\nFailed example:\n    from gmpy2 import mpz\nException raised:\n    Traceback (most recent call last):\n      File \"/home/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 572, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 982, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.arith.misc.primes[11]>\", line 1, in <module>\n        from gmpy2 import mpz\n    ImportError: No module named gmpy2\n**********************************************************************\n```",
    "created_at": "2018-06-03T08:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342407",
    "user": "https://github.com/videlec"
}
```

<a id='comment:42'></a>Needs rebase on beta3 and doctests need to be marked as optional

```
sage -t --long src/sage/arith/misc.py
**********************************************************************
File "src/sage/arith/misc.py", line 1020, in sage.arith.misc.primes
Failed example:
    from gmpy2 import mpz
Exception raised:
    Traceback (most recent call last):
      File "/home/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 572, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/sage-patchbot/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 982, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.arith.misc.primes[11]>", line 1, in <module>
        from gmpy2 import mpz
    ImportError: No module named gmpy2
**********************************************************************
```



---

archive/issue_comments_342408.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-04T08:03:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342409.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-04T08:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342410.json:
```json
{
    "body": "<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-05T13:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342411.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-05T13:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342412.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-05T15:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342412",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_events_062129.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24677#event-62129"
}
```



---

archive/issue_events_062130.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24677#event-62130"
}
```



---

archive/issue_comments_342413.json:
```json
{
    "body": "<a id='comment:50'></a>update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342413",
    "user": "https://github.com/videlec"
}
```

<a id='comment:50'></a>update milestone 8.3 -> 8.4



---

archive/issue_comments_342414.json:
```json
{
    "body": "<a id='comment:51'></a>The sentence is confusing\n\n```\n    Tests with gmpy2 and numpy numbers::\n\n        sage: from numpy import int8\n        sage: dedekind_sum(int8(5), int8(7), algorithm='default')\n        -1/14\n        sage: from gmpy2 import mpz                             # optional - gmpy2\n        sage: dedekind_sum(mpz(5), mpz(7), algorithm='default') # optional - gmpy2\n        -1/14\n```\nYou say `gmpy2 and numpy` but you test numpy first...",
    "created_at": "2018-08-23T03:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342414",
    "user": "https://github.com/videlec"
}
```

<a id='comment:51'></a>The sentence is confusing

```
    Tests with gmpy2 and numpy numbers::

        sage: from numpy import int8
        sage: dedekind_sum(int8(5), int8(7), algorithm='default')
        -1/14
        sage: from gmpy2 import mpz                             # optional - gmpy2
        sage: dedekind_sum(mpz(5), mpz(7), algorithm='default') # optional - gmpy2
        -1/14
```
You say `gmpy2 and numpy` but you test numpy first...



---

archive/issue_comments_342415.json:
```json
{
    "body": "<a id='comment:52'></a>I think i will find a way to fix that.",
    "created_at": "2018-08-23T07:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342415",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:52'></a>I think i will find a way to fix that.



---

archive/issue_comments_342416.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-23T08:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342417.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-23T14:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_342418.json:
```json
{
    "body": "<a id='comment:55'></a>- Add a test for multivariate polynomials\n- Fix docstring to match test order (`gmpy2 and numpy` into `numpy and gmpy2`)",
    "created_at": "2018-08-24T07:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342418",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:55'></a>- Add a test for multivariate polynomials
- Fix docstring to match test order (`gmpy2 and numpy` into `numpy and gmpy2`)



---

archive/issue_comments_342419.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-08-24T07:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342419",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_342420.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-24T11:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342420",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_342421.json:
```json
{
    "body": "<a id='comment:56'></a>Sadly, the patchbot does not merge the dependencies before testing...\n\nEverything is ok (at least on my computer).",
    "created_at": "2018-08-24T11:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342421",
    "user": "https://github.com/videlec"
}
```

<a id='comment:56'></a>Sadly, the patchbot does not merge the dependencies before testing...

Everything is ok (at least on my computer).



---

archive/issue_events_062131.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-01T09:10:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24677#event-62131"
}
```



---

archive/issue_comments_342422.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-09-01T09:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24677#issuecomment-342422",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
