# Issue 24824: Update GLPK to 4.65

archive/issues_024587.json:
```json
{
    "body": "GLPK 4.65 was released recently and it prints the warning \"Long-step dual simplex will be used\" all over the place, leading to many failing sagemath doctests in Debian (they fixed it by backporting\nan upstream patch)\n\nWe backport the corresponding patch to GLPK 4.65.\nHaving this in will have the tack of #28459 easier.\n\ntarball: http://users.ox.ac.uk/~coml0531/sage/glpk-4.65.tar.bz2\n\n**CC:**  @kiwifb @timokau @isuruf @mkoeppe\n\n**Branch:** [655aad05f8268ee1c58a23e98d2455d2f6965759](https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759)\n\n**Upstream:** Fixed upstream, but not in a stable release.\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/24824\n\n",
    "closed_at": "2019-10-03T17:58:28Z",
    "created_at": "2018-02-23T09:51:13Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "title": "Update GLPK to 4.65",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/24824",
    "user": "https://github.com/tobihan"
}
```
GLPK 4.65 was released recently and it prints the warning "Long-step dual simplex will be used" all over the place, leading to many failing sagemath doctests in Debian (they fixed it by backporting
an upstream patch)

We backport the corresponding patch to GLPK 4.65.
Having this in will have the tack of #28459 easier.

tarball: http://users.ox.ac.uk/~coml0531/sage/glpk-4.65.tar.bz2

**CC:**  @kiwifb @timokau @isuruf @mkoeppe

**Branch:** [655aad05f8268ee1c58a23e98d2455d2f6965759](https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759)

**Upstream:** Fixed upstream, but not in a stable release.

**Reviewer:** François Bissey

**Author:** Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/24824





---

archive/issue_comments_379900.json:
```json
{
    "body": "Replying to [ticket:24824 thansen]:\n> or if glpk just shouldn't print these warnings.\n\nReminds me of #20876.\n\nI have no idea what the message \"Long-step dual simplex will be used\" means. Is it supposed to be a warning?",
    "created_at": "2018-02-23T11:18:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379900",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:24824 thansen]:
> or if glpk just shouldn't print these warnings.

Reminds me of #20876.

I have no idea what the message "Long-step dual simplex will be used" means. Is it supposed to be a warning?



---

archive/issue_comments_379901.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt's this change in src/draft/glpios03.c:\n\n```\n+ #if 0 /* 20/I-2018 */\n           xprintf(\"WARNING: LONG-STEP DUAL SIMPLEX WILL BE USED\\n\");\n+ #else\n+          xprintf(\"Long-step dual simplex will be used\\n\");\n+ #endif\n```\n\nSo it seems that just the text of the message was changed. Does the content of the message influence whether it's printed?",
    "created_at": "2018-02-23T11:26:19Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379901",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:2'></a>
It's this change in src/draft/glpios03.c:

```
+ #if 0 /* 20/I-2018 */
           xprintf("WARNING: LONG-STEP DUAL SIMPLEX WILL BE USED\n");
+ #else
+          xprintf("Long-step dual simplex will be used\n");
+ #endif
```

So it seems that just the text of the message was changed. Does the content of the message influence whether it's printed?



---

archive/issue_comments_379902.json:
```json
{
    "body": "<a id='comment:3'></a>\nNo idea...",
    "created_at": "2018-02-23T14:30:08Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379902",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
No idea...



---

archive/issue_comments_379903.json:
```json
{
    "body": "<a id='comment:5'></a>\nUpstream (Andrew Makhorin) says this:\n\nGLP_MSG_OFF is not a relevant option to disable terminal/stdout output. \nPlease use glp_term_out(GLP_OFF) and glp_term_out(GLP_ON) instead--these\ncalls disable/enable terminal output on a lower level independently on\noptions passed to the solvers.\n\nSee https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=891465#21",
    "created_at": "2018-02-28T10:44:42Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379903",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:5'></a>
Upstream (Andrew Makhorin) says this:

GLP_MSG_OFF is not a relevant option to disable terminal/stdout output. 
Please use glp_term_out(GLP_OFF) and glp_term_out(GLP_ON) instead--these
calls disable/enable terminal output on a lower level independently on
options passed to the solvers.

See https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=891465#21



---

archive/issue_comments_379904.json:
```json
{
    "body": "**Upstream:** Reported upstream. Developers deny it's a bug.",
    "created_at": "2018-02-28T10:55:13Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379904",
    "user": "https://github.com/tobihan"
}
```

**Upstream:** Reported upstream. Developers deny it's a bug.



---

archive/issue_comments_379905.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@tobihan](#comment%3A5):\n> GLP_MSG_OFF is not a relevant option to disable terminal/stdout output.\n\nIt's not our goal to completely disable terminal output. We still want to see error messages for example.",
    "created_at": "2018-02-28T10:56:08Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379905",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Replying to [@tobihan](#comment%3A5):
> GLP_MSG_OFF is not a relevant option to disable terminal/stdout output.

It's not our goal to completely disable terminal output. We still want to see error messages for example.



---

archive/issue_comments_379906.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt would also be good to know what the message \"Long-step dual simplex will be used\" means. Is it supposed to be a warning to say that we are doing something wrong?",
    "created_at": "2018-02-28T10:57:38Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379906",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
It would also be good to know what the message "Long-step dual simplex will be used" means. Is it supposed to be a warning to say that we are doing something wrong?



---

archive/issue_comments_379907.json:
```json
{
    "body": "<a id='comment:9'></a>\nThis suggestion from https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=891465#20 is obviously the right thing to do:\n\n> It would be very helpful if GLP_MSG_OFF suppressed this message as it does with other messages.\n\nThat would be essentially a one-line patch.",
    "created_at": "2018-02-28T11:05:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379907",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
This suggestion from https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=891465#20 is obviously the right thing to do:

> It would be very helpful if GLP_MSG_OFF suppressed this message as it does with other messages.

That would be essentially a one-line patch.



---

archive/issue_comments_379908.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Developers deny it's a bug.\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2018-03-02T09:34:01Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379908",
    "user": "https://github.com/tobihan"
}
```

**Changing upstream** from "Reported upstream. Developers deny it's a bug." to "Fixed upstream, but not in a stable release.".



---

archive/issue_comments_379909.json:
```json
{
    "body": "<a id='comment:11'></a>\nShould be fixed in the next release. The patch is here:\n\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=891465#24",
    "created_at": "2018-03-02T09:38:18Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379909",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:11'></a>
Should be fixed in the next release. The patch is here:

https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=891465#24



---

archive/issue_events_220022.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-21T09:33:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "rename": {
        "from": "Update GLPK to 4.65",
        "to": "Update GLPK to 4.66"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220022"
}
```



---

archive/issue_comments_379910.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-GLPK 4.65 was released recently and it prints the warning \"Long-step dual simplex will be used\" all over the place, leading to many failing sagemath doctests in Debian. I'm not sure if sagemath already has a way to deal with such warnings from glpk, or if glpk just shouldn't print these warnings.\n+GLPK 4.65 was released recently and it prints the warning \"Long-step dual simplex will be used\" all over the place, leading to many failing sagemath doctests in Debian.\n \n-tarball: https://ftp.gnu.org/gnu/glpk/glpk-4.65.tar.gz\n+For that reason, we should skip GLPK 4.65 and wait until the next release.\n``````\n",
    "created_at": "2019-01-21T09:33:28Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379910",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-GLPK 4.65 was released recently and it prints the warning "Long-step dual simplex will be used" all over the place, leading to many failing sagemath doctests in Debian. I'm not sure if sagemath already has a way to deal with such warnings from glpk, or if glpk just shouldn't print these warnings.
+GLPK 4.65 was released recently and it prints the warning "Long-step dual simplex will be used" all over the place, leading to many failing sagemath doctests in Debian.
 
-tarball: https://ftp.gnu.org/gnu/glpk/glpk-4.65.tar.gz
+For that reason, we should skip GLPK 4.65 and wait until the next release.
``````




---

archive/issue_events_220023.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-09T10:12:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220023"
}
```



---

archive/issue_events_220024.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-09T10:12:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220024"
}
```



---

archive/issue_comments_379911.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n-GLPK 4.65 was released recently and it prints the warning \"Long-step dual simplex will be used\" all over the place, leading to many failing sagemath doctests in Debian.\n+GLPK 4.65 was released recently and it prints the warning \"Long-step dual simplex will be used\" all over the place, leading to many failing sagemath doctests in Debian (they fixed it by backporting\n+an upstream patch)\n \n-For that reason, we should skip GLPK 4.65 and wait until the next release.\n+We backport the corresponding patch to GLPK 4.65.\n+Having this in will have the tack of #28459 easier.\n+\n+tarball: http://users.ox.ac.uk/~coml0531/sage/glpk-4.65.tar.bz2\n``````\n",
    "created_at": "2019-09-09T10:12:06Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379911",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
-GLPK 4.65 was released recently and it prints the warning "Long-step dual simplex will be used" all over the place, leading to many failing sagemath doctests in Debian.
+GLPK 4.65 was released recently and it prints the warning "Long-step dual simplex will be used" all over the place, leading to many failing sagemath doctests in Debian (they fixed it by backporting
+an upstream patch)
 
-For that reason, we should skip GLPK 4.65 and wait until the next release.
+We backport the corresponding patch to GLPK 4.65.
+Having this in will have the tack of #28459 easier.
+
+tarball: http://users.ox.ac.uk/~coml0531/sage/glpk-4.65.tar.bz2
``````




---

archive/issue_comments_379912.json:
```json
{
    "body": "**Author:** Dima Pasechnik",
    "created_at": "2019-09-09T10:12:06Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379912",
    "user": "https://github.com/dimpase"
}
```

**Author:** Dima Pasechnik



---

archive/issue_comments_379913.json:
```json
{
    "body": "**Commit:** [36e1ac5d91a7bb7f5cb581441f8516138f869be5](https://github.com/sagemath/sagetrac-mirror/commit/36e1ac5d91a7bb7f5cb581441f8516138f869be5)",
    "created_at": "2019-09-09T10:12:06Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379913",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [36e1ac5d91a7bb7f5cb581441f8516138f869be5](https://github.com/sagemath/sagetrac-mirror/commit/36e1ac5d91a7bb7f5cb581441f8516138f869be5)



---

archive/issue_events_220025.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-09T10:12:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220025"
}
```



---

archive/issue_comments_379914.json:
```json
{
    "body": "**Branch:** [u/dimpase/packages/glpk465](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/glpk465)",
    "created_at": "2019-09-09T10:12:06Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379914",
    "user": "https://github.com/dimpase"
}
```

**Branch:** [u/dimpase/packages/glpk465](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/glpk465)



---

archive/issue_events_220026.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-09T10:12:06Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "rename": {
        "from": "Update GLPK to 4.66",
        "to": "Update GLPK to 4.65"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220026"
}
```



---

archive/issue_comments_379915.json:
```json
{
    "body": "<a id='comment:14'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36e1ac5d91a7bb7f5cb581441f8516138f869be5\">36e1ac5</a></td><td><code>update glpk to 4.65</code></td></tr></table>\n",
    "created_at": "2019-09-09T10:12:06Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379915",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36e1ac5d91a7bb7f5cb581441f8516138f869be5">36e1ac5</a></td><td><code>update glpk to 4.65</code></td></tr></table>




---

archive/issue_comments_379916.json:
```json
{
    "body": "**Changing commit** from \"[36e1ac5d91a7bb7f5cb581441f8516138f869be5](https://github.com/sagemath/sagetrac-mirror/commit/36e1ac5d91a7bb7f5cb581441f8516138f869be5)\" to \"[8f1bda09e42fa886973635eb64016f276b0a999a](https://github.com/sagemath/sagetrac-mirror/commit/8f1bda09e42fa886973635eb64016f276b0a999a)\".",
    "created_at": "2019-09-09T10:19:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[36e1ac5d91a7bb7f5cb581441f8516138f869be5](https://github.com/sagemath/sagetrac-mirror/commit/36e1ac5d91a7bb7f5cb581441f8516138f869be5)" to "[8f1bda09e42fa886973635eb64016f276b0a999a](https://github.com/sagemath/sagetrac-mirror/commit/8f1bda09e42fa886973635eb64016f276b0a999a)".



---

archive/issue_comments_379917.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f1bda09e42fa886973635eb64016f276b0a999a\">8f1bda0</a></td><td><code>update glpk to 4.65</code></td></tr></table>\n",
    "created_at": "2019-09-09T10:19:15Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f1bda09e42fa886973635eb64016f276b0a999a">8f1bda0</a></td><td><code>update glpk to 4.65</code></td></tr></table>




---

archive/issue_comments_379918.json:
```json
{
    "body": "<a id='comment:16'></a>\nmade the version 4.65.p0, not merely 4.65",
    "created_at": "2019-09-09T10:20:23Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379918",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>
made the version 4.65.p0, not merely 4.65



---

archive/issue_comments_379919.json:
```json
{
    "body": "**Changing commit** from \"[8f1bda09e42fa886973635eb64016f276b0a999a](https://github.com/sagemath/sagetrac-mirror/commit/8f1bda09e42fa886973635eb64016f276b0a999a)\" to \"[655aad05f8268ee1c58a23e98d2455d2f6965759](https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759)\".",
    "created_at": "2019-09-09T12:39:44Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8f1bda09e42fa886973635eb64016f276b0a999a](https://github.com/sagemath/sagetrac-mirror/commit/8f1bda09e42fa886973635eb64016f276b0a999a)" to "[655aad05f8268ee1c58a23e98d2455d2f6965759](https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759)".



---

archive/issue_comments_379920.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759\">655aad0</a></td><td><code>make tests less sensitive to output formatting</code></td></tr></table>\n",
    "created_at": "2019-09-09T12:39:44Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759">655aad0</a></td><td><code>make tests less sensitive to output formatting</code></td></tr></table>




---

archive/issue_comments_379921.json:
```json
{
    "body": "<a id='comment:18'></a>\nw.r.t. the error_recovery patch, [#20710 comment:18](https://github.com/sagemath/sage/issues/20710#comment:18) - one can ask upstream, instead of uncondionally applying our patch, make it conditional, on some new parameter that may be manipulated at runtime, how about this?",
    "created_at": "2019-09-09T13:40:26Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379921",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
w.r.t. the error_recovery patch, [#20710 comment:18](https://github.com/sagemath/sage/issues/20710#comment:18) - one can ask upstream, instead of uncondionally applying our patch, make it conditional, on some new parameter that may be manipulated at runtime, how about this?



---

archive/issue_comments_379922.json:
```json
{
    "body": "<a id='comment:19'></a>\nIt's not that applying the patch upstream will break anything, they refused the patch on principle: they simply don't want to officially support the way how Sage is absusing their error handler. I highly doubt that making the patch conditional will convince upstream. We could ask again to apply the same patch, just in case that they changed their mind.",
    "created_at": "2019-09-09T15:48:51Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379922",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
It's not that applying the patch upstream will break anything, they refused the patch on principle: they simply don't want to officially support the way how Sage is absusing their error handler. I highly doubt that making the patch conditional will convince upstream. We could ask again to apply the same patch, just in case that they changed their mind.



---

archive/issue_comments_379923.json:
```json
{
    "body": "<a id='comment:20'></a>\nIt's one thing to ask to unconditionlly change the default mode of operation, and quite another to ask to accept a patch for a possibility to manipulate the default mode.\n\nAsking to apply the same patch again would be not welcome, I think, and might lessen our chances to get what I propose in.\n\nCould you ask a question whether they'd welcome such a patch, before we spend time working on it?",
    "created_at": "2019-09-09T16:07:38Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379923",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>
It's one thing to ask to unconditionlly change the default mode of operation, and quite another to ask to accept a patch for a possibility to manipulate the default mode.

Asking to apply the same patch again would be not welcome, I think, and might lessen our chances to get what I propose in.

Could you ask a question whether they'd welcome such a patch, before we spend time working on it?



---

archive/issue_comments_379924.json:
```json
{
    "body": "<a id='comment:21'></a>\nYour strategy to remove blank lines doesn't work. At least with python2.7.",
    "created_at": "2019-09-10T02:53:19Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379924",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'></a>
Your strategy to remove blank lines doesn't work. At least with python2.7.



---

archive/issue_comments_379925.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2019-09-10T02:53:19Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379925",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** François Bissey



---

archive/issue_comments_379926.json:
```json
{
    "body": "<a id='comment:22'></a>\nI only tested with python3. Surely it's a quirk that can be fixed.",
    "created_at": "2019-09-10T06:55:53Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379926",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
I only tested with python3. Surely it's a quirk that can be fixed.



---

archive/issue_comments_379927.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [@dimpase](#comment%3A22):\n> I only tested with python3. Surely it's a quirk that can be fixed.\n\nI just tested this branch with python 2.7, all good, too. I have no idea what's not working for you.",
    "created_at": "2019-09-10T08:20:27Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379927",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
Replying to [@dimpase](#comment%3A22):
> I only tested with python3. Surely it's a quirk that can be fixed.

I just tested this branch with python 2.7, all good, too. I have no idea what's not working for you.



---

archive/issue_events_220027.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-09-10T08:37:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220027"
}
```



---

archive/issue_events_220028.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-09-10T08:37:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220028"
}
```



---

archive/issue_comments_379928.json:
```json
{
    "body": "<a id='comment:24'></a>\nIndeed I had made a mistake! It is all good.",
    "created_at": "2019-09-10T08:37:42Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379928",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'></a>
Indeed I had made a mistake! It is all good.



---

archive/issue_comments_379929.json:
```json
{
    "body": "<a id='comment:25'></a>\nmoving milestone to 9.0 (after release of 8.9)",
    "created_at": "2019-09-30T08:12:27Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379929",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>
moving milestone to 9.0 (after release of 8.9)



---

archive/issue_events_220029.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-09-30T08:12:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220029"
}
```



---

archive/issue_events_220030.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-09-30T08:12:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220030"
}
```



---

archive/issue_comments_379930.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/packages/glpk465](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/glpk465)\" to \"[655aad05f8268ee1c58a23e98d2455d2f6965759](https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759)\".",
    "created_at": "2019-10-03T17:58:28Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379930",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dimpase/packages/glpk465](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/glpk465)" to "[655aad05f8268ee1c58a23e98d2455d2f6965759](https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759)".



---

archive/issue_events_220031.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-03T17:58:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220031"
}
```



---

archive/issue_events_220032.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "93b86bfad30a7447d979f4941e39cb495c143ea8",
    "created_at": "2019-10-03T17:58:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24824#event-220032"
}
```



---

archive/issue_comments_379931.json:
```json
{
    "body": "**Changing commit** from \"[655aad05f8268ee1c58a23e98d2455d2f6965759](https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759)\" to \"\".",
    "created_at": "2019-10-28T23:11:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379931",
    "user": "https://github.com/slel"
}
```

**Changing commit** from "[655aad05f8268ee1c58a23e98d2455d2f6965759](https://github.com/sagemath/sagetrac-mirror/commit/655aad05f8268ee1c58a23e98d2455d2f6965759)" to "".



---

archive/issue_comments_379932.json:
```json
{
    "body": "<a id='comment:27'></a>\nThis breaks building [SageMath](../wiki/SageMath) on Cygwin64 on Windows 7:\n\n- https://groups.google.com/d/msg/sage-release/oDwzJ8wzbGE/wSLXPQwpCAAJ",
    "created_at": "2019-10-28T23:11:56Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379932",
    "user": "https://github.com/slel"
}
```

<a id='comment:27'></a>
This breaks building [SageMath](../wiki/SageMath) on Cygwin64 on Windows 7:

- https://groups.google.com/d/msg/sage-release/oDwzJ8wzbGE/wSLXPQwpCAAJ



---

archive/issue_comments_379933.json:
```json
{
    "body": "<a id='comment:28'></a>\nI'm seeing the message \"Long-step dual simplex will be used\" using a system installation of glpk, thereby causing lots of failed tests. Is there anything to be done about this? Refuse to use the system installation if it's version 4.65? Block the message somehow?",
    "created_at": "2020-03-10T18:11:27Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379933",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>
I'm seeing the message "Long-step dual simplex will be used" using a system installation of glpk, thereby causing lots of failed tests. Is there anything to be done about this? Refuse to use the system installation if it's version 4.65? Block the message somehow?



---

archive/issue_comments_379934.json:
```json
{
    "body": "<a id='comment:29'></a>\nFor GLPK 4.65, some package distributions ship a patched version\nthat removes these \"Long-step dual simplex will be used\" messages,\nbut some don't. Ideally when deciding whether to install GLPK or use\nthe system one, our install scripts should take that into account.",
    "created_at": "2020-03-10T18:54:08Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379934",
    "user": "https://github.com/slel"
}
```

<a id='comment:29'></a>
For GLPK 4.65, some package distributions ship a patched version
that removes these "Long-step dual simplex will be used" messages,
but some don't. Ideally when deciding whether to install GLPK or use
the system one, our install scripts should take that into account.



---

archive/issue_comments_379935.json:
```json
{
    "body": "<a id='comment:30'></a>\nIs there a good way to detect that? Is there a standard patch-level or some other indication in the version number that this change has been made?",
    "created_at": "2020-03-10T20:37:22Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379935",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:30'></a>
Is there a good way to detect that? Is there a standard patch-level or some other indication in the version number that this change has been made?



---

archive/issue_comments_379936.json:
```json
{
    "body": "<a id='comment:31'></a>\nIn Debian we patched the doctest parser to ignore these warnings:\n\nhttps://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/dt-version-glpk-4.65-ignore-warnings.patch",
    "created_at": "2020-03-11T09:58:32Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379936",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:31'></a>
In Debian we patched the doctest parser to ignore these warnings:

https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/dt-version-glpk-4.65-ignore-warnings.patch



---

archive/issue_comments_379937.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [@jhpalmieri](#comment%3A30):\n> Is there a good way to detect that? Is there a standard patch-level or some other indication in the version number that this change has been made?\n\nCouldn't we just run something that would print the warnings and check if the warnings are printed?",
    "created_at": "2020-03-11T10:25:25Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379937",
    "user": "https://github.com/timokau"
}
```

<a id='comment:32'></a>
Replying to [@jhpalmieri](#comment%3A30):
> Is there a good way to detect that? Is there a standard patch-level or some other indication in the version number that this change has been made?

Couldn't we just run something that would print the warnings and check if the warnings are printed?



---

archive/issue_comments_379938.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [@tobihan](#comment%3A31):\n> In Debian we patched the doctest parser to ignore these warnings:\n> \n> https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/dt-version-glpk-4.65-ignore-warnings.patch\n\nThis looks good. Why don't we add this to Sage?",
    "created_at": "2020-03-11T23:06:35Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379938",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:33'></a>
Replying to [@tobihan](#comment%3A31):
> In Debian we patched the doctest parser to ignore these warnings:
> 
> https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/dt-version-glpk-4.65-ignore-warnings.patch

This looks good. Why don't we add this to Sage?



---

archive/issue_comments_379939.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [@jhpalmieri](#comment%3A33):\n> Replying to [@tobihan](#comment%3A31):\n> > In Debian we patched the doctest parser to ignore these warnings:\n> > \n> > https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/dt-version-glpk-4.65-ignore-warnings.patch\n\n> \n> This looks good. Why don't we add this to Sage?\n\n+1",
    "created_at": "2020-03-11T23:38:34Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379939",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
Replying to [@jhpalmieri](#comment%3A33):
> Replying to [@tobihan](#comment%3A31):
> > In Debian we patched the doctest parser to ignore these warnings:
> > 
> > https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/dt-version-glpk-4.65-ignore-warnings.patch

> 
> This looks good. Why don't we add this to Sage?

+1



---

archive/issue_comments_379940.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [@dimpase](#comment%3A34):\n> Replying to [@jhpalmieri](#comment%3A33):\n> > Replying to [@tobihan](#comment%3A31):\n> > > In Debian we patched the doctest parser to ignore these warnings:\n> > > \n> > > https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/dt-version-glpk-4.65-ignore-warnings.patch\n\n> > \n> > This looks good. Why don't we add this to Sage?\n\n> \n> +1\n\nSee #29317.",
    "created_at": "2020-03-12T02:10:01Z",
    "issue": "https://github.com/sagemath/sage/issues/24824",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24824#issuecomment-379940",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:35'></a>
Replying to [@dimpase](#comment%3A34):
> Replying to [@jhpalmieri](#comment%3A33):
> > Replying to [@tobihan](#comment%3A31):
> > > In Debian we patched the doctest parser to ignore these warnings:
> > > 
> > > https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/dt-version-glpk-4.65-ignore-warnings.patch

> > 
> > This looks good. Why don't we add this to Sage?

> 
> +1

See #29317.
