# Issue 24748: Memory Leaks in BooleanFunction

archive/issues_024511.json:
```json
{
    "body": "As discussed in #14549 there is a memory leak in `BooleanPolynomialRing`, which was fixed (somewhat hacky) for the `annihilator` method by using `BooleanPolynomialRing_constructor`.\n\nThere are other uses of `BooleanPolyonmialRing` which should be fixed, too. I suggest to do this the same way as for `annihilator`. But maybe also add a comment to the code, to link to this and #14549 discussion, so we have a later reference, why these changes exist.\n\nAssignee: @pfasante\n\nKeywords: memory leak, BooleanFunction\n\nReviewer: Travis Scrimshaw\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/24748\n\n",
    "closed_at": "2022-01-24T09:40:46Z",
    "created_at": "2018-02-16T11:05:00Z",
    "labels": [
        "component: memleak",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Memory Leaks in BooleanFunction",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24748",
    "user": "https://github.com/pfasante"
}
```
As discussed in #14549 there is a memory leak in `BooleanPolynomialRing`, which was fixed (somewhat hacky) for the `annihilator` method by using `BooleanPolynomialRing_constructor`.

There are other uses of `BooleanPolyonmialRing` which should be fixed, too. I suggest to do this the same way as for `annihilator`. But maybe also add a comment to the code, to link to this and #14549 discussion, so we have a later reference, why these changes exist.

Assignee: @pfasante

Keywords: memory leak, BooleanFunction

Reviewer: Travis Scrimshaw

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/24748





---

archive/issue_comments_464209.json:
```json
{
    "body": "Changing branch from \"\" to \"u/asante/memory_leaks_in_booleanfunction\"",
    "created_at": "2018-02-16T11:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464209",
    "user": "https://github.com/pfasante"
}
```

Changing branch from "" to "u/asante/memory_leaks_in_booleanfunction"



---

archive/issue_comments_464210.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[b29c0e5](https://github.com/sagemath/sagetrac-mirror/commit/b29c0e5e40f24e16c21eb318bd9fa3eca16efb1c)|`add a comment to remember that this is only a hack`|",
    "created_at": "2018-02-16T11:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[b29c0e5](https://github.com/sagemath/sagetrac-mirror/commit/b29c0e5e40f24e16c21eb318bd9fa3eca16efb1c)|`add a comment to remember that this is only a hack`|



---

archive/issue_comments_464211.json:
```json
{
    "body": "Changing commit from \"\" to \"b29c0e5e40f24e16c21eb318bd9fa3eca16efb1c\"",
    "created_at": "2018-02-16T11:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "b29c0e5e40f24e16c21eb318bd9fa3eca16efb1c"



---

archive/issue_comments_464212.json:
```json
{
    "body": "Set assignee to @pfasante.",
    "created_at": "2018-02-16T11:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464212",
    "user": "https://github.com/pfasante"
}
```

Set assignee to @pfasante.



---

archive/issue_comments_464213.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-17T10:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464213",
    "user": "https://github.com/pfasante"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_464214.json:
```json
{
    "body": "<a id='comment:5'></a>\n(sorry forgott that I still have to fix something)",
    "created_at": "2018-02-17T10:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464214",
    "user": "https://github.com/pfasante"
}
```

<a id='comment:5'></a>
(sorry forgott that I still have to fix something)



---

archive/issue_comments_464215.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-17T10:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464215",
    "user": "https://github.com/pfasante"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_464216.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[90f0a83](https://github.com/sagemath/sagetrac-mirror/commit/90f0a835662c71e829ddfeb123d51dc48f16ea08)|`import the factory function from the right module`|",
    "created_at": "2018-02-17T10:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[90f0a83](https://github.com/sagemath/sagetrac-mirror/commit/90f0a835662c71e829ddfeb123d51dc48f16ea08)|`import the factory function from the right module`|



---

archive/issue_comments_464217.json:
```json
{
    "body": "Changing commit from \"b29c0e5e40f24e16c21eb318bd9fa3eca16efb1c\" to \"90f0a835662c71e829ddfeb123d51dc48f16ea08\"",
    "created_at": "2018-02-17T10:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464217",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b29c0e5e40f24e16c21eb318bd9fa3eca16efb1c" to "90f0a835662c71e829ddfeb123d51dc48f16ea08"



---

archive/issue_comments_464218.json:
```json
{
    "body": "<a id='comment:7'></a>\nNow ready for review.",
    "created_at": "2018-02-17T10:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464218",
    "user": "https://github.com/pfasante"
}
```

<a id='comment:7'></a>
Now ready for review.



---

archive/issue_comments_464219.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-17T10:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464219",
    "user": "https://github.com/pfasante"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_464220.json:
```json
{
    "body": "<a id='comment:8'></a>\nIMHO, you should fix the problem (#21892) rather than the symptoms.",
    "created_at": "2018-02-17T13:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464220",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
IMHO, you should fix the problem (#21892) rather than the symptoms.



---

archive/issue_comments_464221.json:
```json
{
    "body": "<a id='comment:9'></a>\nI agree, will work on #21892 next when I have some spare time.\nBut I think that a fix for that can remove this hack accordingly?",
    "created_at": "2018-02-18T10:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464221",
    "user": "https://github.com/pfasante"
}
```

<a id='comment:9'></a>
I agree, will work on #21892 next when I have some spare time.
But I think that a fix for that can remove this hack accordingly?



---

archive/issue_comments_464222.json:
```json
{
    "body": "<a id='comment:10'></a>\nI don't see the point of taking on more technical debt when there is a known solution. I know finding spare time is not easy, but it makes it easier (i.e. requires less time) to work with the code base in the long run. Anyways, if someone else wants to set this to a positive review, I will not object, but I am more willing to find time to review the long term fix.",
    "created_at": "2018-02-19T11:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464222",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
I don't see the point of taking on more technical debt when there is a known solution. I know finding spare time is not easy, but it makes it easier (i.e. requires less time) to work with the code base in the long run. Anyways, if someone else wants to set this to a positive review, I will not object, but I am more willing to find time to review the long term fix.



---

archive/issue_comments_464223.json:
```json
{
    "body": "<a id='comment:11'></a>\nOK, I'm fine with that, too.\n\nI took a look at the BooleanPolynomialRing implementation and for me to be able to write the correct patch will take some time, as I have to understand how the implementation work (and differs from other ring implementations).\n\nIs there a possibility to close tickets as wontfix or something?",
    "created_at": "2018-02-19T11:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464223",
    "user": "https://github.com/pfasante"
}
```

<a id='comment:11'></a>
OK, I'm fine with that, too.

I took a look at the BooleanPolynomialRing implementation and for me to be able to write the correct patch will take some time, as I have to understand how the implementation work (and differs from other ring implementations).

Is there a possibility to close tickets as wontfix or something?



---

archive/issue_events_078632.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-01-23T19:35:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24748#event-78632"
}
```



---

archive/issue_comments_464224.json:
```json
{
    "body": "<a id='comment:12'></a>\nshall we close this one ?",
    "created_at": "2022-01-23T19:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464224",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>
shall we close this one ?



---

archive/issue_comments_464225.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2022-01-23T23:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464225",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_464226.json:
```json
{
    "body": "Changing author from \"Friedrich Wiemer\" to \"\"",
    "created_at": "2022-01-23T23:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464226",
    "user": "https://github.com/tscrim"
}
```

Changing author from "Friedrich Wiemer" to ""



---

archive/issue_comments_464227.json:
```json
{
    "body": "<a id='comment:13'></a>\nYes, I think so. We are better off fixing #21892 IMO.",
    "created_at": "2022-01-23T23:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464227",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Yes, I think so. We are better off fixing #21892 IMO.



---

archive/issue_comments_464228.json:
```json
{
    "body": "Changing commit from \"90f0a835662c71e829ddfeb123d51dc48f16ea08\" to \"\"",
    "created_at": "2022-01-23T23:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464228",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "90f0a835662c71e829ddfeb123d51dc48f16ea08" to ""



---

archive/issue_comments_464229.json:
```json
{
    "body": "Changing branch from \"u/asante/memory_leaks_in_booleanfunction\" to \"\"",
    "created_at": "2022-01-23T23:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464229",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/asante/memory_leaks_in_booleanfunction" to ""



---

archive/issue_comments_464230.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-01-23T23:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464230",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_464231.json:
```json
{
    "body": "<a id='comment:14'></a>\nI agree, too. As Travis said, we should fix the other ticket.",
    "created_at": "2022-01-24T09:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464231",
    "user": "https://github.com/pfasante"
}
```

<a id='comment:14'></a>
I agree, too. As Travis said, we should fix the other ticket.



---

archive/issue_events_078633.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-01-24T09:40:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24748#event-78633"
}
```



---

archive/issue_comments_464232.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-01-24T09:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24748",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24748#issuecomment-464232",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
