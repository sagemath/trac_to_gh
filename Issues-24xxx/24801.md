# Issue 24801: random_diagonalizable_matrix silently ignores the base ring

archive/issues_024564.json:
```json
{
    "body": "CC:  @rbeezer\n\nA student of mine got surprised this morning :-)\n\n```\n    sage: K = GF(3)\n    sage: random_matrix(K, 3,3,algorithm=\"diagonalizable\").parent()\n    Full MatrixSpace of 3 by 3 dense matrices over Rational Field\n```\n\nRecommendations:\n- Make it explicit in the documentation of `random_matrix` and `random_diagonalizable_matrix` that algorithm=\"diagonalizable\" is only implemented for the rational field\n- Add a check for the base ring in random_diagonalizable_matrix, and fail gracefully with a `NotImplementedError` if it's not `QQ`.\n\nAlternatively: implement `random_diagonalizable_matrix` for any base ring/field. It sounds like the current algorithm would produce a reasonable answer; so this could boil down to just creating the matrix in the appropriate parent; and updating the documentation to say something like \"if the parent is QQ, then the eigenvectors are guaranteed to ...\".\n\nIssue created by migration from https://trac.sagemath.org/ticket/24801\n\n",
    "created_at": "2018-02-21T08:42:38Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "random_diagonalizable_matrix silently ignores the base ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24801",
    "user": "https://github.com/nthiery"
}
```
CC:  @rbeezer

A student of mine got surprised this morning :-)

```
    sage: K = GF(3)
    sage: random_matrix(K, 3,3,algorithm="diagonalizable").parent()
    Full MatrixSpace of 3 by 3 dense matrices over Rational Field
```

Recommendations:
- Make it explicit in the documentation of `random_matrix` and `random_diagonalizable_matrix` that algorithm="diagonalizable" is only implemented for the rational field
- Add a check for the base ring in random_diagonalizable_matrix, and fail gracefully with a `NotImplementedError` if it's not `QQ`.

Alternatively: implement `random_diagonalizable_matrix` for any base ring/field. It sounds like the current algorithm would produce a reasonable answer; so this could boil down to just creating the matrix in the appropriate parent; and updating the documentation to say something like "if the parent is QQ, then the eigenvectors are guaranteed to ...".

Issue created by migration from https://trac.sagemath.org/ticket/24801


