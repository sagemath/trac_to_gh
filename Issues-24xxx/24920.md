# Issue 24920: Failing doctests in r.py on OpenSuSE with system readline

archive/issues_024683.json:
```json
{
    "assignees": [],
    "body": "From https://groups.google.com/forum/#!topic/sage-devel/AWGonGw0tvo\n\nOn OpenSuSE with system readline several doctests in r.py get the additional line printed:\n`    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)`\nwhich makes them fail.\n\n```\nsage -t --long --warn-long 47.0 src/sage/interfaces/r.py\n**********************************************************************\nFile \"src/sage/interfaces/r.py\", line 790, in sage.interfaces.r.R.help\nFailed example:\n    r.help('c')\nExpected:\n    c                     package:base                     R Documentation\n    ...\nGot:\n    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n    c                     package:base                     R Documentation\n    <BLANKLINE>\n    _C_o_m_b_i_n_e _V_a_l_u_e_s _i_n_t_o _a _V_e_c_t_o_r _o_r _L_i_s_t\n    <BLANKLINE>\n    _D_e_s_c_r_i_p_t_i_o_n:\n    <BLANKLINE>\n         This is a generic function which combines its arguments.\n    <BLANKLINE>\n         The default method combines its arguments to form a vector.  All\n         arguments are coerced to a common type which is the type of the\n         returned value, and all attributes except names are removed.\n    <BLANKLINE>\n    _U_s_a_g_e:\n    <BLANKLINE>\n         ## S3 Generic function\n         c(...)\n    <BLANKLINE>\n         ## Default S3 method:\n         c(..., recursive = FALSE, use.names = TRUE)\n    <BLANKLINE>\n    _A_r_g_u_m_e_n_t_s:\n    <BLANKLINE>\n         ...: objects to be concatenated.\n    <BLANKLINE>\n    recursive: logical.  If \u2018recursive = TRUE\u2019, the function recursively\n              descends through lists (and pairlists) combining all their\n              elements into a vector.\n    <BLANKLINE>\n    use.names: logical indicating if \u2018names\u2019 should be preserved.\n    <BLANKLINE>\n    _D_e_t_a_i_l_s:\n    <BLANKLINE>\n         The output type is determined from the highest type of the\n         components in the hierarchy NULL < raw < logical < integer <\n         double < complex < character < list < expression.  Pairlists are\n         treated as lists, whereas non-vector components (such names and\n         calls) are treated as one-element lists which cannot be unlisted\n         even if \u2018recursive = TRUE\u2019.\n    <BLANKLINE>\n         Note that \u2018factor\u2019s are treated only via their internal \u2018integer\u2019\n         codes; one proposal has been to use\n    <BLANKLINE>\n            c.factor <- function(..., recursive=TRUE) unlist(list(...), recursive=recursive)\n    <BLANKLINE>\n         if factor concatenation by \u2018c()\u2019 should give a \u2018factor\u2019.\n    <BLANKLINE>\n         \u2018c\u2019 is sometimes used for its side effect of removing attributes\n         except names, for example to turn an array into a vector.\n         \u2018as.vector\u2019 is a more intuitive way to do this, but also drops\n         names.  Note that methods other than the default are not required\n         to do this (and they will almost certainly preserve a class\n         attribute).\n    <BLANKLINE>\n         This is a primitive function.\n    <BLANKLINE>\n    _V_a_l_u_e:\n    <BLANKLINE>\n         \u2018NULL\u2019 or an expression or a vector of an appropriate mode.  (With\n         no arguments the value is \u2018NULL\u2019.)\n    <BLANKLINE>\n    _S_4 _m_e_t_h_o_d_s:\n    <BLANKLINE>\n         This function is S4 generic, but with argument list \u2018(x, ...)\u2019.\n    <BLANKLINE>\n    _R_e_f_e_r_e_n_c_e_s:\n    <BLANKLINE>\n         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n         Language_.  Wadsworth & Brooks/Cole.\n    <BLANKLINE>\n    _S_e_e _A_l_s_o:\n    <BLANKLINE>\n         \u2018unlist\u2019 and \u2018as.vector\u2019 to produce attribute-free vectors.\n    <BLANKLINE>\n    _E_x_a_m_p_l_e_s:\n    <BLANKLINE>\n         c(1,7:9)\n         c(1:5, 10.5, \"next\")\n    <BLANKLINE>\n         ## uses with a single argument to drop attributes\n         x <- 1:4\n         names(x) <- letters[1:4]\n         x\n         c(x)          # has names\n         as.vector(x)  # no names\n         dim(x) <- c(2,2)\n         x\n         c(x)\n         as.vector(x)\n    <BLANKLINE>\n         ## append to a list:\n         ll <- list(A = 1, c = \"C\")\n         ## do *not* use\n         c(ll, d = 1:3) # which is == c(ll, as.list(c(d = 1:3))\n         ## but rather\n         c(ll, d = list(1:3))  # c() combining two lists\n    <BLANKLINE>\n         c(list(A = c(B = 1)), recursive = TRUE)\n    <BLANKLINE>\n         c(options(), recursive = TRUE)\n         c(list(A = c(B = 1, C = 2), B = c(E = 7)), recursive = TRUE)\n**********************************************************************\nFile \"src/sage/interfaces/r.py\", line 1956, in sage.interfaces.r.RFunctionElement._instancedoc_\nFailed example:\n    print(length.__doc__)\nExpected:\n    length                 package:base                 R Documentation\n    ...\n    <BLANKLINE>\nGot:\n    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n    length                  package:base                   R Documentation\n    <BLANKLINE>\n    _L_e_n_g_t_h _o_f _a_n _O_b_j_e_c_t\n    <BLANKLINE>\n    _D_e_s_c_r_i_p_t_i_o_n:\n    <BLANKLINE>\n         Get or set the length of vectors (including lists) and factors,\n         and of any other R object for which a method has been defined.\n    <BLANKLINE>\n    _U_s_a_g_e:\n    <BLANKLINE>\n         length(x)\n         length(x) <- value\n    <BLANKLINE>\n    _A_r_g_u_m_e_n_t_s:\n    <BLANKLINE>\n           x: an R object.  For replacement, a vector or factor.\n    <BLANKLINE>\n       value: a non-negative integer or double (which will be rounded\n              down).\n    <BLANKLINE>\n    _D_e_t_a_i_l_s:\n    <BLANKLINE>\n         Both functions are generic: you can write methods to handle\n         specific classes of objects, see InternalMethods.  \u2018length<-\u2019 has\n         a \u2018\"factor\"\u2019 method.\n    <BLANKLINE>\n         The replacement form can be used to reset the length of a vector.\n         If a vector is shortened, extra values are discarded and when a\n         vector is lengthened, it is padded out to its new length with\n         \u2018NA\u2019s (\u2018nul\u2019 for raw vectors).\n    <BLANKLINE>\n         Both are primitive functions.\n    <BLANKLINE>\n    _V_a_l_u_e:\n    <BLANKLINE>\n         The default method for \u2018length\u2019 currently returns a non-negative\n         \u2018integer\u2019 of length 1, except for vectors of more than 2^31 - 1\n         elements, when it returns a double.\n    <BLANKLINE>\n         For vectors (including lists) and factors the length is the number\n         of elements.  For an environment it is the number of objects in\n         the environment, and \u2018NULL\u2019 has length 0.  For expressions and\n         pairlists (including language objects and dotlists) it is the\n         length of the pairlist chain.  All other objects (including\n         functions) have length one: note that for functions this differs\n         from S.\n    <BLANKLINE>\n         The replacement form removes all the attributes of \u2018x\u2019 except its\n         names, which are adjusted (and if necessary extended by \u2018\"\"\u2019).\n    <BLANKLINE>\n    _W_a_r_n_i_n_g:\n    <BLANKLINE>\n         Package authors have written methods that return a result of\n         length other than one (\u2018Formula\u2019) and that return a vector of type\n         \u2018double\u2019 (\u2018Matrix\u2019), even with non-integer values (earlier\n         versions of \u2018sets\u2019). Where a single double value is returned that\n         can be represented as an integer it is returned as a length-one\n         integer vector.\n    <BLANKLINE>\n    _R_e_f_e_r_e_n_c_e_s:\n    <BLANKLINE>\n         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n         Language_.  Wadsworth & Brooks/Cole.\n    <BLANKLINE>\n    _S_e_e _A_l_s_o:\n    <BLANKLINE>\n         \u2018nchar\u2019 for counting the number of characters in character\n         vectors, \u2018lengths\u2019 for getting the length of every element in a\n         list.\n    <BLANKLINE>\n    _E_x_a_m_p_l_e_s:\n    <BLANKLINE>\n         length(diag(4))  # = 16 (4 x 4)\n         length(options())  # 12 or more\n         length(y ~ x1 + x2 + x3)  # 3\n         length(expression(x, {y <- x^2; y+2}, x^y))  # 3\n    <BLANKLINE>\n         ## from example(warpbreaks)\n         require(stats)\n    <BLANKLINE>\n         fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)\n         length(fm1$call)      # 3, lm() and two arguments.\n         length(formula(fm1))  # 3, ~ lhs rhs\n**********************************************************************\nFile \"src/sage/interfaces/r.py\", line 2046, in sage.interfaces.r.RFunction._instancedoc_\nFailed example:\n    print(length.__doc__)\nExpected:\n    length                 package:base                 R Documentation\n    ...\n    <BLANKLINE>\nGot:\n    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n    length                  package:base                   R Documentation\n    <BLANKLINE>\n    _L_e_n_g_t_h _o_f _a_n _O_b_j_e_c_t\n    <BLANKLINE>\n    _D_e_s_c_r_i_p_t_i_o_n:\n    <BLANKLINE>\n         Get or set the length of vectors (including lists) and factors,\n         and of any other R object for which a method has been defined.\n    <BLANKLINE>\n    _U_s_a_g_e:\n    <BLANKLINE>\n         length(x)\n         length(x) <- value\n    <BLANKLINE>\n    _A_r_g_u_m_e_n_t_s:\n    <BLANKLINE>\n           x: an R object.  For replacement, a vector or factor.\n    <BLANKLINE>\n       value: a non-negative integer or double (which will be rounded\n              down).\n    <BLANKLINE>\n    _D_e_t_a_i_l_s:\n    <BLANKLINE>\n         Both functions are generic: you can write methods to handle\n         specific classes of objects, see InternalMethods.  \u2018length<-\u2019 has\n         a \u2018\"factor\"\u2019 method.\n    <BLANKLINE>\n         The replacement form can be used to reset the length of a vector.\n         If a vector is shortened, extra values are discarded and when a\n         vector is lengthened, it is padded out to its new length with\n         \u2018NA\u2019s (\u2018nul\u2019 for raw vectors).\n    <BLANKLINE>\n         Both are primitive functions.\n    <BLANKLINE>\n    _V_a_l_u_e:\n    <BLANKLINE>\n         The default method for \u2018length\u2019 currently returns a non-negative\n         \u2018integer\u2019 of length 1, except for vectors of more than 2^31 - 1\n         elements, when it returns a double.\n    <BLANKLINE>\n         For vectors (including lists) and factors the length is the number\n         of elements.  For an environment it is the number of objects in\n         the environment, and \u2018NULL\u2019 has length 0.  For expressions and\n         pairlists (including language objects and dotlists) it is the\n         length of the pairlist chain.  All other objects (including\n         functions) have length one: note that for functions this differs\n         from S.\n    <BLANKLINE>\n         The replacement form removes all the attributes of \u2018x\u2019 except its\n         names, which are adjusted (and if necessary extended by \u2018\"\"\u2019).\n    <BLANKLINE>\n    _W_a_r_n_i_n_g:\n    <BLANKLINE>\n         Package authors have written methods that return a result of\n         length other than one (\u2018Formula\u2019) and that return a vector of type\n         \u2018double\u2019 (\u2018Matrix\u2019), even with non-integer values (earlier\n         versions of \u2018sets\u2019). Where a single double value is returned that\n         can be represented as an integer it is returned as a length-one\n         integer vector.\n    <BLANKLINE>\n    _R_e_f_e_r_e_n_c_e_s:\n    <BLANKLINE>\n         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n         Language_.  Wadsworth & Brooks/Cole.\n    <BLANKLINE>\n    _S_e_e _A_l_s_o:\n    <BLANKLINE>\n         \u2018nchar\u2019 for counting the number of characters in character\n         vectors, \u2018lengths\u2019 for getting the length of every element in a\n         list.\n    <BLANKLINE>\n    _E_x_a_m_p_l_e_s:\n    <BLANKLINE>\n         length(diag(4))  # = 16 (4 x 4)\n         length(options())  # 12 or more\n         length(y ~ x1 + x2 + x3)  # 3\n         length(expression(x, {y <- x^2; y+2}, x^y))  # 3\n    <BLANKLINE>\n         ## from example(warpbreaks)\n         require(stats)\n    <BLANKLINE>\n         fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)\n         length(fm1$call)      # 3, lm() and two arguments.\n         length(formula(fm1))  # 3, ~ lhs rhs\n**********************************************************************\n3 items had failures:\n   1 of   2 in sage.interfaces.r.R.help\n   1 of   3 in sage.interfaces.r.RFunction._instancedoc_\n   1 of   4 in sage.interfaces.r.RFunctionElement._instancedoc_\n    [260 tests, 3 failures, 2.63 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 47.0 src/sage/interfaces/r.py  # 3 doctests failed\n```\n\nComponent: **doctest coverage**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24920_\n\n",
    "created_at": "2018-03-06T16:33:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Failing doctests in r.py on OpenSuSE with system readline",
    "type": "issue",
    "updated_at": "2022-12-29T01:40:48Z",
    "url": "https://github.com/sagemath/sage/issues/24920",
    "user": "https://github.com/rwst"
}
```
From https://groups.google.com/forum/#!topic/sage-devel/AWGonGw0tvo

On OpenSuSE with system readline several doctests in r.py get the additional line printed:
`    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)`
which makes them fail.

```
sage -t --long --warn-long 47.0 src/sage/interfaces/r.py
**********************************************************************
File "src/sage/interfaces/r.py", line 790, in sage.interfaces.r.R.help
Failed example:
    r.help('c')
Expected:
    c                     package:base                     R Documentation
    ...
Got:
    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
    c                     package:base                     R Documentation
    <BLANKLINE>
    _C_o_m_b_i_n_e _V_a_l_u_e_s _i_n_t_o _a _V_e_c_t_o_r _o_r _L_i_s_t
    <BLANKLINE>
    _D_e_s_c_r_i_p_t_i_o_n:
    <BLANKLINE>
         This is a generic function which combines its arguments.
    <BLANKLINE>
         The default method combines its arguments to form a vector.  All
         arguments are coerced to a common type which is the type of the
         returned value, and all attributes except names are removed.
    <BLANKLINE>
    _U_s_a_g_e:
    <BLANKLINE>
         ## S3 Generic function
         c(...)
    <BLANKLINE>
         ## Default S3 method:
         c(..., recursive = FALSE, use.names = TRUE)
    <BLANKLINE>
    _A_r_g_u_m_e_n_t_s:
    <BLANKLINE>
         ...: objects to be concatenated.
    <BLANKLINE>
    recursive: logical.  If ‘recursive = TRUE’, the function recursively
              descends through lists (and pairlists) combining all their
              elements into a vector.
    <BLANKLINE>
    use.names: logical indicating if ‘names’ should be preserved.
    <BLANKLINE>
    _D_e_t_a_i_l_s:
    <BLANKLINE>
         The output type is determined from the highest type of the
         components in the hierarchy NULL < raw < logical < integer <
         double < complex < character < list < expression.  Pairlists are
         treated as lists, whereas non-vector components (such names and
         calls) are treated as one-element lists which cannot be unlisted
         even if ‘recursive = TRUE’.
    <BLANKLINE>
         Note that ‘factor’s are treated only via their internal ‘integer’
         codes; one proposal has been to use
    <BLANKLINE>
            c.factor <- function(..., recursive=TRUE) unlist(list(...), recursive=recursive)
    <BLANKLINE>
         if factor concatenation by ‘c()’ should give a ‘factor’.
    <BLANKLINE>
         ‘c’ is sometimes used for its side effect of removing attributes
         except names, for example to turn an array into a vector.
         ‘as.vector’ is a more intuitive way to do this, but also drops
         names.  Note that methods other than the default are not required
         to do this (and they will almost certainly preserve a class
         attribute).
    <BLANKLINE>
         This is a primitive function.
    <BLANKLINE>
    _V_a_l_u_e:
    <BLANKLINE>
         ‘NULL’ or an expression or a vector of an appropriate mode.  (With
         no arguments the value is ‘NULL’.)
    <BLANKLINE>
    _S_4 _m_e_t_h_o_d_s:
    <BLANKLINE>
         This function is S4 generic, but with argument list ‘(x, ...)’.
    <BLANKLINE>
    _R_e_f_e_r_e_n_c_e_s:
    <BLANKLINE>
         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
         Language_.  Wadsworth & Brooks/Cole.
    <BLANKLINE>
    _S_e_e _A_l_s_o:
    <BLANKLINE>
         ‘unlist’ and ‘as.vector’ to produce attribute-free vectors.
    <BLANKLINE>
    _E_x_a_m_p_l_e_s:
    <BLANKLINE>
         c(1,7:9)
         c(1:5, 10.5, "next")
    <BLANKLINE>
         ## uses with a single argument to drop attributes
         x <- 1:4
         names(x) <- letters[1:4]
         x
         c(x)          # has names
         as.vector(x)  # no names
         dim(x) <- c(2,2)
         x
         c(x)
         as.vector(x)
    <BLANKLINE>
         ## append to a list:
         ll <- list(A = 1, c = "C")
         ## do *not* use
         c(ll, d = 1:3) # which is == c(ll, as.list(c(d = 1:3))
         ## but rather
         c(ll, d = list(1:3))  # c() combining two lists
    <BLANKLINE>
         c(list(A = c(B = 1)), recursive = TRUE)
    <BLANKLINE>
         c(options(), recursive = TRUE)
         c(list(A = c(B = 1, C = 2), B = c(E = 7)), recursive = TRUE)
**********************************************************************
File "src/sage/interfaces/r.py", line 1956, in sage.interfaces.r.RFunctionElement._instancedoc_
Failed example:
    print(length.__doc__)
Expected:
    length                 package:base                 R Documentation
    ...
    <BLANKLINE>
Got:
    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
    length                  package:base                   R Documentation
    <BLANKLINE>
    _L_e_n_g_t_h _o_f _a_n _O_b_j_e_c_t
    <BLANKLINE>
    _D_e_s_c_r_i_p_t_i_o_n:
    <BLANKLINE>
         Get or set the length of vectors (including lists) and factors,
         and of any other R object for which a method has been defined.
    <BLANKLINE>
    _U_s_a_g_e:
    <BLANKLINE>
         length(x)
         length(x) <- value
    <BLANKLINE>
    _A_r_g_u_m_e_n_t_s:
    <BLANKLINE>
           x: an R object.  For replacement, a vector or factor.
    <BLANKLINE>
       value: a non-negative integer or double (which will be rounded
              down).
    <BLANKLINE>
    _D_e_t_a_i_l_s:
    <BLANKLINE>
         Both functions are generic: you can write methods to handle
         specific classes of objects, see InternalMethods.  ‘length<-’ has
         a ‘"factor"’ method.
    <BLANKLINE>
         The replacement form can be used to reset the length of a vector.
         If a vector is shortened, extra values are discarded and when a
         vector is lengthened, it is padded out to its new length with
         ‘NA’s (‘nul’ for raw vectors).
    <BLANKLINE>
         Both are primitive functions.
    <BLANKLINE>
    _V_a_l_u_e:
    <BLANKLINE>
         The default method for ‘length’ currently returns a non-negative
         ‘integer’ of length 1, except for vectors of more than 2^31 - 1
         elements, when it returns a double.
    <BLANKLINE>
         For vectors (including lists) and factors the length is the number
         of elements.  For an environment it is the number of objects in
         the environment, and ‘NULL’ has length 0.  For expressions and
         pairlists (including language objects and dotlists) it is the
         length of the pairlist chain.  All other objects (including
         functions) have length one: note that for functions this differs
         from S.
    <BLANKLINE>
         The replacement form removes all the attributes of ‘x’ except its
         names, which are adjusted (and if necessary extended by ‘""’).
    <BLANKLINE>
    _W_a_r_n_i_n_g:
    <BLANKLINE>
         Package authors have written methods that return a result of
         length other than one (‘Formula’) and that return a vector of type
         ‘double’ (‘Matrix’), even with non-integer values (earlier
         versions of ‘sets’). Where a single double value is returned that
         can be represented as an integer it is returned as a length-one
         integer vector.
    <BLANKLINE>
    _R_e_f_e_r_e_n_c_e_s:
    <BLANKLINE>
         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
         Language_.  Wadsworth & Brooks/Cole.
    <BLANKLINE>
    _S_e_e _A_l_s_o:
    <BLANKLINE>
         ‘nchar’ for counting the number of characters in character
         vectors, ‘lengths’ for getting the length of every element in a
         list.
    <BLANKLINE>
    _E_x_a_m_p_l_e_s:
    <BLANKLINE>
         length(diag(4))  # = 16 (4 x 4)
         length(options())  # 12 or more
         length(y ~ x1 + x2 + x3)  # 3
         length(expression(x, {y <- x^2; y+2}, x^y))  # 3
    <BLANKLINE>
         ## from example(warpbreaks)
         require(stats)
    <BLANKLINE>
         fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)
         length(fm1$call)      # 3, lm() and two arguments.
         length(formula(fm1))  # 3, ~ lhs rhs
**********************************************************************
File "src/sage/interfaces/r.py", line 2046, in sage.interfaces.r.RFunction._instancedoc_
Failed example:
    print(length.__doc__)
Expected:
    length                 package:base                 R Documentation
    ...
    <BLANKLINE>
Got:
    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
    length                  package:base                   R Documentation
    <BLANKLINE>
    _L_e_n_g_t_h _o_f _a_n _O_b_j_e_c_t
    <BLANKLINE>
    _D_e_s_c_r_i_p_t_i_o_n:
    <BLANKLINE>
         Get or set the length of vectors (including lists) and factors,
         and of any other R object for which a method has been defined.
    <BLANKLINE>
    _U_s_a_g_e:
    <BLANKLINE>
         length(x)
         length(x) <- value
    <BLANKLINE>
    _A_r_g_u_m_e_n_t_s:
    <BLANKLINE>
           x: an R object.  For replacement, a vector or factor.
    <BLANKLINE>
       value: a non-negative integer or double (which will be rounded
              down).
    <BLANKLINE>
    _D_e_t_a_i_l_s:
    <BLANKLINE>
         Both functions are generic: you can write methods to handle
         specific classes of objects, see InternalMethods.  ‘length<-’ has
         a ‘"factor"’ method.
    <BLANKLINE>
         The replacement form can be used to reset the length of a vector.
         If a vector is shortened, extra values are discarded and when a
         vector is lengthened, it is padded out to its new length with
         ‘NA’s (‘nul’ for raw vectors).
    <BLANKLINE>
         Both are primitive functions.
    <BLANKLINE>
    _V_a_l_u_e:
    <BLANKLINE>
         The default method for ‘length’ currently returns a non-negative
         ‘integer’ of length 1, except for vectors of more than 2^31 - 1
         elements, when it returns a double.
    <BLANKLINE>
         For vectors (including lists) and factors the length is the number
         of elements.  For an environment it is the number of objects in
         the environment, and ‘NULL’ has length 0.  For expressions and
         pairlists (including language objects and dotlists) it is the
         length of the pairlist chain.  All other objects (including
         functions) have length one: note that for functions this differs
         from S.
    <BLANKLINE>
         The replacement form removes all the attributes of ‘x’ except its
         names, which are adjusted (and if necessary extended by ‘""’).
    <BLANKLINE>
    _W_a_r_n_i_n_g:
    <BLANKLINE>
         Package authors have written methods that return a result of
         length other than one (‘Formula’) and that return a vector of type
         ‘double’ (‘Matrix’), even with non-integer values (earlier
         versions of ‘sets’). Where a single double value is returned that
         can be represented as an integer it is returned as a length-one
         integer vector.
    <BLANKLINE>
    _R_e_f_e_r_e_n_c_e_s:
    <BLANKLINE>
         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
         Language_.  Wadsworth & Brooks/Cole.
    <BLANKLINE>
    _S_e_e _A_l_s_o:
    <BLANKLINE>
         ‘nchar’ for counting the number of characters in character
         vectors, ‘lengths’ for getting the length of every element in a
         list.
    <BLANKLINE>
    _E_x_a_m_p_l_e_s:
    <BLANKLINE>
         length(diag(4))  # = 16 (4 x 4)
         length(options())  # 12 or more
         length(y ~ x1 + x2 + x3)  # 3
         length(expression(x, {y <- x^2; y+2}, x^y))  # 3
    <BLANKLINE>
         ## from example(warpbreaks)
         require(stats)
    <BLANKLINE>
         fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)
         length(fm1$call)      # 3, lm() and two arguments.
         length(formula(fm1))  # 3, ~ lhs rhs
**********************************************************************
3 items had failures:
   1 of   2 in sage.interfaces.r.R.help
   1 of   3 in sage.interfaces.r.RFunction._instancedoc_
   1 of   4 in sage.interfaces.r.RFunctionElement._instancedoc_
    [260 tests, 3 failures, 2.63 s]
----------------------------------------------------------------------
sage -t --long --warn-long 47.0 src/sage/interfaces/r.py  # 3 doctests failed
```

Component: **doctest coverage**

_Issue created by migration from https://trac.sagemath.org/ticket/24920_





---

archive/issue_events_346362.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-03-06T16:33:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24920#event-346362"
}
```



---

archive/issue_events_346363.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-03-06T16:33:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24920#event-346363"
}
```



---

archive/issue_events_346364.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-03-06T16:33:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24920#event-346364"
}
```



---

archive/issue_events_346365.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-03-06T16:33:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24920#event-346365"
}
```



---

archive/issue_comments_379234.json:
```json
{
    "body": "Which doctests fail and precisely how do they fail?",
    "created_at": "2018-03-06T19:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379234",
    "user": "https://github.com/jdemeyer"
}
```

Which doctests fail and precisely how do they fail?



---

archive/issue_comments_379235.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,311 @@\n `    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)`\n which makes them fail.\n \n+```\n+sage -t --long --warn-long 47.0 src/sage/interfaces/r.py\n+**********************************************************************\n+File \"src/sage/interfaces/r.py\", line 790, in sage.interfaces.r.R.help\n+Failed example:\n+    r.help('c')\n+Expected:\n+    c                     package:base                     R Documentation\n+    ...\n+Got:\n+    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n+    c                     package:base                     R Documentation\n+    <BLANKLINE>\n+    _\ufffdC_\ufffdo_\ufffdm_\ufffdb_\ufffdi_\ufffdn_\ufffde _\ufffdV_\ufffda_\ufffdl_\ufffdu_\ufffde_\ufffds _\ufffdi_\ufffdn_\ufffdt_\ufffdo _\ufffda _\ufffdV_\ufffde_\ufffdc_\ufffdt_\ufffdo_\ufffdr _\ufffdo_\ufffdr _\ufffdL_\ufffdi_\ufffds_\ufffdt\n+    <BLANKLINE>\n+    _\ufffdD_\ufffde_\ufffds_\ufffdc_\ufffdr_\ufffdi_\ufffdp_\ufffdt_\ufffdi_\ufffdo_\ufffdn:\n+    <BLANKLINE>\n+         This is a generic function which combines its arguments.\n+    <BLANKLINE>\n+         The default method combines its arguments to form a vector.  All\n+         arguments are coerced to a common type which is the type of the\n+         returned value, and all attributes except names are removed.\n+    <BLANKLINE>\n+    _\ufffdU_\ufffds_\ufffda_\ufffdg_\ufffde:\n+    <BLANKLINE>\n+         ## S3 Generic function\n+         c(...)\n+    <BLANKLINE>\n+         ## Default S3 method:\n+         c(..., recursive = FALSE, use.names = TRUE)\n+    <BLANKLINE>\n+    _\ufffdA_\ufffdr_\ufffdg_\ufffdu_\ufffdm_\ufffde_\ufffdn_\ufffdt_\ufffds:\n+    <BLANKLINE>\n+         ...: objects to be concatenated.\n+    <BLANKLINE>\n+    recursive: logical.  If \u2018recursive = TRUE\u2019, the function recursively\n+              descends through lists (and pairlists) combining all their\n+              elements into a vector.\n+    <BLANKLINE>\n+    use.names: logical indicating if \u2018names\u2019 should be preserved.\n+    <BLANKLINE>\n+    _\ufffdD_\ufffde_\ufffdt_\ufffda_\ufffdi_\ufffdl_\ufffds:\n+    <BLANKLINE>\n+         The output type is determined from the highest type of the\n+         components in the hierarchy NULL < raw < logical < integer <\n+         double < complex < character < list < expression.  Pairlists are\n+         treated as lists, whereas non-vector components (such names and\n+         calls) are treated as one-element lists which cannot be unlisted\n+         even if \u2018recursive = TRUE\u2019.\n+    <BLANKLINE>\n+         Note that \u2018factor\u2019s are treated only via their internal \u2018integer\u2019\n+         codes; one proposal has been to use\n+    <BLANKLINE>\n+            c.factor <- function(..., recursive=TRUE) unlist(list(...), recursive=recursive)\n+    <BLANKLINE>\n+         if factor concatenation by \u2018c()\u2019 should give a \u2018factor\u2019.\n+    <BLANKLINE>\n+         \u2018c\u2019 is sometimes used for its side effect of removing attributes\n+         except names, for example to turn an array into a vector.\n+         \u2018as.vector\u2019 is a more intuitive way to do this, but also drops\n+         names.  Note that methods other than the default are not required\n+         to do this (and they will almost certainly preserve a class\n+         attribute).\n+    <BLANKLINE>\n+         This is a primitive function.\n+    <BLANKLINE>\n+    _\ufffdV_\ufffda_\ufffdl_\ufffdu_\ufffde:\n+    <BLANKLINE>\n+         \u2018NULL\u2019 or an expression or a vector of an appropriate mode.  (With\n+         no arguments the value is \u2018NULL\u2019.)\n+    <BLANKLINE>\n+    _\ufffdS_\ufffd4 _\ufffdm_\ufffde_\ufffdt_\ufffdh_\ufffdo_\ufffdd_\ufffds:\n+    <BLANKLINE>\n+         This function is S4 generic, but with argument list \u2018(x, ...)\u2019.\n+    <BLANKLINE>\n+    _\ufffdR_\ufffde_\ufffdf_\ufffde_\ufffdr_\ufffde_\ufffdn_\ufffdc_\ufffde_\ufffds:\n+    <BLANKLINE>\n+         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n+         Language_.  Wadsworth & Brooks/Cole.\n+    <BLANKLINE>\n+    _\ufffdS_\ufffde_\ufffde _\ufffdA_\ufffdl_\ufffds_\ufffdo:\n+    <BLANKLINE>\n+         \u2018unlist\u2019 and \u2018as.vector\u2019 to produce attribute-free vectors.\n+    <BLANKLINE>\n+    _\ufffdE_\ufffdx_\ufffda_\ufffdm_\ufffdp_\ufffdl_\ufffde_\ufffds:\n+    <BLANKLINE>\n+         c(1,7:9)\n+         c(1:5, 10.5, \"next\")\n+    <BLANKLINE>\n+         ## uses with a single argument to drop attributes\n+         x <- 1:4\n+         names(x) <- letters[1:4]\n+         x\n+         c(x)          # has names\n+         as.vector(x)  # no names\n+         dim(x) <- c(2,2)\n+         x\n+         c(x)\n+         as.vector(x)\n+    <BLANKLINE>\n+         ## append to a list:\n+         ll <- list(A = 1, c = \"C\")\n+         ## do *not* use\n+         c(ll, d = 1:3) # which is == c(ll, as.list(c(d = 1:3))\n+         ## but rather\n+         c(ll, d = list(1:3))  # c() combining two lists\n+    <BLANKLINE>\n+         c(list(A = c(B = 1)), recursive = TRUE)\n+    <BLANKLINE>\n+         c(options(), recursive = TRUE)\n+         c(list(A = c(B = 1, C = 2), B = c(E = 7)), recursive = TRUE)\n+**********************************************************************\n+File \"src/sage/interfaces/r.py\", line 1956, in sage.interfaces.r.RFunctionElement._instancedoc_\n+Failed example:\n+    print(length.__doc__)\n+Expected:\n+    length                 package:base                 R Documentation\n+    ...\n+    <BLANKLINE>\n+Got:\n+    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n+    length                  package:base                   R Documentation\n+    <BLANKLINE>\n+    _\ufffdL_\ufffde_\ufffdn_\ufffdg_\ufffdt_\ufffdh _\ufffdo_\ufffdf _\ufffda_\ufffdn _\ufffdO_\ufffdb_\ufffdj_\ufffde_\ufffdc_\ufffdt\n+    <BLANKLINE>\n+    _\ufffdD_\ufffde_\ufffds_\ufffdc_\ufffdr_\ufffdi_\ufffdp_\ufffdt_\ufffdi_\ufffdo_\ufffdn:\n+    <BLANKLINE>\n+         Get or set the length of vectors (including lists) and factors,\n+         and of any other R object for which a method has been defined.\n+    <BLANKLINE>\n+    _\ufffdU_\ufffds_\ufffda_\ufffdg_\ufffde:\n+    <BLANKLINE>\n+         length(x)\n+         length(x) <- value\n+    <BLANKLINE>\n+    _\ufffdA_\ufffdr_\ufffdg_\ufffdu_\ufffdm_\ufffde_\ufffdn_\ufffdt_\ufffds:\n+    <BLANKLINE>\n+           x: an R object.  For replacement, a vector or factor.\n+    <BLANKLINE>\n+       value: a non-negative integer or double (which will be rounded\n+              down).\n+    <BLANKLINE>\n+    _\ufffdD_\ufffde_\ufffdt_\ufffda_\ufffdi_\ufffdl_\ufffds:\n+    <BLANKLINE>\n+         Both functions are generic: you can write methods to handle\n+         specific classes of objects, see InternalMethods.  \u2018length<-\u2019 has\n+         a \u2018\"factor\"\u2019 method.\n+    <BLANKLINE>\n+         The replacement form can be used to reset the length of a vector.\n+         If a vector is shortened, extra values are discarded and when a\n+         vector is lengthened, it is padded out to its new length with\n+         \u2018NA\u2019s (\u2018nul\u2019 for raw vectors).\n+    <BLANKLINE>\n+         Both are primitive functions.\n+    <BLANKLINE>\n+    _\ufffdV_\ufffda_\ufffdl_\ufffdu_\ufffde:\n+    <BLANKLINE>\n+         The default method for \u2018length\u2019 currently returns a non-negative\n+         \u2018integer\u2019 of length 1, except for vectors of more than 2^31 - 1\n+         elements, when it returns a double.\n+    <BLANKLINE>\n+         For vectors (including lists) and factors the length is the number\n+         of elements.  For an environment it is the number of objects in\n+         the environment, and \u2018NULL\u2019 has length 0.  For expressions and\n+         pairlists (including language objects and dotlists) it is the\n+         length of the pairlist chain.  All other objects (including\n+         functions) have length one: note that for functions this differs\n+         from S.\n+    <BLANKLINE>\n+         The replacement form removes all the attributes of \u2018x\u2019 except its\n+         names, which are adjusted (and if necessary extended by \u2018\"\"\u2019).\n+    <BLANKLINE>\n+    _\ufffdW_\ufffda_\ufffdr_\ufffdn_\ufffdi_\ufffdn_\ufffdg:\n+    <BLANKLINE>\n+         Package authors have written methods that return a result of\n+         length other than one (\u2018Formula\u2019) and that return a vector of type\n+         \u2018double\u2019 (\u2018Matrix\u2019), even with non-integer values (earlier\n+         versions of \u2018sets\u2019). Where a single double value is returned that\n+         can be represented as an integer it is returned as a length-one\n+         integer vector.\n+    <BLANKLINE>\n+    _\ufffdR_\ufffde_\ufffdf_\ufffde_\ufffdr_\ufffde_\ufffdn_\ufffdc_\ufffde_\ufffds:\n+    <BLANKLINE>\n+         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n+         Language_.  Wadsworth & Brooks/Cole.\n+    <BLANKLINE>\n+    _\ufffdS_\ufffde_\ufffde _\ufffdA_\ufffdl_\ufffds_\ufffdo:\n+    <BLANKLINE>\n+         \u2018nchar\u2019 for counting the number of characters in character\n+         vectors, \u2018lengths\u2019 for getting the length of every element in a\n+         list.\n+    <BLANKLINE>\n+    _\ufffdE_\ufffdx_\ufffda_\ufffdm_\ufffdp_\ufffdl_\ufffde_\ufffds:\n+    <BLANKLINE>\n+         length(diag(4))  # = 16 (4 x 4)\n+         length(options())  # 12 or more\n+         length(y ~ x1 + x2 + x3)  # 3\n+         length(expression(x, {y <- x^2; y+2}, x^y))  # 3\n+    <BLANKLINE>\n+         ## from example(warpbreaks)\n+         require(stats)\n+    <BLANKLINE>\n+         fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)\n+         length(fm1$call)      # 3, lm() and two arguments.\n+         length(formula(fm1))  # 3, ~ lhs rhs\n+**********************************************************************\n+File \"src/sage/interfaces/r.py\", line 2046, in sage.interfaces.r.RFunction._instancedoc_\n+Failed example:\n+    print(length.__doc__)\n+Expected:\n+    length                 package:base                 R Documentation\n+    ...\n+    <BLANKLINE>\n+Got:\n+    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n+    length                  package:base                   R Documentation\n+    <BLANKLINE>\n+    _\ufffdL_\ufffde_\ufffdn_\ufffdg_\ufffdt_\ufffdh _\ufffdo_\ufffdf _\ufffda_\ufffdn _\ufffdO_\ufffdb_\ufffdj_\ufffde_\ufffdc_\ufffdt\n+    <BLANKLINE>\n+    _\ufffdD_\ufffde_\ufffds_\ufffdc_\ufffdr_\ufffdi_\ufffdp_\ufffdt_\ufffdi_\ufffdo_\ufffdn:\n+    <BLANKLINE>\n+         Get or set the length of vectors (including lists) and factors,\n+         and of any other R object for which a method has been defined.\n+    <BLANKLINE>\n+    _\ufffdU_\ufffds_\ufffda_\ufffdg_\ufffde:\n+    <BLANKLINE>\n+         length(x)\n+         length(x) <- value\n+    <BLANKLINE>\n+    _\ufffdA_\ufffdr_\ufffdg_\ufffdu_\ufffdm_\ufffde_\ufffdn_\ufffdt_\ufffds:\n+    <BLANKLINE>\n+           x: an R object.  For replacement, a vector or factor.\n+    <BLANKLINE>\n+       value: a non-negative integer or double (which will be rounded\n+              down).\n+    <BLANKLINE>\n+    _\ufffdD_\ufffde_\ufffdt_\ufffda_\ufffdi_\ufffdl_\ufffds:\n+    <BLANKLINE>\n+         Both functions are generic: you can write methods to handle\n+         specific classes of objects, see InternalMethods.  \u2018length<-\u2019 has\n+         a \u2018\"factor\"\u2019 method.\n+    <BLANKLINE>\n+         The replacement form can be used to reset the length of a vector.\n+         If a vector is shortened, extra values are discarded and when a\n+         vector is lengthened, it is padded out to its new length with\n+         \u2018NA\u2019s (\u2018nul\u2019 for raw vectors).\n+    <BLANKLINE>\n+         Both are primitive functions.\n+    <BLANKLINE>\n+    _\ufffdV_\ufffda_\ufffdl_\ufffdu_\ufffde:\n+    <BLANKLINE>\n+         The default method for \u2018length\u2019 currently returns a non-negative\n+         \u2018integer\u2019 of length 1, except for vectors of more than 2^31 - 1\n+         elements, when it returns a double.\n+    <BLANKLINE>\n+         For vectors (including lists) and factors the length is the number\n+         of elements.  For an environment it is the number of objects in\n+         the environment, and \u2018NULL\u2019 has length 0.  For expressions and\n+         pairlists (including language objects and dotlists) it is the\n+         length of the pairlist chain.  All other objects (including\n+         functions) have length one: note that for functions this differs\n+         from S.\n+    <BLANKLINE>\n+         The replacement form removes all the attributes of \u2018x\u2019 except its\n+         names, which are adjusted (and if necessary extended by \u2018\"\"\u2019).\n+    <BLANKLINE>\n+    _\ufffdW_\ufffda_\ufffdr_\ufffdn_\ufffdi_\ufffdn_\ufffdg:\n+    <BLANKLINE>\n+         Package authors have written methods that return a result of\n+         length other than one (\u2018Formula\u2019) and that return a vector of type\n+         \u2018double\u2019 (\u2018Matrix\u2019), even with non-integer values (earlier\n+         versions of \u2018sets\u2019). Where a single double value is returned that\n+         can be represented as an integer it is returned as a length-one\n+         integer vector.\n+    <BLANKLINE>\n+    _\ufffdR_\ufffde_\ufffdf_\ufffde_\ufffdr_\ufffde_\ufffdn_\ufffdc_\ufffde_\ufffds:\n+    <BLANKLINE>\n+         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n+         Language_.  Wadsworth & Brooks/Cole.\n+    <BLANKLINE>\n+    _\ufffdS_\ufffde_\ufffde _\ufffdA_\ufffdl_\ufffds_\ufffdo:\n+    <BLANKLINE>\n+         \u2018nchar\u2019 for counting the number of characters in character\n+         vectors, \u2018lengths\u2019 for getting the length of every element in a\n+         list.\n+    <BLANKLINE>\n+    _\ufffdE_\ufffdx_\ufffda_\ufffdm_\ufffdp_\ufffdl_\ufffde_\ufffds:\n+    <BLANKLINE>\n+         length(diag(4))  # = 16 (4 x 4)\n+         length(options())  # 12 or more\n+         length(y ~ x1 + x2 + x3)  # 3\n+         length(expression(x, {y <- x^2; y+2}, x^y))  # 3\n+    <BLANKLINE>\n+         ## from example(warpbreaks)\n+         require(stats)\n+    <BLANKLINE>\n+         fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)\n+         length(fm1$call)      # 3, lm() and two arguments.\n+         length(formula(fm1))  # 3, ~ lhs rhs\n+**********************************************************************\n+3 items had failures:\n+   1 of   2 in sage.interfaces.r.R.help\n+   1 of   3 in sage.interfaces.r.RFunction._instancedoc_\n+   1 of   4 in sage.interfaces.r.RFunctionElement._instancedoc_\n+    [260 tests, 3 failures, 2.63 s]\n+----------------------------------------------------------------------\n+sage -t --long --warn-long 47.0 src/sage/interfaces/r.py  # 3 doctests failed\n+```\n``````\n",
    "created_at": "2018-03-07T07:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379235",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,311 @@
 `    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)`
 which makes them fail.
 
+```
+sage -t --long --warn-long 47.0 src/sage/interfaces/r.py
+**********************************************************************
+File "src/sage/interfaces/r.py", line 790, in sage.interfaces.r.R.help
+Failed example:
+    r.help('c')
+Expected:
+    c                     package:base                     R Documentation
+    ...
+Got:
+    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
+    c                     package:base                     R Documentation
+    <BLANKLINE>
+    _�C_�o_�m_�b_�i_�n_�e _�V_�a_�l_�u_�e_�s _�i_�n_�t_�o _�a _�V_�e_�c_�t_�o_�r _�o_�r _�L_�i_�s_�t
+    <BLANKLINE>
+    _�D_�e_�s_�c_�r_�i_�p_�t_�i_�o_�n:
+    <BLANKLINE>
+         This is a generic function which combines its arguments.
+    <BLANKLINE>
+         The default method combines its arguments to form a vector.  All
+         arguments are coerced to a common type which is the type of the
+         returned value, and all attributes except names are removed.
+    <BLANKLINE>
+    _�U_�s_�a_�g_�e:
+    <BLANKLINE>
+         ## S3 Generic function
+         c(...)
+    <BLANKLINE>
+         ## Default S3 method:
+         c(..., recursive = FALSE, use.names = TRUE)
+    <BLANKLINE>
+    _�A_�r_�g_�u_�m_�e_�n_�t_�s:
+    <BLANKLINE>
+         ...: objects to be concatenated.
+    <BLANKLINE>
+    recursive: logical.  If ‘recursive = TRUE’, the function recursively
+              descends through lists (and pairlists) combining all their
+              elements into a vector.
+    <BLANKLINE>
+    use.names: logical indicating if ‘names’ should be preserved.
+    <BLANKLINE>
+    _�D_�e_�t_�a_�i_�l_�s:
+    <BLANKLINE>
+         The output type is determined from the highest type of the
+         components in the hierarchy NULL < raw < logical < integer <
+         double < complex < character < list < expression.  Pairlists are
+         treated as lists, whereas non-vector components (such names and
+         calls) are treated as one-element lists which cannot be unlisted
+         even if ‘recursive = TRUE’.
+    <BLANKLINE>
+         Note that ‘factor’s are treated only via their internal ‘integer’
+         codes; one proposal has been to use
+    <BLANKLINE>
+            c.factor <- function(..., recursive=TRUE) unlist(list(...), recursive=recursive)
+    <BLANKLINE>
+         if factor concatenation by ‘c()’ should give a ‘factor’.
+    <BLANKLINE>
+         ‘c’ is sometimes used for its side effect of removing attributes
+         except names, for example to turn an array into a vector.
+         ‘as.vector’ is a more intuitive way to do this, but also drops
+         names.  Note that methods other than the default are not required
+         to do this (and they will almost certainly preserve a class
+         attribute).
+    <BLANKLINE>
+         This is a primitive function.
+    <BLANKLINE>
+    _�V_�a_�l_�u_�e:
+    <BLANKLINE>
+         ‘NULL’ or an expression or a vector of an appropriate mode.  (With
+         no arguments the value is ‘NULL’.)
+    <BLANKLINE>
+    _�S_�4 _�m_�e_�t_�h_�o_�d_�s:
+    <BLANKLINE>
+         This function is S4 generic, but with argument list ‘(x, ...)’.
+    <BLANKLINE>
+    _�R_�e_�f_�e_�r_�e_�n_�c_�e_�s:
+    <BLANKLINE>
+         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
+         Language_.  Wadsworth & Brooks/Cole.
+    <BLANKLINE>
+    _�S_�e_�e _�A_�l_�s_�o:
+    <BLANKLINE>
+         ‘unlist’ and ‘as.vector’ to produce attribute-free vectors.
+    <BLANKLINE>
+    _�E_�x_�a_�m_�p_�l_�e_�s:
+    <BLANKLINE>
+         c(1,7:9)
+         c(1:5, 10.5, "next")
+    <BLANKLINE>
+         ## uses with a single argument to drop attributes
+         x <- 1:4
+         names(x) <- letters[1:4]
+         x
+         c(x)          # has names
+         as.vector(x)  # no names
+         dim(x) <- c(2,2)
+         x
+         c(x)
+         as.vector(x)
+    <BLANKLINE>
+         ## append to a list:
+         ll <- list(A = 1, c = "C")
+         ## do *not* use
+         c(ll, d = 1:3) # which is == c(ll, as.list(c(d = 1:3))
+         ## but rather
+         c(ll, d = list(1:3))  # c() combining two lists
+    <BLANKLINE>
+         c(list(A = c(B = 1)), recursive = TRUE)
+    <BLANKLINE>
+         c(options(), recursive = TRUE)
+         c(list(A = c(B = 1, C = 2), B = c(E = 7)), recursive = TRUE)
+**********************************************************************
+File "src/sage/interfaces/r.py", line 1956, in sage.interfaces.r.RFunctionElement._instancedoc_
+Failed example:
+    print(length.__doc__)
+Expected:
+    length                 package:base                 R Documentation
+    ...
+    <BLANKLINE>
+Got:
+    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
+    length                  package:base                   R Documentation
+    <BLANKLINE>
+    _�L_�e_�n_�g_�t_�h _�o_�f _�a_�n _�O_�b_�j_�e_�c_�t
+    <BLANKLINE>
+    _�D_�e_�s_�c_�r_�i_�p_�t_�i_�o_�n:
+    <BLANKLINE>
+         Get or set the length of vectors (including lists) and factors,
+         and of any other R object for which a method has been defined.
+    <BLANKLINE>
+    _�U_�s_�a_�g_�e:
+    <BLANKLINE>
+         length(x)
+         length(x) <- value
+    <BLANKLINE>
+    _�A_�r_�g_�u_�m_�e_�n_�t_�s:
+    <BLANKLINE>
+           x: an R object.  For replacement, a vector or factor.
+    <BLANKLINE>
+       value: a non-negative integer or double (which will be rounded
+              down).
+    <BLANKLINE>
+    _�D_�e_�t_�a_�i_�l_�s:
+    <BLANKLINE>
+         Both functions are generic: you can write methods to handle
+         specific classes of objects, see InternalMethods.  ‘length<-’ has
+         a ‘"factor"’ method.
+    <BLANKLINE>
+         The replacement form can be used to reset the length of a vector.
+         If a vector is shortened, extra values are discarded and when a
+         vector is lengthened, it is padded out to its new length with
+         ‘NA’s (‘nul’ for raw vectors).
+    <BLANKLINE>
+         Both are primitive functions.
+    <BLANKLINE>
+    _�V_�a_�l_�u_�e:
+    <BLANKLINE>
+         The default method for ‘length’ currently returns a non-negative
+         ‘integer’ of length 1, except for vectors of more than 2^31 - 1
+         elements, when it returns a double.
+    <BLANKLINE>
+         For vectors (including lists) and factors the length is the number
+         of elements.  For an environment it is the number of objects in
+         the environment, and ‘NULL’ has length 0.  For expressions and
+         pairlists (including language objects and dotlists) it is the
+         length of the pairlist chain.  All other objects (including
+         functions) have length one: note that for functions this differs
+         from S.
+    <BLANKLINE>
+         The replacement form removes all the attributes of ‘x’ except its
+         names, which are adjusted (and if necessary extended by ‘""’).
+    <BLANKLINE>
+    _�W_�a_�r_�n_�i_�n_�g:
+    <BLANKLINE>
+         Package authors have written methods that return a result of
+         length other than one (‘Formula’) and that return a vector of type
+         ‘double’ (‘Matrix’), even with non-integer values (earlier
+         versions of ‘sets’). Where a single double value is returned that
+         can be represented as an integer it is returned as a length-one
+         integer vector.
+    <BLANKLINE>
+    _�R_�e_�f_�e_�r_�e_�n_�c_�e_�s:
+    <BLANKLINE>
+         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
+         Language_.  Wadsworth & Brooks/Cole.
+    <BLANKLINE>
+    _�S_�e_�e _�A_�l_�s_�o:
+    <BLANKLINE>
+         ‘nchar’ for counting the number of characters in character
+         vectors, ‘lengths’ for getting the length of every element in a
+         list.
+    <BLANKLINE>
+    _�E_�x_�a_�m_�p_�l_�e_�s:
+    <BLANKLINE>
+         length(diag(4))  # = 16 (4 x 4)
+         length(options())  # 12 or more
+         length(y ~ x1 + x2 + x3)  # 3
+         length(expression(x, {y <- x^2; y+2}, x^y))  # 3
+    <BLANKLINE>
+         ## from example(warpbreaks)
+         require(stats)
+    <BLANKLINE>
+         fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)
+         length(fm1$call)      # 3, lm() and two arguments.
+         length(formula(fm1))  # 3, ~ lhs rhs
+**********************************************************************
+File "src/sage/interfaces/r.py", line 2046, in sage.interfaces.r.RFunction._instancedoc_
+Failed example:
+    print(length.__doc__)
+Expected:
+    length                 package:base                 R Documentation
+    ...
+    <BLANKLINE>
+Got:
+    sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
+    length                  package:base                   R Documentation
+    <BLANKLINE>
+    _�L_�e_�n_�g_�t_�h _�o_�f _�a_�n _�O_�b_�j_�e_�c_�t
+    <BLANKLINE>
+    _�D_�e_�s_�c_�r_�i_�p_�t_�i_�o_�n:
+    <BLANKLINE>
+         Get or set the length of vectors (including lists) and factors,
+         and of any other R object for which a method has been defined.
+    <BLANKLINE>
+    _�U_�s_�a_�g_�e:
+    <BLANKLINE>
+         length(x)
+         length(x) <- value
+    <BLANKLINE>
+    _�A_�r_�g_�u_�m_�e_�n_�t_�s:
+    <BLANKLINE>
+           x: an R object.  For replacement, a vector or factor.
+    <BLANKLINE>
+       value: a non-negative integer or double (which will be rounded
+              down).
+    <BLANKLINE>
+    _�D_�e_�t_�a_�i_�l_�s:
+    <BLANKLINE>
+         Both functions are generic: you can write methods to handle
+         specific classes of objects, see InternalMethods.  ‘length<-’ has
+         a ‘"factor"’ method.
+    <BLANKLINE>
+         The replacement form can be used to reset the length of a vector.
+         If a vector is shortened, extra values are discarded and when a
+         vector is lengthened, it is padded out to its new length with
+         ‘NA’s (‘nul’ for raw vectors).
+    <BLANKLINE>
+         Both are primitive functions.
+    <BLANKLINE>
+    _�V_�a_�l_�u_�e:
+    <BLANKLINE>
+         The default method for ‘length’ currently returns a non-negative
+         ‘integer’ of length 1, except for vectors of more than 2^31 - 1
+         elements, when it returns a double.
+    <BLANKLINE>
+         For vectors (including lists) and factors the length is the number
+         of elements.  For an environment it is the number of objects in
+         the environment, and ‘NULL’ has length 0.  For expressions and
+         pairlists (including language objects and dotlists) it is the
+         length of the pairlist chain.  All other objects (including
+         functions) have length one: note that for functions this differs
+         from S.
+    <BLANKLINE>
+         The replacement form removes all the attributes of ‘x’ except its
+         names, which are adjusted (and if necessary extended by ‘""’).
+    <BLANKLINE>
+    _�W_�a_�r_�n_�i_�n_�g:
+    <BLANKLINE>
+         Package authors have written methods that return a result of
+         length other than one (‘Formula’) and that return a vector of type
+         ‘double’ (‘Matrix’), even with non-integer values (earlier
+         versions of ‘sets’). Where a single double value is returned that
+         can be represented as an integer it is returned as a length-one
+         integer vector.
+    <BLANKLINE>
+    _�R_�e_�f_�e_�r_�e_�n_�c_�e_�s:
+    <BLANKLINE>
+         Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
+         Language_.  Wadsworth & Brooks/Cole.
+    <BLANKLINE>
+    _�S_�e_�e _�A_�l_�s_�o:
+    <BLANKLINE>
+         ‘nchar’ for counting the number of characters in character
+         vectors, ‘lengths’ for getting the length of every element in a
+         list.
+    <BLANKLINE>
+    _�E_�x_�a_�m_�p_�l_�e_�s:
+    <BLANKLINE>
+         length(diag(4))  # = 16 (4 x 4)
+         length(options())  # 12 or more
+         length(y ~ x1 + x2 + x3)  # 3
+         length(expression(x, {y <- x^2; y+2}, x^y))  # 3
+    <BLANKLINE>
+         ## from example(warpbreaks)
+         require(stats)
+    <BLANKLINE>
+         fm1 <- lm(breaks ~ wool * tension, data = warpbreaks)
+         length(fm1$call)      # 3, lm() and two arguments.
+         length(formula(fm1))  # 3, ~ lhs rhs
+**********************************************************************
+3 items had failures:
+   1 of   2 in sage.interfaces.r.R.help
+   1 of   3 in sage.interfaces.r.RFunction._instancedoc_
+   1 of   4 in sage.interfaces.r.RFunctionElement._instancedoc_
+    [260 tests, 3 failures, 2.63 s]
+----------------------------------------------------------------------
+sage -t --long --warn-long 47.0 src/sage/interfaces/r.py  # 3 doctests failed
+```
``````




---

archive/issue_comments_379236.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,9 +17,9 @@\n     sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n     c                     package:base                     R Documentation\n     <BLANKLINE>\n-    _\ufffdC_\ufffdo_\ufffdm_\ufffdb_\ufffdi_\ufffdn_\ufffde _\ufffdV_\ufffda_\ufffdl_\ufffdu_\ufffde_\ufffds _\ufffdi_\ufffdn_\ufffdt_\ufffdo _\ufffda _\ufffdV_\ufffde_\ufffdc_\ufffdt_\ufffdo_\ufffdr _\ufffdo_\ufffdr _\ufffdL_\ufffdi_\ufffds_\ufffdt\n-    <BLANKLINE>\n-    _\ufffdD_\ufffde_\ufffds_\ufffdc_\ufffdr_\ufffdi_\ufffdp_\ufffdt_\ufffdi_\ufffdo_\ufffdn:\n+    _C_o_m_b_i_n_e _V_a_l_u_e_s _i_n_t_o _a _V_e_c_t_o_r _o_r _L_i_s_t\n+    <BLANKLINE>\n+    _D_e_s_c_r_i_p_t_i_o_n:\n     <BLANKLINE>\n          This is a generic function which combines its arguments.\n     <BLANKLINE>\n@@ -27,7 +27,7 @@\n          arguments are coerced to a common type which is the type of the\n          returned value, and all attributes except names are removed.\n     <BLANKLINE>\n-    _\ufffdU_\ufffds_\ufffda_\ufffdg_\ufffde:\n+    _U_s_a_g_e:\n     <BLANKLINE>\n          ## S3 Generic function\n          c(...)\n@@ -35,7 +35,7 @@\n          ## Default S3 method:\n          c(..., recursive = FALSE, use.names = TRUE)\n     <BLANKLINE>\n-    _\ufffdA_\ufffdr_\ufffdg_\ufffdu_\ufffdm_\ufffde_\ufffdn_\ufffdt_\ufffds:\n+    _A_r_g_u_m_e_n_t_s:\n     <BLANKLINE>\n          ...: objects to be concatenated.\n     <BLANKLINE>\n@@ -45,7 +45,7 @@\n     <BLANKLINE>\n     use.names: logical indicating if \u2018names\u2019 should be preserved.\n     <BLANKLINE>\n-    _\ufffdD_\ufffde_\ufffdt_\ufffda_\ufffdi_\ufffdl_\ufffds:\n+    _D_e_t_a_i_l_s:\n     <BLANKLINE>\n          The output type is determined from the highest type of the\n          components in the hierarchy NULL < raw < logical < integer <\n@@ -70,25 +70,25 @@\n     <BLANKLINE>\n          This is a primitive function.\n     <BLANKLINE>\n-    _\ufffdV_\ufffda_\ufffdl_\ufffdu_\ufffde:\n+    _V_a_l_u_e:\n     <BLANKLINE>\n          \u2018NULL\u2019 or an expression or a vector of an appropriate mode.  (With\n          no arguments the value is \u2018NULL\u2019.)\n     <BLANKLINE>\n-    _\ufffdS_\ufffd4 _\ufffdm_\ufffde_\ufffdt_\ufffdh_\ufffdo_\ufffdd_\ufffds:\n+    _S_4 _m_e_t_h_o_d_s:\n     <BLANKLINE>\n          This function is S4 generic, but with argument list \u2018(x, ...)\u2019.\n     <BLANKLINE>\n-    _\ufffdR_\ufffde_\ufffdf_\ufffde_\ufffdr_\ufffde_\ufffdn_\ufffdc_\ufffde_\ufffds:\n+    _R_e_f_e_r_e_n_c_e_s:\n     <BLANKLINE>\n          Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n          Language_.  Wadsworth & Brooks/Cole.\n     <BLANKLINE>\n-    _\ufffdS_\ufffde_\ufffde _\ufffdA_\ufffdl_\ufffds_\ufffdo:\n+    _S_e_e _A_l_s_o:\n     <BLANKLINE>\n          \u2018unlist\u2019 and \u2018as.vector\u2019 to produce attribute-free vectors.\n     <BLANKLINE>\n-    _\ufffdE_\ufffdx_\ufffda_\ufffdm_\ufffdp_\ufffdl_\ufffde_\ufffds:\n+    _E_x_a_m_p_l_e_s:\n     <BLANKLINE>\n          c(1,7:9)\n          c(1:5, 10.5, \"next\")\n@@ -127,26 +127,26 @@\n     sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n     length                  package:base                   R Documentation\n     <BLANKLINE>\n-    _\ufffdL_\ufffde_\ufffdn_\ufffdg_\ufffdt_\ufffdh _\ufffdo_\ufffdf _\ufffda_\ufffdn _\ufffdO_\ufffdb_\ufffdj_\ufffde_\ufffdc_\ufffdt\n-    <BLANKLINE>\n-    _\ufffdD_\ufffde_\ufffds_\ufffdc_\ufffdr_\ufffdi_\ufffdp_\ufffdt_\ufffdi_\ufffdo_\ufffdn:\n+    _L_e_n_g_t_h _o_f _a_n _O_b_j_e_c_t\n+    <BLANKLINE>\n+    _D_e_s_c_r_i_p_t_i_o_n:\n     <BLANKLINE>\n          Get or set the length of vectors (including lists) and factors,\n          and of any other R object for which a method has been defined.\n     <BLANKLINE>\n-    _\ufffdU_\ufffds_\ufffda_\ufffdg_\ufffde:\n+    _U_s_a_g_e:\n     <BLANKLINE>\n          length(x)\n          length(x) <- value\n     <BLANKLINE>\n-    _\ufffdA_\ufffdr_\ufffdg_\ufffdu_\ufffdm_\ufffde_\ufffdn_\ufffdt_\ufffds:\n+    _A_r_g_u_m_e_n_t_s:\n     <BLANKLINE>\n            x: an R object.  For replacement, a vector or factor.\n     <BLANKLINE>\n        value: a non-negative integer or double (which will be rounded\n               down).\n     <BLANKLINE>\n-    _\ufffdD_\ufffde_\ufffdt_\ufffda_\ufffdi_\ufffdl_\ufffds:\n+    _D_e_t_a_i_l_s:\n     <BLANKLINE>\n          Both functions are generic: you can write methods to handle\n          specific classes of objects, see InternalMethods.  \u2018length<-\u2019 has\n@@ -159,7 +159,7 @@\n     <BLANKLINE>\n          Both are primitive functions.\n     <BLANKLINE>\n-    _\ufffdV_\ufffda_\ufffdl_\ufffdu_\ufffde:\n+    _V_a_l_u_e:\n     <BLANKLINE>\n          The default method for \u2018length\u2019 currently returns a non-negative\n          \u2018integer\u2019 of length 1, except for vectors of more than 2^31 - 1\n@@ -176,7 +176,7 @@\n          The replacement form removes all the attributes of \u2018x\u2019 except its\n          names, which are adjusted (and if necessary extended by \u2018\"\"\u2019).\n     <BLANKLINE>\n-    _\ufffdW_\ufffda_\ufffdr_\ufffdn_\ufffdi_\ufffdn_\ufffdg:\n+    _W_a_r_n_i_n_g:\n     <BLANKLINE>\n          Package authors have written methods that return a result of\n          length other than one (\u2018Formula\u2019) and that return a vector of type\n@@ -185,18 +185,18 @@\n          can be represented as an integer it is returned as a length-one\n          integer vector.\n     <BLANKLINE>\n-    _\ufffdR_\ufffde_\ufffdf_\ufffde_\ufffdr_\ufffde_\ufffdn_\ufffdc_\ufffde_\ufffds:\n+    _R_e_f_e_r_e_n_c_e_s:\n     <BLANKLINE>\n          Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n          Language_.  Wadsworth & Brooks/Cole.\n     <BLANKLINE>\n-    _\ufffdS_\ufffde_\ufffde _\ufffdA_\ufffdl_\ufffds_\ufffdo:\n+    _S_e_e _A_l_s_o:\n     <BLANKLINE>\n          \u2018nchar\u2019 for counting the number of characters in character\n          vectors, \u2018lengths\u2019 for getting the length of every element in a\n          list.\n     <BLANKLINE>\n-    _\ufffdE_\ufffdx_\ufffda_\ufffdm_\ufffdp_\ufffdl_\ufffde_\ufffds:\n+    _E_x_a_m_p_l_e_s:\n     <BLANKLINE>\n          length(diag(4))  # = 16 (4 x 4)\n          length(options())  # 12 or more\n@@ -221,26 +221,26 @@\n     sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)\n     length                  package:base                   R Documentation\n     <BLANKLINE>\n-    _\ufffdL_\ufffde_\ufffdn_\ufffdg_\ufffdt_\ufffdh _\ufffdo_\ufffdf _\ufffda_\ufffdn _\ufffdO_\ufffdb_\ufffdj_\ufffde_\ufffdc_\ufffdt\n-    <BLANKLINE>\n-    _\ufffdD_\ufffde_\ufffds_\ufffdc_\ufffdr_\ufffdi_\ufffdp_\ufffdt_\ufffdi_\ufffdo_\ufffdn:\n+    _L_e_n_g_t_h _o_f _a_n _O_b_j_e_c_t\n+    <BLANKLINE>\n+    _D_e_s_c_r_i_p_t_i_o_n:\n     <BLANKLINE>\n          Get or set the length of vectors (including lists) and factors,\n          and of any other R object for which a method has been defined.\n     <BLANKLINE>\n-    _\ufffdU_\ufffds_\ufffda_\ufffdg_\ufffde:\n+    _U_s_a_g_e:\n     <BLANKLINE>\n          length(x)\n          length(x) <- value\n     <BLANKLINE>\n-    _\ufffdA_\ufffdr_\ufffdg_\ufffdu_\ufffdm_\ufffde_\ufffdn_\ufffdt_\ufffds:\n+    _A_r_g_u_m_e_n_t_s:\n     <BLANKLINE>\n            x: an R object.  For replacement, a vector or factor.\n     <BLANKLINE>\n        value: a non-negative integer or double (which will be rounded\n               down).\n     <BLANKLINE>\n-    _\ufffdD_\ufffde_\ufffdt_\ufffda_\ufffdi_\ufffdl_\ufffds:\n+    _D_e_t_a_i_l_s:\n     <BLANKLINE>\n          Both functions are generic: you can write methods to handle\n          specific classes of objects, see InternalMethods.  \u2018length<-\u2019 has\n@@ -253,7 +253,7 @@\n     <BLANKLINE>\n          Both are primitive functions.\n     <BLANKLINE>\n-    _\ufffdV_\ufffda_\ufffdl_\ufffdu_\ufffde:\n+    _V_a_l_u_e:\n     <BLANKLINE>\n          The default method for \u2018length\u2019 currently returns a non-negative\n          \u2018integer\u2019 of length 1, except for vectors of more than 2^31 - 1\n@@ -270,7 +270,7 @@\n          The replacement form removes all the attributes of \u2018x\u2019 except its\n          names, which are adjusted (and if necessary extended by \u2018\"\"\u2019).\n     <BLANKLINE>\n-    _\ufffdW_\ufffda_\ufffdr_\ufffdn_\ufffdi_\ufffdn_\ufffdg:\n+    _W_a_r_n_i_n_g:\n     <BLANKLINE>\n          Package authors have written methods that return a result of\n          length other than one (\u2018Formula\u2019) and that return a vector of type\n@@ -279,18 +279,18 @@\n          can be represented as an integer it is returned as a length-one\n          integer vector.\n     <BLANKLINE>\n-    _\ufffdR_\ufffde_\ufffdf_\ufffde_\ufffdr_\ufffde_\ufffdn_\ufffdc_\ufffde_\ufffds:\n+    _R_e_f_e_r_e_n_c_e_s:\n     <BLANKLINE>\n          Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S\n          Language_.  Wadsworth & Brooks/Cole.\n     <BLANKLINE>\n-    _\ufffdS_\ufffde_\ufffde _\ufffdA_\ufffdl_\ufffds_\ufffdo:\n+    _S_e_e _A_l_s_o:\n     <BLANKLINE>\n          \u2018nchar\u2019 for counting the number of characters in character\n          vectors, \u2018lengths\u2019 for getting the length of every element in a\n          list.\n     <BLANKLINE>\n-    _\ufffdE_\ufffdx_\ufffda_\ufffdm_\ufffdp_\ufffdl_\ufffde_\ufffds:\n+    _E_x_a_m_p_l_e_s:\n     <BLANKLINE>\n          length(diag(4))  # = 16 (4 x 4)\n          length(options())  # 12 or more\n``````\n",
    "created_at": "2018-03-07T16:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379236",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,9 +17,9 @@
     sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
     c                     package:base                     R Documentation
     <BLANKLINE>
-    _�C_�o_�m_�b_�i_�n_�e _�V_�a_�l_�u_�e_�s _�i_�n_�t_�o _�a _�V_�e_�c_�t_�o_�r _�o_�r _�L_�i_�s_�t
-    <BLANKLINE>
-    _�D_�e_�s_�c_�r_�i_�p_�t_�i_�o_�n:
+    _C_o_m_b_i_n_e _V_a_l_u_e_s _i_n_t_o _a _V_e_c_t_o_r _o_r _L_i_s_t
+    <BLANKLINE>
+    _D_e_s_c_r_i_p_t_i_o_n:
     <BLANKLINE>
          This is a generic function which combines its arguments.
     <BLANKLINE>
@@ -27,7 +27,7 @@
          arguments are coerced to a common type which is the type of the
          returned value, and all attributes except names are removed.
     <BLANKLINE>
-    _�U_�s_�a_�g_�e:
+    _U_s_a_g_e:
     <BLANKLINE>
          ## S3 Generic function
          c(...)
@@ -35,7 +35,7 @@
          ## Default S3 method:
          c(..., recursive = FALSE, use.names = TRUE)
     <BLANKLINE>
-    _�A_�r_�g_�u_�m_�e_�n_�t_�s:
+    _A_r_g_u_m_e_n_t_s:
     <BLANKLINE>
          ...: objects to be concatenated.
     <BLANKLINE>
@@ -45,7 +45,7 @@
     <BLANKLINE>
     use.names: logical indicating if ‘names’ should be preserved.
     <BLANKLINE>
-    _�D_�e_�t_�a_�i_�l_�s:
+    _D_e_t_a_i_l_s:
     <BLANKLINE>
          The output type is determined from the highest type of the
          components in the hierarchy NULL < raw < logical < integer <
@@ -70,25 +70,25 @@
     <BLANKLINE>
          This is a primitive function.
     <BLANKLINE>
-    _�V_�a_�l_�u_�e:
+    _V_a_l_u_e:
     <BLANKLINE>
          ‘NULL’ or an expression or a vector of an appropriate mode.  (With
          no arguments the value is ‘NULL’.)
     <BLANKLINE>
-    _�S_�4 _�m_�e_�t_�h_�o_�d_�s:
+    _S_4 _m_e_t_h_o_d_s:
     <BLANKLINE>
          This function is S4 generic, but with argument list ‘(x, ...)’.
     <BLANKLINE>
-    _�R_�e_�f_�e_�r_�e_�n_�c_�e_�s:
+    _R_e_f_e_r_e_n_c_e_s:
     <BLANKLINE>
          Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
          Language_.  Wadsworth & Brooks/Cole.
     <BLANKLINE>
-    _�S_�e_�e _�A_�l_�s_�o:
+    _S_e_e _A_l_s_o:
     <BLANKLINE>
          ‘unlist’ and ‘as.vector’ to produce attribute-free vectors.
     <BLANKLINE>
-    _�E_�x_�a_�m_�p_�l_�e_�s:
+    _E_x_a_m_p_l_e_s:
     <BLANKLINE>
          c(1,7:9)
          c(1:5, 10.5, "next")
@@ -127,26 +127,26 @@
     sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
     length                  package:base                   R Documentation
     <BLANKLINE>
-    _�L_�e_�n_�g_�t_�h _�o_�f _�a_�n _�O_�b_�j_�e_�c_�t
-    <BLANKLINE>
-    _�D_�e_�s_�c_�r_�i_�p_�t_�i_�o_�n:
+    _L_e_n_g_t_h _o_f _a_n _O_b_j_e_c_t
+    <BLANKLINE>
+    _D_e_s_c_r_i_p_t_i_o_n:
     <BLANKLINE>
          Get or set the length of vectors (including lists) and factors,
          and of any other R object for which a method has been defined.
     <BLANKLINE>
-    _�U_�s_�a_�g_�e:
+    _U_s_a_g_e:
     <BLANKLINE>
          length(x)
          length(x) <- value
     <BLANKLINE>
-    _�A_�r_�g_�u_�m_�e_�n_�t_�s:
+    _A_r_g_u_m_e_n_t_s:
     <BLANKLINE>
            x: an R object.  For replacement, a vector or factor.
     <BLANKLINE>
        value: a non-negative integer or double (which will be rounded
               down).
     <BLANKLINE>
-    _�D_�e_�t_�a_�i_�l_�s:
+    _D_e_t_a_i_l_s:
     <BLANKLINE>
          Both functions are generic: you can write methods to handle
          specific classes of objects, see InternalMethods.  ‘length<-’ has
@@ -159,7 +159,7 @@
     <BLANKLINE>
          Both are primitive functions.
     <BLANKLINE>
-    _�V_�a_�l_�u_�e:
+    _V_a_l_u_e:
     <BLANKLINE>
          The default method for ‘length’ currently returns a non-negative
          ‘integer’ of length 1, except for vectors of more than 2^31 - 1
@@ -176,7 +176,7 @@
          The replacement form removes all the attributes of ‘x’ except its
          names, which are adjusted (and if necessary extended by ‘""’).
     <BLANKLINE>
-    _�W_�a_�r_�n_�i_�n_�g:
+    _W_a_r_n_i_n_g:
     <BLANKLINE>
          Package authors have written methods that return a result of
          length other than one (‘Formula’) and that return a vector of type
@@ -185,18 +185,18 @@
          can be represented as an integer it is returned as a length-one
          integer vector.
     <BLANKLINE>
-    _�R_�e_�f_�e_�r_�e_�n_�c_�e_�s:
+    _R_e_f_e_r_e_n_c_e_s:
     <BLANKLINE>
          Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
          Language_.  Wadsworth & Brooks/Cole.
     <BLANKLINE>
-    _�S_�e_�e _�A_�l_�s_�o:
+    _S_e_e _A_l_s_o:
     <BLANKLINE>
          ‘nchar’ for counting the number of characters in character
          vectors, ‘lengths’ for getting the length of every element in a
          list.
     <BLANKLINE>
-    _�E_�x_�a_�m_�p_�l_�e_�s:
+    _E_x_a_m_p_l_e_s:
     <BLANKLINE>
          length(diag(4))  # = 16 (4 x 4)
          length(options())  # 12 or more
@@ -221,26 +221,26 @@
     sh: /home/ralf/sage/local/lib/libreadline.so.6: no version information available (required by sh)
     length                  package:base                   R Documentation
     <BLANKLINE>
-    _�L_�e_�n_�g_�t_�h _�o_�f _�a_�n _�O_�b_�j_�e_�c_�t
-    <BLANKLINE>
-    _�D_�e_�s_�c_�r_�i_�p_�t_�i_�o_�n:
+    _L_e_n_g_t_h _o_f _a_n _O_b_j_e_c_t
+    <BLANKLINE>
+    _D_e_s_c_r_i_p_t_i_o_n:
     <BLANKLINE>
          Get or set the length of vectors (including lists) and factors,
          and of any other R object for which a method has been defined.
     <BLANKLINE>
-    _�U_�s_�a_�g_�e:
+    _U_s_a_g_e:
     <BLANKLINE>
          length(x)
          length(x) <- value
     <BLANKLINE>
-    _�A_�r_�g_�u_�m_�e_�n_�t_�s:
+    _A_r_g_u_m_e_n_t_s:
     <BLANKLINE>
            x: an R object.  For replacement, a vector or factor.
     <BLANKLINE>
        value: a non-negative integer or double (which will be rounded
               down).
     <BLANKLINE>
-    _�D_�e_�t_�a_�i_�l_�s:
+    _D_e_t_a_i_l_s:
     <BLANKLINE>
          Both functions are generic: you can write methods to handle
          specific classes of objects, see InternalMethods.  ‘length<-’ has
@@ -253,7 +253,7 @@
     <BLANKLINE>
          Both are primitive functions.
     <BLANKLINE>
-    _�V_�a_�l_�u_�e:
+    _V_a_l_u_e:
     <BLANKLINE>
          The default method for ‘length’ currently returns a non-negative
          ‘integer’ of length 1, except for vectors of more than 2^31 - 1
@@ -270,7 +270,7 @@
          The replacement form removes all the attributes of ‘x’ except its
          names, which are adjusted (and if necessary extended by ‘""’).
     <BLANKLINE>
-    _�W_�a_�r_�n_�i_�n_�g:
+    _W_a_r_n_i_n_g:
     <BLANKLINE>
          Package authors have written methods that return a result of
          length other than one (‘Formula’) and that return a vector of type
@@ -279,18 +279,18 @@
          can be represented as an integer it is returned as a length-one
          integer vector.
     <BLANKLINE>
-    _�R_�e_�f_�e_�r_�e_�n_�c_�e_�s:
+    _R_e_f_e_r_e_n_c_e_s:
     <BLANKLINE>
          Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S
          Language_.  Wadsworth & Brooks/Cole.
     <BLANKLINE>
-    _�S_�e_�e _�A_�l_�s_�o:
+    _S_e_e _A_l_s_o:
     <BLANKLINE>
          ‘nchar’ for counting the number of characters in character
          vectors, ‘lengths’ for getting the length of every element in a
          list.
     <BLANKLINE>
-    _�E_�x_�a_�m_�p_�l_�e_�s:
+    _E_x_a_m_p_l_e_s:
     <BLANKLINE>
          length(diag(4))  # = 16 (4 x 4)
          length(options())  # 12 or more
``````




---

archive/issue_comments_379237.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nCan #24919 fix this, possibly by checking for system readline at start of build?",
    "created_at": "2018-03-07T16:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379237",
    "user": "https://github.com/rwst"
}
```

<div id="comment:3" align="right">comment:3</div>

Can #24919 fix this, possibly by checking for system readline at start of build?



---

archive/issue_events_346366.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-03-07T16:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24920#event-346366"
}
```



---

archive/issue_comments_379238.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nLooks like R is somewhere setting `LD_LIBRARY_PATH` when rendering docs. It shouldn't, we don't need nor want it. In particular, `sh` should just use the system libraries.",
    "created_at": "2018-04-01T08:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379238",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

Looks like R is somewhere setting `LD_LIBRARY_PATH` when rendering docs. It shouldn't, we don't need nor want it. In particular, `sh` should just use the system libraries.



---

archive/issue_comments_379239.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nLooks like R depends on setting its own `LD_LIBRARY_PATH` in `local/lib/R/etc/ldpaths`, thats terrible.",
    "created_at": "2018-04-01T09:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379239",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

Looks like R depends on setting its own `LD_LIBRARY_PATH` in `local/lib/R/etc/ldpaths`, thats terrible.



---

archive/issue_comments_379240.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nPossibly related stackoverflow post: https://superuser.com/questions/735736/no-version-information-available-required-by-usr-bin-ssh",
    "created_at": "2018-05-23T06:19:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379240",
    "user": "https://github.com/rwst"
}
```

<div id="comment:7" align="right">comment:7</div>

Possibly related stackoverflow post: https://superuser.com/questions/735736/no-version-information-available-required-by-usr-bin-ssh



---

archive/issue_comments_379241.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDebian and sage-on-gentoo now use https://anonscm.debian.org/cgit/debian-science/packages/sagemath.git/tree/debian/patches/dt-r-no-readline.patch because R hangs with newer readline. I suspect it would also help here.",
    "created_at": "2018-05-23T08:17:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379241",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

Debian and sage-on-gentoo now use https://anonscm.debian.org/cgit/debian-science/packages/sagemath.git/tree/debian/patches/dt-r-no-readline.patch because R hangs with newer readline. I suspect it would also help here.



---

archive/issue_comments_379242.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nCannot confirm. Still fails with that patch. In principle readline is already linked in R, so you may be able to switch off its usage, but the library is still loaded.",
    "created_at": "2018-05-24T05:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24920#issuecomment-379242",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

Cannot confirm. Still fails with that patch. In principle readline is already linked in R, so you may be able to switch off its usage, but the library is still loaded.



---

archive/issue_events_346367.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T03:00:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24920#event-346367"
}
```



---

archive/issue_events_346368.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T03:00:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24920#event-346368"
}
```



---

archive/issue_events_346369.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:40:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24920",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24920#event-346369"
}
```
