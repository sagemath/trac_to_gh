# Issue 24371: Move real/complex interval fields to new coercion model

archive/issues_024134.json:
```json
{
    "assignees": [],
    "body": "Also fix the following:\n\n```\nsage: NF.<a> = QuadraticField(-2)\nsage: CIF(a)\n...\nValueError: can not convert complex algebraic number to real interval\n```\n\nWe also deal with Python 3 compatibility regarding `int`/`long` and `bytes`/`unicode`.\n\nDepends on #24423\n\nCC:  @tscrim\n\nComponent: **coercion**\n\nAuthor: **Jeroen Demeyer**\n\nBranch/Commit: **[`9ac1612`](https://github.com/sagemath/sagetrac-mirror/commit/9ac1612c342c66a5d574a6c824b064e2a2ec076c)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24371_\n\n",
    "closed_at": "2018-02-15T23:13:40Z",
    "created_at": "2017-12-12T17:07:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move real/complex interval fields to new coercion model",
    "type": "issue",
    "updated_at": "2018-02-15T23:13:40Z",
    "url": "https://github.com/sagemath/sage/issues/24371",
    "user": "https://github.com/jdemeyer"
}
```
Also fix the following:

```
sage: NF.<a> = QuadraticField(-2)
sage: CIF(a)
...
ValueError: can not convert complex algebraic number to real interval
```

We also deal with Python 3 compatibility regarding `int`/`long` and `bytes`/`unicode`.

Depends on #24423

CC:  @tscrim

Component: **coercion**

Author: **Jeroen Demeyer**

Branch/Commit: **[`9ac1612`](https://github.com/sagemath/sagetrac-mirror/commit/9ac1612c342c66a5d574a6c824b064e2a2ec076c)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/24371_





---

archive/issue_events_334973.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-12-12T17:07:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334973"
}
```



---

archive/issue_events_334974.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-12-12T17:07:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334974"
}
```



---

archive/issue_events_334975.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-12-12T17:07:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334975"
}
```



---

archive/issue_events_334976.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-12-12T17:07:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334976"
}
```



---

archive/issue_comments_368978.json:
```json
{
    "body": "Branch: **[u/jdemeyer/move_real_complex_interval_fields_to_new_coercion_model](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_real_complex_interval_fields_to_new_coercion_model)**",
    "created_at": "2017-12-13T14:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368978",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/move_real_complex_interval_fields_to_new_coercion_model](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_real_complex_interval_fields_to_new_coercion_model)**



---

archive/issue_comments_368979.json:
```json
{
    "body": "Commit: **[`db4611a`](https://github.com/sagemath/sagetrac-mirror/commit/db4611a6e8f58ea317498a3d7907e4ba529add6c)**",
    "created_at": "2017-12-14T12:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368979",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`db4611a`](https://github.com/sagemath/sagetrac-mirror/commit/db4611a6e8f58ea317498a3d7907e4ba529add6c)**



---

archive/issue_comments_368980.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/375e40f6f46fd2db9d231dedf53cc59dc5279147\"><code>375e40f</code></a></td><td><code>Map._extra_slots(): do not pass dict</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db4611a6e8f58ea317498a3d7907e4ba529add6c\"><code>db4611a</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-14T12:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368980",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/375e40f6f46fd2db9d231dedf53cc59dc5279147"><code>375e40f</code></a></td><td><code>Map._extra_slots(): do not pass dict</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db4611a6e8f58ea317498a3d7907e4ba529add6c"><code>db4611a</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_368981.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2017-12-14T12:34:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368981",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_368982.json:
```json
{
    "body": "Dependencies: **#24372**",
    "created_at": "2017-12-14T12:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368982",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#24372**



---

archive/issue_comments_368983.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/549bd7d76dc6ec8afe5b1066ca1354e6f67cfc5a\"><code>549bd7d</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-14T17:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368983",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/549bd7d76dc6ec8afe5b1066ca1354e6f67cfc5a"><code>549bd7d</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_368984.json:
```json
{
    "body": "Changed commit from **[`db4611a`](https://github.com/sagemath/sagetrac-mirror/commit/db4611a6e8f58ea317498a3d7907e4ba529add6c)** to **[`549bd7d`](https://github.com/sagemath/sagetrac-mirror/commit/549bd7d76dc6ec8afe5b1066ca1354e6f67cfc5a)**",
    "created_at": "2017-12-14T17:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368984",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db4611a`](https://github.com/sagemath/sagetrac-mirror/commit/db4611a6e8f58ea317498a3d7907e4ba529add6c)** to **[`549bd7d`](https://github.com/sagemath/sagetrac-mirror/commit/549bd7d76dc6ec8afe5b1066ca1354e6f67cfc5a)**



---

archive/issue_comments_368985.json:
```json
{
    "body": "Changed commit from **[`549bd7d`](https://github.com/sagemath/sagetrac-mirror/commit/549bd7d76dc6ec8afe5b1066ca1354e6f67cfc5a)** to **[`fe4c823`](https://github.com/sagemath/sagetrac-mirror/commit/fe4c8238db49ab1c5bf0f33e837ad65ff81686d0)**",
    "created_at": "2017-12-15T12:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368985",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`549bd7d`](https://github.com/sagemath/sagetrac-mirror/commit/549bd7d76dc6ec8afe5b1066ca1354e6f67cfc5a)** to **[`fe4c823`](https://github.com/sagemath/sagetrac-mirror/commit/fe4c8238db49ab1c5bf0f33e837ad65ff81686d0)**



---

archive/issue_comments_368986.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe4c8238db49ab1c5bf0f33e837ad65ff81686d0\"><code>fe4c823</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-15T12:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368986",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe4c8238db49ab1c5bf0f33e837ad65ff81686d0"><code>fe4c823</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_368987.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,25 @@\n+Also fix this:\n \n+```\n+sage: CC.one() + CIF.one()\n+---------------------------------------------------------------------------\n+TypeError                                 Traceback (most recent call last)\n+<ipython-input-20-661099892a1e> in <module>()\n+----> 1 CC.one() + CIF.one()\n+\n+/usr/local/src/sage-git/src/sage/structure/element.pyx in sage.structure.element.Element.__add__ (build/cythonized/sage/structure/element.c:10884)()\n+   1240         # Left and right are Sage elements => use coercion model\n+   1241         if BOTH_ARE_ELEMENT(cl):\n+-> 1242             return coercion_model.bin_op(left, right, add)\n+   1243 \n+   1244         try:\n+\n+/usr/local/src/sage-git/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:10736)()\n+   1137         # We should really include the underlying error.\n+   1138         # This causes so much headache.\n+-> 1139         raise bin_op_exception(op, x, y)\n+   1140 \n+   1141     cpdef canonical_coercion(self, x, y):\n+\n+TypeError: unsupported operand parent(s) for +: 'Complex Field with 53 bits of precision' and 'Complex Interval Field with 53 bits of precision'\n+```\n``````\n",
    "created_at": "2017-12-15T14:48:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368987",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,25 @@
+Also fix this:
 
+```
+sage: CC.one() + CIF.one()
+---------------------------------------------------------------------------
+TypeError                                 Traceback (most recent call last)
+<ipython-input-20-661099892a1e> in <module>()
+----> 1 CC.one() + CIF.one()
+
+/usr/local/src/sage-git/src/sage/structure/element.pyx in sage.structure.element.Element.__add__ (build/cythonized/sage/structure/element.c:10884)()
+   1240         # Left and right are Sage elements => use coercion model
+   1241         if BOTH_ARE_ELEMENT(cl):
+-> 1242             return coercion_model.bin_op(left, right, add)
+   1243 
+   1244         try:
+
+/usr/local/src/sage-git/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:10736)()
+   1137         # We should really include the underlying error.
+   1138         # This causes so much headache.
+-> 1139         raise bin_op_exception(op, x, y)
+   1140 
+   1141     cpdef canonical_coercion(self, x, y):
+
+TypeError: unsupported operand parent(s) for +: 'Complex Field with 53 bits of precision' and 'Complex Interval Field with 53 bits of precision'
+```
``````




---

archive/issue_comments_368988.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cee3a4fe110061fa7987250a1930e6ad1ab3b9b\"><code>2cee3a4</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-15T16:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368988",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cee3a4fe110061fa7987250a1930e6ad1ab3b9b"><code>2cee3a4</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_368989.json:
```json
{
    "body": "Changed commit from **[`fe4c823`](https://github.com/sagemath/sagetrac-mirror/commit/fe4c8238db49ab1c5bf0f33e837ad65ff81686d0)** to **[`2cee3a4`](https://github.com/sagemath/sagetrac-mirror/commit/2cee3a4fe110061fa7987250a1930e6ad1ab3b9b)**",
    "created_at": "2017-12-15T16:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368989",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fe4c823`](https://github.com/sagemath/sagetrac-mirror/commit/fe4c8238db49ab1c5bf0f33e837ad65ff81686d0)** to **[`2cee3a4`](https://github.com/sagemath/sagetrac-mirror/commit/2cee3a4fe110061fa7987250a1930e6ad1ab3b9b)**



---

archive/issue_comments_368990.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis will conflict with #23739, but note that #23739 is currently stalled.",
    "created_at": "2017-12-15T21:50:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368990",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

This will conflict with #23739, but note that #23739 is currently stalled.



---

archive/issue_comments_368991.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAlso, I imagine #24363 is a dependency from looking at the code.",
    "created_at": "2017-12-15T21:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368991",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Also, I imagine #24363 is a dependency from looking at the code.



---

archive/issue_comments_368992.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@tscrim](#comment%3A10):\n> Also, I imagine #24363 is a dependency from looking at the code.\n\nI don't see why.",
    "created_at": "2017-12-16T08:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368992",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@tscrim](#comment%3A10):
> Also, I imagine #24363 is a dependency from looking at the code.

I don't see why.



---

archive/issue_comments_368993.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Also fix this:\n+Also fix the following:\n \n ```\n sage: CC.one() + CIF.one()\n@@ -23,3 +23,10 @@\n \n TypeError: unsupported operand parent(s) for +: 'Complex Field with 53 bits of precision' and 'Complex Interval Field with 53 bits of precision'\n ```\n+\n+```\n+sage: NF.<a> = QuadraticField(-2)\n+sage: CIF(a)\n+...\n+ValueError: can not convert complex algebraic number to real interval\n+```\n``````\n",
    "created_at": "2017-12-16T08:46:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368993",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Also fix this:
+Also fix the following:
 
 ```
 sage: CC.one() + CIF.one()
@@ -23,3 +23,10 @@
 
 TypeError: unsupported operand parent(s) for +: 'Complex Field with 53 bits of precision' and 'Complex Interval Field with 53 bits of precision'
 ```
+
+```
+sage: NF.<a> = QuadraticField(-2)
+sage: CIF(a)
+...
+ValueError: can not convert complex algebraic number to real interval
+```
``````




---

archive/issue_comments_368994.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tscrim](#comment%3A9):\n> This will conflict with #23739, but note that #23739 is currently stalled.\n\nI shouldn't be hard to fix #23739 in this ticket.",
    "created_at": "2017-12-16T09:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368994",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tscrim](#comment%3A9):
> This will conflict with #23739, but note that #23739 is currently stalled.

I shouldn't be hard to fix #23739 in this ticket.



---

archive/issue_comments_368995.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI also shortly want to note #15114 here and the discussion from which that ticket spawned at [sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/coercion$20interval$20field%7Csort:date/sage-devel/zfg0PhFR_qA/t2SY2cbOCAAJ). I am not saying it needs to get fixed here, but it is a good thing to have in the back of your mind while working on this ticket so that at least things do not get worse in that respect.",
    "created_at": "2017-12-16T10:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368995",
    "user": "https://github.com/koffie"
}
```

<div id="comment:14" align="right">comment:14</div>

I also shortly want to note #15114 here and the discussion from which that ticket spawned at [sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/coercion$20interval$20field%7Csort:date/sage-devel/zfg0PhFR_qA/t2SY2cbOCAAJ). I am not saying it needs to get fixed here, but it is a good thing to have in the back of your mind while working on this ticket so that at least things do not get worse in that respect.



---

archive/issue_comments_368996.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jdemeyer](#comment%3A11):\n> Replying to [@tscrim](#comment%3A10):\n> > Also, I imagine #24363 is a dependency from looking at the code.\n\n> \n> I don't see why.\n\nI thought I saw a conflict, but that turns out to not be the case.",
    "created_at": "2017-12-16T12:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368996",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jdemeyer](#comment%3A11):
> Replying to [@tscrim](#comment%3A10):
> > Also, I imagine #24363 is a dependency from looking at the code.

> 
> I don't see why.

I thought I saw a conflict, but that turns out to not be the case.



---

archive/issue_comments_368997.json:
```json
{
    "body": "Changed commit from **[`2cee3a4`](https://github.com/sagemath/sagetrac-mirror/commit/2cee3a4fe110061fa7987250a1930e6ad1ab3b9b)** to **[`d66b54f`](https://github.com/sagemath/sagetrac-mirror/commit/d66b54fb413a45950a8c6dd4bb385a43c2254883)**",
    "created_at": "2017-12-17T20:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368997",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2cee3a4`](https://github.com/sagemath/sagetrac-mirror/commit/2cee3a4fe110061fa7987250a1930e6ad1ab3b9b)** to **[`d66b54f`](https://github.com/sagemath/sagetrac-mirror/commit/d66b54fb413a45950a8c6dd4bb385a43c2254883)**



---

archive/issue_comments_368998.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d66b54fb413a45950a8c6dd4bb385a43c2254883\"><code>d66b54f</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-17T20:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368998",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d66b54fb413a45950a8c6dd4bb385a43c2254883"><code>d66b54f</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_368999.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@koffie](#comment%3A14):\n> I also shortly want to note #15114 here and the discussion from which that ticket spawned at [sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/coercion$20interval$20field%7Csort:date/sage-devel/zfg0PhFR_qA/t2SY2cbOCAAJ). I am not saying it needs to get fixed here, but it is a good thing to have in the back of your mind while working on this ticket so that at least things do not get worse in that respect.\n\nOK. So with #15114 in mind, this should be a feature and not a bug:\n\n```\nsage: CC.one() + CIF.one()\n...\nTypeError: unsupported operand parent(s) for +: 'Complex Field with 53 bits of precision' and 'Complex Interval Field with 53 bits of precision'\n```",
    "created_at": "2017-12-18T08:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-368999",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@koffie](#comment%3A14):
> I also shortly want to note #15114 here and the discussion from which that ticket spawned at [sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/coercion$20interval$20field%7Csort:date/sage-devel/zfg0PhFR_qA/t2SY2cbOCAAJ). I am not saying it needs to get fixed here, but it is a good thing to have in the back of your mind while working on this ticket so that at least things do not get worse in that respect.

OK. So with #15114 in mind, this should be a feature and not a bug:

```
sage: CC.one() + CIF.one()
...
TypeError: unsupported operand parent(s) for +: 'Complex Field with 53 bits of precision' and 'Complex Interval Field with 53 bits of precision'
```



---

archive/issue_comments_369000.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,28 +1,4 @@\n Also fix the following:\n-\n-```\n-sage: CC.one() + CIF.one()\n----------------------------------------------------------------------------\n-TypeError                                 Traceback (most recent call last)\n-<ipython-input-20-661099892a1e> in <module>()\n-----> 1 CC.one() + CIF.one()\n-\n-/usr/local/src/sage-git/src/sage/structure/element.pyx in sage.structure.element.Element.__add__ (build/cythonized/sage/structure/element.c:10884)()\n-   1240         # Left and right are Sage elements => use coercion model\n-   1241         if BOTH_ARE_ELEMENT(cl):\n--> 1242             return coercion_model.bin_op(left, right, add)\n-   1243 \n-   1244         try:\n-\n-/usr/local/src/sage-git/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:10736)()\n-   1137         # We should really include the underlying error.\n-   1138         # This causes so much headache.\n--> 1139         raise bin_op_exception(op, x, y)\n-   1140 \n-   1141     cpdef canonical_coercion(self, x, y):\n-\n-TypeError: unsupported operand parent(s) for +: 'Complex Field with 53 bits of precision' and 'Complex Interval Field with 53 bits of precision'\n-```\n \n ```\n sage: NF.<a> = QuadraticField(-2)\n@@ -30,3 +6,5 @@\n ...\n ValueError: can not convert complex algebraic number to real interval\n ```\n+\n+Using #24244, we also deal with Python 3 compatibility regarding `int`/`long`.\n``````\n",
    "created_at": "2017-12-18T13:24:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369000",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,28 +1,4 @@
 Also fix the following:
-
-```
-sage: CC.one() + CIF.one()
----------------------------------------------------------------------------
-TypeError                                 Traceback (most recent call last)
-<ipython-input-20-661099892a1e> in <module>()
-----> 1 CC.one() + CIF.one()
-
-/usr/local/src/sage-git/src/sage/structure/element.pyx in sage.structure.element.Element.__add__ (build/cythonized/sage/structure/element.c:10884)()
-   1240         # Left and right are Sage elements => use coercion model
-   1241         if BOTH_ARE_ELEMENT(cl):
--> 1242             return coercion_model.bin_op(left, right, add)
-   1243 
-   1244         try:
-
-/usr/local/src/sage-git/src/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:10736)()
-   1137         # We should really include the underlying error.
-   1138         # This causes so much headache.
--> 1139         raise bin_op_exception(op, x, y)
-   1140 
-   1141     cpdef canonical_coercion(self, x, y):
-
-TypeError: unsupported operand parent(s) for +: 'Complex Field with 53 bits of precision' and 'Complex Interval Field with 53 bits of precision'
-```
 
 ```
 sage: NF.<a> = QuadraticField(-2)
@@ -30,3 +6,5 @@
 ...
 ValueError: can not convert complex algebraic number to real interval
 ```
+
+Using #24244, we also deal with Python 3 compatibility regarding `int`/`long`.
``````




---

archive/issue_comments_369001.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3eaf54f855f3fa8da1700c3e2f99aeb85d007937\"><code>3eaf54f</code></a></td><td><code>Clean up MPFI declarations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4984485b63c1ad76382944ba6568da3d504cbee1\"><code>4984485</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-18T14:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369001",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3eaf54f855f3fa8da1700c3e2f99aeb85d007937"><code>3eaf54f</code></a></td><td><code>Clean up MPFI declarations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4984485b63c1ad76382944ba6568da3d504cbee1"><code>4984485</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369002.json:
```json
{
    "body": "Changed commit from **[`d66b54f`](https://github.com/sagemath/sagetrac-mirror/commit/d66b54fb413a45950a8c6dd4bb385a43c2254883)** to **[`4984485`](https://github.com/sagemath/sagetrac-mirror/commit/4984485b63c1ad76382944ba6568da3d504cbee1)**",
    "created_at": "2017-12-18T14:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369002",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d66b54f`](https://github.com/sagemath/sagetrac-mirror/commit/d66b54fb413a45950a8c6dd4bb385a43c2254883)** to **[`4984485`](https://github.com/sagemath/sagetrac-mirror/commit/4984485b63c1ad76382944ba6568da3d504cbee1)**



---

archive/issue_comments_369003.json:
```json
{
    "body": "Changed commit from **[`4984485`](https://github.com/sagemath/sagetrac-mirror/commit/4984485b63c1ad76382944ba6568da3d504cbee1)** to **[`2448563`](https://github.com/sagemath/sagetrac-mirror/commit/244856318a3d783da4ce0c3e5ef23d512f4e6a34)**",
    "created_at": "2017-12-19T08:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369003",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4984485`](https://github.com/sagemath/sagetrac-mirror/commit/4984485b63c1ad76382944ba6568da3d504cbee1)** to **[`2448563`](https://github.com/sagemath/sagetrac-mirror/commit/244856318a3d783da4ce0c3e5ef23d512f4e6a34)**



---

archive/issue_comments_369004.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/244856318a3d783da4ce0c3e5ef23d512f4e6a34\"><code>2448563</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-19T08:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369004",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/244856318a3d783da4ce0c3e5ef23d512f4e6a34"><code>2448563</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369005.json:
```json
{
    "body": "Changed dependencies from **#24372** to **#24372, #24402, #24381**",
    "created_at": "2017-12-19T08:20:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369005",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24372** to **#24372, #24402, #24381**



---

archive/issue_comments_369006.json:
```json
{
    "body": "Changed commit from **[`2448563`](https://github.com/sagemath/sagetrac-mirror/commit/244856318a3d783da4ce0c3e5ef23d512f4e6a34)** to **[`34bbe05`](https://github.com/sagemath/sagetrac-mirror/commit/34bbe053aec67081ce0af19f27f02b26e442a294)**",
    "created_at": "2017-12-19T09:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369006",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2448563`](https://github.com/sagemath/sagetrac-mirror/commit/244856318a3d783da4ce0c3e5ef23d512f4e6a34)** to **[`34bbe05`](https://github.com/sagemath/sagetrac-mirror/commit/34bbe053aec67081ce0af19f27f02b26e442a294)**



---

archive/issue_comments_369007.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6067d8c514557400f451621dca0b94fc1189df9a\"><code>6067d8c</code></a></td><td><code>Clean up MPFR and MPFI declarations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34bbe053aec67081ce0af19f27f02b26e442a294\"><code>34bbe05</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-19T09:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369007",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6067d8c514557400f451621dca0b94fc1189df9a"><code>6067d8c</code></a></td><td><code>Clean up MPFR and MPFI declarations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34bbe053aec67081ce0af19f27f02b26e442a294"><code>34bbe05</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369008.json:
```json
{
    "body": "Changed commit from **[`34bbe05`](https://github.com/sagemath/sagetrac-mirror/commit/34bbe053aec67081ce0af19f27f02b26e442a294)** to **[`c149d91`](https://github.com/sagemath/sagetrac-mirror/commit/c149d9100bf62ca8b60652b201b17016212b72ec)**",
    "created_at": "2017-12-19T14:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369008",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`34bbe05`](https://github.com/sagemath/sagetrac-mirror/commit/34bbe053aec67081ce0af19f27f02b26e442a294)** to **[`c149d91`](https://github.com/sagemath/sagetrac-mirror/commit/c149d9100bf62ca8b60652b201b17016212b72ec)**



---

archive/issue_comments_369009.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f46f29822ef0cb9b8f81404a8162c925dbad0a7\"><code>6f46f29</code></a></td><td><code>New Parent method _convert_method_map</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28d5a576694d279dd6b6d96c40e88e8777f1a661\"><code>28d5a57</code></a></td><td><code>Clean up MPFR and MPFI declarations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c149d9100bf62ca8b60652b201b17016212b72ec\"><code>c149d91</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-19T14:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369009",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f46f29822ef0cb9b8f81404a8162c925dbad0a7"><code>6f46f29</code></a></td><td><code>New Parent method _convert_method_map</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28d5a576694d279dd6b6d96c40e88e8777f1a661"><code>28d5a57</code></a></td><td><code>Clean up MPFR and MPFI declarations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c149d9100bf62ca8b60652b201b17016212b72ec"><code>c149d91</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369010.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c2f4f5c78c3b3a09451c601b64f4c536191b25b\"><code>5c2f4f5</code></a></td><td><code>New Parent method _convert_method_map</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db863cd30f21140ebdbe2e51b6eaf472e304bef4\"><code>db863cd</code></a></td><td><code>Clean up MPFR and MPFI declarations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5416458afe34ea680c2921930378aed28c475b0c\"><code>5416458</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-22T12:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369010",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c2f4f5c78c3b3a09451c601b64f4c536191b25b"><code>5c2f4f5</code></a></td><td><code>New Parent method _convert_method_map</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db863cd30f21140ebdbe2e51b6eaf472e304bef4"><code>db863cd</code></a></td><td><code>Clean up MPFR and MPFI declarations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5416458afe34ea680c2921930378aed28c475b0c"><code>5416458</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369011.json:
```json
{
    "body": "Changed commit from **[`c149d91`](https://github.com/sagemath/sagetrac-mirror/commit/c149d9100bf62ca8b60652b201b17016212b72ec)** to **[`5416458`](https://github.com/sagemath/sagetrac-mirror/commit/5416458afe34ea680c2921930378aed28c475b0c)**",
    "created_at": "2017-12-22T12:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369011",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c149d91`](https://github.com/sagemath/sagetrac-mirror/commit/c149d9100bf62ca8b60652b201b17016212b72ec)** to **[`5416458`](https://github.com/sagemath/sagetrac-mirror/commit/5416458afe34ea680c2921930378aed28c475b0c)**



---

archive/issue_comments_369012.json:
```json
{
    "body": "Changed dependencies from **#24372, #24402, #24381** to **#24402, #24381**",
    "created_at": "2017-12-22T12:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369012",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24372, #24402, #24381** to **#24402, #24381**



---

archive/issue_comments_369013.json:
```json
{
    "body": "Changed commit from **[`5416458`](https://github.com/sagemath/sagetrac-mirror/commit/5416458afe34ea680c2921930378aed28c475b0c)** to **[`ed5dc4a`](https://github.com/sagemath/sagetrac-mirror/commit/ed5dc4a146ef3cbc2b6ac17c5bb2ab5653c8787a)**",
    "created_at": "2017-12-22T16:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369013",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5416458`](https://github.com/sagemath/sagetrac-mirror/commit/5416458afe34ea680c2921930378aed28c475b0c)** to **[`ed5dc4a`](https://github.com/sagemath/sagetrac-mirror/commit/ed5dc4a146ef3cbc2b6ac17c5bb2ab5653c8787a)**



---

archive/issue_comments_369014.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed5dc4a146ef3cbc2b6ac17c5bb2ab5653c8787a\"><code>ed5dc4a</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-22T16:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369014",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed5dc4a146ef3cbc2b6ac17c5bb2ab5653c8787a"><code>ed5dc4a</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369015.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d81fa7243a95e0ac4aa618610eae9c0e497c126a\"><code>d81fa72</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2017-12-22T16:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369015",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d81fa7243a95e0ac4aa618610eae9c0e497c126a"><code>d81fa72</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369016.json:
```json
{
    "body": "Changed commit from **[`ed5dc4a`](https://github.com/sagemath/sagetrac-mirror/commit/ed5dc4a146ef3cbc2b6ac17c5bb2ab5653c8787a)** to **[`d81fa72`](https://github.com/sagemath/sagetrac-mirror/commit/d81fa7243a95e0ac4aa618610eae9c0e497c126a)**",
    "created_at": "2017-12-22T16:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed5dc4a`](https://github.com/sagemath/sagetrac-mirror/commit/ed5dc4a146ef3cbc2b6ac17c5bb2ab5653c8787a)** to **[`d81fa72`](https://github.com/sagemath/sagetrac-mirror/commit/d81fa7243a95e0ac4aa618610eae9c0e497c126a)**



---

archive/issue_comments_369017.json:
```json
{
    "body": "Changed dependencies from **#24402, #24381** to **#24402, #24381, #24423**",
    "created_at": "2017-12-22T21:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369017",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24402, #24381** to **#24402, #24381, #24423**



---

archive/issue_comments_369018.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/move_real_complex_interval_fields_to_new_coercion_model](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_real_complex_interval_fields_to_new_coercion_model)** to **[public/24371-move_real_complex_interval_fields_to_new_coercion_model](https://github.com/sagemath/sagetrac-mirror/tree/public/24371-move_real_complex_interval_fields_to_new_coercion_model)**",
    "created_at": "2018-02-07T14:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369018",
    "user": "https://github.com/mezzarobba"
}
```

Changed branch from **[u/jdemeyer/move_real_complex_interval_fields_to_new_coercion_model](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_real_complex_interval_fields_to_new_coercion_model)** to **[public/24371-move_real_complex_interval_fields_to_new_coercion_model](https://github.com/sagemath/sagetrac-mirror/tree/public/24371-move_real_complex_interval_fields_to_new_coercion_model)**



---

archive/issue_comments_369019.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nRebased (trivial conflits only)... Is this ready for review?",
    "created_at": "2018-02-07T14:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369019",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:29" align="right">comment:29</div>

Rebased (trivial conflits only)... Is this ready for review?



---

archive/issue_comments_369020.json:
```json
{
    "body": "Changed commit from **[`d81fa72`](https://github.com/sagemath/sagetrac-mirror/commit/d81fa7243a95e0ac4aa618610eae9c0e497c126a)** to **[`7b3c2e7`](https://github.com/sagemath/sagetrac-mirror/commit/7b3c2e7e8d4ceae4cd050ed652b46d4f748b9445)**",
    "created_at": "2018-02-07T14:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369020",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[`d81fa72`](https://github.com/sagemath/sagetrac-mirror/commit/d81fa7243a95e0ac4aa618610eae9c0e497c126a)** to **[`7b3c2e7`](https://github.com/sagemath/sagetrac-mirror/commit/7b3c2e7e8d4ceae4cd050ed652b46d4f748b9445)**



---

archive/issue_comments_369021.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c2f4f5c78c3b3a09451c601b64f4c536191b25b\"><code>5c2f4f5</code></a></td><td><code>New Parent method _convert_method_map</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18d98778238982fd01f7cc9a1f027aff51460305\"><code>18d9877</code></a></td><td><code>Fix cimport</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4606309005099356eda39142a9abc425d341337e\"><code>4606309</code></a></td><td><code>LinearFunctionOrConstraint.__richcmp__ should replace before converting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15cd15ead8594a9553d74ae46bac2ecaf6fa67c3\"><code>15cd15e</code></a></td><td><code>Merge remote-tracking branches 'trac/u/jdemeyer/new_parent_method__convert_method_map' and 'trac/u/jdemeyer/linearfunctionorconstraint___richcmp___should_replace_before_converting' into tmp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b36f395a8fdc2a68532c856dbcfcad458f962a6\"><code>2b36f39</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2018-02-07T14:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369021",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c2f4f5c78c3b3a09451c601b64f4c536191b25b"><code>5c2f4f5</code></a></td><td><code>New Parent method _convert_method_map</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18d98778238982fd01f7cc9a1f027aff51460305"><code>18d9877</code></a></td><td><code>Fix cimport</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4606309005099356eda39142a9abc425d341337e"><code>4606309</code></a></td><td><code>LinearFunctionOrConstraint.__richcmp__ should replace before converting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15cd15ead8594a9553d74ae46bac2ecaf6fa67c3"><code>15cd15e</code></a></td><td><code>Merge remote-tracking branches 'trac/u/jdemeyer/new_parent_method__convert_method_map' and 'trac/u/jdemeyer/linearfunctionorconstraint___richcmp___should_replace_before_converting' into tmp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b36f395a8fdc2a68532c856dbcfcad458f962a6"><code>2b36f39</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369022.json:
```json
{
    "body": "Changed commit from **[`7b3c2e7`](https://github.com/sagemath/sagetrac-mirror/commit/7b3c2e7e8d4ceae4cd050ed652b46d4f748b9445)** to **[`2b36f39`](https://github.com/sagemath/sagetrac-mirror/commit/2b36f395a8fdc2a68532c856dbcfcad458f962a6)**",
    "created_at": "2018-02-07T14:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369022",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7b3c2e7`](https://github.com/sagemath/sagetrac-mirror/commit/7b3c2e7e8d4ceae4cd050ed652b46d4f748b9445)** to **[`2b36f39`](https://github.com/sagemath/sagetrac-mirror/commit/2b36f395a8fdc2a68532c856dbcfcad458f962a6)**



---

archive/issue_comments_369023.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@mezzarobba](#comment%3A29):\n> Is this ready for review?\n\nNot sure... I wanted to wait until the dependencies are merged before continuing with this.\n\nIt should be *mostly* done though. If it passes doctests, it might as well be \"needs review\".",
    "created_at": "2018-02-07T19:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369023",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@mezzarobba](#comment%3A29):
> Is this ready for review?

Not sure... I wanted to wait until the dependencies are merged before continuing with this.

It should be *mostly* done though. If it passes doctests, it might as well be "needs review".



---

archive/issue_comments_369024.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9141eb474d3ce140580349c8b7d4c30ea5d7a1a\"><code>d9141eb</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2018-02-09T14:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369024",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9141eb474d3ce140580349c8b7d4c30ea5d7a1a"><code>d9141eb</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369025.json:
```json
{
    "body": "Changed commit from **[`2b36f39`](https://github.com/sagemath/sagetrac-mirror/commit/2b36f395a8fdc2a68532c856dbcfcad458f962a6)** to **[`d9141eb`](https://github.com/sagemath/sagetrac-mirror/commit/d9141eb474d3ce140580349c8b7d4c30ea5d7a1a)**",
    "created_at": "2018-02-09T14:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369025",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2b36f39`](https://github.com/sagemath/sagetrac-mirror/commit/2b36f395a8fdc2a68532c856dbcfcad458f962a6)** to **[`d9141eb`](https://github.com/sagemath/sagetrac-mirror/commit/d9141eb474d3ce140580349c8b7d4c30ea5d7a1a)**



---

archive/issue_comments_369026.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4606309005099356eda39142a9abc425d341337e\"><code>4606309</code></a></td><td><code>LinearFunctionOrConstraint.__richcmp__ should replace before converting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ac35fbcfcbb442966f4e12313b30483f807364\"><code>72ac35f</code></a></td><td><code>Merge commit '4606309005099356eda39142a9abc425d341337e' into t/24371/public/24371-move_real_complex_interval_fields_to_new_coercion_model</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753\"><code>c74d8e7</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2018-02-09T14:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369026",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4606309005099356eda39142a9abc425d341337e"><code>4606309</code></a></td><td><code>LinearFunctionOrConstraint.__richcmp__ should replace before converting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ac35fbcfcbb442966f4e12313b30483f807364"><code>72ac35f</code></a></td><td><code>Merge commit '4606309005099356eda39142a9abc425d341337e' into t/24371/public/24371-move_real_complex_interval_fields_to_new_coercion_model</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753"><code>c74d8e7</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_comments_369027.json:
```json
{
    "body": "Changed commit from **[`d9141eb`](https://github.com/sagemath/sagetrac-mirror/commit/d9141eb474d3ce140580349c8b7d4c30ea5d7a1a)** to **[`c74d8e7`](https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753)**",
    "created_at": "2018-02-09T14:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369027",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d9141eb`](https://github.com/sagemath/sagetrac-mirror/commit/d9141eb474d3ce140580349c8b7d4c30ea5d7a1a)** to **[`c74d8e7`](https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753)**



---

archive/issue_comments_369028.json:
```json
{
    "body": "Changed dependencies from **#24402, #24381, #24423** to **#24423**",
    "created_at": "2018-02-09T14:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369028",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24402, #24381, #24423** to **#24423**



---

archive/issue_comments_369029.json:
```json
{
    "body": "Changed commit from **[`c74d8e7`](https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753)** to **[`ee2d01c`](https://github.com/sagemath/sagetrac-mirror/commit/ee2d01c8fa1ec0c0c060047705f4c9d7a62ca216)**",
    "created_at": "2018-02-09T14:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369029",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c74d8e7`](https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753)** to **[`ee2d01c`](https://github.com/sagemath/sagetrac-mirror/commit/ee2d01c8fa1ec0c0c060047705f4c9d7a62ca216)**



---

archive/issue_comments_369030.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee2d01c8fa1ec0c0c060047705f4c9d7a62ca216\"><code>ee2d01c</code></a></td><td><code>Fix ComplexIntervalFieldElement.log()</code></td></tr></table>\n",
    "created_at": "2018-02-09T14:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369030",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee2d01c8fa1ec0c0c060047705f4c9d7a62ca216"><code>ee2d01c</code></a></td><td><code>Fix ComplexIntervalFieldElement.log()</code></td></tr></table>




---

archive/issue_comments_369031.json:
```json
{
    "body": "Changed commit from **[`ee2d01c`](https://github.com/sagemath/sagetrac-mirror/commit/ee2d01c8fa1ec0c0c060047705f4c9d7a62ca216)** to **[`c74d8e7`](https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753)**",
    "created_at": "2018-02-09T14:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369031",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ee2d01c`](https://github.com/sagemath/sagetrac-mirror/commit/ee2d01c8fa1ec0c0c060047705f4c9d7a62ca216)** to **[`c74d8e7`](https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753)**



---

archive/issue_comments_369032.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-09T14:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369032",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_369033.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI still need to implement the Python 3 compatibility that I promised.",
    "created_at": "2018-02-09T14:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369033",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

I still need to implement the Python 3 compatibility that I promised.



---

archive/issue_comments_369034.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n ValueError: can not convert complex algebraic number to real interval\n ```\n \n-Using #24244, we also deal with Python 3 compatibility regarding `int`/`long`.\n+We also deal with Python 3 compatibility regarding `int`/`long` and `bytes`/`unicode`.\n``````\n",
    "created_at": "2018-02-09T14:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369034",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 ValueError: can not convert complex algebraic number to real interval
 ```
 
-Using #24244, we also deal with Python 3 compatibility regarding `int`/`long`.
+We also deal with Python 3 compatibility regarding `int`/`long` and `bytes`/`unicode`.
``````




---

archive/issue_comments_369035.json:
```json
{
    "body": "Changed commit from **[`c74d8e7`](https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753)** to **[`1195b3a`](https://github.com/sagemath/sagetrac-mirror/commit/1195b3a4b098a4e5d32e482603ff9d0c3e86e9c8)**",
    "created_at": "2018-02-09T16:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369035",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c74d8e7`](https://github.com/sagemath/sagetrac-mirror/commit/c74d8e71c695d2d9f8af9ef9074a90a48e2b4753)** to **[`1195b3a`](https://github.com/sagemath/sagetrac-mirror/commit/1195b3a4b098a4e5d32e482603ff9d0c3e86e9c8)**



---

archive/issue_comments_369036.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1195b3a4b098a4e5d32e482603ff9d0c3e86e9c8\"><code>1195b3a</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>\n",
    "created_at": "2018-02-09T16:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369036",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1195b3a4b098a4e5d32e482603ff9d0c3e86e9c8"><code>1195b3a</code></a></td><td><code>Move real/complex interval fields to new coercion model</code></td></tr></table>




---

archive/issue_events_334977.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-09T16:23:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334977"
}
```



---

archive/issue_comments_369037.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-02-09T21:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369037",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_369038.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nSome comments:\n\n- I know this is slightly outside the purview of this ticket, but perhaps we can rename `ComplexIntervalField_class` to `ComplexIntervalField` and have it inherit from `UniqueRepresentation` in order to get rid of the custom caching. I can also do this if you want.\n- I would do the same for `RealIntervalField_class` except it is an extension class. Do you think there is a benefit for that? We don't even do that for `Rationals`.\n- Why not use `@cached_method` for `real_field`, `middle_field`, etc.? They to have `UniqueRepresentation`-like behavior, so do not strictly need to be cached. However, I am assuming they are cached for speed reasons, so doing `@cached_method` is the best for repeated use:\n\n  ```sage\n  sage: class Foo(object):\n  ....:     def __init__(self):\n  ....:         self._cache2 = None\n  ....:     @cached_method\n  ....:     def cm(self):\n  ....:         return 5\n  ....:     def c1(self):\n  ....:         try:\n  ....:             return self._cache1\n  ....:         except AttributeError:\n  ....:             self._cache1 = 5\n  ....:             return self._cache1\n  ....:     def c2(self):\n  ....:         if self._cache2 is None:\n  ....:             self._cache2 = 5\n  ....:         return self._cache2\n  sage: timeit('F = Foo(); F.cm()', number=10000, repeat=20)\n  10000 loops, best of 20: 1.53 \u00b5s per loop\n  sage: timeit('F = Foo(); F.c1()', number=10000, repeat=20)\n  10000 loops, best of 20: 1.39 \u00b5s per loop\n  sage: timeit('F = Foo(); F.c2()', number=10000, repeat=20)\n  10000 loops, best of 20: 635 ns per loop\n  sage: F = Foo()\n  sage: timeit('F.cm()', number=10000, repeat=20)\n  10000 loops, best of 20: 68.7 ns per loop\n  sage: timeit('F.c1()', number=10000, repeat=20)\n  10000 loops, best of 20: 121 ns per loop\n  sage: timeit('F.c2()', number=10000, repeat=20)\n  10000 loops, best of 20: 1.49 \u00b5s per loop\n  ```\n- Is the `_real_field = real_field` leftover from testing? I think it should be removed altogether.\n- You should replace\n\n  ```diff\n        return complex_interval.ComplexIntervalFieldElement(self, x, im, **kwds)\n        return self.element_class(self, x, im, **kwds)\n  ```\n  (in fact, if that is used elsewhere in the file, it should be replaced as well) to pick up the category contributions.\n- Same comment for returning `RealIntervalFieldElement`.\n- Similarly, I would also make this change:\n\n  ```diff\n       R = RealIntervalField(prec=max(bits+pad, min_prec))\n       if upper is not None:\n           s = (s, upper)\n  -    return RealIntervalFieldElement(R, s, base)\n  +    return R.element_class(R, s, base)\n  ```\n\nI think it looks good otherwise.",
    "created_at": "2018-02-09T21:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369038",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:40" align="right">comment:40</div>

Some comments:

- I know this is slightly outside the purview of this ticket, but perhaps we can rename `ComplexIntervalField_class` to `ComplexIntervalField` and have it inherit from `UniqueRepresentation` in order to get rid of the custom caching. I can also do this if you want.
- I would do the same for `RealIntervalField_class` except it is an extension class. Do you think there is a benefit for that? We don't even do that for `Rationals`.
- Why not use `@cached_method` for `real_field`, `middle_field`, etc.? They to have `UniqueRepresentation`-like behavior, so do not strictly need to be cached. However, I am assuming they are cached for speed reasons, so doing `@cached_method` is the best for repeated use:

  ```sage
  sage: class Foo(object):
  ....:     def __init__(self):
  ....:         self._cache2 = None
  ....:     @cached_method
  ....:     def cm(self):
  ....:         return 5
  ....:     def c1(self):
  ....:         try:
  ....:             return self._cache1
  ....:         except AttributeError:
  ....:             self._cache1 = 5
  ....:             return self._cache1
  ....:     def c2(self):
  ....:         if self._cache2 is None:
  ....:             self._cache2 = 5
  ....:         return self._cache2
  sage: timeit('F = Foo(); F.cm()', number=10000, repeat=20)
  10000 loops, best of 20: 1.53 s per loop
  sage: timeit('F = Foo(); F.c1()', number=10000, repeat=20)
  10000 loops, best of 20: 1.39 s per loop
  sage: timeit('F = Foo(); F.c2()', number=10000, repeat=20)
  10000 loops, best of 20: 635 ns per loop
  sage: F = Foo()
  sage: timeit('F.cm()', number=10000, repeat=20)
  10000 loops, best of 20: 68.7 ns per loop
  sage: timeit('F.c1()', number=10000, repeat=20)
  10000 loops, best of 20: 121 ns per loop
  sage: timeit('F.c2()', number=10000, repeat=20)
  10000 loops, best of 20: 1.49 s per loop
  ```
- Is the `_real_field = real_field` leftover from testing? I think it should be removed altogether.
- You should replace

  ```diff
        return complex_interval.ComplexIntervalFieldElement(self, x, im, **kwds)
        return self.element_class(self, x, im, **kwds)
  ```
  (in fact, if that is used elsewhere in the file, it should be replaced as well) to pick up the category contributions.
- Same comment for returning `RealIntervalFieldElement`.
- Similarly, I would also make this change:

  ```diff
       R = RealIntervalField(prec=max(bits+pad, min_prec))
       if upper is not None:
           s = (s, upper)
  -    return RealIntervalFieldElement(R, s, base)
  +    return R.element_class(R, s, base)
  ```

I think it looks good otherwise.



---

archive/issue_comments_369039.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI consider the proposed changes to unique representation outside the scope of this ticket. This ticket is already reasonably large, let's not add more things. I'll have a look at your other comments.",
    "created_at": "2018-02-09T21:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369039",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

I consider the proposed changes to unique representation outside the scope of this ticket. This ticket is already reasonably large, let's not add more things. I'll have a look at your other comments.



---

archive/issue_comments_369040.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI guess the `_real_field = real_field` is to avoid #24695 as a dependency?",
    "created_at": "2018-02-09T21:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369040",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:42" align="right">comment:42</div>

I guess the `_real_field = real_field` is to avoid #24695 as a dependency?



---

archive/issue_comments_369041.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nWe should also do changes of the form in `ComplexIntervalFieldElement`:\n\n```diff\n-return ComplexIntervalFieldElement(self._parent, re, im)\n+return type(self)(self._parent, re, im)\n```\nand similarly for `RealIntervalFieldElement`.",
    "created_at": "2018-02-09T21:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369041",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:43" align="right">comment:43</div>

We should also do changes of the form in `ComplexIntervalFieldElement`:

```diff
-return ComplexIntervalFieldElement(self._parent, re, im)
+return type(self)(self._parent, re, im)
```
and similarly for `RealIntervalFieldElement`.



---

archive/issue_comments_369042.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@tscrim](#comment%3A42):\n> I guess the `_real_field = real_field` is to avoid #24695 as a dependency?\n\nI wasn't actually aware of that, thanks for the pointer :-)",
    "created_at": "2018-02-09T21:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369042",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@tscrim](#comment%3A42):
> I guess the `_real_field = real_field` is to avoid #24695 as a dependency?

I wasn't actually aware of that, thanks for the pointer :-)



---

archive/issue_comments_369043.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI guess I kept `_real_field` for compatibility with other \"complex number\" implementations such as\n\n```\nsage: CC._real_field()\nReal Field with 53 bits of precision\n```\n\nWe should probably have a separate ticket to replace `_real_field` by `real_field`: this looks like a useful method, it should not be private.",
    "created_at": "2018-02-12T12:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369043",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

I guess I kept `_real_field` for compatibility with other "complex number" implementations such as

```
sage: CC._real_field()
Real Field with 53 bits of precision
```

We should probably have a separate ticket to replace `_real_field` by `real_field`: this looks like a useful method, it should not be private.



---

archive/issue_comments_369044.json:
```json
{
    "body": "Changed commit from **[`1195b3a`](https://github.com/sagemath/sagetrac-mirror/commit/1195b3a4b098a4e5d32e482603ff9d0c3e86e9c8)** to **[`22d309c`](https://github.com/sagemath/sagetrac-mirror/commit/22d309c01fcb79c5d8858f4eb5b140e4c51d2780)**",
    "created_at": "2018-02-12T13:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369044",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1195b3a`](https://github.com/sagemath/sagetrac-mirror/commit/1195b3a4b098a4e5d32e482603ff9d0c3e86e9c8)** to **[`22d309c`](https://github.com/sagemath/sagetrac-mirror/commit/22d309c01fcb79c5d8858f4eb5b140e4c51d2780)**



---

archive/issue_comments_369045.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22d309c01fcb79c5d8858f4eb5b140e4c51d2780\"><code>22d309c</code></a></td><td><code>Cleanup for real/complex interval fields</code></td></tr></table>\n",
    "created_at": "2018-02-12T13:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369045",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22d309c01fcb79c5d8858f4eb5b140e4c51d2780"><code>22d309c</code></a></td><td><code>Cleanup for real/complex interval fields</code></td></tr></table>




---

archive/issue_comments_369046.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI ended up doing a lot of cleanup. I think I'm using `element_class` everywhere, but don't shoot me if I'm wrong.\n\nNote that currently the category stuff won't be used anyway because the elements are extension types.",
    "created_at": "2018-02-12T13:19:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369046",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

I ended up doing a lot of cleanup. I think I'm using `element_class` everywhere, but don't shoot me if I'm wrong.

Note that currently the category stuff won't be used anyway because the elements are extension types.



---

archive/issue_comments_369047.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThank you for doing the cleanup.\n\nFor changes such as\n\n```diff\n-        cdef ComplexIntervalFieldElement res = self._new()\n+        res = self._new()\n```\naren't we loosing some efficiency? I would think because they are still subclasses of `ComplexIntervalFieldElement`, that Cython would be able to optimize their attribute lookups by not treating them as Python objects? (Of course, we would have to explicitly cast `<ComplexIntervalFieldElement>` to avoid the type-checking-safety-penalty.)\n\nThis goes through the `__call__` (which in this case, bypasses the coercion framework, but normally it wouldn't):\n\n```diff\n-        return complex_interval.ComplexIntervalFieldElement(self, 0, 1)\n+        return self(0, 1)\n```\nI think we are better making a direct call to `self.element_class(self, 0, 1)` since this is not user input.",
    "created_at": "2018-02-13T01:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369047",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

Thank you for doing the cleanup.

For changes such as

```diff
-        cdef ComplexIntervalFieldElement res = self._new()
+        res = self._new()
```
aren't we loosing some efficiency? I would think because they are still subclasses of `ComplexIntervalFieldElement`, that Cython would be able to optimize their attribute lookups by not treating them as Python objects? (Of course, we would have to explicitly cast `<ComplexIntervalFieldElement>` to avoid the type-checking-safety-penalty.)

This goes through the `__call__` (which in this case, bypasses the coercion framework, but normally it wouldn't):

```diff
-        return complex_interval.ComplexIntervalFieldElement(self, 0, 1)
+        return self(0, 1)
```
I think we are better making a direct call to `self.element_class(self, 0, 1)` since this is not user input.



---

archive/issue_comments_369048.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@tscrim](#comment%3A48):\n> Thank you for doing the cleanup.\n> \n> For changes such as\n> \n> ```diff\n> -        cdef ComplexIntervalFieldElement res = self._new()\n> +        res = self._new()\n> ```\n> aren't we loosing some efficiency?\n\nNo, Cython has type inference. Since `_new` is declared as returning a `ComplexIntervalFieldElement`, the declaration `cdef ComplexIntervalFieldElement res` is just redundant.\n\n> This goes through the `__call__` (which in this case, bypasses the coercion framework, but normally it wouldn't):\n> \n> ```diff\n> -        return complex_interval.ComplexIntervalFieldElement(self, 0, 1)\n> +        return self(0, 1)\n> ```\n> I think we are better making a direct call to `self.element_class(self, 0, 1)` since this is not user input.\n\nI don't see the problem with using `__call__` here but I can make that change.",
    "created_at": "2018-02-13T06:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369048",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@tscrim](#comment%3A48):
> Thank you for doing the cleanup.
> 
> For changes such as
> 
> ```diff
> -        cdef ComplexIntervalFieldElement res = self._new()
> +        res = self._new()
> ```
> aren't we loosing some efficiency?

No, Cython has type inference. Since `_new` is declared as returning a `ComplexIntervalFieldElement`, the declaration `cdef ComplexIntervalFieldElement res` is just redundant.

> This goes through the `__call__` (which in this case, bypasses the coercion framework, but normally it wouldn't):
> 
> ```diff
> -        return complex_interval.ComplexIntervalFieldElement(self, 0, 1)
> +        return self(0, 1)
> ```
> I think we are better making a direct call to `self.element_class(self, 0, 1)` since this is not user input.

I don't see the problem with using `__call__` here but I can make that change.



---

archive/issue_comments_369049.json:
```json
{
    "body": "Changed commit from **[`22d309c`](https://github.com/sagemath/sagetrac-mirror/commit/22d309c01fcb79c5d8858f4eb5b140e4c51d2780)** to **[`9ac1612`](https://github.com/sagemath/sagetrac-mirror/commit/9ac1612c342c66a5d574a6c824b064e2a2ec076c)**",
    "created_at": "2018-02-13T08:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369049",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`22d309c`](https://github.com/sagemath/sagetrac-mirror/commit/22d309c01fcb79c5d8858f4eb5b140e4c51d2780)** to **[`9ac1612`](https://github.com/sagemath/sagetrac-mirror/commit/9ac1612c342c66a5d574a6c824b064e2a2ec076c)**



---

archive/issue_comments_369050.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ac1612c342c66a5d574a6c824b064e2a2ec076c\"><code>9ac1612</code></a></td><td><code>Cleanup for real/complex interval fields</code></td></tr></table>\n",
    "created_at": "2018-02-13T08:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369050",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ac1612c342c66a5d574a6c824b064e2a2ec076c"><code>9ac1612</code></a></td><td><code>Cleanup for real/complex interval fields</code></td></tr></table>




---

archive/issue_comments_369051.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@tscrim](#comment%3A48):\n> Cython would be able to optimize their attribute lookups by not treating them as Python objects?\n\nActually, the relevant attributes are `cdef` attributes, so they cannot even be accessed from Python! So the fact that the code works proves that Cython must be doing type inference.\n\nI changed some `self(...)` calls to `self.element_class(self, ...)`",
    "created_at": "2018-02-13T09:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369051",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@tscrim](#comment%3A48):
> Cython would be able to optimize their attribute lookups by not treating them as Python objects?

Actually, the relevant attributes are `cdef` attributes, so they cannot even be accessed from Python! So the fact that the code works proves that Cython must be doing type inference.

I changed some `self(...)` calls to `self.element_class(self, ...)`



---

archive/issue_events_334978.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-02-13T12:40:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334978"
}
```



---

archive/issue_events_334979.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-02-13T12:40:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334979"
}
```



---

archive/issue_comments_369052.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@jdemeyer](#comment%3A51):\n> Replying to [@tscrim](#comment%3A48):\n> > Cython would be able to optimize their attribute lookups by not treating them as Python objects?\n\n> \n> Actually, the relevant attributes are `cdef` attributes, so they cannot even be accessed from Python! So the fact that the code works proves that Cython must be doing type inference.\n\nThat is what is happening, e.g.:\n\n```C\n  __pyx_t_1 = ((PyObject *)__pyx_f_4sage_5rings_16complex_interval_27ComplexIntervalFieldE\nlement__new(__pyx_v_self)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 325, __pyx_L1_error)\n  __Pyx_GOTREF(__pyx_t_1);\n  __pyx_v_a00 = ((struct __pyx_obj_4sage_5rings_16complex_interval_ComplexIntervalFieldEle\nment *)__pyx_t_1);\n  __pyx_t_1 = 0;\n```\nI didn't realize that Cython was that smart. :)\n\n> I changed some `self(...)` calls to `self.element_class(self, ...)`\n\nThank you. LGTM. (If I wanted to be **really** picky, I would say `self.element_class(self, 1)` should instead use the cached `self.one()`, but `zeta(1)` is almost certainly never called.)",
    "created_at": "2018-02-13T12:40:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369052",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@jdemeyer](#comment%3A51):
> Replying to [@tscrim](#comment%3A48):
> > Cython would be able to optimize their attribute lookups by not treating them as Python objects?

> 
> Actually, the relevant attributes are `cdef` attributes, so they cannot even be accessed from Python! So the fact that the code works proves that Cython must be doing type inference.

That is what is happening, e.g.:

```C
  __pyx_t_1 = ((PyObject *)__pyx_f_4sage_5rings_16complex_interval_27ComplexIntervalFieldE
lement__new(__pyx_v_self)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 325, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_a00 = ((struct __pyx_obj_4sage_5rings_16complex_interval_ComplexIntervalFieldEle
ment *)__pyx_t_1);
  __pyx_t_1 = 0;
```
I didn't realize that Cython was that smart. :)

> I changed some `self(...)` calls to `self.element_class(self, ...)`

Thank you. LGTM. (If I wanted to be **really** picky, I would say `self.element_class(self, 1)` should instead use the cached `self.one()`, but `zeta(1)` is almost certainly never called.)



---

archive/issue_comments_369053.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThanks!",
    "created_at": "2018-02-13T15:24:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369053",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:53" align="right">comment:53</div>

Thanks!



---

archive/issue_comments_369054.json:
```json
{
    "body": "Changed branch from **[public/24371-move_real_complex_interval_fields_to_new_coercion_model](https://github.com/sagemath/sagetrac-mirror/tree/public/24371-move_real_complex_interval_fields_to_new_coercion_model)** to **[`9ac1612`](https://github.com/sagemath/sagetrac-mirror/commit/9ac1612c342c66a5d574a6c824b064e2a2ec076c)**",
    "created_at": "2018-02-15T23:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24371#issuecomment-369054",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/24371-move_real_complex_interval_fields_to_new_coercion_model](https://github.com/sagemath/sagetrac-mirror/tree/public/24371-move_real_complex_interval_fields_to_new_coercion_model)** to **[`9ac1612`](https://github.com/sagemath/sagetrac-mirror/commit/9ac1612c342c66a5d574a6c824b064e2a2ec076c)**



---

archive/issue_events_334980.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-15T23:13:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334980"
}
```



---

archive/issue_events_334981.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8a64691e82bc5386a36ff28237875b1cfc69d079",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-02-15T23:13:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24371",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24371#event-334981"
}
```
