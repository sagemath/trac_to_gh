# Issue 24144: Implement Psi and Phi bases for QSym

archive/issues_023907.json:
```json
{
    "body": "Following https://arxiv.org/abs/1710.11613, we can define psi and phi bases for QSym: the powersum bases of the first and second kind.\n\nCC:  sage-combinat @darijgr @zabrocki @saliola amypang\n\nKeywords: qsym, symmetric functions\n\nBranch/Commit: 90c5b7c649f7fa6e2a83286d22cc7743fb43e5a8\n\nReviewer: Mike Zabrocki\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24144\n\n",
    "closed_at": "2017-12-11T01:03:14Z",
    "created_at": "2017-11-03T02:12:12Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Implement Psi and Phi bases for QSym",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24144",
    "user": "https://github.com/tscrim"
}
```
Following https://arxiv.org/abs/1710.11613, we can define psi and phi bases for QSym: the powersum bases of the first and second kind.

CC:  sage-combinat @darijgr @zabrocki @saliola amypang

Keywords: qsym, symmetric functions

Branch/Commit: 90c5b7c649f7fa6e2a83286d22cc7743fb43e5a8

Reviewer: Mike Zabrocki

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24144





---

archive/issue_comments_456807.json:
```json
{
    "body": "Changing commit from \"\" to \"42a6df5980d9d32f9890260f5c2c38e65894d12e\"",
    "created_at": "2017-11-03T02:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456807",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "42a6df5980d9d32f9890260f5c2c38e65894d12e"



---

archive/issue_comments_456808.json:
```json
{
    "body": "Changing branch from \"\" to \"public/combinat/powersum_qsym-24144\"",
    "created_at": "2017-11-03T02:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456808",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/combinat/powersum_qsym-24144"



---

archive/issue_comments_456809.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-11-03T02:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456809",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_456810.json:
```json
{
    "body": "<a id='comment:1'></a>Just a basic implementation. It does do a slight abuse of `dual`, but I think in a very natural way, and I modified `duality_pairing` accordingly.\n\n---\nNew commits:",
    "created_at": "2017-11-03T02:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456810",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>Just a basic implementation. It does do a slight abuse of `dual`, but I think in a very natural way, and I modified `duality_pairing` accordingly.

---
New commits:



---

archive/issue_comments_456811.json:
```json
{
    "body": "<a id='comment:2'></a>A couple comments (I'm not reviewing this in foreseeable time, but these things caught my eye):\n\n1) I don't like the redefinition of `duality_pairing`. If I make Sage compute the duality pairing between an element in the QSym Phi basis and the NSym H basis, then \"who wins\" -- the standard pairing or the rescaled one? (I guess the rescaled one, but this isn't very natural.)\n\nCould you move the `ncsf.py` changes to a different ticket, or do you actually use them in `qsym.py`? That would make reviewing easier.\n\n2) \n\n```\n+            \\Phi_I = \\sum_{J \\succ I} z_I / sp_{I,J} M_I,\n```\nThe M_I should be M_J here. Same in the \\Psi_I formula.\n\n3) I doubt that the Phi-basis is defined over any base ring. Don't they give the example\nPhi_322 = 2M_322 + M_52 + M_34 + 1/3 M_7\nin the preprint?\n\n[OT: Speaking of splitting tickets for easier review, I'm wondering what you think of splitting out the Hall basis from the free-Lie-algebra ticket... I'm pretty positive I could review the Lyndon basis easily enough.]",
    "created_at": "2017-11-04T04:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456811",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:2'></a>A couple comments (I'm not reviewing this in foreseeable time, but these things caught my eye):

1) I don't like the redefinition of `duality_pairing`. If I make Sage compute the duality pairing between an element in the QSym Phi basis and the NSym H basis, then "who wins" -- the standard pairing or the rescaled one? (I guess the rescaled one, but this isn't very natural.)

Could you move the `ncsf.py` changes to a different ticket, or do you actually use them in `qsym.py`? That would make reviewing easier.

2) 

```
+            \Phi_I = \sum_{J \succ I} z_I / sp_{I,J} M_I,
```
The M_I should be M_J here. Same in the \Psi_I formula.

3) I doubt that the Phi-basis is defined over any base ring. Don't they give the example
Phi_322 = 2M_322 + M_52 + M_34 + 1/3 M_7
in the preprint?

[OT: Speaking of splitting tickets for easier review, I'm wondering what you think of splitting out the Hall basis from the free-Lie-algebra ticket... I'm pretty positive I could review the Lyndon basis easily enough.]



---

archive/issue_comments_456812.json:
```json
{
    "body": "<a id='comment:3'></a>Replying to [comment:2 darij]:\n> A couple comments (I'm not reviewing this in foreseeable time, but these things caught my eye):\n> \n> 1) I don't like the redefinition of `duality_pairing`. If I make Sage compute the duality pairing between an element in the QSym Phi basis and the NSym H basis, then \"who wins\" -- the standard pairing or the rescaled one? (I guess the rescaled one, but this isn't very natural.)\n\n\nIt doesn't matter because they give the same value.\n\n> Could you move the `ncsf.py` changes to a different ticket, or do you actually use them in `qsym.py`? That would make reviewing easier.\n\n\nIn some ways that is a loaded question. I don't specifically use them, but they do now have a well-defined \"dual\" basis (up to the rescaling). So in some sense it is wrong to not define them, and those are easy, localized additions in `ncsf.py`.\n\n> 2) \n> \n> ```\n> +            \\Phi_I = \\sum_{J \\succ I} z_I / sp_{I,J} M_I,\n> ```\n> The M_I should be M_J here. Same in the \\Psi_I formula.\n\n\nFixed.\n\n> 3) I doubt that the Phi-basis is defined over any base ring. Don't they give the example\n> Phi_322 = 2M_322 + M_52 + M_34 + 1/3 M_7\n> in the preprint?\n\n\nI copied the wrong disclaimer. Fixed.\n\n> [OT: Speaking of splitting tickets for easier review, I'm wondering what you think of splitting out the Hall basis from the free-Lie-algebra ticket... I'm pretty positive I could review the Lyndon basis easily enough.]\n\n\n[I'm opposed to it. The name of the basis is not the best, but it is a different basis, it does work, and it fits naturally with that ticket. I just wish I could find the precise reference that I used for you to look at.]",
    "created_at": "2017-11-04T04:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456812",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>Replying to [comment:2 darij]:
> A couple comments (I'm not reviewing this in foreseeable time, but these things caught my eye):
> 
> 1) I don't like the redefinition of `duality_pairing`. If I make Sage compute the duality pairing between an element in the QSym Phi basis and the NSym H basis, then "who wins" -- the standard pairing or the rescaled one? (I guess the rescaled one, but this isn't very natural.)


It doesn't matter because they give the same value.

> Could you move the `ncsf.py` changes to a different ticket, or do you actually use them in `qsym.py`? That would make reviewing easier.


In some ways that is a loaded question. I don't specifically use them, but they do now have a well-defined "dual" basis (up to the rescaling). So in some sense it is wrong to not define them, and those are easy, localized additions in `ncsf.py`.

> 2) 
> 
> ```
> +            \Phi_I = \sum_{J \succ I} z_I / sp_{I,J} M_I,
> ```
> The M_I should be M_J here. Same in the \Psi_I formula.


Fixed.

> 3) I doubt that the Phi-basis is defined over any base ring. Don't they give the example
> Phi_322 = 2M_322 + M_52 + M_34 + 1/3 M_7
> in the preprint?


I copied the wrong disclaimer. Fixed.

> [OT: Speaking of splitting tickets for easier review, I'm wondering what you think of splitting out the Hall basis from the free-Lie-algebra ticket... I'm pretty positive I could review the Lyndon basis easily enough.]


[I'm opposed to it. The name of the basis is not the best, but it is a different basis, it does work, and it fits naturally with that ticket. I just wish I could find the precise reference that I used for you to look at.]



---

archive/issue_comments_456813.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-04T04:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456813",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456814.json:
```json
{
    "body": "Changing commit from \"42a6df5980d9d32f9890260f5c2c38e65894d12e\" to \"295fabe84c82b993cb23373fe73da5184b557715\"",
    "created_at": "2017-11-04T04:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456814",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "42a6df5980d9d32f9890260f5c2c38e65894d12e" to "295fabe84c82b993cb23373fe73da5184b557715"



---

archive/issue_comments_456815.json:
```json
{
    "body": "<a id='comment:5'></a>Thanks for the fix! But there's one little copypaste bug in there: You refer to \"The `\\Phi`-basis\" in the Psi doc.\n\nAnyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?\n\n[OT about free Lie: Hard to tell without seeing the proper diff, but I believe there are more serious issues with the Hall basis than just the lack of a reference. But even with a reference, I'd need to actually read it. I would review the Lyndon basis ASAP, whereas the Hall one can wait until IMA coding sprints.]\n\nPS. One more typo: `1^{m-1}` should be `1^{m_1}` in both Phi and Psi basis docs.",
    "created_at": "2017-11-04T05:31:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456815",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:5'></a>Thanks for the fix! But there's one little copypaste bug in there: You refer to "The `\Phi`-basis" in the Psi doc.

Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?

[OT about free Lie: Hard to tell without seeing the proper diff, but I believe there are more serious issues with the Hall basis than just the lack of a reference. But even with a reference, I'd need to actually read it. I would review the Lyndon basis ASAP, whereas the Hall one can wait until IMA coding sprints.]

PS. One more typo: `1^{m-1}` should be `1^{m_1}` in both Phi and Psi basis docs.



---

archive/issue_comments_456816.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-04T05:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456816",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_456817.json:
```json
{
    "body": "Changing commit from \"295fabe84c82b993cb23373fe73da5184b557715\" to \"a8848db76501f8bce5cf274d0965eb674433a2ed\"",
    "created_at": "2017-11-04T05:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456817",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "295fabe84c82b993cb23373fe73da5184b557715" to "a8848db76501f8bce5cf274d0965eb674433a2ed"



---

archive/issue_comments_456818.json:
```json
{
    "body": "Changing commit from \"a8848db76501f8bce5cf274d0965eb674433a2ed\" to \"18c88ef6750cd282506ed76e7556a09e1f8722d6\"",
    "created_at": "2017-11-04T05:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456818",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a8848db76501f8bce5cf274d0965eb674433a2ed" to "18c88ef6750cd282506ed76e7556a09e1f8722d6"



---

archive/issue_comments_456819.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-04T05:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456819",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_456820.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:5 darij]:\n> Thanks for the fix! But there's one little copypaste bug in there: You refer to \"The `\\Phi`-basis\" in the Psi doc.\n\n\nFixed (including the PS).\n\n> Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?",
    "created_at": "2017-11-04T05:39:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456820",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Replying to [comment:5 darij]:
> Thanks for the fix! But there's one little copypaste bug in there: You refer to "The `\Phi`-basis" in the Psi doc.


Fixed (including the PS).

> Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?



---

archive/issue_comments_456821.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:5 darij]:\n\n> Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?\n> \n\n\nI haven't read Travis's paper so I'm not totally sure what the issue is: are you saying that Sage will calculate a different duality pairing depending on the basis of the inputs? So the duality pairing of the same two elements would give different answers depending on which basis I expressed the elements in? If that's true, I would be bothered. In that case, can the new pairing be given a different name, e.g. `duality_pairing_phi` or `duality_pairing_scaled`??",
    "created_at": "2017-11-04T05:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456821",
    "user": "https://trac.sagemath.org/admin/accounts/users/amypang"
}
```

<a id='comment:9'></a>Replying to [comment:5 darij]:

> Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?
> 


I haven't read Travis's paper so I'm not totally sure what the issue is: are you saying that Sage will calculate a different duality pairing depending on the basis of the inputs? So the duality pairing of the same two elements would give different answers depending on which basis I expressed the elements in? If that's true, I would be bothered. In that case, can the new pairing be given a different name, e.g. `duality_pairing_phi` or `duality_pairing_scaled`??



---

archive/issue_comments_456822.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 amypang]:\n> Replying to [comment:5 darij]:\n> \n> > Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?\n> > \n\n> \n> I haven't read Travis's paper\n\n\nIt is not my paper.\n\n> so I'm not totally sure what the issue is: are you saying that Sage will calculate a different duality pairing depending on the basis of the inputs? So the duality pairing of the same two elements would give different answers depending on which basis I expressed the elements in? If that's true, I would be bothered. In that case, can the new pairing be given a different name, e.g. `duality_pairing_phi` or `duality_pairing_scaled`??\n\n\nNo, it will not do that. The `duality_pairing` converts the target object to an instance of its dual basis and then does the comparison. It is precisely the same algorithm as for the other bases, except now it just has a scalar when doing the computation. Do it will calculate the same value irregardless of the basis (unless there is a bug). Think of it in terms of bilinear forms, you did a change of basis and got a rescaled bilinear form.",
    "created_at": "2017-11-04T05:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456822",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>Replying to [comment:9 amypang]:
> Replying to [comment:5 darij]:
> 
> > Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?
> > 

> 
> I haven't read Travis's paper


It is not my paper.

> so I'm not totally sure what the issue is: are you saying that Sage will calculate a different duality pairing depending on the basis of the inputs? So the duality pairing of the same two elements would give different answers depending on which basis I expressed the elements in? If that's true, I would be bothered. In that case, can the new pairing be given a different name, e.g. `duality_pairing_phi` or `duality_pairing_scaled`??


No, it will not do that. The `duality_pairing` converts the target object to an instance of its dual basis and then does the comparison. It is precisely the same algorithm as for the other bases, except now it just has a scalar when doing the computation. Do it will calculate the same value irregardless of the basis (unless there is a bug). Think of it in terms of bilinear forms, you did a change of basis and got a rescaled bilinear form.



---

archive/issue_comments_456823.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 tscrim]:\n> Replying to [comment:9 amypang]:\n> > Replying to [comment:5 darij]:\n> > \n> > > Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?\n> > > \n\n> > \n> > I haven't read Travis's paper\n\n> \n> It is not my paper.\n\n\nThanks for the correction.\n> \n> > so I'm not totally sure what the issue is: are you saying that Sage will calculate a different duality pairing depending on the basis of the inputs? So the duality pairing of the same two elements would give different answers depending on which basis I expressed the elements in? If that's true, I would be bothered. In that case, can the new pairing be given a different name, e.g. `duality_pairing_phi` or `duality_pairing_scaled`??\n\n> \n> No, it will not do that. The `duality_pairing` converts the target object to an instance of its dual basis and then does the comparison. It is precisely the same algorithm as for the other bases, except now it just has a scalar when doing the computation. Do it will calculate the same value irregardless of the basis (unless there is a bug). Think of it in terms of bilinear forms, you did a change of basis and got a rescaled bilinear form.\n\n\nDoes this mean the Psi basis of QSym is not dual to the Psi basis of NSym using the usual duality pairing, but using a rescaled version of that??\n\nI don't think I understand how the math of this rescaling works, but since it still gives basis-independent answers I think it's ok.",
    "created_at": "2017-11-04T06:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456823",
    "user": "https://trac.sagemath.org/admin/accounts/users/amypang"
}
```

<a id='comment:11'></a>Replying to [comment:10 tscrim]:
> Replying to [comment:9 amypang]:
> > Replying to [comment:5 darij]:
> > 
> > > Anyone else wants to weigh in whether it is important that `dual` and `duality_pairing` on a CHA WithRealizations always refer to the same pairing, or whether it is OK that the pairing depends on the realization?
> > > 

> > 
> > I haven't read Travis's paper

> 
> It is not my paper.


Thanks for the correction.
> 
> > so I'm not totally sure what the issue is: are you saying that Sage will calculate a different duality pairing depending on the basis of the inputs? So the duality pairing of the same two elements would give different answers depending on which basis I expressed the elements in? If that's true, I would be bothered. In that case, can the new pairing be given a different name, e.g. `duality_pairing_phi` or `duality_pairing_scaled`??

> 
> No, it will not do that. The `duality_pairing` converts the target object to an instance of its dual basis and then does the comparison. It is precisely the same algorithm as for the other bases, except now it just has a scalar when doing the computation. Do it will calculate the same value irregardless of the basis (unless there is a bug). Think of it in terms of bilinear forms, you did a change of basis and got a rescaled bilinear form.


Does this mean the Psi basis of QSym is not dual to the Psi basis of NSym using the usual duality pairing, but using a rescaled version of that??

I don't think I understand how the math of this rescaling works, but since it still gives basis-independent answers I think it's ok.



---

archive/issue_comments_456824.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:11 amypang]:\n> Replying to [comment:12 tscrim]:\n> > No, it will not do that. The `duality_pairing` converts the target object to an instance of its dual basis and then does the comparison. It is precisely the same algorithm as for the other bases, except now it just has a scalar when doing the computation. Do it will calculate the same value irregardless of the basis (unless there is a bug). Think of it in terms of bilinear forms, you did a change of basis and got a rescaled bilinear form.\n\n> \n> Does this mean the Psi basis of QSym is not dual to the Psi basis of NSym using the usual duality pairing, but using a rescaled version of that??\n\n\nYes, that is correct. They are orthogonal instead of orthonormal wrt the standard duality pairing in analogy with the usual powersum symmetric functions and the Hall inner product.",
    "created_at": "2017-11-04T06:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456824",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Replying to [comment:11 amypang]:
> Replying to [comment:12 tscrim]:
> > No, it will not do that. The `duality_pairing` converts the target object to an instance of its dual basis and then does the comparison. It is precisely the same algorithm as for the other bases, except now it just has a scalar when doing the computation. Do it will calculate the same value irregardless of the basis (unless there is a bug). Think of it in terms of bilinear forms, you did a change of basis and got a rescaled bilinear form.

> 
> Does this mean the Psi basis of QSym is not dual to the Psi basis of NSym using the usual duality pairing, but using a rescaled version of that??


Yes, that is correct. They are orthogonal instead of orthonormal wrt the standard duality pairing in analogy with the usual powersum symmetric functions and the Hall inner product.



---

archive/issue_comments_456825.json:
```json
{
    "body": "<a id='comment:13'></a>As long as `b(F).duality_pairing(G)` for all bases `b` and all `F` in Qsym and `G` in NCSF (and `G` in QSym and `F` in NCSF) then I am ok with implementing it. Q: is this faster to implement duality pairing this way?  Before the computation was by coercion.  It is only reason that you might want to implement a version on a particular basis if that method will improve speed.\n\nI object to using the short name for the basis `Phi` and `Psi`.  If you are doing computations in QSym/NCSF you are likely to be using both and the naming convention should be different.  Suggested alternatives: `Phid` and `Psid`, `phi` and `psi`, `Ph` and `Ps`.\n\nYou should add these bases to the list of shorthands.",
    "created_at": "2017-11-04T12:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456825",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:13'></a>As long as `b(F).duality_pairing(G)` for all bases `b` and all `F` in Qsym and `G` in NCSF (and `G` in QSym and `F` in NCSF) then I am ok with implementing it. Q: is this faster to implement duality pairing this way?  Before the computation was by coercion.  It is only reason that you might want to implement a version on a particular basis if that method will improve speed.

I object to using the short name for the basis `Phi` and `Psi`.  If you are doing computations in QSym/NCSF you are likely to be using both and the naming convention should be different.  Suggested alternatives: `Phid` and `Psid`, `phi` and `psi`, `Ph` and `Ps`.

You should add these bases to the list of shorthands.



---

archive/issue_comments_456826.json:
```json
{
    "body": "<a id='comment:14'></a>Eeks.  What am I saying?  The dual basis to `NCSF.Phi()` is not `QSym.Phi()`, it is `QSym.Phi()` normalized.  I think that you should not implement `dual_basis` for either of these bases unless you are going to implement the scaled version of the dual basis.\n\nIn analogy with symmetric functions we have:\n\n```\nsage: SymmetricFunctions(QQ).inject_shorthands(verbose=False)\nsage: P = p.dual_basis()\nsage: P(s[2,1])\n2*d_p[1, 1, 1] - d_p[3]\n```",
    "created_at": "2017-11-04T12:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456826",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:14'></a>Eeks.  What am I saying?  The dual basis to `NCSF.Phi()` is not `QSym.Phi()`, it is `QSym.Phi()` normalized.  I think that you should not implement `dual_basis` for either of these bases unless you are going to implement the scaled version of the dual basis.

In analogy with symmetric functions we have:

```
sage: SymmetricFunctions(QQ).inject_shorthands(verbose=False)
sage: P = p.dual_basis()
sage: P(s[2,1])
2*d_p[1, 1, 1] - d_p[3]
```



---

archive/issue_comments_456827.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-11-04T14:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456827",
    "user": "https://github.com/zabrocki"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_456828.json:
```json
{
    "body": "Changing commit from \"18c88ef6750cd282506ed76e7556a09e1f8722d6\" to \"549fe24039f61cb915df5a34e760567c065e6594\"",
    "created_at": "2017-11-06T05:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456828",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "18c88ef6750cd282506ed76e7556a09e1f8722d6" to "549fe24039f61cb915df5a34e760567c065e6594"



---

archive/issue_comments_456829.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-06T05:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456829",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456830.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-11-06T05:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456830",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_456831.json:
```json
{
    "body": "<a id='comment:17'></a>I opted to just remove the `dual` (and `duality_pairing`). I also chose `phi` and `psi` for the names of the bases in QSym, although this does break the convention of bases being indexed by uppercase letters. I don't quite want to change it to `Phid` and Psid` so to reserve those for when the actual duals get implemented.",
    "created_at": "2017-11-06T05:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456831",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>I opted to just remove the `dual` (and `duality_pairing`). I also chose `phi` and `psi` for the names of the bases in QSym, although this does break the convention of bases being indexed by uppercase letters. I don't quite want to change it to `Phid` and Psid` so to reserve those for when the actual duals get implemented.



---

archive/issue_comments_456832.json:
```json
{
    "body": "Changing commit from \"549fe24039f61cb915df5a34e760567c065e6594\" to \"fe639c18b947e12ce5f97be9d892c5f2bdc7cc89\"",
    "created_at": "2017-11-06T13:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "549fe24039f61cb915df5a34e760567c065e6594" to "fe639c18b947e12ce5f97be9d892c5f2bdc7cc89"



---

archive/issue_comments_456833.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-06T13:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456834.json:
```json
{
    "body": "Changing commit from \"fe639c18b947e12ce5f97be9d892c5f2bdc7cc89\" to \"cf9088612e3f5e2502f0d61aeb8cd8901e3d856a\"",
    "created_at": "2017-11-08T13:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fe639c18b947e12ce5f97be9d892c5f2bdc7cc89" to "cf9088612e3f5e2502f0d61aeb8cd8901e3d856a"



---

archive/issue_comments_456835.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-08T13:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456836.json:
```json
{
    "body": "<a id='comment:20'></a>Does anyone object that there is a psi-involution and a psi basis (Darij? since you chose the name for psi-involution)?\n\n```\nsage: psi([3,2]).psi_involution()\n-psi[3, 2] - 1/5*psi[5]\n```",
    "created_at": "2017-11-08T14:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456836",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:20'></a>Does anyone object that there is a psi-involution and a psi basis (Darij? since you chose the name for psi-involution)?

```
sage: psi([3,2]).psi_involution()
-psi[3, 2] - 1/5*psi[5]
```



---

archive/issue_comments_456837.json:
```json
{
    "body": "<a id='comment:21'></a>I'm fine with these names.",
    "created_at": "2017-11-13T07:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456837",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:21'></a>I'm fine with these names.



---

archive/issue_comments_456838.json:
```json
{
    "body": "Changing commit from \"cf9088612e3f5e2502f0d61aeb8cd8901e3d856a\" to \"90c5b7c649f7fa6e2a83286d22cc7743fb43e5a8\"",
    "created_at": "2017-11-14T11:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cf9088612e3f5e2502f0d61aeb8cd8901e3d856a" to "90c5b7c649f7fa6e2a83286d22cc7743fb43e5a8"



---

archive/issue_comments_456839.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-14T11:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456840.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Mike Zabrocki\"",
    "created_at": "2017-11-14T11:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456840",
    "user": "https://github.com/zabrocki"
}
```

Changing reviewer from "" to "Mike Zabrocki"



---

archive/issue_comments_456841.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Following https://arxiv.org/abs/1710.11613, we can define Psi and Phi bases for QSym: the powersum bases of the first and second kind.\n+Following https://arxiv.org/abs/1710.11613, we can define psi and phi bases for QSym: the powersum bases of the first and second kind.\n \n Author: Travis Scrimshaw\n \n``````\n",
    "created_at": "2017-11-14T11:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456841",
    "user": "https://github.com/zabrocki"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Following https://arxiv.org/abs/1710.11613, we can define Psi and Phi bases for QSym: the powersum bases of the first and second kind.
+Following https://arxiv.org/abs/1710.11613, we can define psi and phi bases for QSym: the powersum bases of the first and second kind.
 
 Author: Travis Scrimshaw
 
``````




---

archive/issue_comments_456842.json:
```json
{
    "body": "<a id='comment:23'></a>LGTM",
    "created_at": "2017-11-14T11:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456842",
    "user": "https://github.com/zabrocki"
}
```

<a id='comment:23'></a>LGTM



---

archive/issue_comments_456843.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-14T11:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456843",
    "user": "https://github.com/zabrocki"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_456844.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-11T01:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456844",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_456845.json:
```json
{
    "body": "Changing branch from \"public/combinat/powersum_qsym-24144\" to \"90c5b7c649f7fa6e2a83286d22cc7743fb43e5a8\"",
    "created_at": "2017-12-11T01:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24144#issuecomment-456845",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/combinat/powersum_qsym-24144" to "90c5b7c649f7fa6e2a83286d22cc7743fb43e5a8"



---

archive/issue_events_061254.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-11T01:03:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24144",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24144#event-61254"
}
```
