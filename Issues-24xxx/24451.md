# Issue 24451: Polyhedron.get_integral_point

archive/issues_024214.json:
```json
{
    "body": "This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to sorted(Polyhedron.integral_points())[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.\n\nThis method is useful for performing random sampling of integral points since it allows points to be chosen uniformly at random via:\n\n```\n    index = randint(0, P.integral_points_count())\n    point = P.get_integral_point(index)\n```\n\nCC:  @videlec tmonteil @mkoeppe\n\nKeywords: Polyhedron, integral_points\n\nReviewer: Vincent Delecroix, Travis Scrimshaw\n\nAuthor: Mark Bell\n\nBranch: 73fbd0571a629071bceb1300d699f0b826e983c1\n\nCommit: 73fbd0571a629071bceb1300d699f0b826e983c1\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24451\n\n",
    "closed_at": "2018-01-18T18:09:14Z",
    "created_at": "2017-12-30T21:36:39Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Polyhedron.get_integral_point",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24451",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```
This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to sorted(Polyhedron.integral_points())[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.

This method is useful for performing random sampling of integral points since it allows points to be chosen uniformly at random via:

```
    index = randint(0, P.integral_points_count())
    point = P.get_integral_point(index)
```

CC:  @videlec tmonteil @mkoeppe

Keywords: Polyhedron, integral_points

Reviewer: Vincent Delecroix, Travis Scrimshaw

Author: Mark Bell

Branch: 73fbd0571a629071bceb1300d699f0b826e983c1

Commit: 73fbd0571a629071bceb1300d699f0b826e983c1

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24451





---

archive/issue_comments_338725.json:
```json
{
    "body": "Changing keywords from \"\" to \"Polyhedron, integral_points\".",
    "created_at": "2017-12-30T21:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338725",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```

Changing keywords from "" to "Polyhedron, integral_points".



---

archive/issue_comments_338726.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-30T21:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338726",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_338727.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-12-30T21:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338727",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_338728.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to geometry.",
    "created_at": "2017-12-30T21:51:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338728",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```

Changing component from PLEASE CHANGE to geometry.



---

archive/issue_comments_338729.json:
```json
{
    "body": "<a id='comment:3'></a>Mark,\n\nAs we discussed in Warwick, this method is rather unnatural (integer points are not naturally indexed) and is not needed for random sampling. To my mind, it would make more sense to have a new method `.random_integral_point` implemented along the same lines.",
    "created_at": "2017-12-30T21:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338729",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>Mark,

As we discussed in Warwick, this method is rather unnatural (integer points are not naturally indexed) and is not needed for random sampling. To my mind, it would make more sense to have a new method `.random_integral_point` implemented along the same lines.



---

archive/issue_comments_338730.json:
```json
{
    "body": "<a id='comment:4'></a>Sure, that would be a simple enough thing to change - should I open a new ticket?",
    "created_at": "2017-12-30T22:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338730",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```

<a id='comment:4'></a>Sure, that would be a simple enough thing to change - should I open a new ticket?



---

archive/issue_comments_338731.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 mcbell]:\n> Sure, that would be a simple enough thing to change - should I open a new ticket?\n\n\nThough, I do not think I was right: e.g. integral points are naturally indexed for the lexicographical ordering. In the description, you claim to follow the ordering of `integral_points`. Is it always lexicographic? I could not find any mention of ordering in the documentation. Note in particular that `integral_points` claims to have two implementations\n\n```\nUses either the naive algorithm (iterate over a rectangular\nbounding box) or triangulation + Smith form.\n```\nThe ordering is independent of the method?\n\nBTW, your branch `u/mcbell/polyhedron_get_integral_point` does not exist. Is that normal?\n\nAbout `get_integral_point` vs `random_integral_point` you are free to do whatever you want with your ticket :-)",
    "created_at": "2017-12-30T22:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338731",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>Replying to [comment:4 mcbell]:
> Sure, that would be a simple enough thing to change - should I open a new ticket?


Though, I do not think I was right: e.g. integral points are naturally indexed for the lexicographical ordering. In the description, you claim to follow the ordering of `integral_points`. Is it always lexicographic? I could not find any mention of ordering in the documentation. Note in particular that `integral_points` claims to have two implementations

```
Uses either the naive algorithm (iterate over a rectangular
bounding box) or triangulation + Smith form.
```
The ordering is independent of the method?

BTW, your branch `u/mcbell/polyhedron_get_integral_point` does not exist. Is that normal?

About `get_integral_point` vs `random_integral_point` you are free to do whatever you want with your ticket :-)



---

archive/issue_comments_338732.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-30T23:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338732",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338733.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 vdelecroix]:\n\nThanks for the great comments. I think I've now managed to push my branch onto trac so you should be able to see the code.\n\n> Though, I do not think I was right: e.g. integral points are naturally indexed for the lexicographical ordering. In the description, you claim to follow the ordering of `integral_points`. Is it always lexicographic? I could not find any mention of ordering in the documentation. Note in particular that `integral_points` claims to have two implementations\n> \n> ```\n> Uses either the naive algorithm (iterate over a rectangular\n> bounding box) or triangulation + Smith form.\n> ```\n> The ordering is independent of the method?\n\nAh, you are correct, you are not guaranteed to get lexicographical ordering when the triangulation method is used. In part this is caused by the fact that the points that are found in the different triangles are just merged together using a set. Perhaps L5288 of src/sage/geometrypolyhedron/base.py should become \"return tuple(sorted(points))\" to make the method deterministic. So the correct thing to say is that this method returns\n\n```\nsorted(self.integral_points())[index]\n```\nI've updated the docstring and above explanation to reflect this.\n\nMy new suggestion, which is in the latest commits, is to also add a Polyhedron.random_integral_point() method that just uses the snippet I posted originally.",
    "created_at": "2017-12-31T00:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338733",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```

<a id='comment:7'></a>Replying to [comment:5 vdelecroix]:

Thanks for the great comments. I think I've now managed to push my branch onto trac so you should be able to see the code.

> Though, I do not think I was right: e.g. integral points are naturally indexed for the lexicographical ordering. In the description, you claim to follow the ordering of `integral_points`. Is it always lexicographic? I could not find any mention of ordering in the documentation. Note in particular that `integral_points` claims to have two implementations
> 
> ```
> Uses either the naive algorithm (iterate over a rectangular
> bounding box) or triangulation + Smith form.
> ```
> The ordering is independent of the method?

Ah, you are correct, you are not guaranteed to get lexicographical ordering when the triangulation method is used. In part this is caused by the fact that the points that are found in the different triangles are just merged together using a set. Perhaps L5288 of src/sage/geometrypolyhedron/base.py should become "return tuple(sorted(points))" to make the method deterministic. So the correct thing to say is that this method returns

```
sorted(self.integral_points())[index]
```
I've updated the docstring and above explanation to reflect this.

My new suggestion, which is in the latest commits, is to also add a Polyhedron.random_integral_point() method that just uses the snippet I posted originally.



---

archive/issue_comments_338734.json:
```json
{
    "body": "<a id='comment:9'></a>Concerning, `P.integral_points()`, I think that it should even be an iterator (as most things in Python3). Hence I am against sorting. If the user needs a sorted list, she can just apply a sort on the result.\n\nFor polytopes \"with small interior\", I believe that it is much faster to compute the set of points first and then do random sampling (while keeping the list in some cache). But let us keep that for later on.\n\nFor more concrete comments: when the polytope has no integral points the method `random_integral_point` should raise an `EmptySetError` (from `sage.categories.sets_cat`). And in both methods, the error have to be doctested. It should look like\n\n```\nsage: my_polytope_without_integral_points.random_integral_point()\nTraceback (most recent call last):\n...\nEmptySetError: error-message\n```\n(you can have a look around in the code)",
    "created_at": "2017-12-31T10:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338734",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>Concerning, `P.integral_points()`, I think that it should even be an iterator (as most things in Python3). Hence I am against sorting. If the user needs a sorted list, she can just apply a sort on the result.

For polytopes "with small interior", I believe that it is much faster to compute the set of points first and then do random sampling (while keeping the list in some cache). But let us keep that for later on.

For more concrete comments: when the polytope has no integral points the method `random_integral_point` should raise an `EmptySetError` (from `sage.categories.sets_cat`). And in both methods, the error have to be doctested. It should look like

```
sage: my_polytope_without_integral_points.random_integral_point()
Traceback (most recent call last):
...
EmptySetError: error-message
```
(you can have a look around in the code)



---

archive/issue_comments_338735.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-31T12:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338735",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338736.json:
```json
{
    "body": "<a id='comment:11'></a>For random sampling you should not use the directly the `random` module but\n\n```\nsage: from sage.misc.randstate import current_randstate\nsage: random = current_randstate().python_random()\nsage: random.randint(0,5)\n0\nsage: random.randint(0,5)\n5\n```\nThe reason is that Sage has to take care of a lot of random generators coming from different libraries (Python, gmp, GAP, PARI/GP, etc). All of them are initialized through a unique function `set_random_seed`. As a consequence, all the generators has to be taken from the `current_randstate`.\n\nYou can compare\n\n```\nsage: set_random_seed(5); [current_randstate().python_random().randint(0,10) for _ in range(5)]\n[0, 5, 2, 3, 5]\nsage: set_random_seed(5); [current_randstate().python_random().randint(0,10) for _ in range(5)]\n[0, 5, 2, 3, 5]\n```\nversus\n\n```\nsage: import random\nsage: set_random_seed(5); [random.randint(0,10) for _ in range(5)]\n[9, 8, 3, 8, 2]\nsage: set_random_seed(5); [random.randint(0,10) for _ in range(5)]\n[9, 6, 1, 8, 5]\n```",
    "created_at": "2017-12-31T12:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338736",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>For random sampling you should not use the directly the `random` module but

```
sage: from sage.misc.randstate import current_randstate
sage: random = current_randstate().python_random()
sage: random.randint(0,5)
0
sage: random.randint(0,5)
5
```
The reason is that Sage has to take care of a lot of random generators coming from different libraries (Python, gmp, GAP, PARI/GP, etc). All of them are initialized through a unique function `set_random_seed`. As a consequence, all the generators has to be taken from the `current_randstate`.

You can compare

```
sage: set_random_seed(5); [current_randstate().python_random().randint(0,10) for _ in range(5)]
[0, 5, 2, 3, 5]
sage: set_random_seed(5); [current_randstate().python_random().randint(0,10) for _ in range(5)]
[0, 5, 2, 3, 5]
```
versus

```
sage: import random
sage: set_random_seed(5); [random.randint(0,10) for _ in range(5)]
[9, 8, 3, 8, 2]
sage: set_random_seed(5); [random.randint(0,10) for _ in range(5)]
[9, 6, 1, 8, 5]
```



---

archive/issue_comments_338737.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-31T13:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338737",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338738.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-31T13:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338738",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338739.json:
```json
{
    "body": "<a id='comment:14'></a>For consistency, could you make the output of `get_integral_point` an immutable vector\n\n```\nsage: P = polytopes.icosahedron()\nsage: P.integral_points()[0].is_mutable()\nFalse\nsage: P.get_integral_point(0).is_mutable()\nTrue\n```\n(Just use the method `.set_immutable()` of vectors.)",
    "created_at": "2017-12-31T14:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338739",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>For consistency, could you make the output of `get_integral_point` an immutable vector

```
sage: P = polytopes.icosahedron()
sage: P.integral_points()[0].is_mutable()
False
sage: P.get_integral_point(0).is_mutable()
True
```
(Just use the method `.set_immutable()` of vectors.)



---

archive/issue_comments_338740.json:
```json
{
    "body": "<a id='comment:15'></a>Why do you consider the inequality `[-lower] + [0] * i + [1] + [0] * (D - i - 1)`. Shouldn't this be redundant?\n\nI believe that it would be faster to just add one equality at a time (we can possibly speed that up later on). Namely, I would rather keep the polyhedron `self` intersected with `extra_eqns` along the loop. In pseudo code\n\n```\nP = self\nfor i in {0, ..., dimension-1}:\n    P_left = P intersection left_guess\n    count_left = P_left.count()\n    if count_left < index:\n        P = P_left\n    else:\n        P = P intersection right_guess\n        index -= count_left\n```",
    "created_at": "2017-12-31T14:47:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338740",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>Why do you consider the inequality `[-lower] + [0] * i + [1] + [0] * (D - i - 1)`. Shouldn't this be redundant?

I believe that it would be faster to just add one equality at a time (we can possibly speed that up later on). Namely, I would rather keep the polyhedron `self` intersected with `extra_eqns` along the loop. In pseudo code

```
P = self
for i in {0, ..., dimension-1}:
    P_left = P intersection left_guess
    count_left = P_left.count()
    if count_left < index:
        P = P_left
    else:
        P = P intersection right_guess
        index -= count_left
```



---

archive/issue_comments_338741.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 vdelecroix]:\n> Why do you consider the inequality `[-lower] + [0] * i + [1] + [0] * (D - i - 1)`. Shouldn't this be redundant?\n\nSo this was needed precisely because of the fact that previously found inequalities were not added to the polyhedron.\n\n> I believe that it would be faster to just add one equality at a time (we can possibly speed that up later on). Namely, I would rather keep the polyhedron `self` intersected with `extra_eqns` along the loop. In pseudo code\n> \n> ```\n> P = self\n> for i in {0, ..., dimension-1}:\n>     P_left = P intersection left_guess\n>     count_left = P_left.count()\n>     if count_left < index:\n>         P = P_left\n>     else:\n>         P = P intersection right_guess\n>         index -= count_left\n> ```\n\nSure, that would probably be even faster since the polyhedron will become smaller as the process goes on. I've just finished a new version based on your pseudo-code which repeatedly defines P as the intersection of P with a halfspace. Although of course it includes a while loop to keep doing the subdivisions on the x_i coordinate until it is uniquely determined.",
    "created_at": "2017-12-31T15:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338741",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```

<a id='comment:17'></a>Replying to [comment:15 vdelecroix]:
> Why do you consider the inequality `[-lower] + [0] * i + [1] + [0] * (D - i - 1)`. Shouldn't this be redundant?

So this was needed precisely because of the fact that previously found inequalities were not added to the polyhedron.

> I believe that it would be faster to just add one equality at a time (we can possibly speed that up later on). Namely, I would rather keep the polyhedron `self` intersected with `extra_eqns` along the loop. In pseudo code
> 
> ```
> P = self
> for i in {0, ..., dimension-1}:
>     P_left = P intersection left_guess
>     count_left = P_left.count()
>     if count_left < index:
>         P = P_left
>     else:
>         P = P intersection right_guess
>         index -= count_left
> ```

Sure, that would probably be even faster since the polyhedron will become smaller as the process goes on. I've just finished a new version based on your pseudo-code which repeatedly defines P as the intersection of P with a halfspace. Although of course it includes a while loop to keep doing the subdivisions on the x_i coordinate until it is uniquely determined.



---

archive/issue_comments_338742.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-31T15:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338743.json:
```json
{
    "body": "<a id='comment:19'></a>With the current code, you might construct and intersect polyhedra on different base ring. Instead of `Polyhedron(XXX)` it would be better to use\n\n```\nS = self.parent()\nS(ieqs=[[guess-1] + [0] * i + [-1] + [0] * (D - i - 1)])\n```",
    "created_at": "2018-01-01T13:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338743",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>With the current code, you might construct and intersect polyhedra on different base ring. Instead of `Polyhedron(XXX)` it would be better to use

```
S = self.parent()
S(ieqs=[[guess-1] + [0] * i + [-1] + [0] * (D - i - 1)])
```



---

archive/issue_comments_338744.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-01T14:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338745.json:
```json
{
    "body": "<a id='comment:21'></a>Apparently, there is a problem with the last commit\n\n```\nsage -t --long src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5332, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\nFailed example:\n    P.get_integral_point(1)\nExpected:\n    (0, 0)\nGot:\n    (0, -1)\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5340, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\nFailed example:\n    [Q.get_integral_point(i) for i in range(Q.integral_points_count())] == sorted(Q.integral_points())\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5408, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point\nFailed example:\n    P.random_integral_point() in P.integral_points()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\nThe reason is that the syntax is different (I was wrong in [This is the Trac macro *comment:19* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#comment:19-macro))\n\n```\nsage: P = Polyhedron(ieqs=[[0,1,0,0]])\nsage: P\nA 3-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex, 1 ray, 2 lines\nsage: PP\nPolyhedra in QQ^3\nsage: PP(ieqs=[[0,1,0,0]])   # this is wrong\nA 0-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex\nsage: Vrep = None\nsage: Hrep = [[[0,1,0,0]], []]\nsage: PP(Vrep, Hrep)  # this is right\nA 3-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex, 1 ray, 2 lines\n```",
    "created_at": "2018-01-02T15:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338745",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>Apparently, there is a problem with the last commit

```
sage -t --long src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5332, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
Failed example:
    P.get_integral_point(1)
Expected:
    (0, 0)
Got:
    (0, -1)
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5340, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
Failed example:
    [Q.get_integral_point(i) for i in range(Q.integral_points_count())] == sorted(Q.integral_points())
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5408, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point
Failed example:
    P.random_integral_point() in P.integral_points()
Expected:
    True
Got:
    False
**********************************************************************
```
The reason is that the syntax is different (I was wrong in [This is the Trac macro *comment:19* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#comment:19-macro))

```
sage: P = Polyhedron(ieqs=[[0,1,0,0]])
sage: P
A 3-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex, 1 ray, 2 lines
sage: PP
Polyhedra in QQ^3
sage: PP(ieqs=[[0,1,0,0]])   # this is wrong
A 0-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex
sage: Vrep = None
sage: Hrep = [[[0,1,0,0]], []]
sage: PP(Vrep, Hrep)  # this is right
A 3-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex, 1 ray, 2 lines
```



---

archive/issue_comments_338746.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-02T16:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338747.json:
```json
{
    "body": "<a id='comment:23'></a>In the description, I would rather use `\"Return the ``index``-th integral point.\"` as `sorted(self.integral_points())[index]` is not very readable. Though you can use the code in the paragraph description below, and more importantly (as you already did) in the examples.\n\nOn the other hand, the OUTPUT section is intended to describe the output type (and is not mandatory). As your function is simple enough, I would just remove it. You can merge the paragraph describing the method and the one from the OUTPUT.\n\nAfter that, I think the branch is good enough for a first version!",
    "created_at": "2018-01-02T17:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338747",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>In the description, I would rather use `"Return the ``index``-th integral point."` as `sorted(self.integral_points())[index]` is not very readable. Though you can use the code in the paragraph description below, and more importantly (as you already did) in the examples.

On the other hand, the OUTPUT section is intended to describe the output type (and is not mandatory). As your function is simple enough, I would just remove it. You can merge the paragraph describing the method and the one from the OUTPUT.

After that, I think the branch is good enough for a first version!



---

archive/issue_comments_338748.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-02T17:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338748",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338749.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-02T18:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338749",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338750.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-05T01:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338751.json:
```json
{
    "body": "<a id='comment:27'></a>Can you doctest the fact that `**kwds` are passed (for example you can pass a wrong keyword)?",
    "created_at": "2018-01-05T13:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338751",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>Can you doctest the fact that `**kwds` are passed (for example you can pass a wrong keyword)?



---

archive/issue_comments_338752.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-05T16:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338752",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338753.json:
```json
{
    "body": "<a id='comment:29'></a>typo in the doc: `it bisects the the upper`",
    "created_at": "2018-01-06T21:07:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338753",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>typo in the doc: `it bisects the the upper`



---

archive/issue_comments_338754.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-06T21:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338754",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338755.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-08T21:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338755",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_338756.json:
```json
{
    "body": "<a id='comment:31'></a>let it go",
    "created_at": "2018-01-08T21:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338756",
    "user": "https://github.com/videlec"
}
```

<a id='comment:31'></a>let it go



---

archive/issue_comments_338757.json:
```json
{
    "body": "<a id='comment:32'></a>\n```\nsage -t --long --warn-long 78.8 src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5369, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\nFailed example:\n    Q.get_integral_point(0, explicit_enumeration_threshold=0, triangulation='cddlib')\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point[7]>\", line 1, in <module>\n        Q.get_integral_point(Integer(0), explicit_enumeration_threshold=Integer(0), triangulation='cddlib')\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5386, in get_integral_point\n        if not 0 <= index < self.integral_points_count(**kwds):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py\", line 218, in integral_points_count\n        **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py\", line 150, in count\n        raise PackageNotFoundError('latte_int')\n    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5371, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\nFailed example:\n    Q.get_integral_point(0, explicit_enumeration_threshold=0, triangulation='cddlib', foo=True)\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: ...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point[8]>\", line 1, in <module>\n        Q.get_integral_point(Integer(0), explicit_enumeration_threshold=Integer(0), triangulation='cddlib', foo=True)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5386, in get_integral_point\n        if not 0 <= index < self.integral_points_count(**kwds):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py\", line 218, in integral_points_count\n        **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py\", line 150, in count\n        raise PackageNotFoundError('latte_int')\n    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5443, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point\nFailed example:\n    P.random_integral_point(explicit_enumeration_threshold=0, triangulation='cddlib')  # random\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point[3]>\", line 1, in <module>\n        P.random_integral_point(explicit_enumeration_threshold=Integer(0), triangulation='cddlib')  # random\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5470, in random_integral_point\n        return self.get_integral_point(current_randstate().python_random().randint(0, count-1), **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5386, in get_integral_point\n        if not 0 <= index < self.integral_points_count(**kwds):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py\", line 218, in integral_points_count\n        **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py\", line 150, in count\n        raise PackageNotFoundError('latte_int')\n    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5445, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point\nFailed example:\n    P.random_integral_point(explicit_enumeration_threshold=0, triangulation='cddlib', foo=7)\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: ...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point[4]>\", line 1, in <module>\n        P.random_integral_point(explicit_enumeration_threshold=Integer(0), triangulation='cddlib', foo=Integer(7))\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5470, in random_integral_point\n        return self.get_integral_point(current_randstate().python_random().randint(0, count-1), **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5386, in get_integral_point\n        if not 0 <= index < self.integral_points_count(**kwds):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py\", line 218, in integral_points_count\n        **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py\", line 150, in count\n        raise PackageNotFoundError('latte_int')\n    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell\n**********************************************************************\n2 items had failures:\n   2 of  12 in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\n   2 of  10 in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point\n    [998 tests, 4 failures, 55.73 s]\n```",
    "created_at": "2018-01-13T19:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338757",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>
```
sage -t --long --warn-long 78.8 src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5369, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
Failed example:
    Q.get_integral_point(0, explicit_enumeration_threshold=0, triangulation='cddlib')
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point[7]>", line 1, in <module>
        Q.get_integral_point(Integer(0), explicit_enumeration_threshold=Integer(0), triangulation='cddlib')
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5386, in get_integral_point
        if not 0 <= index < self.integral_points_count(**kwds):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py", line 218, in integral_points_count
        **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py", line 150, in count
        raise PackageNotFoundError('latte_int')
    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5371, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
Failed example:
    Q.get_integral_point(0, explicit_enumeration_threshold=0, triangulation='cddlib', foo=True)
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: ...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point[8]>", line 1, in <module>
        Q.get_integral_point(Integer(0), explicit_enumeration_threshold=Integer(0), triangulation='cddlib', foo=True)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5386, in get_integral_point
        if not 0 <= index < self.integral_points_count(**kwds):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py", line 218, in integral_points_count
        **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py", line 150, in count
        raise PackageNotFoundError('latte_int')
    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5443, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point
Failed example:
    P.random_integral_point(explicit_enumeration_threshold=0, triangulation='cddlib')  # random
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point[3]>", line 1, in <module>
        P.random_integral_point(explicit_enumeration_threshold=Integer(0), triangulation='cddlib')  # random
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5470, in random_integral_point
        return self.get_integral_point(current_randstate().python_random().randint(0, count-1), **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5386, in get_integral_point
        if not 0 <= index < self.integral_points_count(**kwds):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py", line 218, in integral_points_count
        **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py", line 150, in count
        raise PackageNotFoundError('latte_int')
    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5445, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point
Failed example:
    P.random_integral_point(explicit_enumeration_threshold=0, triangulation='cddlib', foo=7)
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: ...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point[4]>", line 1, in <module>
        P.random_integral_point(explicit_enumeration_threshold=Integer(0), triangulation='cddlib', foo=Integer(7))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5470, in random_integral_point
        return self.get_integral_point(current_randstate().python_random().randint(0, count-1), **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5386, in get_integral_point
        if not 0 <= index < self.integral_points_count(**kwds):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py", line 218, in integral_points_count
        **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py", line 150, in count
        raise PackageNotFoundError('latte_int')
    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell
**********************************************************************
2 items had failures:
   2 of  12 in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
   2 of  10 in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point
    [998 tests, 4 failures, 55.73 s]
```



---

archive/issue_comments_338758.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-01-13T19:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338758",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_338759.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-13T22:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338759",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_338760.json:
```json
{
    "body": "<a id='comment:34'></a>I think this updated version should have the doctests that require latte_int flagged correctly. However to test this I had to go into my install of sage and manually delete /build/pkgs/latte_int and ./local/bin/count. Is there an easier way to (temporarily) uninstall an optional sage package?",
    "created_at": "2018-01-15T12:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338760",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcbell"
}
```

<a id='comment:34'></a>I think this updated version should have the doctests that require latte_int flagged correctly. However to test this I had to go into my install of sage and manually delete /build/pkgs/latte_int and ./local/bin/count. Is there an easier way to (temporarily) uninstall an optional sage package?



---

archive/issue_comments_338761.json:
```json
{
    "body": "<a id='comment:35'></a>Right now there is not, but Erik Bray (embray) is currently working on developing this. IIRC he has a post on sage-devel within the past month or so about the progress of this.",
    "created_at": "2018-01-15T15:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338761",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:35'></a>Right now there is not, but Erik Bray (embray) is currently working on developing this. IIRC he has a post on sage-devel within the past month or so about the progress of this.



---

archive/issue_comments_338762.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-01-15T15:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338762",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_061744.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-18T18:09:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24451#event-61744"
}
```



---

archive/issue_comments_338763.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-18T18:09:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24451#issuecomment-338763",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
