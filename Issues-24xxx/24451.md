# Issue 24451: Polyhedron.get_integral_point

archive/issues_024214.json:
```json
{
    "assignees": [],
    "body": "This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to sorted(Polyhedron.integral_points())[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.\n\nThis method is useful for performing random sampling of integral points since it allows points to be chosen uniformly at random via:\n\n```\n    index = randint(0, P.integral_points_count())\n    point = P.get_integral_point(index)\n```\n\nCC:  @videlec @sagetrac-tmonteil @mkoeppe\n\nKeywords: **Polyhedron, integral_points**\n\nBranch/Commit: **[`73fbd05`](https://github.com/sagemath/sagetrac-mirror/commit/73fbd0571a629071bceb1300d699f0b826e983c1)**\n\nReviewer: **Vincent Delecroix, Travis Scrimshaw**\n\nAuthor: **Mark Bell**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24451_\n\n",
    "closed_at": "2018-01-18T18:09:14Z",
    "created_at": "2017-12-30T21:36:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Polyhedron.get_integral_point",
    "type": "issue",
    "updated_at": "2018-01-18T18:09:14Z",
    "url": "https://github.com/sagemath/sage/issues/24451",
    "user": "https://github.com/sagetrac-mcbell"
}
```
This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to sorted(Polyhedron.integral_points())[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.

This method is useful for performing random sampling of integral points since it allows points to be chosen uniformly at random via:

```
    index = randint(0, P.integral_points_count())
    point = P.get_integral_point(index)
```

CC:  @videlec @sagetrac-tmonteil @mkoeppe

Keywords: **Polyhedron, integral_points**

Branch/Commit: **[`73fbd05`](https://github.com/sagemath/sagetrac-mirror/commit/73fbd0571a629071bceb1300d699f0b826e983c1)**

Reviewer: **Vincent Delecroix, Travis Scrimshaw**

Author: **Mark Bell**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/24451_





---

archive/issue_events_340347.json:
```json
{
    "actor": "https://github.com/sagetrac-mcbell",
    "created_at": "2017-12-30T21:36:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340347"
}
```



---

archive/issue_events_340348.json:
```json
{
    "actor": "https://github.com/sagetrac-mcbell",
    "created_at": "2017-12-30T21:36:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340348"
}
```



---

archive/issue_comments_370058.json:
```json
{
    "body": "Branch: **[u/mcbell/polyhedron_get_integral_point](https://github.com/sagemath/sagetrac-mirror/tree/u/mcbell/polyhedron_get_integral_point)**",
    "created_at": "2017-12-30T21:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370058",
    "user": "https://github.com/sagetrac-mcbell"
}
```

Branch: **[u/mcbell/polyhedron_get_integral_point](https://github.com/sagemath/sagetrac-mirror/tree/u/mcbell/polyhedron_get_integral_point)**



---

archive/issue_comments_370059.json:
```json
{
    "body": "Changed keywords from none to **Polyhedron, integral_points**",
    "created_at": "2017-12-30T21:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370059",
    "user": "https://github.com/sagetrac-mcbell"
}
```

Changed keywords from none to **Polyhedron, integral_points**



---

archive/issue_comments_370060.json:
```json
{
    "body": "Commit: **[`d3b9b39`](https://github.com/sagemath/sagetrac-mirror/commit/d3b9b396c1dc9d6ca8c9478b01035454ebbe1f74)**",
    "created_at": "2017-12-30T21:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370060",
    "user": "https://github.com/sagetrac-mcbell"
}
```

Commit: **[`d3b9b39`](https://github.com/sagemath/sagetrac-mirror/commit/d3b9b396c1dc9d6ca8c9478b01035454ebbe1f74)**



---

archive/issue_comments_370061.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,8 @@\n+This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to Polyhedron.integral_points()[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.\n \n+This method is useful for performing random sampling of integral points since it allows points to be chosen uniformly at random via:\n+\n+```\n+    index = randint(0, P.integral_points_count())\n+    point = P.get_integral_point(index)\n+```\n``````\n",
    "created_at": "2017-12-30T21:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370061",
    "user": "https://github.com/sagetrac-mcbell"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,8 @@
+This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to Polyhedron.integral_points()[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.
 
+This method is useful for performing random sampling of integral points since it allows points to be chosen uniformly at random via:
+
+```
+    index = randint(0, P.integral_points_count())
+    point = P.get_integral_point(index)
+```
``````




---

archive/issue_events_340349.json:
```json
{
    "actor": "https://github.com/sagetrac-mcbell",
    "created_at": "2017-12-30T21:51:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340349"
}
```



---

archive/issue_events_340350.json:
```json
{
    "actor": "https://github.com/sagetrac-mcbell",
    "created_at": "2017-12-30T21:51:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340350"
}
```



---

archive/issue_events_340351.json:
```json
{
    "actor": "https://github.com/sagetrac-mcbell",
    "created_at": "2017-12-30T21:51:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340351"
}
```



---

archive/issue_comments_370062.json:
```json
{
    "body": "Author: **Mark Bell**",
    "created_at": "2017-12-30T21:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370062",
    "user": "https://github.com/sagetrac-mcbell"
}
```

Author: **Mark Bell**



---

archive/issue_comments_370063.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nMark,\n\nAs we discussed in Warwick, this method is rather unnatural (integer points are not naturally indexed) and is not needed for random sampling. To my mind, it would make more sense to have a new method `.random_integral_point` implemented along the same lines.",
    "created_at": "2017-12-30T21:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370063",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Mark,

As we discussed in Warwick, this method is rather unnatural (integer points are not naturally indexed) and is not needed for random sampling. To my mind, it would make more sense to have a new method `.random_integral_point` implemented along the same lines.



---

archive/issue_comments_370064.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSure, that would be a simple enough thing to change - should I open a new ticket?",
    "created_at": "2017-12-30T22:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370064",
    "user": "https://github.com/sagetrac-mcbell"
}
```

<div id="comment:4" align="right">comment:4</div>

Sure, that would be a simple enough thing to change - should I open a new ticket?



---

archive/issue_comments_370065.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@sagetrac-mcbell](#comment:4):\n> Sure, that would be a simple enough thing to change - should I open a new ticket?\n\nThough, I do not think I was right: e.g. integral points are naturally indexed for the lexicographical ordering. In the description, you claim to follow the ordering of `integral_points`. Is it always lexicographic? I could not find any mention of ordering in the documentation. Note in particular that `integral_points` claims to have two implementations\n\n```\nUses either the naive algorithm (iterate over a rectangular\nbounding box) or triangulation + Smith form.\n```\nThe ordering is independent of the method?\n\nBTW, your branch `u/mcbell/polyhedron_get_integral_point` does not exist. Is that normal?\n\nAbout `get_integral_point` vs `random_integral_point` you are free to do whatever you want with your ticket :-)",
    "created_at": "2017-12-30T22:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370065",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@sagetrac-mcbell](#comment:4):
> Sure, that would be a simple enough thing to change - should I open a new ticket?

Though, I do not think I was right: e.g. integral points are naturally indexed for the lexicographical ordering. In the description, you claim to follow the ordering of `integral_points`. Is it always lexicographic? I could not find any mention of ordering in the documentation. Note in particular that `integral_points` claims to have two implementations

```
Uses either the naive algorithm (iterate over a rectangular
bounding box) or triangulation + Smith form.
```
The ordering is independent of the method?

BTW, your branch `u/mcbell/polyhedron_get_integral_point` does not exist. Is that normal?

About `get_integral_point` vs `random_integral_point` you are free to do whatever you want with your ticket :-)



---

archive/issue_comments_370066.json:
```json
{
    "body": "Changed commit from **[`d3b9b39`](https://github.com/sagemath/sagetrac-mirror/commit/d3b9b396c1dc9d6ca8c9478b01035454ebbe1f74)** to **[`82a64d2`](https://github.com/sagemath/sagetrac-mirror/commit/82a64d2f6eb533c16413c681a8d89c130283fa1c)**",
    "created_at": "2017-12-30T23:45:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370066",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3b9b39`](https://github.com/sagemath/sagetrac-mirror/commit/d3b9b396c1dc9d6ca8c9478b01035454ebbe1f74)** to **[`82a64d2`](https://github.com/sagemath/sagetrac-mirror/commit/82a64d2f6eb533c16413c681a8d89c130283fa1c)**



---

archive/issue_comments_370067.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e020df5a647c1c49df1aaf0819f5e673dba43ece\"><code>e020df5</code></a></td><td><code>Initial version of get_integral_point method.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca57e1572dca036778b287418a18968f2461565c\"><code>ca57e15</code></a></td><td><code>Added docstring and more comments.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f77150616b41c22805b4988e4d83613d8827ac7a\"><code>f771506</code></a></td><td><code>Fixed docstring whitespace.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/626e399a80d8d8627fafa6b1a4102524995f86e5\"><code>626e399</code></a></td><td><code>Fixed line widths and fencepost error in upper bound.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c46460d6180b59171c4422a31203994f21567ffb\"><code>c46460d</code></a></td><td><code>Added sorting comments to docstring and random_integral_point method.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82a64d2f6eb533c16413c681a8d89c130283fa1c\"><code>82a64d2</code></a></td><td><code>Added missing import.</code></td></tr></table>\n",
    "created_at": "2017-12-30T23:45:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370067",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e020df5a647c1c49df1aaf0819f5e673dba43ece"><code>e020df5</code></a></td><td><code>Initial version of get_integral_point method.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca57e1572dca036778b287418a18968f2461565c"><code>ca57e15</code></a></td><td><code>Added docstring and more comments.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f77150616b41c22805b4988e4d83613d8827ac7a"><code>f771506</code></a></td><td><code>Fixed docstring whitespace.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/626e399a80d8d8627fafa6b1a4102524995f86e5"><code>626e399</code></a></td><td><code>Fixed line widths and fencepost error in upper bound.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c46460d6180b59171c4422a31203994f21567ffb"><code>c46460d</code></a></td><td><code>Added sorting comments to docstring and random_integral_point method.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82a64d2f6eb533c16413c681a8d89c130283fa1c"><code>82a64d2</code></a></td><td><code>Added missing import.</code></td></tr></table>




---

archive/issue_comments_370068.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@videlec](#comment:5):\n\nThanks for the great comments. I think I've now managed to push my branch onto trac so you should be able to see the code.\n\n> Though, I do not think I was right: e.g. integral points are naturally indexed for the lexicographical ordering. In the description, you claim to follow the ordering of `integral_points`. Is it always lexicographic? I could not find any mention of ordering in the documentation. Note in particular that `integral_points` claims to have two implementations\n> \n> ```\n> Uses either the naive algorithm (iterate over a rectangular\n> bounding box) or triangulation + Smith form.\n> ```\n> The ordering is independent of the method?\n\nAh, you are correct, you are not guaranteed to get lexicographical ordering when the triangulation method is used. In part this is caused by the fact that the points that are found in the different triangles are just merged together using a set. Perhaps L5288 of src/sage/geometrypolyhedron/base.py should become \"return tuple(sorted(points))\" to make the method deterministic. So the correct thing to say is that this method returns\n\n```\nsorted(self.integral_points())[index]\n```\nI've updated the docstring and above explanation to reflect this.\n\nMy new suggestion, which is in the latest commits, is to also add a Polyhedron.random_integral_point() method that just uses the snippet I posted originally.",
    "created_at": "2017-12-31T00:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370068",
    "user": "https://github.com/sagetrac-mcbell"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@videlec](#comment:5):

Thanks for the great comments. I think I've now managed to push my branch onto trac so you should be able to see the code.

> Though, I do not think I was right: e.g. integral points are naturally indexed for the lexicographical ordering. In the description, you claim to follow the ordering of `integral_points`. Is it always lexicographic? I could not find any mention of ordering in the documentation. Note in particular that `integral_points` claims to have two implementations
> 
> ```
> Uses either the naive algorithm (iterate over a rectangular
> bounding box) or triangulation + Smith form.
> ```
> The ordering is independent of the method?

Ah, you are correct, you are not guaranteed to get lexicographical ordering when the triangulation method is used. In part this is caused by the fact that the points that are found in the different triangles are just merged together using a set. Perhaps L5288 of src/sage/geometrypolyhedron/base.py should become "return tuple(sorted(points))" to make the method deterministic. So the correct thing to say is that this method returns

```
sorted(self.integral_points())[index]
```
I've updated the docstring and above explanation to reflect this.

My new suggestion, which is in the latest commits, is to also add a Polyhedron.random_integral_point() method that just uses the snippet I posted originally.



---

archive/issue_comments_370069.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to Polyhedron.integral_points()[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.\n+This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to sorted(Polyhedron.integral_points())[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.\n \n This method is useful for performing random sampling of integral points since it allows points to be chosen uniformly at random via:\n \n``````\n",
    "created_at": "2017-12-31T00:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370069",
    "user": "https://github.com/sagetrac-mcbell"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to Polyhedron.integral_points()[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.
+This patch adds a method Polyhedron.get_integral_point(index) which returns the nth integral point in the polyhedron. It is equivalent to sorted(Polyhedron.integral_points())[index]. However when Polyhedron.integral_points_count() does not need to enumerate all of the integral points, for example in rational Polyhedra, neither does this method. Hence it can be significantly faster.
 
 This method is useful for performing random sampling of integral points since it allows points to be chosen uniformly at random via:
 
``````




---

archive/issue_comments_370070.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nConcerning, `P.integral_points()`, I think that it should even be an iterator (as most things in Python3). Hence I am against sorting. If the user needs a sorted list, she can just apply a sort on the result.\n\nFor polytopes \"with small interior\", I believe that it is much faster to compute the set of points first and then do random sampling (while keeping the list in some cache). But let us keep that for later on.\n\nFor more concrete comments: when the polytope has no integral points the method `random_integral_point` should raise an `EmptySetError` (from `sage.categories.sets_cat`). And in both methods, the error have to be doctested. It should look like\n\n```\nsage: my_polytope_without_integral_points.random_integral_point()\nTraceback (most recent call last):\n...\nEmptySetError: error-message\n```\n(you can have a look around in the code)",
    "created_at": "2017-12-31T10:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370070",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Concerning, `P.integral_points()`, I think that it should even be an iterator (as most things in Python3). Hence I am against sorting. If the user needs a sorted list, she can just apply a sort on the result.

For polytopes "with small interior", I believe that it is much faster to compute the set of points first and then do random sampling (while keeping the list in some cache). But let us keep that for later on.

For more concrete comments: when the polytope has no integral points the method `random_integral_point` should raise an `EmptySetError` (from `sage.categories.sets_cat`). And in both methods, the error have to be doctested. It should look like

```
sage: my_polytope_without_integral_points.random_integral_point()
Traceback (most recent call last):
...
EmptySetError: error-message
```
(you can have a look around in the code)



---

archive/issue_comments_370071.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11aabdd974fba81accf9966584a159fba8621c2e\"><code>11aabdd</code></a></td><td><code>Added check to make sure there are integral points before sampling and doctests for the different errors.</code></td></tr></table>\n",
    "created_at": "2017-12-31T12:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370071",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11aabdd974fba81accf9966584a159fba8621c2e"><code>11aabdd</code></a></td><td><code>Added check to make sure there are integral points before sampling and doctests for the different errors.</code></td></tr></table>




---

archive/issue_comments_370072.json:
```json
{
    "body": "Changed commit from **[`82a64d2`](https://github.com/sagemath/sagetrac-mirror/commit/82a64d2f6eb533c16413c681a8d89c130283fa1c)** to **[`11aabdd`](https://github.com/sagemath/sagetrac-mirror/commit/11aabdd974fba81accf9966584a159fba8621c2e)**",
    "created_at": "2017-12-31T12:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370072",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`82a64d2`](https://github.com/sagemath/sagetrac-mirror/commit/82a64d2f6eb533c16413c681a8d89c130283fa1c)** to **[`11aabdd`](https://github.com/sagemath/sagetrac-mirror/commit/11aabdd974fba81accf9966584a159fba8621c2e)**



---

archive/issue_comments_370073.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nFor random sampling you should not use the directly the `random` module but\n\n```\nsage: from sage.misc.randstate import current_randstate\nsage: random = current_randstate().python_random()\nsage: random.randint(0,5)\n0\nsage: random.randint(0,5)\n5\n```\nThe reason is that Sage has to take care of a lot of random generators coming from different libraries (Python, gmp, GAP, PARI/GP, etc). All of them are initialized through a unique function `set_random_seed`. As a consequence, all the generators has to be taken from the `current_randstate`.\n\nYou can compare\n\n```\nsage: set_random_seed(5); [current_randstate().python_random().randint(0,10) for _ in range(5)]\n[0, 5, 2, 3, 5]\nsage: set_random_seed(5); [current_randstate().python_random().randint(0,10) for _ in range(5)]\n[0, 5, 2, 3, 5]\n```\nversus\n\n```\nsage: import random\nsage: set_random_seed(5); [random.randint(0,10) for _ in range(5)]\n[9, 8, 3, 8, 2]\nsage: set_random_seed(5); [random.randint(0,10) for _ in range(5)]\n[9, 6, 1, 8, 5]\n```",
    "created_at": "2017-12-31T12:42:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370073",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

For random sampling you should not use the directly the `random` module but

```
sage: from sage.misc.randstate import current_randstate
sage: random = current_randstate().python_random()
sage: random.randint(0,5)
0
sage: random.randint(0,5)
5
```
The reason is that Sage has to take care of a lot of random generators coming from different libraries (Python, gmp, GAP, PARI/GP, etc). All of them are initialized through a unique function `set_random_seed`. As a consequence, all the generators has to be taken from the `current_randstate`.

You can compare

```
sage: set_random_seed(5); [current_randstate().python_random().randint(0,10) for _ in range(5)]
[0, 5, 2, 3, 5]
sage: set_random_seed(5); [current_randstate().python_random().randint(0,10) for _ in range(5)]
[0, 5, 2, 3, 5]
```
versus

```
sage: import random
sage: set_random_seed(5); [random.randint(0,10) for _ in range(5)]
[9, 8, 3, 8, 2]
sage: set_random_seed(5); [random.randint(0,10) for _ in range(5)]
[9, 6, 1, 8, 5]
```



---

archive/issue_comments_370074.json:
```json
{
    "body": "Changed commit from **[`11aabdd`](https://github.com/sagemath/sagetrac-mirror/commit/11aabdd974fba81accf9966584a159fba8621c2e)** to **[`4e76f7d`](https://github.com/sagemath/sagetrac-mirror/commit/4e76f7d28eb839bac153ea682e50707c5bdb4754)**",
    "created_at": "2017-12-31T13:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370074",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`11aabdd`](https://github.com/sagemath/sagetrac-mirror/commit/11aabdd974fba81accf9966584a159fba8621c2e)** to **[`4e76f7d`](https://github.com/sagemath/sagetrac-mirror/commit/4e76f7d28eb839bac153ea682e50707c5bdb4754)**



---

archive/issue_comments_370075.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e76f7d28eb839bac153ea682e50707c5bdb4754\"><code>4e76f7d</code></a></td><td><code>Using current_randstate() instead of random.</code></td></tr></table>\n",
    "created_at": "2017-12-31T13:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370075",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e76f7d28eb839bac153ea682e50707c5bdb4754"><code>4e76f7d</code></a></td><td><code>Using current_randstate() instead of random.</code></td></tr></table>




---

archive/issue_comments_370076.json:
```json
{
    "body": "Changed commit from **[`4e76f7d`](https://github.com/sagemath/sagetrac-mirror/commit/4e76f7d28eb839bac153ea682e50707c5bdb4754)** to **[`9968341`](https://github.com/sagemath/sagetrac-mirror/commit/99683415186c9890bc065fe0883f383fd2bd0019)**",
    "created_at": "2017-12-31T13:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370076",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4e76f7d`](https://github.com/sagemath/sagetrac-mirror/commit/4e76f7d28eb839bac153ea682e50707c5bdb4754)** to **[`9968341`](https://github.com/sagemath/sagetrac-mirror/commit/99683415186c9890bc065fe0883f383fd2bd0019)**



---

archive/issue_comments_370077.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99683415186c9890bc065fe0883f383fd2bd0019\"><code>9968341</code></a></td><td><code>Fixed upper and lower bounds to be integers.</code></td></tr></table>\n",
    "created_at": "2017-12-31T13:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370077",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99683415186c9890bc065fe0883f383fd2bd0019"><code>9968341</code></a></td><td><code>Fixed upper and lower bounds to be integers.</code></td></tr></table>




---

archive/issue_comments_370078.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nFor consistency, could you make the output of `get_integral_point` an immutable vector\n\n```\nsage: P = polytopes.icosahedron()\nsage: P.integral_points()[0].is_mutable()\nFalse\nsage: P.get_integral_point(0).is_mutable()\nTrue\n```\n(Just use the method `.set_immutable()` of vectors.)",
    "created_at": "2017-12-31T14:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370078",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

For consistency, could you make the output of `get_integral_point` an immutable vector

```
sage: P = polytopes.icosahedron()
sage: P.integral_points()[0].is_mutable()
False
sage: P.get_integral_point(0).is_mutable()
True
```
(Just use the method `.set_immutable()` of vectors.)



---

archive/issue_comments_370079.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nWhy do you consider the inequality `[-lower] + [0] * i + [1] + [0] * (D - i - 1)`. Shouldn't this be redundant?\n\nI believe that it would be faster to just add one equality at a time (we can possibly speed that up later on). Namely, I would rather keep the polyhedron `self` intersected with `extra_eqns` along the loop. In pseudo code\n\n```\nP = self\nfor i in {0, ..., dimension-1}:\n    P_left = P intersection left_guess\n    count_left = P_left.count()\n    if count_left < index:\n        P = P_left\n    else:\n        P = P intersection right_guess\n        index -= count_left\n```",
    "created_at": "2017-12-31T14:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370079",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

Why do you consider the inequality `[-lower] + [0] * i + [1] + [0] * (D - i - 1)`. Shouldn't this be redundant?

I believe that it would be faster to just add one equality at a time (we can possibly speed that up later on). Namely, I would rather keep the polyhedron `self` intersected with `extra_eqns` along the loop. In pseudo code

```
P = self
for i in {0, ..., dimension-1}:
    P_left = P intersection left_guess
    count_left = P_left.count()
    if count_left < index:
        P = P_left
    else:
        P = P intersection right_guess
        index -= count_left
```



---

archive/issue_comments_370080.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2017-12-31T14:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370080",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_370081.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@videlec](#comment:15):\n> Why do you consider the inequality `[-lower] + [0] * i + [1] + [0] * (D - i - 1)`. Shouldn't this be redundant?\n\nSo this was needed precisely because of the fact that previously found inequalities were not added to the polyhedron.\n\n> I believe that it would be faster to just add one equality at a time (we can possibly speed that up later on). Namely, I would rather keep the polyhedron `self` intersected with `extra_eqns` along the loop. In pseudo code\n> \n> ```\n> P = self\n> for i in {0, ..., dimension-1}:\n>     P_left = P intersection left_guess\n>     count_left = P_left.count()\n>     if count_left < index:\n>         P = P_left\n>     else:\n>         P = P intersection right_guess\n>         index -= count_left\n> ```\n\nSure, that would probably be even faster since the polyhedron will become smaller as the process goes on. I've just finished a new version based on your pseudo-code which repeatedly defines P as the intersection of P with a halfspace. Although of course it includes a while loop to keep doing the subdivisions on the x_i coordinate until it is uniquely determined.",
    "created_at": "2017-12-31T15:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370081",
    "user": "https://github.com/sagetrac-mcbell"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@videlec](#comment:15):
> Why do you consider the inequality `[-lower] + [0] * i + [1] + [0] * (D - i - 1)`. Shouldn't this be redundant?

So this was needed precisely because of the fact that previously found inequalities were not added to the polyhedron.

> I believe that it would be faster to just add one equality at a time (we can possibly speed that up later on). Namely, I would rather keep the polyhedron `self` intersected with `extra_eqns` along the loop. In pseudo code
> 
> ```
> P = self
> for i in {0, ..., dimension-1}:
>     P_left = P intersection left_guess
>     count_left = P_left.count()
>     if count_left < index:
>         P = P_left
>     else:
>         P = P intersection right_guess
>         index -= count_left
> ```

Sure, that would probably be even faster since the polyhedron will become smaller as the process goes on. I've just finished a new version based on your pseudo-code which repeatedly defines P as the intersection of P with a halfspace. Although of course it includes a while loop to keep doing the subdivisions on the x_i coordinate until it is uniquely determined.



---

archive/issue_comments_370082.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/911bfdc8fa652202ad3bc128d97d26ca46c978e5\"><code>911bfdc</code></a></td><td><code>Returned point is now immutable.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73af99173b5cdec874342eb1bcd04e3c2bb857b7\"><code>73af991</code></a></td><td><code>More explict error cases.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5aea167963a784f90cdd6a576f7f0e446b288666\"><code>5aea167</code></a></td><td><code>Rewitten to repeatedly intersect the polyhedron with halfspaces.</code></td></tr></table>\n",
    "created_at": "2017-12-31T15:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370082",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/911bfdc8fa652202ad3bc128d97d26ca46c978e5"><code>911bfdc</code></a></td><td><code>Returned point is now immutable.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73af99173b5cdec874342eb1bcd04e3c2bb857b7"><code>73af991</code></a></td><td><code>More explict error cases.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5aea167963a784f90cdd6a576f7f0e446b288666"><code>5aea167</code></a></td><td><code>Rewitten to repeatedly intersect the polyhedron with halfspaces.</code></td></tr></table>




---

archive/issue_comments_370083.json:
```json
{
    "body": "Changed commit from **[`9968341`](https://github.com/sagemath/sagetrac-mirror/commit/99683415186c9890bc065fe0883f383fd2bd0019)** to **[`5aea167`](https://github.com/sagemath/sagetrac-mirror/commit/5aea167963a784f90cdd6a576f7f0e446b288666)**",
    "created_at": "2017-12-31T15:40:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370083",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9968341`](https://github.com/sagemath/sagetrac-mirror/commit/99683415186c9890bc065fe0883f383fd2bd0019)** to **[`5aea167`](https://github.com/sagemath/sagetrac-mirror/commit/5aea167963a784f90cdd6a576f7f0e446b288666)**



---

archive/issue_comments_370084.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWith the current code, you might construct and intersect polyhedra on different base ring. Instead of `Polyhedron(XXX)` it would be better to use\n\n```\nS = self.parent()\nS(ieqs=[[guess-1] + [0] * i + [-1] + [0] * (D - i - 1)])\n```",
    "created_at": "2018-01-01T13:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370084",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

With the current code, you might construct and intersect polyhedra on different base ring. Instead of `Polyhedron(XXX)` it would be better to use

```
S = self.parent()
S(ieqs=[[guess-1] + [0] * i + [-1] + [0] * (D - i - 1)])
```



---

archive/issue_comments_370085.json:
```json
{
    "body": "Changed commit from **[`5aea167`](https://github.com/sagemath/sagetrac-mirror/commit/5aea167963a784f90cdd6a576f7f0e446b288666)** to **[`ff28e93`](https://github.com/sagemath/sagetrac-mirror/commit/ff28e93eda39a2ff8a83dc8cf68af3d36f5d7976)**",
    "created_at": "2018-01-01T14:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370085",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5aea167`](https://github.com/sagemath/sagetrac-mirror/commit/5aea167963a784f90cdd6a576f7f0e446b288666)** to **[`ff28e93`](https://github.com/sagemath/sagetrac-mirror/commit/ff28e93eda39a2ff8a83dc8cf68af3d36f5d7976)**



---

archive/issue_comments_370086.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff28e93eda39a2ff8a83dc8cf68af3d36f5d7976\"><code>ff28e93</code></a></td><td><code>Construct halfspaces using self.parent() to stay in the same ring.</code></td></tr></table>\n",
    "created_at": "2018-01-01T14:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370086",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff28e93eda39a2ff8a83dc8cf68af3d36f5d7976"><code>ff28e93</code></a></td><td><code>Construct halfspaces using self.parent() to stay in the same ring.</code></td></tr></table>




---

archive/issue_comments_370087.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nApparently, there is a problem with the last commit\n\n```\nsage -t --long src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5332, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\nFailed example:\n    P.get_integral_point(1)\nExpected:\n    (0, 0)\nGot:\n    (0, -1)\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5340, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\nFailed example:\n    [Q.get_integral_point(i) for i in range(Q.integral_points_count())] == sorted(Q.integral_points())\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5408, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point\nFailed example:\n    P.random_integral_point() in P.integral_points()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\nThe reason is that the syntax is different (I was wrong in [comment:19](#comment:19))\n\n```\nsage: P = Polyhedron(ieqs=[[0,1,0,0]])\nsage: P\nA 3-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex, 1 ray, 2 lines\nsage: PP\nPolyhedra in QQ^3\nsage: PP(ieqs=[[0,1,0,0]])   # this is wrong\nA 0-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex\nsage: Vrep = None\nsage: Hrep = [[[0,1,0,0]], []]\nsage: PP(Vrep, Hrep)  # this is right\nA 3-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex, 1 ray, 2 lines\n```",
    "created_at": "2018-01-02T15:53:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370087",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

Apparently, there is a problem with the last commit

```
sage -t --long src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5332, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
Failed example:
    P.get_integral_point(1)
Expected:
    (0, 0)
Got:
    (0, -1)
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5340, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
Failed example:
    [Q.get_integral_point(i) for i in range(Q.integral_points_count())] == sorted(Q.integral_points())
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5408, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point
Failed example:
    P.random_integral_point() in P.integral_points()
Expected:
    True
Got:
    False
**********************************************************************
```
The reason is that the syntax is different (I was wrong in [comment:19](#comment:19))

```
sage: P = Polyhedron(ieqs=[[0,1,0,0]])
sage: P
A 3-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex, 1 ray, 2 lines
sage: PP
Polyhedra in QQ^3
sage: PP(ieqs=[[0,1,0,0]])   # this is wrong
A 0-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex
sage: Vrep = None
sage: Hrep = [[[0,1,0,0]], []]
sage: PP(Vrep, Hrep)  # this is right
A 3-dimensional polyhedron in QQ^3 defined as the convex hull of 1 vertex, 1 ray, 2 lines
```



---

archive/issue_comments_370088.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a0b647fdad63c72816d138b5e886de37a0dd94a\"><code>7a0b647</code></a></td><td><code>Merge branch 'develop' into t/24451/polyhedron_get_integral_point</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d3f64162697d0580f8b7657ace4ee703a27bd03\"><code>8d3f641</code></a></td><td><code>Using correct syntax for creating halfspaces via parent.</code></td></tr></table>\n",
    "created_at": "2018-01-02T16:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370088",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a0b647fdad63c72816d138b5e886de37a0dd94a"><code>7a0b647</code></a></td><td><code>Merge branch 'develop' into t/24451/polyhedron_get_integral_point</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d3f64162697d0580f8b7657ace4ee703a27bd03"><code>8d3f641</code></a></td><td><code>Using correct syntax for creating halfspaces via parent.</code></td></tr></table>




---

archive/issue_comments_370089.json:
```json
{
    "body": "Changed commit from **[`ff28e93`](https://github.com/sagemath/sagetrac-mirror/commit/ff28e93eda39a2ff8a83dc8cf68af3d36f5d7976)** to **[`8d3f641`](https://github.com/sagemath/sagetrac-mirror/commit/8d3f64162697d0580f8b7657ace4ee703a27bd03)**",
    "created_at": "2018-01-02T16:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370089",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ff28e93`](https://github.com/sagemath/sagetrac-mirror/commit/ff28e93eda39a2ff8a83dc8cf68af3d36f5d7976)** to **[`8d3f641`](https://github.com/sagemath/sagetrac-mirror/commit/8d3f64162697d0580f8b7657ace4ee703a27bd03)**



---

archive/issue_comments_370090.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nIn the description, I would rather use <code>\"Return the \\`\\`index\\`\\`-th integral point.\"</code> as `sorted(self.integral_points())[index]` is not very readable. Though you can use the code in the paragraph description below, and more importantly (as you already did) in the examples.\n\nOn the other hand, the OUTPUT section is intended to describe the output type (and is not mandatory). As your function is simple enough, I would just remove it. You can merge the paragraph describing the method and the one from the OUTPUT.\n\nAfter that, I think the branch is good enough for a first version!",
    "created_at": "2018-01-02T17:34:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370090",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

In the description, I would rather use <code>"Return the \`\`index\`\`-th integral point."</code> as `sorted(self.integral_points())[index]` is not very readable. Though you can use the code in the paragraph description below, and more importantly (as you already did) in the examples.

On the other hand, the OUTPUT section is intended to describe the output type (and is not mandatory). As your function is simple enough, I would just remove it. You can merge the paragraph describing the method and the one from the OUTPUT.

After that, I think the branch is good enough for a first version!



---

archive/issue_comments_370091.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed313737d7579954968b5feee89ada4901cdd5e3\"><code>ed31373</code></a></td><td><code>Reworked docstring.</code></td></tr></table>\n",
    "created_at": "2018-01-02T17:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370091",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed313737d7579954968b5feee89ada4901cdd5e3"><code>ed31373</code></a></td><td><code>Reworked docstring.</code></td></tr></table>




---

archive/issue_comments_370092.json:
```json
{
    "body": "Changed commit from **[`8d3f641`](https://github.com/sagemath/sagetrac-mirror/commit/8d3f64162697d0580f8b7657ace4ee703a27bd03)** to **[`ed31373`](https://github.com/sagemath/sagetrac-mirror/commit/ed313737d7579954968b5feee89ada4901cdd5e3)**",
    "created_at": "2018-01-02T17:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370092",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d3f641`](https://github.com/sagemath/sagetrac-mirror/commit/8d3f64162697d0580f8b7657ace4ee703a27bd03)** to **[`ed31373`](https://github.com/sagemath/sagetrac-mirror/commit/ed313737d7579954968b5feee89ada4901cdd5e3)**



---

archive/issue_comments_370093.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8350785ffca7f2078cc1fd6537c77288eb05eb0\"><code>f835078</code></a></td><td><code>Added code fragment markers to docstring.</code></td></tr></table>\n",
    "created_at": "2018-01-02T18:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370093",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8350785ffca7f2078cc1fd6537c77288eb05eb0"><code>f835078</code></a></td><td><code>Added code fragment markers to docstring.</code></td></tr></table>




---

archive/issue_comments_370094.json:
```json
{
    "body": "Changed commit from **[`ed31373`](https://github.com/sagemath/sagetrac-mirror/commit/ed313737d7579954968b5feee89ada4901cdd5e3)** to **[`f835078`](https://github.com/sagemath/sagetrac-mirror/commit/f8350785ffca7f2078cc1fd6537c77288eb05eb0)**",
    "created_at": "2018-01-02T18:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370094",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed31373`](https://github.com/sagemath/sagetrac-mirror/commit/ed313737d7579954968b5feee89ada4901cdd5e3)** to **[`f835078`](https://github.com/sagemath/sagetrac-mirror/commit/f8350785ffca7f2078cc1fd6537c77288eb05eb0)**



---

archive/issue_comments_370095.json:
```json
{
    "body": "Changed commit from **[`f835078`](https://github.com/sagemath/sagetrac-mirror/commit/f8350785ffca7f2078cc1fd6537c77288eb05eb0)** to **[`f7e095a`](https://github.com/sagemath/sagetrac-mirror/commit/f7e095abe7c5b5e56a5e4b18df991b37a841e68a)**",
    "created_at": "2018-01-05T01:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370095",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f835078`](https://github.com/sagemath/sagetrac-mirror/commit/f8350785ffca7f2078cc1fd6537c77288eb05eb0)** to **[`f7e095a`](https://github.com/sagemath/sagetrac-mirror/commit/f7e095abe7c5b5e56a5e4b18df991b37a841e68a)**



---

archive/issue_comments_370096.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7e095abe7c5b5e56a5e4b18df991b37a841e68a\"><code>f7e095a</code></a></td><td><code>Actually passing on kwds.</code></td></tr></table>\n",
    "created_at": "2018-01-05T01:11:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370096",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7e095abe7c5b5e56a5e4b18df991b37a841e68a"><code>f7e095a</code></a></td><td><code>Actually passing on kwds.</code></td></tr></table>




---

archive/issue_comments_370097.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nCan you doctest the fact that `**kwds` are passed (for example you can pass a wrong keyword)?",
    "created_at": "2018-01-05T13:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370097",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Can you doctest the fact that `**kwds` are passed (for example you can pass a wrong keyword)?



---

archive/issue_comments_370098.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f585b5ec67fd3048ab35c7b5cd800306563ebeed\"><code>f585b5e</code></a></td><td><code>Using **kwds in get_integral_point and doctesting these.</code></td></tr></table>\n",
    "created_at": "2018-01-05T16:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370098",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f585b5ec67fd3048ab35c7b5cd800306563ebeed"><code>f585b5e</code></a></td><td><code>Using **kwds in get_integral_point and doctesting these.</code></td></tr></table>




---

archive/issue_comments_370099.json:
```json
{
    "body": "Changed commit from **[`f7e095a`](https://github.com/sagemath/sagetrac-mirror/commit/f7e095abe7c5b5e56a5e4b18df991b37a841e68a)** to **[`f585b5e`](https://github.com/sagemath/sagetrac-mirror/commit/f585b5ec67fd3048ab35c7b5cd800306563ebeed)**",
    "created_at": "2018-01-05T16:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370099",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f7e095a`](https://github.com/sagemath/sagetrac-mirror/commit/f7e095abe7c5b5e56a5e4b18df991b37a841e68a)** to **[`f585b5e`](https://github.com/sagemath/sagetrac-mirror/commit/f585b5ec67fd3048ab35c7b5cd800306563ebeed)**



---

archive/issue_comments_370100.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\ntypo in the doc: `it bisects the the upper`",
    "created_at": "2018-01-06T21:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370100",
    "user": "https://github.com/videlec"
}
```

<div id="comment:29" align="right">comment:29</div>

typo in the doc: `it bisects the the upper`



---

archive/issue_comments_370101.json:
```json
{
    "body": "Changed commit from **[`f585b5e`](https://github.com/sagemath/sagetrac-mirror/commit/f585b5ec67fd3048ab35c7b5cd800306563ebeed)** to **[`ed9bdef`](https://github.com/sagemath/sagetrac-mirror/commit/ed9bdefe2b193843cba5fe794b0dfd1e3cdcc2b9)**",
    "created_at": "2018-01-06T21:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370101",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f585b5e`](https://github.com/sagemath/sagetrac-mirror/commit/f585b5ec67fd3048ab35c7b5cd800306563ebeed)** to **[`ed9bdef`](https://github.com/sagemath/sagetrac-mirror/commit/ed9bdefe2b193843cba5fe794b0dfd1e3cdcc2b9)**



---

archive/issue_comments_370102.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed9bdefe2b193843cba5fe794b0dfd1e3cdcc2b9\"><code>ed9bdef</code></a></td><td><code>Docstring typo.</code></td></tr></table>\n",
    "created_at": "2018-01-06T21:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370102",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed9bdefe2b193843cba5fe794b0dfd1e3cdcc2b9"><code>ed9bdef</code></a></td><td><code>Docstring typo.</code></td></tr></table>




---

archive/issue_events_340352.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-01-08T21:08:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340352"
}
```



---

archive/issue_events_340353.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-01-08T21:08:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340353"
}
```



---

archive/issue_comments_370103.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nlet it go",
    "created_at": "2018-01-08T21:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370103",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

let it go



---

archive/issue_comments_370104.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n\n```\nsage -t --long --warn-long 78.8 src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5369, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\nFailed example:\n    Q.get_integral_point(0, explicit_enumeration_threshold=0, triangulation='cddlib')\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point[7]>\", line 1, in <module>\n        Q.get_integral_point(Integer(0), explicit_enumeration_threshold=Integer(0), triangulation='cddlib')\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5386, in get_integral_point\n        if not 0 <= index < self.integral_points_count(**kwds):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py\", line 218, in integral_points_count\n        **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py\", line 150, in count\n        raise PackageNotFoundError('latte_int')\n    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5371, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\nFailed example:\n    Q.get_integral_point(0, explicit_enumeration_threshold=0, triangulation='cddlib', foo=True)\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: ...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point[8]>\", line 1, in <module>\n        Q.get_integral_point(Integer(0), explicit_enumeration_threshold=Integer(0), triangulation='cddlib', foo=True)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5386, in get_integral_point\n        if not 0 <= index < self.integral_points_count(**kwds):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py\", line 218, in integral_points_count\n        **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py\", line 150, in count\n        raise PackageNotFoundError('latte_int')\n    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5443, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point\nFailed example:\n    P.random_integral_point(explicit_enumeration_threshold=0, triangulation='cddlib')  # random\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point[3]>\", line 1, in <module>\n        P.random_integral_point(explicit_enumeration_threshold=Integer(0), triangulation='cddlib')  # random\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5470, in random_integral_point\n        return self.get_integral_point(current_randstate().python_random().randint(0, count-1), **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5386, in get_integral_point\n        if not 0 <= index < self.integral_points_count(**kwds):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py\", line 218, in integral_points_count\n        **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py\", line 150, in count\n        raise PackageNotFoundError('latte_int')\n    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5445, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point\nFailed example:\n    P.random_integral_point(explicit_enumeration_threshold=0, triangulation='cddlib', foo=7)\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: ...\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 517, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 920, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point[4]>\", line 1, in <module>\n        P.random_integral_point(explicit_enumeration_threshold=Integer(0), triangulation='cddlib', foo=Integer(7))\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5470, in random_integral_point\n        return self.get_integral_point(current_randstate().python_random().randint(0, count-1), **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py\", line 5386, in get_integral_point\n        if not 0 <= index < self.integral_points_count(**kwds):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py\", line 218, in integral_points_count\n        **kwds)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py\", line 150, in count\n        raise PackageNotFoundError('latte_int')\n    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell\n**********************************************************************\n2 items had failures:\n   2 of  12 in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point\n   2 of  10 in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point\n    [998 tests, 4 failures, 55.73 s]\n```",
    "created_at": "2018-01-13T19:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370104",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>


```
sage -t --long --warn-long 78.8 src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5369, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
Failed example:
    Q.get_integral_point(0, explicit_enumeration_threshold=0, triangulation='cddlib')
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point[7]>", line 1, in <module>
        Q.get_integral_point(Integer(0), explicit_enumeration_threshold=Integer(0), triangulation='cddlib')
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5386, in get_integral_point
        if not 0 <= index < self.integral_points_count(**kwds):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py", line 218, in integral_points_count
        **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py", line 150, in count
        raise PackageNotFoundError('latte_int')
    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5371, in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
Failed example:
    Q.get_integral_point(0, explicit_enumeration_threshold=0, triangulation='cddlib', foo=True)
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: ...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point[8]>", line 1, in <module>
        Q.get_integral_point(Integer(0), explicit_enumeration_threshold=Integer(0), triangulation='cddlib', foo=True)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5386, in get_integral_point
        if not 0 <= index < self.integral_points_count(**kwds):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py", line 218, in integral_points_count
        **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py", line 150, in count
        raise PackageNotFoundError('latte_int')
    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5443, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point
Failed example:
    P.random_integral_point(explicit_enumeration_threshold=0, triangulation='cddlib')  # random
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point[3]>", line 1, in <module>
        P.random_integral_point(explicit_enumeration_threshold=Integer(0), triangulation='cddlib')  # random
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5470, in random_integral_point
        return self.get_integral_point(current_randstate().python_random().randint(0, count-1), **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5386, in get_integral_point
        if not 0 <= index < self.integral_points_count(**kwds):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py", line 218, in integral_points_count
        **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py", line 150, in count
        raise PackageNotFoundError('latte_int')
    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5445, in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point
Failed example:
    P.random_integral_point(explicit_enumeration_threshold=0, triangulation='cddlib', foo=7)
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: ...
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 517, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 920, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point[4]>", line 1, in <module>
        P.random_integral_point(explicit_enumeration_threshold=Integer(0), triangulation='cddlib', foo=Integer(7))
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5470, in random_integral_point
        return self.get_integral_point(current_randstate().python_random().randint(0, count-1), **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.py", line 5386, in get_integral_point
        if not 0 <= index < self.integral_points_count(**kwds):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base_QQ.py", line 218, in integral_points_count
        **kwds)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/interfaces/latte.py", line 150, in count
        raise PackageNotFoundError('latte_int')
    PackageNotFoundError: the package 'latte_int' was not found. You can install it by running 'sage -i latte_int' in a shell
**********************************************************************
2 items had failures:
   2 of  12 in sage.geometry.polyhedron.base.Polyhedron_base.get_integral_point
   2 of  10 in sage.geometry.polyhedron.base.Polyhedron_base.random_integral_point
    [998 tests, 4 failures, 55.73 s]
```



---

archive/issue_events_340354.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-13T19:18:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340354"
}
```



---

archive/issue_events_340355.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-13T19:18:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340355"
}
```



---

archive/issue_comments_370105.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73fbd0571a629071bceb1300d699f0b826e983c1\"><code>73fbd05</code></a></td><td><code>Added # optional - latte_int markers to doctests that require latte-int.</code></td></tr></table>\n",
    "created_at": "2018-01-13T22:25:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370105",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73fbd0571a629071bceb1300d699f0b826e983c1"><code>73fbd05</code></a></td><td><code>Added # optional - latte_int markers to doctests that require latte-int.</code></td></tr></table>




---

archive/issue_comments_370106.json:
```json
{
    "body": "Changed commit from **[`ed9bdef`](https://github.com/sagemath/sagetrac-mirror/commit/ed9bdefe2b193843cba5fe794b0dfd1e3cdcc2b9)** to **[`73fbd05`](https://github.com/sagemath/sagetrac-mirror/commit/73fbd0571a629071bceb1300d699f0b826e983c1)**",
    "created_at": "2018-01-13T22:25:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370106",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed9bdef`](https://github.com/sagemath/sagetrac-mirror/commit/ed9bdefe2b193843cba5fe794b0dfd1e3cdcc2b9)** to **[`73fbd05`](https://github.com/sagemath/sagetrac-mirror/commit/73fbd0571a629071bceb1300d699f0b826e983c1)**



---

archive/issue_comments_370107.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI think this updated version should have the doctests that require latte_int flagged correctly. However to test this I had to go into my install of sage and manually delete /build/pkgs/latte_int and ./local/bin/count. Is there an easier way to (temporarily) uninstall an optional sage package?",
    "created_at": "2018-01-15T12:29:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370107",
    "user": "https://github.com/sagetrac-mcbell"
}
```

<div id="comment:34" align="right">comment:34</div>

I think this updated version should have the doctests that require latte_int flagged correctly. However to test this I had to go into my install of sage and manually delete /build/pkgs/latte_int and ./local/bin/count. Is there an easier way to (temporarily) uninstall an optional sage package?



---

archive/issue_comments_370108.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nRight now there is not, but Erik Bray (embray) is currently working on developing this. IIRC he has a post on sage-devel within the past month or so about the progress of this.",
    "created_at": "2018-01-15T15:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370108",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">comment:35</div>

Right now there is not, but Erik Bray (embray) is currently working on developing this. IIRC he has a post on sage-devel within the past month or so about the progress of this.



---

archive/issue_events_340356.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-01-15T15:47:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340356"
}
```



---

archive/issue_events_340357.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-01-15T15:47:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340357"
}
```



---

archive/issue_comments_370109.json:
```json
{
    "body": "Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Travis Scrimshaw**",
    "created_at": "2018-01-15T15:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370109",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Travis Scrimshaw**



---

archive/issue_events_340358.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-18T18:09:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340358"
}
```



---

archive/issue_events_340359.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9c9a0250076791ad3a7feb655bd0c012d546ea6e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-01-18T18:09:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24451#event-340359"
}
```



---

archive/issue_comments_370110.json:
```json
{
    "body": "Changed branch from **[u/mcbell/polyhedron_get_integral_point](https://github.com/sagemath/sagetrac-mirror/tree/u/mcbell/polyhedron_get_integral_point)** to **[`73fbd05`](https://github.com/sagemath/sagetrac-mirror/commit/73fbd0571a629071bceb1300d699f0b826e983c1)**",
    "created_at": "2018-01-18T18:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24451",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24451#issuecomment-370110",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mcbell/polyhedron_get_integral_point](https://github.com/sagemath/sagetrac-mirror/tree/u/mcbell/polyhedron_get_integral_point)** to **[`73fbd05`](https://github.com/sagemath/sagetrac-mirror/commit/73fbd0571a629071bceb1300d699f0b826e983c1)**
