# Issue 24138: Improve sparse matrix constructions in _right_kernel_matrix_over_*

archive/issues_023901.json:
```json
{
    "assignees": [],
    "body": "They currently assume a dense matrix and set a lot of 0 values if the matrix sparse. We can give a better construction.\n\nBranch/Commit: **[`0f2f76e`](https://github.com/sagemath/sagetrac-mirror/commit/0f2f76eb2e4624c25ee532046a7ee461c5ff8527)**\n\nReviewer: **Daniel Krenn**\n\nAuthor: **Travis Scrimshaw**\n\nComponent: **performance**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24138_\n\n",
    "closed_at": "2019-04-18T19:56:53Z",
    "created_at": "2017-11-01T06:23:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/performance",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Improve sparse matrix constructions in _right_kernel_matrix_over_*",
    "type": "issue",
    "updated_at": "2019-04-18T19:56:53Z",
    "url": "https://github.com/sagemath/sage/issues/24138",
    "user": "https://github.com/tscrim"
}
```
They currently assume a dense matrix and set a lot of 0 values if the matrix sparse. We can give a better construction.

Branch/Commit: **[`0f2f76e`](https://github.com/sagemath/sagetrac-mirror/commit/0f2f76eb2e4624c25ee532046a7ee461c5ff8527)**

Reviewer: **Daniel Krenn**

Author: **Travis Scrimshaw**

Component: **performance**

_Issue created by migration from https://trac.sagemath.org/ticket/24138_





---

archive/issue_events_335000.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:23:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335000"
}
```



---

archive/issue_events_335001.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:23:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/performance",
    "label_color": "696969",
    "label_name": "performance",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335001"
}
```



---

archive/issue_events_335002.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:23:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335002"
}
```



---

archive/issue_events_335003.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:23:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335003"
}
```



---

archive/issue_comments_365240.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI just added this into #24122. This ticket can be recycled if anyone wants it.",
    "created_at": "2017-11-01T06:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365240",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

I just added this into #24122. This ticket can be recycled if anyone wants it.



---

archive/issue_events_335004.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:31:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335004"
}
```



---

archive/issue_events_335005.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:31:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335005"
}
```



---

archive/issue_events_335006.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:31:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335006"
}
```



---

archive/issue_comments_365241.json:
```json
{
    "body": "Changed author from **Travis Scrimshaw** to none",
    "created_at": "2017-11-01T06:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365241",
    "user": "https://github.com/tscrim"
}
```

Changed author from **Travis Scrimshaw** to none



---

archive/issue_events_335007.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:31:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335007"
}
```



---

archive/issue_events_335008.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:32:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335008"
}
```



---

archive/issue_events_335009.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T06:32:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335009"
}
```



---

archive/issue_comments_365242.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-We do not need to create another copy of `M` as it was created locally to keep memory usage down (including putting it in a cache) and because it is faster.\n+They currently assume a dense matrix and set a lot of 0 values if the matrix sparse. We can give a better construction.\n``````\n",
    "created_at": "2017-11-01T07:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365242",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-We do not need to create another copy of `M` as it was created locally to keep memory usage down (including putting it in a cache) and because it is faster.
+They currently assume a dense matrix and set a lot of 0 values if the matrix sparse. We can give a better construction.
``````




---

archive/issue_events_335010.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T07:09:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335010"
}
```



---

archive/issue_comments_365243.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nActually, I can recycle this.",
    "created_at": "2017-11-01T07:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365243",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

Actually, I can recycle this.



---

archive/issue_comments_365244.json:
```json
{
    "body": "Author: **Travis Scrimshaw**",
    "created_at": "2017-11-01T07:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365244",
    "user": "https://github.com/tscrim"
}
```

Author: **Travis Scrimshaw**



---

archive/issue_events_335011.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T07:09:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335011"
}
```



---

archive/issue_events_335012.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T07:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335012"
}
```



---

archive/issue_events_335013.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T07:09:19Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "title_is": "Improve sparse matrix constructions in _right_kernel_matrix_over_*",
    "title_was": "Use echelonize() instead of echelon_form in right_kernel_matrix echelon basis",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335013"
}
```



---

archive/issue_comments_365245.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI am making an assumption, that the kernel of a sparse matrix will still generally be sparse. It will probably increase in density, but I do not think by enough in general to warrant the result being a dense matrix. On an example I tested:\n\n```\n0.000136661807580175\n0.00566007653061225\n```\nwhere the top is the original density and the bottom is the density of the `right_kernel_matrix`.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/430e0850d4582ce556e188d8d1728d860684f05c\">430e085</a></td><td><code>Have the kernel be a sparse matrix if the input is sparse.</code></td></tr></table>\n",
    "created_at": "2017-11-01T07:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365245",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

I am making an assumption, that the kernel of a sparse matrix will still generally be sparse. It will probably increase in density, but I do not think by enough in general to warrant the result being a dense matrix. On an example I tested:

```
0.000136661807580175
0.00566007653061225
```
where the top is the original density and the bottom is the density of the `right_kernel_matrix`.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/430e0850d4582ce556e188d8d1728d860684f05c">430e085</a></td><td><code>Have the kernel be a sparse matrix if the input is sparse.</code></td></tr></table>




---

archive/issue_comments_365246.json:
```json
{
    "body": "Branch: **[public/linear_algebra/improve_sparse_right_kernel-24138](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/improve_sparse_right_kernel-24138)**",
    "created_at": "2017-11-01T07:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365246",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/linear_algebra/improve_sparse_right_kernel-24138](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/improve_sparse_right_kernel-24138)**



---

archive/issue_comments_365247.json:
```json
{
    "body": "Commit: **[`430e085`](https://github.com/sagemath/sagetrac-mirror/commit/430e0850d4582ce556e188d8d1728d860684f05c)**",
    "created_at": "2017-11-01T07:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365247",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`430e085`](https://github.com/sagemath/sagetrac-mirror/commit/430e0850d4582ce556e188d8d1728d860684f05c)**



---

archive/issue_events_335014.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T07:57:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335014"
}
```



---

archive/issue_events_335015.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-01T07:57:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335015"
}
```



---

archive/issue_events_335016.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-03-27T14:11:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335016"
}
```



---

archive/issue_events_335017.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-03-27T14:11:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335017"
}
```



---

archive/issue_comments_365248.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n1. Some doctests are failing.\n2. The code itself looks good. As always, I tend to say blank after a comma (PEP8)\n\n```diff\n+                    entries[cur_row,i] = one\n[...]\n+                    for r,p in enumerate(pivots):\n[...]\n+            if i >= nrows or d[i,i] == 0:\n```\n\nSummary: LGTM once the failing doctests are investigated.",
    "created_at": "2019-03-27T14:11:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365248",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:5" align="right">comment:5</div>

1. Some doctests are failing.
2. The code itself looks good. As always, I tend to say blank after a comma (PEP8)

```diff
+                    entries[cur_row,i] = one
[...]
+                    for r,p in enumerate(pivots):
[...]
+            if i >= nrows or d[i,i] == 0:
```

Summary: LGTM once the failing doctests are investigated.



---

archive/issue_comments_365249.json:
```json
{
    "body": "Reviewer: **Daniel Krenn**",
    "created_at": "2019-03-27T14:15:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365249",
    "user": "https://github.com/dkrenn"
}
```

Reviewer: **Daniel Krenn**



---

archive/issue_comments_365250.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3bb9aad028130304bd7c192f016900adc1178a9\">d3bb9aa</a></td><td><code>Merge branch 'public/linear_algebra/improve_sparse_right_kernel-24138' of git://trac.sagemath.org/sage into public/linear_algebra/improve_sparse_right_kernel-24138</code></td></tr></table>\n",
    "created_at": "2019-04-17T04:10:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365250",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3bb9aad028130304bd7c192f016900adc1178a9">d3bb9aa</a></td><td><code>Merge branch 'public/linear_algebra/improve_sparse_right_kernel-24138' of git://trac.sagemath.org/sage into public/linear_algebra/improve_sparse_right_kernel-24138</code></td></tr></table>




---

archive/issue_comments_365251.json:
```json
{
    "body": "Changed commit from **[`430e085`](https://github.com/sagemath/sagetrac-mirror/commit/430e0850d4582ce556e188d8d1728d860684f05c)** to **[`d3bb9aa`](https://github.com/sagemath/sagetrac-mirror/commit/d3bb9aad028130304bd7c192f016900adc1178a9)**",
    "created_at": "2019-04-17T04:10:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365251",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`430e085`](https://github.com/sagemath/sagetrac-mirror/commit/430e0850d4582ce556e188d8d1728d860684f05c)** to **[`d3bb9aa`](https://github.com/sagemath/sagetrac-mirror/commit/d3bb9aad028130304bd7c192f016900adc1178a9)**



---

archive/issue_comments_365252.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f2f76eb2e4624c25ee532046a7ee461c5ff8527\">0f2f76e</a></td><td><code>Fixing doctest and Some last little bit of changes.</code></td></tr></table>\n",
    "created_at": "2019-04-17T04:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365252",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f2f76eb2e4624c25ee532046a7ee461c5ff8527">0f2f76e</a></td><td><code>Fixing doctest and Some last little bit of changes.</code></td></tr></table>




---

archive/issue_comments_365253.json:
```json
{
    "body": "Changed commit from **[`d3bb9aa`](https://github.com/sagemath/sagetrac-mirror/commit/d3bb9aad028130304bd7c192f016900adc1178a9)** to **[`0f2f76e`](https://github.com/sagemath/sagetrac-mirror/commit/0f2f76eb2e4624c25ee532046a7ee461c5ff8527)**",
    "created_at": "2019-04-17T04:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365253",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3bb9aa`](https://github.com/sagemath/sagetrac-mirror/commit/d3bb9aad028130304bd7c192f016900adc1178a9)** to **[`0f2f76e`](https://github.com/sagemath/sagetrac-mirror/commit/0f2f76eb2e4624c25ee532046a7ee461c5ff8527)**



---

archive/issue_events_335018.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-04-17T04:15:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335018"
}
```



---

archive/issue_events_335019.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-04-17T04:15:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335019"
}
```



---

archive/issue_comments_365254.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks for looking at this.\n\nThis takes care of the failing doctest. So my tacit understanding why simply updating the doctest is okay is because the algorithm is now better and doesn't change those entries, meaning they stay at exactly 0 rather than approximately 0.\n\nI don't entirely agree with the comma space (same reasoning as on #27442), but I added it. I also did a few other little PEP8 and maintenance things.",
    "created_at": "2019-04-17T04:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365254",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks for looking at this.

This takes care of the failing doctest. So my tacit understanding why simply updating the doctest is okay is because the algorithm is now better and doesn't change those entries, meaning they stay at exactly 0 rather than approximately 0.

I don't entirely agree with the comma space (same reasoning as on #27442), but I added it. I also did a few other little PEP8 and maintenance things.



---

archive/issue_events_335020.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-04-17T04:15:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335020"
}
```



---

archive/issue_events_335021.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-04-17T04:15:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335021"
}
```



---

archive/issue_comments_365255.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nLGTM.",
    "created_at": "2019-04-17T07:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365255",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:10" align="right">comment:10</div>

LGTM.



---

archive/issue_events_335022.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-04-17T07:34:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335022"
}
```



---

archive/issue_events_335023.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2019-04-17T07:34:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335023"
}
```



---

archive/issue_events_335024.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-18T19:56:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335024"
}
```



---

archive/issue_events_335025.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8c40ff890c7c231e109db687f5317fdd539964c0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-04-18T19:56:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24138#event-335025"
}
```



---

archive/issue_comments_365256.json:
```json
{
    "body": "Changed branch from **[public/linear_algebra/improve_sparse_right_kernel-24138](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/improve_sparse_right_kernel-24138)** to **[`0f2f76e`](https://github.com/sagemath/sagetrac-mirror/commit/0f2f76eb2e4624c25ee532046a7ee461c5ff8527)**",
    "created_at": "2019-04-18T19:56:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24138",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24138#issuecomment-365256",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/linear_algebra/improve_sparse_right_kernel-24138](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/improve_sparse_right_kernel-24138)** to **[`0f2f76e`](https://github.com/sagemath/sagetrac-mirror/commit/0f2f76eb2e4624c25ee532046a7ee461c5ff8527)**
