# Issue 24163: blocks_and_cut_vertices() for disconnected graphs

archive/issues_023926.json:
```json
{
    "assignees": [],
    "body": "This patch adds slow but working code to `blocks_and_cut_vertices()` handling disconnected graphs. I also change documentation.\n\nBranch/Commit: **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**\n\nReviewer: **Jori M\u00e4ntysalo**\n\nAuthor: **David Coudert**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24163_\n\n",
    "closed_at": "2017-12-14T12:40:03Z",
    "created_at": "2017-11-06T09:27:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "blocks_and_cut_vertices() for disconnected graphs",
    "type": "issue",
    "updated_at": "2017-12-14T12:40:03Z",
    "url": "https://github.com/sagemath/sage/issues/24163",
    "user": "https://github.com/jm58660"
}
```
This patch adds slow but working code to `blocks_and_cut_vertices()` handling disconnected graphs. I also change documentation.

Branch/Commit: **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**

Reviewer: **Jori Mäntysalo**

Author: **David Coudert**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/24163_





---

archive/issue_events_336820.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:27:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336820"
}
```



---

archive/issue_events_336821.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:27:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336821"
}
```



---

archive/issue_events_336822.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:27:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336822"
}
```



---

archive/issue_events_336823.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:27:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336823"
}
```



---

archive/issue_comments_365421.json:
```json
{
    "body": "Branch: **[u/jmantysalo/cut-vertex-disconnected](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cut-vertex-disconnected)**",
    "created_at": "2017-11-06T09:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365421",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/cut-vertex-disconnected](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cut-vertex-disconnected)**



---

archive/issue_events_336824.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:28:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336824"
}
```



---

archive/issue_comments_365422.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a\"><code>19d03f6</code></a></td><td><code>Blocks of disconnected graph.</code></td></tr></table>\n",
    "created_at": "2017-11-06T09:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365422",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a"><code>19d03f6</code></a></td><td><code>Blocks of disconnected graph.</code></td></tr></table>




---

archive/issue_comments_365423.json:
```json
{
    "body": "Commit: **[`19d03f6`](https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a)**",
    "created_at": "2017-11-06T09:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365423",
    "user": "https://github.com/jm58660"
}
```

Commit: **[`19d03f6`](https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a)**



---

archive/issue_comments_365424.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI pushed in `u/dcoudert/24163` a much better solution. There is no need to decompose the graph into connected components.\n\nThis said, I run tests on `src/sage/graphs/` without error, but we have to check that we are not introducing inconsistency. So we have to check in each method using `blocks_and_cut_vertices` that what we do is not changing the behavior. For instance, the `blocks_and_cuts_tree` method now returns a forest... We should certainly document that.",
    "created_at": "2017-11-06T13:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365424",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

I pushed in `u/dcoudert/24163` a much better solution. There is no need to decompose the graph into connected components.

This said, I run tests on `src/sage/graphs/` without error, but we have to check that we are not introducing inconsistency. So we have to check in each method using `blocks_and_cut_vertices` that what we do is not changing the behavior. For instance, the `blocks_and_cuts_tree` method now returns a forest... We should certainly document that.



---

archive/issue_comments_365425.json:
```json
{
    "body": "Changed commit from **[`19d03f6`](https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a)** to **[`11700e1`](https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e)**",
    "created_at": "2017-11-06T20:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365425",
    "user": "https://github.com/jm58660"
}
```

Changed commit from **[`19d03f6`](https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a)** to **[`11700e1`](https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e)**



---

archive/issue_comments_365426.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/cut-vertex-disconnected](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cut-vertex-disconnected)** to **[u/dcoudert/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/24163)**",
    "created_at": "2017-11-06T20:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365426",
    "user": "https://github.com/jm58660"
}
```

Changed branch from **[u/jmantysalo/cut-vertex-disconnected](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cut-vertex-disconnected)** to **[u/dcoudert/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/24163)**



---

archive/issue_comments_365427.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@dcoudert](#comment:3):\n> I pushed in `u/dcoudert/24163` a much better solution. There is no need to decompose the graph into connected components.\n\nLet's look at it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e\"><code>11700e1</code></a></td><td><code>trac #24163: handle non connected graphs</code></td></tr></table>\n",
    "created_at": "2017-11-06T20:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365427",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@dcoudert](#comment:3):
> I pushed in `u/dcoudert/24163` a much better solution. There is no need to decompose the graph into connected components.

Let's look at it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e"><code>11700e1</code></a></td><td><code>trac #24163: handle non connected graphs</code></td></tr></table>




---

archive/issue_comments_365428.json:
```json
{
    "body": "Changed author from **Jori M\u00e4ntysalo** to **David Coudert**",
    "created_at": "2017-11-06T20:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365428",
    "user": "https://github.com/jm58660"
}
```

Changed author from **Jori Mäntysalo** to **David Coudert**



---

archive/issue_comments_365429.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAs the main code now handles special cases too, you can remove\n\n```\nif not self: # empty graph                                              \n    return [],[]\n\nif len(self) == 1: # only one vertex                                    \n    return [self.vertices()],[]\n```\n\nIt seems strange to say\n\n```\ntry:\n    # We consider the next of its neighbors                     \n    w = next(neighbors[v])\n      . . .\n# We went through all of v's neighbors                          \nexcept StopIteration:\n . . .\n```\n\nas you could just use\n\n```\nfor w in neighbors[v]:\n   . . .\n. . .\n```\n\nOtherwise I did not yet read the code.",
    "created_at": "2017-11-07T05:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365429",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">comment:6</div>

As the main code now handles special cases too, you can remove

```
if not self: # empty graph                                              
    return [],[]

if len(self) == 1: # only one vertex                                    
    return [self.vertices()],[]
```

It seems strange to say

```
try:
    # We consider the next of its neighbors                     
    w = next(neighbors[v])
      . . .
# We went through all of v's neighbors                          
except StopIteration:
 . . .
```

as you could just use

```
for w in neighbors[v]:
   . . .
. . .
```

Otherwise I did not yet read the code.



---

archive/issue_comments_365430.json:
```json
{
    "body": "Changed commit from **[`11700e1`](https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e)** to **[`1d972ee`](https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950)**",
    "created_at": "2017-11-07T07:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365430",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`11700e1`](https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e)** to **[`1d972ee`](https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950)**



---

archive/issue_comments_365431.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950\"><code>1d972ee</code></a></td><td><code>trac #24163: remove useless tests</code></td></tr></table>\n",
    "created_at": "2017-11-07T07:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365431",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950"><code>1d972ee</code></a></td><td><code>trac #24163: remove useless tests</code></td></tr></table>




---

archive/issue_comments_365432.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI have removed the special cases.\n\nThe try/except is needed here. The original algorithm do recursive calls. To avoid that, we use stack, plus we use an array (dictionary) of iterators over the neighbors to do the for loop.",
    "created_at": "2017-11-07T07:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365432",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

I have removed the special cases.

The try/except is needed here. The original algorithm do recursive calls. To avoid that, we use stack, plus we use an array (dictionary) of iterators over the neighbors to do the for loop.



---

archive/issue_comments_365433.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSeems to work, here is my test code:\n\n```\nset_random_seed(0)\nN = 4\nfor _ in range(100):\n    gg = []\n    while len(gg) < N:\n        g = graphs.RandomGNP(randint(2, 20), 0.3)\n        if g.is_biconnected():\n            gg.append(g)\n    \n    g = Graph()\n    for g_ in gg:\n        g = g+g_\n    a,b = g.blocks_and_cut_vertices()\n    if sorted(x.order() for x in gg) != sorted(len(x) for x in a):\n        raise AssertionError(\"Error 1\")\n    if b:\n        raise AssertionError(\"Error 2\")\n    \n    g.merge_vertices([x[0] for x in g.connected_components()])\n    a,b = g.blocks_and_cut_vertices()\n    if len(b) != 1:\n        raise AssertionError(\"Error 3\")\n    if len(a) != N:\n        raise AssertionError(\"Error 4\")\n    if not all(b[0] in x for x in a):\n        raise AssertionError(\"Error 5\")\n    \n    g = Graph()\n    for g_ in gg:\n        g = g+g_\n    con = g.connected_components()\n    for i in range(N-1):\n        g.merge_vertices([con[i][-1], con[i+1][0]])\n    a,b = g.blocks_and_cut_vertices()\n    if len(b) != N-1:\n        raise AssertionError(\"Error 6\")\n    if len(a) != N:\n        raise AssertionError(\"Error 7\")\n    \nprint(\"Seems to work\")\n```",
    "created_at": "2017-11-07T08:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365433",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:9" align="right">comment:9</div>

Seems to work, here is my test code:

```
set_random_seed(0)
N = 4
for _ in range(100):
    gg = []
    while len(gg) < N:
        g = graphs.RandomGNP(randint(2, 20), 0.3)
        if g.is_biconnected():
            gg.append(g)
    
    g = Graph()
    for g_ in gg:
        g = g+g_
    a,b = g.blocks_and_cut_vertices()
    if sorted(x.order() for x in gg) != sorted(len(x) for x in a):
        raise AssertionError("Error 1")
    if b:
        raise AssertionError("Error 2")
    
    g.merge_vertices([x[0] for x in g.connected_components()])
    a,b = g.blocks_and_cut_vertices()
    if len(b) != 1:
        raise AssertionError("Error 3")
    if len(a) != N:
        raise AssertionError("Error 4")
    if not all(b[0] in x for x in a):
        raise AssertionError("Error 5")
    
    g = Graph()
    for g_ in gg:
        g = g+g_
    con = g.connected_components()
    for i in range(N-1):
        g.merge_vertices([con[i][-1], con[i+1][0]])
    a,b = g.blocks_and_cut_vertices()
    if len(b) != N-1:
        raise AssertionError("Error 6")
    if len(a) != N:
        raise AssertionError("Error 7")
    
print("Seems to work")
```



---

archive/issue_comments_365434.json:
```json
{
    "body": "Changed commit from **[`1d972ee`](https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950)** to **[`96f4d04`](https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a)**",
    "created_at": "2017-11-09T09:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365434",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d972ee`](https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950)** to **[`96f4d04`](https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a)**



---

archive/issue_comments_365435.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41b0a057980cde1e0e2b13c81c6a132286efb5c7\"><code>41b0a05</code></a></td><td><code>trac #24163: update tutte_polynomial.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a\"><code>96f4d04</code></a></td><td><code>trac #24163: update documentation of blocks_and_cuts_tree</code></td></tr></table>\n",
    "created_at": "2017-11-09T09:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365435",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41b0a057980cde1e0e2b13c81c6a132286efb5c7"><code>41b0a05</code></a></td><td><code>trac #24163: update tutte_polynomial.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a"><code>96f4d04</code></a></td><td><code>trac #24163: update documentation of blocks_and_cuts_tree</code></td></tr></table>




---

archive/issue_comments_365436.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI went through all methods using `blocks_and_cut_vertices` in `graph/` to check that we are not changing behavior.",
    "created_at": "2017-11-09T09:17:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365436",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:11" align="right">comment:11</div>

I went through all methods using `blocks_and_cut_vertices` in `graph/` to check that we are not changing behavior.



---

archive/issue_comments_365437.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/24163)** to **[u/jmantysalo/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/24163)**",
    "created_at": "2017-11-10T06:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365437",
    "user": "https://github.com/jm58660"
}
```

Changed branch from **[u/dcoudert/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/24163)** to **[u/jmantysalo/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/24163)**



---

archive/issue_comments_365438.json:
```json
{
    "body": "Reviewer: **Jori M\u00e4ntysalo**",
    "created_at": "2017-11-10T06:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365438",
    "user": "https://github.com/jm58660"
}
```

Reviewer: **Jori Mäntysalo**



---

archive/issue_comments_365439.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@dcoudert](#comment:8):\n> I have removed the special cases.\n\nGood. This addition actually made parts of Sage simpler.\n\n> The try/except is needed here. The original algorithm do recursive calls. To avoid that, we use stack, plus we use an array (dictionary) of iterators over the neighbors to do the for loop.\n\nYeah, that was my bad.\n\nI did a technical merge and will check this one.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451\"><code>861ce4c</code></a></td><td><code>Merge branch 'develop' into t/24163/24163</code></td></tr></table>\n",
    "created_at": "2017-11-10T06:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365439",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@dcoudert](#comment:8):
> I have removed the special cases.

Good. This addition actually made parts of Sage simpler.

> The try/except is needed here. The original algorithm do recursive calls. To avoid that, we use stack, plus we use an array (dictionary) of iterators over the neighbors to do the for loop.

Yeah, that was my bad.

I did a technical merge and will check this one.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451"><code>861ce4c</code></a></td><td><code>Merge branch 'develop' into t/24163/24163</code></td></tr></table>




---

archive/issue_comments_365440.json:
```json
{
    "body": "Changed commit from **[`96f4d04`](https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a)** to **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**",
    "created_at": "2017-11-10T06:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365440",
    "user": "https://github.com/jm58660"
}
```

Changed commit from **[`96f4d04`](https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a)** to **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**



---

archive/issue_comments_365441.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI assume that the technical merge is a rebase on rc0. Thanks.",
    "created_at": "2017-11-10T07:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365441",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:14" align="right">comment:14</div>

I assume that the technical merge is a rebase on rc0. Thanks.



---

archive/issue_events_336825.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-10T08:11:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336825"
}
```



---

archive/issue_events_336826.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-10T08:11:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336826"
}
```



---

archive/issue_comments_365442.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@dcoudert](#comment:14):\n> I assume that the technical merge is a rebase on rc0. Thanks.\n\nJust that.\n\nThis is good to go, but rc0 is out so I changed the milestone.",
    "created_at": "2017-11-10T08:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365442",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@dcoudert](#comment:14):
> I assume that the technical merge is a rebase on rc0. Thanks.

Just that.

This is good to go, but rc0 is out so I changed the milestone.



---

archive/issue_events_336827.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-10T08:11:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336827"
}
```



---

archive/issue_events_336828.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-10T08:11:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336828"
}
```



---

archive/issue_comments_365443.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOK. Thanks. This is useful improvement.",
    "created_at": "2017-11-10T08:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365443",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

OK. Thanks. This is useful improvement.



---

archive/issue_comments_365444.json:
```json
{
    "body": "Changed commit from **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)** to **[`af2da9e`](https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52)**",
    "created_at": "2017-11-17T09:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365444",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)** to **[`af2da9e`](https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52)**



---

archive/issue_events_336829.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2017-11-17T09:10:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336829"
}
```



---

archive/issue_events_336830.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2017-11-17T09:10:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336830"
}
```



---

archive/issue_comments_365445.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2773a69229f4f658abccf697caf313aef0c84bc\"><code>c2773a6</code></a></td><td><code>Add crossing number.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/669bb34dff3f87b76dfb42bd2c1032a450f1ff83\"><code>669bb34</code></a></td><td><code>Reformat tests-block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8de878c35236cdc359e163f7e9e4838a74b192ad\"><code>8de878c</code></a></td><td><code>Shortcut for planar graphs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51fbdbaf3f31bde8c25a993928bbe5bed78870c4\"><code>51fbdba</code></a></td><td><code>Another optimization, bug correction etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ed0501e8e0a8192f7687300fc732bca7ed1ce26\"><code>7ed0501</code></a></td><td><code>Merge branch 'develop' into crossing_number</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52\"><code>af2da9e</code></a></td><td><code>Use blocks_and_cut_vertices().</code></td></tr></table>\n",
    "created_at": "2017-11-17T09:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365445",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2773a69229f4f658abccf697caf313aef0c84bc"><code>c2773a6</code></a></td><td><code>Add crossing number.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/669bb34dff3f87b76dfb42bd2c1032a450f1ff83"><code>669bb34</code></a></td><td><code>Reformat tests-block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8de878c35236cdc359e163f7e9e4838a74b192ad"><code>8de878c</code></a></td><td><code>Shortcut for planar graphs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51fbdbaf3f31bde8c25a993928bbe5bed78870c4"><code>51fbdba</code></a></td><td><code>Another optimization, bug correction etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ed0501e8e0a8192f7687300fc732bca7ed1ce26"><code>7ed0501</code></a></td><td><code>Merge branch 'develop' into crossing_number</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52"><code>af2da9e</code></a></td><td><code>Use blocks_and_cut_vertices().</code></td></tr></table>




---

archive/issue_comments_365446.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nArghs, wrong ticket number...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2773a69229f4f658abccf697caf313aef0c84bc\"><code>c2773a6</code></a></td><td><code>Add crossing number.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/669bb34dff3f87b76dfb42bd2c1032a450f1ff83\"><code>669bb34</code></a></td><td><code>Reformat tests-block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8de878c35236cdc359e163f7e9e4838a74b192ad\"><code>8de878c</code></a></td><td><code>Shortcut for planar graphs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51fbdbaf3f31bde8c25a993928bbe5bed78870c4\"><code>51fbdba</code></a></td><td><code>Another optimization, bug correction etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ed0501e8e0a8192f7687300fc732bca7ed1ce26\"><code>7ed0501</code></a></td><td><code>Merge branch 'develop' into crossing_number</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52\"><code>af2da9e</code></a></td><td><code>Use blocks_and_cut_vertices().</code></td></tr></table>\n",
    "created_at": "2017-11-17T09:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365446",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:18" align="right">comment:18</div>

Arghs, wrong ticket number...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2773a69229f4f658abccf697caf313aef0c84bc"><code>c2773a6</code></a></td><td><code>Add crossing number.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/669bb34dff3f87b76dfb42bd2c1032a450f1ff83"><code>669bb34</code></a></td><td><code>Reformat tests-block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8de878c35236cdc359e163f7e9e4838a74b192ad"><code>8de878c</code></a></td><td><code>Shortcut for planar graphs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51fbdbaf3f31bde8c25a993928bbe5bed78870c4"><code>51fbdba</code></a></td><td><code>Another optimization, bug correction etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ed0501e8e0a8192f7687300fc732bca7ed1ce26"><code>7ed0501</code></a></td><td><code>Merge branch 'develop' into crossing_number</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52"><code>af2da9e</code></a></td><td><code>Use blocks_and_cut_vertices().</code></td></tr></table>




---

archive/issue_comments_365447.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e\"><code>11700e1</code></a></td><td><code>trac #24163: handle non connected graphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950\"><code>1d972ee</code></a></td><td><code>trac #24163: remove useless tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41b0a057980cde1e0e2b13c81c6a132286efb5c7\"><code>41b0a05</code></a></td><td><code>trac #24163: update tutte_polynomial.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a\"><code>96f4d04</code></a></td><td><code>trac #24163: update documentation of blocks_and_cuts_tree</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451\"><code>861ce4c</code></a></td><td><code>Merge branch 'develop' into t/24163/24163</code></td></tr></table>\n",
    "created_at": "2017-11-17T09:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365447",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e"><code>11700e1</code></a></td><td><code>trac #24163: handle non connected graphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950"><code>1d972ee</code></a></td><td><code>trac #24163: remove useless tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41b0a057980cde1e0e2b13c81c6a132286efb5c7"><code>41b0a05</code></a></td><td><code>trac #24163: update tutte_polynomial.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a"><code>96f4d04</code></a></td><td><code>trac #24163: update documentation of blocks_and_cuts_tree</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451"><code>861ce4c</code></a></td><td><code>Merge branch 'develop' into t/24163/24163</code></td></tr></table>




---

archive/issue_comments_365448.json:
```json
{
    "body": "Changed commit from **[`af2da9e`](https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52)** to **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**",
    "created_at": "2017-11-17T09:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365448",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af2da9e`](https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52)** to **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**



---

archive/issue_events_336831.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-17T10:45:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336831"
}
```



---

archive/issue_events_336832.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-17T10:45:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336832"
}
```



---

archive/issue_comments_365449.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nBack to positive, this was automatically put to needs_review after my error.",
    "created_at": "2017-11-17T10:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365449",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:20" align="right">comment:20</div>

Back to positive, this was automatically put to needs_review after my error.



---

archive/issue_events_336833.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-14T12:40:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336833"
}
```



---

archive/issue_events_336834.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "aee4d262e0b01cdacdd91c46046fad23ec9c2c56",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-12-14T12:40:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-336834"
}
```



---

archive/issue_comments_365450.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/24163)** to **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**",
    "created_at": "2017-12-14T12:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-365450",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jmantysalo/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/24163)** to **[`861ce4c`](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**
