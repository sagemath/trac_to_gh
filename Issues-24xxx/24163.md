# Issue 24163: blocks_and_cut_vertices() for disconnected graphs

archive/issues_023926.json:
```json
{
    "assignees": [],
    "body": "This patch adds slow but working code to `blocks_and_cut_vertices()` handling disconnected graphs. I also change documentation.\n\nBranch/Commit: **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**\n\nReviewer: **Jori M\u00e4ntysalo**\n\nAuthor: **David Coudert**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24163_\n\n",
    "closed_at": "2017-12-14T12:40:03Z",
    "created_at": "2017-11-06T09:27:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "blocks_and_cut_vertices() for disconnected graphs",
    "type": "issue",
    "updated_at": "2017-12-14T12:40:03Z",
    "url": "https://github.com/sagemath/sage/issues/24163",
    "user": "https://github.com/jm58660"
}
```
This patch adds slow but working code to `blocks_and_cut_vertices()` handling disconnected graphs. I also change documentation.

Branch/Commit: **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**

Reviewer: **Jori MÃ¤ntysalo**

Author: **David Coudert**

_Issue created by migration from https://trac.sagemath.org/ticket/24163_





---

archive/issue_events_317242.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:27:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317242"
}
```



---

archive/issue_events_317243.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:27:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317243"
}
```



---

archive/issue_events_317244.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:27:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317244"
}
```



---

archive/issue_events_317245.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:27:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317245"
}
```



---

archive/issue_comments_368187.json:
```json
{
    "body": "Branch: **[u/jmantysalo/cut-vertex-disconnected](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cut-vertex-disconnected)**",
    "created_at": "2017-11-06T09:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368187",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/cut-vertex-disconnected](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cut-vertex-disconnected)**



---

archive/issue_events_317246.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-06T09:28:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317246"
}
```



---

archive/issue_comments_368188.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a\">19d03f6</a></td><td><code>Blocks of disconnected graph.</code></td></tr></table>\n",
    "created_at": "2017-11-06T09:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368188",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a">19d03f6</a></td><td><code>Blocks of disconnected graph.</code></td></tr></table>




---

archive/issue_comments_368189.json:
```json
{
    "body": "Commit: **[19d03f6](https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a)**",
    "created_at": "2017-11-06T09:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368189",
    "user": "https://github.com/jm58660"
}
```

Commit: **[19d03f6](https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a)**



---

archive/issue_comments_368190.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nI pushed in `u/dcoudert/24163` a much better solution. There is no need to decompose the graph into connected components.\n\nThis said, I run tests on `src/sage/graphs/` without error, but we have to check that we are not introducing inconsistency. So we have to check in each method using `blocks_and_cut_vertices` that what we do is not changing the behavior. For instance, the `blocks_and_cuts_tree` method now returns a forest... We should certainly document that.",
    "created_at": "2017-11-06T13:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368190",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'>Comment 3:</a>
I pushed in `u/dcoudert/24163` a much better solution. There is no need to decompose the graph into connected components.

This said, I run tests on `src/sage/graphs/` without error, but we have to check that we are not introducing inconsistency. So we have to check in each method using `blocks_and_cut_vertices` that what we do is not changing the behavior. For instance, the `blocks_and_cuts_tree` method now returns a forest... We should certainly document that.



---

archive/issue_comments_368191.json:
```json
{
    "body": "Changed commit from **[19d03f6](https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a)** to **[11700e1](https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e)**",
    "created_at": "2017-11-06T20:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368191",
    "user": "https://github.com/jm58660"
}
```

Changed commit from **[19d03f6](https://github.com/sagemath/sagetrac-mirror/commit/19d03f691662c1d99c7dcd43b56c37dfbfbba27a)** to **[11700e1](https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e)**



---

archive/issue_comments_368192.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/cut-vertex-disconnected](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cut-vertex-disconnected)** to **[u/dcoudert/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/24163)**",
    "created_at": "2017-11-06T20:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368192",
    "user": "https://github.com/jm58660"
}
```

Changed branch from **[u/jmantysalo/cut-vertex-disconnected](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cut-vertex-disconnected)** to **[u/dcoudert/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/24163)**



---

archive/issue_comments_368193.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@dcoudert](#comment%3A3):\n> I pushed in `u/dcoudert/24163` a much better solution. There is no need to decompose the graph into connected components.\n\nLet's look at it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e\">11700e1</a></td><td><code>trac #24163: handle non connected graphs</code></td></tr></table>\n",
    "created_at": "2017-11-06T20:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368193",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@dcoudert](#comment%3A3):
> I pushed in `u/dcoudert/24163` a much better solution. There is no need to decompose the graph into connected components.

Let's look at it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e">11700e1</a></td><td><code>trac #24163: handle non connected graphs</code></td></tr></table>




---

archive/issue_comments_368194.json:
```json
{
    "body": "Changed author from **Jori M\u00e4ntysalo** to **David Coudert**",
    "created_at": "2017-11-06T20:42:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368194",
    "user": "https://github.com/jm58660"
}
```

Changed author from **Jori MÃ¤ntysalo** to **David Coudert**



---

archive/issue_comments_368195.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nAs the main code now handles special cases too, you can remove\n\n```\nif not self: # empty graph                                              \n    return [],[]\n\nif len(self) == 1: # only one vertex                                    \n    return [self.vertices()],[]\n```\n\nIt seems strange to say\n\n```\ntry:\n    # We consider the next of its neighbors                     \n    w = next(neighbors[v])\n      . . .\n# We went through all of v's neighbors                          \nexcept StopIteration:\n . . .\n```\n\nas you could just use\n\n```\nfor w in neighbors[v]:\n   . . .\n. . .\n```\n\nOtherwise I did not yet read the code.",
    "created_at": "2017-11-07T05:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368195",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'>Comment 6:</a>
As the main code now handles special cases too, you can remove

```
if not self: # empty graph                                              
    return [],[]

if len(self) == 1: # only one vertex                                    
    return [self.vertices()],[]
```

It seems strange to say

```
try:
    # We consider the next of its neighbors                     
    w = next(neighbors[v])
      . . .
# We went through all of v's neighbors                          
except StopIteration:
 . . .
```

as you could just use

```
for w in neighbors[v]:
   . . .
. . .
```

Otherwise I did not yet read the code.



---

archive/issue_comments_368196.json:
```json
{
    "body": "Changed commit from **[11700e1](https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e)** to **[1d972ee](https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950)**",
    "created_at": "2017-11-07T07:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368196",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[11700e1](https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e)** to **[1d972ee](https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950)**



---

archive/issue_comments_368197.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950\">1d972ee</a></td><td><code>trac #24163: remove useless tests</code></td></tr></table>\n",
    "created_at": "2017-11-07T07:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368197",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950">1d972ee</a></td><td><code>trac #24163: remove useless tests</code></td></tr></table>




---

archive/issue_comments_368198.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI have removed the special cases.\n\nThe try/except is needed here. The original algorithm do recursive calls. To avoid that, we use stack, plus we use an array (dictionary) of iterators over the neighbors to do the for loop.",
    "created_at": "2017-11-07T07:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368198",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'>Comment 8:</a>
I have removed the special cases.

The try/except is needed here. The original algorithm do recursive calls. To avoid that, we use stack, plus we use an array (dictionary) of iterators over the neighbors to do the for loop.



---

archive/issue_comments_368199.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nSeems to work, here is my test code:\n\n```\nset_random_seed(0)\nN = 4\nfor _ in range(100):\n    gg = []\n    while len(gg) < N:\n        g = graphs.RandomGNP(randint(2, 20), 0.3)\n        if g.is_biconnected():\n            gg.append(g)\n    \n    g = Graph()\n    for g_ in gg:\n        g = g+g_\n    a,b = g.blocks_and_cut_vertices()\n    if sorted(x.order() for x in gg) != sorted(len(x) for x in a):\n        raise AssertionError(\"Error 1\")\n    if b:\n        raise AssertionError(\"Error 2\")\n    \n    g.merge_vertices([x[0] for x in g.connected_components()])\n    a,b = g.blocks_and_cut_vertices()\n    if len(b) != 1:\n        raise AssertionError(\"Error 3\")\n    if len(a) != N:\n        raise AssertionError(\"Error 4\")\n    if not all(b[0] in x for x in a):\n        raise AssertionError(\"Error 5\")\n    \n    g = Graph()\n    for g_ in gg:\n        g = g+g_\n    con = g.connected_components()\n    for i in range(N-1):\n        g.merge_vertices([con[i][-1], con[i+1][0]])\n    a,b = g.blocks_and_cut_vertices()\n    if len(b) != N-1:\n        raise AssertionError(\"Error 6\")\n    if len(a) != N:\n        raise AssertionError(\"Error 7\")\n    \nprint(\"Seems to work\")\n```",
    "created_at": "2017-11-07T08:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368199",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:9'>Comment 9:</a>
Seems to work, here is my test code:

```
set_random_seed(0)
N = 4
for _ in range(100):
    gg = []
    while len(gg) < N:
        g = graphs.RandomGNP(randint(2, 20), 0.3)
        if g.is_biconnected():
            gg.append(g)
    
    g = Graph()
    for g_ in gg:
        g = g+g_
    a,b = g.blocks_and_cut_vertices()
    if sorted(x.order() for x in gg) != sorted(len(x) for x in a):
        raise AssertionError("Error 1")
    if b:
        raise AssertionError("Error 2")
    
    g.merge_vertices([x[0] for x in g.connected_components()])
    a,b = g.blocks_and_cut_vertices()
    if len(b) != 1:
        raise AssertionError("Error 3")
    if len(a) != N:
        raise AssertionError("Error 4")
    if not all(b[0] in x for x in a):
        raise AssertionError("Error 5")
    
    g = Graph()
    for g_ in gg:
        g = g+g_
    con = g.connected_components()
    for i in range(N-1):
        g.merge_vertices([con[i][-1], con[i+1][0]])
    a,b = g.blocks_and_cut_vertices()
    if len(b) != N-1:
        raise AssertionError("Error 6")
    if len(a) != N:
        raise AssertionError("Error 7")
    
print("Seems to work")
```



---

archive/issue_comments_368200.json:
```json
{
    "body": "Changed commit from **[1d972ee](https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950)** to **[96f4d04](https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a)**",
    "created_at": "2017-11-09T09:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368200",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1d972ee](https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950)** to **[96f4d04](https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a)**



---

archive/issue_comments_368201.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41b0a057980cde1e0e2b13c81c6a132286efb5c7\">41b0a05</a></td><td><code>trac #24163: update tutte_polynomial.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a\">96f4d04</a></td><td><code>trac #24163: update documentation of blocks_and_cuts_tree</code></td></tr></table>\n",
    "created_at": "2017-11-09T09:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368201",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41b0a057980cde1e0e2b13c81c6a132286efb5c7">41b0a05</a></td><td><code>trac #24163: update tutte_polynomial.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a">96f4d04</a></td><td><code>trac #24163: update documentation of blocks_and_cuts_tree</code></td></tr></table>




---

archive/issue_comments_368202.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI went through all methods using `blocks_and_cut_vertices` in `graph/` to check that we are not changing behavior.",
    "created_at": "2017-11-09T09:17:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368202",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:11'>Comment 11:</a>
I went through all methods using `blocks_and_cut_vertices` in `graph/` to check that we are not changing behavior.



---

archive/issue_comments_368203.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/24163)** to **[u/jmantysalo/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/24163)**",
    "created_at": "2017-11-10T06:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368203",
    "user": "https://github.com/jm58660"
}
```

Changed branch from **[u/dcoudert/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/24163)** to **[u/jmantysalo/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/24163)**



---

archive/issue_comments_368204.json:
```json
{
    "body": "Reviewer: **Jori M\u00e4ntysalo**",
    "created_at": "2017-11-10T06:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368204",
    "user": "https://github.com/jm58660"
}
```

Reviewer: **Jori MÃ¤ntysalo**



---

archive/issue_comments_368205.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@dcoudert](#comment%3A8):\n> I have removed the special cases.\n\nGood. This addition actually made parts of Sage simpler.\n\n> The try/except is needed here. The original algorithm do recursive calls. To avoid that, we use stack, plus we use an array (dictionary) of iterators over the neighbors to do the for loop.\n\nYeah, that was my bad.\n\nI did a technical merge and will check this one.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451\">861ce4c</a></td><td><code>Merge branch 'develop' into t/24163/24163</code></td></tr></table>\n",
    "created_at": "2017-11-10T06:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368205",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@dcoudert](#comment%3A8):
> I have removed the special cases.

Good. This addition actually made parts of Sage simpler.

> The try/except is needed here. The original algorithm do recursive calls. To avoid that, we use stack, plus we use an array (dictionary) of iterators over the neighbors to do the for loop.

Yeah, that was my bad.

I did a technical merge and will check this one.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451">861ce4c</a></td><td><code>Merge branch 'develop' into t/24163/24163</code></td></tr></table>




---

archive/issue_comments_368206.json:
```json
{
    "body": "Changed commit from **[96f4d04](https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a)** to **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**",
    "created_at": "2017-11-10T06:35:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368206",
    "user": "https://github.com/jm58660"
}
```

Changed commit from **[96f4d04](https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a)** to **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**



---

archive/issue_comments_368207.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI assume that the technical merge is a rebase on rc0. Thanks.",
    "created_at": "2017-11-10T07:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368207",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:14'>Comment 14:</a>
I assume that the technical merge is a rebase on rc0. Thanks.



---

archive/issue_events_317247.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-10T08:11:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317247"
}
```



---

archive/issue_events_317248.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-10T08:11:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317248"
}
```



---

archive/issue_comments_368208.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@dcoudert](#comment%3A14):\n> I assume that the technical merge is a rebase on rc0. Thanks.\n\nJust that.\n\nThis is good to go, but rc0 is out so I changed the milestone.",
    "created_at": "2017-11-10T08:11:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368208",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@dcoudert](#comment%3A14):
> I assume that the technical merge is a rebase on rc0. Thanks.

Just that.

This is good to go, but rc0 is out so I changed the milestone.



---

archive/issue_events_317249.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-10T08:11:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317249"
}
```



---

archive/issue_events_317250.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-10T08:11:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317250"
}
```



---

archive/issue_comments_368209.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nOK. Thanks. This is useful improvement.",
    "created_at": "2017-11-10T08:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368209",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:16'>Comment 16:</a>
OK. Thanks. This is useful improvement.



---

archive/issue_comments_368210.json:
```json
{
    "body": "Changed commit from **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)** to **[af2da9e](https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52)**",
    "created_at": "2017-11-17T09:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368210",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)** to **[af2da9e](https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52)**



---

archive/issue_events_317251.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2017-11-17T09:10:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317251"
}
```



---

archive/issue_events_317252.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2017-11-17T09:10:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317252"
}
```



---

archive/issue_comments_368211.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2773a69229f4f658abccf697caf313aef0c84bc\">c2773a6</a></td><td><code>Add crossing number.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/669bb34dff3f87b76dfb42bd2c1032a450f1ff83\">669bb34</a></td><td><code>Reformat tests-block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8de878c35236cdc359e163f7e9e4838a74b192ad\">8de878c</a></td><td><code>Shortcut for planar graphs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51fbdbaf3f31bde8c25a993928bbe5bed78870c4\">51fbdba</a></td><td><code>Another optimization, bug correction etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ed0501e8e0a8192f7687300fc732bca7ed1ce26\">7ed0501</a></td><td><code>Merge branch 'develop' into crossing_number</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52\">af2da9e</a></td><td><code>Use blocks_and_cut_vertices().</code></td></tr></table>\n",
    "created_at": "2017-11-17T09:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368211",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2773a69229f4f658abccf697caf313aef0c84bc">c2773a6</a></td><td><code>Add crossing number.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/669bb34dff3f87b76dfb42bd2c1032a450f1ff83">669bb34</a></td><td><code>Reformat tests-block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8de878c35236cdc359e163f7e9e4838a74b192ad">8de878c</a></td><td><code>Shortcut for planar graphs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51fbdbaf3f31bde8c25a993928bbe5bed78870c4">51fbdba</a></td><td><code>Another optimization, bug correction etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ed0501e8e0a8192f7687300fc732bca7ed1ce26">7ed0501</a></td><td><code>Merge branch 'develop' into crossing_number</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52">af2da9e</a></td><td><code>Use blocks_and_cut_vertices().</code></td></tr></table>




---

archive/issue_comments_368212.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nArghs, wrong ticket number...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2773a69229f4f658abccf697caf313aef0c84bc\">c2773a6</a></td><td><code>Add crossing number.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/669bb34dff3f87b76dfb42bd2c1032a450f1ff83\">669bb34</a></td><td><code>Reformat tests-block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8de878c35236cdc359e163f7e9e4838a74b192ad\">8de878c</a></td><td><code>Shortcut for planar graphs.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51fbdbaf3f31bde8c25a993928bbe5bed78870c4\">51fbdba</a></td><td><code>Another optimization, bug correction etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ed0501e8e0a8192f7687300fc732bca7ed1ce26\">7ed0501</a></td><td><code>Merge branch 'develop' into crossing_number</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52\">af2da9e</a></td><td><code>Use blocks_and_cut_vertices().</code></td></tr></table>\n",
    "created_at": "2017-11-17T09:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368212",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:18'>Comment 18:</a>
Arghs, wrong ticket number...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2773a69229f4f658abccf697caf313aef0c84bc">c2773a6</a></td><td><code>Add crossing number.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/669bb34dff3f87b76dfb42bd2c1032a450f1ff83">669bb34</a></td><td><code>Reformat tests-block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8de878c35236cdc359e163f7e9e4838a74b192ad">8de878c</a></td><td><code>Shortcut for planar graphs.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51fbdbaf3f31bde8c25a993928bbe5bed78870c4">51fbdba</a></td><td><code>Another optimization, bug correction etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ed0501e8e0a8192f7687300fc732bca7ed1ce26">7ed0501</a></td><td><code>Merge branch 'develop' into crossing_number</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52">af2da9e</a></td><td><code>Use blocks_and_cut_vertices().</code></td></tr></table>




---

archive/issue_comments_368213.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e\">11700e1</a></td><td><code>trac #24163: handle non connected graphs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950\">1d972ee</a></td><td><code>trac #24163: remove useless tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41b0a057980cde1e0e2b13c81c6a132286efb5c7\">41b0a05</a></td><td><code>trac #24163: update tutte_polynomial.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a\">96f4d04</a></td><td><code>trac #24163: update documentation of blocks_and_cuts_tree</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451\">861ce4c</a></td><td><code>Merge branch 'develop' into t/24163/24163</code></td></tr></table>\n",
    "created_at": "2017-11-17T09:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368213",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>Comment 19:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11700e13c5b81d899df0873a7b0efa050321a95e">11700e1</a></td><td><code>trac #24163: handle non connected graphs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d972ee64fce5fcb1210d5cabb7527d88d524950">1d972ee</a></td><td><code>trac #24163: remove useless tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41b0a057980cde1e0e2b13c81c6a132286efb5c7">41b0a05</a></td><td><code>trac #24163: update tutte_polynomial.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96f4d04cc2389f8451bbcfc15fa531485cb1e93a">96f4d04</a></td><td><code>trac #24163: update documentation of blocks_and_cuts_tree</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451">861ce4c</a></td><td><code>Merge branch 'develop' into t/24163/24163</code></td></tr></table>




---

archive/issue_comments_368214.json:
```json
{
    "body": "Changed commit from **[af2da9e](https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52)** to **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**",
    "created_at": "2017-11-17T09:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368214",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[af2da9e](https://github.com/sagemath/sagetrac-mirror/commit/af2da9ecae0e0bc856ee7e740986d17b7a9a4b52)** to **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**



---

archive/issue_events_317253.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-17T10:45:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317253"
}
```



---

archive/issue_events_317254.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-11-17T10:45:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317254"
}
```



---

archive/issue_comments_368215.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBack to positive, this was automatically put to needs_review after my error.",
    "created_at": "2017-11-17T10:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368215",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:20'>Comment 20:</a>
Back to positive, this was automatically put to needs_review after my error.



---

archive/issue_events_317255.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-14T12:40:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317255"
}
```



---

archive/issue_events_317256.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "aee4d262e0b01cdacdd91c46046fad23ec9c2c56",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-12-14T12:40:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24163#event-317256"
}
```



---

archive/issue_comments_368216.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/24163)** to **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**",
    "created_at": "2017-12-14T12:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24163",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24163#issuecomment-368216",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jmantysalo/24163](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/24163)** to **[861ce4c](https://github.com/sagemath/sagetrac-mirror/commit/861ce4c302ef5a2ae9b9b0bccd935aa7fb3f3451)**
