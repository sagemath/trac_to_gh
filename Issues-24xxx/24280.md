# Issue 24280: experimental package for the 3D printing of Cayley graphs.

archive/issues_024043.json:
```json
{
    "body": "On the website reflections.swarthmore.edu, we have implemented a model builder for Cayley graphs of low-rank reflection groups in a series of SageCells. We would like to use this code to create an experimental package.\n\nCC:  @jplab @tscrim @bsalisbury1 @elizabethjd\n\nKeywords: sagedays@icerm\n\nBranch: u/kdilks/3d_cayley_graphs\n\nStatus: needs_work\n\nCommit: e1ee29f14b901570c057096d8ca7b023093abdf1\n\nIssue created by migration from https://trac.sagemath.org/ticket/24280\n\n",
    "created_at": "2017-11-25T21:40:51Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "experimental package for the 3D printing of Cayley graphs.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24280",
    "user": "https://trac.sagemath.org/admin/accounts/users/kjcollins"
}
```
On the website reflections.swarthmore.edu, we have implemented a model builder for Cayley graphs of low-rank reflection groups in a series of SageCells. We would like to use this code to create an experimental package.

CC:  @jplab @tscrim @bsalisbury1 @elizabethjd

Keywords: sagedays@icerm

Branch: u/kdilks/3d_cayley_graphs

Status: needs_work

Commit: e1ee29f14b901570c057096d8ca7b023093abdf1

Issue created by migration from https://trac.sagemath.org/ticket/24280





---

archive/issue_comments_461878.json:
```json
{
    "body": "<a id='comment:1'></a>\nPackage code currently at this link: https://github.com/kjcollins/3d_cayley_graphs. Model class is in cayley_model.sage.\n\n\n\nWe would like to include this as an addition to sage/plot/plot3d, if it's appropriate.",
    "created_at": "2018-03-16T16:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461878",
    "user": "https://trac.sagemath.org/admin/accounts/users/kjcollins"
}
```

<a id='comment:1'></a>
Package code currently at this link: https://github.com/kjcollins/3d_cayley_graphs. Model class is in cayley_model.sage.



We would like to include this as an addition to sage/plot/plot3d, if it's appropriate.



---

archive/issue_comments_461879.json:
```json
{
    "body": "Changing branch from \"\" to \"u/kjcollins/3d_cayley_graphs\"",
    "created_at": "2018-05-24T15:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461879",
    "user": "https://trac.sagemath.org/admin/accounts/users/kjcollins"
}
```

Changing branch from "" to "u/kjcollins/3d_cayley_graphs"



---

archive/issue_comments_461880.json:
```json
{
    "body": "Changing commit from \"\" to \"80faffa9b4ea115f02aafbc5c6eafdfa76144d65\"",
    "created_at": "2018-05-24T15:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461880",
    "user": "https://trac.sagemath.org/admin/accounts/users/kjcollins"
}
```

Changing commit from "" to "80faffa9b4ea115f02aafbc5c6eafdfa76144d65"



---

archive/issue_comments_461881.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2018-05-24T15:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461881",
    "user": "https://trac.sagemath.org/admin/accounts/users/kjcollins"
}
```

Changing status from new to needs_info.



---

archive/issue_events_069902.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/kjcollins",
    "created_at": "2018-05-24T15:19:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24280#event-69902"
}
```



---

archive/issue_comments_461882.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[80faffa](https://github.com/sagemath/sagetrac-mirror/commit/80faffa9b4ea115f02aafbc5c6eafdfa76144d65)|`uploading package to ticket`|",
    "created_at": "2018-05-24T15:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461882",
    "user": "https://trac.sagemath.org/admin/accounts/users/kjcollins"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[80faffa](https://github.com/sagemath/sagetrac-mirror/commit/80faffa9b4ea115f02aafbc5c6eafdfa76144d65)|`uploading package to ticket`|



---

archive/issue_comments_461883.json:
```json
{
    "body": "<a id='comment:5'></a>\nIn order for the bot to test your ticket, it is required to have the field \"Authors\" filled with the full names of the authors",
    "created_at": "2018-07-11T10:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461883",
    "user": "https://github.com/jplab"
}
```

<a id='comment:5'></a>
In order for the bot to test your ticket, it is required to have the field "Authors" filled with the full names of the authors



---

archive/issue_comments_461884.json:
```json
{
    "body": "<a id='comment:6'></a>\nHi,\n\nI had a look at the code, here are already some things to have a look at:\n\n- The module should follow the general coding convention of sage, for example the indentation:\n\n```\nEXAMPLES:\n\nBasic plot of a reflection group::     <---- double colon here.\n             <------ line break here\n    sage: ReflectionGroup(['A',3])                             # optional - gap3\n    Irreducible real reflection group of rank 3 and type A3\n    sage: w = ReflectionGroup(['A',3])                         # optional - gap3\n    sage: ReflectionGroup3d(w)\n    Rigid graphical representation of Irreducible real reflection group of rank 3 and type A3\n    sage: g = ReflectionGroup3d(w)\n    sage: g.plot3d()\n    Graphics3d Object\n```\n\nfor more details, see here https://doc.sagemath.org/html/en/developer/#writing-code-for-sage . Further, the first line of test above is not needed.\n\n- The code should also try to follow pep8 conventions: https://www.python.org/dev/peps/pep-0008/\n\n- The examples given in the documentation should work out-of-the-box, that is, running `sage -t sage/src/sage/plot/plot3d/reflection_group3d.py` should not return failures (currently has 120, for example, you should not forget to import the relevant function like `ReflectionGroup` in the preamble of the file.)\n\n- The name of the class is perhaps not so well-chosen, perhaps `cayley_graph3d`? Which leads to a potential follow-up question: could this work eventually for general groups?\n\n- General question: do you really need `gap3`? You can require `gap3`, but then should be nice to the user and say it at in the docstring of the module.\n\n- Sage does not usually privilege the usage of user warnings. It should be explained in the docstring of the function what is done, with an example.\n\n- About the Jmol bug, could you give a minimal working instance of the bug?\n\nThat's what I can see for now. If you could work on the above list, then I can continue to give feedback once new versions come along!\n\nBest,\nJP",
    "created_at": "2018-07-11T12:12:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461884",
    "user": "https://github.com/jplab"
}
```

<a id='comment:6'></a>
Hi,

I had a look at the code, here are already some things to have a look at:

- The module should follow the general coding convention of sage, for example the indentation:

```
EXAMPLES:

Basic plot of a reflection group::     <---- double colon here.
             <------ line break here
    sage: ReflectionGroup(['A',3])                             # optional - gap3
    Irreducible real reflection group of rank 3 and type A3
    sage: w = ReflectionGroup(['A',3])                         # optional - gap3
    sage: ReflectionGroup3d(w)
    Rigid graphical representation of Irreducible real reflection group of rank 3 and type A3
    sage: g = ReflectionGroup3d(w)
    sage: g.plot3d()
    Graphics3d Object
```

for more details, see here https://doc.sagemath.org/html/en/developer/#writing-code-for-sage . Further, the first line of test above is not needed.

- The code should also try to follow pep8 conventions: https://www.python.org/dev/peps/pep-0008/

- The examples given in the documentation should work out-of-the-box, that is, running `sage -t sage/src/sage/plot/plot3d/reflection_group3d.py` should not return failures (currently has 120, for example, you should not forget to import the relevant function like `ReflectionGroup` in the preamble of the file.)

- The name of the class is perhaps not so well-chosen, perhaps `cayley_graph3d`? Which leads to a potential follow-up question: could this work eventually for general groups?

- General question: do you really need `gap3`? You can require `gap3`, but then should be nice to the user and say it at in the docstring of the module.

- Sage does not usually privilege the usage of user warnings. It should be explained in the docstring of the function what is done, with an example.

- About the Jmol bug, could you give a minimal working instance of the bug?

That's what I can see for now. If you could work on the above list, then I can continue to give feedback once new versions come along!

Best,
JP



---

archive/issue_comments_461885.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2018-07-11T12:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461885",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_461886.json:
```json
{
    "body": "<a id='comment:8'></a>\nIs there something specific about `ReflectionGroup` that you need to use? Why not `WeylGroup` or `CoxeterGroup` (when the Cartan/Coxeter type is a finite type)?",
    "created_at": "2018-07-11T15:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461886",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Is there something specific about `ReflectionGroup` that you need to use? Why not `WeylGroup` or `CoxeterGroup` (when the Cartan/Coxeter type is a finite type)?



---

archive/issue_events_069903.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2018-07-25T19:59:29Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24280#event-69903"
}
```



---

archive/issue_events_069904.json:
```json
{
    "actor": "https://github.com/bsalisbury1",
    "created_at": "2018-07-25T19:59:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24280#event-69904"
}
```



---

archive/issue_comments_461887.json:
```json
{
    "body": "Changing keywords from \"\" to \"sagedays@icerm\".",
    "created_at": "2018-07-25T19:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461887",
    "user": "https://github.com/bsalisbury1"
}
```

Changing keywords from "" to "sagedays@icerm".



---

archive/issue_comments_461888.json:
```json
{
    "body": "Changing branch from \"u/kjcollins/3d_cayley_graphs\" to \"u/kdilks/3d_cayley_graphs\"",
    "created_at": "2018-07-26T23:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461888",
    "user": "https://github.com/kevindilks"
}
```

Changing branch from "u/kjcollins/3d_cayley_graphs" to "u/kdilks/3d_cayley_graphs"



---

archive/issue_comments_461889.json:
```json
{
    "body": "<a id='comment:11'></a>\nNew commits:\n|                                                                                                                                          |                                                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|\n|[b4b9a58](https://github.com/sagemath/sagetrac-mirror/commit/b4b9a58fb9b6fe6f92eb5c32d0c4118dbbfe9769)|`Merge branch 'u/kjcollins/3d_cayley_graphs' of git://trac.sagemath.org/sage into 24280CayGraph`|\n|[c62a792](https://github.com/sagemath/sagetrac-mirror/commit/c62a7925a58ce0aed29eb40fec9d2ab7d8bce9df)|`Addressing reviewer changes, one doctest is spitting out magic doctest errors before giving right result.`|",
    "created_at": "2018-07-26T23:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461889",
    "user": "https://github.com/kevindilks"
}
```

<a id='comment:11'></a>
New commits:
|                                                                                                                                          |                                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
|[b4b9a58](https://github.com/sagemath/sagetrac-mirror/commit/b4b9a58fb9b6fe6f92eb5c32d0c4118dbbfe9769)|`Merge branch 'u/kjcollins/3d_cayley_graphs' of git://trac.sagemath.org/sage into 24280CayGraph`|
|[c62a792](https://github.com/sagemath/sagetrac-mirror/commit/c62a7925a58ce0aed29eb40fec9d2ab7d8bce9df)|`Addressing reviewer changes, one doctest is spitting out magic doctest errors before giving right result.`|



---

archive/issue_comments_461890.json:
```json
{
    "body": "Changing commit from \"80faffa9b4ea115f02aafbc5c6eafdfa76144d65\" to \"c62a7925a58ce0aed29eb40fec9d2ab7d8bce9df\"",
    "created_at": "2018-07-26T23:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461890",
    "user": "https://github.com/kevindilks"
}
```

Changing commit from "80faffa9b4ea115f02aafbc5c6eafdfa76144d65" to "c62a7925a58ce0aed29eb40fec9d2ab7d8bce9df"



---

archive/issue_comments_461891.json:
```json
{
    "body": "<a id='comment:12'></a>\nThe problem is that having\n\n`warnings.simplefilter(\"always\")`\n\nwhich is meant to bring up warnings for 3 specific doc-tests is causing a normal doc-test to throw hundreds of warnings. Removing that import just causes those 3 specific doc-tests to return a blank line instead of a warning, so that 3 doc-tests will just be modified/removed.",
    "created_at": "2018-07-27T00:20:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461891",
    "user": "https://github.com/kevindilks"
}
```

<a id='comment:12'></a>
The problem is that having

`warnings.simplefilter("always")`

which is meant to bring up warnings for 3 specific doc-tests is causing a normal doc-test to throw hundreds of warnings. Removing that import just causes those 3 specific doc-tests to return a blank line instead of a warning, so that 3 doc-tests will just be modified/removed.



---

archive/issue_comments_461892.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[798dd74](https://github.com/sagemath/sagetrac-mirror/commit/798dd74e518a692c4ac0967adec128f0693592d2)|`Pushing changes from my computer since it's not working in the cloud`|",
    "created_at": "2018-07-27T19:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[798dd74](https://github.com/sagemath/sagetrac-mirror/commit/798dd74e518a692c4ac0967adec128f0693592d2)|`Pushing changes from my computer since it's not working in the cloud`|



---

archive/issue_comments_461893.json:
```json
{
    "body": "Changing commit from \"c62a7925a58ce0aed29eb40fec9d2ab7d8bce9df\" to \"798dd74e518a692c4ac0967adec128f0693592d2\"",
    "created_at": "2018-07-27T19:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461893",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c62a7925a58ce0aed29eb40fec9d2ab7d8bce9df" to "798dd74e518a692c4ac0967adec128f0693592d2"



---

archive/issue_comments_461894.json:
```json
{
    "body": "<a id='comment:14'></a>\nHi,\n\nwithout the `gap3` optional package, I still get 3 doctest failures:\n\n```\nFile \"reflection_group3d.py\", line 63, in sage.plot.plot3d.reflection_group3d\nFailed example:\n    g_plot = cayley_graph_3d(A1A1, point=(21,11,31))\nExpected nothing\nGot:\n    doctest:warning\n\n\nFile \"reflection_group3d.py\", line 212, in sage.plot.plot3d.reflection_group3d.cayley_graph_3d._real_dimension\nFailed example:\n    A = cayley_graph_3d(W)\n\nFile \"reflection_group3d.py\", line 213, in sage.plot.plot3d.reflection_group3d.cayley_graph_3d._real_dimension\nFailed example:\n    A.real_dimension\nException raised:\n```\n\nThe last two are caused by a missing flag `# optional - gap3`.\n\nQuestion: are those warnings _really_ important? This is not typical to have warnings issued to the user like this in Sage.\n\nInstead, perhaps writing a warning block inside of the class to tell the user what the hidden behavior is might be a good idea, as suggested by the Sage Developer's manual: \n\nhttps://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings",
    "created_at": "2018-07-30T12:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461894",
    "user": "https://github.com/jplab"
}
```

<a id='comment:14'></a>
Hi,

without the `gap3` optional package, I still get 3 doctest failures:

```
File "reflection_group3d.py", line 63, in sage.plot.plot3d.reflection_group3d
Failed example:
    g_plot = cayley_graph_3d(A1A1, point=(21,11,31))
Expected nothing
Got:
    doctest:warning


File "reflection_group3d.py", line 212, in sage.plot.plot3d.reflection_group3d.cayley_graph_3d._real_dimension
Failed example:
    A = cayley_graph_3d(W)

File "reflection_group3d.py", line 213, in sage.plot.plot3d.reflection_group3d.cayley_graph_3d._real_dimension
Failed example:
    A.real_dimension
Exception raised:
```

The last two are caused by a missing flag `# optional - gap3`.

Question: are those warnings _really_ important? This is not typical to have warnings issued to the user like this in Sage.

Instead, perhaps writing a warning block inside of the class to tell the user what the hidden behavior is might be a good idea, as suggested by the Sage Developer's manual: 

https://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings



---

archive/issue_comments_461895.json:
```json
{
    "body": "Changing commit from \"798dd74e518a692c4ac0967adec128f0693592d2\" to \"e1ee29f14b901570c057096d8ca7b023093abdf1\"",
    "created_at": "2018-07-31T15:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "798dd74e518a692c4ac0967adec128f0693592d2" to "e1ee29f14b901570c057096d8ca7b023093abdf1"



---

archive/issue_comments_461896.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|\n|[19dbf74](https://github.com/sagemath/sagetrac-mirror/commit/19dbf74be41b4a2dcf5e3cbc14930c9cc2116d31)|`Merge branch 'u/kdilks/3d_cayley_graphs' of git://trac.sagemath.org/sage into 24280cayley3d`|\n|[e1ee29f](https://github.com/sagemath/sagetrac-mirror/commit/e1ee29f14b901570c057096d8ca7b023093abdf1)|`All tests are now passing on my cocalc version of sage devel, both with and without the optional gap3. The user warnings have been removed and a warning block about requiring gap3 has been added.`|",
    "created_at": "2018-07-31T15:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24280#issuecomment-461896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
|[19dbf74](https://github.com/sagemath/sagetrac-mirror/commit/19dbf74be41b4a2dcf5e3cbc14930c9cc2116d31)|`Merge branch 'u/kdilks/3d_cayley_graphs' of git://trac.sagemath.org/sage into 24280cayley3d`|
|[e1ee29f](https://github.com/sagemath/sagetrac-mirror/commit/e1ee29f14b901570c057096d8ca7b023093abdf1)|`All tests are now passing on my cocalc version of sage devel, both with and without the optional gap3. The user warnings have been removed and a warning block about requiring gap3 has been added.`|
