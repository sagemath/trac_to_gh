# Issue 24786: py3: various Python 3 bugs in the brial package

archive/issues_024549.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis error occurs in several places; e.g.\n\n```\nsage -t src/sage/rings/polynomial/multi_polynomial_sequence.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_sequence.py\", line 106, in sage.rings.polynomial.multi_polynomial_sequence\nFailed example:\n    C[0].groebner_basis()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/doctest/forker.py\", line 556, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/doctest/forker.py\", line 966, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.polynomial.multi_polynomial_sequence[7]>\", line 1, in <module>\n        C[Integer(0)].groebner_basis()\n      File \"/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/rings/polynomial/multi_polynomial_sequence.py\", line 530, in groebner_basis\n        return self.ideal().groebner_basis(*args, **kwargs)\n      File \"sage/rings/polynomial/pbori.pyx\", line 5070, in sage.rings.polynomial.pbori.BooleanPolynomialIdeal.groebner_basis (build/cythonized/sage/rings/polynomial/pbori.cpp:42826)\n        gb = self._groebner_basis(**kwds)\n      File \"sage/rings/polynomial/pbori.pyx\", line 5100, in sage.rings.polynomial.pbori.BooleanPolynomialIdeal._groebner_basis (build/cythonized/sage/rings/polynomial/pbori.cpp:43222)\n        from brial.gbcore import groebner_basis\n      File \"/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/brial/__init__.py\", line 31, in <module>\n        from .PyPolyBoRi import *\n      File \"/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/brial/PyPolyBoRi.py\", line 74, in <module>\n        OrderCode.__dict__ = order_dict\n    AttributeError: attribute '__dict__' of 'type' objects is not writable\n```\n\nThere are also several other minor Python 3 bugs in `brial`.\n\n**Upstream PR:** https://github.com/BRiAl/BRiAl/pull/33\n\nNew release of BRial: \nhttps://github.com/BRiAl/BRiAl/releases/download/1.2.4/brial-1.2.4.tar.bz2\n\nUpstream: **Fixed upstream, in a later stable release.**\n\nCC:  @jdemeyer\n\nComponent: **python3**\n\nKeywords: **brial**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nBranch/Commit: **[`22fc642`](https://github.com/sagemath/sagetrac-mirror/commit/22fc642cf90d084584361bef53828993f4e72140)**\n\nReviewer: **Erik Bray**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24786_\n\n",
    "closed_at": "2018-08-05T08:43:05Z",
    "created_at": "2018-02-20T10:15:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: various Python 3 bugs in the brial package",
    "type": "issue",
    "updated_at": "2018-08-05T08:43:05Z",
    "url": "https://github.com/sagemath/sage/issues/24786",
    "user": "https://github.com/embray"
}
```
<div id="comment:0"></div>

This error occurs in several places; e.g.

```
sage -t src/sage/rings/polynomial/multi_polynomial_sequence.py
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_sequence.py", line 106, in sage.rings.polynomial.multi_polynomial_sequence
Failed example:
    C[0].groebner_basis()
Exception raised:
    Traceback (most recent call last):
      File "/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/doctest/forker.py", line 556, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/doctest/forker.py", line 966, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.polynomial.multi_polynomial_sequence[7]>", line 1, in <module>
        C[Integer(0)].groebner_basis()
      File "/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/sage/rings/polynomial/multi_polynomial_sequence.py", line 530, in groebner_basis
        return self.ideal().groebner_basis(*args, **kwargs)
      File "sage/rings/polynomial/pbori.pyx", line 5070, in sage.rings.polynomial.pbori.BooleanPolynomialIdeal.groebner_basis (build/cythonized/sage/rings/polynomial/pbori.cpp:42826)
        gb = self._groebner_basis(**kwds)
      File "sage/rings/polynomial/pbori.pyx", line 5100, in sage.rings.polynomial.pbori.BooleanPolynomialIdeal._groebner_basis (build/cythonized/sage/rings/polynomial/pbori.cpp:43222)
        from brial.gbcore import groebner_basis
      File "/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/brial/__init__.py", line 31, in <module>
        from .PyPolyBoRi import *
      File "/home/embray/src/sagemath/sage-python3/local/lib/python3.6/site-packages/brial/PyPolyBoRi.py", line 74, in <module>
        OrderCode.__dict__ = order_dict
    AttributeError: attribute '__dict__' of 'type' objects is not writable
```

There are also several other minor Python 3 bugs in `brial`.

**Upstream PR:** https://github.com/BRiAl/BRiAl/pull/33

New release of BRial: 
https://github.com/BRiAl/BRiAl/releases/download/1.2.4/brial-1.2.4.tar.bz2

Upstream: **Fixed upstream, in a later stable release.**

CC:  @jdemeyer

Component: **python3**

Keywords: **brial**

Author: **Frédéric Chapoton**

Branch/Commit: **[`22fc642`](https://github.com/sagemath/sagetrac-mirror/commit/22fc642cf90d084584361bef53828993f4e72140)**

Reviewer: **Erik Bray**

_Issue created by migration from https://trac.sagemath.org/ticket/24786_





---

archive/issue_events_340133.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-20T10:15:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340133"
}
```



---

archive/issue_events_340134.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-20T10:15:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340134"
}
```



---

archive/issue_events_340135.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-20T10:15:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340135"
}
```



---

archive/issue_events_340136.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-20T10:15:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340136"
}
```



---

archive/issue_comments_376788.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nErik, could you please post on sage-devel some kind of report of your progress on python3 ? In particular, I would like to know how far we still are \n\n(0) from sage starting (almost there, I think it may just need #24728),\n\n(1) from being able to build the doc (#24774 and then ?),\n\n(2) from having a functional doctest framework (#24343 and what else ?).\n\nAnd what are the involved tickets for each of these objectives ? I must say that I am a bit lost in your recent flurry of activity. I would like to put some priority between all these tickets.",
    "created_at": "2018-02-20T19:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376788",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">comment:1</div>

Erik, could you please post on sage-devel some kind of report of your progress on python3 ? In particular, I would like to know how far we still are 

(0) from sage starting (almost there, I think it may just need #24728),

(1) from being able to build the doc (#24774 and then ?),

(2) from having a functional doctest framework (#24343 and what else ?).

And what are the involved tickets for each of these objectives ? I must say that I am a bit lost in your recent flurry of activity. I would like to put some priority between all these tickets.



---

archive/issue_comments_376789.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThat's fair--I've been thinking about that myself.  I almost feel like we need some kind of status board for Python 3.  I'll see what I can come up with.\n\nAs for the \"recent flurry of activity\" almost all of this is work I did some time ago but never got around to organizing into comprehensible discrete tickets.  Most of it is miscellaneous and not directly tied to each other (I will usually make clear when multiple tickets are related to each other).",
    "created_at": "2018-02-21T11:28:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376789",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

That's fair--I've been thinking about that myself.  I almost feel like we need some kind of status board for Python 3.  I'll see what I can come up with.

As for the "recent flurry of activity" almost all of this is work I did some time ago but never got around to organizing into comprehensible discrete tickets.  Most of it is miscellaneous and not directly tied to each other (I will usually make clear when multiple tickets are related to each other).



---

archive/issue_comments_376790.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHere are the lines in https://github.com/BRiAl/BRiAl/blob/master/sage-brial/brial/PyPolyBoRi.py\n\n```\nclass OrderCode:\n    pass\n\nOrderCode.__dict__ = order_dict\nOrderCode.__module__ = __name__\n```",
    "created_at": "2018-03-27T20:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376790",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

Here are the lines in https://github.com/BRiAl/BRiAl/blob/master/sage-brial/brial/PyPolyBoRi.py

```
class OrderCode:
    pass

OrderCode.__dict__ = order_dict
OrderCode.__module__ = __name__
```



---

archive/issue_comments_376791.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThere is a newer version of brial but if there is still bugs I am happy to merge PR.",
    "created_at": "2018-03-27T21:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376791",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

There is a newer version of brial but if there is still bugs I am happy to merge PR.



---

archive/issue_events_340137.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-23T13:41:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340137"
}
```



---

archive/issue_events_340138.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-23T13:41:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340138"
}
```



---

archive/issue_comments_376792.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**",
    "created_at": "2018-04-23T13:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376792",
    "user": "https://github.com/embray"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**



---

archive/issue_events_340139.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-23T13:41:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340139"
}
```



---

archive/issue_comments_376793.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,4 +27,6 @@\n     AttributeError: attribute '__dict__' of 'type' objects is not writable\n ```\n \n-I haven't looked closely at this code yet, but presumably in Python 2 `OrderCode` is an old-style class which allowed assignment to their `__dict__` attributes, whereas new-style classes do not allow this.  Whatever it's trying to accomplish by assigning to `__dict__` can surely be done another way.\n+There are also several other minor Python 3 bugs in `brial`.\n+\n+**Upstream PR:** https://github.com/BRiAl/BRiAl/pull/33\n``````\n",
    "created_at": "2018-04-23T13:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376793",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,4 +27,6 @@
     AttributeError: attribute '__dict__' of 'type' objects is not writable
 ```
 
-I haven't looked closely at this code yet, but presumably in Python 2 `OrderCode` is an old-style class which allowed assignment to their `__dict__` attributes, whereas new-style classes do not allow this.  Whatever it's trying to accomplish by assigning to `__dict__` can surely be done another way.
+There are also several other minor Python 3 bugs in `brial`.
+
+**Upstream PR:** https://github.com/BRiAl/BRiAl/pull/33
``````




---

archive/issue_events_340140.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-23T13:41:33Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "title_is": "py3: various Python 3 bugs in the brial package",
    "title_was": "py3: error in brial.PyPolyBoRi",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340140"
}
```



---

archive/issue_comments_376794.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis says \"needs review\". What should be reviewed here?",
    "created_at": "2018-04-30T16:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376794",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:6" align="right">comment:6</div>

This says "needs review". What should be reviewed here?



---

archive/issue_events_340141.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-30T16:05:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340141"
}
```



---

archive/issue_events_340142.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-30T16:05:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340142"
}
```



---

archive/issue_comments_376795.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2018-04-30T17:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376795",
    "user": "https://github.com/embray"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_376796.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe PR to brial did need review, but this is done now.  \n\nWhat we need to do now is either add this patch to Sage, or release a new version of brial and update Sage to use it (preferably the latter).  But let's wait to see if I can identify any more Python 3 bugs in brial (I don't think there are but it's feasible).",
    "created_at": "2018-04-30T17:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376796",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">comment:7</div>

The PR to brial did need review, but this is done now.  

What we need to do now is either add this patch to Sage, or release a new version of brial and update Sage to use it (preferably the latter).  But let's wait to see if I can identify any more Python 3 bugs in brial (I don't think there are but it's feasible).



---

archive/issue_comments_376797.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI can release a new brial when you think it is ready. The main reason I have that power on the brial repo is to be able to do releases for sage in a timely fashion. Although I also did quite a bit of clean up with the help of other sage-on-distro maintainers in the last few months.",
    "created_at": "2018-04-30T21:05:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376797",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

I can release a new brial when you think it is ready. The main reason I have that power on the brial repo is to be able to do releases for sage in a timely fashion. Although I also did quite a bit of clean up with the help of other sage-on-distro maintainers in the last few months.



---

archive/issue_comments_376798.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n@kiwifb\n\nPlease make a release of brial. This will be helpful for python3 progress.",
    "created_at": "2018-06-17T10:51:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376798",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

@kiwifb

Please make a release of brial. This will be helpful for python3 progress.



---

archive/issue_comments_376799.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@fchapoton](#comment%3A9):\n> @kiwifb\n> \n> Please make a release of brial. This will be helpful for python3 progress.\n\nI may have time tomorrow but that will be a squeeze. Better count on it on Tuesday (NZ time).",
    "created_at": "2018-06-17T10:56:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376799",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@fchapoton](#comment%3A9):
> @kiwifb
> 
> Please make a release of brial. This will be helpful for python3 progress.

I may have time tomorrow but that will be a squeeze. Better count on it on Tuesday (NZ time).



---

archive/issue_comments_376800.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nNew release out for you at https://github.com/BRiAl/BRiAl/releases/download/1.2.4/brial-1.2.4.tar.bz2\n\nDo check that it has all the changes you need.",
    "created_at": "2018-06-18T02:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376800",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

New release out for you at https://github.com/BRiAl/BRiAl/releases/download/1.2.4/brial-1.2.4.tar.bz2

Do check that it has all the changes you need.



---

archive/issue_events_340143.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-19T12:25:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340143"
}
```



---

archive/issue_events_340144.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-19T12:25:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340144"
}
```



---

archive/issue_comments_376801.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nnow we need to update brial here",
    "created_at": "2018-06-19T12:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376801",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">comment:12</div>

now we need to update brial here



---

archive/issue_comments_376802.json:
```json
{
    "body": "Changed upstream from **Fixed upstream, but not in a stable release.** to **Fixed upstream, in a later stable release.**",
    "created_at": "2018-06-19T12:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376802",
    "user": "https://github.com/fchapoton"
}
```

Changed upstream from **Fixed upstream, but not in a stable release.** to **Fixed upstream, in a later stable release.**



---

archive/issue_comments_376803.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAre you saying I should make a branch to upgrade Sage's brial to this version?",
    "created_at": "2018-06-20T08:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376803",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">comment:13</div>

Are you saying I should make a branch to upgrade Sage's brial to this version?



---

archive/issue_comments_376804.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHello Erik, and welcome back.\n\nWell, I think we should upgrade brial, indeed. Either here or in another ticket.\n\nMaybe Pynac upgrade is more important than this one for being able to make the doc.",
    "created_at": "2018-06-20T09:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376804",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

Hello Erik, and welcome back.

Well, I think we should upgrade brial, indeed. Either here or in another ticket.

Maybe Pynac upgrade is more important than this one for being able to make the doc.



---

archive/issue_comments_376805.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThanks!\n\nAnd yes, IIRC the pynac updates are especially critical for Python 3 support (otherwise there are segfaults, etc.)",
    "created_at": "2018-06-20T09:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376805",
    "user": "https://github.com/embray"
}
```

<div id="comment:15" align="right">comment:15</div>

Thanks!

And yes, IIRC the pynac updates are especially critical for Python 3 support (otherwise there are segfaults, etc.)



---

archive/issue_comments_376806.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI can put the brial update in this ticket.",
    "created_at": "2018-06-20T09:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376806",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">comment:16</div>

I can put the brial update in this ticket.



---

archive/issue_comments_376807.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n@embray : yes, please, let us do the brial update here",
    "created_at": "2018-07-04T12:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376807",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

@embray : yes, please, let us do the brial update here



---

archive/issue_comments_376808.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -30,3 +30,6 @@\n There are also several other minor Python 3 bugs in `brial`.\n \n **Upstream PR:** https://github.com/BRiAl/BRiAl/pull/33\n+\n+New release of BRial: \n+https://github.com/BRiAl/BRiAl/releases/download/1.2.4/brial-1.2.4.tar.bz2\n``````\n",
    "created_at": "2018-07-12T09:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376808",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -30,3 +30,6 @@
 There are also several other minor Python 3 bugs in `brial`.
 
 **Upstream PR:** https://github.com/BRiAl/BRiAl/pull/33
+
+New release of BRial: 
+https://github.com/BRiAl/BRiAl/releases/download/1.2.4/brial-1.2.4.tar.bz2
``````




---

archive/issue_comments_376809.json:
```json
{
    "body": "Branch: **[public/brial_1.2.4](https://github.com/sagemath/sagetrac-mirror/tree/public/brial_1.2.4)**",
    "created_at": "2018-07-12T09:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376809",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/brial_1.2.4](https://github.com/sagemath/sagetrac-mirror/tree/public/brial_1.2.4)**



---

archive/issue_comments_376810.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcba0bf5ba89b70c35553c215493ac4d1a94964b\"><code>fcba0bf</code></a></td><td><code>update brial to 1.2.4</code></td></tr></table>\n",
    "created_at": "2018-07-12T09:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376810",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcba0bf5ba89b70c35553c215493ac4d1a94964b"><code>fcba0bf</code></a></td><td><code>update brial to 1.2.4</code></td></tr></table>




---

archive/issue_comments_376811.json:
```json
{
    "body": "Commit: **[`fcba0bf`](https://github.com/sagemath/sagetrac-mirror/commit/fcba0bf5ba89b70c35553c215493ac4d1a94964b)**",
    "created_at": "2018-07-12T09:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376811",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`fcba0bf`](https://github.com/sagemath/sagetrac-mirror/commit/fcba0bf5ba89b70c35553c215493ac4d1a94964b)**



---

archive/issue_comments_376812.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\npatches do not apply.. And I am not able to do the required refreshing of patches, sorry",
    "created_at": "2018-07-12T09:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376812",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:20" align="right">comment:20</div>

patches do not apply.. And I am not able to do the required refreshing of patches, sorry



---

archive/issue_comments_376813.json:
```json
{
    "body": "Changed commit from **[`fcba0bf`](https://github.com/sagemath/sagetrac-mirror/commit/fcba0bf5ba89b70c35553c215493ac4d1a94964b)** to **[`22fc642`](https://github.com/sagemath/sagetrac-mirror/commit/22fc642cf90d084584361bef53828993f4e72140)**",
    "created_at": "2018-07-12T10:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376813",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fcba0bf`](https://github.com/sagemath/sagetrac-mirror/commit/fcba0bf5ba89b70c35553c215493ac4d1a94964b)** to **[`22fc642`](https://github.com/sagemath/sagetrac-mirror/commit/22fc642cf90d084584361bef53828993f4e72140)**



---

archive/issue_comments_376814.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22fc642cf90d084584361bef53828993f4e72140\"><code>22fc642</code></a></td><td><code>removing brial patch</code></td></tr></table>\n",
    "created_at": "2018-07-12T10:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376814",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22fc642cf90d084584361bef53828993f4e72140"><code>22fc642</code></a></td><td><code>removing brial patch</code></td></tr></table>




---

archive/issue_comments_376815.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nturns out the patch was no longer needed. So this should be good now",
    "created_at": "2018-07-12T10:03:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376815",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

turns out the patch was no longer needed. So this should be good now



---

archive/issue_events_340145.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-12T10:03:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340145"
}
```



---

archive/issue_events_340146.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-12T10:03:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340146"
}
```



---

archive/issue_comments_376816.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nsage crash..",
    "created_at": "2018-07-12T10:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376816",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

sage crash..



---

archive/issue_events_340147.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-12T10:03:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340147"
}
```



---

archive/issue_events_340148.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-12T10:03:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340148"
}
```



---

archive/issue_events_340149.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-12T10:05:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340149"
}
```



---

archive/issue_events_340150.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-12T10:05:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340150"
}
```



---

archive/issue_comments_376817.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nwell, seems to work after `sage -f brial`\n\nso setting back to needs review.",
    "created_at": "2018-07-12T10:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376817",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

well, seems to work after `sage -f brial`

so setting back to needs review.



---

archive/issue_comments_376818.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@fchapoton](#comment%3A24):\n> well, seems to work after `sage -f brial`\n> \n> so setting back to needs review.\n\nI was a bit surprised and was going to ask for more details.",
    "created_at": "2018-07-12T10:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376818",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@fchapoton](#comment%3A24):
> well, seems to work after `sage -f brial`
> 
> so setting back to needs review.

I was a bit surprised and was going to ask for more details.



---

archive/issue_comments_376819.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nLGTM.  Jeroen should probably comment since he wrote the patch.",
    "created_at": "2018-07-12T13:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376819",
    "user": "https://github.com/embray"
}
```

<div id="comment:26" align="right">comment:26</div>

LGTM.  Jeroen should probably comment since he wrote the patch.



---

archive/issue_comments_376820.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@embray](#comment%3A26):\n> LGTM.  Jeroen should probably comment since he wrote the patch.\n\nWhy? The patch was from a pull request he made to BRiAl and which I have merged. So the patch is included in this version of BRiAl.\nhttps://github.com/BRiAl/BRiAl/pull/15",
    "created_at": "2018-07-12T20:38:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376820",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@embray](#comment%3A26):
> LGTM.  Jeroen should probably comment since he wrote the patch.

Why? The patch was from a pull request he made to BRiAl and which I have merged. So the patch is included in this version of BRiAl.
https://github.com/BRiAl/BRiAl/pull/15



---

archive/issue_comments_376821.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2018-07-13T10:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376821",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_events_340151.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-13T10:26:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340151"
}
```



---

archive/issue_events_340152.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-13T10:26:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340152"
}
```



---

archive/issue_comments_376822.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOk. That wasn't immediately obvious.  It looks like my PR is included as well.",
    "created_at": "2018-07-13T10:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376822",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

Ok. That wasn't immediately obvious.  It looks like my PR is included as well.



---

archive/issue_comments_376823.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nAuthor name.",
    "created_at": "2018-07-13T15:18:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376823",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

Author name.



---

archive/issue_comments_376824.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2018-07-14T13:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376824",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_events_340153.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340153"
}
```



---

archive/issue_events_340154.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-18T11:47:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340154"
}
```



---

archive/issue_comments_376825.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI believe this issue can reasonably be addressed for Sage 8.4.",
    "created_at": "2018-07-18T11:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376825",
    "user": "https://github.com/embray"
}
```

<div id="comment:31" align="right">comment:31</div>

I believe this issue can reasonably be addressed for Sage 8.4.



---

archive/issue_events_340155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-05T08:43:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340155"
}
```



---

archive/issue_events_340156.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6be2b4aef8abf1e91704ea9517cb6985ce63ff54",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-05T08:43:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24786#event-340156"
}
```



---

archive/issue_comments_376826.json:
```json
{
    "body": "Changed branch from **[public/brial_1.2.4](https://github.com/sagemath/sagetrac-mirror/tree/public/brial_1.2.4)** to **[`22fc642`](https://github.com/sagemath/sagetrac-mirror/commit/22fc642cf90d084584361bef53828993f4e72140)**",
    "created_at": "2018-08-05T08:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24786#issuecomment-376826",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/brial_1.2.4](https://github.com/sagemath/sagetrac-mirror/tree/public/brial_1.2.4)** to **[`22fc642`](https://github.com/sagemath/sagetrac-mirror/commit/22fc642cf90d084584361bef53828993f4e72140)**
