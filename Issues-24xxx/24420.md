# Issue 24420: Laurent power series fail unique representation

archive/issues_024183.json:
```json
{
    "body": "```\nsage: L.<q> = LaurentSeriesRing(QQ)\nsage: LaurentSeriesRing(QQ, 'q') is L\nFalse\n```\nto be compared with\n\n```\nsage: R.<q> = PolynomialRing(QQ)\nsage: PolynomialRing(QQ, 'q') is R\nTrue\n```\n\nWe also fix\n\n```\nsage: LaurentSeriesRing(Zmod(4), 'x').category()\nCategory of fields\n```\n\nWe also remove the classes `LaurentSeriesRing_generic`, `LaurentSeriesRing_domain`, `LaurentSeriesRing_field` in favor of a unique `LaurentSeriesRing`.\n\nBranch/Commit: bcf577dc4c384de604bb60577bdc08f53e7fba18\n\nReviewer: Travis Scrimshaw\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24420\n\n",
    "closed_at": "2018-01-05T23:56:16Z",
    "created_at": "2017-12-22T09:27:58Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Laurent power series fail unique representation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24420",
    "user": "https://github.com/videlec"
}
```
```
sage: L.<q> = LaurentSeriesRing(QQ)
sage: LaurentSeriesRing(QQ, 'q') is L
False
```
to be compared with

```
sage: R.<q> = PolynomialRing(QQ)
sage: PolynomialRing(QQ, 'q') is R
True
```

We also fix

```
sage: LaurentSeriesRing(Zmod(4), 'x').category()
Category of fields
```

We also remove the classes `LaurentSeriesRing_generic`, `LaurentSeriesRing_domain`, `LaurentSeriesRing_field` in favor of a unique `LaurentSeriesRing`.

Branch/Commit: bcf577dc4c384de604bb60577bdc08f53e7fba18

Reviewer: Travis Scrimshaw

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24420





---

archive/issue_comments_360559.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -2,6 +2,13 @@\n sage: L.<q> = LaurentSeriesRing(QQ)\n sage: LaurentSeriesRing(QQ, 'q') is L\n False\n+```\n+to be compared to\n+\n+```\n+sage: R.<q> = PolynomialRing(QQ)\n+sage: PolynomialRing(QQ, 'q') is R\n+True\n ```\n \n Comment: 1\n```\n",
    "created_at": "2017-12-22T09:34:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360559",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -2,6 +2,13 @@
 sage: L.<q> = LaurentSeriesRing(QQ)
 sage: LaurentSeriesRing(QQ, 'q') is L
 False
+```
+to be compared to
+
+```
+sage: R.<q> = PolynomialRing(QQ)
+sage: PolynomialRing(QQ, 'q') is R
+True
 ```
 
 Comment: 1
```




---

archive/issue_comments_360560.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,15 @@\n+```\n+sage: L.<q> = LaurentSeriesRing(QQ)\n+sage: LaurentSeriesRing(QQ, 'q') is L\n+False\n+```\n+to be compared with\n \n+```\n+sage: R.<q> = PolynomialRing(QQ)\n+sage: PolynomialRing(QQ, 'q') is R\n+True\n+```\n \n Comment: 1\n \n```\n",
    "created_at": "2017-12-22T09:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360560",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,15 @@
+```
+sage: L.<q> = LaurentSeriesRing(QQ)
+sage: LaurentSeriesRing(QQ, 'q') is L
+False
+```
+to be compared with
 
+```
+sage: R.<q> = PolynomialRing(QQ)
+sage: PolynomialRing(QQ, 'q') is R
+True
+```
 
 Comment: 1
 
```




---

archive/issue_comments_360561.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,22 @@\n+```\n+sage: L.<q> = LaurentSeriesRing(QQ)\n+sage: LaurentSeriesRing(QQ, 'q') is L\n+False\n+```\n+to be compared with\n \n+```\n+sage: R.<q> = PolynomialRing(QQ)\n+sage: PolynomialRing(QQ, 'q') is R\n+True\n+```\n+\n+We also fix\n+\n+```\n+sage: LaurentSeriesRing(Zmod(4), 'x').category()\n+Category of fields\n+```\n \n Comment: 1\n \n```\n",
    "created_at": "2017-12-22T10:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360561",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,22 @@
+```
+sage: L.<q> = LaurentSeriesRing(QQ)
+sage: LaurentSeriesRing(QQ, 'q') is L
+False
+```
+to be compared with
 
+```
+sage: R.<q> = PolynomialRing(QQ)
+sage: PolynomialRing(QQ, 'q') is R
+True
+```
+
+We also fix
+
+```
+sage: LaurentSeriesRing(Zmod(4), 'x').category()
+Category of fields
+```
 
 Comment: 1
 
```




---

archive/issue_comments_360562.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2017-12-26T09:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360562",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_360563.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-26T09:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360563",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_360564.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,24 @@\n+```\n+sage: L.<q> = LaurentSeriesRing(QQ)\n+sage: LaurentSeriesRing(QQ, 'q') is L\n+False\n+```\n+to be compared with\n \n+```\n+sage: R.<q> = PolynomialRing(QQ)\n+sage: PolynomialRing(QQ, 'q') is R\n+True\n+```\n+\n+We also fix\n+\n+```\n+sage: LaurentSeriesRing(Zmod(4), 'x').category()\n+Category of fields\n+```\n+\n+We also remove the classes `LaurentSeriesRing_generic`, `LaurentSeriesRing_domain`, `LaurentSeriesRing_field` in favor of a unique `LaurentSeriesRing`.\n \n Comment: 1\n \n```\n",
    "created_at": "2017-12-26T09:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360564",
    "user": "https://github.com/videlec"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,24 @@
+```
+sage: L.<q> = LaurentSeriesRing(QQ)
+sage: LaurentSeriesRing(QQ, 'q') is L
+False
+```
+to be compared with
 
+```
+sage: R.<q> = PolynomialRing(QQ)
+sage: PolynomialRing(QQ, 'q') is R
+True
+```
+
+We also fix
+
+```
+sage: LaurentSeriesRing(Zmod(4), 'x').category()
+Category of fields
+```
+
+We also remove the classes `LaurentSeriesRing_generic`, `LaurentSeriesRing_domain`, `LaurentSeriesRing_field` in favor of a unique `LaurentSeriesRing`.
 
 Comment: 1
 
```




---

archive/issue_comments_360565.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-26T22:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_360566.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-12-28T14:02:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360566",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_360567.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-02T15:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360567",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_360568.json:
```json
{
    "body": "<a id='comment:8'></a>rebased on 8.2.beta2",
    "created_at": "2018-01-02T15:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360568",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>rebased on 8.2.beta2



---

archive/issue_comments_360569.json:
```json
{
    "body": "<a id='comment:9'></a>Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with), I would make it in as small as scope as possible:\n\n```diff\n         from sage.categories.rings import Rings\n         from sage.categories.integral_domains import IntegralDomains\n         from sage.categories.fields import Fields\n-        from sage.categories.complete_discrete_valuation import (\n-                CompleteDiscreteValuationRings, CompleteDiscreteValuationFields)\n \n         base_ring = power_series.base_ring()\n         if base_ring in Fields():\n+            from sage.categories.complete_discrete_valuation import CompleteDiscreteValuationFields\n             category = CompleteDiscreteValuationFields()\n         elif base_ring in IntegralDomains():\n             category = IntegralDomains()\n         elif base_ring in Rings().Commutative():\n             category = Rings().Commutative()\n         else:\n             raise ValueError('unrecognized base ring')\n```\nAlso, don't we want to use `names=power_series.variable_names()` in case we (eventually support) have multiple variable names. Otherwise LGTM.",
    "created_at": "2018-01-02T17:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360569",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with), I would make it in as small as scope as possible:

```diff
         from sage.categories.rings import Rings
         from sage.categories.integral_domains import IntegralDomains
         from sage.categories.fields import Fields
-        from sage.categories.complete_discrete_valuation import (
-                CompleteDiscreteValuationRings, CompleteDiscreteValuationFields)
 
         base_ring = power_series.base_ring()
         if base_ring in Fields():
+            from sage.categories.complete_discrete_valuation import CompleteDiscreteValuationFields
             category = CompleteDiscreteValuationFields()
         elif base_ring in IntegralDomains():
             category = IntegralDomains()
         elif base_ring in Rings().Commutative():
             category = Rings().Commutative()
         else:
             raise ValueError('unrecognized base ring')
```
Also, don't we want to use `names=power_series.variable_names()` in case we (eventually support) have multiple variable names. Otherwise LGTM.



---

archive/issue_comments_360570.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 tscrim]:\n> Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with)\n\n\nWhy? I am happy to move them at the module scope if it is a better practice.",
    "created_at": "2018-01-02T17:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360570",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>Replying to [comment:9 tscrim]:
> Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with)


Why? I am happy to move them at the module scope if it is a better practice.



---

archive/issue_comments_360571.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 vdelecroix]:\n> Replying to [comment:9 tscrim]:\n> > Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with)\n\n> \n> Why? I am happy to move them at the module scope if it is a better practice.\n\n\nIt slows down the construction of the ring.",
    "created_at": "2018-01-02T17:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360571",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>Replying to [comment:10 vdelecroix]:
> Replying to [comment:9 tscrim]:
> > Since you are going to do the category imports in the `__init__` (which I'm not 100% in agreement with)

> 
> Why? I am happy to move them at the module scope if it is a better practice.


It slows down the construction of the ring.



---

archive/issue_comments_360572.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-02T17:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_360573.json:
```json
{
    "body": "<a id='comment:13'></a>done",
    "created_at": "2018-01-02T17:45:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360573",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>done



---

archive/issue_comments_360574.json:
```json
{
    "body": "<a id='comment:14'></a>Thanks. One last little thing: you don't use `CompleteDiscreteValuationRings`.",
    "created_at": "2018-01-02T17:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360574",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>Thanks. One last little thing: you don't use `CompleteDiscreteValuationRings`.



---

archive/issue_comments_360575.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-02T17:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_360576.json:
```json
{
    "body": "<a id='comment:16'></a>Indeed!",
    "created_at": "2018-01-02T17:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360576",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>Indeed!



---

archive/issue_comments_360577.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-02T18:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360577",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_360578.json:
```json
{
    "body": "<a id='comment:17'></a>Thanks.",
    "created_at": "2018-01-02T18:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360578",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>Thanks.



---

archive/issue_events_061703.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-05T23:56:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24420#event-61703"
}
```



---

archive/issue_comments_360579.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-05T23:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24420#issuecomment-360579",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
