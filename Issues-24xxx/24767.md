# Issue 24767: Failing tests in src/sage/doctest/test.py

archive/issues_024530.json:
```json
{
    "body": "Some patchbots report this failure:\n\n```\n    exec gdb ...\n    Running doctests...\n    Doctesting 1 file.\n    sage -t... 1second.rst...\n        [2 tests, ... s]\n    ----------------------------------------------------------------------\n    All tests passed!\n    ----------------------------------------------------------------------\n    ...\n    0\nGot:\n    exec gdb -x \"$SAGE_LOCAL/bin/sage-gdb-commands\" --args python \"$SAGE_LOCAL/bin/sage-runtests\" --serial --timeout=0 --stats_path=/home/jdemeyer/.sage/timings2.json --optional=ccache,fricas,gdb,meataxe,mpir,openssl,python2,sage 1second.rst\n    GNU gdb (GDB) 7.8\n    Copyright (C) 2014 Free Software Foundation, Inc.\n    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\n    This is free software: you are free to change and redistribute it.\n    There is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\n    and \"show warranty\" for details.\n    This GDB was configured as \"powerpc64le-unknown-linux-gnu\".\n    Type \"show configuration\" for configuration details.\n    For bug reporting instructions, please see:\n    <http://www.gnu.org/software/gdb/bugs/>.\n    Find the GDB manual and other documentation resources online at:\n    <http://www.gnu.org/software/gdb/documentation/>.\n    For help, type \"help\".\n    Type \"apropos word\" to search for commands related to \"word\"...\n    Reading symbols from python...done.\n    [Thread debugging using libthread_db enabled]\n    Using host libthread_db library \"/lib/powerpc64le-linux-gnu/libthread_db.so.1\".\n    Running doctests with ID 2018-02-18-11-56-28-24121586.\n    Git branch: patchbot/ticket_merged\n    Using --optional=ccache,fricas,gdb,meataxe,mpir,openssl,python2,sage\n    Doctesting 1 file.\n    too many failed tests, not using stored timings\n    warning: Corrupted shared library list: 0x131e6db0 != 0x13019dd0\n    sage -t 1second.rst\n        [2 tests, 1.66 s]\n    ----------------------------------------------------------------------\n    All tests passed!\n    ----------------------------------------------------------------------\n    Total time for all tests: 1.7 seconds\n        cpu time: 0.6 seconds\n        cumulative wall time: 1.7 seconds\n    [Inferior 1 (process 101002) exited normally]\n    (gdb) quit\n    0\n```\n\nBranch/Commit: 2168583b9286b0cf968349d9b99b278aaecf7416\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24767\n\n",
    "closed_at": "2018-03-04T23:29:23Z",
    "created_at": "2018-02-18T10:57:51Z",
    "labels": [
        "component: doctest framework",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Failing tests in src/sage/doctest/test.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24767",
    "user": "https://github.com/jdemeyer"
}
```
Some patchbots report this failure:

```
    exec gdb ...
    Running doctests...
    Doctesting 1 file.
    sage -t... 1second.rst...
        [2 tests, ... s]
    ----------------------------------------------------------------------
    All tests passed!
    ----------------------------------------------------------------------
    ...
    0
Got:
    exec gdb -x "$SAGE_LOCAL/bin/sage-gdb-commands" --args python "$SAGE_LOCAL/bin/sage-runtests" --serial --timeout=0 --stats_path=/home/jdemeyer/.sage/timings2.json --optional=ccache,fricas,gdb,meataxe,mpir,openssl,python2,sage 1second.rst
    GNU gdb (GDB) 7.8
    Copyright (C) 2014 Free Software Foundation, Inc.
    License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
    This is free software: you are free to change and redistribute it.
    There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
    and "show warranty" for details.
    This GDB was configured as "powerpc64le-unknown-linux-gnu".
    Type "show configuration" for configuration details.
    For bug reporting instructions, please see:
    <http://www.gnu.org/software/gdb/bugs/>.
    Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.
    For help, type "help".
    Type "apropos word" to search for commands related to "word"...
    Reading symbols from python...done.
    [Thread debugging using libthread_db enabled]
    Using host libthread_db library "/lib/powerpc64le-linux-gnu/libthread_db.so.1".
    Running doctests with ID 2018-02-18-11-56-28-24121586.
    Git branch: patchbot/ticket_merged
    Using --optional=ccache,fricas,gdb,meataxe,mpir,openssl,python2,sage
    Doctesting 1 file.
    too many failed tests, not using stored timings
    warning: Corrupted shared library list: 0x131e6db0 != 0x13019dd0
    sage -t 1second.rst
        [2 tests, 1.66 s]
    ----------------------------------------------------------------------
    All tests passed!
    ----------------------------------------------------------------------
    Total time for all tests: 1.7 seconds
        cpu time: 0.6 seconds
        cumulative wall time: 1.7 seconds
    [Inferior 1 (process 101002) exited normally]
    (gdb) quit
    0
```

Branch/Commit: 2168583b9286b0cf968349d9b99b278aaecf7416

Reviewer: Travis Scrimshaw

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24767





---

archive/issue_comments_464629.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/failing_tests_in_src_sage_doctest_test_py\"",
    "created_at": "2018-02-26T15:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464629",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/failing_tests_in_src_sage_doctest_test_py"



---

archive/issue_comments_464630.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[2168583](https://github.com/sagemath/sagetrac-mirror/commit/2168583b9286b0cf968349d9b99b278aaecf7416)|`Fix gdb doctest`|",
    "created_at": "2018-02-26T16:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464630",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[2168583](https://github.com/sagemath/sagetrac-mirror/commit/2168583b9286b0cf968349d9b99b278aaecf7416)|`Fix gdb doctest`|



---

archive/issue_comments_464631.json:
```json
{
    "body": "Changing commit from \"\" to \"2168583b9286b0cf968349d9b99b278aaecf7416\"",
    "created_at": "2018-02-26T16:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464631",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "2168583b9286b0cf968349d9b99b278aaecf7416"



---

archive/issue_comments_464632.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2018-02-26T16:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464632",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_464633.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-26T16:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464633",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_464634.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2018-02-26T22:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464634",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_464635.json:
```json
{
    "body": "<a id='comment:3'></a>\nLGTM.",
    "created_at": "2018-02-26T22:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464635",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
LGTM.



---

archive/issue_comments_464636.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-26T22:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464636",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_464637.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-03-04T23:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464637",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_078679.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-04T23:29:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24767#event-78679"
}
```



---

archive/issue_comments_464638.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/failing_tests_in_src_sage_doctest_test_py\" to \"2168583b9286b0cf968349d9b99b278aaecf7416\"",
    "created_at": "2018-03-04T23:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24767#issuecomment-464638",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/failing_tests_in_src_sage_doctest_test_py" to "2168583b9286b0cf968349d9b99b278aaecf7416"
