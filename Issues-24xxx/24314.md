# Issue 24314: rootfinding for polynomials with complex ball coefficients using arb

archive/issues_024077.json:
```json
{
    "assignees": [],
    "body": "\n\nCC:  @fredrik-johansson @videlec @cheuberg\n\nBranch/Commit: **[`6ad027b`](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Marc Mezzarobba**\n\nComponent: **numerical**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24314_\n\n",
    "closed_at": "2018-05-08T17:27:00Z",
    "created_at": "2017-12-02T10:02:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20numerical",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "rootfinding for polynomials with complex ball coefficients using arb",
    "type": "issue",
    "updated_at": "2018-05-08T17:27:00Z",
    "url": "https://github.com/sagemath/sage/issues/24314",
    "user": "https://github.com/mezzarobba"
}
```


CC:  @fredrik-johansson @videlec @cheuberg

Branch/Commit: **[`6ad027b`](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)**

Reviewer: **Vincent Delecroix**

Author: **Marc Mezzarobba**

Component: **numerical**

_Issue created by migration from https://trac.sagemath.org/ticket/24314_





---

archive/issue_events_338779.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2017-12-02T10:02:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338779"
}
```



---

archive/issue_events_338780.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2017-12-02T10:02:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338780"
}
```



---

archive/issue_events_338781.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2017-12-02T10:02:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338781"
}
```



---

archive/issue_events_338782.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2017-12-02T10:02:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338782"
}
```



---

archive/issue_comments_368005.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26e633467eba6124075e525113f8cdd26d8e78e2\"><code>26e6334</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>\n",
    "created_at": "2017-12-02T10:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368005",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26e633467eba6124075e525113f8cdd26d8e78e2"><code>26e6334</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>




---

archive/issue_comments_368006.json:
```json
{
    "body": "Changed commit from **[`862df2c`](https://github.com/sagemath/sagetrac-mirror/commit/862df2c9a8c6b1f59affa3e1228b5e3263279a99)** to **[`26e6334`](https://github.com/sagemath/sagetrac-mirror/commit/26e633467eba6124075e525113f8cdd26d8e78e2)**",
    "created_at": "2017-12-02T10:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368006",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`862df2c`](https://github.com/sagemath/sagetrac-mirror/commit/862df2c9a8c6b1f59affa3e1228b5e3263279a99)** to **[`26e6334`](https://github.com/sagemath/sagetrac-mirror/commit/26e633467eba6124075e525113f8cdd26d8e78e2)**



---

archive/issue_events_338783.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2017-12-02T10:05:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338783"
}
```



---

archive/issue_comments_368007.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIt is best not to call acb_poly_find_roots once with the final precision but to use a loop like\n\nhttps://github.com/fredrik-johansson/python-flint/blob/master/src/acb_poly.pyx#L331",
    "created_at": "2017-12-02T16:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368007",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:4" align="right">comment:4</div>

It is best not to call acb_poly_find_roots once with the final precision but to use a loop like

https://github.com/fredrik-johansson/python-flint/blob/master/src/acb_poly.pyx#L331



---

archive/issue_comments_368008.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nRelated to this ticket, an interface to arb_fmpz_poly_complex_roots would also be useful.",
    "created_at": "2017-12-02T17:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368008",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:5" align="right">comment:5</div>

Related to this ticket, an interface to arb_fmpz_poly_complex_roots would also be useful.



---

archive/issue_comments_368009.json:
```json
{
    "body": "Changed commit from **[`26e6334`](https://github.com/sagemath/sagetrac-mirror/commit/26e633467eba6124075e525113f8cdd26d8e78e2)** to **[`b007bde`](https://github.com/sagemath/sagetrac-mirror/commit/b007bdedd55979840d30e45bbcfffbf3e31c0d35)**",
    "created_at": "2017-12-03T12:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368009",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`26e6334`](https://github.com/sagemath/sagetrac-mirror/commit/26e633467eba6124075e525113f8cdd26d8e78e2)** to **[`b007bde`](https://github.com/sagemath/sagetrac-mirror/commit/b007bdedd55979840d30e45bbcfffbf3e31c0d35)**



---

archive/issue_comments_368010.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b007bdedd55979840d30e45bbcfffbf3e31c0d35\"><code>b007bde</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>\n",
    "created_at": "2017-12-03T12:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368010",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b007bdedd55979840d30e45bbcfffbf3e31c0d35"><code>b007bde</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>




---

archive/issue_comments_368011.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@fredrik-johansson](#comment:4):\n> It is best not to call acb_poly_find_roots once with the final precision but to use a loop like\n> \n> https://github.com/fredrik-johansson/python-flint/blob/master/src/acb_poly.pyx#L331\n\nThanks for the hint. Is it better now? (I also made the version with `proof=False` return all the roots instead of only the isolated ones.)\n\nI have doubts about the choice of refusing to run with `multiplicities=True`, any thoughts?",
    "created_at": "2017-12-03T12:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368011",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@fredrik-johansson](#comment:4):
> It is best not to call acb_poly_find_roots once with the final precision but to use a loop like
> 
> https://github.com/fredrik-johansson/python-flint/blob/master/src/acb_poly.pyx#L331

Thanks for the hint. Is it better now? (I also made the version with `proof=False` return all the roots instead of only the isolated ones.)

I have doubts about the choice of refusing to run with `multiplicities=True`, any thoughts?



---

archive/issue_comments_368012.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIt looks reasonable to me (without having actually tested the code).\n\nIs multiplicities=True the default? For an interval polynomial, returning certified root clusters would be a reasonable interpretation, although it's a bit dangerous since a user might expect (naively) to obtain the true multiplicities for the intended exact polynomial. It doesn't really matter right now since the algorithm in Arb doesn't support certifiable isolating all root clusters, anyway...",
    "created_at": "2017-12-03T13:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368012",
    "user": "https://github.com/fredrik-johansson"
}
```

<div id="comment:8" align="right">comment:8</div>

It looks reasonable to me (without having actually tested the code).

Is multiplicities=True the default? For an interval polynomial, returning certified root clusters would be a reasonable interpretation, although it's a bit dangerous since a user might expect (naively) to obtain the true multiplicities for the intended exact polynomial. It doesn't really matter right now since the algorithm in Arb doesn't support certifiable isolating all root clusters, anyway...



---

archive/issue_comments_368013.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@fredrik-johansson](#comment:8):\n> Is multiplicities=True the default?\n\nYes.\n\n> For an interval polynomial, returning certified root clusters would be a reasonable interpretation, although it's a bit dangerous since a user might expect (naively) to obtain the true multiplicities for the intended exact polynomial.\n\nYes, it would probably be clearer to have a separate method for that case. But we could also simply return all the roots with multiplicity one (since, unless it was called with `proof=False`, the function always fails on multiple roots).\n\nUnless someone objects, I suggest we keep the exception for now. It will be easier to change it later if it proves too inconvenient than to go the other way.",
    "created_at": "2017-12-04T15:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368013",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@fredrik-johansson](#comment:8):
> Is multiplicities=True the default?

Yes.

> For an interval polynomial, returning certified root clusters would be a reasonable interpretation, although it's a bit dangerous since a user might expect (naively) to obtain the true multiplicities for the intended exact polynomial.

Yes, it would probably be clearer to have a separate method for that case. But we could also simply return all the roots with multiplicity one (since, unless it was called with `proof=False`, the function always fails on multiple roots).

Unless someone objects, I suggest we keep the exception for now. It will be easier to change it later if it proves too inconvenient than to go the other way.



---

archive/issue_comments_368014.json:
```json
{
    "body": "Changed commit from **[`b007bde`](https://github.com/sagemath/sagetrac-mirror/commit/b007bdedd55979840d30e45bbcfffbf3e31c0d35)** to **[`8474ea3`](https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a)**",
    "created_at": "2018-01-31T15:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368014",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b007bde`](https://github.com/sagemath/sagetrac-mirror/commit/b007bdedd55979840d30e45bbcfffbf3e31c0d35)** to **[`8474ea3`](https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a)**



---

archive/issue_comments_368015.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a\"><code>8474ea3</code></a></td><td><code>Fix up 75c75e9 (#24285)</code></td></tr></table>\n",
    "created_at": "2018-01-31T15:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368015",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a"><code>8474ea3</code></a></td><td><code>Fix up 75c75e9 (#24285)</code></td></tr></table>




---

archive/issue_comments_368016.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38d4c2c21275216936aa6c9d6f8b72559d941caf\"><code>38d4c2c</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>\n",
    "created_at": "2018-01-31T15:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368016",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38d4c2c21275216936aa6c9d6f8b72559d941caf"><code>38d4c2c</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>




---

archive/issue_comments_368017.json:
```json
{
    "body": "Changed commit from **[`8474ea3`](https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a)** to **[`38d4c2c`](https://github.com/sagemath/sagetrac-mirror/commit/38d4c2c21275216936aa6c9d6f8b72559d941caf)**",
    "created_at": "2018-01-31T15:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368017",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8474ea3`](https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a)** to **[`38d4c2c`](https://github.com/sagemath/sagetrac-mirror/commit/38d4c2c21275216936aa6c9d6f8b72559d941caf)**



---

archive/issue_comments_368018.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@sagetrac-git](#comment:10):\n> Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a\"><code>8474ea3</code></a></td><td><code>Fix up 75c75e9 (#24285)</code></td></tr></table>\n\nWrong branch, sorry.",
    "created_at": "2018-01-31T15:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368018",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@sagetrac-git](#comment:10):
> Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a"><code>8474ea3</code></a></td><td><code>Fix up 75c75e9 (#24285)</code></td></tr></table>

Wrong branch, sorry.



---

archive/issue_comments_368019.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53015517e4ae207eff680a759bb17d5e5958c6ef\"><code>5301551</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>\n",
    "created_at": "2018-03-03T12:24:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368019",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53015517e4ae207eff680a759bb17d5e5958c6ef"><code>5301551</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>




---

archive/issue_comments_368020.json:
```json
{
    "body": "Changed commit from **[`38d4c2c`](https://github.com/sagemath/sagetrac-mirror/commit/38d4c2c21275216936aa6c9d6f8b72559d941caf)** to **[`5301551`](https://github.com/sagemath/sagetrac-mirror/commit/53015517e4ae207eff680a759bb17d5e5958c6ef)**",
    "created_at": "2018-03-03T12:24:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368020",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`38d4c2c`](https://github.com/sagemath/sagetrac-mirror/commit/38d4c2c21275216936aa6c9d6f8b72559d941caf)** to **[`5301551`](https://github.com/sagemath/sagetrac-mirror/commit/53015517e4ae207eff680a759bb17d5e5958c6ef)**



---

archive/issue_comments_368021.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nrebased on develop",
    "created_at": "2018-03-03T12:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368021",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:15" align="right">comment:15</div>

rebased on develop



---

archive/issue_comments_368022.json:
```json
{
    "body": "Changed commit from **[`5301551`](https://github.com/sagemath/sagetrac-mirror/commit/53015517e4ae207eff680a759bb17d5e5958c6ef)** to **[`520399a`](https://github.com/sagemath/sagetrac-mirror/commit/520399af3edfbab9c72703de22c221ef182767f0)**",
    "created_at": "2018-03-20T09:24:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368022",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5301551`](https://github.com/sagemath/sagetrac-mirror/commit/53015517e4ae207eff680a759bb17d5e5958c6ef)** to **[`520399a`](https://github.com/sagemath/sagetrac-mirror/commit/520399af3edfbab9c72703de22c221ef182767f0)**



---

archive/issue_comments_368023.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/520399af3edfbab9c72703de22c221ef182767f0\"><code>520399a</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>\n",
    "created_at": "2018-03-20T09:24:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368023",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/520399af3edfbab9c72703de22c221ef182767f0"><code>520399a</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>




---

archive/issue_comments_368024.json:
```json
{
    "body": "Changed commit from **[`520399a`](https://github.com/sagemath/sagetrac-mirror/commit/520399af3edfbab9c72703de22c221ef182767f0)** to **[`5f210a4`](https://github.com/sagemath/sagetrac-mirror/commit/5f210a4d1f8f602efd2ead6693b17b68ed90784b)**",
    "created_at": "2018-03-30T09:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368024",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`520399a`](https://github.com/sagemath/sagetrac-mirror/commit/520399af3edfbab9c72703de22c221ef182767f0)** to **[`5f210a4`](https://github.com/sagemath/sagetrac-mirror/commit/5f210a4d1f8f602efd2ead6693b17b68ed90784b)**



---

archive/issue_comments_368025.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f210a4d1f8f602efd2ead6693b17b68ed90784b\"><code>5f210a4</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>\n",
    "created_at": "2018-03-30T09:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368025",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f210a4d1f8f602efd2ead6693b17b68ed90784b"><code>5f210a4</code></a></td><td><code>rootfinding for polynomials with complex ball coefficients using arb</code></td></tr></table>




---

archive/issue_comments_368026.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nfixed trivial merge conflicts",
    "created_at": "2018-03-30T09:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368026",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:18" align="right">comment:18</div>

fixed trivial merge conflicts



---

archive/issue_comments_368027.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nYou have included a lot of example but they are right now unreachable from the documentation. It would be better to have a sample of it directly in the generic `roots` method. It is good to advertise it at this generic level since someone might want to use this even with polynomial with integer coefficients.\n\n```\nsage: x = polygen(ZZ)\nsage: (x^3 + 3).roots(CBF, multiplicities=False)\n[[-1.442249570307408 +/- 3.83e-16] + [+/- 3.59e-19]*I,\n [0.7211247851537042 +/- 9.34e-18] + [1.249024766483406 +/- 4.80e-16]*I,\n [0.7211247851537042 +/- 9.30e-18] + [-1.249024766483406 +/- 4.80e-16]*I]\n```\n\nIt is sad that the following is not working\n\n```\nsage: x = polygen(ZZ)\nsage: (x^3 + 3).roots(RBF, multiplicities=False)\nTraceback (most recent call last):\n...\nNotImplementedError: root finding for this polynomial not implemented\n```\n\nThe variable `i` is implicit. Might be good to declare it as `size_t`.\n\nWhy did you decide to not include the while loop in the `try`/`finally`?",
    "created_at": "2018-03-30T12:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368027",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

You have included a lot of example but they are right now unreachable from the documentation. It would be better to have a sample of it directly in the generic `roots` method. It is good to advertise it at this generic level since someone might want to use this even with polynomial with integer coefficients.

```
sage: x = polygen(ZZ)
sage: (x^3 + 3).roots(CBF, multiplicities=False)
[[-1.442249570307408 +/- 3.83e-16] + [+/- 3.59e-19]*I,
 [0.7211247851537042 +/- 9.34e-18] + [1.249024766483406 +/- 4.80e-16]*I,
 [0.7211247851537042 +/- 9.30e-18] + [-1.249024766483406 +/- 4.80e-16]*I]
```

It is sad that the following is not working

```
sage: x = polygen(ZZ)
sage: (x^3 + 3).roots(RBF, multiplicities=False)
Traceback (most recent call last):
...
NotImplementedError: root finding for this polynomial not implemented
```

The variable `i` is implicit. Might be good to declare it as `size_t`.

Why did you decide to not include the while loop in the `try`/`finally`?



---

archive/issue_comments_368028.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2018-03-30T12:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368028",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_338784.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-03-30T12:48:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338784"
}
```



---

archive/issue_events_338785.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-03-30T12:48:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338785"
}
```



---

archive/issue_events_338786.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-03-30T12:48:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338786"
}
```



---

archive/issue_events_338787.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-03-30T12:48:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338787"
}
```



---

archive/issue_comments_368029.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/733ce3f3b2bc6fa1f01397d8f39dcb908f330120\"><code>733ce3f</code></a></td><td><code>#24314 rootfinding for polynomials with complex ball coefficients using arb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/521310016dc489e0677dfa37535d2d9266ff3202\"><code>5213100</code></a></td><td><code>#24314 more documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c\"><code>6ad027b</code></a></td><td><code>#24314 address reviewer's request</code></td></tr></table>\n",
    "created_at": "2018-03-30T14:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368029",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/733ce3f3b2bc6fa1f01397d8f39dcb908f330120"><code>733ce3f</code></a></td><td><code>#24314 rootfinding for polynomials with complex ball coefficients using arb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/521310016dc489e0677dfa37535d2d9266ff3202"><code>5213100</code></a></td><td><code>#24314 more documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c"><code>6ad027b</code></a></td><td><code>#24314 address reviewer's request</code></td></tr></table>




---

archive/issue_comments_368030.json:
```json
{
    "body": "Changed commit from **[`5f210a4`](https://github.com/sagemath/sagetrac-mirror/commit/5f210a4d1f8f602efd2ead6693b17b68ed90784b)** to **[`6ad027b`](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)**",
    "created_at": "2018-03-30T14:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368030",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f210a4`](https://github.com/sagemath/sagetrac-mirror/commit/5f210a4d1f8f602efd2ead6693b17b68ed90784b)** to **[`6ad027b`](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)**



---

archive/issue_comments_368031.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@videlec](#comment:19):\n> You have included a lot of example but they are right now unreachable from the documentation. It would be better to have a sample of it directly in the generic `roots` method. It is good to advertise it at this generic level since someone might want to use this even with polynomial with integer coefficients.\n\nDone... But this is really a symptom of deeper design issues (of the documentation framework, and of the `_root_univariate_polynomial` mechanism)...\n\n> It is sad that the following is not working\n> \n> ```\n> sage: x = polygen(ZZ)\n> sage: (x^3 + 3).roots(RBF, multiplicities=False)\n> Traceback (most recent call last):\n> ...\n> NotImplementedError: root finding for this polynomial not implemented\n> ```\n\nI have some work in progress to interface the `arb_fmpz_poly` module, but I'm waiting for some other tickets to get merged to avoid conflicts.\n\n> The variable `i` is implicit. Might be good to declare it as `size_t`.\n\nWhy?\n\n> Why did you decide to not include the while loop in the `try`/`finally`?\n\nI don't know. Must have been because of the `sig_on()`/`sig_off()` block. But neither solution is perfect, I can move it in the `try` block if that's more to your taste.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/733ce3f3b2bc6fa1f01397d8f39dcb908f330120\"><code>733ce3f</code></a></td><td><code>#24314 rootfinding for polynomials with complex ball coefficients using arb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/521310016dc489e0677dfa37535d2d9266ff3202\"><code>5213100</code></a></td><td><code>#24314 more documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c\"><code>6ad027b</code></a></td><td><code>#24314 address reviewer's request</code></td></tr></table>\n",
    "created_at": "2018-03-30T14:52:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368031",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@videlec](#comment:19):
> You have included a lot of example but they are right now unreachable from the documentation. It would be better to have a sample of it directly in the generic `roots` method. It is good to advertise it at this generic level since someone might want to use this even with polynomial with integer coefficients.

Done... But this is really a symptom of deeper design issues (of the documentation framework, and of the `_root_univariate_polynomial` mechanism)...

> It is sad that the following is not working
> 
> ```
> sage: x = polygen(ZZ)
> sage: (x^3 + 3).roots(RBF, multiplicities=False)
> Traceback (most recent call last):
> ...
> NotImplementedError: root finding for this polynomial not implemented
> ```

I have some work in progress to interface the `arb_fmpz_poly` module, but I'm waiting for some other tickets to get merged to avoid conflicts.

> The variable `i` is implicit. Might be good to declare it as `size_t`.

Why?

> Why did you decide to not include the while loop in the `try`/`finally`?

I don't know. Must have been because of the `sig_on()`/`sig_off()` block. But neither solution is perfect, I can move it in the `try` block if that's more to your taste.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/733ce3f3b2bc6fa1f01397d8f39dcb908f330120"><code>733ce3f</code></a></td><td><code>#24314 rootfinding for polynomials with complex ball coefficients using arb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/521310016dc489e0677dfa37535d2d9266ff3202"><code>5213100</code></a></td><td><code>#24314 more documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c"><code>6ad027b</code></a></td><td><code>#24314 address reviewer's request</code></td></tr></table>




---

archive/issue_events_338788.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-03-30T14:52:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338788"
}
```



---

archive/issue_events_338789.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2018-03-30T14:52:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338789"
}
```



---

archive/issue_comments_368032.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@mezzarobba](#comment:21):\n> Replying to [@videlec](#comment:19):\n> > The variable `i` is implicit. Might be good to declare it as `size_t`.\n\n> \n> Why?\n\nTo not let Cython decide what it should be... Maybe not important.",
    "created_at": "2018-04-03T07:19:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368032",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@mezzarobba](#comment:21):
> Replying to [@videlec](#comment:19):
> > The variable `i` is implicit. Might be good to declare it as `size_t`.

> 
> Why?

To not let Cython decide what it should be... Maybe not important.



---

archive/issue_events_338790.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-04-03T07:20:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338790"
}
```



---

archive/issue_events_338791.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-04-03T07:20:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338791"
}
```



---

archive/issue_comments_368033.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThanks!",
    "created_at": "2018-04-03T10:50:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368033",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:25" align="right">comment:25</div>

Thanks!



---

archive/issue_events_338792.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:27:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338792"
}
```



---

archive/issue_events_338793.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e4ec2f62091a53f9eb32827ccb2f08e72a8f3db8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-08T17:27:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24314#event-338793"
}
```



---

archive/issue_comments_368034.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/arb_roots](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/arb_roots)** to **[`6ad027b`](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)**",
    "created_at": "2018-05-08T17:27:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24314#issuecomment-368034",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/arb_roots](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/arb_roots)** to **[`6ad027b`](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)**
