# Issue 24314: rootfinding for polynomials with complex ball coefficients using arb

archive/issues_024077.json:
```json
{
    "body": "\n\nCC:  @fredrik-johansson @videlec @cheuberg\n\nBranch/Commit: [6ad027bb82d9b119956c42d8f9f249117612208c](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)\n\nReviewer: Vincent Delecroix\n\nAuthor: Marc Mezzarobba\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/24314\n\n",
    "closed_at": "2018-05-08T17:27:00Z",
    "created_at": "2017-12-02T10:02:35Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "rootfinding for polynomials with complex ball coefficients using arb",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24314",
    "user": "https://github.com/mezzarobba"
}
```


CC:  @fredrik-johansson @videlec @cheuberg

Branch/Commit: [6ad027bb82d9b119956c42d8f9f249117612208c](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)

Reviewer: Vincent Delecroix

Author: Marc Mezzarobba

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/24314





---

archive/issue_comments_462505.json:
```json
{
    "body": "<a id='comment:1'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[26e6334](https://github.com/sagemath/sagetrac-mirror/commit/26e633467eba6124075e525113f8cdd26d8e78e2)|`rootfinding for polynomials with complex ball coefficients using arb`|",
    "created_at": "2017-12-02T10:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[26e6334](https://github.com/sagemath/sagetrac-mirror/commit/26e633467eba6124075e525113f8cdd26d8e78e2)|`rootfinding for polynomials with complex ball coefficients using arb`|



---

archive/issue_comments_462506.json:
```json
{
    "body": "Changing commit from \"862df2c9a8c6b1f59affa3e1228b5e3263279a99\" to \"26e633467eba6124075e525113f8cdd26d8e78e2\"",
    "created_at": "2017-12-02T10:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "862df2c9a8c6b1f59affa3e1228b5e3263279a99" to "26e633467eba6124075e525113f8cdd26d8e78e2"



---

archive/issue_comments_462507.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-02T10:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462507",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_462508.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt is best not to call acb_poly_find_roots once with the final precision but to use a loop like\n\nhttps://github.com/fredrik-johansson/python-flint/blob/master/src/acb_poly.pyx#L331",
    "created_at": "2017-12-02T16:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462508",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:4'></a>
It is best not to call acb_poly_find_roots once with the final precision but to use a loop like

https://github.com/fredrik-johansson/python-flint/blob/master/src/acb_poly.pyx#L331



---

archive/issue_comments_462509.json:
```json
{
    "body": "<a id='comment:5'></a>\nRelated to this ticket, an interface to arb_fmpz_poly_complex_roots would also be useful.",
    "created_at": "2017-12-02T17:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462509",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:5'></a>
Related to this ticket, an interface to arb_fmpz_poly_complex_roots would also be useful.



---

archive/issue_comments_462510.json:
```json
{
    "body": "Changing commit from \"26e633467eba6124075e525113f8cdd26d8e78e2\" to \"b007bdedd55979840d30e45bbcfffbf3e31c0d35\"",
    "created_at": "2017-12-03T12:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "26e633467eba6124075e525113f8cdd26d8e78e2" to "b007bdedd55979840d30e45bbcfffbf3e31c0d35"



---

archive/issue_comments_462511.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[b007bde](https://github.com/sagemath/sagetrac-mirror/commit/b007bdedd55979840d30e45bbcfffbf3e31c0d35)|`rootfinding for polynomials with complex ball coefficients using arb`|",
    "created_at": "2017-12-03T12:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[b007bde](https://github.com/sagemath/sagetrac-mirror/commit/b007bdedd55979840d30e45bbcfffbf3e31c0d35)|`rootfinding for polynomials with complex ball coefficients using arb`|



---

archive/issue_comments_462512.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [fredrik.johansson](#comment%3A4):\n> It is best not to call acb_poly_find_roots once with the final precision but to use a loop like\n> \n> https://github.com/fredrik-johansson/python-flint/blob/master/src/acb_poly.pyx#L331\n\n\nThanks for the hint. Is it better now? (I also made the version with `proof=False` return all the roots instead of only the isolated ones.)\n\nI have doubts about the choice of refusing to run with `multiplicities=True`, any thoughts?",
    "created_at": "2017-12-03T12:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462512",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:7'></a>
Replying to [fredrik.johansson](#comment%3A4):
> It is best not to call acb_poly_find_roots once with the final precision but to use a loop like
> 
> https://github.com/fredrik-johansson/python-flint/blob/master/src/acb_poly.pyx#L331


Thanks for the hint. Is it better now? (I also made the version with `proof=False` return all the roots instead of only the isolated ones.)

I have doubts about the choice of refusing to run with `multiplicities=True`, any thoughts?



---

archive/issue_comments_462513.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt looks reasonable to me (without having actually tested the code).\n\nIs multiplicities=True the default? For an interval polynomial, returning certified root clusters would be a reasonable interpretation, although it's a bit dangerous since a user might expect (naively) to obtain the true multiplicities for the intended exact polynomial. It doesn't really matter right now since the algorithm in Arb doesn't support certifiable isolating all root clusters, anyway...",
    "created_at": "2017-12-03T13:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462513",
    "user": "https://github.com/fredrik-johansson"
}
```

<a id='comment:8'></a>
It looks reasonable to me (without having actually tested the code).

Is multiplicities=True the default? For an interval polynomial, returning certified root clusters would be a reasonable interpretation, although it's a bit dangerous since a user might expect (naively) to obtain the true multiplicities for the intended exact polynomial. It doesn't really matter right now since the algorithm in Arb doesn't support certifiable isolating all root clusters, anyway...



---

archive/issue_comments_462514.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [fredrik.johansson](#comment%3A8):\n> Is multiplicities=True the default?\n\n\nYes.\n\n> For an interval polynomial, returning certified root clusters would be a reasonable interpretation, although it's a bit dangerous since a user might expect (naively) to obtain the true multiplicities for the intended exact polynomial.\n\n\nYes, it would probably be clearer to have a separate method for that case. But we could also simply return all the roots with multiplicity one (since, unless it was called with `proof=False`, the function always fails on multiple roots).\n\nUnless someone objects, I suggest we keep the exception for now. It will be easier to change it later if it proves too inconvenient than to go the other way.",
    "created_at": "2017-12-04T15:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462514",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:9'></a>
Replying to [fredrik.johansson](#comment%3A8):
> Is multiplicities=True the default?


Yes.

> For an interval polynomial, returning certified root clusters would be a reasonable interpretation, although it's a bit dangerous since a user might expect (naively) to obtain the true multiplicities for the intended exact polynomial.


Yes, it would probably be clearer to have a separate method for that case. But we could also simply return all the roots with multiplicity one (since, unless it was called with `proof=False`, the function always fails on multiple roots).

Unless someone objects, I suggest we keep the exception for now. It will be easier to change it later if it proves too inconvenient than to go the other way.



---

archive/issue_comments_462515.json:
```json
{
    "body": "Changing commit from \"b007bdedd55979840d30e45bbcfffbf3e31c0d35\" to \"8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a\"",
    "created_at": "2018-01-31T15:03:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b007bdedd55979840d30e45bbcfffbf3e31c0d35" to "8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a"



---

archive/issue_comments_462516.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[8474ea3](https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a)|`Fix up 75c75e9 (#24285)`|",
    "created_at": "2018-01-31T15:03:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[8474ea3](https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a)|`Fix up 75c75e9 (#24285)`|



---

archive/issue_comments_462517.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[38d4c2c](https://github.com/sagemath/sagetrac-mirror/commit/38d4c2c21275216936aa6c9d6f8b72559d941caf)|`rootfinding for polynomials with complex ball coefficients using arb`|",
    "created_at": "2018-01-31T15:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[38d4c2c](https://github.com/sagemath/sagetrac-mirror/commit/38d4c2c21275216936aa6c9d6f8b72559d941caf)|`rootfinding for polynomials with complex ball coefficients using arb`|



---

archive/issue_comments_462518.json:
```json
{
    "body": "Changing commit from \"8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a\" to \"38d4c2c21275216936aa6c9d6f8b72559d941caf\"",
    "created_at": "2018-01-31T15:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a" to "38d4c2c21275216936aa6c9d6f8b72559d941caf"



---

archive/issue_comments_462519.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [git](#comment%3A10):\n> Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n> |                                                                                                                                           |                         |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n> |[8474ea3](https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a)|`Fix up 75c75e9 (#24285)`|\n\n\nWrong branch, sorry.",
    "created_at": "2018-01-31T15:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462519",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:12'></a>
Replying to [git](#comment%3A10):
> Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
> |                                                                                                                                           |                         |
> |-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
> |[8474ea3](https://github.com/sagemath/sagetrac-mirror/commit/8474ea3c302e87aceb0b6362ce9e183e3ebf6b1a)|`Fix up 75c75e9 (#24285)`|


Wrong branch, sorry.



---

archive/issue_comments_462520.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[5301551](https://github.com/sagemath/sagetrac-mirror/commit/53015517e4ae207eff680a759bb17d5e5958c6ef)|`rootfinding for polynomials with complex ball coefficients using arb`|",
    "created_at": "2018-03-03T12:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[5301551](https://github.com/sagemath/sagetrac-mirror/commit/53015517e4ae207eff680a759bb17d5e5958c6ef)|`rootfinding for polynomials with complex ball coefficients using arb`|



---

archive/issue_comments_462521.json:
```json
{
    "body": "Changing commit from \"38d4c2c21275216936aa6c9d6f8b72559d941caf\" to \"53015517e4ae207eff680a759bb17d5e5958c6ef\"",
    "created_at": "2018-03-03T12:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "38d4c2c21275216936aa6c9d6f8b72559d941caf" to "53015517e4ae207eff680a759bb17d5e5958c6ef"



---

archive/issue_comments_462522.json:
```json
{
    "body": "<a id='comment:15'></a>\nrebased on develop",
    "created_at": "2018-03-03T12:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462522",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:15'></a>
rebased on develop



---

archive/issue_comments_462523.json:
```json
{
    "body": "Changing commit from \"53015517e4ae207eff680a759bb17d5e5958c6ef\" to \"520399af3edfbab9c72703de22c221ef182767f0\"",
    "created_at": "2018-03-20T09:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462523",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "53015517e4ae207eff680a759bb17d5e5958c6ef" to "520399af3edfbab9c72703de22c221ef182767f0"



---

archive/issue_comments_462524.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[520399a](https://github.com/sagemath/sagetrac-mirror/commit/520399af3edfbab9c72703de22c221ef182767f0)|`rootfinding for polynomials with complex ball coefficients using arb`|",
    "created_at": "2018-03-20T09:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[520399a](https://github.com/sagemath/sagetrac-mirror/commit/520399af3edfbab9c72703de22c221ef182767f0)|`rootfinding for polynomials with complex ball coefficients using arb`|



---

archive/issue_comments_462525.json:
```json
{
    "body": "Changing commit from \"520399af3edfbab9c72703de22c221ef182767f0\" to \"5f210a4d1f8f602efd2ead6693b17b68ed90784b\"",
    "created_at": "2018-03-30T09:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "520399af3edfbab9c72703de22c221ef182767f0" to "5f210a4d1f8f602efd2ead6693b17b68ed90784b"



---

archive/issue_comments_462526.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[5f210a4](https://github.com/sagemath/sagetrac-mirror/commit/5f210a4d1f8f602efd2ead6693b17b68ed90784b)|`rootfinding for polynomials with complex ball coefficients using arb`|",
    "created_at": "2018-03-30T09:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[5f210a4](https://github.com/sagemath/sagetrac-mirror/commit/5f210a4d1f8f602efd2ead6693b17b68ed90784b)|`rootfinding for polynomials with complex ball coefficients using arb`|



---

archive/issue_comments_462527.json:
```json
{
    "body": "<a id='comment:18'></a>\nfixed trivial merge conflicts",
    "created_at": "2018-03-30T09:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462527",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:18'></a>
fixed trivial merge conflicts



---

archive/issue_comments_462528.json:
```json
{
    "body": "<a id='comment:19'></a>\nYou have included a lot of example but they are right now unreachable from the documentation. It would be better to have a sample of it directly in the generic `roots` method. It is good to advertise it at this generic level since someone might want to use this even with polynomial with integer coefficients.\n\n```\nsage: x = polygen(ZZ)\nsage: (x^3 + 3).roots(CBF, multiplicities=False)\n[[-1.442249570307408 +/- 3.83e-16] + [+/- 3.59e-19]*I,\n [0.7211247851537042 +/- 9.34e-18] + [1.249024766483406 +/- 4.80e-16]*I,\n [0.7211247851537042 +/- 9.30e-18] + [-1.249024766483406 +/- 4.80e-16]*I]\n```\n\nIt is sad that the following is not working\n\n```\nsage: x = polygen(ZZ)\nsage: (x^3 + 3).roots(RBF, multiplicities=False)\nTraceback (most recent call last):\n...\nNotImplementedError: root finding for this polynomial not implemented\n```\n\nThe variable `i` is implicit. Might be good to declare it as `size_t`.\n\nWhy did you decide to not include the while loop in the `try`/`finally`?",
    "created_at": "2018-03-30T12:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462528",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
You have included a lot of example but they are right now unreachable from the documentation. It would be better to have a sample of it directly in the generic `roots` method. It is good to advertise it at this generic level since someone might want to use this even with polynomial with integer coefficients.

```
sage: x = polygen(ZZ)
sage: (x^3 + 3).roots(CBF, multiplicities=False)
[[-1.442249570307408 +/- 3.83e-16] + [+/- 3.59e-19]*I,
 [0.7211247851537042 +/- 9.34e-18] + [1.249024766483406 +/- 4.80e-16]*I,
 [0.7211247851537042 +/- 9.30e-18] + [-1.249024766483406 +/- 4.80e-16]*I]
```

It is sad that the following is not working

```
sage: x = polygen(ZZ)
sage: (x^3 + 3).roots(RBF, multiplicities=False)
Traceback (most recent call last):
...
NotImplementedError: root finding for this polynomial not implemented
```

The variable `i` is implicit. Might be good to declare it as `size_t`.

Why did you decide to not include the while loop in the `try`/`finally`?



---

archive/issue_comments_462529.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2018-03-30T12:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462529",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_462530.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-03-30T12:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462530",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_069973.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-03-30T12:48:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24314#event-69973"
}
```



---

archive/issue_comments_462531.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[733ce3f](https://github.com/sagemath/sagetrac-mirror/commit/733ce3f3b2bc6fa1f01397d8f39dcb908f330120)|`#24314 rootfinding for polynomials with complex ball coefficients using arb`|\n|[5213100](https://github.com/sagemath/sagetrac-mirror/commit/521310016dc489e0677dfa37535d2d9266ff3202)|`#24314 more documentation`|\n|[6ad027b](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)|`#24314 address reviewer's request`|",
    "created_at": "2018-03-30T14:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[733ce3f](https://github.com/sagemath/sagetrac-mirror/commit/733ce3f3b2bc6fa1f01397d8f39dcb908f330120)|`#24314 rootfinding for polynomials with complex ball coefficients using arb`|
|[5213100](https://github.com/sagemath/sagetrac-mirror/commit/521310016dc489e0677dfa37535d2d9266ff3202)|`#24314 more documentation`|
|[6ad027b](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)|`#24314 address reviewer's request`|



---

archive/issue_comments_462532.json:
```json
{
    "body": "Changing commit from \"5f210a4d1f8f602efd2ead6693b17b68ed90784b\" to \"6ad027bb82d9b119956c42d8f9f249117612208c\"",
    "created_at": "2018-03-30T14:50:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5f210a4d1f8f602efd2ead6693b17b68ed90784b" to "6ad027bb82d9b119956c42d8f9f249117612208c"



---

archive/issue_comments_462533.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [vdelecroix](#comment%3A19):\n> You have included a lot of example but they are right now unreachable from the documentation. It would be better to have a sample of it directly in the generic `roots` method. It is good to advertise it at this generic level since someone might want to use this even with polynomial with integer coefficients.\n\n\nDone... But this is really a symptom of deeper design issues (of the documentation framework, and of the `_root_univariate_polynomial` mechanism)...\n\n> It is sad that the following is not working\n> \n> ```\n> sage: x = polygen(ZZ)\n> sage: (x^3 + 3).roots(RBF, multiplicities=False)\n> Traceback (most recent call last):\n> ...\n> NotImplementedError: root finding for this polynomial not implemented\n> ```\n\n\nI have some work in progress to interface the `arb_fmpz_poly` module, but I'm waiting for some other tickets to get merged to avoid conflicts.\n\n> The variable `i` is implicit. Might be good to declare it as `size_t`.\n\n\nWhy?\n\n> Why did you decide to not include the while loop in the `try`/`finally`?\n\n\nI don't know. Must have been because of the `sig_on()`/`sig_off()` block. But neither solution is perfect, I can move it in the `try` block if that's more to your taste.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[733ce3f](https://github.com/sagemath/sagetrac-mirror/commit/733ce3f3b2bc6fa1f01397d8f39dcb908f330120)|`#24314 rootfinding for polynomials with complex ball coefficients using arb`|\n|[5213100](https://github.com/sagemath/sagetrac-mirror/commit/521310016dc489e0677dfa37535d2d9266ff3202)|`#24314 more documentation`|\n|[6ad027b](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)|`#24314 address reviewer's request`|",
    "created_at": "2018-03-30T14:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462533",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:21'></a>
Replying to [vdelecroix](#comment%3A19):
> You have included a lot of example but they are right now unreachable from the documentation. It would be better to have a sample of it directly in the generic `roots` method. It is good to advertise it at this generic level since someone might want to use this even with polynomial with integer coefficients.


Done... But this is really a symptom of deeper design issues (of the documentation framework, and of the `_root_univariate_polynomial` mechanism)...

> It is sad that the following is not working
> 
> ```
> sage: x = polygen(ZZ)
> sage: (x^3 + 3).roots(RBF, multiplicities=False)
> Traceback (most recent call last):
> ...
> NotImplementedError: root finding for this polynomial not implemented
> ```


I have some work in progress to interface the `arb_fmpz_poly` module, but I'm waiting for some other tickets to get merged to avoid conflicts.

> The variable `i` is implicit. Might be good to declare it as `size_t`.


Why?

> Why did you decide to not include the while loop in the `try`/`finally`?


I don't know. Must have been because of the `sig_on()`/`sig_off()` block. But neither solution is perfect, I can move it in the `try` block if that's more to your taste.

---
New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[733ce3f](https://github.com/sagemath/sagetrac-mirror/commit/733ce3f3b2bc6fa1f01397d8f39dcb908f330120)|`#24314 rootfinding for polynomials with complex ball coefficients using arb`|
|[5213100](https://github.com/sagemath/sagetrac-mirror/commit/521310016dc489e0677dfa37535d2d9266ff3202)|`#24314 more documentation`|
|[6ad027b](https://github.com/sagemath/sagetrac-mirror/commit/6ad027bb82d9b119956c42d8f9f249117612208c)|`#24314 address reviewer's request`|



---

archive/issue_comments_462534.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-30T14:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462534",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_462535.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [mmezzarobba](#comment%3A21):\n> Replying to [vdelecroix](#comment%3A19):\n> > The variable `i` is implicit. Might be good to declare it as `size_t`.\n\n> \n> Why?\n\n\nTo not let Cython decide what it should be... Maybe not important.",
    "created_at": "2018-04-03T07:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462535",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
Replying to [mmezzarobba](#comment%3A21):
> Replying to [vdelecroix](#comment%3A19):
> > The variable `i` is implicit. Might be good to declare it as `size_t`.

> 
> Why?


To not let Cython decide what it should be... Maybe not important.



---

archive/issue_comments_462536.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-03T07:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462536",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_462537.json:
```json
{
    "body": "<a id='comment:25'></a>\nThanks!",
    "created_at": "2018-04-03T10:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462537",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:25'></a>
Thanks!



---

archive/issue_comments_462538.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462538",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069974.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:27:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24314#event-69974"
}
```



---

archive/issue_comments_462539.json:
```json
{
    "body": "Changing branch from \"u/mmezzarobba/arb_roots\" to \"6ad027bb82d9b119956c42d8f9f249117612208c\"",
    "created_at": "2018-05-08T17:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24314",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24314#issuecomment-462539",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mmezzarobba/arb_roots" to "6ad027bb82d9b119956c42d8f9f249117612208c"
