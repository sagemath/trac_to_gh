# Issue 26154: py3: partial cure for multiset_partition_into_sets_ordered

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2018-10-03 14:34:39

which behaves very badly with python3...   :(


---

Comment by chapoton created at 2018-10-03 14:35:02

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-10-03 14:35:02

New commits:


---

Comment by tscrim created at 2018-10-03 22:34:09

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-10-03 22:34:09

Sorry about having to make you fix those things by not catching them on review.


---

Comment by vbraun created at 2018-10-05 16:56:28

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2018-10-05 16:56:28

On OSX:

```
**********************************************************************
File "src/sage/combinat/multiset_partition_into_sets_ordered.py", line 2003, in sage.combinat.multiset_partition_into_sets_ordered.OrderedMultisetPartitionsIntoSets_all_constraints._repr_
Failed example:
    OrderedMultisetPartitionsIntoSets(min_length=3, max_order=5, alphabet=[1,'a'])
Expected:
    Ordered Multiset Partitions into Sets with constraints:
     alphabet={1, 'a'}, max_order=5, min_length=3
Got:
    Ordered Multiset Partitions into Sets with constraints: alphabet={'a', 1}, max_order=5, min_length=3
**********************************************************************
1 item had failures:
   1 of   3 in sage.combinat.multiset_partition_into_sets_ordered.OrderedMultisetPartitionsIntoSets_all_constraints._repr_
    [570 tests, 1 failure, 32.46 s]
----------------------------------------------------------------------
sage -t --long src/sage/combinat/multiset_partition_into_sets_ordered.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

Comment by tscrim created at 2018-10-05 21:31:35

I missed this before, but this `A = sorted(cdict["alphabet"])` will break on Python3 in the test above.


---

Comment by tscrim created at 2018-10-05 21:33:44

Probably what needs to be done is

```python
if not all(l in ZZ for l in cdict["alphabet"]):
    A = sorted(cdict["alphabet"], key=str)
else:
    A = sorted(cdict["alphabet"]
```



---

Comment by git created at 2018-10-08 15:36:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-10-08 15:37:16

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2018-10-10 00:24:21

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-10-10 00:24:21

Thanks. LGTM.


---

Comment by vbraun created at 2018-10-20 11:58:44

Resolution: fixed


---

Comment by embray created at 2018-10-28 14:52:23

This should be re-targeted for 8.5.
