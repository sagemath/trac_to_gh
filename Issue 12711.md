# Issue 12711: Please consider updating to linbox 1.2.2

archive/issues_012711.json:
```json
{
    "body": "Assignee: cpernet\n\nCC:  jpflori\n\nReported build problems with linbox 1.2.2 to upstream a few minutes ago.\n\n  Reason is that I am experimenting with packaging sagemath in Fedora. As you should know, I have it packaged since late sagemath 3.x up to 4.8 in Mandriva, so I am attempting to repeat it in Fedora.\n\n  Fedora has linaro 1.2.2 (built with --enable-sage) packaged, and givaro-3.5.0 btw :-)\n\n  I reported the same build log at[http://groups.google.com/group/linbox-use/browse_thread/thread/713663b790d0dfe9](http://groups.google.com/group/linbox-use/browse_thread/thread/713663b790d0dfe9) but pasting it here also to hopefully give an idea of the build failure.\n\n```\ngcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/home/pcpa/rpmbuild/BUILDROOT/sagemath-4.8-0.1.x86_64/usr/share/sagemath/local/include -Ic_lib/include -I/home/pcpa/rpmbuild/BUILDROOT/sagemath-4.8-0.1.x86_64/usr/share/sagemath/devel/sage/sage/ext -I/usr/include/python2.7 -c sage/libs/linbox/linbox.cpp -o build/temp.linux-x86_64-2.7/sage/libs/linbox/linbox.o -w\nsage/libs/linbox/linbox.cpp: In function 'int __pyx_f_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_echelonize(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_modn_dense*)':\nsage/libs/linbox/linbox.cpp:2308:123: error: 'linbox_modn_dense_echelonize' was not declared in this scope\nsage/libs/linbox/linbox.cpp: In function 'PyObject* __pyx_pf_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_4_poly(PyObject*, PyObject*)':\nsage/libs/linbox/linbox.cpp:2480:335: error: no matching function for call to 'linbox_modn_dense_minpoly(size_t&, size_t**, size_t*, size_t&, size_t**&, int&)'\nsage/libs/linbox/linbox.cpp:2480:335: note: candidate is:\n/usr/include/linbox/linbox-sage.h:65:11: note: template<class Element> Element* linbox_modn_dense_minpoly(Element, Element**, size_t*, size_t, Element*)\nsage/libs/linbox/linbox.cpp:2527:43: error: 'linbox_modn_dense_delete_array' was not declared in this scope\nsage/libs/linbox/linbox.cpp: In function 'PyObject* __pyx_f_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_matrix_matrix_multiply(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_modn_dense*, size_t**, size_t**, size_t, size_t)':\nsage/libs/linbox/linbox.cpp:2578:187: error: no matching function for call to 'linbox_modn_dense_matrix_matrix_multiply(size_t&, size_t**&, size_t**&, size_t**&, size_t&, size_t&, size_t&, size_t&)'\nsage/libs/linbox/linbox.cpp:2578:187: note: candidate is:\n/usr/include/linbox/linbox-sage.h:77:9: note: template<class Element> Element* linbox_modn_dense_matrix_matrix_multiply(Element, Element*, Element*, Element*, size_t, size_t, size_t)\nsage/libs/linbox/linbox.cpp: In function 'long unsigned int __pyx_f_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_rank(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_modn_dense*)':\nsage/libs/linbox/linbox.cpp:2634:117: error: 'linbox_modn_dense_rank' was not declared in this scope\nsage/libs/linbox/linbox.cpp: In function 'size_t __pyx_f_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_det(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_modn_dense*, int)':\nsage/libs/linbox/linbox.cpp:2697:116: error: no matching function for call to 'linbox_modn_dense_det(size_t&, size_t**&, size_t&, size_t&)'\nsage/libs/linbox/linbox.cpp:2697:116: note: candidate is:\n/usr/include/linbox/linbox-sage.h:59:9: note: template<class Element> Element linbox_modn_dense_det(Element, Element*, size_t, size_t)\nsage/libs/linbox/linbox.cpp: In function 'PyObject* __pyx_pf_4sage_4libs_6linbox_6linbox_20Linbox_integer_dense_2_poly(PyObject*, PyObject*)':\nsage/libs/linbox/linbox.cpp:5127:253: error: invalid initialization of non-const reference of type '__mpz_struct (*&)[1]' from an rvalue of type '__mpz_struct (**)[1]'\n/usr/include/linbox/linbox-sage.h:108:6: error: in passing argument 1 of 'void linbox_integer_dense_minpoly(__mpz_struct (*&)[1], size_t&, size_t, __mpz_struct (**)[1])'\nsage/libs/linbox/linbox.cpp:5139:254: error: invalid initialization of non-const reference of type '__mpz_struct (*&)[1]' from an rvalue of type '__mpz_struct (**)[1]'\n/usr/include/linbox/linbox-sage.h:110:6: error: in passing argument 1 of 'void linbox_integer_dense_charpoly(__mpz_struct (*&)[1], size_t&, size_t, __mpz_struct (**)[1])'\nsage/libs/linbox/linbox.cpp: In function 'PyObject* __pyx_f_4sage_4libs_6linbox_6linbox_20Linbox_integer_dense_matrix_matrix_multiply(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_integer_dense*, __mpz_struct (**)[1], __mpz_struct (**)[1], size_t, size_t)':\nsage/libs/linbox/linbox.cpp:5283:173: error: too many arguments to function 'int linbox_integer_dense_matrix_matrix_multiply(__mpz_struct (**)[1], __mpz_struct (**)[1], __mpz_struct (**)[1], size_t, size_t, size_t)'\n/usr/include/linbox/linbox-sage.h:115:5: note: declared here\nerror: command 'gcc' failed with exit status 1\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/12883\n\n",
    "created_at": "2012-04-26T15:17:11Z",
    "labels": [
        "linbox",
        "major",
        "enhancement"
    ],
    "title": "Please consider updating to linbox 1.2.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12711",
    "user": "pcpa"
}
```
Assignee: cpernet

CC:  jpflori

Reported build problems with linbox 1.2.2 to upstream a few minutes ago.

  Reason is that I am experimenting with packaging sagemath in Fedora. As you should know, I have it packaged since late sagemath 3.x up to 4.8 in Mandriva, so I am attempting to repeat it in Fedora.

  Fedora has linaro 1.2.2 (built with --enable-sage) packaged, and givaro-3.5.0 btw :-)

  I reported the same build log at[http://groups.google.com/group/linbox-use/browse_thread/thread/713663b790d0dfe9](http://groups.google.com/group/linbox-use/browse_thread/thread/713663b790d0dfe9) but pasting it here also to hopefully give an idea of the build failure.

```
gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/home/pcpa/rpmbuild/BUILDROOT/sagemath-4.8-0.1.x86_64/usr/share/sagemath/local/include -Ic_lib/include -I/home/pcpa/rpmbuild/BUILDROOT/sagemath-4.8-0.1.x86_64/usr/share/sagemath/devel/sage/sage/ext -I/usr/include/python2.7 -c sage/libs/linbox/linbox.cpp -o build/temp.linux-x86_64-2.7/sage/libs/linbox/linbox.o -w
sage/libs/linbox/linbox.cpp: In function 'int __pyx_f_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_echelonize(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_modn_dense*)':
sage/libs/linbox/linbox.cpp:2308:123: error: 'linbox_modn_dense_echelonize' was not declared in this scope
sage/libs/linbox/linbox.cpp: In function 'PyObject* __pyx_pf_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_4_poly(PyObject*, PyObject*)':
sage/libs/linbox/linbox.cpp:2480:335: error: no matching function for call to 'linbox_modn_dense_minpoly(size_t&, size_t**, size_t*, size_t&, size_t**&, int&)'
sage/libs/linbox/linbox.cpp:2480:335: note: candidate is:
/usr/include/linbox/linbox-sage.h:65:11: note: template<class Element> Element* linbox_modn_dense_minpoly(Element, Element**, size_t*, size_t, Element*)
sage/libs/linbox/linbox.cpp:2527:43: error: 'linbox_modn_dense_delete_array' was not declared in this scope
sage/libs/linbox/linbox.cpp: In function 'PyObject* __pyx_f_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_matrix_matrix_multiply(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_modn_dense*, size_t**, size_t**, size_t, size_t)':
sage/libs/linbox/linbox.cpp:2578:187: error: no matching function for call to 'linbox_modn_dense_matrix_matrix_multiply(size_t&, size_t**&, size_t**&, size_t**&, size_t&, size_t&, size_t&, size_t&)'
sage/libs/linbox/linbox.cpp:2578:187: note: candidate is:
/usr/include/linbox/linbox-sage.h:77:9: note: template<class Element> Element* linbox_modn_dense_matrix_matrix_multiply(Element, Element*, Element*, Element*, size_t, size_t, size_t)
sage/libs/linbox/linbox.cpp: In function 'long unsigned int __pyx_f_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_rank(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_modn_dense*)':
sage/libs/linbox/linbox.cpp:2634:117: error: 'linbox_modn_dense_rank' was not declared in this scope
sage/libs/linbox/linbox.cpp: In function 'size_t __pyx_f_4sage_4libs_6linbox_6linbox_17Linbox_modn_dense_det(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_modn_dense*, int)':
sage/libs/linbox/linbox.cpp:2697:116: error: no matching function for call to 'linbox_modn_dense_det(size_t&, size_t**&, size_t&, size_t&)'
sage/libs/linbox/linbox.cpp:2697:116: note: candidate is:
/usr/include/linbox/linbox-sage.h:59:9: note: template<class Element> Element linbox_modn_dense_det(Element, Element*, size_t, size_t)
sage/libs/linbox/linbox.cpp: In function 'PyObject* __pyx_pf_4sage_4libs_6linbox_6linbox_20Linbox_integer_dense_2_poly(PyObject*, PyObject*)':
sage/libs/linbox/linbox.cpp:5127:253: error: invalid initialization of non-const reference of type '__mpz_struct (*&)[1]' from an rvalue of type '__mpz_struct (**)[1]'
/usr/include/linbox/linbox-sage.h:108:6: error: in passing argument 1 of 'void linbox_integer_dense_minpoly(__mpz_struct (*&)[1], size_t&, size_t, __mpz_struct (**)[1])'
sage/libs/linbox/linbox.cpp:5139:254: error: invalid initialization of non-const reference of type '__mpz_struct (*&)[1]' from an rvalue of type '__mpz_struct (**)[1]'
/usr/include/linbox/linbox-sage.h:110:6: error: in passing argument 1 of 'void linbox_integer_dense_charpoly(__mpz_struct (*&)[1], size_t&, size_t, __mpz_struct (**)[1])'
sage/libs/linbox/linbox.cpp: In function 'PyObject* __pyx_f_4sage_4libs_6linbox_6linbox_20Linbox_integer_dense_matrix_matrix_multiply(__pyx_obj_4sage_4libs_6linbox_6linbox_Linbox_integer_dense*, __mpz_struct (**)[1], __mpz_struct (**)[1], size_t, size_t)':
sage/libs/linbox/linbox.cpp:5283:173: error: too many arguments to function 'int linbox_integer_dense_matrix_matrix_multiply(__mpz_struct (**)[1], __mpz_struct (**)[1], __mpz_struct (**)[1], size_t, size_t, size_t)'
/usr/include/linbox/linbox-sage.h:115:5: note: declared here
error: command 'gcc' failed with exit status 1
```


Issue created by migration from https://trac.sagemath.org/ticket/12883





---

archive/issue_comments_152140.json:
```json
{
    "body": "What's the title supposed to tell us (if you get build errors with that version)?\n\nFor GCC 4.7.x / C++11 issues see #12762; for (problems with) updating LinBox see #11718.  (I think I've read about complications when trying to upgrade to 1.2.2 elsewhere as well.)  See #12865 for yet another issue, which is still present in 1.2.2.",
    "created_at": "2012-04-26T16:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152140",
    "user": "leif"
}
```

What's the title supposed to tell us (if you get build errors with that version)?

For GCC 4.7.x / C++11 issues see #12762; for (problems with) updating LinBox see #11718.  (I think I've read about complications when trying to upgrade to 1.2.2 elsewhere as well.)  See #12865 for yet another issue, which is still present in 1.2.2.



---

archive/issue_comments_152141.json:
```json
{
    "body": "Sorry for lack of a better description. I am trying to address and submit reports to involved upstream parties about some patches and version issues of some components, while checking how far I can go building sagemath in Fedora, and using Fedora packages.\n\nFor example, the first error:\n\n\n```\nerror: 'linbox_modn_dense_echelonize' was not declared in this scope\n```\n\nin `/usr/include/linbox/linbox-sage.h` I see only\n\n\n```\nEXTERN unsigned long int linbox_modn_dense_echelonize_double (double modulus, double*matrix, size_t nrows, size_t ncols);\n\nEXTERN unsigned long int linbox_modn_dense_echelonize_float (float modulus, float * matrix,size_t nrows, size_t ncols);\n```\n\n\nSame happens for `linbox_modn_dense_delete_array` that now have prototypes for `linbox_modn_dense_delete_array_double` and `linbox_modn_dense_delete_array_float`.\n\nAlso `linbox_integer_dense_matrix_matrix_multiply` changed prototype from\n\n\n```\n/* ans must be a pre-allocated and pre-initialized array of GMP ints. */\nEXTERN int linbox_integer_dense_matrix_matrix_multiply(mpz_t** ans, mpz_t **A, mpz_t **B,\n\t\t\t      size_t A_nr, size_t A_nc, size_t B_nr, size_t B_nc);\n```\n\n\nin the sagemath linbox-1.1.6 spkg, to\n\n\n```\n/* ans must be a pre-allocated and pre-initialized array of GMP ints. */\nint linbox_integer_dense_matrix_matrix_multiply (mpz_t** ans, mpz_t **A, mpz_t **B, size_t m, size_t n, size_t k);\n```\n\n\nin linbox-1.2.2.\n\nI am trying to have upstream aware of these issues, and if not possible to get components working, I can try to get an extra linbox 1.1.6 package in Fedora.",
    "created_at": "2012-04-26T18:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152141",
    "user": "pcpa"
}
```

Sorry for lack of a better description. I am trying to address and submit reports to involved upstream parties about some patches and version issues of some components, while checking how far I can go building sagemath in Fedora, and using Fedora packages.

For example, the first error:


```
error: 'linbox_modn_dense_echelonize' was not declared in this scope
```

in `/usr/include/linbox/linbox-sage.h` I see only


```
EXTERN unsigned long int linbox_modn_dense_echelonize_double (double modulus, double*matrix, size_t nrows, size_t ncols);

EXTERN unsigned long int linbox_modn_dense_echelonize_float (float modulus, float * matrix,size_t nrows, size_t ncols);
```


Same happens for `linbox_modn_dense_delete_array` that now have prototypes for `linbox_modn_dense_delete_array_double` and `linbox_modn_dense_delete_array_float`.

Also `linbox_integer_dense_matrix_matrix_multiply` changed prototype from


```
/* ans must be a pre-allocated and pre-initialized array of GMP ints. */
EXTERN int linbox_integer_dense_matrix_matrix_multiply(mpz_t** ans, mpz_t **A, mpz_t **B,
			      size_t A_nr, size_t A_nc, size_t B_nr, size_t B_nc);
```


in the sagemath linbox-1.1.6 spkg, to


```
/* ans must be a pre-allocated and pre-initialized array of GMP ints. */
int linbox_integer_dense_matrix_matrix_multiply (mpz_t** ans, mpz_t **A, mpz_t **B, size_t m, size_t n, size_t k);
```


in linbox-1.2.2.

I am trying to have upstream aware of these issues, and if not possible to get components working, I can try to get an extra linbox 1.1.6 package in Fedora.



---

archive/issue_comments_152142.json:
```json
{
    "body": "Upstream linbox 1.2.2 should need this patch\n\n\n```\n--- linbox-1.2.2/interfaces/sage/linbox-sage.h.orig     2012-04-26 16:25:37.500132509 -0300\n+++ linbox-1.2.2/interfaces/sage/linbox-sage.h  2012-04-26 16:26:00.705133519 -0300\n@@ -48,7 +48,9 @@\n EXTERN void linbox_modn_dense_delete_array_double (double *f);\n EXTERN void linbox_modn_dense_delete_array_float (float *f);\n \n-\n+template <class Element>\n+unsigned long int linbox_modn_dense_echelonize (Element modulus, Element* matrix,\n+                                               size_t nrows, size_t ncols);\n EXTERN unsigned long int linbox_modn_dense_echelonize_double (double modulus, double*matrix, size_t nrows, size_t ncols);\n EXTERN unsigned long int linbox_modn_dense_echelonize_float (float modulus, float * matrix,size_t nrows, size_t ncols);\n \n```\n\n\nBut it is not yet enough because the sage matrix interface was changed from \"jagged pointers\" to a single sequential vector.\n\nI believe I could make a patch for `sage/libs/linbox/linbox.{pxd,pyx}` but I do not feel confident about other places where sage interfaces to linbox matrices.",
    "created_at": "2012-04-26T20:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152142",
    "user": "pcpa"
}
```

Upstream linbox 1.2.2 should need this patch


```
--- linbox-1.2.2/interfaces/sage/linbox-sage.h.orig     2012-04-26 16:25:37.500132509 -0300
+++ linbox-1.2.2/interfaces/sage/linbox-sage.h  2012-04-26 16:26:00.705133519 -0300
@@ -48,7 +48,9 @@
 EXTERN void linbox_modn_dense_delete_array_double (double *f);
 EXTERN void linbox_modn_dense_delete_array_float (float *f);
 
-
+template <class Element>
+unsigned long int linbox_modn_dense_echelonize (Element modulus, Element* matrix,
+                                               size_t nrows, size_t ncols);
 EXTERN unsigned long int linbox_modn_dense_echelonize_double (double modulus, double*matrix, size_t nrows, size_t ncols);
 EXTERN unsigned long int linbox_modn_dense_echelonize_float (float modulus, float * matrix,size_t nrows, size_t ncols);
 
```


But it is not yet enough because the sage matrix interface was changed from "jagged pointers" to a single sequential vector.

I believe I could make a patch for `sage/libs/linbox/linbox.{pxd,pyx}` but I do not feel confident about other places where sage interfaces to linbox matrices.



---

archive/issue_comments_152143.json:
```json
{
    "body": "Experimental linbox 1.2.2 patch",
    "created_at": "2012-04-29T01:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152143",
    "user": "pcpa"
}
```

Experimental linbox 1.2.2 patch



---

archive/issue_comments_152144.json:
```json
{
    "body": "Attachment\n\nThe attached patches allow continuing experimenting with a new sagemath rpm.\nThe patches are only tested to know they make sagemath and linbox agree on api/abi, but no testing done.\nThere were missing prototypes/templates in linbox-sage.h as well as wrong ones.\nI am not fully confident that some place may do wrong dereferencing of matrix fields due to upstream change from a vector of rows where every row is an allocated pointer to a single memory chunk.\nAnother part I am not confident is that I did the correct logic in the change from\nA_nr, A_nc, B_nr, B_nc to test in sage code `if A_nr != B_nc: ...`, and convert the values of `m, n, k` as\n`A_nr, A_nc, B_nr`.\n\nThis is not a proposal of a final patch, but a extra call for more feedback. As this was also the first time I actually did look at linbox code, so, just patched the interfaces to make both sides agree.",
    "created_at": "2012-04-29T01:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152144",
    "user": "pcpa"
}
```

Attachment

The attached patches allow continuing experimenting with a new sagemath rpm.
The patches are only tested to know they make sagemath and linbox agree on api/abi, but no testing done.
There were missing prototypes/templates in linbox-sage.h as well as wrong ones.
I am not fully confident that some place may do wrong dereferencing of matrix fields due to upstream change from a vector of rows where every row is an allocated pointer to a single memory chunk.
Another part I am not confident is that I did the correct logic in the change from
A_nr, A_nc, B_nr, B_nc to test in sage code `if A_nr != B_nc: ...`, and convert the values of `m, n, k` as
`A_nr, A_nc, B_nr`.

This is not a proposal of a final patch, but a extra call for more feedback. As this was also the first time I actually did look at linbox code, so, just patched the interfaces to make both sides agree.



---

archive/issue_comments_152145.json:
```json
{
    "body": "fflas-ffpack-64bit.patch",
    "created_at": "2012-05-05T03:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152145",
    "user": "pcpa"
}
```

fflas-ffpack-64bit.patch



---

archive/issue_comments_152146.json:
```json
{
    "body": "Attachment\n\nlinbox-sagemath.patch",
    "created_at": "2012-05-05T03:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152146",
    "user": "pcpa"
}
```

Attachment

linbox-sagemath.patch



---

archive/issue_comments_152147.json:
```json
{
    "body": "Is it reasonably to define mod_int to C long?\n\nIf not, safest approach should be to use uint32_t I believe, otherwise, should require coding 64 bit templates in linbox 1.2.2.\n\nThe new attached fflas-ffpack-64bit.patch is required to generate proper 64 bit code, and the updated linbox-sagemath.patch should be very close to the final format, but note that in 64 bit arch, linbox 1.2.2 with the attached patches needs also to have -D!__LINBOX_HAVE_INT64=1 in CFLAGS and CXXFLAGS.\n\nI should update the sage-4.8-linbox.patch at some point, as the initial patch I attached was only enough to get to another build failure in Fedora. But the next update should be for sage-5.0.",
    "created_at": "2012-05-05T03:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152147",
    "user": "pcpa"
}
```

Is it reasonably to define mod_int to C long?

If not, safest approach should be to use uint32_t I believe, otherwise, should require coding 64 bit templates in linbox 1.2.2.

The new attached fflas-ffpack-64bit.patch is required to generate proper 64 bit code, and the updated linbox-sagemath.patch should be very close to the final format, but note that in 64 bit arch, linbox 1.2.2 with the attached patches needs also to have -D!__LINBOX_HAVE_INT64=1 in CFLAGS and CXXFLAGS.

I should update the sage-4.8-linbox.patch at some point, as the initial patch I attached was only enough to get to another build failure in Fedora. But the next update should be for sage-5.0.



---

archive/issue_comments_152148.json:
```json
{
    "body": "I cut new SPKGs for LinBox and FFLAS/FFPACK:\n\n   http://sage.math.washington.edu/home/malb/spkgs/fflas_ffpack-1.5.0.spkg\n\n   http://sage.math.washington.edu/home/malb/spkgs/linbox-1.3.0.spkg\n\nI am tracking SPKG repositories here:\n\n   https://bitbucket.org/malb/fflas-ffpack-spkg\n\n   https://bitbucket.org/malb/linbox-spkg\n\nI will go through your patches now.",
    "created_at": "2012-06-06T19:28:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152148",
    "user": "malb"
}
```

I cut new SPKGs for LinBox and FFLAS/FFPACK:

   http://sage.math.washington.edu/home/malb/spkgs/fflas_ffpack-1.5.0.spkg

   http://sage.math.washington.edu/home/malb/spkgs/linbox-1.3.0.spkg

I am tracking SPKG repositories here:

   https://bitbucket.org/malb/fflas-ffpack-spkg

   https://bitbucket.org/malb/linbox-spkg

I will go through your patches now.



---

archive/issue_comments_152149.json:
```json
{
    "body": "All doctests pass on geom.math and my machine with 5.0.1.",
    "created_at": "2012-06-16T22:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152149",
    "user": "malb"
}
```

All doctests pass on geom.math and my machine with 5.0.1.



---

archive/issue_comments_152150.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-16T22:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152150",
    "user": "malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_152151.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-06-16T22:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152151",
    "user": "malb"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_152152.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-06-17T11:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152152",
    "user": "malb"
}
```

Attachment



---

archive/issue_comments_152153.json:
```json
{
    "body": "Needs review.",
    "created_at": "2012-06-17T11:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152153",
    "user": "malb"
}
```

Needs review.



---

archive/issue_comments_152154.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-06-17T11:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152154",
    "user": "malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_152155.json:
```json
{
    "body": "matrix_modn_dense_no_linbox.patch is full of unnecessary whitespace changes that only serve to break any other patch on trac.",
    "created_at": "2012-06-17T11:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152155",
    "user": "vbraun"
}
```

matrix_modn_dense_no_linbox.patch is full of unnecessary whitespace changes that only serve to break any other patch on trac.



---

archive/issue_comments_152156.json:
```json
{
    "body": "Replying to [comment:20 vbraun]:\n\n> matrix_modn_dense_no_linbox.patch is full of unnecessary whitespace changes that only serve to break any other patch on trac.\n\nFixed",
    "created_at": "2012-06-17T12:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152156",
    "user": "malb"
}
```

Replying to [comment:20 vbraun]:

> matrix_modn_dense_no_linbox.patch is full of unnecessary whitespace changes that only serve to break any other patch on trac.

Fixed



---

archive/issue_comments_152157.json:
```json
{
    "body": "Attachment\n\nfixed indentation error introduced in last update",
    "created_at": "2012-06-18T09:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152157",
    "user": "malb"
}
```

Attachment

fixed indentation error introduced in last update



---

archive/issue_comments_152158.json:
```json
{
    "body": "What for/where is `matrix_modn_dense` used now? I see its commented out in `matrix_space.py`.\n\nMinor nitpick: missing space in `coefficients ofminpoly as a Python list`.",
    "created_at": "2012-06-18T15:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152158",
    "user": "vbraun"
}
```

What for/where is `matrix_modn_dense` used now? I see its commented out in `matrix_space.py`.

Minor nitpick: missing space in `coefficients ofminpoly as a Python list`.



---

archive/issue_comments_152159.json:
```json
{
    "body": "Replying to [comment:22 vbraun]:\n> What for/where is `matrix_modn_dense` used now? I see its commented out in `matrix_space.py`.\n\nCurrently, none. But William is resurrecting it at #4968. I assume [attachment: matrix_modn_dense_no_linbox.patch] and #4968 will conflict. But I suggest to deal with this when the problem arises and when we know in which order they'll be merged.\n\n> Minor nitpick: missing space in `coefficients ofminpoly as a Python list`.\n\nI'll fix that.",
    "created_at": "2012-06-18T15:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152159",
    "user": "malb"
}
```

Replying to [comment:22 vbraun]:
> What for/where is `matrix_modn_dense` used now? I see its commented out in `matrix_space.py`.

Currently, none. But William is resurrecting it at #4968. I assume [attachment: matrix_modn_dense_no_linbox.patch] and #4968 will conflict. But I suggest to deal with this when the problem arises and when we know in which order they'll be merged.

> Minor nitpick: missing space in `coefficients ofminpoly as a Python list`.

I'll fix that.



---

archive/issue_comments_152160.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-06-18T15:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152160",
    "user": "malb"
}
```

Attachment



---

archive/issue_comments_152161.json:
```json
{
    "body": "Fixed.",
    "created_at": "2012-06-18T15:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152161",
    "user": "malb"
}
```

Fixed.



---

archive/issue_comments_152162.json:
```json
{
    "body": "I believe it is not necessary anymore to add -DDISABLE_COMMENTATOR to CPPFLAGS. IT is added automatically in the right places when you configure with the sage interface.",
    "created_at": "2012-06-19T03:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152162",
    "user": "fbissey"
}
```

I believe it is not necessary anymore to add -DDISABLE_COMMENTATOR to CPPFLAGS. IT is added automatically in the right places when you configure with the sage interface.



---

archive/issue_comments_152163.json:
```json
{
    "body": "Replying to [comment:25 fbissey]:\n> I believe it is not necessary anymore to add -DDISABLE_COMMENTATOR to CPPFLAGS. IT is added automatically in the right places when you configure with the sage interface.\n\nI am inclined to postpone this change to another ticket, unless you are pretty certain it isn't needed. The reason I am suggesting this is, that if we get SIGSEGVs then on some exotic platform we are not sure whether it's the 1.3.2 update or that we dropped the `-DDISABLE_COMMENTATOR`. Of course, we could just try to re-add it and see what happens, but given how slow and bureaucratic Sage development is these days, this could easily take a week to accomplish, which would be annoying. What do you think?",
    "created_at": "2012-06-20T09:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152163",
    "user": "malb"
}
```

Replying to [comment:25 fbissey]:
> I believe it is not necessary anymore to add -DDISABLE_COMMENTATOR to CPPFLAGS. IT is added automatically in the right places when you configure with the sage interface.

I am inclined to postpone this change to another ticket, unless you are pretty certain it isn't needed. The reason I am suggesting this is, that if we get SIGSEGVs then on some exotic platform we are not sure whether it's the 1.3.2 update or that we dropped the `-DDISABLE_COMMENTATOR`. Of course, we could just try to re-add it and see what happens, but given how slow and bureaucratic Sage development is these days, this could easily take a week to accomplish, which would be annoying. What do you think?



---

archive/issue_comments_152164.json:
```json
{
    "body": "Keeping it is \"mostly harmless\". I just noticed when I created the ebuild for sage-on-gentoo that even so I hadn't added it to the CPPFLAGS it was used in the compilation. Adding it to the CPPFLAGS made it appear twice in those places. \n\nI would have to test with the whole set of new packages and patches to be absolutely certain of course. That could take a few days. And of course that would be on a non-exotic platform first. Make me think I need to put a 5.1beta on power7 to cover my exotic corner.",
    "created_at": "2012-06-20T09:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152164",
    "user": "fbissey"
}
```

Keeping it is "mostly harmless". I just noticed when I created the ebuild for sage-on-gentoo that even so I hadn't added it to the CPPFLAGS it was used in the compilation. Adding it to the CPPFLAGS made it appear twice in those places. 

I would have to test with the whole set of new packages and patches to be absolutely certain of course. That could take a few days. And of course that would be on a non-exotic platform first. Make me think I need to put a 5.1beta on power7 to cover my exotic corner.



---

archive/issue_comments_152165.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-06-25T21:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152165",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_152166.json:
```json
{
    "body": "Looks good to me!",
    "created_at": "2012-06-25T21:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152166",
    "user": "vbraun"
}
```

Looks good to me!



---

archive/issue_comments_152167.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-06-28T14:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152167",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152168.json:
```json
{
    "body": "In `SPKG.txt` of `fflas_ffpack-1.6.0.spkg`, replace\n\n```\n### fflas-ffpack-1.6.0 (Martin Albrecht, 7 June 2012)\n```\n\nby\n\n```\n### fflas_ffpack-1.6.0 (Martin Albrecht, 7 June 2012)\n```\n",
    "created_at": "2012-06-28T14:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152168",
    "user": "jdemeyer"
}
```

In `SPKG.txt` of `fflas_ffpack-1.6.0.spkg`, replace

```
### fflas-ffpack-1.6.0 (Martin Albrecht, 7 June 2012)
```

by

```
### fflas_ffpack-1.6.0 (Martin Albrecht, 7 June 2012)
```




---

archive/issue_comments_152169.json:
```json
{
    "body": "Just curious -- does this fix #12865?  (Won't try myself.)",
    "created_at": "2012-07-03T11:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152169",
    "user": "leif"
}
```

Just curious -- does this fix #12865?  (Won't try myself.)



---

archive/issue_comments_152170.json:
```json
{
    "body": "Yes, it does fix #12865.",
    "created_at": "2012-07-03T11:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152170",
    "user": "vbraun"
}
```

Yes, it does fix #12865.



---

archive/issue_comments_152171.json:
```json
{
    "body": "SPKG.txt issue is fixed.",
    "created_at": "2012-07-03T12:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152171",
    "user": "malb"
}
```

SPKG.txt issue is fixed.



---

archive/issue_comments_152172.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-07-03T12:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152172",
    "user": "malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_152173.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-03T12:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152173",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_152174.json:
```json
{
    "body": "There is a weird file `.swp` in the linbox spkg.",
    "created_at": "2012-08-01T13:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152174",
    "user": "jdemeyer"
}
```

There is a weird file `.swp` in the linbox spkg.



---

archive/issue_comments_152175.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-01T13:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152175",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152176.json:
```json
{
    "body": "I've reuploaded the package without that mysterious file (which is not in spkg repo as I've checked) at\nhttp://perso.telecom-paristech.fr/~flori/sage/linbox-1.3.2.spkg\n\nNo other changes to the spkg.\nSo someone should put this back to positive review (after checking I did not break everything).\n\nEdit: Swapped 2 and 3...",
    "created_at": "2012-08-09T15:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152176",
    "user": "jpflori"
}
```

I've reuploaded the package without that mysterious file (which is not in spkg repo as I've checked) at
http://perso.telecom-paristech.fr/~flori/sage/linbox-1.3.2.spkg

No other changes to the spkg.
So someone should put this back to positive review (after checking I did not break everything).

Edit: Swapped 2 and 3...



---

archive/issue_comments_152177.json:
```json
{
    "body": "Attachment\n\nInitial patch",
    "created_at": "2012-08-12T14:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152177",
    "user": "vbraun"
}
```

Attachment

Initial patch



---

archive/issue_comments_152178.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-08-12T14:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152178",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152179.json:
```json
{
    "body": "The new fflas spkg installs a new script in `SAGE_LOCAL/bin`, which needs to be added to `.hgignore`. I've included a trivial patch to that extent.\n\nRest looks good.",
    "created_at": "2012-08-12T14:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152179",
    "user": "vbraun"
}
```

The new fflas spkg installs a new script in `SAGE_LOCAL/bin`, which needs to be added to `.hgignore`. I've included a trivial patch to that extent.

Rest looks good.



---

archive/issue_comments_152180.json:
```json
{
    "body": "Rebased patch",
    "created_at": "2012-08-14T02:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152180",
    "user": "vbraun"
}
```

Rebased patch



---

archive/issue_comments_152181.json:
```json
{
    "body": "Attachment\n\nRebased patch for sage-5.3.beta1. Just a trivial rebase in module_list.py.",
    "created_at": "2012-08-14T02:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152181",
    "user": "vbraun"
}
```

Attachment

Rebased patch for sage-5.3.beta1. Just a trivial rebase in module_list.py.



---

archive/issue_comments_152182.json:
```json
{
    "body": "Should the root repo patch also touch `spkg/install`, adding a line for fflas, like this?\n\n```diff\ndiff --git a/spkg/install b/spkg/install\n--- a/spkg/install\n+++ b/spkg/install\n@@ -296,6 +296,7 @@ ECLIB=`newest_version eclib`\n ECM=`newest_version ecm`\n ELLIPTIC_CURVES=`newest_version elliptic_curves`\n EXTCODE=`newest_version extcode`\n+FFLASFFPACK=`newest_version fflas_ffpack`\n FLINT=`newest_version flint`\n FLINTQS=`newest_version flintqs`\n FPLLL=`newest_version libfplll`\n```\n\nOr is this not needed for some reason?",
    "created_at": "2012-08-14T03:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152182",
    "user": "jhpalmieri"
}
```

Should the root repo patch also touch `spkg/install`, adding a line for fflas, like this?

```diff
diff --git a/spkg/install b/spkg/install
--- a/spkg/install
+++ b/spkg/install
@@ -296,6 +296,7 @@ ECLIB=`newest_version eclib`
 ECM=`newest_version ecm`
 ELLIPTIC_CURVES=`newest_version elliptic_curves`
 EXTCODE=`newest_version extcode`
+FFLASFFPACK=`newest_version fflas_ffpack`
 FLINT=`newest_version flint`
 FLINTQS=`newest_version flintqs`
 FPLLL=`newest_version libfplll`
```

Or is this not needed for some reason?



---

archive/issue_comments_152183.json:
```json
{
    "body": "Yes, I'm pretty sure thats required. Are you going to post a patch?",
    "created_at": "2012-08-14T04:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152183",
    "user": "vbraun"
}
```

Yes, I'm pretty sure thats required. Are you going to post a patch?



---

archive/issue_comments_152184.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-08-14T04:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152184",
    "user": "jhpalmieri"
}
```

Attachment



---

archive/issue_comments_152185.json:
```json
{
    "body": "Sure, here's a patch. Do I need to switch it back to \"needs review\"?",
    "created_at": "2012-08-14T04:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152185",
    "user": "jhpalmieri"
}
```

Sure, here's a patch. Do I need to switch it back to "needs review"?



---

archive/issue_comments_152186.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-14T06:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152186",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152187.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-14T06:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152187",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_152188.json:
```json
{
    "body": "Why the change to the iml dependencies?",
    "created_at": "2012-08-14T06:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152188",
    "user": "jdemeyer"
}
```

Why the change to the iml dependencies?



---

archive/issue_comments_152189.json:
```json
{
    "body": "The linbox spkg *still* contains the garbage I mentioned before:\n\n```\n? .swp\n```\n",
    "created_at": "2012-08-14T06:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152189",
    "user": "jdemeyer"
}
```

The linbox spkg *still* contains the garbage I mentioned before:

```
? .swp
```




---

archive/issue_comments_152190.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-08-14T06:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152190",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_152191.json:
```json
{
    "body": "Fixed. I guess vim poops into cwd when segfaulting (.swp was vim swap file), never heard of /tmp?!?",
    "created_at": "2012-08-14T13:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152191",
    "user": "vbraun"
}
```

Fixed. I guess vim poops into cwd when segfaulting (.swp was vim swap file), never heard of /tmp?!?



---

archive/issue_comments_152192.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-08-14T13:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152192",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152193.json:
```json
{
    "body": "PS: The iml testsuite does link against ATLAS, even though libiml doesn't depend on it.",
    "created_at": "2012-08-14T13:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152193",
    "user": "vbraun"
}
```

PS: The iml testsuite does link against ATLAS, even though libiml doesn't depend on it.



---

archive/issue_comments_152194.json:
```json
{
    "body": "For what it's worth, building from scratch with these patches works (all long tests passed) on sage.math and on my OS X Lion box.",
    "created_at": "2012-08-14T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152194",
    "user": "jhpalmieri"
}
```

For what it's worth, building from scratch with these patches works (all long tests passed) on sage.math and on my OS X Lion box.



---

archive/issue_comments_152195.json:
```json
{
    "body": "The LinBox spkg needs to be rebased to linbox-1.1.6.p11 (see #13118).",
    "created_at": "2012-08-15T10:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152195",
    "user": "jdemeyer"
}
```

The LinBox spkg needs to be rebased to linbox-1.1.6.p11 (see #13118).



---

archive/issue_comments_152196.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-15T10:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152196",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152197.json:
```json
{
    "body": "Replying to [comment:52 jdemeyer]:\n> The LinBox spkg needs to be rebased to linbox-1.1.6.p11 (see #13118).\n\nand also see #12762. By the way, the file SPKG.txt also has two duplicate entries in the change log for version 1.1.6.p8.",
    "created_at": "2012-08-15T20:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152197",
    "user": "jhpalmieri"
}
```

Replying to [comment:52 jdemeyer]:
> The LinBox spkg needs to be rebased to linbox-1.1.6.p11 (see #13118).

and also see #12762. By the way, the file SPKG.txt also has two duplicate entries in the change log for version 1.1.6.p8.



---

archive/issue_comments_152198.json:
```json
{
    "body": "I've added the changelog entries of linbox-1.1.6p9 - 11 to the SPKG.txt and removed the duplicate. None of those changes are needed any more since upstream has long fixed the issues that gcc 4.7 uncovered and Martin cleaned up the `spkg-install`.\n\nI've also re-added the `spkg-check` as `disabled-spkg-check` and deleted the Makefile.am.patch. Right now the testsuite will not compile without commentator. Would be nice to have the testsuite but not on this ticket.\n\nLikewise, it would be nice if the Sage developers could first search trac if there is already a new spkg before opening a ticket.\n\nSince really only the description changed I'll set this ticket back to positive review.",
    "created_at": "2012-08-15T23:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152198",
    "user": "vbraun"
}
```

I've added the changelog entries of linbox-1.1.6p9 - 11 to the SPKG.txt and removed the duplicate. None of those changes are needed any more since upstream has long fixed the issues that gcc 4.7 uncovered and Martin cleaned up the `spkg-install`.

I've also re-added the `spkg-check` as `disabled-spkg-check` and deleted the Makefile.am.patch. Right now the testsuite will not compile without commentator. Would be nice to have the testsuite but not on this ticket.

Likewise, it would be nice if the Sage developers could first search trac if there is already a new spkg before opening a ticket.

Since really only the description changed I'll set this ticket back to positive review.



---

archive/issue_comments_152199.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-08-15T23:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152199",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152200.json:
```json
{
    "body": "For the record, I've noted the testsuite issues on the linbox mailinglist at https://groups.google.com/d/topic/linbox-use/z0AlEH8Iyug/discussion",
    "created_at": "2012-08-15T23:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152200",
    "user": "vbraun"
}
```

For the record, I've noted the testsuite issues on the linbox mailinglist at https://groups.google.com/d/topic/linbox-use/z0AlEH8Iyug/discussion



---

archive/issue_comments_152201.json:
```json
{
    "body": "Testsuite issues are fixed in svn version 4370.",
    "created_at": "2012-08-16T04:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152201",
    "user": "vbraun"
}
```

Testsuite issues are fixed in svn version 4370.



---

archive/issue_comments_152202.json:
```json
{
    "body": "Is it intentional that the `--with-gmp`, `--with-givaro` and `--with-ntl` and `--with-blas` configure options were removed?\n\nSecondly, by \"rebasing\" this way, you've lost the `.hgtags` (and probably the whole `hg` history) for some earlier versions.  Not sure whether that's important, but it's something to be pointed out.",
    "created_at": "2012-08-16T06:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152202",
    "user": "jdemeyer"
}
```

Is it intentional that the `--with-gmp`, `--with-givaro` and `--with-ntl` and `--with-blas` configure options were removed?

Secondly, by "rebasing" this way, you've lost the `.hgtags` (and probably the whole `hg` history) for some earlier versions.  Not sure whether that's important, but it's something to be pointed out.



---

archive/issue_comments_152203.json:
```json
{
    "body": "Also, the .p11 spkg has error messages to stderr, please don't revert this.",
    "created_at": "2012-08-16T06:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152203",
    "user": "jdemeyer"
}
```

Also, the .p11 spkg has error messages to stderr, please don't revert this.



---

archive/issue_comments_152204.json:
```json
{
    "body": "I think this really needs to be rebased properly.  You've reverted some good changes from the .p9--p11 versions.  Also, try to keep the Mercurial history.",
    "created_at": "2012-08-16T13:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152204",
    "user": "jdemeyer"
}
```

I think this really needs to be rebased properly.  You've reverted some good changes from the .p9--p11 versions.  Also, try to keep the Mercurial history.



---

archive/issue_comments_152205.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-16T13:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152205",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152206.json:
```json
{
    "body": "Also, there isn't any documentation of the fact and the reason of renaming `spkg-check` to `disabled-spkg-check`.",
    "created_at": "2012-08-16T13:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152206",
    "user": "jdemeyer"
}
```

Also, there isn't any documentation of the fact and the reason of renaming `spkg-check` to `disabled-spkg-check`.



---

archive/issue_comments_152207.json:
```json
{
    "body": "I've wasted my coffee break in preserving the mercurial history of the bikeshedding that went into linbox-1.1.6p(N+1) despite the fact that it is all being ripped out. Hopefully future generations of archaeologists will appreciate the effort.\n\nI've also mentioned in the SPKG.txt that spgk-check is disabled in case anybody can't figure it out from the filename.\n\nNow that spkg-install sets `--with-default` we don't need `--with-foo` for every foo.\n\nNow errors go to stderr again.",
    "created_at": "2012-08-16T15:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152207",
    "user": "vbraun"
}
```

I've wasted my coffee break in preserving the mercurial history of the bikeshedding that went into linbox-1.1.6p(N+1) despite the fact that it is all being ripped out. Hopefully future generations of archaeologists will appreciate the effort.

I've also mentioned in the SPKG.txt that spgk-check is disabled in case anybody can't figure it out from the filename.

Now that spkg-install sets `--with-default` we don't need `--with-foo` for every foo.

Now errors go to stderr again.



---

archive/issue_comments_152208.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-08-16T15:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152208",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152209.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-17T10:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152209",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152210.json:
```json
{
    "body": "This change is still a regression:\n\n```diff\n-if [ \"$SAGE64\" = yes ]; then\n-    echo \"Building a 64-bit version of LinBox.\"\n-    if [ -z \"$CFLAG64\" ]; then\n-        CFLAG64=-m64\n-    fi\n-    CFLAGS=\"$CFLAGS $CFLAG64\"\n-    CXXFLAGS=\"$CXXFLAGS $CFLAG64\"\n-    CPPFLAGS=\"$CPPFLAGS $CFLAG64\"\n-    LDFLAGS=\"$LDFLAGS $CFLAG64\"\n+if [ \"$SAGE64\" = \"yes\" ]; then\n+   echo \"64 bit build\"\n+   CFLAGS=\"-m64 $CFLAGS \"; export CFLAGS\n+   CXXFLAGS=\"-m64 $CXXFLAGS \"; export CXXFLAGS\n+   CPPFLAGS=\"-m64 $CPPFLAGS \"; export CPPFLAGS\n+   LDFLAGS=\"-m64 $LDFLAGS\"; export LDFLAGS\n fi\n```\n",
    "created_at": "2012-08-17T10:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152210",
    "user": "jdemeyer"
}
```

This change is still a regression:

```diff
-if [ "$SAGE64" = yes ]; then
-    echo "Building a 64-bit version of LinBox."
-    if [ -z "$CFLAG64" ]; then
-        CFLAG64=-m64
-    fi
-    CFLAGS="$CFLAGS $CFLAG64"
-    CXXFLAGS="$CXXFLAGS $CFLAG64"
-    CPPFLAGS="$CPPFLAGS $CFLAG64"
-    LDFLAGS="$LDFLAGS $CFLAG64"
+if [ "$SAGE64" = "yes" ]; then
+   echo "64 bit build"
+   CFLAGS="-m64 $CFLAGS "; export CFLAGS
+   CXXFLAGS="-m64 $CXXFLAGS "; export CXXFLAGS
+   CPPFLAGS="-m64 $CPPFLAGS "; export CPPFLAGS
+   LDFLAGS="-m64 $LDFLAGS"; export LDFLAGS
 fi
```




---

archive/issue_comments_152211.json:
```json
{
    "body": "Also this:\n\n```diff\n-if [ -z \"$SAGE_LOCAL\" ]; then\n-    echo >&2 \"Error: SAGE_LOCAL undefined - exiting...\"\n-    echo >&2 \"Maybe run 'sage -sh'?\"\n-    exit 1\n+if [ \"$SAGE_LOCAL\" = \"\" ]; then\n+   echo \"SAGE_LOCAL undefined ... exiting\";\n+   echo \"Maybe run 'sage -sh'?\"\n+   exit 1\n fi\n```\n",
    "created_at": "2012-08-17T10:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152211",
    "user": "jdemeyer"
}
```

Also this:

```diff
-if [ -z "$SAGE_LOCAL" ]; then
-    echo >&2 "Error: SAGE_LOCAL undefined - exiting..."
-    echo >&2 "Maybe run 'sage -sh'?"
-    exit 1
+if [ "$SAGE_LOCAL" = "" ]; then
+   echo "SAGE_LOCAL undefined ... exiting";
+   echo "Maybe run 'sage -sh'?"
+   exit 1
 fi
```




---

archive/issue_comments_152212.json:
```json
{
    "body": "Attachment\n\nFYI only",
    "created_at": "2012-08-17T12:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152212",
    "user": "vbraun"
}
```

Attachment

FYI only



---

archive/issue_comments_152213.json:
```json
{
    "body": "I did notice the removal of the undocumented and nonstandard `CFLAG64` environment variable and I consider that a definite plus of the new `spkg-install`.\n\nThe new spkg re-adds the stderr redirection in the `SAGE_LOCAL` check.",
    "created_at": "2012-08-17T12:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152213",
    "user": "vbraun"
}
```

I did notice the removal of the undocumented and nonstandard `CFLAG64` environment variable and I consider that a definite plus of the new `spkg-install`.

The new spkg re-adds the stderr redirection in the `SAGE_LOCAL` check.



---

archive/issue_comments_152214.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-08-17T12:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152214",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152215.json:
```json
{
    "body": "It would be nice to add an hg tag for the new release.",
    "created_at": "2012-08-20T20:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152215",
    "user": "jpflori"
}
```

It would be nice to add an hg tag for the new release.



---

archive/issue_comments_152216.json:
```json
{
    "body": "I've added the tag. Of course this'll never be done consistently as long as `sage -pkg` doesn't check that the spkg name matches the tag.",
    "created_at": "2012-08-20T20:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152216",
    "user": "vbraun"
}
```

I've added the tag. Of course this'll never be done consistently as long as `sage -pkg` doesn't check that the spkg name matches the tag.



---

archive/issue_comments_152217.json:
```json
{
    "body": "Replying to [comment:69 jpflori]:\n> It would be nice to add an hg tag for the new release.\nThis is also done automatically by the merger script when the spkg is merged into Sage.",
    "created_at": "2012-08-21T08:56:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152217",
    "user": "jdemeyer"
}
```

Replying to [comment:69 jpflori]:
> It would be nice to add an hg tag for the new release.
This is also done automatically by the merger script when the spkg is merged into Sage.



---

archive/issue_comments_152218.json:
```json
{
    "body": "Good to know.\nWas it mentionned anywhere in the developper guide or did I miss it or did I not read it again recently enough?\n\nAdditionnal question, what about committing changes or putting them in a queue or not committing anything and letting some script do it?\nIs there a prefered method to do it?",
    "created_at": "2012-08-21T09:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152218",
    "user": "jpflori"
}
```

Good to know.
Was it mentionned anywhere in the developper guide or did I miss it or did I not read it again recently enough?

Additionnal question, what about committing changes or putting them in a queue or not committing anything and letting some script do it?
Is there a prefered method to do it?



---

archive/issue_comments_152219.json:
```json
{
    "body": "Committing changes is always required.\n\nNote: with the latest Mercurial, you can use\n\n```\nhg commit --amend\n```\n\nto add changes to the latest commit.  So you can effectively emulate a queue with 1 patch like this.",
    "created_at": "2012-08-21T09:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152219",
    "user": "jdemeyer"
}
```

Committing changes is always required.

Note: with the latest Mercurial, you can use

```
hg commit --amend
```

to add changes to the latest commit.  So you can effectively emulate a queue with 1 patch like this.



---

archive/issue_comments_152220.json:
```json
{
    "body": "This is totally off-topic, but versioning systems are most useful if you commit often. Two logically independent changes should be two commits, even if they end up in the same ticket/spkg. Reviewer nitpicks should be another commit. Any other questions on how to use mercurial should go to sage-devel.",
    "created_at": "2012-08-21T15:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152220",
    "user": "vbraun"
}
```

This is totally off-topic, but versioning systems are most useful if you commit often. Two logically independent changes should be two commits, even if they end up in the same ticket/spkg. Reviewer nitpicks should be another commit. Any other questions on how to use mercurial should go to sage-devel.



---

archive/issue_comments_152221.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-08-22T10:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152221",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152222.json:
```json
{
    "body": "Replying to [comment:68 vbraun]:\n> I did notice the removal of the undocumented and nonstandard `CFLAG64` environment variable and I consider that a definite plus of the new `spkg-install`.\n\nLooks documented to me: [http://sagemath.org/doc/installation/source.html#environment-variables](http://sagemath.org/doc/installation/source.html#environment-variables)\n\n(I do agree that we should get rid of `CFLAG64` and `SAGE64` in place of using `CC` and `CFLAGS` properly, but that's not the point of this ticket)",
    "created_at": "2012-08-22T10:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152222",
    "user": "jdemeyer"
}
```

Replying to [comment:68 vbraun]:
> I did notice the removal of the undocumented and nonstandard `CFLAG64` environment variable and I consider that a definite plus of the new `spkg-install`.

Looks documented to me: [http://sagemath.org/doc/installation/source.html#environment-variables](http://sagemath.org/doc/installation/source.html#environment-variables)

(I do agree that we should get rid of `CFLAG64` and `SAGE64` in place of using `CC` and `CFLAGS` properly, but that's not the point of this ticket)



---

archive/issue_comments_152223.json:
```json
{
    "body": "Something else I noted: why was the exit code for a failed patch changed from `1` to `-1`?  Normally, programs should use exit codes in the range 0-127.",
    "created_at": "2012-08-22T10:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152223",
    "user": "jdemeyer"
}
```

Something else I noted: why was the exit code for a failed patch changed from `1` to `-1`?  Normally, programs should use exit codes in the range 0-127.



---

archive/issue_comments_152224.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-08-24T13:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152224",
    "user": "vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152225.json:
```json
{
    "body": "Oh silly me, I only searched the ``developer guide`` for `CFLAG64`! I also like how the installation guide is dancing around the fact that `CFLAG64` is currently useless since it is not used in all spgks, so if you were to use a compiler that doesn't understand its default `-m64` value breakage will ensue. So I'll concede that it is documented, but it still doesn't sound like a good idea to me.\n\nI've fixed the offending exit code to be `+1`.",
    "created_at": "2012-08-24T13:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152225",
    "user": "vbraun"
}
```

Oh silly me, I only searched the ``developer guide`` for `CFLAG64`! I also like how the installation guide is dancing around the fact that `CFLAG64` is currently useless since it is not used in all spgks, so if you were to use a compiler that doesn't understand its default `-m64` value breakage will ensue. So I'll concede that it is documented, but it still doesn't sound like a good idea to me.

I've fixed the offending exit code to be `+1`.



---

archive/issue_comments_152226.json:
```json
{
    "body": "Should the references to #9511 be changed to #13164 (in the dependencies and the ticket description?",
    "created_at": "2012-08-24T15:25:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152226",
    "user": "jhpalmieri"
}
```

Should the references to #9511 be changed to #13164 (in the dependencies and the ticket description?



---

archive/issue_comments_152227.json:
```json
{
    "body": "Replying to [comment:77 vbraun]:\n> I also like how the installation guide is dancing around the fact that `CFLAG64` is currently useless since it is not used in all spgks, so if you were to use a compiler that doesn't understand its default `-m64` value breakage will ensue. So I'll concede that it is documented, but it still doesn't sound like a good idea to me.\nThis is all very true, but no good excuse for sloppy rebasing...",
    "created_at": "2012-08-27T11:40:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152227",
    "user": "jdemeyer"
}
```

Replying to [comment:77 vbraun]:
> I also like how the installation guide is dancing around the fact that `CFLAG64` is currently useless since it is not used in all spgks, so if you were to use a compiler that doesn't understand its default `-m64` value breakage will ensue. So I'll concede that it is documented, but it still doesn't sound like a good idea to me.
This is all very true, but no good excuse for sloppy rebasing...



---

archive/issue_comments_152228.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-09-05T09:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152228",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152229.json:
```json
{
    "body": "Rebased from scratch, needs review.",
    "created_at": "2012-09-05T09:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152229",
    "user": "jdemeyer"
}
```

Rebased from scratch, needs review.



---

archive/issue_comments_152230.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-05T09:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152230",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_152231.json:
```json
{
    "body": "Diff for linbox 1.1.6.p11->1.3.2. For reference / review only.",
    "created_at": "2012-09-05T09:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152231",
    "user": "jdemeyer"
}
```

Diff for linbox 1.1.6.p11->1.3.2. For reference / review only.



---

archive/issue_comments_152232.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-09-10T15:10:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152232",
    "user": "jdemeyer"
}
```

Attachment



---

archive/issue_comments_152233.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-10T15:10:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152233",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_152234.json:
```json
{
    "body": "Could this cause the following sporadic doctest error:\n\n```\nsage -t  --long -force_lib devel/sage/sage/modular/modform/ambient.py\nyou are running out of primes. 1000 coprime primes\nfound**********************************************************************\nFile\n\"/release/buildbot/sage/sage-1/sage_upgrade_5.2/build/sage-5.5.beta0/devel/sage-main/sage/modular/modform/ambient.py\",\nline 815:\n    sage: [f[0]%p for p in prime_range(100)] # long time (0s, depends on\nabove)\nExpected:\n    [0, 0, 0, 0, 1, 9, 2, 7, 0, 0, 0, 0, 1, 12, 9, 16, 37, 0, 21, 11,\n70, 22, 0, 58, 76]\nGot:\n    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\n1, 1, 1]\n**********************************************************************\nFile\n\"/release/buildbot/sage/sage-1/sage_upgrade_5.2/build/sage-5.5.beta0/devel/sage-main/sage/modular/modform/ambient.py\",\nline 817:\n    sage: [f[42]%p for p in prime_range(100)] # long time (0s, depends\non above)\nExpected:\n    [0, 0, 4, 0, 10, 4, 4, 8, 12, 1, 23, 13, 10, 27, 20, 13, 16, 59, 53,\n41, 11, 13, 12, 6, 82]\nGot:\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n0, 0, 0]\n**********************************************************************\n```\n\n(the string \"you are running out of primes\" certainly comes from the new LinBox package).",
    "created_at": "2012-10-08T13:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152234",
    "user": "jdemeyer"
}
```

Could this cause the following sporadic doctest error:

```
sage -t  --long -force_lib devel/sage/sage/modular/modform/ambient.py
you are running out of primes. 1000 coprime primes
found**********************************************************************
File
"/release/buildbot/sage/sage-1/sage_upgrade_5.2/build/sage-5.5.beta0/devel/sage-main/sage/modular/modform/ambient.py",
line 815:
    sage: [f[0]%p for p in prime_range(100)] # long time (0s, depends on
above)
Expected:
    [0, 0, 0, 0, 1, 9, 2, 7, 0, 0, 0, 0, 1, 12, 9, 16, 37, 0, 21, 11,
70, 22, 0, 58, 76]
Got:
    [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
1, 1, 1]
**********************************************************************
File
"/release/buildbot/sage/sage-1/sage_upgrade_5.2/build/sage-5.5.beta0/devel/sage-main/sage/modular/modform/ambient.py",
line 817:
    sage: [f[42]%p for p in prime_range(100)] # long time (0s, depends
on above)
Expected:
    [0, 0, 4, 0, 10, 4, 4, 8, 12, 1, 23, 13, 10, 27, 20, 13, 16, 59, 53,
41, 11, 13, 12, 6, 82]
Got:
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0, 0]
**********************************************************************
```

(the string "you are running out of primes" certainly comes from the new LinBox package).



---

archive/issue_comments_152235.json:
```json
{
    "body": "I've posted this question to the linbox-use mailinglist https://groups.google.com/d/topic/linbox-use/SgsXVYM7u7s/discussion",
    "created_at": "2012-10-08T13:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152235",
    "user": "vbraun"
}
```

I've posted this question to the linbox-use mailinglist https://groups.google.com/d/topic/linbox-use/SgsXVYM7u7s/discussion



---

archive/issue_comments_152236.json:
```json
{
    "body": "FYI: I did 4000 doctest runs and this happened 9 times, so it is quite rare.\n\nBecause of the rarity, it doesn't have to be a sage-5.4 blocker, but of course I'd like to see it fixed.",
    "created_at": "2012-10-08T21:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152236",
    "user": "jdemeyer"
}
```

FYI: I did 4000 doctest runs and this happened 9 times, so it is quite rare.

Because of the rarity, it doesn't have to be a sage-5.4 blocker, but of course I'd like to see it fixed.



---

archive/issue_comments_152237.json:
```json
{
    "body": "With previous LinBox versions, this file sometimes (equally rarely) timeouts in doctests.  So maybe it's the same issue, but with a timeout before, and an error now.",
    "created_at": "2012-10-08T21:31:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152237",
    "user": "jdemeyer"
}
```

With previous LinBox versions, this file sometimes (equally rarely) timeouts in doctests.  So maybe it's the same issue, but with a timeout before, and an error now.



---

archive/issue_comments_152238.json:
```json
{
    "body": "Unfortunately, no response from upstream concerning the \"running out of primes\" error.",
    "created_at": "2012-11-02T13:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152238",
    "user": "jdemeyer"
}
```

Unfortunately, no response from upstream concerning the "running out of primes" error.



---

archive/issue_comments_152239.json:
```json
{
    "body": "Either this or #13164 caused #14032.",
    "created_at": "2013-01-29T15:38:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12711#issuecomment-152239",
    "user": "jdemeyer"
}
```

Either this or #13164 caused #14032.
