# Issue 23464: new standard package libatomic_ops

archive/issues_023464.json:
```json
{
    "body": "CC:  @kiwifb\n\nThis is needed for the gc update on #23700, \nsee [GC website](http://www.hboehm.info/gc/) for details.\n\nThe package is C headers and two small static libraries.\n\nThe tarball is here: http://www.hboehm.info/gc/gc_source/libatomic_ops-7.4.4.tar.gz\n\nIssue created by migration from https://trac.sagemath.org/ticket/23701\n\n",
    "created_at": "2017-08-24T14:02:37Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "new standard package libatomic_ops",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23464",
    "user": "@dimpase"
}
```
CC:  @kiwifb

This is needed for the gc update on #23700, 
see [GC website](http://www.hboehm.info/gc/) for details.

The package is C headers and two small static libraries.

The tarball is here: http://www.hboehm.info/gc/gc_source/libatomic_ops-7.4.4.tar.gz

Issue created by migration from https://trac.sagemath.org/ticket/23701





---

archive/issue_comments_328691.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-24T15:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328691",
    "user": "@dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_328692.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-08-24T15:03:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328692",
    "user": "@dimpase"
}
```

New commits:



---

archive/issue_comments_328693.json:
```json
{
    "body": "Why 7.4.4 and not 7.6.0 matching boehm-gc? Ok, that's because the download web[age doesn't point to the new github repos:\nhttps://github.com/ivmai/libatomic_ops/releases\nhttps://github.com/ivmai/bdwgc/releases",
    "created_at": "2017-08-24T23:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328693",
    "user": "@kiwifb"
}
```

Why 7.4.4 and not 7.6.0 matching boehm-gc? Ok, that's because the download web[age doesn't point to the new github repos:
https://github.com/ivmai/libatomic_ops/releases
https://github.com/ivmai/bdwgc/releases



---

archive/issue_comments_328694.json:
```json
{
    "body": "Right, so should we stick to what they tag as \"Latest release\", i.e. 7.4.4 for `gc` and \n7.4.6 for `libatomic_ops`?",
    "created_at": "2017-08-25T08:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328694",
    "user": "@dimpase"
}
```

Right, so should we stick to what they tag as "Latest release", i.e. 7.4.4 for `gc` and 
7.4.6 for `libatomic_ops`?



---

archive/issue_comments_328695.json:
```json
{
    "body": "I am ok with that and at least that's what I have here, so I can say personally that it has some testing on linux. 7.6.0 should at least all build otherwise I would have had complaints on gentoo's bugzilla (a guy called Jurgen Rose is building everything in ~amd64 - unstable in debian parlance - I usually know quite quickly if something breaks sage building).",
    "created_at": "2017-08-25T09:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328695",
    "user": "@kiwifb"
}
```

I am ok with that and at least that's what I have here, so I can say personally that it has some testing on linux. 7.6.0 should at least all build otherwise I would have had complaints on gentoo's bugzilla (a guy called Jurgen Rose is building everything in ~amd64 - unstable in debian parlance - I usually know quite quickly if something breaks sage building).



---

archive/issue_comments_328696.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-08-25T11:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328696",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_328697.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-08-25T13:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328697",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_328698.json:
```json
{
    "body": "These flags\n\n```\n+CONFIGURE_FLAGS=\"--enable-large-config\"\n+if [ \"$UNAME\" = \"CYGWIN\" ]; then\n+    # See https://trac.sagemath.org/ticket/22694\n+    CONFIGURE_FLAGS=\"$CONFIGURE_FLAGS --enable-threads=posix --enable-handle-fork\"\n+fi\n```\n\nare for libgc and are not applicable to libatomic_ops",
    "created_at": "2017-10-09T12:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328698",
    "user": "@embray"
}
```

These flags

```
+CONFIGURE_FLAGS="--enable-large-config"
+if [ "$UNAME" = "CYGWIN" ]; then
+    # See https://trac.sagemath.org/ticket/22694
+    CONFIGURE_FLAGS="$CONFIGURE_FLAGS --enable-threads=posix --enable-handle-fork"
+fi
```

are for libgc and are not applicable to libatomic_ops



---

archive/issue_comments_328699.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-09T12:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328699",
    "user": "@embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_328700.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-09T14:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328700",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_328701.json:
```json
{
    "body": "oops, sorry, fixed now.",
    "created_at": "2017-10-09T14:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328701",
    "user": "@dimpase"
}
```

oops, sorry, fixed now.



---

archive/issue_comments_328702.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-09T14:07:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328702",
    "user": "@dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_328703.json:
```json
{
    "body": "\n```\n-CONFIGURE_FLAGS=\"--enable-large-config\"\n-if [ \"$UNAME\" = \"CYGWIN\" ]; then\n-    # See https://trac.sagemath.org/ticket/22694\n-    CONFIGURE_FLAGS=\"$CONFIGURE_FLAGS --enable-threads=posix --enable-handle-fork\"\n-fi\n-\n ./configure --prefix=\"$SAGE_LOCAL\" --libdir=\"$SAGE_LOCAL/lib\" $CONFIGURE_FLAGS\n```\n\n\nNow `$CONFIGURE_FLAGS` is undefined and not used so you could remove that too.\n\nAlso, I have another change I need to propose but I'm still investigating a bit...",
    "created_at": "2017-10-09T14:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328703",
    "user": "@embray"
}
```


```
-CONFIGURE_FLAGS="--enable-large-config"
-if [ "$UNAME" = "CYGWIN" ]; then
-    # See https://trac.sagemath.org/ticket/22694
-    CONFIGURE_FLAGS="$CONFIGURE_FLAGS --enable-threads=posix --enable-handle-fork"
-fi
-
 ./configure --prefix="$SAGE_LOCAL" --libdir="$SAGE_LOCAL/lib" $CONFIGURE_FLAGS
```


Now `$CONFIGURE_FLAGS` is undefined and not used so you could remove that too.

Also, I have another change I need to propose but I'm still investigating a bit...



---

archive/issue_comments_328704.json:
```json
{
    "body": "We should go for 7.6.2, released last month\nhttps://github.com/ivmai/libatomic_ops/releases/tag/v7.6.2\n(to match the corresponding GC release)\nI will update accordingly.",
    "created_at": "2018-01-06T00:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328704",
    "user": "@dimpase"
}
```

We should go for 7.6.2, released last month
https://github.com/ivmai/libatomic_ops/releases/tag/v7.6.2
(to match the corresponding GC release)
I will update accordingly.



---

archive/issue_comments_328705.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-06T01:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328705",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_328706.json:
```json
{
    "body": "I have some slight changes to this\n\n1) To get it compatible with #23701 on Cygwin\n\n2) To update it to use `sage-dist-helpers` \u00e0 la #24025\n\nDo you mind if I replace this with my branch?  If it works then positive review from me (with apologies for the long delay)",
    "created_at": "2018-02-02T15:50:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328706",
    "user": "@embray"
}
```

I have some slight changes to this

1) To get it compatible with #23701 on Cygwin

2) To update it to use `sage-dist-helpers` à la #24025

Do you mind if I replace this with my branch?  If it works then positive review from me (with apologies for the long delay)



---

archive/issue_comments_328707.json:
```json
{
    "body": "sure, please go ahead.",
    "created_at": "2018-02-02T16:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328707",
    "user": "@dimpase"
}
```

sure, please go ahead.



---

archive/issue_comments_328708.json:
```json
{
    "body": "I guess somebody should review my changes as well.\n----\nNew commits:",
    "created_at": "2018-02-02T17:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328708",
    "user": "@embray"
}
```

I guess somebody should review my changes as well.
----
New commits:



---

archive/issue_comments_328709.json:
```json
{
    "body": "Could we do reviewing of this ticket and #23700 in one go, as this is the dependency of #23700 and only #23700?",
    "created_at": "2018-02-02T18:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328709",
    "user": "@dimpase"
}
```

Could we do reviewing of this ticket and #23700 in one go, as this is the dependency of #23700 and only #23700?



---

archive/issue_comments_328710.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-03T19:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328710",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_328711.json:
```json
{
    "body": "Could you remove the `SAGE64` stuff, see #23733.",
    "created_at": "2018-02-03T19:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328711",
    "user": "@jdemeyer"
}
```

Could you remove the `SAGE64` stuff, see #23733.



---

archive/issue_comments_328712.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-03T23:30:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328712",
    "user": "@dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_328713.json:
```json
{
    "body": "Well, eventually, yes, we will get rid of SAGE64, but #23733 isn't in great shape at the moment. Thus I set this back to needs review.",
    "created_at": "2018-02-03T23:30:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328713",
    "user": "@dimpase"
}
```

Well, eventually, yes, we will get rid of SAGE64, but #23733 isn't in great shape at the moment. Thus I set this back to needs review.



---

archive/issue_comments_328714.json:
```json
{
    "body": "It does seem a bit orthogonal.",
    "created_at": "2018-02-05T09:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328714",
    "user": "@embray"
}
```

It does seem a bit orthogonal.



---

archive/issue_comments_328715.json:
```json
{
    "body": "Instead of `CONFIGURE_FLAGS`, most packages use a variable name of the form `{PACKAGENAME}_CONFIGURE`. So I suggest to use `LIBATOMIC_OPS_CONFIGURE` for this.\n\nAnd please remove the `SAGE64` stuff. That hasn't been used in years.",
    "created_at": "2018-02-06T15:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328715",
    "user": "@jdemeyer"
}
```

Instead of `CONFIGURE_FLAGS`, most packages use a variable name of the form `{PACKAGENAME}_CONFIGURE`. So I suggest to use `LIBATOMIC_OPS_CONFIGURE` for this.

And please remove the `SAGE64` stuff. That hasn't been used in years.



---

archive/issue_comments_328716.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-06T15:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328716",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_328717.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-02-20T16:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328717",
    "user": "@dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_328718.json:
```json
{
    "body": "While SAGE64 removal waits, let us get this in.",
    "created_at": "2018-02-20T16:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328718",
    "user": "@dimpase"
}
```

While SAGE64 removal waits, let us get this in.



---

archive/issue_comments_328719.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-21T18:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23464",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23464#issuecomment-328719",
    "user": "@vbraun"
}
```

Resolution: fixed
