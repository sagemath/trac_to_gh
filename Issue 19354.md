# Issue 19354: Zoom+move a Graph d3js representation

Issue created by migration from https://trac.sagemath.org/ticket/19591

Original creator: ncohen

Original creation time: 2015-11-16 22:58:23

CC:  chapoton dcoudert

This branch adds a zoom+move feature to Graph.show(method='js').

A graphical bug remains when moving the whole graph after moving a specific vertex, but I have no idea how to fix that and the feature is really useful, even like that `:-/`

Nathann


---

Comment by ncohen created at 2015-11-16 22:59:05

New commits:


---

Comment by ncohen created at 2015-11-16 22:59:05

Changing status from new to needs_review.


---

Comment by chapoton created at 2015-11-21 17:35:08

hmm, how is it supposed to work ? I am not able to zoom.


---

Comment by chapoton created at 2015-11-21 19:00:22

ok, works. A bit rough, certainly. Jumps in strange ways. And the size of vertices
grows with the zoom, as well as the width of the edges. So it is not very useful
to see large graphs more clearly. Still interesting to have, I would say, but this
really breaks the nice smoothness of the existing viewer.

By the way, may we close #13418, now that there is method='js' ?


---

Comment by ncohen created at 2015-11-21 23:36:29

I use it to visualize very large graphs. Some of them are a bit like that:


```
sage: g = Graph()
sage: g.add_cycle(range(1000))
sage: g.show(method='js')
```


As you can see, without a zoom this javascript visualization is totally useless.

The zoom, as you noticed, is a 'graphical' zoom and not a 'semantic' zoom. Another zoom that adapts the size of nodes may be doable (I don't know much about javascript), though perhaps 'zooming out' to visualize the whole graph (as you can don on the example I gave) would become useless, with too big vertices that would then hide the actual graph. I don't know.

> By the way, may we close #13418, now that there is method='js' ?

+1 from me.

Nathann


---

Comment by git created at 2015-11-29 10:34:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-11-29 10:35:33

Here is a very very small commit that changes the default list of colors used by d3js. We used to select "category20" but as you can see consecutive colors can be very close to each other, and it made visualization more difficult.

http://bl.ocks.org/aaizemberg/78bd3dade9593896a59d

Now this looks better:


```
sage: graphs.PathGraph(10).show(method='js',vertex_partition=[[i] for i in range(10)])
```



---

Comment by ncohen created at 2015-12-29 10:34:03

It would be cool if somebody could review this. I keep reaplying it over and over each time I am done with my work on another branch, that's how useful this thing is to me.

Nathann


---

Comment by nvcleemp created at 2016-02-11 17:49:14

How is the zoom supposed to work? I tried everything, but no change.


---

Comment by nvcleemp created at 2016-02-11 17:56:40

Nevermind, I forgot to rebuild Sage. :-/


---

Comment by nvcleemp created at 2016-02-11 21:36:25

OK, I got it working now. The added code is short and does what it advertises. For me this is OK, but it should probably be reapplied to the latest version. I actually have no immediate clue of how to reapply, so if you reapply it, I'll re-review it immediately.


---

Comment by ncohen created at 2016-02-12 09:41:51

Hellooooooo !

Thanks for having looked at this ticket.

What do you mean by 'reapply it to the latest version' ? The git branch is a bit old indeed but that file has not been touched since, and the fact that the branch's name appears in green in the ticket means that it is still compatible with the latest beta.

I can add a merge commit if you prefer, but that's technically useless.

Nathann


---

Comment by nvcleemp created at 2016-02-12 10:32:12

Hmm, it's been a long week with many early mornings and late evenings, and I guess I was half a sleep yesterday evening. Don't mind my gibberish. I had a new look at your code (since I don't trust my ability to make a good judgement yesterday), and the code looks OK.

Cheers
Nico


---

Comment by nvcleemp created at 2016-02-12 10:32:12

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2016-02-12 11:01:50

Thaaaaaaaanks for the review !!! If this code is as useful to others as it is to me, I swear that it is a good addition `:-)`

Nathann


---

Comment by vbraun created at 2016-02-13 23:56:13

Resolution: fixed
