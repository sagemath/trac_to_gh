# Issue 12270: singular does not state return types of main methods

Issue created by migration from Trac.

Original creator: ohanar

Original creation time: 2012-02-04 20:16:54

Assignee: GeorgSWeber

This breaks building with clang.

I've posted an spkg fixes this (and #12441) at [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/singular-3-1-3-3.p5.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/singular-3-1-3-3.p5.spkg). (This is a review spkg in case there are more issues with clang down the road.)


---

Attachment

for review purposes


---

Comment by ohanar created at 2012-02-04 20:17:23

Changing status from new to needs_review.


---

Comment by leif created at 2012-04-08 01:36:18

FWIW, otherwise patch looks good... ;-)


---

Comment by leif created at 2012-04-08 01:36:18

Changing keywords from "" to "spkg".


---

Comment by leif created at 2012-04-08 01:36:18

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2012-08-03 06:48:59

Has this been reported upstream (http://www.singular.uni-kl.de:8002/trac/newticket)?


---

Comment by leif created at 2013-06-03 21:08:40

Looks like there were meanwhile more instances (in Singular 3-1-5), although at least some of them are in test code which does not necessarily get built.


---

Comment by leif created at 2013-06-13 15:20:49

Just to make you aware of #14737 (new spkg presumably coming up soon).


---

Comment by vbraun created at 2014-01-31 23:07:34

Might be fixed by #14333, try sage-6.2.beta0 when its out and report back...


---

Comment by vbraun created at 2014-01-31 23:07:34

Changing status from needs_work to needs_info.


---

Comment by jdemeyer created at 2014-02-04 08:00:26

Changing component from build to packages: standard.


---

Comment by leif created at 2014-05-17 16:17:42

Changing status from needs_info to needs_work.


---

Comment by leif created at 2014-05-17 16:17:42

Replying to [comment:10 vbraun]:
> Might be fixed by #14333, try sage-6.2.beta0 when its out and report back...

Nope, it isn't:


```
libparse.l:967:1: error: C++ requires a type specifier for all declarations
```


(as of Sage 6.2 / singular-3.1.6.p1)


---

Comment by leif created at 2014-05-17 17:11:05

To be put into `build/pkgs/singular/patches/`.


---

Attachment

Replying to [comment:13 leif]:
> Replying to [comment:10 vbraun]:
> > Might be fixed by #14333, try sage-6.2.beta0 when its out and report back...
> 
> Nope, it isn't:
> 
> {{{
> libparse.l:967:1: error: C++ requires a type specifier for all declarations
> }}}
> 
> (as of Sage 6.2 / singular-3.1.6.p1)

New patch for Singular 3.1.6 [attachment:singular-3.1.6-no_return_type.patch attached].  (No branch [yet], also because of #13331.)


---

Comment by leif created at 2014-05-17 17:15:08

Changing status from needs_work to needs_review.


---

Comment by leif created at 2014-05-17 17:15:08

Anyway...


---

Comment by jpflori created at 2014-07-16 13:42:53

Anyone feels like reviewing this if I create a branch?
Then I'll move to #13331.


---

Comment by vbraun created at 2014-07-16 15:01:41

This is fixed in Singular-4.0


---

Comment by jpflori created at 2014-07-16 15:04:18

Great, but is it officially released (I'm aware there is tarball available) and is there anyone working on porting Sage to the new Singular interface?


---

Comment by vbraun created at 2014-07-16 15:08:06

Well the webpage still points to 3-1-6. If you want to patch 3-1-6 in the interim then go ahead, all I'm saying is that this will fix itself sooner or later. How much of a priority is building Sage with clang?


---

Comment by jpflori created at 2014-07-17 08:27:08

Actually I don't care, but I'd like to get #13331 in and this one was mentioned there.


---

Comment by jpflori created at 2014-07-17 08:34:08

Still builds fine with the trivial patch, and it makes sense to me.

I assume this was actually tested with clang, so positive review.


---

Comment by jpflori created at 2014-07-17 08:34:51

New commits:


---

Comment by jpflori created at 2014-07-17 08:34:51

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-07-18 03:48:36

Resolution: fixed
