# Issue 33920: Meta ticket: fix docstring markups

Issue created by migration from https://trac.sagemath.org/ticket/34157

Original creator: klee

Original creation time: 2022-07-12 05:54:18

CC:  tscrim chapoton

We fix

​https://github.com/sagemath/sagetrac-mirror/runs/7294638131?check_suite_focus=true

by chunks.

#34156,


---

Comment by klee created at 2022-07-12 05:54:45

Changing component from PLEASE CHANGE to documentation.


---

Comment by klee created at 2022-07-12 05:54:45

Changing type from PLEASE CHANGE to defect.


---

Comment by mkoeppe created at 2022-07-12 14:16:56

What should we do with

```
sage/combinat/tutorial.py:20:1: RST303 Unknown directive type "todo".
```

Normalize all to `TODO`, or make the lower-case `todo` known to the linter?


---

Comment by klee created at 2022-07-13 01:23:05

Replying to [comment:18 mkoeppe]:
> What should we do with
> {{{
> sage/combinat/tutorial.py:20:1: RST303 Unknown directive type "todo".
> }}}
> (1) Normalize all to `TODO`, or 
> (2) make the lower-case `todo` known to the linter?

According to

https://doc.sagemath.org/html/en/developer/coding_basics.html#sage-documentation-style

`TODO` is preferred in sage. But I think `todo` should be at least known to the linter since sphinx doesn't care the case. So I am +1 to (2).


---

Comment by jhpalmieri created at 2022-07-13 21:32:54

Replying to [comment:18 mkoeppe]:
> What should we do with
> {{{
> sage/combinat/tutorial.py:20:1: RST303 Unknown directive type "todo".
> }}}
> Normalize all to `TODO`, or make the lower-case `todo` known to the linter?

Probably both. People will write new code by imitating what they see in the old code, so the more we match the guidelines, the better.

(This is another case like the blank lines between list items where I don't see the point in having a strict guideline. In this case we actually have one in place, so we should follow it.)


---

Comment by git created at 2022-07-14 18:27:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-15 17:31:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-07-15 17:34:00

To test with the bugfix release of the linter, regenerate the toxenv using
`./sage -tox -r -e rst`


---

Comment by mkoeppe created at 2022-07-16 17:09:57

Remaining failures:

```
sage/combinat/parallelogram_polyomino.py:430:1: RST213 Inline emphasis start-string without end-string.
sage/combinat/parallelogram_polyomino.py:430:1: RST210 Inline strong start-string without end-string.
sage/combinat/counting.py:2:1: RST399 Document or section may not begin with a transition.
sage/combinat/designs/database.py:20:1: RST202 Bullet list ends without a blank line; unexpected unindent.
sage/combinat/designs/database.py:25:1: RST202 Bullet list ends without a blank line; unexpected unindent.
sage/combinat/designs/database.py:28:1: RST202 Bullet list ends without a blank line; unexpected unindent.
sage/combinat/designs/database.py:31:1: RST202 Bullet list ends without a blank line; unexpected unindent.
sage/combinat/designs/database.py:37:1: RST202 Bullet list ends without a blank line; unexpected unindent.
sage/doctest/sources.py:765:1: RST214 Inline literal start-string without end-string.
sage/doctest/sources.py:765:1: RST214 Inline literal start-string without end-string.
sage/repl/interpreter.py:465:1: RST303 Unknown directive type "attribute".
sage/graphs/graph_plot.py:50:1: RST299 The "csv-table" directive requires content; none supplied.
```



---

Comment by git created at 2022-07-16 17:10:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-16 17:28:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-16 20:33:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-16 20:38:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-16 20:39:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-07-16 20:45:41

Changing status from new to needs_review.


---

Comment by git created at 2022-07-16 21:07:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-16 21:41:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-07-16 21:47:21

Merged #34139 to get the green "Lint passing" badge.


---

Comment by git created at 2022-07-17 00:46:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-07-17 04:34:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-07-17 18:32:26

Ready for review


---

Comment by mkoeppe created at 2022-07-18 03:29:41

comment:24


---

Comment by klee created at 2022-07-18 04:58:13

Changing status from needs_review to positive_review.


---

Comment by klee created at 2022-07-18 04:58:13

Voilà!

```
$ ./sage -tox -r -e rst
...
  rst: commands succeeded
  congratulations :)
```

Thank you all!


---

Comment by jhpalmieri created at 2022-07-18 05:02:37

Great! Plus a bug fix for `flake8-rst-docstrings`.


---

Comment by mkoeppe created at 2022-07-18 05:15:09

Thanks!


---

Comment by chapoton created at 2022-08-06 16:06:50

this should be extended to pyx files too

EDIT: see #34305


---

Comment by slelievre created at 2022-08-08 18:15:41

Please rebase.


---

Comment by mkoeppe created at 2022-08-08 20:02:40

No need, it merges cleanly with 9.7.beta8 when done manually


---

Comment by vbraun created at 2022-08-29 11:24:55

Resolution: fixed
