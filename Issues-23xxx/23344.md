# Issue 23344: p-adic square root

archive/issues_023107.json:
```json
{
    "assignees": [],
    "body": "This ticket implements square root over p-adic fields (i.e. finite extension of Qp)\n\n**CC:**  @roed314 @xcaruso\n\n**Branch/Commit:** [30855382d325dabb77a7fb1033fa44ba58fbc2f1](https://github.com/sagemath/sagetrac-mirror/commit/30855382d325dabb77a7fb1033fa44ba58fbc2f1)\n\n**Reviewer:** David Lubicz\n\n**Author:** Xavier Caruso\n\nIssue created by migration from https://trac.sagemath.org/ticket/23344\n\n",
    "closed_at": "2018-05-08T17:27:19Z",
    "created_at": "2017-06-30T12:48:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20padics",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "p-adic square root",
    "type": "issue",
    "updated_at": "2018-05-08T17:27:19Z",
    "url": "https://github.com/sagemath/sage/issues/23344",
    "user": "https://github.com/dlubicz"
}
```
This ticket implements square root over p-adic fields (i.e. finite extension of Qp)

**CC:**  @roed314 @xcaruso

**Branch/Commit:** [30855382d325dabb77a7fb1033fa44ba58fbc2f1](https://github.com/sagemath/sagetrac-mirror/commit/30855382d325dabb77a7fb1033fa44ba58fbc2f1)

**Reviewer:** David Lubicz

**Author:** Xavier Caruso

Issue created by migration from https://trac.sagemath.org/ticket/23344





---

archive/issue_comments_353048.json:
```json
{
    "body": "<a id='comment:1'></a>\nDoesn't this already work? This field `L` is an example from the docstring for `Qp.extension`.\n\n```\nsage: F = list(Qp(19)['x'](cyclotomic_polynomial(5)).factor())[0][0]\nsage: L = Qp(19).extension(F, names='a')\nsage: L\nUnramified Extension of 19-adic Field with capped relative precision 20 in a defined by (1 + O(19^20))*x^2 + (5 + 2*19 + 10*19^2 + 14*19^3 + 7*19^4 + 13*19^5 + 5*19^6 + 12*19^7 + 8*19^8 + 4*19^9 + 14*19^10 + 6*19^11 + 5*19^12 + 13*19^13 + 16*19^14 + 4*19^15 + 17*19^16 + 8*19^18 + 4*19^19 + O(19^20))*x + (1 + O(19^20))\nsage: u = L(4+19).sqrt(); u\n2 + 5*19 + 3*19^2 + 11*19^3 + 12*19^4 + 13*19^5 + 11*19^6 + 15*19^7 + 12*19^8 + 18*19^9 + 15*19^10 + 2*19^11 + 9*19^12 + 4*19^13 + 19^15 + 19^16 + 13*19^18 + 3*19^19 + O(19^20)\nsage: u^2\n4 + 19 + O(19^20)\n```\nThe syntax `sqrt(L(4+19))` also works.",
    "created_at": "2017-08-24T21:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353048",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:1'></a>
Doesn't this already work? This field `L` is an example from the docstring for `Qp.extension`.

```
sage: F = list(Qp(19)['x'](cyclotomic_polynomial(5)).factor())[0][0]
sage: L = Qp(19).extension(F, names='a')
sage: L
Unramified Extension of 19-adic Field with capped relative precision 20 in a defined by (1 + O(19^20))*x^2 + (5 + 2*19 + 10*19^2 + 14*19^3 + 7*19^4 + 13*19^5 + 5*19^6 + 12*19^7 + 8*19^8 + 4*19^9 + 14*19^10 + 6*19^11 + 5*19^12 + 13*19^13 + 16*19^14 + 4*19^15 + 17*19^16 + 8*19^18 + 4*19^19 + O(19^20))*x + (1 + O(19^20))
sage: u = L(4+19).sqrt(); u
2 + 5*19 + 3*19^2 + 11*19^3 + 12*19^4 + 13*19^5 + 11*19^6 + 15*19^7 + 12*19^8 + 18*19^9 + 15*19^10 + 2*19^11 + 9*19^12 + 4*19^13 + 19^15 + 19^16 + 13*19^18 + 3*19^19 + O(19^20)
sage: u^2
4 + 19 + O(19^20)
```
The syntax `sqrt(L(4+19))` also works.



---

archive/issue_comments_353049.json:
```json
{
    "body": "<a id='comment:2'></a>\nIf I am not mistaken, with the version of sage I am working with (8.0.rc0), the square root is working fine for elements of Qp (even if Qp is embeded in an extension) but not for elements of an extension of Qp (not in Q_p). Continuing your example :\n\n```\nsage: a=L.gen()\nsage: sqrt(4+19*a)\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-5-842761a28969> in <module>()\n----> 1 sqrt(Integer(4)+Integer(19)*a)\n\n/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/functions/other.pyc in sqrt(x, *args, **kwds)\n   2002         except (AttributeError, TypeError):\n   2003             pass\n-> 2004         return _do_sqrt(x, *args, **kwds)\n   2005 \n   2006 # register sqrt in pynac symbol_table for conversion back from other systems\n\n/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/functions/other.pyc in _do_sqrt(x, prec, extend, all)\n   1903             z = I\n   1904         else:\n-> 1905             z = SR(x) ** one_half\n   1906 \n   1907         if all:\n\n/home/lubicz/sagemath/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__pow__ (/home/lubicz/sagemath/sage/src/build/cythonized/sage/symbolic/expression.cpp:25800)()\n   3882                            relational_operator(base._gobj))\n   3883         else:\n-> 3884             x = g_pow(base._gobj, nexp._gobj)\n   3885         return new_Expression_from_GEx(base._parent, x)\n   3886 \n\n/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/rings/padics/CR_template.pxi in sage.rings.padics.qadic_flint_CR.CRElement.__pow__ (/home/lubicz/sagemath/sage/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:20012)()\n    672         elif exact_exp:\n    673             # exact_pow_helper is defined in padic_template_element.pxi\n--> 674             right = exact_pow_helper(&ans.relprec, self.relprec, _right, self.prime_pow)\n    675             if ans.relprec > self.prime_pow.ram_prec_cap:\n    676                 ans.relprec = self.prime_pow.ram_prec_cap\n\n/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/rings/padics/padic_template_element.pxi in sage.rings.padics.qadic_flint_CR.exact_pow_helper (/home/lubicz/sagemath/sage/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:15216)()\n    545         exp_val = mpz_get_si((<Integer>right.valuation(p)).value)\n    546     elif isinstance(_right, Rational):\n--> 547         raise NotImplementedError\n    548     ansrelprec[0] = relprec + exp_val\n    549     if exp_val > 0 and mpz_cmp_ui(p.value, 2) == 0 and relprec == 1:\n\nNotImplementedError: \n```\n\nAnother example which motivates my tickets since I am implementing in sagemath an improved version of the AGM algorithm :\n\n```\nsage: R.<x>=Zq(2^10, 20)\nsage: sqrt(1+8*x)\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-10-25d75e2ffffe> in <module>()\n----> 1 sqrt(Integer(1)+Integer(8)*x)\n\n/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/functions/other.pyc in sqrt(x, *args, **kwds)\n   2002         except (AttributeError, TypeError):\n   2003             pass\n-> 2004         return _do_sqrt(x, *args, **kwds)\n   2005 \n   2006 # register sqrt in pynac symbol_table for conversion back from other systems\n\n/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/functions/other.pyc in _do_sqrt(x, prec, extend, all)\n   1903             z = I\n   1904         else:\n-> 1905             z = SR(x) ** one_half\n   1906 \n   1907         if all:\n\n/home/lubicz/sagemath/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__pow__ (/home/lubicz/sagemath/sage/src/build/cythonized/sage/symbolic/expression.cpp:25800)()\n   3882                            relational_operator(base._gobj))\n   3883         else:\n-> 3884             x = g_pow(base._gobj, nexp._gobj)\n   3885         return new_Expression_from_GEx(base._parent, x)\n   3886 \n\n/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/rings/padics/CR_template.pxi in sage.rings.padics.qadic_flint_CR.CRElement.__pow__ (/home/lubicz/sagemath/sage/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:20012)()\n    672         elif exact_exp:\n    673             # exact_pow_helper is defined in padic_template_element.pxi\n--> 674             right = exact_pow_helper(&ans.relprec, self.relprec, _right, self.prime_pow)\n    675             if ans.relprec > self.prime_pow.ram_prec_cap:\n    676                 ans.relprec = self.prime_pow.ram_prec_cap\n\n/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/rings/padics/padic_template_element.pxi in sage.rings.padics.qadic_flint_CR.exact_pow_helper (/home/lubicz/sagemath/sage/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:15216)()\n    545         exp_val = mpz_get_si((<Integer>right.valuation(p)).value)\n    546     elif isinstance(_right, Rational):\n--> 547         raise NotImplementedError\n    548     ansrelprec[0] = relprec + exp_val\n    549     if exp_val > 0 and mpz_cmp_ui(p.value, 2) == 0 and relprec == 1:\n\nNotImplementedError: \n```",
    "created_at": "2017-08-28T07:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353049",
    "user": "https://github.com/dlubicz"
}
```

<a id='comment:2'></a>
If I am not mistaken, with the version of sage I am working with (8.0.rc0), the square root is working fine for elements of Qp (even if Qp is embeded in an extension) but not for elements of an extension of Qp (not in Q_p). Continuing your example :

```
sage: a=L.gen()
sage: sqrt(4+19*a)
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-5-842761a28969> in <module>()
----> 1 sqrt(Integer(4)+Integer(19)*a)

/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/functions/other.pyc in sqrt(x, *args, **kwds)
   2002         except (AttributeError, TypeError):
   2003             pass
-> 2004         return _do_sqrt(x, *args, **kwds)
   2005 
   2006 # register sqrt in pynac symbol_table for conversion back from other systems

/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/functions/other.pyc in _do_sqrt(x, prec, extend, all)
   1903             z = I
   1904         else:
-> 1905             z = SR(x) ** one_half
   1906 
   1907         if all:

/home/lubicz/sagemath/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__pow__ (/home/lubicz/sagemath/sage/src/build/cythonized/sage/symbolic/expression.cpp:25800)()
   3882                            relational_operator(base._gobj))
   3883         else:
-> 3884             x = g_pow(base._gobj, nexp._gobj)
   3885         return new_Expression_from_GEx(base._parent, x)
   3886 

/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/rings/padics/CR_template.pxi in sage.rings.padics.qadic_flint_CR.CRElement.__pow__ (/home/lubicz/sagemath/sage/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:20012)()
    672         elif exact_exp:
    673             # exact_pow_helper is defined in padic_template_element.pxi
--> 674             right = exact_pow_helper(&ans.relprec, self.relprec, _right, self.prime_pow)
    675             if ans.relprec > self.prime_pow.ram_prec_cap:
    676                 ans.relprec = self.prime_pow.ram_prec_cap

/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/rings/padics/padic_template_element.pxi in sage.rings.padics.qadic_flint_CR.exact_pow_helper (/home/lubicz/sagemath/sage/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:15216)()
    545         exp_val = mpz_get_si((<Integer>right.valuation(p)).value)
    546     elif isinstance(_right, Rational):
--> 547         raise NotImplementedError
    548     ansrelprec[0] = relprec + exp_val
    549     if exp_val > 0 and mpz_cmp_ui(p.value, 2) == 0 and relprec == 1:

NotImplementedError: 
```

Another example which motivates my tickets since I am implementing in sagemath an improved version of the AGM algorithm :

```
sage: R.<x>=Zq(2^10, 20)
sage: sqrt(1+8*x)
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-10-25d75e2ffffe> in <module>()
----> 1 sqrt(Integer(1)+Integer(8)*x)

/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/functions/other.pyc in sqrt(x, *args, **kwds)
   2002         except (AttributeError, TypeError):
   2003             pass
-> 2004         return _do_sqrt(x, *args, **kwds)
   2005 
   2006 # register sqrt in pynac symbol_table for conversion back from other systems

/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/functions/other.pyc in _do_sqrt(x, prec, extend, all)
   1903             z = I
   1904         else:
-> 1905             z = SR(x) ** one_half
   1906 
   1907         if all:

/home/lubicz/sagemath/sage/src/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression.__pow__ (/home/lubicz/sagemath/sage/src/build/cythonized/sage/symbolic/expression.cpp:25800)()
   3882                            relational_operator(base._gobj))
   3883         else:
-> 3884             x = g_pow(base._gobj, nexp._gobj)
   3885         return new_Expression_from_GEx(base._parent, x)
   3886 

/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/rings/padics/CR_template.pxi in sage.rings.padics.qadic_flint_CR.CRElement.__pow__ (/home/lubicz/sagemath/sage/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:20012)()
    672         elif exact_exp:
    673             # exact_pow_helper is defined in padic_template_element.pxi
--> 674             right = exact_pow_helper(&ans.relprec, self.relprec, _right, self.prime_pow)
    675             if ans.relprec > self.prime_pow.ram_prec_cap:
    676                 ans.relprec = self.prime_pow.ram_prec_cap

/home/lubicz/sagemath/sage/local/lib/python2.7/site-packages/sage/rings/padics/padic_template_element.pxi in sage.rings.padics.qadic_flint_CR.exact_pow_helper (/home/lubicz/sagemath/sage/src/build/cythonized/sage/rings/padics/qadic_flint_CR.c:15216)()
    545         exp_val = mpz_get_si((<Integer>right.valuation(p)).value)
    546     elif isinstance(_right, Rational):
--> 547         raise NotImplementedError
    548     ansrelprec[0] = relprec + exp_val
    549     if exp_val > 0 and mpz_cmp_ui(p.value, 2) == 0 and relprec == 1:

NotImplementedError: 
```



---

archive/issue_comments_353050.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [@dlubicz](#comment%3A2):\n> If I am not mistaken, with the version of sage I am working with (8.0.rc0), the square root is working fine for elements of Qp (even if Qp is embeded in an extension) but not for elements of an extension of Qp (not in Q_p). \n\nI agree.  The current implementation just calls off to Pari (see line 2774 in `padic_generic_element.pyx`).  It would be good if we could have a native implementation that worked for general extensions (not just unramified ones).",
    "created_at": "2017-08-28T08:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353050",
    "user": "https://github.com/roed314"
}
```

<a id='comment:3'></a>
Replying to [@dlubicz](#comment%3A2):
> If I am not mistaken, with the version of sage I am working with (8.0.rc0), the square root is working fine for elements of Qp (even if Qp is embeded in an extension) but not for elements of an extension of Qp (not in Q_p). 

I agree.  The current implementation just calls off to Pari (see line 2774 in `padic_generic_element.pyx`).  It would be good if we could have a native implementation that worked for general extensions (not just unramified ones).



---

archive/issue_comments_353051.json:
```json
{
    "body": "**Branch:** [u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields)",
    "created_at": "2018-03-01T15:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353051",
    "user": "https://github.com/dlubicz"
}
```

**Branch:** [u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields)



---

archive/issue_comments_353052.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e64d891c19b4b5bb1b2b8d666f16f02ad405c67e\">e64d891</a></td><td><code>added square for unramified 2-adic fields</code></td></tr></table>\n",
    "created_at": "2018-03-01T15:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353052",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e64d891c19b4b5bb1b2b8d666f16f02ad405c67e">e64d891</a></td><td><code>added square for unramified 2-adic fields</code></td></tr></table>




---

archive/issue_comments_353053.json:
```json
{
    "body": "**Commit:** [e64d891c19b4b5bb1b2b8d666f16f02ad405c67e](https://github.com/sagemath/sagetrac-mirror/commit/e64d891c19b4b5bb1b2b8d666f16f02ad405c67e)",
    "created_at": "2018-03-01T15:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353053",
    "user": "https://github.com/sagetrac-git"
}
```

**Commit:** [e64d891c19b4b5bb1b2b8d666f16f02ad405c67e](https://github.com/sagemath/sagetrac-mirror/commit/e64d891c19b4b5bb1b2b8d666f16f02ad405c67e)



---

archive/issue_comments_353054.json:
```json
{
    "body": "**Changing branch** from \"[u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields)\" to \"[u/roed/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/ramified_extensions_of_general_p_adic_rings_and_fields)\".",
    "created_at": "2018-03-01T15:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353054",
    "user": "https://github.com/roed314"
}
```

**Changing branch** from "[u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields)" to "[u/roed/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/ramified_extensions_of_general_p_adic_rings_and_fields)".



---

archive/issue_comments_353055.json:
```json
{
    "body": "**Changing commit** from \"[e64d891c19b4b5bb1b2b8d666f16f02ad405c67e](https://github.com/sagemath/sagetrac-mirror/commit/e64d891c19b4b5bb1b2b8d666f16f02ad405c67e)\" to \"[e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d](https://github.com/sagemath/sagetrac-mirror/commit/e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d)\".",
    "created_at": "2018-03-01T15:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353055",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e64d891c19b4b5bb1b2b8d666f16f02ad405c67e](https://github.com/sagemath/sagetrac-mirror/commit/e64d891c19b4b5bb1b2b8d666f16f02ad405c67e)" to "[e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d](https://github.com/sagemath/sagetrac-mirror/commit/e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d)".



---

archive/issue_comments_353056.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce61f647325dd0cd2b9f56e73cd6c9c0f25855f2\">ce61f64</a></td><td><code>Improve base ring injections for relative extensions of p-adic fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16477d36802ae669a86758ccbbbb7c24d97ec354\">16477d3</a></td><td><code>Make conversion from residue field work for two-step extensions of p-adics</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c7cc7131c9b5d5843cb0fd74a47944658586efb\">1c7cc71</a></td><td><code>Fix typo in section method for base ring injection in p-adic two-step extensions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8be1504ea508f635759701240dc4dc911546e29d\">8be1504</a></td><td><code>Fix bugs in creduce and ccoefficients for two-step p-adic extensions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d53df12cab4bc24bb9ed12d31466ecddf2a3dab7\">d53df12</a></td><td><code>Add coerce_list back in to the `_populate_coercion_lists_` call in pAdicExtensionGeneric.__init__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e68beeecf94f4dac71ac50f6e05bee5bd85280ff\">e68beee</a></td><td><code>Fix some p-adic doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/635021af851aac33b40cba44301e5339337023cd\">635021a</a></td><td><code>Change _poly_rep to always return the polynomial representing the element, not the unit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67c1f149e0ea8d9a758a7396d25ec6eff7b23200\">67c1f14</a></td><td><code>Change the internal base ring for two-step extensions to not show precision when printing, fix bug in base ring coercion</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8939981e4b02ac12b86f943d93a8baef25e9af51\">8939981</a></td><td><code>Fix problems in expansion code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d\">e3a1c86</a></td><td><code>Merge commit '8939981e4b02ac12b86f943d93a8baef25e9af51' of git://trac.sagemath.org/sage into t/23218/general_extensions</code></td></tr></table>\n",
    "created_at": "2018-03-01T15:46:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353056",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce61f647325dd0cd2b9f56e73cd6c9c0f25855f2">ce61f64</a></td><td><code>Improve base ring injections for relative extensions of p-adic fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16477d36802ae669a86758ccbbbb7c24d97ec354">16477d3</a></td><td><code>Make conversion from residue field work for two-step extensions of p-adics</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c7cc7131c9b5d5843cb0fd74a47944658586efb">1c7cc71</a></td><td><code>Fix typo in section method for base ring injection in p-adic two-step extensions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8be1504ea508f635759701240dc4dc911546e29d">8be1504</a></td><td><code>Fix bugs in creduce and ccoefficients for two-step p-adic extensions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d53df12cab4bc24bb9ed12d31466ecddf2a3dab7">d53df12</a></td><td><code>Add coerce_list back in to the `_populate_coercion_lists_` call in pAdicExtensionGeneric.__init__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e68beeecf94f4dac71ac50f6e05bee5bd85280ff">e68beee</a></td><td><code>Fix some p-adic doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/635021af851aac33b40cba44301e5339337023cd">635021a</a></td><td><code>Change _poly_rep to always return the polynomial representing the element, not the unit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67c1f149e0ea8d9a758a7396d25ec6eff7b23200">67c1f14</a></td><td><code>Change the internal base ring for two-step extensions to not show precision when printing, fix bug in base ring coercion</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8939981e4b02ac12b86f943d93a8baef25e9af51">8939981</a></td><td><code>Fix problems in expansion code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d">e3a1c86</a></td><td><code>Merge commit '8939981e4b02ac12b86f943d93a8baef25e9af51' of git://trac.sagemath.org/sage into t/23218/general_extensions</code></td></tr></table>




---

archive/issue_comments_353057.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e64d891c19b4b5bb1b2b8d666f16f02ad405c67e\">e64d891</a></td><td><code>added square for unramified 2-adic fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65f28536ad731c289db6a150a200d179c4f80647\">65f2853</a></td><td><code>Merge commit 'e64d891c19b4b5bb1b2b8d666f16f02ad405c67e' of git://trac.sagemath.org/sage into t/23344/sqrt_2</code></td></tr></table>\n",
    "created_at": "2018-03-01T15:52:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353057",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e64d891c19b4b5bb1b2b8d666f16f02ad405c67e">e64d891</a></td><td><code>added square for unramified 2-adic fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65f28536ad731c289db6a150a200d179c4f80647">65f2853</a></td><td><code>Merge commit 'e64d891c19b4b5bb1b2b8d666f16f02ad405c67e' of git://trac.sagemath.org/sage into t/23344/sqrt_2</code></td></tr></table>




---

archive/issue_comments_353058.json:
```json
{
    "body": "**Changing commit** from \"[e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d](https://github.com/sagemath/sagetrac-mirror/commit/e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d)\" to \"[65f28536ad731c289db6a150a200d179c4f80647](https://github.com/sagemath/sagetrac-mirror/commit/65f28536ad731c289db6a150a200d179c4f80647)\".",
    "created_at": "2018-03-01T15:52:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353058",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d](https://github.com/sagemath/sagetrac-mirror/commit/e3a1c866f8fa3bc534e3434ab2ca066d470b5d5d)" to "[65f28536ad731c289db6a150a200d179c4f80647](https://github.com/sagemath/sagetrac-mirror/commit/65f28536ad731c289db6a150a200d179c4f80647)".



---

archive/issue_comments_353059.json:
```json
{
    "body": "**Changing branch** from \"[u/roed/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/ramified_extensions_of_general_p_adic_rings_and_fields)\" to \"[u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields)\".",
    "created_at": "2018-03-01T15:57:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353059",
    "user": "https://github.com/dlubicz"
}
```

**Changing branch** from "[u/roed/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/ramified_extensions_of_general_p_adic_rings_and_fields)" to "[u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields)".



---

archive/issue_comments_353060.json:
```json
{
    "body": "**Changing branch** from \"[u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields)\" to \"[u/roed/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/ramified_extensions_of_general_p_adic_rings_and_fields)\".",
    "created_at": "2018-03-01T15:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353060",
    "user": "https://github.com/roed314"
}
```

**Changing branch** from "[u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/ramified_extensions_of_general_p_adic_rings_and_fields)" to "[u/roed/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/ramified_extensions_of_general_p_adic_rings_and_fields)".



---

archive/issue_comments_353061.json:
```json
{
    "body": "**Changing branch** from \"[u/roed/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/ramified_extensions_of_general_p_adic_rings_and_fields)\" to \"[u/roed/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/23344/2adic_sqrt)\".",
    "created_at": "2018-03-01T16:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353061",
    "user": "https://github.com/roed314"
}
```

**Changing branch** from "[u/roed/ramified_extensions_of_general_p_adic_rings_and_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/ramified_extensions_of_general_p_adic_rings_and_fields)" to "[u/roed/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/23344/2adic_sqrt)".



---

archive/issue_comments_353062.json:
```json
{
    "body": "<a id='comment:12'></a>\nSeveral comments:\n\n- you don't need your function `_artin_schreier` since Sage has already methods (e.g. `roots`) for solving algebraic equations in finite fields\n\n- in the `square_root` method, `prec` shouldn't be the precision cap of the parent but the actual precision of the element, no?\n\n- in the `square_root` method, use the `sqrt` method for computing the square root modulo p (by the way, I don't understand why this part is needed)\n\n- `ceil((prec+1)/2.0)` is also `1 + prec // 2`, isn't it?\n\n- I would say that our recursive implementation is slower that an iterative one, but I'm not sure\n\n- maybe, you could at the same time complete the documentation of the method `sqrt`",
    "created_at": "2018-03-02T13:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353062",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:12'></a>
Several comments:

- you don't need your function `_artin_schreier` since Sage has already methods (e.g. `roots`) for solving algebraic equations in finite fields

- in the `square_root` method, `prec` shouldn't be the precision cap of the parent but the actual precision of the element, no?

- in the `square_root` method, use the `sqrt` method for computing the square root modulo p (by the way, I don't understand why this part is needed)

- `ceil((prec+1)/2.0)` is also `1 + prec // 2`, isn't it?

- I would say that our recursive implementation is slower that an iterative one, but I'm not sure

- maybe, you could at the same time complete the documentation of the method `sqrt`



---

archive/issue_comments_353063.json:
```json
{
    "body": "<a id='comment:13'></a>\nBy the way, this ticket only implements `sqrt` for unramified extensions of `Q2`, is that right? (It's not what is written in the description of the ticket.)\n\n```\n    sage: R.<a> = Zq(5^2)\n    sage: sqrt(1+5*a)\n    Traceback (most recent call last):\n    ...\n    NotImplementedError\n```",
    "created_at": "2018-03-08T20:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353063",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:13'></a>
By the way, this ticket only implements `sqrt` for unramified extensions of `Q2`, is that right? (It's not what is written in the description of the ticket.)

```
    sage: R.<a> = Zq(5^2)
    sage: sqrt(1+5*a)
    Traceback (most recent call last):
    ...
    NotImplementedError
```



---

archive/issue_comments_353064.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@xcaruso](#comment%3A13):\n> By the way, this ticket only implements `sqrt` for unramified extensions of `Q2`, is that right? (It's not what is written in the description of the ticket.)\n\nYeah, I think that's correct.  It would be nice to have it also include an implementation for other primes, but that's not currently in the code.",
    "created_at": "2018-03-08T20:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353064",
    "user": "https://github.com/roed314"
}
```

<a id='comment:14'></a>
Replying to [@xcaruso](#comment%3A13):
> By the way, this ticket only implements `sqrt` for unramified extensions of `Q2`, is that right? (It's not what is written in the description of the ticket.)

Yeah, I think that's correct.  It would be nice to have it also include an implementation for other primes, but that's not currently in the code.



---

archive/issue_comments_353065.json:
```json
{
    "body": "<a id='comment:15'></a>\nMy answer to the first comments of Xavier: \\\\\n1) artin schreier is very efficient to solve equations of the form \nx2=ax+b by using a square and multiply type algorithm it shoud perform in ln(n)2 (where n is the degree of Q_q / Q_p) operations in Q_2. I don't know what is the algorithm implemented in roots but it should be less efficient, no ?\\\\\n\n2) yes I will make the change \\\\\n3) I have search through the square_root method and I could find only to lines with the keyword sqrt : \n* ans = self.parent()(self.__pari__().sqrt())\n*  z = self._inv_sqrt(prec)\nthe first one is for calling the pari implementation and the second one is a call to the inverse square root method.\\\\\n4) yes I will make the change\\\\\n5) ok\\\\\n6) Ok \\\\\n7) I will extend the implementation for odd primes p.\nThanks for your comments and you help !",
    "created_at": "2018-03-08T20:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353065",
    "user": "https://github.com/dlubicz"
}
```

<a id='comment:15'></a>
My answer to the first comments of Xavier: \\
1) artin schreier is very efficient to solve equations of the form 
x2=ax+b by using a square and multiply type algorithm it shoud perform in ln(n)2 (where n is the degree of Q_q / Q_p) operations in Q_2. I don't know what is the algorithm implemented in roots but it should be less efficient, no ?\\

2) yes I will make the change \\
3) I have search through the square_root method and I could find only to lines with the keyword sqrt : 
* ans = self.parent()(self.__pari__().sqrt())
*  z = self._inv_sqrt(prec)
the first one is for calling the pari implementation and the second one is a call to the inverse square root method.\\
4) yes I will make the change\\
5) ok\\
6) Ok \\
7) I will extend the implementation for odd primes p.
Thanks for your comments and you help !



---

archive/issue_comments_353066.json:
```json
{
    "body": "**Changing branch** from \"[u/roed/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/23344/2adic_sqrt)\" to \"[u/caruso/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/23344/2adic_sqrt)\".",
    "created_at": "2018-03-08T22:57:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353066",
    "user": "https://github.com/xcaruso"
}
```

**Changing branch** from "[u/roed/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/23344/2adic_sqrt)" to "[u/caruso/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/23344/2adic_sqrt)".



---

archive/issue_comments_353067.json:
```json
{
    "body": "**Changing commit** from \"[65f28536ad731c289db6a150a200d179c4f80647](https://github.com/sagemath/sagetrac-mirror/commit/65f28536ad731c289db6a150a200d179c4f80647)\" to \"[61ba7013effe7fd0365f999562afc11e2386142e](https://github.com/sagemath/sagetrac-mirror/commit/61ba7013effe7fd0365f999562afc11e2386142e)\".",
    "created_at": "2018-03-08T23:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353067",
    "user": "https://github.com/xcaruso"
}
```

**Changing commit** from "[65f28536ad731c289db6a150a200d179c4f80647](https://github.com/sagemath/sagetrac-mirror/commit/65f28536ad731c289db6a150a200d179c4f80647)" to "[61ba7013effe7fd0365f999562afc11e2386142e](https://github.com/sagemath/sagetrac-mirror/commit/61ba7013effe7fd0365f999562afc11e2386142e)".



---

archive/issue_comments_353068.json:
```json
{
    "body": "<a id='comment:17'></a>\nI've pushed a new implementation which works over any extension of `Qp` for p > 2 and any unramified extension of `Q2` (the case of ramified extensions of `Q2` is much more subtle).\n\nPS: I've deleted your code; feel free to revert my changes if you think that it's appropriate.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/830dbba13baecfcc169d7295b4aa65c8134e6780\">830dbba</a></td><td><code>Merge branch 'develop' into t/23344/23344/2adic_sqrt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61ba7013effe7fd0365f999562afc11e2386142e\">61ba701</a></td><td><code>square root over almost all p-adic fields (except ramified extension of Q2)</code></td></tr></table>\n",
    "created_at": "2018-03-08T23:01:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353068",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:17'></a>
I've pushed a new implementation which works over any extension of `Qp` for p > 2 and any unramified extension of `Q2` (the case of ramified extensions of `Q2` is much more subtle).

PS: I've deleted your code; feel free to revert my changes if you think that it's appropriate.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/830dbba13baecfcc169d7295b4aa65c8134e6780">830dbba</a></td><td><code>Merge branch 'develop' into t/23344/23344/2adic_sqrt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61ba7013effe7fd0365f999562afc11e2386142e">61ba701</a></td><td><code>square root over almost all p-adic fields (except ramified extension of Q2)</code></td></tr></table>




---

archive/issue_comments_353069.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88e08b2d5d2956d0c4e33b3f4066478774d691d8\">88e08b2</a></td><td><code>square root for all p-adic fields</code></td></tr></table>\n",
    "created_at": "2018-03-11T19:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353069",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88e08b2d5d2956d0c4e33b3f4066478774d691d8">88e08b2</a></td><td><code>square root for all p-adic fields</code></td></tr></table>




---

archive/issue_comments_353070.json:
```json
{
    "body": "**Changing commit** from \"[61ba7013effe7fd0365f999562afc11e2386142e](https://github.com/sagemath/sagetrac-mirror/commit/61ba7013effe7fd0365f999562afc11e2386142e)\" to \"[88e08b2d5d2956d0c4e33b3f4066478774d691d8](https://github.com/sagemath/sagetrac-mirror/commit/88e08b2d5d2956d0c4e33b3f4066478774d691d8)\".",
    "created_at": "2018-03-11T19:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353070",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[61ba7013effe7fd0365f999562afc11e2386142e](https://github.com/sagemath/sagetrac-mirror/commit/61ba7013effe7fd0365f999562afc11e2386142e)" to "[88e08b2d5d2956d0c4e33b3f4066478774d691d8](https://github.com/sagemath/sagetrac-mirror/commit/88e08b2d5d2956d0c4e33b3f4066478774d691d8)".



---

archive/issue_events_207785.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-03-11T19:20:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207785"
}
```



---

archive/issue_comments_353071.json:
```json
{
    "body": "<a id='comment:19'></a>\nI've extended my implementation to all p-adic fields (including ramified extensions of Q_2).\n\nNeeds review.",
    "created_at": "2018-03-11T19:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353071",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:19'></a>
I've extended my implementation to all p-adic fields (including ramified extensions of Q_2).

Needs review.



---

archive/issue_comments_353072.json:
```json
{
    "body": "**Changing branch** from \"[u/caruso/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/23344/2adic_sqrt)\" to \"[u/lubicz/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/23344/2adic_sqrt)\".",
    "created_at": "2018-03-30T08:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353072",
    "user": "https://github.com/dlubicz"
}
```

**Changing branch** from "[u/caruso/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/23344/2adic_sqrt)" to "[u/lubicz/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/23344/2adic_sqrt)".



---

archive/issue_comments_353073.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/332fe2c09953fd794804d7b4d9437e0c1ae5f059\">332fe2c</a></td><td><code>positive review</code></td></tr></table>\n",
    "created_at": "2018-03-30T08:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353073",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/332fe2c09953fd794804d7b4d9437e0c1ae5f059">332fe2c</a></td><td><code>positive review</code></td></tr></table>




---

archive/issue_comments_353074.json:
```json
{
    "body": "**Changing commit** from \"[88e08b2d5d2956d0c4e33b3f4066478774d691d8](https://github.com/sagemath/sagetrac-mirror/commit/88e08b2d5d2956d0c4e33b3f4066478774d691d8)\" to \"[332fe2c09953fd794804d7b4d9437e0c1ae5f059](https://github.com/sagemath/sagetrac-mirror/commit/332fe2c09953fd794804d7b4d9437e0c1ae5f059)\".",
    "created_at": "2018-03-30T08:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353074",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[88e08b2d5d2956d0c4e33b3f4066478774d691d8](https://github.com/sagemath/sagetrac-mirror/commit/88e08b2d5d2956d0c4e33b3f4066478774d691d8)" to "[332fe2c09953fd794804d7b4d9437e0c1ae5f059](https://github.com/sagemath/sagetrac-mirror/commit/332fe2c09953fd794804d7b4d9437e0c1ae5f059)".



---

archive/issue_comments_353075.json:
```json
{
    "body": "<a id='comment:22'></a>\nIn  \ndef _square_root(self):\n\n- replaced  parent = self.parent() by ring = self.parent()\n- corrected a bug in the computation of Artin-Schreier equation (carac 2).\nPushed the changes on trac.",
    "created_at": "2018-03-30T08:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353075",
    "user": "https://github.com/dlubicz"
}
```

<a id='comment:22'></a>
In  
def _square_root(self):

- replaced  parent = self.parent() by ring = self.parent()
- corrected a bug in the computation of Artin-Schreier equation (carac 2).
Pushed the changes on trac.



---

archive/issue_events_207786.json:
```json
{
    "actor": "https://github.com/dlubicz",
    "created_at": "2018-03-30T12:51:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207786"
}
```



---

archive/issue_events_207787.json:
```json
{
    "actor": "https://github.com/dlubicz",
    "created_at": "2018-03-30T12:51:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207787"
}
```



---

archive/issue_comments_353076.json:
```json
{
    "body": "**Author:** Xavier Caruso",
    "created_at": "2018-03-30T15:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353076",
    "user": "https://github.com/xcaruso"
}
```

**Author:** Xavier Caruso



---

archive/issue_comments_353077.json:
```json
{
    "body": "**Reviewer:** David Lubicz",
    "created_at": "2018-03-30T15:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353077",
    "user": "https://github.com/xcaruso"
}
```

**Reviewer:** David Lubicz



---

archive/issue_events_207788.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-31T06:27:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207788"
}
```



---

archive/issue_events_207789.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-31T06:27:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207789"
}
```



---

archive/issue_comments_353078.json:
```json
{
    "body": "<a id='comment:25'></a>\npatchbot reports failing doctests..",
    "created_at": "2018-03-31T06:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353078",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>
patchbot reports failing doctests..



---

archive/issue_comments_353079.json:
```json
{
    "body": "<a id='comment:26'></a>\nIt looks like many of the failures result from different choices of square root, but I agree that they need to be fixed.",
    "created_at": "2018-03-31T07:06:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353079",
    "user": "https://github.com/roed314"
}
```

<a id='comment:26'></a>
It looks like many of the failures result from different choices of square root, but I agree that they need to be fixed.



---

archive/issue_comments_353080.json:
```json
{
    "body": "**Changing branch** from \"[u/lubicz/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/23344/2adic_sqrt)\" to \"[u/caruso/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/23344/2adic_sqrt)\".",
    "created_at": "2018-03-31T10:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353080",
    "user": "https://github.com/xcaruso"
}
```

**Changing branch** from "[u/lubicz/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/lubicz/23344/2adic_sqrt)" to "[u/caruso/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/23344/2adic_sqrt)".



---

archive/issue_comments_353081.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44ae009b0a2c05e8434604df8a504acd7b60a58f\">44ae009</a></td><td><code>Better ordering of square roots</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30855382d325dabb77a7fb1033fa44ba58fbc2f1\">3085538</a></td><td><code>Redo David's changes (sorry: forgot to pull)</code></td></tr></table>\n",
    "created_at": "2018-03-31T10:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353081",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44ae009b0a2c05e8434604df8a504acd7b60a58f">44ae009</a></td><td><code>Better ordering of square roots</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30855382d325dabb77a7fb1033fa44ba58fbc2f1">3085538</a></td><td><code>Redo David's changes (sorry: forgot to pull)</code></td></tr></table>




---

archive/issue_comments_353082.json:
```json
{
    "body": "**Changing commit** from \"[332fe2c09953fd794804d7b4d9437e0c1ae5f059](https://github.com/sagemath/sagetrac-mirror/commit/332fe2c09953fd794804d7b4d9437e0c1ae5f059)\" to \"[30855382d325dabb77a7fb1033fa44ba58fbc2f1](https://github.com/sagemath/sagetrac-mirror/commit/30855382d325dabb77a7fb1033fa44ba58fbc2f1)\".",
    "created_at": "2018-03-31T10:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353082",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[332fe2c09953fd794804d7b4d9437e0c1ae5f059](https://github.com/sagemath/sagetrac-mirror/commit/332fe2c09953fd794804d7b4d9437e0c1ae5f059)" to "[30855382d325dabb77a7fb1033fa44ba58fbc2f1](https://github.com/sagemath/sagetrac-mirror/commit/30855382d325dabb77a7fb1033fa44ba58fbc2f1)".



---

archive/issue_events_207790.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-03-31T10:42:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207790"
}
```



---

archive/issue_events_207791.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-03-31T10:42:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207791"
}
```



---

archive/issue_comments_353083.json:
```json
{
    "body": "<a id='comment:29'></a>\nAs David pointed out, the issue was due to the choice/ordering of square roots (which was not consistent when precision varies). I fixed it. Let's see what the patchbot says now.",
    "created_at": "2018-03-31T10:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353083",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:29'></a>
As David pointed out, the issue was due to the choice/ordering of square roots (which was not consistent when precision varies). I fixed it. Let's see what the patchbot says now.



---

archive/issue_comments_353084.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This ticket will implement the square root over unramified entensions of Z_p\n+This ticket implements square root over p-adic fields (i.e. finite extension of Qp)\n``````\n",
    "created_at": "2018-03-31T10:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353084",
    "user": "https://github.com/xcaruso"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-This ticket will implement the square root over unramified entensions of Z_p
+This ticket implements square root over p-adic fields (i.e. finite extension of Qp)
``````




---

archive/issue_events_207792.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-31T16:52:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207792"
}
```



---

archive/issue_events_207793.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-31T16:52:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207793"
}
```



---

archive/issue_comments_353085.json:
```json
{
    "body": "<a id='comment:31'></a>\nbot is green",
    "created_at": "2018-03-31T16:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353085",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:31'></a>
bot is green



---

archive/issue_events_207794.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-04-02T10:31:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207794"
}
```



---

archive/issue_events_207795.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-04-02T10:31:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207795"
}
```



---

archive/issue_comments_353086.json:
```json
{
    "body": "<a id='comment:32'></a>\nOK. So, I give a positive review to this ticket again.\nPlease change this if you disagree.",
    "created_at": "2018-04-02T10:31:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353086",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:32'></a>
OK. So, I give a positive review to this ticket again.
Please change this if you disagree.



---

archive/issue_events_207796.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:27:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207796"
}
```



---

archive/issue_events_207797.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d8c74278225f1b45c0383559649532aadfe59b96",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-08T17:27:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23344#event-207797"
}
```



---

archive/issue_comments_353087.json:
```json
{
    "body": "**Changing branch** from \"[u/caruso/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/23344/2adic_sqrt)\" to \"[30855382d325dabb77a7fb1033fa44ba58fbc2f1](https://github.com/sagemath/sagetrac-mirror/commit/30855382d325dabb77a7fb1033fa44ba58fbc2f1)\".",
    "created_at": "2018-05-08T17:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23344",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23344#issuecomment-353087",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/caruso/23344/2adic_sqrt](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/23344/2adic_sqrt)" to "[30855382d325dabb77a7fb1033fa44ba58fbc2f1](https://github.com/sagemath/sagetrac-mirror/commit/30855382d325dabb77a7fb1033fa44ba58fbc2f1)".
