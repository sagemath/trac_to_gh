# Issue 23919: Sage library: standardize on C99 and C++11

archive/issues_023682.json:
```json
{
    "assignees": [],
    "body": "Fix a default version of the C and C++ standard to compile the Sage library with and avoid GNU extensions.\n\nThe reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14, all with GNU extensions, and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.\n\nI suggest to default to C99 and C++11 because those are the versions which are already explicitly listed in a few places. So choosing those versions would also reduce some clutter in `module_list.py`. And given that we can already use `-std=c99` and `-std=c++11`, we know that our compilers support that.\n\nThis breaks for the lcalc package due to the known issue #23341: we add `-std=gnu++98` for that specific module.\n\nDepends on #22886\n\nDepends on #24029\n\n**CC:**  @kiwifb\n\n**Branch/Commit:** [4ef7f748d60c421f1573d07b6ff582ddb01314b8](https://github.com/sagemath/sagetrac-mirror/commit/4ef7f748d60c421f1573d07b6ff582ddb01314b8)\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/23919\n\n",
    "closed_at": "2017-11-01T18:07:44Z",
    "created_at": "2017-09-22T11:39:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sage library: standardize on C99 and C++11",
    "type": "issue",
    "updated_at": "2017-11-01T18:07:44Z",
    "url": "https://github.com/sagemath/sage/issues/23919",
    "user": "https://github.com/jdemeyer"
}
```
Fix a default version of the C and C++ standard to compile the Sage library with and avoid GNU extensions.

The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14, all with GNU extensions, and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.

I suggest to default to C99 and C++11 because those are the versions which are already explicitly listed in a few places. So choosing those versions would also reduce some clutter in `module_list.py`. And given that we can already use `-std=c99` and `-std=c++11`, we know that our compilers support that.

This breaks for the lcalc package due to the known issue #23341: we add `-std=gnu++98` for that specific module.

Depends on #22886

Depends on #24029

**CC:**  @kiwifb

**Branch/Commit:** [4ef7f748d60c421f1573d07b6ff582ddb01314b8](https://github.com/sagemath/sagetrac-mirror/commit/4ef7f748d60c421f1573d07b6ff582ddb01314b8)

**Reviewer:** François Bissey

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/23919





---

archive/issue_events_288817.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-22T11:39:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288817"
}
```



---

archive/issue_events_288818.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-22T11:39:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "08517b",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288818"
}
```



---

archive/issue_events_288819.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-22T11:39:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288819"
}
```



---

archive/issue_comments_363548.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/sage_library__standardize_on_c99_and_c__11](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/sage_library__standardize_on_c99_and_c__11)",
    "created_at": "2017-09-22T11:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363548",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/sage_library__standardize_on_c99_and_c__11](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/sage_library__standardize_on_c99_and_c__11)



---

archive/issue_comments_363549.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/628b826fdb3b2b0fc67f3f963629f636f3398cd7\">628b826</a></td><td><code>Standardize on C99 and C++11</code></td></tr></table>\n",
    "created_at": "2017-09-22T12:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363549",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'>**Comment 2:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/628b826fdb3b2b0fc67f3f963629f636f3398cd7">628b826</a></td><td><code>Standardize on C99 and C++11</code></td></tr></table>




---

archive/issue_comments_363550.json:
```json
{
    "body": "**Commit:** [628b826fdb3b2b0fc67f3f963629f636f3398cd7](https://github.com/sagemath/sagetrac-mirror/commit/628b826fdb3b2b0fc67f3f963629f636f3398cd7)",
    "created_at": "2017-09-22T12:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363550",
    "user": "https://github.com/kiwifb"
}
```

**Commit:** [628b826fdb3b2b0fc67f3f963629f636f3398cd7](https://github.com/sagemath/sagetrac-mirror/commit/628b826fdb3b2b0fc67f3f963629f636f3398cd7)



---

archive/issue_comments_363551.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/628b826fdb3b2b0fc67f3f963629f636f3398cd7\">628b826</a></td><td><code>Standardize on C99 and C++11</code></td></tr></table>\n",
    "created_at": "2017-09-22T12:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363551",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>**Comment 3:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/628b826fdb3b2b0fc67f3f963629f636f3398cd7">628b826</a></td><td><code>Standardize on C99 and C++11</code></td></tr></table>




---

archive/issue_comments_363552.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,7 @@\n I suggest to fix a default version of the C and C++ standard to compile the Sage library with.\n \n-The reason is that different C/C++ compiler come with different standards as default (older GCC defaults to C89 and C++98, newer GCC default to C11 and C++11 and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.\n+The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14 and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.\n \n I suggest to default to C99 and C++11 because those are the versions which are already explicitly listed in a few places. So choosing those versions would also reduce some clutter in `module_list.py`. And given that we can already use `-std=c99` and `-std=c++11`, we know that our compilers support that.\n+\n+This breaks for the lcalc package due to the known issue #23341.\n``````\n",
    "created_at": "2017-09-22T12:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363552",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,7 @@
 I suggest to fix a default version of the C and C++ standard to compile the Sage library with.
 
-The reason is that different C/C++ compiler come with different standards as default (older GCC defaults to C89 and C++98, newer GCC default to C11 and C++11 and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.
+The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14 and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.
 
 I suggest to default to C99 and C++11 because those are the versions which are already explicitly listed in a few places. So choosing those versions would also reduce some clutter in `module_list.py`. And given that we can already use `-std=c99` and `-std=c++11`, we know that our compilers support that.
+
+This breaks for the lcalc package due to the known issue #23341.
``````




---

archive/issue_comments_363553.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-I suggest to fix a default version of the C and C++ standard to compile the Sage library with.\n+Fix a default version of the C and C++ standard to compile the Sage library with and avoid GNU extensions.\n \n The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14 and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.\n \n``````\n",
    "created_at": "2017-09-22T12:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363553",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-I suggest to fix a default version of the C and C++ standard to compile the Sage library with.
+Fix a default version of the C and C++ standard to compile the Sage library with and avoid GNU extensions.
 
 The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14 and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.
 
``````




---

archive/issue_comments_363554.json:
```json
{
    "body": "**Changing commit** from \"[628b826fdb3b2b0fc67f3f963629f636f3398cd7](https://github.com/sagemath/sagetrac-mirror/commit/628b826fdb3b2b0fc67f3f963629f636f3398cd7)\" to \"[d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708](https://github.com/sagemath/sagetrac-mirror/commit/d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708)\".",
    "created_at": "2017-09-22T12:19:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363554",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[628b826fdb3b2b0fc67f3f963629f636f3398cd7](https://github.com/sagemath/sagetrac-mirror/commit/628b826fdb3b2b0fc67f3f963629f636f3398cd7)" to "[d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708](https://github.com/sagemath/sagetrac-mirror/commit/d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708)".



---

archive/issue_comments_363555.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708\">d25dc54</a></td><td><code>Compile lcalc with GNU extensions</code></td></tr></table>\n",
    "created_at": "2017-09-22T12:19:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363555",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>**Comment 5:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708">d25dc54</a></td><td><code>Compile lcalc with GNU extensions</code></td></tr></table>




---

archive/issue_events_288820.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-22T12:29:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288820"
}
```



---

archive/issue_comments_363556.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nWith this ticket, Sage builds fine with GCC 4.9.4 on Gentoo Linux x86_64.",
    "created_at": "2017-09-22T12:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363556",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>**Comment 6:**</a>
With this ticket, Sage builds fine with GCC 4.9.4 on Gentoo Linux x86_64.



---

archive/issue_comments_363557.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nAlso builds fine with GCC 5.3.0 on Ubuntu 16.04.1 LTS ppc64le.",
    "created_at": "2017-09-22T12:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363557",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>**Comment 7:**</a>
Also builds fine with GCC 5.3.0 on Ubuntu 16.04.1 LTS ppc64le.



---

archive/issue_comments_363558.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Fix a default version of the C and C++ standard to compile the Sage library with and avoid GNU extensions.\n \n-The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14 and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.\n+The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14, all with GNU extensions, and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.\n \n I suggest to default to C99 and C++11 because those are the versions which are already explicitly listed in a few places. So choosing those versions would also reduce some clutter in `module_list.py`. And given that we can already use `-std=c99` and `-std=c++11`, we know that our compilers support that.\n \n``````\n",
    "created_at": "2017-09-22T14:55:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363558",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Fix a default version of the C and C++ standard to compile the Sage library with and avoid GNU extensions.
 
-The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14 and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.
+The reason is that different C/C++ compilers come with different standards as default (older GCC defaults to C89 and C++98, newer GCC defaults to C11 and C++14, all with GNU extensions, and I have no idea what Clang does). Explicitly adding a `-std=` flag will hide those differences.
 
 I suggest to default to C99 and C++11 because those are the versions which are already explicitly listed in a few places. So choosing those versions would also reduce some clutter in `module_list.py`. And given that we can already use `-std=c99` and `-std=c++11`, we know that our compilers support that.
 
``````




---

archive/issue_comments_363559.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n \n I suggest to default to C99 and C++11 because those are the versions which are already explicitly listed in a few places. So choosing those versions would also reduce some clutter in `module_list.py`. And given that we can already use `-std=c99` and `-std=c++11`, we know that our compilers support that.\n \n-This breaks for the lcalc package due to the known issue #23341.\n+This breaks for the lcalc package due to the known issue #23341: we add `-std=gnu++98` for that specific module.\n``````\n",
    "created_at": "2017-09-22T14:56:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363559",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 
 I suggest to default to C99 and C++11 because those are the versions which are already explicitly listed in a few places. So choosing those versions would also reduce some clutter in `module_list.py`. And given that we can already use `-std=c99` and `-std=c++11`, we know that our compilers support that.
 
-This breaks for the lcalc package due to the known issue #23341.
+This breaks for the lcalc package due to the known issue #23341: we add `-std=gnu++98` for that specific module.
``````




---

archive/issue_comments_363560.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nI also did something to `ntl` some time ago that was purposely avoiding c++11 so some packages downstream wouldn't break for lack of support. `NTL_THREADS=off` actually disable C++11. When it is on `ntl` uses C++11 threads. Now that all the downstream packages do/can do C++11 we should turn it on, or at a minimum leave the switch alone.",
    "created_at": "2017-09-24T02:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363560",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'>**Comment 10:**</a>
I also did something to `ntl` some time ago that was purposely avoiding c++11 so some packages downstream wouldn't break for lack of support. `NTL_THREADS=off` actually disable C++11. When it is on `ntl` uses C++11 threads. Now that all the downstream packages do/can do C++11 we should turn it on, or at a minimum leave the switch alone.



---

archive/issue_comments_363561.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nReplying to [@kiwifb](#comment%3A10):\n> I also did something to `ntl` some time ago that was purposely avoiding c++11 so some packages downstream wouldn't break for lack of support. `NTL_THREADS=off` actually disable C++11. When it is on `ntl` uses C++11 threads. Now that all the downstream packages do/can do C++11 we should turn it on, or at a minimum leave the switch alone.\n\nSorry, I tried to read this paragraph several times but I don't understand what you mean or how it is related to this ticket.",
    "created_at": "2017-09-25T07:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363561",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'>**Comment 11:**</a>
Replying to [@kiwifb](#comment%3A10):
> I also did something to `ntl` some time ago that was purposely avoiding c++11 so some packages downstream wouldn't break for lack of support. `NTL_THREADS=off` actually disable C++11. When it is on `ntl` uses C++11 threads. Now that all the downstream packages do/can do C++11 we should turn it on, or at a minimum leave the switch alone.

Sorry, I tried to read this paragraph several times but I don't understand what you mean or how it is related to this ticket.



---

archive/issue_comments_363562.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nLet me try again. In one of the upgrade of `ntl` `_I_` purposefully disabled a switch enabling C++11 because `ntl` consumers such as `eclib` and `singular` couldn't use it (as in they would fail to build if it was enabled). \n\nI suggest that stopping to prevent `ntl` from using C++11 construct is in scope for this ticket.",
    "created_at": "2017-09-25T08:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363562",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:12'>**Comment 12:**</a>
Let me try again. In one of the upgrade of `ntl` `_I_` purposefully disabled a switch enabling C++11 because `ntl` consumers such as `eclib` and `singular` couldn't use it (as in they would fail to build if it was enabled). 

I suggest that stopping to prevent `ntl` from using C++11 construct is in scope for this ticket.



---

archive/issue_comments_363563.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nReplying to [@kiwifb](#comment%3A12):\n> I suggest that stopping to prevent `ntl` from using C++11 construct is in scope for this ticket.\n\nThis ticket is only about the Sage library, in other words the Cython modules using those libraries. So are you talking about Cython modules or about the libraries themselves?",
    "created_at": "2017-09-25T13:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363563",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>**Comment 13:**</a>
Replying to [@kiwifb](#comment%3A12):
> I suggest that stopping to prevent `ntl` from using C++11 construct is in scope for this ticket.

This ticket is only about the Sage library, in other words the Cython modules using those libraries. So are you talking about Cython modules or about the libraries themselves?



---

archive/issue_comments_363564.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nStrangely, this leads to doctest failures on `i386`:\n\n```\nsage -t --warn-long 69.4 src/sage/rings/real_double.pyx\n**********************************************************************\nFile \"src/sage/rings/real_double.pyx\", line 2056, in sage.rings.real_double.RealDoubleElement.log10\nFailed example:\n    r = RDF('16.0'); r.log10()\nExpected:\n    1.2041199826559246\nGot:\n    1.2041199826559248\n**********************************************************************\nFile \"src/sage/rings/real_double.pyx\", line 2172, in sage.rings.real_double.RealDoubleElement.exp10\nFailed example:\n    r.exp10()\nExpected:\n    5.011872336272702e-33\nGot:\n    5.0118723362727734e-33\n**********************************************************************\n```",
    "created_at": "2017-09-25T13:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363564",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>**Comment 14:**</a>
Strangely, this leads to doctest failures on `i386`:

```
sage -t --warn-long 69.4 src/sage/rings/real_double.pyx
**********************************************************************
File "src/sage/rings/real_double.pyx", line 2056, in sage.rings.real_double.RealDoubleElement.log10
Failed example:
    r = RDF('16.0'); r.log10()
Expected:
    1.2041199826559246
Got:
    1.2041199826559248
**********************************************************************
File "src/sage/rings/real_double.pyx", line 2172, in sage.rings.real_double.RealDoubleElement.exp10
Failed example:
    r.exp10()
Expected:
    5.011872336272702e-33
Got:
    5.0118723362727734e-33
**********************************************************************
```



---

archive/issue_events_288821.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-25T13:47:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288821"
}
```



---

archive/issue_events_288822.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-25T13:47:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288822"
}
```



---

archive/issue_comments_363565.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nI debugged the `i386` failures. It seems that, with GCC-6.2.0, the literal number `2.30258509299404568402` is treated as `double` with GNU extensions `-std=gnu89` but as `long double` with `-std=c89` (or `-std=c99`, this doesn't matter).",
    "created_at": "2017-09-26T09:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363565",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>**Comment 15:**</a>
I debugged the `i386` failures. It seems that, with GCC-6.2.0, the literal number `2.30258509299404568402` is treated as `double` with GNU extensions `-std=gnu89` but as `long double` with `-std=c89` (or `-std=c99`, this doesn't matter).



---

archive/issue_comments_363566.json:
```json
{
    "body": "**Changing commit** from \"[d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708](https://github.com/sagemath/sagetrac-mirror/commit/d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708)\" to \"[a9f9183d3274b24f6d95515fa2565cb9fde6cfb5](https://github.com/sagemath/sagetrac-mirror/commit/a9f9183d3274b24f6d95515fa2565cb9fde6cfb5)\".",
    "created_at": "2017-09-26T11:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363566",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708](https://github.com/sagemath/sagetrac-mirror/commit/d25dc54e58a8ec9ded0b3a45b6a14d8f87ed1708)" to "[a9f9183d3274b24f6d95515fa2565cb9fde6cfb5](https://github.com/sagemath/sagetrac-mirror/commit/a9f9183d3274b24f6d95515fa2565cb9fde6cfb5)".



---

archive/issue_comments_363567.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9f9183d3274b24f6d95515fa2565cb9fde6cfb5\">a9f9183</a></td><td><code>Use hexadecimal instead of decimal floating-point literals</code></td></tr></table>\n",
    "created_at": "2017-09-26T11:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363567",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>**Comment 16:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9f9183d3274b24f6d95515fa2565cb9fde6cfb5">a9f9183</a></td><td><code>Use hexadecimal instead of decimal floating-point literals</code></td></tr></table>




---

archive/issue_events_288823.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-26T11:21:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288823"
}
```



---

archive/issue_events_288824.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-26T11:21:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288824"
}
```



---

archive/issue_events_288825.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-09-26T20:17:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288825"
}
```



---

archive/issue_events_288826.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-09-26T20:17:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288826"
}
```



---

archive/issue_comments_363568.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nLooks good to me and the bot is green. You talked about that before, how much time and effort would be needed to remove `lcalc` in your opinion? You said `pari` could be used directly instead and `lcalc` is obviously just rotting away.",
    "created_at": "2017-09-26T20:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363568",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'>**Comment 18:**</a>
Looks good to me and the bot is green. You talked about that before, how much time and effort would be needed to remove `lcalc` in your opinion? You said `pari` could be used directly instead and `lcalc` is obviously just rotting away.



---

archive/issue_comments_363569.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nReplying to [@kiwifb](#comment%3A18):\n> how much time and effort would be needed to remove `lcalc` in your opinion?\n\nI think it would be a good project for https://pari.math.u-bordeaux.fr/Events/PARI2018/",
    "created_at": "2017-09-27T09:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363569",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'>**Comment 19:**</a>
Replying to [@kiwifb](#comment%3A18):
> how much time and effort would be needed to remove `lcalc` in your opinion?

I think it would be a good project for https://pari.math.u-bordeaux.fr/Events/PARI2018/



---

archive/issue_events_288827.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-29T22:27:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288827"
}
```



---

archive/issue_events_288828.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-29T22:27:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288828"
}
```



---

archive/issue_comments_363570.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nReviewer name...",
    "created_at": "2017-09-29T22:27:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363570",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'>**Comment 20:**</a>
Reviewer name...



---

archive/issue_comments_363571.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2017-09-30T00:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363571",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** François Bissey



---

archive/issue_events_288829.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-09-30T00:51:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288829"
}
```



---

archive/issue_events_288830.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-09-30T00:51:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288830"
}
```



---

archive/issue_comments_363572.json:
```json
{
    "body": "<a id='comment:22'>**Comment 22:**</a>\nMerge failure",
    "created_at": "2017-10-04T19:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363572",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'>**Comment 22:**</a>
Merge failure



---

archive/issue_events_288831.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-04T19:26:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288831"
}
```



---

archive/issue_events_288832.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-04T19:26:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288832"
}
```



---

archive/issue_comments_363573.json:
```json
{
    "body": "**Changing commit** from \"[a9f9183d3274b24f6d95515fa2565cb9fde6cfb5](https://github.com/sagemath/sagetrac-mirror/commit/a9f9183d3274b24f6d95515fa2565cb9fde6cfb5)\" to \"[729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3](https://github.com/sagemath/sagetrac-mirror/commit/729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3)\".",
    "created_at": "2017-10-05T08:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363573",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[a9f9183d3274b24f6d95515fa2565cb9fde6cfb5](https://github.com/sagemath/sagetrac-mirror/commit/a9f9183d3274b24f6d95515fa2565cb9fde6cfb5)" to "[729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3](https://github.com/sagemath/sagetrac-mirror/commit/729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3)".



---

archive/issue_comments_363574.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48cd83bcd4fe14eafc0a208fff2566656b0a3a5b\">48cd83b</a></td><td><code>fix headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bd969374c03571089426628c100640739ee31bb\">4bd9693</a></td><td><code>Merge commit 'f06d3b365a6927e4fd0b4d0d8bf67299ee13e2d1' into t/22886/22886</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4766e9bceb6bbd4f867f1225e16d5fa81f8334e9\">4766e9b</a></td><td><code>Implement cython() using cythonize()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdbea87b23f5cca49c6a840e73e69d2ce6f06c29\">cdbea87</a></td><td><code>Merge commit '4766e9bceb6bbd4f867f1225e16d5fa81f8334e9' into t/22886/22886</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6700ab33f3844190f9dcfc323492b65188796d85\">6700ab3</a></td><td><code>Fix cython_metaclass header</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3\">729a1a6</a></td><td><code>Merge commit '6700ab33f3844190f9dcfc323492b65188796d85' into t/23919/sage_library__standardize_on_c99_and_c__11</code></td></tr></table>\n",
    "created_at": "2017-10-05T08:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363574",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>**Comment 23:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48cd83bcd4fe14eafc0a208fff2566656b0a3a5b">48cd83b</a></td><td><code>fix headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bd969374c03571089426628c100640739ee31bb">4bd9693</a></td><td><code>Merge commit 'f06d3b365a6927e4fd0b4d0d8bf67299ee13e2d1' into t/22886/22886</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4766e9bceb6bbd4f867f1225e16d5fa81f8334e9">4766e9b</a></td><td><code>Implement cython() using cythonize()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdbea87b23f5cca49c6a840e73e69d2ce6f06c29">cdbea87</a></td><td><code>Merge commit '4766e9bceb6bbd4f867f1225e16d5fa81f8334e9' into t/22886/22886</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6700ab33f3844190f9dcfc323492b65188796d85">6700ab3</a></td><td><code>Fix cython_metaclass header</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3">729a1a6</a></td><td><code>Merge commit '6700ab33f3844190f9dcfc323492b65188796d85' into t/23919/sage_library__standardize_on_c99_and_c__11</code></td></tr></table>




---

archive/issue_comments_363575.json:
```json
{
    "body": "**Dependencies:** #22886",
    "created_at": "2017-10-05T08:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363575",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #22886



---

archive/issue_events_288833.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-05T08:48:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288833"
}
```



---

archive/issue_events_288834.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-05T08:48:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288834"
}
```



---

archive/issue_events_288835.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-07T10:49:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288835"
}
```



---

archive/issue_events_288836.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-07T10:49:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288836"
}
```



---

archive/issue_comments_363576.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nThis breaks on GCC 6.3.0 and 7.2.1, but works on older versions:\n\n```\n[  1/318] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/buildbot/slave/sage_git/build/local/include -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -I/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/include -I/home/buildbot/slave/sage_git/build/src -I/home/buildbot/slave/sage_git/build/src/sage/ext -Ibuild/cythonized -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -c build/cythonized/sage/libs/linbox/linbox_flint_interface.cpp -o build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/linbox/linbox_flint_interface.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -U_LB_DEBUG -DDISABLE_COMMENTATOR -Wall -DNDEBUG -UFFLASFFPACK_DEBUG -D__FFLASFFPACK_HAVE_CBLAS -g -O2 -DFFLAS_COMPILED -DFFPACK_COMPILED -fPIC -mmmx -mpopcnt -msse -msse2 -msse3 -msse4.1 -msse4.2 -mavx -mavx2 -mfma -mbmi -mbmi2 -mfpmath=sse -fabi-version=6 -I/home/buildbot/slave/sage_git/build/local/include/linbox -I/home/buildbot/slave/sage_git/build/local/include -std=c++11\nIn file included from /usr/include/c++/6/bits/move.h:57:0,\n                 from /usr/include/c++/6/bits/nested_exception.h:40,\n                 from /usr/include/c++/6/exception:173,\n                 from /usr/include/c++/6/ios:39,\n                 from /usr/include/c++/6/ostream:38,\n                 from /usr/include/c++/6/iostream:39,\n                 from /home/buildbot/slave/sage_git/build/local/include/linbox/linbox-config.h:45,\n                 from build/cythonized/sage/libs/linbox/linbox_flint_interface.cpp:655:\n/usr/include/c++/6/type_traits: In instantiation of \u2018struct std::make_unsigned<__int128 unsigned>\u2019:\n/home/buildbot/slave/sage_git/build/local/include/givaro/modular-int64.h:46:60:   required from \u2018class Givaro::Modular<long int, __int128 unsigned>\u2019\n/home/buildbot/slave/sage_git/build/local/include/givaro/modular-int64.inl:32:36:   required from here\n/usr/include/c++/6/type_traits:1831:62: error: invalid use of incomplete type \u2018class std::__make_unsigned_selector<__int128 unsigned, false, false>\u2019\n     { typedef typename __make_unsigned_selector<_Tp>::__type type; };\n                                                              ^~~~\n/usr/include/c++/6/type_traits:1788:11: note: declaration of \u2018class std::__make_unsigned_selector<__int128 unsigned, false, false>\u2019\n     class __make_unsigned_selector;\n           ^~~~~~~~~~~~~~~~~~~~~~~~\n/usr/include/c++/6/type_traits: In instantiation of \u2018struct std::make_unsigned<__int128>\u2019:\n/home/buildbot/slave/sage_git/build/local/include/givaro/modular-int64.h:46:60:   required from \u2018class Givaro::Modular<long int, __int128>\u2019\n/home/buildbot/slave/sage_git/build/local/include/givaro/modular-int64.inl:36:35:   required from here\n/usr/include/c++/6/type_traits:1831:62: error: invalid use of incomplete type \u2018class std::__make_unsigned_selector<__int128, false, false>\u2019\n     { typedef typename __make_unsigned_selector<_Tp>::__type type; };\n                                                              ^~~~\n```",
    "created_at": "2017-10-07T10:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363576",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'>**Comment 25:**</a>
This breaks on GCC 6.3.0 and 7.2.1, but works on older versions:

```
[  1/318] gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/home/buildbot/slave/sage_git/build/local/include -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -I/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/numpy/core/include -I/home/buildbot/slave/sage_git/build/src -I/home/buildbot/slave/sage_git/build/src/sage/ext -Ibuild/cythonized -I/home/buildbot/slave/sage_git/build/local/include/python2.7 -c build/cythonized/sage/libs/linbox/linbox_flint_interface.cpp -o build/temp.linux-x86_64-2.7/build/cythonized/sage/libs/linbox/linbox_flint_interface.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -U_LB_DEBUG -DDISABLE_COMMENTATOR -Wall -DNDEBUG -UFFLASFFPACK_DEBUG -D__FFLASFFPACK_HAVE_CBLAS -g -O2 -DFFLAS_COMPILED -DFFPACK_COMPILED -fPIC -mmmx -mpopcnt -msse -msse2 -msse3 -msse4.1 -msse4.2 -mavx -mavx2 -mfma -mbmi -mbmi2 -mfpmath=sse -fabi-version=6 -I/home/buildbot/slave/sage_git/build/local/include/linbox -I/home/buildbot/slave/sage_git/build/local/include -std=c++11
In file included from /usr/include/c++/6/bits/move.h:57:0,
                 from /usr/include/c++/6/bits/nested_exception.h:40,
                 from /usr/include/c++/6/exception:173,
                 from /usr/include/c++/6/ios:39,
                 from /usr/include/c++/6/ostream:38,
                 from /usr/include/c++/6/iostream:39,
                 from /home/buildbot/slave/sage_git/build/local/include/linbox/linbox-config.h:45,
                 from build/cythonized/sage/libs/linbox/linbox_flint_interface.cpp:655:
/usr/include/c++/6/type_traits: In instantiation of ‘struct std::make_unsigned<__int128 unsigned>’:
/home/buildbot/slave/sage_git/build/local/include/givaro/modular-int64.h:46:60:   required from ‘class Givaro::Modular<long int, __int128 unsigned>’
/home/buildbot/slave/sage_git/build/local/include/givaro/modular-int64.inl:32:36:   required from here
/usr/include/c++/6/type_traits:1831:62: error: invalid use of incomplete type ‘class std::__make_unsigned_selector<__int128 unsigned, false, false>’
     { typedef typename __make_unsigned_selector<_Tp>::__type type; };
                                                              ^~~~
/usr/include/c++/6/type_traits:1788:11: note: declaration of ‘class std::__make_unsigned_selector<__int128 unsigned, false, false>’
     class __make_unsigned_selector;
           ^~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/c++/6/type_traits: In instantiation of ‘struct std::make_unsigned<__int128>’:
/home/buildbot/slave/sage_git/build/local/include/givaro/modular-int64.h:46:60:   required from ‘class Givaro::Modular<long int, __int128>’
/home/buildbot/slave/sage_git/build/local/include/givaro/modular-int64.inl:36:35:   required from here
/usr/include/c++/6/type_traits:1831:62: error: invalid use of incomplete type ‘class std::__make_unsigned_selector<__int128, false, false>’
     { typedef typename __make_unsigned_selector<_Tp>::__type type; };
                                                              ^~~~
```



---

archive/issue_comments_363577.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\nI get it too with gcc 6.4.0.",
    "created_at": "2017-10-07T11:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363577",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:26'>**Comment 26:**</a>
I get it too with gcc 6.4.0.



---

archive/issue_comments_363578.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nOK, I diagnosed this.\n\nLinbox really needs GNU extensions, it compiles with `-std=gnu++11` but not with `-std=c++11`.\n\nWhen building Linbox, it checks for C++11 support. With GCC 5.x, a flag is required to add C++11 support. By default, `configure` tries `-std=gnu++11` first. So, the `-std=gnu++11` flag is added to the `CXXFLAGS` of Linbox, which is propagated to the Sage library using the pkgconfig mechanism.\n\nWhen building Linbox with GCC 6 or 7, the default is `-std=gnu++11` (or `-std=gnu++14` but that difference doesn't matter here). So Linbox doesn't add any `-std` flag to `CXXFLAGS`. Now this ticket sees that no `-std` flag is added, so it adds `-std=c++11` which breaks Linbox.",
    "created_at": "2017-10-13T10:06:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363578",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>**Comment 27:**</a>
OK, I diagnosed this.

Linbox really needs GNU extensions, it compiles with `-std=gnu++11` but not with `-std=c++11`.

When building Linbox, it checks for C++11 support. With GCC 5.x, a flag is required to add C++11 support. By default, `configure` tries `-std=gnu++11` first. So, the `-std=gnu++11` flag is added to the `CXXFLAGS` of Linbox, which is propagated to the Sage library using the pkgconfig mechanism.

When building Linbox with GCC 6 or 7, the default is `-std=gnu++11` (or `-std=gnu++14` but that difference doesn't matter here). So Linbox doesn't add any `-std` flag to `CXXFLAGS`. Now this ticket sees that no `-std` flag is added, so it adds `-std=c++11` which breaks Linbox.



---

archive/issue_comments_363579.json:
```json
{
    "body": "<a id='comment:28'>**Comment 28:**</a>\nIt's actually slightly more complicated than that: Linbox actually never stores `-std=gnu++11` in its pkgconfig cflags. The `-std=gnu++11` was being picked up by fflas-ffpack.",
    "created_at": "2017-10-13T12:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363579",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'>**Comment 28:**</a>
It's actually slightly more complicated than that: Linbox actually never stores `-std=gnu++11` in its pkgconfig cflags. The `-std=gnu++11` was being picked up by fflas-ffpack.



---

archive/issue_comments_363580.json:
```json
{
    "body": "**Changing dependencies** from \"#22886\" to \"#22886, #24029\".",
    "created_at": "2017-10-13T13:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363580",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#22886" to "#22886, #24029".



---

archive/issue_events_288837.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-13T13:20:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288837"
}
```



---

archive/issue_events_288838.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-13T13:20:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288838"
}
```



---

archive/issue_comments_363581.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nReplying to [@jdemeyer](#comment%3A28):\n> It's actually slightly more complicated than that: Linbox actually never stores `-std=gnu++11` in its pkgconfig cflags. The `-std=gnu++11` was being picked up by fflas-ffpack.\n\nIt is actually tricky to do because the m4 macros that looks for support for C99 and C++11/14 do not return  a flag. They return a new value for CC/CXX, the needed flag, if any,  is not easily accessible from the macro.",
    "created_at": "2017-10-14T00:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363581",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:30'>**Comment 30:**</a>
Replying to [@jdemeyer](#comment%3A28):
> It's actually slightly more complicated than that: Linbox actually never stores `-std=gnu++11` in its pkgconfig cflags. The `-std=gnu++11` was being picked up by fflas-ffpack.

It is actually tricky to do because the m4 macros that looks for support for C99 and C++11/14 do not return  a flag. They return a new value for CC/CXX, the needed flag, if any,  is not easily accessible from the macro.



---

archive/issue_comments_363582.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nTo make it even worse: Givaro (which is the real culprint here) uses `std=gnu++11` with gcc but switches to `std=c++11` when compiling with clang. This is due to a sequence of bugs as explained there:\nhttps://github.com/linbox-team/givaro/issues/47\n\nSurprinsingly, `--std=c++11` does not make the compilation fail with clang.\nTherefore, one should be carefull not to \"force\" the `gnu++11` flag, although in the context of sage compilation, it may be a safe assumption that we are using gcc.\n\nI take note that Givaro/FFLAS-FFPACK/LinBox should be more consistent in the c++11 flag that they expose in their .pc file. Since LinBox depends on FFLAS which depends on Givaro, I would preferably only state the c++11 flag in Givaro.\nHowever, I was told [1] not to pollute the CFLAGS field in pkgconfig with anything else than preprocessor flags (-I and -D and -U).\n\n[1] https://github.com/linbox-team/givaro/pull/46",
    "created_at": "2017-10-16T14:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363582",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:31'>**Comment 31:**</a>
To make it even worse: Givaro (which is the real culprint here) uses `std=gnu++11` with gcc but switches to `std=c++11` when compiling with clang. This is due to a sequence of bugs as explained there:
https://github.com/linbox-team/givaro/issues/47

Surprinsingly, `--std=c++11` does not make the compilation fail with clang.
Therefore, one should be carefull not to "force" the `gnu++11` flag, although in the context of sage compilation, it may be a safe assumption that we are using gcc.

I take note that Givaro/FFLAS-FFPACK/LinBox should be more consistent in the c++11 flag that they expose in their .pc file. Since LinBox depends on FFLAS which depends on Givaro, I would preferably only state the c++11 flag in Givaro.
However, I was told [1] not to pollute the CFLAGS field in pkgconfig with anything else than preprocessor flags (-I and -D and -U).

[1] https://github.com/linbox-team/givaro/pull/46



---

archive/issue_comments_363583.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nI'm getting this on one particual 32-bit buildbot:\n\n```\n**********************************************************************\nFile \"src/sage/libs/lcalc/lcalc_Lfunction.pyx\", line 197, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function\nFailed example:\n    L.hardy_z_function(2.1).imag().abs() < 1.0e-16\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of  15 in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function\n    [103 tests, 1 failure, 1.06 s]\n----------------------------------------------------------------------\n```\nActual return value is 2.11895733177441e-16. Can you also switch that to # abs tol for better doctest diagnostics?",
    "created_at": "2017-10-29T22:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363583",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'>**Comment 32:**</a>
I'm getting this on one particual 32-bit buildbot:

```
**********************************************************************
File "src/sage/libs/lcalc/lcalc_Lfunction.pyx", line 197, in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function
Failed example:
    L.hardy_z_function(2.1).imag().abs() < 1.0e-16
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  15 in sage.libs.lcalc.lcalc_Lfunction.Lfunction.hardy_z_function
    [103 tests, 1 failure, 1.06 s]
----------------------------------------------------------------------
```
Actual return value is 2.11895733177441e-16. Can you also switch that to # abs tol for better doctest diagnostics?



---

archive/issue_events_288839.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-29T22:45:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288839"
}
```



---

archive/issue_events_288840.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-29T22:45:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288840"
}
```



---

archive/issue_comments_363584.json:
```json
{
    "body": "**Changing commit** from \"[729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3](https://github.com/sagemath/sagetrac-mirror/commit/729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3)\" to \"[4ef7f748d60c421f1573d07b6ff582ddb01314b8](https://github.com/sagemath/sagetrac-mirror/commit/4ef7f748d60c421f1573d07b6ff582ddb01314b8)\".",
    "created_at": "2017-10-30T13:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363584",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3](https://github.com/sagemath/sagetrac-mirror/commit/729a1a653f9e6d4a7c1bb5f4e2e832cd259ac5b3)" to "[4ef7f748d60c421f1573d07b6ff582ddb01314b8](https://github.com/sagemath/sagetrac-mirror/commit/4ef7f748d60c421f1573d07b6ff582ddb01314b8)".



---

archive/issue_comments_363585.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ef7f748d60c421f1573d07b6ff582ddb01314b8\">4ef7f74</a></td><td><code>Improve lcalc doctests</code></td></tr></table>\n",
    "created_at": "2017-10-30T13:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363585",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:33'>**Comment 33:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ef7f748d60c421f1573d07b6ff582ddb01314b8">4ef7f74</a></td><td><code>Improve lcalc doctests</code></td></tr></table>




---

archive/issue_events_288841.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-30T13:38:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288841"
}
```



---

archive/issue_events_288842.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-30T13:38:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288842"
}
```



---

archive/issue_comments_363586.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\nthanks!",
    "created_at": "2017-10-30T14:22:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363586",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'>**Comment 35:**</a>
thanks!



---

archive/issue_events_288843.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-30T14:22:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288843"
}
```



---

archive/issue_events_288844.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-30T14:22:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288844"
}
```



---

archive/issue_events_288845.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-11-01T18:07:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288845"
}
```



---

archive/issue_events_288846.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a62930e0e75405504824d9907b8f8105574f9b8a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-11-01T18:07:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23919#event-288846"
}
```



---

archive/issue_comments_363587.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/sage_library__standardize_on_c99_and_c__11](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/sage_library__standardize_on_c99_and_c__11)\" to \"[4ef7f748d60c421f1573d07b6ff582ddb01314b8](https://github.com/sagemath/sagetrac-mirror/commit/4ef7f748d60c421f1573d07b6ff582ddb01314b8)\".",
    "created_at": "2017-11-01T18:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23919",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23919#issuecomment-363587",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/sage_library__standardize_on_c99_and_c__11](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/sage_library__standardize_on_c99_and_c__11)" to "[4ef7f748d60c421f1573d07b6ff582ddb01314b8](https://github.com/sagemath/sagetrac-mirror/commit/4ef7f748d60c421f1573d07b6ff582ddb01314b8)".
