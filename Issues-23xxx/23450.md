# Issue 23450: Smith form of p-adic matrices

archive/issues_023213.json:
```json
{
    "body": "Currently Smith form are not implemented over inexact rings.\n\nThis ticket provides a (currently unoptimized) implementation of Smith normal form over complete discrete valuation rings/fields (e.g. p-adic rings/fields).\n\nCC:  @roed314 @saraedum tristanvaccon @kedlaya\n\nKeywords: sd87\n\nBranch/Commit: e6f54bb5b0849b7654d645dc63171af9001e7ae9\n\nReviewer: Julian R\u00fcth, David Roe\n\nAuthor: Xavier Caruso, Julian R\u00fcth, David Roe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23450\n\n",
    "closed_at": "2018-05-08T17:27:14Z",
    "created_at": "2017-07-18T04:41:54Z",
    "labels": [
        "component: padics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Smith form of p-adic matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23450",
    "user": "https://github.com/xcaruso"
}
```
Currently Smith form are not implemented over inexact rings.

This ticket provides a (currently unoptimized) implementation of Smith normal form over complete discrete valuation rings/fields (e.g. p-adic rings/fields).

CC:  @roed314 @saraedum tristanvaccon @kedlaya

Keywords: sd87

Branch/Commit: e6f54bb5b0849b7654d645dc63171af9001e7ae9

Reviewer: Julian Rüth, David Roe

Author: Xavier Caruso, Julian Rüth, David Roe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23450





---

archive/issue_comments_443375.json:
```json
{
    "body": "Changing branch from \"\" to \"u/caruso/padic_smith\"",
    "created_at": "2017-07-18T04:42:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443375",
    "user": "https://github.com/xcaruso"
}
```

Changing branch from "" to "u/caruso/padic_smith"



---

archive/issue_comments_443376.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis is great. I was hoping that you would implement this for a while ;)\n\nHave you thought about not creating a separate class for this but implementing it in the base ring (or in the category), i.e., provide `_matrix_smith_form` on the ring/category and call it from the generic matrix code if it is defined (otherwise fall back to the generic implementation). In other words, do what is already done for things like polynomial factorization.\n\nAlso, should this code be used for \"exact\" CDVRs such as the ones backed by absolute number fields?\n\n---\nNew commits:\n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[879f4eb](https://github.com/sagemath/sagetrac-mirror/commit/879f4eb46b700d0d3c4a0779b8293158ea4af298)|`Smith form of a p-adic matrix`|",
    "created_at": "2017-07-18T06:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443376",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:2'></a>
This is great. I was hoping that you would implement this for a while ;)

Have you thought about not creating a separate class for this but implementing it in the base ring (or in the category), i.e., provide `_matrix_smith_form` on the ring/category and call it from the generic matrix code if it is defined (otherwise fall back to the generic implementation). In other words, do what is already done for things like polynomial factorization.

Also, should this code be used for "exact" CDVRs such as the ones backed by absolute number fields?

---
New commits:
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[879f4eb](https://github.com/sagemath/sagetrac-mirror/commit/879f4eb46b700d0d3c4a0779b8293158ea4af298)|`Smith form of a p-adic matrix`|



---

archive/issue_comments_443377.json:
```json
{
    "body": "Changing commit from \"\" to \"879f4eb46b700d0d3c4a0779b8293158ea4af298\"",
    "created_at": "2017-07-18T06:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443377",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "" to "879f4eb46b700d0d3c4a0779b8293158ea4af298"



---

archive/issue_comments_443378.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[595bc11](https://github.com/sagemath/sagetrac-mirror/commit/595bc117c7becc12c9e6afcefcc372b46320384e)|`Code moved into the category`|",
    "created_at": "2017-07-19T04:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443378",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[595bc11](https://github.com/sagemath/sagetrac-mirror/commit/595bc117c7becc12c9e6afcefcc372b46320384e)|`Code moved into the category`|



---

archive/issue_comments_443379.json:
```json
{
    "body": "Changing commit from \"879f4eb46b700d0d3c4a0779b8293158ea4af298\" to \"595bc117c7becc12c9e6afcefcc372b46320384e\"",
    "created_at": "2017-07-19T04:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443379",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "879f4eb46b700d0d3c4a0779b8293158ea4af298" to "595bc117c7becc12c9e6afcefcc372b46320384e"



---

archive/issue_comments_443380.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-19T05:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443380",
    "user": "https://github.com/xcaruso"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_443381.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Currently Smith form are not implemented over inexact rings.\n \n-This ticket provides a (currently unoptimized) implementation of Smith normal form over complete discrete valuation rings/fields (e.g. p-adic rings/fields), together with a new implementation of the method `determinant` making use of Smith normal form and improving this way its behaviour regarding precision.\n+This ticket provides a (currently unoptimized) implementation of Smith normal form over complete discrete valuation rings/fields (e.g. p-adic rings/fields).\n``````\n",
    "created_at": "2017-07-19T05:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443381",
    "user": "https://github.com/xcaruso"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Currently Smith form are not implemented over inexact rings.
 
-This ticket provides a (currently unoptimized) implementation of Smith normal form over complete discrete valuation rings/fields (e.g. p-adic rings/fields), together with a new implementation of the method `determinant` making use of Smith normal form and improving this way its behaviour regarding precision.
+This ticket provides a (currently unoptimized) implementation of Smith normal form over complete discrete valuation rings/fields (e.g. p-adic rings/fields).
``````




---

archive/issue_comments_443382.json:
```json
{
    "body": "<a id='comment:5'></a>\nOk, I've moved the code to the category (CDVF and CDVR) as you suggested.\n\nI've also tried to be more rigourous regarding precision and figured out what is the correct precision on the transformation matrices. (My first implementation was too optimistic.) Actually, it turns out that finding the optimal precision is costly, except in the particular case where the input matrix is given at flat precision (i.e. all the entries are given at the same precision). For this reason, I've overestimated the loss of precision for a general input matrix (by reducing to the case of flat precision).\n\nI've also removed the method that computes the determinant of a matrix because again it only worked for matrices given at flat precision.\n\nThe ticket is ready for review.",
    "created_at": "2017-07-19T05:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443382",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:5'></a>
Ok, I've moved the code to the category (CDVF and CDVR) as you suggested.

I've also tried to be more rigourous regarding precision and figured out what is the correct precision on the transformation matrices. (My first implementation was too optimistic.) Actually, it turns out that finding the optimal precision is costly, except in the particular case where the input matrix is given at flat precision (i.e. all the entries are given at the same precision). For this reason, I've overestimated the loss of precision for a general input matrix (by reducing to the case of flat precision).

I've also removed the method that computes the determinant of a matrix because again it only worked for matrices given at flat precision.

The ticket is ready for review.



---

archive/issue_comments_443383.json:
```json
{
    "body": "Changing commit from \"595bc117c7becc12c9e6afcefcc372b46320384e\" to \"e2cdd995a80e859027ffd5685f1d96cc480d4277\"",
    "created_at": "2017-07-19T20:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443383",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "595bc117c7becc12c9e6afcefcc372b46320384e" to "e2cdd995a80e859027ffd5685f1d96cc480d4277"



---

archive/issue_comments_443384.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[1832757](https://github.com/sagemath/sagetrac-mirror/commit/1832757b3eaa3f1f01e8a8864ed33e697366025b)|`Factorisation of code`|\n|[e2cdd99](https://github.com/sagemath/sagetrac-mirror/commit/e2cdd995a80e859027ffd5685f1d96cc480d4277)|`Small fix`|",
    "created_at": "2017-07-19T20:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[1832757](https://github.com/sagemath/sagetrac-mirror/commit/1832757b3eaa3f1f01e8a8864ed33e697366025b)|`Factorisation of code`|
|[e2cdd99](https://github.com/sagemath/sagetrac-mirror/commit/e2cdd995a80e859027ffd5685f1d96cc480d4277)|`Small fix`|



---

archive/issue_comments_443385.json:
```json
{
    "body": "Changing commit from \"e2cdd995a80e859027ffd5685f1d96cc480d4277\" to \"1fd67fe26e5c1afb90f68127fdbd8a40bd01c75e\"",
    "created_at": "2017-07-20T02:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e2cdd995a80e859027ffd5685f1d96cc480d4277" to "1fd67fe26e5c1afb90f68127fdbd8a40bd01c75e"



---

archive/issue_comments_443386.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[7ae1018](https://github.com/sagemath/sagetrac-mirror/commit/7ae1018f5f63a9082d94ec9876c4ec38451cc340)|`Move relevant code to sage.matrix.matrix_cdv_dense`|\n|[7e73fd2](https://github.com/sagemath/sagetrac-mirror/commit/7e73fd2f9a4ac5b090f72a093ee57df532a1a384)|`Fix import`|\n|[1fd67fe](https://github.com/sagemath/sagetrac-mirror/commit/1fd67fe26e5c1afb90f68127fdbd8a40bd01c75e)|`Add method tracks_precision()`|",
    "created_at": "2017-07-20T02:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443386",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[7ae1018](https://github.com/sagemath/sagetrac-mirror/commit/7ae1018f5f63a9082d94ec9876c4ec38451cc340)|`Move relevant code to sage.matrix.matrix_cdv_dense`|
|[7e73fd2](https://github.com/sagemath/sagetrac-mirror/commit/7e73fd2f9a4ac5b090f72a093ee57df532a1a384)|`Fix import`|
|[1fd67fe](https://github.com/sagemath/sagetrac-mirror/commit/1fd67fe26e5c1afb90f68127fdbd8a40bd01c75e)|`Add method tracks_precision()`|



---

archive/issue_comments_443387.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[1f731ee](https://github.com/sagemath/sagetrac-mirror/commit/1f731ee1a5dfa9af675a7a510a74fb7bb99d24fa)|`Check correctly (hopefully) that precision on input is enough`|\n|[1f07da5](https://github.com/sagemath/sagetrac-mirror/commit/1f07da52c7769205e3549df079699202afbd4195)|`Small fixes`|",
    "created_at": "2017-07-20T05:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[1f731ee](https://github.com/sagemath/sagetrac-mirror/commit/1f731ee1a5dfa9af675a7a510a74fb7bb99d24fa)|`Check correctly (hopefully) that precision on input is enough`|
|[1f07da5](https://github.com/sagemath/sagetrac-mirror/commit/1f07da52c7769205e3549df079699202afbd4195)|`Small fixes`|



---

archive/issue_comments_443388.json:
```json
{
    "body": "Changing commit from \"1fd67fe26e5c1afb90f68127fdbd8a40bd01c75e\" to \"1f07da52c7769205e3549df079699202afbd4195\"",
    "created_at": "2017-07-20T05:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1fd67fe26e5c1afb90f68127fdbd8a40bd01c75e" to "1f07da52c7769205e3549df079699202afbd4195"



---

archive/issue_comments_443389.json:
```json
{
    "body": "<a id='comment:9'></a>\nI think (hope) that this ticket is now *really* ready for review :-)",
    "created_at": "2017-07-20T05:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443389",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:9'></a>
I think (hope) that this ticket is now *really* ready for review :-)



---

archive/issue_comments_443390.json:
```json
{
    "body": "<a id='comment:10'></a>\nI'll try to review this tomorrow.",
    "created_at": "2017-07-20T06:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443390",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:10'></a>
I'll try to review this tomorrow.



---

archive/issue_comments_443391.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Julian R\u00fcth\"",
    "created_at": "2017-07-20T06:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443391",
    "user": "https://github.com/saraedum"
}
```

Changing reviewer from "" to "Julian Rüth"



---

archive/issue_comments_443392.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[55b99df](https://github.com/sagemath/sagetrac-mirror/commit/55b99df7b752c66cf6256b1adf7a7f0951f71808)|`Small fix in lift_to_maximal_precision`|",
    "created_at": "2017-07-20T15:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[55b99df](https://github.com/sagemath/sagetrac-mirror/commit/55b99df7b752c66cf6256b1adf7a7f0951f71808)|`Small fix in lift_to_maximal_precision`|



---

archive/issue_comments_443393.json:
```json
{
    "body": "Changing commit from \"1f07da52c7769205e3549df079699202afbd4195\" to \"55b99df7b752c66cf6256b1adf7a7f0951f71808\"",
    "created_at": "2017-07-20T15:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1f07da52c7769205e3549df079699202afbd4195" to "55b99df7b752c66cf6256b1adf7a7f0951f71808"



---

archive/issue_comments_443394.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[1ea48ac](https://github.com/sagemath/sagetrac-mirror/commit/1ea48acfe280981d969970384e10309a9c8211db)|`Two small bugs fixed`|",
    "created_at": "2017-07-20T16:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443394",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[1ea48ac](https://github.com/sagemath/sagetrac-mirror/commit/1ea48acfe280981d969970384e10309a9c8211db)|`Two small bugs fixed`|



---

archive/issue_comments_443395.json:
```json
{
    "body": "Changing commit from \"55b99df7b752c66cf6256b1adf7a7f0951f71808\" to \"1ea48acfe280981d969970384e10309a9c8211db\"",
    "created_at": "2017-07-20T16:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "55b99df7b752c66cf6256b1adf7a7f0951f71808" to "1ea48acfe280981d969970384e10309a9c8211db"



---

archive/issue_comments_443396.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[65ffbc6](https://github.com/sagemath/sagetrac-mirror/commit/65ffbc6afa1e337deb0d5ec882914624fc9e08e0)|`Use the name \"integral_smith_form\" for matrices over CDVF`|\n|[f27820a](https://github.com/sagemath/sagetrac-mirror/commit/f27820a66d4de7f972f4b59df5b5d53f31463ae1)|`Small fixes`|",
    "created_at": "2017-07-21T00:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443396",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[65ffbc6](https://github.com/sagemath/sagetrac-mirror/commit/65ffbc6afa1e337deb0d5ec882914624fc9e08e0)|`Use the name "integral_smith_form" for matrices over CDVF`|
|[f27820a](https://github.com/sagemath/sagetrac-mirror/commit/f27820a66d4de7f972f4b59df5b5d53f31463ae1)|`Small fixes`|



---

archive/issue_comments_443397.json:
```json
{
    "body": "Changing commit from \"1ea48acfe280981d969970384e10309a9c8211db\" to \"f27820a66d4de7f972f4b59df5b5d53f31463ae1\"",
    "created_at": "2017-07-21T00:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443397",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1ea48acfe280981d969970384e10309a9c8211db" to "f27820a66d4de7f972f4b59df5b5d53f31463ae1"



---

archive/issue_comments_443398.json:
```json
{
    "body": "Changing work_issues from \"\" to \"drop lift_to_maximal_precision\"",
    "created_at": "2017-07-21T04:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443398",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "drop lift_to_maximal_precision"



---

archive/issue_comments_443399.json:
```json
{
    "body": "Changing work_issues from \"drop lift_to_maximal_precision\" to \"\"",
    "created_at": "2017-07-21T15:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443399",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "drop lift_to_maximal_precision" to ""



---

archive/issue_comments_443400.json:
```json
{
    "body": "<a id='comment:15'></a>\nXavier, I am refactoring this a fair bit. Hope you don't mind.",
    "created_at": "2017-07-21T15:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443400",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:15'></a>
Xavier, I am refactoring this a fair bit. Hope you don't mind.



---

archive/issue_comments_443401.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-07-21T15:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443401",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_443402.json:
```json
{
    "body": "Changing branch from \"u/caruso/padic_smith\" to \"u/saraedum/padic_smith\"",
    "created_at": "2017-07-21T15:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443402",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/caruso/padic_smith" to "u/saraedum/padic_smith"



---

archive/issue_comments_443403.json:
```json
{
    "body": "Changing branch from \"u/saraedum/padic_smith\" to \"u/caruso/padic_smith\"",
    "created_at": "2017-07-21T16:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443403",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/saraedum/padic_smith" to "u/caruso/padic_smith"



---

archive/issue_comments_443404.json:
```json
{
    "body": "<a id='comment:17'></a>\n(and sorry, the category idea was a very bad call. I'm fixing it right now.)",
    "created_at": "2017-07-21T16:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443404",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:17'></a>
(and sorry, the category idea was a very bad call. I'm fixing it right now.)



---

archive/issue_comments_443405.json:
```json
{
    "body": "Changing branch from \"u/caruso/padic_smith\" to \"u/saraedum/padic_smith\"",
    "created_at": "2017-07-21T16:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443405",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/caruso/padic_smith" to "u/saraedum/padic_smith"



---

archive/issue_comments_443406.json:
```json
{
    "body": "Changing commit from \"f27820a66d4de7f972f4b59df5b5d53f31463ae1\" to \"e635699dfab09b4ba86ee3f83eb95d0d5f8463dc\"",
    "created_at": "2017-07-21T16:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443406",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "f27820a66d4de7f972f4b59df5b5d53f31463ae1" to "e635699dfab09b4ba86ee3f83eb95d0d5f8463dc"



---

archive/issue_comments_443407.json:
```json
{
    "body": "Changing work_issues from \"\" to \"failing unit tests\"",
    "created_at": "2017-07-21T16:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443407",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "failing unit tests"



---

archive/issue_comments_443408.json:
```json
{
    "body": "<a id='comment:19'></a>\nNew commits:\n|                                                                                                                                          |                                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[8e00041](https://github.com/sagemath/sagetrac-mirror/commit/8e00041a3760917b90af9f0f813a385e56cc604c)|`Replace lift_to_maximal_precision() with lift_to_precision(None)`|\n|[5802a8c](https://github.com/sagemath/sagetrac-mirror/commit/5802a8c3c4e1fb0af27df1cadde76e6b13d46f1b)|`Move Smith Normal Form Code`|\n|[2713b74](https://github.com/sagemath/sagetrac-mirror/commit/2713b74acde71c6941ea85fd3838e4d8af9a7e3c)|`Remove CDV matrix classes`|\n|[ad1632c](https://github.com/sagemath/sagetrac-mirror/commit/ad1632c6e6242add19bdae3ef8de791a546dbbef)|`Implement tracks_precision() on base classes`|\n|[2771757](https://github.com/sagemath/sagetrac-mirror/commit/27717577e95f5601ec221c7ce302028d0cec71f7)|`prettify documentation`|\n|[922ea39](https://github.com/sagemath/sagetrac-mirror/commit/922ea393f882a3ac5e7319fe80fdf8070fd9d35f)|`remove lift_to_maximal_precision`|\n|[e04b26f](https://github.com/sagemath/sagetrac-mirror/commit/e04b26fac5454937a4e348fa272774398d9aabc8)|`remove lift_to_maximal_precision`|\n|[ea1f480](https://github.com/sagemath/sagetrac-mirror/commit/ea1f480000a1ea92e84dacd24370c6fdf354ccec)|`fix doctests`|\n|[7198f2b](https://github.com/sagemath/sagetrac-mirror/commit/7198f2b9eb87b2c5e72308de7fa6edc5c2b1a7e2)|`rebase _matrix_smith_form`|\n|[e635699](https://github.com/sagemath/sagetrac-mirror/commit/e635699dfab09b4ba86ee3f83eb95d0d5f8463dc)|`implement Smith form tests`|",
    "created_at": "2017-07-21T16:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443408",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'></a>
New commits:
|                                                                                                                                          |                                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[8e00041](https://github.com/sagemath/sagetrac-mirror/commit/8e00041a3760917b90af9f0f813a385e56cc604c)|`Replace lift_to_maximal_precision() with lift_to_precision(None)`|
|[5802a8c](https://github.com/sagemath/sagetrac-mirror/commit/5802a8c3c4e1fb0af27df1cadde76e6b13d46f1b)|`Move Smith Normal Form Code`|
|[2713b74](https://github.com/sagemath/sagetrac-mirror/commit/2713b74acde71c6941ea85fd3838e4d8af9a7e3c)|`Remove CDV matrix classes`|
|[ad1632c](https://github.com/sagemath/sagetrac-mirror/commit/ad1632c6e6242add19bdae3ef8de791a546dbbef)|`Implement tracks_precision() on base classes`|
|[2771757](https://github.com/sagemath/sagetrac-mirror/commit/27717577e95f5601ec221c7ce302028d0cec71f7)|`prettify documentation`|
|[922ea39](https://github.com/sagemath/sagetrac-mirror/commit/922ea393f882a3ac5e7319fe80fdf8070fd9d35f)|`remove lift_to_maximal_precision`|
|[e04b26f](https://github.com/sagemath/sagetrac-mirror/commit/e04b26fac5454937a4e348fa272774398d9aabc8)|`remove lift_to_maximal_precision`|
|[ea1f480](https://github.com/sagemath/sagetrac-mirror/commit/ea1f480000a1ea92e84dacd24370c6fdf354ccec)|`fix doctests`|
|[7198f2b](https://github.com/sagemath/sagetrac-mirror/commit/7198f2b9eb87b2c5e72308de7fa6edc5c2b1a7e2)|`rebase _matrix_smith_form`|
|[e635699](https://github.com/sagemath/sagetrac-mirror/commit/e635699dfab09b4ba86ee3f83eb95d0d5f8463dc)|`implement Smith form tests`|



---

archive/issue_comments_443409.json:
```json
{
    "body": "<a id='comment:20'></a>\n\n```\nsage -t --warn-long 61.6 src/sage/rings/padics/padic_base_leaves.py  # 3 doctests failed\nsage -t --warn-long 61.6 src/sage/rings/padics/padic_extension_leaves.py  # 2 doctests failed\n```",
    "created_at": "2017-07-21T16:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443409",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:20'></a>

```
sage -t --warn-long 61.6 src/sage/rings/padics/padic_base_leaves.py  # 3 doctests failed
sage -t --warn-long 61.6 src/sage/rings/padics/padic_extension_leaves.py  # 2 doctests failed
```



---

archive/issue_comments_443410.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------|\n|[39665f0](https://github.com/sagemath/sagetrac-mirror/commit/39665f03bbcf456a592a86af5b8c55c8d114ef29)|`S is not square`|",
    "created_at": "2017-07-21T16:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------|
|[39665f0](https://github.com/sagemath/sagetrac-mirror/commit/39665f03bbcf456a592a86af5b8c55c8d114ef29)|`S is not square`|



---

archive/issue_comments_443411.json:
```json
{
    "body": "Changing commit from \"e635699dfab09b4ba86ee3f83eb95d0d5f8463dc\" to \"39665f03bbcf456a592a86af5b8c55c8d114ef29\"",
    "created_at": "2017-07-21T16:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e635699dfab09b4ba86ee3f83eb95d0d5f8463dc" to "39665f03bbcf456a592a86af5b8c55c8d114ef29"



---

archive/issue_comments_443412.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe problem is always:\n\n```\n    Failure in _test_matrix_smith:\n    Traceback (most recent call last):\n      File \"/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-saraedum/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 293, in run\n        test_method(tester = tester)\n      File \"/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-saraedum/local/lib/python2.7/site-packages/sage/rings/padics/local_generic.py\", line 768, in _test_matrix_smith\n        S,U,V = M.smith_form()\n      File \"sage/matrix/matrix2.pyx\", line 13267, in sage.matrix.matrix2.Matrix.smith_form (/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-saraedum/src/build/cythonized/sage/matrix/matrix2.c:94870)\n        return R._matrix_smith_form(self,transformation=transformation)\n      File \"/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-saraedum/local/lib/python2.7/site-packages/sage/rings/padics/local_generic.py\", line 727, in _matrix_smith_form\n        inv = (S[piv,piv] >> val).inverse_of_unit()\n      File \"sage/rings/padics/local_generic_element.pyx\", line 160, in sage.rings.padics.local_generic_element.LocalGenericElement.inverse_of_unit (build/cythonized/sage/rings/padics/local_generic_element.c:2339)\n        raise ZeroDivisionError(\"Inverse does not exist.\")\n    ZeroDivisionError: Inverse does not exist.\n```",
    "created_at": "2017-07-21T16:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443412",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:22'></a>
The problem is always:

```
    Failure in _test_matrix_smith:
    Traceback (most recent call last):
      File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-saraedum/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 293, in run
        test_method(tester = tester)
      File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-saraedum/local/lib/python2.7/site-packages/sage/rings/padics/local_generic.py", line 768, in _test_matrix_smith
        S,U,V = M.smith_form()
      File "sage/matrix/matrix2.pyx", line 13267, in sage.matrix.matrix2.Matrix.smith_form (/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-saraedum/src/build/cythonized/sage/matrix/matrix2.c:94870)
        return R._matrix_smith_form(self,transformation=transformation)
      File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-saraedum/local/lib/python2.7/site-packages/sage/rings/padics/local_generic.py", line 727, in _matrix_smith_form
        inv = (S[piv,piv] >> val).inverse_of_unit()
      File "sage/rings/padics/local_generic_element.pyx", line 160, in sage.rings.padics.local_generic_element.LocalGenericElement.inverse_of_unit (build/cythonized/sage/rings/padics/local_generic_element.c:2339)
        raise ZeroDivisionError("Inverse does not exist.")
    ZeroDivisionError: Inverse does not exist.
```



---

archive/issue_comments_443413.json:
```json
{
    "body": "<a id='comment:23'></a>\nXavier: I am a bit confused. Is `integral_smith_form` the same as `change_ring(integer_ring).smith_form`?",
    "created_at": "2017-07-21T20:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443413",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:23'></a>
Xavier: I am a bit confused. Is `integral_smith_form` the same as `change_ring(integer_ring).smith_form`?



---

archive/issue_comments_443414.json:
```json
{
    "body": "<a id='comment:24'></a>\nIf the coefficients of the matrix lie in the integer ring, it is. But `integral_smith_form` is defined for any matrix defined over the fraction field.",
    "created_at": "2017-07-21T20:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443414",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:24'></a>
If the coefficients of the matrix lie in the integer ring, it is. But `integral_smith_form` is defined for any matrix defined over the fraction field.



---

archive/issue_comments_443415.json:
```json
{
    "body": "Changing commit from \"39665f03bbcf456a592a86af5b8c55c8d114ef29\" to \"554dffcb26886add95f3260cc21a607ba5e46706\"",
    "created_at": "2017-07-21T20:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443415",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "39665f03bbcf456a592a86af5b8c55c8d114ef29" to "554dffcb26886add95f3260cc21a607ba5e46706"



---

archive/issue_comments_443416.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[554dffc](https://github.com/sagemath/sagetrac-mirror/commit/554dffcb26886add95f3260cc21a607ba5e46706)|`Update documentation of smith_form`|",
    "created_at": "2017-07-21T20:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[554dffc](https://github.com/sagemath/sagetrac-mirror/commit/554dffcb26886add95f3260cc21a607ba5e46706)|`Update documentation of smith_form`|



---

archive/issue_comments_443417.json:
```json
{
    "body": "<a id='comment:26'></a>\nOk. I got confused by the comment:\n\n```\n- if `d_i` denotes the `(i,i)` entry of `S`, then `d_i`\ndivides `d_{i+1}` in the ring of integers for all `i`.\n```\n\n---\nNew commits:\n|                                                                                                                                          |                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[554dffc](https://github.com/sagemath/sagetrac-mirror/commit/554dffcb26886add95f3260cc21a607ba5e46706)|`Update documentation of smith_form`|",
    "created_at": "2017-07-21T21:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443417",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:26'></a>
Ok. I got confused by the comment:

```
- if `d_i` denotes the `(i,i)` entry of `S`, then `d_i`
divides `d_{i+1}` in the ring of integers for all `i`.
```

---
New commits:
|                                                                                                                                          |                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[554dffc](https://github.com/sagemath/sagetrac-mirror/commit/554dffcb26886add95f3260cc21a607ba5e46706)|`Update documentation of smith_form`|



---

archive/issue_comments_443418.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[9cc114e](https://github.com/sagemath/sagetrac-mirror/commit/9cc114e999d46f5f710d631e1f4ebd48036213d8)|`clarify diagonal entries`|",
    "created_at": "2017-07-21T21:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[9cc114e](https://github.com/sagemath/sagetrac-mirror/commit/9cc114e999d46f5f710d631e1f4ebd48036213d8)|`clarify diagonal entries`|



---

archive/issue_comments_443419.json:
```json
{
    "body": "Changing commit from \"554dffcb26886add95f3260cc21a607ba5e46706\" to \"9cc114e999d46f5f710d631e1f4ebd48036213d8\"",
    "created_at": "2017-07-21T21:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "554dffcb26886add95f3260cc21a607ba5e46706" to "9cc114e999d46f5f710d631e1f4ebd48036213d8"



---

archive/issue_comments_443420.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[e4a9ad7](https://github.com/sagemath/sagetrac-mirror/commit/e4a9ad729e31ca6edbe94e68a8b85134eaa0e468)|`Implement integral for smith normal form over local rings`|",
    "created_at": "2017-07-21T22:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[e4a9ad7](https://github.com/sagemath/sagetrac-mirror/commit/e4a9ad729e31ca6edbe94e68a8b85134eaa0e468)|`Implement integral for smith normal form over local rings`|



---

archive/issue_comments_443421.json:
```json
{
    "body": "Changing commit from \"9cc114e999d46f5f710d631e1f4ebd48036213d8\" to \"e4a9ad729e31ca6edbe94e68a8b85134eaa0e468\"",
    "created_at": "2017-07-21T22:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443421",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9cc114e999d46f5f710d631e1f4ebd48036213d8" to "e4a9ad729e31ca6edbe94e68a8b85134eaa0e468"



---

archive/issue_comments_443422.json:
```json
{
    "body": "Changing commit from \"e4a9ad729e31ca6edbe94e68a8b85134eaa0e468\" to \"502c8872f4db9c738b36947dca442e875b4cd70a\"",
    "created_at": "2017-07-21T22:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443422",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e4a9ad729e31ca6edbe94e68a8b85134eaa0e468" to "502c8872f4db9c738b36947dca442e875b4cd70a"



---

archive/issue_comments_443423.json:
```json
{
    "body": "<a id='comment:29'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|\n|[2a519ab](https://github.com/sagemath/sagetrac-mirror/commit/2a519ab496b1a70c4e3eaf0c6ceb71d1d7fb54d8)|`add itegral handling for Smith form over local rings`|\n|[502c887](https://github.com/sagemath/sagetrac-mirror/commit/502c8872f4db9c738b36947dca442e875b4cd70a)|`Add integral keyword to smith_form implementations`|",
    "created_at": "2017-07-21T22:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443423",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------|
|[2a519ab](https://github.com/sagemath/sagetrac-mirror/commit/2a519ab496b1a70c4e3eaf0c6ceb71d1d7fb54d8)|`add itegral handling for Smith form over local rings`|
|[502c887](https://github.com/sagemath/sagetrac-mirror/commit/502c8872f4db9c738b36947dca442e875b4cd70a)|`Add integral keyword to smith_form implementations`|



---

archive/issue_comments_443424.json:
```json
{
    "body": "<a id='comment:30'></a>\nXavier: That's about what I had in mind. What do you think? (There are still some failing tests.)",
    "created_at": "2017-07-21T22:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443424",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:30'></a>
Xavier: That's about what I had in mind. What do you think? (There are still some failing tests.)



---

archive/issue_comments_443425.json:
```json
{
    "body": "Changing author from \"Xavier Caruso\" to \"Xavier Caruso, Julian R\u00fcth\"",
    "created_at": "2017-07-21T22:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443425",
    "user": "https://github.com/saraedum"
}
```

Changing author from "Xavier Caruso" to "Xavier Caruso, Julian Rüth"



---

archive/issue_comments_443426.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-07-21T22:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443426",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443427.json:
```json
{
    "body": "<a id='comment:31'></a>\nOk for factoring the code this way if you prefer.\n\nHowever, I think that the current code doesn't output the expected answer for matrices over Qp with `integral=None` (though I haven't checked it). In that case, I would say that the entries of Smith normal norm should all be 0 or 1.\n\nIn the doctest, I think that we should precise that we require (1) that the matrices U and V are invertible over the subring and (2) that d_{i+1}/d_i lies in the subring for all i.",
    "created_at": "2017-07-21T22:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443427",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:31'></a>
Ok for factoring the code this way if you prefer.

However, I think that the current code doesn't output the expected answer for matrices over Qp with `integral=None` (though I haven't checked it). In that case, I would say that the entries of Smith normal norm should all be 0 or 1.

In the doctest, I think that we should precise that we require (1) that the matrices U and V are invertible over the subring and (2) that d_{i+1}/d_i lies in the subring for all i.



---

archive/issue_comments_443428.json:
```json
{
    "body": "Changing work_issues from \"failing unit tests\" to \"failing unit tests, clarify meaning of integral, talk about precision\"",
    "created_at": "2017-07-22T15:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443428",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "failing unit tests" to "failing unit tests, clarify meaning of integral, talk about precision"



---

archive/issue_comments_443429.json:
```json
{
    "body": "<a id='comment:32'></a>\nXavier: Could you write something about what it means for an entry on the diagonal to be zero (in the field case)? I mean it is somewhat unclear since we compute with inexact elements.",
    "created_at": "2017-07-22T15:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443429",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:32'></a>
Xavier: Could you write something about what it means for an entry on the diagonal to be zero (in the field case)? I mean it is somewhat unclear since we compute with inexact elements.



---

archive/issue_comments_443430.json:
```json
{
    "body": "<a id='comment:33'></a>\ndoc does not build\n\n```\n+[dochtml] [matrices ] docstring of sage.matrix.matrix2.Matrix.smith_form:26: WARNING: Bullet list ends without a blank line; unexpected unindent.\n+[dochtml] [matrices ] docstring of sage.matrix.matrix2.Matrix.smith_form:29: WARNING: Bullet list ends without a blank line; unexpected unindent.\n```\nThe issue is in the INPUT field there.",
    "created_at": "2017-08-25T06:58:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443430",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>
doc does not build

```
+[dochtml] [matrices ] docstring of sage.matrix.matrix2.Matrix.smith_form:26: WARNING: Bullet list ends without a blank line; unexpected unindent.
+[dochtml] [matrices ] docstring of sage.matrix.matrix2.Matrix.smith_form:29: WARNING: Bullet list ends without a blank line; unexpected unindent.
```
The issue is in the INPUT field there.



---

archive/issue_comments_443431.json:
```json
{
    "body": "Changing branch from \"u/saraedum/padic_smith\" to \"u/aly.deines/padic_smith\"",
    "created_at": "2017-08-25T16:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443431",
    "user": "https://github.com/adeines"
}
```

Changing branch from "u/saraedum/padic_smith" to "u/aly.deines/padic_smith"



---

archive/issue_comments_443432.json:
```json
{
    "body": "<a id='comment:35'></a>\nNew commits:\n|                                                                                                                                          |                                                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|\n|[1fd5309](https://github.com/sagemath/sagetrac-mirror/commit/1fd5309a48cdd7843102fb04a25839e5f7738545)|`Merge branch 'u/saraedum/padic_smith' of git://trac.sagemath.org/sage into t/23450/padic_smith`|\n|[89ec3ab](https://github.com/sagemath/sagetrac-mirror/commit/89ec3ab13eb92d68c4ad2f12b10151041d31aefe)|`Removed trailing whitespace.`|",
    "created_at": "2017-08-25T17:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443432",
    "user": "https://github.com/adeines"
}
```

<a id='comment:35'></a>
New commits:
|                                                                                                                                          |                                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
|[1fd5309](https://github.com/sagemath/sagetrac-mirror/commit/1fd5309a48cdd7843102fb04a25839e5f7738545)|`Merge branch 'u/saraedum/padic_smith' of git://trac.sagemath.org/sage into t/23450/padic_smith`|
|[89ec3ab](https://github.com/sagemath/sagetrac-mirror/commit/89ec3ab13eb92d68c4ad2f12b10151041d31aefe)|`Removed trailing whitespace.`|



---

archive/issue_comments_443433.json:
```json
{
    "body": "Changing commit from \"502c8872f4db9c738b36947dca442e875b4cd70a\" to \"89ec3ab13eb92d68c4ad2f12b10151041d31aefe\"",
    "created_at": "2017-08-25T17:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443433",
    "user": "https://github.com/adeines"
}
```

Changing commit from "502c8872f4db9c738b36947dca442e875b4cd70a" to "89ec3ab13eb92d68c4ad2f12b10151041d31aefe"



---

archive/issue_comments_443434.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-25T17:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443434",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_443435.json:
```json
{
    "body": "<a id='comment:36'></a>\nChanged to needs work because of above issues.",
    "created_at": "2017-08-25T17:33:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443435",
    "user": "https://github.com/adeines"
}
```

<a id='comment:36'></a>
Changed to needs work because of above issues.



---

archive/issue_comments_443436.json:
```json
{
    "body": "<a id='comment:37'></a>\n*ping* - I could really use this p-adic smith form. (over `ZZp`)\nNeed help? (not an expert though)",
    "created_at": "2017-10-27T10:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443436",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:37'></a>
*ping* - I could really use this p-adic smith form. (over `ZZp`)
Need help? (not an expert though)



---

archive/issue_comments_443437.json:
```json
{
    "body": "Changing branch from \"u/aly.deines/padic_smith\" to \"public/23450\"",
    "created_at": "2017-12-05T14:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443437",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/aly.deines/padic_smith" to "public/23450"



---

archive/issue_comments_443438.json:
```json
{
    "body": "Changing commit from \"89ec3ab13eb92d68c4ad2f12b10151041d31aefe\" to \"8b239f40ab22a1e524073e1a8765d034c86254da\"",
    "created_at": "2017-12-05T14:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443438",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "89ec3ab13eb92d68c4ad2f12b10151041d31aefe" to "8b239f40ab22a1e524073e1a8765d034c86254da"



---

archive/issue_comments_443439.json:
```json
{
    "body": "<a id='comment:39'></a>\nNew commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[d92d3e9](https://github.com/sagemath/sagetrac-mirror/commit/d92d3e9efd44a9d4261ff5935574a2759fa058e1)|`Merge branch 'u/aly.deines/padic_smith' in 8.1.rc4`|\n|[8b239f4](https://github.com/sagemath/sagetrac-mirror/commit/8b239f40ab22a1e524073e1a8765d034c86254da)|`trac 23450 details of doc`|",
    "created_at": "2017-12-05T14:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443439",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:39'></a>
New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[d92d3e9](https://github.com/sagemath/sagetrac-mirror/commit/d92d3e9efd44a9d4261ff5935574a2759fa058e1)|`Merge branch 'u/aly.deines/padic_smith' in 8.1.rc4`|
|[8b239f4](https://github.com/sagemath/sagetrac-mirror/commit/8b239f40ab22a1e524073e1a8765d034c86254da)|`trac 23450 details of doc`|



---

archive/issue_comments_443440.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-12-05T14:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443440",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443441.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-05T14:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443441",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_443442.json:
```json
{
    "body": "<a id='comment:41'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[93d4e32](https://github.com/sagemath/sagetrac-mirror/commit/93d4e32a40f8870c0345ddbcac178839f0cdef42)|`Merge branch 'public/23450' in 8.1`|\n|[14f591c](https://github.com/sagemath/sagetrac-mirror/commit/14f591c94af65b88673f0c295f3c00c093468755)|`fixing 2 doctests`|",
    "created_at": "2017-12-08T12:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[93d4e32](https://github.com/sagemath/sagetrac-mirror/commit/93d4e32a40f8870c0345ddbcac178839f0cdef42)|`Merge branch 'public/23450' in 8.1`|
|[14f591c](https://github.com/sagemath/sagetrac-mirror/commit/14f591c94af65b88673f0c295f3c00c093468755)|`fixing 2 doctests`|



---

archive/issue_comments_443443.json:
```json
{
    "body": "Changing commit from \"8b239f40ab22a1e524073e1a8765d034c86254da\" to \"14f591c94af65b88673f0c295f3c00c093468755\"",
    "created_at": "2017-12-08T12:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8b239f40ab22a1e524073e1a8765d034c86254da" to "14f591c94af65b88673f0c295f3c00c093468755"



---

archive/issue_comments_443444.json:
```json
{
    "body": "Changing commit from \"14f591c94af65b88673f0c295f3c00c093468755\" to \"cf85a341259e09416413bd7b29ec99e8e0597c62\"",
    "created_at": "2018-02-26T14:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "14f591c94af65b88673f0c295f3c00c093468755" to "cf85a341259e09416413bd7b29ec99e8e0597c62"



---

archive/issue_comments_443445.json:
```json
{
    "body": "<a id='comment:42'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|\n|[cf85a34](https://github.com/sagemath/sagetrac-mirror/commit/cf85a341259e09416413bd7b29ec99e8e0597c62)|`Merge branch 'public/23450' of ssh://trac.sagemath.org/sage into t/23450/padic_smith`|",
    "created_at": "2018-02-26T14:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
|[cf85a34](https://github.com/sagemath/sagetrac-mirror/commit/cf85a341259e09416413bd7b29ec99e8e0597c62)|`Merge branch 'public/23450' of ssh://trac.sagemath.org/sage into t/23450/padic_smith`|



---

archive/issue_comments_443446.json:
```json
{
    "body": "Changing commit from \"cf85a341259e09416413bd7b29ec99e8e0597c62\" to \"7ad838a41517a89f6906ec1fda018e3029db7436\"",
    "created_at": "2018-02-26T15:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cf85a341259e09416413bd7b29ec99e8e0597c62" to "7ad838a41517a89f6906ec1fda018e3029db7436"



---

archive/issue_comments_443447.json:
```json
{
    "body": "<a id='comment:43'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[7ad838a](https://github.com/sagemath/sagetrac-mirror/commit/7ad838a41517a89f6906ec1fda018e3029db7436)|`Remove _get_matrix_class that was inadvertently added in a merge`|",
    "created_at": "2018-02-26T15:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[7ad838a](https://github.com/sagemath/sagetrac-mirror/commit/7ad838a41517a89f6906ec1fda018e3029db7436)|`Remove _get_matrix_class that was inadvertently added in a merge`|



---

archive/issue_comments_443448.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[b5863a1](https://github.com/sagemath/sagetrac-mirror/commit/b5863a1757c05e36e832fd1f743d31127edbe7a0)|`Add newline back in from fix to matrix_space.py`|",
    "created_at": "2018-02-26T15:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[b5863a1](https://github.com/sagemath/sagetrac-mirror/commit/b5863a1757c05e36e832fd1f743d31127edbe7a0)|`Add newline back in from fix to matrix_space.py`|



---

archive/issue_comments_443449.json:
```json
{
    "body": "Changing commit from \"7ad838a41517a89f6906ec1fda018e3029db7436\" to \"b5863a1757c05e36e832fd1f743d31127edbe7a0\"",
    "created_at": "2018-02-26T15:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7ad838a41517a89f6906ec1fda018e3029db7436" to "b5863a1757c05e36e832fd1f743d31127edbe7a0"



---

archive/issue_comments_443450.json:
```json
{
    "body": "Changing commit from \"b5863a1757c05e36e832fd1f743d31127edbe7a0\" to \"777f494e5c8a9924c740c55f636b1e9f10454cb4\"",
    "created_at": "2018-02-26T17:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b5863a1757c05e36e832fd1f743d31127edbe7a0" to "777f494e5c8a9924c740c55f636b1e9f10454cb4"



---

archive/issue_comments_443451.json:
```json
{
    "body": "<a id='comment:45'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------|\n|[777f494](https://github.com/sagemath/sagetrac-mirror/commit/777f494e5c8a9924c740c55f636b1e9f10454cb4)|`Remove the tracks_precision method and update the p-adic smith form to be able to deal with lattice elements`|",
    "created_at": "2018-02-26T17:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------|
|[777f494](https://github.com/sagemath/sagetrac-mirror/commit/777f494e5c8a9924c740c55f636b1e9f10454cb4)|`Remove the tracks_precision method and update the p-adic smith form to be able to deal with lattice elements`|



---

archive/issue_comments_443452.json:
```json
{
    "body": "<a id='comment:46'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------|\n|[d78a1d5](https://github.com/sagemath/sagetrac-mirror/commit/d78a1d58857c0a635f6a0f451ccac57e29df28c3)|`Add exact parameter to _matrix_smith_form, fix precision behavior and allow integral=True for non-padic matrices`|",
    "created_at": "2018-02-28T13:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------|
|[d78a1d5](https://github.com/sagemath/sagetrac-mirror/commit/d78a1d58857c0a635f6a0f451ccac57e29df28c3)|`Add exact parameter to _matrix_smith_form, fix precision behavior and allow integral=True for non-padic matrices`|



---

archive/issue_comments_443453.json:
```json
{
    "body": "Changing commit from \"777f494e5c8a9924c740c55f636b1e9f10454cb4\" to \"d78a1d58857c0a635f6a0f451ccac57e29df28c3\"",
    "created_at": "2018-02-28T13:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "777f494e5c8a9924c740c55f636b1e9f10454cb4" to "d78a1d58857c0a635f6a0f451ccac57e29df28c3"



---

archive/issue_comments_443454.json:
```json
{
    "body": "Changing author from \"Xavier Caruso, Julian R\u00fcth\" to \"Xavier Caruso, Julian R\u00fcth, David Roe\"",
    "created_at": "2018-02-28T13:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443454",
    "user": "https://github.com/roed314"
}
```

Changing author from "Xavier Caruso, Julian Rüth" to "Xavier Caruso, Julian Rüth, David Roe"



---

archive/issue_comments_443455.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-28T13:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443455",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443456.json:
```json
{
    "body": "<a id='comment:47'></a>\nIf Xavier is happy with my changes, I'm happy to give this positive review.",
    "created_at": "2018-02-28T13:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443456",
    "user": "https://github.com/roed314"
}
```

<a id='comment:47'></a>
If Xavier is happy with my changes, I'm happy to give this positive review.



---

archive/issue_comments_443457.json:
```json
{
    "body": "Changing reviewer from \"Julian R\u00fcth\" to \"Julian R\u00fcth, David Roe\"",
    "created_at": "2018-02-28T13:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443457",
    "user": "https://github.com/roed314"
}
```

Changing reviewer from "Julian Rüth" to "Julian Rüth, David Roe"



---

archive/issue_comments_443458.json:
```json
{
    "body": "Changing commit from \"d78a1d58857c0a635f6a0f451ccac57e29df28c3\" to \"f7d4e3833eee9ef8138d2d01bb3ffbce400ba9d0\"",
    "created_at": "2018-02-28T15:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d78a1d58857c0a635f6a0f451ccac57e29df28c3" to "f7d4e3833eee9ef8138d2d01bb3ffbce400ba9d0"



---

archive/issue_comments_443459.json:
```json
{
    "body": "<a id='comment:48'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[f7d4e38](https://github.com/sagemath/sagetrac-mirror/commit/f7d4e3833eee9ef8138d2d01bb3ffbce400ba9d0)|`lift_to_precision() was missing at some point`|",
    "created_at": "2018-02-28T15:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[f7d4e38](https://github.com/sagemath/sagetrac-mirror/commit/f7d4e3833eee9ef8138d2d01bb3ffbce400ba9d0)|`lift_to_precision() was missing at some point`|



---

archive/issue_comments_443460.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[0d46aa5](https://github.com/sagemath/sagetrac-mirror/commit/0d46aa51e56133ec125d90698ffb1974f186a31d)|`Add a test: Smith form of the zero matrix`|",
    "created_at": "2018-02-28T16:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[0d46aa5](https://github.com/sagemath/sagetrac-mirror/commit/0d46aa51e56133ec125d90698ffb1974f186a31d)|`Add a test: Smith form of the zero matrix`|



---

archive/issue_comments_443461.json:
```json
{
    "body": "Changing commit from \"f7d4e3833eee9ef8138d2d01bb3ffbce400ba9d0\" to \"0d46aa51e56133ec125d90698ffb1974f186a31d\"",
    "created_at": "2018-02-28T16:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443461",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f7d4e3833eee9ef8138d2d01bb3ffbce400ba9d0" to "0d46aa51e56133ec125d90698ffb1974f186a31d"



---

archive/issue_comments_443462.json:
```json
{
    "body": "<a id='comment:50'></a>\nI've fixed a small issue with precision.\n\nNow, everything seems fine to me. I let you give a positive review if you're OK (and if the patchbot is happy)",
    "created_at": "2018-02-28T16:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443462",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:50'></a>
I've fixed a small issue with precision.

Now, everything seems fine to me. I let you give a positive review if you're OK (and if the patchbot is happy)



---

archive/issue_comments_443463.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-28T19:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443463",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443464.json:
```json
{
    "body": "<a id='comment:51'></a>\nPatchbot is green, so positive review.",
    "created_at": "2018-02-28T19:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443464",
    "user": "https://github.com/roed314"
}
```

<a id='comment:51'></a>
Patchbot is green, so positive review.



---

archive/issue_events_068487.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-17T07:38:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23450#event-68487"
}
```



---

archive/issue_comments_443465.json:
```json
{
    "body": "Changing work_issues from \"failing unit tests, clarify meaning of integral, talk about precision\" to \"\"",
    "created_at": "2018-03-17T08:12:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443465",
    "user": "https://github.com/fchapoton"
}
```

Changing work_issues from "failing unit tests, clarify meaning of integral, talk about precision" to ""



---

archive/issue_comments_443466.json:
```json
{
    "body": "<a id='comment:54'></a>\nTests fail\n\n```\n    UnboundLocalError: local variable 'precM' referenced before assignment\n```",
    "created_at": "2018-03-20T23:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443466",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:54'></a>
Tests fail

```
    UnboundLocalError: local variable 'precM' referenced before assignment
```



---

archive/issue_comments_443467.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-03-20T23:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443467",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_443468.json:
```json
{
    "body": "<a id='comment:55'></a>\nLet me add a bit of details, 6 doctests fails\n\n```\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/padics/padic_lattice_element.py  # 4 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/padics/padic_base_leaves.py  # 2 doctests failed\n```\n and they all fail the same way\n\n```\nFile \"/usr/lib64/python2.7/site-packages/sage/rings/padics/padic_base_leaves.py\", line 879, in sage.rings.padics.padic_base_leaves.pAdicRingLattice.__init__\nFailed example:\n    TestSuite(R).run(skip='_test_teichmuller')\nExpected nothing\nGot:\n    Failure in _test_matrix_smith:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/misc/sage_unittest.py\", line 294, in run\n        test_method(tester = tester)\n      File \"/usr/lib64/python2.7/site-packages/sage/rings/padics/local_generic.py\", line 1248, in _test_matrix_smith\n        S,U,V = M.smith_form(integral=base)\n      File \"sage/matrix/matrix2.pyx\", line 13416, in sage.matrix.matrix2.Matrix.smith_form (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/matrix/matrix2.c:96167)\n        return R._matrix_smith_form(self, transformation=transformation, integral=integral, exact=exact)\n      File \"/usr/lib64/python2.7/site-packages/sage/rings/padics/local_generic.py\", line 1148, in _matrix_smith_form\n        if inexact_ring and not allzero and val >= precM:\n    UnboundLocalError: local variable 'precM' referenced before assignment\n    ------------------------------------------------------------\n    The following tests failed: _test_matrix_smith\n```\nending in `local_generic.py`.",
    "created_at": "2018-03-21T00:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443468",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:55'></a>
Let me add a bit of details, 6 doctests fails

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/padics/padic_lattice_element.py  # 4 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/padics/padic_base_leaves.py  # 2 doctests failed
```
 and they all fail the same way

```
File "/usr/lib64/python2.7/site-packages/sage/rings/padics/padic_base_leaves.py", line 879, in sage.rings.padics.padic_base_leaves.pAdicRingLattice.__init__
Failed example:
    TestSuite(R).run(skip='_test_teichmuller')
Expected nothing
Got:
    Failure in _test_matrix_smith:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/misc/sage_unittest.py", line 294, in run
        test_method(tester = tester)
      File "/usr/lib64/python2.7/site-packages/sage/rings/padics/local_generic.py", line 1248, in _test_matrix_smith
        S,U,V = M.smith_form(integral=base)
      File "sage/matrix/matrix2.pyx", line 13416, in sage.matrix.matrix2.Matrix.smith_form (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/matrix/matrix2.c:96167)
        return R._matrix_smith_form(self, transformation=transformation, integral=integral, exact=exact)
      File "/usr/lib64/python2.7/site-packages/sage/rings/padics/local_generic.py", line 1148, in _matrix_smith_form
        if inexact_ring and not allzero and val >= precM:
    UnboundLocalError: local variable 'precM' referenced before assignment
    ------------------------------------------------------------
    The following tests failed: _test_matrix_smith
```
ending in `local_generic.py`.



---

archive/issue_comments_443469.json:
```json
{
    "body": "Changing commit from \"0d46aa51e56133ec125d90698ffb1974f186a31d\" to \"e6f54bb5b0849b7654d645dc63171af9001e7ae9\"",
    "created_at": "2018-03-22T22:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0d46aa51e56133ec125d90698ffb1974f186a31d" to "e6f54bb5b0849b7654d645dc63171af9001e7ae9"



---

archive/issue_comments_443470.json:
```json
{
    "body": "<a id='comment:56'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[0613f84](https://github.com/sagemath/sagetrac-mirror/commit/0613f843ca152a5aa09860d37dddb9650eeccfc9)|`Recompute precM in the lattice precision framework`|\n|[e6f54bb](https://github.com/sagemath/sagetrac-mirror/commit/e6f54bb5b0849b7654d645dc63171af9001e7ae9)|`Merge branch 'develop' into t/23450/public/23450`|",
    "created_at": "2018-03-22T22:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[0613f84](https://github.com/sagemath/sagetrac-mirror/commit/0613f843ca152a5aa09860d37dddb9650eeccfc9)|`Recompute precM in the lattice precision framework`|
|[e6f54bb](https://github.com/sagemath/sagetrac-mirror/commit/e6f54bb5b0849b7654d645dc63171af9001e7ae9)|`Merge branch 'develop' into t/23450/public/23450`|



---

archive/issue_comments_443471.json:
```json
{
    "body": "<a id='comment:57'></a>\nShould be fixed.",
    "created_at": "2018-03-22T22:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443471",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:57'></a>
Should be fixed.



---

archive/issue_comments_443472.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-03-22T22:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443472",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443473.json:
```json
{
    "body": "<a id='comment:58'></a>\nThe patchbots continue to be noisy, but this looks good to me.",
    "created_at": "2018-03-29T20:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443473",
    "user": "https://github.com/roed314"
}
```

<a id='comment:58'></a>
The patchbots continue to be noisy, but this looks good to me.



---

archive/issue_comments_443474.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-29T20:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443474",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_068488.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:27:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23450#event-68488"
}
```



---

archive/issue_comments_443475.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443475",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_443476.json:
```json
{
    "body": "Changing branch from \"public/23450\" to \"e6f54bb5b0849b7654d645dc63171af9001e7ae9\"",
    "created_at": "2018-05-08T17:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23450",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23450#issuecomment-443476",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/23450" to "e6f54bb5b0849b7654d645dc63171af9001e7ae9"
