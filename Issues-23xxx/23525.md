# Issue 23525: implement is_squarefree for p-adic rings

archive/issues_023288.json:
```json
{
    "body": "Currently, this does not work\n\n```\nsage: R.<a> = ZqFM(9)\nsage: a.is_squarefree()\nAttributeError\n```\n\nCC:  @roed314\n\nBranch/Commit: [3875877441a7715c8ee032ff3dd36f625c57f6ac](https://github.com/sagemath/sagetrac-mirror/commit/3875877441a7715c8ee032ff3dd36f625c57f6ac)\n\nReviewer: David Roe\n\nAuthor: Julian R\u00fcth\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23525\n\n",
    "closed_at": "2017-08-05T23:27:17Z",
    "created_at": "2017-07-23T09:01:58Z",
    "labels": [
        "component: padics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "implement is_squarefree for p-adic rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23525",
    "user": "https://github.com/saraedum"
}
```
Currently, this does not work

```
sage: R.<a> = ZqFM(9)
sage: a.is_squarefree()
AttributeError
```

CC:  @roed314

Branch/Commit: [3875877441a7715c8ee032ff3dd36f625c57f6ac](https://github.com/sagemath/sagetrac-mirror/commit/3875877441a7715c8ee032ff3dd36f625c57f6ac)

Reviewer: David Roe

Author: Julian Rüth

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23525





---

archive/issue_comments_445171.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/implement_is_squarefree_for_p_adic_rings\"",
    "created_at": "2017-07-27T23:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445171",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/implement_is_squarefree_for_p_adic_rings"



---

archive/issue_comments_445172.json:
```json
{
    "body": "<a id='comment:2'></a>\nI did not run any doctests yet (still rebuilding sage.)\n\n---\nNew commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[8051942](https://github.com/sagemath/sagetrac-mirror/commit/8051942732eb094eca775f2a6ad91b361c3c5e1f)|`is_squarefree() for p-adics`|",
    "created_at": "2017-07-27T23:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445172",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:2'></a>
I did not run any doctests yet (still rebuilding sage.)

---
New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[8051942](https://github.com/sagemath/sagetrac-mirror/commit/8051942732eb094eca775f2a6ad91b361c3c5e1f)|`is_squarefree() for p-adics`|



---

archive/issue_comments_445173.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-27T23:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445173",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_445174.json:
```json
{
    "body": "Changing author from \"\" to \"Julian R\u00fcth\"",
    "created_at": "2017-07-27T23:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445174",
    "user": "https://github.com/saraedum"
}
```

Changing author from "" to "Julian Rüth"



---

archive/issue_comments_445175.json:
```json
{
    "body": "Changing commit from \"\" to \"8051942732eb094eca775f2a6ad91b361c3c5e1f\"",
    "created_at": "2017-07-27T23:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445175",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "" to "8051942732eb094eca775f2a6ad91b361c3c5e1f"



---

archive/issue_comments_445176.json:
```json
{
    "body": "<a id='comment:3'></a>\nMaybe we should just raise a `TypeError` for fields?  `QQ` and number fields don't define an `is_squarefree` method (though elements of orders don't either).  This may be another case where we can return a technically correct answer but it's most likely not what the user was expecting.",
    "created_at": "2017-07-28T02:25:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445176",
    "user": "https://github.com/roed314"
}
```

<a id='comment:3'></a>
Maybe we should just raise a `TypeError` for fields?  `QQ` and number fields don't define an `is_squarefree` method (though elements of orders don't either).  This may be another case where we can return a technically correct answer but it's most likely not what the user was expecting.



---

archive/issue_comments_445177.json:
```json
{
    "body": "<a id='comment:4'></a>\nI think it makes sense to return mathematically correct answers even if they are trivial. It means that you can write algorithms without checking for trivial cases. E.g., we do this already to determine whether a polynomial is squarefree: first we check whether it's content is squarefree. A trivial check over fields, but still the correct thing to do. So currently we need to protect this check with a `self.base_ring() in Fields()` to work around the fact that `Fields.ElementMethods` does not implement `is_squarefree()` [which it imho should.]",
    "created_at": "2017-07-28T03:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445177",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:4'></a>
I think it makes sense to return mathematically correct answers even if they are trivial. It means that you can write algorithms without checking for trivial cases. E.g., we do this already to determine whether a polynomial is squarefree: first we check whether it's content is squarefree. A trivial check over fields, but still the correct thing to do. So currently we need to protect this check with a `self.base_ring() in Fields()` to work around the fact that `Fields.ElementMethods` does not implement `is_squarefree()` [which it imho should.]



---

archive/issue_comments_445178.json:
```json
{
    "body": "<a id='comment:5'></a>\nPS: I think it really depends on who are you writing code for. Beginners will be surprised that\n\n```\nsage: x = 8/2; x\n4\nsage: x.is_squarefree()\nTrue\n```\nbut eventually you are going to learn that parents are very important in Sage\u2026",
    "created_at": "2017-07-28T03:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445178",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>
PS: I think it really depends on who are you writing code for. Beginners will be surprised that

```
sage: x = 8/2; x
4
sage: x.is_squarefree()
True
```
but eventually you are going to learn that parents are very important in Sage…



---

archive/issue_comments_445179.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[3875877](https://github.com/sagemath/sagetrac-mirror/commit/3875877441a7715c8ee032ff3dd36f625c57f6ac)|`simplify field case`|",
    "created_at": "2017-08-03T16:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[3875877](https://github.com/sagemath/sagetrac-mirror/commit/3875877441a7715c8ee032ff3dd36f625c57f6ac)|`simplify field case`|



---

archive/issue_comments_445180.json:
```json
{
    "body": "Changing commit from \"8051942732eb094eca775f2a6ad91b361c3c5e1f\" to \"3875877441a7715c8ee032ff3dd36f625c57f6ac\"",
    "created_at": "2017-08-03T16:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8051942732eb094eca775f2a6ad91b361c3c5e1f" to "3875877441a7715c8ee032ff3dd36f625c57f6ac"



---

archive/issue_comments_445181.json:
```json
{
    "body": "<a id='comment:7'></a>\nOkay, we had some more discussion on IRC and I'm fine with this now.  Positive review once tests pass.",
    "created_at": "2017-08-03T17:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445181",
    "user": "https://github.com/roed314"
}
```

<a id='comment:7'></a>
Okay, we had some more discussion on IRC and I'm fine with this now.  Positive review once tests pass.



---

archive/issue_comments_445182.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe only failure is the intermittent\n\n```\nsage -t --long src/sage/rings/fraction_field_FpT.pyx  # 3 doctests failed\n```\nwhich is already addressed by #23554.",
    "created_at": "2017-08-04T03:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445182",
    "user": "https://github.com/roed314"
}
```

<a id='comment:8'></a>
The only failure is the intermittent

```
sage -t --long src/sage/rings/fraction_field_FpT.pyx  # 3 doctests failed
```
which is already addressed by #23554.



---

archive/issue_comments_445183.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-04T03:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445183",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_445184.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Roe\"",
    "created_at": "2017-08-04T03:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445184",
    "user": "https://github.com/roed314"
}
```

Changing reviewer from "" to "David Roe"



---

archive/issue_comments_445185.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-05T23:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445185",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_445186.json:
```json
{
    "body": "Changing branch from \"u/saraedum/implement_is_squarefree_for_p_adic_rings\" to \"3875877441a7715c8ee032ff3dd36f625c57f6ac\"",
    "created_at": "2017-08-05T23:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23525#issuecomment-445186",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/saraedum/implement_is_squarefree_for_p_adic_rings" to "3875877441a7715c8ee032ff3dd36f625c57f6ac"



---

archive/issue_events_068576.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-05T23:27:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23525",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23525#event-68576"
}
```
