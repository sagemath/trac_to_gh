# Issue 23358: Don't embed rpaths during the build

archive/issues_023121.json:
```json
{
    "body": "As per #22509, `DESTDIR` is useful in the cases where the build process needs to hard-code `--prefix` paths in the build output. For example, embedded rpaths. This is not only useful but vital for binary distros who can't write to /usr during a build.\n\nIt's less important - and one can get away with only supporting `--prefix` - if the build does not embed these paths. However nowadays `DESTDIR` is a common standard, so it's good to support it regardless.\n\nSince Sage 8.0 currently does not support DESTDIR (and neither did previous versions) I have to carry the following patch in Debian. It would be technically unnecessary after DESTDIR support is introduced, however in Debian we also have a policy to avoid rpath if possible.\n\nEven disregarding Debian, there is no particular reason for Sage to go embedding rpaths in its binaries, it prevents SAGE_LOCAL from being moved to different places around the filesystem. AFAICS, no other part of Sage involves embedding build paths, and one can freely move a SAGE_LOCAL around after applying this patch.\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/23358\n\n",
    "closed_at": "2017-07-04T12:44:57Z",
    "created_at": "2017-07-03T22:16:41Z",
    "labels": [
        "component: build",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Don't embed rpaths during the build",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23358",
    "user": "https://github.com/infinity0"
}
```
As per #22509, `DESTDIR` is useful in the cases where the build process needs to hard-code `--prefix` paths in the build output. For example, embedded rpaths. This is not only useful but vital for binary distros who can't write to /usr during a build.

It's less important - and one can get away with only supporting `--prefix` - if the build does not embed these paths. However nowadays `DESTDIR` is a common standard, so it's good to support it regardless.

Since Sage 8.0 currently does not support DESTDIR (and neither did previous versions) I have to carry the following patch in Debian. It would be technically unnecessary after DESTDIR support is introduced, however in Debian we also have a policy to avoid rpath if possible.

Even disregarding Debian, there is no particular reason for Sage to go embedding rpaths in its binaries, it prevents SAGE_LOCAL from being moved to different places around the filesystem. AFAICS, no other part of Sage involves embedding build paths, and one can freely move a SAGE_LOCAL around after applying this patch.

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/23358





---

archive/issue_comments_344372.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-07-03T22:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23358#issuecomment-344372",
    "user": "https://github.com/infinity0"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_344373.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2017-07-03T22:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23358#issuecomment-344373",
    "user": "https://github.com/infinity0"
}
```

Changing priority from major to minor.



---

archive/issue_comments_344374.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+As per #22509, \\`DESTDIR\\` is useful in the cases where the build process needs to hard-code \\`--prefix\\` paths in the build output. For example, embedded rpaths. This is not only useful but vital for binary distros who can't write to /usr during a build.\n \n+It's less important - and one can get away with only supporting \\`--prefix\\` - if the build does not embed these paths. However nowadays \\`DESTDIR\\` is a common standard, so it's good to support it regardless.\n+\n+Since Sage 8.0 currently does not support DESTDIR (and neither did previous versions) I have to carry the following patch in Debian. It would be technically unnecessary after DESTDIR support is introduced, however in Debian we also have a policy to avoid rpath if possible.\n+\n+Even disregarding Debian, there is no particular reason for Sage to go embedding rpaths in its binaries, it prevents SAGE_LOCAL from being moved to different places around the filesystem. AFAICS, no other part of Sage involves embedding build paths, and one can freely move a SAGE_LOCAL around after applying this patch.\n \n Type: PLEASE CHANGE\n \n```\n",
    "created_at": "2017-07-03T22:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23358#issuecomment-344374",
    "user": "https://github.com/infinity0"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,10 @@
+As per #22509, \`DESTDIR\` is useful in the cases where the build process needs to hard-code \`--prefix\` paths in the build output. For example, embedded rpaths. This is not only useful but vital for binary distros who can't write to /usr during a build.
 
+It's less important - and one can get away with only supporting \`--prefix\` - if the build does not embed these paths. However nowadays \`DESTDIR\` is a common standard, so it's good to support it regardless.
+
+Since Sage 8.0 currently does not support DESTDIR (and neither did previous versions) I have to carry the following patch in Debian. It would be technically unnecessary after DESTDIR support is introduced, however in Debian we also have a policy to avoid rpath if possible.
+
+Even disregarding Debian, there is no particular reason for Sage to go embedding rpaths in its binaries, it prevents SAGE_LOCAL from being moved to different places around the filesystem. AFAICS, no other part of Sage involves embedding build paths, and one can freely move a SAGE_LOCAL around after applying this patch.
 
 Type: PLEASE CHANGE
 
```




---

archive/issue_comments_344375.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-03T22:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23358#issuecomment-344375",
    "user": "https://github.com/infinity0"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_344376.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to build.",
    "created_at": "2017-07-03T22:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23358#issuecomment-344376",
    "user": "https://github.com/infinity0"
}
```

Changing component from PLEASE CHANGE to build.



---

archive/issue_comments_344377.json:
```json
{
    "body": "<a id='comment:2'></a>Sorry, please delete this ticket, I messed up when running `git trac`. The correct ticket is #23359.",
    "created_at": "2017-07-03T22:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23358#issuecomment-344377",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:2'></a>Sorry, please delete this ticket, I messed up when running `git trac`. The correct ticket is #23359.



---

archive/issue_events_060109.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-07-03T22:26:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23358#event-60109"
}
```



---

archive/issue_comments_344378.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2017-07-04T12:44:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23358#issuecomment-344378",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: invalid



---

archive/issue_events_060110.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-04T12:44:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23358",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23358#event-60110"
}
```
