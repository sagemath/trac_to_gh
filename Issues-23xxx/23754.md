# Issue 23754: Randomized test for finite lattices

archive/issues_023517.json:
```json
{
    "assignees": [],
    "body": "This is an example of randomized testing of finite lattices. Main idea is to check functions against other: A distributive lattice must be modular, an atom of a lattice must be a coatom of the dual lattice and so on.\n\nSee https://groups.google.com/forum/#!topic/sage-devel/-rVyK8-FQ2s for discussion.\n\n\nCC:  @tscrim\n\nBranch/Commit: **[`2bad8eb`](https://github.com/sagemath/sagetrac-mirror/commit/2bad8eb3ca124e76be1d0225454c56adde60b407)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jori M\u00e4ntysalo**\n\nComponent: **doctest coverage**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23754_\n\n",
    "closed_at": "2017-09-11T13:47:13Z",
    "created_at": "2017-08-30T15:21:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Randomized test for finite lattices",
    "type": "issue",
    "updated_at": "2017-09-11T13:47:13Z",
    "url": "https://github.com/sagemath/sage/issues/23754",
    "user": "https://github.com/jm58660"
}
```
This is an example of randomized testing of finite lattices. Main idea is to check functions against other: A distributive lattice must be modular, an atom of a lattice must be a coatom of the dual lattice and so on.

See https://groups.google.com/forum/#!topic/sage-devel/-rVyK8-FQ2s for discussion.


CC:  @tscrim

Branch/Commit: **[`2bad8eb`](https://github.com/sagemath/sagetrac-mirror/commit/2bad8eb3ca124e76be1d0225454c56adde60b407)**

Reviewer: **Travis Scrimshaw**

Author: **Jori MÃ¤ntysalo**

Component: **doctest coverage**

_Issue created by migration from https://trac.sagemath.org/ticket/23754_





---

archive/issue_events_331706.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-08-30T15:21:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331706"
}
```



---

archive/issue_events_331707.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-08-30T15:21:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331707"
}
```



---

archive/issue_events_331708.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-08-30T15:21:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331708"
}
```



---

archive/issue_events_331709.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-08-30T15:21:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331709"
}
```



---

archive/issue_comments_358241.json:
```json
{
    "body": "Branch: **[u/jmantysalo/test-lattice](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/test-lattice)**",
    "created_at": "2017-08-30T15:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358241",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/test-lattice](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/test-lattice)**



---

archive/issue_comments_358242.json:
```json
{
    "body": "Commit: **[`9dd7a09`](https://github.com/sagemath/sagetrac-mirror/commit/9dd7a09e410bb56541bdac55b38dff8664eff634)**",
    "created_at": "2017-08-31T05:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358242",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`9dd7a09`](https://github.com/sagemath/sagetrac-mirror/commit/9dd7a09e410bb56541bdac55b38dff8664eff634)**



---

archive/issue_comments_358243.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9dd7a09e410bb56541bdac55b38dff8664eff634\"><code>9dd7a09</code></a></td><td><code>Rename file.</code></td></tr></table>\n",
    "created_at": "2017-08-31T05:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358243",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9dd7a09e410bb56541bdac55b38dff8664eff634"><code>9dd7a09</code></a></td><td><code>Rename file.</code></td></tr></table>




---

archive/issue_comments_358244.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhat should be the \"interface\" for the function? I.e. if all is good, should this return `True` or nothing, and if a bug is found, should this raise an exception or return a string telling what went wrong?",
    "created_at": "2017-08-31T07:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358244",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:3" align="right">comment:3</div>

What should be the "interface" for the function? I.e. if all is good, should this return `True` or nothing, and if a bug is found, should this raise an exception or return a string telling what went wrong?



---

archive/issue_comments_358245.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI would say raise an error because that will contain a little more detailed information about what goes wrong and is self-contained (i.e., does not require a separate `print` call).",
    "created_at": "2017-08-31T13:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358245",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

I would say raise an error because that will contain a little more detailed information about what goes wrong and is self-contained (i.e., does not require a separate `print` call).



---

archive/issue_comments_358246.json:
```json
{
    "body": "Changed commit from **[`9dd7a09`](https://github.com/sagemath/sagetrac-mirror/commit/9dd7a09e410bb56541bdac55b38dff8664eff634)** to **[`95a870d`](https://github.com/sagemath/sagetrac-mirror/commit/95a870ddeb9d25f923ec722f451bfd0b05ea0bc8)**",
    "created_at": "2017-09-01T05:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358246",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9dd7a09`](https://github.com/sagemath/sagetrac-mirror/commit/9dd7a09e410bb56541bdac55b38dff8664eff634)** to **[`95a870d`](https://github.com/sagemath/sagetrac-mirror/commit/95a870ddeb9d25f923ec722f451bfd0b05ea0bc8)**



---

archive/issue_comments_358247.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95a870ddeb9d25f923ec722f451bfd0b05ea0bc8\"><code>95a870d</code></a></td><td><code>Added the real code.</code></td></tr></table>\n",
    "created_at": "2017-09-01T05:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358247",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95a870ddeb9d25f923ec722f451bfd0b05ea0bc8"><code>95a870d</code></a></td><td><code>Added the real code.</code></td></tr></table>




---

archive/issue_comments_358248.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n-This patch is just a PoC. For the idea see https://groups.google.com/forum/#!topic/sage-devel/-rVyK8-FQ2s and for the real code to be included here see https://sage.sis.uta.fi/home/pub/153/\n+This is an example of randomized testing of finite lattices. Main idea is to check functions against other: A distributive lattice must be modular, an atom of a lattice must be a coatom of the dual lattice and so on.\n+\n+See https://groups.google.com/forum/#!topic/sage-devel/-rVyK8-FQ2s for discussion.\n+\n``````\n",
    "created_at": "2017-09-01T05:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358248",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
-This patch is just a PoC. For the idea see https://groups.google.com/forum/#!topic/sage-devel/-rVyK8-FQ2s and for the real code to be included here see https://sage.sis.uta.fi/home/pub/153/
+This is an example of randomized testing of finite lattices. Main idea is to check functions against other: A distributive lattice must be modular, an atom of a lattice must be a coatom of the dual lattice and so on.
+
+See https://groups.google.com/forum/#!topic/sage-devel/-rVyK8-FQ2s for discussion.
+
``````




---

archive/issue_events_331710.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-09-01T05:12:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331710"
}
```



---

archive/issue_comments_358249.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYou should put `implications`, `*_properties`, etc. at the module level in case another test file wants to have access them, IMO it is cleaner, and is (marginally) faster.\n\nUse `.. TODO::`.\n\nAlso, why do you need to add those lines for the testing? I think those should not be there and instead the test function should be modified accordingly.",
    "created_at": "2017-09-06T22:05:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358249",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

You should put `implications`, `*_properties`, etc. at the module level in case another test file wants to have access them, IMO it is cleaner, and is (marginally) faster.

Use `.. TODO::`.

Also, why do you need to add those lines for the testing? I think those should not be there and instead the test function should be modified accordingly.



---

archive/issue_comments_358250.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSorry Travis, I think I did not understood.\n\nWhat is \"module level\" in this case? At the root level of `src/sage/tests/finite_poset.py` so that importing the module would import them to the global namespace?\n\nWhat lines you refer in the last paragraph? If you mean `T.is_doubling_any = lambda L: L.is_constructible_by_doublings('any')` etc, then I suggest that I make a helper function for those first. Otherwise the code would be unnecessary complex, as `attrcall('is_'+p)` is currently quite clean solution.",
    "created_at": "2017-09-07T05:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358250",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:8" align="right">comment:8</div>

Sorry Travis, I think I did not understood.

What is "module level" in this case? At the root level of `src/sage/tests/finite_poset.py` so that importing the module would import them to the global namespace?

What lines you refer in the last paragraph? If you mean `T.is_doubling_any = lambda L: L.is_constructible_by_doublings('any')` etc, then I suggest that I make a helper function for those first. Otherwise the code would be unnecessary complex, as `attrcall('is_'+p)` is currently quite clean solution.



---

archive/issue_comments_358251.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jm58660](#comment:8):\n> What is \"module level\" in this case? At the root level of `src/sage/tests/finite_poset.py` so that importing the module would import them to the global namespace?\n\nIn Python: `module == file`. So putting something at the module level means putting it at the base level of the test file. This would also not add anything to the global namespace (in case you're worried).\n\n> What lines you refer in the last paragraph? If you mean `T.is_doubling_any = lambda L: L.is_constructible_by_doublings('any')` etc, then I suggest that I make a helper function for those first. Otherwise the code would be unnecessary complex, as `attrcall('is_'+p)` is currently quite clean solution.\n\nYes, those are the lines I'm talking about. The code that you need to actually run the test is very ugly (and essentially undocumented). I would instead have a helper function that replaces `attrcall` with this:\n\n```python\ndef test_attrcall(name, L):\n    if name == 'is_doubling_any':\n        return L.is_constructible_by_doublings('any')\n    if name == 'is_doubling_lower:\n        return L.is_constructible_by_doublings('upper')\n    if name == 'is_doubling_upper':\n        return L.is_constructible_by_doublings('lower')\n    if name == 'is_doubling_convex':\n        return L.is_constructible_by_doublings('convex')\n    if name == 'is_doubling_interval':\n        return L.is_constructible_by_doublings('interval')\n    if name == 'is_uniq_orthocomplemented':\n        return L.is_orthocomplemented(unique=True)\n    return attrcall(name)(L)\n```\nThis way it is clean because you do not need to change your objects and the code is localized to this file.",
    "created_at": "2017-09-07T05:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358251",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jm58660](#comment:8):
> What is "module level" in this case? At the root level of `src/sage/tests/finite_poset.py` so that importing the module would import them to the global namespace?

In Python: `module == file`. So putting something at the module level means putting it at the base level of the test file. This would also not add anything to the global namespace (in case you're worried).

> What lines you refer in the last paragraph? If you mean `T.is_doubling_any = lambda L: L.is_constructible_by_doublings('any')` etc, then I suggest that I make a helper function for those first. Otherwise the code would be unnecessary complex, as `attrcall('is_'+p)` is currently quite clean solution.

Yes, those are the lines I'm talking about. The code that you need to actually run the test is very ugly (and essentially undocumented). I would instead have a helper function that replaces `attrcall` with this:

```python
def test_attrcall(name, L):
    if name == 'is_doubling_any':
        return L.is_constructible_by_doublings('any')
    if name == 'is_doubling_lower:
        return L.is_constructible_by_doublings('upper')
    if name == 'is_doubling_upper':
        return L.is_constructible_by_doublings('lower')
    if name == 'is_doubling_convex':
        return L.is_constructible_by_doublings('convex')
    if name == 'is_doubling_interval':
        return L.is_constructible_by_doublings('interval')
    if name == 'is_uniq_orthocomplemented':
        return L.is_orthocomplemented(unique=True)
    return attrcall(name)(L)
```
This way it is clean because you do not need to change your objects and the code is localized to this file.



---

archive/issue_comments_358252.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f05e7707a8e29dbfb3868e98139ea406543eca4\"><code>8f05e77</code></a></td><td><code>Merge branch 'develop' into t/23754/test-lattice</code></td></tr></table>\n",
    "created_at": "2017-09-07T06:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358252",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f05e7707a8e29dbfb3868e98139ea406543eca4"><code>8f05e77</code></a></td><td><code>Merge branch 'develop' into t/23754/test-lattice</code></td></tr></table>




---

archive/issue_comments_358253.json:
```json
{
    "body": "Changed commit from **[`95a870d`](https://github.com/sagemath/sagetrac-mirror/commit/95a870ddeb9d25f923ec722f451bfd0b05ea0bc8)** to **[`8f05e77`](https://github.com/sagemath/sagetrac-mirror/commit/8f05e7707a8e29dbfb3868e98139ea406543eca4)**",
    "created_at": "2017-09-07T06:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358253",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`95a870d`](https://github.com/sagemath/sagetrac-mirror/commit/95a870ddeb9d25f923ec722f451bfd0b05ea0bc8)** to **[`8f05e77`](https://github.com/sagemath/sagetrac-mirror/commit/8f05e7707a8e29dbfb3868e98139ea406543eca4)**



---

archive/issue_comments_358254.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e40fef021f70684cbf2f3f58fa707a25aa91981c\"><code>e40fef0</code></a></td><td><code>Reviewer comments.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84e8cbcd767d632366e1bcb3ce5c0a192fe5f0e7\"><code>84e8cbc</code></a></td><td><code>Arghs, a correction.</code></td></tr></table>\n",
    "created_at": "2017-09-07T06:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358254",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e40fef021f70684cbf2f3f58fa707a25aa91981c"><code>e40fef0</code></a></td><td><code>Reviewer comments.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84e8cbcd767d632366e1bcb3ce5c0a192fe5f0e7"><code>84e8cbc</code></a></td><td><code>Arghs, a correction.</code></td></tr></table>




---

archive/issue_comments_358255.json:
```json
{
    "body": "Changed commit from **[`8f05e77`](https://github.com/sagemath/sagetrac-mirror/commit/8f05e7707a8e29dbfb3868e98139ea406543eca4)** to **[`84e8cbc`](https://github.com/sagemath/sagetrac-mirror/commit/84e8cbcd767d632366e1bcb3ce5c0a192fe5f0e7)**",
    "created_at": "2017-09-07T06:33:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358255",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8f05e77`](https://github.com/sagemath/sagetrac-mirror/commit/8f05e7707a8e29dbfb3868e98139ea406543eca4)** to **[`84e8cbc`](https://github.com/sagemath/sagetrac-mirror/commit/84e8cbcd767d632366e1bcb3ce5c0a192fe5f0e7)**



---

archive/issue_comments_358256.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nLike this?",
    "created_at": "2017-09-07T06:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358256",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:12" align="right">comment:12</div>

Like this?



---

archive/issue_comments_358257.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYes, but I want all of those declarations to be *outside* the function (i.e., everything up to `### Relations between boolean-valued properties ###` except for the cardinality test).\n\nYou can remove this line:\n\n```\nThis needs few lines before the test, see example below.\n```\nIt might be good to also add to the doc a short overview list of the things that are tested, e.g.,\n\n```\n- implications of properties\n- mutually exclusive properties\n- (self)dual properties\n- inclusions of subsets\n```\nAlso, small typo:\n\n```diff\n-.. TODO:\n+.. TODO::\n```",
    "created_at": "2017-09-07T12:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358257",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Yes, but I want all of those declarations to be *outside* the function (i.e., everything up to `### Relations between boolean-valued properties ###` except for the cardinality test).

You can remove this line:

```
This needs few lines before the test, see example below.
```
It might be good to also add to the doc a short overview list of the things that are tested, e.g.,

```
- implications of properties
- mutually exclusive properties
- (self)dual properties
- inclusions of subsets
```
Also, small typo:

```diff
-.. TODO:
+.. TODO::
```



---

archive/issue_comments_358258.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad24fe6770a3696ef9f96165019cdf1cfc773037\"><code>ad24fe6</code></a></td><td><code>Move property lists out of the function, add documentation.</code></td></tr></table>\n",
    "created_at": "2017-09-07T12:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358258",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad24fe6770a3696ef9f96165019cdf1cfc773037"><code>ad24fe6</code></a></td><td><code>Move property lists out of the function, add documentation.</code></td></tr></table>




---

archive/issue_comments_358259.json:
```json
{
    "body": "Changed commit from **[`84e8cbc`](https://github.com/sagemath/sagetrac-mirror/commit/84e8cbcd767d632366e1bcb3ce5c0a192fe5f0e7)** to **[`ad24fe6`](https://github.com/sagemath/sagetrac-mirror/commit/ad24fe6770a3696ef9f96165019cdf1cfc773037)**",
    "created_at": "2017-09-07T12:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358259",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84e8cbc`](https://github.com/sagemath/sagetrac-mirror/commit/84e8cbcd767d632366e1bcb3ce5c0a192fe5f0e7)** to **[`ad24fe6`](https://github.com/sagemath/sagetrac-mirror/commit/ad24fe6770a3696ef9f96165019cdf1cfc773037)**



---

archive/issue_comments_358260.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThanks for comments, done those.",
    "created_at": "2017-09-07T12:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358260",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:15" align="right">comment:15</div>

Thanks for comments, done those.



---

archive/issue_comments_358261.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThank you for the changes.\n\nTwo last things:\n\n```diff\n    The function contains tests of different kinds:\n+\n    - Implications of boolean properties. Examples: a distributive lattice is modular,\n```\nand if you could move the `test_getattr` outside the main test function (and add a short one-line description with a doctest testing the modified path and the `getattr` path).",
    "created_at": "2017-09-07T12:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358261",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

Thank you for the changes.

Two last things:

```diff
    The function contains tests of different kinds:
+
    - Implications of boolean properties. Examples: a distributive lattice is modular,
```
and if you could move the `test_getattr` outside the main test function (and add a short one-line description with a doctest testing the modified path and the `getattr` path).



---

archive/issue_comments_358262.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-09-07T12:48:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358262",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_358263.json:
```json
{
    "body": "Changed commit from **[`ad24fe6`](https://github.com/sagemath/sagetrac-mirror/commit/ad24fe6770a3696ef9f96165019cdf1cfc773037)** to **[`2bad8eb`](https://github.com/sagemath/sagetrac-mirror/commit/2bad8eb3ca124e76be1d0225454c56adde60b407)**",
    "created_at": "2017-09-08T10:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358263",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ad24fe6`](https://github.com/sagemath/sagetrac-mirror/commit/ad24fe6770a3696ef9f96165019cdf1cfc773037)** to **[`2bad8eb`](https://github.com/sagemath/sagetrac-mirror/commit/2bad8eb3ca124e76be1d0225454c56adde60b407)**



---

archive/issue_comments_358264.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bad8eb3ca124e76be1d0225454c56adde60b407\"><code>2bad8eb</code></a></td><td><code>Extract test_attrcall() to own function.</code></td></tr></table>\n",
    "created_at": "2017-09-08T10:14:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358264",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bad8eb3ca124e76be1d0225454c56adde60b407"><code>2bad8eb</code></a></td><td><code>Extract test_attrcall() to own function.</code></td></tr></table>




---

archive/issue_comments_358265.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nLike this? I also changed \"boolean\" to \"Boolean\", as I just remembered that is was right spelling in English.",
    "created_at": "2017-09-08T10:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358265",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:18" align="right">comment:18</div>

Like this? I also changed "boolean" to "Boolean", as I just remembered that is was right spelling in English.



---

archive/issue_events_331711.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-08T12:26:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331711"
}
```



---

archive/issue_events_331712.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-08T12:26:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331712"
}
```



---

archive/issue_comments_358266.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nYep. Thank you. I'm not sure about the Boolean vs boolean in this case, so let's just leave it as is. Positive review.",
    "created_at": "2017-09-08T12:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358266",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Yep. Thank you. I'm not sure about the Boolean vs boolean in this case, so let's just leave it as is. Positive review.



---

archive/issue_events_331713.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-11T13:47:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331713"
}
```



---

archive/issue_events_331714.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6248bc0dd29e98ea649293071a5c3fa8aef6003f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-09-11T13:47:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23754#event-331714"
}
```



---

archive/issue_comments_358267.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/test-lattice](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/test-lattice)** to **[`2bad8eb`](https://github.com/sagemath/sagetrac-mirror/commit/2bad8eb3ca124e76be1d0225454c56adde60b407)**",
    "created_at": "2017-09-11T13:47:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23754",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23754#issuecomment-358267",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jmantysalo/test-lattice](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/test-lattice)** to **[`2bad8eb`](https://github.com/sagemath/sagetrac-mirror/commit/2bad8eb3ca124e76be1d0225454c56adde60b407)**
