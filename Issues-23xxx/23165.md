# Issue 23165: valence polynomial for posets

archive/issues_022928.json:
```json
{
    "assignees": [],
    "body": "as a simple useful invariant to have, much finer than cardinality, and still multiplicative for Cartesian product.\n\n\n\nCC:  @jm58660 @darijgr @sagetrac-boussica\n\nBranch/Commit: **[`5f45084`](https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631)**\n\nReviewer: **Darij Grinberg, Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23165_\n\n",
    "closed_at": "2017-06-14T18:18:17Z",
    "created_at": "2017-06-07T20:17:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "valence polynomial for posets",
    "type": "issue",
    "updated_at": "2017-06-14T18:18:17Z",
    "url": "https://github.com/sagemath/sage/issues/23165",
    "user": "https://github.com/fchapoton"
}
```
as a simple useful invariant to have, much finer than cardinality, and still multiplicative for Cartesian product.



CC:  @jm58660 @darijgr @sagetrac-boussica

Branch/Commit: **[`5f45084`](https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631)**

Reviewer: **Darij Grinberg, Travis Scrimshaw**

Author: **Frédéric Chapoton**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/23165_





---

archive/issue_events_322885.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-07T20:17:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322885"
}
```



---

archive/issue_events_322886.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-07T20:17:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322886"
}
```



---

archive/issue_events_322887.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-07T20:17:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322887"
}
```



---

archive/issue_events_322888.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-07T20:17:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322888"
}
```



---

archive/issue_comments_347394.json:
```json
{
    "body": "Branch: **[u/chapoton/23165](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/23165)**",
    "created_at": "2017-06-07T20:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347394",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/23165](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/23165)**



---

archive/issue_comments_347395.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88295c7ad7c2fde67034a418983a6743835e23a8\"><code>88295c7</code></a></td><td><code>implement valence polynomial for posets</code></td></tr></table>\n",
    "created_at": "2017-06-07T20:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347395",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88295c7ad7c2fde67034a418983a6743835e23a8"><code>88295c7</code></a></td><td><code>implement valence polynomial for posets</code></td></tr></table>




---

archive/issue_events_322889.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-07T20:18:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322889"
}
```



---

archive/issue_comments_347396.json:
```json
{
    "body": "Commit: **[`88295c7`](https://github.com/sagemath/sagetrac-mirror/commit/88295c7ad7c2fde67034a418983a6743835e23a8)**",
    "created_at": "2017-06-07T20:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347396",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`88295c7`](https://github.com/sagemath/sagetrac-mirror/commit/88295c7ad7c2fde67034a418983a6743835e23a8)**



---

archive/issue_comments_347397.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nbot is essentially green, please review",
    "created_at": "2017-06-08T19:53:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347397",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

bot is essentially green, please review



---

archive/issue_comments_347398.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI'm not familar with the `polygens` construct -- how clean is it?\n\nAlso, is there a reason not to define this on the level of digraphs?",
    "created_at": "2017-06-08T21:38:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347398",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:3" align="right">comment:3</div>

I'm not familar with the `polygens` construct -- how clean is it?

Also, is there a reason not to define this on the level of digraphs?



---

archive/issue_comments_347399.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSince you also need the parent, I would do\n\n```python\nfrom sage.rings.polynomial.polynomial_ring_constructor import PolynomialRing\nR = PolynomialRing(ZZ, 'x,y')\nx,y = R.gens()\n```\nI also agree with Darij that this should be lifted to a method of `DiGraph` and then call `self._hasse_diagram.valence_polynomial()`.",
    "created_at": "2017-06-08T22:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347399",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

Since you also need the parent, I would do

```python
from sage.rings.polynomial.polynomial_ring_constructor import PolynomialRing
R = PolynomialRing(ZZ, 'x,y')
x,y = R.gens()
```
I also agree with Darij that this should be lifted to a method of `DiGraph` and then call `self._hasse_diagram.valence_polynomial()`.



---

archive/issue_comments_347400.json:
```json
{
    "body": "Changed commit from **[`88295c7`](https://github.com/sagemath/sagetrac-mirror/commit/88295c7ad7c2fde67034a418983a6743835e23a8)** to **[`96bc758`](https://github.com/sagemath/sagetrac-mirror/commit/96bc75877b7631305e9dd0dbbf3a8bfe1dd250a9)**",
    "created_at": "2017-06-09T06:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347400",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`88295c7`](https://github.com/sagemath/sagetrac-mirror/commit/88295c7ad7c2fde67034a418983a6743835e23a8)** to **[`96bc758`](https://github.com/sagemath/sagetrac-mirror/commit/96bc75877b7631305e9dd0dbbf3a8bfe1dd250a9)**



---

archive/issue_comments_347401.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96bc75877b7631305e9dd0dbbf3a8bfe1dd250a9\"><code>96bc758</code></a></td><td><code>trac 23165 moving the method to digraphs</code></td></tr></table>\n",
    "created_at": "2017-06-09T06:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347401",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96bc75877b7631305e9dd0dbbf3a8bfe1dd250a9"><code>96bc758</code></a></td><td><code>trac 23165 moving the method to digraphs</code></td></tr></table>




---

archive/issue_comments_347402.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\ndone",
    "created_at": "2017-06-09T07:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347402",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

done



---

archive/issue_comments_347403.json:
```json
{
    "body": "Reviewer: **Darij Grinberg, Travis Scrimshaw**",
    "created_at": "2017-06-09T07:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347403",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Darij Grinberg, Travis Scrimshaw**



---

archive/issue_events_322890.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-09T07:58:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322890"
}
```



---

archive/issue_events_322891.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-09T07:58:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322891"
}
```



---

archive/issue_comments_347404.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThanks.",
    "created_at": "2017-06-09T07:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347404",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Thanks.



---

archive/issue_events_322892.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-12T19:22:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322892"
}
```



---

archive/issue_events_322893.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-12T19:22:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322893"
}
```



---

archive/issue_comments_347405.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\npdf docs don't build",
    "created_at": "2017-06-12T19:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347405",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:8" align="right">comment:8</div>

pdf docs don't build



---

archive/issue_comments_347406.json:
```json
{
    "body": "Changed commit from **[`96bc758`](https://github.com/sagemath/sagetrac-mirror/commit/96bc75877b7631305e9dd0dbbf3a8bfe1dd250a9)** to **[`5f45084`](https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631)**",
    "created_at": "2017-06-12T20:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347406",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`96bc758`](https://github.com/sagemath/sagetrac-mirror/commit/96bc75877b7631305e9dd0dbbf3a8bfe1dd250a9)** to **[`5f45084`](https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631)**



---

archive/issue_comments_347407.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/625bca1ce4096bb48350640c95de5a4ad731bb4a\"><code>625bca1</code></a></td><td><code>Merge branch 'u/chapoton/23165' in 8.0.b10</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631\"><code>5f45084</code></a></td><td><code>trac 23165 fixing pdf docbuild</code></td></tr></table>\n",
    "created_at": "2017-06-12T20:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347407",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/625bca1ce4096bb48350640c95de5a4ad731bb4a"><code>625bca1</code></a></td><td><code>Merge branch 'u/chapoton/23165' in 8.0.b10</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631"><code>5f45084</code></a></td><td><code>trac 23165 fixing pdf docbuild</code></td></tr></table>




---

archive/issue_comments_347408.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nindeed. May be better now ?\n  \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/625bca1ce4096bb48350640c95de5a4ad731bb4a\"><code>625bca1</code></a></td><td><code>Merge branch 'u/chapoton/23165' in 8.0.b10</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631\"><code>5f45084</code></a></td><td><code>trac 23165 fixing pdf docbuild</code></td></tr></table>\n",
    "created_at": "2017-06-12T20:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347408",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

indeed. May be better now ?
  
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/625bca1ce4096bb48350640c95de5a4ad731bb4a"><code>625bca1</code></a></td><td><code>Merge branch 'u/chapoton/23165' in 8.0.b10</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631"><code>5f45084</code></a></td><td><code>trac 23165 fixing pdf docbuild</code></td></tr></table>




---

archive/issue_events_322894.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-12T20:15:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322894"
}
```



---

archive/issue_events_322895.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-12T20:15:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322895"
}
```



---

archive/issue_events_322896.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-12T22:18:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322896"
}
```



---

archive/issue_events_322897.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-12T22:18:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322897"
}
```



---

archive/issue_comments_347409.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYes, this is better.",
    "created_at": "2017-06-12T22:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347409",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

Yes, this is better.



---

archive/issue_events_322898.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-14T18:18:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322898"
}
```



---

archive/issue_events_322899.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "47dfe32828b660e781a4b077e1c49df9f26476e9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-14T18:18:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23165#event-322899"
}
```



---

archive/issue_comments_347410.json:
```json
{
    "body": "Changed branch from **[u/chapoton/23165](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/23165)** to **[`5f45084`](https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631)**",
    "created_at": "2017-06-14T18:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23165#issuecomment-347410",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/23165](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/23165)** to **[`5f45084`](https://github.com/sagemath/sagetrac-mirror/commit/5f45084a37a8053627da60a147b46610c6f2b631)**
