# Issue 23744: Don't use SAGE_CYTHONIZED in sage_include_directories(sources=True)

archive/issues_023507.json:
```json
{
    "body": "Currently, `SAGE_CYTHONIZED` is used by `src/sage/env.py` to determine some include directories while building Sage.\n\nSince we want to get rid of `SAGE_CYTHONIZED` (#21535), a first step would be to move this bit to `setup.py` in order to concentrate all uses of `SAGE_CYTHONIZED` in one place.\n\nCC:  @mkoeppe @embray\n\nBranch/Commit: [33746a28f185fbabd69319ca3cde6a7316dff017](https://github.com/sagemath/sagetrac-mirror/commit/33746a28f185fbabd69319ca3cde6a7316dff017)\n\nReviewer: Erik Bray\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23744\n\n",
    "closed_at": "2017-09-10T11:57:13Z",
    "created_at": "2017-08-29T13:31:20Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Don't use SAGE_CYTHONIZED in sage_include_directories(sources=True)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23744",
    "user": "https://github.com/jdemeyer"
}
```
Currently, `SAGE_CYTHONIZED` is used by `src/sage/env.py` to determine some include directories while building Sage.

Since we want to get rid of `SAGE_CYTHONIZED` (#21535), a first step would be to move this bit to `setup.py` in order to concentrate all uses of `SAGE_CYTHONIZED` in one place.

CC:  @mkoeppe @embray

Branch/Commit: [33746a28f185fbabd69319ca3cde6a7316dff017](https://github.com/sagemath/sagetrac-mirror/commit/33746a28f185fbabd69319ca3cde6a7316dff017)

Reviewer: Erik Bray

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23744





---

archive/issue_comments_450417.json:
```json
{
    "body": "Branch: [u/jdemeyer/don_t_use_sage_cythonized_in_sage_include_directories_sources_true_](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/don_t_use_sage_cythonized_in_sage_include_directories_sources_true_)",
    "created_at": "2017-08-30T12:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450417",
    "user": "https://github.com/jdemeyer"
}
```

Branch: [u/jdemeyer/don_t_use_sage_cythonized_in_sage_include_directories_sources_true_](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/don_t_use_sage_cythonized_in_sage_include_directories_sources_true_)



---

archive/issue_comments_450418.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-30T13:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450418",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_450419.json:
```json
{
    "body": "Commit: [33746a28f185fbabd69319ca3cde6a7316dff017](https://github.com/sagemath/sagetrac-mirror/commit/33746a28f185fbabd69319ca3cde6a7316dff017)",
    "created_at": "2017-08-30T13:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450419",
    "user": "https://github.com/jdemeyer"
}
```

Commit: [33746a28f185fbabd69319ca3cde6a7316dff017](https://github.com/sagemath/sagetrac-mirror/commit/33746a28f185fbabd69319ca3cde6a7316dff017)



---

archive/issue_comments_450420.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[33746a2](https://github.com/sagemath/sagetrac-mirror/commit/33746a28f185fbabd69319ca3cde6a7316dff017)|`Don't use SAGE_CYTHONIZED in sage_include_directories()`|",
    "created_at": "2017-08-30T13:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450420",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[33746a2](https://github.com/sagemath/sagetrac-mirror/commit/33746a28f185fbabd69319ca3cde6a7316dff017)|`Don't use SAGE_CYTHONIZED in sage_include_directories()`|



---

archive/issue_comments_450421.json:
```json
{
    "body": "<a id='comment:3'></a>\nI wonder what would happen if we also went ahead and deleted line 110 of sage.env:\n\n```\n_add_variable_or_fallback('SAGE_CYTHONIZED', opj('$SAGE_ROOT', 'src', 'build', 'cythonized'))\n```\n\nThat could wait 'til a later change though.   Looks good to me otherwise.  I agree this is a good first step to removing it entirely.",
    "created_at": "2017-08-31T10:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450421",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>
I wonder what would happen if we also went ahead and deleted line 110 of sage.env:

```
_add_variable_or_fallback('SAGE_CYTHONIZED', opj('$SAGE_ROOT', 'src', 'build', 'cythonized'))
```

That could wait 'til a later change though.   Looks good to me otherwise.  I agree this is a good first step to removing it entirely.



---

archive/issue_comments_450422.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-31T10:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450422",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_450423.json:
```json
{
    "body": "Reviewer: Erik Bray",
    "created_at": "2017-08-31T10:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450423",
    "user": "https://github.com/embray"
}
```

Reviewer: Erik Bray



---

archive/issue_comments_450424.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [embray](#comment%3A3):\n> I wonder what would happen if we also went ahead and deleted line 110 of sage.env:\n> \n> \n> ```\n> _add_variable_or_fallback('SAGE_CYTHONIZED', opj('$SAGE_ROOT', 'src', 'build', 'cythonized'))\n> ```\n\n\nSome doctests in `src/sage_setup` use that.",
    "created_at": "2017-08-31T10:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450424",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Replying to [embray](#comment%3A3):
> I wonder what would happen if we also went ahead and deleted line 110 of sage.env:
> 
> 
> ```
> _add_variable_or_fallback('SAGE_CYTHONIZED', opj('$SAGE_ROOT', 'src', 'build', 'cythonized'))
> ```


Some doctests in `src/sage_setup` use that.



---

archive/issue_comments_450425.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-10T11:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450425",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_450426.json:
```json
{
    "body": "Changing branch from \"[u/jdemeyer/don_t_use_sage_cythonized_in_sage_include_directories_sources_true_](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/don_t_use_sage_cythonized_in_sage_include_directories_sources_true_)\" to \"[33746a28f185fbabd69319ca3cde6a7316dff017](https://github.com/sagemath/sagetrac-mirror/commit/33746a28f185fbabd69319ca3cde6a7316dff017)\"",
    "created_at": "2017-09-10T11:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23744#issuecomment-450426",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/jdemeyer/don_t_use_sage_cythonized_in_sage_include_directories_sources_true_](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/don_t_use_sage_cythonized_in_sage_include_directories_sources_true_)" to "[33746a28f185fbabd69319ca3cde6a7316dff017](https://github.com/sagemath/sagetrac-mirror/commit/33746a28f185fbabd69319ca3cde6a7316dff017)"



---

archive/issue_events_068941.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-10T11:57:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23744",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23744#event-68941"
}
```
