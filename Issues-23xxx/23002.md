# Issue 23002: Make bridges method for graphs an iterator

archive/issues_022765.json:
```json
{
    "assignees": [],
    "body": "The bridges method for graphs returns a list. Here we return an iterator.\n\nCC:  @sagetrac-tpetiteau @sagetrac-cchretien @dcoudert\n\nBranch/Commit: **[`5a42869`](https://github.com/sagemath/sagetrac-mirror/commit/5a4286984f499cd442d3e2018644d593b7924634)**\n\nReviewer: **David Coudert**\n\nAuthor: **Thierry Monteil**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23002_\n\n",
    "closed_at": "2020-09-01T23:00:14Z",
    "created_at": "2017-05-15T10:03:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make bridges method for graphs an iterator",
    "type": "issue",
    "updated_at": "2020-09-01T23:00:14Z",
    "url": "https://github.com/sagemath/sage/issues/23002",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
The bridges method for graphs returns a list. Here we return an iterator.

CC:  @sagetrac-tpetiteau @sagetrac-cchretien @dcoudert

Branch/Commit: **[`5a42869`](https://github.com/sagemath/sagetrac-mirror/commit/5a4286984f499cd442d3e2018644d593b7924634)**

Reviewer: **David Coudert**

Author: **Thierry Monteil**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/23002_





---

archive/issue_events_322338.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2017-05-15T10:03:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322338"
}
```



---

archive/issue_events_322339.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2017-05-15T10:03:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322339"
}
```



---

archive/issue_events_322340.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2017-05-15T10:03:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322340"
}
```



---

archive/issue_events_322341.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2017-05-15T10:03:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322341"
}
```



---

archive/issue_comments_344082.json:
```json
{
    "body": "Branch: **[u/tmonteil/make_bridges_method_for_graphs_an_iterator](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/make_bridges_method_for_graphs_an_iterator)**",
    "created_at": "2017-05-15T10:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344082",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Branch: **[u/tmonteil/make_bridges_method_for_graphs_an_iterator](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/make_bridges_method_for_graphs_an_iterator)**



---

archive/issue_comments_344083.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b9e7499e156824cd533e4e39fd5b461e37b4765\"><code>5b9e749</code></a></td><td><code>Trac #23002: bridges method for graphs becomes an iterator.</code></td></tr></table>\n",
    "created_at": "2017-05-15T10:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344083",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b9e7499e156824cd533e4e39fd5b461e37b4765"><code>5b9e749</code></a></td><td><code>Trac #23002: bridges method for graphs becomes an iterator.</code></td></tr></table>




---

archive/issue_comments_344084.json:
```json
{
    "body": "Commit: **[`5b9e749`](https://github.com/sagemath/sagetrac-mirror/commit/5b9e7499e156824cd533e4e39fd5b461e37b4765)**",
    "created_at": "2017-05-15T10:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344084",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Commit: **[`5b9e749`](https://github.com/sagemath/sagetrac-mirror/commit/5b9e7499e156824cd533e4e39fd5b461e37b4765)**



---

archive/issue_events_322342.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2017-05-15T10:08:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322342"
}
```



---

archive/issue_comments_344085.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhat's the motivation for this change ?",
    "created_at": "2017-05-15T11:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344085",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

What's the motivation for this change ?



---

archive/issue_comments_344086.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nToday, i am meeting two students who did some Sage development and show them how to contribute their code (related to spanning-trees for digraphs and sandpiles), so we took an existing method and i explained the whole git/trac process, and since we were discussing the difference list/iterator, we chosed that one. So, indeed, this is not an important change regarding Sage, but it has some pedagogical interest.\n\nWile being a minor improvement, this commit adds some tests to that method ; also, when possible, iterators are prefered over lists, as they save a lot of memory while being as fast, which can be critical for some backtracking or search algorithms, where such constructions can be stacked.\n\nThis is becoming the default case with Python3, where even `range` becomes an iterator. Ideally, most method should behave that way (when there is no cost). In particular, in the longer term, i am in favor to replace things like `neighbor_iterator` by `neighbors` and `neighbors` by nothing, while the user can write `list(G.neighbors())` if she explicitely wants to store the whole stuff for reuse.",
    "created_at": "2017-05-15T12:29:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344086",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:4" align="right">comment:4</div>

Today, i am meeting two students who did some Sage development and show them how to contribute their code (related to spanning-trees for digraphs and sandpiles), so we took an existing method and i explained the whole git/trac process, and since we were discussing the difference list/iterator, we chosed that one. So, indeed, this is not an important change regarding Sage, but it has some pedagogical interest.

Wile being a minor improvement, this commit adds some tests to that method ; also, when possible, iterators are prefered over lists, as they save a lot of memory while being as fast, which can be critical for some backtracking or search algorithms, where such constructions can be stacked.

This is becoming the default case with Python3, where even `range` becomes an iterator. Ideally, most method should behave that way (when there is no cost). In particular, in the longer term, i am in favor to replace things like `neighbor_iterator` by `neighbors` and `neighbors` by nothing, while the user can write `list(G.neighbors())` if she explicitely wants to store the whole stuff for reuse.



---

archive/issue_comments_344087.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nok, I understand the motivation. It will certainly be a very hard task to change all the graph module. It is not always easy/possible to do. See for instance #22613.\n\nQ: do you also plan to ask your students to review this ticket? the code looks good to me.",
    "created_at": "2017-05-15T12:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344087",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:5" align="right">comment:5</div>

ok, I understand the motivation. It will certainly be a very hard task to change all the graph module. It is not always easy/possible to do. See for instance #22613.

Q: do you also plan to ask your students to review this ticket? the code looks good to me.



---

archive/issue_comments_344088.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@dcoudert](#comment:5):\n> ok, I understand the motivation. It will certainly be a very hard task to change all the graph module. It is not always easy/possible to do. See for instance #22613.\n\nAgree, it is especially unfeasible for things that require recurrent access to data (e.g. dynamic programming).\n\n> Q: do you also plan to ask your students to review this ticket? the code looks good to me.\n\nIf it is OK for you, go ahead, i guess it is better for them to first create tickets and recieve lots of comments from experienced devs about their code (doctests, naming conventions, ...).",
    "created_at": "2017-05-15T13:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344088",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@dcoudert](#comment:5):
> ok, I understand the motivation. It will certainly be a very hard task to change all the graph module. It is not always easy/possible to do. See for instance #22613.

Agree, it is especially unfeasible for things that require recurrent access to data (e.g. dynamic programming).

> Q: do you also plan to ask your students to review this ticket? the code looks good to me.

If it is OK for you, go ahead, i guess it is better for them to first create tickets and recieve lots of comments from experienced devs about their code (doctests, naming conventions, ...).



---

archive/issue_comments_344089.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nA quick comments: Instead of `raise StopIteration`, you should simply have a `return`. Also, while you are at is, change `Returns` -> `Return` in the 1-line docstring.\n\nA more serious comment: This is a backwards incompatible change. So I would instead introduce a new method `bridges_iterator` similar to other methods in graphs (e.g., `degree`, `subgraph_search`, `edge_iterator`/`edges`).",
    "created_at": "2017-05-15T13:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344089",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

A quick comments: Instead of `raise StopIteration`, you should simply have a `return`. Also, while you are at is, change `Returns` -> `Return` in the 1-line docstring.

A more serious comment: This is a backwards incompatible change. So I would instead introduce a new method `bridges_iterator` similar to other methods in graphs (e.g., `degree`, `subgraph_search`, `edge_iterator`/`edges`).



---

archive/issue_comments_344090.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@tscrim](#comment:7):\n> A quick comments: Instead of `raise StopIteration`, you should simply have a `return`. Also, while you are at is, change `Returns` -> `Return` in the 1-line docstring.\n\nThanks, this indeed cleaner, i will do it.\n\n> A more serious comment: This is a backwards incompatible change. So I would instead introduce a new method `bridges_iterator` similar to other methods in graphs (e.g., `degree`, `subgraph_search`, `edge_iterator`/`edges`).\n\nWell, i am more in favor to remove the `_iterator` in other methods as explained in [comment:4](#comment:4) or we are going to get entangled. When we will move to Python 3, should we define a `range_iterator` wrapper ?\n\nRegarding the `edges` method, returning a list has a very bad side effect: a list is an iterable but also a container, but the containment is ill-defined for graphs:\n\n```\nsage: G = graphs.PetersenGraph()\nsage: (0, 1) in G.edges(labels=False)\nTrue\nsage: (1,0) in G.edges(labels=False)\nFalse\nsage: G.has_edge((1,0))\nTrue\n```\n\nThis causes a lot of troubles as it does not even raise a warning.\n\nMy longer term plans would be to define an `edge()` view (\u00e0 la `numpy`), with `__contains__` pointing to `has_edge`, and `__iter__` pointing to `edge_iterator`, so that every feature works correctly with a \tpleasant syntax.",
    "created_at": "2017-05-15T14:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344090",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@tscrim](#comment:7):
> A quick comments: Instead of `raise StopIteration`, you should simply have a `return`. Also, while you are at is, change `Returns` -> `Return` in the 1-line docstring.

Thanks, this indeed cleaner, i will do it.

> A more serious comment: This is a backwards incompatible change. So I would instead introduce a new method `bridges_iterator` similar to other methods in graphs (e.g., `degree`, `subgraph_search`, `edge_iterator`/`edges`).

Well, i am more in favor to remove the `_iterator` in other methods as explained in [comment:4](#comment:4) or we are going to get entangled. When we will move to Python 3, should we define a `range_iterator` wrapper ?

Regarding the `edges` method, returning a list has a very bad side effect: a list is an iterable but also a container, but the containment is ill-defined for graphs:

```
sage: G = graphs.PetersenGraph()
sage: (0, 1) in G.edges(labels=False)
True
sage: (1,0) in G.edges(labels=False)
False
sage: G.has_edge((1,0))
True
```

This causes a lot of troubles as it does not even raise a warning.

My longer term plans would be to define an `edge()` view (à la `numpy`), with `__contains__` pointing to `has_edge`, and `__iter__` pointing to `edge_iterator`, so that every feature works correctly with a 	pleasant syntax.



---

archive/issue_comments_344091.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bf5687308d4ea6faf7db373247ebace226cab0c\"><code>0bf5687</code></a></td><td><code>#23002 : apply suggestions made in comment 7.</code></td></tr></table>\n",
    "created_at": "2017-05-15T14:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344091",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bf5687308d4ea6faf7db373247ebace226cab0c"><code>0bf5687</code></a></td><td><code>#23002 : apply suggestions made in comment 7.</code></td></tr></table>




---

archive/issue_comments_344092.json:
```json
{
    "body": "Changed commit from **[`5b9e749`](https://github.com/sagemath/sagetrac-mirror/commit/5b9e7499e156824cd533e4e39fd5b461e37b4765)** to **[`0bf5687`](https://github.com/sagemath/sagetrac-mirror/commit/0bf5687308d4ea6faf7db373247ebace226cab0c)**",
    "created_at": "2017-05-15T14:46:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344092",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5b9e749`](https://github.com/sagemath/sagetrac-mirror/commit/5b9e7499e156824cd533e4e39fd5b461e37b4765)** to **[`0bf5687`](https://github.com/sagemath/sagetrac-mirror/commit/0bf5687308d4ea6faf7db373247ebace226cab0c)**



---

archive/issue_comments_344093.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nyou wrote in the test section: `g.bridges().next()`. Isn't it better to write `next(g.bridges())` in Python3 ?",
    "created_at": "2017-05-15T15:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344093",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:10" align="right">comment:10</div>

you wrote in the test section: `g.bridges().next()`. Isn't it better to write `next(g.bridges())` in Python3 ?



---

archive/issue_comments_344094.json:
```json
{
    "body": "Changed commit from **[`0bf5687`](https://github.com/sagemath/sagetrac-mirror/commit/0bf5687308d4ea6faf7db373247ebace226cab0c)** to **[`416ac32`](https://github.com/sagemath/sagetrac-mirror/commit/416ac326de1f6c1f0b1710cbff1b8ba904102bce)**",
    "created_at": "2017-05-15T15:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344094",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0bf5687`](https://github.com/sagemath/sagetrac-mirror/commit/0bf5687308d4ea6faf7db373247ebace226cab0c)** to **[`416ac32`](https://github.com/sagemath/sagetrac-mirror/commit/416ac326de1f6c1f0b1710cbff1b8ba904102bce)**



---

archive/issue_comments_344095.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/416ac326de1f6c1f0b1710cbff1b8ba904102bce\"><code>416ac32</code></a></td><td><code>Trac #23002: comment 10 (Python 3 compatibility).</code></td></tr></table>\n",
    "created_at": "2017-05-15T15:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344095",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/416ac326de1f6c1f0b1710cbff1b8ba904102bce"><code>416ac32</code></a></td><td><code>Trac #23002: comment 10 (Python 3 compatibility).</code></td></tr></table>




---

archive/issue_comments_344096.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@dcoudert](#comment:10):\n> you wrote in the test section: `g.bridges().next()`. Isn't it better to write `next(g.bridges())` in Python3 ?\n\nIndeed !",
    "created_at": "2017-05-15T15:23:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344096",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@dcoudert](#comment:10):
> you wrote in the test section: `g.bridges().next()`. Isn't it better to write `next(g.bridges())` in Python3 ?

Indeed !



---

archive/issue_comments_344097.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@sagetrac-tmonteil](#comment:8):\n> Replying to [@tscrim](#comment:7):\n> > A more serious comment: This is a backwards incompatible change. So I would instead introduce a new method `bridges_iterator` similar to other methods in graphs (e.g., `degree`, `subgraph_search`, `edge_iterator`/`edges`).\n\n> \n> Well, i am more in favor to remove the `_iterator` in other methods as explained in [comment:4](#comment:4) or we are going to get entangled. When we will move to Python 3, should we define a `range_iterator` wrapper ?\n\nI do not disagree with this, but at this point we should try to be as consistent as possible. If we are going to change the behavior, we should do it for all or most such methods at once to reduce the backwards breaking shock. Although we could put a deprecation warning in `bridges` to say it will return an iterator and while we add the `bridges_iterator`, we add it with a deprecation as well saying we will just have an iterator version of `bridges` in a year.\n\n> Regarding the `edges` method, returning a list has a very bad side effect: a list is an iterable but also a container, but the containment is ill-defined for graphs:\n> \n> ```\n> sage: G = graphs.PetersenGraph()\n> sage: (0, 1) in G.edges(labels=False)\n> True\n> sage: (1,0) in G.edges(labels=False)\n> False\n> sage: G.has_edge((1,0))\n> True\n> ```\n> \n> This causes a lot of troubles as it does not even raise a warning.\n\n>\n> My longer term plans would be to define an `edge()` view (\u00e0 la `numpy`), with `__contains__` pointing to `has_edge`, and `__iter__` pointing to `edge_iterator`, so that every feature works correctly with a \tpleasant syntax.\n\nThat one is a much harder and more subtle issue (which deserves a separate ticket). My first thought was basically what you are suggesting too. +1",
    "created_at": "2017-05-15T16:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344097",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@sagetrac-tmonteil](#comment:8):
> Replying to [@tscrim](#comment:7):
> > A more serious comment: This is a backwards incompatible change. So I would instead introduce a new method `bridges_iterator` similar to other methods in graphs (e.g., `degree`, `subgraph_search`, `edge_iterator`/`edges`).

> 
> Well, i am more in favor to remove the `_iterator` in other methods as explained in [comment:4](#comment:4) or we are going to get entangled. When we will move to Python 3, should we define a `range_iterator` wrapper ?

I do not disagree with this, but at this point we should try to be as consistent as possible. If we are going to change the behavior, we should do it for all or most such methods at once to reduce the backwards breaking shock. Although we could put a deprecation warning in `bridges` to say it will return an iterator and while we add the `bridges_iterator`, we add it with a deprecation as well saying we will just have an iterator version of `bridges` in a year.

> Regarding the `edges` method, returning a list has a very bad side effect: a list is an iterable but also a container, but the containment is ill-defined for graphs:
> 
> ```
> sage: G = graphs.PetersenGraph()
> sage: (0, 1) in G.edges(labels=False)
> True
> sage: (1,0) in G.edges(labels=False)
> False
> sage: G.has_edge((1,0))
> True
> ```
> 
> This causes a lot of troubles as it does not even raise a warning.

>
> My longer term plans would be to define an `edge()` view (à la `numpy`), with `__contains__` pointing to `has_edge`, and `__iter__` pointing to `edge_iterator`, so that every feature works correctly with a 	pleasant syntax.

That one is a much harder and more subtle issue (which deserves a separate ticket). My first thought was basically what you are suggesting too. +1



---

archive/issue_comments_344098.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@tscrim](#comment:13):\n> Replying to [@sagetrac-tmonteil](#comment:8):\n> > Replying to [@tscrim](#comment:7):\n> > > A more serious comment: This is a backwards incompatible change. So I would instead introduce a new method `bridges_iterator` similar to other methods in graphs (e.g., `degree`, `subgraph_search`, `edge_iterator`/`edges`).\n\n> > \n> > Well, i am more in favor to remove the `_iterator` in other methods as explained in [comment:4](#comment:4) or we are going to get entangled. When we will move to Python 3, should we define a `range_iterator` wrapper ?\n\n> \n> I do not disagree with this, but at this point we should try to be as consistent as possible. If we are going to change the behavior, we should do it for all or most such methods at once to reduce the backwards breaking shock. Although we could put a deprecation warning in `bridges` to say it will return an iterator and while we add the `bridges_iterator`, we add it with a deprecation as well saying we will just have an iterator version of `bridges` in a year.\n\nThere will be no deprecation warning to say that we switch to Python3 (which is the next stable release). Hence I don't feel like we need something to advertise the switch. However, I agree that doing it all at once in sage 8.0 for all methods that we want to be converted would be much better.",
    "created_at": "2017-05-22T18:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344098",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@tscrim](#comment:13):
> Replying to [@sagetrac-tmonteil](#comment:8):
> > Replying to [@tscrim](#comment:7):
> > > A more serious comment: This is a backwards incompatible change. So I would instead introduce a new method `bridges_iterator` similar to other methods in graphs (e.g., `degree`, `subgraph_search`, `edge_iterator`/`edges`).

> > 
> > Well, i am more in favor to remove the `_iterator` in other methods as explained in [comment:4](#comment:4) or we are going to get entangled. When we will move to Python 3, should we define a `range_iterator` wrapper ?

> 
> I do not disagree with this, but at this point we should try to be as consistent as possible. If we are going to change the behavior, we should do it for all or most such methods at once to reduce the backwards breaking shock. Although we could put a deprecation warning in `bridges` to say it will return an iterator and while we add the `bridges_iterator`, we add it with a deprecation as well saying we will just have an iterator version of `bridges` in a year.

There will be no deprecation warning to say that we switch to Python3 (which is the next stable release). Hence I don't feel like we need something to advertise the switch. However, I agree that doing it all at once in sage 8.0 for all methods that we want to be converted would be much better.



---

archive/issue_comments_344099.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI am pretty sure we are *not* switching to Python3 in 8.0. The big changes are the default notebook and support for Cygwin. We still have a bit of work before we are ready to be Python3 compatible, but that isn't way off in the future now.\n\nHowever, I think there are still differences between Python's view objects and true iterators being returned. Plus, `list` will still be perfectly valid in Python3, so changing to an iterator is still a separate can of worms in my mind.",
    "created_at": "2017-05-22T18:36:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344099",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

I am pretty sure we are *not* switching to Python3 in 8.0. The big changes are the default notebook and support for Cygwin. We still have a bit of work before we are ready to be Python3 compatible, but that isn't way off in the future now.

However, I think there are still differences between Python's view objects and true iterators being returned. Plus, `list` will still be perfectly valid in Python3, so changing to an iterator is still a separate can of worms in my mind.



---

archive/issue_comments_344100.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n[comment:8](https://github.com/sagemath/sage/issues/23002#comment:8) makes me realize that the `bridges` method makes the strong assumption that not only edges are ordered (we use `(0, 1)` and not `(1,0)`) but also blocks (we have block `[0, 1]` and not block `[1, 0]`). If we want to strengthen the method to avoid future problems, we could make `ME` a graph and then use `ME.has_edge(tuple(b))`,  or use a faster method if any.\n\nThen we should conclude on this ticket. Either we decide that we continue the current practice and create method `bridge_iterator`, or we consider that as a first step toward turning all methods to iterators we start with `bridges`.",
    "created_at": "2017-05-23T07:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344100",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:16" align="right">comment:16</div>

[comment:8](https://github.com/sagemath/sage/issues/23002#comment:8) makes me realize that the `bridges` method makes the strong assumption that not only edges are ordered (we use `(0, 1)` and not `(1,0)`) but also blocks (we have block `[0, 1]` and not block `[1, 0]`). If we want to strengthen the method to avoid future problems, we could make `ME` a graph and then use `ME.has_edge(tuple(b))`,  or use a faster method if any.

Then we should conclude on this ticket. Either we decide that we continue the current practice and create method `bridge_iterator`, or we consider that as a first step toward turning all methods to iterators we start with `bridges`.



---

archive/issue_comments_344101.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nA view/container object is not the same as an iterator; in particular, you (can) have a `__contains__` method. So changing the output to be an iterator would still be a backwards incompatible change. Yet, a view/container object would only be if there was no `__contains__`, but not having that would defeat its purpose.\n\nI'm still -1 on making this into an iterator and say we should keep the current practice of having an iterator method.",
    "created_at": "2017-05-24T21:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344101",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

A view/container object is not the same as an iterator; in particular, you (can) have a `__contains__` method. So changing the output to be an iterator would still be a backwards incompatible change. Yet, a view/container object would only be if there was no `__contains__`, but not having that would defeat its purpose.

I'm still -1 on making this into an iterator and say we should keep the current practice of having an iterator method.



---

archive/issue_events_322343.json:
```json
{
    "actor": "https://github.com/heluani",
    "created_at": "2020-08-25T20:57:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322343"
}
```



---

archive/issue_events_322344.json:
```json
{
    "actor": "https://github.com/heluani",
    "created_at": "2020-08-25T20:57:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322344"
}
```



---

archive/issue_comments_344102.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nred branch",
    "created_at": "2020-08-25T20:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344102",
    "user": "https://github.com/heluani"
}
```

<div id="comment:18" align="right">comment:18</div>

red branch



---

archive/issue_comments_344103.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dbfb245bca94607f90e79975238ef3de81fe21a\"><code>7dbfb24</code></a></td><td><code>#23002 : make bridges method for graphs an iterator</code></td></tr></table>\n",
    "created_at": "2020-08-28T19:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344103",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dbfb245bca94607f90e79975238ef3de81fe21a"><code>7dbfb24</code></a></td><td><code>#23002 : make bridges method for graphs an iterator</code></td></tr></table>




---

archive/issue_comments_344104.json:
```json
{
    "body": "Changed commit from **[`416ac32`](https://github.com/sagemath/sagetrac-mirror/commit/416ac326de1f6c1f0b1710cbff1b8ba904102bce)** to **[`7dbfb24`](https://github.com/sagemath/sagetrac-mirror/commit/7dbfb245bca94607f90e79975238ef3de81fe21a)**",
    "created_at": "2020-08-28T19:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344104",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`416ac32`](https://github.com/sagemath/sagetrac-mirror/commit/416ac326de1f6c1f0b1710cbff1b8ba904102bce)** to **[`7dbfb24`](https://github.com/sagemath/sagetrac-mirror/commit/7dbfb245bca94607f90e79975238ef3de81fe21a)**



---

archive/issue_events_322345.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-08-28T19:57:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322345"
}
```



---

archive/issue_events_322346.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-08-28T19:57:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322346"
}
```



---

archive/issue_comments_344105.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@heluani](#comment:18):\n> red branch\n\ngreen again :)",
    "created_at": "2020-08-28T19:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344105",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@heluani](#comment:18):
> red branch

green again :)



---

archive/issue_comments_344106.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\n\n```diff\n-        sage: list(list(bridges(g)))\n+        sage: list(bridges(g))\n```",
    "created_at": "2020-08-28T20:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344106",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:21" align="right">comment:21</div>


```diff
-        sage: list(list(bridges(g)))
+        sage: list(bridges(g))
```



---

archive/issue_comments_344107.json:
```json
{
    "body": "Changed commit from **[`7dbfb24`](https://github.com/sagemath/sagetrac-mirror/commit/7dbfb245bca94607f90e79975238ef3de81fe21a)** to **[`5a42869`](https://github.com/sagemath/sagetrac-mirror/commit/5a4286984f499cd442d3e2018644d593b7924634)**",
    "created_at": "2020-08-28T20:48:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344107",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7dbfb24`](https://github.com/sagemath/sagetrac-mirror/commit/7dbfb245bca94607f90e79975238ef3de81fe21a)** to **[`5a42869`](https://github.com/sagemath/sagetrac-mirror/commit/5a4286984f499cd442d3e2018644d593b7924634)**



---

archive/issue_comments_344108.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a4286984f499cd442d3e2018644d593b7924634\"><code>5a42869</code></a></td><td><code>#23002 : typo</code></td></tr></table>\n",
    "created_at": "2020-08-28T20:48:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344108",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a4286984f499cd442d3e2018644d593b7924634"><code>5a42869</code></a></td><td><code>#23002 : typo</code></td></tr></table>




---

archive/issue_comments_344109.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@dcoudert](#comment:21):\n> \n> ```diff\n> -        sage: list(list(bridges(g)))\n> +        sage: list(bridges(g))\n> ```\n\nOops, thanks for pointing !",
    "created_at": "2020-08-28T20:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344109",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@dcoudert](#comment:21):
> 
> ```diff
> -        sage: list(list(bridges(g)))
> +        sage: list(bridges(g))
> ```

Oops, thanks for pointing !



---

archive/issue_comments_344110.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2020-08-28T21:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344110",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_344111.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nLGTM.",
    "created_at": "2020-08-28T21:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344111",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:24" align="right">comment:24</div>

LGTM.



---

archive/issue_events_322347.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-28T21:03:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322347"
}
```



---

archive/issue_events_322348.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-28T21:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322348"
}
```



---

archive/issue_events_322349.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-08-29T10:10:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322349"
}
```



---

archive/issue_events_322350.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-08-29T10:10:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322350"
}
```



---

archive/issue_events_322351.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-01T23:00:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322351"
}
```



---

archive/issue_events_322352.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "90f48b81e6b53a890ff2e5efb5efb1ad69b13b49",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-09-01T23:00:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23002#event-322352"
}
```



---

archive/issue_comments_344112.json:
```json
{
    "body": "Changed branch from **[u/tmonteil/make_bridges_method_for_graphs_an_iterator](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/make_bridges_method_for_graphs_an_iterator)** to **[`5a42869`](https://github.com/sagemath/sagetrac-mirror/commit/5a4286984f499cd442d3e2018644d593b7924634)**",
    "created_at": "2020-09-01T23:00:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23002",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23002#issuecomment-344112",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tmonteil/make_bridges_method_for_graphs_an_iterator](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/make_bridges_method_for_graphs_an_iterator)** to **[`5a42869`](https://github.com/sagemath/sagetrac-mirror/commit/5a4286984f499cd442d3e2018644d593b7924634)**
