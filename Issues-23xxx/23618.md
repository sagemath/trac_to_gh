# Issue 23618: Occurrence of sets in doctests

archive/issues_023381.json:
```json
{
    "body": "At [https://patchbot.sagemath.org/log/23613/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-08-13%2023:08:11?short](https://patchbot.sagemath.org/log/23613/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-08-13%2023:08:11?short)\nthere is a doctest that fails simply because the output order of the elements in the set changed. It is bad to have sets as output in doctests without the # random since the order of the output is not well defined. Below are a bunch of tests that should be rewritten to have more stable and hence meaningful doctest results.\n\n```\nbt-nac-c158:sagedev mderickx$ grep -r \"sage: set(\" ./src/sage | grep -v \"==\"\n./src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx:            sage: set([x*y*z, z*y+x*z,x*y*z])  # indirect doctest\n./src/sage/combinat/designs/bibd.py:            sage: set(len(sa2.intersection(b)) for b in B.blocks())\n./src/sage/combinat/designs/bibd.py:            sage: set(b.arc()).issubset(b.ground_set())\n./src/sage/combinat/designs/block_design.py:        sage: set(b_0_1).intersection(b_57_70)\n./src/sage/combinat/designs/block_design.py:        sage: set(b_1_10).intersection(b_70_59)\n./src/sage/combinat/designs/block_design.py:        sage: set(b_10_0).intersection(b_59_57)\n./src/sage/crypto/boolean_function.pyx:            sage: set([ fi*g(i) for i,fi in enumerate(f) ])\n./src/sage/data_structures/bitset.pyx:            sage: set(FrozenBitset('11011'))\n./src/sage/data_structures/bitset.pyx:            sage: set(a)\n./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(p.Hrepresentation())                                 # optional - pynormaliz\n./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(p.Vrepresentation())                                 # optional - pynormaliz\n./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(p.Hrepresentation())                                 # optional - pynormaliz\n./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(p.Vrepresentation())                                 # optional - pynormaliz\n./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(PI.Vrepresentation())                                # optional - pynormaliz\n./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(PI.Vrepresentation())                                # optional - pynormaliz\n./src/sage/geometry/polyhedron/backend_polymake.py:            sage: set(p.Hrepresentation())                                 # optional - polymake\n./src/sage/geometry/polyhedron/backend_polymake.py:            sage: set(p.Vrepresentation())                                 # optional - polymake\n./src/sage/geometry/polyhedron/backend_polymake.py:            sage: set(p.Hrepresentation())                                 # optional - polymake\n./src/sage/geometry/polyhedron/backend_polymake.py:            sage: set(p.Vrepresentation())                                 # optional - polymake\n./src/sage/graphs/generators/families.py:        sage: set([g.laplacian_matrix(normalized=True).charpoly() for g in g_list])  # long time (7s on sage.math, 2011)\n./src/sage/graphs/generators/smallgraphs.py:        sage: set([ len([x for x in G.neighbors(i) if x in G.neighbors(j)])\n./src/sage/graphs/generic_graph.py:            sage: set(G.edge_labels())\n./src/sage/graphs/graph_plot.py:            sage: set(map(type, flatten(gp._pos.values())))\n./src/sage/graphs/graph_plot.py:            sage: set(map(type, flatten(gp._pos.values())))\nBinary file ./src/sage/misc/sageinspect.pyc matches\n./src/sage/numerical/backends/interactivelp_backend.pyx:            sage: set(d.basic_variables())\n./src/sage/numerical/mip.pyx:            sage: set(basis2)\n./src/sage/plot/colors.py:            sage: set([(type(c), type(cols[c])) for c in cols])\n./src/sage/repl/display/pretty_print.py:            sage: set({1, 2, 3})\n./src/sage/rings/finite_rings/finite_field_ext_pari.py:        sage: set(k)\n./src/sage/rings/fraction_field_FpT.pyx:            sage: set([1, t, 1/t, t, t, 1/t, 1+1/t, t/t])\n./src/sage/schemes/elliptic_curves/cm.py:        sage: set([hilbert_class_polynomial(D*f^2).degree() for D,f in v])\n./src/sage/structure/coerce_dict.pyx:        sage: set(L.iteritems())\n./src/sage/tests/french_book/mpoly.py:  sage: set(pt[zz].minpoly() for pt in V[:-1])\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/23618\n\n",
    "closed_at": "2017-08-29T16:00:11Z",
    "created_at": "2017-08-13T23:26:37Z",
    "labels": [
        "component: doctest coverage",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Occurrence of sets in doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23618",
    "user": "https://github.com/koffie"
}
```
At [https://patchbot.sagemath.org/log/23613/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-08-13%2023:08:11?short](https://patchbot.sagemath.org/log/23613/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-08-13%2023:08:11?short)
there is a doctest that fails simply because the output order of the elements in the set changed. It is bad to have sets as output in doctests without the # random since the order of the output is not well defined. Below are a bunch of tests that should be rewritten to have more stable and hence meaningful doctest results.

```
bt-nac-c158:sagedev mderickx$ grep -r "sage: set(" ./src/sage | grep -v "=="
./src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx:            sage: set([x*y*z, z*y+x*z,x*y*z])  # indirect doctest
./src/sage/combinat/designs/bibd.py:            sage: set(len(sa2.intersection(b)) for b in B.blocks())
./src/sage/combinat/designs/bibd.py:            sage: set(b.arc()).issubset(b.ground_set())
./src/sage/combinat/designs/block_design.py:        sage: set(b_0_1).intersection(b_57_70)
./src/sage/combinat/designs/block_design.py:        sage: set(b_1_10).intersection(b_70_59)
./src/sage/combinat/designs/block_design.py:        sage: set(b_10_0).intersection(b_59_57)
./src/sage/crypto/boolean_function.pyx:            sage: set([ fi*g(i) for i,fi in enumerate(f) ])
./src/sage/data_structures/bitset.pyx:            sage: set(FrozenBitset('11011'))
./src/sage/data_structures/bitset.pyx:            sage: set(a)
./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(p.Hrepresentation())                                 # optional - pynormaliz
./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(p.Vrepresentation())                                 # optional - pynormaliz
./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(p.Hrepresentation())                                 # optional - pynormaliz
./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(p.Vrepresentation())                                 # optional - pynormaliz
./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(PI.Vrepresentation())                                # optional - pynormaliz
./src/sage/geometry/polyhedron/backend_normaliz.py:            sage: set(PI.Vrepresentation())                                # optional - pynormaliz
./src/sage/geometry/polyhedron/backend_polymake.py:            sage: set(p.Hrepresentation())                                 # optional - polymake
./src/sage/geometry/polyhedron/backend_polymake.py:            sage: set(p.Vrepresentation())                                 # optional - polymake
./src/sage/geometry/polyhedron/backend_polymake.py:            sage: set(p.Hrepresentation())                                 # optional - polymake
./src/sage/geometry/polyhedron/backend_polymake.py:            sage: set(p.Vrepresentation())                                 # optional - polymake
./src/sage/graphs/generators/families.py:        sage: set([g.laplacian_matrix(normalized=True).charpoly() for g in g_list])  # long time (7s on sage.math, 2011)
./src/sage/graphs/generators/smallgraphs.py:        sage: set([ len([x for x in G.neighbors(i) if x in G.neighbors(j)])
./src/sage/graphs/generic_graph.py:            sage: set(G.edge_labels())
./src/sage/graphs/graph_plot.py:            sage: set(map(type, flatten(gp._pos.values())))
./src/sage/graphs/graph_plot.py:            sage: set(map(type, flatten(gp._pos.values())))
Binary file ./src/sage/misc/sageinspect.pyc matches
./src/sage/numerical/backends/interactivelp_backend.pyx:            sage: set(d.basic_variables())
./src/sage/numerical/mip.pyx:            sage: set(basis2)
./src/sage/plot/colors.py:            sage: set([(type(c), type(cols[c])) for c in cols])
./src/sage/repl/display/pretty_print.py:            sage: set({1, 2, 3})
./src/sage/rings/finite_rings/finite_field_ext_pari.py:        sage: set(k)
./src/sage/rings/fraction_field_FpT.pyx:            sage: set([1, t, 1/t, t, t, 1/t, 1+1/t, t/t])
./src/sage/schemes/elliptic_curves/cm.py:        sage: set([hilbert_class_polynomial(D*f^2).degree() for D,f in v])
./src/sage/structure/coerce_dict.pyx:        sage: set(L.iteritems())
./src/sage/tests/french_book/mpoly.py:  sage: set(pt[zz].minpoly() for pt in V[:-1])
```

Issue created by migration from https://trac.sagemath.org/ticket/23618





---

archive/issue_comments_326852.json:
```json
{
    "body": "I don't think `# random` is the right tag.  Probably replacing the test with something like `sorted(L, key=str)` would be better.",
    "created_at": "2017-08-18T02:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23618#issuecomment-326852",
    "user": "https://github.com/roed314"
}
```

I don't think `# random` is the right tag.  Probably replacing the test with something like `sorted(L, key=str)` would be better.



---

archive/issue_comments_326853.json:
```json
{
    "body": "This is essentially a duplicate of #23586",
    "created_at": "2017-08-18T07:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23618#issuecomment-326853",
    "user": "https://github.com/jdemeyer"
}
```

This is essentially a duplicate of #23586



---

archive/issue_comments_326854.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-18T18:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23618#issuecomment-326854",
    "user": "https://github.com/koffie"
}
```

Changing status from new to needs_review.



---

archive/issue_events_060469.json:
```json
{
    "actor": "https://github.com/koffie",
    "created_at": "2017-08-18T18:48:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23618",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23618#event-60469"
}
```



---

archive/issue_comments_326855.json:
```json
{
    "body": "I agree, this can be closed as duplicate",
    "created_at": "2017-08-18T18:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23618#issuecomment-326855",
    "user": "https://github.com/koffie"
}
```

I agree, this can be closed as duplicate



---

archive/issue_comments_326856.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-18T18:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23618#issuecomment-326856",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_326857.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2017-08-29T16:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23618#issuecomment-326857",
    "user": "https://github.com/koffie"
}
```

Resolution: duplicate



---

archive/issue_events_060470.json:
```json
{
    "actor": "https://github.com/koffie",
    "created_at": "2017-08-29T16:00:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23618",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23618#event-60470"
}
```
