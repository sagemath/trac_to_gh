# Issue 23496: sympy patch for abstract function

archive/issues_023259.json:
```json
{
    "assignees": [
        "https://github.com/man74cio"
    ],
    "body": "Generic function are not transformed from sympy to sage. \nthis patch implement the PR https://github.com/sympy/sympy/pull/12826\n\nCC:  @tscrim @egourgoulhon @rwst\n\nBranch/Commit: **[`bc21300`](https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f)**\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\nReviewer: **Travis Scrimshaw, Marcelo Forets**\n\nAuthor: **Marco Mancini**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23496_\n\n",
    "closed_at": "2017-09-10T11:57:33Z",
    "created_at": "2017-07-20T19:14:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sympy patch for abstract function",
    "type": "issue",
    "updated_at": "2017-09-10T11:57:33Z",
    "url": "https://github.com/sagemath/sage/issues/23496",
    "user": "https://github.com/man74cio"
}
```
Generic function are not transformed from sympy to sage. 
this patch implement the PR https://github.com/sympy/sympy/pull/12826

CC:  @tscrim @egourgoulhon @rwst

Branch/Commit: **[`bc21300`](https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f)**

Upstream: **Fixed upstream, but not in a stable release.**

Reviewer: **Travis Scrimshaw, Marcelo Forets**

Author: **Marco Mancini**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/23496_





---

archive/issue_events_324120.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-20T19:14:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324120"
}
```



---

archive/issue_events_324121.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-20T19:14:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324121"
}
```



---

archive/issue_events_324122.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-20T19:14:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324122"
}
```



---

archive/issue_comments_353143.json:
```json
{
    "body": "Branch: **[public/22496_patch_sympy_abstact_function](https://github.com/sagemath/sagetrac-mirror/tree/public/22496_patch_sympy_abstact_function)**",
    "created_at": "2017-07-20T19:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353143",
    "user": "https://github.com/man74cio"
}
```

Branch: **[public/22496_patch_sympy_abstact_function](https://github.com/sagemath/sagetrac-mirror/tree/public/22496_patch_sympy_abstact_function)**



---

archive/issue_events_324123.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-20T19:17:21Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "subject": "https://github.com/man74cio",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324123"
}
```



---

archive/issue_events_324124.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-20T19:17:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324124"
}
```



---

archive/issue_comments_353144.json:
```json
{
    "body": "Changed branch from **[public/22496_patch_sympy_abstact_function](https://github.com/sagemath/sagetrac-mirror/tree/public/22496_patch_sympy_abstact_function)** to **[public/23496_patch_sympy_abstact_function](https://github.com/sagemath/sagetrac-mirror/tree/public/23496_patch_sympy_abstact_function)**",
    "created_at": "2017-07-20T19:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353144",
    "user": "https://github.com/man74cio"
}
```

Changed branch from **[public/22496_patch_sympy_abstact_function](https://github.com/sagemath/sagetrac-mirror/tree/public/22496_patch_sympy_abstact_function)** to **[public/23496_patch_sympy_abstact_function](https://github.com/sagemath/sagetrac-mirror/tree/public/23496_patch_sympy_abstact_function)**



---

archive/issue_comments_353145.json:
```json
{
    "body": "Commit: **[`b764ebe`](https://github.com/sagemath/sagetrac-mirror/commit/b764ebe0dbe0fcf4f2758ca4e87bebff9116db94)**",
    "created_at": "2017-07-20T19:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353145",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`b764ebe`](https://github.com/sagemath/sagetrac-mirror/commit/b764ebe0dbe0fcf4f2758ca4e87bebff9116db94)**



---

archive/issue_comments_353146.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b764ebe0dbe0fcf4f2758ca4e87bebff9116db94\"><code>b764ebe</code></a></td><td><code>Better sympy patch taken from #12826 PR in sympy</code></td></tr></table>\n",
    "created_at": "2017-07-20T19:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353146",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b764ebe0dbe0fcf4f2758ca4e87bebff9116db94"><code>b764ebe</code></a></td><td><code>Better sympy patch taken from #12826 PR in sympy</code></td></tr></table>




---

archive/issue_comments_353147.json:
```json
{
    "body": "Changed dependencies from **22802** to none",
    "created_at": "2017-07-20T20:04:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353147",
    "user": "https://github.com/man74cio"
}
```

Changed dependencies from **22802** to none



---

archive/issue_comments_353148.json:
```json
{
    "body": "Changed reviewer from **tscrim** to **Travis Scrimshaw**",
    "created_at": "2017-07-20T23:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353148",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **tscrim** to **Travis Scrimshaw**



---

archive/issue_comments_353149.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIs this ready for review?",
    "created_at": "2017-07-20T23:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353149",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

Is this ready for review?



---

archive/issue_events_324125.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-21T02:35:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324125"
}
```



---

archive/issue_comments_353150.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYes, pleiade",
    "created_at": "2017-07-21T02:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353150",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:7" align="right">comment:7</div>

Yes, pleiade



---

archive/issue_events_324126.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-21T02:35:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324126"
}
```



---

archive/issue_events_324127.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-21T02:35:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324127"
}
```



---

archive/issue_comments_353151.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nYes, please",
    "created_at": "2017-07-21T02:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353151",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:8" align="right">comment:8</div>

Yes, please



---

archive/issue_comments_353152.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIs the setting this to needs_work a double-post-type error or is there an actual issue?\n\nAlso, could you ping upstream again? It would be good to know that they accepted the patch as-is.",
    "created_at": "2017-07-21T23:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353152",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Is the setting this to needs_work a double-post-type error or is there an actual issue?

Also, could you ping upstream again? It would be good to know that they accepted the patch as-is.



---

archive/issue_comments_353153.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nDouble error, sorry",
    "created_at": "2017-07-22T02:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353153",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:10" align="right">comment:10</div>

Double error, sorry



---

archive/issue_comments_353154.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2017-07-22T02:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353154",
    "user": "https://github.com/man74cio"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_events_324128.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-22T02:10:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324128"
}
```



---

archive/issue_events_324129.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-22T02:10:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324129"
}
```



---

archive/issue_comments_353155.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYou need to also bump the patch level in `package-version.txt` so that it rebuilds sympy.\n\nDid you send another message to upstream asking about the status of the patch?",
    "created_at": "2017-07-24T00:04:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353155",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

You need to also bump the patch level in `package-version.txt` so that it rebuilds sympy.

Did you send another message to upstream asking about the status of the patch?



---

archive/issue_comments_353156.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d16a70b2daf9e123f2bf180547f38a4a10c2306\"><code>9d16a70</code></a></td><td><code>Lost package-version.txt modifications : restored</code></td></tr></table>\n",
    "created_at": "2017-07-24T07:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353156",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d16a70b2daf9e123f2bf180547f38a4a10c2306"><code>9d16a70</code></a></td><td><code>Lost package-version.txt modifications : restored</code></td></tr></table>




---

archive/issue_comments_353157.json:
```json
{
    "body": "Changed commit from **[`b764ebe`](https://github.com/sagemath/sagetrac-mirror/commit/b764ebe0dbe0fcf4f2758ca4e87bebff9116db94)** to **[`9d16a70`](https://github.com/sagemath/sagetrac-mirror/commit/9d16a70b2daf9e123f2bf180547f38a4a10c2306)**",
    "created_at": "2017-07-24T07:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353157",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b764ebe`](https://github.com/sagemath/sagetrac-mirror/commit/b764ebe0dbe0fcf4f2758ca4e87bebff9116db94)** to **[`9d16a70`](https://github.com/sagemath/sagetrac-mirror/commit/9d16a70b2daf9e123f2bf180547f38a4a10c2306)**



---

archive/issue_comments_353158.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5d6b6733ea408b4a73860578e8b482d6dfea2c7\"><code>d5d6b67</code></a></td><td><code>Corrected error on patcj version</code></td></tr></table>\n",
    "created_at": "2017-07-24T08:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353158",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5d6b6733ea408b4a73860578e8b482d6dfea2c7"><code>d5d6b67</code></a></td><td><code>Corrected error on patcj version</code></td></tr></table>




---

archive/issue_comments_353159.json:
```json
{
    "body": "Changed commit from **[`9d16a70`](https://github.com/sagemath/sagetrac-mirror/commit/9d16a70b2daf9e123f2bf180547f38a4a10c2306)** to **[`d5d6b67`](https://github.com/sagemath/sagetrac-mirror/commit/d5d6b6733ea408b4a73860578e8b482d6dfea2c7)**",
    "created_at": "2017-07-24T08:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353159",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9d16a70`](https://github.com/sagemath/sagetrac-mirror/commit/9d16a70b2daf9e123f2bf180547f38a4a10c2306)** to **[`d5d6b67`](https://github.com/sagemath/sagetrac-mirror/commit/d5d6b6733ea408b4a73860578e8b482d6dfea2c7)**



---

archive/issue_comments_353160.json:
```json
{
    "body": "Changed commit from **[`d5d6b67`](https://github.com/sagemath/sagetrac-mirror/commit/d5d6b6733ea408b4a73860578e8b482d6dfea2c7)** to **[`462bd68`](https://github.com/sagemath/sagetrac-mirror/commit/462bd681d32ee87a3813caa79e43842a4477d2e7)**",
    "created_at": "2017-07-24T11:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353160",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d5d6b67`](https://github.com/sagemath/sagetrac-mirror/commit/d5d6b6733ea408b4a73860578e8b482d6dfea2c7)** to **[`462bd68`](https://github.com/sagemath/sagetrac-mirror/commit/462bd681d32ee87a3813caa79e43842a4477d2e7)**



---

archive/issue_comments_353161.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/462bd681d32ee87a3813caa79e43842a4477d2e7\"><code>462bd68</code></a></td><td><code>test is not corrected at this point</code></td></tr></table>\n",
    "created_at": "2017-07-24T11:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353161",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/462bd681d32ee87a3813caa79e43842a4477d2e7"><code>462bd68</code></a></td><td><code>test is not corrected at this point</code></td></tr></table>




---

archive/issue_comments_353162.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@tscrim](#comment:11):\n> You need to also bump the patch level in `package-version.txt` so that it rebuilds sympy.\n> \n> Did you send another message to upstream asking about the status of the patch?\n\nThe referee said me that tests are still falling on travis. I asked to see the report (I have not access to travis).",
    "created_at": "2017-07-25T08:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353162",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@tscrim](#comment:11):
> You need to also bump the patch level in `package-version.txt` so that it rebuilds sympy.
> 
> Did you send another message to upstream asking about the status of the patch?

The referee said me that tests are still falling on travis. I asked to see the report (I have not access to travis).



---

archive/issue_comments_353163.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI have submitted the correction to the sympy ticket, \nIf it passes the tests then I will change it also in the current branch",
    "created_at": "2017-07-25T13:39:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353163",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:17" align="right">comment:17</div>

I have submitted the correction to the sympy ticket, 
If it passes the tests then I will change it also in the current branch



---

archive/issue_comments_353164.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/daa2f2cc0a70480553db6a01fd9b28552e63920e\"><code>daa2f2c</code></a></td><td><code>Error on sympy branch corrected with a new patch</code></td></tr></table>\n",
    "created_at": "2017-07-26T11:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353164",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/daa2f2cc0a70480553db6a01fd9b28552e63920e"><code>daa2f2c</code></a></td><td><code>Error on sympy branch corrected with a new patch</code></td></tr></table>




---

archive/issue_comments_353165.json:
```json
{
    "body": "Changed commit from **[`462bd68`](https://github.com/sagemath/sagetrac-mirror/commit/462bd681d32ee87a3813caa79e43842a4477d2e7)** to **[`daa2f2c`](https://github.com/sagemath/sagetrac-mirror/commit/daa2f2cc0a70480553db6a01fd9b28552e63920e)**",
    "created_at": "2017-07-26T11:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353165",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`462bd68`](https://github.com/sagemath/sagetrac-mirror/commit/462bd681d32ee87a3813caa79e43842a4477d2e7)** to **[`daa2f2c`](https://github.com/sagemath/sagetrac-mirror/commit/daa2f2cc0a70480553db6a01fd9b28552e63920e)**



---

archive/issue_comments_353166.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/487242514e520b0c73e24628ac2269df7cd2c0c0\"><code>4872425</code></a></td><td><code>forgetten to delete gg in doctest</code></td></tr></table>\n",
    "created_at": "2017-07-26T11:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353166",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/487242514e520b0c73e24628ac2269df7cd2c0c0"><code>4872425</code></a></td><td><code>forgetten to delete gg in doctest</code></td></tr></table>




---

archive/issue_comments_353167.json:
```json
{
    "body": "Changed commit from **[`daa2f2c`](https://github.com/sagemath/sagetrac-mirror/commit/daa2f2cc0a70480553db6a01fd9b28552e63920e)** to **[`4872425`](https://github.com/sagemath/sagetrac-mirror/commit/487242514e520b0c73e24628ac2269df7cd2c0c0)**",
    "created_at": "2017-07-26T11:56:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353167",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`daa2f2c`](https://github.com/sagemath/sagetrac-mirror/commit/daa2f2cc0a70480553db6a01fd9b28552e63920e)** to **[`4872425`](https://github.com/sagemath/sagetrac-mirror/commit/487242514e520b0c73e24628ac2269df7cd2c0c0)**



---

archive/issue_comments_353168.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThe sympy patch was merged 12826",
    "created_at": "2017-07-29T06:25:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353168",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:20" align="right">comment:20</div>

The sympy patch was merged 12826



---

archive/issue_comments_353169.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2017-07-29T06:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353169",
    "user": "https://github.com/tscrim"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_353170.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nJust put your real names in the author field, bump the patch level in sympy, and remove the trivial whitespace change in `function.pyx`. Once done, you can set a positive review on my behalf.",
    "created_at": "2017-07-29T06:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353170",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

Just put your real names in the author field, bump the patch level in sympy, and remove the trivial whitespace change in `function.pyx`. Once done, you can set a positive review on my behalf.



---

archive/issue_comments_353171.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/721eed7a72e7d86189fa6200bed75ef1c11af4a3\"><code>721eed7</code></a></td><td><code>removed whitespace</code></td></tr></table>\n",
    "created_at": "2017-07-29T18:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353171",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/721eed7a72e7d86189fa6200bed75ef1c11af4a3"><code>721eed7</code></a></td><td><code>removed whitespace</code></td></tr></table>




---

archive/issue_comments_353172.json:
```json
{
    "body": "Changed commit from **[`4872425`](https://github.com/sagemath/sagetrac-mirror/commit/487242514e520b0c73e24628ac2269df7cd2c0c0)** to **[`721eed7`](https://github.com/sagemath/sagetrac-mirror/commit/721eed7a72e7d86189fa6200bed75ef1c11af4a3)**",
    "created_at": "2017-07-29T18:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353172",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4872425`](https://github.com/sagemath/sagetrac-mirror/commit/487242514e520b0c73e24628ac2269df7cd2c0c0)** to **[`721eed7`](https://github.com/sagemath/sagetrac-mirror/commit/721eed7a72e7d86189fa6200bed75ef1c11af4a3)**



---

archive/issue_events_324130.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-29T18:54:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324130"
}
```



---

archive/issue_events_324131.json:
```json
{
    "actor": "https://github.com/man74cio",
    "created_at": "2017-07-29T18:54:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324131"
}
```



---

archive/issue_comments_353173.json:
```json
{
    "body": "Changed author from **mmancini, egourgoulhon** to **Marco Mancini**",
    "created_at": "2017-07-29T18:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353173",
    "user": "https://github.com/man74cio"
}
```

Changed author from **mmancini, egourgoulhon** to **Marco Mancini**



---

archive/issue_comments_353174.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI hope it is ok :\nthe function.pyx is now at the old state, i reversed it to before my modifications.",
    "created_at": "2017-07-29T18:57:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353174",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:24" align="right">comment:24</div>

I hope it is ok :
the function.pyx is now at the old state, i reversed it to before my modifications.



---

archive/issue_events_324132.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-30T17:07:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324132"
}
```



---

archive/issue_events_324133.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-30T17:07:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324133"
}
```



---

archive/issue_comments_353175.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nYou still need to bump the patch level:\n\n```diff\n-1.0.p2\n+1.0.p3\n```\nin `$SAGE_ROOT/build/pkgs/sympy/package-version.txt`.",
    "created_at": "2017-07-30T17:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353175",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

You still need to bump the patch level:

```diff
-1.0.p2
+1.0.p3
```
in `$SAGE_ROOT/build/pkgs/sympy/package-version.txt`.



---

archive/issue_events_324134.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-30T17:07:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324134"
}
```



---

archive/issue_events_324135.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-30T17:07:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324135"
}
```



---

archive/issue_comments_353176.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e46345b0c23138d017ce6f50f44d144179c9c668\"><code>e46345b</code></a></td><td><code>changed sympy patch version</code></td></tr></table>\n",
    "created_at": "2017-07-30T18:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353176",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e46345b0c23138d017ce6f50f44d144179c9c668"><code>e46345b</code></a></td><td><code>changed sympy patch version</code></td></tr></table>




---

archive/issue_comments_353177.json:
```json
{
    "body": "Changed commit from **[`721eed7`](https://github.com/sagemath/sagetrac-mirror/commit/721eed7a72e7d86189fa6200bed75ef1c11af4a3)** to **[`e46345b`](https://github.com/sagemath/sagetrac-mirror/commit/e46345b0c23138d017ce6f50f44d144179c9c668)**",
    "created_at": "2017-07-30T18:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353177",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`721eed7`](https://github.com/sagemath/sagetrac-mirror/commit/721eed7a72e7d86189fa6200bed75ef1c11af4a3)** to **[`e46345b`](https://github.com/sagemath/sagetrac-mirror/commit/e46345b0c23138d017ce6f50f44d144179c9c668)**



---

archive/issue_comments_353178.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46ebd728aac486a5dd675f5d228d90001c421635\"><code>46ebd72</code></a></td><td><code>Merge branch 'public/23496_patch_sympy_abstact_function' of git://trac.sagemath.org/sage into public/23496_patch_sympy_abstact_function</code></td></tr></table>\n",
    "created_at": "2017-07-31T02:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353178",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46ebd728aac486a5dd675f5d228d90001c421635"><code>46ebd72</code></a></td><td><code>Merge branch 'public/23496_patch_sympy_abstact_function' of git://trac.sagemath.org/sage into public/23496_patch_sympy_abstact_function</code></td></tr></table>




---

archive/issue_comments_353179.json:
```json
{
    "body": "Changed commit from **[`e46345b`](https://github.com/sagemath/sagetrac-mirror/commit/e46345b0c23138d017ce6f50f44d144179c9c668)** to **[`46ebd72`](https://github.com/sagemath/sagetrac-mirror/commit/46ebd728aac486a5dd675f5d228d90001c421635)**",
    "created_at": "2017-07-31T02:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353179",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e46345b`](https://github.com/sagemath/sagetrac-mirror/commit/e46345b0c23138d017ce6f50f44d144179c9c668)** to **[`46ebd72`](https://github.com/sagemath/sagetrac-mirror/commit/46ebd728aac486a5dd675f5d228d90001c421635)**



---

archive/issue_events_324136.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-31T02:56:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324136"
}
```



---

archive/issue_events_324137.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-31T02:56:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324137"
}
```



---

archive/issue_comments_353180.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nTrivial rebase with `8.1beta0`. Thanks, LGTM.",
    "created_at": "2017-07-31T02:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353180",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

Trivial rebase with `8.1beta0`. Thanks, LGTM.



---

archive/issue_comments_353181.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nSee patchbot",
    "created_at": "2017-07-31T22:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353181",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:29" align="right">comment:29</div>

See patchbot



---

archive/issue_events_324138.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-31T22:10:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324138"
}
```



---

archive/issue_events_324139.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-31T22:10:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324139"
}
```



---

archive/issue_comments_353182.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThis is quite interesting as failure\n\n```\nsage -t --long /usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2017-08-01-11-17-21-10bca036.\nUsing --optional=optional,sage\nDoctesting 1 file.\nsage -t --long /usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py\", line 383, in sage.tests.french_book.recequadiff\nFailed example:\n    f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 512, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 875, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.french_book.recequadiff[108]>\", line 1, in <module>\n        f = u(n+Integer(2))-(Integer(3)/Integer(2))*u(n+Integer(1))+(Integer(1)/Integer(2))*u(n)\n      File \"/usr/lib64/python2.7/site-packages/sympy/core/decorators.py\", line 76, in __sympifyit_wrapper\n        b = sympify(b, strict=True)\n      File \"/usr/lib64/python2.7/site-packages/sympy/core/sympify.py\", line 265, in sympify\n        return a._sympy_()\n      File \"sage/symbolic/expression.pyx\", line 1445, in sage.symbolic.expression.Expression._sympy_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/expression.cpp:11783)\n        return sympy(self)\n      File \"/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.py\", line 218, in __call__\n        return self.arithmetic(ex, operator)\n      File \"/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.py\", line 716, in arithmetic\n        ops = [sympy.sympify(self(a), evaluate=False) for a in ex.operands()]\n      File \"/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.py\", line 226, in __call__\n        return self.composition(ex, operator)\n      File \"/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.py\", line 767, in composition\n        raise NotImplementedError(\"SymPy function '%s' doesn't exist\" % f)\n    NotImplementedError: SymPy function 'u' doesn't exist\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py\", line 388, in sage.tests.french_book.recequadiff\nFailed example:\n    rsolve(f, u(n), {u(0):-1,u(1):1})\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 512, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 875, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.french_book.recequadiff[110]>\", line 1, in <module>\n        rsolve(f, u(n), {u(Integer(0)):-Integer(1),u(Integer(1)):Integer(1)})\n      File \"/usr/lib64/python2.7/site-packages/sympy/solvers/recurr.py\", line 722, in rsolve\n        f = f.expand().collect(y.func(Wild('m', integer=True)))\n      File \"sage/symbolic/expression.pyx\", line 7163, in sage.symbolic.expression.Expression.collect (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/expression.cpp:42956)\n        cdef Expression s0 = self.coerce_in(s)\n      File \"sage/symbolic/expression.pyx\", line 2956, in sage.symbolic.expression.Expression.coerce_in (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/expression.cpp:22665)\n        return self._parent._coerce_(z)\n      File \"sage/structure/parent_old.pyx\", line 230, in sage.structure.parent_old.Parent._coerce_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/structure/parent_old.c:4888)\n        return self.coerce(x)\n      File \"sage/structure/parent.pyx\", line 1168, in sage.structure.parent.Parent.coerce (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/structure/parent.c:11000)\n        mor = self._internal_coerce_map_from(parent(x))\n      File \"sage/structure/parent.pyx\", line 2107, in sage.structure.parent.Parent._internal_coerce_map_from (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/structure/parent.c:18735)\n        mor = self.discover_coerce_map_from(S)\n      File \"sage/structure/parent.pyx\", line 2246, in sage.structure.parent.Parent.discover_coerce_map_from (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/structure/parent.c:19211)\n        user_provided_mor = self._coerce_map_from_(S)\n      File \"sage/symbolic/ring.pyx\", line 91, in sage.symbolic.ring.SymbolicRing._coerce_map_from_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/ring.cpp:4056)\n        cpdef _coerce_map_from_(self, R):\n      File \"/usr/lib64/python2.7/site-packages/sage/symbolic/callable.py\", line 310, in _coerce_map_from_\n        return SymbolicRing._coerce_map_from_(self, R)\n      File \"sage/symbolic/ring.pyx\", line 91, in sage.symbolic.ring.SymbolicRing._coerce_map_from_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/ring.cpp:5643)\n        cpdef _coerce_map_from_(self, R):\n      File \"sage/symbolic/ring.pyx\", line 167, in sage.symbolic.ring.SymbolicRing._coerce_map_from_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/ring.cpp:4315)\n        if 'sympy' in R.__module__:\n    TypeError: argument of type 'NoneType' is not iterable\n**********************************************************************\n1 item had failures:\n   2 of 115 in sage.tests.french_book.recequadiff\n    [114 tests, 2 failures, 4.43 s]\n----------------------------------------------------------------------\nsage -t --long /usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py  # 2 doctests failed\n```\nThe first doctest goes\n\n```\nPython 2.7.12 (default, Feb 16 2017, 16:28:54) \n[GCC 4.9.4] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from sympy import Function, Symbol\n>>> u = Function('u'); n = Symbol('n', integer=True)\n>>> f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)\n>>>\n```\nand is no problem in python. But in sage \"boom\". But there is more\n\n```\nsage: from sympy import Function, Symbol\nsage: u = Function('u'); n = Symbol('n', integer=True)\nsage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-3-a0e08a1755b9> in <module>()\n----> 1 f = u(n+Integer(2))-(Integer(3)/Integer(2))*u(n+Integer(1))+(Integer(1)/Integer(2))*u(n)\n\n/usr/lib64/python2.7/site-packages/sympy/core/decorators.pyc in __sympifyit_wrapper(a, b)\n     74                 # with sympy objects. Otherwise, it must be converted.\n     75                 if not hasattr(b, '_op_priority'):\n---> 76                     b = sympify(b, strict=True)\n     77                 return func(a, b)\n     78             except SympifyError:\n\n/usr/lib64/python2.7/site-packages/sympy/core/sympify.pyc in sympify(a, locals, convert_xor, strict, rational, evaluate)\n    263 \n    264     try:\n--> 265         return a._sympy_()\n    266     except AttributeError:\n    267         pass\n\n/usr/lib64/python2.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._sympy_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/expression.cpp:11783)()\n   1443         \"\"\"\n   1444         from sage.symbolic.expression_conversions import sympy\n-> 1445         return sympy(self)\n   1446 \n   1447     def _algebraic_(self, field):\n\n/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in __call__(self, ex)\n    216                 div = self.get_fake_div(ex)\n    217                 return self.arithmetic(div, div.operator())\n--> 218             return self.arithmetic(ex, operator)\n    219         elif operator in relation_operators:\n    220             return self.relation(ex, operator)\n\n/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in arithmetic(self, ex, operator)\n    714         import sympy\n    715         operator = arithmetic_operators[operator]\n--> 716         ops = [sympy.sympify(self(a), evaluate=False) for a in ex.operands()]\n    717         if operator == \"+\":\n    718             return sympy.Add(*ops)\n\n/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in __call__(self, ex)\n    224             return self.tuple(ex)\n    225         else:\n--> 226             return self.composition(ex, operator)\n    227 \n    228     def get_fake_div(self, ex):\n\n/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in composition(self, ex, operator)\n    765             return f_sympy(*sympy.sympify(g, evaluate=False))\n    766         else:\n--> 767             raise NotImplementedError(\"SymPy function '%s' doesn't exist\" % f)\n    768 \n    769 sympy = SympyConverter()\n\nNotImplementedError: SymPy function 'u' doesn't exist\nsage: f = 1*u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)\nsage: \n```\nThat's right, multiply the first term by `1` the problem disappear.",
    "created_at": "2017-07-31T23:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353182",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

This is quite interesting as failure

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py
too many failed tests, not using stored timings
Running doctests with ID 2017-08-01-11-17-21-10bca036.
Using --optional=optional,sage
Doctesting 1 file.
sage -t --long /usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py", line 383, in sage.tests.french_book.recequadiff
Failed example:
    f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 512, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 875, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.french_book.recequadiff[108]>", line 1, in <module>
        f = u(n+Integer(2))-(Integer(3)/Integer(2))*u(n+Integer(1))+(Integer(1)/Integer(2))*u(n)
      File "/usr/lib64/python2.7/site-packages/sympy/core/decorators.py", line 76, in __sympifyit_wrapper
        b = sympify(b, strict=True)
      File "/usr/lib64/python2.7/site-packages/sympy/core/sympify.py", line 265, in sympify
        return a._sympy_()
      File "sage/symbolic/expression.pyx", line 1445, in sage.symbolic.expression.Expression._sympy_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/expression.cpp:11783)
        return sympy(self)
      File "/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.py", line 218, in __call__
        return self.arithmetic(ex, operator)
      File "/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.py", line 716, in arithmetic
        ops = [sympy.sympify(self(a), evaluate=False) for a in ex.operands()]
      File "/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.py", line 226, in __call__
        return self.composition(ex, operator)
      File "/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.py", line 767, in composition
        raise NotImplementedError("SymPy function '%s' doesn't exist" % f)
    NotImplementedError: SymPy function 'u' doesn't exist
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py", line 388, in sage.tests.french_book.recequadiff
Failed example:
    rsolve(f, u(n), {u(0):-1,u(1):1})
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 512, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 875, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.french_book.recequadiff[110]>", line 1, in <module>
        rsolve(f, u(n), {u(Integer(0)):-Integer(1),u(Integer(1)):Integer(1)})
      File "/usr/lib64/python2.7/site-packages/sympy/solvers/recurr.py", line 722, in rsolve
        f = f.expand().collect(y.func(Wild('m', integer=True)))
      File "sage/symbolic/expression.pyx", line 7163, in sage.symbolic.expression.Expression.collect (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/expression.cpp:42956)
        cdef Expression s0 = self.coerce_in(s)
      File "sage/symbolic/expression.pyx", line 2956, in sage.symbolic.expression.Expression.coerce_in (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/expression.cpp:22665)
        return self._parent._coerce_(z)
      File "sage/structure/parent_old.pyx", line 230, in sage.structure.parent_old.Parent._coerce_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/structure/parent_old.c:4888)
        return self.coerce(x)
      File "sage/structure/parent.pyx", line 1168, in sage.structure.parent.Parent.coerce (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/structure/parent.c:11000)
        mor = self._internal_coerce_map_from(parent(x))
      File "sage/structure/parent.pyx", line 2107, in sage.structure.parent.Parent._internal_coerce_map_from (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/structure/parent.c:18735)
        mor = self.discover_coerce_map_from(S)
      File "sage/structure/parent.pyx", line 2246, in sage.structure.parent.Parent.discover_coerce_map_from (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/structure/parent.c:19211)
        user_provided_mor = self._coerce_map_from_(S)
      File "sage/symbolic/ring.pyx", line 91, in sage.symbolic.ring.SymbolicRing._coerce_map_from_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/ring.cpp:4056)
        cpdef _coerce_map_from_(self, R):
      File "/usr/lib64/python2.7/site-packages/sage/symbolic/callable.py", line 310, in _coerce_map_from_
        return SymbolicRing._coerce_map_from_(self, R)
      File "sage/symbolic/ring.pyx", line 91, in sage.symbolic.ring.SymbolicRing._coerce_map_from_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/ring.cpp:5643)
        cpdef _coerce_map_from_(self, R):
      File "sage/symbolic/ring.pyx", line 167, in sage.symbolic.ring.SymbolicRing._coerce_map_from_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/ring.cpp:4315)
        if 'sympy' in R.__module__:
    TypeError: argument of type 'NoneType' is not iterable
**********************************************************************
1 item had failures:
   2 of 115 in sage.tests.french_book.recequadiff
    [114 tests, 2 failures, 4.43 s]
----------------------------------------------------------------------
sage -t --long /usr/lib64/python2.7/site-packages/sage/tests/french_book/recequadiff.py  # 2 doctests failed
```
The first doctest goes

```
Python 2.7.12 (default, Feb 16 2017, 16:28:54) 
[GCC 4.9.4] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from sympy import Function, Symbol
>>> u = Function('u'); n = Symbol('n', integer=True)
>>> f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)
>>>
```
and is no problem in python. But in sage "boom". But there is more

```
sage: from sympy import Function, Symbol
sage: u = Function('u'); n = Symbol('n', integer=True)
sage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-3-a0e08a1755b9> in <module>()
----> 1 f = u(n+Integer(2))-(Integer(3)/Integer(2))*u(n+Integer(1))+(Integer(1)/Integer(2))*u(n)

/usr/lib64/python2.7/site-packages/sympy/core/decorators.pyc in __sympifyit_wrapper(a, b)
     74                 # with sympy objects. Otherwise, it must be converted.
     75                 if not hasattr(b, '_op_priority'):
---> 76                     b = sympify(b, strict=True)
     77                 return func(a, b)
     78             except SympifyError:

/usr/lib64/python2.7/site-packages/sympy/core/sympify.pyc in sympify(a, locals, convert_xor, strict, rational, evaluate)
    263 
    264     try:
--> 265         return a._sympy_()
    266     except AttributeError:
    267         pass

/usr/lib64/python2.7/site-packages/sage/symbolic/expression.pyx in sage.symbolic.expression.Expression._sympy_ (/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/cythonized/sage/symbolic/expression.cpp:11783)()
   1443         """
   1444         from sage.symbolic.expression_conversions import sympy
-> 1445         return sympy(self)
   1446 
   1447     def _algebraic_(self, field):

/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in __call__(self, ex)
    216                 div = self.get_fake_div(ex)
    217                 return self.arithmetic(div, div.operator())
--> 218             return self.arithmetic(ex, operator)
    219         elif operator in relation_operators:
    220             return self.relation(ex, operator)

/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in arithmetic(self, ex, operator)
    714         import sympy
    715         operator = arithmetic_operators[operator]
--> 716         ops = [sympy.sympify(self(a), evaluate=False) for a in ex.operands()]
    717         if operator == "+":
    718             return sympy.Add(*ops)

/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in __call__(self, ex)
    224             return self.tuple(ex)
    225         else:
--> 226             return self.composition(ex, operator)
    227 
    228     def get_fake_div(self, ex):

/usr/lib64/python2.7/site-packages/sage/symbolic/expression_conversions.pyc in composition(self, ex, operator)
    765             return f_sympy(*sympy.sympify(g, evaluate=False))
    766         else:
--> 767             raise NotImplementedError("SymPy function '%s' doesn't exist" % f)
    768 
    769 sympy = SympyConverter()

NotImplementedError: SymPy function 'u' doesn't exist
sage: f = 1*u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)
sage: 
```
That's right, multiply the first term by `1` the problem disappear.



---

archive/issue_comments_353183.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWhat is sage \"boom\" ?\nthe problem was not present before the rebase with `8.1beta0`, is it true?",
    "created_at": "2017-08-01T08:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353183",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:31" align="right">comment:31</div>

What is sage "boom" ?
the problem was not present before the rebase with `8.1beta0`, is it true?



---

archive/issue_comments_353184.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nPardon me my antics. \"boom\" as in sage breaks down. Just a minor explosion since it doesn't crash, just tells you off. I don't know if it was present before `8.1beta0`. My only suggestion on a possible cause is #23413 but that's just a stab in the dark.",
    "created_at": "2017-08-01T09:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353184",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">comment:32</div>

Pardon me my antics. "boom" as in sage breaks down. Just a minor explosion since it doesn't crash, just tells you off. I don't know if it was present before `8.1beta0`. My only suggestion on a possible cause is #23413 but that's just a stab in the dark.



---

archive/issue_comments_353185.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nEffectively the error disappear when I revert the changes in sympy.\nbut it before the `8.1beta0` it was ok.",
    "created_at": "2017-08-01T12:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353185",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:33" align="right">comment:33</div>

Effectively the error disappear when I revert the changes in sympy.
but it before the `8.1beta0` it was ok.



---

archive/issue_comments_353186.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nthe missing conversion is the composition of functions in the sympy converter, which was done here: #20204.",
    "created_at": "2017-08-28T06:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353186",
    "user": "https://github.com/mforets"
}
```

<div id="comment:34" align="right">comment:34</div>

the missing conversion is the composition of functions in the sympy converter, which was done here: #20204.



---

archive/issue_comments_353187.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@mforets](#comment:34):\n> the missing conversion is the composition of functions in the sympy converter, which was done here: #20204. \n\nShall the patch be added here, or you prefer to create a dependency for this one?\n\n\n(FYI: the problem with #20204 is that i couldn't patch sympy such that `f._sage_()` works, so that we have conversions in both ways, as commented [in the sympy PR](https://github.com/sympy/sympy/pull/12826).)",
    "created_at": "2017-08-28T16:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353187",
    "user": "https://github.com/mforets"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@mforets](#comment:34):
> the missing conversion is the composition of functions in the sympy converter, which was done here: #20204. 

Shall the patch be added here, or you prefer to create a dependency for this one?


(FYI: the problem with #20204 is that i couldn't patch sympy such that `f._sage_()` works, so that we have conversions in both ways, as commented [in the sympy PR](https://github.com/sympy/sympy/pull/12826).)



---

archive/issue_comments_353188.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI think that you should create a dependency on this ticket in your (#20204).\nThis ticket was created to separate the sympy patch from the modifications done in Sage.\nThis ticket is yet a dependency of #22802\n\n\nReplying to [@mforets](#comment:35):\n> Replying to [@mforets](#comment:34):\n> > the missing conversion is the composition of functions in the sympy converter, which was done here: #20204. \n\n> \n> Shall the patch be added here, or you prefer to create a dependency for this one?\n> \n> \n> (FYI: the problem with #20204 is that i couldn't patch sympy such that `f._sage_()` works, so that we have conversions in both ways, as commented [in the sympy PR](https://github.com/sympy/sympy/pull/12826).)",
    "created_at": "2017-08-29T11:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353188",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:37" align="right">comment:37</div>

I think that you should create a dependency on this ticket in your (#20204).
This ticket was created to separate the sympy patch from the modifications done in Sage.
This ticket is yet a dependency of #22802


Replying to [@mforets](#comment:35):
> Replying to [@mforets](#comment:34):
> > the missing conversion is the composition of functions in the sympy converter, which was done here: #20204. 

> 
> Shall the patch be added here, or you prefer to create a dependency for this one?
> 
> 
> (FYI: the problem with #20204 is that i couldn't patch sympy such that `f._sage_()` works, so that we have conversions in both ways, as commented [in the sympy PR](https://github.com/sympy/sympy/pull/12826).)



---

archive/issue_events_324140.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-08-30T08:52:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324140"
}
```



---

archive/issue_events_324141.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-08-30T08:52:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324141"
}
```



---

archive/issue_comments_353189.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOK, done. if you pull #20204 which has been merged with this one, there is no \"boom\".\n\nbut we haven't changed anything in this one, so how is it possible that this ticket gets in? \n\nOTOH, I'm afraid there will be conflicts with #22802.",
    "created_at": "2017-08-30T08:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353189",
    "user": "https://github.com/mforets"
}
```

<div id="comment:38" align="right">comment:38</div>

OK, done. if you pull #20204 which has been merged with this one, there is no "boom".

but we haven't changed anything in this one, so how is it possible that this ticket gets in? 

OTOH, I'm afraid there will be conflicts with #22802.



---

archive/issue_comments_353190.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThe boom was caused by the rebase with `8.10beta0`. has your branch done this operation? I think no. Before the rebase there was not error in the tests.",
    "created_at": "2017-08-30T08:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353190",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:39" align="right">comment:39</div>

The boom was caused by the rebase with `8.10beta0`. has your branch done this operation? I think no. Before the rebase there was not error in the tests.



---

archive/issue_comments_353191.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@man74cio](#comment:39):\n> The boom was caused by the rebase with `8.10beta0`. has your branch done this operation? \n\nthe branch `t/mforets/20204` has been merged with 8.1.beta3.",
    "created_at": "2017-08-30T09:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353191",
    "user": "https://github.com/mforets"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@man74cio](#comment:39):
> The boom was caused by the rebase with `8.10beta0`. has your branch done this operation? 

the branch `t/mforets/20204` has been merged with 8.1.beta3.



---

archive/issue_comments_353192.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nIf you merged your stuff with #20204 and it cannot work without the rest of #20204 we have two solutions:\n* make the tickets depend on each other. Feels circular but it is an indication that the tickets need to be merged together.\n* mark this ticket as a duplicate and close it, leaving only the branch at #20204.\n\nBonus question: Will we be able to upgrade sympy to 1.1.1 easily once everything is in? Currently it leads to failures, again because of missing converter if I am not mistaken (this is a report from sage-on-gentoo don't look for an upgrade ticket at this stage).",
    "created_at": "2017-08-30T09:34:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353192",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:41" align="right">comment:41</div>

If you merged your stuff with #20204 and it cannot work without the rest of #20204 we have two solutions:
* make the tickets depend on each other. Feels circular but it is an indication that the tickets need to be merged together.
* mark this ticket as a duplicate and close it, leaving only the branch at #20204.

Bonus question: Will we be able to upgrade sympy to 1.1.1 easily once everything is in? Currently it leads to failures, again because of missing converter if I am not mistaken (this is a report from sage-on-gentoo don't look for an upgrade ticket at this stage).



---

archive/issue_comments_353193.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThis ticket was part of the #22802 (now #22802 ticket depends on this ticket).\nThe referee asked to separate it in 2 tickets : #22802 containing the converter ._sympy_() and the #23496 containing only the sympy patch (._sage())",
    "created_at": "2017-08-30T11:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353193",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:42" align="right">comment:42</div>

This ticket was part of the #22802 (now #22802 ticket depends on this ticket).
The referee asked to separate it in 2 tickets : #22802 containing the converter ._sympy_() and the #23496 containing only the sympy patch (._sage())



---

archive/issue_comments_353194.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nOk, then i upvote for making this and #20204 depending on each other. afterwards, merge with #22802.",
    "created_at": "2017-08-30T20:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353194",
    "user": "https://github.com/mforets"
}
```

<div id="comment:43" align="right">comment:43</div>

Ok, then i upvote for making this and #20204 depending on each other. afterwards, merge with #22802.



---

archive/issue_comments_353195.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67f7f4693f271e068e0e073b70909d5013608cf0\"><code>67f7f46</code></a></td><td><code>integrated modifications to composition. But an error remains in french_book.recequadiff tests</code></td></tr></table>\n",
    "created_at": "2017-09-01T14:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353195",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67f7f4693f271e068e0e073b70909d5013608cf0"><code>67f7f46</code></a></td><td><code>integrated modifications to composition. But an error remains in french_book.recequadiff tests</code></td></tr></table>




---

archive/issue_comments_353196.json:
```json
{
    "body": "Changed commit from **[`46ebd72`](https://github.com/sagemath/sagetrac-mirror/commit/46ebd728aac486a5dd675f5d228d90001c421635)** to **[`67f7f46`](https://github.com/sagemath/sagetrac-mirror/commit/67f7f4693f271e068e0e073b70909d5013608cf0)**",
    "created_at": "2017-09-01T14:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353196",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`46ebd72`](https://github.com/sagemath/sagetrac-mirror/commit/46ebd728aac486a5dd675f5d228d90001c421635)** to **[`67f7f46`](https://github.com/sagemath/sagetrac-mirror/commit/67f7f4693f271e068e0e073b70909d5013608cf0)**



---

archive/issue_comments_353197.json:
```json
{
    "body": "Changed commit from **[`67f7f46`](https://github.com/sagemath/sagetrac-mirror/commit/67f7f4693f271e068e0e073b70909d5013608cf0)** to **[`1b5227d`](https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd)**",
    "created_at": "2017-09-01T14:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353197",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`67f7f46`](https://github.com/sagemath/sagetrac-mirror/commit/67f7f4693f271e068e0e073b70909d5013608cf0)** to **[`1b5227d`](https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd)**



---

archive/issue_comments_353198.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd\"><code>1b5227d</code></a></td><td><code>Error in french_book.recequadiff tests corrected</code></td></tr></table>\n",
    "created_at": "2017-09-01T14:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353198",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd"><code>1b5227d</code></a></td><td><code>Error in french_book.recequadiff tests corrected</code></td></tr></table>




---

archive/issue_comments_353199.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\n@man74cio : i don't understand the last two commits. those changes are changing the purpose of this ticket. what do you think about [comment:43](#comment:43)?",
    "created_at": "2017-09-01T18:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353199",
    "user": "https://github.com/mforets"
}
```

<div id="comment:46" align="right">comment:46</div>

@man74cio : i don't understand the last two commits. those changes are changing the purpose of this ticket. what do you think about [comment:43](#comment:43)?



---

archive/issue_comments_353200.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@mforets](#comment:46):\n> @man74cio : i don't understand the last two commits. those changes are changing the purpose of this ticket. what do you think about [comment:43](#comment:43)?\n\n\nAfter a week of debugging I think that this is the unique to pass the tests in french_book.recequadiff :\nin test : \n383   sage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)\nthe integer 3/2  (Sage Integer) makes necessary the modifications (you suggested) to composition function:\nu(n+2) is sympy\n(3/2)*u(n+1) is sage \n...\n...\n\n\n\nthe error in\n388 sage: rsolve(f, u(n), {u(0):-1,u(1):1})\nis caused by the fact that Sympy integer are not imported.\n\nBefore the sympy patch there was not error but for me it was not correct:\nbecause the expressions mixed sympy (u,n) and sage quantities (1/2).",
    "created_at": "2017-09-01T21:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353200",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@mforets](#comment:46):
> @man74cio : i don't understand the last two commits. those changes are changing the purpose of this ticket. what do you think about [comment:43](#comment:43)?


After a week of debugging I think that this is the unique to pass the tests in french_book.recequadiff :
in test : 
383   sage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)
the integer 3/2  (Sage Integer) makes necessary the modifications (you suggested) to composition function:
u(n+2) is sympy
(3/2)*u(n+1) is sage 
...
...



the error in
388 sage: rsolve(f, u(n), {u(0):-1,u(1):1})
is caused by the fact that Sympy integer are not imported.

Before the sympy patch there was not error but for me it was not correct:
because the expressions mixed sympy (u,n) and sage quantities (1/2).



---

archive/issue_comments_353201.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThat is quite a piece of debugging. However, there should be some natural place to put in this import statement within the code, either in Sage or Sympy. Do you have an idea about where it should go?",
    "created_at": "2017-09-02T05:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353201",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

That is quite a piece of debugging. However, there should be some natural place to put in this import statement within the code, either in Sage or Sympy. Do you have an idea about where it should go?



---

archive/issue_comments_353202.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI have no idea. For me the expression is not well written: if I am using sage and I want resolve it with a sympy method: before I write the expression than I covert it before to use sympy method and finally I convert back the result. But a strange mixing for me is not sane.",
    "created_at": "2017-09-02T06:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353202",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:49" align="right">comment:49</div>

I have no idea. For me the expression is not well written: if I am using sage and I want resolve it with a sympy method: before I write the expression than I covert it before to use sympy method and finally I convert back the result. But a strange mixing for me is not sane.



---

archive/issue_comments_353203.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nwhat i find odd is that:\n\n- using `n = Symbol('n')` in the `rsolve` test it works,\n- similarly but using `from sympy.abc import n`.\n\nto move on, i propose to modify the test as below, and report the failing use case in a new ticket.\n\n```\nsage: n = var('n', domain='integer'); u = function('u')\nsage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)\nsage: us = u._sympy_() ; fs = f._sympy_();\nsage: from sympy import rsolve; rsolve(fs, us(n), {us(0):-1,us(1):1})\n3 - 4*2**(-n)\n```\n\nwhat do you think?",
    "created_at": "2017-09-02T08:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353203",
    "user": "https://github.com/mforets"
}
```

<div id="comment:50" align="right">comment:50</div>

what i find odd is that:

- using `n = Symbol('n')` in the `rsolve` test it works,
- similarly but using `from sympy.abc import n`.

to move on, i propose to modify the test as below, and report the failing use case in a new ticket.

```
sage: n = var('n', domain='integer'); u = function('u')
sage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)
sage: us = u._sympy_() ; fs = f._sympy_();
sage: from sympy import rsolve; rsolve(fs, us(n), {us(0):-1,us(1):1})
3 - 4*2**(-n)
```

what do you think?



---

archive/issue_comments_353204.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\n- also works if you cast the sage integers to symbolic expressions, the rest of the test unchanged: `f = u(n+2)-SR(3/2)*u(n+1)+SR(1/2)*u(n)`",
    "created_at": "2017-09-02T09:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353204",
    "user": "https://github.com/mforets"
}
```

<div id="comment:51" align="right">comment:51</div>

- also works if you cast the sage integers to symbolic expressions, the rest of the test unchanged: `f = u(n+2)-SR(3/2)*u(n+1)+SR(1/2)*u(n)`



---

archive/issue_comments_353205.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI agree,It is a coherent way to do things.\nWe need to do another ticket?\n\nReplying to [@mforets](#comment:50):\n> what i find odd is that:\n> \n> - using `n = Symbol('n')` in the `rsolve` test it works,\n> - similarly but using `from sympy.abc import n`.\n> \n> to move on, i propose to modify the test as below, and report the failing use case in a new ticket.\n> \n> ```\n> sage: n = var('n', domain='integer'); u = function('u')\n> sage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)\n> sage: us = u._sympy_() ; fs = f._sympy_();\n> sage: from sympy import rsolve; rsolve(fs, us(n), {us(0):-1,us(1):1})\n> 3 - 4*2**(-n)\n> ```\n> \n> what do you think?",
    "created_at": "2017-09-02T10:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353205",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:52" align="right">comment:52</div>

I agree,It is a coherent way to do things.
We need to do another ticket?

Replying to [@mforets](#comment:50):
> what i find odd is that:
> 
> - using `n = Symbol('n')` in the `rsolve` test it works,
> - similarly but using `from sympy.abc import n`.
> 
> to move on, i propose to modify the test as below, and report the failing use case in a new ticket.
> 
> ```
> sage: n = var('n', domain='integer'); u = function('u')
> sage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)
> sage: us = u._sympy_() ; fs = f._sympy_();
> sage: from sympy import rsolve; rsolve(fs, us(n), {us(0):-1,us(1):1})
> 3 - 4*2**(-n)
> ```
> 
> what do you think?



---

archive/issue_comments_353206.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@mforets](#comment:51):\n> - also works if you cast the sage integers to symbolic expressions, the rest of the test unchanged: `f = u(n+2)-SR(3/2)*u(n+1)+SR(1/2)*u(n)`\n\nIt is also possible to postpone rational numbers to prevent sympy-two-day intermediate conversion :`f = u(n+2)-u(n+1)*3/2+u(n)*1/2`",
    "created_at": "2017-09-02T10:12:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353206",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@mforets](#comment:51):
> - also works if you cast the sage integers to symbolic expressions, the rest of the test unchanged: `f = u(n+2)-SR(3/2)*u(n+1)+SR(1/2)*u(n)`

It is also possible to postpone rational numbers to prevent sympy-two-day intermediate conversion :`f = u(n+2)-u(n+1)*3/2+u(n)*1/2`



---

archive/issue_comments_353207.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@man74cio](#comment:52):\n> I agree,It is a coherent way to do things.\n\n+1\n\n> We need to do another ticket?\n\nIMHO yes, because this is a different issue; the new ticket could be about implementing `rsolve` in Sage, as an interface to sympy's `rsolve`. \n\nThe doctest discussed here is used as an example on page 17 of this document:\nhttps://members.loria.fr/PZimmermann/sagebook/recequadiff.pdf ,\nwhich is a chapter of the English translation of the so-called \"French book\" (*Calcul math\u00e9matique avec Sage*). The latter is currently in its final preparatory stage, cf. https://groups.google.com/forum/#!topic/sage-devel/MalKzTyvrys .\nOne should probably ask the authors to update this example (the book is not likely to be out before Sage 8.1, where the current ticket could be effective).",
    "created_at": "2017-09-02T13:20:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353207",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@man74cio](#comment:52):
> I agree,It is a coherent way to do things.

+1

> We need to do another ticket?

IMHO yes, because this is a different issue; the new ticket could be about implementing `rsolve` in Sage, as an interface to sympy's `rsolve`. 

The doctest discussed here is used as an example on page 17 of this document:
https://members.loria.fr/PZimmermann/sagebook/recequadiff.pdf ,
which is a chapter of the English translation of the so-called "French book" (*Calcul mathmatique avec Sage*). The latter is currently in its final preparatory stage, cf. https://groups.google.com/forum/#!topic/sage-devel/MalKzTyvrys .
One should probably ask the authors to update this example (the book is not likely to be out before Sage 8.1, where the current ticket could be effective).



---

archive/issue_comments_353208.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI understand what changes with that import statement, every Integer becomes a Sympy Integer because the preparser replaces things like `1` with `Integer(1)`. I strongly believe we should be testing behavior that mixes Sage and Sympy, as this is a very natural thing to do (in Sage), so I disagree with changing the test and also [1b5227d](https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd).",
    "created_at": "2017-09-02T15:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353208",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:55" align="right">comment:55</div>

I understand what changes with that import statement, every Integer becomes a Sympy Integer because the preparser replaces things like `1` with `Integer(1)`. I strongly believe we should be testing behavior that mixes Sage and Sympy, as this is a very natural thing to do (in Sage), so I disagree with changing the test and also [1b5227d](https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd).



---

archive/issue_events_324142.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-02T15:18:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324142"
}
```



---

archive/issue_events_324143.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-02T15:18:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324143"
}
```



---

archive/issue_comments_353209.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nInteresting, this works on my machine:\n\n```\nf = u(n+2)-u(n+1)*(3/2)+u(n)/2\n```\nDoing more debugging currently.",
    "created_at": "2017-09-02T15:46:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353209",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:56" align="right">comment:56</div>

Interesting, this works on my machine:

```
f = u(n+2)-u(n+1)*(3/2)+u(n)/2
```
Doing more debugging currently.



---

archive/issue_comments_353210.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nIt seems to boil back down to this:\n\n```\nsage: type((3/2) * u(n+1))\n<type 'sage.symbolic.expression.Expression'>\nsage: type(u(n+1) * (3/2))\n<class 'sympy.core.mul.Mul'>\n```",
    "created_at": "2017-09-02T15:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353210",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:57" align="right">comment:57</div>

It seems to boil back down to this:

```
sage: type((3/2) * u(n+1))
<type 'sage.symbolic.expression.Expression'>
sage: type(u(n+1) * (3/2))
<class 'sympy.core.mul.Mul'>
```



---

archive/issue_comments_353211.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nActually, that might just be a symptom rather than the cause. I'm wondering if there is something wrong with doing the conversion to Sympy:\n\n```\nsage: f = u(n+2)-sympy.sympify(3/2)*u(n+1)+sympy.sympify(1/2)*u(n)  # This works\nsage: f = u(n+2)-sympy.sympify((3/2)*u(n+1))+sympy.sympify((1/2)*u(n))  # This fails\n```",
    "created_at": "2017-09-02T16:11:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353211",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:58" align="right">comment:58</div>

Actually, that might just be a symptom rather than the cause. I'm wondering if there is something wrong with doing the conversion to Sympy:

```
sage: f = u(n+2)-sympy.sympify(3/2)*u(n+1)+sympy.sympify(1/2)*u(n)  # This works
sage: f = u(n+2)-sympy.sympify((3/2)*u(n+1))+sympy.sympify((1/2)*u(n))  # This fails
```



---

archive/issue_comments_353212.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI think this is the real problem with all of this:\n\n```\nsage: from sympy import Symbol\nsage: n = Symbol('n', integer=True)\nsage: sympy.sympify(1+n).args[1] == n\nFalse\n```\nThe roundtrip of a sympy symbol through Sage results in a different symbol:\n\n```\nsage: m = Symbol('n', integer=True)\nsage: m == n\nTrue\nsage: p = Symbol('n')\nsage: p == n\nFalse\n\nsage: sympy.simplify(SR(n)).assumptions0\n{'commutative': True}\nsage: n.assumptions0\n{'algebraic': True,\n 'commutative': True,\n 'complex': True,\n 'hermitian': True,\n 'imaginary': False,\n 'integer': True,\n 'irrational': False,\n 'noninteger': False,\n 'rational': True,\n 'real': True,\n 'transcendental': False}\nsage: p is sympy.sympify(SR(n))\nTrue\n```\nSo I think we need to translate assumptions over to truly fix the problem.",
    "created_at": "2017-09-02T16:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353212",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:59" align="right">comment:59</div>

I think this is the real problem with all of this:

```
sage: from sympy import Symbol
sage: n = Symbol('n', integer=True)
sage: sympy.sympify(1+n).args[1] == n
False
```
The roundtrip of a sympy symbol through Sage results in a different symbol:

```
sage: m = Symbol('n', integer=True)
sage: m == n
True
sage: p = Symbol('n')
sage: p == n
False

sage: sympy.simplify(SR(n)).assumptions0
{'commutative': True}
sage: n.assumptions0
{'algebraic': True,
 'commutative': True,
 'complex': True,
 'hermitian': True,
 'imaginary': False,
 'integer': True,
 'irrational': False,
 'noninteger': False,
 'rational': True,
 'real': True,
 'transcendental': False}
sage: p is sympy.sympify(SR(n))
True
```
So I think we need to translate assumptions over to truly fix the problem.



---

archive/issue_comments_353213.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI'm also a little more open to just fixing the test (but making sure everything says in Sympy with a big warning message in the doctest).",
    "created_at": "2017-09-02T16:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353213",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:60" align="right">comment:60</div>

I'm also a little more open to just fixing the test (but making sure everything says in Sympy with a big warning message in the doctest).



---

archive/issue_events_324144.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-02T16:49:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324144"
}
```



---

archive/issue_events_324145.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-02T16:49:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324145"
}
```



---

archive/issue_comments_353214.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nI guess what I am asking is do we want to fix the problem of [comment:59](#comment:59) here or just push it to a later ticket?",
    "created_at": "2017-09-02T16:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353214",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:61" align="right">comment:61</div>

I guess what I am asking is do we want to fix the problem of [comment:59](#comment:59) here or just push it to a later ticket?



---

archive/issue_comments_353215.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@tscrim](#comment:60):\n> I'm also a little more open to just fixing the test \n\nIndeed, the test, as it is, is quite unnatural from a Sage's user point of view: the import of specific Sympy objects (in the line `from sympy import Function, Symbol`) and their mixing with some Sage objects (in the line `f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)`), with *implicit* conversions Sage <--> Sympy involved, without any user control on them, is not something desirable. The change proposed in [comment:50](#comment:50) seems much more reasonable: one defines first `f` entirely as a Sage object and then *explicitely* convert it to a Sympy object before passing it to Sympy's `rsolve`, because there is no Sage's `rsolve` yet.",
    "created_at": "2017-09-02T16:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353215",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@tscrim](#comment:60):
> I'm also a little more open to just fixing the test 

Indeed, the test, as it is, is quite unnatural from a Sage's user point of view: the import of specific Sympy objects (in the line `from sympy import Function, Symbol`) and their mixing with some Sage objects (in the line `f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)`), with *implicit* conversions Sage <--> Sympy involved, without any user control on them, is not something desirable. The change proposed in [comment:50](#comment:50) seems much more reasonable: one defines first `f` entirely as a Sage object and then *explicitely* convert it to a Sympy object before passing it to Sympy's `rsolve`, because there is no Sage's `rsolve` yet.



---

archive/issue_comments_353216.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@tscrim](#comment:61):\n> I guess what I am asking is do we want to fix the problem of [comment:59](#comment:59) here or just push it to a later ticket?\n\n+1 for a later ticket.",
    "created_at": "2017-09-02T17:00:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353216",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@tscrim](#comment:61):
> I guess what I am asking is do we want to fix the problem of [comment:59](#comment:59) here or just push it to a later ticket?

+1 for a later ticket.



---

archive/issue_comments_353217.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@egourgoulhon](#comment:62):\n> Replying to [@tscrim](#comment:60):\n> > I'm also a little more open to just fixing the test \n\n> Indeed, the test, as it is, is quite unnatural from a Sage's user point of view: the import of specific Sympy objects (in the line `from sympy import Function, Symbol`) and their mixing with some Sage objects (in the line `f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)`), with *implicit* conversions Sage <--> Sympy involved, without any user control on them, is not something desirable. The change proposed in [comment:50](#comment:50) seems much more reasonable: one defines first `f` entirely as a Sage object and then *explicitely* convert it to a Sympy object before passing it to Sympy's `rsolve`, because there is no Sage's `rsolve` yet.\n\nI don't think it is that unnatural as someone who wants to use sympy, something that we do suggest to people, would construct something in that fashion. One of the benefits of Sage are those implicit conversions so that users should not have to worry about them.\n\nHowever, that discussion aside, I think that we should keep as close to the original doctest because it is in Calcul Math\u00e9matique avec Sage (even if it is out of date). So I believe we should just change the order of multiplication of the coefficients as in [comment:56](#comment:56) and add a warning about it.",
    "created_at": "2017-09-02T17:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353217",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@egourgoulhon](#comment:62):
> Replying to [@tscrim](#comment:60):
> > I'm also a little more open to just fixing the test 

> Indeed, the test, as it is, is quite unnatural from a Sage's user point of view: the import of specific Sympy objects (in the line `from sympy import Function, Symbol`) and their mixing with some Sage objects (in the line `f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)`), with *implicit* conversions Sage <--> Sympy involved, without any user control on them, is not something desirable. The change proposed in [comment:50](#comment:50) seems much more reasonable: one defines first `f` entirely as a Sage object and then *explicitely* convert it to a Sympy object before passing it to Sympy's `rsolve`, because there is no Sage's `rsolve` yet.

I don't think it is that unnatural as someone who wants to use sympy, something that we do suggest to people, would construct something in that fashion. One of the benefits of Sage are those implicit conversions so that users should not have to worry about them.

However, that discussion aside, I think that we should keep as close to the original doctest because it is in Calcul Mathmatique avec Sage (even if it is out of date). So I believe we should just change the order of multiplication of the coefficients as in [comment:56](#comment:56) and add a warning about it.



---

archive/issue_comments_353218.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nhi, thank you all for the help debugging. with this sympy patch (at sympy/core/function.py and on top of #20204), it works for me:\n\n```\nclass AppliedUndef(Function):\n    \"\"\"\n    Base class for expressions resulting from the application of an undefined\n    function.\n    \"\"\"\n    .\n    .\n    .\n    def _sage_(self):\n        import sage.all as sage\n        fname = self.func.__name__\n        func = getattr(sage, fname)\n        args = [arg._sage_() for arg in self.args]\n        return func\n```\n\ndo you already have the same `_sage_` there?",
    "created_at": "2017-09-02T19:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353218",
    "user": "https://github.com/mforets"
}
```

<div id="comment:65" align="right">comment:65</div>

hi, thank you all for the help debugging. with this sympy patch (at sympy/core/function.py and on top of #20204), it works for me:

```
class AppliedUndef(Function):
    """
    Base class for expressions resulting from the application of an undefined
    function.
    """
    .
    .
    .
    def _sage_(self):
        import sage.all as sage
        fname = self.func.__name__
        func = getattr(sage, fname)
        args = [arg._sage_() for arg in self.args]
        return func
```

do you already have the same `_sage_` there?



---

archive/issue_comments_353219.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@tscrim](#comment:64):\n> I don't think it is that unnatural as someone who wants to use sympy, something that we do suggest to people, would construct something in that fashion. One of the benefits of Sage are those implicit conversions so that users should not have to worry about them.\n\n>\n\nWell, there is some degree of arbitrariness in these implicit conversions: if `a` is a Sage object and `b` a Sympy object, what `a*b` shall be? For the example of the French textbook as it is now, with `a`=`3/2` and `b`=`u(n+1)`, we want `a*b` to be a Sympy object, so that the final `f` is a Sympy object. But in other cases?",
    "created_at": "2017-09-02T19:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353219",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@tscrim](#comment:64):
> I don't think it is that unnatural as someone who wants to use sympy, something that we do suggest to people, would construct something in that fashion. One of the benefits of Sage are those implicit conversions so that users should not have to worry about them.

>

Well, there is some degree of arbitrariness in these implicit conversions: if `a` is a Sage object and `b` a Sympy object, what `a*b` shall be? For the example of the French textbook as it is now, with `a`=`3/2` and `b`=`u(n+1)`, we want `a*b` to be a Sympy object, so that the final `f` is a Sympy object. But in other cases?



---

archive/issue_comments_353220.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\n> So I believe we should just change the order of multiplication of the coefficients as in [comment:56](#comment:56) and add a warning about it. \n\nit seems that game was played before:\n\n```\n$ git show 12cdb58d7a02391224477d0d99312be8fc03f678\n@@ -379,7 +379,7 @@ Sage example in ./recequadiff.tex, line 1197::\n\n Sage example in ./recequadiff.tex, line 1208::\n\n\n-  sage: f = u(n+2)-u(n+1)*(3/2)+u(n)*(1/2)\n+  sage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)\n```\n\nthis is a commit by Ralph.",
    "created_at": "2017-09-02T19:45:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353220",
    "user": "https://github.com/mforets"
}
```

<div id="comment:67" align="right">comment:67</div>

> So I believe we should just change the order of multiplication of the coefficients as in [comment:56](#comment:56) and add a warning about it. 

it seems that game was played before:

```
$ git show 12cdb58d7a02391224477d0d99312be8fc03f678
@@ -379,7 +379,7 @@ Sage example in ./recequadiff.tex, line 1197::

 Sage example in ./recequadiff.tex, line 1208::


-  sage: f = u(n+2)-u(n+1)*(3/2)+u(n)*(1/2)
+  sage: f = u(n+2)-(3/2)*u(n+1)+(1/2)*u(n)
```

this is a commit by Ralph.



---

archive/issue_comments_353221.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\n@mforets [comment:67](#comment:67) - All the more reason to just do the minimal change. IIRC, we needed to do that in order for the construction of `f` to not fail, but with this patch, it is okay.\n\n@egourgoulhon [comment:66](#comment:66) - Yes, there is currently some ambiguity because of things are done, but ultimately it shouldn't matter. Although if I really had to decide, I would say everything should go to Sympy objects because we cannot expect Sympy objects to work with our coercion system.",
    "created_at": "2017-09-02T20:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353221",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:68" align="right">comment:68</div>

@mforets [comment:67](#comment:67) - All the more reason to just do the minimal change. IIRC, we needed to do that in order for the construction of `f` to not fail, but with this patch, it is okay.

@egourgoulhon [comment:66](#comment:66) - Yes, there is currently some ambiguity because of things are done, but ultimately it shouldn't matter. Although if I really had to decide, I would say everything should go to Sympy objects because we cannot expect Sympy objects to work with our coercion system.



---

archive/issue_comments_353222.json:
```json
{
    "body": "Changed commit from **[`1b5227d`](https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd)** to **[`d76caea`](https://github.com/sagemath/sagetrac-mirror/commit/d76caea0b97af8769edf9a1064db9f7486232b1d)**",
    "created_at": "2017-09-03T12:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353222",
    "user": "https://github.com/mforets"
}
```

Changed commit from **[`1b5227d`](https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd)** to **[`d76caea`](https://github.com/sagemath/sagetrac-mirror/commit/d76caea0b97af8769edf9a1064db9f7486232b1d)**



---

archive/issue_events_324146.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-09-03T12:28:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324146"
}
```



---

archive/issue_events_324147.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-09-03T12:28:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324147"
}
```



---

archive/issue_comments_353223.json:
```json
{
    "body": "Changed branch from **[public/23496_patch_sympy_abstact_function](https://github.com/sagemath/sagetrac-mirror/tree/public/23496_patch_sympy_abstact_function)** to **[public/23496_patch_sympy_abstract_function](https://github.com/sagemath/sagetrac-mirror/tree/public/23496_patch_sympy_abstract_function)**",
    "created_at": "2017-09-03T12:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353223",
    "user": "https://github.com/mforets"
}
```

Changed branch from **[public/23496_patch_sympy_abstact_function](https://github.com/sagemath/sagetrac-mirror/tree/public/23496_patch_sympy_abstact_function)** to **[public/23496_patch_sympy_abstract_function](https://github.com/sagemath/sagetrac-mirror/tree/public/23496_patch_sympy_abstract_function)**



---

archive/issue_comments_353224.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nok, let's do it => needs review\n\nnote: this does not depend on #20204.\n\n(@Marco : sorry, i did not intend to create a new branch, just after pushing i realized the current says \"abstact\" instead of \"abstract\")\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/018d753eedd53686dfd4f086dfb7c20dda02b7e0\"><code>018d753</code></a></td><td><code>Merge branch 'develop' into t/23496/public/23496_patch_sympy_abstact_function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94af74bb32f09a0b2d08b50e2ef34f22e8212d9f\"><code>94af74b</code></a></td><td><code>#23496 : (temp) revert order in rsolve recequadiff.tex test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d76caea0b97af8769edf9a1064db9f7486232b1d\"><code>d76caea</code></a></td><td><code>#23496 : add message for change in doctest</code></td></tr></table>\n",
    "created_at": "2017-09-03T12:28:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353224",
    "user": "https://github.com/mforets"
}
```

<div id="comment:69" align="right">comment:69</div>

ok, let's do it => needs review

note: this does not depend on #20204.

(@Marco : sorry, i did not intend to create a new branch, just after pushing i realized the current says "abstact" instead of "abstract")

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/018d753eedd53686dfd4f086dfb7c20dda02b7e0"><code>018d753</code></a></td><td><code>Merge branch 'develop' into t/23496/public/23496_patch_sympy_abstact_function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94af74bb32f09a0b2d08b50e2ef34f22e8212d9f"><code>94af74b</code></a></td><td><code>#23496 : (temp) revert order in rsolve recequadiff.tex test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d76caea0b97af8769edf9a1064db9f7486232b1d"><code>d76caea</code></a></td><td><code>#23496 : add message for change in doctest</code></td></tr></table>




---

archive/issue_comments_353225.json:
```json
{
    "body": "Changed commit from **[`d76caea`](https://github.com/sagemath/sagetrac-mirror/commit/d76caea0b97af8769edf9a1064db9f7486232b1d)** to **[`bc21300`](https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f)**",
    "created_at": "2017-09-03T13:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353225",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d76caea`](https://github.com/sagemath/sagetrac-mirror/commit/d76caea0b97af8769edf9a1064db9f7486232b1d)** to **[`bc21300`](https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f)**



---

archive/issue_comments_353226.json:
```json
{
    "body": "<div id=\"comment:70\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f\"><code>bc21300</code></a></td><td><code>#23496 : fix a `_sympy_init_` doctest</code></td></tr></table>\n",
    "created_at": "2017-09-03T13:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353226",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f"><code>bc21300</code></a></td><td><code>#23496 : fix a `_sympy_init_` doctest</code></td></tr></table>




---

archive/issue_comments_353227.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\n> > We need to do another ticket?\n\n> \n> IMHO yes, because this is a different issue; the new ticket could be about implementing `rsolve` in Sage, as an interface to sympy's `rsolve`. \n> \n\nyes, that would be a nice feature. we can use ticket #1291. also open is the sage interface to sympy's `solve` (#22322).",
    "created_at": "2017-09-03T13:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353227",
    "user": "https://github.com/mforets"
}
```

<div id="comment:71" align="right">comment:71</div>

> > We need to do another ticket?

> 
> IMHO yes, because this is a different issue; the new ticket could be about implementing `rsolve` in Sage, as an interface to sympy's `rsolve`. 
> 

yes, that would be a nice feature. we can use ticket #1291. also open is the sage interface to sympy's `solve` (#22322).



---

archive/issue_comments_353228.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@mforets](#comment:69):\n> ok, let's do it => needs review\n> \n> note: this does not depend on #20204.\n> \n> (@Marco : sorry, i did not intend to create a new branch, just after pushing i realized the current says \"abstact\" instead of \"abstract\")\n\nNo problem, thanks.",
    "created_at": "2017-09-03T14:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353228",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@mforets](#comment:69):
> ok, let's do it => needs review
> 
> note: this does not depend on #20204.
> 
> (@Marco : sorry, i did not intend to create a new branch, just after pushing i realized the current says "abstact" instead of "abstract")

No problem, thanks.



---

archive/issue_comments_353229.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nthe patchbot errrors seem to be unrelated to our patch, but on a GLPK update.",
    "created_at": "2017-09-04T09:23:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353229",
    "user": "https://github.com/mforets"
}
```

<div id="comment:73" align="right">comment:73</div>

the patchbot errrors seem to be unrelated to our patch, but on a GLPK update.



---

archive/issue_comments_353230.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Marcelo Forets**",
    "created_at": "2017-09-04T14:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353230",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Marcelo Forets**



---

archive/issue_comments_353231.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nPositive review. Thanks for your work on this.",
    "created_at": "2017-09-04T14:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353231",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:74" align="right">comment:74</div>

Positive review. Thanks for your work on this.



---

archive/issue_events_324148.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-04T14:28:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324148"
}
```



---

archive/issue_events_324149.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-04T14:28:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324149"
}
```



---

archive/issue_comments_353232.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nThanks from me as well.",
    "created_at": "2017-09-04T14:33:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353232",
    "user": "https://github.com/rwst"
}
```

<div id="comment:75" align="right">comment:75</div>

Thanks from me as well.



---

archive/issue_comments_353233.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nThank you for the review",
    "created_at": "2017-09-05T08:59:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353233",
    "user": "https://github.com/man74cio"
}
```

<div id="comment:76" align="right">comment:76</div>

Thank you for the review



---

archive/issue_comments_353234.json:
```json
{
    "body": "Changed branch from **[public/23496_patch_sympy_abstract_function](https://github.com/sagemath/sagetrac-mirror/tree/public/23496_patch_sympy_abstract_function)** to **[`bc21300`](https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f)**",
    "created_at": "2017-09-10T11:57:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23496#issuecomment-353234",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/23496_patch_sympy_abstract_function](https://github.com/sagemath/sagetrac-mirror/tree/public/23496_patch_sympy_abstract_function)** to **[`bc21300`](https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f)**



---

archive/issue_events_324150.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-10T11:57:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324150"
}
```



---

archive/issue_events_324151.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "329e970dfb660bb7d65c21f0f03d23e56d68f386",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-09-10T11:57:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23496",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23496#event-324151"
}
```
