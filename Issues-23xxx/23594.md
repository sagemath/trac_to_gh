# Issue 23594: Upgrade scipy to 0.19.1

archive/issues_023357.json:
```json
{
    "body": "Routine upgrade. I have enough of seeing various doctests failing in sage-on-gentoo when using this version. \n\ntarball: [https://pypi.python.org/packages/52/67/d9ef9b5058d4a9e3f0ae641ec151790622cbeb37f157de5773358e2bf3da/scipy-0.19.1.tar.gz](https://pypi.python.org/packages/52/67/d9ef9b5058d4a9e3f0ae641ec151790622cbeb37f157de5773358e2bf3da/scipy-0.19.1.tar.gz)\n\nBranch: [88d70c68fbd6ba1fda52217b81a45c906aaf390e](https://github.com/sagemath/sagetrac-mirror/commit/88d70c68fbd6ba1fda52217b81a45c906aaf390e)\n\nReviewer: Vincent Delecroix, Jean-Pierre Flori\n\nAuthor: Fran\u00e7ois Bissey\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23594\n\n",
    "closed_at": "2017-09-04T06:10:46Z",
    "created_at": "2017-08-07T23:54:39Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Upgrade scipy to 0.19.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23594",
    "user": "https://github.com/kiwifb"
}
```
Routine upgrade. I have enough of seeing various doctests failing in sage-on-gentoo when using this version. 

tarball: [https://pypi.python.org/packages/52/67/d9ef9b5058d4a9e3f0ae641ec151790622cbeb37f157de5773358e2bf3da/scipy-0.19.1.tar.gz](https://pypi.python.org/packages/52/67/d9ef9b5058d4a9e3f0ae641ec151790622cbeb37f157de5773358e2bf3da/scipy-0.19.1.tar.gz)

Branch: [88d70c68fbd6ba1fda52217b81a45c906aaf390e](https://github.com/sagemath/sagetrac-mirror/commit/88d70c68fbd6ba1fda52217b81a45c906aaf390e)

Reviewer: Vincent Delecroix, Jean-Pierre Flori

Author: François Bissey

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23594





---

archive/issue_comments_446712.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Routine upgrade. I have enough of seeing various doctests failing in sage-on-gentoo when using this version. \n+\n+tarball: [https://pypi.python.org/packages/52/67/d9ef9b5058d4a9e3f0ae641ec151790622cbeb37f157de5773358e2bf3da/scipy-0.19.1.tar.gz](https://pypi.python.org/packages/52/67/d9ef9b5058d4a9e3f0ae641ec151790622cbeb37f157de5773358e2bf3da/scipy-0.19.1.tar.gz)\n``````\n",
    "created_at": "2017-08-08T01:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446712",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Routine upgrade. I have enough of seeing various doctests failing in sage-on-gentoo when using this version. 
+
+tarball: [https://pypi.python.org/packages/52/67/d9ef9b5058d4a9e3f0ae641ec151790622cbeb37f157de5773358e2bf3da/scipy-0.19.1.tar.gz](https://pypi.python.org/packages/52/67/d9ef9b5058d4a9e3f0ae641ec151790622cbeb37f157de5773358e2bf3da/scipy-0.19.1.tar.gz)
``````




---

archive/issue_comments_446713.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-08T01:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446713",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_446714.json:
```json
{
    "body": "Changing commit from \"\" to \"7c600a76e9003ead3ccfe7377a56a6b6dfb51ce5\"",
    "created_at": "2017-08-08T01:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446714",
    "user": "https://github.com/kiwifb"
}
```

Changing commit from "" to "7c600a76e9003ead3ccfe7377a56a6b6dfb51ce5"



---

archive/issue_comments_446715.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[24befd2](https://github.com/sagemath/sagetrac-mirror/commit/24befd26053e1e3518a0419f8b05cfe408b53613)|`changing version number`|\n|[dbc3a9b](https://github.com/sagemath/sagetrac-mirror/commit/dbc3a9bc28f523de50d7173b870f5b2a22de70a2)|`Merge branch 'develop' into scipy0.19.1`|\n|[1fde6ae](https://github.com/sagemath/sagetrac-mirror/commit/1fde6ae05a6aa8781b8df126f68c4702c61d6e20)|`fix checksums`|\n|[49485cd](https://github.com/sagemath/sagetrac-mirror/commit/49485cde0a359147ac75ec5b887a6595d22e3bb0)|`Fixing easy to fix doctests`|\n|[7c600a7](https://github.com/sagemath/sagetrac-mirror/commit/7c600a76e9003ead3ccfe7377a56a6b6dfb51ce5)|`Fix optimize doctest after checking that it still does what it supposed to do. Results are more consistent between methods overall.`|",
    "created_at": "2017-08-08T01:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446715",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[24befd2](https://github.com/sagemath/sagetrac-mirror/commit/24befd26053e1e3518a0419f8b05cfe408b53613)|`changing version number`|
|[dbc3a9b](https://github.com/sagemath/sagetrac-mirror/commit/dbc3a9bc28f523de50d7173b870f5b2a22de70a2)|`Merge branch 'develop' into scipy0.19.1`|
|[1fde6ae](https://github.com/sagemath/sagetrac-mirror/commit/1fde6ae05a6aa8781b8df126f68c4702c61d6e20)|`fix checksums`|
|[49485cd](https://github.com/sagemath/sagetrac-mirror/commit/49485cde0a359147ac75ec5b887a6595d22e3bb0)|`Fixing easy to fix doctests`|
|[7c600a7](https://github.com/sagemath/sagetrac-mirror/commit/7c600a76e9003ead3ccfe7377a56a6b6dfb51ce5)|`Fix optimize doctest after checking that it still does what it supposed to do. Results are more consistent between methods overall.`|



---

archive/issue_comments_446716.json:
```json
{
    "body": "Changing branch from \"\" to \"u/fbissey/scipy0.19.1\"",
    "created_at": "2017-08-08T01:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446716",
    "user": "https://github.com/kiwifb"
}
```

Changing branch from "" to "u/fbissey/scipy0.19.1"



---

archive/issue_comments_446717.json:
```json
{
    "body": "Changing author from \"\" to \"Francois Bissey\"",
    "created_at": "2017-08-08T02:21:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446717",
    "user": "https://github.com/kiwifb"
}
```

Changing author from "" to "Francois Bissey"



---

archive/issue_comments_446718.json:
```json
{
    "body": "Changing author from \"Francois Bissey\" to \"Fran\u00e7ois Bissey\"",
    "created_at": "2017-08-08T21:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446718",
    "user": "https://github.com/kiwifb"
}
```

Changing author from "Francois Bissey" to "François Bissey"



---

archive/issue_comments_446719.json:
```json
{
    "body": "<a id='comment:4'></a>\nWouldn't it be better to set some numerical tolerance in `sage/numerical/optimize.py` instead of changing `1.0` into `0.9999999`?",
    "created_at": "2017-08-09T17:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446719",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
Wouldn't it be better to set some numerical tolerance in `sage/numerical/optimize.py` instead of changing `1.0` into `0.9999999`?



---

archive/issue_comments_446720.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [vdelecroix](#comment%3A4):\n> Wouldn't it be better to set some numerical tolerance in `sage/numerical/optimize.py` instead of changing `1.0` into `0.9999999`?\n\n\nI thought of that. At the moment I kept things consistent with other doctests giving the same results. So if using tolerance I think \n* we need to go back to the whole series of doctests not just the ones broken by this upgrade\n* You can you only set one tolerance for one result so you need to align things not with `0.9999999` but with `0.999999` (one less `9`)\n\nThat being said there is already inconsistency in the number of decimals quoted for the results starting with `1.` compared to the one starting with `0.9`. Harmonizing all of this would probably be a good thing.\n\nWould you support touching the other doctest giving similar results to the ones broken by the upgrade?",
    "created_at": "2017-08-09T21:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446720",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
Replying to [vdelecroix](#comment%3A4):
> Wouldn't it be better to set some numerical tolerance in `sage/numerical/optimize.py` instead of changing `1.0` into `0.9999999`?


I thought of that. At the moment I kept things consistent with other doctests giving the same results. So if using tolerance I think 
* we need to go back to the whole series of doctests not just the ones broken by this upgrade
* You can you only set one tolerance for one result so you need to align things not with `0.9999999` but with `0.999999` (one less `9`)

That being said there is already inconsistency in the number of decimals quoted for the results starting with `1.` compared to the one starting with `0.9`. Harmonizing all of this would probably be a good thing.

Would you support touching the other doctest giving similar results to the ones broken by the upgrade?



---

archive/issue_comments_446721.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [fbissey](#comment%3A5):\n> Replying to [vdelecroix](#comment%3A4):\n> > Wouldn't it be better to set some numerical tolerance in `sage/numerical/optimize.py` instead of changing `1.0` into `0.9999999`?\n\n>\n> Would you support touching the other doctest giving similar results to the ones broken by the upgrade?\n\n>\n\nI will.",
    "created_at": "2017-08-10T08:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446721",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
Replying to [fbissey](#comment%3A5):
> Replying to [vdelecroix](#comment%3A4):
> > Wouldn't it be better to set some numerical tolerance in `sage/numerical/optimize.py` instead of changing `1.0` into `0.9999999`?

>
> Would you support touching the other doctest giving similar results to the ones broken by the upgrade?

>

I will.



---

archive/issue_comments_446722.json:
```json
{
    "body": "Changing commit from \"7c600a76e9003ead3ccfe7377a56a6b6dfb51ce5\" to \"cbe2690f4b4fa7bbb6cca1d263be5d90ea69f9e4\"",
    "created_at": "2017-08-20T23:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7c600a76e9003ead3ccfe7377a56a6b6dfb51ce5" to "cbe2690f4b4fa7bbb6cca1d263be5d90ea69f9e4"



---

archive/issue_comments_446723.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[cbe2690](https://github.com/sagemath/sagetrac-mirror/commit/cbe2690f4b4fa7bbb6cca1d263be5d90ea69f9e4)|`Use tolerance as much as possible in minimize`|",
    "created_at": "2017-08-20T23:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[cbe2690](https://github.com/sagemath/sagetrac-mirror/commit/cbe2690f4b4fa7bbb6cca1d263be5d90ea69f9e4)|`Use tolerance as much as possible in minimize`|



---

archive/issue_comments_446724.json:
```json
{
    "body": "<a id='comment:8'></a>\nDone! Note that I didn't convert this to use tolerance\n\n```\n    We get additional convergence information with the `verbose` option::\n\n        sage: minimize(f, [.1, .3, .4], algorithm=\"ncg\", verbose=True)\n        Optimization terminated successfully.\n        ...\n        (0.9999999..., 0.999999..., 0.999999...)\n```\nbecause the verbose output message is already caught by `...` and you cannot mix that with `tol`. It just fails, you cannot use `...` and `tol` at the same time.",
    "created_at": "2017-08-20T23:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446724",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
Done! Note that I didn't convert this to use tolerance

```
    We get additional convergence information with the `verbose` option::

        sage: minimize(f, [.1, .3, .4], algorithm="ncg", verbose=True)
        Optimization terminated successfully.
        ...
        (0.9999999..., 0.999999..., 0.999999...)
```
because the verbose output message is already caught by `...` and you cannot mix that with `tol`. It just fails, you cannot use `...` and `tol` at the same time.



---

archive/issue_comments_446725.json:
```json
{
    "body": "<a id='comment:9'></a>\nSomething on this branch was meant for another completely unrelated one. I'll try to fix it before putting it back to review.",
    "created_at": "2017-08-20T23:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446725",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>
Something on this branch was meant for another completely unrelated one. I'll try to fix it before putting it back to review.



---

archive/issue_comments_446726.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-20T23:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446726",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_446727.json:
```json
{
    "body": "Changing commit from \"cbe2690f4b4fa7bbb6cca1d263be5d90ea69f9e4\" to \"5cb42f1b8e0d6daf45078586e19a7cded50c2d9b\"",
    "created_at": "2017-08-20T23:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cbe2690f4b4fa7bbb6cca1d263be5d90ea69f9e4" to "5cb42f1b8e0d6daf45078586e19a7cded50c2d9b"



---

archive/issue_comments_446728.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[5cb42f1](https://github.com/sagemath/sagetrac-mirror/commit/5cb42f1b8e0d6daf45078586e19a7cded50c2d9b)|`remove documentation changes meant for another ticket`|",
    "created_at": "2017-08-20T23:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[5cb42f1](https://github.com/sagemath/sagetrac-mirror/commit/5cb42f1b8e0d6daf45078586e19a7cded50c2d9b)|`remove documentation changes meant for another ticket`|



---

archive/issue_comments_446729.json:
```json
{
    "body": "<a id='comment:11'></a>\nI am actually glad to have found that bit. I thought I had lost it.",
    "created_at": "2017-08-20T23:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446729",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
I am actually glad to have found that bit. I thought I had lost it.



---

archive/issue_comments_446730.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-20T23:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446730",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_446731.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [git](#comment%3A7):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                               |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n> |[cbe2690](https://github.com/sagemath/sagetrac-mirror/commit/cbe2690f4b4fa7bbb6cca1d263be5d90ea69f9e4)|`Use tolerance as much as possible in minimize`|\n\nCould you do the same for the other numerical values you truncated with `...` or does it make no sense?",
    "created_at": "2017-08-21T17:48:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446731",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>
Replying to [git](#comment%3A7):
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                               |
> |-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
> |[cbe2690](https://github.com/sagemath/sagetrac-mirror/commit/cbe2690f4b4fa7bbb6cca1d263be5d90ea69f9e4)|`Use tolerance as much as possible in minimize`|

Could you do the same for the other numerical values you truncated with `...` or does it make no sense?



---

archive/issue_comments_446732.json:
```json
{
    "body": "<a id='comment:13'></a>\nYou mean in the other files? It can be done, but in that case I will only touch those particular tests. In optimize.py we had a whole family of tests that I kept coherent as much as possible - including the ones that weren't affected by the upgrade.",
    "created_at": "2017-08-21T21:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446732",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
You mean in the other files? It can be done, but in that case I will only touch those particular tests. In optimize.py we had a whole family of tests that I kept coherent as much as possible - including the ones that weren't affected by the upgrade.



---

archive/issue_comments_446733.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix, Jean-Pierre Flori\"",
    "created_at": "2017-08-21T21:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446733",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing reviewer from "" to "Vincent Delecroix, Jean-Pierre Flori"



---

archive/issue_comments_446734.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-21T21:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446734",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_446735.json:
```json
{
    "body": "<a id='comment:14'></a>\nNah, that's ok as it is.\nLGTM.",
    "created_at": "2017-08-21T21:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446735",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
Nah, that's ok as it is.
LGTM.



---

archive/issue_comments_446736.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-08-25T23:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446736",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_446737.json:
```json
{
    "body": "<a id='comment:15'></a>\n\n```\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/numerical_sage/weave.rst\", line 13, in doc.en.thematic_tutorials.numerical_sage.weave\nFailed example:\n    from scipy import weave\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 515, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 885, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest doc.en.thematic_tutorials.numerical_sage.weave[0]>\", line 1, in <module>\n        from scipy import weave\n    ImportError: cannot import name weave\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/numerical_sage/weave.rst\", line 15, in doc.en.thematic_tutorials.numerical_sage.weave\nFailed example:\n    from scipy.weave import converters\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 515, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 885, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest doc.en.thematic_tutorials.numerical_sage.weave[1]>\", line 1, in <module>\n        from scipy.weave import converters\n    ImportError: No module named weave\n**********************************************************************\n1 item had failures:\n   2 of   3 in doc.en.thematic_tutorials.numerical_sage.weave\n    [2 tests, 2 failures, 0.21 s]\n----------------------------------------------------------------------\nsage -t --long src/doc/en/thematic_tutorials/numerical_sage/weave.rst  # 2 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2017-08-25T23:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446737",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>

```
**********************************************************************
File "src/doc/en/thematic_tutorials/numerical_sage/weave.rst", line 13, in doc.en.thematic_tutorials.numerical_sage.weave
Failed example:
    from scipy import weave
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 515, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 885, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.numerical_sage.weave[0]>", line 1, in <module>
        from scipy import weave
    ImportError: cannot import name weave
**********************************************************************
File "src/doc/en/thematic_tutorials/numerical_sage/weave.rst", line 15, in doc.en.thematic_tutorials.numerical_sage.weave
Failed example:
    from scipy.weave import converters
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 515, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 885, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.numerical_sage.weave[1]>", line 1, in <module>
        from scipy.weave import converters
    ImportError: No module named weave
**********************************************************************
1 item had failures:
   2 of   3 in doc.en.thematic_tutorials.numerical_sage.weave
    [2 tests, 2 failures, 0.21 s]
----------------------------------------------------------------------
sage -t --long src/doc/en/thematic_tutorials/numerical_sage/weave.rst  # 2 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_446738.json:
```json
{
    "body": "<a id='comment:16'></a>\nNot sure how it escaped me yet. Or the _reviewers_. After digging upstream, `weave` has been deprecated for some time. The plan has been to remove it before `1.0` (whenever that happens) for a while. It was also the only module not to have a python 3 version. Now it's gone (I think 0.18.x was the latest version to include it).\n\nIn that light, I plan to surgically remove all instances of `weave` in sage, which apparently doesn't extend further than the documentation. Opinions?",
    "created_at": "2017-08-26T05:58:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446738",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'></a>
Not sure how it escaped me yet. Or the _reviewers_. After digging upstream, `weave` has been deprecated for some time. The plan has been to remove it before `1.0` (whenever that happens) for a while. It was also the only module not to have a python 3 version. Now it's gone (I think 0.18.x was the latest version to include it).

In that light, I plan to surgically remove all instances of `weave` in sage, which apparently doesn't extend further than the documentation. Opinions?



---

archive/issue_comments_446739.json:
```json
{
    "body": "<a id='comment:17'></a>\nI vote for: just remove completely the offending file\n\nsrc/doc/en/thematic_tutorials/numerical_sage/weave.rst",
    "created_at": "2017-08-26T13:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446739",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>
I vote for: just remove completely the offending file

src/doc/en/thematic_tutorials/numerical_sage/weave.rst



---

archive/issue_comments_446740.json:
```json
{
    "body": "<a id='comment:18'></a>\nThere are a few extra references in other files (all in the doc) but I guess your vote covers that.",
    "created_at": "2017-08-26T20:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446740",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'></a>
There are a few extra references in other files (all in the doc) but I guess your vote covers that.



---

archive/issue_comments_446741.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[88d70c6](https://github.com/sagemath/sagetrac-mirror/commit/88d70c68fbd6ba1fda52217b81a45c906aaf390e)|`Remove references to weave now that it is gone from scipy.`|",
    "created_at": "2017-08-28T02:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[88d70c6](https://github.com/sagemath/sagetrac-mirror/commit/88d70c68fbd6ba1fda52217b81a45c906aaf390e)|`Remove references to weave now that it is gone from scipy.`|



---

archive/issue_comments_446742.json:
```json
{
    "body": "Changing commit from \"5cb42f1b8e0d6daf45078586e19a7cded50c2d9b\" to \"88d70c68fbd6ba1fda52217b81a45c906aaf390e\"",
    "created_at": "2017-08-28T02:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5cb42f1b8e0d6daf45078586e19a7cded50c2d9b" to "88d70c68fbd6ba1fda52217b81a45c906aaf390e"



---

archive/issue_comments_446743.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-28T02:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446743",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_446744.json:
```json
{
    "body": "<a id='comment:20'></a>\nOk, back into review. I removed the offending documentation file and removed references to `weave` in the other files in the numerical_sage section. Please do a proof read to make sure it makes sense.",
    "created_at": "2017-08-28T02:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446744",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
Ok, back into review. I removed the offending documentation file and removed references to `weave` in the other files in the numerical_sage section. Please do a proof read to make sure it makes sense.



---

archive/issue_comments_446745.json:
```json
{
    "body": "<a id='comment:21'></a>\nAnyone for moving this back on track?",
    "created_at": "2017-08-31T05:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446745",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'></a>
Anyone for moving this back on track?



---

archive/issue_comments_446746.json:
```json
{
    "body": "<a id='comment:22'></a>\nrunning the tests now",
    "created_at": "2017-08-31T15:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446746",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>
running the tests now



---

archive/issue_comments_446747.json:
```json
{
    "body": "<a id='comment:23'></a>\npass!",
    "created_at": "2017-08-31T17:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446747",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
pass!



---

archive/issue_comments_446748.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-31T17:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446748",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_446749.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-04T06:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446749",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_446750.json:
```json
{
    "body": "Changing branch from \"u/fbissey/scipy0.19.1\" to \"88d70c68fbd6ba1fda52217b81a45c906aaf390e\"",
    "created_at": "2017-09-04T06:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446750",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/fbissey/scipy0.19.1" to "88d70c68fbd6ba1fda52217b81a45c906aaf390e"



---

archive/issue_events_068731.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-04T06:10:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23594#event-68731"
}
```



---

archive/issue_comments_446751.json:
```json
{
    "body": "Changing commit from \"88d70c68fbd6ba1fda52217b81a45c906aaf390e\" to \"\"",
    "created_at": "2017-10-13T17:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446751",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "88d70c68fbd6ba1fda52217b81a45c906aaf390e" to ""



---

archive/issue_comments_446752.json:
```json
{
    "body": "<a id='comment:25'></a>\nThis update does not quite work on FreeBSD, as illustrated by the following ugly\ncrash in plain Sage python (as well as in Sage code that uses `Voronoi`, such as \n`RiemannSurface` one).\n\n```\n>>> import numpy as np\n>>> points = np.array([[0, 0], [0, 1], [0, 2], [1, 0], [1, 1], [1, 2],[2, 0], [2, 1], [2, 2]])\n>>> from scipy.spatial import Voronoi\n>>> Voronoi(points)\nSegmentation fault (core dumped)\n```\n\n```\nsage: R.<x,y>=QQ[] \nsage: C=Curve(x^3+3*y^3+5) \nsage: C.riemann_surface() \n...\nUnhandled SIGSEGV: A segmentation fault occurred.\n```",
    "created_at": "2017-10-13T17:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23594",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23594#issuecomment-446752",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>
This update does not quite work on FreeBSD, as illustrated by the following ugly
crash in plain Sage python (as well as in Sage code that uses `Voronoi`, such as 
`RiemannSurface` one).

```
>>> import numpy as np
>>> points = np.array([[0, 0], [0, 1], [0, 2], [1, 0], [1, 1], [1, 2],[2, 0], [2, 1], [2, 2]])
>>> from scipy.spatial import Voronoi
>>> Voronoi(points)
Segmentation fault (core dumped)
```

```
sage: R.<x,y>=QQ[] 
sage: C=Curve(x^3+3*y^3+5) 
sage: C.riemann_surface() 
...
Unhandled SIGSEGV: A segmentation fault occurred.
```
