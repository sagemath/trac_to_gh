# Issue 23753: Linux binaries should contain gfortran

archive/issues_023516.json:
```json
{
    "assignees": [],
    "body": "The sage-support mailing list gets [numerous crash reports](https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date) from users having installed\nSageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log\ncontaining a long traceback ending with an import error about libgfortran not being found,\ntypically:\n\n```\nImportError: libgfortran.so.3: cannot open shared object file: No such file or directory\n```\n\n**Reported upstream**: https://github.com/sagemath/binary-pkg/pull/12\n\nCC:  @vbraun\n\nUpstream: **Reported upstream. Developers acknowledge bug.**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23753_\n\n",
    "closed_at": "2017-08-31T08:16:07Z",
    "created_at": "2017-08-30T14:24:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20distribution",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Linux binaries should contain gfortran",
    "type": "issue",
    "updated_at": "2017-08-31T08:21:52Z",
    "url": "https://github.com/sagemath/sage/issues/23753",
    "user": "https://github.com/slel"
}
```
The sage-support mailing list gets [numerous crash reports](https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date) from users having installed
SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log
containing a long traceback ending with an import error about libgfortran not being found,
typically:

```
ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
```

**Reported upstream**: https://github.com/sagemath/binary-pkg/pull/12

CC:  @vbraun

Upstream: **Reported upstream. Developers acknowledge bug.**

_Issue created by migration from https://trac.sagemath.org/ticket/23753_





---

archive/issue_events_312149.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2017-08-30T14:24:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312149"
}
```



---

archive/issue_events_312150.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2017-08-30T14:24:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312150"
}
```



---

archive/issue_events_312151.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-30T15:16:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20distribution",
    "label_color": "000080",
    "label_name": "component: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312151"
}
```



---

archive/issue_comments_360980.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nDo you know which binaries have this problem? All of them or only a certain subset?\n\nAt a minimum, can you point to one specific problematic binary in order to test things?",
    "created_at": "2017-08-30T15:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360980",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'>Comment 1:</a>
Do you know which binaries have this problem? All of them or only a certain subset?

At a minimum, can you point to one specific problematic binary in order to test things?



---

archive/issue_comments_360981.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,40 +7,6 @@\n ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory\n ```\n \n-This import error is at the end of a very long traceback that users typically can't parse\n-(after all, it's often their first time starting sage, they're not experts at reading tracebacks).\n+Posters of such crash report get told to install gfortran, which should not be needed.\n \n-Posters of such crash report get told to install gfortran by using one of the following\n-\n-```\n-sudo apt-get install gfortran\n-sudo yum install gfortran\n-sudo yaourt install gfortran\n-```\n-etc., which usually solves the problem for them.\n-\n-Ideally,\n-\n-(a) could Linux binaries be produced that can work without gfortran being installed?\n-\n-Otherwise,\n-\n-(b) this requirement should appear on the installation page at\n-http://doc.sagemath.org/html/en/installation/binary.html\n--- more precisely, in the \"Linux and macOS\" section:\n-http://doc.sagemath.org/html/en/installation/binary.html#linux-and-os-x\n-\n-(c) for linux binary installs, could the presence of gfortran be tested the first time\n-Sage is started, and failing its presence, could Sage exit straight away\n-with a short and helpful error message such as\n-\n-```\n-Sage requires gfortran to be installed. Please install it before you can run Sage.\n-Depending on your Linux distribution, this could be by typing one of the following\n-\n-    sudo apt-get install gfortran # Debian, Ubuntu\n-    sudo yum install gfortran     # Red Hat, Fedora\n-    sudo yaourt install gfortran  # Arch Linux\n-```\n-\n-rather than the crash log containing the long traceback with the import error at the end?\n+Linux binaries should be produced that can work without gfortran being installed.\n``````\n",
    "created_at": "2017-08-30T15:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360981",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,40 +7,6 @@
 ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
 ```
 
-This import error is at the end of a very long traceback that users typically can't parse
-(after all, it's often their first time starting sage, they're not experts at reading tracebacks).
+Posters of such crash report get told to install gfortran, which should not be needed.
 
-Posters of such crash report get told to install gfortran by using one of the following
-
-```
-sudo apt-get install gfortran
-sudo yum install gfortran
-sudo yaourt install gfortran
-```
-etc., which usually solves the problem for them.
-
-Ideally,
-
-(a) could Linux binaries be produced that can work without gfortran being installed?
-
-Otherwise,
-
-(b) this requirement should appear on the installation page at
-http://doc.sagemath.org/html/en/installation/binary.html
--- more precisely, in the "Linux and macOS" section:
-http://doc.sagemath.org/html/en/installation/binary.html#linux-and-os-x
-
-(c) for linux binary installs, could the presence of gfortran be tested the first time
-Sage is started, and failing its presence, could Sage exit straight away
-with a short and helpful error message such as
-
-```
-Sage requires gfortran to be installed. Please install it before you can run Sage.
-Depending on your Linux distribution, this could be by typing one of the following
-
-    sudo apt-get install gfortran # Debian, Ubuntu
-    sudo yum install gfortran     # Red Hat, Fedora
-    sudo yaourt install gfortran  # Arch Linux
-```
-
-rather than the crash log containing the long traceback with the import error at the end?
+Linux binaries should be produced that can work without gfortran being installed.
``````




---

archive/issue_events_312152.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-30T15:16:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312152"
}
```



---

archive/issue_events_312153.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-30T15:16:10Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "title_is": "Linux binaries should contain gfortran",
    "title_was": "Produce Linux binaries that don't require gfortran, or improve error and documentation",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312153"
}
```



---

archive/issue_comments_360982.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI would guess all of them, from the number of crash reports we get on a regular basis.\n\nI edited the ticket description adding a link to a sage-support search for [ Sage_crash_report.txt ].\n\nUsers don't always provide details of which Linux distribution they are using, but some do.\n\nI don't think the IPython post-mortem reports they attach inform us on what binary was used.",
    "created_at": "2017-08-30T15:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360982",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'>Comment 2:</a>
I would guess all of them, from the number of crash reports we get on a regular basis.

I edited the ticket description adding a link to a sage-support search for [ Sage_crash_report.txt ].

Users don't always provide details of which Linux distribution they are using, but some do.

I don't think the IPython post-mortem reports they attach inform us on what binary was used.



---

archive/issue_comments_360983.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The sage-support mailing list gets numerous crash reports from users having installed\n+The sage-support mailing list gets numerous crash reports [0] from users having installed\n SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log\n containing a long traceback ending with an import error about libgfortran not being found,\n typically:\n@@ -10,3 +10,5 @@\n Posters of such crash report get told to install gfortran, which should not be needed.\n \n Linux binaries should be produced that can work without gfortran being installed.\n+\n+[0] https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date\n``````\n",
    "created_at": "2017-08-30T15:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360983",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The sage-support mailing list gets numerous crash reports from users having installed
+The sage-support mailing list gets numerous crash reports [0] from users having installed
 SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log
 containing a long traceback ending with an import error about libgfortran not being found,
 typically:
@@ -10,3 +10,5 @@
 Posters of such crash report get told to install gfortran, which should not be needed.
 
 Linux binaries should be produced that can work without gfortran being installed.
+
+[0] https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date
``````




---

archive/issue_comments_360984.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nNext time we get such a report, we should ask **exactly** which binary they used.",
    "created_at": "2017-08-30T17:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360984",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'>Comment 3:</a>
Next time we get such a report, we should ask **exactly** which binary they used.



---

archive/issue_comments_360985.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nAfaik no Linux binaries contain gfortran; It shoud just be a matter of adding SAGE_INSTALL_GCC (or so) to the builder script https://github.com/sagemath/binary-pkg",
    "created_at": "2017-08-30T22:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360985",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'>Comment 4:</a>
Afaik no Linux binaries contain gfortran; It shoud just be a matter of adding SAGE_INSTALL_GCC (or so) to the builder script https://github.com/sagemath/binary-pkg



---

archive/issue_events_312154.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-31T08:16:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312154"
}
```



---

archive/issue_events_312155.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-31T08:16:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312155"
}
```



---

archive/issue_events_312156.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-31T08:16:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312156"
}
```



---

archive/issue_events_312157.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-31T08:16:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23753#event-312157"
}
```



---

archive/issue_comments_360986.json:
```json
{
    "body": "Upstream: **Not yet reported upstream; Will do shortly.**",
    "created_at": "2017-08-31T08:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360986",
    "user": "https://github.com/jdemeyer"
}
```

Upstream: **Not yet reported upstream; Will do shortly.**



---

archive/issue_comments_360987.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@vbraun](#comment%3A4):\n> It shoud just be a matter of adding SAGE_INSTALL_GCC (or so)\n\nSo this isn't done already? That explains everything then...",
    "created_at": "2017-08-31T08:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360987",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@vbraun](#comment%3A4):
> It shoud just be a matter of adding SAGE_INSTALL_GCC (or so)

So this isn't done already? That explains everything then...



---

archive/issue_comments_360988.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2017-08-31T08:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360988",
    "user": "https://github.com/jdemeyer"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_360989.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-The sage-support mailing list gets numerous crash reports [0] from users having installed\n+The sage-support mailing list gets [numerous crash reports](https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date) from users having installed\n SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log\n containing a long traceback ending with an import error about libgfortran not being found,\n typically:\n@@ -7,8 +7,4 @@\n ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory\n ```\n \n-Posters of such crash report get told to install gfortran, which should not be needed.\n-\n-Linux binaries should be produced that can work without gfortran being installed.\n-\n-[0] https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date\n+**Reported upstream**: https://github.com/sagemath/binary-pkg/pull/12\n``````\n",
    "created_at": "2017-08-31T08:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23753#issuecomment-360989",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-The sage-support mailing list gets numerous crash reports [0] from users having installed
+The sage-support mailing list gets [numerous crash reports](https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date) from users having installed
 SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log
 containing a long traceback ending with an import error about libgfortran not being found,
 typically:
@@ -7,8 +7,4 @@
 ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
 ```
 
-Posters of such crash report get told to install gfortran, which should not be needed.
-
-Linux binaries should be produced that can work without gfortran being installed.
-
-[0] https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date
+**Reported upstream**: https://github.com/sagemath/binary-pkg/pull/12
``````

