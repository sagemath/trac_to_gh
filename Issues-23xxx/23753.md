# Issue 23753: Linux binaries should contain gfortran

archive/issues_023516.json:
```json
{
    "body": "The sage-support mailing list gets [numerous crash reports](https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date) from users having installed\nSageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log\ncontaining a long traceback ending with an import error about libgfortran not being found,\ntypically:\n\n```\nImportError: libgfortran.so.3: cannot open shared object file: No such file or directory\n```\n\n**Reported upstream**: https://github.com/sagemath/binary-pkg/pull/12\n\nCC:  @vbraun\n\nUpstream: Reported upstream. Developers acknowledge bug.\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/23753\n\n",
    "closed_at": "2017-08-31T08:16:07Z",
    "created_at": "2017-08-30T14:24:03Z",
    "labels": [
        "component: distribution",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Linux binaries should contain gfortran",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23753",
    "user": "https://github.com/slel"
}
```
The sage-support mailing list gets [numerous crash reports](https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date) from users having installed
SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log
containing a long traceback ending with an import error about libgfortran not being found,
typically:

```
ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
```

**Reported upstream**: https://github.com/sagemath/binary-pkg/pull/12

CC:  @vbraun

Upstream: Reported upstream. Developers acknowledge bug.

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/23753





---

archive/issue_comments_350691.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to distribution.",
    "created_at": "2017-08-30T15:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350691",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from PLEASE CHANGE to distribution.



---

archive/issue_comments_350692.json:
```json
{
    "body": "<a id='comment:1'></a>Do you know which binaries have this problem? All of them or only a certain subset?\n\nAt a minimum, can you point to one specific problematic binary in order to test things?",
    "created_at": "2017-08-30T15:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350692",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>Do you know which binaries have this problem? All of them or only a certain subset?

At a minimum, can you point to one specific problematic binary in order to test things?



---

archive/issue_comments_350693.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,43 +7,9 @@\n ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory\n ```\n \n-This import error is at the end of a very long traceback that users typically can't parse\n-(after all, it's often their first time starting sage, they're not experts at reading tracebacks).\n+Posters of such crash report get told to install gfortran, which should not be needed.\n \n-Posters of such crash report get told to install gfortran by using one of the following\n-\n-```\n-sudo apt-get install gfortran\n-sudo yum install gfortran\n-sudo yaourt install gfortran\n-```\n-etc., which usually solves the problem for them.\n-\n-Ideally,\n-\n-(a) could Linux binaries be produced that can work without gfortran being installed?\n-\n-Otherwise,\n-\n-(b) this requirement should appear on the installation page at\n-http://doc.sagemath.org/html/en/installation/binary.html\n--- more precisely, in the \"Linux and macOS\" section:\n-http://doc.sagemath.org/html/en/installation/binary.html#linux-and-os-x\n-\n-(c) for linux binary installs, could the presence of gfortran be tested the first time\n-Sage is started, and failing its presence, could Sage exit straight away\n-with a short and helpful error message such as\n-\n-```\n-Sage requires gfortran to be installed. Please install it before you can run Sage.\n-Depending on your Linux distribution, this could be by typing one of the following\n-\n-    sudo apt-get install gfortran # Debian, Ubuntu\n-    sudo yum install gfortran     # Red Hat, Fedora\n-    sudo yaourt install gfortran  # Arch Linux\n-```\n-\n-rather than the crash log containing the long traceback with the import error at the end?\n+Linux binaries should be produced that can work without gfortran being installed.\n \n Component: PLEASE CHANGE\n \n``````\n",
    "created_at": "2017-08-30T15:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350693",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,43 +7,9 @@
 ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
 ```
 
-This import error is at the end of a very long traceback that users typically can't parse
-(after all, it's often their first time starting sage, they're not experts at reading tracebacks).
+Posters of such crash report get told to install gfortran, which should not be needed.
 
-Posters of such crash report get told to install gfortran by using one of the following
-
-```
-sudo apt-get install gfortran
-sudo yum install gfortran
-sudo yaourt install gfortran
-```
-etc., which usually solves the problem for them.
-
-Ideally,
-
-(a) could Linux binaries be produced that can work without gfortran being installed?
-
-Otherwise,
-
-(b) this requirement should appear on the installation page at
-http://doc.sagemath.org/html/en/installation/binary.html
--- more precisely, in the "Linux and macOS" section:
-http://doc.sagemath.org/html/en/installation/binary.html#linux-and-os-x
-
-(c) for linux binary installs, could the presence of gfortran be tested the first time
-Sage is started, and failing its presence, could Sage exit straight away
-with a short and helpful error message such as
-
-```
-Sage requires gfortran to be installed. Please install it before you can run Sage.
-Depending on your Linux distribution, this could be by typing one of the following
-
-    sudo apt-get install gfortran # Debian, Ubuntu
-    sudo yum install gfortran     # Red Hat, Fedora
-    sudo yaourt install gfortran  # Arch Linux
-```
-
-rather than the crash log containing the long traceback with the import error at the end?
+Linux binaries should be produced that can work without gfortran being installed.
 
 Component: PLEASE CHANGE
 
``````




---

archive/issue_comments_350694.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2017-08-30T15:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350694",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_350695.json:
```json
{
    "body": "<a id='comment:2'></a>I would guess all of them, from the number of crash reports we get on a regular basis.\n\nI edited the ticket description adding a link to a sage-support search for [ Sage_crash_report.txt ].\n\nUsers don't always provide details of which Linux distribution they are using, but some do.\n\nI don't think the IPython post-mortem reports they attach inform us on what binary was used.",
    "created_at": "2017-08-30T15:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350695",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'></a>I would guess all of them, from the number of crash reports we get on a regular basis.

I edited the ticket description adding a link to a sage-support search for [ Sage_crash_report.txt ].

Users don't always provide details of which Linux distribution they are using, but some do.

I don't think the IPython post-mortem reports they attach inform us on what binary was used.



---

archive/issue_comments_350696.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,17 @@\n+The sage-support mailing list gets numerous crash reports [0] from users having installed\n+SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log\n+containing a long traceback ending with an import error about libgfortran not being found,\n+typically:\n \n+```\n+ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory\n+```\n+\n+Posters of such crash report get told to install gfortran, which should not be needed.\n+\n+Linux binaries should be produced that can work without gfortran being installed.\n+\n+[0] https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date\n \n Component: PLEASE CHANGE\n \n``````\n",
    "created_at": "2017-08-30T15:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350696",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,17 @@
+The sage-support mailing list gets numerous crash reports [0] from users having installed
+SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log
+containing a long traceback ending with an import error about libgfortran not being found,
+typically:
 
+```
+ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
+```
+
+Posters of such crash report get told to install gfortran, which should not be needed.
+
+Linux binaries should be produced that can work without gfortran being installed.
+
+[0] https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date
 
 Component: PLEASE CHANGE
 
``````




---

archive/issue_comments_350697.json:
```json
{
    "body": "<a id='comment:3'></a>Next time we get such a report, we should ask **exactly** which binary they used.",
    "created_at": "2017-08-30T17:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350697",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>Next time we get such a report, we should ask **exactly** which binary they used.



---

archive/issue_comments_350698.json:
```json
{
    "body": "<a id='comment:4'></a>Afaik no Linux binaries contain gfortran; It shoud just be a matter of adding SAGE_INSTALL_GCC (or so) to the builder script https://github.com/sagemath/binary-pkg",
    "created_at": "2017-08-30T22:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350698",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:4'></a>Afaik no Linux binaries contain gfortran; It shoud just be a matter of adding SAGE_INSTALL_GCC (or so) to the builder script https://github.com/sagemath/binary-pkg



---

archive/issue_events_060627.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-31T08:16:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23753#event-60627"
}
```



---

archive/issue_comments_350699.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2017-08-31T08:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350699",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: invalid



---

archive/issue_events_060628.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-31T08:16:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23753#event-60628"
}
```



---

archive/issue_comments_350700.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 vbraun]:\n> It shoud just be a matter of adding SAGE_INSTALL_GCC (or so)\n\n\nSo this isn't done already? That explains everything then...",
    "created_at": "2017-08-31T08:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350700",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>Replying to [comment:4 vbraun]:
> It shoud just be a matter of adding SAGE_INSTALL_GCC (or so)


So this isn't done already? That explains everything then...



---

archive/issue_comments_350701.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,13 @@\n+The sage-support mailing list gets [numerous crash reports](https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date) from users having installed\n+SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log\n+containing a long traceback ending with an import error about libgfortran not being found,\n+typically:\n \n+```\n+ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory\n+```\n+\n+**Reported upstream**: https://github.com/sagemath/binary-pkg/pull/12\n \n Component: PLEASE CHANGE\n \n``````\n",
    "created_at": "2017-08-31T08:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23753",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23753#issuecomment-350701",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,13 @@
+The sage-support mailing list gets [numerous crash reports](https://groups.google.com/forum/#!searchin/sage-support/Sage_crash_report.txt%7Csort:date) from users having installed
+SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log
+containing a long traceback ending with an import error about libgfortran not being found,
+typically:
 
+```
+ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
+```
+
+**Reported upstream**: https://github.com/sagemath/binary-pkg/pull/12
 
 Component: PLEASE CHANGE
 
``````

