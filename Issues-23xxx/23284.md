# Issue 23284: Testing padic_base_leaves.py takes a VERY long time

archive/issues_023047.json:
```json
{
    "assignees": [],
    "body": "On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n\n- Sage 8.0.beta9: `[142 tests, 202.82 s]`\n\n- Sage 8.0.beta10: `[191 tests, 626.31 s]`\n\nThe test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n\nCC:  @roed314 @saraedum\n\nBranch/Commit: **[`748b68c`](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **David Roe**\n\nComponent: **padics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23284_\n\n",
    "closed_at": "2017-07-02T17:16:30Z",
    "created_at": "2017-06-20T12:13:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20padics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Testing padic_base_leaves.py takes a VERY long time",
    "type": "issue",
    "updated_at": "2017-07-02T17:16:30Z",
    "url": "https://github.com/sagemath/sage/issues/23284",
    "user": "https://github.com/jdemeyer"
}
```
On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:

- Sage 8.0.beta9: `[142 tests, 202.82 s]`

- Sage 8.0.beta10: `[191 tests, 626.31 s]`

The test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.

CC:  @roed314 @saraedum

Branch/Commit: **[`748b68c`](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)**

Reviewer: **Jeroen Demeyer**

Author: **David Roe**

Component: **padics**

_Issue created by migration from https://trac.sagemath.org/ticket/23284_





---

archive/issue_events_324268.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-20T12:13:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324268"
}
```



---

archive/issue_events_324269.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-20T12:13:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20padics",
    "label_color": "0000ff",
    "label_name": "c: padics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324269"
}
```



---

archive/issue_events_324270.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-20T12:13:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324270"
}
```



---

archive/issue_events_324271.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-20T12:13:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324271"
}
```



---

archive/issue_comments_349423.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n-On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` takes about 1300 seconds, which is a **huge** amount of time.\n+On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` on 8.0.beta11:\n+\n+```\n+[191 tests, 1607.44 s]\n+```\n+This is an a **huge** amount of time.\n \n Some of these tests are quite old, so either this is a regression or something else is wrong...\n``````\n",
    "created_at": "2017-06-20T12:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349423",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,8 @@
-On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` takes about 1300 seconds, which is a **huge** amount of time.
+On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` on 8.0.beta11:
+
+```
+[191 tests, 1607.44 s]
+```
+This is an a **huge** amount of time.
 
 Some of these tests are quite old, so either this is a regression or something else is wrong...
``````




---

archive/issue_comments_349424.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFor me, on a Dell Optiplex 9020.\n\n```\nlINE 242: Test ran for 65.62 s\nLINE 243 : Test ran for 105.39 s\n```\n[191 tests, 304.13 s]\n\nWith many slow `TestSuite(R).run()`\n\n**EDIT** forgot to say, on 8.0.b11",
    "created_at": "2017-06-20T14:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349424",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

For me, on a Dell Optiplex 9020.

```
lINE 242: Test ran for 65.62 s
LINE 243 : Test ran for 105.39 s
```
[191 tests, 304.13 s]

With many slow `TestSuite(R).run()`

**EDIT** forgot to say, on 8.0.b11



---

archive/issue_comments_349425.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe main thing to check is whether this is a regression or not. I plan to test some older versions of Sage.",
    "created_at": "2017-06-20T14:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349425",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

The main thing to check is whether this is a regression or not. I plan to test some older versions of Sage.



---

archive/issue_comments_349426.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nCould there be something in there which calls the optional spkg `normaliz`? It does not like to be run in parallel because of its own parallelization. I ran across this and have a post about it on [sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/normaliz$20doctest%7Csort:relevance/sage-devel/8eTF_yP_maQ/yvl5s61NAAAJ).",
    "created_at": "2017-06-21T01:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349426",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

Could there be something in there which calls the optional spkg `normaliz`? It does not like to be run in parallel because of its own parallelization. I ran across this and have a post about it on [sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/normaliz$20doctest%7Csort:relevance/sage-devel/8eTF_yP_maQ/yvl5s61NAAAJ).



---

archive/issue_comments_349427.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,9 @@\n-On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` on 8.0.beta11:\n+On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-```\n-[191 tests, 1607.44 s]\n-```\n-This is an a **huge** amount of time.\n+- Sage 7.5: `[142 tests, 177.06 s]`\n \n-Some of these tests are quite old, so either this is a regression or something else is wrong...\n+- Sage 8.0.beta9: `[142 tests, 202.82 s]`\n+\n+- Sage 8.0.beta11: `[191 tests, 623.55 s]`\n+\n+There are 2 potential worries here: there is a regression from Sage 7.5 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-21T07:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349427",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,9 @@
-On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` on 8.0.beta11:
+On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-```
-[191 tests, 1607.44 s]
-```
-This is an a **huge** amount of time.
+- Sage 7.5: `[142 tests, 177.06 s]`
 
-Some of these tests are quite old, so either this is a regression or something else is wrong...
+- Sage 8.0.beta9: `[142 tests, 202.82 s]`
+
+- Sage 8.0.beta11: `[191 tests, 623.55 s]`
+
+There are 2 potential worries here: there is a regression from Sage 7.5 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_349428.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-- Sage 7.5: `[142 tests, 177.06 s]`\n+- Sage 7.6: `[142 tests, 179.74 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n - Sage 8.0.beta11: `[191 tests, 623.55 s]`\n \n-There are 2 potential worries here: there is a regression from Sage 7.5 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n+There are 2 potential worries here: there is a regression from Sage 7.6 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-21T13:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349428",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-- Sage 7.5: `[142 tests, 177.06 s]`
+- Sage 7.6: `[142 tests, 179.74 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
 - Sage 8.0.beta11: `[191 tests, 623.55 s]`
 
-There are 2 potential worries here: there is a regression from Sage 7.5 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
+There are 2 potential worries here: there is a regression from Sage 7.6 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_349429.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-- Sage 7.6: `[142 tests, 179.74 s]`\n+- Sage 8.0.beta4: `[142 tests, 180.00 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n - Sage 8.0.beta11: `[191 tests, 623.55 s]`\n \n-There are 2 potential worries here: there is a regression from Sage 7.6 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n+There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-22T08:20:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349429",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-- Sage 7.6: `[142 tests, 179.74 s]`
+- Sage 8.0.beta4: `[142 tests, 180.00 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
 - Sage 8.0.beta11: `[191 tests, 623.55 s]`
 
-There are 2 potential worries here: there is a regression from Sage 7.6 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
+There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_349430.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-- Sage 8.0.beta4: `[142 tests, 180.00 s]`\n+- Sage 8.0.beta7: `[142 tests, 181.17 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n-- Sage 8.0.beta11: `[191 tests, 623.55 s]`\n+- Sage 8.0.beta10: `[191 tests, 626.31 s]`\n \n-There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n+There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-22T14:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349430",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-- Sage 8.0.beta4: `[142 tests, 180.00 s]`
+- Sage 8.0.beta7: `[142 tests, 181.17 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
-- Sage 8.0.beta11: `[191 tests, 623.55 s]`
+- Sage 8.0.beta10: `[191 tests, 626.31 s]`
 
-There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
+There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_349431.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-- Sage 8.0.beta7: `[142 tests, 181.17 s]`\n+- Sage 8.0.beta8: `[142 tests, 180.68 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n``````\n",
    "created_at": "2017-06-23T09:13:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349431",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-- Sage 8.0.beta7: `[142 tests, 181.17 s]`
+- Sage 8.0.beta8: `[142 tests, 180.68 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
``````




---

archive/issue_comments_349432.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI understand where some of these changes are coming from. I'll take a look next week (no internet over the weekend).",
    "created_at": "2017-06-24T01:20:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349432",
    "user": "https://github.com/roed314"
}
```

<div id="comment:10" align="right">comment:10</div>

I understand where some of these changes are coming from. I'll take a look next week (no internet over the weekend).



---

archive/issue_comments_349433.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYikes, 343 seconds on my Mac laptop too (with nothing else going on).",
    "created_at": "2017-06-25T03:16:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349433",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:11" align="right">comment:11</div>

Yikes, 343 seconds on my Mac laptop too (with nothing else going on).



---

archive/issue_comments_349434.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,7 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n-\n-- Sage 8.0.beta8: `[142 tests, 180.68 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n - Sage 8.0.beta10: `[191 tests, 626.31 s]`\n \n-There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n+The test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-26T15:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349434",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,7 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
-
-- Sage 8.0.beta8: `[142 tests, 180.68 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
 - Sage 8.0.beta10: `[191 tests, 626.31 s]`
 
-There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
+The test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_349435.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI investigated the first regression and it is due to MPIR-3.0.0: #23327\n\nI will change this ticket to be only about the second issue: the large absolute time taken by testing `padic_base_leaves.py`",
    "created_at": "2017-06-26T15:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349435",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

I investigated the first regression and it is due to MPIR-3.0.0: #23327

I will change this ticket to be only about the second issue: the large absolute time taken by testing `padic_base_leaves.py`



---

archive/issue_comments_349436.json:
```json
{
    "body": "Branch: **[u/roed/testing_padic_base_leaves_py_takes_a_very_long_time](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/testing_padic_base_leaves_py_takes_a_very_long_time)**",
    "created_at": "2017-06-28T06:23:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349436",
    "user": "https://github.com/roed314"
}
```

Branch: **[u/roed/testing_padic_base_leaves_py_takes_a_very_long_time](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/testing_padic_base_leaves_py_takes_a_very_long_time)**



---

archive/issue_comments_349437.json:
```json
{
    "body": "Commit: **[`8ce532e`](https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1)**",
    "created_at": "2017-06-28T07:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349437",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`8ce532e`](https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1)**



---

archive/issue_comments_349438.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1\"><code>8ce532e</code></a></td><td><code>Make long tests in padic_base_leaves.py shorter, add documentation for timings options to unit test code</code></td></tr></table>\n",
    "created_at": "2017-06-28T07:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349438",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1"><code>8ce532e</code></a></td><td><code>Make long tests in padic_base_leaves.py shorter, add documentation for timings options to unit test code</code></td></tr></table>




---

archive/issue_comments_349439.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThese changes drop the long tests from `256s` to `37s`.",
    "created_at": "2017-06-28T07:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349439",
    "user": "https://github.com/roed314"
}
```

<div id="comment:15" align="right">comment:15</div>

These changes drop the long tests from `256s` to `37s`.



---

archive/issue_events_324272.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-06-28T07:05:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324272"
}
```



---

archive/issue_comments_349440.json:
```json
{
    "body": "Author: **David Roe**",
    "created_at": "2017-06-28T07:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349440",
    "user": "https://github.com/roed314"
}
```

Author: **David Roe**



---

archive/issue_comments_349441.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHow are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.",
    "created_at": "2017-06-28T13:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349441",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.



---

archive/issue_comments_349442.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSome more tests should be marked `# long time`, in particular on lines 244, 246, 336, 431.",
    "created_at": "2017-06-28T13:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349442",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Some more tests should be marked `# long time`, in particular on lines 244, 246, 336, 431.



---

archive/issue_events_324273.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-28T13:27:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324273"
}
```



---

archive/issue_events_324274.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-28T13:27:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324274"
}
```



---

archive/issue_comments_349443.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWhy do you need separate runs of `TestSuite` here?\n\n```\nsage: TestSuite(R).run()\nsage: TestSuite(R).run(elements = [R.random_element() for i in range(2^10)], max_runs = 2^12, skip='_test_metric') # long time\nsage: R._test_metric(elements = [R.random_element() for i in range(2^3)]) # long time\n```\n\nWhy is `TestSuite(R).run()` not sufficient?\n\n(This is just a question, there might be a good reason)",
    "created_at": "2017-06-28T13:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349443",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Why do you need separate runs of `TestSuite` here?

```
sage: TestSuite(R).run()
sage: TestSuite(R).run(elements = [R.random_element() for i in range(2^10)], max_runs = 2^12, skip='_test_metric') # long time
sage: R._test_metric(elements = [R.random_element() for i in range(2^3)]) # long time
```

Why is `TestSuite(R).run()` not sufficient?

(This is just a question, there might be a good reason)



---

archive/issue_comments_349444.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n\n```\nDoctesting 1 file.\nsage -t --long src/sage/rings/padics/padic_base_leaves.py\n    [209 tests, 49.45 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 49.6 seconds\n    cpu time: 44.5 seconds\n    cumulative wall time: 49.5 seconds\n```",
    "created_at": "2017-06-28T15:27:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349444",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>


```
Doctesting 1 file.
sage -t --long src/sage/rings/padics/padic_base_leaves.py
    [209 tests, 49.45 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 49.6 seconds
    cpu time: 44.5 seconds
    cumulative wall time: 49.5 seconds
```



---

archive/issue_comments_349445.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f0a79cd88e8e6ad5ae496594ea83cdeba707929\"><code>1f0a79c</code></a></td><td><code>Modifying long tests in padic_base_leaves.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab\"><code>748b68c</code></a></td><td><code>Undo changes to sage_unittest.py</code></td></tr></table>\n",
    "created_at": "2017-06-28T17:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349445",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f0a79cd88e8e6ad5ae496594ea83cdeba707929"><code>1f0a79c</code></a></td><td><code>Modifying long tests in padic_base_leaves.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab"><code>748b68c</code></a></td><td><code>Undo changes to sage_unittest.py</code></td></tr></table>




---

archive/issue_comments_349446.json:
```json
{
    "body": "Changed commit from **[`8ce532e`](https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1)** to **[`748b68c`](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)**",
    "created_at": "2017-06-28T17:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349446",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ce532e`](https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1)** to **[`748b68c`](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)**



---

archive/issue_comments_349447.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jdemeyer](#comment:16):\n> How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.\n\nThey got accidentally included. I've removed them.",
    "created_at": "2017-06-28T17:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349447",
    "user": "https://github.com/roed314"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jdemeyer](#comment:16):
> How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.

They got accidentally included. I've removed them.



---

archive/issue_comments_349448.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jdemeyer](#comment:19):\n> Why do you need separate runs of `TestSuite` here?\n> \n> ```\n> sage: TestSuite(R).run()\n> sage: TestSuite(R).run(elements = [R.random_element() for i in range(2^10)], max_runs = 2^12, skip='_test_metric') # long time\n> sage: R._test_metric(elements = [R.random_element() for i in range(2^3)]) # long time\n> ```\n> \n> Why is `TestSuite(R).run()` not sufficient?\n> \n> (This is just a question, there might be a good reason)\n\nJust want tests with random elements, not just the ones returned by `some_elements`, which may not reveal problems.",
    "created_at": "2017-06-28T17:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349448",
    "user": "https://github.com/roed314"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jdemeyer](#comment:19):
> Why do you need separate runs of `TestSuite` here?
> 
> ```
> sage: TestSuite(R).run()
> sage: TestSuite(R).run(elements = [R.random_element() for i in range(2^10)], max_runs = 2^12, skip='_test_metric') # long time
> sage: R._test_metric(elements = [R.random_element() for i in range(2^3)]) # long time
> ```
> 
> Why is `TestSuite(R).run()` not sufficient?
> 
> (This is just a question, there might be a good reason)

Just want tests with random elements, not just the ones returned by `some_elements`, which may not reveal problems.



---

archive/issue_events_324275.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-06-28T17:48:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324275"
}
```



---

archive/issue_events_324276.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-06-28T17:48:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324276"
}
```



---

archive/issue_comments_349449.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI've added a few `# long time` tags.",
    "created_at": "2017-06-28T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349449",
    "user": "https://github.com/roed314"
}
```

<div id="comment:24" align="right">comment:24</div>

I've added a few `# long time` tags.



---

archive/issue_events_324277.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-28T19:44:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324277"
}
```



---

archive/issue_events_324278.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-28T19:44:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324278"
}
```



---

archive/issue_comments_349450.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2017-06-28T20:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349450",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_324279.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-28T20:38:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324279"
}
```



---

archive/issue_events_324280.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-28T20:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324280"
}
```



---

archive/issue_comments_349451.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nBlocker or not, it would be good to merge this quickly.",
    "created_at": "2017-06-28T20:38:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349451",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Blocker or not, it would be good to merge this quickly.



---

archive/issue_comments_349452.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jdemeyer](#comment:16):\n> How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.\n\nThis is now #23335.  I'd be interested in feedback on the interface there.",
    "created_at": "2017-06-28T22:30:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349452",
    "user": "https://github.com/roed314"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jdemeyer](#comment:16):
> How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.

This is now #23335.  I'd be interested in feedback on the interface there.



---

archive/issue_comments_349453.json:
```json
{
    "body": "Changed branch from **[u/roed/testing_padic_base_leaves_py_takes_a_very_long_time](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/testing_padic_base_leaves_py_takes_a_very_long_time)** to **[`748b68c`](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)**",
    "created_at": "2017-07-02T17:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23284#issuecomment-349453",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/roed/testing_padic_base_leaves_py_takes_a_very_long_time](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/testing_padic_base_leaves_py_takes_a_very_long_time)** to **[`748b68c`](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)**



---

archive/issue_events_324281.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-02T17:16:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324281"
}
```



---

archive/issue_events_324282.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "97a8bdfa9783be1929e9a41431e6ee68880269ae",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-07-02T17:16:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23284",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23284#event-324282"
}
```
