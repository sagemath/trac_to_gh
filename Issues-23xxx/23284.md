# Issue 23284: Testing padic_base_leaves.py takes a VERY long time

archive/issues_023047.json:
```json
{
    "body": "On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n\n- Sage 8.0.beta9: `[142 tests, 202.82 s]`\n\n- Sage 8.0.beta10: `[191 tests, 626.31 s]`\n\nThe test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n\n**CC:**  @roed314 @saraedum\n\n**Branch/Commit:** [748b68cc2154ebc8cd77df63e491074f9be4a2ab](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** David Roe\n\nIssue created by migration from https://trac.sagemath.org/ticket/23284\n\n",
    "closed_at": "2017-07-02T17:16:30Z",
    "created_at": "2017-06-20T12:13:16Z",
    "labels": [
        "component: padics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Testing padic_base_leaves.py takes a VERY long time",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23284",
    "user": "https://github.com/jdemeyer"
}
```
On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:

- Sage 8.0.beta9: `[142 tests, 202.82 s]`

- Sage 8.0.beta10: `[191 tests, 626.31 s]`

The test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.

**CC:**  @roed314 @saraedum

**Branch/Commit:** [748b68cc2154ebc8cd77df63e491074f9be4a2ab](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)

**Reviewer:** Jeroen Demeyer

**Author:** David Roe

Issue created by migration from https://trac.sagemath.org/ticket/23284





---

archive/issue_comments_351910.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n-On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` takes about 1300 seconds, which is a **huge** amount of time.\n+On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` on 8.0.beta11:\n+\n+```\n+[191 tests, 1607.44 s]\n+```\n+This is an a **huge** amount of time.\n \n Some of these tests are quite old, so either this is a regression or something else is wrong...\n``````\n",
    "created_at": "2017-06-20T12:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351910",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,8 @@
-On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` takes about 1300 seconds, which is a **huge** amount of time.
+On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` on 8.0.beta11:
+
+```
+[191 tests, 1607.44 s]
+```
+This is an a **huge** amount of time.
 
 Some of these tests are quite old, so either this is a regression or something else is wrong...
``````




---

archive/issue_comments_351911.json:
```json
{
    "body": "<a id='comment:2'></a>\nFor me, on a Dell Optiplex 9020.\n\n```\nlINE 242: Test ran for 65.62 s\nLINE 243 : Test ran for 105.39 s\n```\n[191 tests, 304.13 s]\n\nWith many slow `TestSuite(R).run()`\n\n**EDIT** forgot to say, on 8.0.b11",
    "created_at": "2017-06-20T14:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351911",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
For me, on a Dell Optiplex 9020.

```
lINE 242: Test ran for 65.62 s
LINE 243 : Test ran for 105.39 s
```
[191 tests, 304.13 s]

With many slow `TestSuite(R).run()`

**EDIT** forgot to say, on 8.0.b11



---

archive/issue_comments_351912.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe main thing to check is whether this is a regression or not. I plan to test some older versions of Sage.",
    "created_at": "2017-06-20T14:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351912",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
The main thing to check is whether this is a regression or not. I plan to test some older versions of Sage.



---

archive/issue_comments_351913.json:
```json
{
    "body": "<a id='comment:4'></a>\nCould there be something in there which calls the optional spkg `normaliz`? It does not like to be run in parallel because of its own parallelization. I ran across this and have a post about it on [sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/normaliz$20doctest%7Csort:relevance/sage-devel/8eTF_yP_maQ/yvl5s61NAAAJ).",
    "created_at": "2017-06-21T01:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351913",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
Could there be something in there which calls the optional spkg `normaliz`? It does not like to be run in parallel because of its own parallelization. I ran across this and have a post about it on [sage-devel](https://groups.google.com/forum/#!searchin/sage-devel/normaliz$20doctest%7Csort:relevance/sage-devel/8eTF_yP_maQ/yvl5s61NAAAJ).



---

archive/issue_comments_351914.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,9 @@\n-On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` on 8.0.beta11:\n+On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-```\n-[191 tests, 1607.44 s]\n-```\n-This is an a **huge** amount of time.\n+- Sage 7.5: `[142 tests, 177.06 s]`\n \n-Some of these tests are quite old, so either this is a regression or something else is wrong...\n+- Sage 8.0.beta9: `[142 tests, 202.82 s]`\n+\n+- Sage 8.0.beta11: `[191 tests, 623.55 s]`\n+\n+There are 2 potential worries here: there is a regression from Sage 7.5 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-21T07:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351914",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,9 @@
-On my laptop, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py` on 8.0.beta11:
+On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-```
-[191 tests, 1607.44 s]
-```
-This is an a **huge** amount of time.
+- Sage 7.5: `[142 tests, 177.06 s]`
 
-Some of these tests are quite old, so either this is a regression or something else is wrong...
+- Sage 8.0.beta9: `[142 tests, 202.82 s]`
+
+- Sage 8.0.beta11: `[191 tests, 623.55 s]`
+
+There are 2 potential worries here: there is a regression from Sage 7.5 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_351915.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-- Sage 7.5: `[142 tests, 177.06 s]`\n+- Sage 7.6: `[142 tests, 179.74 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n - Sage 8.0.beta11: `[191 tests, 623.55 s]`\n \n-There are 2 potential worries here: there is a regression from Sage 7.5 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n+There are 2 potential worries here: there is a regression from Sage 7.6 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-21T13:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351915",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-- Sage 7.5: `[142 tests, 177.06 s]`
+- Sage 7.6: `[142 tests, 179.74 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
 - Sage 8.0.beta11: `[191 tests, 623.55 s]`
 
-There are 2 potential worries here: there is a regression from Sage 7.5 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
+There are 2 potential worries here: there is a regression from Sage 7.6 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_351916.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-- Sage 7.6: `[142 tests, 179.74 s]`\n+- Sage 8.0.beta4: `[142 tests, 180.00 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n - Sage 8.0.beta11: `[191 tests, 623.55 s]`\n \n-There are 2 potential worries here: there is a regression from Sage 7.6 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n+There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-22T08:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351916",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-- Sage 7.6: `[142 tests, 179.74 s]`
+- Sage 8.0.beta4: `[142 tests, 180.00 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
 - Sage 8.0.beta11: `[191 tests, 623.55 s]`
 
-There are 2 potential worries here: there is a regression from Sage 7.6 to Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
+There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_351917.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-- Sage 8.0.beta4: `[142 tests, 180.00 s]`\n+- Sage 8.0.beta7: `[142 tests, 181.17 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n-- Sage 8.0.beta11: `[191 tests, 623.55 s]`\n+- Sage 8.0.beta10: `[191 tests, 626.31 s]`\n \n-There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n+There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-22T14:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351917",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-- Sage 8.0.beta4: `[142 tests, 180.00 s]`
+- Sage 8.0.beta7: `[142 tests, 181.17 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
-- Sage 8.0.beta11: `[191 tests, 623.55 s]`
+- Sage 8.0.beta10: `[191 tests, 626.31 s]`
 
-There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta11 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
+There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_351918.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n \n-- Sage 8.0.beta7: `[142 tests, 181.17 s]`\n+- Sage 8.0.beta8: `[142 tests, 180.68 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n``````\n",
    "created_at": "2017-06-23T09:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351918",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
 
-- Sage 8.0.beta7: `[142 tests, 181.17 s]`
+- Sage 8.0.beta8: `[142 tests, 180.68 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
``````




---

archive/issue_comments_351919.json:
```json
{
    "body": "<a id='comment:10'></a>\nI understand where some of these changes are coming from. I'll take a look next week (no internet over the weekend).",
    "created_at": "2017-06-24T01:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351919",
    "user": "https://github.com/roed314"
}
```

<a id='comment:10'></a>
I understand where some of these changes are coming from. I'll take a look next week (no internet over the weekend).



---

archive/issue_comments_351920.json:
```json
{
    "body": "<a id='comment:11'></a>\nYikes, 343 seconds on my Mac laptop too (with nothing else going on).",
    "created_at": "2017-06-25T03:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351920",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:11'></a>
Yikes, 343 seconds on my Mac laptop too (with nothing else going on).



---

archive/issue_comments_351921.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,7 @@\n On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:\n-\n-- Sage 8.0.beta8: `[142 tests, 180.68 s]`\n \n - Sage 8.0.beta9: `[142 tests, 202.82 s]`\n \n - Sage 8.0.beta10: `[191 tests, 626.31 s]`\n \n-There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n+The test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.\n``````\n",
    "created_at": "2017-06-26T15:07:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351921",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,7 @@
 On a particular server, doing the long doctests of `src/sage/rings/padics/padic_base_leaves.py`:
-
-- Sage 8.0.beta8: `[142 tests, 180.68 s]`
 
 - Sage 8.0.beta9: `[142 tests, 202.82 s]`
 
 - Sage 8.0.beta10: `[191 tests, 626.31 s]`
 
-There are 2 potential worries here: there is a regression in Sage 8.0.beta9 (same number of tests, but more time). Second, the test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
+The test time in Sage 8.0.beta10 is simply too much (but the number of tests has increased since 8.0.beta9, so this is probably not a regression). This is a problem because it leads to timeouts when running doctests.
``````




---

archive/issue_comments_351922.json:
```json
{
    "body": "<a id='comment:12'></a>\nI investigated the first regression and it is due to MPIR-3.0.0: #23327\n\nI will change this ticket to be only about the second issue: the large absolute time taken by testing `padic_base_leaves.py`",
    "created_at": "2017-06-26T15:07:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351922",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
I investigated the first regression and it is due to MPIR-3.0.0: #23327

I will change this ticket to be only about the second issue: the large absolute time taken by testing `padic_base_leaves.py`



---

archive/issue_comments_351923.json:
```json
{
    "body": "**Branch:** [u/roed/testing_padic_base_leaves_py_takes_a_very_long_time](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/testing_padic_base_leaves_py_takes_a_very_long_time)",
    "created_at": "2017-06-28T06:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351923",
    "user": "https://github.com/roed314"
}
```

**Branch:** [u/roed/testing_padic_base_leaves_py_takes_a_very_long_time](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/testing_padic_base_leaves_py_takes_a_very_long_time)



---

archive/issue_comments_351924.json:
```json
{
    "body": "**Commit:** [8ce532e123d180e6bc5e0ad0647ec582684c49f1](https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1)",
    "created_at": "2017-06-28T07:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [8ce532e123d180e6bc5e0ad0647ec582684c49f1](https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1)



---

archive/issue_comments_351925.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1\">8ce532e</a></td><td><code>Make long tests in padic_base_leaves.py shorter, add documentation for timings options to unit test code</code></td></tr></table>\n",
    "created_at": "2017-06-28T07:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1">8ce532e</a></td><td><code>Make long tests in padic_base_leaves.py shorter, add documentation for timings options to unit test code</code></td></tr></table>




---

archive/issue_comments_351926.json:
```json
{
    "body": "<a id='comment:15'></a>\nThese changes drop the long tests from `256s` to `37s`.",
    "created_at": "2017-06-28T07:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351926",
    "user": "https://github.com/roed314"
}
```

<a id='comment:15'></a>
These changes drop the long tests from `256s` to `37s`.



---

archive/issue_events_207278.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-06-28T07:05:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207278"
}
```



---

archive/issue_comments_351927.json:
```json
{
    "body": "**Author:** David Roe",
    "created_at": "2017-06-28T07:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351927",
    "user": "https://github.com/roed314"
}
```

**Author:** David Roe



---

archive/issue_comments_351928.json:
```json
{
    "body": "<a id='comment:16'></a>\nHow are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.",
    "created_at": "2017-06-28T13:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351928",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.



---

archive/issue_comments_351929.json:
```json
{
    "body": "<a id='comment:17'></a>\nSome more tests should be marked `# long time`, in particular on lines 244, 246, 336, 431.",
    "created_at": "2017-06-28T13:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351929",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Some more tests should be marked `# long time`, in particular on lines 244, 246, 336, 431.



---

archive/issue_events_207279.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-28T13:27:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207279"
}
```



---

archive/issue_events_207280.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-28T13:27:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207280"
}
```



---

archive/issue_comments_351930.json:
```json
{
    "body": "<a id='comment:19'></a>\nWhy do you need separate runs of `TestSuite` here?\n\n```\nsage: TestSuite(R).run()\nsage: TestSuite(R).run(elements = [R.random_element() for i in range(2^10)], max_runs = 2^12, skip='_test_metric') # long time\nsage: R._test_metric(elements = [R.random_element() for i in range(2^3)]) # long time\n```\n\nWhy is `TestSuite(R).run()` not sufficient?\n\n(This is just a question, there might be a good reason)",
    "created_at": "2017-06-28T13:31:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351930",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
Why do you need separate runs of `TestSuite` here?

```
sage: TestSuite(R).run()
sage: TestSuite(R).run(elements = [R.random_element() for i in range(2^10)], max_runs = 2^12, skip='_test_metric') # long time
sage: R._test_metric(elements = [R.random_element() for i in range(2^3)]) # long time
```

Why is `TestSuite(R).run()` not sufficient?

(This is just a question, there might be a good reason)



---

archive/issue_comments_351931.json:
```json
{
    "body": "<a id='comment:20'></a>\n\n```\nDoctesting 1 file.\nsage -t --long src/sage/rings/padics/padic_base_leaves.py\n    [209 tests, 49.45 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 49.6 seconds\n    cpu time: 44.5 seconds\n    cumulative wall time: 49.5 seconds\n```",
    "created_at": "2017-06-28T15:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351931",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>

```
Doctesting 1 file.
sage -t --long src/sage/rings/padics/padic_base_leaves.py
    [209 tests, 49.45 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 49.6 seconds
    cpu time: 44.5 seconds
    cumulative wall time: 49.5 seconds
```



---

archive/issue_comments_351932.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f0a79cd88e8e6ad5ae496594ea83cdeba707929\">1f0a79c</a></td><td><code>Modifying long tests in padic_base_leaves.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab\">748b68c</a></td><td><code>Undo changes to sage_unittest.py</code></td></tr></table>\n",
    "created_at": "2017-06-28T17:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f0a79cd88e8e6ad5ae496594ea83cdeba707929">1f0a79c</a></td><td><code>Modifying long tests in padic_base_leaves.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab">748b68c</a></td><td><code>Undo changes to sage_unittest.py</code></td></tr></table>




---

archive/issue_comments_351933.json:
```json
{
    "body": "**Changing commit** from \"[8ce532e123d180e6bc5e0ad0647ec582684c49f1](https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1)\" to \"[748b68cc2154ebc8cd77df63e491074f9be4a2ab](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)\".",
    "created_at": "2017-06-28T17:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351933",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8ce532e123d180e6bc5e0ad0647ec582684c49f1](https://github.com/sagemath/sagetrac-mirror/commit/8ce532e123d180e6bc5e0ad0647ec582684c49f1)" to "[748b68cc2154ebc8cd77df63e491074f9be4a2ab](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)".



---

archive/issue_comments_351934.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jdemeyer](#comment%3A16):\n> How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.\n\n\nThey got accidentally included. I've removed them.",
    "created_at": "2017-06-28T17:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351934",
    "user": "https://github.com/roed314"
}
```

<a id='comment:22'></a>
Replying to [jdemeyer](#comment%3A16):
> How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.


They got accidentally included. I've removed them.



---

archive/issue_comments_351935.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [jdemeyer](#comment%3A19):\n> Why do you need separate runs of `TestSuite` here?\n> \n> ```\n> sage: TestSuite(R).run()\n> sage: TestSuite(R).run(elements = [R.random_element() for i in range(2^10)], max_runs = 2^12, skip='_test_metric') # long time\n> sage: R._test_metric(elements = [R.random_element() for i in range(2^3)]) # long time\n> ```\n> \n> Why is `TestSuite(R).run()` not sufficient?\n> \n> (This is just a question, there might be a good reason)\n\n\nJust want tests with random elements, not just the ones returned by `some_elements`, which may not reveal problems.",
    "created_at": "2017-06-28T17:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351935",
    "user": "https://github.com/roed314"
}
```

<a id='comment:23'></a>
Replying to [jdemeyer](#comment%3A19):
> Why do you need separate runs of `TestSuite` here?
> 
> ```
> sage: TestSuite(R).run()
> sage: TestSuite(R).run(elements = [R.random_element() for i in range(2^10)], max_runs = 2^12, skip='_test_metric') # long time
> sage: R._test_metric(elements = [R.random_element() for i in range(2^3)]) # long time
> ```
> 
> Why is `TestSuite(R).run()` not sufficient?
> 
> (This is just a question, there might be a good reason)


Just want tests with random elements, not just the ones returned by `some_elements`, which may not reveal problems.



---

archive/issue_events_207281.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-06-28T17:48:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207281"
}
```



---

archive/issue_events_207282.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-06-28T17:48:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207282"
}
```



---

archive/issue_comments_351936.json:
```json
{
    "body": "<a id='comment:24'></a>\nI've added a few `# long time` tags.",
    "created_at": "2017-06-28T17:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351936",
    "user": "https://github.com/roed314"
}
```

<a id='comment:24'></a>
I've added a few `# long time` tags.



---

archive/issue_events_207283.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-28T19:44:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207283"
}
```



---

archive/issue_comments_351937.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2017-06-28T20:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351937",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_events_207284.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-28T20:38:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207284"
}
```



---

archive/issue_events_207285.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-28T20:38:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207285"
}
```



---

archive/issue_comments_351938.json:
```json
{
    "body": "<a id='comment:26'></a>\nBlocker or not, it would be good to merge this quickly.",
    "created_at": "2017-06-28T20:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351938",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Blocker or not, it would be good to merge this quickly.



---

archive/issue_comments_351939.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [jdemeyer](#comment%3A16):\n> How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.\n\n\nThis is now #23335.  I'd be interested in feedback on the interface there.",
    "created_at": "2017-06-28T22:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351939",
    "user": "https://github.com/roed314"
}
```

<a id='comment:27'></a>
Replying to [jdemeyer](#comment%3A16):
> How are the changes in `src/sage/misc/sage_unittest.py` related to this ticket? If they are not, please create a new ticket for that change.


This is now #23335.  I'd be interested in feedback on the interface there.



---

archive/issue_comments_351940.json:
```json
{
    "body": "**Changing branch** from \"[u/roed/testing_padic_base_leaves_py_takes_a_very_long_time](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/testing_padic_base_leaves_py_takes_a_very_long_time)\" to \"[748b68cc2154ebc8cd77df63e491074f9be4a2ab](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)\".",
    "created_at": "2017-07-02T17:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23284#issuecomment-351940",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/roed/testing_padic_base_leaves_py_takes_a_very_long_time](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/testing_padic_base_leaves_py_takes_a_very_long_time)" to "[748b68cc2154ebc8cd77df63e491074f9be4a2ab](https://github.com/sagemath/sagetrac-mirror/commit/748b68cc2154ebc8cd77df63e491074f9be4a2ab)".



---

archive/issue_events_207286.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-02T17:16:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207286"
}
```



---

archive/issue_events_207287.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-02T17:16:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23284",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23284#event-207287"
}
```
