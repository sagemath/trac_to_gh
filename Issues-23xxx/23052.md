# Issue 23052: operations between sage and gmpy2 numbers

archive/issues_022815.json:
```json
{
    "body": "Currently, operations involving Sage and gmpy2 numbers are broken (see [comment:7]). Though, it works fine with gmpy2 and Python numbers. The reason is that the various binary operations implemented in gmpy2 just check for Python integer types. It should be possible to modify these functions in order that an operation involving a gmpy2 number and a type implementing one of the `__mpz__`/`__mpq__`/`__mpfr__`/`__mpc__` method should work.\n\nNote: #22928 implemented the conversion Sage type -> gmpy2 type via the implementation of the `__mpz__`, `__mpq__`, `__mpfr__` and `__mpc__` methods.\n\nUpstream issue: https://github.com/aleaxit/gmpy/issues/214\n\n**Assignee:** @vinklein\n\n**CC:**  @videlec @jdemeyer\n\n**Branch/Commit:** [b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c](https://github.com/sagemath/sagetrac-mirror/commit/b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c)\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Vincent Klein\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23052\n\n",
    "closed_at": "2019-03-14T18:13:58Z",
    "created_at": "2017-05-22T10:18:18Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "operations between sage and gmpy2 numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23052",
    "user": "https://github.com/vinklein"
}
```
Currently, operations involving Sage and gmpy2 numbers are broken (see [comment:7]). Though, it works fine with gmpy2 and Python numbers. The reason is that the various binary operations implemented in gmpy2 just check for Python integer types. It should be possible to modify these functions in order that an operation involving a gmpy2 number and a type implementing one of the `__mpz__`/`__mpq__`/`__mpfr__`/`__mpc__` method should work.

Note: #22928 implemented the conversion Sage type -> gmpy2 type via the implementation of the `__mpz__`, `__mpq__`, `__mpfr__` and `__mpc__` methods.

Upstream issue: https://github.com/aleaxit/gmpy/issues/214

**Assignee:** @vinklein

**CC:**  @videlec @jdemeyer

**Branch/Commit:** [b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c](https://github.com/sagemath/sagetrac-mirror/commit/b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c)

**Upstream:** Fixed upstream, in a later stable release.

**Reviewer:** Vincent Delecroix

**Author:** Vincent Klein

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/23052





---

archive/issue_comments_434699.json:
```json
{
    "body": "**Assignee:** @vinklein",
    "created_at": "2017-05-22T10:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434699",
    "user": "https://github.com/vinklein"
}
```

**Assignee:** @vinklein



---

archive/issue_comments_434700.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n Provide coercion for gmpy2 numbers for operations -, +, * and /\n+\n This ticket follow the discussion about coercion for gmpy2 numbers #22928.\n``````\n",
    "created_at": "2017-05-22T10:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434700",
    "user": "https://github.com/vinklein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
 Provide coercion for gmpy2 numbers for operations -, +, * and /
+
 This ticket follow the discussion about coercion for gmpy2 numbers #22928.
``````




---

archive/issue_comments_434701.json:
```json
{
    "body": "Replying to [ticket:23052 vklein]:\n> Provide coercion for gmpy2 numbers for operations -, +, * and /\n\n\nThis makes no sense to me. What does it mean to provide coercion for **certain operations** only?",
    "created_at": "2017-05-22T10:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434701",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:23052 vklein]:
> Provide coercion for gmpy2 numbers for operations -, +, * and /


This makes no sense to me. What does it mean to provide coercion for **certain operations** only?



---

archive/issue_comments_434702.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Provide coercion for gmpy2 numbers for operations -, +, * and /\n+Provide coercion for gmpy2 numbers\n \n This ticket follow the discussion about coercion for gmpy2 numbers #22928.\n``````\n",
    "created_at": "2017-05-22T11:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434702",
    "user": "https://github.com/vinklein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Provide coercion for gmpy2 numbers for operations -, +, * and /
+Provide coercion for gmpy2 numbers
 
 This ticket follow the discussion about coercion for gmpy2 numbers #22928.
``````




---

archive/issue_comments_434703.json:
```json
{
    "body": "<a id='comment:3'></a>\nYou're right, description updated",
    "created_at": "2017-05-22T11:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434703",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:3'></a>
You're right, description updated



---

archive/issue_comments_434704.json:
```json
{
    "body": "**Changing dependencies** from \"22928\" to \"#22928\".",
    "created_at": "2017-05-22T11:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434704",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "22928" to "#22928".



---

archive/issue_comments_434705.json:
```json
{
    "body": "<a id='comment:4'></a>\nThanks for the clarification.",
    "created_at": "2017-05-22T11:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434705",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Thanks for the clarification.



---

archive/issue_comments_434706.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Provide coercion for gmpy2 numbers\n-\n-This ticket follow the discussion about coercion for gmpy2 numbers #22928.\n+This ticket follows the discussion about coercion for gmpy2 numbers #22928. It is not clear:\n+- whether this coercion is desirable\n+- in which direction coercion should be done (Sage -> gmpy2 or gmpy2 -> Sage)\n``````\n",
    "created_at": "2017-05-22T16:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434706",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Provide coercion for gmpy2 numbers
-
-This ticket follow the discussion about coercion for gmpy2 numbers #22928.
+This ticket follows the discussion about coercion for gmpy2 numbers #22928. It is not clear:
+- whether this coercion is desirable
+- in which direction coercion should be done (Sage -> gmpy2 or gmpy2 -> Sage)
``````




---

archive/issue_events_067861.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "rename": {
        "from": "Provide coercion for gmpy2 numbers",
        "to": "coercion for gmpy2 numbers"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23052#event-67861"
}
```



---

archive/issue_comments_434707.json:
```json
{
    "body": "**Changing dependencies** from \"#22928\" to \"#22928, #23024\".",
    "created_at": "2018-02-07T08:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434707",
    "user": "https://github.com/videlec"
}
```

**Changing dependencies** from "#22928" to "#22928, #23024".



---

archive/issue_comments_434708.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n-This ticket follows the discussion about coercion for gmpy2 numbers #22928. It is not clear:\n-- whether this coercion is desirable\n-- in which direction coercion should be done (Sage -> gmpy2 or gmpy2 -> Sage)\n+This ticket follows the discussion about coercion for gmpy2 numbers #22928 (see also #23024 that proposes to make `gmpy2` a standard package). As it is the case with Python types, we implement coercion from gmpy2 types to the corresponding Sage types\n+- `gmpy2.mpz` -> `Integer`\n+- `gmpy2.mpq` -> `Rational`\n+- `gmpy2.mpfr` -> `RealNumber`\n+- `gmpy2.mpc` -> `MPComplexNumber`\n``````\n",
    "created_at": "2018-02-07T08:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434708",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
-This ticket follows the discussion about coercion for gmpy2 numbers #22928. It is not clear:
-- whether this coercion is desirable
-- in which direction coercion should be done (Sage -> gmpy2 or gmpy2 -> Sage)
+This ticket follows the discussion about coercion for gmpy2 numbers #22928 (see also #23024 that proposes to make `gmpy2` a standard package). As it is the case with Python types, we implement coercion from gmpy2 types to the corresponding Sage types
+- `gmpy2.mpz` -> `Integer`
+- `gmpy2.mpq` -> `Rational`
+- `gmpy2.mpfr` -> `RealNumber`
+- `gmpy2.mpc` -> `MPComplexNumber`
``````




---

archive/issue_comments_434709.json:
```json
{
    "body": "<a id='comment:7'></a>\nI don't think that this feature is desirable. The behavior should be the same as with `cypari2`\n\n```\nsage: import cypari2\nsage: pari = cypari2.Pari()\nsage: type(pari(1) + 1)\n<type 'cypari2.gen.Gen'>\nsage: type(1 + pari(1))\n<type 'cypari2.gen.Gen'>\n```\nMixing `gmpy2` numbers with sage numbers currently raise errors\n\n```\nsage: import gmpy2\nsage: type(gmpy2.mpz(1) + 1)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-2-eeaeca1c122b> in <module>()\n----> 1 type(gmpy2.mpz(Integer(1)) + Integer(1))\n\n/opt/sage/local/lib/python2.7/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__add__ (build/cythonized/sage/rings/integer.c:11460)()\n   1683             return y\n   1684 \n-> 1685         return coercion_model.bin_op(left, right, operator.add)\n   1686 \n   1687     cpdef `_add_`(self, right):\n\n/opt/sage/local/lib/python2.7/site-packages/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel.bin_op (build/cythonized/sage/structure/coerce.c:11110)()\n   1208         # We should really include the underlying error.\n   1209         # This causes so much headache.\n-> 1210         raise bin_op_exception(op, x, y)\n   1211 \n   1212     cpdef canonical_coercion(self, x, y):\n\nTypeError: unsupported operand parent(s) for +: '<type 'mpz'>' and 'Integer Ring'\nsage: type(1 + gmpy2.mpz(1))\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-ea356a02d58b> in <module>()\n----> 1 type(Integer(1) + gmpy2.mpz(Integer(1)))\n\n/opt/sage/local/lib/python2.7/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__add__ (build/cythonized/sage/rings/integer.c:11460)()\n   1683             return y\n   1684 \n-> 1685         return coercion_model.bin_op(left, right, operator.add)\n   1686 \n   1687     cpdef `_add_`(self, right):\n\n/opt/sage/local/lib/python2.7/site-packages/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel.bin_op (build/cythonized/sage/structure/coerce.c:11110)()\n   1208         # We should really include the underlying error.\n   1209         # This causes so much headache.\n-> 1210         raise bin_op_exception(op, x, y)\n   1211 \n   1212     cpdef canonical_coercion(self, x, y):\n\nTypeError: unsupported operand parent(s) for +: 'Integer Ring' and '<type 'mpz'>'\n```",
    "created_at": "2019-03-03T10:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434709",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
I don't think that this feature is desirable. The behavior should be the same as with `cypari2`

```
sage: import cypari2
sage: pari = cypari2.Pari()
sage: type(pari(1) + 1)
<type 'cypari2.gen.Gen'>
sage: type(1 + pari(1))
<type 'cypari2.gen.Gen'>
```
Mixing `gmpy2` numbers with sage numbers currently raise errors

```
sage: import gmpy2
sage: type(gmpy2.mpz(1) + 1)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-2-eeaeca1c122b> in <module>()
----> 1 type(gmpy2.mpz(Integer(1)) + Integer(1))

/opt/sage/local/lib/python2.7/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__add__ (build/cythonized/sage/rings/integer.c:11460)()
   1683             return y
   1684 
-> 1685         return coercion_model.bin_op(left, right, operator.add)
   1686 
   1687     cpdef `_add_`(self, right):

/opt/sage/local/lib/python2.7/site-packages/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel.bin_op (build/cythonized/sage/structure/coerce.c:11110)()
   1208         # We should really include the underlying error.
   1209         # This causes so much headache.
-> 1210         raise bin_op_exception(op, x, y)
   1211 
   1212     cpdef canonical_coercion(self, x, y):

TypeError: unsupported operand parent(s) for +: '<type 'mpz'>' and 'Integer Ring'
sage: type(1 + gmpy2.mpz(1))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-3-ea356a02d58b> in <module>()
----> 1 type(Integer(1) + gmpy2.mpz(Integer(1)))

/opt/sage/local/lib/python2.7/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__add__ (build/cythonized/sage/rings/integer.c:11460)()
   1683             return y
   1684 
-> 1685         return coercion_model.bin_op(left, right, operator.add)
   1686 
   1687     cpdef `_add_`(self, right):

/opt/sage/local/lib/python2.7/site-packages/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel.bin_op (build/cythonized/sage/structure/coerce.c:11110)()
   1208         # We should really include the underlying error.
   1209         # This causes so much headache.
-> 1210         raise bin_op_exception(op, x, y)
   1211 
   1212     cpdef canonical_coercion(self, x, y):

TypeError: unsupported operand parent(s) for +: 'Integer Ring' and '<type 'mpz'>'
```



---

archive/issue_comments_434710.json:
```json
{
    "body": "<a id='comment:8'></a>\nTo make this work, one has to modify the various binary operators in `gmpy2` (e.g. `GMPy_Integer_Add`).",
    "created_at": "2019-03-03T10:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434710",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
To make this work, one has to modify the various binary operators in `gmpy2` (e.g. `GMPy_Integer_Add`).



---

archive/issue_comments_434711.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [vdelecroix](#comment%3A8):\n> To make this work, one has to modify the various binary operators in `gmpy2` (e.g. `GMPy_Integer_Add`).\n\n\nThis is obviously the right thing to do. Given that\n\n```\nsage: from gmpy2 import mpz\nsage: mpz(1) + int(1)\nmpz(2)\n```\nworks, it's actually strange that\n\n```\nsage: from gmpy2 import mpz\nsage: mpz(1) + Integer(1)\nTraceback (most recent call last):\n...\nTypeError: unsupported operand parent(s) for +: '<type 'mpz'>' and 'Integer Ring'\n```\ndoesn't work.",
    "created_at": "2019-03-03T10:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434711",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [vdelecroix](#comment%3A8):
> To make this work, one has to modify the various binary operators in `gmpy2` (e.g. `GMPy_Integer_Add`).


This is obviously the right thing to do. Given that

```
sage: from gmpy2 import mpz
sage: mpz(1) + int(1)
mpz(2)
```
works, it's actually strange that

```
sage: from gmpy2 import mpz
sage: mpz(1) + Integer(1)
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for +: '<type 'mpz'>' and 'Integer Ring'
```
doesn't work.



---

archive/issue_comments_434712.json:
```json
{
    "body": "<a id='comment:10'></a>\nLet me update the ticket description then.",
    "created_at": "2019-03-03T10:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434712",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>
Let me update the ticket description then.



---

archive/issue_comments_434713.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Not yet reported upstream; Will do shortly.\".",
    "created_at": "2019-03-03T10:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434713",
    "user": "https://github.com/videlec"
}
```

**Changing upstream** from "N/A" to "Not yet reported upstream; Will do shortly.".



---

archive/issue_events_067862.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "rename": {
        "from": "coercion for gmpy2 numbers",
        "to": "operations between sage and gmpy2 numbers"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23052#event-67862"
}
```



---

archive/issue_comments_434714.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n-This ticket follows the discussion about coercion for gmpy2 numbers #22928 (see also #23024 that proposes to make `gmpy2` a standard package). As it is the case with Python types, we implement coercion from gmpy2 types to the corresponding Sage types\n-- `gmpy2.mpz` -> `Integer`\n-- `gmpy2.mpq` -> `Rational`\n-- `gmpy2.mpfr` -> `RealNumber`\n-- `gmpy2.mpc` -> `MPComplexNumber`\n+Currently, operations involving Sage and gmpy2 numbers are broken (see [comment:7]). Though, it works fine with gmpy2 and Python numbers. The reason is that the various binary operations implemented in gmpy2 just check for Python integer types. It should be possible to modify these functions in order that an operation involving a gmpy2 number and a type implementing one of the `__mpz__`/`__mpq__`/`__mpfr__`/`__mpc__` method should work.\n+\n+Note: #22928 implemented the conversion Sage type -> gmpy2 type via the implementation of the `__mpz__`, `__mpq__`, `__mpfr__` and `__mpc__` methods.\n``````\n",
    "created_at": "2019-03-03T10:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434714",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
-This ticket follows the discussion about coercion for gmpy2 numbers #22928 (see also #23024 that proposes to make `gmpy2` a standard package). As it is the case with Python types, we implement coercion from gmpy2 types to the corresponding Sage types
-- `gmpy2.mpz` -> `Integer`
-- `gmpy2.mpq` -> `Rational`
-- `gmpy2.mpfr` -> `RealNumber`
-- `gmpy2.mpc` -> `MPComplexNumber`
+Currently, operations involving Sage and gmpy2 numbers are broken (see [comment:7]). Though, it works fine with gmpy2 and Python numbers. The reason is that the various binary operations implemented in gmpy2 just check for Python integer types. It should be possible to modify these functions in order that an operation involving a gmpy2 number and a type implementing one of the `__mpz__`/`__mpq__`/`__mpfr__`/`__mpc__` method should work.
+
+Note: #22928 implemented the conversion Sage type -> gmpy2 type via the implementation of the `__mpz__`, `__mpq__`, `__mpfr__` and `__mpc__` methods.
``````




---

archive/issue_comments_434715.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n Currently, operations involving Sage and gmpy2 numbers are broken (see [comment:7]). Though, it works fine with gmpy2 and Python numbers. The reason is that the various binary operations implemented in gmpy2 just check for Python integer types. It should be possible to modify these functions in order that an operation involving a gmpy2 number and a type implementing one of the `__mpz__`/`__mpq__`/`__mpfr__`/`__mpc__` method should work.\n \n Note: #22928 implemented the conversion Sage type -> gmpy2 type via the implementation of the `__mpz__`, `__mpq__`, `__mpfr__` and `__mpc__` methods.\n+\n+Upstream issue: https://github.com/aleaxit/gmpy/issues/214\n``````\n",
    "created_at": "2019-03-04T17:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434715",
    "user": "https://github.com/vinklein"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 Currently, operations involving Sage and gmpy2 numbers are broken (see [comment:7]). Though, it works fine with gmpy2 and Python numbers. The reason is that the various binary operations implemented in gmpy2 just check for Python integer types. It should be possible to modify these functions in order that an operation involving a gmpy2 number and a type implementing one of the `__mpz__`/`__mpq__`/`__mpfr__`/`__mpc__` method should work.
 
 Note: #22928 implemented the conversion Sage type -> gmpy2 type via the implementation of the `__mpz__`, `__mpq__`, `__mpfr__` and `__mpc__` methods.
+
+Upstream issue: https://github.com/aleaxit/gmpy/issues/214
``````




---

archive/issue_comments_434716.json:
```json
{
    "body": "**Changing upstream** from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2019-03-04T17:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434716",
    "user": "https://github.com/vinklein"
}
```

**Changing upstream** from "Not yet reported upstream; Will do shortly." to "Reported upstream. No feedback yet.".



---

archive/issue_comments_434717.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2019-03-07T07:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434717",
    "user": "https://github.com/vinklein"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_434718.json:
```json
{
    "body": "<a id='comment:14'></a>\nThe gmpy2 pull request [#217](https://github.com/aleaxit/gmpy/pull/217) has been merged this morning.\\\\\nShould we make a patch based on this or wait for the next gmpy2 release ?",
    "created_at": "2019-03-07T09:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434718",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:14'></a>
The gmpy2 pull request [#217](https://github.com/aleaxit/gmpy/pull/217) has been merged this morning.\\
Should we make a patch based on this or wait for the next gmpy2 release ?



---

archive/issue_comments_434719.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [vklein](#comment%3A14):\n> The gmpy2 pull request [#217](https://github.com/aleaxit/gmpy/pull/217) has been merged this morning.\n\n\nThis is a great news. Thanks for the work!\n\n> Should we make a patch based on this or wait for the next gmpy2 release ?\n\n\nDo we have a schedule for the next gmpy2 release? Since gmpy2 becomes a standard package for the next Sage release it would be nice if it would happen before.\n\nOtherwise, I am not a big fan of using patches that are integrated upstream but not released yet.",
    "created_at": "2019-03-07T12:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434719",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>
Replying to [vklein](#comment%3A14):
> The gmpy2 pull request [#217](https://github.com/aleaxit/gmpy/pull/217) has been merged this morning.


This is a great news. Thanks for the work!

> Should we make a patch based on this or wait for the next gmpy2 release ?


Do we have a schedule for the next gmpy2 release? Since gmpy2 becomes a standard package for the next Sage release it would be nice if it would happen before.

Otherwise, I am not a big fan of using patches that are integrated upstream but not released yet.



---

archive/issue_comments_434720.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [vdelecroix](#comment%3A15):\n> Replying to [vklein](#comment%3A14):\n> > Should we make a patch based on this or wait for the next gmpy2 release ?\n\n> \n> Do we have a schedule for the next gmpy2 release? Since gmpy2 becomes a standard package for the next Sage release it would be nice if it would happen before.\n\n\nSomehow [#199](https://github.com/aleaxit/gmpy/issues/199) is a bit of an answer.",
    "created_at": "2019-03-07T12:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434720",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>
Replying to [vdelecroix](#comment%3A15):
> Replying to [vklein](#comment%3A14):
> > Should we make a patch based on this or wait for the next gmpy2 release ?

> 
> Do we have a schedule for the next gmpy2 release? Since gmpy2 becomes a standard package for the next Sage release it would be nice if it would happen before.


Somehow [#199](https://github.com/aleaxit/gmpy/issues/199) is a bit of an answer.



---

archive/issue_comments_434721.json:
```json
{
    "body": "**Branch:** [u/vklein/23052](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/23052)",
    "created_at": "2019-03-08T09:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434721",
    "user": "https://github.com/vinklein"
}
```

**Branch:** [u/vklein/23052](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/23052)



---

archive/issue_comments_434722.json:
```json
{
    "body": "<a id='comment:18'></a>\nAfter some talk with vdelecroix we agree to make a gmpy2 patch with [#217](https://github.com/aleaxit/gmpy/pull/217).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edfe875c099ab48145b976de2dcc2d70fff0f1b5\">edfe875</a></td><td><code>Trac #23052: patch gmpy2 with PR #217 ...</code></td></tr></table>\n",
    "created_at": "2019-03-08T09:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434722",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:18'></a>
After some talk with vdelecroix we agree to make a gmpy2 patch with [#217](https://github.com/aleaxit/gmpy/pull/217).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edfe875c099ab48145b976de2dcc2d70fff0f1b5">edfe875</a></td><td><code>Trac #23052: patch gmpy2 with PR #217 ...</code></td></tr></table>




---

archive/issue_comments_434723.json:
```json
{
    "body": "**Commit:** [edfe875c099ab48145b976de2dcc2d70fff0f1b5](https://github.com/sagemath/sagetrac-mirror/commit/edfe875c099ab48145b976de2dcc2d70fff0f1b5)",
    "created_at": "2019-03-08T09:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434723",
    "user": "https://github.com/vinklein"
}
```

**Commit:** [edfe875c099ab48145b976de2dcc2d70fff0f1b5](https://github.com/sagemath/sagetrac-mirror/commit/edfe875c099ab48145b976de2dcc2d70fff0f1b5)



---

archive/issue_comments_434724.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-03-08T09:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434724",
    "user": "https://github.com/vinklein"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_434725.json:
```json
{
    "body": "**Changing dependencies** from \"#22928, #23024\" to \"\".",
    "created_at": "2019-03-08T09:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434725",
    "user": "https://github.com/vinklein"
}
```

**Changing dependencies** from "#22928, #23024" to "".



---

archive/issue_events_067863.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-03-08T09:41:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "milestone": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23052#event-67863"
}
```



---

archive/issue_comments_434726.json:
```json
{
    "body": "<a id='comment:21'></a>\nYou create a lot of warnings with the macros. This should be fixed.\n\n```\ngmpy2-2.1.0a4.p1]     src/gmpy2_cache.c: In function 'GMPy_MPZ_NewInit':\n[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:44:60: warning: suggest parentheses around '&&' within '||' [-Wparentheses]\n[gmpy2-2.1.0a4.p1]      #define HAS_STRICT_MPZ_CONVERSION(x) HAS_MPZ_CONVERSION(x) && \\\n[gmpy2-2.1.0a4.p1]                                                                 ^\n[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:52:25: note: in expansion of macro 'HAS_STRICT_MPZ_CONVERSION'\n[gmpy2-2.1.0a4.p1]                              HAS_STRICT_MPZ_CONVERSION(x))\n[gmpy2-2.1.0a4.p1]                              ^\n[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:61:25: note: in expansion of macro 'IS_INTEGER'\n[gmpy2-2.1.0a4.p1]      #define IS_RATIONAL(x) (IS_INTEGER(x) || IS_RATIONAL_ONLY(x))\n[gmpy2-2.1.0a4.p1]                              ^\n[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:64:21: note: in expansion of macro 'IS_RATIONAL'\n[gmpy2-2.1.0a4.p1]      #define IS_REAL(x) (IS_RATIONAL(x) || IS_REAL_ONLY(x))\n[gmpy2-2.1.0a4.p1]                          ^\n[gmpy2-2.1.0a4.p1]     src/gmpy2_cache.c:191:9: note: in expansion of macro 'IS_REAL'\n[gmpy2-2.1.0a4.p1]          if (IS_REAL(n)) {\n[gmpy2-2.1.0a4.p1]              ^\n[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:46:62: warning: suggest parentheses around '&&' within '||' [-Wparentheses]\n[gmpy2-2.1.0a4.p1]      #define HAS_STRICT_MPFR_CONVERSION(x) HAS_MPFR_CONVERSION(x) && \\\n[gmpy2-2.1.0a4.p1]                                                                   ^\n[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:63:63: note: in expansion of macro 'HAS_STRICT_MPFR_CONVERSION'\n[gmpy2-2.1.0a4.p1]      #define IS_REAL_ONLY(x) (MPFR_Check(x) || PyFloat_Check(x) || HAS_STRICT_MPFR_CONVERSION(x))\n[gmpy2-2.1.0a4.p1]                                                                    ^\n[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:64:39: note: in expansion of macro 'IS_REAL_ONLY'\n[gmpy2-2.1.0a4.p1]      #define IS_REAL(x) (IS_RATIONAL(x) || IS_REAL_ONLY(x))\n[gmpy2-2.1.0a4.p1]                                            ^\n[gmpy2-2.1.0a4.p1]     src/gmpy2_cache.c:191:9: note: in expansion of macro 'IS_REAL'\n[gmpy2-2.1.0a4.p1]          if (IS_REAL(n)) {\n[gmpy2-2.1.0a4.p1]              ^\n```",
    "created_at": "2019-03-08T18:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434726",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>
You create a lot of warnings with the macros. This should be fixed.

```
gmpy2-2.1.0a4.p1]     src/gmpy2_cache.c: In function 'GMPy_MPZ_NewInit':
[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:44:60: warning: suggest parentheses around '&&' within '||' [-Wparentheses]
[gmpy2-2.1.0a4.p1]      #define HAS_STRICT_MPZ_CONVERSION(x) HAS_MPZ_CONVERSION(x) && \
[gmpy2-2.1.0a4.p1]                                                                 ^
[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:52:25: note: in expansion of macro 'HAS_STRICT_MPZ_CONVERSION'
[gmpy2-2.1.0a4.p1]                              HAS_STRICT_MPZ_CONVERSION(x))
[gmpy2-2.1.0a4.p1]                              ^
[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:61:25: note: in expansion of macro 'IS_INTEGER'
[gmpy2-2.1.0a4.p1]      #define IS_RATIONAL(x) (IS_INTEGER(x) || IS_RATIONAL_ONLY(x))
[gmpy2-2.1.0a4.p1]                              ^
[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:64:21: note: in expansion of macro 'IS_RATIONAL'
[gmpy2-2.1.0a4.p1]      #define IS_REAL(x) (IS_RATIONAL(x) || IS_REAL_ONLY(x))
[gmpy2-2.1.0a4.p1]                          ^
[gmpy2-2.1.0a4.p1]     src/gmpy2_cache.c:191:9: note: in expansion of macro 'IS_REAL'
[gmpy2-2.1.0a4.p1]          if (IS_REAL(n)) {
[gmpy2-2.1.0a4.p1]              ^
[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:46:62: warning: suggest parentheses around '&&' within '||' [-Wparentheses]
[gmpy2-2.1.0a4.p1]      #define HAS_STRICT_MPFR_CONVERSION(x) HAS_MPFR_CONVERSION(x) && \
[gmpy2-2.1.0a4.p1]                                                                   ^
[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:63:63: note: in expansion of macro 'HAS_STRICT_MPFR_CONVERSION'
[gmpy2-2.1.0a4.p1]      #define IS_REAL_ONLY(x) (MPFR_Check(x) || PyFloat_Check(x) || HAS_STRICT_MPFR_CONVERSION(x))
[gmpy2-2.1.0a4.p1]                                                                    ^
[gmpy2-2.1.0a4.p1]     src/gmpy2_convert.h:64:39: note: in expansion of macro 'IS_REAL_ONLY'
[gmpy2-2.1.0a4.p1]      #define IS_REAL(x) (IS_RATIONAL(x) || IS_REAL_ONLY(x))
[gmpy2-2.1.0a4.p1]                                            ^
[gmpy2-2.1.0a4.p1]     src/gmpy2_cache.c:191:9: note: in expansion of macro 'IS_REAL'
[gmpy2-2.1.0a4.p1]          if (IS_REAL(n)) {
[gmpy2-2.1.0a4.p1]              ^
```



---

archive/issue_comments_434727.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2019-03-08T18:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434727",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_434728.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b60be6d6e89e491cf5e9edc8bf30964b75921643\">b60be6d</a></td><td><code>Trac #23052: Fix thousands lines of warnings.</code></td></tr></table>\n",
    "created_at": "2019-03-11T08:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b60be6d6e89e491cf5e9edc8bf30964b75921643">b60be6d</a></td><td><code>Trac #23052: Fix thousands lines of warnings.</code></td></tr></table>




---

archive/issue_comments_434729.json:
```json
{
    "body": "**Changing commit** from \"[edfe875c099ab48145b976de2dcc2d70fff0f1b5](https://github.com/sagemath/sagetrac-mirror/commit/edfe875c099ab48145b976de2dcc2d70fff0f1b5)\" to \"[b60be6d6e89e491cf5e9edc8bf30964b75921643](https://github.com/sagemath/sagetrac-mirror/commit/b60be6d6e89e491cf5e9edc8bf30964b75921643)\".",
    "created_at": "2019-03-11T08:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434729",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[edfe875c099ab48145b976de2dcc2d70fff0f1b5](https://github.com/sagemath/sagetrac-mirror/commit/edfe875c099ab48145b976de2dcc2d70fff0f1b5)" to "[b60be6d6e89e491cf5e9edc8bf30964b75921643](https://github.com/sagemath/sagetrac-mirror/commit/b60be6d6e89e491cf5e9edc8bf30964b75921643)".



---

archive/issue_comments_434730.json:
```json
{
    "body": "<a id='comment:23'></a>\nWarnings fixed.",
    "created_at": "2019-03-11T08:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434730",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:23'></a>
Warnings fixed.



---

archive/issue_comments_434731.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2019-03-11T08:35:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434731",
    "user": "https://github.com/vinklein"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_434732.json:
```json
{
    "body": "<a id='comment:24'></a>\nsome failures...\n\n```\nDoctesting 3797 files using 14 threads.\nsage -t --long src/sage/arith/misc.py\n**********************************************************************\nFile \"src/sage/arith/misc.py\", line 3120, in sage.arith.misc.crt\nFailed example:\n    crt(mpz(2), mpz(3), mpz(7), mpz(11))\nExpected:\n    58\nGot:\n    mpz(58)\n**********************************************************************\nFile \"src/sage/arith/misc.py\", line 3122, in sage.arith.misc.crt\nFailed example:\n    crt(mpz(2), 3, mpz(7), numpy.int8(11))\nExpected:\n    58\nGot:\n    mpz(58)\n**********************************************************************\n1 item had failures:\n   2 of  37 in sage.arith.misc.crt\n    [1056 tests, 2 failures, 30.02 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/arith/misc.py  # 2 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2019-03-11T15:18:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434732",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>
some failures...

```
Doctesting 3797 files using 14 threads.
sage -t --long src/sage/arith/misc.py
**********************************************************************
File "src/sage/arith/misc.py", line 3120, in sage.arith.misc.crt
Failed example:
    crt(mpz(2), mpz(3), mpz(7), mpz(11))
Expected:
    58
Got:
    mpz(58)
**********************************************************************
File "src/sage/arith/misc.py", line 3122, in sage.arith.misc.crt
Failed example:
    crt(mpz(2), 3, mpz(7), numpy.int8(11))
Expected:
    58
Got:
    mpz(58)
**********************************************************************
1 item had failures:
   2 of  37 in sage.arith.misc.crt
    [1056 tests, 2 failures, 30.02 s]
----------------------------------------------------------------------
sage -t --long src/sage/arith/misc.py  # 2 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_434733.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2019-03-11T15:18:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434733",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_434734.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dff83b8730264b6d41edb177dfc5b47b5ea1be4\">5dff83b</a></td><td><code>Trac #23052: arith.misc.crt ensure this function</code></td></tr></table>\n",
    "created_at": "2019-03-11T17:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dff83b8730264b6d41edb177dfc5b47b5ea1be4">5dff83b</a></td><td><code>Trac #23052: arith.misc.crt ensure this function</code></td></tr></table>




---

archive/issue_comments_434735.json:
```json
{
    "body": "**Changing commit** from \"[b60be6d6e89e491cf5e9edc8bf30964b75921643](https://github.com/sagemath/sagetrac-mirror/commit/b60be6d6e89e491cf5e9edc8bf30964b75921643)\" to \"[5dff83b8730264b6d41edb177dfc5b47b5ea1be4](https://github.com/sagemath/sagetrac-mirror/commit/5dff83b8730264b6d41edb177dfc5b47b5ea1be4)\".",
    "created_at": "2019-03-11T17:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434735",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b60be6d6e89e491cf5e9edc8bf30964b75921643](https://github.com/sagemath/sagetrac-mirror/commit/b60be6d6e89e491cf5e9edc8bf30964b75921643)" to "[5dff83b8730264b6d41edb177dfc5b47b5ea1be4](https://github.com/sagemath/sagetrac-mirror/commit/5dff83b8730264b6d41edb177dfc5b47b5ea1be4)".



---

archive/issue_comments_434736.json:
```json
{
    "body": "<a id='comment:26'></a>\nfunction `sage.arith.misc.crt` fixed",
    "created_at": "2019-03-11T17:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434736",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:26'></a>
function `sage.arith.misc.crt` fixed



---

archive/issue_comments_434737.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2019-03-11T17:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434737",
    "user": "https://github.com/vinklein"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_434738.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe patch that you called `PR217.patch` comes from two pull requests ([#217](https://github.com/aleaxit/gmpy/pull/217) and [#218](https://github.com/aleaxit/gmpy/pull/218)). You would better change the name of the patch and mention very explicitely in the header of the patch the urls of the actual pull requests.",
    "created_at": "2019-03-11T19:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434738",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>
The patch that you called `PR217.patch` comes from two pull requests ([#217](https://github.com/aleaxit/gmpy/pull/217) and [#218](https://github.com/aleaxit/gmpy/pull/218)). You would better change the name of the patch and mention very explicitely in the header of the patch the urls of the actual pull requests.



---

archive/issue_comments_434739.json:
```json
{
    "body": "**Changing commit** from \"[5dff83b8730264b6d41edb177dfc5b47b5ea1be4](https://github.com/sagemath/sagetrac-mirror/commit/5dff83b8730264b6d41edb177dfc5b47b5ea1be4)\" to \"[b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c](https://github.com/sagemath/sagetrac-mirror/commit/b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c)\".",
    "created_at": "2019-03-12T07:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434739",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5dff83b8730264b6d41edb177dfc5b47b5ea1be4](https://github.com/sagemath/sagetrac-mirror/commit/5dff83b8730264b6d41edb177dfc5b47b5ea1be4)" to "[b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c](https://github.com/sagemath/sagetrac-mirror/commit/b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c)".



---

archive/issue_comments_434740.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c\">b7fbb9a</a></td><td><code>Trac #23052: Rename patch and add links to the...</code></td></tr></table>\n",
    "created_at": "2019-03-12T07:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434740",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c">b7fbb9a</a></td><td><code>Trac #23052: Rename patch and add links to the...</code></td></tr></table>




---

archive/issue_comments_434741.json:
```json
{
    "body": "<a id='comment:29'></a>\nPatch renamed and links added.",
    "created_at": "2019-03-12T07:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434741",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:29'></a>
Patch renamed and links added.



---

archive/issue_comments_434742.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2019-03-12T08:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434742",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_comments_434743.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-03-12T08:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434743",
    "user": "https://github.com/videlec"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_067864.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-14T18:13:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23052#event-67864"
}
```



---

archive/issue_comments_434744.json:
```json
{
    "body": "**Changing branch** from \"[u/vklein/23052](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/23052)\" to \"[b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c](https://github.com/sagemath/sagetrac-mirror/commit/b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c)\".",
    "created_at": "2019-03-14T18:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434744",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vklein/23052](https://github.com/sagemath/sagetrac-mirror/tree/u/vklein/23052)" to "[b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c](https://github.com/sagemath/sagetrac-mirror/commit/b7fbb9a4dac5d6882f6b83a57447dd79ecafb84c)".



---

archive/issue_comments_434745.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2019-03-14T18:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23052#issuecomment-434745",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
