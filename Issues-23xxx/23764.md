# Issue 23764: Some "optional - dot2tex" doctests do not depend on dot2tex

archive/issues_023764.json:
```json
{
    "body": "11 of the 28 doctests which are marked `# optional - dot2tex` or `# optional - dot2tex graphviz` pass even when dot2tex and graphviz are not installed.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24001\n\n",
    "closed_at": "2018-03-06T23:23:54Z",
    "created_at": "2017-10-09T18:42:26Z",
    "labels": [
        "component: doctest framework",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Some \"optional - dot2tex\" doctests do not depend on dot2tex",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23764",
    "user": "https://github.com/jdemeyer"
}
```
11 of the 28 doctests which are marked `# optional - dot2tex` or `# optional - dot2tex graphviz` pass even when dot2tex and graphviz are not installed.

Issue created by migration from https://trac.sagemath.org/ticket/24001





---

archive/issue_comments_332580.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-09T19:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332580",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_332581.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-10-09T19:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332581",
    "user": "https://github.com/jdemeyer"
}
```

New commits:



---

archive/issue_comments_332582.json:
```json
{
    "body": "These tests passes because of changes in the digraph code (at least, I don't remember `view(Digraph([This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)))` working before 6.0) more by accident than intent:\n\n```diff\ndiff --git a/src/sage/categories/crystals.py b/src/sage/categories/crystals.py\nindex eb6c2f8..897582e 100644\n--- a/src/sage/categories/crystals.py\n+++ b/src/sage/categories/crystals.py\n@@ -945,14 +945,14 @@ class Crystals(Category_singleton):\n             EXAMPLES::\n \n                 sage: T = crystals.Tableaux(['A',2],shape=[1])\n-                sage: T._latex_()  # optional - dot2tex graphviz\n+                sage: T._latex_()\n                 '...tikzpicture...'\n                 sage: view(T) # optional - dot2tex graphviz, not tested (opens external window)\n \n             One can for example also color the edges using the following options::\n \n                 sage: T = crystals.Tableaux(['A',2],shape=[1])\n-                sage: T._latex_(color_by_label = {0:\"black\", 1:\"red\", 2:\"blue\"})   #optional - dot2tex graphviz\n+                sage: T._latex_(color_by_label={0:\"black\", 1:\"red\", 2:\"blue\"})\n                 '...tikzpicture...'\n             \"\"\"\n             G = self.digraph()\n```\nHowever, it should work both with and without `dot2tex`, so I think it is okay to not change it.\n\nAll of the other changes look good (some of those are part of my first contribution to Sage `:)`) that may not have necessarily passed prior.",
    "created_at": "2017-10-10T15:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332582",
    "user": "https://github.com/tscrim"
}
```

These tests passes because of changes in the digraph code (at least, I don't remember `view(Digraph([This is the Trac macro *1,2* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#1,2-macro)))` working before 6.0) more by accident than intent:

```diff
diff --git a/src/sage/categories/crystals.py b/src/sage/categories/crystals.py
index eb6c2f8..897582e 100644
--- a/src/sage/categories/crystals.py
+++ b/src/sage/categories/crystals.py
@@ -945,14 +945,14 @@ class Crystals(Category_singleton):
             EXAMPLES::
 
                 sage: T = crystals.Tableaux(['A',2],shape=[1])
-                sage: T._latex_()  # optional - dot2tex graphviz
+                sage: T._latex_()
                 '...tikzpicture...'
                 sage: view(T) # optional - dot2tex graphviz, not tested (opens external window)
 
             One can for example also color the edges using the following options::
 
                 sage: T = crystals.Tableaux(['A',2],shape=[1])
-                sage: T._latex_(color_by_label = {0:"black", 1:"red", 2:"blue"})   #optional - dot2tex graphviz
+                sage: T._latex_(color_by_label={0:"black", 1:"red", 2:"blue"})
                 '...tikzpicture...'
             """
             G = self.digraph()
```
However, it should work both with and without `dot2tex`, so I think it is okay to not change it.

All of the other changes look good (some of those are part of my first contribution to Sage `:)`) that may not have necessarily passed prior.



---

archive/issue_comments_332583.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-10T15:49:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332583",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_332584.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-10-22T16:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332584",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_332585.json:
```json
{
    "body": "```\nFile \"src/sage/categories/crystals.py\", line 918, in sage.categories.crystals.Crystals.ParentMethods.latex_file\nFailed example:\n    C.latex_file('/tmp/test.tex')\nExpected nothing\nGot:\n    <BLANKLINE>\n    Warning: `tikz.sty` is not part of this computer's TeX installation.\n    This package is required to render graphs in LaTeX.\n    Visit '...'.\n    <BLANKLINE>\n    <BLANKLINE>\n    Warning: `tkz-graph.sty` is not part of this computer's TeX installation.\n    This package is required to render graphs in LaTeX.\n    Visit 'http://altermundus.com/pages/tkz/'.\n    <BLANKLINE>\n    <BLANKLINE>\n    Warning: `tkz-berge.sty` is not part of this computer's TeX installation.\n    This package is required to render graphs in LaTeX.\n    Visit 'http://altermundus.com/pages/tkz/'.\n    <BLANKLINE>\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.categories.crystals.Crystals.ParentMethods.latex_file\n    [488 tests, 1 failure, 0.95 s]\n----------------------------------------------------------------------\n```",
    "created_at": "2017-10-22T16:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332585",
    "user": "https://github.com/vbraun"
}
```

```
File "src/sage/categories/crystals.py", line 918, in sage.categories.crystals.Crystals.ParentMethods.latex_file
Failed example:
    C.latex_file('/tmp/test.tex')
Expected nothing
Got:
    <BLANKLINE>
    Warning: `tikz.sty` is not part of this computer's TeX installation.
    This package is required to render graphs in LaTeX.
    Visit '...'.
    <BLANKLINE>
    <BLANKLINE>
    Warning: `tkz-graph.sty` is not part of this computer's TeX installation.
    This package is required to render graphs in LaTeX.
    Visit 'http://altermundus.com/pages/tkz/'.
    <BLANKLINE>
    <BLANKLINE>
    Warning: `tkz-berge.sty` is not part of this computer's TeX installation.
    This package is required to render graphs in LaTeX.
    Visit 'http://altermundus.com/pages/tkz/'.
    <BLANKLINE>
**********************************************************************
1 item had failures:
   1 of   3 in sage.categories.crystals.Crystals.ParentMethods.latex_file
    [488 tests, 1 failure, 0.95 s]
----------------------------------------------------------------------
```



---

archive/issue_comments_332586.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-26T11:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332586",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_332587.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-02-26T11:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332587",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_332588.json:
```json
{
    "body": "I'm not completely sure that failure is due to `dot2tex`, but if the bots come back green, then positive review.",
    "created_at": "2018-02-26T11:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332588",
    "user": "https://github.com/tscrim"
}
```

I'm not completely sure that failure is due to `dot2tex`, but if the bots come back green, then positive review.



---

archive/issue_comments_332589.json:
```json
{
    "body": "Hmm. We rather a need a way to silent these warnings, maybe. Because there are some more..",
    "created_at": "2018-02-26T15:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332589",
    "user": "https://github.com/fchapoton"
}
```

Hmm. We rather a need a way to silent these warnings, maybe. Because there are some more..



---

archive/issue_comments_332590.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-26T15:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332590",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_332591.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> I'm not completely sure that failure is due to `dot2tex`\n\n\nObviously, failures related to missing latex packages are *not* related to `dot2tex`.",
    "created_at": "2018-02-26T15:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332591",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:8 tscrim]:
> I'm not completely sure that failure is due to `dot2tex`


Obviously, failures related to missing latex packages are *not* related to `dot2tex`.



---

archive/issue_comments_332592.json:
```json
{
    "body": "Travis, I'll revert your last commit.",
    "created_at": "2018-02-26T15:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332592",
    "user": "https://github.com/jdemeyer"
}
```

Travis, I'll revert your last commit.



---

archive/issue_comments_332593.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-26T15:53:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332593",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_332594.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-26T15:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332594",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_332595.json:
```json
{
    "body": "one failing doctest, see bot",
    "created_at": "2018-02-26T19:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332595",
    "user": "https://github.com/fchapoton"
}
```

one failing doctest, see bot



---

archive/issue_comments_332596.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-26T19:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332596",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_332597.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-02-27T09:14:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332597",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_332598.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-27T09:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332598",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_061027.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-27T09:14:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23764#event-61027"
}
```



---

archive/issue_comments_332599.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-27T12:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332599",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_332600.json:
```json
{
    "body": "ok",
    "created_at": "2018-02-27T12:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332600",
    "user": "https://github.com/fchapoton"
}
```

ok



---

archive/issue_comments_332601.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-03-06T23:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23764#issuecomment-332601",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_061028.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-06T23:23:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23764",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23764#event-61028"
}
```
