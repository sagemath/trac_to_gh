# Issue 23533: fail to build cryptominisat with some gcc versions

archive/issues_023296.json:
```json
{
    "body": "The compiler complains at\n\n```\n../src/scalmc.cpp: In member function 'bool CUSP::ScalApproxMC(SATCount&)':\n../src/scalmc.cpp:554:40: error: call of overloaded 'abs(uint64_t)' is ambiguous\n                 if (abs(hashCount-mPrev) <= 2 && mPrev != 0) {\n```\nSee the logfile [attachment:cryptominisat-5.0.1.log]. Might be due to the recent gcc 7.1.1 that I am using\n\nUpstream github issue at\n\n    https://github.com/msoos/cryptominisat/issues/403\n\nFixed in the new release, see #25480\n\nDepends on #25480\n\n**CC:**  @saraedum @slel tmonteil\n\n**Keywords:** cryptominisat\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Stopgaps:** #23969\n\nIssue created by migration from https://trac.sagemath.org/ticket/23533\n\n",
    "closed_at": "2018-06-11T12:34:08Z",
    "created_at": "2017-07-24T09:02:18Z",
    "labels": [
        "component: packages: optional",
        "critical",
        "bug",
        "duplicate"
    ],
    "title": "fail to build cryptominisat with some gcc versions",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/23533",
    "user": "https://github.com/videlec"
}
```
The compiler complains at

```
../src/scalmc.cpp: In member function 'bool CUSP::ScalApproxMC(SATCount&)':
../src/scalmc.cpp:554:40: error: call of overloaded 'abs(uint64_t)' is ambiguous
                 if (abs(hashCount-mPrev) <= 2 && mPrev != 0) {
```
See the logfile [attachment:cryptominisat-5.0.1.log]. Might be due to the recent gcc 7.1.1 that I am using

Upstream github issue at

    https://github.com/msoos/cryptominisat/issues/403

Fixed in the new release, see #25480

Depends on #25480

**CC:**  @saraedum @slel tmonteil

**Keywords:** cryptominisat

**Upstream:** Fixed upstream, in a later stable release.

**Stopgaps:** #23969

Issue created by migration from https://trac.sagemath.org/ticket/23533





---

archive/attachments_020952.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "cryptominisat-5.0.1.log",
    "asset_url": "tarball://root/attachments/ticket23533/cryptominisat-5.0.1.log",
    "created_at": "2017-07-24T09:02:43Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket23533/cryptominisat-5.0.1.log",
    "user": "https://github.com/videlec"
}
```



---

archive/issue_comments_356424.json:
```json
{
    "body": "Attachment [cryptominisat-5.0.1.log](https://github.com/sagemath/sage/files/ticket23533/cryptominisat-5.0.1.log) by @videlec created at 2017-07-24 09:02:43",
    "created_at": "2017-07-24T09:02:43Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356424",
    "user": "https://github.com/videlec"
}
```

Attachment [cryptominisat-5.0.1.log](https://github.com/sagemath/sage/files/ticket23533/cryptominisat-5.0.1.log) by @videlec created at 2017-07-24 09:02:43



---

archive/issue_comments_356425.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,3 +6,7 @@\n                  if (abs(hashCount-mPrev) <= 2 && mPrev != 0) {\n ```\n See the logfile [attachment:cryptominisat-5.0.1.log]. Might be due to the recent gcc 7.1.1 that I am using\n+\n+Upstream github issue at\n+\n+    https://github.com/msoos/cryptominisat/issues/403\n``````\n",
    "created_at": "2017-07-24T09:08:16Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356425",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,3 +6,7 @@
                  if (abs(hashCount-mPrev) <= 2 && mPrev != 0) {
 ```
 See the logfile [attachment:cryptominisat-5.0.1.log]. Might be due to the recent gcc 7.1.1 that I am using
+
+Upstream github issue at
+
+    https://github.com/msoos/cryptominisat/issues/403
``````




---

archive/issue_comments_356426.json:
```json
{
    "body": "**Upstream:** Reported upstream. No feedback yet.",
    "created_at": "2017-07-24T09:08:16Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356426",
    "user": "https://github.com/videlec"
}
```

**Upstream:** Reported upstream. No feedback yet.



---

archive/issue_comments_356427.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2017-07-25T15:46:48Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356427",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "Fixed upstream, but not in a stable release.".



---

archive/issue_comments_356428.json:
```json
{
    "body": "<a id='comment:3'></a>\ncf. https://github.com/msoos/cryptominisat/issues/422",
    "created_at": "2017-08-25T13:59:06Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356428",
    "user": "https://github.com/malb"
}
```

<a id='comment:3'></a>
cf. https://github.com/msoos/cryptominisat/issues/422



---

archive/issue_events_209365.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-03-05T16:46:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209365"
}
```



---

archive/issue_comments_356429.json:
```json
{
    "body": "<a id='comment:5'></a>\nDo you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.",
    "created_at": "2018-03-05T20:24:20Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356429",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.



---

archive/issue_comments_356430.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [fbissey](#comment%3A5):\n> Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.\n\n\n5.0.2 does build on my computer. However, your patch `osx_install_nameQA.patch` does not apply anymore. Should it simply be removed? If not, I won't be able to adapt it.",
    "created_at": "2018-03-05T21:37:58Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356430",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
Replying to [fbissey](#comment%3A5):
> Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.


5.0.2 does build on my computer. However, your patch `osx_install_nameQA.patch` does not apply anymore. Should it simply be removed? If not, I won't be able to adapt it.



---

archive/issue_comments_356431.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [vdelecroix](#comment%3A6):\n> Replying to [fbissey](#comment%3A5):\n> > Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.\n\n> \n> 5.0.2 does build on my computer. However, your patch `osx_install_nameQA.patch` does not apply anymore. Should it simply be removed? If not, I won't be able to adapt it.\n\n\nI opened a discussion about a release in [issue 463](https://github.com/msoos/cryptominisat/issues/463).",
    "created_at": "2018-03-05T21:41:44Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356431",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>
Replying to [vdelecroix](#comment%3A6):
> Replying to [fbissey](#comment%3A5):
> > Do you want to upgrade to 5.0.2 even so it is marked as a pre-release? It should contain the fix.

> 
> 5.0.2 does build on my computer. However, your patch `osx_install_nameQA.patch` does not apply anymore. Should it simply be removed? If not, I won't be able to adapt it.


I opened a discussion about a release in [issue 463](https://github.com/msoos/cryptominisat/issues/463).



---

archive/issue_comments_356432.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe patch doesn't apply because there is too much fuzz but the issue hasn't been fixed. I must say I never followed with upstream to get them to fix those particular issues better than what they do now.",
    "created_at": "2018-03-06T01:26:30Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356432",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>
The patch doesn't apply because there is too much fuzz but the issue hasn't been fixed. I must say I never followed with upstream to get them to fix those particular issues better than what they do now.



---

archive/issue_comments_356433.json:
```json
{
    "body": "<a id='comment:9'></a>\nI inspected the stuff upstream did a bit more. I cannot say I think it is very good but it is worth trying without doing anything first. There is a lot more windows specific code now. I feel like `src/CMakeLists.txt` could use a trim but I may be arrogant there.",
    "created_at": "2018-03-06T01:37:36Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356433",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'></a>
I inspected the stuff upstream did a bit more. I cannot say I think it is very good but it is worth trying without doing anything first. There is a lot more windows specific code now. I feel like `src/CMakeLists.txt` could use a trim but I may be arrogant there.



---

archive/issue_comments_356434.json:
```json
{
    "body": "<a id='comment:10'></a>\nI have no problems building 5.0.1 with clang-4.",
    "created_at": "2018-03-06T13:56:25Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356434",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>
I have no problems building 5.0.1 with clang-4.



---

archive/issue_comments_356435.json:
```json
{
    "body": "<a id='comment:11'></a>\n5.0.1 also builds fine with clang-5.0.1.",
    "created_at": "2018-03-08T06:22:05Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356435",
    "user": "https://github.com/rwst"
}
```

<a id='comment:11'></a>
5.0.1 also builds fine with clang-5.0.1.



---

archive/issue_events_209366.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2018-03-08T06:23:04Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "rename": {
        "from": "fail to build cryptominisat",
        "to": "fail to build cryptominisat with some gcc versions"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209366"
}
```



---

archive/issue_events_209367.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-25T00:38:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209367"
}
```



---

archive/issue_events_209368.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-25T00:38:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209368"
}
```



---

archive/issue_comments_356436.json:
```json
{
    "body": "**Stopgaps:** #23969",
    "created_at": "2018-04-11T09:53:34Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356436",
    "user": "https://github.com/jdemeyer"
}
```

**Stopgaps:** #23969



---

archive/issue_comments_356437.json:
```json
{
    "body": "<a id='comment:15'></a>\nFixed by #25480?",
    "created_at": "2018-06-01T19:19:13Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356437",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Fixed by #25480?



---

archive/issue_comments_356438.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,3 +10,5 @@\n Upstream github issue at\n \n     https://github.com/msoos/cryptominisat/issues/403\n+\n+Fixed in the new release, see #25480\n``````\n",
    "created_at": "2018-06-01T21:48:11Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356438",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,3 +10,5 @@
 Upstream github issue at
 
     https://github.com/msoos/cryptominisat/issues/403
+
+Fixed in the new release, see #25480
``````




---

archive/issue_events_209369.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-06-01T21:48:11Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209369"
}
```



---

archive/issue_events_209370.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-06-01T21:48:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209370"
}
```



---

archive/issue_comments_356439.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [jdemeyer](#comment%3A15):\n> Fixed by #25480?\n\n\nyes",
    "created_at": "2018-06-01T21:48:11Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356439",
    "user": "https://github.com/videlec"
}
```

<a id='comment:16'></a>
Replying to [jdemeyer](#comment%3A15):
> Fixed by #25480?


yes



---

archive/issue_comments_356440.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, but not in a stable release.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2018-06-11T12:32:16Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356440",
    "user": "https://github.com/slel"
}
```

**Changing upstream** from "Fixed upstream, but not in a stable release." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_356441.json:
```json
{
    "body": "<a id='comment:17'></a>\nThe upgrade to a stable version of Cryptominisat containing the fix is at #25480.\n\nOnce #25480 is merged and closed, this can be closed too.",
    "created_at": "2018-06-11T12:32:16Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356441",
    "user": "https://github.com/slel"
}
```

<a id='comment:17'></a>
The upgrade to a stable version of Cryptominisat containing the fix is at #25480.

Once #25480 is merged and closed, this can be closed too.



---

archive/issue_comments_356442.json:
```json
{
    "body": "**Dependencies:** #25480",
    "created_at": "2018-06-11T12:32:16Z",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23533#issuecomment-356442",
    "user": "https://github.com/slel"
}
```

**Dependencies:** #25480



---

archive/issue_events_209371.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-11T12:34:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209371"
}
```



---

archive/issue_events_209372.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-11T12:34:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209372"
}
```



---

archive/issue_events_209373.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-11T12:34:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23533",
    "label": "duplicate",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23533#event-209373"
}
```
