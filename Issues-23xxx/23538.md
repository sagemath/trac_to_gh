# Issue 23538: Support iterators in matroid methods

archive/issues_023301.json:
```json
{
    "body": "\n```\nsage: M = matroids.Uniform(3,5)\nsage: M.rank(list(x for x in range(5)))\n3\nsage: M.rank(x for x in range(5))  # expected 3 here\n0\n```\n\nTo fix this, I propose to replace all boilerplate of the form\n\n```\n        if X is None:\n            X = self.groundset()\n        else:\n            if not self.groundset().issuperset(X):\n                raise ValueError(\"input is not a subset of the \ngroundset.\")\n        X = frozenset(X)\n```\nby a one-liner\n\n```\n        X = self.__subset_all(X)\n```\nor\n\n```\n        X = self.__subset(X)\n```\nwhere `X = None` means `self.groundset()` for the first variant.\n\nCC:  stefan yomcat @tscrim\n\nBranch/Commit: 53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8\n\nReviewer: Stefan van Zwam\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23538\n\n",
    "closed_at": "2017-08-04T18:21:29Z",
    "created_at": "2017-07-25T10:22:36Z",
    "labels": [
        "component: matroid theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Support iterators in matroid methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23538",
    "user": "https://github.com/jdemeyer"
}
```

```
sage: M = matroids.Uniform(3,5)
sage: M.rank(list(x for x in range(5)))
3
sage: M.rank(x for x in range(5))  # expected 3 here
0
```

To fix this, I propose to replace all boilerplate of the form

```
        if X is None:
            X = self.groundset()
        else:
            if not self.groundset().issuperset(X):
                raise ValueError("input is not a subset of the 
groundset.")
        X = frozenset(X)
```
by a one-liner

```
        X = self.__subset_all(X)
```
or

```
        X = self.__subset(X)
```
where `X = None` means `self.groundset()` for the first variant.

CC:  stefan yomcat @tscrim

Branch/Commit: 53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8

Reviewer: Stefan van Zwam

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23538





---

archive/issue_comments_437343.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,24 @@\n sage: M.rank(x for x in range(5))  # expected 3 here\n 0\n ```\n+\n+To fix this, I propose to replace all boilerplate of the form\n+\n+```\n+        if X is None:\n+            X = self.groundset()\n+        else:\n+            if not self.groundset().issuperset(X):\n+                raise ValueError(\"input is not a subset of the groundset.\")\n+```\n+by a one-liner\n+\n+```\n+        X = self._groundsubset_none(X)\n+```\n+or\n+\n+```\n+        X = self._groundsubset(X)\n+```\n+where `X = None` means `self.groundset()` for the first variant.\n``````\n",
    "created_at": "2017-07-25T12:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437343",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,24 @@
 sage: M.rank(x for x in range(5))  # expected 3 here
 0
 ```
+
+To fix this, I propose to replace all boilerplate of the form
+
+```
+        if X is None:
+            X = self.groundset()
+        else:
+            if not self.groundset().issuperset(X):
+                raise ValueError("input is not a subset of the groundset.")
+```
+by a one-liner
+
+```
+        X = self._groundsubset_none(X)
+```
+or
+
+```
+        X = self._groundsubset(X)
+```
+where `X = None` means `self.groundset()` for the first variant.
``````




---

archive/issue_events_076421.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "rename": {
        "from": "Support iterators in Matroid.rank()",
        "to": "Support iterators in matroid methods"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23538#event-76421"
}
```



---

archive/issue_comments_437344.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,11 +19,11 @@\n by a one-liner\n \n ```\n-        X = self._groundsubset_none(X)\n+        X = self._subset_none(X)\n ```\n or\n \n ```\n-        X = self._groundsubset(X)\n+        X = self._subset(X)\n ```\n where `X = None` means `self.groundset()` for the first variant.\n``````\n",
    "created_at": "2017-07-25T12:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437344",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,11 +19,11 @@
 by a one-liner
 
 ```
-        X = self._groundsubset_none(X)
+        X = self._subset_none(X)
 ```
 or
 
 ```
-        X = self._groundsubset(X)
+        X = self._subset(X)
 ```
 where `X = None` means `self.groundset()` for the first variant.
``````




---

archive/issue_comments_437345.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,7 +14,9 @@\n             X = self.groundset()\n         else:\n             if not self.groundset().issuperset(X):\n-                raise ValueError(\"input is not a subset of the groundset.\")\n+                raise ValueError(\"input is not a subset of the \n+groundset.\")\n+        X = frozenset(X)\n ```\n by a one-liner\n \n``````\n",
    "created_at": "2017-07-25T12:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437345",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,7 +14,9 @@
             X = self.groundset()
         else:
             if not self.groundset().issuperset(X):
-                raise ValueError("input is not a subset of the groundset.")
+                raise ValueError("input is not a subset of the 
+groundset.")
+        X = frozenset(X)
 ```
 by a one-liner
 
``````




---

archive/issue_comments_437346.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,7 +21,7 @@\n by a one-liner\n \n ```\n-        X = self._subset_none(X)\n+        X = self._subset_all(X)\n ```\n or\n \n``````\n",
    "created_at": "2017-07-25T12:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437346",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,7 +21,7 @@
 by a one-liner
 
 ```
-        X = self._subset_none(X)
+        X = self._subset_all(X)
 ```
 or
 
``````




---

archive/issue_comments_437347.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,11 +21,11 @@\n by a one-liner\n \n ```\n-        X = self._subset_all(X)\n+        X = self.__subset_all(X)\n ```\n or\n \n ```\n-        X = self._subset(X)\n+        X = self.__subset(X)\n ```\n where `X = None` means `self.groundset()` for the first variant.\n``````\n",
    "created_at": "2017-07-25T13:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437347",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,11 +21,11 @@
 by a one-liner
 
 ```
-        X = self._subset_all(X)
+        X = self.__subset_all(X)
 ```
 or
 
 ```
-        X = self._subset(X)
+        X = self.__subset(X)
 ```
 where `X = None` means `self.groundset()` for the first variant.
``````




---

archive/issue_comments_437348.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/support_iterators_in_matroid_rank__\"",
    "created_at": "2017-07-25T14:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437348",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/support_iterators_in_matroid_rank__"



---

archive/issue_comments_437349.json:
```json
{
    "body": "<a id='comment:7'></a>\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[53a3b5c](https://github.com/sagemath/sagetrac-mirror/commit/53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8)|`Support iterators in matroid methods`|",
    "created_at": "2017-07-25T14:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437349",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[53a3b5c](https://github.com/sagemath/sagetrac-mirror/commit/53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8)|`Support iterators in matroid methods`|



---

archive/issue_comments_437350.json:
```json
{
    "body": "Changing commit from \"\" to \"53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8\"",
    "created_at": "2017-07-25T14:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437350",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8"



---

archive/issue_comments_437351.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-25T14:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437351",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_437352.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-02T15:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437352",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_437353.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Stefan van Zwam\"",
    "created_at": "2017-08-02T15:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437353",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing reviewer from "" to "Stefan van Zwam"



---

archive/issue_comments_437354.json:
```json
{
    "body": "<a id='comment:9'></a>\nLooks fine to me! Thanks for your efforts to clean up the matroid codebase!",
    "created_at": "2017-08-02T15:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437354",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:9'></a>
Looks fine to me! Thanks for your efforts to clean up the matroid codebase!



---

archive/issue_events_076422.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-04T18:21:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23538#event-76422"
}
```



---

archive/issue_comments_437355.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-04T18:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437355",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_437356.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/support_iterators_in_matroid_rank__\" to \"53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8\"",
    "created_at": "2017-08-04T18:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-437356",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/support_iterators_in_matroid_rank__" to "53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8"
