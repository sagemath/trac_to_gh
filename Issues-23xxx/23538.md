# Issue 23538: Support iterators in matroid methods

archive/issues_023301.json:
```json
{
    "body": "```\nsage: M = matroids.Uniform(3,5)\nsage: M.rank(list(x for x in range(5)))\n3\nsage: M.rank(x for x in range(5))  # expected 3 here\n0\n```\n\nTo fix this, I propose to replace all boilerplate of the form\n\n```\n        if X is None:\n            X = self.groundset()\n        else:\n            if not self.groundset().issuperset(X):\n                raise ValueError(\"input is not a subset of the \ngroundset.\")\n        X = frozenset(X)\n```\nby a one-liner\n\n```\n        X = self.__subset_all(X)\n```\nor\n\n```\n        X = self.__subset(X)\n```\nwhere `X = None` means `self.groundset()` for the first variant.\n\nCC:  stefan yomcat @tscrim\n\nBranch/Commit: 53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8\n\nReviewer: Stefan van Zwam\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23538\n\n",
    "closed_at": "2017-08-04T18:21:29Z",
    "created_at": "2017-07-25T10:22:36Z",
    "labels": [
        "component: matroid theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Support iterators in matroid methods",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23538",
    "user": "https://github.com/jdemeyer"
}
```
```
sage: M = matroids.Uniform(3,5)
sage: M.rank(list(x for x in range(5)))
3
sage: M.rank(x for x in range(5))  # expected 3 here
0
```

To fix this, I propose to replace all boilerplate of the form

```
        if X is None:
            X = self.groundset()
        else:
            if not self.groundset().issuperset(X):
                raise ValueError("input is not a subset of the 
groundset.")
        X = frozenset(X)
```
by a one-liner

```
        X = self.__subset_all(X)
```
or

```
        X = self.__subset(X)
```
where `X = None` means `self.groundset()` for the first variant.

CC:  stefan yomcat @tscrim

Branch/Commit: 53a3b5c88033e9ac1d7d41ec5a7a00aa0199fde8

Reviewer: Stefan van Zwam

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23538





---

archive/issue_comments_347090.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -5,6 +5,27 @@\n sage: M.rank(x for x in range(5))  # expected 3 here\n 0\n \\`\\`\\`\n+\n+To fix this, I propose to replace all boilerplate of the form\n+\n+\\`\\`\\`\n+        if X is None:\n+            X = self.groundset()\n+        else:\n+            if not self.groundset().issuperset(X):\n+                raise ValueError(\"input is not a subset of the groundset.\")\n+\\`\\`\\`\n+by a one-liner\n+\n+\\`\\`\\`\n+        X = self._groundsubset_none(X)\n+\\`\\`\\`\n+or\n+\n+\\`\\`\\`\n+        X = self._groundsubset(X)\n+\\`\\`\\`\n+where \\`X = None\\` means \\`self.groundset()\\` for the first variant.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2017-07-25T12:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347090",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -5,6 +5,27 @@
 sage: M.rank(x for x in range(5))  # expected 3 here
 0
 \`\`\`
+
+To fix this, I propose to replace all boilerplate of the form
+
+\`\`\`
+        if X is None:
+            X = self.groundset()
+        else:
+            if not self.groundset().issuperset(X):
+                raise ValueError("input is not a subset of the groundset.")
+\`\`\`
+by a one-liner
+
+\`\`\`
+        X = self._groundsubset_none(X)
+\`\`\`
+or
+
+\`\`\`
+        X = self._groundsubset(X)
+\`\`\`
+where \`X = None\` means \`self.groundset()\` for the first variant.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_347091.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,31 @@\n+\\`\\`\\`\n+sage: M = matroids.Uniform(3,5)\n+sage: M.rank(list(x for x in range(5)))\n+3\n+sage: M.rank(x for x in range(5))  # expected 3 here\n+0\n+\\`\\`\\`\n \n+To fix this, I propose to replace all boilerplate of the form\n+\n+\\`\\`\\`\n+        if X is None:\n+            X = self.groundset()\n+        else:\n+            if not self.groundset().issuperset(X):\n+                raise ValueError(\"input is not a subset of the groundset.\")\n+\\`\\`\\`\n+by a one-liner\n+\n+\\`\\`\\`\n+        X = self._subset_none(X)\n+\\`\\`\\`\n+or\n+\n+\\`\\`\\`\n+        X = self._subset(X)\n+\\`\\`\\`\n+where \\`X = None\\` means \\`self.groundset()\\` for the first variant.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2017-07-25T12:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347091",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,31 @@
+\`\`\`
+sage: M = matroids.Uniform(3,5)
+sage: M.rank(list(x for x in range(5)))
+3
+sage: M.rank(x for x in range(5))  # expected 3 here
+0
+\`\`\`
 
+To fix this, I propose to replace all boilerplate of the form
+
+\`\`\`
+        if X is None:
+            X = self.groundset()
+        else:
+            if not self.groundset().issuperset(X):
+                raise ValueError("input is not a subset of the groundset.")
+\`\`\`
+by a one-liner
+
+\`\`\`
+        X = self._subset_none(X)
+\`\`\`
+or
+
+\`\`\`
+        X = self._subset(X)
+\`\`\`
+where \`X = None\` means \`self.groundset()\` for the first variant.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_347092.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,33 @@\n+\\`\\`\\`\n+sage: M = matroids.Uniform(3,5)\n+sage: M.rank(list(x for x in range(5)))\n+3\n+sage: M.rank(x for x in range(5))  # expected 3 here\n+0\n+\\`\\`\\`\n \n+To fix this, I propose to replace all boilerplate of the form\n+\n+\\`\\`\\`\n+        if X is None:\n+            X = self.groundset()\n+        else:\n+            if not self.groundset().issuperset(X):\n+                raise ValueError(\"input is not a subset of the \n+groundset.\")\n+        X = frozenset(X)\n+\\`\\`\\`\n+by a one-liner\n+\n+\\`\\`\\`\n+        X = self._subset_none(X)\n+\\`\\`\\`\n+or\n+\n+\\`\\`\\`\n+        X = self._subset(X)\n+\\`\\`\\`\n+where \\`X = None\\` means \\`self.groundset()\\` for the first variant.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2017-07-25T12:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347092",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,33 @@
+\`\`\`
+sage: M = matroids.Uniform(3,5)
+sage: M.rank(list(x for x in range(5)))
+3
+sage: M.rank(x for x in range(5))  # expected 3 here
+0
+\`\`\`
 
+To fix this, I propose to replace all boilerplate of the form
+
+\`\`\`
+        if X is None:
+            X = self.groundset()
+        else:
+            if not self.groundset().issuperset(X):
+                raise ValueError("input is not a subset of the 
+groundset.")
+        X = frozenset(X)
+\`\`\`
+by a one-liner
+
+\`\`\`
+        X = self._subset_none(X)
+\`\`\`
+or
+
+\`\`\`
+        X = self._subset(X)
+\`\`\`
+where \`X = None\` means \`self.groundset()\` for the first variant.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_347093.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,33 @@\n+\\`\\`\\`\n+sage: M = matroids.Uniform(3,5)\n+sage: M.rank(list(x for x in range(5)))\n+3\n+sage: M.rank(x for x in range(5))  # expected 3 here\n+0\n+\\`\\`\\`\n \n+To fix this, I propose to replace all boilerplate of the form\n+\n+\\`\\`\\`\n+        if X is None:\n+            X = self.groundset()\n+        else:\n+            if not self.groundset().issuperset(X):\n+                raise ValueError(\"input is not a subset of the \n+groundset.\")\n+        X = frozenset(X)\n+\\`\\`\\`\n+by a one-liner\n+\n+\\`\\`\\`\n+        X = self._subset_all(X)\n+\\`\\`\\`\n+or\n+\n+\\`\\`\\`\n+        X = self._subset(X)\n+\\`\\`\\`\n+where \\`X = None\\` means \\`self.groundset()\\` for the first variant.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2017-07-25T12:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347093",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,33 @@
+\`\`\`
+sage: M = matroids.Uniform(3,5)
+sage: M.rank(list(x for x in range(5)))
+3
+sage: M.rank(x for x in range(5))  # expected 3 here
+0
+\`\`\`
 
+To fix this, I propose to replace all boilerplate of the form
+
+\`\`\`
+        if X is None:
+            X = self.groundset()
+        else:
+            if not self.groundset().issuperset(X):
+                raise ValueError("input is not a subset of the 
+groundset.")
+        X = frozenset(X)
+\`\`\`
+by a one-liner
+
+\`\`\`
+        X = self._subset_all(X)
+\`\`\`
+or
+
+\`\`\`
+        X = self._subset(X)
+\`\`\`
+where \`X = None\` means \`self.groundset()\` for the first variant.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_347094.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,33 @@\n+\\`\\`\\`\n+sage: M = matroids.Uniform(3,5)\n+sage: M.rank(list(x for x in range(5)))\n+3\n+sage: M.rank(x for x in range(5))  # expected 3 here\n+0\n+\\`\\`\\`\n \n+To fix this, I propose to replace all boilerplate of the form\n+\n+\\`\\`\\`\n+        if X is None:\n+            X = self.groundset()\n+        else:\n+            if not self.groundset().issuperset(X):\n+                raise ValueError(\"input is not a subset of the \n+groundset.\")\n+        X = frozenset(X)\n+\\`\\`\\`\n+by a one-liner\n+\n+\\`\\`\\`\n+        X = self.__subset_all(X)\n+\\`\\`\\`\n+or\n+\n+\\`\\`\\`\n+        X = self.__subset(X)\n+\\`\\`\\`\n+where \\`X = None\\` means \\`self.groundset()\\` for the first variant.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2017-07-25T13:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347094",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,33 @@
+\`\`\`
+sage: M = matroids.Uniform(3,5)
+sage: M.rank(list(x for x in range(5)))
+3
+sage: M.rank(x for x in range(5))  # expected 3 here
+0
+\`\`\`
 
+To fix this, I propose to replace all boilerplate of the form
+
+\`\`\`
+        if X is None:
+            X = self.groundset()
+        else:
+            if not self.groundset().issuperset(X):
+                raise ValueError("input is not a subset of the 
+groundset.")
+        X = frozenset(X)
+\`\`\`
+by a one-liner
+
+\`\`\`
+        X = self.__subset_all(X)
+\`\`\`
+or
+
+\`\`\`
+        X = self.__subset(X)
+\`\`\`
+where \`X = None\` means \`self.groundset()\` for the first variant.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_347095.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2017-07-25T14:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347095",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_347096.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-25T14:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347096",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_347097.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-02T15:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347097",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_347098.json:
```json
{
    "body": "<a id='comment:9'></a>Looks fine to me! Thanks for your efforts to clean up the matroid codebase!",
    "created_at": "2017-08-02T15:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347098",
    "user": "https://trac.sagemath.org/admin/accounts/users/Stefan"
}
```

<a id='comment:9'></a>Looks fine to me! Thanks for your efforts to clean up the matroid codebase!



---

archive/issue_events_060325.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-04T18:21:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23538#event-60325"
}
```



---

archive/issue_comments_347099.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-04T18:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23538#issuecomment-347099",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
