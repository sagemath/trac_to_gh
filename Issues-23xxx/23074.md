# Issue 23074: Allow Python functions in minimize with NCG method

archive/issues_022837.json:
```json
{
    "assignees": [],
    "body": "If `algorithm=\"ncg\"` is used in the top-level `minimize` function, one should be able to work with Python functions, as with the other algorithms.\n\nCC:  @dimpase\n\nKeywords: **minimize**\n\nBranch/Commit: **[public/23074](https://github.com/sagemath/sagetrac-mirror/tree/public/23074) @ [`36d0f31`](https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Marcelo Forets, Vincent Delecroix**\n\nComponent: **numerical**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23074_\n\n",
    "created_at": "2017-05-25T09:17:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20numerical",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow Python functions in minimize with NCG method",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/23074",
    "user": "https://github.com/mforets"
}
```
If `algorithm="ncg"` is used in the top-level `minimize` function, one should be able to work with Python functions, as with the other algorithms.

CC:  @dimpase

Keywords: **minimize**

Branch/Commit: **[public/23074](https://github.com/sagemath/sagetrac-mirror/tree/public/23074) @ [`36d0f31`](https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029)**

Reviewer: **Dima Pasechnik**

Author: **Marcelo Forets, Vincent Delecroix**

Component: **numerical**

_Issue created by migration from https://trac.sagemath.org/ticket/23074_





---

archive/issue_events_323244.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T09:17:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323244"
}
```



---

archive/issue_events_323245.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T09:17:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323245"
}
```



---

archive/issue_events_323246.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T09:17:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323246"
}
```



---

archive/issue_events_323247.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T09:17:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323247"
}
```



---

archive/issue_comments_345488.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nFor instance, this use case is currently broken:\n\n```\nsage: f = lambda x : 100*(x[1]-x[0]^2)^2+(1-x[0])^2+100*(x[2]-x[1]^2)^2+(1-x[1])^2\nsage: gradient = lambda x : scipy.array([400*(x[0]**2 - x[1])*x[0] + 2*x[0] - 2, \\\n                                    -200*x[0]**2 + 400*(x[1]**2 - x[2])*x[1] + 202*x[1] - 2, \\\n                                     -200*x[1]**2 + 200*x[2]])\nsage: x0 = [.1,.3,.4]\nsage: minimize(f, x0, gradient, algorithm=\"ncg\")\nTraceback (most recent call last)\n...\nUnboundLocalError: local variable 'min' referenced before assignment\n```\n\nbut it shouldn't, since this works:\n\n```\nsage: import scipy\nsage: from scipy import optimize\nsage: optimize.fmin_ncg(f, [float(_) for _ in x0], fprime=gradient, disp=True)\nOptimization terminated successfully.\n...\narray([ 0.99999732,  0.99999463,  0.99998926])\n```\n\nMoreover, the Hessian can also be passed to ncg (but it's optional => docstring is inaccurate)\n\n```\nsage: hessian = lambda x : [[1200*x[0]^2 - 400*x[1] + 2, -400*x[0], 0], \\\n                    [-400*x[0], 1200*x[1]^2 - 400*x[2] + 202, -400*x[1]], \\\n                    [0, -400*x[1], 200]]\nsage: optimize.fmin_ncg(f, [float(_) for _ in x0], fprime=gradient, fhess=hessian, disp=True)\nOptimization terminated successfully.\n...\narray([ 1.,  1.,  1.])\n```",
    "created_at": "2017-05-25T09:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345488",
    "user": "https://github.com/mforets"
}
```

<div id="comment:1" align="right">comment:1</div>

For instance, this use case is currently broken:

```
sage: f = lambda x : 100*(x[1]-x[0]^2)^2+(1-x[0])^2+100*(x[2]-x[1]^2)^2+(1-x[1])^2
sage: gradient = lambda x : scipy.array([400*(x[0]**2 - x[1])*x[0] + 2*x[0] - 2, \
                                    -200*x[0]**2 + 400*(x[1]**2 - x[2])*x[1] + 202*x[1] - 2, \
                                     -200*x[1]**2 + 200*x[2]])
sage: x0 = [.1,.3,.4]
sage: minimize(f, x0, gradient, algorithm="ncg")
Traceback (most recent call last)
...
UnboundLocalError: local variable 'min' referenced before assignment
```

but it shouldn't, since this works:

```
sage: import scipy
sage: from scipy import optimize
sage: optimize.fmin_ncg(f, [float(_) for _ in x0], fprime=gradient, disp=True)
Optimization terminated successfully.
...
array([ 0.99999732,  0.99999463,  0.99998926])
```

Moreover, the Hessian can also be passed to ncg (but it's optional => docstring is inaccurate)

```
sage: hessian = lambda x : [[1200*x[0]^2 - 400*x[1] + 2, -400*x[0], 0], \
                    [-400*x[0], 1200*x[1]^2 - 400*x[2] + 202, -400*x[1]], \
                    [0, -400*x[1], 200]]
sage: optimize.fmin_ncg(f, [float(_) for _ in x0], fprime=gradient, fhess=hessian, disp=True)
Optimization terminated successfully.
...
array([ 1.,  1.,  1.])
```



---

archive/issue_comments_345489.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\non a separate line, [in the doc](https://docs.scipy.org/doc/scipy-0.19.0/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize) it says that \n\n> Only one of hessp or hess needs to be given.\n\nHence, in the current if clause of `algorithm==\"ncg\"` one does not need to compute & pass both `hessian` and `hessian_p`, but just one of them, i think.",
    "created_at": "2017-05-25T09:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345489",
    "user": "https://github.com/mforets"
}
```

<div id="comment:2" align="right">comment:2</div>

on a separate line, [in the doc](https://docs.scipy.org/doc/scipy-0.19.0/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize) it says that 

> Only one of hessp or hess needs to be given.

Hence, in the current if clause of `algorithm=="ncg"` one does not need to compute & pass both `hessian` and `hessian_p`, but just one of them, i think.



---

archive/issue_comments_345490.json:
```json
{
    "body": "Dependencies: **23062**",
    "created_at": "2017-05-25T09:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345490",
    "user": "https://github.com/mforets"
}
```

Dependencies: **23062**



---

archive/issue_comments_345491.json:
```json
{
    "body": "Changed dependencies from **23062** to **#23062**",
    "created_at": "2017-05-25T09:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345491",
    "user": "https://github.com/mforets"
}
```

Changed dependencies from **23062** to **#23062**



---

archive/issue_comments_345492.json:
```json
{
    "body": "Branch: **[u/mforets/23074](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/23074)**",
    "created_at": "2017-05-27T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345492",
    "user": "https://github.com/mforets"
}
```

Branch: **[u/mforets/23074](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/23074)**



---

archive/issue_comments_345493.json:
```json
{
    "body": "Commit: **[`9416552`](https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2)**",
    "created_at": "2017-05-27T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345493",
    "user": "https://github.com/mforets"
}
```

Commit: **[`9416552`](https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2)**



---

archive/issue_comments_345494.json:
```json
{
    "body": "Author: **Marcelo Forets**",
    "created_at": "2017-05-27T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345494",
    "user": "https://github.com/mforets"
}
```

Author: **Marcelo Forets**



---

archive/issue_comments_345495.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff2f59006c64099e700a34d72cacc0d509062e00\"><code>ff2f590</code></a></td><td><code>change disp -> verbose keyword</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f1fecffd172d65c482b721c096e1c057a371c75\"><code>1f1fecf</code></a></td><td><code>fix keyword in doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be7fcf5fd3d43025f90c567ddfe3f4ef47c167d6\"><code>be7fcf5</code></a></td><td><code>add rename keyword deprecation warning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/469bd82e99d77842bad557889787eb72abc4fabb\"><code>469bd82</code></a></td><td><code>set default -> False, and update doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46e3497e1b696778b93c96a03ff48ba469c7509a\"><code>46e3497</code></a></td><td><code>add missing algorithm descriptions and wiki link</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0373a05f1c0b4b07beee7f69b6c4f4efa861bed\"><code>f0373a0</code></a></td><td><code>update verbose in docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/540bdeac0538207c5a0d1bf3613a91dbdba9e41d\"><code>540bdea</code></a></td><td><code>add complementary note</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83e9a04d74485488739204f758baebe4f37989f4\"><code>83e9a04</code></a></td><td><code>remove pair of backticks (all or nothing)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e8289d1a6aaa8d0f7cd305a4d52ee1a849a7366\"><code>8e8289d</code></a></td><td><code>Merge branch 'develop' into t/mforets/23074</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2\"><code>9416552</code></a></td><td><code>add ncg method to python funcs and add test</code></td></tr></table>\n",
    "created_at": "2017-05-27T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345495",
    "user": "https://github.com/mforets"
}
```

<div id="comment:6" align="right">comment:6</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff2f59006c64099e700a34d72cacc0d509062e00"><code>ff2f590</code></a></td><td><code>change disp -> verbose keyword</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f1fecffd172d65c482b721c096e1c057a371c75"><code>1f1fecf</code></a></td><td><code>fix keyword in doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be7fcf5fd3d43025f90c567ddfe3f4ef47c167d6"><code>be7fcf5</code></a></td><td><code>add rename keyword deprecation warning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/469bd82e99d77842bad557889787eb72abc4fabb"><code>469bd82</code></a></td><td><code>set default -> False, and update doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46e3497e1b696778b93c96a03ff48ba469c7509a"><code>46e3497</code></a></td><td><code>add missing algorithm descriptions and wiki link</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0373a05f1c0b4b07beee7f69b6c4f4efa861bed"><code>f0373a0</code></a></td><td><code>update verbose in docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/540bdeac0538207c5a0d1bf3613a91dbdba9e41d"><code>540bdea</code></a></td><td><code>add complementary note</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83e9a04d74485488739204f758baebe4f37989f4"><code>83e9a04</code></a></td><td><code>remove pair of backticks (all or nothing)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e8289d1a6aaa8d0f7cd305a4d52ee1a849a7366"><code>8e8289d</code></a></td><td><code>Merge branch 'develop' into t/mforets/23074</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2"><code>9416552</code></a></td><td><code>add ncg method to python funcs and add test</code></td></tr></table>




---

archive/issue_comments_345496.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b658d33fae42d37b4cad9b3dee8488395be299be\"><code>b658d33</code></a></td><td><code>add example with hessian</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe\"><code>74da21c</code></a></td><td><code>update test</code></td></tr></table>\n",
    "created_at": "2017-05-27T18:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345496",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b658d33fae42d37b4cad9b3dee8488395be299be"><code>b658d33</code></a></td><td><code>add example with hessian</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe"><code>74da21c</code></a></td><td><code>update test</code></td></tr></table>




---

archive/issue_comments_345497.json:
```json
{
    "body": "Changed commit from **[`9416552`](https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2)** to **[`74da21c`](https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe)**",
    "created_at": "2017-05-27T18:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345497",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9416552`](https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2)** to **[`74da21c`](https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe)**



---

archive/issue_events_323248.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-27T18:14:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323248"
}
```



---

archive/issue_comments_345498.json:
```json
{
    "body": "Changed commit from **[`74da21c`](https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe)** to **[`ac91ce2`](https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd)**",
    "created_at": "2017-05-27T18:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345498",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`74da21c`](https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe)** to **[`ac91ce2`](https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd)**



---

archive/issue_comments_345499.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd\"><code>ac91ce2</code></a></td><td><code>fix typo</code></td></tr></table>\n",
    "created_at": "2017-05-27T18:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345499",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd"><code>ac91ce2</code></a></td><td><code>fix typo</code></td></tr></table>




---

archive/issue_comments_345500.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nrebased\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2fa6a55f6d61f6d5f56497906bb142a54c8c2cd\"><code>c2fa6a5</code></a></td><td><code>add ncg method to python funcs and add test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8c320822357a5323a3b4a359ed46bd96a867a25\"><code>e8c3208</code></a></td><td><code>add example with hessian</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2d29a1b8b783b63a6df808df5dae7ec8f227e16\"><code>e2d29a1</code></a></td><td><code>update test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771\"><code>f7a5fb4</code></a></td><td><code>fix typo</code></td></tr></table>\n",
    "created_at": "2020-02-23T10:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345500",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

rebased

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2fa6a55f6d61f6d5f56497906bb142a54c8c2cd"><code>c2fa6a5</code></a></td><td><code>add ncg method to python funcs and add test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8c320822357a5323a3b4a359ed46bd96a867a25"><code>e8c3208</code></a></td><td><code>add example with hessian</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2d29a1b8b783b63a6df808df5dae7ec8f227e16"><code>e2d29a1</code></a></td><td><code>update test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771"><code>f7a5fb4</code></a></td><td><code>fix typo</code></td></tr></table>




---

archive/issue_comments_345501.json:
```json
{
    "body": "Changed branch from **[u/mforets/23074](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/23074)** to **[public/23074](https://github.com/sagemath/sagetrac-mirror/tree/public/23074)**",
    "created_at": "2020-02-23T10:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345501",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/mforets/23074](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/23074)** to **[public/23074](https://github.com/sagemath/sagetrac-mirror/tree/public/23074)**



---

archive/issue_events_323249.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:10:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323249"
}
```



---

archive/issue_events_323250.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:10:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323250"
}
```



---

archive/issue_comments_345502.json:
```json
{
    "body": "Changed dependencies from **#23062** to none",
    "created_at": "2020-02-23T10:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345502",
    "user": "https://github.com/videlec"
}
```

Changed dependencies from **#23062** to none



---

archive/issue_comments_345503.json:
```json
{
    "body": "Changed commit from **[`ac91ce2`](https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd)** to **[`f7a5fb4`](https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771)**",
    "created_at": "2020-02-23T10:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345503",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`ac91ce2`](https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd)** to **[`f7a5fb4`](https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771)**



---

archive/issue_comments_345504.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4388049a5c0e52272dfd909c9a17c9cef5e7439d\"><code>4388049</code></a></td><td><code>add ncg method to python funcs and add test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9\"><code>e6c8e38</code></a></td><td><code>clean doctests</code></td></tr></table>\n",
    "created_at": "2020-02-23T10:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345504",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4388049a5c0e52272dfd909c9a17c9cef5e7439d"><code>4388049</code></a></td><td><code>add ncg method to python funcs and add test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9"><code>e6c8e38</code></a></td><td><code>clean doctests</code></td></tr></table>




---

archive/issue_comments_345505.json:
```json
{
    "body": "Changed commit from **[`f7a5fb4`](https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771)** to **[`e6c8e38`](https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9)**",
    "created_at": "2020-02-23T10:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345505",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f7a5fb4`](https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771)** to **[`e6c8e38`](https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9)**



---

archive/issue_comments_345506.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSome refactorization in progress..",
    "created_at": "2020-02-23T10:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345506",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Some refactorization in progress..



---

archive/issue_events_323251.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:41:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323251"
}
```



---

archive/issue_events_323252.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:41:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323252"
}
```



---

archive/issue_comments_345507.json:
```json
{
    "body": "Changed commit from **[`e6c8e38`](https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9)** to **[`36d0f31`](https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029)**",
    "created_at": "2020-02-23T10:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345507",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e6c8e38`](https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9)** to **[`36d0f31`](https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029)**



---

archive/issue_comments_345508.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029\"><code>36d0f31</code></a></td><td><code>refactor</code></td></tr></table>\n",
    "created_at": "2020-02-23T10:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345508",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029"><code>36d0f31</code></a></td><td><code>refactor</code></td></tr></table>




---

archive/issue_comments_345509.json:
```json
{
    "body": "Changed author from **Marcelo Forets** to **Marcelo Forets, Vincent Delecroix**",
    "created_at": "2020-02-23T10:49:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345509",
    "user": "https://github.com/videlec"
}
```

Changed author from **Marcelo Forets** to **Marcelo Forets, Vincent Delecroix**



---

archive/issue_events_323253.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:49:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323253"
}
```



---

archive/issue_events_323254.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:49:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323254"
}
```



---

archive/issue_comments_345510.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2020-02-23T15:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345510",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_345511.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThanks, looks good.",
    "created_at": "2020-02-23T15:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345511",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

Thanks, looks good.



---

archive/issue_events_323255.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-02-23T15:05:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323255"
}
```



---

archive/issue_events_323256.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-02-23T15:05:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323256"
}
```



---

archive/issue_events_323257.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-24T23:46:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323257"
}
```



---

archive/issue_events_323258.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-24T23:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323258"
}
```



---

archive/issue_comments_345512.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOn 32-bit:\n\n```\n**********************************************************************\nFile \"src/sage/numerical/optimize.py\", line 352, in sage.numerical.optimize.?\nFailed example:\n    minimize(f, [.1, .3, .4], algorithm=\"ncg\") # abs tol 1e-6\nExpected:\n    (1.0, 1.0, 1.0)\nGot:\n    (1.0000003254615812, 1.000000652320023, 1.0000013080122123)\nTolerance exceeded in 1 of 3:\n    1.0 vs 1.0000013080122123, tolerance 2e-6 > 1e-6\n**********************************************************************\n1 item had failures:\n   1 of  20 in sage.numerical.optimize.?\n    [104 tests, 1 failure, 1.15 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/numerical/optimize.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-02-24T23:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345512",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

On 32-bit:

```
**********************************************************************
File "src/sage/numerical/optimize.py", line 352, in sage.numerical.optimize.?
Failed example:
    minimize(f, [.1, .3, .4], algorithm="ncg") # abs tol 1e-6
Expected:
    (1.0, 1.0, 1.0)
Got:
    (1.0000003254615812, 1.000000652320023, 1.0000013080122123)
Tolerance exceeded in 1 of 3:
    1.0 vs 1.0000013080122123, tolerance 2e-6 > 1e-6
**********************************************************************
1 item had failures:
   1 of  20 in sage.numerical.optimize.?
    [104 tests, 1 failure, 1.15 s]
----------------------------------------------------------------------
sage -t --long src/sage/numerical/optimize.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_345513.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nMoving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345513",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_323259.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323259"
}
```



---

archive/issue_events_323260.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323260"
}
```



---

archive/issue_events_323261.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323261"
}
```



---

archive/issue_events_323262.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323262"
}
```



---

archive/issue_comments_345514.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345514",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_323263.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323263"
}
```



---

archive/issue_events_323264.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323264"
}
```



---

archive/issue_comments_345515.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-345515",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_323265.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323265"
}
```



---

archive/issue_events_323266.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323266"
}
```



---

archive/issue_events_323267.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323267"
}
```



---

archive/issue_events_323268.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323268"
}
```



---

archive/issue_events_323269.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323269"
}
```



---

archive/issue_events_323270.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323270"
}
```



---

archive/issue_events_323271.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323271"
}
```



---

archive/issue_events_323272.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-323272"
}
```
