# Issue 23074: Allow Python functions in minimize with NCG method

archive/issues_022837.json:
```json
{
    "assignees": [],
    "body": "If `algorithm=\"ncg\"` is used in the top-level `minimize` function, one should be able to work with Python functions, as with the other algorithms.\n\n**CC:**  @dimpase\n\n**Keywords:** minimize\n\n**Branch:** [public/23074](https://github.com/sagemath/sagetrac-mirror/tree/public/23074)\n\n**Commit:** [36d0f319d27f38a692e82102c8adb3040ed55029](https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029)\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Marcelo Forets, Vincent Delecroix\n\nIssue created by migration from https://trac.sagemath.org/ticket/23074\n\n",
    "created_at": "2017-05-25T09:17:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20numerical",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow Python functions in minimize with NCG method",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/23074",
    "user": "https://github.com/mforets"
}
```
If `algorithm="ncg"` is used in the top-level `minimize` function, one should be able to work with Python functions, as with the other algorithms.

**CC:**  @dimpase

**Keywords:** minimize

**Branch:** [public/23074](https://github.com/sagemath/sagetrac-mirror/tree/public/23074)

**Commit:** [36d0f319d27f38a692e82102c8adb3040ed55029](https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029)

**Reviewer:** Dima Pasechnik

**Author:** Marcelo Forets, Vincent Delecroix

Issue created by migration from https://trac.sagemath.org/ticket/23074





---

archive/issue_events_279376.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T09:17:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279376"
}
```



---

archive/issue_events_279377.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T09:17:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20numerical",
    "label_color": "08517b",
    "label_name": "component: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279377"
}
```



---

archive/issue_events_279378.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T09:17:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279378"
}
```



---

archive/issue_comments_348098.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nFor instance, this use case is currently broken:\n\n```\nsage: f = lambda x : 100*(x[1]-x[0]^2)^2+(1-x[0])^2+100*(x[2]-x[1]^2)^2+(1-x[1])^2\nsage: gradient = lambda x : scipy.array([400*(x[0]**2 - x[1])*x[0] + 2*x[0] - 2, \\\n                                    -200*x[0]**2 + 400*(x[1]**2 - x[2])*x[1] + 202*x[1] - 2, \\\n                                     -200*x[1]**2 + 200*x[2]])\nsage: x0 = [.1,.3,.4]\nsage: minimize(f, x0, gradient, algorithm=\"ncg\")\nTraceback (most recent call last)\n...\nUnboundLocalError: local variable 'min' referenced before assignment\n```\n\nbut it shouldn't, since this works:\n\n```\nsage: import scipy\nsage: from scipy import optimize\nsage: optimize.fmin_ncg(f, [float(_) for _ in x0], fprime=gradient, disp=True)\nOptimization terminated successfully.\n...\narray([ 0.99999732,  0.99999463,  0.99998926])\n```\n\nMoreover, the Hessian can also be passed to ncg (but it's optional => docstring is inaccurate)\n\n```\nsage: hessian = lambda x : [[1200*x[0]^2 - 400*x[1] + 2, -400*x[0], 0], \\\n                    [-400*x[0], 1200*x[1]^2 - 400*x[2] + 202, -400*x[1]], \\\n                    [0, -400*x[1], 200]]\nsage: optimize.fmin_ncg(f, [float(_) for _ in x0], fprime=gradient, fhess=hessian, disp=True)\nOptimization terminated successfully.\n...\narray([ 1.,  1.,  1.])\n```",
    "created_at": "2017-05-25T09:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348098",
    "user": "https://github.com/mforets"
}
```

<a id='comment:1'>**Comment 1:**</a>
For instance, this use case is currently broken:

```
sage: f = lambda x : 100*(x[1]-x[0]^2)^2+(1-x[0])^2+100*(x[2]-x[1]^2)^2+(1-x[1])^2
sage: gradient = lambda x : scipy.array([400*(x[0]**2 - x[1])*x[0] + 2*x[0] - 2, \
                                    -200*x[0]**2 + 400*(x[1]**2 - x[2])*x[1] + 202*x[1] - 2, \
                                     -200*x[1]**2 + 200*x[2]])
sage: x0 = [.1,.3,.4]
sage: minimize(f, x0, gradient, algorithm="ncg")
Traceback (most recent call last)
...
UnboundLocalError: local variable 'min' referenced before assignment
```

but it shouldn't, since this works:

```
sage: import scipy
sage: from scipy import optimize
sage: optimize.fmin_ncg(f, [float(_) for _ in x0], fprime=gradient, disp=True)
Optimization terminated successfully.
...
array([ 0.99999732,  0.99999463,  0.99998926])
```

Moreover, the Hessian can also be passed to ncg (but it's optional => docstring is inaccurate)

```
sage: hessian = lambda x : [[1200*x[0]^2 - 400*x[1] + 2, -400*x[0], 0], \
                    [-400*x[0], 1200*x[1]^2 - 400*x[2] + 202, -400*x[1]], \
                    [0, -400*x[1], 200]]
sage: optimize.fmin_ncg(f, [float(_) for _ in x0], fprime=gradient, fhess=hessian, disp=True)
Optimization terminated successfully.
...
array([ 1.,  1.,  1.])
```



---

archive/issue_comments_348099.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\non a separate line, [in the doc](https://docs.scipy.org/doc/scipy-0.19.0/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize) it says that \n\n> Only one of hessp or hess needs to be given.\n\nHence, in the current if clause of `algorithm==\"ncg\"` one does not need to compute & pass both `hessian` and `hessian_p`, but just one of them, i think.",
    "created_at": "2017-05-25T09:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348099",
    "user": "https://github.com/mforets"
}
```

<a id='comment:2'>**Comment 2:**</a>
on a separate line, [in the doc](https://docs.scipy.org/doc/scipy-0.19.0/reference/generated/scipy.optimize.minimize.html#scipy.optimize.minimize) it says that 

> Only one of hessp or hess needs to be given.

Hence, in the current if clause of `algorithm=="ncg"` one does not need to compute & pass both `hessian` and `hessian_p`, but just one of them, i think.



---

archive/issue_comments_348100.json:
```json
{
    "body": "**Dependencies:** 23062",
    "created_at": "2017-05-25T09:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348100",
    "user": "https://github.com/mforets"
}
```

**Dependencies:** 23062



---

archive/issue_comments_348101.json:
```json
{
    "body": "**Changing dependencies** from \"23062\" to \"#23062\".",
    "created_at": "2017-05-25T09:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348101",
    "user": "https://github.com/mforets"
}
```

**Changing dependencies** from "23062" to "#23062".



---

archive/issue_comments_348102.json:
```json
{
    "body": "**Branch:** [u/mforets/23074](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/23074)",
    "created_at": "2017-05-27T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348102",
    "user": "https://github.com/mforets"
}
```

**Branch:** [u/mforets/23074](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/23074)



---

archive/issue_comments_348103.json:
```json
{
    "body": "**Commit:** [9416552989786893ae770bfd4dae7235abb8a1c2](https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2)",
    "created_at": "2017-05-27T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348103",
    "user": "https://github.com/mforets"
}
```

**Commit:** [9416552989786893ae770bfd4dae7235abb8a1c2](https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2)



---

archive/issue_comments_348104.json:
```json
{
    "body": "**Author:** Marcelo Forets",
    "created_at": "2017-05-27T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348104",
    "user": "https://github.com/mforets"
}
```

**Author:** Marcelo Forets



---

archive/issue_comments_348105.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff2f59006c64099e700a34d72cacc0d509062e00\">ff2f590</a></td><td><code>change disp -> verbose keyword</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f1fecffd172d65c482b721c096e1c057a371c75\">1f1fecf</a></td><td><code>fix keyword in doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be7fcf5fd3d43025f90c567ddfe3f4ef47c167d6\">be7fcf5</a></td><td><code>add rename keyword deprecation warning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/469bd82e99d77842bad557889787eb72abc4fabb\">469bd82</a></td><td><code>set default -> False, and update doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46e3497e1b696778b93c96a03ff48ba469c7509a\">46e3497</a></td><td><code>add missing algorithm descriptions and wiki link</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0373a05f1c0b4b07beee7f69b6c4f4efa861bed\">f0373a0</a></td><td><code>update verbose in docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/540bdeac0538207c5a0d1bf3613a91dbdba9e41d\">540bdea</a></td><td><code>add complementary note</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83e9a04d74485488739204f758baebe4f37989f4\">83e9a04</a></td><td><code>remove pair of backticks (all or nothing)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e8289d1a6aaa8d0f7cd305a4d52ee1a849a7366\">8e8289d</a></td><td><code>Merge branch 'develop' into t/mforets/23074</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2\">9416552</a></td><td><code>add ncg method to python funcs and add test</code></td></tr></table>\n",
    "created_at": "2017-05-27T17:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348105",
    "user": "https://github.com/mforets"
}
```

<a id='comment:6'>**Comment 6:**</a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff2f59006c64099e700a34d72cacc0d509062e00">ff2f590</a></td><td><code>change disp -> verbose keyword</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f1fecffd172d65c482b721c096e1c057a371c75">1f1fecf</a></td><td><code>fix keyword in doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be7fcf5fd3d43025f90c567ddfe3f4ef47c167d6">be7fcf5</a></td><td><code>add rename keyword deprecation warning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/469bd82e99d77842bad557889787eb72abc4fabb">469bd82</a></td><td><code>set default -> False, and update doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46e3497e1b696778b93c96a03ff48ba469c7509a">46e3497</a></td><td><code>add missing algorithm descriptions and wiki link</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0373a05f1c0b4b07beee7f69b6c4f4efa861bed">f0373a0</a></td><td><code>update verbose in docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/540bdeac0538207c5a0d1bf3613a91dbdba9e41d">540bdea</a></td><td><code>add complementary note</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83e9a04d74485488739204f758baebe4f37989f4">83e9a04</a></td><td><code>remove pair of backticks (all or nothing)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e8289d1a6aaa8d0f7cd305a4d52ee1a849a7366">8e8289d</a></td><td><code>Merge branch 'develop' into t/mforets/23074</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2">9416552</a></td><td><code>add ncg method to python funcs and add test</code></td></tr></table>




---

archive/issue_comments_348106.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b658d33fae42d37b4cad9b3dee8488395be299be\">b658d33</a></td><td><code>add example with hessian</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe\">74da21c</a></td><td><code>update test</code></td></tr></table>\n",
    "created_at": "2017-05-27T18:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348106",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b658d33fae42d37b4cad9b3dee8488395be299be">b658d33</a></td><td><code>add example with hessian</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe">74da21c</a></td><td><code>update test</code></td></tr></table>




---

archive/issue_comments_348107.json:
```json
{
    "body": "**Changing commit** from \"[9416552989786893ae770bfd4dae7235abb8a1c2](https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2)\" to \"[74da21c708d00d32e61009b1abbb87f9fee2c2fe](https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe)\".",
    "created_at": "2017-05-27T18:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348107",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9416552989786893ae770bfd4dae7235abb8a1c2](https://github.com/sagemath/sagetrac-mirror/commit/9416552989786893ae770bfd4dae7235abb8a1c2)" to "[74da21c708d00d32e61009b1abbb87f9fee2c2fe](https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe)".



---

archive/issue_events_279379.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-27T18:14:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279379"
}
```



---

archive/issue_comments_348108.json:
```json
{
    "body": "**Changing commit** from \"[74da21c708d00d32e61009b1abbb87f9fee2c2fe](https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe)\" to \"[ac91ce20b7a2e067b5abce5054f9b64d28c960fd](https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd)\".",
    "created_at": "2017-05-27T18:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348108",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[74da21c708d00d32e61009b1abbb87f9fee2c2fe](https://github.com/sagemath/sagetrac-mirror/commit/74da21c708d00d32e61009b1abbb87f9fee2c2fe)" to "[ac91ce20b7a2e067b5abce5054f9b64d28c960fd](https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd)".



---

archive/issue_comments_348109.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd\">ac91ce2</a></td><td><code>fix typo</code></td></tr></table>\n",
    "created_at": "2017-05-27T18:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348109",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>**Comment 9:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd">ac91ce2</a></td><td><code>fix typo</code></td></tr></table>




---

archive/issue_comments_348110.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nrebased\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2fa6a55f6d61f6d5f56497906bb142a54c8c2cd\">c2fa6a5</a></td><td><code>add ncg method to python funcs and add test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8c320822357a5323a3b4a359ed46bd96a867a25\">e8c3208</a></td><td><code>add example with hessian</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2d29a1b8b783b63a6df808df5dae7ec8f227e16\">e2d29a1</a></td><td><code>update test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771\">f7a5fb4</a></td><td><code>fix typo</code></td></tr></table>\n",
    "created_at": "2020-02-23T10:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348110",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'>**Comment 10:**</a>
rebased

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2fa6a55f6d61f6d5f56497906bb142a54c8c2cd">c2fa6a5</a></td><td><code>add ncg method to python funcs and add test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8c320822357a5323a3b4a359ed46bd96a867a25">e8c3208</a></td><td><code>add example with hessian</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2d29a1b8b783b63a6df808df5dae7ec8f227e16">e2d29a1</a></td><td><code>update test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771">f7a5fb4</a></td><td><code>fix typo</code></td></tr></table>




---

archive/issue_comments_348111.json:
```json
{
    "body": "**Changing branch** from \"[u/mforets/23074](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/23074)\" to \"[public/23074](https://github.com/sagemath/sagetrac-mirror/tree/public/23074)\".",
    "created_at": "2020-02-23T10:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348111",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[u/mforets/23074](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/23074)" to "[public/23074](https://github.com/sagemath/sagetrac-mirror/tree/public/23074)".



---

archive/issue_events_279380.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:10:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279380"
}
```



---

archive/issue_events_279381.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:10:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279381"
}
```



---

archive/issue_comments_348112.json:
```json
{
    "body": "**Changing dependencies** from \"#23062\" to \"\".",
    "created_at": "2020-02-23T10:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348112",
    "user": "https://github.com/videlec"
}
```

**Changing dependencies** from "#23062" to "".



---

archive/issue_comments_348113.json:
```json
{
    "body": "**Changing commit** from \"[ac91ce20b7a2e067b5abce5054f9b64d28c960fd](https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd)\" to \"[f7a5fb419785acc5eb91f2bef3ee34df61478771](https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771)\".",
    "created_at": "2020-02-23T10:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348113",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[ac91ce20b7a2e067b5abce5054f9b64d28c960fd](https://github.com/sagemath/sagetrac-mirror/commit/ac91ce20b7a2e067b5abce5054f9b64d28c960fd)" to "[f7a5fb419785acc5eb91f2bef3ee34df61478771](https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771)".



---

archive/issue_comments_348114.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4388049a5c0e52272dfd909c9a17c9cef5e7439d\">4388049</a></td><td><code>add ncg method to python funcs and add test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9\">e6c8e38</a></td><td><code>clean doctests</code></td></tr></table>\n",
    "created_at": "2020-02-23T10:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348114",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>**Comment 11:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4388049a5c0e52272dfd909c9a17c9cef5e7439d">4388049</a></td><td><code>add ncg method to python funcs and add test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9">e6c8e38</a></td><td><code>clean doctests</code></td></tr></table>




---

archive/issue_comments_348115.json:
```json
{
    "body": "**Changing commit** from \"[f7a5fb419785acc5eb91f2bef3ee34df61478771](https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771)\" to \"[e6c8e38460ed4438333a6ef0d1562fe3871691c9](https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9)\".",
    "created_at": "2020-02-23T10:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348115",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[f7a5fb419785acc5eb91f2bef3ee34df61478771](https://github.com/sagemath/sagetrac-mirror/commit/f7a5fb419785acc5eb91f2bef3ee34df61478771)" to "[e6c8e38460ed4438333a6ef0d1562fe3871691c9](https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9)".



---

archive/issue_comments_348116.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nSome refactorization in progress..",
    "created_at": "2020-02-23T10:41:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348116",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'>**Comment 12:**</a>
Some refactorization in progress..



---

archive/issue_events_279382.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:41:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279382"
}
```



---

archive/issue_events_279383.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:41:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279383"
}
```



---

archive/issue_comments_348117.json:
```json
{
    "body": "**Changing commit** from \"[e6c8e38460ed4438333a6ef0d1562fe3871691c9](https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9)\" to \"[36d0f319d27f38a692e82102c8adb3040ed55029](https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029)\".",
    "created_at": "2020-02-23T10:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348117",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e6c8e38460ed4438333a6ef0d1562fe3871691c9](https://github.com/sagemath/sagetrac-mirror/commit/e6c8e38460ed4438333a6ef0d1562fe3871691c9)" to "[36d0f319d27f38a692e82102c8adb3040ed55029](https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029)".



---

archive/issue_comments_348118.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029\">36d0f31</a></td><td><code>refactor</code></td></tr></table>\n",
    "created_at": "2020-02-23T10:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348118",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>**Comment 13:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36d0f319d27f38a692e82102c8adb3040ed55029">36d0f31</a></td><td><code>refactor</code></td></tr></table>




---

archive/issue_comments_348119.json:
```json
{
    "body": "**Changing author** from \"Marcelo Forets\" to \"Marcelo Forets, Vincent Delecroix\".",
    "created_at": "2020-02-23T10:49:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348119",
    "user": "https://github.com/videlec"
}
```

**Changing author** from "Marcelo Forets" to "Marcelo Forets, Vincent Delecroix".



---

archive/issue_events_279384.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:49:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279384"
}
```



---

archive/issue_events_279385.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-23T10:49:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279385"
}
```



---

archive/issue_comments_348120.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2020-02-23T15:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348120",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_348121.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nThanks, looks good.",
    "created_at": "2020-02-23T15:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348121",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'>**Comment 15:**</a>
Thanks, looks good.



---

archive/issue_events_279386.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-02-23T15:05:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279386"
}
```



---

archive/issue_events_279387.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-02-23T15:05:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279387"
}
```



---

archive/issue_events_279388.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-24T23:46:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279388"
}
```



---

archive/issue_events_279389.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-24T23:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279389"
}
```



---

archive/issue_comments_348122.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nOn 32-bit:\n\n```\n**********************************************************************\nFile \"src/sage/numerical/optimize.py\", line 352, in sage.numerical.optimize.?\nFailed example:\n    minimize(f, [.1, .3, .4], algorithm=\"ncg\") # abs tol 1e-6\nExpected:\n    (1.0, 1.0, 1.0)\nGot:\n    (1.0000003254615812, 1.000000652320023, 1.0000013080122123)\nTolerance exceeded in 1 of 3:\n    1.0 vs 1.0000013080122123, tolerance 2e-6 > 1e-6\n**********************************************************************\n1 item had failures:\n   1 of  20 in sage.numerical.optimize.?\n    [104 tests, 1 failure, 1.15 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/numerical/optimize.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-02-24T23:46:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348122",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'>**Comment 16:**</a>
On 32-bit:

```
**********************************************************************
File "src/sage/numerical/optimize.py", line 352, in sage.numerical.optimize.?
Failed example:
    minimize(f, [.1, .3, .4], algorithm="ncg") # abs tol 1e-6
Expected:
    (1.0, 1.0, 1.0)
Got:
    (1.0000003254615812, 1.000000652320023, 1.0000013080122123)
Tolerance exceeded in 1 of 3:
    1.0 vs 1.0000013080122123, tolerance 2e-6 > 1e-6
**********************************************************************
1 item had failures:
   1 of  20 in sage.numerical.optimize.?
    [104 tests, 1 failure, 1.15 s]
----------------------------------------------------------------------
sage -t --long src/sage/numerical/optimize.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_348123.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nMoving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348123",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>**Comment 17:**</a>
Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_279390.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279390"
}
```



---

archive/issue_events_279391.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279391"
}
```



---

archive/issue_events_279392.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279392"
}
```



---

archive/issue_events_279393.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279393"
}
```



---

archive/issue_comments_348124.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348124",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'>**Comment 19:**</a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_279394.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279394"
}
```



---

archive/issue_events_279395.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279395"
}
```



---

archive/issue_comments_348125.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23074#issuecomment-348125",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>**Comment 20:**</a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_279396.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279396"
}
```



---

archive/issue_events_279397.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279397"
}
```



---

archive/issue_events_279398.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279398"
}
```



---

archive/issue_events_279399.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279399"
}
```



---

archive/issue_events_279400.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279400"
}
```



---

archive/issue_events_279401.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279401"
}
```



---

archive/issue_events_279402.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279402"
}
```



---

archive/issue_events_279403.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23074",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23074#event-279403"
}
```
