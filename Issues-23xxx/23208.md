# Issue 23208: Enhanced backtrace on test timeout

archive/issues_022971.json:
```json
{
    "assignees": [],
    "body": "Test timeout frequently and not reproducably on the buildbot. It would be so much nicer if one would be able to see where the process was stuck...\n\n\nCC:  @kiwifb @roed314 @jdemeyer @jpflori\n\nBranch/Commit: **[`155137b`](https://github.com/sagemath/sagetrac-mirror/commit/155137b02d31fc419ed8ee0a2ea33f9d53c01a9b)**\n\nReviewer: **Julian R\u00fcth, Fran\u00e7ois Bissey**\n\nAuthor: **Volker Braun**\n\nComponent: **doctest framework**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23208_\n\n",
    "closed_at": "2017-06-29T06:46:53Z",
    "created_at": "2017-06-10T11:02:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Enhanced backtrace on test timeout",
    "type": "issue",
    "updated_at": "2017-06-29T06:46:53Z",
    "url": "https://github.com/sagemath/sage/issues/23208",
    "user": "https://github.com/vbraun"
}
```
Test timeout frequently and not reproducably on the buildbot. It would be so much nicer if one would be able to see where the process was stuck...


CC:  @kiwifb @roed314 @jdemeyer @jpflori

Branch/Commit: **[`155137b`](https://github.com/sagemath/sagetrac-mirror/commit/155137b02d31fc419ed8ee0a2ea33f9d53c01a9b)**

Reviewer: **Julian Rüth, François Bissey**

Author: **Volker Braun**

Component: **doctest framework**

_Issue created by migration from https://trac.sagemath.org/ticket/23208_





---

archive/issue_events_324947.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-10T11:02:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324947"
}
```



---

archive/issue_events_324948.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-10T11:02:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20doctest%20framework",
    "label_color": "000080",
    "label_name": "c: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324948"
}
```



---

archive/issue_events_324949.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-10T11:02:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324949"
}
```



---

archive/issue_events_324950.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-10T11:02:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324950"
}
```



---

archive/issue_comments_348142.json:
```json
{
    "body": "Branch: **[u/vbraun/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/enhanced_backtrace_on_test_timeout)**",
    "created_at": "2017-06-10T11:42:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348142",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/enhanced_backtrace_on_test_timeout)**



---

archive/issue_comments_348143.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43291991d3c0f03eff492897abed00ec9ebdfbaa\"><code>4329199</code></a></td><td><code>Fix doctest</code></td></tr></table>\n",
    "created_at": "2017-06-10T14:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348143",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43291991d3c0f03eff492897abed00ec9ebdfbaa"><code>4329199</code></a></td><td><code>Fix doctest</code></td></tr></table>




---

archive/issue_comments_348144.json:
```json
{
    "body": "Commit: **[`4329199`](https://github.com/sagemath/sagetrac-mirror/commit/43291991d3c0f03eff492897abed00ec9ebdfbaa)**",
    "created_at": "2017-06-10T14:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348144",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`4329199`](https://github.com/sagemath/sagetrac-mirror/commit/43291991d3c0f03eff492897abed00ec9ebdfbaa)**



---

archive/issue_events_324951.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-10T14:45:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324951"
}
```



---

archive/issue_comments_348145.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n\n```\n+        This method is only called if there is something wrong with the\n+        worker. Under normal circumstances, the worker is supported to\n+        exit by himself after finishing.\n```\n\"supported\"? Do you mean \"supposed\"?",
    "created_at": "2017-06-17T22:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348145",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>


```
+        This method is only called if there is something wrong with the
+        worker. Under normal circumstances, the worker is supported to
+        exit by himself after finishing.
```
"supported"? Do you mean "supposed"?



---

archive/issue_comments_348146.json:
```json
{
    "body": "Changed branch from **[u/vbraun/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/enhanced_backtrace_on_test_timeout)** to **[u/saraedum/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/enhanced_backtrace_on_test_timeout)**",
    "created_at": "2017-06-22T05:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348146",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/vbraun/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/enhanced_backtrace_on_test_timeout)** to **[u/saraedum/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/enhanced_backtrace_on_test_timeout)**



---

archive/issue_comments_348147.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2017-06-22T05:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348147",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian Rüth**



---

archive/issue_comments_348148.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nFeel free to set this to positive review if the tests pass (and if you are happy with the fix proposed by fbissey.)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15f70b90c5e87a6ca948af288d6560e360e78cdf\"><code>15f70b9</code></a></td><td><code>fix typo</code></td></tr></table>\n",
    "created_at": "2017-06-22T05:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348148",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:8" align="right">comment:8</div>

Feel free to set this to positive review if the tests pass (and if you are happy with the fix proposed by fbissey.)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15f70b90c5e87a6ca948af288d6560e360e78cdf"><code>15f70b9</code></a></td><td><code>fix typo</code></td></tr></table>




---

archive/issue_comments_348149.json:
```json
{
    "body": "Changed commit from **[`4329199`](https://github.com/sagemath/sagetrac-mirror/commit/43291991d3c0f03eff492897abed00ec9ebdfbaa)** to **[`15f70b9`](https://github.com/sagemath/sagetrac-mirror/commit/15f70b90c5e87a6ca948af288d6560e360e78cdf)**",
    "created_at": "2017-06-22T05:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348149",
    "user": "https://github.com/saraedum"
}
```

Changed commit from **[`4329199`](https://github.com/sagemath/sagetrac-mirror/commit/43291991d3c0f03eff492897abed00ec9ebdfbaa)** to **[`15f70b9`](https://github.com/sagemath/sagetrac-mirror/commit/15f70b90c5e87a6ca948af288d6560e360e78cdf)**



---

archive/issue_comments_348150.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSpeaking of typos:\n\n```\n+        worker. Under normal circumstances, the worker is supposed to\n+        exit by himself after finishing.\n```\nNow, I am French, and I make this mistake often, to ascribe neutral gender to male gender.  `himself` -> `itself`\n\nApart from that I don't really have any objection in principle to this ticket, I'd love to have backtrace on those hanging process. Whether it will be useful is another question that cannot be answered without trying.",
    "created_at": "2017-06-22T22:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348150",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

Speaking of typos:

```
+        worker. Under normal circumstances, the worker is supposed to
+        exit by himself after finishing.
```
Now, I am French, and I make this mistake often, to ascribe neutral gender to male gender.  `himself` -> `itself`

Apart from that I don't really have any objection in principle to this ticket, I'd love to have backtrace on those hanging process. Whether it will be useful is another question that cannot be answered without trying.



---

archive/issue_comments_348151.json:
```json
{
    "body": "Changed branch from **[u/saraedum/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/enhanced_backtrace_on_test_timeout)** to **[u/vbraun/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/enhanced_backtrace_on_test_timeout)**",
    "created_at": "2017-06-26T22:27:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348151",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/saraedum/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/enhanced_backtrace_on_test_timeout)** to **[u/vbraun/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/enhanced_backtrace_on_test_timeout)**



---

archive/issue_events_324952.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-26T22:28:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324952"
}
```



---

archive/issue_events_324953.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-26T22:28:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324953"
}
```



---

archive/issue_comments_348152.json:
```json
{
    "body": "Changed reviewer from **Julian R\u00fcth** to **Julian R\u00fcth, Fran\u00e7ois Bissey**",
    "created_at": "2017-06-26T22:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348152",
    "user": "https://github.com/vbraun"
}
```

Changed reviewer from **Julian Rüth** to **Julian Rüth, François Bissey**



---

archive/issue_comments_348153.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/155137b02d31fc419ed8ee0a2ea33f9d53c01a9b\"><code>155137b</code></a></td><td><code>Fix another typo</code></td></tr></table>\n",
    "created_at": "2017-06-26T22:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348153",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/155137b02d31fc419ed8ee0a2ea33f9d53c01a9b"><code>155137b</code></a></td><td><code>Fix another typo</code></td></tr></table>




---

archive/issue_comments_348154.json:
```json
{
    "body": "Changed commit from **[`15f70b9`](https://github.com/sagemath/sagetrac-mirror/commit/15f70b90c5e87a6ca948af288d6560e360e78cdf)** to **[`155137b`](https://github.com/sagemath/sagetrac-mirror/commit/155137b02d31fc419ed8ee0a2ea33f9d53c01a9b)**",
    "created_at": "2017-06-26T22:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348154",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`15f70b9`](https://github.com/sagemath/sagetrac-mirror/commit/15f70b90c5e87a6ca948af288d6560e360e78cdf)** to **[`155137b`](https://github.com/sagemath/sagetrac-mirror/commit/155137b02d31fc419ed8ee0a2ea33f9d53c01a9b)**



---

archive/issue_comments_348155.json:
```json
{
    "body": "Changed branch from **[u/vbraun/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/enhanced_backtrace_on_test_timeout)** to **[`155137b`](https://github.com/sagemath/sagetrac-mirror/commit/155137b02d31fc419ed8ee0a2ea33f9d53c01a9b)**",
    "created_at": "2017-06-29T06:46:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23208#issuecomment-348155",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vbraun/enhanced_backtrace_on_test_timeout](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/enhanced_backtrace_on_test_timeout)** to **[`155137b`](https://github.com/sagemath/sagetrac-mirror/commit/155137b02d31fc419ed8ee0a2ea33f9d53c01a9b)**



---

archive/issue_events_324954.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-29T06:46:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324954"
}
```



---

archive/issue_events_324955.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5928a384ae11a43e061c43b9507ee1545a46629b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-29T06:46:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23208",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23208#event-324955"
}
```
