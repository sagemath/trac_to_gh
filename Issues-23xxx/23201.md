# Issue 23201: Hecke triangle group cusp form base ring

archive/issues_022964.json:
```json
{
    "body": "\n```\nsage: from sage.modular.modform_hecketriangle.space import CuspForms\nsage: MF = CuspForms(n=infinity, k=16)\nsage: MF.category().base_ring()\nFraction Field of Univariate Polynomial Ring in d over Integer Ring\nsage: MF.base_ring()\nInteger Ring\n```\nThe fact that these are different causes trouble:\n\n```\nsage: MF in MF.category()\nFalse\n```\n\nCC:  @jjermann\n\nKeywords: sd86.5\n\nBranch/Commit: 906d5b22b1d6d4d9781581ce664f623df732981d\n\nReviewer: Julian R\u00fcth\n\nAuthor: David Roe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23201\n\n",
    "closed_at": "2017-06-12T18:01:45Z",
    "created_at": "2017-06-09T17:00:23Z",
    "labels": [
        "component: modular forms",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Hecke triangle group cusp form base ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23201",
    "user": "https://github.com/roed314"
}
```

```
sage: from sage.modular.modform_hecketriangle.space import CuspForms
sage: MF = CuspForms(n=infinity, k=16)
sage: MF.category().base_ring()
Fraction Field of Univariate Polynomial Ring in d over Integer Ring
sage: MF.base_ring()
Integer Ring
```
The fact that these are different causes trouble:

```
sage: MF in MF.category()
False
```

CC:  @jjermann

Keywords: sd86.5

Branch/Commit: 906d5b22b1d6d4d9781581ce664f623df732981d

Reviewer: Julian Rüth

Author: David Roe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23201





---

archive/issue_comments_435597.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd86.5\".",
    "created_at": "2017-06-09T17:00:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435597",
    "user": "https://github.com/roed314"
}
```

Changing keywords from "" to "sd86.5".



---

archive/issue_comments_435598.json:
```json
{
    "body": "Changing branch from \"\" to \"u/roed/hecke_triangle_group_cusp_form_base_ring\"",
    "created_at": "2017-06-09T22:10:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435598",
    "user": "https://github.com/roed314"
}
```

Changing branch from "" to "u/roed/hecke_triangle_group_cusp_form_base_ring"



---

archive/issue_comments_435599.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[5fbc34c](https://git.sagemath.org/sage.git/commit?id=5fbc34cbf9fb493773a1de9ecfd8289d58e602b0)|`Change base ring for CuspFormsRing in Hecke triangle group`|",
    "created_at": "2017-06-09T22:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435599",
    "user": "https://github.com/roed314"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[5fbc34c](https://git.sagemath.org/sage.git/commit?id=5fbc34cbf9fb493773a1de9ecfd8289d58e602b0)|`Change base ring for CuspFormsRing in Hecke triangle group`|



---

archive/issue_comments_435600.json:
```json
{
    "body": "Changing commit from \"\" to \"5fbc34cbf9fb493773a1de9ecfd8289d58e602b0\"",
    "created_at": "2017-06-09T22:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435600",
    "user": "https://github.com/roed314"
}
```

Changing commit from "" to "5fbc34cbf9fb493773a1de9ecfd8289d58e602b0"



---

archive/issue_comments_435601.json:
```json
{
    "body": "Changing commit from \"5fbc34cbf9fb493773a1de9ecfd8289d58e602b0\" to \"906d5b22b1d6d4d9781581ce664f623df732981d\"",
    "created_at": "2017-06-09T22:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435601",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5fbc34cbf9fb493773a1de9ecfd8289d58e602b0" to "906d5b22b1d6d4d9781581ce664f623df732981d"



---

archive/issue_comments_435602.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[906d5b2](https://git.sagemath.org/sage.git/commit/?id=906d5b22b1d6d4d9781581ce664f623df732981d)|`Fix base rings for many other parents in sage/modular/moform_hecketriangle`|",
    "created_at": "2017-06-09T22:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435602",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[906d5b2](https://git.sagemath.org/sage.git/commit/?id=906d5b22b1d6d4d9781581ce664f623df732981d)|`Fix base rings for many other parents in sage/modular/moform_hecketriangle`|



---

archive/issue_comments_435603.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-09T22:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435603",
    "user": "https://github.com/roed314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_435604.json:
```json
{
    "body": "Changing author from \"\" to \"David Roe\"",
    "created_at": "2017-06-09T22:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435604",
    "user": "https://github.com/roed314"
}
```

Changing author from "" to "David Roe"



---

archive/issue_comments_435605.json:
```json
{
    "body": "<a id='comment:5'></a>\nFYI, I ran tests and all passed.",
    "created_at": "2017-06-09T22:48:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435605",
    "user": "https://github.com/roed314"
}
```

<a id='comment:5'></a>
FYI, I ran tests and all passed.



---

archive/issue_comments_435606.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-09T23:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435606",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_435607.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Julian R\u00fcth\"",
    "created_at": "2017-06-09T23:27:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435607",
    "user": "https://github.com/saraedum"
}
```

Changing reviewer from "" to "Julian Rüth"



---

archive/issue_comments_435608.json:
```json
{
    "body": "<a id='comment:7'></a>\nHi\n\nI'm glad to see some interest in this. :-)\n\nJust as a **side note** (I think the change is fine):\n\nIf we consider it as a commutative algebra over Z instead of Z[d] then one wouldn't be able to multiply by \"d\" in a commutative algebra sense.\nThis is relevant for normalization (e.g. differently normalized Eisenstein series wouldn't be related over multiplication by Z) and also for the relations between the polynomial ring in x,y,z over R[d] and the commutative algebra...\n\nHowever that might be ok and in this case I assume it's mostly a practical change for the consistency of sage/category. Strictly speaking the base_ring should maybe also be R[d] and not R and we would need another name like \"other_base_ring\" for the previous base_ring (which is used in the construction logic e.g.). But if everything still works properly your solution is better :-).\n\n''Also if necessary \"d\" could always be considered as e.g. an element of R.\nOr one could just set \"d\"=1 and then remember to replace q by q/d in the end (and maybe add an appropriate power of d in front).''\n\nRegards\nJonas\n\nP.S. If there are questions about my implementation I offer my help. :-)",
    "created_at": "2017-06-10T10:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435608",
    "user": "https://github.com/jjermann"
}
```

<a id='comment:7'></a>
Hi

I'm glad to see some interest in this. :-)

Just as a **side note** (I think the change is fine):

If we consider it as a commutative algebra over Z instead of Z[d] then one wouldn't be able to multiply by "d" in a commutative algebra sense.
This is relevant for normalization (e.g. differently normalized Eisenstein series wouldn't be related over multiplication by Z) and also for the relations between the polynomial ring in x,y,z over R[d] and the commutative algebra...

However that might be ok and in this case I assume it's mostly a practical change for the consistency of sage/category. Strictly speaking the base_ring should maybe also be R[d] and not R and we would need another name like "other_base_ring" for the previous base_ring (which is used in the construction logic e.g.). But if everything still works properly your solution is better :-).

''Also if necessary "d" could always be considered as e.g. an element of R.
Or one could just set "d"=1 and then remember to replace q by q/d in the end (and maybe add an appropriate power of d in front).''

Regards
Jonas

P.S. If there are questions about my implementation I offer my help. :-)



---

archive/issue_comments_435609.json:
```json
{
    "body": "Changing branch from \"u/roed/hecke_triangle_group_cusp_form_base_ring\" to \"906d5b22b1d6d4d9781581ce664f623df732981d\"",
    "created_at": "2017-06-12T18:01:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435609",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/roed/hecke_triangle_group_cusp_form_base_ring" to "906d5b22b1d6d4d9781581ce664f623df732981d"



---

archive/issue_comments_435610.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-12T18:01:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23201#issuecomment-435610",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059885.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-12T18:01:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23201",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23201#event-59885"
}
```
