# Issue 23109: Move richcmp_by_eq_and_lt to structure/richcmp.pyx

archive/issues_022872.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThe function `richcmp_by_eq_and_lt` from `src/sage/rings/asymptotic/misc.py` should be moved to `src/sage/structure/richcmp.pyx`.\n\nI would also like to change the semantics slightly: this would be more useful if the method names (i.e. `_eq_` and `_lt_`) would be an argument like `_richcmp_ = richcmp_by_eq_and_lt(\"_eq_\", \"_lt_\")`. This way, it can also be used with the standard Python methods `__eq__` and `__lt__`.\n\nDepends on #23102\n\nCC:  @fchapoton @dkrenn\n\nComponent: **misc**\n\nAuthor: **Jeroen Demeyer**\n\nBranch/Commit: **[`aa85807`](https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3)**\n\nReviewer: **Daniel Krenn**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23109_\n\n",
    "closed_at": "2017-06-22T07:24:26Z",
    "created_at": "2017-05-31T07:38:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Move richcmp_by_eq_and_lt to structure/richcmp.pyx",
    "type": "issue",
    "updated_at": "2017-06-22T07:24:26Z",
    "url": "https://github.com/sagemath/sage/issues/23109",
    "user": "https://github.com/jdemeyer"
}
```
<div id="comment:0"></div>

The function `richcmp_by_eq_and_lt` from `src/sage/rings/asymptotic/misc.py` should be moved to `src/sage/structure/richcmp.pyx`.

I would also like to change the semantics slightly: this would be more useful if the method names (i.e. `_eq_` and `_lt_`) would be an argument like `_richcmp_ = richcmp_by_eq_and_lt("_eq_", "_lt_")`. This way, it can also be used with the standard Python methods `__eq__` and `__lt__`.

Depends on #23102

CC:  @fchapoton @dkrenn

Component: **misc**

Author: **Jeroen Demeyer**

Branch/Commit: **[`aa85807`](https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3)**

Reviewer: **Daniel Krenn**

_Issue created by migration from https://trac.sagemath.org/ticket/23109_





---

archive/issue_events_319356.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-31T07:38:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319356"
}
```



---

archive/issue_events_319357.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-31T07:38:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319357"
}
```



---

archive/issue_events_319358.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-31T07:38:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319358"
}
```



---

archive/issue_comments_346064.json:
```json
{
    "body": "Replying to [@jdemeyer](https://github.com/sagemath/sage/issues/23109#comment:0):\n> The function `richcmp_by_eq_and_lt` from `src/sage/rings/asymptotic/misc.py` should be moved to `src/sage/structure/richcmp.pyx`.\n\n+1 :)",
    "created_at": "2017-05-31T07:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346064",
    "user": "https://github.com/dkrenn"
}
```

Replying to [@jdemeyer](https://github.com/sagemath/sage/issues/23109#comment:0):
> The function `richcmp_by_eq_and_lt` from `src/sage/rings/asymptotic/misc.py` should be moved to `src/sage/structure/richcmp.pyx`.

+1 :)



---

archive/issue_comments_346065.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI think this function should never have been put in `src/sage/rings/asymptotic` in the first place. When you write general functions, they should be put in a general place, not hidden in `src/sage/rings/asymptotic`.",
    "created_at": "2017-05-31T08:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346065",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

I think this function should never have been put in `src/sage/rings/asymptotic` in the first place. When you write general functions, they should be put in a general place, not hidden in `src/sage/rings/asymptotic`.



---

archive/issue_comments_346066.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFor this reason, most of the contents of `src/sage/rings/asymptotic/misc.py` doesn't belong there. For example, why is `transform_category` not a method of `Category`? Hiding such general functions tends to encourage reinventing the wheel. Maybe people working on a completely different part of Sage need something like `transform_category`. Those people wouldn't know that it exists in `rings/asymptotic`, so they would need to reinvent it. Anyway, I'm not going to deal with that here, only with `richcmp_by_eq_and_lt`.",
    "created_at": "2017-05-31T08:06:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346066",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">comment:3</div>

For this reason, most of the contents of `src/sage/rings/asymptotic/misc.py` doesn't belong there. For example, why is `transform_category` not a method of `Category`? Hiding such general functions tends to encourage reinventing the wheel. Maybe people working on a completely different part of Sage need something like `transform_category`. Those people wouldn't know that it exists in `rings/asymptotic`, so they would need to reinvent it. Anyway, I'm not going to deal with that here, only with `richcmp_by_eq_and_lt`.



---

archive/issue_comments_346067.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n The function `richcmp_by_eq_and_lt` from `src/sage/rings/asymptotic/misc.py` should be moved to `src/sage/structure/richcmp.pyx`.\n+\n+I would also like to change the semantics slightly: this would be more useful if the method names (i.e. `_eq_` and `_lt_`) would be an argument like `_richcmp_ = richcmp_by_eq_and_lt(\"_eq_\", \"_lt_\")`. This way, it can also be used with the standard Python methods `__eq__` and `__lt__`.\n``````\n",
    "created_at": "2017-05-31T08:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346067",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 The function `richcmp_by_eq_and_lt` from `src/sage/rings/asymptotic/misc.py` should be moved to `src/sage/structure/richcmp.pyx`.
+
+I would also like to change the semantics slightly: this would be more useful if the method names (i.e. `_eq_` and `_lt_`) would be an argument like `_richcmp_ = richcmp_by_eq_and_lt("_eq_", "_lt_")`. This way, it can also be used with the standard Python methods `__eq__` and `__lt__`.
``````




---

archive/issue_comments_346068.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nQuestion: do you assume a total order? I am asking because you currently implement `x <= y` as `x == y` or `x < y`. But you could also implement it as `not x > y`. This way, you only need one method call for every comparison.",
    "created_at": "2017-05-31T08:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346068",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Question: do you assume a total order? I am asking because you currently implement `x <= y` as `x == y` or `x < y`. But you could also implement it as `not x > y`. This way, you only need one method call for every comparison.



---

archive/issue_comments_346069.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAnswering my own question... the example shows that the order is *partial*.",
    "created_at": "2017-05-31T09:09:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346069",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Answering my own question... the example shows that the order is *partial*.



---

archive/issue_comments_346070.json:
```json
{
    "body": "Changed dependencies from **#23103** to **#23102**",
    "created_at": "2017-05-31T09:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346070",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#23103** to **#23102**



---

archive/issue_comments_346071.json:
```json
{
    "body": "Branch: **[u/jdemeyer/move_richcmp_by_eq_and_lt_to_structure_richcmp_pyx](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_richcmp_by_eq_and_lt_to_structure_richcmp_pyx)**",
    "created_at": "2017-05-31T09:36:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346071",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/move_richcmp_by_eq_and_lt_to_structure_richcmp_pyx](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_richcmp_by_eq_and_lt_to_structure_richcmp_pyx)**



---

archive/issue_comments_346072.json:
```json
{
    "body": "Commit: **[`98fd0cc`](https://github.com/sagemath/sagetrac-mirror/commit/98fd0ccb74ec626a0c4f8d07af1d37e8d2841a56)**",
    "created_at": "2017-05-31T10:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346072",
    "user": "https://github.com/dkrenn"
}
```

Commit: **[`98fd0cc`](https://github.com/sagemath/sagetrac-mirror/commit/98fd0ccb74ec626a0c4f8d07af1d37e8d2841a56)**



---

archive/issue_comments_346073.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jdemeyer](#comment%3A8):\n\n```\n            if equal_types:\n                other_eq = getattr(other, eq_attr)\n            if other_eq(self):\n                return rich_to_bool(op, 0)\n```\nWhat is the reason for using `eq_attr` of `other` and never the `eq_attr` attribute of `self`?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/256bf191ab0472303bb11e105a246106e894c4ec\"><code>256bf19</code></a></td><td><code>Move richcmp stuff to new file richcmp.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b591b78190f41d6073729a860868edf4ab95a05c\"><code>b591b78</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98fd0ccb74ec626a0c4f8d07af1d37e8d2841a56\"><code>98fd0cc</code></a></td><td><code>Move richcmp_by_eq_and_lt to structure/richcmp.pyx</code></td></tr></table>\n",
    "created_at": "2017-05-31T10:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346073",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jdemeyer](#comment%3A8):

```
            if equal_types:
                other_eq = getattr(other, eq_attr)
            if other_eq(self):
                return rich_to_bool(op, 0)
```
What is the reason for using `eq_attr` of `other` and never the `eq_attr` attribute of `self`?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/256bf191ab0472303bb11e105a246106e894c4ec"><code>256bf19</code></a></td><td><code>Move richcmp stuff to new file richcmp.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b591b78190f41d6073729a860868edf4ab95a05c"><code>b591b78</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98fd0ccb74ec626a0c4f8d07af1d37e8d2841a56"><code>98fd0cc</code></a></td><td><code>Move richcmp_by_eq_and_lt to structure/richcmp.pyx</code></td></tr></table>




---

archive/issue_comments_346074.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@dkrenn](#comment%3A9):\n> What is the reason for using `eq_attr` of `other` and never the `eq_attr` attribute of `self`?\n\nIt's only for efficiency. If we already know `other_eq`, it's more efficient to use it instead. Python's implementation of rich comparisons assumes that `a == b` is the same as `b == a`, so it shouldn't hurt.",
    "created_at": "2017-05-31T10:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346074",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@dkrenn](#comment%3A9):
> What is the reason for using `eq_attr` of `other` and never the `eq_attr` attribute of `self`?

It's only for efficiency. If we already know `other_eq`, it's more efficient to use it instead. Python's implementation of rich comparisons assumes that `a == b` is the same as `b == a`, so it shouldn't hurt.



---

archive/issue_comments_346075.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jdemeyer](#comment%3A10):\n> Replying to [@dkrenn](#comment%3A9):\n> > What is the reason for using `eq_attr` of `other` and never the `eq_attr` attribute of `self`?\n> \n> \n> It's only for efficiency. If we already know `other_eq`, it's more efficient to use it instead. Python's implementation of rich comparisons assumes that `a == b` is the same as `b == a`, so it shouldn't hurt.\n\nOk.",
    "created_at": "2017-05-31T10:54:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346075",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jdemeyer](#comment%3A10):
> Replying to [@dkrenn](#comment%3A9):
> > What is the reason for using `eq_attr` of `other` and never the `eq_attr` attribute of `self`?
> 
> 
> It's only for efficiency. If we already know `other_eq`, it's more efficient to use it instead. Python's implementation of rich comparisons assumes that `a == b` is the same as `b == a`, so it shouldn't hurt.

Ok.



---

archive/issue_events_319359.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-31T11:04:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319359"
}
```



---

archive/issue_comments_346076.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n1. I think the outer parentheses are not needed in\n\n```\n+        cdef bint equal_types = (type(self) is type(other))\n```\n\n2. Is there a reason for using `op_LT` and `Py_LT`?\n\n3. Docstring:\n\n```\n+    - ``other`` -- arbitrary object. If it does have ``eq_attr`` and\n+      ``lt_attr`` methods, those are used for the comparison. Otherwise,\n+      the comparison is undefined.\n```\n`those` vs. `these`. I am not native English speaking, but shoudn't it be the latter?\n\nApart from these comments; the code looks fine. Let's see what the patchbot says.",
    "created_at": "2017-05-31T16:05:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346076",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:13" align="right">comment:13</div>

1. I think the outer parentheses are not needed in

```
+        cdef bint equal_types = (type(self) is type(other))
```

2. Is there a reason for using `op_LT` and `Py_LT`?

3. Docstring:

```
+    - ``other`` -- arbitrary object. If it does have ``eq_attr`` and
+      ``lt_attr`` methods, those are used for the comparison. Otherwise,
+      the comparison is undefined.
```
`those` vs. `these`. I am not native English speaking, but shoudn't it be the latter?

Apart from these comments; the code looks fine. Let's see what the patchbot says.



---

archive/issue_comments_346077.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jdemeyer](#comment%3A10):\n> Replying to [@dkrenn](#comment%3A9):\n> > What is the reason for using `eq_attr` of `other` and never the `eq_attr` attribute of `self`?\n> \n> \n> It's only for efficiency. If we already know `other_eq`, it's more efficient to use it instead. Python's implementation of rich comparisons assumes that `a == b` is the same as `b == a`, so it shouldn't hurt.\n\nI somehow find it strange that the comparision `a == b` is performed by `b` and not `a`...",
    "created_at": "2017-05-31T16:07:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346077",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jdemeyer](#comment%3A10):
> Replying to [@dkrenn](#comment%3A9):
> > What is the reason for using `eq_attr` of `other` and never the `eq_attr` attribute of `self`?
> 
> 
> It's only for efficiency. If we already know `other_eq`, it's more efficient to use it instead. Python's implementation of rich comparisons assumes that `a == b` is the same as `b == a`, so it shouldn't hurt.

I somehow find it strange that the comparision `a == b` is performed by `b` and not `a`...



---

archive/issue_comments_346078.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@dkrenn](#comment%3A13):\n> 1. I think the outer parentheses are not needed in\n> \n> ```\n> +        cdef bint equal_types = (type(self) is type(other))\n> ```\n\nThey are certainly not needed. It's just a style issue: when assigning the result of a comparison-like operator, I find it clearer with the parentheses.",
    "created_at": "2017-05-31T17:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346078",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@dkrenn](#comment%3A13):
> 1. I think the outer parentheses are not needed in
> 
> ```
> +        cdef bint equal_types = (type(self) is type(other))
> ```

They are certainly not needed. It's just a style issue: when assigning the result of a comparison-like operator, I find it clearer with the parentheses.



---

archive/issue_comments_346079.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@dkrenn](#comment%3A14):\n> I somehow find it strange that the comparision `a == b` is performed by `b` and not `a`...\n\nIt might be strange but it's not wrong. From [PEP 207](https://www.python.org/dev/peps/pep-0207/):\n\n```\n    4 The reflexivity rules *are* assumed by Python.  Thus, the\n      interpreter may swap y>x with x<y, y>=x with x<=y, and may swap\n      the arguments of x==y and x!=y.\n```",
    "created_at": "2017-05-31T17:32:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346079",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@dkrenn](#comment%3A14):
> I somehow find it strange that the comparision `a == b` is performed by `b` and not `a`...

It might be strange but it's not wrong. From [PEP 207](https://www.python.org/dev/peps/pep-0207/):

```
    4 The reflexivity rules *are* assumed by Python.  Thus, the
      interpreter may swap y>x with x<y, y>=x with x<=y, and may swap
      the arguments of x==y and x!=y.
```



---

archive/issue_events_319360.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-31T20:14:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319360"
}
```



---

archive/issue_events_319361.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-31T20:14:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319361"
}
```



---

archive/issue_comments_346080.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jdemeyer](#comment%3A15):\n> Replying to [@dkrenn](#comment%3A13):\n> > 1. I think the outer parentheses are not needed in\n> > \n> > ```\n> > +        cdef bint equal_types = (type(self) is type(other))\n> > ```\n> \n> \n> They are certainly not needed. It's just a style issue: when assigning the result of a comparison-like operator, I find it clearer with the parentheses.\n\nOk, clearer is always better ;)",
    "created_at": "2017-06-01T09:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346080",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jdemeyer](#comment%3A15):
> Replying to [@dkrenn](#comment%3A13):
> > 1. I think the outer parentheses are not needed in
> > 
> > ```
> > +        cdef bint equal_types = (type(self) is type(other))
> > ```
> 
> 
> They are certainly not needed. It's just a style issue: when assigning the result of a comparison-like operator, I find it clearer with the parentheses.

Ok, clearer is always better ;)



---

archive/issue_comments_346081.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment%3A16):\n> Replying to [@dkrenn](#comment%3A14):\n> > I somehow find it strange that the comparision `a == b` is performed by `b` and not `a`...\n> \n> \n> It might be strange but it's not wrong. From [PEP 207](https://www.python.org/dev/peps/pep-0207/):\n> \n> ```\n>     4 The reflexivity rules *are* assumed by Python.  Thus, the\n>       interpreter may swap y>x with x<y, y>=x with x<=y, and may swap\n>       the arguments of x==y and x!=y.\n> ```\n\nOk, so let's keep it.",
    "created_at": "2017-06-01T09:40:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346081",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment%3A16):
> Replying to [@dkrenn](#comment%3A14):
> > I somehow find it strange that the comparision `a == b` is performed by `b` and not `a`...
> 
> 
> It might be strange but it's not wrong. From [PEP 207](https://www.python.org/dev/peps/pep-0207/):
> 
> ```
>     4 The reflexivity rules *are* assumed by Python.  Thus, the
>       interpreter may swap y>x with x<y, y>=x with x<=y, and may swap
>       the arguments of x==y and x!=y.
> ```

Ok, so let's keep it.



---

archive/issue_comments_346082.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e732456a71ad73bbd82bbc9fe9fa8c663d8e43cf\"><code>e732456</code></a></td><td><code>Use Py_EQ instead of op_EQ in Cython code</code></td></tr></table>\n",
    "created_at": "2017-06-01T09:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346082",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e732456a71ad73bbd82bbc9fe9fa8c663d8e43cf"><code>e732456</code></a></td><td><code>Use Py_EQ instead of op_EQ in Cython code</code></td></tr></table>




---

archive/issue_comments_346083.json:
```json
{
    "body": "Changed commit from **[`98fd0cc`](https://github.com/sagemath/sagetrac-mirror/commit/98fd0ccb74ec626a0c4f8d07af1d37e8d2841a56)** to **[`e732456`](https://github.com/sagemath/sagetrac-mirror/commit/e732456a71ad73bbd82bbc9fe9fa8c663d8e43cf)**",
    "created_at": "2017-06-01T09:41:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346083",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`98fd0cc`](https://github.com/sagemath/sagetrac-mirror/commit/98fd0ccb74ec626a0c4f8d07af1d37e8d2841a56)** to **[`e732456`](https://github.com/sagemath/sagetrac-mirror/commit/e732456a71ad73bbd82bbc9fe9fa8c663d8e43cf)**



---

archive/issue_events_319362.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-01T09:42:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319362"
}
```



---

archive/issue_events_319363.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-01T09:42:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319363"
}
```



---

archive/issue_comments_346084.json:
```json
{
    "body": "Changed commit from **[`e732456`](https://github.com/sagemath/sagetrac-mirror/commit/e732456a71ad73bbd82bbc9fe9fa8c663d8e43cf)** to **[`9db7dcc`](https://github.com/sagemath/sagetrac-mirror/commit/9db7dccf0be5f0cd93071541556dac147e9cdfeb)**",
    "created_at": "2017-06-18T09:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346084",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e732456`](https://github.com/sagemath/sagetrac-mirror/commit/e732456a71ad73bbd82bbc9fe9fa8c663d8e43cf)** to **[`9db7dcc`](https://github.com/sagemath/sagetrac-mirror/commit/9db7dccf0be5f0cd93071541556dac147e9cdfeb)**



---

archive/issue_comments_346085.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49b6f76c43231e4bf600b187b32fed6b625c6adb\"><code>49b6f76</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d343d9d1f1d5c9b7e35f518a1f85604082e51ca0\"><code>d343d9d</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3aac3ccf0141d51e4c97ea852942b8c2196b9a13\"><code>3aac3cc</code></a></td><td><code>Typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657\"><code>86e9fcf</code></a></td><td><code>Install slot wrappers for rich comparison methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251\"><code>4d1021b</code></a></td><td><code>Further fixes and tests for richcmp_method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/604f42354fd64948f69ef6c24d449122236f96b0\"><code>604f423</code></a></td><td><code>Move richcmp_by_eq_and_lt to structure/richcmp.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9db7dccf0be5f0cd93071541556dac147e9cdfeb\"><code>9db7dcc</code></a></td><td><code>Use Py_EQ instead of op_EQ in Cython code</code></td></tr></table>\n",
    "created_at": "2017-06-18T09:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346085",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49b6f76c43231e4bf600b187b32fed6b625c6adb"><code>49b6f76</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d343d9d1f1d5c9b7e35f518a1f85604082e51ca0"><code>d343d9d</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3aac3ccf0141d51e4c97ea852942b8c2196b9a13"><code>3aac3cc</code></a></td><td><code>Typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657"><code>86e9fcf</code></a></td><td><code>Install slot wrappers for rich comparison methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251"><code>4d1021b</code></a></td><td><code>Further fixes and tests for richcmp_method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/604f42354fd64948f69ef6c24d449122236f96b0"><code>604f423</code></a></td><td><code>Move richcmp_by_eq_and_lt to structure/richcmp.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9db7dccf0be5f0cd93071541556dac147e9cdfeb"><code>9db7dcc</code></a></td><td><code>Use Py_EQ instead of op_EQ in Cython code</code></td></tr></table>




---

archive/issue_events_319364.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2017-06-20T15:05:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319364"
}
```



---

archive/issue_events_319365.json:
```json
{
    "actor": "https://github.com/dkrenn",
    "created_at": "2017-06-20T15:05:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319365"
}
```



---

archive/issue_comments_346086.json:
```json
{
    "body": "Reviewer: **Daniel Krenn**",
    "created_at": "2017-06-20T15:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346086",
    "user": "https://github.com/dkrenn"
}
```

Reviewer: **Daniel Krenn**



---

archive/issue_comments_346087.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nPatchbot found failing tests in richcmp.pyx",
    "created_at": "2017-06-20T15:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346087",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:23" align="right">comment:23</div>

Patchbot found failing tests in richcmp.pyx



---

archive/issue_comments_346088.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nRight, this got broken by the recent changes in #23102.",
    "created_at": "2017-06-20T20:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346088",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Right, this got broken by the recent changes in #23102.



---

archive/issue_comments_346089.json:
```json
{
    "body": "Changed commit from **[`9db7dcc`](https://github.com/sagemath/sagetrac-mirror/commit/9db7dccf0be5f0cd93071541556dac147e9cdfeb)** to **[`aa85807`](https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3)**",
    "created_at": "2017-06-21T12:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346089",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9db7dcc`](https://github.com/sagemath/sagetrac-mirror/commit/9db7dccf0be5f0cd93071541556dac147e9cdfeb)** to **[`aa85807`](https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3)**



---

archive/issue_comments_346090.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3\"><code>aa85807</code></a></td><td><code>Fix richcmp_by_eq_and_lt example</code></td></tr></table>\n",
    "created_at": "2017-06-21T12:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346090",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3"><code>aa85807</code></a></td><td><code>Fix richcmp_by_eq_and_lt example</code></td></tr></table>




---

archive/issue_events_319366.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-21T12:32:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319366"
}
```



---

archive/issue_events_319367.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-21T12:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319367"
}
```



---

archive/issue_comments_346091.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@sagetrac-git](#comment%3A25):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3\"><code>aa85807</code></a></td><td><code>Fix richcmp_by_eq_and_lt example</code></td></tr></table>\n\nThank you for fixing this; LGTM. As soon as the patchbot confirms, this is a positive review from my side.",
    "created_at": "2017-06-21T12:47:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346091",
    "user": "https://github.com/dkrenn"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@sagetrac-git](#comment%3A25):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3"><code>aa85807</code></a></td><td><code>Fix richcmp_by_eq_and_lt example</code></td></tr></table>

Thank you for fixing this; LGTM. As soon as the patchbot confirms, this is a positive review from my side.



---

archive/issue_events_319368.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-21T12:54:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319368"
}
```



---

archive/issue_events_319369.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-21T12:54:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319369"
}
```



---

archive/issue_comments_346092.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThe previous patchbot report only showed failures in `richcmp.pyx`. I fixed those doctests and did not change any code, so it should be fine. Thanks for the review!",
    "created_at": "2017-06-21T12:54:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346092",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

The previous patchbot report only showed failures in `richcmp.pyx`. I fixed those doctests and did not change any code, so it should be fine. Thanks for the review!



---

archive/issue_events_319370.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:24:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319370"
}
```



---

archive/issue_events_319371.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9e0a949e8de829dddc0bb65168b2f36318b08ceb",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-22T07:24:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23109#event-319371"
}
```



---

archive/issue_comments_346093.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/move_richcmp_by_eq_and_lt_to_structure_richcmp_pyx](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_richcmp_by_eq_and_lt_to_structure_richcmp_pyx)** to **[`aa85807`](https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3)**",
    "created_at": "2017-06-22T07:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23109",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23109#issuecomment-346093",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/move_richcmp_by_eq_and_lt_to_structure_richcmp_pyx](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/move_richcmp_by_eq_and_lt_to_structure_richcmp_pyx)** to **[`aa85807`](https://github.com/sagemath/sagetrac-mirror/commit/aa858075bb8dadd839ae5c744b8e81fb82e7f1c3)**
