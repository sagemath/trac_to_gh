# Issue 23971: Euclidean division in quadratic imaginary orders

archive/issues_023734.json:
```json
{
    "assignees": [],
    "body": "The result of a `//` should remain in the same ring, but it currently does not:\n\n```\nsage: (GaussianIntegers()(1)//1).parent()\nNumber Field in I with defining polynomial x^2 + 1\n```\n\nThis is caused by order elements inheriting from `FieldElement` which makes the assumption that `_floordiv_` and `_div_` are the same.\n\nBranch/Commit: **[u/jdemeyer/floordiv_in_orders_returns_a_number_field_element](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/floordiv_in_orders_returns_a_number_field_element) @ [1ccb1ba](https://github.com/sagemath/sagetrac-mirror/commit/1ccb1ba157361a7b70fe7cf2d22163666f3bd838)**\n\nReviewer: **David Roe, Julian R\u00fcth**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **number fields**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23971_\n\n",
    "created_at": "2017-10-06T00:59:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Euclidean division in quadratic imaginary orders",
    "type": "issue",
    "updated_at": "2022-12-29T01:40:01Z",
    "url": "https://github.com/sagemath/sage/issues/23971",
    "user": "https://github.com/saraedum"
}
```
The result of a `//` should remain in the same ring, but it currently does not:

```
sage: (GaussianIntegers()(1)//1).parent()
Number Field in I with defining polynomial x^2 + 1
```

This is caused by order elements inheriting from `FieldElement` which makes the assumption that `_floordiv_` and `_div_` are the same.

Branch/Commit: **[u/jdemeyer/floordiv_in_orders_returns_a_number_field_element](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/floordiv_in_orders_returns_a_number_field_element) @ [1ccb1ba](https://github.com/sagemath/sagetrac-mirror/commit/1ccb1ba157361a7b70fe7cf2d22163666f3bd838)**

Reviewer: **David Roe, Julian Rüth**

Author: **Jeroen Demeyer**

Component: **number fields**

_Issue created by migration from https://trac.sagemath.org/ticket/23971_





---

archive/issue_events_332884.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-10-06T00:59:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332884"
}
```



---

archive/issue_events_332885.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-10-06T00:59:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
    "label_color": "0000ff",
    "label_name": "c: number fields",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332885"
}
```



---

archive/issue_events_332886.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-10-06T00:59:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332886"
}
```



---

archive/issue_events_332887.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-10-06T00:59:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332887"
}
```



---

archive/issue_comments_362033.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThis is tricky, since most orders in number fields are not Euclidean, so quotient with remainder doesn't make sense.",
    "created_at": "2017-10-06T02:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362033",
    "user": "https://github.com/roed314"
}
```

<div id="comment:1" align="right">comment:1</div>

This is tricky, since most orders in number fields are not Euclidean, so quotient with remainder doesn't make sense.



---

archive/issue_comments_362034.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWell, the correct behaviour would be to do the right thing in the imaginary quadratic orders which are naturally Euclidean and raise an exception otherwise.",
    "created_at": "2017-10-06T07:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362034",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

Well, the correct behaviour would be to do the right thing in the imaginary quadratic orders which are naturally Euclidean and raise an exception otherwise.



---

archive/issue_comments_362035.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFor me it would be sufficient for `a//b` to be `parent(a/b)` and raise an exception (NotImplemented?) if that is not in the same ring.",
    "created_at": "2017-10-07T15:53:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362035",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:3" align="right">comment:3</div>

For me it would be sufficient for `a//b` to be `parent(a/b)` and raise an exception (NotImplemented?) if that is not in the same ring.



---

archive/issue_comments_362036.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@jdemeyer](#comment:2):\n> Well, the correct behaviour would be to do the right thing in the imaginary quadratic orders which are naturally Euclidean and raise an exception otherwise.\n\nThere are other orders which are norm Euclidean (some real quadratic orders for example).  See http://www.fen.bilkent.edu.tr/~franz/publ/survey.pdf\n\nOf course, it's computationally more difficult to find a remainder when the unit group is nontrivial.",
    "created_at": "2017-10-18T21:47:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362036",
    "user": "https://github.com/roed314"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@jdemeyer](#comment:2):
> Well, the correct behaviour would be to do the right thing in the imaginary quadratic orders which are naturally Euclidean and raise an exception otherwise.

There are other orders which are norm Euclidean (some real quadratic orders for example).  See http://www.fen.bilkent.edu.tr/~franz/publ/survey.pdf

Of course, it's computationally more difficult to find a remainder when the unit group is nontrivial.



---

archive/issue_comments_362037.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2017-10-19T09:06:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362037",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_362038.json:
```json
{
    "body": "Branch: **[u/jdemeyer/floordiv_in_orders_returns_a_number_field_element](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/floordiv_in_orders_returns_a_number_field_element)**",
    "created_at": "2017-10-20T13:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362038",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/floordiv_in_orders_returns_a_number_field_element](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/floordiv_in_orders_returns_a_number_field_element)**



---

archive/issue_comments_362039.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d56994a76ca55601c39c1945feade5e7cbada0c\">1d56994</a></td><td><code>Simplify number field division</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c36aaff969295f404ef35f83927e5289df4d7542\">c36aaff</a></td><td><code>Implement Euclidean division in number fields</code></td></tr></table>\n",
    "created_at": "2017-10-20T13:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362039",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d56994a76ca55601c39c1945feade5e7cbada0c">1d56994</a></td><td><code>Simplify number field division</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c36aaff969295f404ef35f83927e5289df4d7542">c36aaff</a></td><td><code>Implement Euclidean division in number fields</code></td></tr></table>




---

archive/issue_comments_362040.json:
```json
{
    "body": "Dependencies: **#24079**",
    "created_at": "2017-10-20T13:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362040",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#24079**



---

archive/issue_comments_362041.json:
```json
{
    "body": "Commit: **[c36aaff](https://github.com/sagemath/sagetrac-mirror/commit/c36aaff969295f404ef35f83927e5289df4d7542)**",
    "created_at": "2017-10-20T13:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362041",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[c36aaff](https://github.com/sagemath/sagetrac-mirror/commit/c36aaff969295f404ef35f83927e5289df4d7542)**



---

archive/issue_events_332888.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-20T13:44:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332888"
}
```



---

archive/issue_events_332889.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-20T13:44:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "title_is": "Euclidean division in quadratic imaginary orders",
    "title_was": "floordiv in orders returns a number field element",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332889"
}
```



---

archive/issue_comments_362042.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nFirst, the patchbot is unhappy: there's a strange merge failure on Cygwin, complaining about `CONFLICT (content): Merge conflict in src/sage/parallel/map_reduce.py` (which I don't understand, since other merges into `8.1.beta8` succeeded), and a test failure in `sage/structure/element.pyx`.\n\nSome thoughts on the code:\n\n* Julian suggested having `a//b` return `parent(a/b)` when b divides `a` and raise an error otherwise.  This makes sense for any integral domain, and I think it's a good idea: so often this is what we want for floor division.  It's a bit strange to have different behavior for different `b`, but we already do this to some extent: `b=0` will always raise an error.\n\n* Why did you choose to round to even?  It would be more consistent with `QQ` to round down.\n\n* I think we should also implement `__mod__` and `quo_rem` to match this implementation of floor division.  This doesn't have to be on this ticket.",
    "created_at": "2017-10-20T16:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362042",
    "user": "https://github.com/roed314"
}
```

<div id="comment:9" align="right">comment:9</div>

First, the patchbot is unhappy: there's a strange merge failure on Cygwin, complaining about `CONFLICT (content): Merge conflict in src/sage/parallel/map_reduce.py` (which I don't understand, since other merges into `8.1.beta8` succeeded), and a test failure in `sage/structure/element.pyx`.

Some thoughts on the code:

* Julian suggested having `a//b` return `parent(a/b)` when b divides `a` and raise an error otherwise.  This makes sense for any integral domain, and I think it's a good idea: so often this is what we want for floor division.  It's a bit strange to have different behavior for different `b`, but we already do this to some extent: `b=0` will always raise an error.

* Why did you choose to round to even?  It would be more consistent with `QQ` to round down.

* I think we should also implement `__mod__` and `quo_rem` to match this implementation of floor division.  This doesn't have to be on this ticket.



---

archive/issue_comments_362043.json:
```json
{
    "body": "Reviewer: **David Roe**",
    "created_at": "2017-10-20T16:59:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362043",
    "user": "https://github.com/roed314"
}
```

Reviewer: **David Roe**



---

archive/issue_events_332890.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-10-20T16:59:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332890"
}
```



---

archive/issue_events_332891.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2017-10-20T16:59:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332891"
}
```



---

archive/issue_comments_362044.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@roed314](#comment:9):\n> First, the patchbot is unhappy: there's a strange merge failure on Cygwin, complaining about `CONFLICT (content): Merge conflict in src/sage/parallel/map_reduce.py`\n\nThat happens on every ticket, it must be a problem with that bot.",
    "created_at": "2017-10-20T17:51:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362044",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@roed314](#comment:9):
> First, the patchbot is unhappy: there's a strange merge failure on Cygwin, complaining about `CONFLICT (content): Merge conflict in src/sage/parallel/map_reduce.py`

That happens on every ticket, it must be a problem with that bot.



---

archive/issue_comments_362045.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@roed314](#comment:9):\n> Julian suggested having `a//b` return `parent(a/b)` when b divides `a` and raise an error otherwise.\n\nSurely, you made a mistake somewhere in this sentence (`a//b` should not return a ring!). And I can't guess what you meant.",
    "created_at": "2017-10-20T17:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362045",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@roed314](#comment:9):
> Julian suggested having `a//b` return `parent(a/b)` when b divides `a` and raise an error otherwise.

Surely, you made a mistake somewhere in this sentence (`a//b` should not return a ring!). And I can't guess what you meant.



---

archive/issue_comments_362046.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@roed314](#comment:9):\n> * Why did you choose to round to even?  It would be more consistent with `QQ` to round down.\n\nConsistency with `QQ` was not a goal here. I guess it could be done but then it becomes less obvious to generalize to all number field elements. You cannot just round down the first component (the `x` in `x + y sqrt(D)`) in all cases. So either we would need to round down `x` only when `y` is zero or an integer, but that seems like needless complication to me.\n\nBesides, I like the idea that `x // y` gives the closest possible order element to `x / y`.",
    "created_at": "2017-10-20T18:09:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362046",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@roed314](#comment:9):
> * Why did you choose to round to even?  It would be more consistent with `QQ` to round down.

Consistency with `QQ` was not a goal here. I guess it could be done but then it becomes less obvious to generalize to all number field elements. You cannot just round down the first component (the `x` in `x + y sqrt(D)`) in all cases. So either we would need to round down `x` only when `y` is zero or an integer, but that seems like needless complication to me.

Besides, I like the idea that `x // y` gives the closest possible order element to `x / y`.



---

archive/issue_comments_362047.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jdemeyer](#comment:12):\n> Replying to [@roed314](#comment:9):\n> > Julian suggested having `a//b` return `parent(a/b)` when b divides `a` and raise an error otherwise.\n\n> \n> Surely, you made a mistake somewhere in this sentence (`a//b` should not return a ring!). And I can't guess what you meant.\n\nSay `a` and `b` both have an order `R` as their parent.  I meant that `a//b` should return `R(a/b)`.",
    "created_at": "2017-10-20T20:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362047",
    "user": "https://github.com/roed314"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jdemeyer](#comment:12):
> Replying to [@roed314](#comment:9):
> > Julian suggested having `a//b` return `parent(a/b)` when b divides `a` and raise an error otherwise.

> 
> Surely, you made a mistake somewhere in this sentence (`a//b` should not return a ring!). And I can't guess what you meant.

Say `a` and `b` both have an order `R` as their parent.  I meant that `a//b` should return `R(a/b)`.



---

archive/issue_comments_362048.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@roed314](#comment:14):\n> Say `a` and `b` both have an order `R` as their parent.  I meant that `a//b` should return `R(a/b)`.\n\nOK, I see what you mean now. I guess a better approach would be: `a//b` returns either an order element `t` such that `N(a/b - t) < 1` or it raises `ArithmeticError`. That would generalize both the Euclidean division and the exact division.",
    "created_at": "2017-10-20T21:18:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362048",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@roed314](#comment:14):
> Say `a` and `b` both have an order `R` as their parent.  I meant that `a//b` should return `R(a/b)`.

OK, I see what you mean now. I guess a better approach would be: `a//b` returns either an order element `t` such that `N(a/b - t) < 1` or it raises `ArithmeticError`. That would generalize both the Euclidean division and the exact division.



---

archive/issue_comments_362049.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@jdemeyer](#comment:15):\n> Replying to [@roed314](#comment:14):\n> > Say `a` and `b` both have an order `R` as their parent.  I meant that `a//b` should return `R(a/b)`.\n\n> \n> OK, I see what you mean now. I guess a better approach would be: `a//b` returns either an order element `t` such that `N(a/b - t) < 1` or it raises `ArithmeticError`. That would generalize both the Euclidean division and the exact division.\n\nAgreed: I think that's the optimal solution.  Figuring out what that `t` is in the non-imaginary quadratic case is probably beyond the scope of this ticket.",
    "created_at": "2017-10-20T21:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362049",
    "user": "https://github.com/roed314"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@jdemeyer](#comment:15):
> Replying to [@roed314](#comment:14):
> > Say `a` and `b` both have an order `R` as their parent.  I meant that `a//b` should return `R(a/b)`.

> 
> OK, I see what you mean now. I guess a better approach would be: `a//b` returns either an order element `t` such that `N(a/b - t) < 1` or it raises `ArithmeticError`. That would generalize both the Euclidean division and the exact division.

Agreed: I think that's the optimal solution.  Figuring out what that `t` is in the non-imaginary quadratic case is probably beyond the scope of this ticket.



---

archive/issue_comments_362050.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nUnfortunately, this introduces an additional complication that the order is no longer guaranteed to be maximal...",
    "created_at": "2017-10-23T09:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362050",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Unfortunately, this introduces an additional complication that the order is no longer guaranteed to be maximal...



---

archive/issue_comments_362051.json:
```json
{
    "body": "Changed commit from **[c36aaff](https://github.com/sagemath/sagetrac-mirror/commit/c36aaff969295f404ef35f83927e5289df4d7542)** to **[0c1ceea](https://github.com/sagemath/sagetrac-mirror/commit/0c1ceea7b0a0da0cb9c593052973aee76e114b0a)**",
    "created_at": "2017-10-23T14:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362051",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c36aaff](https://github.com/sagemath/sagetrac-mirror/commit/c36aaff969295f404ef35f83927e5289df4d7542)** to **[0c1ceea](https://github.com/sagemath/sagetrac-mirror/commit/0c1ceea7b0a0da0cb9c593052973aee76e114b0a)**



---

archive/issue_comments_362052.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c1ceea7b0a0da0cb9c593052973aee76e114b0a\">0c1ceea</a></td><td><code>Implement Euclidean division in number fields</code></td></tr></table>\n",
    "created_at": "2017-10-23T14:00:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362052",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c1ceea7b0a0da0cb9c593052973aee76e114b0a">0c1ceea</a></td><td><code>Implement Euclidean division in number fields</code></td></tr></table>




---

archive/issue_events_332892.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-23T14:06:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332892"
}
```



---

archive/issue_events_332893.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-23T14:06:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332893"
}
```



---

archive/issue_comments_362053.json:
```json
{
    "body": "Changed dependencies from **#24079** to none",
    "created_at": "2017-10-23T14:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362053",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#24079** to none



---

archive/issue_comments_362054.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd8dbfa3271dfc96e1b9e88b6c77d6658035f5c3\">dd8dbfa</a></td><td><code>Remove failing doctests</code></td></tr></table>\n",
    "created_at": "2017-10-27T07:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362054",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd8dbfa3271dfc96e1b9e88b6c77d6658035f5c3">dd8dbfa</a></td><td><code>Remove failing doctests</code></td></tr></table>




---

archive/issue_comments_362055.json:
```json
{
    "body": "Changed commit from **[0c1ceea](https://github.com/sagemath/sagetrac-mirror/commit/0c1ceea7b0a0da0cb9c593052973aee76e114b0a)** to **[dd8dbfa](https://github.com/sagemath/sagetrac-mirror/commit/dd8dbfa3271dfc96e1b9e88b6c77d6658035f5c3)**",
    "created_at": "2017-10-27T07:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362055",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0c1ceea](https://github.com/sagemath/sagetrac-mirror/commit/0c1ceea7b0a0da0cb9c593052973aee76e114b0a)** to **[dd8dbfa](https://github.com/sagemath/sagetrac-mirror/commit/dd8dbfa3271dfc96e1b9e88b6c77d6658035f5c3)**



---

archive/issue_events_332894.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-21T17:04:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332894"
}
```



---

archive/issue_events_332895.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-21T17:04:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332895"
}
```



---

archive/issue_comments_362056.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nSorry, I had somehow forgotten about this ticket. Some comments:\n\n* `intentially` should read `intentionally`\n* The patchbot (coverage) is unhappy about the removal of the floordiv example\n* There are some failing doctests it seems\n* Why don't we implement my original proposal as well? I.e., `a//b==R(a/b)` if `a/b in R`?",
    "created_at": "2018-05-21T17:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362056",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:22" align="right">comment:22</div>

Sorry, I had somehow forgotten about this ticket. Some comments:

* `intentially` should read `intentionally`
* The patchbot (coverage) is unhappy about the removal of the floordiv example
* There are some failing doctests it seems
* Why don't we implement my original proposal as well? I.e., `a//b==R(a/b)` if `a/b in R`?



---

archive/issue_comments_362057.json:
```json
{
    "body": "Changed reviewer from **David Roe** to **David Roe, Julian R\u00fcth**",
    "created_at": "2018-05-21T17:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362057",
    "user": "https://github.com/saraedum"
}
```

Changed reviewer from **David Roe** to **David Roe, Julian Rüth**



---

archive/issue_comments_362058.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@saraedum](#comment:22):\n> * Why don't we implement my original proposal as well? I.e., `a//b==R(a/b)` if `a/b in R`?\n\nWhat do you mean **exactly**? I thought I did implement that, but it seems that you don't agree.",
    "created_at": "2018-06-12T09:41:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362058",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@saraedum](#comment:22):
> * Why don't we implement my original proposal as well? I.e., `a//b==R(a/b)` if `a/b in R`?

What do you mean **exactly**? I thought I did implement that, but it seems that you don't agree.



---

archive/issue_comments_362059.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c87a6260bffb68b3b6342d50da39c0ee1cb363ba\">c87a626</a></td><td><code>Implement Euclidean division in number fields</code></td></tr></table>\n",
    "created_at": "2018-06-12T12:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362059",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c87a6260bffb68b3b6342d50da39c0ee1cb363ba">c87a626</a></td><td><code>Implement Euclidean division in number fields</code></td></tr></table>




---

archive/issue_comments_362060.json:
```json
{
    "body": "Changed commit from **[dd8dbfa](https://github.com/sagemath/sagetrac-mirror/commit/dd8dbfa3271dfc96e1b9e88b6c77d6658035f5c3)** to **[c87a626](https://github.com/sagemath/sagetrac-mirror/commit/c87a6260bffb68b3b6342d50da39c0ee1cb363ba)**",
    "created_at": "2018-06-12T12:02:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362060",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dd8dbfa](https://github.com/sagemath/sagetrac-mirror/commit/dd8dbfa3271dfc96e1b9e88b6c77d6658035f5c3)** to **[c87a626](https://github.com/sagemath/sagetrac-mirror/commit/c87a6260bffb68b3b6342d50da39c0ee1cb363ba)**



---

archive/issue_events_332896.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-12T12:08:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332896"
}
```



---

archive/issue_events_332897.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-06-12T12:08:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332897"
}
```



---

archive/issue_comments_362061.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ccb1ba157361a7b70fe7cf2d22163666f3bd838\">1ccb1ba</a></td><td><code>Implement Euclidean division in number fields</code></td></tr></table>\n",
    "created_at": "2018-06-19T09:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362061",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ccb1ba157361a7b70fe7cf2d22163666f3bd838">1ccb1ba</a></td><td><code>Implement Euclidean division in number fields</code></td></tr></table>




---

archive/issue_comments_362062.json:
```json
{
    "body": "Changed commit from **[c87a626](https://github.com/sagemath/sagetrac-mirror/commit/c87a6260bffb68b3b6342d50da39c0ee1cb363ba)** to **[1ccb1ba](https://github.com/sagemath/sagetrac-mirror/commit/1ccb1ba157361a7b70fe7cf2d22163666f3bd838)**",
    "created_at": "2018-06-19T09:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362062",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c87a626](https://github.com/sagemath/sagetrac-mirror/commit/c87a6260bffb68b3b6342d50da39c0ee1cb363ba)** to **[1ccb1ba](https://github.com/sagemath/sagetrac-mirror/commit/1ccb1ba157361a7b70fe7cf2d22163666f3bd838)**



---

archive/issue_comments_362063.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jdemeyer](#comment:23):\n> Replying to [@saraedum](#comment:22):\n> > * Why don't we implement my original proposal as well? I.e., `a//b==R(a/b)` if `a/b in R`?\n\n> \n> What do you mean **exactly**? I thought I did implement that, but it seems that you don't agree.\n\nThis ticket was originally not only about quadratic imaginary orders (I think you changed the scope at some point.) I think that `a//b` should always return `a/b` if that is in the original ring\u2026I really just want `a//1` not to fail.",
    "created_at": "2018-06-19T13:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23971#issuecomment-362063",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jdemeyer](#comment:23):
> Replying to [@saraedum](#comment:22):
> > * Why don't we implement my original proposal as well? I.e., `a//b==R(a/b)` if `a/b in R`?

> 
> What do you mean **exactly**? I thought I did implement that, but it seems that you don't agree.

This ticket was originally not only about quadratic imaginary orders (I think you changed the scope at some point.) I think that `a//b` should always return `a/b` if that is in the original ring…I really just want `a//1` not to fail.



---

archive/issue_events_332898.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-04T16:08:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332898"
}
```



---

archive/issue_events_332899.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-07-04T16:08:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332899"
}
```



---

archive/issue_events_332900.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:40:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23971",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23971#event-332900"
}
```
