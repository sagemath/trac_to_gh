# Issue 23930: Doctest failures in Judson's abstract algebra book

archive/issues_023693.json:
```json
{
    "body": "See the logs of [arando](https://patchbot.sagemath.org/log/23925/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-09-26%2009:40:16?short)\n\n```\nsage -t --long src/sage/tests/books/judson-abstract-algebra/actions-sage.py\n**********************************************************************\nFile \"src/sage/tests/books/judson-abstract-algebra/actions-sage.py\", line 115, in sage.tests.books.judson-abstract-algebra.actions-sage\nFailed example:\n    A.orbits()\nExpected:\n    [['000', '001', '010', '100', '011', '101', '110', '111']]\nGot:\n    [['010', '011', '001', '100', '101', '000', '110', '111']]\n**********************************************************************\nFile \"src/sage/tests/books/judson-abstract-algebra/actions-sage.py\", line 126, in sage.tests.books.judson-abstract-algebra.actions-sage\nFailed example:\n    S.list()\nExpected:\n    [(),\n     ('001','100','010')('011','101','110'),\n     ('010','100')('011','101'),\n     ('001','010','100')('011','110','101'),\n     ('001','100')('011','110'),\n     ('001','010')('101','110')]\nGot:\n    [(),\n     ('010','100')('011','101'),\n     ('010','100','001')('011','110','101'),\n     ('011','110')('001','100'),\n     ('010','001','100')('011','101','110'),\n     ('010','001')('110','101')]\n**********************************************************************\n1 item had failures:\n   2 of  35 in sage.tests.books.judson-abstract-algebra.actions-sage\n    [34 tests, 2 failures, 0.52 s]\n------------------------------------\n```\nSince this is a machine with a lot of optional packages it is likely that it is caused by that. The results are mathematically correct, it is just that the order of the output changed.\n\nCC:  @rbeezer @videlec\n\nBranch/Commit: e633e065cf33be46dd653b2ef9da04cfada03c23\n\nReviewer: Vincent Delecroix\n\nAuthor: Maarten Derickx\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23930\n\n",
    "closed_at": "2017-10-01T00:19:12Z",
    "created_at": "2017-09-26T10:03:56Z",
    "labels": [
        "component: doctest framework",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Doctest failures in Judson's abstract algebra book",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23930",
    "user": "https://github.com/koffie"
}
```
See the logs of [arando](https://patchbot.sagemath.org/log/23925/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-09-26%2009:40:16?short)

```
sage -t --long src/sage/tests/books/judson-abstract-algebra/actions-sage.py
**********************************************************************
File "src/sage/tests/books/judson-abstract-algebra/actions-sage.py", line 115, in sage.tests.books.judson-abstract-algebra.actions-sage
Failed example:
    A.orbits()
Expected:
    [['000', '001', '010', '100', '011', '101', '110', '111']]
Got:
    [['010', '011', '001', '100', '101', '000', '110', '111']]
**********************************************************************
File "src/sage/tests/books/judson-abstract-algebra/actions-sage.py", line 126, in sage.tests.books.judson-abstract-algebra.actions-sage
Failed example:
    S.list()
Expected:
    [(),
     ('001','100','010')('011','101','110'),
     ('010','100')('011','101'),
     ('001','010','100')('011','110','101'),
     ('001','100')('011','110'),
     ('001','010')('101','110')]
Got:
    [(),
     ('010','100')('011','101'),
     ('010','100','001')('011','110','101'),
     ('011','110')('001','100'),
     ('010','001','100')('011','101','110'),
     ('010','001')('110','101')]
**********************************************************************
1 item had failures:
   2 of  35 in sage.tests.books.judson-abstract-algebra.actions-sage
    [34 tests, 2 failures, 0.52 s]
------------------------------------
```
Since this is a machine with a lot of optional packages it is likely that it is caused by that. The results are mathematically correct, it is just that the order of the output changed.

CC:  @rbeezer @videlec

Branch/Commit: e633e065cf33be46dd653b2ef9da04cfada03c23

Reviewer: Vincent Delecroix

Author: Maarten Derickx

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23930





---

archive/issue_comments_454165.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis is now #23930",
    "created_at": "2017-09-26T10:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454165",
    "user": "https://github.com/koffie"
}
```

<a id='comment:1'></a>
This is now #23930



---

archive/issue_comments_454166.json:
```json
{
    "body": "<a id='comment:2'></a>\nI'm reluctant to wrap output in `sorted()` or similar in the textbook, it won't help with understanding.  But I think I can rework the testing, perhaps including a hidden test of correctness that a reader won't see.\n\nMaarten - might it be best to mark these `random` for now, and I'll get proper replacements into the book on the next pass?  The diffs in the Sage source will help me remember.  This is the first test of how to handle when these fail, so let me know if you can think of a better approach.\n\nI can review a change, but in less than a week I will soon be offline for an extended period.",
    "created_at": "2017-09-26T19:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454166",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:2'></a>
I'm reluctant to wrap output in `sorted()` or similar in the textbook, it won't help with understanding.  But I think I can rework the testing, perhaps including a hidden test of correctness that a reader won't see.

Maarten - might it be best to mark these `random` for now, and I'll get proper replacements into the book on the next pass?  The diffs in the Sage source will help me remember.  This is the first test of how to handle when these fail, so let me know if you can think of a better approach.

I can review a change, but in less than a week I will soon be offline for an extended period.



---

archive/issue_comments_454167.json:
```json
{
    "body": "Changing branch from \"\" to \"public/23930\"",
    "created_at": "2017-09-26T20:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454167",
    "user": "https://github.com/koffie"
}
```

Changing branch from "" to "public/23930"



---

archive/issue_comments_454168.json:
```json
{
    "body": "Changing commit from \"\" to \"e633e065cf33be46dd653b2ef9da04cfada03c23\"",
    "created_at": "2017-09-26T20:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454168",
    "user": "https://github.com/koffie"
}
```

Changing commit from "" to "e633e065cf33be46dd653b2ef9da04cfada03c23"



---

archive/issue_comments_454169.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi Rob,\n\nMarking as random till the next version of the book works for me. How are the files generated from the book?\n\n---\nNew commits:\n|                                                                                                                                          |                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[e633e06](https://github.com/sagemath/sagetrac-mirror/commit/e633e065cf33be46dd653b2ef9da04cfada03c23)|`Trac #23930: Fixed Doctest failures in Judson's abstract algebra book`|",
    "created_at": "2017-09-26T20:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454169",
    "user": "https://github.com/koffie"
}
```

<a id='comment:3'></a>
Hi Rob,

Marking as random till the next version of the book works for me. How are the files generated from the book?

---
New commits:
|                                                                                                                                          |                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[e633e06](https://github.com/sagemath/sagetrac-mirror/commit/e633e065cf33be46dd653b2ef9da04cfada03c23)|`Trac #23930: Fixed Doctest failures in Judson's abstract algebra book`|



---

archive/issue_comments_454170.json:
```json
{
    "body": "Changing author from \"\" to \"Maarten Derickx\"",
    "created_at": "2017-09-26T20:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454170",
    "user": "https://github.com/koffie"
}
```

Changing author from "" to "Maarten Derickx"



---

archive/issue_comments_454171.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-26T20:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454171",
    "user": "https://github.com/koffie"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_454172.json:
```json
{
    "body": "<a id='comment:5'></a>\nNote that for the `A.orbits()` test sorting will work. The `S.list()` test is more complicated since there the same cycles are also notated in different ways.",
    "created_at": "2017-09-26T20:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454172",
    "user": "https://github.com/koffie"
}
```

<a id='comment:5'></a>
Note that for the `A.orbits()` test sorting will work. The `S.list()` test is more complicated since there the same cycles are also notated in different ways.



---

archive/issue_comments_454173.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe fix is good and non intrusive. It is now up to the book authors to find a more appropriate correction (if any is needed).",
    "created_at": "2017-09-29T06:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454173",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
The fix is good and non intrusive. It is now up to the book authors to find a more appropriate correction (if any is needed).



---

archive/issue_comments_454174.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2017-09-29T06:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454174",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_454175.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-29T06:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454175",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_454176.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks, Vincent.  I ran tests overnight, so you just beat me to it on this one!  I know it didn't really need a full run of the test suite, but I needed to practice my nascent git skills with the full Sage workflow. ;-)\n\nI'll likely clean up all the tests in the book again right around the end of the year, and get this cleaned up properly then.\n\nThanks, Maarten, also for shepherding this one through.",
    "created_at": "2017-09-29T17:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454176",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:7'></a>
Thanks, Vincent.  I ran tests overnight, so you just beat me to it on this one!  I know it didn't really need a full run of the test suite, but I needed to practice my nascent git skills with the full Sage workflow. ;-)

I'll likely clean up all the tests in the book again right around the end of the year, and get this cleaned up properly then.

Thanks, Maarten, also for shepherding this one through.



---

archive/issue_comments_454177.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-01T00:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454177",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069249.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-01T00:19:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23930#event-69249"
}
```



---

archive/issue_comments_454178.json:
```json
{
    "body": "Changing branch from \"public/23930\" to \"e633e065cf33be46dd653b2ef9da04cfada03c23\"",
    "created_at": "2017-10-01T00:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23930",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23930#issuecomment-454178",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/23930" to "e633e065cf33be46dd653b2ef9da04cfada03c23"
