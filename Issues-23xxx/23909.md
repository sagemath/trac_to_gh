# Issue 23909: GCD for univariate polynomials over fraction fields

archive/issues_023672.json:
```json
{
    "body": "Some of the sagemath packages we use requires us to compute the GCD of univariate polynomials whose coefficient ring is the fraction field of multivariate polynomials over integral domains like Z, e.g: polynomials in the ring Frac(Z[x,y])[z]. \n\\\\\nRight now in Sagemath if we run  the following example, the regular Euclidean algorithm implemented in rings.py for computing gcd is called. It is very slow and the implementation hangs for degrees >4. \n\\\\\n**Example :**\n\\\\\nsage: A.<x,y>=ZZ[]\n\\\\\nsage: B= Frac(A)\n\\\\\nsage: C.<z> = B[]\n\\\\\nsage: p = C.random_element(6)\n\\\\\nsage: q = C.random_element(6)\n\\\\\nsage: gcd(p,q)\n\\\\\nHangs!\n\\\\\n**Reason for the function to hang :** It repeatedly has to call the multiplication function which calls  the gcd function in multi_polynomial_libsingular.pyx and therefore is slow. \n\\\\\n**Proposed Change:** Add a new function _gcd_univariate_polynomial()  inside the class, class FractionField_generic(ring.Field). It can be found in /src/sage/rings/fraction_field.py.\n\\\\\n\n\n**CC:**  @mezzarobba\n\n**Keywords:** gcd, univariate polynomials, fraction fields as coefficients\n\n**Branch/Commit:** [2bf9251552ea689272c058664f7c0b7f1d0e19a8](https://github.com/sagemath/sagetrac-mirror/commit/2bf9251552ea689272c058664f7c0b7f1d0e19a8)\n\n**Reviewer:** Bruno Grenet\n\n**Author:** Maria Francis, Marc Mezzarobba\n\n**Dependencies:** #25233\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23909\n\n",
    "closed_at": "2018-06-23T19:58:36Z",
    "created_at": "2017-09-21T09:32:32Z",
    "labels": [
        "component: algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "GCD for univariate polynomials over fraction fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23909",
    "user": "https://trac.sagemath.org/admin/accounts/users/mfrancis"
}
```
Some of the sagemath packages we use requires us to compute the GCD of univariate polynomials whose coefficient ring is the fraction field of multivariate polynomials over integral domains like Z, e.g: polynomials in the ring Frac(Z[x,y])[z]. 
\\
Right now in Sagemath if we run  the following example, the regular Euclidean algorithm implemented in rings.py for computing gcd is called. It is very slow and the implementation hangs for degrees >4. 
\\
**Example :**
\\
sage: A.<x,y>=ZZ[]
\\
sage: B= Frac(A)
\\
sage: C.<z> = B[]
\\
sage: p = C.random_element(6)
\\
sage: q = C.random_element(6)
\\
sage: gcd(p,q)
\\
Hangs!
\\
**Reason for the function to hang :** It repeatedly has to call the multiplication function which calls  the gcd function in multi_polynomial_libsingular.pyx and therefore is slow. 
\\
**Proposed Change:** Add a new function _gcd_univariate_polynomial()  inside the class, class FractionField_generic(ring.Field). It can be found in /src/sage/rings/fraction_field.py.
\\


**CC:**  @mezzarobba

**Keywords:** gcd, univariate polynomials, fraction fields as coefficients

**Branch/Commit:** [2bf9251552ea689272c058664f7c0b7f1d0e19a8](https://github.com/sagemath/sagetrac-mirror/commit/2bf9251552ea689272c058664f7c0b7f1d0e19a8)

**Reviewer:** Bruno Grenet

**Author:** Maria Francis, Marc Mezzarobba

**Dependencies:** #25233

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/23909





---

archive/issue_comments_453603.json:
```json
{
    "body": "**Commit:** [bde90c88d1e0ecd04c0633b54a479e23959a898c](https://github.com/sagemath/sagetrac-mirror/commit/bde90c88d1e0ecd04c0633b54a479e23959a898c)",
    "created_at": "2017-09-21T09:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453603",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Commit:** [bde90c88d1e0ecd04c0633b54a479e23959a898c](https://github.com/sagemath/sagetrac-mirror/commit/bde90c88d1e0ecd04c0633b54a479e23959a898c)



---

archive/issue_comments_453604.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bde90c88d1e0ecd04c0633b54a479e23959a898c\">bde90c8</a></td><td><code>Added gcd for univariate case over fraction field</code></td></tr></table>\n",
    "created_at": "2017-09-21T09:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453604",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bde90c88d1e0ecd04c0633b54a479e23959a898c">bde90c8</a></td><td><code>Added gcd for univariate case over fraction field</code></td></tr></table>




---

archive/issue_comments_453605.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2017-09-21T11:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453605",
    "user": "https://trac.sagemath.org/admin/accounts/users/mfrancis"
}
```


**Changing status** from new to needs_review.



---

archive/issue_comments_453606.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2017-09-25T18:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453606",
    "user": "https://trac.sagemath.org/admin/accounts/users/msaaltink"
}
```


**Changing status** from needs_review to needs_work.



---

archive/issue_comments_453607.json:
```json
{
    "body": "<a id='comment:3'></a>\nThis change breaks many gcd computations that now work.  For example\n\n```\nsage: Q.<x> = B[]\nsage: F = Q.fraction_field()\nsage: R.<y> = F[]\nsage: f = (y + x)^2 * (y - 1/x)^3\nsage: g = (y + x)^4 * (y - 1/x)^2\nsage: gcd(f,g)\n```\nWhen `B` is `ZZ` or `Zmod(5)` or `GaussianIntegers()`, we get answers in Sage as it is. With your change, all of them raise a `TypeError` on some internal `gcd` call.\n\nMoreover, the result of `gcd` should be in the same ring as the arguments.  We do not always get that with this change.",
    "created_at": "2017-09-25T18:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453607",
    "user": "https://trac.sagemath.org/admin/accounts/users/msaaltink"
}
```


<a id='comment:3'></a>
This change breaks many gcd computations that now work.  For example

```
sage: Q.<x> = B[]
sage: F = Q.fraction_field()
sage: R.<y> = F[]
sage: f = (y + x)^2 * (y - 1/x)^3
sage: g = (y + x)^4 * (y - 1/x)^2
sage: gcd(f,g)
```
When `B` is `ZZ` or `Zmod(5)` or `GaussianIntegers()`, we get answers in Sage as it is. With your change, all of them raise a `TypeError` on some internal `gcd` call.

Moreover, the result of `gcd` should be in the same ring as the arguments.  We do not always get that with this change.



---

archive/issue_comments_453608.json:
```json
{
    "body": "**Changing branch** from \"[u/mfrancis/fraction_field_univariate](https://github.com/sagemath/sagetrac-mirror/tree/u/mfrancis/fraction_field_univariate)\" to \"[u/mfrancis/fraction_field_univariatepoly](https://github.com/sagemath/sagetrac-mirror/tree/u/mfrancis/fraction_field_univariatepoly)\".",
    "created_at": "2018-02-24T21:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453608",
    "user": "https://trac.sagemath.org/admin/accounts/users/mfrancis"
}
```


**Changing branch** from "[u/mfrancis/fraction_field_univariate](https://github.com/sagemath/sagetrac-mirror/tree/u/mfrancis/fraction_field_univariate)" to "[u/mfrancis/fraction_field_univariatepoly](https://github.com/sagemath/sagetrac-mirror/tree/u/mfrancis/fraction_field_univariatepoly)".



---

archive/issue_comments_453609.json:
```json
{
    "body": "**Changing commit** from \"[bde90c88d1e0ecd04c0633b54a479e23959a898c](https://github.com/sagemath/sagetrac-mirror/commit/bde90c88d1e0ecd04c0633b54a479e23959a898c)\" to \"[1757afbf746eb60d097becc457577d5f733d6ab0](https://github.com/sagemath/sagetrac-mirror/commit/1757afbf746eb60d097becc457577d5f733d6ab0)\".",
    "created_at": "2018-02-24T21:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453609",
    "user": "https://trac.sagemath.org/admin/accounts/users/mfrancis"
}
```


**Changing commit** from "[bde90c88d1e0ecd04c0633b54a479e23959a898c](https://github.com/sagemath/sagetrac-mirror/commit/bde90c88d1e0ecd04c0633b54a479e23959a898c)" to "[1757afbf746eb60d097becc457577d5f733d6ab0](https://github.com/sagemath/sagetrac-mirror/commit/1757afbf746eb60d097becc457577d5f733d6ab0)".



---

archive/issue_comments_453610.json:
```json
{
    "body": "<a id='comment:5'></a>\nMade the changes : 1. Corrected it for Z, finite fields ( fields defined as Z mod p call the previous implementation, the usual Euclidean algorithm), and the returned gcd is the same ring as the input polynomials. \n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1757afbf746eb60d097becc457577d5f733d6ab0\">1757afb</a></td><td><code>Made the changes to accomodate finite fields.</code></td></tr></table>\n",
    "created_at": "2018-02-24T21:56:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453610",
    "user": "https://trac.sagemath.org/admin/accounts/users/mfrancis"
}
```


<a id='comment:5'></a>
Made the changes : 1. Corrected it for Z, finite fields ( fields defined as Z mod p call the previous implementation, the usual Euclidean algorithm), and the returned gcd is the same ring as the input polynomials. 

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1757afbf746eb60d097becc457577d5f733d6ab0">1757afb</a></td><td><code>Made the changes to accomodate finite fields.</code></td></tr></table>




---

archive/issue_comments_453611.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2018-02-25T11:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453611",
    "user": "https://trac.sagemath.org/admin/accounts/users/mfrancis"
}
```


**Changing status** from needs_work to needs_review.



---

archive/issue_comments_453612.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe documentation is badly misformatted. See http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings\n\nAnd this is completely unreadable:\n\n```\nif (is_IntegerRing(f.base_ring().base_ring()) == True or is_IntegerRing(g.base_ring().base_ring())== True or (f.base_ring().base_ring().is_field() == True and (is_IntegerModRing(f.base_ring().base_ring()) == False or is_FiniteField(f.base_ring().base_ring()) == True)) or (g.base_ring().base_ring().is_field() == True and (is_IntegerModRing(g.base_ring().base_ring()) == False or is_FiniteField(g.base_ring().base_ring()) == True)) ) :\n```",
    "created_at": "2018-02-26T06:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453612",
    "user": "https://github.com/jdemeyer"
}
```


<a id='comment:7'></a>
The documentation is badly misformatted. See http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings

And this is completely unreadable:

```
if (is_IntegerRing(f.base_ring().base_ring()) == True or is_IntegerRing(g.base_ring().base_ring())== True or (f.base_ring().base_ring().is_field() == True and (is_IntegerModRing(f.base_ring().base_ring()) == False or is_FiniteField(f.base_ring().base_ring()) == True)) or (g.base_ring().base_ring().is_field() == True and (is_IntegerModRing(g.base_ring().base_ring()) == False or is_FiniteField(g.base_ring().base_ring()) == True)) ) :
```



---

archive/issue_comments_453613.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2018-02-26T06:53:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453613",
    "user": "https://github.com/jdemeyer"
}
```


**Changing status** from needs_review to needs_work.



---

archive/issue_comments_453614.json:
```json
{
    "body": "**Changing author** from \"MARIA FRANCIS\" to \"Maria Francis, Marc Mezzarobba\".",
    "created_at": "2018-04-23T16:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453614",
    "user": "https://github.com/mezzarobba"
}
```


**Changing author** from "MARIA FRANCIS" to "Maria Francis, Marc Mezzarobba".



---

archive/issue_comments_453615.json:
```json
{
    "body": "<a id='comment:8'></a>\nHi Maria,\n\nAs it turns out, most of the necessary work had already been done in the implementation of `gcd()` for polynomials over polynomial rings. Here is a simpler implementation that takes advantage of that.\n\n(Sorry that it took me so incredibly long to have a stab at this as promised!)\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86d30f8a3c2d2aa0810101c11b25539f5f93c440\">86d30f8</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr></table>\n",
    "created_at": "2018-04-23T16:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453615",
    "user": "https://github.com/mezzarobba"
}
```


<a id='comment:8'></a>
Hi Maria,

As it turns out, most of the necessary work had already been done in the implementation of `gcd()` for polynomials over polynomial rings. Here is a simpler implementation that takes advantage of that.

(Sorry that it took me so incredibly long to have a stab at this as promised!)

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86d30f8a3c2d2aa0810101c11b25539f5f93c440">86d30f8</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr></table>




---

archive/issue_comments_453616.json:
```json
{
    "body": "**Changing commit** from \"[1757afbf746eb60d097becc457577d5f733d6ab0](https://github.com/sagemath/sagetrac-mirror/commit/1757afbf746eb60d097becc457577d5f733d6ab0)\" to \"[86d30f8a3c2d2aa0810101c11b25539f5f93c440](https://github.com/sagemath/sagetrac-mirror/commit/86d30f8a3c2d2aa0810101c11b25539f5f93c440)\".",
    "created_at": "2018-04-23T16:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453616",
    "user": "https://github.com/mezzarobba"
}
```


**Changing commit** from "[1757afbf746eb60d097becc457577d5f733d6ab0](https://github.com/sagemath/sagetrac-mirror/commit/1757afbf746eb60d097becc457577d5f733d6ab0)" to "[86d30f8a3c2d2aa0810101c11b25539f5f93c440](https://github.com/sagemath/sagetrac-mirror/commit/86d30f8a3c2d2aa0810101c11b25539f5f93c440)".



---

archive/issue_comments_453617.json:
```json
{
    "body": "**Changing branch** from \"[u/mfrancis/fraction_field_univariatepoly](https://github.com/sagemath/sagetrac-mirror/tree/u/mfrancis/fraction_field_univariatepoly)\" to \"[u/mmezzarobba/23909-gcd_over_fraction_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/23909-gcd_over_fraction_fields)\".",
    "created_at": "2018-04-23T16:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453617",
    "user": "https://github.com/mezzarobba"
}
```


**Changing branch** from "[u/mfrancis/fraction_field_univariatepoly](https://github.com/sagemath/sagetrac-mirror/tree/u/mfrancis/fraction_field_univariatepoly)" to "[u/mmezzarobba/23909-gcd_over_fraction_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/23909-gcd_over_fraction_fields)".



---

archive/issue_comments_453618.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2018-04-23T16:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453618",
    "user": "https://github.com/mezzarobba"
}
```


**Changing status** from needs_work to needs_review.



---

archive/issue_comments_453619.json:
```json
{
    "body": "<a id='comment:9'></a>\n~~Note: this does break~~\n\n```\nsage: Pol = Frac(QQ['x'])['x']\nsage: p = Frac(QQ['x'])['x'].one()\nsage: p.gcd(p)\n...\nValueError: variable name 'x' appears more than once\n```\n~~because the same thing with polynomials over a *polynomial* ring is already broken, see #25233. I think this is an acceptable regression, at least temporarily...~~ Edit: fixed at #25233!",
    "created_at": "2018-04-23T16:45:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453619",
    "user": "https://github.com/mezzarobba"
}
```


<a id='comment:9'></a>
~~Note: this does break~~

```
sage: Pol = Frac(QQ['x'])['x']
sage: p = Frac(QQ['x'])['x'].one()
sage: p.gcd(p)
...
ValueError: variable name 'x' appears more than once
```
~~because the same thing with polynomials over a *polynomial* ring is already broken, see #25233. I think this is an acceptable regression, at least temporarily...~~ Edit: fixed at #25233!



---

archive/issue_comments_453620.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2018-04-24T08:47:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453620",
    "user": "https://github.com/mezzarobba"
}
```


**Changing status** from needs_review to needs_work.



---

archive/issue_comments_453621.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ac14ccb2601f89ba465d1e2dcbba40bdda693ec\">4ac14cc</a></td><td><code>Support repeated variable names in FlatteningMorphism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e26d75a48db0c3540200ffaf841ffc7c44ce733b\">e26d75a</a></td><td><code>cached flattening_morphism() method for univariate polynomial rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54a826264d7b39156e3ce16045857313dd25396b\">54a8262</a></td><td><code>use FlatteningMorphism in gcd over stacked polynomial rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184\">fdb3a93</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr></table>\n",
    "created_at": "2018-04-24T08:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ac14ccb2601f89ba465d1e2dcbba40bdda693ec">4ac14cc</a></td><td><code>Support repeated variable names in FlatteningMorphism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e26d75a48db0c3540200ffaf841ffc7c44ce733b">e26d75a</a></td><td><code>cached flattening_morphism() method for univariate polynomial rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54a826264d7b39156e3ce16045857313dd25396b">54a8262</a></td><td><code>use FlatteningMorphism in gcd over stacked polynomial rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184">fdb3a93</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr></table>




---

archive/issue_comments_453622.json:
```json
{
    "body": "**Changing commit** from \"[86d30f8a3c2d2aa0810101c11b25539f5f93c440](https://github.com/sagemath/sagetrac-mirror/commit/86d30f8a3c2d2aa0810101c11b25539f5f93c440)\" to \"[fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184](https://github.com/sagemath/sagetrac-mirror/commit/fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184)\".",
    "created_at": "2018-04-24T08:58:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[86d30f8a3c2d2aa0810101c11b25539f5f93c440](https://github.com/sagemath/sagetrac-mirror/commit/86d30f8a3c2d2aa0810101c11b25539f5f93c440)" to "[fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184](https://github.com/sagemath/sagetrac-mirror/commit/fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184)".



---

archive/issue_comments_453623.json:
```json
{
    "body": "**Dependencies:** #25233",
    "created_at": "2018-04-24T09:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453623",
    "user": "https://github.com/mezzarobba"
}
```


**Dependencies:** #25233



---

archive/issue_comments_453624.json:
```json
{
    "body": "**Changing commit** from \"[fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184](https://github.com/sagemath/sagetrac-mirror/commit/fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184)\" to \"[e347c742d787c9feac33a11167050988ac94498e](https://github.com/sagemath/sagetrac-mirror/commit/e347c742d787c9feac33a11167050988ac94498e)\".",
    "created_at": "2018-04-24T09:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453624",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184](https://github.com/sagemath/sagetrac-mirror/commit/fdb3a93cdf52fc8e49af9bd7d99eb725c62d3184)" to "[e347c742d787c9feac33a11167050988ac94498e](https://github.com/sagemath/sagetrac-mirror/commit/e347c742d787c9feac33a11167050988ac94498e)".



---

archive/issue_comments_453625.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26a3ed1b77ef8479100d0e70cd6d6d0b84a1fc07\">26a3ed1</a></td><td><code>use FlatteningMorphism in gcd over stacked polynomial rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e347c742d787c9feac33a11167050988ac94498e\">e347c74</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr></table>\n",
    "created_at": "2018-04-24T09:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453625",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26a3ed1b77ef8479100d0e70cd6d6d0b84a1fc07">26a3ed1</a></td><td><code>use FlatteningMorphism in gcd over stacked polynomial rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e347c742d787c9feac33a11167050988ac94498e">e347c74</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr></table>




---

archive/issue_comments_453626.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2018-04-24T11:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453626",
    "user": "https://github.com/mezzarobba"
}
```


**Changing status** from needs_work to needs_review.



---

archive/issue_comments_453627.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,5 +22,4 @@\n \\\\\n **Proposed Change:** Add a new function _gcd_univariate_polynomial()  inside the class, class FractionField_generic(ring.Field). It can be found in /src/sage/rings/fraction_field.py.\n \\\\\n-\\\\\n-This new function flattens the polynomial (which has coefficients from a fractional field of a multivariate polynomial ring) by dividing with the GCD of the coefficient polynomials. It then considers the polynomial as a multivariate polynomial in all the variables and therefore there is only one call to the multivariate gcd function. Hence this new implementation even for degree = 30 returns the gcd within seconds. \n+\n``````\n",
    "created_at": "2018-04-24T11:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453627",
    "user": "https://github.com/mezzarobba"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -22,5 +22,4 @@
 \\
 **Proposed Change:** Add a new function _gcd_univariate_polynomial()  inside the class, class FractionField_generic(ring.Field). It can be found in /src/sage/rings/fraction_field.py.
 \\
-\\
-This new function flattens the polynomial (which has coefficients from a fractional field of a multivariate polynomial ring) by dividing with the GCD of the coefficient polynomials. It then considers the polynomial as a multivariate polynomial in all the variables and therefore there is only one call to the multivariate gcd function. Hence this new implementation even for degree = 30 returns the gcd within seconds. 
+
``````




---

archive/issue_comments_453628.json:
```json
{
    "body": "**Changing commit** from \"[e347c742d787c9feac33a11167050988ac94498e](https://github.com/sagemath/sagetrac-mirror/commit/e347c742d787c9feac33a11167050988ac94498e)\" to \"[ad86b39e17b2cf41738e55e33f37bfebb37f624d](https://github.com/sagemath/sagetrac-mirror/commit/ad86b39e17b2cf41738e55e33f37bfebb37f624d)\".",
    "created_at": "2018-04-26T12:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[e347c742d787c9feac33a11167050988ac94498e](https://github.com/sagemath/sagetrac-mirror/commit/e347c742d787c9feac33a11167050988ac94498e)" to "[ad86b39e17b2cf41738e55e33f37bfebb37f624d](https://github.com/sagemath/sagetrac-mirror/commit/ad86b39e17b2cf41738e55e33f37bfebb37f624d)".



---

archive/issue_comments_453629.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad86b39e17b2cf41738e55e33f37bfebb37f624d\">ad86b39</a></td><td><code>fix gcd(0,0) for polynomials over fraction fields</code></td></tr></table>\n",
    "created_at": "2018-04-26T12:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad86b39e17b2cf41738e55e33f37bfebb37f624d">ad86b39</a></td><td><code>fix gcd(0,0) for polynomials over fraction fields</code></td></tr></table>




---

archive/issue_comments_453630.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d56c5f309704f42c255a7d8976a73a70d7b3579\">0d56c5f</a></td><td><code>Support repeated variable names in FlatteningMorphism</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/751fe8934b48ff6f7e14cdf03b8f923dc8cb3ebe\">751fe89</a></td><td><code>cached flattening_morphism() method for univariate polynomial rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8de9bbfad926e89eef4ff0f0ed84fc7b37bee741\">8de9bbf</a></td><td><code>use FlatteningMorphism in gcd over stacked polynomial rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1379f642e977a3dcd7dae1feb4557e9e5eaada48\">1379f64</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69ca4c1dc8222ea7d9b162142249984280f7df90\">69ca4c1</a></td><td><code>fix gcd(0,0) for polynomials over fraction fields</code></td></tr></table>\n",
    "created_at": "2018-05-11T18:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453630",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d56c5f309704f42c255a7d8976a73a70d7b3579">0d56c5f</a></td><td><code>Support repeated variable names in FlatteningMorphism</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/751fe8934b48ff6f7e14cdf03b8f923dc8cb3ebe">751fe89</a></td><td><code>cached flattening_morphism() method for univariate polynomial rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8de9bbfad926e89eef4ff0f0ed84fc7b37bee741">8de9bbf</a></td><td><code>use FlatteningMorphism in gcd over stacked polynomial rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1379f642e977a3dcd7dae1feb4557e9e5eaada48">1379f64</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69ca4c1dc8222ea7d9b162142249984280f7df90">69ca4c1</a></td><td><code>fix gcd(0,0) for polynomials over fraction fields</code></td></tr></table>




---

archive/issue_comments_453631.json:
```json
{
    "body": "**Changing commit** from \"[ad86b39e17b2cf41738e55e33f37bfebb37f624d](https://github.com/sagemath/sagetrac-mirror/commit/ad86b39e17b2cf41738e55e33f37bfebb37f624d)\" to \"[69ca4c1dc8222ea7d9b162142249984280f7df90](https://github.com/sagemath/sagetrac-mirror/commit/69ca4c1dc8222ea7d9b162142249984280f7df90)\".",
    "created_at": "2018-05-11T18:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[ad86b39e17b2cf41738e55e33f37bfebb37f624d](https://github.com/sagemath/sagetrac-mirror/commit/ad86b39e17b2cf41738e55e33f37bfebb37f624d)" to "[69ca4c1dc8222ea7d9b162142249984280f7df90](https://github.com/sagemath/sagetrac-mirror/commit/69ca4c1dc8222ea7d9b162142249984280f7df90)".



---

archive/issue_comments_453632.json:
```json
{
    "body": "<a id='comment:17'></a>\nSee also #25318 for an additional improvement.",
    "created_at": "2018-05-11T19:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453632",
    "user": "https://github.com/mezzarobba"
}
```


<a id='comment:17'></a>
See also #25318 for an additional improvement.



---

archive/issue_comments_453633.json:
```json
{
    "body": "<a id='comment:18'></a>\nAs far as I can tell, the last two patchbot failures are not related to this ticket\u2014i.e. the tests still pass with sage-8.3.beta3.",
    "created_at": "2018-05-29T09:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453633",
    "user": "https://github.com/mezzarobba"
}
```


<a id='comment:18'></a>
As far as I can tell, the last two patchbot failures are not related to this ticket—i.e. the tests still pass with sage-8.3.beta3.



---

archive/issue_comments_453634.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68fc7a1758a43045e8635e455234df220ef9cb5f\">68fc7a1</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2599f40b78c3f147804c96a9517628483a0bc48\">b2599f4</a></td><td><code>fix gcd(0,0) for polynomials over fraction fields</code></td></tr></table>\n",
    "created_at": "2018-06-10T09:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453634",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68fc7a1758a43045e8635e455234df220ef9cb5f">68fc7a1</a></td><td><code>speed up gcd() of polynomials over fraction fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2599f40b78c3f147804c96a9517628483a0bc48">b2599f4</a></td><td><code>fix gcd(0,0) for polynomials over fraction fields</code></td></tr></table>




---

archive/issue_comments_453635.json:
```json
{
    "body": "**Changing commit** from \"[69ca4c1dc8222ea7d9b162142249984280f7df90](https://github.com/sagemath/sagetrac-mirror/commit/69ca4c1dc8222ea7d9b162142249984280f7df90)\" to \"[b2599f40b78c3f147804c96a9517628483a0bc48](https://github.com/sagemath/sagetrac-mirror/commit/b2599f40b78c3f147804c96a9517628483a0bc48)\".",
    "created_at": "2018-06-10T09:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[69ca4c1dc8222ea7d9b162142249984280f7df90](https://github.com/sagemath/sagetrac-mirror/commit/69ca4c1dc8222ea7d9b162142249984280f7df90)" to "[b2599f40b78c3f147804c96a9517628483a0bc48](https://github.com/sagemath/sagetrac-mirror/commit/b2599f40b78c3f147804c96a9517628483a0bc48)".



---

archive/issue_comments_453636.json:
```json
{
    "body": "<a id='comment:20'></a>\nLooks good to me, except the docstring. Could you add a short description?",
    "created_at": "2018-06-18T17:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453636",
    "user": "https://github.com/bgrenet"
}
```


<a id='comment:20'></a>
Looks good to me, except the docstring. Could you add a short description?



---

archive/issue_comments_453637.json:
```json
{
    "body": "**Changing commit** from \"[b2599f40b78c3f147804c96a9517628483a0bc48](https://github.com/sagemath/sagetrac-mirror/commit/b2599f40b78c3f147804c96a9517628483a0bc48)\" to \"[2bf9251552ea689272c058664f7c0b7f1d0e19a8](https://github.com/sagemath/sagetrac-mirror/commit/2bf9251552ea689272c058664f7c0b7f1d0e19a8)\".",
    "created_at": "2018-06-19T07:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[b2599f40b78c3f147804c96a9517628483a0bc48](https://github.com/sagemath/sagetrac-mirror/commit/b2599f40b78c3f147804c96a9517628483a0bc48)" to "[2bf9251552ea689272c058664f7c0b7f1d0e19a8](https://github.com/sagemath/sagetrac-mirror/commit/2bf9251552ea689272c058664f7c0b7f1d0e19a8)".



---

archive/issue_comments_453638.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bf9251552ea689272c058664f7c0b7f1d0e19a8\">2bf9251</a></td><td><code>#23909 improve docstring</code></td></tr></table>\n",
    "created_at": "2018-06-19T07:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453638",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bf9251552ea689272c058664f7c0b7f1d0e19a8">2bf9251</a></td><td><code>#23909 improve docstring</code></td></tr></table>




---

archive/issue_comments_453639.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [bruno](#comment%3A20):\n> Looks good to me, except the docstring. Could you add a short description?\n\n\nDone, thanks for your commment!",
    "created_at": "2018-06-19T07:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453639",
    "user": "https://github.com/mezzarobba"
}
```


<a id='comment:22'></a>
Replying to [bruno](#comment%3A20):
> Looks good to me, except the docstring. Could you add a short description?


Done, thanks for your commment!



---

archive/issue_comments_453640.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2018-06-19T07:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453640",
    "user": "https://github.com/bgrenet"
}
```


**Changing status** from needs_review to positive_review.



---

archive/issue_comments_453641.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2018-06-21T17:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453641",
    "user": "https://github.com/vbraun"
}
```


**Changing status** from positive_review to needs_work.



---

archive/issue_comments_453642.json:
```json
{
    "body": "<a id='comment:24'></a>\nReviewer name is missing",
    "created_at": "2018-06-21T17:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453642",
    "user": "https://github.com/vbraun"
}
```


<a id='comment:24'></a>
Reviewer name is missing



---

archive/issue_comments_453643.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2018-06-21T19:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453643",
    "user": "https://github.com/mezzarobba"
}
```


**Changing status** from needs_work to positive_review.



---

archive/issue_comments_453644.json:
```json
{
    "body": "**Reviewer:** Bruno Grenet",
    "created_at": "2018-06-21T19:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453644",
    "user": "https://github.com/mezzarobba"
}
```


**Reviewer:** Bruno Grenet



---

archive/issue_comments_453645.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2018-06-23T19:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453645",
    "user": "https://github.com/vbraun"
}
```


**Resolution:** fixed



---

archive/issue_comments_453646.json:
```json
{
    "body": "**Changing branch** from \"[u/mmezzarobba/23909-gcd_over_fraction_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/23909-gcd_over_fraction_fields)\" to \"[2bf9251552ea689272c058664f7c0b7f1d0e19a8](https://github.com/sagemath/sagetrac-mirror/commit/2bf9251552ea689272c058664f7c0b7f1d0e19a8)\".",
    "created_at": "2018-06-23T19:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23909#issuecomment-453646",
    "user": "https://github.com/vbraun"
}
```


**Changing branch** from "[u/mmezzarobba/23909-gcd_over_fraction_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/23909-gcd_over_fraction_fields)" to "[2bf9251552ea689272c058664f7c0b7f1d0e19a8](https://github.com/sagemath/sagetrac-mirror/commit/2bf9251552ea689272c058664f7c0b7f1d0e19a8)".



---

archive/issue_events_069208.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-23T19:58:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23909",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23909#event-69208"
}
```

