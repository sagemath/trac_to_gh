# Issue 23699: torsion_quadratic_module_symmetric

archive/issues_023462.json:
```json
{
    "body": "We want to model the following:\nLet A be a finite abelian group. A (symmetric) torsion bilinear form is\nb: A x A --> QQ/ZZ.\n\nA torsion quadratic form is\nq: A --> QQ/2ZZ\nsuch that q(na)=n*n*q(a)   a for a in A.\n\nThis class should consist of:\n\n- an Abelian group with a distinguished basis\n- an \"inner product matrix\" defining the bilinear/quadratic form.\n- Elements should have methods to compute q and b\n\nIt should behave much like sage/modules/free_quadratic_module\n\nmethods should include:\n- create a free quadratic submodule from generators\n- orthogonal complements\n- a canonical form\n- isomorphisms\n- brown invariants\n- the orthogonal decompositions into its p-primary parts\n\nKeywords: sd91, sd90\n\nBranch/Commit: 4569a08e868d30dacaa6f51cb4ff150ce9b1be96\n\nReviewer: Travis Scrimshaw, Ursula Whitcher\n\nAuthor: Simon Brandhorst\n\nDependencies: #23915, #23944\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23699\n\n",
    "closed_at": "2017-12-11T01:03:41Z",
    "created_at": "2017-08-24T13:52:41Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "torsion_quadratic_module_symmetric",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23699",
    "user": "https://github.com/simonbrandhorst"
}
```
We want to model the following:
Let A be a finite abelian group. A (symmetric) torsion bilinear form is
b: A x A --> QQ/ZZ.

A torsion quadratic form is
q: A --> QQ/2ZZ
such that q(na)=n*n*q(a)   a for a in A.

This class should consist of:

- an Abelian group with a distinguished basis
- an "inner product matrix" defining the bilinear/quadratic form.
- Elements should have methods to compute q and b

It should behave much like sage/modules/free_quadratic_module

methods should include:
- create a free quadratic submodule from generators
- orthogonal complements
- a canonical form
- isomorphisms
- brown invariants
- the orthogonal decompositions into its p-primary parts

Keywords: sd91, sd90

Branch/Commit: 4569a08e868d30dacaa6f51cb4ff150ce9b1be96

Reviewer: Travis Scrimshaw, Ursula Whitcher

Author: Simon Brandhorst

Dependencies: #23915, #23944

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23699





---

archive/issue_comments_349681.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-30T22:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349682.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd91\".",
    "created_at": "2017-09-30T22:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349682",
    "user": "https://github.com/roed314"
}
```

Changing keywords from "" to "sd91".



---

archive/issue_comments_349683.json:
```json
{
    "body": "<a id='comment:8'></a>New commits:",
    "created_at": "2017-10-01T22:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349683",
    "user": "https://github.com/roed314"
}
```

<a id='comment:8'></a>New commits:



---

archive/issue_comments_349684.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-06T21:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349684",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349685.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-09T06:42:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349686.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2017-10-10T09:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_349687.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-10T12:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349687",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349688.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-10T12:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349688",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_349689.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-20T11:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349690.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-22T13:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349691.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-22T14:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349691",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349692.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-22T15:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349692",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349693.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-22T19:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349694.json:
```json
{
    "body": "<a id='comment:22'></a>Why do all of the examples start with an import command?  It seems like this is basic functionality that should be available within Sage without extra work.\n\nMinor note: the first documentation line of `TorsionQuadraticModule` doesn't wrap properly.",
    "created_at": "2017-10-22T21:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349694",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:22'></a>Why do all of the examples start with an import command?  It seems like this is basic functionality that should be available within Sage without extra work.

Minor note: the first documentation line of `TorsionQuadraticModule` doesn't wrap properly.



---

archive/issue_comments_349695.json:
```json
{
    "body": "Changing keywords from \"sd91\" to \"sd91, sd90\".",
    "created_at": "2017-10-22T21:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349695",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

Changing keywords from "sd91" to "sd91, sd90".



---

archive/issue_comments_349696.json:
```json
{
    "body": "<a id='comment:24'></a>The primary_part docstring has a typo: it says \"Return the m-primary part of this torsion quadraticm module as a submodule\", with an extra m on the end of 'quadratic'.",
    "created_at": "2017-10-22T21:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349696",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:24'></a>The primary_part docstring has a typo: it says "Return the m-primary part of this torsion quadraticm module as a submodule", with an extra m on the end of 'quadratic'.



---

archive/issue_comments_349697.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-22T22:04:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349698.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-22T22:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349699.json:
```json
{
    "body": "<a id='comment:27'></a>The documentation builds, but the math mode doesn't display correctly (at least in my installation).  All doctests pass.",
    "created_at": "2017-10-23T17:47:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349699",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:27'></a>The documentation builds, but the math mode doesn't display correctly (at least in my installation).  All doctests pass.



---

archive/issue_comments_349700.json:
```json
{
    "body": "<a id='comment:28'></a>Many of the examples use T.0 or T.1.  Please use T.gen(0), etc. instead: this makes it easier to look up the intended meaning of the code.",
    "created_at": "2017-10-23T22:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349700",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:28'></a>Many of the examples use T.0 or T.1.  Please use T.gen(0), etc. instead: this makes it easier to look up the intended meaning of the code.



---

archive/issue_comments_349701.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-23T22:31:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349701",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_349702.json:
```json
{
    "body": "<a id='comment:29'></a>The example for gram_matrix_quadratic constructs a matrix called D4_gram directly.  The command `DynkinDiagram('D',4).cartan_matrix()` will create the same matrix.  Would it be clearer to do so?",
    "created_at": "2017-10-23T23:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349702",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:29'></a>The example for gram_matrix_quadratic constructs a matrix called D4_gram directly.  The command `DynkinDiagram('D',4).cartan_matrix()` will create the same matrix.  Would it be clearer to do so?



---

archive/issue_comments_349703.json:
```json
{
    "body": "<a id='comment:30'></a>Replacing ```` with $$ in the documentation solves the problems with LaTeX display.",
    "created_at": "2017-10-24T20:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349703",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:30'></a>Replacing ```` with $$ in the documentation solves the problems with LaTeX display.



---

archive/issue_comments_349704.json:
```json
{
    "body": "<a id='comment:31'></a>Actually the confusion was between strings and raw strings. Some were raw and some not. \nI removed all raw strings. For me it works fine with chrome. With Firefox I get some math processing errors. But I guess that is just because the browser is outdated.",
    "created_at": "2017-10-25T06:13:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349704",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:31'></a>Actually the confusion was between strings and raw strings. Some were raw and some not. 
I removed all raw strings. For me it works fine with chrome. With Firefox I get some math processing errors. But I guess that is just because the browser is outdated.



---

archive/issue_comments_349705.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-25T06:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349706.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-25T06:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349707.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-25T06:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349708.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-25T06:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349708",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_349709.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:31 sbrandhorst]:\n> Actually the confusion was between strings and raw strings. Some were raw and some not. \n> I removed all raw strings. For me it works fine with chrome. With Firefox I get some math processing errors. But I guess that is just because the browser is outdated. \n\n\nWhy did you remove all the raw strings?  I would have gone the other way and made all docstrings raw strings....\n\nAlso, you shouldn't use $ in documentation, but single backticks for mathmode (or `.. mathmode::` for display mode).",
    "created_at": "2017-10-25T07:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349709",
    "user": "https://github.com/roed314"
}
```

<a id='comment:36'></a>Replying to [comment:31 sbrandhorst]:
> Actually the confusion was between strings and raw strings. Some were raw and some not. 
> I removed all raw strings. For me it works fine with chrome. With Firefox I get some math processing errors. But I guess that is just because the browser is outdated. 


Why did you remove all the raw strings?  I would have gone the other way and made all docstrings raw strings....

Also, you shouldn't use $ in documentation, but single backticks for mathmode (or `.. mathmode::` for display mode).



---

archive/issue_comments_349710.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-25T07:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349711.json:
```json
{
    "body": "<a id='comment:38'></a>Indeed less backslashes look nicer.\n\n---\nNew commits:",
    "created_at": "2017-10-25T07:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349711",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:38'></a>Indeed less backslashes look nicer.

---
New commits:



---

archive/issue_comments_349712.json:
```json
{
    "body": "<a id='comment:39'></a>Some questions:\n\n- Should we import `TorsionQuadraticModule` and `IntegralLattice` into the global namespace? I feel like there are more natural constructions for these modules, say as a quotient object and by using vector space constructions. That way we do not pollute the global namespace. There probably is a stronger case not to import the former, but it is good to avoid both.\n- Is `free_quadratic_module_integer_symmetric.py` included in the documentation? I don't see it in `modules/index.rst`.\n\nSome comments:\n\n- You should do tests with `TestSuite(foo).run()`.\n- Your `TorsionQuadraticModuleElement.__init__` docstring closing `\"\"\"` is not correctly indented.\n- It should be ```self``` in docstrings since it is Python code.\n- Try to keep lines <79 characters, especially in documentation.\n- Not every method has tests (`__init__` is a good place for the `TestSuite(foo).run()` and is where I always put them).\n- Change this and similar for Python3 and general Python error string conventions\n  {{{#!diff\n-ValueError, \"The modulus must divide (V,W).\"\n+ValueError(\"the modulus must divide (V,W)\")\n  }}}\n- `INPUT:` items do not end with a period/full-stop.\n- Many one-line descriptions are missing a period/full-stop.\n- `gram_matrix_quadratic` `OUTPUT:` is over indented.",
    "created_at": "2017-10-27T04:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349712",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:39'></a>Some questions:

- Should we import `TorsionQuadraticModule` and `IntegralLattice` into the global namespace? I feel like there are more natural constructions for these modules, say as a quotient object and by using vector space constructions. That way we do not pollute the global namespace. There probably is a stronger case not to import the former, but it is good to avoid both.
- Is `free_quadratic_module_integer_symmetric.py` included in the documentation? I don't see it in `modules/index.rst`.

Some comments:

- You should do tests with `TestSuite(foo).run()`.
- Your `TorsionQuadraticModuleElement.__init__` docstring closing `"""` is not correctly indented.
- It should be ```self``` in docstrings since it is Python code.
- Try to keep lines <79 characters, especially in documentation.
- Not every method has tests (`__init__` is a good place for the `TestSuite(foo).run()` and is where I always put them).
- Change this and similar for Python3 and general Python error string conventions
  {{{#!diff
-ValueError, "The modulus must divide (V,W)."
+ValueError("the modulus must divide (V,W)")
  }}}
- `INPUT:` items do not end with a period/full-stop.
- Many one-line descriptions are missing a period/full-stop.
- `gram_matrix_quadratic` `OUTPUT:` is over indented.



---

archive/issue_comments_349713.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-27T04:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349713",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_349714.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-27T07:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349714",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349715.json:
```json
{
    "body": "<a id='comment:41'></a>O.K. the use case that I have in mind is to create a `TorsionQuadraticModule` from an\n`IntegralLattice`. So there is indeed no use to pollute the global namespace. \n\nYou are right, one could check if a `free_quadratic_module` is an `IntegralLattice` in the `FreeQuadraticModule` factory function. Do we want that?\n\nI any case I want an `IntegralLattice` factory function in the global namespace.\nAt the moment it has little functionality, but later I plan to extend its functionality to create\nlattices from keywords, like the ADE-lattices, Leech, ... or an interface with the lmfdb.",
    "created_at": "2017-10-27T07:22:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349715",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:41'></a>O.K. the use case that I have in mind is to create a `TorsionQuadraticModule` from an
`IntegralLattice`. So there is indeed no use to pollute the global namespace. 

You are right, one could check if a `free_quadratic_module` is an `IntegralLattice` in the `FreeQuadraticModule` factory function. Do we want that?

I any case I want an `IntegralLattice` factory function in the global namespace.
At the moment it has little functionality, but later I plan to extend its functionality to create
lattices from keywords, like the ADE-lattices, Leech, ... or an interface with the lmfdb.



---

archive/issue_comments_349716.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-27T07:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349716",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_349717.json:
```json
{
    "body": "<a id='comment:43'></a>As someone who works in an area of geometry that uses these objects, I absolutely want `IntegralLattice` as part of the global name space.  I also want the ability to work directly with the associated discriminant groups, and ask questions about whether one is isomorphic to another, in the same genus, etc.  There are some classifications of possible discriminant groups which mean being able to access `TorsionQuadraticModule` directly might be helpful.\n\nCreating ADE lattices should be very quick, since as I note above we already have the appropriate matrices in the `DynkinDiagram` code.",
    "created_at": "2017-10-27T11:45:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349717",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:43'></a>As someone who works in an area of geometry that uses these objects, I absolutely want `IntegralLattice` as part of the global name space.  I also want the ability to work directly with the associated discriminant groups, and ask questions about whether one is isomorphic to another, in the same genus, etc.  There are some classifications of possible discriminant groups which mean being able to access `TorsionQuadraticModule` directly might be helpful.

Creating ADE lattices should be very quick, since as I note above we already have the appropriate matrices in the `DynkinDiagram` code.



---

archive/issue_comments_349718.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:43 ursula]:\n> Creating ADE lattices should be very quick, since as I note above we already have the appropriate matrices in the `DynkinDiagram` code.\n\n\nLet's make the factory functions a separate ticket.",
    "created_at": "2017-10-27T12:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349718",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:44'></a>Replying to [comment:43 ursula]:
> Creating ADE lattices should be very quick, since as I note above we already have the appropriate matrices in the `DynkinDiagram` code.


Let's make the factory functions a separate ticket.



---

archive/issue_comments_349719.json:
```json
{
    "body": "<a id='comment:45'></a>Fair enough. This is not my area of expertise, so if you think it is useful, then I have no objections other than it should be a `lazy_import`. My suggestion stemmed from thinking such a construction would be similar to this:\n\n```\nsage: V = (ZZ^3).span([[1/2,5,2],[3/7,2,-1],[1/3,1/5,-2]])\n```\n\nAlso, one other minor doc point, in `free_quadratic_module_integer_symmetric.py`, the examples in the module-level docstring are over-indented.\n\nUrsula, are you going to be handling the rest of the review, or at least the mathematical side?",
    "created_at": "2017-10-27T13:20:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349719",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'></a>Fair enough. This is not my area of expertise, so if you think it is useful, then I have no objections other than it should be a `lazy_import`. My suggestion stemmed from thinking such a construction would be similar to this:

```
sage: V = (ZZ^3).span([[1/2,5,2],[3/7,2,-1],[1/3,1/5,-2]])
```

Also, one other minor doc point, in `free_quadratic_module_integer_symmetric.py`, the examples in the module-level docstring are over-indented.

Ursula, are you going to be handling the rest of the review, or at least the mathematical side?



---

archive/issue_comments_349720.json:
```json
{
    "body": "<a id='comment:46'></a>I'm definitely looking at the math but don't have a lot of reviewing time outside Sage Days, so any help is appreciated.",
    "created_at": "2017-10-27T13:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349720",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:46'></a>I'm definitely looking at the math but don't have a lot of reviewing time outside Sage Days, so any help is appreciated.



---

archive/issue_comments_349721.json:
```json
{
    "body": "<a id='comment:47'></a>If the math is good, then I can do the rest of the review.",
    "created_at": "2017-10-28T01:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349721",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:47'></a>If the math is good, then I can do the rest of the review.



---

archive/issue_comments_349722.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-28T12:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349723.json:
```json
{
    "body": "<a id='comment:49'></a>*ping* :-)",
    "created_at": "2017-11-03T07:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349723",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:49'></a>*ping* :-)



---

archive/issue_comments_349724.json:
```json
{
    "body": "<a id='comment:50'></a>Confirmed documentation now displays math correctly!",
    "created_at": "2017-11-03T13:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349724",
    "user": "https://trac.sagemath.org/admin/accounts/users/ursula"
}
```

<a id='comment:50'></a>Confirmed documentation now displays math correctly!



---

archive/issue_comments_349725.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-03T14:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349725",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349726.json:
```json
{
    "body": "<a id='comment:52'></a>I went through and made a lot of mostly minor changes to keep line lengths short, code and doc clean and as consistent as is possible in Sage, and removing trailing whitespace. It would be nice to have a natural top-level way to construct a `TorsionQuadraticModule` that is not adding to the global namespace. That is to say, we should be able to do `V / W` for appropriate objects `V` and `W` and/or something like `V.torsion_quotient(W)` (I am sure that is not a good name, please suggest alternatives). I just am not sure enough in the math to say what `V` and `W` should be. However, if that is something that could wait for another ticket, then you cab set a positive review if my changes look good and you add your name to the authors (and `@`ursula to the reviewers).\n\n---\nNew commits:",
    "created_at": "2017-11-06T07:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349726",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:52'></a>I went through and made a lot of mostly minor changes to keep line lengths short, code and doc clean and as consistent as is possible in Sage, and removing trailing whitespace. It would be nice to have a natural top-level way to construct a `TorsionQuadraticModule` that is not adding to the global namespace. That is to say, we should be able to do `V / W` for appropriate objects `V` and `W` and/or something like `V.torsion_quotient(W)` (I am sure that is not a good name, please suggest alternatives). I just am not sure enough in the math to say what `V` and `W` should be. However, if that is something that could wait for another ticket, then you cab set a positive review if my changes look good and you add your name to the authors (and `@`ursula to the reviewers).

---
New commits:



---

archive/issue_comments_349727.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-06T10:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349728.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-06T10:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349729.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-06T11:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349729",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_349730.json:
```json
{
    "body": "<a id='comment:56'></a>We could enable `V/W`. But since that does not work for all `V, W` it feels odd.\nI would delegate such decisions to a different ticket if the need arises.\n\nThank you for the review. I am happy with your changes and\ndid some trivial additions. Positive review if you are happy with my changes.",
    "created_at": "2017-11-06T11:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349730",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:56'></a>We could enable `V/W`. But since that does not work for all `V, W` it feels odd.
I would delegate such decisions to a different ticket if the need arises.

Thank you for the review. I am happy with your changes and
did some trivial additions. Positive review if you are happy with my changes.



---

archive/issue_comments_349731.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-06T12:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349731",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_349732.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [comment:56 sbrandhorst]:\n> We could enable `V/W`. But since that does not work for all `V, W` it feels odd.\n> I would delegate such decisions to a different ticket if the need arises.\n\n\nIt doesn't feel that odd to me. That is what generic code and `NotImplementedError`'s are for. However, a later ticket it will be.\n\n> Thank you for the review. I am happy with your changes and\n> did some trivial additions. Positive review if you are happy with my changes.\n\n\nThank you.",
    "created_at": "2017-11-06T12:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349732",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:57'></a>Replying to [comment:56 sbrandhorst]:
> We could enable `V/W`. But since that does not work for all `V, W` it feels odd.
> I would delegate such decisions to a different ticket if the need arises.


It doesn't feel that odd to me. That is what generic code and `NotImplementedError`'s are for. However, a later ticket it will be.

> Thank you for the review. I am happy with your changes and
> did some trivial additions. Positive review if you are happy with my changes.


Thank you.



---

archive/issue_comments_349733.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-11-07T08:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_349734.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2017-11-07T08:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_349735.json:
```json
{
    "body": "<a id='comment:59'></a>Let us see what the patchbot says now.",
    "created_at": "2017-11-07T08:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349735",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:59'></a>Let us see what the patchbot says now.



---

archive/issue_comments_349736.json:
```json
{
    "body": "<a id='comment:60'></a>Whoops, forgot about those. Thanks.",
    "created_at": "2017-11-07T10:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349736",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:60'></a>Whoops, forgot about those. Thanks.



---

archive/issue_comments_349737.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-07T10:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349737",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_349738.json:
```json
{
    "body": "<a id='comment:61'></a>There are some patchbot failures. However, they look quite unrelated.",
    "created_at": "2017-11-09T16:47:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349738",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:61'></a>There are some patchbot failures. However, they look quite unrelated.



---

archive/issue_comments_349739.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-11T01:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23699#issuecomment-349739",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060561.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-11T01:03:41Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23699",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23699#event-60561"
}
```
