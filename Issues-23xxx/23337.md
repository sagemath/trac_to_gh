# Issue 23337: Use variable names instead of symbolic variables

archive/issues_023100.json:
```json
{
    "body": "Where possible, use `QQ[\"x\"]` instead of `QQ[x]` to construct polynomial rings. After #10483, the latter will be deprecated.\n\n\nCC:  simonking @rwst\n\nBranch/Commit: ee4548f920444ef5739ccc10cb67d9ce73449d85\n\nReviewer: Jeroen Demeyer, Travis Scrimshaw\n\nAuthor: Simon King, Ralf Stephan, Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23337\n\n",
    "closed_at": "2017-07-26T22:13:02Z",
    "created_at": "2017-06-29T12:05:11Z",
    "labels": [
        "component: basic arithmetic"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Use variable names instead of symbolic variables",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23337",
    "user": "https://github.com/jdemeyer"
}
```
Where possible, use `QQ["x"]` instead of `QQ[x]` to construct polynomial rings. After #10483, the latter will be deprecated.


CC:  simonking @rwst

Branch/Commit: ee4548f920444ef5739ccc10cb67d9ce73449d85

Reviewer: Jeroen Demeyer, Travis Scrimshaw

Author: Simon King, Ralf Stephan, Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23337





---

archive/issue_comments_343894.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-29T12:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343894",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_343895.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-29T12:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343895",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_343896.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-29T12:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_343897.json:
```json
{
    "body": "<a id='comment:5'></a>There are some doctest failures (see patchbot). There are some actual changes in output type, but I am not sure if they are (more) correct or not. I would think some of them are actual regressions since they do not contain as much information (i.e., `ZZ[x][y]` has slightly different structure for things like factoring compared to `ZZ[x,y]`).",
    "created_at": "2017-06-30T00:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343897",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>There are some doctest failures (see patchbot). There are some actual changes in output type, but I am not sure if they are (more) correct or not. I would think some of them are actual regressions since they do not contain as much information (i.e., `ZZ[x][y]` has slightly different structure for things like factoring compared to `ZZ[x,y]`).



---

archive/issue_comments_343898.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-30T08:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343898",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_343899.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-30T08:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_343900.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-30T09:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343900",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_343901.json:
```json
{
    "body": "<a id='comment:8'></a>I reverted the changes to `flatten.py`.",
    "created_at": "2017-06-30T09:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343901",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>I reverted the changes to `flatten.py`.



---

archive/issue_comments_343902.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-30T10:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343902",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_343903.json:
```json
{
    "body": "<a id='comment:10'></a>I think I understand what is going wrong with `flatten.py`. It is checking the keys in `D`, which are actual variables and hence, do not compare with the string values. So the variable names all get included when constructing `new_vars` on this line:\n\n```python\nnew_vars = [[[t for t in v if t not in newD.keys()], b] for v,b in old_vars]\n```\nI think I see a good way to fix this. I also am going to do a slight bit of cleanup of that method.",
    "created_at": "2017-06-30T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343903",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>I think I understand what is going wrong with `flatten.py`. It is checking the keys in `D`, which are actual variables and hence, do not compare with the string values. So the variable names all get included when constructing `new_vars` on this line:

```python
new_vars = [[[t for t in v if t not in newD.keys()], b] for v,b in old_vars]
```
I think I see a good way to fix this. I also am going to do a slight bit of cleanup of that method.



---

archive/issue_comments_343904.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-06-30T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343904",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_343905.json:
```json
{
    "body": "<a id='comment:11'></a>Given that I reverted the changes to `flatten.py` and that the previously-failing doctests now pass, why was this set to needs_work?",
    "created_at": "2017-06-30T12:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343905",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>Given that I reverted the changes to `flatten.py` and that the previously-failing doctests now pass, why was this set to needs_work?



---

archive/issue_comments_343906.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-30T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343906",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_343907.json:
```json
{
    "body": "<a id='comment:12'></a>This fixes the failing doctests but addresses the problem in `flatten.py` (with some simple cleanup).\n\n---\nNew commits:",
    "created_at": "2017-06-30T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343907",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>This fixes the failing doctests but addresses the problem in `flatten.py` (with some simple cleanup).

---
New commits:



---

archive/issue_comments_343908.json:
```json
{
    "body": "<a id='comment:13'></a>I would rather fix the problem than push it off until later.",
    "created_at": "2017-06-30T12:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343908",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>I would rather fix the problem than push it off until later.



---

archive/issue_comments_343909.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-30T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343909",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_343910.json:
```json
{
    "body": "<a id='comment:14'></a>Creating tickets is cheap: #23343\n\n---\nNew commits:",
    "created_at": "2017-06-30T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343910",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Creating tickets is cheap: #23343

---
New commits:



---

archive/issue_events_060080.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-26T22:13:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23337#event-60080"
}
```



---

archive/issue_comments_343911.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-07-26T22:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-343911",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
