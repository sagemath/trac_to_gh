# Issue 23337: Use variable names instead of symbolic variables

archive/issues_023100.json:
```json
{
    "body": "Where possible, use `QQ[\"x\"]` instead of `QQ[x]` to construct polynomial rings. After #10483, the latter will be deprecated.\n\n\nCC:  simonking @rwst\n\nBranch/Commit: [ee4548f920444ef5739ccc10cb67d9ce73449d85](https://github.com/sagemath/sagetrac-mirror/commit/ee4548f920444ef5739ccc10cb67d9ce73449d85)\n\nReviewer: Jeroen Demeyer, Travis Scrimshaw\n\nAuthor: Simon King, Ralf Stephan, Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23337\n\n",
    "closed_at": "2017-07-26T22:13:02Z",
    "created_at": "2017-06-29T12:05:11Z",
    "labels": [
        "component: basic arithmetic"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Use variable names instead of symbolic variables",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23337",
    "user": "https://github.com/jdemeyer"
}
```
Where possible, use `QQ["x"]` instead of `QQ[x]` to construct polynomial rings. After #10483, the latter will be deprecated.


CC:  simonking @rwst

Branch/Commit: [ee4548f920444ef5739ccc10cb67d9ce73449d85](https://github.com/sagemath/sagetrac-mirror/commit/ee4548f920444ef5739ccc10cb67d9ce73449d85)

Reviewer: Jeroen Demeyer, Travis Scrimshaw

Author: Simon King, Ralf Stephan, Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23337





---

archive/issue_comments_440841.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/ticket/23337\"",
    "created_at": "2017-06-29T12:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440841",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/ticket/23337"



---

archive/issue_comments_440842.json:
```json
{
    "body": "Changing commit from \"\" to \"d1f6fff086983e2224af518ac55faeec1593ff63\"",
    "created_at": "2017-06-29T12:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "d1f6fff086983e2224af518ac55faeec1593ff63"



---

archive/issue_comments_440843.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[d1f6fff](https://github.com/sagemath/sagetrac-mirror/commit/d1f6fff086983e2224af518ac55faeec1593ff63)|`Use variable names instead of symbolic variables`|",
    "created_at": "2017-06-29T12:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[d1f6fff](https://github.com/sagemath/sagetrac-mirror/commit/d1f6fff086983e2224af518ac55faeec1593ff63)|`Use variable names instead of symbolic variables`|



---

archive/issue_comments_440844.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2017-06-29T12:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440844",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_440845.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-29T12:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440845",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_440846.json:
```json
{
    "body": "Changing commit from \"d1f6fff086983e2224af518ac55faeec1593ff63\" to \"52de325f447e0779bed655d0e57727c903b0f33e\"",
    "created_at": "2017-06-29T12:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d1f6fff086983e2224af518ac55faeec1593ff63" to "52de325f447e0779bed655d0e57727c903b0f33e"



---

archive/issue_comments_440847.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[52de325](https://github.com/sagemath/sagetrac-mirror/commit/52de325f447e0779bed655d0e57727c903b0f33e)|`Use variable names instead of symbolic variables`|",
    "created_at": "2017-06-29T12:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[52de325](https://github.com/sagemath/sagetrac-mirror/commit/52de325f447e0779bed655d0e57727c903b0f33e)|`Use variable names instead of symbolic variables`|



---

archive/issue_comments_440848.json:
```json
{
    "body": "<a id='comment:5'></a>\nThere are some doctest failures (see patchbot). There are some actual changes in output type, but I am not sure if they are (more) correct or not. I would think some of them are actual regressions since they do not contain as much information (i.e., `ZZ[x][y]` has slightly different structure for things like factoring compared to `ZZ[x,y]`).",
    "created_at": "2017-06-30T00:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440848",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
There are some doctest failures (see patchbot). There are some actual changes in output type, but I am not sure if they are (more) correct or not. I would think some of them are actual regressions since they do not contain as much information (i.e., `ZZ[x][y]` has slightly different structure for things like factoring compared to `ZZ[x,y]`).



---

archive/issue_comments_440849.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-30T08:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440849",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_440850.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[ee4548f](https://github.com/sagemath/sagetrac-mirror/commit/ee4548f920444ef5739ccc10cb67d9ce73449d85)|`Use variable names instead of symbolic variables`|",
    "created_at": "2017-06-30T08:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[ee4548f](https://github.com/sagemath/sagetrac-mirror/commit/ee4548f920444ef5739ccc10cb67d9ce73449d85)|`Use variable names instead of symbolic variables`|



---

archive/issue_comments_440851.json:
```json
{
    "body": "Changing commit from \"52de325f447e0779bed655d0e57727c903b0f33e\" to \"ee4548f920444ef5739ccc10cb67d9ce73449d85\"",
    "created_at": "2017-06-30T08:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "52de325f447e0779bed655d0e57727c903b0f33e" to "ee4548f920444ef5739ccc10cb67d9ce73449d85"



---

archive/issue_comments_440852.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-30T09:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440852",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_440853.json:
```json
{
    "body": "<a id='comment:8'></a>\nI reverted the changes to `flatten.py`.",
    "created_at": "2017-06-30T09:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440853",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
I reverted the changes to `flatten.py`.



---

archive/issue_comments_440854.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-30T10:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440854",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440855.json:
```json
{
    "body": "<a id='comment:10'></a>\nI think I understand what is going wrong with `flatten.py`. It is checking the keys in `D`, which are actual variables and hence, do not compare with the string values. So the variable names all get included when constructing `new_vars` on this line:\n\n```python\nnew_vars = [[[t for t in v if t not in newD.keys()], b] for v,b in old_vars]\n```\nI think I see a good way to fix this. I also am going to do a slight bit of cleanup of that method.",
    "created_at": "2017-06-30T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440855",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
I think I understand what is going wrong with `flatten.py`. It is checking the keys in `D`, which are actual variables and hence, do not compare with the string values. So the variable names all get included when constructing `new_vars` on this line:

```python
new_vars = [[[t for t in v if t not in newD.keys()], b] for v,b in old_vars]
```
I think I see a good way to fix this. I also am going to do a slight bit of cleanup of that method.



---

archive/issue_comments_440856.json:
```json
{
    "body": "Changing reviewer from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Travis Scrimshaw\"",
    "created_at": "2017-06-30T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440856",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "Jeroen Demeyer" to "Jeroen Demeyer, Travis Scrimshaw"



---

archive/issue_comments_440857.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-06-30T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440857",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_440858.json:
```json
{
    "body": "<a id='comment:11'></a>\nGiven that I reverted the changes to `flatten.py` and that the previously-failing doctests now pass, why was this set to needs_work?",
    "created_at": "2017-06-30T12:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440858",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Given that I reverted the changes to `flatten.py` and that the previously-failing doctests now pass, why was this set to needs_work?



---

archive/issue_comments_440859.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-30T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440859",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_440860.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/23337\" to \"u/tscrim/ticket/var_names_not_symbolic_names-23337\"",
    "created_at": "2017-06-30T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440860",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/jdemeyer/ticket/23337" to "u/tscrim/ticket/var_names_not_symbolic_names-23337"



---

archive/issue_comments_440861.json:
```json
{
    "body": "Changing commit from \"ee4548f920444ef5739ccc10cb67d9ce73449d85\" to \"e938684edebd1693f84db659f3bdeb05e4bfb5f8\"",
    "created_at": "2017-06-30T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440861",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "ee4548f920444ef5739ccc10cb67d9ce73449d85" to "e938684edebd1693f84db659f3bdeb05e4bfb5f8"



---

archive/issue_comments_440862.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis fixes the failing doctests but addresses the problem in `flatten.py` (with some simple cleanup).\n\n---\nNew commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[e938684](https://github.com/sagemath/sagetrac-mirror/commit/e938684edebd1693f84db659f3bdeb05e4bfb5f8)|`Handling flatten.py and some mild cleanup.`|",
    "created_at": "2017-06-30T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440862",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
This fixes the failing doctests but addresses the problem in `flatten.py` (with some simple cleanup).

---
New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[e938684](https://github.com/sagemath/sagetrac-mirror/commit/e938684edebd1693f84db659f3bdeb05e4bfb5f8)|`Handling flatten.py and some mild cleanup.`|



---

archive/issue_comments_440863.json:
```json
{
    "body": "<a id='comment:13'></a>\nI would rather fix the problem than push it off until later.",
    "created_at": "2017-06-30T12:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440863",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
I would rather fix the problem than push it off until later.



---

archive/issue_comments_440864.json:
```json
{
    "body": "Changing branch from \"u/tscrim/ticket/var_names_not_symbolic_names-23337\" to \"u/jdemeyer/ticket/23337\"",
    "created_at": "2017-06-30T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440864",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/tscrim/ticket/var_names_not_symbolic_names-23337" to "u/jdemeyer/ticket/23337"



---

archive/issue_comments_440865.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-30T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440865",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440866.json:
```json
{
    "body": "Changing commit from \"e938684edebd1693f84db659f3bdeb05e4bfb5f8\" to \"ee4548f920444ef5739ccc10cb67d9ce73449d85\"",
    "created_at": "2017-06-30T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440866",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "e938684edebd1693f84db659f3bdeb05e4bfb5f8" to "ee4548f920444ef5739ccc10cb67d9ce73449d85"



---

archive/issue_comments_440867.json:
```json
{
    "body": "<a id='comment:14'></a>\nCreating tickets is cheap: #23343\n\n---\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[ee4548f](https://github.com/sagemath/sagetrac-mirror/commit/ee4548f920444ef5739ccc10cb67d9ce73449d85)|`Use variable names instead of symbolic variables`|",
    "created_at": "2017-06-30T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440867",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Creating tickets is cheap: #23343

---
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[ee4548f](https://github.com/sagemath/sagetrac-mirror/commit/ee4548f920444ef5739ccc10cb67d9ce73449d85)|`Use variable names instead of symbolic variables`|



---

archive/issue_events_068324.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-26T22:13:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23337#event-68324"
}
```



---

archive/issue_comments_440868.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/23337\" to \"ee4548f920444ef5739ccc10cb67d9ce73449d85\"",
    "created_at": "2017-07-26T22:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440868",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/ticket/23337" to "ee4548f920444ef5739ccc10cb67d9ce73449d85"



---

archive/issue_comments_440869.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-07-26T22:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23337",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23337#issuecomment-440869",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
