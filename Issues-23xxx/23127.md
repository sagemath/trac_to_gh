# Issue 23127: Stop using cysignals .pxi files (part 6)

archive/issues_022890.json:
```json
{
    "assignees": [],
    "body": "Follow-up to #22806 and #22896: we should stop using the deprecated files `cysignals/memory.pxi` and `cysignals/signals.pxi`.\n\nGiven the large number of files which need to be changed, this is done in parts.\n\nBranch: **[de79ac0](https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23127_\n\n",
    "closed_at": "2017-06-13T06:51:39Z",
    "created_at": "2017-06-02T10:29:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20cython",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Stop using cysignals .pxi files (part 6)",
    "type": "issue",
    "updated_at": "2017-06-14T00:04:10Z",
    "url": "https://github.com/sagemath/sage/issues/23127",
    "user": "https://github.com/jdemeyer"
}
```
Follow-up to #22806 and #22896: we should stop using the deprecated files `cysignals/memory.pxi` and `cysignals/signals.pxi`.

Given the large number of files which need to be changed, this is done in parts.

Branch: **[de79ac0](https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c)**

Reviewer: **Travis Scrimshaw**

Author: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/23127_





---

archive/issue_events_304394.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-02T10:29:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304394"
}
```



---

archive/issue_events_304395.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-02T10:29:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20cython",
    "label_color": "000080",
    "label_name": "component: cython",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304395"
}
```



---

archive/issue_events_304396.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-02T10:29:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304396"
}
```



---

archive/issue_events_304397.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-02T10:29:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304397"
}
```



---

archive/issue_comments_349253.json:
```json
{
    "body": "Branch: **[u/jdemeyer/stop_using_cysignals__pxi_files__part_6_](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/stop_using_cysignals__pxi_files__part_6_)**",
    "created_at": "2017-06-02T12:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349253",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/stop_using_cysignals__pxi_files__part_6_](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/stop_using_cysignals__pxi_files__part_6_)**



---

archive/issue_events_304398.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-02T12:29:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304398"
}
```



---

archive/issue_comments_349254.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/874328a3bb8bacae8977f4b3c607aa4a0461fd65\">874328a</a></td><td><code>Stop using cysignals .pxi files (part 6)</code></td></tr></table>\n",
    "created_at": "2017-06-02T12:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349254",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">Comment 2</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/874328a3bb8bacae8977f4b3c607aa4a0461fd65">874328a</a></td><td><code>Stop using cysignals .pxi files (part 6)</code></td></tr></table>




---

archive/issue_comments_349255.json:
```json
{
    "body": "Commit: **[874328a](https://github.com/sagemath/sagetrac-mirror/commit/874328a3bb8bacae8977f4b3c607aa4a0461fd65)**",
    "created_at": "2017-06-02T12:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349255",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[874328a](https://github.com/sagemath/sagetrac-mirror/commit/874328a3bb8bacae8977f4b3c607aa4a0461fd65)**



---

archive/issue_events_304399.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-03T00:13:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304399"
}
```



---

archive/issue_events_304400.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-03T00:13:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304400"
}
```



---

archive/issue_comments_349256.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nLGTM.",
    "created_at": "2017-06-03T00:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349256",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">Comment 3</div>

LGTM.



---

archive/issue_comments_349257.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-06-03T00:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349257",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_349258.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI'm getting random failures in `matrix_integer_dense`, like\n\n```\nsage -t --long src/sage/geometry/cone.py\n**********************************************************************\nFile \"src/sage/geometry/cone.py\", line 4862, in sage.geometry.cone.?.lyapunov_rank\nFailed example:\n    b = K.lyapunov_rank()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.cone.?.lyapunov_rank[48]>\", line 1, in <module>\n        b = K.lyapunov_rank()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py\", line 4926, in lyapunov_rank\n        return len(K_SP.lyapunov_like_basis()) + l*m + (n - m)*n\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py\", line 4688, in lyapunov_like_basis\n        for (x,s) in self.discrete_complementarity_set() ]\n      File \"sage/misc/cachefunc.pyx\", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:13463)\n        self.cache = f(self._instance)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py\", line 4540, in discrete_complementarity_set\n        return tuple( (x,s) for x in self\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py\", line 4541, in <genexpr>\n        for s in self.dual()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py\", line 2067, in dual\n        for ray in self.orthogonal_sublattice().gens():\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py\", line 3694, in orthogonal_sublattice\n        self._orthogonal_sublattice = self.sublattice_quotient().dual()\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/toric_lattice.py\", line 1709, in dual\n        self.W().basis_matrix().transpose().integer_kernel().gens())\n      File \"sage/matrix/matrix2.pyx\", line 4499, in sage.matrix.matrix2.Matrix.integer_kernel (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:32685)\n        return A.kernel()\n      File \"sage/matrix/matrix2.pyx\", line 4350, in sage.matrix.matrix2.Matrix.left_kernel (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:31925)\n        K = self.transpose().right_kernel(*args, **kwds)\n      File \"sage/matrix/matrix2.pyx\", line 4191, in sage.matrix.matrix2.Matrix.right_kernel (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:31366)\n        M = self.right_kernel_matrix(*args, **kwds)\n      File \"sage/matrix/matrix2.pyx\", line 3796, in sage.matrix.matrix2.Matrix.right_kernel_matrix (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:29865)\n        format, M = self._right_kernel_matrix(algorithm=algorithm, proof=proof)\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2565, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._right_kernel_matrix (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:21866)\n        K = self._rational_kernel_flint().transpose().saturation(proof=proof)\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2092, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.saturation (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:18845)\n        return saturation(self, p=p, proof=proof, max_dets=max_dets)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/matrix/matrix_integer_dense_saturation.py\", line 222, in saturation\n        r = A.rank()\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 3463, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.rank (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:30139)\n        r = self._rank_modp()\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 3493, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._rank_modp (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:30501)\n        return A.rank()\n    SystemError: NULL result without error in PyObject_Call\n```\nIts always different for each run but happens ~50% of the cases on Ubuntu 14 32&64-bit",
    "created_at": "2017-06-07T20:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349258",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">Comment 4</div>

I'm getting random failures in `matrix_integer_dense`, like

```
sage -t --long src/sage/geometry/cone.py
**********************************************************************
File "src/sage/geometry/cone.py", line 4862, in sage.geometry.cone.?.lyapunov_rank
Failed example:
    b = K.lyapunov_rank()
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.cone.?.lyapunov_rank[48]>", line 1, in <module>
        b = K.lyapunov_rank()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py", line 4926, in lyapunov_rank
        return len(K_SP.lyapunov_like_basis()) + l*m + (n - m)*n
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py", line 4688, in lyapunov_like_basis
        for (x,s) in self.discrete_complementarity_set() ]
      File "sage/misc/cachefunc.pyx", line 2401, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:13463)
        self.cache = f(self._instance)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py", line 4540, in discrete_complementarity_set
        return tuple( (x,s) for x in self
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py", line 4541, in <genexpr>
        for s in self.dual()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py", line 2067, in dual
        for ray in self.orthogonal_sublattice().gens():
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/cone.py", line 3694, in orthogonal_sublattice
        self._orthogonal_sublattice = self.sublattice_quotient().dual()
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/geometry/toric_lattice.py", line 1709, in dual
        self.W().basis_matrix().transpose().integer_kernel().gens())
      File "sage/matrix/matrix2.pyx", line 4499, in sage.matrix.matrix2.Matrix.integer_kernel (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:32685)
        return A.kernel()
      File "sage/matrix/matrix2.pyx", line 4350, in sage.matrix.matrix2.Matrix.left_kernel (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:31925)
        K = self.transpose().right_kernel(*args, **kwds)
      File "sage/matrix/matrix2.pyx", line 4191, in sage.matrix.matrix2.Matrix.right_kernel (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:31366)
        M = self.right_kernel_matrix(*args, **kwds)
      File "sage/matrix/matrix2.pyx", line 3796, in sage.matrix.matrix2.Matrix.right_kernel_matrix (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix2.c:29865)
        format, M = self._right_kernel_matrix(algorithm=algorithm, proof=proof)
      File "sage/matrix/matrix_integer_dense.pyx", line 2565, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._right_kernel_matrix (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:21866)
        K = self._rational_kernel_flint().transpose().saturation(proof=proof)
      File "sage/matrix/matrix_integer_dense.pyx", line 2092, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.saturation (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:18845)
        return saturation(self, p=p, proof=proof, max_dets=max_dets)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/matrix/matrix_integer_dense_saturation.py", line 222, in saturation
        r = A.rank()
      File "sage/matrix/matrix_integer_dense.pyx", line 3463, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.rank (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:30139)
        r = self._rank_modp()
      File "sage/matrix/matrix_integer_dense.pyx", line 3493, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._rank_modp (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:30501)
        return A.rank()
    SystemError: NULL result without error in PyObject_Call
```
Its always different for each run but happens ~50% of the cases on Ubuntu 14 32&64-bit



---

archive/issue_events_304401.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-07T20:07:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304401"
}
```



---

archive/issue_events_304402.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-07T20:07:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304402"
}
```



---

archive/issue_comments_349259.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@vbraun](#comment%3A4):\n> Its always different for each run\n\nWhat do you mean with that?",
    "created_at": "2017-06-07T20:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349259",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@vbraun](#comment%3A4):
> Its always different for each run

What do you mean with that?



---

archive/issue_comments_349260.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI.e. crashes in different tests or sometimes not at all.",
    "created_at": "2017-06-07T22:32:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349260",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">Comment 6</div>

I.e. crashes in different tests or sometimes not at all.



---

archive/issue_comments_349261.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nMaybe it comes from this becoming a `calloc` instead of a `malloc` and doing the 0 initialization (this was done a few places)?\n\n```diff\n@@ -145,20 +148,18 @@ cdef class Matrix_modn_sparse(matrix_sparse.Matrix_sparse):\n         p = parent.base_ring().order()\n         self.p = p\n \n-\n-        self.rows = <c_vector_modint*> sig_malloc(nr*sizeof(c_vector_modint))\n-        if self.rows == NULL:\n-            raise MemoryError(\"error allocating memory for sparse matrix\")\n+        self.rows = <c_vector_modint*>check_calloc(nr, sizeof(c_vector_modint))\n \n         for i from 0 <= i < nr:\n             init_c_vector_modint(&self.rows[i], p, nc, 0)\n \n```\nAlthough that doesn't make much sense to me (or why it would only appear some of the time).\n\nThe only other change in logic (other than adding extra checks that it did allocate) is this one:\n\n```diff\n@@ -457,19 +458,8 @@ cdef class Matrix_modn_dense_template(Matrix_dense):\n         if p >= MAX_MODULUS:\n             raise OverflowError(\"p (=%s) must be < %s.\"%(p, MAX_MODULUS))\n \n-        sig_on()\n-        self._entries = <celement *> sig_malloc(sizeof(celement)*self._nrows*self._ncols)\n-        sig_off()\n-        if self._entries == NULL:\n-           raise MemoryError(\"Error allocating matrix.\")\n-\n-        sig_on()\n-        self._matrix = <celement **> sig_malloc(sizeof(celement*)*self._nrows)\n-        sig_off()\n-        if self._matrix == NULL:\n-            sig_free(self._entries)\n-            self._entries = NULL\n-            raise MemoryError(\"Error allocating memory.\")\n+        self._entries = <celement *>check_allocarray(self._nrows * self._ncols, sizeof(celement))\n+        self._matrix = <celement **>check_allocarray(self._nrows, sizeof(celement*))\n \n         cdef unsigned int k\n         cdef Py_ssize_t i\n```\nHowever, the only difference there is we do not cleanup the `self._entries` if the latter happens to fail but the former succeeds (actually, shouldn't we still do that?).\n\n*scratches head*",
    "created_at": "2017-06-08T00:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349261",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">Comment 7</div>

Maybe it comes from this becoming a `calloc` instead of a `malloc` and doing the 0 initialization (this was done a few places)?

```diff
@@ -145,20 +148,18 @@ cdef class Matrix_modn_sparse(matrix_sparse.Matrix_sparse):
         p = parent.base_ring().order()
         self.p = p
 
-
-        self.rows = <c_vector_modint*> sig_malloc(nr*sizeof(c_vector_modint))
-        if self.rows == NULL:
-            raise MemoryError("error allocating memory for sparse matrix")
+        self.rows = <c_vector_modint*>check_calloc(nr, sizeof(c_vector_modint))
 
         for i from 0 <= i < nr:
             init_c_vector_modint(&self.rows[i], p, nc, 0)
 
```
Although that doesn't make much sense to me (or why it would only appear some of the time).

The only other change in logic (other than adding extra checks that it did allocate) is this one:

```diff
@@ -457,19 +458,8 @@ cdef class Matrix_modn_dense_template(Matrix_dense):
         if p >= MAX_MODULUS:
             raise OverflowError("p (=%s) must be < %s."%(p, MAX_MODULUS))
 
-        sig_on()
-        self._entries = <celement *> sig_malloc(sizeof(celement)*self._nrows*self._ncols)
-        sig_off()
-        if self._entries == NULL:
-           raise MemoryError("Error allocating matrix.")
-
-        sig_on()
-        self._matrix = <celement **> sig_malloc(sizeof(celement*)*self._nrows)
-        sig_off()
-        if self._matrix == NULL:
-            sig_free(self._entries)
-            self._entries = NULL
-            raise MemoryError("Error allocating memory.")
+        self._entries = <celement *>check_allocarray(self._nrows * self._ncols, sizeof(celement))
+        self._matrix = <celement **>check_allocarray(self._nrows, sizeof(celement*))
 
         cdef unsigned int k
         cdef Py_ssize_t i
```
However, the only difference there is we do not cleanup the `self._entries` if the latter happens to fail but the former succeeds (actually, shouldn't we still do that?).

*scratches head*



---

archive/issue_comments_349262.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@tscrim](#comment%3A7):\n> Maybe it comes from this becoming a `calloc` instead of a `malloc`\n\nThat was actually meant to be safer. If you have an array of pointers, it's good practice to initialize it with zeros such that you can safely `free()` them.",
    "created_at": "2017-06-08T07:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349262",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@tscrim](#comment%3A7):
> Maybe it comes from this becoming a `calloc` instead of a `malloc`

That was actually meant to be safer. If you have an array of pointers, it's good practice to initialize it with zeros such that you can safely `free()` them.



---

archive/issue_comments_349263.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nSo far, I have not been able to reproduce the issue on my laptop.",
    "created_at": "2017-06-08T07:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349263",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">Comment 9</div>

So far, I have not been able to reproduce the issue on my laptop.



---

archive/issue_comments_349264.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nI am moving the part of this patch not involving `src/sage/matrix` to #23176.",
    "created_at": "2017-06-08T07:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349264",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">Comment 10</div>

I am moving the part of this patch not involving `src/sage/matrix` to #23176.



---

archive/issue_comments_349265.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebb406ee0f20a0b31c211c3ddc8b24bdd9ca9ec6\">ebb406e</a></td><td><code>Stop using cysignals .pxi files (part 6)</code></td></tr></table>\n",
    "created_at": "2017-06-08T07:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349265",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebb406ee0f20a0b31c211c3ddc8b24bdd9ca9ec6">ebb406e</a></td><td><code>Stop using cysignals .pxi files (part 6)</code></td></tr></table>




---

archive/issue_comments_349266.json:
```json
{
    "body": "Changed commit from **[874328a](https://github.com/sagemath/sagetrac-mirror/commit/874328a3bb8bacae8977f4b3c607aa4a0461fd65)** to **[ebb406e](https://github.com/sagemath/sagetrac-mirror/commit/ebb406ee0f20a0b31c211c3ddc8b24bdd9ca9ec6)**",
    "created_at": "2017-06-08T07:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349266",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[874328a](https://github.com/sagemath/sagetrac-mirror/commit/874328a3bb8bacae8977f4b3c607aa4a0461fd65)** to **[ebb406e](https://github.com/sagemath/sagetrac-mirror/commit/ebb406ee0f20a0b31c211c3ddc8b24bdd9ca9ec6)**



---

archive/issue_comments_349267.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@vbraun](#comment%3A6):\n> I.e. crashes in different tests or sometimes not at all.\n\nBut does the traceback always involve\n\n```\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 3463, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.rank (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:30139)\n        r = self._rank_modp()\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 3493, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._rank_modp (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:30501)\n        return A.rank()\n    SystemError: NULL result without error in PyObject_Call\n```",
    "created_at": "2017-06-08T07:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349267",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@vbraun](#comment%3A6):
> I.e. crashes in different tests or sometimes not at all.

But does the traceback always involve

```
      File "sage/matrix/matrix_integer_dense.pyx", line 3463, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.rank (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:30139)
        r = self._rank_modp()
      File "sage/matrix/matrix_integer_dense.pyx", line 3493, in sage.matrix.matrix_integer_dense.Matrix_integer_dense._rank_modp (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.c:30501)
        return A.rank()
    SystemError: NULL result without error in PyObject_Call
```



---

archive/issue_comments_349268.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@jdemeyer](#comment%3A8):\n> Replying to [@tscrim](#comment%3A7):\n> > Maybe it comes from this becoming a `calloc` instead of a `malloc`\n\n> \n> That was actually meant to be safer. If you have an array of pointers, it's good practice to initialize it with zeros such that you can safely `free()` them.\n\nRight. I'm not saying it was wrong, but I'm just looking for logical changes. At least those were the most explicit I could see; the others push the logic to cysignals unless I am missing or misreading something. So if there was an issue not related to one of those changes, I would think it is an upstream bug...",
    "created_at": "2017-06-08T08:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349268",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@jdemeyer](#comment%3A8):
> Replying to [@tscrim](#comment%3A7):
> > Maybe it comes from this becoming a `calloc` instead of a `malloc`

> 
> That was actually meant to be safer. If you have an array of pointers, it's good practice to initialize it with zeros such that you can safely `free()` them.

Right. I'm not saying it was wrong, but I'm just looking for logical changes. At least those were the most explicit I could see; the others push the logic to cysignals unless I am missing or misreading something. So if there was an issue not related to one of those changes, I would think it is an upstream bug...



---

archive/issue_comments_349269.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@tscrim](#comment%3A13):\n> So if there was an issue not related to one of those changes, I would think it is an upstream bug...\n\nThere are no bugs in cysignals :-)\n\nI find it a bit strange that the errors are non-deterministic. Usually, calls to `malloc()` are pretty predictable (the addresses that it returns are not, but I don't see how that would matter).",
    "created_at": "2017-06-08T08:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349269",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@tscrim](#comment%3A13):
> So if there was an issue not related to one of those changes, I would think it is an upstream bug...

There are no bugs in cysignals :-)

I find it a bit strange that the errors are non-deterministic. Usually, calls to `malloc()` are pretty predictable (the addresses that it returns are not, but I don't see how that would matter).



---

archive/issue_comments_349270.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\n> There are no bugs in cysignals :-) \n\nOf course, there are other upstreams too. :)\n\nSo the randomness almost certainly comes from the test:\n\n```sage\nsage: set_random_seed()\nsage: K = random_cone(max_ambient_dim=8,\n....:                 min_rays=1,\n....:                 strictly_convex=True,\n....:                 solid=True)\nsage: b = K.lyapunov_rank()\nsage: n = K.lattice_dim()\nsage: 1 <= b <= n\nTrue\nsage: b == n-1\nFalse\n```\nIn certain cases, it must fail in some way. The only change that is made in chasing down the codepath in `linbox_copy`:\n\n```diff\n@@ -234,7 +235,7 @@ cdef inline celement *linbox_copy(celement modulus, celement *entries,  Py_ssize\n     \"\"\"\n     Create a copy of the entries array.\n     \"\"\"\n-    cdef celement *entries_copy = <celement*>sig_malloc(sizeof(celement)*nrows*ncols)\n+    cdef celement *entries_copy = <celement*>check_allocarray(nrows * ncols, sizeof(celement))\n     memcpy(entries_copy, entries, sizeof(celement)*nrows*ncols)\n     return entries_copy\n \n```\nIt might have to do with the fact that an error gets raised during some tests by `check_allocarray`, which then results in the error message because the `except NULL` that gets percolated up to Python.",
    "created_at": "2017-06-08T08:31:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349270",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">Comment 15</div>

> There are no bugs in cysignals :-) 

Of course, there are other upstreams too. :)

So the randomness almost certainly comes from the test:

```sage
sage: set_random_seed()
sage: K = random_cone(max_ambient_dim=8,
....:                 min_rays=1,
....:                 strictly_convex=True,
....:                 solid=True)
sage: b = K.lyapunov_rank()
sage: n = K.lattice_dim()
sage: 1 <= b <= n
True
sage: b == n-1
False
```
In certain cases, it must fail in some way. The only change that is made in chasing down the codepath in `linbox_copy`:

```diff
@@ -234,7 +235,7 @@ cdef inline celement *linbox_copy(celement modulus, celement *entries,  Py_ssize
     """
     Create a copy of the entries array.
     """
-    cdef celement *entries_copy = <celement*>sig_malloc(sizeof(celement)*nrows*ncols)
+    cdef celement *entries_copy = <celement*>check_allocarray(nrows * ncols, sizeof(celement))
     memcpy(entries_copy, entries, sizeof(celement)*nrows*ncols)
     return entries_copy
 
```
It might have to do with the fact that an error gets raised during some tests by `check_allocarray`, which then results in the error message because the `except NULL` that gets percolated up to Python.



---

archive/issue_comments_349271.json:
```json
{
    "body": "Changed commit from **[ebb406e](https://github.com/sagemath/sagetrac-mirror/commit/ebb406ee0f20a0b31c211c3ddc8b24bdd9ca9ec6)** to **[73e9e21](https://github.com/sagemath/sagetrac-mirror/commit/73e9e211661b21167e2fdfba84cfea93129a8b3a)**",
    "created_at": "2017-06-08T09:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349271",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ebb406e](https://github.com/sagemath/sagetrac-mirror/commit/ebb406ee0f20a0b31c211c3ddc8b24bdd9ca9ec6)** to **[73e9e21](https://github.com/sagemath/sagetrac-mirror/commit/73e9e211661b21167e2fdfba84cfea93129a8b3a)**



---

archive/issue_comments_349272.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73e9e211661b21167e2fdfba84cfea93129a8b3a\">73e9e21</a></td><td><code>Allow NULL return value from linbox_copy()</code></td></tr></table>\n",
    "created_at": "2017-06-08T09:04:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349272",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16" align="right">Comment 16</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73e9e211661b21167e2fdfba84cfea93129a8b3a">73e9e21</a></td><td><code>Allow NULL return value from linbox_copy()</code></td></tr></table>




---

archive/issue_events_304403.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-08T09:04:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304403"
}
```



---

archive/issue_events_304404.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-08T09:04:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304404"
}
```



---

archive/issue_comments_349273.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nTravis, if your analysis is correct, this should fix it.",
    "created_at": "2017-06-08T09:04:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349273",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

Travis, if your analysis is correct, this should fix it.



---

archive/issue_comments_349274.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nI never got this failure either. So I apologize in advance to Volker if this doesn't work.",
    "created_at": "2017-06-08T09:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349274",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">Comment 18</div>

I never got this failure either. So I apologize in advance to Volker if this doesn't work.



---

archive/issue_events_304405.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-08T09:30:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304405"
}
```



---

archive/issue_events_304406.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-08T09:30:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304406"
}
```



---

archive/issue_events_304407.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-09T21:01:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304407"
}
```



---

archive/issue_events_304408.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-09T21:01:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304408"
}
```



---

archive/issue_comments_349275.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nDoesn't build (probably conflicts with another ticket).",
    "created_at": "2017-06-09T21:01:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349275",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">Comment 20</div>

Doesn't build (probably conflicts with another ticket).



---

archive/issue_comments_349276.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nIndeed, this is due to #15104.",
    "created_at": "2017-06-12T12:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349276",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

Indeed, this is due to #15104.



---

archive/issue_comments_349277.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed3f74f323124de18fb65e6fe5612bf5f7d6b026\">ed3f74f</a></td><td><code>Merge tag '8.0.beta10' into t/23127/stop_using_cysignals__pxi_files__part_6_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c\">de79ac0</a></td><td><code>Add cimport of sig_malloc</code></td></tr></table>\n",
    "created_at": "2017-06-12T12:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349277",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed3f74f323124de18fb65e6fe5612bf5f7d6b026">ed3f74f</a></td><td><code>Merge tag '8.0.beta10' into t/23127/stop_using_cysignals__pxi_files__part_6_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c">de79ac0</a></td><td><code>Add cimport of sig_malloc</code></td></tr></table>




---

archive/issue_comments_349278.json:
```json
{
    "body": "Changed commit from **[73e9e21](https://github.com/sagemath/sagetrac-mirror/commit/73e9e211661b21167e2fdfba84cfea93129a8b3a)** to **[de79ac0](https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c)**",
    "created_at": "2017-06-12T12:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349278",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[73e9e21](https://github.com/sagemath/sagetrac-mirror/commit/73e9e211661b21167e2fdfba84cfea93129a8b3a)** to **[de79ac0](https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c)**



---

archive/issue_comments_349279.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nTrivial fix, setting back to positive_review.",
    "created_at": "2017-06-12T12:47:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349279",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">Comment 23</div>

Trivial fix, setting back to positive_review.



---

archive/issue_events_304409.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-12T12:47:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304409"
}
```



---

archive/issue_events_304410.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-12T12:47:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304410"
}
```



---

archive/issue_comments_349280.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/stop_using_cysignals__pxi_files__part_6_](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/stop_using_cysignals__pxi_files__part_6_)** to **[de79ac0](https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c)**",
    "created_at": "2017-06-13T06:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349280",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/stop_using_cysignals__pxi_files__part_6_](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/stop_using_cysignals__pxi_files__part_6_)** to **[de79ac0](https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c)**



---

archive/issue_events_304411.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-13T06:51:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304411"
}
```



---

archive/issue_events_304412.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b4407a75aa15f17eb20cff5d22b9dbb60912dd9a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-13T06:51:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23127#event-304412"
}
```



---

archive/issue_comments_349281.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nGreat! Travis, thanks a lot for your analysis in [comment:15]!",
    "created_at": "2017-06-13T18:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349281",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">Comment 25</div>

Great! Travis, thanks a lot for your analysis in [comment:15]!



---

archive/issue_comments_349282.json:
```json
{
    "body": "Changed commit from **[de79ac0](https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c)** to none",
    "created_at": "2017-06-13T18:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349282",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[de79ac0](https://github.com/sagemath/sagetrac-mirror/commit/de79ac04133e79d8eea516500283f159dd00cf6c)** to none



---

archive/issue_comments_349283.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nNo problem, although I feel more like I cured the symptom than the disease.",
    "created_at": "2017-06-14T00:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23127",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23127#issuecomment-349283",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">Comment 26</div>

No problem, although I feel more like I cured the symptom than the disease.
