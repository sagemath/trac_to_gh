# Issue 23486: Echelon form for p-adic matrices

archive/issues_023249.json:
```json
{
    "assignees": [],
    "body": "This ticket implements echelon form for matrices over complete discrete valuation rings/fields.\n\nDepends on #23450\n\nCC:  @roed314 @saraedum TristanVaccon\n\nKeywords: **sd87, padicIMA, padicBordeaux**\n\nBranch/Commit: **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite) @ [26f0fd2](https://github.com/sagemath/sagetrac-mirror/commit/26f0fd223edb143de3465f454e2dde5be1c06f9c)**\n\nReviewer: **Ben Hutz, David Roe**\n\nAuthor: **Xavier Caruso**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23486_\n\n",
    "created_at": "2017-07-20T04:10:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20padics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Echelon form for p-adic matrices",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/23486",
    "user": "https://github.com/xcaruso"
}
```
This ticket implements echelon form for matrices over complete discrete valuation rings/fields.

Depends on #23450

CC:  @roed314 @saraedum TristanVaccon

Keywords: **sd87, padicIMA, padicBordeaux**

Branch/Commit: **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite) @ [26f0fd2](https://github.com/sagemath/sagetrac-mirror/commit/26f0fd223edb143de3465f454e2dde5be1c06f9c)**

Reviewer: **Ben Hutz, David Roe**

Author: **Xavier Caruso**

_Issue created by migration from https://trac.sagemath.org/ticket/23486_





---

archive/issue_events_297748.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2017-07-20T04:10:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297748"
}
```



---

archive/issue_events_297749.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2017-07-20T04:10:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20padics",
    "label_color": "0000ff",
    "label_name": "component: padics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297749"
}
```



---

archive/issue_events_297750.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2017-07-20T04:10:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297750"
}
```



---

archive/issue_events_297751.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2017-07-20T04:10:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297751"
}
```



---

archive/issue_comments_355600.json:
```json
{
    "body": "Branch: **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**",
    "created_at": "2017-07-20T04:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355600",
    "user": "https://github.com/xcaruso"
}
```

Branch: **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**



---

archive/issue_comments_355601.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/879f4eb46b700d0d3c4a0779b8293158ea4af298\">879f4eb</a></td><td><code>Smith form of a p-adic matrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/595bc117c7becc12c9e6afcefcc372b46320384e\">595bc11</a></td><td><code>Code moved into the category</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1832757b3eaa3f1f01e8a8864ed33e697366025b\">1832757</a></td><td><code>Factorisation of code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2cdd995a80e859027ffd5685f1d96cc480d4277\">e2cdd99</a></td><td><code>Small fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ae1018f5f63a9082d94ec9876c4ec38451cc340\">7ae1018</a></td><td><code>Move relevant code to sage.matrix.matrix_cdv_dense</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e73fd2f9a4ac5b090f72a093ee57df532a1a384\">7e73fd2</a></td><td><code>Fix import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fd67fe26e5c1afb90f68127fdbd8a40bd01c75e\">1fd67fe</a></td><td><code>Add method tracks_precision()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/013880536ee5ec0499dcd749d58f3b36ec6b71cd\">0138805</a></td><td><code>Echelon form for matrices over CDVR/CDVF</code></td></tr></table>\n",
    "created_at": "2017-07-20T04:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355601",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/879f4eb46b700d0d3c4a0779b8293158ea4af298">879f4eb</a></td><td><code>Smith form of a p-adic matrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/595bc117c7becc12c9e6afcefcc372b46320384e">595bc11</a></td><td><code>Code moved into the category</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1832757b3eaa3f1f01e8a8864ed33e697366025b">1832757</a></td><td><code>Factorisation of code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2cdd995a80e859027ffd5685f1d96cc480d4277">e2cdd99</a></td><td><code>Small fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ae1018f5f63a9082d94ec9876c4ec38451cc340">7ae1018</a></td><td><code>Move relevant code to sage.matrix.matrix_cdv_dense</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e73fd2f9a4ac5b090f72a093ee57df532a1a384">7e73fd2</a></td><td><code>Fix import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fd67fe26e5c1afb90f68127fdbd8a40bd01c75e">1fd67fe</a></td><td><code>Add method tracks_precision()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/013880536ee5ec0499dcd749d58f3b36ec6b71cd">0138805</a></td><td><code>Echelon form for matrices over CDVR/CDVF</code></td></tr></table>




---

archive/issue_comments_355602.json:
```json
{
    "body": "Dependencies: **#23450**",
    "created_at": "2017-07-20T04:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355602",
    "user": "https://github.com/xcaruso"
}
```

Dependencies: **#23450**



---

archive/issue_comments_355603.json:
```json
{
    "body": "Commit: **[0138805](https://github.com/sagemath/sagetrac-mirror/commit/013880536ee5ec0499dcd749d58f3b36ec6b71cd)**",
    "created_at": "2017-07-20T04:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355603",
    "user": "https://github.com/xcaruso"
}
```

Commit: **[0138805](https://github.com/sagemath/sagetrac-mirror/commit/013880536ee5ec0499dcd749d58f3b36ec6b71cd)**



---

archive/issue_comments_355604.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f731ee1a5dfa9af675a7a510a74fb7bb99d24fa\">1f731ee</a></td><td><code>Check correctly (hopefully) that precision on input is enough</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f07da52c7769205e3549df079699202afbd4195\">1f07da5</a></td><td><code>Small fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e265c7776945641cc991a0415306081b76cffb83\">e265c77</a></td><td><code>Merge branch 'padic_smith' into padic_hermite</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c3e7ccb8699da62794a49a0f5e60476f16b171c\">0c3e7cc</a></td><td><code>Fix precision issues</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55b99df7b752c66cf6256b1adf7a7f0951f71808\">55b99df</a></td><td><code>Small fix in lift_to_maximal_precision</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c396e88a0fc84e733efcf80fbe54919184ef6a1\">1c396e8</a></td><td><code>Merge branch 'padic_smith' into padic_hermite</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71c0c7462afdca4d252fba70cb2d1e23b5ab12d5\">71c0c74</a></td><td><code>Add doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/731fb19e7410c0dce116d0477153399af4fa5241\">731fb19</a></td><td><code>Fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ea48acfe280981d969970384e10309a9c8211db\">1ea48ac</a></td><td><code>Two small bugs fixed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02aa72a42558cad734be80d626af5552bd44751a\">02aa72a</a></td><td><code>Merge branch 'padic_smith' into padic_hermite</code></td></tr></table>\n",
    "created_at": "2017-07-20T17:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355604",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>Comment 3:</a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f731ee1a5dfa9af675a7a510a74fb7bb99d24fa">1f731ee</a></td><td><code>Check correctly (hopefully) that precision on input is enough</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f07da52c7769205e3549df079699202afbd4195">1f07da5</a></td><td><code>Small fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e265c7776945641cc991a0415306081b76cffb83">e265c77</a></td><td><code>Merge branch 'padic_smith' into padic_hermite</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c3e7ccb8699da62794a49a0f5e60476f16b171c">0c3e7cc</a></td><td><code>Fix precision issues</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55b99df7b752c66cf6256b1adf7a7f0951f71808">55b99df</a></td><td><code>Small fix in lift_to_maximal_precision</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c396e88a0fc84e733efcf80fbe54919184ef6a1">1c396e8</a></td><td><code>Merge branch 'padic_smith' into padic_hermite</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71c0c7462afdca4d252fba70cb2d1e23b5ab12d5">71c0c74</a></td><td><code>Add doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/731fb19e7410c0dce116d0477153399af4fa5241">731fb19</a></td><td><code>Fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ea48acfe280981d969970384e10309a9c8211db">1ea48ac</a></td><td><code>Two small bugs fixed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02aa72a42558cad734be80d626af5552bd44751a">02aa72a</a></td><td><code>Merge branch 'padic_smith' into padic_hermite</code></td></tr></table>




---

archive/issue_comments_355605.json:
```json
{
    "body": "Changed commit from **[0138805](https://github.com/sagemath/sagetrac-mirror/commit/013880536ee5ec0499dcd749d58f3b36ec6b71cd)** to **[02aa72a](https://github.com/sagemath/sagetrac-mirror/commit/02aa72a42558cad734be80d626af5552bd44751a)**",
    "created_at": "2017-07-20T17:24:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355605",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0138805](https://github.com/sagemath/sagetrac-mirror/commit/013880536ee5ec0499dcd749d58f3b36ec6b71cd)** to **[02aa72a](https://github.com/sagemath/sagetrac-mirror/commit/02aa72a42558cad734be80d626af5552bd44751a)**



---

archive/issue_comments_355606.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nTicket ready for review!",
    "created_at": "2017-07-20T17:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355606",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:4'>Comment 4:</a>
Ticket ready for review!



---

archive/issue_events_297752.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2017-07-20T17:25:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297752"
}
```



---

archive/issue_comments_355607.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI looked at this from a functionality perspective as opposed to looking through the algorithm line by line.\n\nAll of the examples I was able to come up with behaved as expected, so I just have a few minor issues\n\n- 2 doc test failures\n\n```\nsage -t --warn-long 72.0 rings/laurent_series_ring.py  # 1 doctest failed\nsage -t --warn-long 72.0 rings/padics/tests.py  # 1 doctest failed\n```\n\n- in a couple places you say\n\n```\nif `d_i` denotes the `(i,i)` entry of `D`\n```\nI think you means `D` to be `S`\n\n- extra word\n\n```\n'it is possible to do not'\n```\n\n- in several places you say 'also possible for rectangular matrices' where you mean 'nonrectangular'\n\n- in two different places for echelon form you state it as find the Smith normal form instead of the echelon form\n\n```\nto determine the Smith normal form\n```\n\n- is there a reason to assign\n\n```\n    else:\n        left = right = None\n```\nthey don't seem to be used later.\n\n- incorrect word\n\n```\ninteger this of this\n```\nshould be 'integer ring of this'",
    "created_at": "2017-07-20T20:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355607",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:6'>Comment 6:</a>
I looked at this from a functionality perspective as opposed to looking through the algorithm line by line.

All of the examples I was able to come up with behaved as expected, so I just have a few minor issues

- 2 doc test failures

```
sage -t --warn-long 72.0 rings/laurent_series_ring.py  # 1 doctest failed
sage -t --warn-long 72.0 rings/padics/tests.py  # 1 doctest failed
```

- in a couple places you say

```
if `d_i` denotes the `(i,i)` entry of `D`
```
I think you means `D` to be `S`

- extra word

```
'it is possible to do not'
```

- in several places you say 'also possible for rectangular matrices' where you mean 'nonrectangular'

- in two different places for echelon form you state it as find the Smith normal form instead of the echelon form

```
to determine the Smith normal form
```

- is there a reason to assign

```
    else:
        left = right = None
```
they don't seem to be used later.

- incorrect word

```
integer this of this
```
should be 'integer ring of this'



---

archive/issue_comments_355608.json:
```json
{
    "body": "Reviewer: **Ben Hutz**",
    "created_at": "2017-07-20T20:58:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355608",
    "user": "https://github.com/bhutz"
}
```

Reviewer: **Ben Hutz**



---

archive/issue_events_297753.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2017-07-20T20:58:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297753"
}
```



---

archive/issue_events_297754.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2017-07-20T20:58:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297754"
}
```



---

archive/issue_comments_355609.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52a43448361a7a28c5dd4b2c9e8f19c8eefd7663\">52a4344</a></td><td><code>Added keyword secure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65ffbc6afa1e337deb0d5ec882914624fc9e08e0\">65ffbc6</a></td><td><code>Use the name \"integral_smith_form\" for matrices over CDVF</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f27820a66d4de7f972f4b59df5b5d53f31463ae1\">f27820a</a></td><td><code>Small fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba4a937c4a44536da0273d736000619476707206\">ba4a937</a></td><td><code>Merge branch 'padic_smith' into padic_hermite</code></td></tr></table>\n",
    "created_at": "2017-07-21T01:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355609",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>Comment 7:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52a43448361a7a28c5dd4b2c9e8f19c8eefd7663">52a4344</a></td><td><code>Added keyword secure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65ffbc6afa1e337deb0d5ec882914624fc9e08e0">65ffbc6</a></td><td><code>Use the name "integral_smith_form" for matrices over CDVF</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f27820a66d4de7f972f4b59df5b5d53f31463ae1">f27820a</a></td><td><code>Small fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba4a937c4a44536da0273d736000619476707206">ba4a937</a></td><td><code>Merge branch 'padic_smith' into padic_hermite</code></td></tr></table>




---

archive/issue_comments_355610.json:
```json
{
    "body": "Changed commit from **[02aa72a](https://github.com/sagemath/sagetrac-mirror/commit/02aa72a42558cad734be80d626af5552bd44751a)** to **[ba4a937](https://github.com/sagemath/sagetrac-mirror/commit/ba4a937c4a44536da0273d736000619476707206)**",
    "created_at": "2017-07-21T01:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355610",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[02aa72a](https://github.com/sagemath/sagetrac-mirror/commit/02aa72a42558cad734be80d626af5552bd44751a)** to **[ba4a937](https://github.com/sagemath/sagetrac-mirror/commit/ba4a937c4a44536da0273d736000619476707206)**



---

archive/issue_comments_355611.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nThanks for your comments.\n\nI fixed the wording.\nThe failing doctests were due to the fact that, in the case of a matrix M defined over a complete discrete valuation *field* K, my function `echelon_form()` did not compute the row-echelon from of M over K but over its ring of integers (i.e. the transformation matrix has coefficients in the ring of integers and is invertible over it). I then changed the name for `integral_echelon_from()`.\n\nNB: Some of your comments are related to ticket #23450. Maybe you should look at this one as well.",
    "created_at": "2017-07-21T01:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355611",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:8'>Comment 8:</a>
Thanks for your comments.

I fixed the wording.
The failing doctests were due to the fact that, in the case of a matrix M defined over a complete discrete valuation *field* K, my function `echelon_form()` did not compute the row-echelon from of M over K but over its ring of integers (i.e. the transformation matrix has coefficients in the ring of integers and is invertible over it). I then changed the name for `integral_echelon_from()`.

NB: Some of your comments are related to ticket #23450. Maybe you should look at this one as well.



---

archive/issue_events_297755.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2017-07-21T01:36:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297755"
}
```



---

archive/issue_events_297756.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2017-07-21T01:36:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297756"
}
```



---

archive/issue_comments_355612.json:
```json
{
    "body": "Changed branch from **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)** to **[u/roed/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/padic_hermite)**",
    "created_at": "2018-03-05T20:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355612",
    "user": "https://github.com/roed314"
}
```

Changed branch from **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)** to **[u/roed/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/padic_hermite)**



---

archive/issue_comments_355613.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nSee also #17272, which just got a positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/190ba1bf1b68eb012e7b42900a7fd50096860b07\">190ba1b</a></td><td><code>Merge branch 'u/caruso/padic_hermite' of git://trac.sagemath.org/sage into t/23486/padic_echelon</code></td></tr></table>\n",
    "created_at": "2018-05-24T20:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355613",
    "user": "https://github.com/roed314"
}
```

<a id='comment:11'>Comment 11:</a>
See also #17272, which just got a positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/190ba1bf1b68eb012e7b42900a7fd50096860b07">190ba1b</a></td><td><code>Merge branch 'u/caruso/padic_hermite' of git://trac.sagemath.org/sage into t/23486/padic_echelon</code></td></tr></table>




---

archive/issue_comments_355614.json:
```json
{
    "body": "Changed commit from **[ba4a937](https://github.com/sagemath/sagetrac-mirror/commit/ba4a937c4a44536da0273d736000619476707206)** to **[190ba1b](https://github.com/sagemath/sagetrac-mirror/commit/190ba1bf1b68eb012e7b42900a7fd50096860b07)**",
    "created_at": "2018-05-24T20:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355614",
    "user": "https://github.com/roed314"
}
```

Changed commit from **[ba4a937](https://github.com/sagemath/sagetrac-mirror/commit/ba4a937c4a44536da0273d736000619476707206)** to **[190ba1b](https://github.com/sagemath/sagetrac-mirror/commit/190ba1bf1b68eb012e7b42900a7fd50096860b07)**



---

archive/issue_comments_355615.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nGreat! So, what do we do with this ticket (which is now a kind of redundant)?",
    "created_at": "2018-05-24T20:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355615",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:12'>Comment 12:</a>
Great! So, what do we do with this ticket (which is now a kind of redundant)?



---

archive/issue_comments_355616.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nAre there any features here that aren't included in #17272?",
    "created_at": "2018-05-24T20:41:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355616",
    "user": "https://github.com/roed314"
}
```

<a id='comment:13'>Comment 13:</a>
Are there any features here that aren't included in #17272?



---

archive/issue_comments_355617.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nThe computation of transformation matrices, I think.\n\nMoreover, for matrices over Qp, it makes sense to have an option for computing the echelon form over Zp (that is, without renormalizing the pivots) in order to save precision. But I don't think that it's implemented in this ticket.",
    "created_at": "2018-05-24T20:51:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355617",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:14'>Comment 14:</a>
The computation of transformation matrices, I think.

Moreover, for matrices over Qp, it makes sense to have an option for computing the echelon form over Zp (that is, without renormalizing the pivots) in order to save precision. But I don't think that it's implemented in this ticket.



---

archive/issue_comments_355618.json:
```json
{
    "body": "Changed keywords from **sd87** to **sd87, padicIMA**",
    "created_at": "2018-07-22T20:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355618",
    "user": "https://github.com/roed314"
}
```

Changed keywords from **sd87** to **sd87, padicIMA**



---

archive/issue_comments_355619.json:
```json
{
    "body": "Changed branch from **[u/roed/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/padic_hermite)** to **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**",
    "created_at": "2018-07-25T22:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355619",
    "user": "https://github.com/xcaruso"
}
```

Changed branch from **[u/roed/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/padic_hermite)** to **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**



---

archive/issue_comments_355620.json:
```json
{
    "body": "Changed commit from **[190ba1b](https://github.com/sagemath/sagetrac-mirror/commit/190ba1bf1b68eb012e7b42900a7fd50096860b07)** to **[8bf47ee](https://github.com/sagemath/sagetrac-mirror/commit/8bf47ee19f44ee40782082fcbff5c09b76e66d17)**",
    "created_at": "2018-07-25T22:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355620",
    "user": "https://github.com/xcaruso"
}
```

Changed commit from **[190ba1b](https://github.com/sagemath/sagetrac-mirror/commit/190ba1bf1b68eb012e7b42900a7fd50096860b07)** to **[8bf47ee](https://github.com/sagemath/sagetrac-mirror/commit/8bf47ee19f44ee40782082fcbff5c09b76e66d17)**



---

archive/issue_events_297757.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-07-25T22:36:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297757"
}
```



---

archive/issue_events_297758.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2018-07-25T22:36:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297758"
}
```



---

archive/issue_comments_355621.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bf47ee19f44ee40782082fcbff5c09b76e66d17\">8bf47ee</a></td><td><code>Merge branch '8.3.rc1' into t/23486/padic_hermite</code></td></tr></table>\n",
    "created_at": "2018-07-25T22:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355621",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:17'>Comment 17:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bf47ee19f44ee40782082fcbff5c09b76e66d17">8bf47ee</a></td><td><code>Merge branch '8.3.rc1' into t/23486/padic_hermite</code></td></tr></table>




---

archive/issue_comments_355622.json:
```json
{
    "body": "Changed keywords from **sd87, padicIMA** to **sd87, padicIMA, padicBordeaux**",
    "created_at": "2019-09-07T09:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355622",
    "user": "https://github.com/roed314"
}
```

Changed keywords from **sd87, padicIMA** to **sd87, padicIMA, padicBordeaux**



---

archive/issue_comments_355623.json:
```json
{
    "body": "Changed branch from **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)** to **[u/roed/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/padic_hermite)**",
    "created_at": "2019-09-09T09:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355623",
    "user": "https://github.com/roed314"
}
```

Changed branch from **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)** to **[u/roed/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/padic_hermite)**



---

archive/issue_comments_355624.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI merged in the latest beta, but this still needs to be reconciled with #17272.  I think there are features here that we want that weren't done by #17272 (for example, when the base ring is Zp), so this ticket should remain open.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e522c94b89719bc51d7069cf0b682968814ff449\">e522c94</a></td><td><code>Merge branch 'u/caruso/padic_hermite' of git://trac.sagemath.org/sage into 23486_padic_hermite</code></td></tr></table>\n",
    "created_at": "2019-09-09T09:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355624",
    "user": "https://github.com/roed314"
}
```

<a id='comment:20'>Comment 20:</a>
I merged in the latest beta, but this still needs to be reconciled with #17272.  I think there are features here that we want that weren't done by #17272 (for example, when the base ring is Zp), so this ticket should remain open.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e522c94b89719bc51d7069cf0b682968814ff449">e522c94</a></td><td><code>Merge branch 'u/caruso/padic_hermite' of git://trac.sagemath.org/sage into 23486_padic_hermite</code></td></tr></table>




---

archive/issue_comments_355625.json:
```json
{
    "body": "Changed commit from **[8bf47ee](https://github.com/sagemath/sagetrac-mirror/commit/8bf47ee19f44ee40782082fcbff5c09b76e66d17)** to **[e522c94](https://github.com/sagemath/sagetrac-mirror/commit/e522c94b89719bc51d7069cf0b682968814ff449)**",
    "created_at": "2019-09-09T09:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355625",
    "user": "https://github.com/roed314"
}
```

Changed commit from **[8bf47ee](https://github.com/sagemath/sagetrac-mirror/commit/8bf47ee19f44ee40782082fcbff5c09b76e66d17)** to **[e522c94](https://github.com/sagemath/sagetrac-mirror/commit/e522c94b89719bc51d7069cf0b682968814ff449)**



---

archive/issue_comments_355626.json:
```json
{
    "body": "Changed branch from **[u/roed/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/padic_hermite)** to **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**",
    "created_at": "2022-02-12T08:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355626",
    "user": "https://github.com/xcaruso"
}
```

Changed branch from **[u/roed/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/padic_hermite)** to **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**



---

archive/issue_comments_355627.json:
```json
{
    "body": "Changed commit from **[e522c94](https://github.com/sagemath/sagetrac-mirror/commit/e522c94b89719bc51d7069cf0b682968814ff449)** to **[d4e1d54](https://github.com/sagemath/sagetrac-mirror/commit/d4e1d54fe4d4de8da62fe5a478a98091bb84cbfa)**",
    "created_at": "2022-02-14T13:16:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355627",
    "user": "https://github.com/xcaruso"
}
```

Changed commit from **[e522c94](https://github.com/sagemath/sagetrac-mirror/commit/e522c94b89719bc51d7069cf0b682968814ff449)** to **[d4e1d54](https://github.com/sagemath/sagetrac-mirror/commit/d4e1d54fe4d4de8da62fe5a478a98091bb84cbfa)**



---

archive/issue_comments_355628.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nI noticed that there is a lot of variations between the way operations over matrices are designed:\n- `echelon_form` is directly implemented in the class `sage.matrix.matrix2.Matrix`\n- `smith_form` calls the method `_matrix_smith_form` of the base ring; concretely, this method is implemented in the class `sage.rings.padics.local_generic.LocalGeneric`\n- `hessenberg_form` calls the method `_matrix_hessenbergize` of the base ring; this method is defined in the category `sage.categories.discrete_valuation.DiscreteValuationFields` and concretely implemented in the separate file `sage.matrix.matrix_cdv`.\n\nI think it would be a good thing to uniformize all of this and, personally, I have a small preference for the third approach. What's your opinion?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4e1d54fe4d4de8da62fe5a478a98091bb84cbfa\">d4e1d54</a></td><td><code>Merge branch 'u/roed/padic_hermite' of git://trac.sagemath.org/sage into echelon_form</code></td></tr></table>\n",
    "created_at": "2022-02-14T13:16:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355628",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:22'>Comment 22:</a>
I noticed that there is a lot of variations between the way operations over matrices are designed:
- `echelon_form` is directly implemented in the class `sage.matrix.matrix2.Matrix`
- `smith_form` calls the method `_matrix_smith_form` of the base ring; concretely, this method is implemented in the class `sage.rings.padics.local_generic.LocalGeneric`
- `hessenberg_form` calls the method `_matrix_hessenbergize` of the base ring; this method is defined in the category `sage.categories.discrete_valuation.DiscreteValuationFields` and concretely implemented in the separate file `sage.matrix.matrix_cdv`.

I think it would be a good thing to uniformize all of this and, personally, I have a small preference for the third approach. What's your opinion?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4e1d54fe4d4de8da62fe5a478a98091bb84cbfa">d4e1d54</a></td><td><code>Merge branch 'u/roed/padic_hermite' of git://trac.sagemath.org/sage into echelon_form</code></td></tr></table>




---

archive/issue_comments_355629.json:
```json
{
    "body": "Changed commit from **[d4e1d54](https://github.com/sagemath/sagetrac-mirror/commit/d4e1d54fe4d4de8da62fe5a478a98091bb84cbfa)** to **[20db181](https://github.com/sagemath/sagetrac-mirror/commit/20db181c70ca931f91b82fdf6d22a867a1cc718a)**",
    "created_at": "2022-02-14T13:28:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d4e1d54](https://github.com/sagemath/sagetrac-mirror/commit/d4e1d54fe4d4de8da62fe5a478a98091bb84cbfa)** to **[20db181](https://github.com/sagemath/sagetrac-mirror/commit/20db181c70ca931f91b82fdf6d22a867a1cc718a)**



---

archive/issue_comments_355630.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20db181c70ca931f91b82fdf6d22a867a1cc718a\">20db181</a></td><td><code>Merge branch 'develop' into echelon_form</code></td></tr></table>\n",
    "created_at": "2022-02-14T13:28:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355630",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>Comment 23:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20db181c70ca931f91b82fdf6d22a867a1cc718a">20db181</a></td><td><code>Merge branch 'develop' into echelon_form</code></td></tr></table>




---

archive/issue_comments_355631.json:
```json
{
    "body": "Changed commit from **[20db181](https://github.com/sagemath/sagetrac-mirror/commit/20db181c70ca931f91b82fdf6d22a867a1cc718a)** to **[0b3920e](https://github.com/sagemath/sagetrac-mirror/commit/0b3920e84f24497bd6fc2149c9f3a3271121f186)**",
    "created_at": "2022-02-16T17:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355631",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[20db181](https://github.com/sagemath/sagetrac-mirror/commit/20db181c70ca931f91b82fdf6d22a867a1cc718a)** to **[0b3920e](https://github.com/sagemath/sagetrac-mirror/commit/0b3920e84f24497bd6fc2149c9f3a3271121f186)**



---

archive/issue_comments_355632.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6935c3c609513f61d1440ab6869f57f12cd2318d\">6935c3c</a></td><td><code>refactor smith form and Hermite form</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5087debc1659ddad08da443ab930fc7d4570f6b5\">5087deb</a></td><td><code>echelon form</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c14b2a34afddcbddf9be80ca4e21310315ffb2a\">0c14b2a</a></td><td><code>add documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b3920e84f24497bd6fc2149c9f3a3271121f186\">0b3920e</a></td><td><code>add function _matrix_determinant</code></td></tr></table>\n",
    "created_at": "2022-02-16T17:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355632",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'>Comment 24:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6935c3c609513f61d1440ab6869f57f12cd2318d">6935c3c</a></td><td><code>refactor smith form and Hermite form</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5087debc1659ddad08da443ab930fc7d4570f6b5">5087deb</a></td><td><code>echelon form</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c14b2a34afddcbddf9be80ca4e21310315ffb2a">0c14b2a</a></td><td><code>add documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b3920e84f24497bd6fc2149c9f3a3271121f186">0b3920e</a></td><td><code>add function _matrix_determinant</code></td></tr></table>




---

archive/issue_events_297759.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-02-16T17:43:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297759"
}
```



---

archive/issue_events_297760.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-02-16T17:43:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297760"
}
```



---

archive/issue_comments_355633.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nI followed the third approach: I put everything in the category and put the code in a separate `pyx` file. So far, most of the code is written in pure python; maybe we should move to cython at some point.\n\nThere is some code duplication due to the fact that we have separate categories for discrete valuation rings and fields but not a common category for both.\n\nAnyway, everything is supposed over all types of p-adics as well as over power series and Laurent series rings. Moreover, with the general machinery already provided by sage, this is enough to manipulate free modules over those rings, including then lattices in finite dimensional p-adic vector spaces.",
    "created_at": "2022-02-16T17:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355633",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:25'>Comment 25:</a>
I followed the third approach: I put everything in the category and put the code in a separate `pyx` file. So far, most of the code is written in pure python; maybe we should move to cython at some point.

There is some code duplication due to the fact that we have separate categories for discrete valuation rings and fields but not a common category for both.

Anyway, everything is supposed over all types of p-adics as well as over power series and Laurent series rings. Moreover, with the general machinery already provided by sage, this is enough to manipulate free modules over those rings, including then lattices in finite dimensional p-adic vector spaces.



---

archive/issue_comments_355634.json:
```json
{
    "body": "Changed commit from **[0b3920e](https://github.com/sagemath/sagetrac-mirror/commit/0b3920e84f24497bd6fc2149c9f3a3271121f186)** to **[59a4632](https://github.com/sagemath/sagetrac-mirror/commit/59a46323ac01513a7283237b85a73d99debdfbc5)**",
    "created_at": "2022-02-16T17:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355634",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0b3920e](https://github.com/sagemath/sagetrac-mirror/commit/0b3920e84f24497bd6fc2149c9f3a3271121f186)** to **[59a4632](https://github.com/sagemath/sagetrac-mirror/commit/59a46323ac01513a7283237b85a73d99debdfbc5)**



---

archive/issue_comments_355635.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59a46323ac01513a7283237b85a73d99debdfbc5\">59a4632</a></td><td><code>remove obsolete file matrix_cdv_dense.py</code></td></tr></table>\n",
    "created_at": "2022-02-16T17:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355635",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>Comment 26:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59a46323ac01513a7283237b85a73d99debdfbc5">59a4632</a></td><td><code>remove obsolete file matrix_cdv_dense.py</code></td></tr></table>




---

archive/issue_comments_355636.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nHave you considered putting things into a `.py` file instead? I don't think that it makes a real difference in terms of performance (and I am struggling right now to debug an (unrelated) call that uses too much Cython ;) )",
    "created_at": "2022-02-16T19:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355636",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:27'>Comment 27:</a>
Have you considered putting things into a `.py` file instead? I don't think that it makes a real difference in terms of performance (and I am struggling right now to debug an (unrelated) call that uses too much Cython ;) )



---

archive/issue_comments_355637.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nThe point is that `matrix_cdv.pyx` already exists with some cython code inside. But I can probably split the file in two parts and call them `matrix_cdv_python` and `matrix_cdv_cython`.",
    "created_at": "2022-02-16T19:59:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355637",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:28'>Comment 28:</a>
The point is that `matrix_cdv.pyx` already exists with some cython code inside. But I can probably split the file in two parts and call them `matrix_cdv_python` and `matrix_cdv_cython`.



---

archive/issue_events_297761.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-02-19T19:24:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297761"
}
```



---

archive/issue_events_297762.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-02-19T19:24:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297762"
}
```



---

archive/issue_comments_355638.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nThe patchbot reported a lot of doctest failures... :-(",
    "created_at": "2022-02-19T19:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355638",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:29'>Comment 29:</a>
The patchbot reported a lot of doctest failures... :-(



---

archive/issue_comments_355639.json:
```json
{
    "body": "Changed commit from **[59a4632](https://github.com/sagemath/sagetrac-mirror/commit/59a46323ac01513a7283237b85a73d99debdfbc5)** to **[832813b](https://github.com/sagemath/sagetrac-mirror/commit/832813b29edc4bb279853c6f7c56fff82c0ee155)**",
    "created_at": "2022-02-20T09:16:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355639",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[59a4632](https://github.com/sagemath/sagetrac-mirror/commit/59a46323ac01513a7283237b85a73d99debdfbc5)** to **[832813b](https://github.com/sagemath/sagetrac-mirror/commit/832813b29edc4bb279853c6f7c56fff82c0ee155)**



---

archive/issue_comments_355640.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/832813b29edc4bb279853c6f7c56fff82c0ee155\">832813b</a></td><td><code>raise a TypeError instead of an ArithmeticError</code></td></tr></table>\n",
    "created_at": "2022-02-20T09:16:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355640",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:30'>Comment 30:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/832813b29edc4bb279853c6f7c56fff82c0ee155">832813b</a></td><td><code>raise a TypeError instead of an ArithmeticError</code></td></tr></table>




---

archive/issue_events_297763.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-02-20T09:17:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297763"
}
```



---

archive/issue_events_297764.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-02-20T09:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297764"
}
```



---

archive/issue_comments_355641.json:
```json
{
    "body": "Changed commit from **[832813b](https://github.com/sagemath/sagetrac-mirror/commit/832813b29edc4bb279853c6f7c56fff82c0ee155)** to **[2cffd3f](https://github.com/sagemath/sagetrac-mirror/commit/2cffd3f000e6a17797fe80e235d6b6f73cd5f632)**",
    "created_at": "2022-02-20T09:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355641",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[832813b](https://github.com/sagemath/sagetrac-mirror/commit/832813b29edc4bb279853c6f7c56fff82c0ee155)** to **[2cffd3f](https://github.com/sagemath/sagetrac-mirror/commit/2cffd3f000e6a17797fe80e235d6b6f73cd5f632)**



---

archive/issue_comments_355642.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cffd3f000e6a17797fe80e235d6b6f73cd5f632\">2cffd3f</a></td><td><code>fix pyflakes</code></td></tr></table>\n",
    "created_at": "2022-02-20T09:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355642",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cffd3f000e6a17797fe80e235d6b6f73cd5f632">2cffd3f</a></td><td><code>fix pyflakes</code></td></tr></table>




---

archive/issue_comments_355643.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac8abe96cf5eb30f9c7138097d615effc33a4efb\">ac8abe9</a></td><td><code>more doctests</code></td></tr></table>\n",
    "created_at": "2022-02-20T09:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355643",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:33'>Comment 33:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac8abe96cf5eb30f9c7138097d615effc33a4efb">ac8abe9</a></td><td><code>more doctests</code></td></tr></table>




---

archive/issue_comments_355644.json:
```json
{
    "body": "Changed commit from **[2cffd3f](https://github.com/sagemath/sagetrac-mirror/commit/2cffd3f000e6a17797fe80e235d6b6f73cd5f632)** to **[ac8abe9](https://github.com/sagemath/sagetrac-mirror/commit/ac8abe96cf5eb30f9c7138097d615effc33a4efb)**",
    "created_at": "2022-02-20T09:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355644",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2cffd3f](https://github.com/sagemath/sagetrac-mirror/commit/2cffd3f000e6a17797fe80e235d6b6f73cd5f632)** to **[ac8abe9](https://github.com/sagemath/sagetrac-mirror/commit/ac8abe96cf5eb30f9c7138097d615effc33a4efb)**



---

archive/issue_comments_355645.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc9f77f45b77ba70e2ba8e86779389c8d30ef1fc\">dc9f77f</a></td><td><code>minor fixes</code></td></tr></table>\n",
    "created_at": "2022-02-20T16:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355645",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:34'>Comment 34:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc9f77f45b77ba70e2ba8e86779389c8d30ef1fc">dc9f77f</a></td><td><code>minor fixes</code></td></tr></table>




---

archive/issue_comments_355646.json:
```json
{
    "body": "Changed commit from **[ac8abe9](https://github.com/sagemath/sagetrac-mirror/commit/ac8abe96cf5eb30f9c7138097d615effc33a4efb)** to **[dc9f77f](https://github.com/sagemath/sagetrac-mirror/commit/dc9f77f45b77ba70e2ba8e86779389c8d30ef1fc)**",
    "created_at": "2022-02-20T16:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355646",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ac8abe9](https://github.com/sagemath/sagetrac-mirror/commit/ac8abe96cf5eb30f9c7138097d615effc33a4efb)** to **[dc9f77f](https://github.com/sagemath/sagetrac-mirror/commit/dc9f77f45b77ba70e2ba8e86779389c8d30ef1fc)**



---

archive/issue_comments_355647.json:
```json
{
    "body": "Changed commit from **[dc9f77f](https://github.com/sagemath/sagetrac-mirror/commit/dc9f77f45b77ba70e2ba8e86779389c8d30ef1fc)** to **[6d7e43e](https://github.com/sagemath/sagetrac-mirror/commit/6d7e43e8134c061b464c86cd7e085637456b61ce)**",
    "created_at": "2022-02-20T20:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355647",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dc9f77f](https://github.com/sagemath/sagetrac-mirror/commit/dc9f77f45b77ba70e2ba8e86779389c8d30ef1fc)** to **[6d7e43e](https://github.com/sagemath/sagetrac-mirror/commit/6d7e43e8134c061b464c86cd7e085637456b61ce)**



---

archive/issue_comments_355648.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d7e43e8134c061b464c86cd7e085637456b61ce\">6d7e43e</a></td><td><code>Merge branch 'develop' into echelon_form</code></td></tr></table>\n",
    "created_at": "2022-02-20T20:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355648",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:35'>Comment 35:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d7e43e8134c061b464c86cd7e085637456b61ce">6d7e43e</a></td><td><code>Merge branch 'develop' into echelon_form</code></td></tr></table>




---

archive/issue_comments_355649.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nHere are the test failures when I ran tests locally:\n\n```\nDoctesting 7 files using 64 threads.\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix_cdv.pxd\n    [0 tests, 0.00 s]\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix2.pxd\n    [0 tests, 0.00 s]\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix_cdv.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix_cdv.pyx\", line 710, in sage.matrix.matrix_cdv.hessenbergize_cdvf\nFailed example:\n    M.charpoly()\nExpected:\n    x^3 + (1 + 4*t + 4*t^2 + O(t^3))*x^2 + (t + 2*t^2 + O(t^3))*x + 3 + 2*t^2 + O(t^3)\nGot:\n    x^3 + (1 + 4*t + 4*t^2 + O(t^4))*x^2 + (t + 2*t^2 + O(t^3))*x + 3 + 2*t^2 + O(t^3)\n**********************************************************************\n1 item had failures:\n   1 of  11 in sage.matrix.matrix_cdv.hessenbergize_cdvf\n    [41 tests, 1 failure, 0.08 s]\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/rings/laurent_series_ring.py\n**********************************************************************\nFile \"src/sage/rings/laurent_series_ring.py\", line 119, in sage.rings.laurent_series_ring.LaurentSeriesRing\nFailed example:\n    TestSuite(F).run()\nExpected nothing\nGot:\n    Failure in _test_euclidean_degree:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/euclidean_domains.py\", line 155, in _test_euclidean_degree\n        tester.assertEqual(a.euclidean_degree() == min_degree, a.is_unit())\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: False != True\n    ------------------------------------------------------------\n    Failure in _test_gcd_vs_xgcd:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/principal_ideal_domains.py\", line 119, in _test_gcd_vs_xgcd\n        tester.assertTrue(gcd==xgcd[0],\n      File \"/usr/lib/python3.8/unittest/case.py\", line 765, in assertTrue\n        raise self.failureException(msg)\n    AssertionError: The methods gcd and xgcd disagree on Laurent Series Ring in x over Rational Field:\n      gcd(x,x) = x\n     xgcd(x,x) = (1, x^-1, 0)\n    ------------------------------------------------------------\n    Failure in _test_matrix_smith:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/complete_discrete_valuation.py\", line 304, in _test_matrix_smith\n        tester.assertEqual(U.base_ring(), base)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: Laurent Series Ring in x over Rational Field != Power Series Ring in x over Rational Field\n    ------------------------------------------------------------\n    The following tests failed: _test_euclidean_degree, _test_gcd_vs_xgcd, _test_matrix_smith\n**********************************************************************\nFile \"src/sage/rings/laurent_series_ring.py\", line 128, in sage.rings.laurent_series_ring.LaurentSeriesRing\nFailed example:\n    F.category()\nExpected:\n    Join of Category of complete discrete valuation fields and Category of commutative algebras over (finite enumerated fields and subquotients of monoids and quotients of semigroups) and Category of infinite sets\nGot:\n    Join of Category of complete discrete valuation rings and Category of commutative algebras over (finite enumerated fields and subquotients of monoids and quotients of semigroups) and Category of infinite sets\n**********************************************************************\nFile \"src/sage/rings/laurent_series_ring.py\", line 130, in sage.rings.laurent_series_ring.LaurentSeriesRing\nFailed example:\n    TestSuite(F).run()\nExpected nothing\nGot:\n    Failure in _test_euclidean_degree:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/euclidean_domains.py\", line 155, in _test_euclidean_degree\n        tester.assertEqual(a.euclidean_degree() == min_degree, a.is_unit())\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: False != True\n    ------------------------------------------------------------\n    Failure in _test_gcd_vs_xgcd:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/principal_ideal_domains.py\", line 119, in _test_gcd_vs_xgcd\n        tester.assertTrue(gcd==xgcd[0],\n      File \"/usr/lib/python3.8/unittest/case.py\", line 765, in assertTrue\n        raise self.failureException(msg)\n    AssertionError: The methods gcd and xgcd disagree on Laurent Series Ring in x over Finite Field of size 11:\n      gcd(x,x) = x\n     xgcd(x,x) = (1, x^-1, 0)\n    ------------------------------------------------------------\n    Failure in _test_matrix_smith:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/complete_discrete_valuation.py\", line 304, in _test_matrix_smith\n        tester.assertEqual(U.base_ring(), base)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: Laurent Series Ring in x over Finite Field of size 11 != Power Series Ring in x over Finite Field of size 11\n    ------------------------------------------------------------\n    The following tests failed: _test_euclidean_degree, _test_gcd_vs_xgcd, _test_matrix_smith\n**********************************************************************\nFile \"src/sage/rings/laurent_series_ring.py\", line 151, in sage.rings.laurent_series_ring.LaurentSeriesRing\nFailed example:\n    LaurentSeriesRing(QQ, 'x').category()\nExpected:\n    Join of Category of complete discrete valuation fields and Category of commutative algebras over (number fields and quotient fields and metric spaces) and Category of infinite sets\nGot:\n    Join of Category of complete discrete valuation rings and Category of fields and Category of commutative algebras over (number fields and quotient fields and metric spaces) and Category of infinite sets\n**********************************************************************\nFile \"src/sage/rings/laurent_series_ring.py\", line 227, in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__\nFailed example:\n    R2.category()\nExpected:\n    Join of Category of complete discrete valuation fields and Category of commutative algebras over (finite enumerated fields and subquotients of monoids and quotients of semigroups) and Category of infinite sets\nGot:\n    Join of Category of complete discrete valuation rings and Category of commutative algebras over (finite enumerated fields and subquotients of monoids and quotients of semigroups) and Category of infinite sets\n**********************************************************************\nFile \"src/sage/rings/laurent_series_ring.py\", line 229, in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__\nFailed example:\n    TestSuite(R2).run()\nExpected nothing\nGot:\n    Failure in _test_euclidean_degree:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/euclidean_domains.py\", line 155, in _test_euclidean_degree\n        tester.assertEqual(a.euclidean_degree() == min_degree, a.is_unit())\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: False != True\n    ------------------------------------------------------------\n    Failure in _test_gcd_vs_xgcd:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/principal_ideal_domains.py\", line 119, in _test_gcd_vs_xgcd\n        tester.assertTrue(gcd==xgcd[0],\n      File \"/usr/lib/python3.8/unittest/case.py\", line 765, in assertTrue\n        raise self.failureException(msg)\n    AssertionError: The methods gcd and xgcd disagree on Laurent Series Ring in t over Ring of integers modulo 2:\n      gcd(t,t) = t\n     xgcd(t,t) = (1, t^-1, 0)\n    ------------------------------------------------------------\n    Failure in _test_matrix_smith:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/complete_discrete_valuation.py\", line 304, in _test_matrix_smith\n        tester.assertEqual(U.base_ring(), base)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: Laurent Series Ring in t over Ring of integers modulo 2 != Power Series Ring in t over Ring of integers modulo 2\n    ------------------------------------------------------------\n    The following tests failed: _test_euclidean_degree, _test_gcd_vs_xgcd, _test_matrix_smith\n**********************************************************************\nFile \"src/sage/rings/laurent_series_ring.py\", line 237, in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__\nFailed example:\n    RQQ.category()\nExpected:\n    Join of Category of complete discrete valuation fields and Category of commutative algebras over (number fields and quotient fields and metric spaces) and Category of infinite sets\nGot:\n    Join of Category of complete discrete valuation rings and Category of commutative algebras over (number fields and quotient fields and metric spaces) and Category of infinite sets\n**********************************************************************\nFile \"src/sage/rings/laurent_series_ring.py\", line 239, in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__\nFailed example:\n    TestSuite(RQQ).run()\nExpected nothing\nGot:\n    Failure in _test_euclidean_degree:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/euclidean_domains.py\", line 155, in _test_euclidean_degree\n        tester.assertEqual(a.euclidean_degree() == min_degree, a.is_unit())\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: False != True\n    ------------------------------------------------------------\n    Failure in _test_gcd_vs_xgcd:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/principal_ideal_domains.py\", line 119, in _test_gcd_vs_xgcd\n        tester.assertTrue(gcd==xgcd[0],\n      File \"/usr/lib/python3.8/unittest/case.py\", line 765, in assertTrue\n        raise self.failureException(msg)\n    AssertionError: The methods gcd and xgcd disagree on Laurent Series Ring in t over Rational Field:\n      gcd(t,t) = t\n     xgcd(t,t) = (1, t^-1, 0)\n    ------------------------------------------------------------\n    Failure in _test_matrix_smith:\n    Traceback (most recent call last):\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/complete_discrete_valuation.py\", line 304, in _test_matrix_smith\n        tester.assertEqual(U.base_ring(), base)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 912, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/usr/lib/python3.8/unittest/case.py\", line 905, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: Laurent Series Ring in t over Rational Field != Power Series Ring in t over Rational Field\n    ------------------------------------------------------------\n    The following tests failed: _test_euclidean_degree, _test_gcd_vs_xgcd, _test_matrix_smith\n**********************************************************************\n2 items had failures:\n   4 of  43 in sage.rings.laurent_series_ring.LaurentSeriesRing\n   4 of  18 in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__\n    [182 tests, 8 failures, 0.21 s]\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/rings/multi_power_series_ring_element.py\n**********************************************************************\nFile \"src/sage/rings/multi_power_series_ring_element.py\", line 1081, in sage.rings.multi_power_series_ring_element.MPowerSeries.__mod__\nFailed example:\n    g in R\nExpected:\n    False\nGot:\n    True\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage.rings.multi_power_series_ring_element.MPowerSeries.__mod__\n    [466 tests, 1 failure, 0.27 s]\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/categories/complete_discrete_valuation.py\n**********************************************************************\nFile \"src/sage/categories/complete_discrete_valuation.py\", line 621, in sage.categories.complete_discrete_valuation.CompleteDiscreteValuationFields\nFailed example:\n    LaurentSeriesRing(QQ,'u') in CompleteDiscreteValuationFields()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.categories.complete_discrete_valuation.CompleteDiscreteValuationFields\n    [200 tests, 1 failure, 0.24 s]\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix2.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix2.pyx\", line 9855, in sage.matrix.matrix2.Matrix.inverse\nFailed example:\n    ~M\nExpected:\n    [t^-1 t^-2]\n    [   0 t^-1]\nGot:\n    [1 0]\n    [0 1]\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.matrix.matrix2.Matrix.inverse\n    [2807 tests, 1 failure, 8.67 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix_cdv.pyx  # 1 doctest failed\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/rings/laurent_series_ring.py  # 8 doctests failed\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/rings/multi_power_series_ring_element.py  # 1 doctest failed\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/categories/complete_discrete_valuation.py  # 1 doctest failed\nsage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix2.pyx  # 1 doctest failed\n```",
    "created_at": "2022-02-20T21:28:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355649",
    "user": "https://github.com/roed314"
}
```

<a id='comment:36'>Comment 36:</a>
Here are the test failures when I ran tests locally:

```
Doctesting 7 files using 64 threads.
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix_cdv.pxd
    [0 tests, 0.00 s]
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix2.pxd
    [0 tests, 0.00 s]
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix_cdv.pyx
**********************************************************************
File "src/sage/matrix/matrix_cdv.pyx", line 710, in sage.matrix.matrix_cdv.hessenbergize_cdvf
Failed example:
    M.charpoly()
Expected:
    x^3 + (1 + 4*t + 4*t^2 + O(t^3))*x^2 + (t + 2*t^2 + O(t^3))*x + 3 + 2*t^2 + O(t^3)
Got:
    x^3 + (1 + 4*t + 4*t^2 + O(t^4))*x^2 + (t + 2*t^2 + O(t^3))*x + 3 + 2*t^2 + O(t^3)
**********************************************************************
1 item had failures:
   1 of  11 in sage.matrix.matrix_cdv.hessenbergize_cdvf
    [41 tests, 1 failure, 0.08 s]
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/rings/laurent_series_ring.py
**********************************************************************
File "src/sage/rings/laurent_series_ring.py", line 119, in sage.rings.laurent_series_ring.LaurentSeriesRing
Failed example:
    TestSuite(F).run()
Expected nothing
Got:
    Failure in _test_euclidean_degree:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/euclidean_domains.py", line 155, in _test_euclidean_degree
        tester.assertEqual(a.euclidean_degree() == min_degree, a.is_unit())
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: False != True
    ------------------------------------------------------------
    Failure in _test_gcd_vs_xgcd:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/principal_ideal_domains.py", line 119, in _test_gcd_vs_xgcd
        tester.assertTrue(gcd==xgcd[0],
      File "/usr/lib/python3.8/unittest/case.py", line 765, in assertTrue
        raise self.failureException(msg)
    AssertionError: The methods gcd and xgcd disagree on Laurent Series Ring in x over Rational Field:
      gcd(x,x) = x
     xgcd(x,x) = (1, x^-1, 0)
    ------------------------------------------------------------
    Failure in _test_matrix_smith:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/complete_discrete_valuation.py", line 304, in _test_matrix_smith
        tester.assertEqual(U.base_ring(), base)
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: Laurent Series Ring in x over Rational Field != Power Series Ring in x over Rational Field
    ------------------------------------------------------------
    The following tests failed: _test_euclidean_degree, _test_gcd_vs_xgcd, _test_matrix_smith
**********************************************************************
File "src/sage/rings/laurent_series_ring.py", line 128, in sage.rings.laurent_series_ring.LaurentSeriesRing
Failed example:
    F.category()
Expected:
    Join of Category of complete discrete valuation fields and Category of commutative algebras over (finite enumerated fields and subquotients of monoids and quotients of semigroups) and Category of infinite sets
Got:
    Join of Category of complete discrete valuation rings and Category of commutative algebras over (finite enumerated fields and subquotients of monoids and quotients of semigroups) and Category of infinite sets
**********************************************************************
File "src/sage/rings/laurent_series_ring.py", line 130, in sage.rings.laurent_series_ring.LaurentSeriesRing
Failed example:
    TestSuite(F).run()
Expected nothing
Got:
    Failure in _test_euclidean_degree:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/euclidean_domains.py", line 155, in _test_euclidean_degree
        tester.assertEqual(a.euclidean_degree() == min_degree, a.is_unit())
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: False != True
    ------------------------------------------------------------
    Failure in _test_gcd_vs_xgcd:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/principal_ideal_domains.py", line 119, in _test_gcd_vs_xgcd
        tester.assertTrue(gcd==xgcd[0],
      File "/usr/lib/python3.8/unittest/case.py", line 765, in assertTrue
        raise self.failureException(msg)
    AssertionError: The methods gcd and xgcd disagree on Laurent Series Ring in x over Finite Field of size 11:
      gcd(x,x) = x
     xgcd(x,x) = (1, x^-1, 0)
    ------------------------------------------------------------
    Failure in _test_matrix_smith:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/complete_discrete_valuation.py", line 304, in _test_matrix_smith
        tester.assertEqual(U.base_ring(), base)
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: Laurent Series Ring in x over Finite Field of size 11 != Power Series Ring in x over Finite Field of size 11
    ------------------------------------------------------------
    The following tests failed: _test_euclidean_degree, _test_gcd_vs_xgcd, _test_matrix_smith
**********************************************************************
File "src/sage/rings/laurent_series_ring.py", line 151, in sage.rings.laurent_series_ring.LaurentSeriesRing
Failed example:
    LaurentSeriesRing(QQ, 'x').category()
Expected:
    Join of Category of complete discrete valuation fields and Category of commutative algebras over (number fields and quotient fields and metric spaces) and Category of infinite sets
Got:
    Join of Category of complete discrete valuation rings and Category of fields and Category of commutative algebras over (number fields and quotient fields and metric spaces) and Category of infinite sets
**********************************************************************
File "src/sage/rings/laurent_series_ring.py", line 227, in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__
Failed example:
    R2.category()
Expected:
    Join of Category of complete discrete valuation fields and Category of commutative algebras over (finite enumerated fields and subquotients of monoids and quotients of semigroups) and Category of infinite sets
Got:
    Join of Category of complete discrete valuation rings and Category of commutative algebras over (finite enumerated fields and subquotients of monoids and quotients of semigroups) and Category of infinite sets
**********************************************************************
File "src/sage/rings/laurent_series_ring.py", line 229, in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__
Failed example:
    TestSuite(R2).run()
Expected nothing
Got:
    Failure in _test_euclidean_degree:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/euclidean_domains.py", line 155, in _test_euclidean_degree
        tester.assertEqual(a.euclidean_degree() == min_degree, a.is_unit())
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: False != True
    ------------------------------------------------------------
    Failure in _test_gcd_vs_xgcd:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/principal_ideal_domains.py", line 119, in _test_gcd_vs_xgcd
        tester.assertTrue(gcd==xgcd[0],
      File "/usr/lib/python3.8/unittest/case.py", line 765, in assertTrue
        raise self.failureException(msg)
    AssertionError: The methods gcd and xgcd disagree on Laurent Series Ring in t over Ring of integers modulo 2:
      gcd(t,t) = t
     xgcd(t,t) = (1, t^-1, 0)
    ------------------------------------------------------------
    Failure in _test_matrix_smith:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/complete_discrete_valuation.py", line 304, in _test_matrix_smith
        tester.assertEqual(U.base_ring(), base)
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: Laurent Series Ring in t over Ring of integers modulo 2 != Power Series Ring in t over Ring of integers modulo 2
    ------------------------------------------------------------
    The following tests failed: _test_euclidean_degree, _test_gcd_vs_xgcd, _test_matrix_smith
**********************************************************************
File "src/sage/rings/laurent_series_ring.py", line 237, in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__
Failed example:
    RQQ.category()
Expected:
    Join of Category of complete discrete valuation fields and Category of commutative algebras over (number fields and quotient fields and metric spaces) and Category of infinite sets
Got:
    Join of Category of complete discrete valuation rings and Category of commutative algebras over (number fields and quotient fields and metric spaces) and Category of infinite sets
**********************************************************************
File "src/sage/rings/laurent_series_ring.py", line 239, in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__
Failed example:
    TestSuite(RQQ).run()
Expected nothing
Got:
    Failure in _test_euclidean_degree:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/euclidean_domains.py", line 155, in _test_euclidean_degree
        tester.assertEqual(a.euclidean_degree() == min_degree, a.is_unit())
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: False != True
    ------------------------------------------------------------
    Failure in _test_gcd_vs_xgcd:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/principal_ideal_domains.py", line 119, in _test_gcd_vs_xgcd
        tester.assertTrue(gcd==xgcd[0],
      File "/usr/lib/python3.8/unittest/case.py", line 765, in assertTrue
        raise self.failureException(msg)
    AssertionError: The methods gcd and xgcd disagree on Laurent Series Ring in t over Rational Field:
      gcd(t,t) = t
     xgcd(t,t) = (1, t^-1, 0)
    ------------------------------------------------------------
    Failure in _test_matrix_smith:
    Traceback (most recent call last):
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/home/roed/sage-9.6.beta2/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/complete_discrete_valuation.py", line 304, in _test_matrix_smith
        tester.assertEqual(U.base_ring(), base)
      File "/usr/lib/python3.8/unittest/case.py", line 912, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/usr/lib/python3.8/unittest/case.py", line 905, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: Laurent Series Ring in t over Rational Field != Power Series Ring in t over Rational Field
    ------------------------------------------------------------
    The following tests failed: _test_euclidean_degree, _test_gcd_vs_xgcd, _test_matrix_smith
**********************************************************************
2 items had failures:
   4 of  43 in sage.rings.laurent_series_ring.LaurentSeriesRing
   4 of  18 in sage.rings.laurent_series_ring.LaurentSeriesRing.__init__
    [182 tests, 8 failures, 0.21 s]
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/rings/multi_power_series_ring_element.py
**********************************************************************
File "src/sage/rings/multi_power_series_ring_element.py", line 1081, in sage.rings.multi_power_series_ring_element.MPowerSeries.__mod__
Failed example:
    g in R
Expected:
    False
Got:
    True
**********************************************************************
1 item had failures:
   1 of   7 in sage.rings.multi_power_series_ring_element.MPowerSeries.__mod__
    [466 tests, 1 failure, 0.27 s]
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/categories/complete_discrete_valuation.py
**********************************************************************
File "src/sage/categories/complete_discrete_valuation.py", line 621, in sage.categories.complete_discrete_valuation.CompleteDiscreteValuationFields
Failed example:
    LaurentSeriesRing(QQ,'u') in CompleteDiscreteValuationFields()
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of   6 in sage.categories.complete_discrete_valuation.CompleteDiscreteValuationFields
    [200 tests, 1 failure, 0.24 s]
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix2.pyx
**********************************************************************
File "src/sage/matrix/matrix2.pyx", line 9855, in sage.matrix.matrix2.Matrix.inverse
Failed example:
    ~M
Expected:
    [t^-1 t^-2]
    [   0 t^-1]
Got:
    [1 0]
    [0 1]
**********************************************************************
1 item had failures:
   1 of  13 in sage.matrix.matrix2.Matrix.inverse
    [2807 tests, 1 failure, 8.67 s]
----------------------------------------------------------------------
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix_cdv.pyx  # 1 doctest failed
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/rings/laurent_series_ring.py  # 8 doctests failed
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/rings/multi_power_series_ring_element.py  # 1 doctest failed
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/categories/complete_discrete_valuation.py  # 1 doctest failed
sage -t --long --warn-long 40.9 --random-seed=317472647872885548861559054668703098865 src/sage/matrix/matrix2.pyx  # 1 doctest failed
```



---

archive/issue_comments_355650.json:
```json
{
    "body": "Changed reviewer from **Ben Hutz** to **Ben Hutz, David Roe**",
    "created_at": "2022-02-20T22:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355650",
    "user": "https://github.com/roed314"
}
```

Changed reviewer from **Ben Hutz** to **Ben Hutz, David Roe**



---

archive/issue_events_297765.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2022-02-20T22:11:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297765"
}
```



---

archive/issue_events_297766.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2022-02-20T22:11:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297766"
}
```



---

archive/issue_comments_355651.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a2d2c932cf557410b1632c99e34bc070d790080\">6a2d2c9</a></td><td><code>Laurent series ring is a field</code></td></tr></table>\n",
    "created_at": "2022-02-20T22:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355651",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:38'>Comment 38:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a2d2c932cf557410b1632c99e34bc070d790080">6a2d2c9</a></td><td><code>Laurent series ring is a field</code></td></tr></table>




---

archive/issue_comments_355652.json:
```json
{
    "body": "Changed commit from **[6d7e43e](https://github.com/sagemath/sagetrac-mirror/commit/6d7e43e8134c061b464c86cd7e085637456b61ce)** to **[6a2d2c9](https://github.com/sagemath/sagetrac-mirror/commit/6a2d2c932cf557410b1632c99e34bc070d790080)**",
    "created_at": "2022-02-20T22:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355652",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6d7e43e](https://github.com/sagemath/sagetrac-mirror/commit/6d7e43e8134c061b464c86cd7e085637456b61ce)** to **[6a2d2c9](https://github.com/sagemath/sagetrac-mirror/commit/6a2d2c932cf557410b1632c99e34bc070d790080)**



---

archive/issue_comments_355653.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nI fixed the doctest failures, except the one in `src/sage/rings/multi_power_series_ring_element.py` because I can't understand the relation with this ticket. Any idea?",
    "created_at": "2022-02-20T22:51:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355653",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:39'>Comment 39:</a>
I fixed the doctest failures, except the one in `src/sage/rings/multi_power_series_ring_element.py` because I can't understand the relation with this ticket. Any idea?



---

archive/issue_comments_355654.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nOh, it's just because I removed the function `__contains__` in `sage.rings.power_series_ring`.\n\nHowever, this function didn't work as expected. Typically, we had:\n\n```\nsage: R.<t> = QQ[[]]\nsage: K = R.fraction_field()\nsage: K(t) in R\nFalse\n```\n\nFalling back to the generic implementation of `__contains__`, this problem disappears but an element in `Z/2Z[This is the Trac macro *u* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#u-macro)` is considered as belonging to `Z[This is the Trac macro *u* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#u-macro)`. It's certainly not mathematically correct but the same holds for polynomials. So I'm not sure if it's better to fix the bug (I don't expect this to be easy) or the doctest.",
    "created_at": "2022-02-20T23:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355654",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:40'>Comment 40:</a>
Oh, it's just because I removed the function `__contains__` in `sage.rings.power_series_ring`.

However, this function didn't work as expected. Typically, we had:

```
sage: R.<t> = QQ[[]]
sage: K = R.fraction_field()
sage: K(t) in R
False
```

Falling back to the generic implementation of `__contains__`, this problem disappears but an element in `Z/2Z[This is the Trac macro *u* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#u-macro)` is considered as belonging to `Z[This is the Trac macro *u* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#u-macro)`. It's certainly not mathematically correct but the same holds for polynomials. So I'm not sure if it's better to fix the bug (I don't expect this to be easy) or the doctest.



---

archive/issue_comments_355655.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nI think this is just a consequence of Sage's longstanding definition of containment.  It's analogous to\n\n```\nsage: mod(3, 7) in ZZ                                                                                                  \nTrue\n```\nSo I would say that restoring the generic behavior for containment is correct.",
    "created_at": "2022-02-20T23:21:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355655",
    "user": "https://github.com/roed314"
}
```

<a id='comment:41'>Comment 41:</a>
I think this is just a consequence of Sage's longstanding definition of containment.  It's analogous to

```
sage: mod(3, 7) in ZZ                                                                                                  
True
```
So I would say that restoring the generic behavior for containment is correct.



---

archive/issue_comments_355656.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nOK. Do you agree if I just remove the failing doctest?",
    "created_at": "2022-02-20T23:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355656",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:42'>Comment 42:</a>
OK. Do you agree if I just remove the failing doctest?



---

archive/issue_comments_355657.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nI agree.  In fact, the implementation of `__mod__` here does not agree with the convention in the rest of Sage, where `__mod__` returns something in the same parent rather than just changing the base ring.  But I think that's an issue for another ticket.",
    "created_at": "2022-02-21T01:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355657",
    "user": "https://github.com/roed314"
}
```

<a id='comment:43'>Comment 43:</a>
I agree.  In fact, the implementation of `__mod__` here does not agree with the convention in the rest of Sage, where `__mod__` returns something in the same parent rather than just changing the base ring.  But I think that's an issue for another ticket.



---

archive/issue_comments_355658.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc51f10b50bf804dca35589ee9f86adfeebaa8f2\">dc51f10</a></td><td><code>remove failing doctest</code></td></tr></table>\n",
    "created_at": "2022-02-21T01:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355658",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:44'>Comment 44:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc51f10b50bf804dca35589ee9f86adfeebaa8f2">dc51f10</a></td><td><code>remove failing doctest</code></td></tr></table>




---

archive/issue_comments_355659.json:
```json
{
    "body": "Changed commit from **[6a2d2c9](https://github.com/sagemath/sagetrac-mirror/commit/6a2d2c932cf557410b1632c99e34bc070d790080)** to **[dc51f10](https://github.com/sagemath/sagetrac-mirror/commit/dc51f10b50bf804dca35589ee9f86adfeebaa8f2)**",
    "created_at": "2022-02-21T01:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355659",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6a2d2c9](https://github.com/sagemath/sagetrac-mirror/commit/6a2d2c932cf557410b1632c99e34bc070d790080)** to **[dc51f10](https://github.com/sagemath/sagetrac-mirror/commit/dc51f10b50bf804dca35589ee9f86adfeebaa8f2)**



---

archive/issue_events_297767.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-02-21T01:36:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297767"
}
```



---

archive/issue_events_297768.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-02-21T01:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297768"
}
```



---

archive/issue_comments_355660.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nAnother comment (since I see you're still awake)\n\n* Anywhere you use backslashes in docstrings you need to make sure that they're raw strings (have an \"r\" before the triple quote)\n\nI'm reading through the changes now and may have more comments....",
    "created_at": "2022-02-21T01:40:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355660",
    "user": "https://github.com/roed314"
}
```

<a id='comment:46'>Comment 46:</a>
Another comment (since I see you're still awake)

* Anywhere you use backslashes in docstrings you need to make sure that they're raw strings (have an "r" before the triple quote)

I'm reading through the changes now and may have more comments....



---

archive/issue_comments_355661.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57a41b22f7375eec096c2af524ba5b7c871ed58c\">57a41b2</a></td><td><code>small fix</code></td></tr></table>\n",
    "created_at": "2022-02-21T10:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355661",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:47'>Comment 47:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57a41b22f7375eec096c2af524ba5b7c871ed58c">57a41b2</a></td><td><code>small fix</code></td></tr></table>




---

archive/issue_comments_355662.json:
```json
{
    "body": "Changed commit from **[dc51f10](https://github.com/sagemath/sagetrac-mirror/commit/dc51f10b50bf804dca35589ee9f86adfeebaa8f2)** to **[57a41b2](https://github.com/sagemath/sagetrac-mirror/commit/57a41b22f7375eec096c2af524ba5b7c871ed58c)**",
    "created_at": "2022-02-21T10:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355662",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dc51f10](https://github.com/sagemath/sagetrac-mirror/commit/dc51f10b50bf804dca35589ee9f86adfeebaa8f2)** to **[57a41b2](https://github.com/sagemath/sagetrac-mirror/commit/57a41b22f7375eec096c2af524ba5b7c871ed58c)**



---

archive/issue_events_297769.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-12T07:11:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297769"
}
```



---

archive/issue_events_297770.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-12T07:11:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297770"
}
```



---

archive/issue_events_297771.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-12T07:11:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297771"
}
```



---

archive/issue_events_297772.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-05-12T07:11:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297772"
}
```



---

archive/issue_comments_355663.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nred branch => needs work",
    "created_at": "2022-05-12T07:11:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355663",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:48'>Comment 48:</a>
red branch => needs work



---

archive/issue_comments_355664.json:
```json
{
    "body": "Changed commit from **[57a41b2](https://github.com/sagemath/sagetrac-mirror/commit/57a41b22f7375eec096c2af524ba5b7c871ed58c)** to **[bd75b0d](https://github.com/sagemath/sagetrac-mirror/commit/bd75b0dcfc6b0f450463cfa0103184a73fac1ffa)**",
    "created_at": "2022-05-19T09:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355664",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[57a41b2](https://github.com/sagemath/sagetrac-mirror/commit/57a41b22f7375eec096c2af524ba5b7c871ed58c)** to **[bd75b0d](https://github.com/sagemath/sagetrac-mirror/commit/bd75b0dcfc6b0f450463cfa0103184a73fac1ffa)**



---

archive/issue_comments_355665.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd75b0dcfc6b0f450463cfa0103184a73fac1ffa\">bd75b0d</a></td><td><code>Merge branch 'develop' into echelon_form</code></td></tr></table>\n",
    "created_at": "2022-05-19T09:51:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355665",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:49'>Comment 49:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd75b0dcfc6b0f450463cfa0103184a73fac1ffa">bd75b0d</a></td><td><code>Merge branch 'develop' into echelon_form</code></td></tr></table>




---

archive/issue_comments_355666.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nI fixed merging issues.\n\nI put needs review in order to get feedback from the patchbot.",
    "created_at": "2022-05-19T09:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355666",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:50'>Comment 50:</a>
I fixed merging issues.

I put needs review in order to get feedback from the patchbot.



---

archive/issue_events_297773.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-05-19T09:58:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297773"
}
```



---

archive/issue_events_297774.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2022-05-19T09:58:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297774"
}
```



---

archive/issue_comments_355667.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27b57b89b3b2b2962ead3a8b96468d5c0d943e82\">27b57b8</a></td><td><code>fix pyflakes</code></td></tr></table>\n",
    "created_at": "2022-05-19T17:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355667",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:51'>Comment 51:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27b57b89b3b2b2962ead3a8b96468d5c0d943e82">27b57b8</a></td><td><code>fix pyflakes</code></td></tr></table>




---

archive/issue_comments_355668.json:
```json
{
    "body": "Changed commit from **[bd75b0d](https://github.com/sagemath/sagetrac-mirror/commit/bd75b0dcfc6b0f450463cfa0103184a73fac1ffa)** to **[27b57b8](https://github.com/sagemath/sagetrac-mirror/commit/27b57b89b3b2b2962ead3a8b96468d5c0d943e82)**",
    "created_at": "2022-05-19T17:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355668",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bd75b0d](https://github.com/sagemath/sagetrac-mirror/commit/bd75b0dcfc6b0f450463cfa0103184a73fac1ffa)** to **[27b57b8](https://github.com/sagemath/sagetrac-mirror/commit/27b57b89b3b2b2962ead3a8b96468d5c0d943e82)**



---

archive/issue_comments_355669.json:
```json
{
    "body": "Changed branch from **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)** to **[u/saraedum/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/padic_hermite)**",
    "created_at": "2022-05-19T20:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355669",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)** to **[u/saraedum/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/padic_hermite)**



---

archive/issue_comments_355670.json:
```json
{
    "body": "Changed commit from **[27b57b8](https://github.com/sagemath/sagetrac-mirror/commit/27b57b89b3b2b2962ead3a8b96468d5c0d943e82)** to **[ecb4f01](https://github.com/sagemath/sagetrac-mirror/commit/ecb4f01b734724d7f31e578a23fa374a08115ceb)**",
    "created_at": "2022-05-19T20:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355670",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[27b57b8](https://github.com/sagemath/sagetrac-mirror/commit/27b57b89b3b2b2962ead3a8b96468d5c0d943e82)** to **[ecb4f01](https://github.com/sagemath/sagetrac-mirror/commit/ecb4f01b734724d7f31e578a23fa374a08115ceb)**



---

archive/issue_comments_355671.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecb4f01b734724d7f31e578a23fa374a08115ceb\">ecb4f01</a></td><td><code>Deduplicate code for complete discrete valuation rings and fields</code></td></tr></table>\n",
    "created_at": "2022-05-19T20:31:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355671",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:53'>Comment 53:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecb4f01b734724d7f31e578a23fa374a08115ceb">ecb4f01</a></td><td><code>Deduplicate code for complete discrete valuation rings and fields</code></td></tr></table>




---

archive/issue_comments_355672.json:
```json
{
    "body": "Changed commit from **[ecb4f01](https://github.com/sagemath/sagetrac-mirror/commit/ecb4f01b734724d7f31e578a23fa374a08115ceb)** to **[3c4cfd9](https://github.com/sagemath/sagetrac-mirror/commit/3c4cfd951811903df59b93ce7359ae6dacf3f934)**",
    "created_at": "2022-05-19T20:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355672",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ecb4f01](https://github.com/sagemath/sagetrac-mirror/commit/ecb4f01b734724d7f31e578a23fa374a08115ceb)** to **[3c4cfd9](https://github.com/sagemath/sagetrac-mirror/commit/3c4cfd951811903df59b93ce7359ae6dacf3f934)**



---

archive/issue_comments_355673.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ec4bcff8517a91b6e6571498671caef9c562861\">9ec4bcf</a></td><td><code>Fix handling of transformation=false in echelonize</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c4cfd951811903df59b93ce7359ae6dacf3f934\">3c4cfd9</a></td><td><code>Drop unused code</code></td></tr></table>\n",
    "created_at": "2022-05-19T20:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355673",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:54'>Comment 54:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ec4bcff8517a91b6e6571498671caef9c562861">9ec4bcf</a></td><td><code>Fix handling of transformation=false in echelonize</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c4cfd951811903df59b93ce7359ae6dacf3f934">3c4cfd9</a></td><td><code>Drop unused code</code></td></tr></table>




---

archive/issue_comments_355674.json:
```json
{
    "body": "Changed commit from **[3c4cfd9](https://github.com/sagemath/sagetrac-mirror/commit/3c4cfd951811903df59b93ce7359ae6dacf3f934)** to **[cb2404b](https://github.com/sagemath/sagetrac-mirror/commit/cb2404be69851ea823d1572504fd4001beafec64)**",
    "created_at": "2022-05-19T20:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355674",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3c4cfd9](https://github.com/sagemath/sagetrac-mirror/commit/3c4cfd951811903df59b93ce7359ae6dacf3f934)** to **[cb2404b](https://github.com/sagemath/sagetrac-mirror/commit/cb2404be69851ea823d1572504fd4001beafec64)**



---

archive/issue_comments_355675.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/263890895d4c25efa7fb87f3a1d0c6acddb4dd87\">2638908</a></td><td><code>Fix LaTeX escaping in docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d8c61f75cc6d8c3f2c81c1a1f9bb421f9605acb\">0d8c61f</a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/941f1c07ae09a60be2d14a1feb09beedf542adce\">941f1c0</a></td><td><code>Drop commented out definitions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb2404be69851ea823d1572504fd4001beafec64\">cb2404b</a></td><td><code>Remove typo</code></td></tr></table>\n",
    "created_at": "2022-05-19T20:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355675",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:55'>Comment 55:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/263890895d4c25efa7fb87f3a1d0c6acddb4dd87">2638908</a></td><td><code>Fix LaTeX escaping in docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d8c61f75cc6d8c3f2c81c1a1f9bb421f9605acb">0d8c61f</a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/941f1c07ae09a60be2d14a1feb09beedf542adce">941f1c0</a></td><td><code>Drop commented out definitions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb2404be69851ea823d1572504fd4001beafec64">cb2404b</a></td><td><code>Remove typo</code></td></tr></table>




---

archive/issue_comments_355676.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nAre you using any results from the articles you wrote on p-adic precision? If so, I think that it would be nice to reference the articles in the ALGORITHM sections.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb970134c6842c19d8010f5434afefff32dd838a\">eb97013</a></td><td><code>Improve documentation of CompleteDiscreteValuationRings.ParentMethods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecb4f01b734724d7f31e578a23fa374a08115ceb\">ecb4f01</a></td><td><code>Deduplicate code for complete discrete valuation rings and fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ec4bcff8517a91b6e6571498671caef9c562861\">9ec4bcf</a></td><td><code>Fix handling of transformation=false in echelonize</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c4cfd951811903df59b93ce7359ae6dacf3f934\">3c4cfd9</a></td><td><code>Drop unused code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/263890895d4c25efa7fb87f3a1d0c6acddb4dd87\">2638908</a></td><td><code>Fix LaTeX escaping in docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d8c61f75cc6d8c3f2c81c1a1f9bb421f9605acb\">0d8c61f</a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/941f1c07ae09a60be2d14a1feb09beedf542adce\">941f1c0</a></td><td><code>Drop commented out definitions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb2404be69851ea823d1572504fd4001beafec64\">cb2404b</a></td><td><code>Remove typo</code></td></tr></table>\n",
    "created_at": "2022-05-19T21:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355676",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:56'>Comment 56:</a>
Are you using any results from the articles you wrote on p-adic precision? If so, I think that it would be nice to reference the articles in the ALGORITHM sections.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb970134c6842c19d8010f5434afefff32dd838a">eb97013</a></td><td><code>Improve documentation of CompleteDiscreteValuationRings.ParentMethods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecb4f01b734724d7f31e578a23fa374a08115ceb">ecb4f01</a></td><td><code>Deduplicate code for complete discrete valuation rings and fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ec4bcff8517a91b6e6571498671caef9c562861">9ec4bcf</a></td><td><code>Fix handling of transformation=false in echelonize</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c4cfd951811903df59b93ce7359ae6dacf3f934">3c4cfd9</a></td><td><code>Drop unused code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/263890895d4c25efa7fb87f3a1d0c6acddb4dd87">2638908</a></td><td><code>Fix LaTeX escaping in docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d8c61f75cc6d8c3f2c81c1a1f9bb421f9605acb">0d8c61f</a></td><td><code>Improve docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/941f1c07ae09a60be2d14a1feb09beedf542adce">941f1c0</a></td><td><code>Drop commented out definitions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb2404be69851ea823d1572504fd4001beafec64">cb2404b</a></td><td><code>Remove typo</code></td></tr></table>




---

archive/issue_comments_355677.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nHow are these change related to this issue? Can they be reverted?\n\n```\ndiff --git a/src/sage/rings/padics/relaxed_template.pxi b/src/sage/rings/padics/relaxed_template.pxi\nindex 7269da0..42af3ea 100644\n--- a/src/sage/rings/padics/relaxed_template.pxi\n+++ b/src/sage/rings/padics/relaxed_template.pxi\n@@ -1265,19 +1265,10 @@ cdef class RelaxedElement(pAdicGenericElement):\n             sage: a.lift_to_precision(20)\n             4*5 + 4*5^2 + 5^4 + O(5^20)\n \n-        When the precision is omitted, the default precision of the parent\n-        is used::\n+        When the precision is omitted, the element is made unbounded::\n \n             sage: a.lift_to_precision()\n-            4*5 + 4*5^2 + 5^4 + O(5^10)\n-\n-        When the parent is a field, the behaviour is slightly different since\n-        the default precision of the parent becomes the relative precision\n-        of the lifted element::\n-\n-            sage: K = R.fraction_field()\n-            sage: K(a).lift_to_precision()\n-            4*5 + 4*5^2 + 5^4 + O(5^11)\n+            4*5 + 4*5^2 + 5^4 + ...\n \n         Note that the precision never decreases::\n \n@@ -1298,13 +1289,14 @@ cdef class RelaxedElement(pAdicGenericElement):\n         cdef long prec\n         cdef long default_prec = self._parent.default_prec()\n         if absprec is None:\n-            if self.prime_pow.in_field:\n-                self._jump_relative_c(1, self._precbound)\n-                if self._precrel == 0:\n-                    return self._parent.zero()\n-                prec = self._valuation + default_prec\n-            else:\n-                prec = default_prec\n+            prec = maxordp\n+            #if self.prime_pow.in_field:\n+            #    self._jump_relative_c(1, self._precbound)\n+            #    if self._precrel == 0:\n+            #        return self._parent.zero()\n+            #    prec = self._valuation + default_prec\n+            #else:\n+            #    prec = default_prec\n         else:\n             if absprec > maxordp:\n                 raise OverflowError(\"beyond the maximal precision (which is %s)\" % maxordp)\n```",
    "created_at": "2022-05-19T21:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355677",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:57'>Comment 57:</a>
How are these change related to this issue? Can they be reverted?

```
diff --git a/src/sage/rings/padics/relaxed_template.pxi b/src/sage/rings/padics/relaxed_template.pxi
index 7269da0..42af3ea 100644
--- a/src/sage/rings/padics/relaxed_template.pxi
+++ b/src/sage/rings/padics/relaxed_template.pxi
@@ -1265,19 +1265,10 @@ cdef class RelaxedElement(pAdicGenericElement):
             sage: a.lift_to_precision(20)
             4*5 + 4*5^2 + 5^4 + O(5^20)
 
-        When the precision is omitted, the default precision of the parent
-        is used::
+        When the precision is omitted, the element is made unbounded::
 
             sage: a.lift_to_precision()
-            4*5 + 4*5^2 + 5^4 + O(5^10)
-
-        When the parent is a field, the behaviour is slightly different since
-        the default precision of the parent becomes the relative precision
-        of the lifted element::
-
-            sage: K = R.fraction_field()
-            sage: K(a).lift_to_precision()
-            4*5 + 4*5^2 + 5^4 + O(5^11)
+            4*5 + 4*5^2 + 5^4 + ...
 
         Note that the precision never decreases::
 
@@ -1298,13 +1289,14 @@ cdef class RelaxedElement(pAdicGenericElement):
         cdef long prec
         cdef long default_prec = self._parent.default_prec()
         if absprec is None:
-            if self.prime_pow.in_field:
-                self._jump_relative_c(1, self._precbound)
-                if self._precrel == 0:
-                    return self._parent.zero()
-                prec = self._valuation + default_prec
-            else:
-                prec = default_prec
+            prec = maxordp
+            #if self.prime_pow.in_field:
+            #    self._jump_relative_c(1, self._precbound)
+            #    if self._precrel == 0:
+            #        return self._parent.zero()
+            #    prec = self._valuation + default_prec
+            #else:
+            #    prec = default_prec
         else:
             if absprec > maxordp:
                 raise OverflowError("beyond the maximal precision (which is %s)" % maxordp)
```



---

archive/issue_comments_355678.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f595901a1fd73c1b094e5b694b16aaacf3e0c316\">f595901</a></td><td><code>Cleanup implementation of matrix_cdv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab32baca7f7aeae441a139fa4e1f1ed666ba5409\">ab32bac</a></td><td><code>Restore removed doctests</code></td></tr></table>\n",
    "created_at": "2022-05-19T21:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355678",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:58'>Comment 58:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f595901a1fd73c1b094e5b694b16aaacf3e0c316">f595901</a></td><td><code>Cleanup implementation of matrix_cdv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab32baca7f7aeae441a139fa4e1f1ed666ba5409">ab32bac</a></td><td><code>Restore removed doctests</code></td></tr></table>




---

archive/issue_comments_355679.json:
```json
{
    "body": "Changed commit from **[cb2404b](https://github.com/sagemath/sagetrac-mirror/commit/cb2404be69851ea823d1572504fd4001beafec64)** to **[ab32bac](https://github.com/sagemath/sagetrac-mirror/commit/ab32baca7f7aeae441a139fa4e1f1ed666ba5409)**",
    "created_at": "2022-05-19T21:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355679",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cb2404b](https://github.com/sagemath/sagetrac-mirror/commit/cb2404be69851ea823d1572504fd4001beafec64)** to **[ab32bac](https://github.com/sagemath/sagetrac-mirror/commit/ab32baca7f7aeae441a139fa4e1f1ed666ba5409)**



---

archive/issue_comments_355680.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nXavier, I made some review changes, trying to simplify things a bit and improving some docstrings (hopefully.)\n\nThis looks great to me, so once doctests pass again an the above comments have been adressed, this is good to be merged.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f595901a1fd73c1b094e5b694b16aaacf3e0c316\">f595901</a></td><td><code>Cleanup implementation of matrix_cdv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab32baca7f7aeae441a139fa4e1f1ed666ba5409\">ab32bac</a></td><td><code>Restore removed doctests</code></td></tr></table>\n",
    "created_at": "2022-05-19T21:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355680",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:59'>Comment 59:</a>
Xavier, I made some review changes, trying to simplify things a bit and improving some docstrings (hopefully.)

This looks great to me, so once doctests pass again an the above comments have been adressed, this is good to be merged.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f595901a1fd73c1b094e5b694b16aaacf3e0c316">f595901</a></td><td><code>Cleanup implementation of matrix_cdv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab32baca7f7aeae441a139fa4e1f1ed666ba5409">ab32bac</a></td><td><code>Restore removed doctests</code></td></tr></table>




---

archive/issue_comments_355681.json:
```json
{
    "body": "Changed branch from **[u/saraedum/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/padic_hermite)** to **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**",
    "created_at": "2022-05-21T10:22:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355681",
    "user": "https://github.com/xcaruso"
}
```

Changed branch from **[u/saraedum/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/padic_hermite)** to **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**



---

archive/issue_comments_355682.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nIt seems that your class `SharedParentMethods` does not work.\n\n```\nsage: R = Zp(5, prec=10)\nsage: R._matrix_echelonize\nTraceback (most recent call last):\n...\nAttributeError: 'pAdicRingCappedRelative_with_category' object has no attribute '_matrix_echelonize'\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1068baa478b35940165b106a2c7d361256d88d85\">1068baa</a></td><td><code>fix small bug</code></td></tr></table>\n",
    "created_at": "2022-05-21T10:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355682",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:61'>Comment 61:</a>
It seems that your class `SharedParentMethods` does not work.

```
sage: R = Zp(5, prec=10)
sage: R._matrix_echelonize
Traceback (most recent call last):
...
AttributeError: 'pAdicRingCappedRelative_with_category' object has no attribute '_matrix_echelonize'
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1068baa478b35940165b106a2c7d361256d88d85">1068baa</a></td><td><code>fix small bug</code></td></tr></table>




---

archive/issue_comments_355683.json:
```json
{
    "body": "Changed commit from **[ab32bac](https://github.com/sagemath/sagetrac-mirror/commit/ab32baca7f7aeae441a139fa4e1f1ed666ba5409)** to **[1068baa](https://github.com/sagemath/sagetrac-mirror/commit/1068baa478b35940165b106a2c7d361256d88d85)**",
    "created_at": "2022-05-21T10:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355683",
    "user": "https://github.com/xcaruso"
}
```

Changed commit from **[ab32bac](https://github.com/sagemath/sagetrac-mirror/commit/ab32baca7f7aeae441a139fa4e1f1ed666ba5409)** to **[1068baa](https://github.com/sagemath/sagetrac-mirror/commit/1068baa478b35940165b106a2c7d361256d88d85)**



---

archive/issue_comments_355684.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nI'm getting the following warning when Sage starts:\n\n```\n/home/xcaruso/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/category.py:1592: UserWarning: CompleteDiscreteValuationRings.ParentMethods should not have a super class\n```\nSo I'm coming back to the previous version.",
    "created_at": "2022-06-02T09:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355684",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:62'>Comment 62:</a>
I'm getting the following warning when Sage starts:

```
/home/xcaruso/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/categories/category.py:1592: UserWarning: CompleteDiscreteValuationRings.ParentMethods should not have a super class
```
So I'm coming back to the previous version.



---

archive/issue_comments_355685.json:
```json
{
    "body": "Changed commit from **[1068baa](https://github.com/sagemath/sagetrac-mirror/commit/1068baa478b35940165b106a2c7d361256d88d85)** to **[2094339](https://github.com/sagemath/sagetrac-mirror/commit/2094339c2fcd4f26de9056193f199431c09b40f9)**",
    "created_at": "2022-06-02T09:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355685",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1068baa](https://github.com/sagemath/sagetrac-mirror/commit/1068baa478b35940165b106a2c7d361256d88d85)** to **[2094339](https://github.com/sagemath/sagetrac-mirror/commit/2094339c2fcd4f26de9056193f199431c09b40f9)**



---

archive/issue_comments_355686.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2094339c2fcd4f26de9056193f199431c09b40f9\">2094339</a></td><td><code>Revert \"Deduplicate code for complete discrete valuation rings and fields\"</code></td></tr></table>\n",
    "created_at": "2022-06-02T09:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355686",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:63'>Comment 63:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2094339c2fcd4f26de9056193f199431c09b40f9">2094339</a></td><td><code>Revert "Deduplicate code for complete discrete valuation rings and fields"</code></td></tr></table>




---

archive/issue_comments_355687.json:
```json
{
    "body": "Changed commit from **[2094339](https://github.com/sagemath/sagetrac-mirror/commit/2094339c2fcd4f26de9056193f199431c09b40f9)** to **[50520b6](https://github.com/sagemath/sagetrac-mirror/commit/50520b68c430047dad8c3702c0232c4531658ad8)**",
    "created_at": "2022-06-02T09:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355687",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2094339](https://github.com/sagemath/sagetrac-mirror/commit/2094339c2fcd4f26de9056193f199431c09b40f9)** to **[50520b6](https://github.com/sagemath/sagetrac-mirror/commit/50520b68c430047dad8c3702c0232c4531658ad8)**



---

archive/issue_comments_355688.json:
```json
{
    "body": "<a id='comment:64'>Comment 64:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50520b68c430047dad8c3702c0232c4531658ad8\">50520b6</a></td><td><code>do not use get_unsafe in py files</code></td></tr></table>\n",
    "created_at": "2022-06-02T09:38:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355688",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:64'>Comment 64:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50520b68c430047dad8c3702c0232c4531658ad8">50520b6</a></td><td><code>do not use get_unsafe in py files</code></td></tr></table>




---

archive/issue_comments_355689.json:
```json
{
    "body": "Changed branch from **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)** to **[u/saraedum/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/padic_hermite)**",
    "created_at": "2022-06-02T21:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355689",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)** to **[u/saraedum/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/padic_hermite)**



---

archive/issue_comments_355690.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6e1606e281dc6ec165c88c784a63e1aee20fafa\">e6e1606</a></td><td><code>Fix syntax error</code></td></tr></table>\n",
    "created_at": "2022-06-02T21:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355690",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:66'>Comment 66:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6e1606e281dc6ec165c88c784a63e1aee20fafa">e6e1606</a></td><td><code>Fix syntax error</code></td></tr></table>




---

archive/issue_comments_355691.json:
```json
{
    "body": "Changed commit from **[50520b6](https://github.com/sagemath/sagetrac-mirror/commit/50520b68c430047dad8c3702c0232c4531658ad8)** to **[e6e1606](https://github.com/sagemath/sagetrac-mirror/commit/e6e1606e281dc6ec165c88c784a63e1aee20fafa)**",
    "created_at": "2022-06-02T21:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355691",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[50520b6](https://github.com/sagemath/sagetrac-mirror/commit/50520b68c430047dad8c3702c0232c4531658ad8)** to **[e6e1606](https://github.com/sagemath/sagetrac-mirror/commit/e6e1606e281dc6ec165c88c784a63e1aee20fafa)**



---

archive/issue_comments_355692.json:
```json
{
    "body": "Changed branch from **[u/saraedum/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/padic_hermite)** to **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**",
    "created_at": "2022-06-02T22:20:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355692",
    "user": "https://github.com/xcaruso"
}
```

Changed branch from **[u/saraedum/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/padic_hermite)** to **[u/caruso/padic_hermite](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/padic_hermite)**



---

archive/issue_events_297775.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-08-09T06:40:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297775"
}
```



---

archive/issue_events_297776.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-08-09T06:40:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297776"
}
```



---

archive/issue_comments_355693.json:
```json
{
    "body": "<a id='comment:68'>Comment 68:</a>\nred branch => needs work\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26f0fd223edb143de3465f454e2dde5be1c06f9c\">26f0fd2</a></td><td><code>tests pass</code></td></tr></table>\n",
    "created_at": "2022-08-09T06:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355693",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:68'>Comment 68:</a>
red branch => needs work

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26f0fd223edb143de3465f454e2dde5be1c06f9c">26f0fd2</a></td><td><code>tests pass</code></td></tr></table>




---

archive/issue_comments_355694.json:
```json
{
    "body": "Changed commit from **[e6e1606](https://github.com/sagemath/sagetrac-mirror/commit/e6e1606e281dc6ec165c88c784a63e1aee20fafa)** to **[26f0fd2](https://github.com/sagemath/sagetrac-mirror/commit/26f0fd223edb143de3465f454e2dde5be1c06f9c)**",
    "created_at": "2022-08-09T06:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23486#issuecomment-355694",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[e6e1606](https://github.com/sagemath/sagetrac-mirror/commit/e6e1606e281dc6ec165c88c784a63e1aee20fafa)** to **[26f0fd2](https://github.com/sagemath/sagetrac-mirror/commit/26f0fd223edb143de3465f454e2dde5be1c06f9c)**



---

archive/issue_events_297777.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297777"
}
```



---

archive/issue_events_297778.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23486",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23486#event-297778"
}
```
