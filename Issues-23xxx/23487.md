# Issue 23487: Linear time implementation of Modular Decomposition for Undirected Graphs

archive/issues_023250.json:
```json
{
    "body": "This is aimed at providing linear time implementation for finding modular decomposition of undirected graphs, fixing the currently broken Sage's graph modular decomposition.\n\nCC:  @dimpase @dcoudert\n\nKeywords: modular decomposition, gsoc2017\n\nReviewer: David Coudert, Dima Pasechnik\n\nAuthor: Lokesh Jain\n\nBranch: 6688baca23cc0a066810180dd10acd8b5539dd8e\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23487\n\n",
    "closed_at": "2017-10-20T09:15:29Z",
    "created_at": "2017-07-20T06:02:37Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Linear time implementation of Modular Decomposition for Undirected Graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23487",
    "user": "https://github.com/lokeshj1703"
}
```
This is aimed at providing linear time implementation for finding modular decomposition of undirected graphs, fixing the currently broken Sage's graph modular decomposition.

CC:  @dimpase @dcoudert

Keywords: modular decomposition, gsoc2017

Reviewer: David Coudert, Dima Pasechnik

Author: Lokesh Jain

Branch: 6688baca23cc0a066810180dd10acd8b5539dd8e

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23487





---

archive/issue_comments_346253.json:
```json
{
    "body": "Changing keywords from \"modular decomposition\" to \"modular decomposition, GSOC 2017\".",
    "created_at": "2017-07-20T09:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346253",
    "user": "https://github.com/dimpase"
}
```

Changing keywords from "modular decomposition" to "modular decomposition, GSOC 2017".



---

archive/issue_comments_346254.json:
```json
{
    "body": "<a id='comment:1'></a>It will use the implementation from https://github.com/lokeshj1703/Undirected-Modular-Decomposition",
    "created_at": "2017-07-20T09:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346254",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>It will use the implementation from https://github.com/lokeshj1703/Undirected-Modular-Decomposition



---

archive/issue_comments_346255.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,4 @@\n-This ticket is related to GSOC 2017 and is aimed at providing linear time implementation for finding modular decomposition of undirected graphs.\n-\n-Keywords: modular decomposition\n+This is aimed at providing linear time implementation for finding modular decomposition of undirected graphs, fixing the currently broken Sage's graph modular decomposition.\n \n Author: Lokesh Jain\n \n``````\n",
    "created_at": "2017-07-20T09:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346255",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,4 @@
-This ticket is related to GSOC 2017 and is aimed at providing linear time implementation for finding modular decomposition of undirected graphs.
-
-Keywords: modular decomposition
+This is aimed at providing linear time implementation for finding modular decomposition of undirected graphs, fixing the currently broken Sage's graph modular decomposition.
 
 Author: Lokesh Jain
 
``````




---

archive/issue_comments_346256.json:
```json
{
    "body": "Changing type from task to defect.",
    "created_at": "2017-07-20T09:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346256",
    "user": "https://github.com/dimpase"
}
```

Changing type from task to defect.



---

archive/issue_comments_346257.json:
```json
{
    "body": "Changing keywords from \"modular decomposition, GSOC 2017\" to \"modular decomposition, gsoc2017\".",
    "created_at": "2017-07-20T09:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346257",
    "user": "https://github.com/dimpase"
}
```

Changing keywords from "modular decomposition, GSOC 2017" to "modular decomposition, gsoc2017".



---

archive/issue_comments_346258.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2017-07-25T19:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346258",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_346259.json:
```json
{
    "body": "<a id='comment:4'></a>Dear Lokesh,\n\nwhy have you removed file `modular_decomposition.pyx` ? You should put it back for the moment. There are dependencies and so I'm unable to compile sage with your patch.\n\nMany improvements are needed in your code that we will slowly address. Dima is certainly more expert than me in this. For instance:\n- Comments must be in 80 column mode. Some editors like emacs ease the formatting.\n- Prefer `# Nested module` to `#Nested module` to improve readability\n- You can also insert some empty lines in some code blocks to improve readability\n- `Returns True if ...` -> `Return True if ...`\n- You will also have to insert some `TESTS:` and `EXAMPLES:` blocks to illustrate the behavior of the methods, in particular for `modular_decomposition`, and for testing cases that could lead to errors.",
    "created_at": "2017-07-26T09:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346259",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>Dear Lokesh,

why have you removed file `modular_decomposition.pyx` ? You should put it back for the moment. There are dependencies and so I'm unable to compile sage with your patch.

Many improvements are needed in your code that we will slowly address. Dima is certainly more expert than me in this. For instance:
- Comments must be in 80 column mode. Some editors like emacs ease the formatting.
- Prefer `# Nested module` to `#Nested module` to improve readability
- You can also insert some empty lines in some code blocks to improve readability
- `Returns True if ...` -> `Return True if ...`
- You will also have to insert some `TESTS:` and `EXAMPLES:` blocks to illustrate the behavior of the methods, in particular for `modular_decomposition`, and for testing cases that could lead to errors.



---

archive/issue_comments_346260.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 dcoudert]:\n> Dear Lokesh,\n> \n> why have you removed file `modular_decomposition.pyx` ? You should put it back for the moment. There are dependencies and so I'm unable to compile sage with your patch.\n\n\nthis should be trivial to fix. Let's remove it now for good.",
    "created_at": "2017-07-26T09:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346260",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>Replying to [comment:4 dcoudert]:
> Dear Lokesh,
> 
> why have you removed file `modular_decomposition.pyx` ? You should put it back for the moment. There are dependencies and so I'm unable to compile sage with your patch.


this should be trivial to fix. Let's remove it now for good.



---

archive/issue_comments_346261.json:
```json
{
    "body": "<a id='comment:6'></a>this is the updates needed for Sage to build and run. modular_decomposition doctests in graph.py fail due to some format incompatibility of output of the new implementation.\nI'll leave it to Lokesh to fix, as well as the David's comments, naturally.\n\n---\nNew commits:",
    "created_at": "2017-07-26T10:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346261",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>this is the updates needed for Sage to build and run. modular_decomposition doctests in graph.py fail due to some format incompatibility of output of the new implementation.
I'll leave it to Lokesh to fix, as well as the David's comments, naturally.

---
New commits:



---

archive/issue_comments_346262.json:
```json
{
    "body": "<a id='comment:7'></a>Sorry for the late reply. I have started working on the updates. I will push the commit shortly.",
    "created_at": "2017-07-28T18:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346262",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:7'></a>Sorry for the late reply. I have started working on the updates. I will push the commit shortly.



---

archive/issue_comments_346263.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-29T10:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346264.json:
```json
{
    "body": "<a id='comment:9'></a>I have added a commit for improved readability in the code. This commit addresses first four issues pointed out by David. I will soon add a commit for including examples, test cases and for handling failure of doctests.",
    "created_at": "2017-07-29T10:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346264",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:9'></a>I have added a commit for improved readability in the code. This commit addresses first four issues pointed out by David. I will soon add a commit for including examples, test cases and for handling failure of doctests.



---

archive/issue_comments_346265.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-30T17:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346265",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346266.json:
```json
{
    "body": "<a id='comment:11'></a>I have added the commit for fixing the doctests and added the Tests and Examples for modular_decomposition function. Should I add the examples for other functions as well? Because most of the functions are called from modular_decomposition itself. \n\nFor the tests for modular_decomposition I have added the graph from Marc Tedder research paper and an example from the wikipedia modular decomposition page. Further I have added a series graph (Tetrahedral Graph).",
    "created_at": "2017-07-30T17:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346266",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:11'></a>I have added the commit for fixing the doctests and added the Tests and Examples for modular_decomposition function. Should I add the examples for other functions as well? Because most of the functions are called from modular_decomposition itself. 

For the tests for modular_decomposition I have added the graph from Marc Tedder research paper and an example from the wikipedia modular decomposition page. Further I have added a series graph (Tetrahedral Graph).



---

archive/issue_comments_346267.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-07T13:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346267",
    "user": "https://github.com/lokeshj1703"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_346268.json:
```json
{
    "body": "<a id='comment:13'></a>Is #13744 a duplicate of this?",
    "created_at": "2017-08-07T17:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346268",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:13'></a>Is #13744 a duplicate of this?



---

archive/issue_comments_346269.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 jmantysalo]:\n> Is #13744 a duplicate of this?\n\n\nYes, the latter can be closed as won't fix, with the fixing done here.",
    "created_at": "2017-08-10T10:11:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346269",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>Replying to [comment:13 jmantysalo]:
> Is #13744 a duplicate of this?


Yes, the latter can be closed as won't fix, with the fixing done here.



---

archive/issue_comments_346270.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-11T07:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346271.json:
```json
{
    "body": "<a id='comment:16'></a>As this is to be included in 8.1, the branch should be based on the current beta - as I just did in  1e6c92f.",
    "created_at": "2017-08-11T07:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346271",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>As this is to be included in 8.1, the branch should be based on the current beta - as I just did in  1e6c92f.



---

archive/issue_comments_346272.json:
```json
{
    "body": "<a id='comment:17'></a>I will clean up the import statements from `sage.*`. Specifically, there is a handy `import_statements()` command in Sage:\n\n```\nsage: import_statements('Graph')\nfrom sage.graphs.graph import Graph\n```\n\nimporting `from sage.all` instead is much less efficient.",
    "created_at": "2017-08-11T07:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346272",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>I will clean up the import statements from `sage.*`. Specifically, there is a handy `import_statements()` command in Sage:

```
sage: import_statements('Graph')
from sage.graphs.graph import Graph
```

importing `from sage.all` instead is much less efficient.



---

archive/issue_comments_346273.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-11T08:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346273",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346274.json:
```json
{
    "body": "<a id='comment:19'></a>Is there a function to create the quotient graph with the vertices being the max. modules? \n\nPlease also make it clear which functions are a part of the main algorithm, and which ones are only used for testing.\n\nPlease also add more `TEST` and `EXAMPLE`; e.g. the functions to compute `mu` certainly need tests.\nIn general, all the functions, except 1-liners, will need tests and docs.",
    "created_at": "2017-08-11T08:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346274",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>Is there a function to create the quotient graph with the vertices being the max. modules? 

Please also make it clear which functions are a part of the main algorithm, and which ones are only used for testing.

Please also add more `TEST` and `EXAMPLE`; e.g. the functions to compute `mu` certainly need tests.
In general, all the functions, except 1-liners, will need tests and docs.



---

archive/issue_comments_346275.json:
```json
{
    "body": "<a id='comment:20'></a>Some comments:\n- in class `Queue`, method `get` could return a `ValueError`. Isn't it more appropriate to directly raise an error? \n- in `form_module`, variable `flag` can be removed to use `while True:`\n- in `either_connected_or_not_connected`, use `graph.has_edge(u, v)` instead of `v in graph.neighbors(u)`\n- method `number_subtree` could be an internal method of `recursively_number_cocomponents`. Only used here and `number_subtree` is the recursive part\n- in `assembly`: `while not len(root[1]) == 1:` -> `while len(root[1]) != 1:` ?\n- in `update_comp_num`, instead of `tree` you could use `child`\n- in `get_vertex_in`: improve the description since the output block gives more details than the 1 line decription. Also, you don't need a recursive method here. You could rewrite it as\n\n```python\nwhile tree[0].node_type != NORMAL:\n    tree = tree[1][0]\nreturn tree[1][0]\n```\n- `if left_index - 1 >= 0:` -> `if left_index >= 1:`  ?\n- in `is_component_connected`, you don't need to convert explicitly `neighbor` to set. The `isdisjoint` accepts a `list` as input.\n- method `recurse_component` should be an internal method of `get_vertices`\n- in method `refine`: `for e in graph.edges_incident(v):` -> `for u in graph.neighbor_iterator(v): ` seems more appropriate. In fact, you can directly build the set `x` as `x = {u for u in graph.neighbor_iterator(v) if vertex_dist[u] != vertex_dist[v]}. You will then have to update the definition of `x` in the inputs of `maximal_subtrees_with_leaves_in_x`\n- in `maximal_subtrees_with_leaves_in_x`, instead of using `root[1][-1][0]` and `root[1][-2][1]`, why not creating first node `a`, filling it, add it to `root[1]`,  then creating node `b`, filling it and adding it to `root[1]` ?\n- Add one line description to methods `create_prime_node`, etc.\n- the test methods (`test_modular_decomposition`, etc.) should be move at the end of the file after a separator like `#=====================...` \n\n\nThe writing style in sagemath is to start methods with a 1 line description of the functionality, then a blank line, then a longer description of the functionality if needed. So\n\n```python\ndef recursively_number_cocomponents(tree, cocomp_num, by_type):\n    \"\"\"\n    Recursively number the nodes in the (co)components.\n\n    If the tree node_type is same as by_type then cocomp_num is incremented\n    before assigning to the subtree else entire tree is numbered by cocomp_num.\n\n    INPUTS:\n    \"\"\"\n```\n\nIt's a long patch to review...",
    "created_at": "2017-08-11T10:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346275",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>Some comments:
- in class `Queue`, method `get` could return a `ValueError`. Isn't it more appropriate to directly raise an error? 
- in `form_module`, variable `flag` can be removed to use `while True:`
- in `either_connected_or_not_connected`, use `graph.has_edge(u, v)` instead of `v in graph.neighbors(u)`
- method `number_subtree` could be an internal method of `recursively_number_cocomponents`. Only used here and `number_subtree` is the recursive part
- in `assembly`: `while not len(root[1]) == 1:` -> `while len(root[1]) != 1:` ?
- in `update_comp_num`, instead of `tree` you could use `child`
- in `get_vertex_in`: improve the description since the output block gives more details than the 1 line decription. Also, you don't need a recursive method here. You could rewrite it as

```python
while tree[0].node_type != NORMAL:
    tree = tree[1][0]
return tree[1][0]
```
- `if left_index - 1 >= 0:` -> `if left_index >= 1:`  ?
- in `is_component_connected`, you don't need to convert explicitly `neighbor` to set. The `isdisjoint` accepts a `list` as input.
- method `recurse_component` should be an internal method of `get_vertices`
- in method `refine`: `for e in graph.edges_incident(v):` -> `for u in graph.neighbor_iterator(v): ` seems more appropriate. In fact, you can directly build the set `x` as `x = {u for u in graph.neighbor_iterator(v) if vertex_dist[u] != vertex_dist[v]}. You will then have to update the definition of `x` in the inputs of `maximal_subtrees_with_leaves_in_x`
- in `maximal_subtrees_with_leaves_in_x`, instead of using `root[1][-1][0]` and `root[1][-2][1]`, why not creating first node `a`, filling it, add it to `root[1]`,  then creating node `b`, filling it and adding it to `root[1]` ?
- Add one line description to methods `create_prime_node`, etc.
- the test methods (`test_modular_decomposition`, etc.) should be move at the end of the file after a separator like `#=====================...` 


The writing style in sagemath is to start methods with a 1 line description of the functionality, then a blank line, then a longer description of the functionality if needed. So

```python
def recursively_number_cocomponents(tree, cocomp_num, by_type):
    """
    Recursively number the nodes in the (co)components.

    If the tree node_type is same as by_type then cocomp_num is incremented
    before assigning to the subtree else entire tree is numbered by cocomp_num.

    INPUTS:
    """
```

It's a long patch to review...



---

archive/issue_comments_346276.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:19 dimpase]:\n> Is there a function to create the quotient graph with the vertices being the max. modules? \n\n\nCurrently there is no function which creates a quotient graph with the vertices being the maximal modules. I can create such a function though?\n> Please also make it clear which functions are a part of the main algorithm, and which ones are only used for testing.\n\nDavid has asked me to move the test functions at the end after a separator, it will solve this problem.\n> Please also add more `TEST` and `EXAMPLE`; e.g. the functions to compute `mu` certainly need tests.\n> In general, all the functions, except 1-liners, will need tests and docs.\n\nI will definitely add more TESTS and EXAMPLES. It might take some time as each function requires some arguments mostly a tree or a module. I will need to input that manually.\n\nThanks for fixing the import and copyright!",
    "created_at": "2017-08-11T17:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346276",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:21'></a>Replying to [comment:19 dimpase]:
> Is there a function to create the quotient graph with the vertices being the max. modules? 


Currently there is no function which creates a quotient graph with the vertices being the maximal modules. I can create such a function though?
> Please also make it clear which functions are a part of the main algorithm, and which ones are only used for testing.

David has asked me to move the test functions at the end after a separator, it will solve this problem.
> Please also add more `TEST` and `EXAMPLE`; e.g. the functions to compute `mu` certainly need tests.
> In general, all the functions, except 1-liners, will need tests and docs.

I will definitely add more TESTS and EXAMPLES. It might take some time as each function requires some arguments mostly a tree or a module. I will need to input that manually.

Thanks for fixing the import and copyright!



---

archive/issue_comments_346277.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:20 dcoudert]:\n\nThanks for reviewing the patch! I will make the changes and add a commit soon.",
    "created_at": "2017-08-12T15:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346277",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:22'></a>Replying to [comment:20 dcoudert]:

Thanks for reviewing the patch! I will make the changes and add a commit soon.



---

archive/issue_comments_346278.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-13T08:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346279.json:
```json
{
    "body": "<a id='comment:24'></a>It is much better now. Some more comments.\n\n- on the left hand side, you don't need to write `[a,b] = [1,2]`. You can directly write `a,b = [1,2]`\n\n- You can permute variables without intermediate variable as `a,b = b,a`\n\n- in method `__str__`, you don't need variable `string`. You can directly return the result.\n\n- in the EXAMPLES block of `modular_decomposition`, you must put `::` at the end of the sub blocks instead of `:`. This is for the html documentation.\n\n- Some of the examples in the TESTS block of `modular_decomposition` could be in the EXAMPLES block. Also, can you add sub blocks with indication on the origin of the tested graphs ?\n\n- Then, can you have tests for bad inputs in `modular_decomposition`, like directed graph, etc. i.e., the raise error stuff\n\n- I have an identation issue with the `\"\"\"` before the code\n\n- in `compute_mu_for_co_component`: You don't need the intermediate variable `mu_for_co_component`.\n\n- in `compute_mu_for_component`: why not using `range(source_index-1, -1, -1)` and returning the first found value ?\n\n- method `recursive_print_md_tree` could be an internal method of `print_md_tree`. Also, instead of using `level`, you could directly pass a string as parameter, `recursive_print_md_tree(tree, level + \"   \")`. Last, use `print(\"{}{}\".format(level,str(root[0])))` for Python 3 compatibility.",
    "created_at": "2017-08-13T10:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346279",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:24'></a>It is much better now. Some more comments.

- on the left hand side, you don't need to write `[a,b] = [1,2]`. You can directly write `a,b = [1,2]`

- You can permute variables without intermediate variable as `a,b = b,a`

- in method `__str__`, you don't need variable `string`. You can directly return the result.

- in the EXAMPLES block of `modular_decomposition`, you must put `::` at the end of the sub blocks instead of `:`. This is for the html documentation.

- Some of the examples in the TESTS block of `modular_decomposition` could be in the EXAMPLES block. Also, can you add sub blocks with indication on the origin of the tested graphs ?

- Then, can you have tests for bad inputs in `modular_decomposition`, like directed graph, etc. i.e., the raise error stuff

- I have an identation issue with the `"""` before the code

- in `compute_mu_for_co_component`: You don't need the intermediate variable `mu_for_co_component`.

- in `compute_mu_for_component`: why not using `range(source_index-1, -1, -1)` and returning the first found value ?

- method `recursive_print_md_tree` could be an internal method of `print_md_tree`. Also, instead of using `level`, you could directly pass a string as parameter, `recursive_print_md_tree(tree, level + "   ")`. Last, use `print("{}{}".format(level,str(root[0])))` for Python 3 compatibility.



---

archive/issue_comments_346280.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 dcoudert]:\n\n> - I have an identation issue with the `\"\"\"` before the code\n\n\nI could not understand which `\"\"\"` you are talking about? Is it the one in the beginning? Is the indentation issue in the doc build?\n>\n>- in `compute_mu_for_component`: why not using `range(source_index-1, -1, -1)` and returning the first found value ?\n\n\n\n```\n  if mu_for_component == root[1][index] and \\\n```\n\nSuppose [c01, c02, c03, source, c1, c2, c3] is the forest. If mu value for c2 is c03 then c01 and c02 must be connected to c2. Therefore the iteration from 0 is required.\n\nI have incorporated the other changes and will add a commit for it.",
    "created_at": "2017-08-13T15:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346280",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:25'></a>Replying to [comment:24 dcoudert]:

> - I have an identation issue with the `"""` before the code


I could not understand which `"""` you are talking about? Is it the one in the beginning? Is the indentation issue in the doc build?
>
>- in `compute_mu_for_component`: why not using `range(source_index-1, -1, -1)` and returning the first found value ?



```
  if mu_for_component == root[1][index] and \
```

Suppose [c01, c02, c03, source, c1, c2, c3] is the forest. If mu value for c2 is c03 then c01 and c02 must be connected to c2. Therefore the iteration from 0 is required.

I have incorporated the other changes and will add a commit for it.



---

archive/issue_comments_346281.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-13T15:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346282.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:25 jlokesh]:\n> Replying to [comment:24 dcoudert]:\n> \n> > - I have an identation issue with the `\"\"\"` before the code\n \n> \n> I could not understand which `\"\"\"` you are talking about? Is it the one in the beginning? Is the indentation issue in the doc build?\n\n \nThe one before `if graph._directed`.\n \nNote that it is better to use `if graph.is_directed()` ;)",
    "created_at": "2017-08-13T16:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346282",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:27'></a>Replying to [comment:25 jlokesh]:
> Replying to [comment:24 dcoudert]:
> 
> > - I have an identation issue with the `"""` before the code
 
> 
> I could not understand which `"""` you are talking about? Is it the one in the beginning? Is the indentation issue in the doc build?

 
The one before `if graph._directed`.
 
Note that it is better to use `if graph.is_directed()` ;)



---

archive/issue_comments_346283.json:
```json
{
    "body": "<a id='comment:28'></a>When you add a link to a wikipedia page, the nice way to do it is: `:wikipedia:`Modular_decomposition``.",
    "created_at": "2017-08-13T16:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346283",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:28'></a>When you add a link to a wikipedia page, the nice way to do it is: `:wikipedia:`Modular_decomposition``.



---

archive/issue_comments_346284.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:27 dcoudert]:\n\n> The one before `if graph._directed`.\n>  \n> Note that it is better to use `if graph.is_directed()` ;)\n\n\nFound it. :) I will include these changes in the next commit along with TESTS and EXAMPLES for other functions.",
    "created_at": "2017-08-13T16:54:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346284",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:29'></a>Replying to [comment:27 dcoudert]:

> The one before `if graph._directed`.
>  
> Note that it is better to use `if graph.is_directed()` ;)


Found it. :) I will include these changes in the next commit along with TESTS and EXAMPLES for other functions.



---

archive/issue_comments_346285.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-15T18:11:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346285",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346286.json:
```json
{
    "body": "<a id='comment:31'></a>Out of curiosity, have you considered using `collections.dequeue` instead of making your own (inefficient) `Queue` class?\n\nhttps://wiki.python.org/moin/TimeComplexity",
    "created_at": "2017-08-15T20:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346286",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:31'></a>Out of curiosity, have you considered using `collections.dequeue` instead of making your own (inefficient) `Queue` class?

https://wiki.python.org/moin/TimeComplexity



---

archive/issue_comments_346287.json:
```json
{
    "body": "<a id='comment:32'></a>I was not aware of this data structure. It's certainly what we need here.",
    "created_at": "2017-08-16T09:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346287",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:32'></a>I was not aware of this data structure. It's certainly what we need here.



---

archive/issue_comments_346288.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-16T13:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346288",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346289.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-16T19:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346289",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346290.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-08-16T19:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_346291.json:
```json
{
    "body": "<a id='comment:36'></a>`@`Dima: in the output of `modular_decomposition` we have `PRIME`, `PARALLEL`, `SERIES`, etc. wouldn't be better to have strings as before ?\n\n`@`Lokesh: how difficult would it be to build the graph of the modular decomposition? I mean a graph in which for instance would keep a single vertex instead of twins.",
    "created_at": "2017-08-21T13:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346291",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:36'></a>`@`Dima: in the output of `modular_decomposition` we have `PRIME`, `PARALLEL`, `SERIES`, etc. wouldn't be better to have strings as before ?

`@`Lokesh: how difficult would it be to build the graph of the modular decomposition? I mean a graph in which for instance would keep a single vertex instead of twins.



---

archive/issue_comments_346292.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:36 dcoudert]:\n> `@`Dima: in the output of `modular_decomposition` we have `PRIME`, `PARALLEL`, `SERIES`, etc. wouldn't be better to have strings as before ?\n\n\nIt's a good idea to document what these PRIME, etc., stand for from Python point of view.\nAre they some kind of constants?\n> \n> `@`Lokesh: how difficult would it be to build the graph of the modular decomposition? I mean a graph in which for instance would keep a single vertex instead of twins.\n\n\nIMHO it's a question of constructing the induced subgraph, with vertices taken to be\na transversal of the corresponding modules. (Thus it's easy, but should be provided, perhaps on a followup ticket).",
    "created_at": "2017-08-21T14:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346292",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>Replying to [comment:36 dcoudert]:
> `@`Dima: in the output of `modular_decomposition` we have `PRIME`, `PARALLEL`, `SERIES`, etc. wouldn't be better to have strings as before ?


It's a good idea to document what these PRIME, etc., stand for from Python point of view.
Are they some kind of constants?
> 
> `@`Lokesh: how difficult would it be to build the graph of the modular decomposition? I mean a graph in which for instance would keep a single vertex instead of twins.


IMHO it's a question of constructing the induced subgraph, with vertices taken to be
a transversal of the corresponding modules. (Thus it's easy, but should be provided, perhaps on a followup ticket).



---

archive/issue_comments_346293.json:
```json
{
    "body": "<a id='comment:38'></a>Another remark about the implementation. I find it strange that you create a `NodeInfo` class but don't go all the way creating a structure for your modular decomposition.\n\nI would just add a member `NodeInfo.children` beeing a list of `NodeInfo`s and rename this `NodeInfo` into something catchier.\nThis would e.g. change\n\n```sage\nfor tree in root[1]:\n    if tree[0].node_type == NORMAL and tree[1][0] in vertex_status\n    ...\n```\ninto the more expressive\n\n```sage\nfor node in root.children:\n    if node.node_type == NORMAL and node.children[0] in vertex_status\n    ...\n```",
    "created_at": "2017-08-21T16:08:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346293",
    "user": "https://trac.sagemath.org/admin/accounts/users/ylchapuy"
}
```

<a id='comment:38'></a>Another remark about the implementation. I find it strange that you create a `NodeInfo` class but don't go all the way creating a structure for your modular decomposition.

I would just add a member `NodeInfo.children` beeing a list of `NodeInfo`s and rename this `NodeInfo` into something catchier.
This would e.g. change

```sage
for tree in root[1]:
    if tree[0].node_type == NORMAL and tree[1][0] in vertex_status
    ...
```
into the more expressive

```sage
for node in root.children:
    if node.node_type == NORMAL and node.children[0] in vertex_status
    ...
```



---

archive/issue_comments_346294.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:37 dimpase]:\n> It's a good idea to document what these PRIME, etc., stand for from Python point of view.\n> Are they some kind of constants?\n\nYes, these are constants. I have documented them in the `NodeInfo` class under the data attribute `node_type` where they are mostly used. I can even convert them into an enum which can have proper documentation?",
    "created_at": "2017-08-21T16:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346294",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:39'></a>Replying to [comment:37 dimpase]:
> It's a good idea to document what these PRIME, etc., stand for from Python point of view.
> Are they some kind of constants?

Yes, these are constants. I have documented them in the `NodeInfo` class under the data attribute `node_type` where they are mostly used. I can even convert them into an enum which can have proper documentation?



---

archive/issue_comments_346295.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:38 ylchapuy]:\n\nI agree with you. It makes much more sense like that. If Dima and David agree I can work on that as well? It might take a lot of time as it requires a lot of changes.",
    "created_at": "2017-08-21T16:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346295",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:40'></a>Replying to [comment:38 ylchapuy]:

I agree with you. It makes much more sense like that. If Dima and David agree I can work on that as well? It might take a lot of time as it requires a lot of changes.



---

archive/issue_comments_346296.json:
```json
{
    "body": "<a id='comment:41'></a>I agree. It would be cleaner.\n\nReplying to [comment:40 jlokesh]:\n> Replying to [comment:38 ylchapuy]:\n> \n> I agree with you. It makes much more sense like that. If Dima and David agree I can work on that as well? It might take a lot of time as it requires a lot of changes.",
    "created_at": "2017-08-21T17:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346296",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:41'></a>I agree. It would be cleaner.

Replying to [comment:40 jlokesh]:
> Replying to [comment:38 ylchapuy]:
> 
> I agree with you. It makes much more sense like that. If Dima and David agree I can work on that as well? It might take a lot of time as it requires a lot of changes.



---

archive/issue_comments_346297.json:
```json
{
    "body": "<a id='comment:42'></a>Can you check the result for a graph with a single vertex.\n\n```\nsage: print G.modular_decomposition()\n()\nsage: G = Graph(2)\nsage: print G.modular_decomposition()\n(PARALLEL, [0, 1])\nsage: G = Graph(1)\nsage: print G.modular_decomposition()\n0\n```\n\nAlso, unify \"Series\" / \"SERIES\", etc. in the documentation of the modular decomposition method in `graph.py`.",
    "created_at": "2017-09-04T14:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346297",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:42'></a>Can you check the result for a graph with a single vertex.

```
sage: print G.modular_decomposition()
()
sage: G = Graph(2)
sage: print G.modular_decomposition()
(PARALLEL, [0, 1])
sage: G = Graph(1)
sage: print G.modular_decomposition()
0
```

Also, unify "Series" / "SERIES", etc. in the documentation of the modular decomposition method in `graph.py`.



---

archive/issue_comments_346298.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:42 dcoudert]:\n> Can you check the result for a graph with a single vertex.\n\nFor a single vertex it returns the vertex itself. \n> Also, unify \"Series\" / \"SERIES\", etc. in the documentation of the modular decomposition method in `graph.py`.\n\nI will handle it in the next commit.",
    "created_at": "2017-09-04T17:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346298",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:43'></a>Replying to [comment:42 dcoudert]:
> Can you check the result for a graph with a single vertex.

For a single vertex it returns the vertex itself. 
> Also, unify "Series" / "SERIES", etc. in the documentation of the modular decomposition method in `graph.py`.

I will handle it in the next commit.



---

archive/issue_comments_346299.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-04T19:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346299",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346300.json:
```json
{
    "body": "<a id='comment:45'></a>I have changed the NodeInfo class to Node class in this commit and introduced a children field in this class. The constants like PARALLEL, LEFT_SPLIT... defined in the file have been added in an enumeration class. Further as pointed out by David the singleton should be treated as PRIME module. Therefore I have made the appropriate changes in the modular_decomposition and is_prime function of graph.py. \n\nThere are changes required in the Algorithm and References section of the modular_decomposition function of the graph.py. I will make those along with the revisions.",
    "created_at": "2017-09-04T19:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346300",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:45'></a>I have changed the NodeInfo class to Node class in this commit and introduced a children field in this class. The constants like PARALLEL, LEFT_SPLIT... defined in the file have been added in an enumeration class. Further as pointed out by David the singleton should be treated as PRIME module. Therefore I have made the appropriate changes in the modular_decomposition and is_prime function of graph.py. 

There are changes required in the Algorithm and References section of the modular_decomposition function of the graph.py. I will make those along with the revisions.



---

archive/issue_comments_346301.json:
```json
{
    "body": "<a id='comment:46'></a>That's much better now.\n\nOne question: how difficult is it to build a graph from the modular decomposition ? In such graph, twins are merged into a single node with as label the `Set` of merged nodes (see e.g., the result of treewidth).\n\nThere is no need to do it in this ticket. It could be postpone to a future ticket.",
    "created_at": "2017-09-05T09:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346301",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:46'></a>That's much better now.

One question: how difficult is it to build a graph from the modular decomposition ? In such graph, twins are merged into a single node with as label the `Set` of merged nodes (see e.g., the result of treewidth).

There is no need to do it in this ticket. It could be postpone to a future ticket.



---

archive/issue_comments_346302.json:
```json
{
    "body": "<a id='comment:47'></a>I am not able to find any resource on building graphs from modular decomposition. I am assuming we are trying to build a graph given a modular decomposition. Please correct me if I am wrong. If so I have a doubt about it being possible. If we consider this example-:\n\n```\n    g = Graph(5)\n    g.add_edge(0,1)\n    g.add_edge(1,2)\n    g.add_edge(2,3)\n    g.add_edge(4,3)\n    g.add_edge(1,3)\n    g.modular_decomposition()\n```\n\n```\n(PRIME, [1, 0, 2, 3, 4])\n```\n\n\nand if we remove the edge (1,3) from it and then find the modular decomposition. Then also the result is same.",
    "created_at": "2017-09-05T18:08:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346302",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:47'></a>I am not able to find any resource on building graphs from modular decomposition. I am assuming we are trying to build a graph given a modular decomposition. Please correct me if I am wrong. If so I have a doubt about it being possible. If we consider this example-:

```
    g = Graph(5)
    g.add_edge(0,1)
    g.add_edge(1,2)
    g.add_edge(2,3)
    g.add_edge(4,3)
    g.add_edge(1,3)
    g.modular_decomposition()
```

```
(PRIME, [1, 0, 2, 3, 4])
```


and if we remove the edge (1,3) from it and then find the modular decomposition. Then also the result is same.



---

archive/issue_comments_346303.json:
```json
{
    "body": "<a id='comment:48'></a>You are right, a proper definition is needed and I don't know any. So nothing to do.",
    "created_at": "2017-09-06T09:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346303",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:48'></a>You are right, a proper definition is needed and I don't know any. So nothing to do.



---

archive/issue_comments_346304.json:
```json
{
    "body": "<a id='comment:49'></a>I thin you can define a graph on the immediate descendants of the module of all the vertices; these are the proper maximal strong modules of the graph. As as example from Wikipedia, see\n![](https://upload.wikimedia.org/wikipedia/en/thumb/7/74/ModularDecomposition.png/600px-ModularDecomposition.png)\n\nhere the original graph is at top left corner, and the graph I am talking about is shown on the right from the root note [1,...,11] of the modular decomposition tree at the bottom left part.",
    "created_at": "2017-09-06T13:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346304",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>I thin you can define a graph on the immediate descendants of the module of all the vertices; these are the proper maximal strong modules of the graph. As as example from Wikipedia, see
![](https://upload.wikimedia.org/wikipedia/en/thumb/7/74/ModularDecomposition.png/600px-ModularDecomposition.png)

here the original graph is at top left corner, and the graph I am talking about is shown on the right from the root note [1,...,11] of the modular decomposition tree at the bottom left part.



---

archive/issue_comments_346305.json:
```json
{
    "body": "<a id='comment:50'></a>Parallel module is easy to build into a graph. Series and Prime module are formed if the induced subgraph is connected but they can not tell how this graph is connected or what edges are there and what are not. As illustrated by example in comment 47.",
    "created_at": "2017-09-07T07:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346305",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:50'></a>Parallel module is easy to build into a graph. Series and Prime module are formed if the induced subgraph is connected but they can not tell how this graph is connected or what edges are there and what are not. As illustrated by example in comment 47.



---

archive/issue_comments_346306.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:50 jlokesh]:\n> Parallel module is easy to build into a graph. Series and Prime module are formed if the induced subgraph is connected but they can not tell how this graph is connected or what edges are there and what are not. As illustrated by example in comment 47.\n\n\nIt is irrelevant what happens inside each module, for the vertices of each module used to construct the new graph will be merged into one. What's important is how modules are connected among each other. In the example in comment 47 the graph in question will have just one vertex (or perhaps it should be empty graph, but that's a very minor issue).",
    "created_at": "2017-09-07T08:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346306",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'></a>Replying to [comment:50 jlokesh]:
> Parallel module is easy to build into a graph. Series and Prime module are formed if the induced subgraph is connected but they can not tell how this graph is connected or what edges are there and what are not. As illustrated by example in comment 47.


It is irrelevant what happens inside each module, for the vertices of each module used to construct the new graph will be merged into one. What's important is how modules are connected among each other. In the example in comment 47 the graph in question will have just one vertex (or perhaps it should be empty graph, but that's a very minor issue).



---

archive/issue_comments_346307.json:
```json
{
    "body": "<a id='comment:52'></a>to clarify: I am talking about the quotient graph I started talking in comment 19, and you mentioned in comment 21.",
    "created_at": "2017-09-07T08:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346307",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:52'></a>to clarify: I am talking about the quotient graph I started talking in comment 19, and you mentioned in comment 21.



---

archive/issue_comments_346308.json:
```json
{
    "body": "<a id='comment:53'></a>In `graph.py`:\n- `if self.order() == 0 or self.order() == 1:` -> `if self.order() <= 1:`\n\nIn `modular_decomposition.py`:\n\n- Why are you defining the string representation of class `NodeType` ? I think it is not used and `self.name` is not assigned here. And why not for class `NodeSplit`.\n\n- I the test `Graph from wikipedia link :wikipedia:`Modular_decomposition`::``, you must change `sage: g = Graph(d)` to `sage: g = Graph(d2)`.",
    "created_at": "2017-09-07T09:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346308",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:53'></a>In `graph.py`:
- `if self.order() == 0 or self.order() == 1:` -> `if self.order() <= 1:`

In `modular_decomposition.py`:

- Why are you defining the string representation of class `NodeType` ? I think it is not used and `self.name` is not assigned here. And why not for class `NodeSplit`.

- I the test `Graph from wikipedia link :wikipedia:`Modular_decomposition`::``, you must change `sage: g = Graph(d)` to `sage: g = Graph(d2)`.



---

archive/issue_comments_346309.json:
```json
{
    "body": "<a id='comment:54'></a>Replying to [comment:52 dimpase]:\n> to clarify: I am talking about the quotient graph I started talking in comment 19, and you mentioned in comment 21.\n\n\nThat is not a problem then. Only thing to discuss would be the structure of quotient graph. Should the children have a pointer to quotient graphs they represent(the maximal modules). In such a case the structure would be same as the one on the top right portion of the image you shared.",
    "created_at": "2017-09-07T18:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346309",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:54'></a>Replying to [comment:52 dimpase]:
> to clarify: I am talking about the quotient graph I started talking in comment 19, and you mentioned in comment 21.


That is not a problem then. Only thing to discuss would be the structure of quotient graph. Should the children have a pointer to quotient graphs they represent(the maximal modules). In such a case the structure would be same as the one on the top right portion of the image you shared.



---

archive/issue_comments_346310.json:
```json
{
    "body": "<a id='comment:55'></a>Replying to [comment:53 dcoudert]:\n> - Why are you defining the string representation of class `NodeType` ? I think it is not used and `self.name` is not assigned here. And why not for class `NodeSplit`.\n \nIt is used in graph.py for printing the module type.\n\n```\nrelabel = lambda x : (x.node_type, [relabel(_) for _ in x.children]) if x.node_type != NodeType.NORMAL else id_label[x.children[0]]\n```\nHere x.node_type is an object of NodeType class. For NodeType.PARALLEL it would be PARALLEL.",
    "created_at": "2017-09-07T19:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346310",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:55'></a>Replying to [comment:53 dcoudert]:
> - Why are you defining the string representation of class `NodeType` ? I think it is not used and `self.name` is not assigned here. And why not for class `NodeSplit`.
 
It is used in graph.py for printing the module type.

```
relabel = lambda x : (x.node_type, [relabel(_) for _ in x.children]) if x.node_type != NodeType.NORMAL else id_label[x.children[0]]
```
Here x.node_type is an object of NodeType class. For NodeType.PARALLEL it would be PARALLEL.



---

archive/issue_comments_346311.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-18T18:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346311",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346312.json:
```json
{
    "body": "<a id='comment:57'></a>I have made some changes to the documentation of modular_decomposition function in graph.py. Please review it.",
    "created_at": "2017-09-18T18:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346312",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:57'></a>I have made some changes to the documentation of modular_decomposition function in graph.py. Please review it.



---

archive/issue_comments_346313.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-18T21:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346313",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346314.json:
```json
{
    "body": "<a id='comment:59'></a>You have removed the reference `HabPau10`. It should stay, as it is a recent\nsurvey paper on the topic, in fact, newer than `TedCorHabPaul08`.\nAlso, note that this reference is still used in the text, and as a result docs don't build any more. \n\nPerhaps it's time that you should check docs for building, before pushing in changes to them :-)\n\nAnyhow, I'm putting the reference back.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|\n|[32ff8db](https://git.sagemath.org/sage.git/commit?id=32ff8dbf9b482b18bdd312b3d0749b9b06c48441)|`Merge branch 'public/gsoc17_t23487' of trac.sagemath.org:sage into modde`|\n|[c9af7d6](https://git.sagemath.org/sage.git/commit?id=c9af7d6af605bbbc6418bc2f96a7e62f709d1849)|`putting HabPau10 back in; docs build now`|\n---\nNew commits:",
    "created_at": "2017-09-18T21:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346314",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:59'></a>You have removed the reference `HabPau10`. It should stay, as it is a recent
survey paper on the topic, in fact, newer than `TedCorHabPaul08`.
Also, note that this reference is still used in the text, and as a result docs don't build any more. 

Perhaps it's time that you should check docs for building, before pushing in changes to them :-)

Anyhow, I'm putting the reference back.

---
New commits:
|                                                                                                                                          |                                                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
|[32ff8db](https://git.sagemath.org/sage.git/commit?id=32ff8dbf9b482b18bdd312b3d0749b9b06c48441)|`Merge branch 'public/gsoc17_t23487' of trac.sagemath.org:sage into modde`|
|[c9af7d6](https://git.sagemath.org/sage.git/commit?id=c9af7d6af605bbbc6418bc2f96a7e62f709d1849)|`putting HabPau10 back in; docs build now`|
---
New commits:



---

archive/issue_comments_346315.json:
```json
{
    "body": "<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-18T21:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346315",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346316.json:
```json
{
    "body": "<a id='comment:61'></a>as you can see from patchbot's [output](https://patchbot.sagemath.org/log/23487/Ubuntu/15.10/x86_64/3.13.0-123-generic/sagemath-patchbot-docker/2017-09-18%2023:04:51?plugin=coverage&diff=/log/0/Ubuntu/15.10/x86_64/3.13.0-123-generic/sagemath-patchbot-docker/2017-09-11%2020%3A02%3A45&ticket=23487&base=8.1.beta5), about 20 functions miss doctests.",
    "created_at": "2017-09-18T23:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346316",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:61'></a>as you can see from patchbot's [output](https://patchbot.sagemath.org/log/23487/Ubuntu/15.10/x86_64/3.13.0-123-generic/sagemath-patchbot-docker/2017-09-18%2023:04:51?plugin=coverage&diff=/log/0/Ubuntu/15.10/x86_64/3.13.0-123-generic/sagemath-patchbot-docker/2017-09-11%2020%3A02%3A45&ticket=23487&base=8.1.beta5), about 20 functions miss doctests.



---

archive/issue_comments_346317.json:
```json
{
    "body": "<a id='comment:62'></a>Replying to [comment:59 dimpase]:\n> Perhaps it's time that you should check docs for building, before pushing in changes to them :-)\n\n\nThanks for fixing it. Will check it next time :-)",
    "created_at": "2017-09-19T18:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346317",
    "user": "https://github.com/lokeshj1703"
}
```

<a id='comment:62'></a>Replying to [comment:59 dimpase]:
> Perhaps it's time that you should check docs for building, before pushing in changes to them :-)


Thanks for fixing it. Will check it next time :-)



---

archive/issue_comments_346318.json:
```json
{
    "body": "<a id='comment:63'></a>So, how about adding missing tests?\nIt's basically just adding temporary print() statements into functions with missing doctests, recoding the results of printing for an example run, and converting these into\ndoctests.\n\nIf you are too busy now, I can do this, I don't want to sit on this ticket for too long...",
    "created_at": "2017-09-24T19:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346318",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'></a>So, how about adding missing tests?
It's basically just adding temporary print() statements into functions with missing doctests, recoding the results of printing for an example run, and converting these into
doctests.

If you are too busy now, I can do this, I don't want to sit on this ticket for too long...



---

archive/issue_comments_346319.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-28T17:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_346320.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-15T21:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346320",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_346321.json:
```json
{
    "body": "<a id='comment:65'></a>I missed that update - only comments are emailed to me, no commit notifications.\n\nLooks good to me.",
    "created_at": "2017-10-15T21:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346321",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:65'></a>I missed that update - only comments are emailed to me, no commit notifications.

Looks good to me.



---

archive/issue_comments_346322.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-20T09:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23487#issuecomment-346322",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060267.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-20T09:15:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23487",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23487#event-60267"
}
```
