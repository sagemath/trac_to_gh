# Issue 23173: Remove Element._cache_key()

archive/issues_022936.json:
```json
{
    "body": "Arguably, `str(self)` is not a good default to identify objects. It often does the right thing, but it also causes trouble when objects print the same, are `==` but are not indistinguishable (and should therefore not be identified in caches.)\nIt seems to be better to require people to actually implement `_cache_key` explicitly, just like they have to implement `__hash__` explicitly now. (see #19016.)\n\nIn this ticket, we want to see how terrible removal of the default implementation would be.\n\nKeywords: sd86.5, sd87, padicIMA\n\nAuthor: Julian R\u00fcth\n\nBranch: public/23173\n\nStatus: new\n\nCommit: 9c48949002a7696853526b3cabbc2e087cc710ec\n\nIssue created by migration from https://trac.sagemath.org/ticket/23173\n\n",
    "created_at": "2017-06-07T22:51:57Z",
    "labels": [
        "component: refactoring",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Remove Element._cache_key()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23173",
    "user": "https://github.com/saraedum"
}
```
Arguably, `str(self)` is not a good default to identify objects. It often does the right thing, but it also causes trouble when objects print the same, are `==` but are not indistinguishable (and should therefore not be identified in caches.)
It seems to be better to require people to actually implement `_cache_key` explicitly, just like they have to implement `__hash__` explicitly now. (see #19016.)

In this ticket, we want to see how terrible removal of the default implementation would be.

Keywords: sd86.5, sd87, padicIMA

Author: Julian RÃ¼th

Branch: public/23173

Status: new

Commit: 9c48949002a7696853526b3cabbc2e087cc710ec

Issue created by migration from https://trac.sagemath.org/ticket/23173





---

archive/issue_comments_341616.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2017-06-07T22:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341616",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_341617.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,7 @@\n Arguably, `str(self)` is not a good default to identify objects. It often does the right thing, but it also causes trouble when objects print the same, are `==` but are not indistinguishable (and should therefore not be identified in caches.)\n-It seems to be better to require people to actually implement `_cache_key` explicitly, just like they have to implement `__hash__` explicitly now.\n+It seems to be better to require people to actually implement `_cache_key` explicitly, just like they have to implement `__hash__` explicitly now. (see #19016.)\n \n In this ticket, we want to see how terrible removal of the default implementation would be.\n-\n-Keywords: sd86.5\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-06-07T23:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341617",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,7 @@
 Arguably, `str(self)` is not a good default to identify objects. It often does the right thing, but it also causes trouble when objects print the same, are `==` but are not indistinguishable (and should therefore not be identified in caches.)
-It seems to be better to require people to actually implement `_cache_key` explicitly, just like they have to implement `__hash__` explicitly now.
+It seems to be better to require people to actually implement `_cache_key` explicitly, just like they have to implement `__hash__` explicitly now. (see #19016.)
 
 In this ticket, we want to see how terrible removal of the default implementation would be.
-
-Keywords: sd86.5
 
 Comment: 1
 
``````




---

archive/issue_comments_341618.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to refactoring.",
    "created_at": "2017-06-09T22:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341618",
    "user": "https://github.com/saraedum"
}
```

Changing component from PLEASE CHANGE to refactoring.



---

archive/issue_comments_341619.json:
```json
{
    "body": "Changing keywords from \"sd86.5\" to \"sd86.5, sd87\".",
    "created_at": "2017-07-17T21:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341619",
    "user": "https://github.com/roed314"
}
```

Changing keywords from "sd86.5" to "sd86.5, sd87".



---

archive/issue_comments_341620.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2018-04-30T09:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341620",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_341621.json:
```json
{
    "body": "<a id='comment:7'></a>not that bad:\n\n```\nsage -t --long src/doc/ja/tutorial/interactive_shell.rst  # 1 doctest failed\nsage -t --long src/sage/algebras/commutative_dga.py  # 393 doctests failed\nsage -t --long src/sage/combinat/root_system/extended_affine_weyl_group.py  # 77 doctests failed\nsage -t --long src/sage/modular/modform_hecketriangle/abstract_ring.py  # 2 doctests failed\nsage -t --long src/sage/modular/modform_hecketriangle/abstract_space.py  # 56 doctests failed\nsage -t --long src/sage/modular/modform_hecketriangle/element.py  # 16 doctests failed\nsage -t --long src/sage/modular/modform_hecketriangle/functors.py  # 4 doctests failed\nsage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 50 doctests failed\nsage -t --long src/sage/modular/modform_hecketriangle/readme.py  # 12 doctests failed\nsage -t --long src/sage/modular/modform_hecketriangle/space.py  # 38 doctests failed\nsage -t --long src/sage/modular/modform_hecketriangle/subspace.py  # 58 doctests failed\nsage -t --long src/sage/rings/valuation/valuation.py  # 1 doctest failed\nsage -t --long src/sage/schemes/elliptic_curves/padics.py  # 1 doctest failed\nsage -t --long src/sage/schemes/hyperelliptic_curves/hyperelliptic_padic_field.py  # 33 doctests failed\nsage -t --long src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py  # 8 doctests failed\n```",
    "created_at": "2018-04-30T15:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341621",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>not that bad:

```
sage -t --long src/doc/ja/tutorial/interactive_shell.rst  # 1 doctest failed
sage -t --long src/sage/algebras/commutative_dga.py  # 393 doctests failed
sage -t --long src/sage/combinat/root_system/extended_affine_weyl_group.py  # 77 doctests failed
sage -t --long src/sage/modular/modform_hecketriangle/abstract_ring.py  # 2 doctests failed
sage -t --long src/sage/modular/modform_hecketriangle/abstract_space.py  # 56 doctests failed
sage -t --long src/sage/modular/modform_hecketriangle/element.py  # 16 doctests failed
sage -t --long src/sage/modular/modform_hecketriangle/functors.py  # 4 doctests failed
sage -t --long src/sage/modular/modform_hecketriangle/graded_ring_element.py  # 50 doctests failed
sage -t --long src/sage/modular/modform_hecketriangle/readme.py  # 12 doctests failed
sage -t --long src/sage/modular/modform_hecketriangle/space.py  # 38 doctests failed
sage -t --long src/sage/modular/modform_hecketriangle/subspace.py  # 58 doctests failed
sage -t --long src/sage/rings/valuation/valuation.py  # 1 doctest failed
sage -t --long src/sage/schemes/elliptic_curves/padics.py  # 1 doctest failed
sage -t --long src/sage/schemes/hyperelliptic_curves/hyperelliptic_padic_field.py  # 33 doctests failed
sage -t --long src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py  # 8 doctests failed
```



---

archive/issue_comments_341622.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-03T15:39:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341623.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-03T18:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341623",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341624.json:
```json
{
    "body": "Changing keywords from \"sd86.5, sd87\" to \"sd86.5, sd87, padicIMA\".",
    "created_at": "2018-07-22T20:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23173",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23173#issuecomment-341624",
    "user": "https://github.com/roed314"
}
```

Changing keywords from "sd86.5, sd87" to "sd86.5, sd87, padicIMA".
