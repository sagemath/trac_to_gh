# Issue 23640: FractionWithFactoredDenominator.smooth_critical_ideal should accept names as strings

archive/issues_023403.json:
```json
{
    "body": "Currently, `FractionWithFactoredDenominator.smooth_critical_ideal` accepts its variable names as symbolic entries. This is really strange, especially since no symbolic computations are done.\n\nThis should be deprecated and the variable names should be accepted as strings (or possibly variables from a pre-existing polynomial ring).\n\nThis is needed for #10483.\n\nCC:  simonking @rwst @dkrenn\n\nReviewer: Daniel Krenn\n\nAuthor: Simon King, Ralf Stephan\n\nBranch: u/jdemeyer/fractionwithfactoreddenominator_smooth_critical_ideal_should_accept_names_as_strings\n\nStatus: needs_work\n\nCommit: acfead5331c4e2c95d974ec909885ebba9642c8e\n\nIssue created by migration from https://trac.sagemath.org/ticket/23640\n\n",
    "created_at": "2017-08-18T09:15:22Z",
    "labels": [
        "component: asymptotic expansions",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "FractionWithFactoredDenominator.smooth_critical_ideal should accept names as strings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23640",
    "user": "https://github.com/jdemeyer"
}
```
Currently, `FractionWithFactoredDenominator.smooth_critical_ideal` accepts its variable names as symbolic entries. This is really strange, especially since no symbolic computations are done.

This should be deprecated and the variable names should be accepted as strings (or possibly variables from a pre-existing polynomial ring).

This is needed for #10483.

CC:  simonking @rwst @dkrenn

Reviewer: Daniel Krenn

Author: Simon King, Ralf Stephan

Branch: u/jdemeyer/fractionwithfactoreddenominator_smooth_critical_ideal_should_accept_names_as_strings

Status: needs_work

Commit: acfead5331c4e2c95d974ec909885ebba9642c8e

Issue created by migration from https://trac.sagemath.org/ticket/23640





---

archive/issue_comments_439543.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/fractionwithfactoreddenominator_smooth_critical_ideal_should_accept_names_as_strings\"",
    "created_at": "2017-08-18T09:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439543",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/fractionwithfactoreddenominator_smooth_critical_ideal_should_accept_names_as_strings"



---

archive/issue_comments_439544.json:
```json
{
    "body": "Changing commit from \"\" to \"acfead5331c4e2c95d974ec909885ebba9642c8e\"",
    "created_at": "2017-08-18T09:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439544",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "acfead5331c4e2c95d974ec909885ebba9642c8e"



---

archive/issue_comments_439545.json:
```json
{
    "body": "<a id='comment:2'></a>\nI'm attaching a patch that I'm moving from #10483. One thing which is missing is the deprecation of the existing behaviour.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|\n|[acfead5](https://github.com/sagemath/sagetrac-mirror/commit/acfead5331c4e2c95d974ec909885ebba9642c8e)|`Trac #23640: deprecate the misuse of symbolic variables as polynomial variable`|",
    "created_at": "2017-08-18T09:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439545",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
I'm attaching a patch that I'm moving from #10483. One thing which is missing is the deprecation of the existing behaviour.

---
New commits:
|                                                                                                                                          |                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
|[acfead5](https://github.com/sagemath/sagetrac-mirror/commit/acfead5331c4e2c95d974ec909885ebba9642c8e)|`Trac #23640: deprecate the misuse of symbolic variables as polynomial variable`|



---

archive/issue_comments_439546.json:
```json
{
    "body": "Changing author from \"\" to \"Simon King, Ralf Stephan\"",
    "created_at": "2017-08-18T09:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439546",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Simon King, Ralf Stephan"



---

archive/issue_comments_439547.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-18T09:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439547",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_439548.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-18T09:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439548",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_439549.json:
```json
{
    "body": "<a id='comment:5'></a>\nMinor nitpick about:\n\n```\n            # Coerce alpha into L.\n            alpha = [L(a) for a in alpha]\n```\n\nHere you are doing a *conversion*, not a *coercion*. Either really do a coercion there or fix the comment.",
    "created_at": "2017-08-18T09:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439549",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Minor nitpick about:

```
            # Coerce alpha into L.
            alpha = [L(a) for a in alpha]
```

Here you are doing a *conversion*, not a *coercion*. Either really do a coercion there or fix the comment.



---

archive/issue_comments_439550.json:
```json
{
    "body": "<a id='comment:6'></a>\nIt's also not clear why this coercion/conversion should be done only `if indets`.",
    "created_at": "2017-08-18T09:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439550",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
It's also not clear why this coercion/conversion should be done only `if indets`.



---

archive/issue_comments_439551.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Daniel Krenn\"",
    "created_at": "2017-08-18T10:12:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439551",
    "user": "https://github.com/dkrenn"
}
```

Changing reviewer from "" to "Daniel Krenn"



---

archive/issue_comments_439552.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jdemeyer](#comment%3A5):\n> Minor nitpick about:\n> \n> ```\n>             # Coerce alpha into L.\n>             alpha = [L(a) for a in alpha]\n> ```\n> \n> Here you are doing a *conversion*, not a *coercion*. Either really do a coercion there or fix the comment.\n\n\n+1 for using `.coerce`",
    "created_at": "2017-08-18T10:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439552",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:9'></a>
Replying to [jdemeyer](#comment%3A5):
> Minor nitpick about:
> 
> ```
>             # Coerce alpha into L.
>             alpha = [L(a) for a in alpha]
> ```
> 
> Here you are doing a *conversion*, not a *coercion*. Either really do a coercion there or fix the comment.


+1 for using `.coerce`



---

archive/issue_comments_439553.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [jdemeyer](#comment%3A6):\n> It's also not clear why this coercion/conversion should be done only `if indets`.\n\n\n+1 for doing this always.",
    "created_at": "2017-08-18T10:13:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439553",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:10'></a>
Replying to [jdemeyer](#comment%3A6):
> It's also not clear why this coercion/conversion should be done only `if indets`.


+1 for doing this always.



---

archive/issue_comments_439554.json:
```json
{
    "body": "<a id='comment:11'></a>\n\n```\n            if isinstance(a, str) and a not in K.variable_names():\n                indets.append(a)\n```\nThere should be an error message, if some `a` is ignored (i.e., when it is not a string and not an existing variable).",
    "created_at": "2017-08-18T10:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23640",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23640#issuecomment-439554",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:11'></a>

```
            if isinstance(a, str) and a not in K.variable_names():
                indets.append(a)
```
There should be an error message, if some `a` is ignored (i.e., when it is not a string and not an existing variable).
