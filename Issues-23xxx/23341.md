# Issue 23341: port lcalc to C++11

archive/issues_023104.json:
```json
{
    "assignees": [],
    "body": "lcalc doesn't use standard C++:\n\n- `using namespace std;` needs an include with stuff from `std::` before it\n    \n- `typeof` is a gcc extension - C++11 has `decltype` instead\n    \n- plain C must not be compiled with C++ compiler - thus a makefile change\n\n\nCC:  @kiwifb\n\nKeywords: **lcalc**\n\nBranch/Commit: **[`7cf967f`](https://github.com/sagemath/sagetrac-mirror/commit/7cf967fa5f50daf67e9a910786970bf184c37ecb)**\n\nReviewer: **Dima Pasechnik, Fran\u00e7ois Bissey, Jeroen Demeyer, Ralf Stephan**\n\nAuthor: **Dima Pasechnik, Fran\u00e7ois Bissey**\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23341_\n\n",
    "closed_at": "2018-11-23T21:42:05Z",
    "created_at": "2017-06-29T23:04:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "port lcalc to C++11",
    "type": "issue",
    "updated_at": "2018-11-23T21:42:05Z",
    "url": "https://github.com/sagemath/sage/issues/23341",
    "user": "https://github.com/dimpase"
}
```
lcalc doesn't use standard C++:

- `using namespace std;` needs an include with stuff from `std::` before it
    
- `typeof` is a gcc extension - C++11 has `decltype` instead
    
- plain C must not be compiled with C++ compiler - thus a makefile change


CC:  @kiwifb

Keywords: **lcalc**

Branch/Commit: **[`7cf967f`](https://github.com/sagemath/sagetrac-mirror/commit/7cf967fa5f50daf67e9a910786970bf184c37ecb)**

Reviewer: **Dima Pasechnik, François Bissey, Jeroen Demeyer, Ralf Stephan**

Author: **Dima Pasechnik, François Bissey**

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/23341_





---

archive/issue_events_324984.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-06-29T23:04:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324984"
}
```



---

archive/issue_events_324985.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-06-29T23:04:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324985"
}
```



---

archive/issue_comments_350385.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nCan you rebase on 8.0.rc0? Your branch shows up in red.",
    "created_at": "2017-06-29T23:06:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350385",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:1" align="right">comment:1</div>

Can you rebase on 8.0.rc0? Your branch shows up in red.



---

archive/issue_comments_350386.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nthis is needed for building lcalc with `-std=c++11`.\n(tested so far with clang 4.0.1 on Linux, with `stdlib=libc++`)\n\nOnly the top commit is of interest. Perhaps it can be based on rc0 indeed. But I need sleep now :-)",
    "created_at": "2017-06-29T23:08:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350386",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

this is needed for building lcalc with `-std=c++11`.
(tested so far with clang 4.0.1 on Linux, with `stdlib=libc++`)

Only the top commit is of interest. Perhaps it can be based on rc0 indeed. But I need sleep now :-)



---

archive/issue_comments_350387.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOK :)\n\nThe next question is how to ensure that the compiler then uses c++11. lcalc doesn't have a configure script so we cannot do it there.  At the very least `spkg-install` will need to insert `-std=c++11` in `CXXFLAGS` to make sure you are always using c++11.",
    "created_at": "2017-06-29T23:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350387",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

OK :)

The next question is how to ensure that the compiler then uses c++11. lcalc doesn't have a configure script so we cannot do it there.  At the very least `spkg-install` will need to insert `-std=c++11` in `CXXFLAGS` to make sure you are always using c++11.



---

archive/issue_comments_350388.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5434c70edc3be3dfa2c353adff92bf7909708c1b\">5434c70</a></td><td><code>Merge branch 'develop' into compiler</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5657399ab53fcfe274dee50d0cf5d04bb83ae94\">f565739</a></td><td><code>bump config tarball</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53f9c4de61b5af863af0bbec88a843a3289b3cba\">53f9c4d</a></td><td><code>Merge branch 'compiler' into clang-progress</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a9ab6b0cbc9625e1b5df0a29536803e8d7bfab7\">7a9ab6b</a></td><td><code>checksum for this branch's configure tarball</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14e08ae6eb3f2d5c85f8b1e307ac5c1160d224ee\">14e08ae</a></td><td><code>Merge branch 'u/fbissey/clang-progress' of trac.sagemath.org:sage into clang</code></td></tr></table>\n",
    "created_at": "2017-06-30T06:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350388",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5434c70edc3be3dfa2c353adff92bf7909708c1b">5434c70</a></td><td><code>Merge branch 'develop' into compiler</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5657399ab53fcfe274dee50d0cf5d04bb83ae94">f565739</a></td><td><code>bump config tarball</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53f9c4de61b5af863af0bbec88a843a3289b3cba">53f9c4d</a></td><td><code>Merge branch 'compiler' into clang-progress</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a9ab6b0cbc9625e1b5df0a29536803e8d7bfab7">7a9ab6b</a></td><td><code>checksum for this branch's configure tarball</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14e08ae6eb3f2d5c85f8b1e307ac5c1160d224ee">14e08ae</a></td><td><code>Merge branch 'u/fbissey/clang-progress' of trac.sagemath.org:sage into clang</code></td></tr></table>




---

archive/issue_comments_350389.json:
```json
{
    "body": "Changed commit from **[`015955e`](https://github.com/sagemath/sagetrac-mirror/commit/015955efe9577dc9c3d443a4328297cd097454ee)** to **[`14e08ae`](https://github.com/sagemath/sagetrac-mirror/commit/14e08ae6eb3f2d5c85f8b1e307ac5c1160d224ee)**",
    "created_at": "2017-06-30T06:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350389",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`015955e`](https://github.com/sagemath/sagetrac-mirror/commit/015955efe9577dc9c3d443a4328297cd097454ee)** to **[`14e08ae`](https://github.com/sagemath/sagetrac-mirror/commit/14e08ae6eb3f2d5c85f8b1e307ac5c1160d224ee)**



---

archive/issue_comments_350390.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nthe other problem here is an incorrect building of lcalc extension. Here C++ is compiled with a C compiler, which is patently wrong.\nAny idea how this can be fixed?\n\n```\n[sagelib-8.0.rc0] [  4/323] clang -fno-strict-aliasing -OPT:Olimit=0 -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/mnt/opt/Sage/sage-clang/local/lib/python2.7/site-packages/cypari2 -I/mnt/opt/Sage/sage-clang/local/lib/python2.7/site-packages/cysignals -I/mnt/opt/Sage/sage-clang/local/include -I/mnt/opt/Sage/sage-clang/local/include/python2.7 -I/mnt/opt/Sage/sage-clang/local/lib/python2.7/site-packages/numpy/core/include -I/mnt/opt/Sage/sage-clang/src -I/mnt/opt/Sage/sage-clang/src/sage/ext -I/mnt/opt/Sage/sage-clang/src/build/cythonized -I/mnt/opt/Sage/sage-clang/src/build/cythonized/sage/ext -I/mnt/opt/Sage/sage-clang/local/include/python2.7 -c /mnt/opt/Sage/sage-clang/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp -o build/temp.linux-x86_64-2.7/mnt/opt/Sage/sage-clang/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.o -fno-strict-aliasing -O3 -ffast-math\n[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp:505:\n[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/src/sage/libs/lcalc/lcalc_sage.h:1:\n[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/local/include/libLfunction/L.h:34:\n[sagelib-8.0.rc0] In file included from /usr/lib/gcc/x86_64-pc-linux-gnu/6.3.0/include/g++-v6/backward/strstream:50:\n[sagelib-8.0.rc0] /usr/lib/gcc/x86_64-pc-linux-gnu/6.3.0/include/g++-v6/backward/backward_warning.h:32:2: warning: This file includes at least one deprecated or antiquated header which   may be removed without further notice at a future date. Please use a   non-deprecated interface with equivalent functionality instead. For a   listing of replacement headers and interfaces, consult the file   backward_warning.h. To disable this warning use -Wno-deprecated. [-W#warnings]\n[sagelib-8.0.rc0] #warning \\\n[sagelib-8.0.rc0]  ^\n[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp:505:\n[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/src/sage/libs/lcalc/lcalc_sage.h:1:\n[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/local/include/libLfunction/L.h:40:\n[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/local/include/libLfunction/Lglobals.h:48:\n[sagelib-8.0.rc0] /mnt/opt/Sage/sage-clang/local/include/libLfunction/Lcommon.h:71:8: error: expected ';' in 'for' statement specifier\n[sagelib-8.0.rc0]                 loop(i,this->N,N) coeffs[i]=zero;\n[sagelib-8.0.rc0                       ^\n...\n```",
    "created_at": "2017-06-30T07:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350390",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

the other problem here is an incorrect building of lcalc extension. Here C++ is compiled with a C compiler, which is patently wrong.
Any idea how this can be fixed?

```
[sagelib-8.0.rc0] [  4/323] clang -fno-strict-aliasing -OPT:Olimit=0 -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -I/mnt/opt/Sage/sage-clang/local/lib/python2.7/site-packages/cypari2 -I/mnt/opt/Sage/sage-clang/local/lib/python2.7/site-packages/cysignals -I/mnt/opt/Sage/sage-clang/local/include -I/mnt/opt/Sage/sage-clang/local/include/python2.7 -I/mnt/opt/Sage/sage-clang/local/lib/python2.7/site-packages/numpy/core/include -I/mnt/opt/Sage/sage-clang/src -I/mnt/opt/Sage/sage-clang/src/sage/ext -I/mnt/opt/Sage/sage-clang/src/build/cythonized -I/mnt/opt/Sage/sage-clang/src/build/cythonized/sage/ext -I/mnt/opt/Sage/sage-clang/local/include/python2.7 -c /mnt/opt/Sage/sage-clang/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp -o build/temp.linux-x86_64-2.7/mnt/opt/Sage/sage-clang/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.o -fno-strict-aliasing -O3 -ffast-math
[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp:505:
[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/src/sage/libs/lcalc/lcalc_sage.h:1:
[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/local/include/libLfunction/L.h:34:
[sagelib-8.0.rc0] In file included from /usr/lib/gcc/x86_64-pc-linux-gnu/6.3.0/include/g++-v6/backward/strstream:50:
[sagelib-8.0.rc0] /usr/lib/gcc/x86_64-pc-linux-gnu/6.3.0/include/g++-v6/backward/backward_warning.h:32:2: warning: This file includes at least one deprecated or antiquated header which   may be removed without further notice at a future date. Please use a   non-deprecated interface with equivalent functionality instead. For a   listing of replacement headers and interfaces, consult the file   backward_warning.h. To disable this warning use -Wno-deprecated. [-W#warnings]
[sagelib-8.0.rc0] #warning \
[sagelib-8.0.rc0]  ^
[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/src/build/cythonized/sage/libs/lcalc/lcalc_Lfunction.cpp:505:
[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/src/sage/libs/lcalc/lcalc_sage.h:1:
[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/local/include/libLfunction/L.h:40:
[sagelib-8.0.rc0] In file included from /mnt/opt/Sage/sage-clang/local/include/libLfunction/Lglobals.h:48:
[sagelib-8.0.rc0] /mnt/opt/Sage/sage-clang/local/include/libLfunction/Lcommon.h:71:8: error: expected ';' in 'for' statement specifier
[sagelib-8.0.rc0]                 loop(i,this->N,N) coeffs[i]=zero;
[sagelib-8.0.rc0                       ^
...
```



---

archive/issue_comments_350391.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kiwifb](#comment:3):\n> OK :)\n> \n> The next question is how to ensure that the compiler then uses c++11. lcalc doesn't have a configure script so we cannot do it there.  At the very least `spkg-install` will need to insert `-std=c++11` in `CXXFLAGS` to make sure you are always using c++11.\n\nWe may assume that all the C++ compilers we care about support `-std=c++11`, right?\nSo this may be an independent of clang tickets thing?",
    "created_at": "2017-06-30T07:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350391",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kiwifb](#comment:3):
> OK :)
> 
> The next question is how to ensure that the compiler then uses c++11. lcalc doesn't have a configure script so we cannot do it there.  At the very least `spkg-install` will need to insert `-std=c++11` in `CXXFLAGS` to make sure you are always using c++11.

We may assume that all the C++ compilers we care about support `-std=c++11`, right?
So this may be an independent of clang tickets thing?



---

archive/issue_comments_350392.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nJeroen, do you know to force the use of C++ compiler here (with proper use of CXXFLAGS, too) ?",
    "created_at": "2017-06-30T07:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350392",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">comment:7</div>

Jeroen, do you know to force the use of C++ compiler here (with proper use of CXXFLAGS, too) ?



---

archive/issue_events_324986.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-06-30T07:35:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324986"
}
```



---

archive/issue_events_324987.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-06-30T07:35:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324987"
}
```



---

archive/issue_events_324988.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-06-30T07:35:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324988"
}
```



---

archive/issue_comments_350393.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@dimpase](#comment:5):\n> the other problem here is an incorrect building of lcalc extension. Here C++ is compiled with a C compiler, which is patently wrong.\n> Any idea how this can be fixed?\n\nYes. This is https://bugs.python.org/issue1222585 the patch needed for that is included in the gentoo patch tarball for python.",
    "created_at": "2017-06-30T07:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350393",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@dimpase](#comment:5):
> the other problem here is an incorrect building of lcalc extension. Here C++ is compiled with a C compiler, which is patently wrong.
> Any idea how this can be fixed?

Yes. This is https://bugs.python.org/issue1222585 the patch needed for that is included in the gentoo patch tarball for python.



---

archive/issue_events_324989.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-06-30T07:35:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324989"
}
```



---

archive/issue_comments_350394.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@dimpase](#comment:6):\n> We may assume that all the C++ compilers we care about support `-std=c++11`, right?\n> So this may be an independent of clang tickets thing?\n\nDefinitely. This shouldn't depend on #12426.",
    "created_at": "2017-06-30T07:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350394",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@dimpase](#comment:6):
> We may assume that all the C++ compilers we care about support `-std=c++11`, right?
> So this may be an independent of clang tickets thing?

Definitely. This shouldn't depend on #12426.



---

archive/issue_comments_350395.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@kiwifb](#comment:8):\n> Replying to [@dimpase](#comment:5):\n> > the other problem here is an incorrect building of lcalc extension. Here C++ is compiled with a C compiler, which is patently wrong.\n> > Any idea how this can be fixed?\n\n> \n> Yes. This is https://bugs.python.org/issue1222585 the patch needed for that is included in the gentoo patch tarball for python.\n\nIs there a Sage ticket for this already?",
    "created_at": "2017-06-30T07:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350395",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@kiwifb](#comment:8):
> Replying to [@dimpase](#comment:5):
> > the other problem here is an incorrect building of lcalc extension. Here C++ is compiled with a C compiler, which is patently wrong.
> > Any idea how this can be fixed?

> 
> Yes. This is https://bugs.python.org/issue1222585 the patch needed for that is included in the gentoo patch tarball for python.

Is there a Sage ticket for this already?



---

archive/issue_comments_350396.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@dimpase](#comment:10):\n> Replying to [@kiwifb](#comment:8):\n> > Replying to [@dimpase](#comment:5):\n> > > the other problem here is an incorrect building of lcalc extension. Here C++ is compiled with a C compiler, which is patently wrong.\n> > > Any idea how this can be fixed?\n\n> > \n> > Yes. This is https://bugs.python.org/issue1222585 the patch needed for that is included in the gentoo patch tarball for python.\n\n> \n> Is there a Sage ticket for this already?\n\nI don't think so. But it comes up regularly.",
    "created_at": "2017-06-30T07:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350396",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@dimpase](#comment:10):
> Replying to [@kiwifb](#comment:8):
> > Replying to [@dimpase](#comment:5):
> > > the other problem here is an incorrect building of lcalc extension. Here C++ is compiled with a C compiler, which is patently wrong.
> > > Any idea how this can be fixed?

> > 
> > Yes. This is https://bugs.python.org/issue1222585 the patch needed for that is included in the gentoo patch tarball for python.

> 
> Is there a Sage ticket for this already?

I don't think so. But it comes up regularly.



---

archive/issue_comments_350397.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHow urgent is this? It might be possible to drop the `lcalc` package completely in favour of PARI/GP. However, the timeframe for this might be in the order on months (mainly because I don't know enough mathematically about L-functions).",
    "created_at": "2017-06-30T08:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350397",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

How urgent is this? It might be possible to drop the `lcalc` package completely in favour of PARI/GP. However, the timeframe for this might be in the order on months (mainly because I don't know enough mathematically about L-functions).



---

archive/issue_comments_350398.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jdemeyer](#comment:12):\n> How urgent is this? It might be possible to drop the `lcalc` package completely in favour of PARI/GP. However, the timeframe for this might be in the order on months (mainly because I don't know enough mathematically about L-functions).\n\nI think Dima started this with the view of compiling sage with `-std=c++11`. If that's what he is doing, getting https://bugs.python.org/issue1222585 in would be more pressing in my opinion.",
    "created_at": "2017-06-30T08:39:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350398",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jdemeyer](#comment:12):
> How urgent is this? It might be possible to drop the `lcalc` package completely in favour of PARI/GP. However, the timeframe for this might be in the order on months (mainly because I don't know enough mathematically about L-functions).

I think Dima started this with the view of compiling sage with `-std=c++11`. If that's what he is doing, getting https://bugs.python.org/issue1222585 in would be more pressing in my opinion.



---

archive/issue_comments_350399.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@kiwifb](#comment:13):\n> Replying to [@jdemeyer](#comment:12):\n> > How urgent is this? It might be possible to drop the `lcalc` package completely in favour of PARI/GP. However, the timeframe for this might be in the order on months (mainly because I don't know enough mathematically about L-functions).\n\n> \n> I think Dima started this with the view of compiling sage with `-std=c++11`.\n\nindeed, and as a part of the clang porting effort too - it's just too much trouble to have different packages with different `c++xy` IMHO, especially if one depends on the another, they better be on the same `xy`...\n \n\n\n> If that's what he is doing, getting https://bugs.python.org/issue1222585 in would be more pressing in my opinion.\n\nI'll see how it flies with these patches, and open a ticket.",
    "created_at": "2017-06-30T09:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350399",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@kiwifb](#comment:13):
> Replying to [@jdemeyer](#comment:12):
> > How urgent is this? It might be possible to drop the `lcalc` package completely in favour of PARI/GP. However, the timeframe for this might be in the order on months (mainly because I don't know enough mathematically about L-functions).

> 
> I think Dima started this with the view of compiling sage with `-std=c++11`.

indeed, and as a part of the clang porting effort too - it's just too much trouble to have different packages with different `c++xy` IMHO, especially if one depends on the another, they better be on the same `xy`...
 


> If that's what he is doing, getting https://bugs.python.org/issue1222585 in would be more pressing in my opinion.

I'll see how it flies with these patches, and open a ticket.



---

archive/issue_comments_350400.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@dimpase](#comment:14):\n> I'll see how it flies with these patches, and open a ticket.\n> \n\nFor info Gentoo's python includes those. sage-on-gentoo has been compiled using these patches to distutils for almost as long as it existed.",
    "created_at": "2017-06-30T09:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350400",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@dimpase](#comment:14):
> I'll see how it flies with these patches, and open a ticket.
> 

For info Gentoo's python includes those. sage-on-gentoo has been compiled using these patches to distutils for almost as long as it existed.



---

archive/issue_comments_350401.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nFor the life of me, I don't understand why the patch [21_all_distutils_c++.patch](http://users.ox.ac.uk/~coml0531/sage/21_all_distutils_c++.patch)\nfrom https://dev.gentoo.org/~floppym/python/python-gentoo-patches-2.7.13-0.tar.xz\ndoes not apply if I place it in `build/pkgs/python2/patches/`: all the files etc are as they should be, yet I get\n\n```\n[python2-2.7.13.p1] Applying patches from ../patches...\n[python2-2.7.13.p1] Applying ../patches/2.6.5-FD_SETSIZE.patch\n[python2-2.7.13.p1] patching file Modules/selectmodule.c\n[python2-2.7.13.p1] Applying ../patches/21_all_distutils_c++.patch\n[python2-2.7.13.p1] can't find file to patch at input line 5\n[python2-2.7.13.p1] Perhaps you used the wrong -p or --strip option?\n[python2-2.7.13.p1] The text leading up to this was:\n[python2-2.7.13.p1] --------------------------\n[python2-2.7.13.p1] |https://bugs.python.org/issue1222585\n[python2-2.7.13.p1] |\n[python2-2.7.13.p1] |--- Lib/_osx_support.py\n[python2-2.7.13.p1] |+++ Lib/_osx_support.py\n[python2-2.7.13.p1] --------------------------\n[python2-2.7.13.p1] File to patch: \n...\n```\n\nSeems to be the right format, the right paths to files, yet this...",
    "created_at": "2017-06-30T10:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350401",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

For the life of me, I don't understand why the patch [21_all_distutils_c++.patch](http://users.ox.ac.uk/~coml0531/sage/21_all_distutils_c++.patch)
from https://dev.gentoo.org/~floppym/python/python-gentoo-patches-2.7.13-0.tar.xz
does not apply if I place it in `build/pkgs/python2/patches/`: all the files etc are as they should be, yet I get

```
[python2-2.7.13.p1] Applying patches from ../patches...
[python2-2.7.13.p1] Applying ../patches/2.6.5-FD_SETSIZE.patch
[python2-2.7.13.p1] patching file Modules/selectmodule.c
[python2-2.7.13.p1] Applying ../patches/21_all_distutils_c++.patch
[python2-2.7.13.p1] can't find file to patch at input line 5
[python2-2.7.13.p1] Perhaps you used the wrong -p or --strip option?
[python2-2.7.13.p1] The text leading up to this was:
[python2-2.7.13.p1] --------------------------
[python2-2.7.13.p1] |https://bugs.python.org/issue1222585
[python2-2.7.13.p1] |
[python2-2.7.13.p1] |--- Lib/_osx_support.py
[python2-2.7.13.p1] |+++ Lib/_osx_support.py
[python2-2.7.13.p1] --------------------------
[python2-2.7.13.p1] File to patch: 
...
```

Seems to be the right format, the right paths to files, yet this...



---

archive/issue_comments_350402.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nCheck the patch directory levels with another patch there may be one directory to many in the Gentoo patch compared to what sage's automatic patching needs.",
    "created_at": "2017-06-30T10:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350402",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

Check the patch directory levels with another patch there may be one directory to many in the Gentoo patch compared to what sage's automatic patching needs.



---

archive/issue_comments_350403.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@kiwifb](#comment:17):\n> Check the patch directory levels with another patch there may be one directory to many in the Gentoo patch compared to what sage's automatic patching needs.\n\nno, it's not the case as far as I can see (and I've been stuck with it for an hour already, just not yet ready to apply it by hand...)",
    "created_at": "2017-06-30T10:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350403",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@kiwifb](#comment:17):
> Check the patch directory levels with another patch there may be one directory to many in the Gentoo patch compared to what sage's automatic patching needs.

no, it's not the case as far as I can see (and I've been stuck with it for an hour already, just not yet ready to apply it by hand...)



---

archive/issue_comments_350404.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nJust checked you need to `_add_` one directory level to the gentoo patch. That is\n\n```\n--- Lib/_osx_support.py\n+++ Lib/_osx_support.py\n```\nneeds to become \n\n```\n--- a/Lib/_osx_support.py\n+++ b/Lib/_osx_support.py\n```\nand so on...",
    "created_at": "2017-06-30T11:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350404",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

Just checked you need to `_add_` one directory level to the gentoo patch. That is

```
--- Lib/_osx_support.py
+++ Lib/_osx_support.py
```
needs to become 

```
--- a/Lib/_osx_support.py
+++ b/Lib/_osx_support.py
```
and so on...



---

archive/issue_comments_350405.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@kiwifb](#comment:19):\n> Just checked you need to `_add_` one directory level to the gentoo patch. That is\n> \n> ```\n> --- Lib/_osx_support.py\n> +++ Lib/_osx_support.py\n> ```\n> needs to become \n> \n> ```\n> --- a/Lib/_osx_support.py\n> +++ b/Lib/_osx_support.py\n> ```\n> and so on...\n\nOh, thanks, I've been blind...",
    "created_at": "2017-06-30T11:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350405",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@kiwifb](#comment:19):
> Just checked you need to `_add_` one directory level to the gentoo patch. That is
> 
> ```
> --- Lib/_osx_support.py
> +++ Lib/_osx_support.py
> ```
> needs to become 
> 
> ```
> --- a/Lib/_osx_support.py
> +++ b/Lib/_osx_support.py
> ```
> and so on...

Oh, thanks, I've been blind...



---

archive/issue_comments_350406.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@kiwifb](#comment:3):\n> OK :)\n> \n> The next question is how to ensure that the compiler then uses c++11. lcalc doesn't have a configure script so we cannot do it there.  At the very least `spkg-install` will need to insert `-std=c++11` in `CXXFLAGS` to make sure you are always using c++11.\n\nSomehow I cannot manage to achieve this; \nit all works if I do\n\n```\nCXXFLAGS=\"-std=c++11\" ./sage -f lcalc\n```\nbut somehow does not work if I put into spkg-install\n\n```\n$MAKE CXXFLAGS=\"-std=c++11\"\n```\n\nsome evil Makefile magic that escapes me here. :-(",
    "created_at": "2017-07-01T23:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350406",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@kiwifb](#comment:3):
> OK :)
> 
> The next question is how to ensure that the compiler then uses c++11. lcalc doesn't have a configure script so we cannot do it there.  At the very least `spkg-install` will need to insert `-std=c++11` in `CXXFLAGS` to make sure you are always using c++11.

Somehow I cannot manage to achieve this; 
it all works if I do

```
CXXFLAGS="-std=c++11" ./sage -f lcalc
```
but somehow does not work if I put into spkg-install

```
$MAKE CXXFLAGS="-std=c++11"
```

some evil Makefile magic that escapes me here. :-(



---

archive/issue_comments_350407.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nMost other `spkg-install` do something like\n\n```\nCXXFLAGS=\"-std=c++11 ${CXXFLAGS}\"\nexport CXXFLAGS\n$MAKE\n```",
    "created_at": "2017-07-01T23:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350407",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

Most other `spkg-install` do something like

```
CXXFLAGS="-std=c++11 ${CXXFLAGS}"
export CXXFLAGS
$MAKE
```



---

archive/issue_comments_350408.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@kiwifb](#comment:22):\n> Most other `spkg-install` do something like\n> \n> ```\n> CXXFLAGS=\"-std=c++11 ${CXXFLAGS}\"\n> export CXXFLAGS\n> $MAKE\n> ```\n\nno difference, it still does not work. It might be due to the Makefile modifying\nCXXFLAGS: it does\n\n```\nCXXFLAGS := -O3 $(OPENMP_FLAG) $(PREPROCESSOR_DEFINE) $(MACHINE_SPECIFIC_FLAGS) $(EXTRA) $(CXXFLAGS)\n```",
    "created_at": "2017-07-01T23:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350408",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@kiwifb](#comment:22):
> Most other `spkg-install` do something like
> 
> ```
> CXXFLAGS="-std=c++11 ${CXXFLAGS}"
> export CXXFLAGS
> $MAKE
> ```

no difference, it still does not work. It might be due to the Makefile modifying
CXXFLAGS: it does

```
CXXFLAGS := -O3 $(OPENMP_FLAG) $(PREPROCESSOR_DEFINE) $(MACHINE_SPECIFIC_FLAGS) $(EXTRA) $(CXXFLAGS)
```



---

archive/issue_comments_350409.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI don't know:\n\n* bash bug? (version 4.4.12(1))\n* make bug? (4.2.1)\n\nwill try on something older...",
    "created_at": "2017-07-02T00:17:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350409",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

I don't know:

* bash bug? (version 4.4.12(1))
* make bug? (4.2.1)

will try on something older...



---

archive/issue_comments_350410.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nlogs please.",
    "created_at": "2017-07-02T01:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350410",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

logs please.



---

archive/issue_events_324990.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-07-02T07:34:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324990"
}
```



---

archive/issue_comments_350411.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI'm willing to do some bulk C++11 work, as I did with Pynac. Is there a public lcalc repo?",
    "created_at": "2017-07-02T07:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350411",
    "user": "https://github.com/rwst"
}
```

<div id="comment:26" align="right">comment:26</div>

I'm willing to do some bulk C++11 work, as I did with Pynac. Is there a public lcalc repo?



---

archive/issue_events_324991.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-07-02T07:34:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324991"
}
```



---

archive/issue_events_324992.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-07-02T07:34:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324992"
}
```



---

archive/issue_events_324993.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-07-02T07:34:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324993"
}
```



---

archive/issue_comments_350412.json:
```json
{
    "body": "Changed dependencies from **#12426** to none",
    "created_at": "2017-07-02T07:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350412",
    "user": "https://github.com/rwst"
}
```

Changed dependencies from **#12426** to none



---

archive/issue_comments_350413.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nthis is the branch, as here are the results of running \n\n```\n./sage -f lcalc\n```\nhttp://users.ox.ac.uk/~coml0531/sage/lcalc-1.23.p16.log\n\nvs the result of running\n\n```\nCXXFLAGS=\"-std=c++11\" ./sage -f lcalc\n```\nhttp://users.ox.ac.uk/~coml0531/sage/externalCXXFLAGS_lcalc-1.23.p16.log\n\nAs you see in the 1st log CXXFLAGS are ignored.\nTested on Fedora25 as well as on Gentoo.\nWhat am I missing?!!\n\nPS. F25 bash is 4.3.43(1)-release, and make is 4.1.",
    "created_at": "2017-07-02T07:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350413",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

this is the branch, as here are the results of running 

```
./sage -f lcalc
```
http://users.ox.ac.uk/~coml0531/sage/lcalc-1.23.p16.log

vs the result of running

```
CXXFLAGS="-std=c++11" ./sage -f lcalc
```
http://users.ox.ac.uk/~coml0531/sage/externalCXXFLAGS_lcalc-1.23.p16.log

As you see in the 1st log CXXFLAGS are ignored.
Tested on Fedora25 as well as on Gentoo.
What am I missing?!!

PS. F25 bash is 4.3.43(1)-release, and make is 4.1.



---

archive/issue_comments_350414.json:
```json
{
    "body": "Changed commit from **[`14e08ae`](https://github.com/sagemath/sagetrac-mirror/commit/14e08ae6eb3f2d5c85f8b1e307ac5c1160d224ee)** to **[`666d6a3`](https://github.com/sagemath/sagetrac-mirror/commit/666d6a3d3de0d80ff8730dd3320f182b6f21368b)**",
    "created_at": "2017-07-02T07:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350414",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`14e08ae`](https://github.com/sagemath/sagetrac-mirror/commit/14e08ae6eb3f2d5c85f8b1e307ac5c1160d224ee)** to **[`666d6a3`](https://github.com/sagemath/sagetrac-mirror/commit/666d6a3d3de0d80ff8730dd3320f182b6f21368b)**



---

archive/issue_comments_350415.json:
```json
{
    "body": "Changed branch from **[u/dimpase/lcalc_c11](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/lcalc_c11)** to **[u/dimpase/lcalc_cxx11](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/lcalc_cxx11)**",
    "created_at": "2017-07-02T07:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350415",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/dimpase/lcalc_c11](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/lcalc_c11)** to **[u/dimpase/lcalc_cxx11](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/lcalc_cxx11)**



---

archive/issue_comments_350416.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@rwst](#comment:26):\n> I'm willing to do some bulk C++11 work, as I did with Pynac. Is there a public lcalc repo?\n\nIt's done here, the problem which remains is to fight the makefile madness\n\nThere will be more similar C++ \"fun\" for gfan (I have a patch, but it produces lots of test errors), giac... I'll cc you on these tickets as they appear.",
    "created_at": "2017-07-02T07:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350416",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@rwst](#comment:26):
> I'm willing to do some bulk C++11 work, as I did with Pynac. Is there a public lcalc repo?

It's done here, the problem which remains is to fight the makefile madness

There will be more similar C++ "fun" for gfan (I have a patch, but it produces lots of test errors), giac... I'll cc you on these tickets as they appear.



---

archive/issue_comments_350417.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@rwst](#comment:26):\n> I'm willing to do some bulk C++11 work, as I did with Pynac. Is there a public lcalc repo?\n\nNo.",
    "created_at": "2017-07-02T07:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350417",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@rwst](#comment:26):
> I'm willing to do some bulk C++11 work, as I did with Pynac. Is there a public lcalc repo?

No.



---

archive/issue_comments_350418.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nlet us make one on github.",
    "created_at": "2017-07-02T07:52:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350418",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

let us make one on github.



---

archive/issue_comments_350419.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@dimpase](#comment:28):\n> There will be more similar C++ \"fun\" for gfan (I have a patch, but it produces lots of test errors), giac... I'll cc you on these tickets as they appear.\n\nNote BTW there is gfan-0.6 now.",
    "created_at": "2017-07-02T07:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350419",
    "user": "https://github.com/rwst"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@dimpase](#comment:28):
> There will be more similar C++ "fun" for gfan (I have a patch, but it produces lots of test errors), giac... I'll cc you on these tickets as they appear.

Note BTW there is gfan-0.6 now.



---

archive/issue_comments_350420.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nin fact, a lcalc repo is here : https://code.google.com/archive/p/l-calc/\n\nlast commit is from 2014, but it's newer than what we use, \nsee http://oto.math.uwaterloo.ca/~mrubinst/L_function_public/CODE/",
    "created_at": "2017-07-02T07:59:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350420",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

in fact, a lcalc repo is here : https://code.google.com/archive/p/l-calc/

last commit is from 2014, but it's newer than what we use, 
see http://oto.math.uwaterloo.ca/~mrubinst/L_function_public/CODE/



---

archive/issue_comments_350421.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI just did one for gfan: https://github.com/rwst/gfan06",
    "created_at": "2017-07-02T08:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350421",
    "user": "https://github.com/rwst"
}
```

<div id="comment:33" align="right">comment:33</div>

I just did one for gfan: https://github.com/rwst/gfan06



---

archive/issue_comments_350422.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThis is quite peculiar. Looking more closely, even the section for OS X in spkg-install, doesn't work properly\n\n```\nif [ \"$UNAME\" = \"Darwin\" ]; then\n    export LDFLAGS=\"$LDFLAGS -Wl,-headerpad_max_install_names\"\nfi\n```\nwe still get the right thing because there is darwin section in the makefile but the `export` above doesn't work.",
    "created_at": "2017-07-02T08:31:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350422",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">comment:34</div>

This is quite peculiar. Looking more closely, even the section for OS X in spkg-install, doesn't work properly

```
if [ "$UNAME" = "Darwin" ]; then
    export LDFLAGS="$LDFLAGS -Wl,-headerpad_max_install_names"
fi
```
we still get the right thing because there is darwin section in the makefile but the `export` above doesn't work.



---

archive/issue_comments_350423.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@dimpase](#comment:32):\n> in fact, a lcalc repo is here : https://code.google.com/archive/p/l-calc/\n> \n> last commit is from 2014, but it's newer than what we use, \n> see http://oto.math.uwaterloo.ca/~mrubinst/L_function_public/CODE/\n\nI've imported the code.google (hg) repo into git, here:\nhttps://github.com/dimpase/lcalc\n\nI'll try merging Sage's changes there.",
    "created_at": "2017-07-03T09:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350423",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@dimpase](#comment:32):
> in fact, a lcalc repo is here : https://code.google.com/archive/p/l-calc/
> 
> last commit is from 2014, but it's newer than what we use, 
> see http://oto.math.uwaterloo.ca/~mrubinst/L_function_public/CODE/

I've imported the code.google (hg) repo into git, here:
https://github.com/dimpase/lcalc

I'll try merging Sage's changes there.



---

archive/issue_comments_350424.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThat repo code is different enough and `clang-check` gives lots of errors. If we do this together, how to coordinate?",
    "created_at": "2017-07-03T13:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350424",
    "user": "https://github.com/rwst"
}
```

<div id="comment:36" align="right">comment:36</div>

That repo code is different enough and `clang-check` gives lots of errors. If we do this together, how to coordinate?



---

archive/issue_comments_350425.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@rwst](#comment:36):\n> That repo code is different enough and `clang-check` gives lots of errors. If we do this together, how to coordinate?\n\nIf you like to take the lead on this, please go ahead---I have my hands full with other things.",
    "created_at": "2017-07-03T13:17:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350425",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@rwst](#comment:36):
> That repo code is different enough and `clang-check` gives lots of errors. If we do this together, how to coordinate?

If you like to take the lead on this, please go ahead---I have my hands full with other things.



---

archive/issue_comments_350426.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@dimpase](#comment:37):\n> If you like to take the lead on this, please go ahead---I have my hands full with other things.\n\nNP. Actual code changes will go in a PR.",
    "created_at": "2017-07-03T13:20:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350426",
    "user": "https://github.com/rwst"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@dimpase](#comment:37):
> If you like to take the lead on this, please go ahead---I have my hands full with other things.

NP. Actual code changes will go in a PR.



---

archive/issue_comments_350427.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@rwst](#comment:38):\n> NP. Actual code changes will go in a PR.\n\nhttps://github.com/dimpase/lcalc/pull/1\n\nPlease review. I haven't worked on upgrading the Sage package, nor have I tested functionality.",
    "created_at": "2017-07-03T15:04:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350427",
    "user": "https://github.com/rwst"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@rwst](#comment:38):
> NP. Actual code changes will go in a PR.

https://github.com/dimpase/lcalc/pull/1

Please review. I haven't worked on upgrading the Sage package, nor have I tested functionality.



---

archive/issue_comments_350428.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nTwo questions about this ticket:\n\n1. Is it about lcalc itself, Sage modules using lcalc, or both?\n\n2. Instead of porting lcalc to C++11, is it an option to force `-std=c++98` instead?",
    "created_at": "2017-09-22T12:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350428",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

Two questions about this ticket:

1. Is it about lcalc itself, Sage modules using lcalc, or both?

2. Instead of porting lcalc to C++11, is it an option to force `-std=c++98` instead?



---

archive/issue_comments_350429.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-    porting lcalc to C++11\n+lcalc doesn't use standard C++:\n+\n+- `using namespace std;` needs an include with stuff from `std::` before it\n     \n-* \"using namespace std;\" need an include with stuff from std:: before it\n+- `typeof` is a gcc extension - C++11 has `decltype` instead\n     \n-* \"typeof\" is a gcc extension - C++11 has \"decltype\" instead\n-    \n-* plain C must not be compiled with C++ compiler - thus a makefile change\n+- plain C must not be compiled with C++ compiler - thus a makefile change\n \n``````\n",
    "created_at": "2017-09-22T12:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350429",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-    porting lcalc to C++11
+lcalc doesn't use standard C++:
+
+- `using namespace std;` needs an include with stuff from `std::` before it
     
-* "using namespace std;" need an include with stuff from std:: before it
+- `typeof` is a gcc extension - C++11 has `decltype` instead
     
-* "typeof" is a gcc extension - C++11 has "decltype" instead
-    
-* plain C must not be compiled with C++ compiler - thus a makefile change
+- plain C must not be compiled with C++ compiler - thus a makefile change
 
``````




---

archive/issue_comments_350430.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nHmm, maybe it's not a matter of porting to C++**11**, but just porting to proper C++ instead. At least `src/sage/libs/lcalc/lcalc_Lfunction.pyx` doesn't compile with `-std=c++98` either: it requires either `-std=gnu++98` or `-std=gnu++11`.",
    "created_at": "2017-09-22T12:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350430",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

Hmm, maybe it's not a matter of porting to C++**11**, but just porting to proper C++ instead. At least `src/sage/libs/lcalc/lcalc_Lfunction.pyx` doesn't compile with `-std=c++98` either: it requires either `-std=gnu++98` or `-std=gnu++11`.



---

archive/issue_comments_350431.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@kiwifb](#comment:13):\n> I think Dima started this with the view of compiling sage with `-std=c++11`. If that's what he is doing, getting https://bugs.python.org/issue1222585 in would be more pressing in my opinion.\n\nI created #7028 for that.",
    "created_at": "2017-09-22T13:34:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350431",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@kiwifb](#comment:13):
> I think Dima started this with the view of compiling sage with `-std=c++11`. If that's what he is doing, getting https://bugs.python.org/issue1222585 in would be more pressing in my opinion.

I created #7028 for that.



---

archive/issue_comments_350432.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThere is one more thing to add here; there is a macro `double(x)` defined in `include/Lcommon.h`, which does not seem to be used anywhere, and which causes havoc sometimes, e.g. if I try building with gcc on FreeBSD (due to cephes present)\n\nAnyway, hey, redefining a language keyword, yuck...",
    "created_at": "2017-09-24T20:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350432",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

There is one more thing to add here; there is a macro `double(x)` defined in `include/Lcommon.h`, which does not seem to be used anywhere, and which causes havoc sometimes, e.g. if I try building with gcc on FreeBSD (due to cephes present)

Anyway, hey, redefining a language keyword, yuck...



---

archive/issue_comments_350433.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nBecause of what I logged in my comments in #23898 it looks like current lcalc does not compile on OpenSuSE systems with system gcc-5.3.1. A patch is at [#23898 comment:39](https://github.com/sagemath/sage/issues/23898#comment:39).",
    "created_at": "2017-10-07T16:06:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350433",
    "user": "https://github.com/rwst"
}
```

<div id="comment:44" align="right">comment:44</div>

Because of what I logged in my comments in #23898 it looks like current lcalc does not compile on OpenSuSE systems with system gcc-5.3.1. A patch is at [#23898 comment:39](https://github.com/sagemath/sage/issues/23898#comment:39).



---

archive/issue_comments_350434.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@dimpase](#comment:43):\n> There is one more thing to add here; there is a macro `double(x)` defined in `include/Lcommon.h`, which does not seem to be used anywhere, and which causes havoc sometimes, e.g. if I try building with gcc on FreeBSD (due to cephes present)\n\nThis is outcommented in the github lcalc version which also, with the above PR, passes clang-check. It looks like an improvement. OTOH this ticket seems no longer pressing, as the Sage version compiles with clang too.\n\nThe attempt to replace Sage's lcalc with Pari (#24532) was dropped, so maybe it's an idea to at least upgrade it to the github version?",
    "created_at": "2018-02-19T16:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350434",
    "user": "https://github.com/rwst"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@dimpase](#comment:43):
> There is one more thing to add here; there is a macro `double(x)` defined in `include/Lcommon.h`, which does not seem to be used anywhere, and which causes havoc sometimes, e.g. if I try building with gcc on FreeBSD (due to cephes present)

This is outcommented in the github lcalc version which also, with the above PR, passes clang-check. It looks like an improvement. OTOH this ticket seems no longer pressing, as the Sage version compiles with clang too.

The attempt to replace Sage's lcalc with Pari (#24532) was dropped, so maybe it's an idea to at least upgrade it to the github version?



---

archive/issue_comments_350435.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI am all for it, but I'm a bit lost here. What stage are we at?",
    "created_at": "2018-02-21T14:43:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350435",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

I am all for it, but I'm a bit lost here. What stage are we at?



---

archive/issue_comments_350436.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@dimpase](#comment:46):\n> What stage are we at? \n\nThis is the first ticket that mentions the 2014 version at all I think.",
    "created_at": "2018-02-21T15:03:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350436",
    "user": "https://github.com/rwst"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@dimpase](#comment:46):
> What stage are we at? 

This is the first ticket that mentions the 2014 version at all I think.



---

archive/issue_comments_350437.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nThere is mention in [#11321 comment:8](https://github.com/sagemath/sage/issues/11321#comment:8) but this is only because patches were sent upstream.",
    "created_at": "2018-02-21T15:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350437",
    "user": "https://github.com/rwst"
}
```

<div id="comment:48" align="right">comment:48</div>

There is mention in [#11321 comment:8](https://github.com/sagemath/sage/issues/11321#comment:8) but this is only because patches were sent upstream.



---

archive/issue_comments_350438.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nThe github version defines itself in `CHANGE.LOG` and `include/cmdline.h` as v. 1.3, so we might stick to that and add something. I mean with that the name of the tarball later distributed, not our Sage patchlevel. I personally prefer ISO dates like 20180223 whenever possible.",
    "created_at": "2018-02-21T15:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350438",
    "user": "https://github.com/rwst"
}
```

<div id="comment:49" align="right">comment:49</div>

The github version defines itself in `CHANGE.LOG` and `include/cmdline.h` as v. 1.3, so we might stick to that and add something. I mean with that the name of the tarball later distributed, not our Sage patchlevel. I personally prefer ISO dates like 20180223 whenever possible.



---

archive/issue_comments_350439.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@rwst](#comment:49):\n> I personally prefer ISO dates like 20180223 whenever possible.\n\nWhat does the date refer to? If you are packaging something which does not have a naturally defined date, I wouldn't use a date. For packages created from a git repo, better use a git commit hash.",
    "created_at": "2018-02-21T15:38:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350439",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@rwst](#comment:49):
> I personally prefer ISO dates like 20180223 whenever possible.

What does the date refer to? If you are packaging something which does not have a naturally defined date, I wouldn't use a date. For packages created from a git repo, better use a git commit hash.



---

archive/issue_comments_350440.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@jdemeyer](#comment:50):\n> For packages created from a git repo, better use a git commit hash.\n\nThat's fine too.",
    "created_at": "2018-02-21T15:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350440",
    "user": "https://github.com/rwst"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@jdemeyer](#comment:50):
> For packages created from a git repo, better use a git commit hash.

That's fine too.



---

archive/issue_comments_350441.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThe changes to install the package without patches are now added to\nhttps://github.com/dimpase/lcalc/pull/1\nwhich eventually needs a review. ATM Sage does NOT build with it as compilation of the Cython module fails.\n\nOne problem worked around was that the use of FP type (double,mpfr,etc..) can be given to make but is not fixed in a header like with conf.h in other packages. I have hardcoded the type used until now (double) but this is an issue.",
    "created_at": "2018-02-22T10:04:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350441",
    "user": "https://github.com/rwst"
}
```

<div id="comment:52" align="right">comment:52</div>

The changes to install the package without patches are now added to
https://github.com/dimpase/lcalc/pull/1
which eventually needs a review. ATM Sage does NOT build with it as compilation of the Cython module fails.

One problem worked around was that the use of FP type (double,mpfr,etc..) can be given to make but is not fixed in a header like with conf.h in other packages. I have hardcoded the type used until now (double) but this is an issue.



---

archive/issue_comments_350442.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI've just looked at the pull request again - do you see my comments there?",
    "created_at": "2018-02-22T11:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350442",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:53" align="right">comment:53</div>

I've just looked at the pull request again - do you see my comments there?



---

archive/issue_comments_350443.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@dimpase](#comment:53):\n> I've just looked at the pull request again - do you see my comments there?\n\nYes, I have answered there.",
    "created_at": "2018-02-22T13:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350443",
    "user": "https://github.com/rwst"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@dimpase](#comment:53):
> I've just looked at the pull request again - do you see my comments there?

Yes, I have answered there.



---

archive/issue_comments_350444.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI opened #24280 with the changes on the Sage side. Testing yields mostly tolerance exceeded but also some different values that need a look.",
    "created_at": "2018-02-22T14:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350444",
    "user": "https://github.com/rwst"
}
```

<div id="comment:55" align="right">comment:55</div>

I opened #24280 with the changes on the Sage side. Testing yields mostly tolerance exceeded but also some different values that need a look.



---

archive/issue_comments_350445.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@rwst](#comment:55):\n> I opened #24280 with the changes on the Sage side. Testing yields mostly tolerance exceeded but also some different values that need a look.\n\nseems to be wrong reference, what is the correct ticket?",
    "created_at": "2018-02-22T20:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350445",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@rwst](#comment:55):
> I opened #24280 with the changes on the Sage side. Testing yields mostly tolerance exceeded but also some different values that need a look.

seems to be wrong reference, what is the correct ticket?



---

archive/issue_comments_350446.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nPlease see #24820.",
    "created_at": "2018-02-23T06:30:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350446",
    "user": "https://github.com/rwst"
}
```

<div id="comment:57" align="right">comment:57</div>

Please see #24820.



---

archive/issue_comments_350447.json:
```json
{
    "body": "Changed keywords from none to **lcalc**",
    "created_at": "2018-02-24T12:46:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350447",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **lcalc**



---

archive/issue_comments_350448.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThe ntl upgrade (#25532) depends on this. Is there a reason this (or #24820) isn't needs_review?",
    "created_at": "2018-07-10T12:12:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350448",
    "user": "https://github.com/timokau"
}
```

<div id="comment:59" align="right">comment:59</div>

The ntl upgrade (#25532) depends on this. Is there a reason this (or #24820) isn't needs_review?



---

archive/issue_comments_350449.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@timokau](#comment:59):\n> The ntl upgrade (#25532) depends on this. Is there a reason this (or #24820) isn't needs_review?\n\nI think #24820 is the newer attempt. It would be necessary to agree that either the Hardy-Z function is not defined for complex argument or lcalc is unable to compute the case. As I said in #24820, I have no idea about the usefulness of complex argument results. Do you?",
    "created_at": "2018-07-10T12:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350449",
    "user": "https://github.com/rwst"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@timokau](#comment:59):
> The ntl upgrade (#25532) depends on this. Is there a reason this (or #24820) isn't needs_review?

I think #24820 is the newer attempt. It would be necessary to agree that either the Hardy-Z function is not defined for complex argument or lcalc is unable to compute the case. As I said in #24820, I have no idea about the usefulness of complex argument results. Do you?



---

archive/issue_comments_350450.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@timokau](#comment:59):\n> The ntl upgrade (#25532) depends on this.\n\nAs I said on that ticket, the dependency itself could be considered a bug. It is probably easier to remove the dependency than fixing lcalc.",
    "created_at": "2018-07-10T12:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350450",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@timokau](#comment:59):
> The ntl upgrade (#25532) depends on this.

As I said on that ticket, the dependency itself could be considered a bug. It is probably easier to remove the dependency than fixing lcalc.



---

archive/issue_comments_350451.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@rwst](#comment:60):\n> Replying to [@timokau](#comment:59):\n> > The ntl upgrade (#25532) depends on this. Is there a reason this (or #24820) isn't needs_review?\n\n> \n> I think #24820 is the newer attempt. It would be necessary to agree that either the Hardy-Z function is not defined for complex argument or lcalc is unable to compute the case. As I said in #24820, I have no idea about the usefulness of complex argument results. Do you?\n\nUnfortunately I don't :/\n\nReplying to [@jdemeyer](#comment:61):\n> Replying to [@timokau](#comment:59):\n> > The ntl upgrade (#25532) depends on this.\n\n> \n> As I said on that ticket, the dependency itself could be considered a bug. It is probably easier to remove the dependency than fixing lcalc.\n\nAt least that would fix #25532. Isn't the dependency there for a reason?",
    "created_at": "2018-07-10T14:42:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350451",
    "user": "https://github.com/timokau"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@rwst](#comment:60):
> Replying to [@timokau](#comment:59):
> > The ntl upgrade (#25532) depends on this. Is there a reason this (or #24820) isn't needs_review?

> 
> I think #24820 is the newer attempt. It would be necessary to agree that either the Hardy-Z function is not defined for complex argument or lcalc is unable to compute the case. As I said in #24820, I have no idea about the usefulness of complex argument results. Do you?

Unfortunately I don't :/

Replying to [@jdemeyer](#comment:61):
> Replying to [@timokau](#comment:59):
> > The ntl upgrade (#25532) depends on this.

> 
> As I said on that ticket, the dependency itself could be considered a bug. It is probably easier to remove the dependency than fixing lcalc.

At least that would fix #25532. Isn't the dependency there for a reason?



---

archive/issue_comments_350452.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nI think it is time we move forward with this again. I think this ticket should also include the matching patch from arch in sagelib https://git.archlinux.org/svntogit/community.git/plain/trunk/sagemath-lcalc-c++11.patch?h=packages/sagemath&id=0e31ae526ab7c6b5c0bfacb3f8b1c4fd490035aa so that we really are just using C++11 and allow us to make progress on #25532.\n\nAny objections to moving forward with what we have now?",
    "created_at": "2018-10-31T00:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350452",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:63" align="right">comment:63</div>

I think it is time we move forward with this again. I think this ticket should also include the matching patch from arch in sagelib https://git.archlinux.org/svntogit/community.git/plain/trunk/sagemath-lcalc-c++11.patch?h=packages/sagemath&id=0e31ae526ab7c6b5c0bfacb3f8b1c4fd490035aa so that we really are just using C++11 and allow us to make progress on #25532.

Any objections to moving forward with what we have now?



---

archive/issue_comments_350453.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nYes this need the extra patch from arch I quoted. Otherwise sage's compilation fails because lcalc is no using construct that don't exist in gnu++98.",
    "created_at": "2018-10-31T20:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350453",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:64" align="right">comment:64</div>

Yes this need the extra patch from arch I quoted. Otherwise sage's compilation fails because lcalc is no using construct that don't exist in gnu++98.



---

archive/issue_events_324994.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-10-31T22:37:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324994"
}
```



---

archive/issue_events_324995.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-10-31T22:37:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324995"
}
```



---

archive/issue_comments_350454.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nLast call for patches. Please someone review. It would be good to have this in the next beta and be able to move on to #25532 and get it all done for 8.5.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/108d5817f524a214e133198a75bf22c9cc7080b8\">108d581</a></td><td><code>Merge branch 'develop' into lcalc_cxx11</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/834e7a6eb3c607a9ddd6fd384e0ca4b3bfd701a1\">834e7a6</a></td><td><code>lcalc version bump for rebuild</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/837732e21257e3d2ad14bff15424ea9cae197e1b\">837732e</a></td><td><code>remove enforcement of gnu++98 in lcalc bindings</code></td></tr></table>\n",
    "created_at": "2018-10-31T22:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350454",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:65" align="right">comment:65</div>

Last call for patches. Please someone review. It would be good to have this in the next beta and be able to move on to #25532 and get it all done for 8.5.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/108d5817f524a214e133198a75bf22c9cc7080b8">108d581</a></td><td><code>Merge branch 'develop' into lcalc_cxx11</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/834e7a6eb3c607a9ddd6fd384e0ca4b3bfd701a1">834e7a6</a></td><td><code>lcalc version bump for rebuild</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/837732e21257e3d2ad14bff15424ea9cae197e1b">837732e</a></td><td><code>remove enforcement of gnu++98 in lcalc bindings</code></td></tr></table>




---

archive/issue_comments_350455.json:
```json
{
    "body": "Changed commit from **[`666d6a3`](https://github.com/sagemath/sagetrac-mirror/commit/666d6a3d3de0d80ff8730dd3320f182b6f21368b)** to **[`837732e`](https://github.com/sagemath/sagetrac-mirror/commit/837732e21257e3d2ad14bff15424ea9cae197e1b)**",
    "created_at": "2018-10-31T22:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350455",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[`666d6a3`](https://github.com/sagemath/sagetrac-mirror/commit/666d6a3d3de0d80ff8730dd3320f182b6f21368b)** to **[`837732e`](https://github.com/sagemath/sagetrac-mirror/commit/837732e21257e3d2ad14bff15424ea9cae197e1b)**



---

archive/issue_comments_350456.json:
```json
{
    "body": "Author: **Dima Pasechnik, Fran\u00e7ois Bissey**",
    "created_at": "2018-10-31T22:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350456",
    "user": "https://github.com/kiwifb"
}
```

Author: **Dima Pasechnik, François Bissey**



---

archive/issue_events_324996.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-10-31T22:37:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324996"
}
```



---

archive/issue_comments_350457.json:
```json
{
    "body": "Changed branch from **[u/dimpase/lcalc_cxx11](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/lcalc_cxx11)** to **[u/fbissey/lcalc_cxx11](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/lcalc_cxx11)**",
    "created_at": "2018-10-31T22:37:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350457",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/dimpase/lcalc_cxx11](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/lcalc_cxx11)** to **[u/fbissey/lcalc_cxx11](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/lcalc_cxx11)**



---

archive/issue_comments_350458.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nAnyone interested in reviewing this?",
    "created_at": "2018-11-13T07:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350458",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:66" align="right">comment:66</div>

Anyone interested in reviewing this?



---

archive/issue_comments_350459.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\n1. Can you add some rationale for the changes to `Makefile`?\n\n2. I wouldn't make style changes such as\n\n```diff\n-\t\tloop(i,this->N,N)\n-\t\t\tcoeffs[i]=zero;\n+\t\tloop(i,this->N,N) coeffs[i]=zero;\n```",
    "created_at": "2018-11-13T09:41:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350459",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:67" align="right">comment:67</div>

1. Can you add some rationale for the changes to `Makefile`?

2. I wouldn't make style changes such as

```diff
-		loop(i,this->N,N)
-			coeffs[i]=zero;
+		loop(i,this->N,N) coeffs[i]=zero;
```



---

archive/issue_comments_350460.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@kiwifb](#comment:65):\n> It would be good to have this in the next beta and be able to move on to #25532\n\nAs I mentioned multiple times, I don't really think that #25532 must depend on this.",
    "created_at": "2018-11-13T09:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350460",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@kiwifb](#comment:65):
> It would be good to have this in the next beta and be able to move on to #25532

As I mentioned multiple times, I don't really think that #25532 must depend on this.



---

archive/issue_events_324997.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-11-13T09:42:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324997"
}
```



---

archive/issue_events_324998.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-11-13T09:42:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324998"
}
```



---

archive/issue_comments_350461.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@jdemeyer](#comment:68):\n> Replying to [@kiwifb](#comment:65):\n> > It would be good to have this in the next beta and be able to move on to #25532\n\n> \n> As I mentioned multiple times, I don't really think that #25532 must depend on this.\n\nWell, I tried to see if I could up ntl separately in sage-on-gentoo and sage wouldn't compile. It could be that I can tweak ntl's configuration to be compatible (at possible cost in ntl internal) but I'd rather get rid of the last bit of sage that is c++11 resistant (I think) and go with the natural flow again.",
    "created_at": "2018-11-13T09:50:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350461",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@jdemeyer](#comment:68):
> Replying to [@kiwifb](#comment:65):
> > It would be good to have this in the next beta and be able to move on to #25532

> 
> As I mentioned multiple times, I don't really think that #25532 must depend on this.

Well, I tried to see if I could up ntl separately in sage-on-gentoo and sage wouldn't compile. It could be that I can tweak ntl's configuration to be compatible (at possible cost in ntl internal) but I'd rather get rid of the last bit of sage that is c++11 resistant (I think) and go with the natural flow again.



---

archive/issue_comments_350462.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nMinor nitpick: wouldn't it be cleaner to replace `decltype(m) i=(m)` by `auto i = (m)`?",
    "created_at": "2018-11-13T09:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350462",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:71" align="right">comment:71</div>

Minor nitpick: wouldn't it be cleaner to replace `decltype(m) i=(m)` by `auto i = (m)`?



---

archive/issue_comments_350463.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@jdemeyer](#comment:71):\n> Minor nitpick: wouldn't it be cleaner to replace `decltype(m) i=(m)` by `auto i = (m)`?\n\nIt has indeed a better feel. A bit too late in the day for me to do any changes (safely), I'll go through your reviews in the morning.",
    "created_at": "2018-11-13T10:00:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350463",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@jdemeyer](#comment:71):
> Minor nitpick: wouldn't it be cleaner to replace `decltype(m) i=(m)` by `auto i = (m)`?

It has indeed a better feel. A bit too late in the day for me to do any changes (safely), I'll go through your reviews in the morning.



---

archive/issue_comments_350464.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [@kiwifb](#comment:72):\n> A bit too late in the day for me\n\nYou chose to live on the wrong side of the world :-)",
    "created_at": "2018-11-13T10:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350464",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [@kiwifb](#comment:72):
> A bit too late in the day for me

You chose to live on the wrong side of the world :-)



---

archive/issue_comments_350465.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@jdemeyer](#comment:73):\n> Replying to [@kiwifb](#comment:72):\n> > A bit too late in the day for me\n\n> \n> You chose to live on the wrong side of the world :-)\n\nWell it feels like it will be a nice summer. And not too hot, like our australian neighbors :-) but I really need to get some sleep now.",
    "created_at": "2018-11-13T10:06:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350465",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@jdemeyer](#comment:73):
> Replying to [@kiwifb](#comment:72):
> > A bit too late in the day for me

> 
> You chose to live on the wrong side of the world :-)

Well it feels like it will be a nice summer. And not too hot, like our australian neighbors :-) but I really need to get some sleep now.



---

archive/issue_comments_350466.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nIn your `Makefile` patch, the rule `$(CC) $(CFLAGS) $(INCLUDEFILES) -c cmdline.c` is just the standard build rule for `.c` files (modulo the typo `$(CFLAGS)`->`$(CCFLAGS)`). So it might be better to just restore the comment.",
    "created_at": "2018-11-13T10:19:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350466",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:75" align="right">comment:75</div>

In your `Makefile` patch, the rule `$(CC) $(CFLAGS) $(INCLUDEFILES) -c cmdline.c` is just the standard build rule for `.c` files (modulo the typo `$(CFLAGS)`->`$(CCFLAGS)`). So it might be better to just restore the comment.



---

archive/issue_comments_350467.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nOK some comments on the review from Jeroen which made me dig a bit deeper on the Makefile. I must say I adopted a slightly different approach in sage-on-gentoo so I don't have the same patch, but some of lesson learnt will definitely apply.\n\n* the original makefile defines CC as as g++ so that has to go.\n* Non standard flags like CCFLAGS are used, so Dima tried to use appropriate flags for both C and C++ compilers. And it also differentiate C and C++ flags which wasn't done before because even regular C code was passed to the C++ compiler.\n* The downside of using CFLAGS and CXXFLAGS inside the makefile is that regular options passed from the sage build system may need care if we want to inject them. That's a sage-on-gentoo difference I use `MYCXXFLAGS` so I can include whatever other flags we pass without worry.\n* Jeroen points out the standard rule for `.c` file should be used for `cmdline.c` except that the current patch erroneously define the rule as using CXXFLAGS instead of CFLAGS. Oopsie.\n\nPoint of difference with sage-on-gentoo: because pari headers are included in two files with `#include \"pari.h\"` the makefile has to define the location of pari headers and so do any code that include these headers. Decided that it was not worth it and patched to have `#include \"pari/pari.h\"` which is more sane and means that we don't have to worry about adding non standard includes. That means that I cut an extra bit of the makefile too. If people think that's a good idea I'll include that change in sage too.",
    "created_at": "2018-11-13T22:26:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350467",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:76" align="right">comment:76</div>

OK some comments on the review from Jeroen which made me dig a bit deeper on the Makefile. I must say I adopted a slightly different approach in sage-on-gentoo so I don't have the same patch, but some of lesson learnt will definitely apply.

* the original makefile defines CC as as g++ so that has to go.
* Non standard flags like CCFLAGS are used, so Dima tried to use appropriate flags for both C and C++ compilers. And it also differentiate C and C++ flags which wasn't done before because even regular C code was passed to the C++ compiler.
* The downside of using CFLAGS and CXXFLAGS inside the makefile is that regular options passed from the sage build system may need care if we want to inject them. That's a sage-on-gentoo difference I use `MYCXXFLAGS` so I can include whatever other flags we pass without worry.
* Jeroen points out the standard rule for `.c` file should be used for `cmdline.c` except that the current patch erroneously define the rule as using CXXFLAGS instead of CFLAGS. Oopsie.

Point of difference with sage-on-gentoo: because pari headers are included in two files with `#include "pari.h"` the makefile has to define the location of pari headers and so do any code that include these headers. Decided that it was not worth it and patched to have `#include "pari/pari.h"` which is more sane and means that we don't have to worry about adding non standard includes. That means that I cut an extra bit of the makefile too. If people think that's a good idea I'll include that change in sage too.



---

archive/issue_comments_350468.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@kiwifb](#comment:76):\n> because pari headers are included in two files with `#include \"pari.h\"` the makefile has to define the location of pari headers and so do any code that include these headers. Decided that it was not worth it and patched to have `#include \"pari/pari.h\"` which is more sane and means that we don't have to worry about adding non standard includes. That means that I cut an extra bit of the makefile too. If people think that's a good idea I'll include that change in sage too.\n\nThat makes sense to me.",
    "created_at": "2018-11-14T06:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350468",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@kiwifb](#comment:76):
> because pari headers are included in two files with `#include "pari.h"` the makefile has to define the location of pari headers and so do any code that include these headers. Decided that it was not worth it and patched to have `#include "pari/pari.h"` which is more sane and means that we don't have to worry about adding non standard includes. That means that I cut an extra bit of the makefile too. If people think that's a good idea I'll include that change in sage too.

That makes sense to me.



---

archive/issue_comments_350469.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8190cef7b754eeec86a7ee12395f5aa69fb74733\">8190cef</a></td><td><code>Correct inclusion of pari header so no extra -I flags are required.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71f8bf21c3db0dafb8276bf664f26fcb506f8614\">71f8bf2</a></td><td><code>update makefile patch and document it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb072d1119cd2305bb02cd8f8e00168e67f5cad6\">eb072d1</a></td><td><code>update the patch according to Jeroen's review. Add a correction of a \"std:\" which should have been \"std::\"</code></td></tr></table>\n",
    "created_at": "2018-11-14T21:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350469",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:78"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8190cef7b754eeec86a7ee12395f5aa69fb74733">8190cef</a></td><td><code>Correct inclusion of pari header so no extra -I flags are required.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71f8bf21c3db0dafb8276bf664f26fcb506f8614">71f8bf2</a></td><td><code>update makefile patch and document it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb072d1119cd2305bb02cd8f8e00168e67f5cad6">eb072d1</a></td><td><code>update the patch according to Jeroen's review. Add a correction of a "std:" which should have been "std::"</code></td></tr></table>




---

archive/issue_comments_350470.json:
```json
{
    "body": "Changed commit from **[`837732e`](https://github.com/sagemath/sagetrac-mirror/commit/837732e21257e3d2ad14bff15424ea9cae197e1b)** to **[`eb072d1`](https://github.com/sagemath/sagetrac-mirror/commit/eb072d1119cd2305bb02cd8f8e00168e67f5cad6)**",
    "created_at": "2018-11-14T21:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350470",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`837732e`](https://github.com/sagemath/sagetrac-mirror/commit/837732e21257e3d2ad14bff15424ea9cae197e1b)** to **[`eb072d1`](https://github.com/sagemath/sagetrac-mirror/commit/eb072d1119cd2305bb02cd8f8e00168e67f5cad6)**



---

archive/issue_comments_350471.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nAll right back to review.",
    "created_at": "2018-11-14T22:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350471",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:79" align="right">comment:79</div>

All right back to review.



---

archive/issue_events_324999.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-11-14T22:00:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-324999"
}
```



---

archive/issue_events_325000.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-11-14T22:00:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325000"
}
```



---

archive/issue_comments_350472.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fb7f80a02461137b5e1e80cfd5fae6ba9784b6a\">3fb7f80</a></td><td><code>std: was introduced in the clang patch. Correcting in that patch.</code></td></tr></table>\n",
    "created_at": "2018-11-14T22:31:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350472",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fb7f80a02461137b5e1e80cfd5fae6ba9784b6a">3fb7f80</a></td><td><code>std: was introduced in the clang patch. Correcting in that patch.</code></td></tr></table>




---

archive/issue_comments_350473.json:
```json
{
    "body": "Changed commit from **[`eb072d1`](https://github.com/sagemath/sagetrac-mirror/commit/eb072d1119cd2305bb02cd8f8e00168e67f5cad6)** to **[`3fb7f80`](https://github.com/sagemath/sagetrac-mirror/commit/3fb7f80a02461137b5e1e80cfd5fae6ba9784b6a)**",
    "created_at": "2018-11-14T22:31:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350473",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eb072d1`](https://github.com/sagemath/sagetrac-mirror/commit/eb072d1119cd2305bb02cd8f8e00168e67f5cad6)** to **[`3fb7f80`](https://github.com/sagemath/sagetrac-mirror/commit/3fb7f80a02461137b5e1e80cfd5fae6ba9784b6a)**



---

archive/issue_comments_350474.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nSo many patches! It is hard to figure if the thing you patch was introduced by another patch :P",
    "created_at": "2018-11-14T22:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350474",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:81" align="right">comment:81</div>

So many patches! It is hard to figure if the thing you patch was introduced by another patch :P



---

archive/issue_comments_350475.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nThis appears to work with clang 6.0.1, a good sign.",
    "created_at": "2018-11-17T13:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350475",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:82" align="right">comment:82</div>

This appears to work with clang 6.0.1, a good sign.



---

archive/issue_comments_350476.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@dimpase](#comment:82):\n> This appears to work with clang 6.0.1, a good sign.\n\nI have checked clang-6 and gcc-8.2. Now if someone would put a kind review.\n\nAlthough Dima, I kept the patch name \"using_namespace_std.patch` but there is hardly any of that in there. Just removing GNU-ism. Did you have more stuff to do in mind?",
    "created_at": "2018-11-21T00:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350476",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@dimpase](#comment:82):
> This appears to work with clang 6.0.1, a good sign.

I have checked clang-6 and gcc-8.2. Now if someone would put a kind review.

Although Dima, I kept the patch name "using_namespace_std.patch` but there is hardly any of that in there. Just removing GNU-ism. Did you have more stuff to do in mind?



---

archive/issue_events_325001.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-21T11:01:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325001"
}
```



---

archive/issue_events_325002.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-21T11:01:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325002"
}
```



---

archive/issue_comments_350477.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nOK",
    "created_at": "2018-11-21T11:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350477",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:84" align="right">comment:84</div>

OK



---

archive/issue_comments_350478.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik, Fran\u00e7ois Bissey, Jeroen Demeyer, Ralf Stephan**",
    "created_at": "2018-11-21T11:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350478",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik, François Bissey, Jeroen Demeyer, Ralf Stephan**



---

archive/issue_comments_350479.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nThank you @kiwifb for pushing this forward, happy to have one less patch to apply :)",
    "created_at": "2018-11-21T11:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350479",
    "user": "https://github.com/timokau"
}
```

<div id="comment:85" align="right">comment:85</div>

Thank you @kiwifb for pushing this forward, happy to have one less patch to apply :)



---

archive/issue_events_325003.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-22T13:13:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325003"
}
```



---

archive/issue_events_325004.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-22T13:13:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325004"
}
```



---

archive/issue_comments_350480.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nOn some machines this fails with:\n\n```\nmake libLfunction.so\nmake[5]: Entering directory '/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/lcalc-1.23.p17/src/src'\ng++ -O3   -ffast-math -fPIC   -I../include -c Lglobals.cc\nIn file included from ../include/Lglobals.h:48:0,\n                 from Lglobals.cc:23:\n../include/Lcommon.h: In member function 'void smallPoly<T>::resize(int)':\n../include/Lcommon.h:71:8: error: 'i' does not name a type\n   loop(i,this->N,N)\n        ^\n../include/Lcommon.h:51:30: note: in definition of macro 'loop'\n #define loop(i,m,n) for(auto i=(m); i!=(n); i++)\n                              ^\n```\nI guess the -std=c11 is missing in the gcc invocation...",
    "created_at": "2018-11-22T13:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350480",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:86" align="right">comment:86</div>

On some machines this fails with:

```
make libLfunction.so
make[5]: Entering directory '/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/lcalc-1.23.p17/src/src'
g++ -O3   -ffast-math -fPIC   -I../include -c Lglobals.cc
In file included from ../include/Lglobals.h:48:0,
                 from Lglobals.cc:23:
../include/Lcommon.h: In member function 'void smallPoly<T>::resize(int)':
../include/Lcommon.h:71:8: error: 'i' does not name a type
   loop(i,this->N,N)
        ^
../include/Lcommon.h:51:30: note: in definition of macro 'loop'
 #define loop(i,m,n) for(auto i=(m); i!=(n); i++)
                              ^
```
I guess the -std=c11 is missing in the gcc invocation...



---

archive/issue_comments_350481.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nOf course I tested with compilers that default to C++11 or C++14 so that would make sense. Will fix ASAP.",
    "created_at": "2018-11-22T17:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350481",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:87" align="right">comment:87</div>

Of course I tested with compilers that default to C++11 or C++14 so that would make sense. Will fix ASAP.



---

archive/issue_comments_350482.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\n`lcalc` has both `spkg-build` and `spkg-install`, the `-std=c++11` was only added to `spkg-install` which explains the result. I am going to further inspect those for improvement.",
    "created_at": "2018-11-22T20:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350482",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:88" align="right">comment:88</div>

`lcalc` has both `spkg-build` and `spkg-install`, the `-std=c++11` was only added to `spkg-install` which explains the result. I am going to further inspect those for improvement.



---

archive/issue_comments_350483.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cf967fa5f50daf67e9a910786970bf184c37ecb\">7cf967f</a></td><td><code>make sure -std=c++11 is passed during build. Various improvement to spkg-build and spkg-install.</code></td></tr></table>\n",
    "created_at": "2018-11-22T21:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350483",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cf967fa5f50daf67e9a910786970bf184c37ecb">7cf967f</a></td><td><code>make sure -std=c++11 is passed during build. Various improvement to spkg-build and spkg-install.</code></td></tr></table>




---

archive/issue_comments_350484.json:
```json
{
    "body": "Changed commit from **[`3fb7f80`](https://github.com/sagemath/sagetrac-mirror/commit/3fb7f80a02461137b5e1e80cfd5fae6ba9784b6a)** to **[`7cf967f`](https://github.com/sagemath/sagetrac-mirror/commit/7cf967fa5f50daf67e9a910786970bf184c37ecb)**",
    "created_at": "2018-11-22T21:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350484",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3fb7f80`](https://github.com/sagemath/sagetrac-mirror/commit/3fb7f80a02461137b5e1e80cfd5fae6ba9784b6a)** to **[`7cf967f`](https://github.com/sagemath/sagetrac-mirror/commit/7cf967fa5f50daf67e9a910786970bf184c37ecb)**



---

archive/issue_events_325005.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-11-22T21:05:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325005"
}
```



---

archive/issue_events_325006.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-11-22T21:05:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325006"
}
```



---

archive/issue_comments_350485.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nBack to need review.",
    "created_at": "2018-11-22T21:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350485",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:90" align="right">comment:90</div>

Back to need review.



---

archive/issue_events_325007.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-22T21:22:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325007"
}
```



---

archive/issue_events_325008.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-22T21:22:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325008"
}
```



---

archive/issue_comments_350486.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nover to the bots!",
    "created_at": "2018-11-22T21:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350486",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:91" align="right">comment:91</div>

over to the bots!



---

archive/issue_comments_350487.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@dimpase](#comment:91):\n> over to the bots!\n\nThank you Dima. Once we have closure here, I would appreciate if you could push the review button on #25532 for the ntl upgrade.",
    "created_at": "2018-11-23T01:06:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350487",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@dimpase](#comment:91):
> over to the bots!

Thank you Dima. Once we have closure here, I would appreciate if you could push the review button on #25532 for the ntl upgrade.



---

archive/issue_comments_350488.json:
```json
{
    "body": "Changed branch from **[u/fbissey/lcalc_cxx11](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/lcalc_cxx11)** to **[`7cf967f`](https://github.com/sagemath/sagetrac-mirror/commit/7cf967fa5f50daf67e9a910786970bf184c37ecb)**",
    "created_at": "2018-11-23T21:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23341#issuecomment-350488",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/fbissey/lcalc_cxx11](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/lcalc_cxx11)** to **[`7cf967f`](https://github.com/sagemath/sagetrac-mirror/commit/7cf967fa5f50daf67e9a910786970bf184c37ecb)**



---

archive/issue_events_325009.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-23T21:42:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325009"
}
```



---

archive/issue_events_325010.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "269bd3da7684ac03313641b09c75424dd98e6c9b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-11-23T21:42:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23341",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23341#event-325010"
}
```
