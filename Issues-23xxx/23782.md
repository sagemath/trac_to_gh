# Issue 23782: fricas output and sage conversion bug

archive/issues_023545.json:
```json
{
    "assignees": [],
    "body": "In 'SageMath version 8.1.beta0, Release Date: 2017-07-29' I have the following behaviour, (at least with FriCAS 1.2.5)\n\n```\ndef elementary(k, j):\n    \"\"\"\n    sage: f = fricas.guessRat([elementary(5,j) for j in range(15)])[0]; f\n    10      9      8      7       6      5       4      3       2\n    3n   - 25n  + 50n  + 62n  - 229n  - 25n  + 320n  - 12n  - 144n\n    ---------------------------------------------------------------\n                                 11520\n\n    sage: print fricas.get(f._name)\n      10      9      8      7       6      5       4      3       2\n    3n   - 25n  + 50n  + 62n  - 229n  - 25n  + 320n  - 12n  - 144n\n    ---------------------------------------------------------------\n                                 11520\n\n    sage: f.sage()\n    NotImplementedError: The translation of the FriCAS Expression \"(3*n^10+-25*n^9+50*n^8+62*n^7+-229*n^6+-25*n^5+320*n^4+-12*n^3+-144*n^2)/11520 to sage is not yet implemented.\n    \"\"\"\n    return stirling_number1(j+1, j+1-k)\n```\nNote the bad indentation in the second line and the weird quotation mark in the third.\n\nFixing #22525 would probably fix this, too.\n\nDepends on #22525\n\n**CC:**  @simon-king-jena @fchapoton @rwst\n\n**Keywords:** FriCAS\n\n**Branch/Commit:** [2521f3a9556ea763d418df9e04b36e84b6137cb3](https://github.com/sagemath/sagetrac-mirror/commit/2521f3a9556ea763d418df9e04b36e84b6137cb3)\n\n**Reviewer:** Ralf Stephan\n\n**Author:** Martin Rubey\n\nIssue created by migration from https://trac.sagemath.org/ticket/23782\n\n",
    "closed_at": "2017-10-01T00:19:04Z",
    "created_at": "2017-09-04T19:24:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fricas output and sage conversion bug",
    "type": "issue",
    "updated_at": "2017-10-01T00:19:04Z",
    "url": "https://github.com/sagemath/sage/issues/23782",
    "user": "https://github.com/mantepse"
}
```
In 'SageMath version 8.1.beta0, Release Date: 2017-07-29' I have the following behaviour, (at least with FriCAS 1.2.5)

```
def elementary(k, j):
    """
    sage: f = fricas.guessRat([elementary(5,j) for j in range(15)])[0]; f
    10      9      8      7       6      5       4      3       2
    3n   - 25n  + 50n  + 62n  - 229n  - 25n  + 320n  - 12n  - 144n
    ---------------------------------------------------------------
                                 11520

    sage: print fricas.get(f._name)
      10      9      8      7       6      5       4      3       2
    3n   - 25n  + 50n  + 62n  - 229n  - 25n  + 320n  - 12n  - 144n
    ---------------------------------------------------------------
                                 11520

    sage: f.sage()
    NotImplementedError: The translation of the FriCAS Expression "(3*n^10+-25*n^9+50*n^8+62*n^7+-229*n^6+-25*n^5+320*n^4+-12*n^3+-144*n^2)/11520 to sage is not yet implemented.
    """
    return stirling_number1(j+1, j+1-k)
```
Note the bad indentation in the second line and the weird quotation mark in the third.

Fixing #22525 would probably fix this, too.

Depends on #22525

**CC:**  @simon-king-jena @fchapoton @rwst

**Keywords:** FriCAS

**Branch/Commit:** [2521f3a9556ea763d418df9e04b36e84b6137cb3](https://github.com/sagemath/sagetrac-mirror/commit/2521f3a9556ea763d418df9e04b36e84b6137cb3)

**Reviewer:** Ralf Stephan

**Author:** Martin Rubey

Issue created by migration from https://trac.sagemath.org/ticket/23782





---

archive/issue_events_287293.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-04T19:24:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287293"
}
```



---

archive/issue_events_287294.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-04T19:24:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces%3A%20optional",
    "label_color": "08517b",
    "label_name": "component: interfaces: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287294"
}
```



---

archive/issue_comments_361260.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"FriCAS\".",
    "created_at": "2017-09-05T06:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361260",
    "user": "https://github.com/fchapoton"
}
```

**Changing keywords** from "" to "FriCAS".



---

archive/issue_comments_361261.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis seems to work after #21377",
    "created_at": "2017-09-06T11:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361261",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
This seems to work after #21377



---

archive/issue_comments_361262.json:
```json
{
    "body": "<a id='comment:3'></a>\nAfter #21377 I still get the bad indentation, but the error is gone.  So I vote to close...\n\nI'll put the remark concerning the bad indentation on #21377.",
    "created_at": "2017-09-06T16:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361262",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:3'></a>
After #21377 I still get the bad indentation, but the error is gone.  So I vote to close...

I'll put the remark concerning the bad indentation on #21377.



---

archive/issue_comments_361263.json:
```json
{
    "body": "<a id='comment:4'></a>\nI just realised that I had a sage 7.5.beta3 lying around:\n\nthe display bug was introduced **after** 7.5.beta3 - the bug with the quotation mark existed **already** in 7.5.beta3!",
    "created_at": "2017-09-12T06:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361263",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:4'></a>
I just realised that I had a sage 7.5.beta3 lying around:

the display bug was introduced **after** 7.5.beta3 - the bug with the quotation mark existed **already** in 7.5.beta3!



---

archive/issue_events_287295.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-12T06:16:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287295"
}
```



---

archive/issue_comments_361264.json:
```json
{
    "body": "<a id='comment:5'></a>\nMoreover, there is no change in the code of `fricas.py` between sage 7.5.beta3 and 8.0.beta12, which is the first version I have on my computer where the bug appears.\n\nI have no idea what could have changed - I'm afraid I need to bisect.",
    "created_at": "2017-09-12T06:24:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361264",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:5'></a>
Moreover, there is no change in the code of `fricas.py` between sage 7.5.beta3 and 8.0.beta12, which is the first version I have on my computer where the bug appears.

I have no idea what could have changed - I'm afraid I need to bisect.



---

archive/issue_comments_361265.json:
```json
{
    "body": "<a id='comment:6'></a>\n\n```\nsage:  fricas('(1 + sqrt(2))^5')\n\n+-+\n29\\|2  + 41\nsage: a= fricas('(1 + sqrt(2))^5')\nsage: print a\n+-+\n29\\|2  + 41\nsage: print fricas.get(a._name)\n   +-+\n29\\|2  + 41\nsage: repr(a)\n'+-+\\r\\n29\\\\|2  + 41'\nsage: fricas.get(a._name)\n'   +-+\\r\\n29\\\\|2  + 41'\n```",
    "created_at": "2017-09-12T06:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361265",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:6'></a>

```
sage:  fricas('(1 + sqrt(2))^5')

+-+
29\|2  + 41
sage: a= fricas('(1 + sqrt(2))^5')
sage: print a
+-+
29\|2  + 41
sage: print fricas.get(a._name)
   +-+
29\|2  + 41
sage: repr(a)
'+-+\r\n29\\|2  + 41'
sage: fricas.get(a._name)
'   +-+\r\n29\\|2  + 41'
```



---

archive/issue_comments_361266.json:
```json
{
    "body": "<a id='comment:7'></a>\nOK, I found it:\n\n```\ncommit 5082c96e79a15b34779a0c9b0b43d652cdade31c\nAuthor: Simon King <simon.king@uni-jena.de>\nDate:   Tue Mar 14 14:53:36 2017 +0100\n\n    Use single underscore _repr_ in interfaces, add more documentation concerning eval and get\n```\nintroduced this change in #22501:\n\n```\n+    def _repr_(self):\n+        \"\"\"\n+        Default implementation of a helper method for string representation.\n...\n+        \"\"\"\n+        P = self.parent()\n+        try:\n+            if self._get_using_file:\n+                return P.get_using_file(self._name).strip()\n+        except AttributeError:\n+            return self.parent().get(self._name).strip()\n```\n\nI think the strip should go away.  The other solution is to override it in `fricas.py`, but I really cannot think of a situation where we really want the `strip`.  Output will often be ascii-art in interfaces, and this is a default implementation.",
    "created_at": "2017-09-12T06:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361266",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:7'></a>
OK, I found it:

```
commit 5082c96e79a15b34779a0c9b0b43d652cdade31c
Author: Simon King <simon.king@uni-jena.de>
Date:   Tue Mar 14 14:53:36 2017 +0100

    Use single underscore _repr_ in interfaces, add more documentation concerning eval and get
```
introduced this change in #22501:

```
+    def _repr_(self):
+        """
+        Default implementation of a helper method for string representation.
...
+        """
+        P = self.parent()
+        try:
+            if self._get_using_file:
+                return P.get_using_file(self._name).strip()
+        except AttributeError:
+            return self.parent().get(self._name).strip()
```

I think the strip should go away.  The other solution is to override it in `fricas.py`, but I really cannot think of a situation where we really want the `strip`.  Output will often be ascii-art in interfaces, and this is a default implementation.



---

archive/issue_comments_361267.json:
```json
{
    "body": "<a id='comment:8'></a>\nI want to add that I commented on #22501 that fricas tests would be passing.  This means that I made a mistake then, so the blame is on me.",
    "created_at": "2017-09-12T06:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361267",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:8'></a>
I want to add that I commented on #22501 that fricas tests would be passing.  This means that I made a mistake then, so the blame is on me.



---

archive/issue_comments_361268.json:
```json
{
    "body": "**Branch:** [u/mantepse/fricas_output_and_sage_conversion_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/fricas_output_and_sage_conversion_bug)",
    "created_at": "2017-09-12T08:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361268",
    "user": "https://github.com/mantepse"
}
```

**Branch:** [u/mantepse/fricas_output_and_sage_conversion_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/fricas_output_and_sage_conversion_bug)



---

archive/issue_comments_361269.json:
```json
{
    "body": "**Commit:** [20f1d4b42bfc840406e0db132a8970dbf561ff61](https://github.com/sagemath/sagetrac-mirror/commit/20f1d4b42bfc840406e0db132a8970dbf561ff61)",
    "created_at": "2017-09-12T08:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361269",
    "user": "https://github.com/mantepse"
}
```

**Commit:** [20f1d4b42bfc840406e0db132a8970dbf561ff61](https://github.com/sagemath/sagetrac-mirror/commit/20f1d4b42bfc840406e0db132a8970dbf561ff61)



---

archive/issue_comments_361270.json:
```json
{
    "body": "**Author:** Martin Rubey",
    "created_at": "2017-09-12T08:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361270",
    "user": "https://github.com/mantepse"
}
```

**Author:** Martin Rubey



---

archive/issue_comments_361271.json:
```json
{
    "body": "<a id='comment:10'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20f1d4b42bfc840406e0db132a8970dbf561ff61\">20f1d4b</a></td><td><code>do not strip output in default InterfaceElement._repr_</code></td></tr></table>\n",
    "created_at": "2017-09-12T08:22:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361271",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:10'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20f1d4b42bfc840406e0db132a8970dbf561ff61">20f1d4b</a></td><td><code>do not strip output in default InterfaceElement._repr_</code></td></tr></table>




---

archive/issue_events_287296.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-12T08:22:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287296"
}
```



---

archive/issue_comments_361272.json:
```json
{
    "body": "<a id='comment:11'></a>\nI would suggest to use rstrip instead of strip.",
    "created_at": "2017-09-12T08:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361272",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>
I would suggest to use rstrip instead of strip.



---

archive/issue_comments_361273.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e72d438cbce766972d66af7516b851c82a62ca7\">5e72d43</a></td><td><code>add a test for the weird quotation mark issue</code></td></tr></table>\n",
    "created_at": "2017-09-12T08:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361273",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e72d438cbce766972d66af7516b851c82a62ca7">5e72d43</a></td><td><code>add a test for the weird quotation mark issue</code></td></tr></table>




---

archive/issue_comments_361274.json:
```json
{
    "body": "**Changing commit** from \"[20f1d4b42bfc840406e0db132a8970dbf561ff61](https://github.com/sagemath/sagetrac-mirror/commit/20f1d4b42bfc840406e0db132a8970dbf561ff61)\" to \"[5e72d438cbce766972d66af7516b851c82a62ca7](https://github.com/sagemath/sagetrac-mirror/commit/5e72d438cbce766972d66af7516b851c82a62ca7)\".",
    "created_at": "2017-09-12T08:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361274",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[20f1d4b42bfc840406e0db132a8970dbf561ff61](https://github.com/sagemath/sagetrac-mirror/commit/20f1d4b42bfc840406e0db132a8970dbf561ff61)" to "[5e72d438cbce766972d66af7516b851c82a62ca7](https://github.com/sagemath/sagetrac-mirror/commit/5e72d438cbce766972d66af7516b851c82a62ca7)".



---

archive/issue_comments_361275.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@fchapoton](#comment%3A11):\n> I would suggest to use rstrip instead of strip.\n\nI agree that this is a sensible possibility, but I'm not completely sure.\n\nCan you think of any surprising results with rstrip?",
    "created_at": "2017-09-12T08:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361275",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:13'></a>
Replying to [@fchapoton](#comment%3A11):
> I would suggest to use rstrip instead of strip.

I agree that this is a sensible possibility, but I'm not completely sure.

Can you think of any surprising results with rstrip?



---

archive/issue_comments_361276.json:
```json
{
    "body": "**Changing commit** from \"[5e72d438cbce766972d66af7516b851c82a62ca7](https://github.com/sagemath/sagetrac-mirror/commit/5e72d438cbce766972d66af7516b851c82a62ca7)\" to \"[4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c](https://github.com/sagemath/sagetrac-mirror/commit/4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c)\".",
    "created_at": "2017-09-12T09:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361276",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5e72d438cbce766972d66af7516b851c82a62ca7](https://github.com/sagemath/sagetrac-mirror/commit/5e72d438cbce766972d66af7516b851c82a62ca7)" to "[4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c](https://github.com/sagemath/sagetrac-mirror/commit/4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c)".



---

archive/issue_comments_361277.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c\">4520a6e</a></td><td><code>use rstrip in `_repr_` (instead of original strip and instead of nothing), adapt tests</code></td></tr></table>\n",
    "created_at": "2017-09-12T09:37:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361277",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c">4520a6e</a></td><td><code>use rstrip in `_repr_` (instead of original strip and instead of nothing), adapt tests</code></td></tr></table>




---

archive/issue_comments_361278.json:
```json
{
    "body": "<a id='comment:15'></a>\nI tested fricas, lie and gap3.  Unfortunately, gap3 is failing, but I do not know yet whether the failures are related to this ticket.",
    "created_at": "2017-09-12T09:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361278",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:15'></a>
I tested fricas, lie and gap3.  Unfortunately, gap3 is failing, but I do not know yet whether the failures are related to this ticket.



---

archive/issue_comments_361279.json:
```json
{
    "body": "<a id='comment:16'></a>\nI get the same failures in all other versions of sage I have lying around...  So I think that this is really ready to go.  Please review!",
    "created_at": "2017-09-12T09:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361279",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:16'></a>
I get the same failures in all other versions of sage I have lying around...  So I think that this is really ready to go.  Please review!



---

archive/issue_comments_361280.json:
```json
{
    "body": "<a id='comment:17'></a>\n`Check that #23782 is fixed:`\n\nshould be\n\n<code>Check that :trac:\\`23782\\` is fixed::</code>",
    "created_at": "2017-09-12T09:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361280",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>
`Check that #23782 is fixed:`

should be

<code>Check that :trac:\`23782\` is fixed::</code>



---

archive/issue_comments_361281.json:
```json
{
    "body": "<a id='comment:18'></a>\nnote also that \"atan\" will be converted to \"arctan\" after #22525",
    "created_at": "2017-09-12T10:09:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361281",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>
note also that "atan" will be converted to "arctan" after #22525



---

archive/issue_comments_361282.json:
```json
{
    "body": "**Changing commit** from \"[4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c](https://github.com/sagemath/sagetrac-mirror/commit/4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c)\" to \"[b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0](https://github.com/sagemath/sagetrac-mirror/commit/b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0)\".",
    "created_at": "2017-09-12T10:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361282",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c](https://github.com/sagemath/sagetrac-mirror/commit/4520a6e734c35ce816bfcc0e7e8b6c5b0b3f6c7c)" to "[b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0](https://github.com/sagemath/sagetrac-mirror/commit/b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0)".



---

archive/issue_comments_361283.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0\">b0ab79f</a></td><td><code>fix reference to trac</code></td></tr></table>\n",
    "created_at": "2017-09-12T10:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361283",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0">b0ab79f</a></td><td><code>fix reference to trac</code></td></tr></table>




---

archive/issue_comments_361284.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [@fchapoton](#comment%3A18):\n> note also that \"atan\" will be converted to \"arctan\" after #22525\n\nyes, I just looked at it, and have a branch that only adds some testcases - I would set it to positive review there and make this one a dependency.  Or would you prefer it the other way round?",
    "created_at": "2017-09-12T10:14:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361284",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:20'></a>
Replying to [@fchapoton](#comment%3A18):
> note also that "atan" will be converted to "arctan" after #22525

yes, I just looked at it, and have a branch that only adds some testcases - I would set it to positive review there and make this one a dependency.  Or would you prefer it the other way round?



---

archive/issue_comments_361285.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe branch here is slightly more problematic, because you change the behaviour of all the interfaces and this needs serious checking. The other one should be easier and go first, imho.",
    "created_at": "2017-09-12T10:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361285",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>
The branch here is slightly more problematic, because you change the behaviour of all the interfaces and this needs serious checking. The other one should be easier and go first, imho.



---

archive/issue_comments_361286.json:
```json
{
    "body": "<a id='comment:22'></a>\nI agree.  So let's do the other one first.  I have problems with checking out right now, though.",
    "created_at": "2017-09-12T10:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361286",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:22'></a>
I agree.  So let's do the other one first.  I have problems with checking out right now, though.



---

archive/issue_comments_361287.json:
```json
{
    "body": "<a id='comment:23'></a>\nI'll undo the modified line in integral.py after recompiling.",
    "created_at": "2017-09-12T10:34:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361287",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:23'></a>
I'll undo the modified line in integral.py after recompiling.



---

archive/issue_comments_361288.json:
```json
{
    "body": "**Dependencies:** #22525",
    "created_at": "2017-09-12T10:34:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361288",
    "user": "https://github.com/mantepse"
}
```

**Dependencies:** #22525



---

archive/issue_comments_361289.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4a44f633790effdff1d4123e8a7a7c3155e9c9e\">c4a44f6</a></td><td><code>undo edit of test output - this is fixed by #22525 anyway</code></td></tr></table>\n",
    "created_at": "2017-09-12T11:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361289",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4a44f633790effdff1d4123e8a7a7c3155e9c9e">c4a44f6</a></td><td><code>undo edit of test output - this is fixed by #22525 anyway</code></td></tr></table>




---

archive/issue_comments_361290.json:
```json
{
    "body": "**Changing commit** from \"[b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0](https://github.com/sagemath/sagetrac-mirror/commit/b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0)\" to \"[c4a44f633790effdff1d4123e8a7a7c3155e9c9e](https://github.com/sagemath/sagetrac-mirror/commit/c4a44f633790effdff1d4123e8a7a7c3155e9c9e)\".",
    "created_at": "2017-09-12T11:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361290",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0](https://github.com/sagemath/sagetrac-mirror/commit/b0ab79f9b3da0cd5862a9438e6f0d34b7947c4d0)" to "[c4a44f633790effdff1d4123e8a7a7c3155e9c9e](https://github.com/sagemath/sagetrac-mirror/commit/c4a44f633790effdff1d4123e8a7a7c3155e9c9e)".



---

archive/issue_comments_361291.json:
```json
{
    "body": "<a id='comment:25'></a>\nI think this is ready now.",
    "created_at": "2017-09-12T11:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361291",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:25'></a>
I think this is ready now.



---

archive/issue_comments_361292.json:
```json
{
    "body": "<a id='comment:26'></a>\nThere will be a merge conflict - I guess it's easiest to fix it when #22525 is merged.",
    "created_at": "2017-09-12T11:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361292",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:26'></a>
There will be a merge conflict - I guess it's easiest to fix it when #22525 is merged.



---

archive/issue_comments_361293.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2521f3a9556ea763d418df9e04b36e84b6137cb3\">2521f3a</a></td><td><code>Merge branch 'develop' into t/23782/fricas_output_and_sage_conversion_bug</code></td></tr></table>\n",
    "created_at": "2017-09-22T06:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361293",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2521f3a9556ea763d418df9e04b36e84b6137cb3">2521f3a</a></td><td><code>Merge branch 'develop' into t/23782/fricas_output_and_sage_conversion_bug</code></td></tr></table>




---

archive/issue_comments_361294.json:
```json
{
    "body": "**Changing commit** from \"[c4a44f633790effdff1d4123e8a7a7c3155e9c9e](https://github.com/sagemath/sagetrac-mirror/commit/c4a44f633790effdff1d4123e8a7a7c3155e9c9e)\" to \"[2521f3a9556ea763d418df9e04b36e84b6137cb3](https://github.com/sagemath/sagetrac-mirror/commit/2521f3a9556ea763d418df9e04b36e84b6137cb3)\".",
    "created_at": "2017-09-22T06:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361294",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c4a44f633790effdff1d4123e8a7a7c3155e9c9e](https://github.com/sagemath/sagetrac-mirror/commit/c4a44f633790effdff1d4123e8a7a7c3155e9c9e)" to "[2521f3a9556ea763d418df9e04b36e84b6137cb3](https://github.com/sagemath/sagetrac-mirror/commit/2521f3a9556ea763d418df9e04b36e84b6137cb3)".



---

archive/issue_comments_361295.json:
```json
{
    "body": "<a id='comment:29'></a>\nping?",
    "created_at": "2017-09-26T07:22:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361295",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:29'></a>
ping?



---

archive/issue_events_287297.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-09-26T07:39:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287297"
}
```



---

archive/issue_events_287298.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-09-26T07:39:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287298"
}
```



---

archive/issue_comments_361296.json:
```json
{
    "body": "<a id='comment:30'></a>\nUsing --optional=fricas I get\n\n`sage -t --warn-long 40.1 src/sage/interfaces/fricas.py  # 3 doctests failed`",
    "created_at": "2017-09-26T07:39:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361296",
    "user": "https://github.com/rwst"
}
```

<a id='comment:30'></a>
Using --optional=fricas I get

`sage -t --warn-long 40.1 src/sage/interfaces/fricas.py  # 3 doctests failed`



---

archive/issue_comments_361297.json:
```json
{
    "body": "**Reviewer:** Ralf Stephan",
    "created_at": "2017-09-26T07:39:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361297",
    "user": "https://github.com/rwst"
}
```

**Reviewer:** Ralf Stephan



---

archive/issue_comments_361298.json:
```json
{
    "body": "<a id='comment:31'></a>\nI was told to use\n`sage -t --optional fricas,sage src/sage/interfaces/fricas.py`",
    "created_at": "2017-09-26T08:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361298",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:31'></a>
I was told to use
`sage -t --optional fricas,sage src/sage/interfaces/fricas.py`



---

archive/issue_events_287299.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-26T08:30:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287299"
}
```



---

archive/issue_events_287300.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-26T08:30:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287300"
}
```



---

archive/issue_events_287301.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-09-26T13:09:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287301"
}
```



---

archive/issue_events_287302.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-09-26T13:09:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287302"
}
```



---

archive/issue_comments_361299.json:
```json
{
    "body": "<a id='comment:33'></a>\nAlright, interesting, thanks. It passes now and looks good.",
    "created_at": "2017-09-26T13:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361299",
    "user": "https://github.com/rwst"
}
```

<a id='comment:33'></a>
Alright, interesting, thanks. It passes now and looks good.



---

archive/issue_comments_361300.json:
```json
{
    "body": "<a id='comment:34'></a>\nThank you!",
    "created_at": "2017-09-26T13:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361300",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:34'></a>
Thank you!



---

archive/issue_comments_361301.json:
```json
{
    "body": "**Changing branch** from \"[u/mantepse/fricas_output_and_sage_conversion_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/fricas_output_and_sage_conversion_bug)\" to \"[2521f3a9556ea763d418df9e04b36e84b6137cb3](https://github.com/sagemath/sagetrac-mirror/commit/2521f3a9556ea763d418df9e04b36e84b6137cb3)\".",
    "created_at": "2017-10-01T00:19:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23782#issuecomment-361301",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mantepse/fricas_output_and_sage_conversion_bug](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/fricas_output_and_sage_conversion_bug)" to "[2521f3a9556ea763d418df9e04b36e84b6137cb3](https://github.com/sagemath/sagetrac-mirror/commit/2521f3a9556ea763d418df9e04b36e84b6137cb3)".



---

archive/issue_events_287303.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-01T00:19:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287303"
}
```



---

archive/issue_events_287304.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "64dcac954b631c343d30865e98a9dd4e598b511e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-10-01T00:19:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23782",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23782#event-287304"
}
```
