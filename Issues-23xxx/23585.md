# Issue 23585: Gauss sums for general finite fields

archive/issues_023348.json:
```json
{
    "body": "Currently Gauss sums are available as method of Dirichlet Groups.\n\nHere is code for an implementation for general finite fields.\n\nadded in src/sage/arith/misc.py\n\n\nCC:  @JohnCremona @categorie @roed314 @jdemeyer\n\nKeywords: days88, IMA coding sprints\n\nBranch/Commit: 67145d252ec558a11fa231de1cb3a1d0cba8eacb\n\nReviewer: Vincent Delecroix\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23585\n\n",
    "closed_at": "2017-09-04T06:10:49Z",
    "created_at": "2017-08-05T12:47:27Z",
    "labels": [
        "component: number theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Gauss sums for general finite fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23585",
    "user": "https://github.com/fchapoton"
}
```
Currently Gauss sums are available as method of Dirichlet Groups.

Here is code for an implementation for general finite fields.

added in src/sage/arith/misc.py


CC:  @JohnCremona @categorie @roed314 @jdemeyer

Keywords: days88, IMA coding sprints

Branch/Commit: 67145d252ec558a11fa231de1cb3a1d0cba8eacb

Reviewer: Vincent Delecroix

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23585





---

archive/issue_comments_444116.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2017-08-05T12:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444116",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_444117.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,7 +29,7 @@\n         \\chi(x) = e^{2 i \\pi / (q-1)}\n    \n     where `x` is the multiplicative generator of `\\GF(q)` that is\n-    return by ``GF(q).multiplicative_generator()``.\n+    returned by ``GF(q).multiplicative_generator()``.\n \n     EXAMPLES::\n \n``````\n",
    "created_at": "2017-08-05T12:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444117",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,7 +29,7 @@
         \chi(x) = e^{2 i \pi / (q-1)}
    
     where `x` is the multiplicative generator of `\GF(q)` that is
-    return by ``GF(q).multiplicative_generator()``.
+    returned by ``GF(q).multiplicative_generator()``.
 
     EXAMPLES::
 
``````




---

archive/issue_comments_444118.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -49,7 +49,6 @@\n     q = p ** f\n     Fq = GF(q, 'a')\n     gen = Fq.multiplicative_generator()\n-    C = CyclicPermutationGroup(q - 1)\n     UCF = UniversalCyclotomicField()\n     zeta_p = UCF.gen(p)\n     zeta_q = UCF.gen(q - 1) ** m\n``````\n",
    "created_at": "2017-08-05T12:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444118",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -49,7 +49,6 @@
     q = p ** f
     Fq = GF(q, 'a')
     gen = Fq.multiplicative_generator()
-    C = CyclicPermutationGroup(q - 1)
     UCF = UniversalCyclotomicField()
     zeta_p = UCF.gen(p)
     zeta_q = UCF.gen(q - 1) ** m
``````




---

archive/issue_comments_444119.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -33,7 +33,7 @@\n \n     EXAMPLES::\n \n-        sage: L = [general_gauss_sum(i,5,1) for i in range(5)]; L\n+        sage: L = [gauss_sum(i,5,1) for i in range(5)]; L\n         [-1,\n          E(20)^4 + E(20)^13 - E(20)^16 - E(20)^17,\n          E(5) - E(5)^2 - E(5)^3 + E(5)^4,\n@@ -42,7 +42,7 @@\n         sage: [g*g.conjugate() for g in L]\n         [1, 5, 5, 5, 1]\n \n-        sage: g = general_gauss_sum(4,11,2)\n+        sage: g = gauss_sum(4,11,2)\n         sage: g*g.conjugate()\n         121\n     \"\"\"\n``````\n",
    "created_at": "2017-08-05T12:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444119",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -33,7 +33,7 @@
 
     EXAMPLES::
 
-        sage: L = [general_gauss_sum(i,5,1) for i in range(5)]; L
+        sage: L = [gauss_sum(i,5,1) for i in range(5)]; L
         [-1,
          E(20)^4 + E(20)^13 - E(20)^16 - E(20)^17,
          E(5) - E(5)^2 - E(5)^3 + E(5)^4,
@@ -42,7 +42,7 @@
         sage: [g*g.conjugate() for g in L]
         [1, 5, 5, 5, 1]
 
-        sage: g = general_gauss_sum(4,11,2)
+        sage: g = gauss_sum(4,11,2)
         sage: g*g.conjugate()
         121
     """
``````




---

archive/issue_comments_444120.json:
```json
{
    "body": "<a id='comment:5'></a>We had a similar problem with p-adic gauss sums recently, in #23456 (as I'm sure you know, since you finished reviewing it).  The solution there was as a function in `sage/rings/padics/misc.py`, but I'm not very happy with that, since it's not very discoverable.\n\nWould sage.arith.misc be an appropriate place, and then imported into the global namespace?  We could have a gauss_sum function there that dispatched to various kinds of gauss sums....",
    "created_at": "2017-08-06T04:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444120",
    "user": "https://github.com/roed314"
}
```

<a id='comment:5'></a>We had a similar problem with p-adic gauss sums recently, in #23456 (as I'm sure you know, since you finished reviewing it).  The solution there was as a function in `sage/rings/padics/misc.py`, but I'm not very happy with that, since it's not very discoverable.

Would sage.arith.misc be an appropriate place, and then imported into the global namespace?  We could have a gauss_sum function there that dispatched to various kinds of gauss sums....



---

archive/issue_comments_444121.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2017-08-22T07:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444121",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_444122.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-08-22T07:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444122",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_444123.json:
```json
{
    "body": "Changing commit from \"\" to \"d90bae6ddc79ccfb7ebed0f8d6495294a580d0fe\"",
    "created_at": "2017-08-22T07:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444123",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "d90bae6ddc79ccfb7ebed0f8d6495294a580d0fe"



---

archive/issue_comments_444124.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/gauss_sum\"",
    "created_at": "2017-08-22T07:20:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444124",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/gauss_sum"



---

archive/issue_comments_444125.json:
```json
{
    "body": "<a id='comment:7'></a>would better be in `sage/arith/`.",
    "created_at": "2017-08-22T10:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444125",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>would better be in `sage/arith/`.



---

archive/issue_comments_444126.json:
```json
{
    "body": "<a id='comment:8'></a>where precisely ?",
    "created_at": "2017-08-22T11:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444126",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>where precisely ?



---

archive/issue_comments_444127.json:
```json
{
    "body": "<a id='comment:9'></a>sorry `sage/arith/misc.py` is fine.",
    "created_at": "2017-08-22T11:08:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444127",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>sorry `sage/arith/misc.py` is fine.



---

archive/issue_comments_444128.json:
```json
{
    "body": "<a id='comment:10'></a>In the finite field construction, there is no need to give a name for the generator.\n\nIt would be useful to be able to choose the ring `QQbar`, `UCF`, `ComplexField(n)`, ... In order to make it work you just have to replace the two calls to `gen` into calls to `zeta`\n\n```\nsage: CC.zeta(5)\n0.309016994374947 + 0.951056516295154*I\nsage: UniversalCyclotomicField().zeta(5)\nE(5)\nsage: QQbar.zeta(5)\n0.3090169943749474? + 0.9510565162951536?*I\n```\n\nOn a related note, I think that it would be good to have a common entry point for boths Gauss sums (the p-adic one and the one in this ticket)? What about something along\n\n```\ndef gauss_sum(a, p, f, ring=None, **extra_kwds):\n    if ring is None:\n        ring = UniversalCyclotomicField()\n    ...\n```\nIn that case, I would actually rename the p-adic `gauss_sum` into `padic_gauss_sum`.",
    "created_at": "2017-08-22T11:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444128",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>In the finite field construction, there is no need to give a name for the generator.

It would be useful to be able to choose the ring `QQbar`, `UCF`, `ComplexField(n)`, ... In order to make it work you just have to replace the two calls to `gen` into calls to `zeta`

```
sage: CC.zeta(5)
0.309016994374947 + 0.951056516295154*I
sage: UniversalCyclotomicField().zeta(5)
E(5)
sage: QQbar.zeta(5)
0.3090169943749474? + 0.9510565162951536?*I
```

On a related note, I think that it would be good to have a common entry point for boths Gauss sums (the p-adic one and the one in this ticket)? What about something along

```
def gauss_sum(a, p, f, ring=None, **extra_kwds):
    if ring is None:
        ring = UniversalCyclotomicField()
    ...
```
In that case, I would actually rename the p-adic `gauss_sum` into `padic_gauss_sum`.



---

archive/issue_comments_444129.json:
```json
{
    "body": "Changing commit from \"d90bae6ddc79ccfb7ebed0f8d6495294a580d0fe\" to \"c6bc043d11ce17e3a47fc1927311eeb09ec06d52\"",
    "created_at": "2017-08-22T12:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444129",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d90bae6ddc79ccfb7ebed0f8d6495294a580d0fe" to "c6bc043d11ce17e3a47fc1927311eeb09ec06d52"



---

archive/issue_comments_444130.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-22T12:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444131.json:
```json
{
    "body": "<a id='comment:12'></a>I allowed more general rings in the new function introduced here. Concerning the common entry point, I do not know what would be the best thing to do. Maybe this can be left for another ticket.",
    "created_at": "2017-08-22T12:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444131",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>I allowed more general rings in the new function introduced here. Concerning the common entry point, I do not know what would be the best thing to do. Maybe this can be left for another ticket.



---

archive/issue_comments_444132.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,63 +2,5 @@\n \n Here is code for an implementation for general finite fields.\n \n-Where to put it ? As a method of finite fields ?\n+added in src/sage/arith/misc.py\n \n-```\n-def gauss_sum(m, p, f):\n-    r\"\"\"\n-    Return the Gauss sums for a general finite field `\\GF(q)`.\n-\n-    INPUT:\n-    \n-    - ``m`` -- integer, the power of the generator of character group\n-\n-    - ``p`` -- a prime number\n-\n-    - ``f`` -- an integer, such that `q = p ^ f`\n-\n-    OUTPUT:\n-\n-    an element of the universal cyclotomic field\n-\n-    The character used for the Gauss sum is the `m`-th power of the\n-    character `\\chi` (a generator of the character group) that satisfies\n-\n-    .. MATH::\n-\n-        \\chi(x) = e^{2 i \\pi / (q-1)}\n-   \n-    where `x` is the multiplicative generator of `\\GF(q)` that is\n-    returned by ``GF(q).multiplicative_generator()``.\n-\n-    EXAMPLES::\n-\n-        sage: L = [gauss_sum(i,5,1) for i in range(5)]; L\n-        [-1,\n-         E(20)^4 + E(20)^13 - E(20)^16 - E(20)^17,\n-         E(5) - E(5)^2 - E(5)^3 + E(5)^4,\n-         E(20)^4 - E(20)^13 - E(20)^16 + E(20)^17,\n-         -1]\n-        sage: [g*g.conjugate() for g in L]\n-        [1, 5, 5, 5, 1]\n-\n-        sage: g = gauss_sum(4,11,2)\n-        sage: g*g.conjugate()\n-        121\n-    \"\"\"\n-    q = p ** f\n-    Fq = GF(q, 'a')\n-    gen = Fq.multiplicative_generator()\n-    UCF = UniversalCyclotomicField()\n-    zeta_p = UCF.gen(p)\n-    zeta_q = UCF.gen(q - 1) ** m\n-\n-    resu = UCF.zero()\n-    gen_power = Fq.one()\n-    zq_power = UCF.one()\n-    for k in range(q - 1):\n-        resu += zq_power * zeta_p**(gen_power.trace())\n-        gen_power *= gen\n-        zq_power *= zeta_q\n-    return resu\n-```\n``````\n",
    "created_at": "2017-08-22T19:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444132",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,63 +2,5 @@
 
 Here is code for an implementation for general finite fields.
 
-Where to put it ? As a method of finite fields ?
+added in src/sage/arith/misc.py
 
-```
-def gauss_sum(m, p, f):
-    r"""
-    Return the Gauss sums for a general finite field `\GF(q)`.
-
-    INPUT:
-    
-    - ``m`` -- integer, the power of the generator of character group
-
-    - ``p`` -- a prime number
-
-    - ``f`` -- an integer, such that `q = p ^ f`
-
-    OUTPUT:
-
-    an element of the universal cyclotomic field
-
-    The character used for the Gauss sum is the `m`-th power of the
-    character `\chi` (a generator of the character group) that satisfies
-
-    .. MATH::
-
-        \chi(x) = e^{2 i \pi / (q-1)}
-   
-    where `x` is the multiplicative generator of `\GF(q)` that is
-    returned by ``GF(q).multiplicative_generator()``.
-
-    EXAMPLES::
-
-        sage: L = [gauss_sum(i,5,1) for i in range(5)]; L
-        [-1,
-         E(20)^4 + E(20)^13 - E(20)^16 - E(20)^17,
-         E(5) - E(5)^2 - E(5)^3 + E(5)^4,
-         E(20)^4 - E(20)^13 - E(20)^16 + E(20)^17,
-         -1]
-        sage: [g*g.conjugate() for g in L]
-        [1, 5, 5, 5, 1]
-
-        sage: g = gauss_sum(4,11,2)
-        sage: g*g.conjugate()
-        121
-    """
-    q = p ** f
-    Fq = GF(q, 'a')
-    gen = Fq.multiplicative_generator()
-    UCF = UniversalCyclotomicField()
-    zeta_p = UCF.gen(p)
-    zeta_q = UCF.gen(q - 1) ** m
-
-    resu = UCF.zero()
-    gen_power = Fq.one()
-    zq_power = UCF.one()
-    for k in range(q - 1):
-        resu += zq_power * zeta_p**(gen_power.trace())
-        gen_power *= gen
-        zq_power *= zeta_q
-    return resu
-```
``````




---

archive/issue_comments_444133.json:
```json
{
    "body": "<a id='comment:13'></a>green bot.",
    "created_at": "2017-08-22T19:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444133",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>green bot.



---

archive/issue_comments_444134.json:
```json
{
    "body": "<a id='comment:14'></a>1. The silent dependency in the choice of multiplicative generator (through the call to `.multiplicative_generator()`) is bad. The way it works with `DirichletCharacter` is much better because you explicitely specify it.\n\n2. Would be good to have crossed examples such as this one\n\n```\nsage: D = DirichletGroup(7, QQbar)\nsage: for i in range(6):\n....:     print D[i].gauss_sum()\n....:     print sage.arith.misc.gauss_sum(i, 7, 1, ring=QQbar)\n-1\n-1\n-2.440133358345538? + 1.022618791871794?*I\n-2.440133358345538? + 1.022618791871794?*I\n2.370469405576201? - 1.175106291884787?*I\n2.370469405576201? - 1.175106291884787?*I\n0.?e-17 + 2.645751311064591?*I\n0.?e-17 + 2.645751311064591?*I\n2.370469405576201? + 1.175106291884787?*I\n2.370469405576201? + 1.175106291884787?*I\n2.440133358345538? + 1.022618791871794?*I\n2.440133358345538? + 1.022618791871794?*I\n```\n(by chance we get the same ordering!?)\n\n\n3. Putting appart p-adic, this ticket proposes to have a **third** implementation of gauss sums beyond the 2 already there in `DirichletGroup`... I am not sure there is a need for one more implementation. Refactorization is more than expected at this point.",
    "created_at": "2017-08-22T19:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444134",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>1. The silent dependency in the choice of multiplicative generator (through the call to `.multiplicative_generator()`) is bad. The way it works with `DirichletCharacter` is much better because you explicitely specify it.

2. Would be good to have crossed examples such as this one

```
sage: D = DirichletGroup(7, QQbar)
sage: for i in range(6):
....:     print D[i].gauss_sum()
....:     print sage.arith.misc.gauss_sum(i, 7, 1, ring=QQbar)
-1
-1
-2.440133358345538? + 1.022618791871794?*I
-2.440133358345538? + 1.022618791871794?*I
2.370469405576201? - 1.175106291884787?*I
2.370469405576201? - 1.175106291884787?*I
0.?e-17 + 2.645751311064591?*I
0.?e-17 + 2.645751311064591?*I
2.370469405576201? + 1.175106291884787?*I
2.370469405576201? + 1.175106291884787?*I
2.440133358345538? + 1.022618791871794?*I
2.440133358345538? + 1.022618791871794?*I
```
(by chance we get the same ordering!?)


3. Putting appart p-adic, this ticket proposes to have a **third** implementation of gauss sums beyond the 2 already there in `DirichletGroup`... I am not sure there is a need for one more implementation. Refactorization is more than expected at this point.



---

archive/issue_comments_444135.json:
```json
{
    "body": "<a id='comment:15'></a>Concerning point 3, the new implementation can be obtained from the DirichletGroup one if and only if the finite field has cardinality a prime number. Outside of prime numbers the Dirichlet group implementation returns something else (which is probably of no interest, in fact).\n\nConcerning point 2, I can add doctests, indeed.\n\nConcerning point 1, the choice of multiplicative generator is explained in the doc.",
    "created_at": "2017-08-22T19:59:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444135",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>Concerning point 3, the new implementation can be obtained from the DirichletGroup one if and only if the finite field has cardinality a prime number. Outside of prime numbers the Dirichlet group implementation returns something else (which is probably of no interest, in fact).

Concerning point 2, I can add doctests, indeed.

Concerning point 1, the choice of multiplicative generator is explained in the doc.



---

archive/issue_comments_444136.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-22T20:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444137.json:
```json
{
    "body": "Changing commit from \"c6bc043d11ce17e3a47fc1927311eeb09ec06d52\" to \"f6cb185d347fe85b4ddfcb7a5501571df7fc1453\"",
    "created_at": "2017-08-22T20:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444137",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c6bc043d11ce17e3a47fc1927311eeb09ec06d52" to "f6cb185d347fe85b4ddfcb7a5501571df7fc1453"



---

archive/issue_comments_444138.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 chapoton]:\n> Concerning point 3, the new implementation can be obtained from the DirichletGroup one if and only if the finite field has cardinality a prime number. Outside of prime numbers the Dirichlet group implementation returns something else (which is probably of no interest, in fact).\n\n\nWhy is the implementation in `DirichletGroup` still there then?\n \n> Concerning point 2, I can add doctests, indeed.\n> \n> Concerning point 1, the choice of multiplicative generator is explained in the doc.\n\n\nThis is not helpful at all. If I have a multiplicative character, with your new function I would have to make a logarithm in order to get my Gauss sum...",
    "created_at": "2017-08-22T20:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444138",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'></a>Replying to [comment:15 chapoton]:
> Concerning point 3, the new implementation can be obtained from the DirichletGroup one if and only if the finite field has cardinality a prime number. Outside of prime numbers the Dirichlet group implementation returns something else (which is probably of no interest, in fact).


Why is the implementation in `DirichletGroup` still there then?
 
> Concerning point 2, I can add doctests, indeed.
> 
> Concerning point 1, the choice of multiplicative generator is explained in the doc.


This is not helpful at all. If I have a multiplicative character, with your new function I would have to make a logarithm in order to get my Gauss sum...



---

archive/issue_comments_444139.json:
```json
{
    "body": "<a id='comment:18'></a>Moreover, introducing a generic `gauss_sum` should really be generic, ie taking as input\n- a finite commutative ring `R` and a codomain that embedds enough root of unity like `CC`\n- a multiplicative character `chi: (R^x, *) \\to (CC^x, *)`\n- an additive character `psi: (R, +) \\to (CC^x, *)`\nand return the Gauss sum `sum_{a in R^x} chi(a) psi(a)`",
    "created_at": "2017-08-22T21:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444139",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>Moreover, introducing a generic `gauss_sum` should really be generic, ie taking as input
- a finite commutative ring `R` and a codomain that embedds enough root of unity like `CC`
- a multiplicative character `chi: (R^x, *) \to (CC^x, *)`
- an additive character `psi: (R, +) \to (CC^x, *)`
and return the Gauss sum `sum_{a in R^x} chi(a) psi(a)`



---

archive/issue_comments_444140.json:
```json
{
    "body": "Changing keywords from \"\" to \"days88, IMA coding sprints\".",
    "created_at": "2017-08-22T21:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444140",
    "user": "https://github.com/videlec"
}
```

Changing keywords from "" to "days88, IMA coding sprints".



---

archive/issue_comments_444141.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-22T21:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444141",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_444142.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-23T09:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444142",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444143.json:
```json
{
    "body": "Changing commit from \"f6cb185d347fe85b4ddfcb7a5501571df7fc1453\" to \"f5be269cada564f0932b9b56543b264c8ed3c590\"",
    "created_at": "2017-08-23T09:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444143",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f6cb185d347fe85b4ddfcb7a5501571df7fc1453" to "f5be269cada564f0932b9b56543b264c8ed3c590"



---

archive/issue_comments_444144.json:
```json
{
    "body": "Changing commit from \"f5be269cada564f0932b9b56543b264c8ed3c590\" to \"c1ca8da9dc31ff4647ba8b527199fe87504a0021\"",
    "created_at": "2017-08-23T12:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444144",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "f5be269cada564f0932b9b56543b264c8ed3c590" to "c1ca8da9dc31ff4647ba8b527199fe87504a0021"



---

archive/issue_comments_444145.json:
```json
{
    "body": "<a id='comment:21'></a>I have made so that the character is now an input, given by its value on the multiplicative generator of the group of invertible elements.\n\nI am not going to remove the method from `DirichletGroup`. It may be used by somebody.\n\nI would rather not go to full generality, as long as it has no specific and concrete use. The new function, in its current form, is needed for #23671.\n\n---\nNew commits:",
    "created_at": "2017-08-23T12:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444145",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>I have made so that the character is now an input, given by its value on the multiplicative generator of the group of invertible elements.

I am not going to remove the method from `DirichletGroup`. It may be used by somebody.

I would rather not go to full generality, as long as it has no specific and concrete use. The new function, in its current form, is needed for #23671.

---
New commits:



---

archive/issue_comments_444146.json:
```json
{
    "body": "Changing branch from \"u/chapoton/gauss_sum\" to \"u/chapoton/gauss_sum_v2\"",
    "created_at": "2017-08-23T12:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444146",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/chapoton/gauss_sum" to "u/chapoton/gauss_sum_v2"



---

archive/issue_comments_444147.json:
```json
{
    "body": "<a id='comment:22'></a>I am sorry to bother you so much Fr\u00e9d\u00e9ric. You are introducing a function in the global namespace with a very specific syntax that a user (like me) might want to see much more general. In your version, you are forcing the additive character used in the Gauss sum to be given by the trace, but it is not the only one additive character of `GF(q)`. The input of a Gauss sum should be a pair `(multiplicative_character, additive_character)`. If a global `gauss_sum` is introduced it should support this generality.\n\nA possible solution is to replace the input of `p` and `f` by `GF(q)`, make the function as `gauss_sum(chi, psi=None)` and allow the following inputs\n- `gauss_sum(chi, psi)`: the Gauss sum of the multiplicative character `chi` and additive character `psi` (would not be currently implemented)\n- `gauss_sum(chi)`: `chi` a Dirichlet character\n- `gauss_sum(char_value, finite_field)`: the Gauss sum of the multiplicative character `chi` as you have in the current version and `psi` being given by the trace\n\nWhat do you think?",
    "created_at": "2017-08-23T13:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444147",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>I am sorry to bother you so much Frédéric. You are introducing a function in the global namespace with a very specific syntax that a user (like me) might want to see much more general. In your version, you are forcing the additive character used in the Gauss sum to be given by the trace, but it is not the only one additive character of `GF(q)`. The input of a Gauss sum should be a pair `(multiplicative_character, additive_character)`. If a global `gauss_sum` is introduced it should support this generality.

A possible solution is to replace the input of `p` and `f` by `GF(q)`, make the function as `gauss_sum(chi, psi=None)` and allow the following inputs
- `gauss_sum(chi, psi)`: the Gauss sum of the multiplicative character `chi` and additive character `psi` (would not be currently implemented)
- `gauss_sum(chi)`: `chi` a Dirichlet character
- `gauss_sum(char_value, finite_field)`: the Gauss sum of the multiplicative character `chi` as you have in the current version and `psi` being given by the trace

What do you think?



---

archive/issue_comments_444148.json:
```json
{
    "body": "<a id='comment:23'></a>Let me thank you for looking at my ticket. I understand that a review is not necessarily a joyful process. I am trying to remain perfectly zen.\n\nNote that I am adding no function to the global namespace. This is only a specialized function, to be used in a specific context.\n\nI understand that you would like to have a fully general function. I did not intend to spend a lot of time on this simple ticket, and would prefer not to.\n\nI can replace the input (p,f) by the input GF(q), of course. I was thinking at the beginning to have this as a method of finite fields.",
    "created_at": "2017-08-23T13:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444148",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'></a>Let me thank you for looking at my ticket. I understand that a review is not necessarily a joyful process. I am trying to remain perfectly zen.

Note that I am adding no function to the global namespace. This is only a specialized function, to be used in a specific context.

I understand that you would like to have a fully general function. I did not intend to spend a lot of time on this simple ticket, and would prefer not to.

I can replace the input (p,f) by the input GF(q), of course. I was thinking at the beginning to have this as a method of finite fields.



---

archive/issue_comments_444149.json:
```json
{
    "body": "<a id='comment:24'></a>I will be happy with `gauss_sum(char_value, finite_field)` that would be easily turned into a general `gauss_sum(chi, psi)`. Can you add a to the doc\n\n```\nFor more info on Gauss sum see :wikipedia:`Gauss_sum`.\n\n.. TODO::\n\n    Implement general Gauss sums with a pair ``(multiplicative_character, additive_character)``\n```",
    "created_at": "2017-08-23T13:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444149",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>I will be happy with `gauss_sum(char_value, finite_field)` that would be easily turned into a general `gauss_sum(chi, psi)`. Can you add a to the doc

```
For more info on Gauss sum see :wikipedia:`Gauss_sum`.

.. TODO::

    Implement general Gauss sums with a pair ``(multiplicative_character, additive_character)``
```



---

archive/issue_comments_444150.json:
```json
{
    "body": "Changing commit from \"c1ca8da9dc31ff4647ba8b527199fe87504a0021\" to \"adeaa96f1b3228515ad52d6bc3460f68ce2394f3\"",
    "created_at": "2017-08-23T14:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444150",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c1ca8da9dc31ff4647ba8b527199fe87504a0021" to "adeaa96f1b3228515ad52d6bc3460f68ce2394f3"



---

archive/issue_comments_444151.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-23T14:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444152.json:
```json
{
    "body": "<a id='comment:26'></a>Thanks. Here is a version that may suit you, hopefuly.",
    "created_at": "2017-08-23T14:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444152",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>Thanks. Here is a version that may suit you, hopefuly.



---

archive/issue_comments_444153.json:
```json
{
    "body": "<a id='comment:27'></a>You should put the definition of what is meant by Gauss sum over a finite field (or update wikipedia ;-).",
    "created_at": "2017-08-23T15:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444153",
    "user": "https://github.com/videlec"
}
```

<a id='comment:27'></a>You should put the definition of what is meant by Gauss sum over a finite field (or update wikipedia ;-).



---

archive/issue_comments_444154.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-23T17:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444155.json:
```json
{
    "body": "Changing commit from \"adeaa96f1b3228515ad52d6bc3460f68ce2394f3\" to \"aea2daecdff1cbc077831094c480eff42770e3ec\"",
    "created_at": "2017-08-23T17:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444155",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "adeaa96f1b3228515ad52d6bc3460f68ce2394f3" to "aea2daecdff1cbc077831094c480eff42770e3ec"



---

archive/issue_comments_444156.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-23T18:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_444157.json:
```json
{
    "body": "Changing commit from \"aea2daecdff1cbc077831094c480eff42770e3ec\" to \"67145d252ec558a11fa231de1cb3a1d0cba8eacb\"",
    "created_at": "2017-08-23T18:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "aea2daecdff1cbc077831094c480eff42770e3ec" to "67145d252ec558a11fa231de1cb3a1d0cba8eacb"



---

archive/issue_comments_444158.json:
```json
{
    "body": "<a id='comment:30'></a>ok, doc added and checked.",
    "created_at": "2017-08-23T18:03:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444158",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:30'></a>ok, doc added and checked.



---

archive/issue_comments_444159.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-23T18:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444159",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_444160.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2017-08-23T19:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444160",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_444161.json:
```json
{
    "body": "<a id='comment:32'></a>Thanks for your patience!",
    "created_at": "2017-08-23T19:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444161",
    "user": "https://github.com/videlec"
}
```

<a id='comment:32'></a>Thanks for your patience!



---

archive/issue_comments_444162.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-23T19:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444162",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_444163.json:
```json
{
    "body": "Changing branch from \"u/chapoton/gauss_sum_v2\" to \"67145d252ec558a11fa231de1cb3a1d0cba8eacb\"",
    "created_at": "2017-09-04T06:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444163",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/gauss_sum_v2" to "67145d252ec558a11fa231de1cb3a1d0cba8eacb"



---

archive/issue_events_060430.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-04T06:10:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23585#event-60430"
}
```



---

archive/issue_comments_444164.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-04T06:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23585",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23585#issuecomment-444164",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
