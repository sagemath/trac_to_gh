# Issue 23987: minimal implementation of FQSYM

archive/issues_023750.json:
```json
{
    "body": "FQSym is also know as Malvenuto-Reutenauer Hopf algebra\n\nbecause #19278 has rotten\n\nCC:  @tscrim @darijgr amypang\n\nBranch/Commit: 5707cb4176ffd22888f8010837e01a94ace8a78d\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton, Darij Grinberg\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23987\n\n",
    "closed_at": "2017-12-11T01:03:33Z",
    "created_at": "2017-10-08T09:07:31Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "minimal implementation of FQSYM",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23987",
    "user": "https://github.com/fchapoton"
}
```
FQSym is also know as Malvenuto-Reutenauer Hopf algebra

because #19278 has rotten

CC:  @tscrim @darijgr amypang

Branch/Commit: 5707cb4176ffd22888f8010837e01a94ace8a78d

Reviewer: Travis Scrimshaw

Author: Frédéric Chapoton, Darij Grinberg

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23987





---

archive/issue_comments_354214.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2017-10-08T09:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354214",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_354215.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-08T09:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354215",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_354216.json:
```json
{
    "body": "<a id='comment:2'></a>All tests pass, but the documentation is still rough.",
    "created_at": "2017-10-08T09:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354216",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>All tests pass, but the documentation is still rough.



---

archive/issue_comments_354217.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-08T09:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354217",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_354218.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-21T07:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354218",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354219.json:
```json
{
    "body": "<a id='comment:4'></a>comments welcome, please",
    "created_at": "2017-10-21T07:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354219",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>comments welcome, please



---

archive/issue_comments_354220.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-21T09:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354221.json:
```json
{
    "body": "<a id='comment:6'></a>I mentioned this on one of the other tickets, but what about using `<<` and `>>` as shorthands for `prec` and `succ`? Bit shifting doesn't make sense here and we can (at Python speed) go to the coercion framework. However, they just are just lower precedence than `+`, so `x << y + a << b` gets evaluated as `(x << (y + a)) << b`.",
    "created_at": "2017-10-23T04:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354221",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>I mentioned this on one of the other tickets, but what about using `<<` and `>>` as shorthands for `prec` and `succ`? Bit shifting doesn't make sense here and we can (at Python speed) go to the coercion framework. However, they just are just lower precedence than `+`, so `x << y + a << b` gets evaluated as `(x << (y + a)) << b`.



---

archive/issue_comments_354222.json:
```json
{
    "body": "<a id='comment:7'></a>How easy would it be to extend this class to a multi-basis (i.e., WithRealizations) Hopf algebra? I am fairly sure that at some point, we will want FQSym to have multiple basis, and not just the two obvious ones that are related by inverting the permutation.\n\nIn other news, sorry for not reviewing this until now. I am not sure whether I'll do it today -- this semester my todo list is growing a lot faster than it is shrinking. But I'll at least take a look and try to fill in the doc if some of it is missing.",
    "created_at": "2017-10-24T18:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354222",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:7'></a>How easy would it be to extend this class to a multi-basis (i.e., WithRealizations) Hopf algebra? I am fairly sure that at some point, we will want FQSym to have multiple basis, and not just the two obvious ones that are related by inverting the permutation.

In other news, sorry for not reviewing this until now. I am not sure whether I'll do it today -- this semester my todo list is growing a lot faster than it is shrinking. But I'll at least take a look and try to fill in the doc if some of it is missing.



---

archive/issue_comments_354223.json:
```json
{
    "body": "<a id='comment:8'></a>I am confused by the handling of empty permutations in `succ_product_on_basis` and `prec_product_on_basis`. Normally, the output of such methods should be an element of the module (here, FQSym); but in those special cases, it is a list of keys. Does Sage know how to deal with these issues? [EDIT: No, but I've fixed the methods now.]\n\nAlso, I suggest resolving the \"empty \\prec empty\" and \"empty \\succ empty\" indeterminacy in some way, e.g., setting one of them to be empty and the other 0. No, I don't have much of a preference :)\n\nWhere do we put references nowadays? I'd like to cite Grinberg & Reiner Chapter 8.",
    "created_at": "2017-10-24T19:10:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354223",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:8'></a>I am confused by the handling of empty permutations in `succ_product_on_basis` and `prec_product_on_basis`. Normally, the output of such methods should be an element of the module (here, FQSym); but in those special cases, it is a list of keys. Does Sage know how to deal with these issues? [EDIT: No, but I've fixed the methods now.]

Also, I suggest resolving the "empty \prec empty" and "empty \succ empty" indeterminacy in some way, e.g., setting one of them to be empty and the other 0. No, I don't have much of a preference :)

Where do we put references nowadays? I'd like to cite Grinberg & Reiner Chapter 8.



---

archive/issue_comments_354224.json:
```json
{
    "body": "<a id='comment:9'></a>New commits:",
    "created_at": "2017-10-24T19:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354224",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:9'></a>New commits:



---

archive/issue_comments_354225.json:
```json
{
    "body": "<a id='comment:10'></a>I'll make a commit shortly. It is a review commit, but the following issues remain:\n\n- The shorthand Travis suggested above (comment:6).\n\n- Multi-basis support (comment:7).\n\n- A reference to any source that uses modern notation (e.g., Grinberg/Reiner Chapter 8).\n\n- For reasons of speed: use sum_of_terms or sum_of_monomials instead of sum in the constructors of the three operations?\n\n- For reasons of speed: don't we have lower-level shuffle iterators that avoid the detour through the `Word` class?",
    "created_at": "2017-10-26T21:04:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354225",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:10'></a>I'll make a commit shortly. It is a review commit, but the following issues remain:

- The shorthand Travis suggested above (comment:6).

- Multi-basis support (comment:7).

- A reference to any source that uses modern notation (e.g., Grinberg/Reiner Chapter 8).

- For reasons of speed: use sum_of_terms or sum_of_monomials instead of sum in the constructors of the three operations?

- For reasons of speed: don't we have lower-level shuffle iterators that avoid the detour through the `Word` class?



---

archive/issue_comments_354226.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-26T21:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354226",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354227.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-26T21:15:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354228.json:
```json
{
    "body": "<a id='comment:13'></a>For multi-basis support: maybe Mike Zabrocki's template would be useful? (It's designed to be a template for CHAs in general, but he actually demonstrates it with FQSym.)\n\nhttps://cocalc.com/projects/44ed3873-5f1b-4e40-8f2f-be95581bf080/files/for_Mike_Z/?session=default\n\nThank you everybody for your hard work, really looking forward to having FQSym in Sage.",
    "created_at": "2017-10-27T00:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354228",
    "user": "https://trac.sagemath.org/admin/accounts/users/amypang"
}
```

<a id='comment:13'></a>For multi-basis support: maybe Mike Zabrocki's template would be useful? (It's designed to be a template for CHAs in general, but he actually demonstrates it with FQSym.)

https://cocalc.com/projects/44ed3873-5f1b-4e40-8f2f-be95581bf080/files/for_Mike_Z/?session=default

Thank you everybody for your hard work, really looking forward to having FQSym in Sage.



---

archive/issue_comments_354229.json:
```json
{
    "body": "<a id='comment:14'></a>Thanks, Darij.\n\nI would strongly suggest keeping the multi-basis support for another ticket.",
    "created_at": "2017-10-27T07:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354229",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>Thanks, Darij.

I would strongly suggest keeping the multi-basis support for another ticket.



---

archive/issue_comments_354230.json:
```json
{
    "body": "<a id='comment:15'></a>The problem is: can it be done without changing the syntax? If not, we need to do it in this ticket, or else the next ticket will essentially be a full deprecation.",
    "created_at": "2017-10-27T07:28:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354230",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:15'></a>The problem is: can it be done without changing the syntax? If not, we need to do it in this ticket, or else the next ticket will essentially be a full deprecation.



---

archive/issue_comments_354231.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-02T00:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354232.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-02T00:53:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354233.json:
```json
{
    "body": "<a id='comment:18'></a>Darij and I worked on doing the multiple bases support so we do not have to deal with (very tricky) deprecations later on. Darij is going to work on the SGA coercions.\n\nMy only question is do we want the algebra to be `FQSYM` in all caps in `algebras`?",
    "created_at": "2017-11-02T00:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354233",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>Darij and I worked on doing the multiple bases support so we do not have to deal with (very tricky) deprecations later on. Darij is going to work on the SGA coercions.

My only question is do we want the algebra to be `FQSYM` in all caps in `algebras`?



---

archive/issue_comments_354234.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-02T01:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354234",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354235.json:
```json
{
    "body": "<a id='comment:20'></a>Actually, I have another question: comment:6. If you don't want to, it's fine, but just a thought (at least, I don't recall you saying anything about it previous, sorry if you did). Both of these are primarily for Fr\u00e9d\u00e9ric.",
    "created_at": "2017-11-02T08:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354235",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>Actually, I have another question: comment:6. If you don't want to, it's fine, but just a thought (at least, I don't recall you saying anything about it previous, sorry if you did). Both of these are primarily for Frédéric.



---

archive/issue_comments_354236.json:
```json
{
    "body": "<a id='comment:21'></a>Thanks for working on that. I am not very positive about using << and >> for the dendriform operations. I think we must live with the fact that there are too many operations to assign a symbol to each of them.",
    "created_at": "2017-11-03T20:40:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354236",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>Thanks for working on that. I am not very positive about using << and >> for the dendriform operations. I think we must live with the fact that there are too many operations to assign a symbol to each of them.



---

archive/issue_comments_354237.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2017-11-03T20:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354237",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_354238.json:
```json
{
    "body": "<a id='comment:22'></a>I also feel that the swapped order of operators would likely confuse some people too. So scratch that idea.\n\nThe only other thing left is `algebras.FQSym` vs `algebras.FQSYM`. This is probably bikeshedding, but I don't like the all-caps as it makes it feel like the `Y` and `M` stand for something. I'm also more included to having `FreeQuasiSymmetricFunctions` and in the global namespace in line with our other CHAs in Sage (imported lazily). Moreover, I think we should also have `algebras.MalvenutoReutenauer`.\n\nAt some point we should decide how we want to add the CHAs to `algebras`, if we want to do `algebras.combinatorial_hopf.Foo`, add them `algebras.Foo`, leave some of them in the global namespace, and/or have `combinatorial_hopf_algebras.Foo`. However, that is a separate issue for another ticket that is far easier to do.\n\nThoughts?\n\n(Darij didn't want to set it to needs_info because he felt it was a quagmire; I am to prove him wrong. :P)",
    "created_at": "2017-11-03T20:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354238",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>I also feel that the swapped order of operators would likely confuse some people too. So scratch that idea.

The only other thing left is `algebras.FQSym` vs `algebras.FQSYM`. This is probably bikeshedding, but I don't like the all-caps as it makes it feel like the `Y` and `M` stand for something. I'm also more included to having `FreeQuasiSymmetricFunctions` and in the global namespace in line with our other CHAs in Sage (imported lazily). Moreover, I think we should also have `algebras.MalvenutoReutenauer`.

At some point we should decide how we want to add the CHAs to `algebras`, if we want to do `algebras.combinatorial_hopf.Foo`, add them `algebras.Foo`, leave some of them in the global namespace, and/or have `combinatorial_hopf_algebras.Foo`. However, that is a separate issue for another ticket that is far easier to do.

Thoughts?

(Darij didn't want to set it to needs_info because he felt it was a quagmire; I am to prove him wrong. :P)



---

archive/issue_comments_354239.json:
```json
{
    "body": "<a id='comment:23'></a>ping?",
    "created_at": "2017-11-06T21:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354239",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>ping?



---

archive/issue_comments_354240.json:
```json
{
    "body": "<a id='comment:24'></a>ok for algebras.FQSym instead of algebras.FQSYM\n\nok for algebras.MalvenutoReutenauer (but not a strong +1)\n\nok for lazily imported global FreeQuasiSymmetricFunctions (not a strong +1 either)",
    "created_at": "2017-11-07T18:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354240",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>ok for algebras.FQSym instead of algebras.FQSYM

ok for algebras.MalvenutoReutenauer (but not a strong +1)

ok for lazily imported global FreeQuasiSymmetricFunctions (not a strong +1 either)



---

archive/issue_comments_354241.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-07T22:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354241",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354242.json:
```json
{
    "body": "<a id='comment:26'></a>I made a few changes beyond the naming.\n\n- I added Darij to the authors and copyright.\n- I changed the implementation of `to_symmetric_group_algebra` because SGA's form a natural tower of R-algebras. Since this is just a R-linear embedding, it makes perfect sense to use the maximal degree (and the behavior you allowed did not match your doc).\n- Some minor documentation/formatting changes.\n\nIf my changes are good, then positive review.",
    "created_at": "2017-11-07T22:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354242",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>I made a few changes beyond the naming.

- I added Darij to the authors and copyright.
- I changed the implementation of `to_symmetric_group_algebra` because SGA's form a natural tower of R-algebras. Since this is just a R-linear embedding, it makes perfect sense to use the maximal degree (and the behavior you allowed did not match your doc).
- Some minor documentation/formatting changes.

If my changes are good, then positive review.



---

archive/issue_comments_354243.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-11-07T22:35:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354243",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_354244.json:
```json
{
    "body": "<a id='comment:27'></a>Nice extension of `to_symmetric_group_algebra`, although I'm not sure how useful it will be (it's not an embedding anymore). BUT this part:\n\n```\n+            if not self:\n+                return SymmetricGroupAlgebra(self.base_ring(), 0).zero()\n```\nshould be\n\n```\n            if not self:\n                if n is None:\n                    n = 0\n                return SymmetricGroupAlgebra(self.base_ring(), n).zero()\n```\ninstead.",
    "created_at": "2017-11-08T00:34:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354244",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:27'></a>Nice extension of `to_symmetric_group_algebra`, although I'm not sure how useful it will be (it's not an embedding anymore). BUT this part:

```
+            if not self:
+                return SymmetricGroupAlgebra(self.base_ring(), 0).zero()
```
should be

```
            if not self:
                if n is None:
                    n = 0
                return SymmetricGroupAlgebra(self.base_ring(), n).zero()
```
instead.



---

archive/issue_comments_354245.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-08T00:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354245",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354246.json:
```json
{
    "body": "<a id='comment:29'></a>Right, good point. Fixed. I also changed the error message to be more specific about the cause. I'm not sure how useful the R-linear map to SGA is in general (even restricted to the graded component), but I'm assuming you have a use-case and it is my ignorance about FQSym.",
    "created_at": "2017-11-08T00:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354246",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>Right, good point. Fixed. I also changed the error message to be more specific about the cause. I'm not sure how useful the R-linear map to SGA is in general (even restricted to the graded component), but I'm assuming you have a use-case and it is my ignorance about FQSym.



---

archive/issue_comments_354247.json:
```json
{
    "body": "<a id='comment:30'></a>Thanks -- it LGTM now.\n\nMy first use case is studying the Reiner-Saliola-Welker idempotents in the SGAs using Hopf machinery in FQSym (as they are not in the descent algebra). Not sure whether anything will come out of that, but now it can be done easily with Sage, which is some progress.",
    "created_at": "2017-11-08T00:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354247",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:30'></a>Thanks -- it LGTM now.

My first use case is studying the Reiner-Saliola-Welker idempotents in the SGAs using Hopf machinery in FQSym (as they are not in the descent algebra). Not sure whether anything will come out of that, but now it can be done easily with Sage, which is some progress.



---

archive/issue_comments_354248.json:
```json
{
    "body": "<a id='comment:31'></a>Fr\u00e9d\u00e9ric, everything okay with you?\n\n`@`darij thanks for the explanation.",
    "created_at": "2017-11-11T04:12:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354248",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:31'></a>Frédéric, everything okay with you?

`@`darij thanks for the explanation.



---

archive/issue_comments_354249.json:
```json
{
    "body": "<a id='comment:32'></a>2 failing doctests, otherwise I'm ok",
    "created_at": "2017-11-11T07:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354249",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>2 failing doctests, otherwise I'm ok



---

archive/issue_comments_354250.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-11-11T15:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354251.json:
```json
{
    "body": "<a id='comment:34'></a>This fixes the doctest failures because the `FQSym` object does not have a distinguished basis, so it should not have a `WithBasis()` with the category. But the bases need to specify it. Just needs a quick double-check.",
    "created_at": "2017-11-11T15:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354251",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>This fixes the doctest failures because the `FQSym` object does not have a distinguished basis, so it should not have a `WithBasis()` with the category. But the bases need to specify it. Just needs a quick double-check.



---

archive/issue_comments_354252.json:
```json
{
    "body": "<a id='comment:35'></a>If tests pass, this is a pos_rev. I mistook WithBasis for WithRealizations :)",
    "created_at": "2017-11-11T15:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354252",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:35'></a>If tests pass, this is a pos_rev. I mistook WithBasis for WithRealizations :)



---

archive/issue_comments_354253.json:
```json
{
    "body": "<a id='comment:36'></a>Green patchbot. Thank you both for your work on this.",
    "created_at": "2017-11-11T22:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354253",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:36'></a>Green patchbot. Thank you both for your work on this.



---

archive/issue_comments_354254.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-11T22:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354254",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_354255.json:
```json
{
    "body": "<a id='comment:37'></a>Thanks to the two of you, who did most of it!",
    "created_at": "2017-11-11T23:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354255",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:37'></a>Thanks to the two of you, who did most of it!



---

archive/issue_events_061015.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-11T01:03:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23987#event-61015"
}
```



---

archive/issue_comments_354256.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-11T01:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23987",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23987#issuecomment-354256",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
