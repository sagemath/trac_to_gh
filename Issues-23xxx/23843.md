# Issue 23843: for graphs g1.union(g2) would better be weighted if both g1 and g2 are

archive/issues_023606.json:
```json
{
    "body": "The following is wrong\n\n```\nsage: g1 = Graph(weighted=True)\nsage: g2 = Graph(weighted=True)\nsage: g = g1.union(g2)\nsage: g.weighted()\nFalse\n```\n\nFor both loops and multiedges the union takes an \"or\" (ie `g` allows loops if any of `g1` or `g2` allows loops). Though it is not clear that such rule should apply for weighted. Three possibilities\n- make `g` weighted if any of `g1` or `g2` are\n- make `g` weighted if both `g1` and `g2` are\n- When `g1.weighted()` and `g2.weighted()` are different raise a `ValueError` and otherwise apply any of the two above rules.\n\nCC:  @dcoudert\n\nBranch/Commit: 3590fb484e8b04516f643bf0ace430eb26d1b2e3\n\nReviewer: David Coudert\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23843\n\n",
    "closed_at": "2017-09-20T22:26:28Z",
    "created_at": "2017-09-13T05:38:32Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "for graphs g1.union(g2) would better be weighted if both g1 and g2 are",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23843",
    "user": "https://github.com/videlec"
}
```
The following is wrong

```
sage: g1 = Graph(weighted=True)
sage: g2 = Graph(weighted=True)
sage: g = g1.union(g2)
sage: g.weighted()
False
```

For both loops and multiedges the union takes an "or" (ie `g` allows loops if any of `g1` or `g2` allows loops). Though it is not clear that such rule should apply for weighted. Three possibilities
- make `g` weighted if any of `g1` or `g2` are
- make `g` weighted if both `g1` and `g2` are
- When `g1.weighted()` and `g2.weighted()` are different raise a `ValueError` and otherwise apply any of the two above rules.

CC:  @dcoudert

Branch/Commit: 3590fb484e8b04516f643bf0ace430eb26d1b2e3

Reviewer: David Coudert

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23843





---

archive/issue_comments_449960.json:
```json
{
    "body": "<a id='comment:1'></a>I don't use weighted graph very often, so I don't know what is expected: number as label? dictionary with specific key? If we make the union weigthed if one of the graph is weighted, should we turn `None` to 0 ? what if one of the graph has `\"bob\"` for label ? should we check that weights are consistent ?\n\nThe easiest is certainly to raise an error.",
    "created_at": "2017-09-13T07:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449960",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>I don't use weighted graph very often, so I don't know what is expected: number as label? dictionary with specific key? If we make the union weigthed if one of the graph is weighted, should we turn `None` to 0 ? what if one of the graph has `"bob"` for label ? should we check that weights are consistent ?

The easiest is certainly to raise an error.



---

archive/issue_comments_449961.json:
```json
{
    "body": "<a id='comment:2'></a>Simpler version without errors: make it weighted if both are weighted.",
    "created_at": "2017-09-17T18:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449961",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>Simpler version without errors: make it weighted if both are weighted.



---

archive/issue_comments_449962.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Delecroix\"",
    "created_at": "2017-09-17T18:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449962",
    "user": "https://github.com/videlec"
}
```

Changing author from "" to "Vincent Delecroix"



---

archive/issue_comments_449963.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-17T18:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449963",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_449964.json:
```json
{
    "body": "Changing commit from \"\" to \"3590fb484e8b04516f643bf0ace430eb26d1b2e3\"",
    "created_at": "2017-09-17T18:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449964",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "3590fb484e8b04516f643bf0ace430eb26d1b2e3"



---

archive/issue_comments_449965.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/23843\"",
    "created_at": "2017-09-17T18:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449965",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/23843"



---

archive/issue_comments_449966.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-17T21:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449966",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_449967.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2017-09-17T21:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449967",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_449968.json:
```json
{
    "body": "<a id='comment:4'></a>Let's go for it. Passes all tests and doc build.",
    "created_at": "2017-09-17T21:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449968",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>Let's go for it. Passes all tests and doc build.



---

archive/issue_comments_449969.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-20T22:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449969",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060753.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-20T22:26:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23843#event-60753"
}
```



---

archive/issue_comments_449970.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/23843\" to \"3590fb484e8b04516f643bf0ace430eb26d1b2e3\"",
    "created_at": "2017-09-20T22:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-449970",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/23843" to "3590fb484e8b04516f643bf0ace430eb26d1b2e3"
