# Issue 23843: for graphs g1.union(g2) would better be weighted if both g1 and g2 are

archive/issues_023606.json:
```json
{
    "body": "The following is wrong\n\n```\nsage: g1 = Graph(weighted=True)\nsage: g2 = Graph(weighted=True)\nsage: g = g1.union(g2)\nsage: g.weighted()\nFalse\n```\n\nFor both loops and multiedges the union takes an \"or\" (ie `g` allows loops if any of `g1` or `g2` allows loops). Though it is not clear that such rule should apply for weighted. Three possibilities\n- make `g` weighted if any of `g1` or `g2` are\n- make `g` weighted if both `g1` and `g2` are\n- When `g1.weighted()` and `g2.weighted()` are different raise a `ValueError` and otherwise apply any of the two above rules.\n\nCC:  @dcoudert\n\nBranch/Commit: [3590fb484e8b04516f643bf0ace430eb26d1b2e3](https://github.com/sagemath/sagetrac-mirror/commit/3590fb484e8b04516f643bf0ace430eb26d1b2e3)\n\nReviewer: David Coudert\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23843\n\n",
    "closed_at": "2017-09-20T22:26:28Z",
    "created_at": "2017-09-13T05:38:32Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "for graphs g1.union(g2) would better be weighted if both g1 and g2 are",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23843",
    "user": "https://github.com/videlec"
}
```
The following is wrong

```
sage: g1 = Graph(weighted=True)
sage: g2 = Graph(weighted=True)
sage: g = g1.union(g2)
sage: g.weighted()
False
```

For both loops and multiedges the union takes an "or" (ie `g` allows loops if any of `g1` or `g2` allows loops). Though it is not clear that such rule should apply for weighted. Three possibilities
- make `g` weighted if any of `g1` or `g2` are
- make `g` weighted if both `g1` and `g2` are
- When `g1.weighted()` and `g2.weighted()` are different raise a `ValueError` and otherwise apply any of the two above rules.

CC:  @dcoudert

Branch/Commit: [3590fb484e8b04516f643bf0ace430eb26d1b2e3](https://github.com/sagemath/sagetrac-mirror/commit/3590fb484e8b04516f643bf0ace430eb26d1b2e3)

Reviewer: David Coudert

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23843





---

archive/issue_comments_452311.json:
```json
{
    "body": "<a id='comment:1'></a>\nI don't use weighted graph very often, so I don't know what is expected: number as label? dictionary with specific key? If we make the union weigthed if one of the graph is weighted, should we turn `None` to 0 ? what if one of the graph has `\"bob\"` for label ? should we check that weights are consistent ?\n\nThe easiest is certainly to raise an error.",
    "created_at": "2017-09-13T07:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452311",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
I don't use weighted graph very often, so I don't know what is expected: number as label? dictionary with specific key? If we make the union weigthed if one of the graph is weighted, should we turn `None` to 0 ? what if one of the graph has `"bob"` for label ? should we check that weights are consistent ?

The easiest is certainly to raise an error.



---

archive/issue_comments_452312.json:
```json
{
    "body": "<a id='comment:2'></a>\nSimpler version without errors: make it weighted if both are weighted.",
    "created_at": "2017-09-17T18:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452312",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>
Simpler version without errors: make it weighted if both are weighted.



---

archive/issue_comments_452313.json:
```json
{
    "body": "Author: Vincent Delecroix",
    "created_at": "2017-09-17T18:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452313",
    "user": "https://github.com/videlec"
}
```

Author: Vincent Delecroix



---

archive/issue_comments_452314.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-17T18:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452314",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_452315.json:
```json
{
    "body": "Commit: [3590fb484e8b04516f643bf0ace430eb26d1b2e3](https://github.com/sagemath/sagetrac-mirror/commit/3590fb484e8b04516f643bf0ace430eb26d1b2e3)",
    "created_at": "2017-09-17T18:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452315",
    "user": "https://github.com/videlec"
}
```

Commit: [3590fb484e8b04516f643bf0ace430eb26d1b2e3](https://github.com/sagemath/sagetrac-mirror/commit/3590fb484e8b04516f643bf0ace430eb26d1b2e3)



---

archive/issue_comments_452316.json:
```json
{
    "body": "Branch: [u/vdelecroix/23843](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23843)",
    "created_at": "2017-09-17T18:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452316",
    "user": "https://github.com/videlec"
}
```

Branch: [u/vdelecroix/23843](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23843)



---

archive/issue_comments_452317.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-17T21:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452317",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452318.json:
```json
{
    "body": "Reviewer: David Coudert",
    "created_at": "2017-09-17T21:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452318",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: David Coudert



---

archive/issue_comments_452319.json:
```json
{
    "body": "<a id='comment:4'></a>\nLet's go for it. Passes all tests and doc build.",
    "created_at": "2017-09-17T21:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452319",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
Let's go for it. Passes all tests and doc build.



---

archive/issue_comments_452320.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-20T22:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452320",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069086.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-20T22:26:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23843#event-69086"
}
```



---

archive/issue_comments_452321.json:
```json
{
    "body": "Changing branch from \"[u/vdelecroix/23843](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23843)\" to \"[3590fb484e8b04516f643bf0ace430eb26d1b2e3](https://github.com/sagemath/sagetrac-mirror/commit/3590fb484e8b04516f643bf0ace430eb26d1b2e3)\"",
    "created_at": "2017-09-20T22:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23843#issuecomment-452321",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/vdelecroix/23843](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23843)" to "[3590fb484e8b04516f643bf0ace430eb26d1b2e3](https://github.com/sagemath/sagetrac-mirror/commit/3590fb484e8b04516f643bf0ace430eb26d1b2e3)"
