# Issue 23945: Add test for Weil polynomials

archive/issues_023708.json:
```json
{
    "body": "We are adding a function that tests whether a given polynomial is a Weil polynomial for a given prime power q, i.e., whether its complex roots all have absolute value `sqrt(q)`.\n\nKeywords: Weil polynomial, sd91\n\nBranch/Commit: cdcc8cfec1008982b0a91411fb70585062d8fbed\n\nReviewer: Kiran Kedlaya, David Roe\n\nAuthor: David Zureick-Brown\n\nDependencies: #23947\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23945\n\n",
    "closed_at": "2017-10-22T05:51:53Z",
    "created_at": "2017-09-30T17:19:23Z",
    "labels": [
        "component: number theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Add test for Weil polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23945",
    "user": "https://github.com/kedlaya"
}
```
We are adding a function that tests whether a given polynomial is a Weil polynomial for a given prime power q, i.e., whether its complex roots all have absolute value `sqrt(q)`.

Keywords: Weil polynomial, sd91

Branch/Commit: cdcc8cfec1008982b0a91411fb70585062d8fbed

Reviewer: Kiran Kedlaya, David Roe

Author: David Zureick-Brown

Dependencies: #23947

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23945





---

archive/issue_comments_452089.json:
```json
{
    "body": "<a id='comment:1'></a>One easy way to do this would be to combine the \"inverse reciprocal transform\" from #23947 with the existing `all_roots_in_interval` method of polynomials (which wraps Pari's implementation of Sturm sequences).",
    "created_at": "2017-09-30T23:37:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452089",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:1'></a>One easy way to do this would be to combine the "inverse reciprocal transform" from #23947 with the existing `all_roots_in_interval` method of polynomials (which wraps Pari's implementation of Sturm sequences).



---

archive/issue_comments_452090.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#23947\"",
    "created_at": "2017-09-30T23:37:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452090",
    "user": "https://github.com/kedlaya"
}
```

Changing dependencies from "" to "#23947"



---

archive/issue_comments_452091.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dzb/add_test_for_weil_polynomials\"",
    "created_at": "2017-10-01T22:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452091",
    "user": "https://trac.sagemath.org/admin/accounts/users/dzb"
}
```

Changing branch from "" to "u/dzb/add_test_for_weil_polynomials"



---

archive/issue_comments_452092.json:
```json
{
    "body": "Changing commit from \"\" to \"4000398c7927e552e9d01e329d9218e230a89e83\"",
    "created_at": "2017-10-01T22:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452092",
    "user": "https://trac.sagemath.org/admin/accounts/users/dzb"
}
```

Changing commit from "" to "4000398c7927e552e9d01e329d9218e230a89e83"



---

archive/issue_comments_452093.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-10-01T22:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452093",
    "user": "https://trac.sagemath.org/admin/accounts/users/dzb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_452094.json:
```json
{
    "body": "<a id='comment:3'></a>Implemented `is_weil_polynomial`\n\n---\nNew commits:",
    "created_at": "2017-10-01T22:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452094",
    "user": "https://trac.sagemath.org/admin/accounts/users/dzb"
}
```

<a id='comment:3'></a>Implemented `is_weil_polynomial`

---
New commits:



---

archive/issue_comments_452095.json:
```json
{
    "body": "Changing author from \"\" to \"David Zureick-Brown\"",
    "created_at": "2017-10-01T22:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452095",
    "user": "https://trac.sagemath.org/admin/accounts/users/dzb"
}
```

Changing author from "" to "David Zureick-Brown"



---

archive/issue_comments_452096.json:
```json
{
    "body": "Changing branch from \"u/dzb/add_test_for_weil_polynomials\" to \"u/roed/add_test_for_weil_polynomials\"",
    "created_at": "2017-10-01T23:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452096",
    "user": "https://github.com/roed314"
}
```

Changing branch from "u/dzb/add_test_for_weil_polynomials" to "u/roed/add_test_for_weil_polynomials"



---

archive/issue_comments_452097.json:
```json
{
    "body": "Changing commit from \"4000398c7927e552e9d01e329d9218e230a89e83\" to \"ead122d8e4bc3b946af2aed1863ce2c3aec879d5\"",
    "created_at": "2017-10-01T23:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452097",
    "user": "https://github.com/roed314"
}
```

Changing commit from "4000398c7927e552e9d01e329d9218e230a89e83" to "ead122d8e4bc3b946af2aed1863ce2c3aec879d5"



---

archive/issue_comments_452098.json:
```json
{
    "body": "<a id='comment:5'></a>Made changes; if Kiran is happy then we can give this a positive review.\n\n---\nNew commits:",
    "created_at": "2017-10-01T23:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452098",
    "user": "https://github.com/roed314"
}
```

<a id='comment:5'></a>Made changes; if Kiran is happy then we can give this a positive review.

---
New commits:



---

archive/issue_comments_452099.json:
```json
{
    "body": "Changing author from \"David Zureick-Brown\" to \"Kiran Kedlaya, David Zureick-Brown\"",
    "created_at": "2017-10-02T00:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452099",
    "user": "https://github.com/kedlaya"
}
```

Changing author from "David Zureick-Brown" to "Kiran Kedlaya, David Zureick-Brown"



---

archive/issue_comments_452100.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Kiran Kedlaya, David Roe\"",
    "created_at": "2017-10-02T00:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452100",
    "user": "https://github.com/kedlaya"
}
```

Changing reviewer from "" to "Kiran Kedlaya, David Roe"



---

archive/issue_comments_452101.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-02T00:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452101",
    "user": "https://github.com/kedlaya"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452102.json:
```json
{
    "body": "Changing author from \"Kiran Kedlaya, David Zureick-Brown\" to \"David Zureick-Brown\"",
    "created_at": "2017-10-02T00:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452102",
    "user": "https://github.com/kedlaya"
}
```

Changing author from "Kiran Kedlaya, David Zureick-Brown" to "David Zureick-Brown"



---

archive/issue_comments_452103.json:
```json
{
    "body": "<a id='comment:7'></a>Looks good to me.",
    "created_at": "2017-10-02T00:34:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452103",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:7'></a>Looks good to me.



---

archive/issue_comments_452104.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-10-02T03:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452104",
    "user": "https://github.com/kedlaya"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_452105.json:
```json
{
    "body": "<a id='comment:8'></a>Sorry, backing out the positive review due to some failing doctests. More soon.",
    "created_at": "2017-10-02T03:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452105",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:8'></a>Sorry, backing out the positive review due to some failing doctests. More soon.



---

archive/issue_comments_452106.json:
```json
{
    "body": "Changing branch from \"u/roed/add_test_for_weil_polynomials\" to \"u/kedlaya/add_test_for_weil_polynomials\"",
    "created_at": "2017-10-02T03:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452106",
    "user": "https://github.com/kedlaya"
}
```

Changing branch from "u/roed/add_test_for_weil_polynomials" to "u/kedlaya/add_test_for_weil_polynomials"



---

archive/issue_comments_452107.json:
```json
{
    "body": "<a id='comment:10'></a>I fixed the issue with the doctests. Also, I don't like redefining `self` within a method definition.\n\nAll tests now pass on k8s. Since I touched the code last, someone other than me should check my work and then set a positive review.\n\n---\nNew commits:",
    "created_at": "2017-10-02T03:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452107",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:10'></a>I fixed the issue with the doctests. Also, I don't like redefining `self` within a method definition.

All tests now pass on k8s. Since I touched the code last, someone other than me should check my work and then set a positive review.

---
New commits:



---

archive/issue_comments_452108.json:
```json
{
    "body": "Changing commit from \"ead122d8e4bc3b946af2aed1863ce2c3aec879d5\" to \"f8b93d5835e1fa0867ae31d972a1448ceb6db889\"",
    "created_at": "2017-10-02T03:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452108",
    "user": "https://github.com/kedlaya"
}
```

Changing commit from "ead122d8e4bc3b946af2aed1863ce2c3aec879d5" to "f8b93d5835e1fa0867ae31d972a1448ceb6db889"



---

archive/issue_comments_452109.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-02T03:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452109",
    "user": "https://github.com/kedlaya"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452110.json:
```json
{
    "body": "<a id='comment:11'></a>Looks good to me.  Positive review once tests pass.",
    "created_at": "2017-10-02T03:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452110",
    "user": "https://github.com/roed314"
}
```

<a id='comment:11'></a>Looks good to me.  Positive review once tests pass.



---

archive/issue_comments_452111.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-02T17:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452111",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452112.json:
```json
{
    "body": "<a id='comment:12'></a>David Zureick-Brown isn't a trusted author, so patchbot won't run.  I ran tests on k8s with no failures.  Positive review.",
    "created_at": "2017-10-02T17:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452112",
    "user": "https://github.com/roed314"
}
```

<a id='comment:12'></a>David Zureick-Brown isn't a trusted author, so patchbot won't run.  I ran tests on k8s with no failures.  Positive review.



---

archive/issue_comments_452113.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-10-07T21:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452113",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_452114.json:
```json
{
    "body": "<a id='comment:13'></a>\n```\n[dochtml] OSError: [polynomia] docstring of sage.rings.polynomial.polynomial_element.Polynomial.is_weil_polynomial:10: WARNING: Bullet list ends without a blank line; unexpected unindent.\n```",
    "created_at": "2017-10-07T21:19:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452114",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>
```
[dochtml] OSError: [polynomia] docstring of sage.rings.polynomial.polynomial_element.Polynomial.is_weil_polynomial:10: WARNING: Bullet list ends without a blank line; unexpected unindent.
```



---

archive/issue_comments_452115.json:
```json
{
    "body": "Changing commit from \"f8b93d5835e1fa0867ae31d972a1448ceb6db889\" to \"87721f94c74bf5a180d2c1fdf65671ebab6f8c97\"",
    "created_at": "2017-10-08T03:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452115",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f8b93d5835e1fa0867ae31d972a1448ceb6db889" to "87721f94c74bf5a180d2c1fdf65671ebab6f8c97"



---

archive/issue_comments_452116.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-10-08T03:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452116",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452117.json:
```json
{
    "body": "<a id='comment:15'></a>Looks like there was some dodgy formatting in the docstring. Let's see if I managed to fix it.",
    "created_at": "2017-10-08T03:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452117",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:15'></a>Looks like there was some dodgy formatting in the docstring. Let's see if I managed to fix it.



---

archive/issue_comments_452118.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-08T03:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452118",
    "user": "https://github.com/kedlaya"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452119.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-09T00:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452119",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452120.json:
```json
{
    "body": "<a id='comment:16'></a>Seems fine, though I think it's better if True has double backticks around it.",
    "created_at": "2017-10-09T00:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452120",
    "user": "https://github.com/roed314"
}
```

<a id='comment:16'></a>Seems fine, though I think it's better if True has double backticks around it.



---

archive/issue_comments_452121.json:
```json
{
    "body": "Changing commit from \"87721f94c74bf5a180d2c1fdf65671ebab6f8c97\" to \"cdcc8cfec1008982b0a91411fb70585062d8fbed\"",
    "created_at": "2017-10-09T00:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452121",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "87721f94c74bf5a180d2c1fdf65671ebab6f8c97" to "cdcc8cfec1008982b0a91411fb70585062d8fbed"



---

archive/issue_comments_452122.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-10-09T00:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_452123.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2017-10-09T00:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_452124.json:
```json
{
    "body": "<a id='comment:18'></a>I added the double backticks around True in the second line. In the one-sentence summary, I think the convention is not to use them.",
    "created_at": "2017-10-09T00:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452124",
    "user": "https://github.com/kedlaya"
}
```

<a id='comment:18'></a>I added the double backticks around True in the second line. In the one-sentence summary, I think the convention is not to use them.



---

archive/issue_comments_452125.json:
```json
{
    "body": "<a id='comment:19'></a>Good enough, though I think the convention would be `Return whether this is a Weil polynomial` rather than `Return True if this is a Weil polynomial`.",
    "created_at": "2017-10-10T00:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452125",
    "user": "https://github.com/roed314"
}
```

<a id='comment:19'></a>Good enough, though I think the convention would be `Return whether this is a Weil polynomial` rather than `Return True if this is a Weil polynomial`.



---

archive/issue_comments_452126.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-10T00:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452126",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452127.json:
```json
{
    "body": "Changing branch from \"u/kedlaya/add_test_for_weil_polynomials\" to \"cdcc8cfec1008982b0a91411fb70585062d8fbed\"",
    "created_at": "2017-10-22T05:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452127",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/kedlaya/add_test_for_weil_polynomials" to "cdcc8cfec1008982b0a91411fb70585062d8fbed"



---

archive/issue_events_060919.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-22T05:51:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23945#event-60919"
}
```



---

archive/issue_comments_452128.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-22T05:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23945#issuecomment-452128",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
