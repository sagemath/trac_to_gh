# Issue 23634: A base class for integral quadratic forms seen as modules with a bilinear form.

archive/issues_023397.json:
```json
{
    "body": "An integral lattice is a free abelian group L together with a non-degenerate integer valued bilinear form L x L --> ZZ.\n\nIn sage a lattice should consist of:\n- an ambient QQ vector space with an inner product matrix\n- a distinguished ZZ-basis (with possibly rational entries)\n\nIntegral lattices and quadratic forms are mathematically basically the same.\nFor me the difference in thinking is that lattices live in an ambient space.\nThus, one can have several lattices in an ambient space and compare their mutual relations (containment, embedding etc.)\n\nProbably it should be derived from \nsage.modules.free_quadratic_module.FreeQuadraticModule_submodule_with_basis_pi\n\nNew methods should include \n- discriminant groups and forms\n- over and sublattices \n- Orthogonal groups\n- direct sums\n- is_even \n- is_primitive sublattice\n- orthogonal complements\n- the dual \"lattice\"\n\nKeywords: sd91\n\nBranch/Commit: 707a74e27dd6fea52d3785fe4dbe1f46b61d3a84\n\nReviewer: David Roe\n\nAuthor: Simon Brandhorst\n\nDependencies: #22720,#23703\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23634\n\n",
    "closed_at": "2017-10-15T09:22:23Z",
    "created_at": "2017-08-17T14:23:14Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "A base class for integral quadratic forms seen as modules with a bilinear form.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23634",
    "user": "https://github.com/simonbrandhorst"
}
```
An integral lattice is a free abelian group L together with a non-degenerate integer valued bilinear form L x L --> ZZ.

In sage a lattice should consist of:
- an ambient QQ vector space with an inner product matrix
- a distinguished ZZ-basis (with possibly rational entries)

Integral lattices and quadratic forms are mathematically basically the same.
For me the difference in thinking is that lattices live in an ambient space.
Thus, one can have several lattices in an ambient space and compare their mutual relations (containment, embedding etc.)

Probably it should be derived from 
sage.modules.free_quadratic_module.FreeQuadraticModule_submodule_with_basis_pi

New methods should include 
- discriminant groups and forms
- over and sublattices 
- Orthogonal groups
- direct sums
- is_even 
- is_primitive sublattice
- orthogonal complements
- the dual "lattice"

Keywords: sd91

Branch/Commit: 707a74e27dd6fea52d3785fe4dbe1f46b61d3a84

Reviewer: David Roe

Author: Simon Brandhorst

Dependencies: #22720,#23703

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23634





---

archive/issue_comments_439362.json:
```json
{
    "body": "Changing branch from \"\" to \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-08-17T16:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439362",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "" to "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439363.json:
```json
{
    "body": "Changing commit from \"\" to \"8b7671388303bb52dc30f3c94b80f4474560f424\"",
    "created_at": "2017-08-18T07:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439363",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "8b7671388303bb52dc30f3c94b80f4474560f424"



---

archive/issue_comments_439364.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[8b76713](https://github.com/sagemath/sagetrac-mirror/commit/8b7671388303bb52dc30f3c94b80f4474560f424)|`Doctests added, some bugs fixed`|",
    "created_at": "2017-08-18T07:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439364",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[8b76713](https://github.com/sagemath/sagetrac-mirror/commit/8b7671388303bb52dc30f3c94b80f4474560f424)|`Doctests added, some bugs fixed`|



---

archive/issue_comments_439365.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-24T14:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439365",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_439366.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-29T12:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439366",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_439367.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Roe\"",
    "created_at": "2017-08-29T12:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439367",
    "user": "https://github.com/roed314"
}
```

Changing reviewer from "" to "David Roe"



---

archive/issue_comments_439368.json:
```json
{
    "body": "<a id='comment:4'></a>\nSince lattices are parents, they should be unique (for given defining data).  I would suggest using `sage.structure.factory.Factory`, but you may be able to get away with `sage.structure.unique_representation.UniqueRepresentation` instead.",
    "created_at": "2017-08-29T12:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439368",
    "user": "https://github.com/roed314"
}
```

<a id='comment:4'></a>
Since lattices are parents, they should be unique (for given defining data).  I would suggest using `sage.structure.factory.Factory`, but you may be able to get away with `sage.structure.unique_representation.UniqueRepresentation` instead.



---

archive/issue_comments_439369.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2017-09-14T15:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439369",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_439370.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe very similar classes of submodules\n\nsage.modules.free_module.FreeModule_submodule_field\nsage.modules.free_module.FreeModule_submodule_pid\nsage.modules.free_module_integer.FreeModule_submodule_with_basis_integer\nsage.modules.free_quadratic_module.FreeQuadraticModule_submodule_pid\n\nare not unique. In my view lattices are submodules of an ambient space (with certain restrictions), too. \nCan you make a case why this class should be unique while they are not?\nNote that our lattices are equipped with a distinguished basis. This could change during the runtime.\nThis seems to conflict with the uniqueness of the objects?",
    "created_at": "2017-09-14T15:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439370",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:5'></a>
The very similar classes of submodules

sage.modules.free_module.FreeModule_submodule_field
sage.modules.free_module.FreeModule_submodule_pid
sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer
sage.modules.free_quadratic_module.FreeQuadraticModule_submodule_pid

are not unique. In my view lattices are submodules of an ambient space (with certain restrictions), too. 
Can you make a case why this class should be unique while they are not?
Note that our lattices are equipped with a distinguished basis. This could change during the runtime.
This seems to conflict with the uniqueness of the objects?



---

archive/issue_comments_439371.json:
```json
{
    "body": "<a id='comment:6'></a>\nOkay.  I'll look at the code again.  There's some trouble with an internal server error, so I'm trying to see if a comment changes anything.",
    "created_at": "2017-09-30T02:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439371",
    "user": "https://github.com/roed314"
}
```

<a id='comment:6'></a>
Okay.  I'll look at the code again.  There's some trouble with an internal server error, so I'm trying to see if a comment changes anything.



---

archive/issue_comments_439372.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-09-30T02:31:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439372",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_439373.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[e58f4ce](https://github.com/sagemath/sagetrac-mirror/commit/e58f4cefcb860b93a8a50a644f46c196254709d3)|`Doctest formatting.`|",
    "created_at": "2017-09-30T19:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439373",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[e58f4ce](https://github.com/sagemath/sagetrac-mirror/commit/e58f4cefcb860b93a8a50a644f46c196254709d3)|`Doctest formatting.`|



---

archive/issue_comments_439374.json:
```json
{
    "body": "Changing commit from \"8b7671388303bb52dc30f3c94b80f4474560f424\" to \"e58f4cefcb860b93a8a50a644f46c196254709d3\"",
    "created_at": "2017-09-30T19:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439374",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8b7671388303bb52dc30f3c94b80f4474560f424" to "e58f4cefcb860b93a8a50a644f46c196254709d3"



---

archive/issue_comments_439375.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#22720\"",
    "created_at": "2017-09-30T22:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439375",
    "user": "https://github.com/roed314"
}
```

Changing dependencies from "" to "#22720"



---

archive/issue_comments_439376.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"u/roed/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-09-30T22:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439376",
    "user": "https://github.com/roed314"
}
```

Changing branch from "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "u/roed/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439377.json:
```json
{
    "body": "Changing commit from \"e58f4cefcb860b93a8a50a644f46c196254709d3\" to \"45d83e89d909983a37ad582e8e1331e56ca9419d\"",
    "created_at": "2017-09-30T22:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439377",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e58f4cefcb860b93a8a50a644f46c196254709d3" to "45d83e89d909983a37ad582e8e1331e56ca9419d"



---

archive/issue_comments_439378.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[2b7ba4b](https://github.com/sagemath/sagetrac-mirror/commit/2b7ba4bf53c15d3c9a31aa9beb0db71d79808bed)|`change annihilator when cardinality is 1`|\n|[1013f56](https://github.com/sagemath/sagetrac-mirror/commit/1013f565c676972b1c04abeb50326cf6772bf379)|`fixed 0 to 1`|\n|[360ce18](https://github.com/sagemath/sagetrac-mirror/commit/360ce18f8e3483e4af3fdd40ab33273a820f091b)|`added documentation`|\n|[45d83e8](https://github.com/sagemath/sagetrac-mirror/commit/45d83e89d909983a37ad582e8e1331e56ca9419d)|`Merge branch 'u/amy/additiveabeliangroup_____annihilator___fails_' of git://trac.sagemath.org/sage into t/23634/integral_qforms`|",
    "created_at": "2017-09-30T22:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439378",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[2b7ba4b](https://github.com/sagemath/sagetrac-mirror/commit/2b7ba4bf53c15d3c9a31aa9beb0db71d79808bed)|`change annihilator when cardinality is 1`|
|[1013f56](https://github.com/sagemath/sagetrac-mirror/commit/1013f565c676972b1c04abeb50326cf6772bf379)|`fixed 0 to 1`|
|[360ce18](https://github.com/sagemath/sagetrac-mirror/commit/360ce18f8e3483e4af3fdd40ab33273a820f091b)|`added documentation`|
|[45d83e8](https://github.com/sagemath/sagetrac-mirror/commit/45d83e89d909983a37ad582e8e1331e56ca9419d)|`Merge branch 'u/amy/additiveabeliangroup_____annihilator___fails_' of git://trac.sagemath.org/sage into t/23634/integral_qforms`|



---

archive/issue_comments_439379.json:
```json
{
    "body": "<a id='comment:11'></a>\nI'm happy with it; Simon, you should take a look at my changes.",
    "created_at": "2017-09-30T22:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439379",
    "user": "https://github.com/roed314"
}
```

<a id='comment:11'></a>
I'm happy with it; Simon, you should take a look at my changes.



---

archive/issue_comments_439380.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[09a7e7d](https://github.com/sagemath/sagetrac-mirror/commit/09a7e7debacf409eb618a1fa8f7e5b0142901edf)|`Remove prime_to_m_part import`|",
    "created_at": "2017-09-30T22:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439380",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[09a7e7d](https://github.com/sagemath/sagetrac-mirror/commit/09a7e7debacf409eb618a1fa8f7e5b0142901edf)|`Remove prime_to_m_part import`|



---

archive/issue_comments_439381.json:
```json
{
    "body": "Changing commit from \"45d83e89d909983a37ad582e8e1331e56ca9419d\" to \"09a7e7debacf409eb618a1fa8f7e5b0142901edf\"",
    "created_at": "2017-09-30T22:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439381",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "45d83e89d909983a37ad582e8e1331e56ca9419d" to "09a7e7debacf409eb618a1fa8f7e5b0142901edf"



---

archive/issue_comments_439382.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-30T22:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439382",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439383.json:
```json
{
    "body": "<a id='comment:13'></a>\nLooks good!",
    "created_at": "2017-09-30T22:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439383",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:13'></a>
Looks good!



---

archive/issue_comments_439384.json:
```json
{
    "body": "Changing commit from \"09a7e7debacf409eb618a1fa8f7e5b0142901edf\" to \"69955c7fa3c2d348b87cd7f0c803a45d453a8312\"",
    "created_at": "2017-10-01T02:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "09a7e7debacf409eb618a1fa8f7e5b0142901edf" to "69955c7fa3c2d348b87cd7f0c803a45d453a8312"



---

archive/issue_comments_439385.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[69955c7](https://github.com/sagemath/sagetrac-mirror/commit/69955c7fa3c2d348b87cd7f0c803a45d453a8312)|`Fix case for math directive`|",
    "created_at": "2017-10-01T02:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[69955c7](https://github.com/sagemath/sagetrac-mirror/commit/69955c7fa3c2d348b87cd7f0c803a45d453a8312)|`Fix case for math directive`|



---

archive/issue_comments_439386.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-10-01T02:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439386",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_439387.json:
```json
{
    "body": "Changing dependencies from \"#22720\" to \"#22720,#23703\"",
    "created_at": "2017-10-01T04:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439387",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing dependencies from "#22720" to "#22720,#23703"



---

archive/issue_comments_439388.json:
```json
{
    "body": "<a id='comment:16'></a>\nAll doctests pass & the documentation builds.",
    "created_at": "2017-10-01T04:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439388",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:16'></a>
All doctests pass & the documentation builds.



---

archive/issue_comments_439389.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-01T04:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439389",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439390.json:
```json
{
    "body": "Changing branch from \"u/roed/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-10-01T04:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439390",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "u/roed/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439391.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n|[abef20e](https://github.com/sagemath/sagetrac-mirror/commit/abef20e14cbf24e882704d84dcc950439301544a)|`Doctests.`|",
    "created_at": "2017-10-01T05:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439391",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|[abef20e](https://github.com/sagemath/sagetrac-mirror/commit/abef20e14cbf24e882704d84dcc950439301544a)|`Doctests.`|



---

archive/issue_comments_439392.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-10-01T05:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_439393.json:
```json
{
    "body": "Changing commit from \"69955c7fa3c2d348b87cd7f0c803a45d453a8312\" to \"abef20e14cbf24e882704d84dcc950439301544a\"",
    "created_at": "2017-10-01T05:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "69955c7fa3c2d348b87cd7f0c803a45d453a8312" to "abef20e14cbf24e882704d84dcc950439301544a"



---

archive/issue_comments_439394.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-01T05:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439394",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439395.json:
```json
{
    "body": "<a id='comment:19'></a>\nThanks for fixing those!",
    "created_at": "2017-10-01T05:07:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439395",
    "user": "https://github.com/roed314"
}
```

<a id='comment:19'></a>
Thanks for fixing those!



---

archive/issue_comments_439396.json:
```json
{
    "body": "<a id='comment:20'></a>\nThe documentation for IntegralLattice is wrong.",
    "created_at": "2017-10-01T16:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439396",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:20'></a>
The documentation for IntegralLattice is wrong.



---

archive/issue_comments_439397.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-10-01T16:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439397",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_439398.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"u/amy/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-10-01T17:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439398",
    "user": "https://trac.sagemath.org/admin/accounts/users/amy"
}
```

Changing branch from "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "u/amy/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439399.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[12acb67](https://github.com/sagemath/sagetrac-mirror/commit/12acb67fbaea03e6f9420248d3458b05811fe2b3)|`Update documentation and formatting. Add TODOs`|",
    "created_at": "2017-10-01T17:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[12acb67](https://github.com/sagemath/sagetrac-mirror/commit/12acb67fbaea03e6f9420248d3458b05811fe2b3)|`Update documentation and formatting. Add TODOs`|



---

archive/issue_comments_439400.json:
```json
{
    "body": "Changing commit from \"abef20e14cbf24e882704d84dcc950439301544a\" to \"12acb67fbaea03e6f9420248d3458b05811fe2b3\"",
    "created_at": "2017-10-01T17:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "abef20e14cbf24e882704d84dcc950439301544a" to "12acb67fbaea03e6f9420248d3458b05811fe2b3"



---

archive/issue_comments_439401.json:
```json
{
    "body": "Changing branch from \"u/amy/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-10-01T19:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439401",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "u/amy/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439402.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-01T19:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439402",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_439403.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"u/amy/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-10-01T19:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439403",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "u/amy/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439404.json:
```json
{
    "body": "Changing branch from \"u/amy/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-10-01T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439404",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "u/amy/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439405.json:
```json
{
    "body": "Changing commit from \"12acb67fbaea03e6f9420248d3458b05811fe2b3\" to \"74a7393c87ceb7f1d6061bc4e1eb9c6efc88ae2d\"",
    "created_at": "2017-10-01T20:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "12acb67fbaea03e6f9420248d3458b05811fe2b3" to "74a7393c87ceb7f1d6061bc4e1eb9c6efc88ae2d"



---

archive/issue_comments_439406.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|\n|[74a7393](https://github.com/sagemath/sagetrac-mirror/commit/74a7393c87ceb7f1d6061bc4e1eb9c6efc88ae2d)|`Fixed a syntax error and added a doctest for orthogonal_complement.`|",
    "created_at": "2017-10-01T20:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439406",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|
|[74a7393](https://github.com/sagemath/sagetrac-mirror/commit/74a7393c87ceb7f1d6061bc4e1eb9c6efc88ae2d)|`Fixed a syntax error and added a doctest for orthogonal_complement.`|



---

archive/issue_comments_439407.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"u/roed/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-10-01T20:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439407",
    "user": "https://github.com/roed314"
}
```

Changing branch from "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "u/roed/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439408.json:
```json
{
    "body": "<a id='comment:28'></a>\nPositive review if you're happy with my changes.\n\n---\nNew commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[c96014b](https://github.com/sagemath/sagetrac-mirror/commit/c96014b267046a9b36d7f6d5612b5776485c6076)|`Editing docstrings, a few small code fixes`|",
    "created_at": "2017-10-01T20:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439408",
    "user": "https://github.com/roed314"
}
```

<a id='comment:28'></a>
Positive review if you're happy with my changes.

---
New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[c96014b](https://github.com/sagemath/sagetrac-mirror/commit/c96014b267046a9b36d7f6d5612b5776485c6076)|`Editing docstrings, a few small code fixes`|



---

archive/issue_comments_439409.json:
```json
{
    "body": "Changing commit from \"74a7393c87ceb7f1d6061bc4e1eb9c6efc88ae2d\" to \"c96014b267046a9b36d7f6d5612b5776485c6076\"",
    "created_at": "2017-10-01T20:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439409",
    "user": "https://github.com/roed314"
}
```

Changing commit from "74a7393c87ceb7f1d6061bc4e1eb9c6efc88ae2d" to "c96014b267046a9b36d7f6d5612b5776485c6076"



---

archive/issue_comments_439410.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-01T21:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439410",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439411.json:
```json
{
    "body": "<a id='comment:30'></a>\n\n```\nsage -t --long --warn-long 64.6 src/sage/modules/free_quadratic_module_integer_symmetric.py\n**********************************************************************\nFile \"src/sage/modules/free_quadratic_module_integer_symmetric.py\", line 112, in sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.__init__\nFailed example:\n    TestSuite(L).run()\nExpected nothing\nGot:\n      Failure in _test_pickling:\n      Traceback (most recent call last):\n        File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 294, in run\n          test_method(tester = tester)\n        File \"sage/structure/sage_object.pyx\", line 683, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:5952)\n          tester.assertEqual(loads(dumps(self)), self)\n        File \"/mnt/disk/home/release/Sage/local/lib/python2.7/unittest/case.py\", line 513, in assertEqual\n          assertion_func(first, second, msg=msg)\n        File \"/mnt/disk/home/release/Sage/local/lib/python2.7/unittest/case.py\", line 506, in _baseAssertEqual\n          raise self.failureException(msg)\n      AssertionError: (1, 0) != (1, 0)\n      ------------------------------------------------------------\n      The following tests failed: _test_pickling\n    Failure in _test_elements\n    The following tests failed: _test_elements\n**********************************************************************\nFile \"src/sage/modules/free_quadratic_module_integer_symmetric.py\", line 340, in sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.orthogonal_complement\nFailed example:\n    L.orthogonal_complement(S)\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 515, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 885, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.orthogonal_complement[3]>\", line 1, in <module>\n        L.orthogonal_complement(S)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/modules/free_quadratic_module_integer_symmetric.py\", line 365, in orthogonal_complement\n        return self.sublattice(self.intersection(K).basis())\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/modules/free_module.py\", line 2550, in intersection\n        raise ArithmeticError(\"self and other must be embedded in the same ambient space.\")\n    ArithmeticError: self and other must be embedded in the same ambient space.\n**********************************************************************\n2 items had failures:\n   1 of   4 in sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.__init__\n   1 of   7 in sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.orthogonal_complement\n    [65 tests, 2 failures, 0.64 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 64.6 src/sage/modules/free_quadratic_module_integer_symmetric.py  # 2 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2017-10-04T23:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439411",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:30'></a>

```
sage -t --long --warn-long 64.6 src/sage/modules/free_quadratic_module_integer_symmetric.py
**********************************************************************
File "src/sage/modules/free_quadratic_module_integer_symmetric.py", line 112, in sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.__init__
Failed example:
    TestSuite(L).run()
Expected nothing
Got:
      Failure in _test_pickling:
      Traceback (most recent call last):
        File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 294, in run
          test_method(tester = tester)
        File "sage/structure/sage_object.pyx", line 683, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:5952)
          tester.assertEqual(loads(dumps(self)), self)
        File "/mnt/disk/home/release/Sage/local/lib/python2.7/unittest/case.py", line 513, in assertEqual
          assertion_func(first, second, msg=msg)
        File "/mnt/disk/home/release/Sage/local/lib/python2.7/unittest/case.py", line 506, in _baseAssertEqual
          raise self.failureException(msg)
      AssertionError: (1, 0) != (1, 0)
      ------------------------------------------------------------
      The following tests failed: _test_pickling
    Failure in _test_elements
    The following tests failed: _test_elements
**********************************************************************
File "src/sage/modules/free_quadratic_module_integer_symmetric.py", line 340, in sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.orthogonal_complement
Failed example:
    L.orthogonal_complement(S)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 515, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 885, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.orthogonal_complement[3]>", line 1, in <module>
        L.orthogonal_complement(S)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/modules/free_quadratic_module_integer_symmetric.py", line 365, in orthogonal_complement
        return self.sublattice(self.intersection(K).basis())
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/modules/free_module.py", line 2550, in intersection
        raise ArithmeticError("self and other must be embedded in the same ambient space.")
    ArithmeticError: self and other must be embedded in the same ambient space.
**********************************************************************
2 items had failures:
   1 of   4 in sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.__init__
   1 of   7 in sage.modules.free_quadratic_module_integer_symmetric.FreeQuadraticModule_integer_symmetric.orthogonal_complement
    [65 tests, 2 failures, 0.64 s]
----------------------------------------------------------------------
sage -t --long --warn-long 64.6 src/sage/modules/free_quadratic_module_integer_symmetric.py  # 2 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_439412.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-10-04T23:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439412",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_439413.json:
```json
{
    "body": "<a id='comment:31'></a>\nI cannot reproduce this :-(. Can someone else?\n\n```\n./sage -t --long --warn-long 64.6 src/sage/modules/free_quadratic_module_integer_symmetric.py\nRunning doctests with ID 2017-10-05-11-26-06-7db5d712.\nGit branch: t/23634/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\nUsing --optional=atlas,ccache,mpir,python2,sage\nDoctesting 1 file.\nsage -t --long --warn-long 64.6 src/sage/modules/free_quadratic_module_integer_symmetric.py\n    [65 tests, 1.21 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 1.3 seconds\n    cpu time: 0.9 seconds\n    cumulative wall time: 1.2 seconds\n```",
    "created_at": "2017-10-05T09:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439413",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:31'></a>
I cannot reproduce this :-(. Can someone else?

```
./sage -t --long --warn-long 64.6 src/sage/modules/free_quadratic_module_integer_symmetric.py
Running doctests with ID 2017-10-05-11-26-06-7db5d712.
Git branch: t/23634/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_
Using --optional=atlas,ccache,mpir,python2,sage
Doctesting 1 file.
sage -t --long --warn-long 64.6 src/sage/modules/free_quadratic_module_integer_symmetric.py
    [65 tests, 1.21 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 1.3 seconds
    cpu time: 0.9 seconds
    cumulative wall time: 1.2 seconds
```



---

archive/issue_comments_439414.json:
```json
{
    "body": "<a id='comment:32'></a>\nI get the failures when I test it with #23915.",
    "created_at": "2017-10-05T15:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439414",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>
I get the failures when I test it with #23915.



---

archive/issue_comments_439415.json:
```json
{
    "body": "Changing branch from \"u/roed/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\"",
    "created_at": "2017-10-06T08:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439415",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "u/roed/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_"



---

archive/issue_comments_439416.json:
```json
{
    "body": "<a id='comment:34'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[d727d6c](https://github.com/sagemath/sagetrac-mirror/commit/d727d6c46bb3b74e4e87f122e9d3da3856897adc)|`Fixed orthogonal_complement()`|",
    "created_at": "2017-10-06T08:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[d727d6c](https://github.com/sagemath/sagetrac-mirror/commit/d727d6c46bb3b74e4e87f122e9d3da3856897adc)|`Fixed orthogonal_complement()`|



---

archive/issue_comments_439417.json:
```json
{
    "body": "Changing commit from \"c96014b267046a9b36d7f6d5612b5776485c6076\" to \"d727d6c46bb3b74e4e87f122e9d3da3856897adc\"",
    "created_at": "2017-10-06T08:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c96014b267046a9b36d7f6d5612b5776485c6076" to "d727d6c46bb3b74e4e87f122e9d3da3856897adc"



---

archive/issue_comments_439418.json:
```json
{
    "body": "<a id='comment:35'></a>\n\n```\nsage: from sage.modules.free_quadratic_module_integer_symmetric import *\nsage: L=IntegralLattice(Matrix(ZZ,2,2,[0,1,1,0]))\nsage: x=L.an_element()\nsage: x == loads(dumps(x))\nTrue\nsage: x == loads(dumps(x))\nFalse\nsage: x == loads(dumps(x))\nTrue\nsage: x == loads(dumps(x))\nTrue\n```\nUhm. Is loads(dumps(x)) non-deterministic? This bug confuses me.",
    "created_at": "2017-10-06T08:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439418",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:35'></a>

```
sage: from sage.modules.free_quadratic_module_integer_symmetric import *
sage: L=IntegralLattice(Matrix(ZZ,2,2,[0,1,1,0]))
sage: x=L.an_element()
sage: x == loads(dumps(x))
True
sage: x == loads(dumps(x))
False
sage: x == loads(dumps(x))
True
sage: x == loads(dumps(x))
True
```
Uhm. Is loads(dumps(x)) non-deterministic? This bug confuses me.



---

archive/issue_comments_439419.json:
```json
{
    "body": "Changing commit from \"d727d6c46bb3b74e4e87f122e9d3da3856897adc\" to \"06b8167770e2cf4d025b7d1e444d9878542f0b1f\"",
    "created_at": "2017-10-06T09:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d727d6c46bb3b74e4e87f122e9d3da3856897adc" to "06b8167770e2cf4d025b7d1e444d9878542f0b1f"



---

archive/issue_comments_439420.json:
```json
{
    "body": "<a id='comment:36'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                                                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|[06b8167](https://github.com/sagemath/sagetrac-mirror/commit/06b8167770e2cf4d025b7d1e444d9878542f0b1f)|`Fixed the loads(dumps(x)) issue by fixing comparison for free modules. The change only kicks in if the unique parent assumption is violated. This seems to happen in the loads dumps process.`|",
    "created_at": "2017-10-06T09:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                                                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|[06b8167](https://github.com/sagemath/sagetrac-mirror/commit/06b8167770e2cf4d025b7d1e444d9878542f0b1f)|`Fixed the loads(dumps(x)) issue by fixing comparison for free modules. The change only kicks in if the unique parent assumption is violated. This seems to happen in the loads dumps process.`|



---

archive/issue_comments_439421.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-06T09:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439421",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_439422.json:
```json
{
    "body": "<a id='comment:37'></a>\nLets see what the patchbot says.",
    "created_at": "2017-10-06T09:25:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439422",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:37'></a>
Lets see what the patchbot says.



---

archive/issue_comments_439423.json:
```json
{
    "body": "<a id='comment:38'></a>\nWhy not just use `richcmp(lx, rx, op)`?\n\nAlso, instead of\n\n```\nself._inner_product_is_dot_product()==True\n```\nyou should just do `self._inner_product_is_dot_product()`.",
    "created_at": "2017-10-06T18:14:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439423",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:38'></a>
Why not just use `richcmp(lx, rx, op)`?

Also, instead of

```
self._inner_product_is_dot_product()==True
```
you should just do `self._inner_product_is_dot_product()`.



---

archive/issue_comments_439424.json:
```json
{
    "body": "Changing commit from \"06b8167770e2cf4d025b7d1e444d9878542f0b1f\" to \"707a74e27dd6fea52d3785fe4dbe1f46b61d3a84\"",
    "created_at": "2017-10-06T18:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "06b8167770e2cf4d025b7d1e444d9878542f0b1f" to "707a74e27dd6fea52d3785fe4dbe1f46b61d3a84"



---

archive/issue_comments_439425.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[707a74e](https://github.com/sagemath/sagetrac-mirror/commit/707a74e27dd6fea52d3785fe4dbe1f46b61d3a84)|`clean up in __richcmp__ for free modules.`|",
    "created_at": "2017-10-06T18:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[707a74e](https://github.com/sagemath/sagetrac-mirror/commit/707a74e27dd6fea52d3785fe4dbe1f46b61d3a84)|`clean up in __richcmp__ for free modules.`|



---

archive/issue_comments_439426.json:
```json
{
    "body": "<a id='comment:40'></a>\nGood point. Changed that.\n\n---\nNew commits:\n|                                                                                                                                          |                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[707a74e](https://github.com/sagemath/sagetrac-mirror/commit/707a74e27dd6fea52d3785fe4dbe1f46b61d3a84)|`clean up in __richcmp__ for free modules.`|",
    "created_at": "2017-10-06T18:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439426",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:40'></a>
Good point. Changed that.

---
New commits:
|                                                                                                                                          |                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[707a74e](https://github.com/sagemath/sagetrac-mirror/commit/707a74e27dd6fea52d3785fe4dbe1f46b61d3a84)|`clean up in __richcmp__ for free modules.`|



---

archive/issue_comments_439427.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-06T23:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439427",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439428.json:
```json
{
    "body": "<a id='comment:41'></a>\nLooks good to me.  The failure in `geometry/cone.py` seems to have resulted from an out-of-memory problem.",
    "created_at": "2017-10-06T23:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439428",
    "user": "https://github.com/roed314"
}
```

<a id='comment:41'></a>
Looks good to me.  The failure in `geometry/cone.py` seems to have resulted from an out-of-memory problem.



---

archive/issue_comments_439429.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_\" to \"707a74e27dd6fea52d3785fe4dbe1f46b61d3a84\"",
    "created_at": "2017-10-15T09:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439429",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/sbrandhorst/a_base_class_for_integral_quadratic_forms_seen_as_modules_with_a_bilinear_form_" to "707a74e27dd6fea52d3785fe4dbe1f46b61d3a84"



---

archive/issue_events_076608.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-15T09:22:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23634#event-76608"
}
```



---

archive/issue_comments_439430.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-15T09:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23634",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23634#issuecomment-439430",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
