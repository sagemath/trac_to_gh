# Issue 23214: enhance sparse integer matrix with linbox (+ cleaning)

archive/issues_022977.json:
```json
{
    "assignees": [],
    "body": "LinBox has algorithms to work with sparse matrices. This ticket provides the necessary interface for:\n- solving sparse systems over integers\n- computing determinant and rank\n- computing minimal and characteristic polynomials\n\nSome cleaning had to be done as a first step (used to be #26178).\n\nLinBox issues\n\n- [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)\n- [Issue 138 (Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)\n- [Issue 144 (row index: unsigned long versus size_t)](https://github.com/linbox-team/linbox/issues/144)\n\n(see also #22872 for the linbox task ticket)\n\nCC:  @ClementPernet @tscrim @sagetrac-tmonteil\n\nKeywords: **linbox**\n\nBranch: **[`98ac984`](https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca)**\n\nReviewer: **Travis Scrimshaw, Vincent Klein**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **linear algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23214_\n\n",
    "closed_at": "2018-11-07T11:28:16Z",
    "created_at": "2017-06-11T07:39:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "enhance sparse integer matrix with linbox (+ cleaning)",
    "type": "issue",
    "updated_at": "2019-10-10T22:28:11Z",
    "url": "https://github.com/sagemath/sage/issues/23214",
    "user": "https://github.com/videlec"
}
```
LinBox has algorithms to work with sparse matrices. This ticket provides the necessary interface for:
- solving sparse systems over integers
- computing determinant and rank
- computing minimal and characteristic polynomials

Some cleaning had to be done as a first step (used to be #26178).

LinBox issues

- [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)
- [Issue 138 (Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)
- [Issue 144 (row index: unsigned long versus size_t)](https://github.com/linbox-team/linbox/issues/144)

(see also #22872 for the linbox task ticket)

CC:  @ClementPernet @tscrim @sagetrac-tmonteil

Keywords: **linbox**

Branch: **[`98ac984`](https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca)**

Reviewer: **Travis Scrimshaw, Vincent Klein**

Author: **Vincent Delecroix**

Component: **linear algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/23214_





---

archive/issue_events_320674.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-06-11T07:39:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320674"
}
```



---

archive/issue_events_320675.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-06-11T07:39:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320675"
}
```



---

archive/issue_events_320676.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-06-11T07:39:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320676"
}
```



---

archive/issue_events_320677.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-06-11T07:39:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320677"
}
```



---

archive/issue_comments_348230.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nJust to put in a plug for this, it would be very useful for various aspects of number theory, particularly dealing with Hecke operators which tend to be represented by sparse integer matrices.",
    "created_at": "2017-09-11T00:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348230",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:1" align="right">comment:1</div>

Just to put in a plug for this, it would be very useful for various aspects of number theory, particularly dealing with Hecke operators which tend to be represented by sparse integer matrices.



---

archive/issue_comments_348231.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAnd combinatorics and geomtry and ... just waiting for upstream [github issue 56](https://github.com/linbox-team/linbox/issues/56).",
    "created_at": "2017-09-11T05:14:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348231",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

And combinatorics and geomtry and ... just waiting for upstream [github issue 56](https://github.com/linbox-team/linbox/issues/56).



---

archive/issue_comments_348232.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThat issue has been closed.  Are we waiting on a release?",
    "created_at": "2017-11-05T07:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348232",
    "user": "https://github.com/roed314"
}
```

<div id="comment:3" align="right">comment:3</div>

That issue has been closed.  Are we waiting on a release?



---

archive/issue_comments_348233.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIndeed, Cl\u00e9ment wrote on the github issue\n\n```\nNote that we're also planning on releasing all 3 libraries\nsoon (within a few weeks), and I'll create a sage ticket\nfor updating the spkg.\n```",
    "created_at": "2017-11-05T09:20:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348233",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

Indeed, Cl√©ment wrote on the github issue

```
Note that we're also planning on releasing all 3 libraries
soon (within a few weeks), and I'll create a sage ticket
for updating the spkg.
```



---

archive/issue_comments_348234.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nFYI LinBox upgrade ticket is #24214.\nCurrent ticket already depends on it by transitivity with #23158.",
    "created_at": "2017-11-14T09:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348234",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:5" align="right">comment:5</div>

FYI LinBox upgrade ticket is #24214.
Current ticket already depends on it by transitivity with #23158.



---

archive/issue_comments_348235.json:
```json
{
    "body": "Changed dependencies from **#23158** to **#24544**",
    "created_at": "2018-04-30T10:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348235",
    "user": "https://github.com/videlec"
}
```

Changed dependencies from **#23158** to **#24544**



---

archive/issue_events_320678.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-04-30T10:59:50Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320678"
}
```



---

archive/issue_events_320679.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-04-30T10:59:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320679"
}
```



---

archive/issue_events_320680.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-04-30T13:39:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "title_is": "solve/det/rank for sparse integer matrix using LinBox",
    "title_was": "solving integer sparse linear system using LinBox",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320680"
}
```



---

archive/issue_comments_348236.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-LinBox has very efficient algorithms to solve linear systems. This ticket provides the necessary interface for solving sparse systems over integers.\n+LinBox has algorithms to work with sparse matrices. This ticket provides the necessary interface for:\n+- solving sparse systems over integers\n+- computing determinant and rank\n``````\n",
    "created_at": "2018-04-30T13:39:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348236",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-LinBox has very efficient algorithms to solve linear systems. This ticket provides the necessary interface for solving sparse systems over integers.
+LinBox has algorithms to work with sparse matrices. This ticket provides the necessary interface for:
+- solving sparse systems over integers
+- computing determinant and rank
``````




---

archive/issue_events_320681.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-01T12:12:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "title_is": "enhance sparse integer matrix with linbox",
    "title_was": "solve/det/rank for sparse integer matrix using LinBox",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320681"
}
```



---

archive/issue_comments_348237.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n LinBox has algorithms to work with sparse matrices. This ticket provides the necessary interface for:\n - solving sparse systems over integers\n - computing determinant and rank\n+- computing minimal and characteristic polynomials\n``````\n",
    "created_at": "2018-05-01T12:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348237",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
 LinBox has algorithms to work with sparse matrices. This ticket provides the necessary interface for:
 - solving sparse systems over integers
 - computing determinant and rank
+- computing minimal and characteristic polynomials
``````




---

archive/issue_comments_348238.json:
```json
{
    "body": "Branch: **[u/vdelecroix/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23214)**",
    "created_at": "2018-05-01T12:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348238",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23214)**



---

archive/issue_events_320682.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-01T12:17:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320682"
}
```



---

archive/issue_comments_348239.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb54e4bb4fdbc6e947f00810cd5647bb0112b103\"><code>eb54e4b</code></a></td><td><code>24544: cleaning linbox headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d787d30f809816da2587e3800e6a3a73ac97022\"><code>9d787d3</code></a></td><td><code>24544: fix matrix_modn_dense</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99ed9447842555548004661fbf9e52e89479bdf0\"><code>99ed944</code></a></td><td><code>24544: fix matrix_modn_sparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13f4de4355768beb6fa5a94dc975fd8b55f6d8b4\"><code>13f4de4</code></a></td><td><code>24544: fix documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1e49334fcf8fd8a1620f495dba89ea10937e52e\"><code>a1e4933</code></a></td><td><code>24544: do not compile the sage extension support anymore</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/956610a83e4d5f091b6e91dfaccae3772a9f3178\"><code>956610a</code></a></td><td><code>24544: remove linbox GFq from benchmarks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e92d8eb97a9212a2d10528d5a373952be5e0d7a\"><code>7e92d8e</code></a></td><td><code>23214: sparse integer matrices and LinBox</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2712020f863309676e9da504ede9c34976c1d619\"><code>2712020</code></a></td><td><code>23214: empty conversion.pyx to make cython happy</code></td></tr></table>\n",
    "created_at": "2018-05-01T12:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348239",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb54e4bb4fdbc6e947f00810cd5647bb0112b103"><code>eb54e4b</code></a></td><td><code>24544: cleaning linbox headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d787d30f809816da2587e3800e6a3a73ac97022"><code>9d787d3</code></a></td><td><code>24544: fix matrix_modn_dense</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99ed9447842555548004661fbf9e52e89479bdf0"><code>99ed944</code></a></td><td><code>24544: fix matrix_modn_sparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13f4de4355768beb6fa5a94dc975fd8b55f6d8b4"><code>13f4de4</code></a></td><td><code>24544: fix documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1e49334fcf8fd8a1620f495dba89ea10937e52e"><code>a1e4933</code></a></td><td><code>24544: do not compile the sage extension support anymore</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/956610a83e4d5f091b6e91dfaccae3772a9f3178"><code>956610a</code></a></td><td><code>24544: remove linbox GFq from benchmarks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e92d8eb97a9212a2d10528d5a373952be5e0d7a"><code>7e92d8e</code></a></td><td><code>23214: sparse integer matrices and LinBox</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2712020f863309676e9da504ede9c34976c1d619"><code>2712020</code></a></td><td><code>23214: empty conversion.pyx to make cython happy</code></td></tr></table>




---

archive/issue_comments_348240.json:
```json
{
    "body": "Commit: **[`2712020`](https://github.com/sagemath/sagetrac-mirror/commit/2712020f863309676e9da504ede9c34976c1d619)**",
    "created_at": "2018-05-01T12:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348240",
    "user": "https://github.com/videlec"
}
```

Commit: **[`2712020`](https://github.com/sagemath/sagetrac-mirror/commit/2712020f863309676e9da504ede9c34976c1d619)**



---

archive/issue_comments_348241.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,5 @@\n - solving sparse systems over integers\n - computing determinant and rank\n - computing minimal and characteristic polynomials\n+\n+(see also #22872 for the linbox task ticket)\n``````\n",
    "created_at": "2018-05-01T12:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348241",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,5 @@
 - solving sparse systems over integers
 - computing determinant and rank
 - computing minimal and characteristic polynomials
+
+(see also #22872 for the linbox task ticket)
``````




---

archive/issue_comments_348242.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis hangs forever\n\n```\nsage: m = diagonal_matrix(ZZ, 68, [2]*66 + [1,1])\nsage: type(m)\n<type 'sage.matrix.matrix_integer_sparse.Matrix_integer_sparse'>\nsage: m.det()\n```\n(from `matrix/matrix_integer_dense_hnf.py`)",
    "created_at": "2018-05-02T09:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348242",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

This hangs forever

```
sage: m = diagonal_matrix(ZZ, 68, [2]*66 + [1,1])
sage: type(m)
<type 'sage.matrix.matrix_integer_sparse.Matrix_integer_sparse'>
sage: m.det()
```
(from `matrix/matrix_integer_dense_hnf.py`)



---

archive/issue_comments_348243.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,8 @@\n - computing determinant and rank\n - computing minimal and characteristic polynomials\n \n+LinBox issues\n+\n+- [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)\n+\n (see also #22872 for the linbox task ticket)\n``````\n",
    "created_at": "2018-05-02T09:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348243",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,8 @@
 - computing determinant and rank
 - computing minimal and characteristic polynomials
 
+LinBox issues
+
+- [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)
+
 (see also #22872 for the linbox task ticket)
``````




---

archive/issue_comments_348244.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74ccd060c500804dda285c6640199598e12965eb\"><code>74ccd06</code></a></td><td><code>23214: sparse integer matrices and LinBox</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cd803714d3cdc6435a58649a4a7efebd9460c9c\"><code>1cd8037</code></a></td><td><code>23214: don't use LinBox for determinant</code></td></tr></table>\n",
    "created_at": "2018-05-02T10:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348244",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74ccd060c500804dda285c6640199598e12965eb"><code>74ccd06</code></a></td><td><code>23214: sparse integer matrices and LinBox</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cd803714d3cdc6435a58649a4a7efebd9460c9c"><code>1cd8037</code></a></td><td><code>23214: don't use LinBox for determinant</code></td></tr></table>




---

archive/issue_comments_348245.json:
```json
{
    "body": "Changed commit from **[`2712020`](https://github.com/sagemath/sagetrac-mirror/commit/2712020f863309676e9da504ede9c34976c1d619)** to **[`1cd8037`](https://github.com/sagemath/sagetrac-mirror/commit/1cd803714d3cdc6435a58649a4a7efebd9460c9c)**",
    "created_at": "2018-05-02T10:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348245",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2712020`](https://github.com/sagemath/sagetrac-mirror/commit/2712020f863309676e9da504ede9c34976c1d619)** to **[`1cd8037`](https://github.com/sagemath/sagetrac-mirror/commit/1cd803714d3cdc6435a58649a4a7efebd9460c9c)**



---

archive/issue_comments_348246.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b7b84a078084a505c722b43689c6f6f12aca0e9\"><code>5b7b84a</code></a></td><td><code>23214: sparse integer matrices and LinBox</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84236154543bf0b2dcf547dcd372d5605d949668\"><code>8423615</code></a></td><td><code>23214: don't use LinBox for determinant</code></td></tr></table>\n",
    "created_at": "2018-05-02T15:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348246",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b7b84a078084a505c722b43689c6f6f12aca0e9"><code>5b7b84a</code></a></td><td><code>23214: sparse integer matrices and LinBox</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84236154543bf0b2dcf547dcd372d5605d949668"><code>8423615</code></a></td><td><code>23214: don't use LinBox for determinant</code></td></tr></table>




---

archive/issue_comments_348247.json:
```json
{
    "body": "Changed commit from **[`1cd8037`](https://github.com/sagemath/sagetrac-mirror/commit/1cd803714d3cdc6435a58649a4a7efebd9460c9c)** to **[`8423615`](https://github.com/sagemath/sagetrac-mirror/commit/84236154543bf0b2dcf547dcd372d5605d949668)**",
    "created_at": "2018-05-02T15:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348247",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1cd8037`](https://github.com/sagemath/sagetrac-mirror/commit/1cd803714d3cdc6435a58649a4a7efebd9460c9c)** to **[`8423615`](https://github.com/sagemath/sagetrac-mirror/commit/84236154543bf0b2dcf547dcd372d5605d949668)**



---

archive/issue_comments_348248.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n\n```\nsage: Matrix(IntegerModRing(16), 3, 3, lambda i,j: i+j, sparse=True).determinant()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-2-2d0c9b09dcc5> in <module>()\n----> 1 Matrix(IntegerModRing(Integer(16)), Integer(3), Integer(3), lambda i,j: i+j, sparse=True).determinant()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/matrix/matrix_modn_sparse.pyx in sage.matrix.matrix_modn_sparse.Matrix_modn_sparse.determinant (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:10523)()\n    924 \n    925         if algorithm is None or algorithm == \"linbox\":\n--> 926             r, d = self._rank_det_linbox()\n    927             self.cache('rank', r)\n    928             self.cache('det', d)\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/matrix/matrix_modn_sparse.pyx in sage.matrix.matrix_modn_sparse.Matrix_modn_sparse._rank_det_linbox (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:9553)()\n    766 \n    767         if not is_prime(self.p):\n--> 768             raise TypeError(\"only GF(p) supported via LinBox\")\n    769 \n    770         cdef Modular_int64 * F = new Modular_int64(self.p)\n\nTypeError: only GF(p) supported via LinBox\n```",
    "created_at": "2018-05-04T10:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348248",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>


```
sage: Matrix(IntegerModRing(16), 3, 3, lambda i,j: i+j, sparse=True).determinant()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-2-2d0c9b09dcc5> in <module>()
----> 1 Matrix(IntegerModRing(Integer(16)), Integer(3), Integer(3), lambda i,j: i+j, sparse=True).determinant()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/matrix/matrix_modn_sparse.pyx in sage.matrix.matrix_modn_sparse.Matrix_modn_sparse.determinant (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:10523)()
    924 
    925         if algorithm is None or algorithm == "linbox":
--> 926             r, d = self._rank_det_linbox()
    927             self.cache('rank', r)
    928             self.cache('det', d)

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/matrix/matrix_modn_sparse.pyx in sage.matrix.matrix_modn_sparse.Matrix_modn_sparse._rank_det_linbox (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:9553)()
    766 
    767         if not is_prime(self.p):
--> 768             raise TypeError("only GF(p) supported via LinBox")
    769 
    770         cdef Modular_int64 * F = new Modular_int64(self.p)

TypeError: only GF(p) supported via LinBox
```



---

archive/issue_events_320683.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-04T10:14:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320683"
}
```



---

archive/issue_events_320684.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-05-04T10:14:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320684"
}
```



---

archive/issue_comments_348249.json:
```json
{
    "body": "Changed keywords from none to **linbox**",
    "created_at": "2018-06-26T14:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348249",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **linbox**



---

archive/issue_events_320685.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320685"
}
```



---

archive/issue_events_320686.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320686"
}
```



---

archive/issue_comments_348250.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nupdate milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348250",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

update milestone 8.3 -> 8.4



---

archive/issue_comments_348251.json:
```json
{
    "body": "Changed commit from **[`8423615`](https://github.com/sagemath/sagetrac-mirror/commit/84236154543bf0b2dcf547dcd372d5605d949668)** to **[`43babde`](https://github.com/sagemath/sagetrac-mirror/commit/43babdeae57a36e1b40dcf22e4ba254b3d229e2c)**",
    "created_at": "2018-09-02T19:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348251",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8423615`](https://github.com/sagemath/sagetrac-mirror/commit/84236154543bf0b2dcf547dcd372d5605d949668)** to **[`43babde`](https://github.com/sagemath/sagetrac-mirror/commit/43babdeae57a36e1b40dcf22e4ba254b3d229e2c)**



---

archive/issue_comments_348252.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c157ff2977db9bcb0940b2ce3ec310ded1d0df6\"><code>2c157ff</code></a></td><td><code>24544: cleaning linbox headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b037c871c7be6689f0137819fa207ad7e6a2f77a\"><code>b037c87</code></a></td><td><code>24544: fix matrix_modn_dense</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a12f0a1fb527a7ee65b85c19ea2e6f2101a1a443\"><code>a12f0a1</code></a></td><td><code>24554: fix matrix modn sparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52d8a349623e26f092b5d9d3321e3e82ec55a71a\"><code>52d8a34</code></a></td><td><code>24544: fix documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8acfbc98500f2ef619c7df6f2e9800804ea61e75\"><code>8acfbc9</code></a></td><td><code>24544: remove linbox GFq from benchmarks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43babdeae57a36e1b40dcf22e4ba254b3d229e2c\"><code>43babde</code></a></td><td><code>23214: use linbox in sparse integer matrices</code></td></tr></table>\n",
    "created_at": "2018-09-02T19:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348252",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c157ff2977db9bcb0940b2ce3ec310ded1d0df6"><code>2c157ff</code></a></td><td><code>24544: cleaning linbox headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b037c871c7be6689f0137819fa207ad7e6a2f77a"><code>b037c87</code></a></td><td><code>24544: fix matrix_modn_dense</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a12f0a1fb527a7ee65b85c19ea2e6f2101a1a443"><code>a12f0a1</code></a></td><td><code>24554: fix matrix modn sparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52d8a349623e26f092b5d9d3321e3e82ec55a71a"><code>52d8a34</code></a></td><td><code>24544: fix documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8acfbc98500f2ef619c7df6f2e9800804ea61e75"><code>8acfbc9</code></a></td><td><code>24544: remove linbox GFq from benchmarks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43babdeae57a36e1b40dcf22e4ba254b3d229e2c"><code>43babde</code></a></td><td><code>23214: use linbox in sparse integer matrices</code></td></tr></table>




---

archive/issue_events_320687.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-09-02T19:05:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320687"
}
```



---

archive/issue_events_320688.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-09-02T19:05:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320688"
}
```



---

archive/issue_comments_348253.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\npatchbot is happy :-)",
    "created_at": "2018-09-02T20:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348253",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">comment:20</div>

patchbot is happy :-)



---

archive/issue_comments_348254.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nOops, I got this confused with the other needs review linbox ticket where compiling on OSX was an issue, I'll try them both out together now I guess.",
    "created_at": "2018-09-02T20:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348254",
    "user": "https://github.com/alexjbest"
}
```

<div id="comment:21" align="right">comment:21</div>

Oops, I got this confused with the other needs review linbox ticket where compiling on OSX was an issue, I'll try them both out together now I guess.



---

archive/issue_comments_348255.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n@alexjbest: this ticket strictly contains the commit of the other one #24544.",
    "created_at": "2018-09-02T20:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348255",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

@alexjbest: this ticket strictly contains the commit of the other one #24544.



---

archive/issue_comments_348256.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nSmall typo (missing leading colon): <code>meth:\\`sage.matrix.matrix_sparse.Matrix_sparse.charpoly\\`</code> Otherwise I am happy with the current state (and will assume there are no failures on OSX).",
    "created_at": "2018-09-03T02:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348256",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

Small typo (missing leading colon): <code>meth:\`sage.matrix.matrix_sparse.Matrix_sparse.charpoly\`</code> Otherwise I am happy with the current state (and will assume there are no failures on OSX).



---

archive/issue_comments_348257.json:
```json
{
    "body": "Changed commit from **[`43babde`](https://github.com/sagemath/sagetrac-mirror/commit/43babdeae57a36e1b40dcf22e4ba254b3d229e2c)** to **[`1d8d266`](https://github.com/sagemath/sagetrac-mirror/commit/1d8d266779da4d0e9078e2050d9bb861a2ac213b)**",
    "created_at": "2018-09-03T02:26:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348257",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`43babde`](https://github.com/sagemath/sagetrac-mirror/commit/43babdeae57a36e1b40dcf22e4ba254b3d229e2c)** to **[`1d8d266`](https://github.com/sagemath/sagetrac-mirror/commit/1d8d266779da4d0e9078e2050d9bb861a2ac213b)**



---

archive/issue_comments_348258.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d8d266779da4d0e9078e2050d9bb861a2ac213b\"><code>1d8d266</code></a></td><td><code>23214: small typo</code></td></tr></table>\n",
    "created_at": "2018-09-03T02:26:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348258",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d8d266779da4d0e9078e2050d9bb861a2ac213b"><code>1d8d266</code></a></td><td><code>23214: small typo</code></td></tr></table>




---

archive/issue_comments_348259.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nLGTM. Thanks. Alex, if you end up hitting an error during your testing, please revert.",
    "created_at": "2018-09-03T02:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348259",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

LGTM. Thanks. Alex, if you end up hitting an error during your testing, please revert.



---

archive/issue_events_320689.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-03T02:37:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320689"
}
```



---

archive/issue_events_320690.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-09-03T02:37:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320690"
}
```



---

archive/issue_comments_348260.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2018-09-03T02:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348260",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_320691.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-05T22:42:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320691"
}
```



---

archive/issue_events_320692.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-09-05T22:42:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320692"
}
```



---

archive/issue_comments_348261.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nDoesn't build on OSX:\n\n```\n[sagelib-8.4.beta3] In file included from build/cythonized/sage/matrix/matrix_integer_sparse.cpp:708:\n[sagelib-8.4.beta3] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/dense-matrix.h:79:\n[sagelib-8.4.beta3] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/densematrix/blas-matrix.h:44:\n[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:306:11: error: member reference base type 'const long' is not a structure or union\n[sagelib-8.4.beta3]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)\n[sagelib-8.4.beta3]                               ~^~~~~\n[sagelib-8.4.beta3] build/cythonized/sage/matrix/matrix_integer_sparse.cpp:10932:21: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::BlasVector<long>' requested here\n[sagelib-8.4.beta3]   __pyx_v_res = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._ncols);\n[sagelib-8.4.beta3]                     ^\n[sagelib-8.4.beta3] In file included from build/cythonized/sage/matrix/matrix_integer_sparse.cpp:708:\n[sagelib-8.4.beta3] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/dense-matrix.h:79:\n[sagelib-8.4.beta3] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/densematrix/blas-matrix.h:44:\n[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:306:38: error: member reference base type 'const long' is not a structure or union\n[sagelib-8.4.beta3]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)\n[sagelib-8.4.beta3]                                                          ~^~~~~\n[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:306:61: warning: field '_rep' is uninitialized when used here [-Wuninitialized]\n[sagelib-8.4.beta3]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)\n[sagelib-8.4.beta3]                                                                                  ^\n[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:129:13: error: type 'long' cannot be used prior to '::' because it has no members\n[sagelib-8.4.beta3]                         typename OtherVector::const_iterator jt = V.begin();\n[sagelib-8.4.beta3]                                  ^\n[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:311:4: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::createBlasVector<long>' requested here\n[sagelib-8.4.beta3]                         createBlasVector(V);\n[sagelib-8.4.beta3]                         ^\n[sagelib-8.4.beta3] build/cythonized/sage/matrix/matrix_integer_sparse.cpp:10932:21: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::BlasVector<long>' requested here\n[sagelib-8.4.beta3]   __pyx_v_res = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._ncols);\n[sagelib-8.4.beta3]                     ^\n[sagelib-8.4.beta3] 8 warnings and 3 errors generated.\n[sagelib-8.4.beta3] error: command 'gcc' failed with exit status 1\n```",
    "created_at": "2018-09-05T22:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348261",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">comment:26</div>

Doesn't build on OSX:

```
[sagelib-8.4.beta3] In file included from build/cythonized/sage/matrix/matrix_integer_sparse.cpp:708:
[sagelib-8.4.beta3] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/dense-matrix.h:79:
[sagelib-8.4.beta3] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/densematrix/blas-matrix.h:44:
[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:306:11: error: member reference base type 'const long' is not a structure or union
[sagelib-8.4.beta3]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)
[sagelib-8.4.beta3]                               ~^~~~~
[sagelib-8.4.beta3] build/cythonized/sage/matrix/matrix_integer_sparse.cpp:10932:21: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::BlasVector<long>' requested here
[sagelib-8.4.beta3]   __pyx_v_res = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._ncols);
[sagelib-8.4.beta3]                     ^
[sagelib-8.4.beta3] In file included from build/cythonized/sage/matrix/matrix_integer_sparse.cpp:708:
[sagelib-8.4.beta3] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/dense-matrix.h:79:
[sagelib-8.4.beta3] In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/matrix/densematrix/blas-matrix.h:44:
[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:306:38: error: member reference base type 'const long' is not a structure or union
[sagelib-8.4.beta3]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)
[sagelib-8.4.beta3]                                                          ~^~~~~
[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:306:61: warning: field '_rep' is uninitialized when used here [-Wuninitialized]
[sagelib-8.4.beta3]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)
[sagelib-8.4.beta3]                                                                                  ^
[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:129:13: error: type 'long' cannot be used prior to '::' because it has no members
[sagelib-8.4.beta3]                         typename OtherVector::const_iterator jt = V.begin();
[sagelib-8.4.beta3]                                  ^
[sagelib-8.4.beta3] /Users/buildslave-sage/slave/sage_git/build/local/include/linbox/vector/blas-vector.h:311:4: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::createBlasVector<long>' requested here
[sagelib-8.4.beta3]                         createBlasVector(V);
[sagelib-8.4.beta3]                         ^
[sagelib-8.4.beta3] build/cythonized/sage/matrix/matrix_integer_sparse.cpp:10932:21: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::BlasVector<long>' requested here
[sagelib-8.4.beta3]   __pyx_v_res = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._ncols);
[sagelib-8.4.beta3]                     ^
[sagelib-8.4.beta3] 8 warnings and 3 errors generated.
[sagelib-8.4.beta3] error: command 'gcc' failed with exit status 1
```



---

archive/issue_comments_348262.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nWith the relevant lines from `matrix_integer_sparse.cpp`:\n\n```\n  /* \"sage/matrix/matrix_integer_sparse.pyx\":1074\n *         cdef linbox.SparseMatrix_integer * A = new_linbox_matrix_integer_sparse(givZZ, self)\n *         cdef linbox.DenseVector_integer * b = new_linbox_vector_integer_dense(givZZ, v)\n *         cdef linbox.DenseVector_integer * res = new linbox.DenseVector_integer(givZZ, self._ncols)             # <<<<<<<<<<<<<<\n *         cdef givaro.Integer D\n * \n */\n  __pyx_v_res = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._ncols);\n```",
    "created_at": "2018-09-08T11:32:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348262",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

With the relevant lines from `matrix_integer_sparse.cpp`:

```
  /* "sage/matrix/matrix_integer_sparse.pyx":1074
 *         cdef linbox.SparseMatrix_integer * A = new_linbox_matrix_integer_sparse(givZZ, self)
 *         cdef linbox.DenseVector_integer * b = new_linbox_vector_integer_dense(givZZ, v)
 *         cdef linbox.DenseVector_integer * res = new linbox.DenseVector_integer(givZZ, self._ncols)             # <<<<<<<<<<<<<<
 *         cdef givaro.Integer D
 * 
 */
  __pyx_v_res = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._ncols);
```



---

archive/issue_comments_348263.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThis compile failure can be reproduced outside of sage. Issue opened on upstream [linbox/issues/138](https://github.com/linbox-team/linbox/issues/138).",
    "created_at": "2018-09-18T12:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348263",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:28" align="right">comment:28</div>

This compile failure can be reproduced outside of sage. Issue opened on upstream [linbox/issues/138](https://github.com/linbox-team/linbox/issues/138).



---

archive/issue_comments_348264.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,5 +6,6 @@\n LinBox issues\n \n - [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)\n+- [Issue 138(Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)\n \n (see also #22872 for the linbox task ticket)\n``````\n",
    "created_at": "2018-09-18T12:17:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348264",
    "user": "https://github.com/vinklein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,5 +6,6 @@
 LinBox issues
 
 - [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)
+- [Issue 138(Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)
 
 (see also #22872 for the linbox task ticket)
``````




---

archive/issue_comments_348265.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,6 +6,6 @@\n LinBox issues\n \n - [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)\n-- [Issue 138(Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)\n+- [Issue 138 (Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)\n \n (see also #22872 for the linbox task ticket)\n``````\n",
    "created_at": "2018-09-18T12:18:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348265",
    "user": "https://github.com/vinklein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,6 +6,6 @@
 LinBox issues
 
 - [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)
-- [Issue 138(Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)
+- [Issue 138 (Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)
 
 (see also #22872 for the linbox task ticket)
``````




---

archive/issue_comments_348266.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nwhat is the status of this ticket ?",
    "created_at": "2018-10-14T19:38:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348266",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>

what is the status of this ticket ?



---

archive/issue_comments_348267.json:
```json
{
    "body": "Changed dependencies from **#24544** to none",
    "created_at": "2018-10-16T18:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348267",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#24544** to none



---

archive/issue_comments_348268.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@fchapoton](#comment:31):\n> what is the status of this ticket ?\n\nWaiting for upstream compilation fix, see [comment:28].",
    "created_at": "2018-10-16T19:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348268",
    "user": "https://github.com/videlec"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@fchapoton](#comment:31):
> what is the status of this ticket ?

Waiting for upstream compilation fix, see [comment:28].



---

archive/issue_comments_348269.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAs mentionned in [linbox/issues/138](https://github.com/linbox-team/linbox/issues/138), passing a long instead of a size_t to BlasVector constructor is causing an weird type resolution problem, which I can still not fully understand.\nMeanwhile 2 options can fix the problem:\n- have sage cython code send size_t parameters to LinBox, as required by the interface. This means doing explicit casts (inelegant) or changing the type of ncols and nrows in matrix classes (heavy change)\n- removing the templated constructor in LinBox::BlasVector that is in the way. This change is not harmfull for the library, but it feels not right to remove features for some weird type resolution issue on OSX due to sage not respecting the interface. This second option would also delay the fixing of this issue to the integration of the next release of LinBox or patching sage's LinBox.",
    "created_at": "2018-10-18T14:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348269",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:34" align="right">comment:34</div>

As mentionned in [linbox/issues/138](https://github.com/linbox-team/linbox/issues/138), passing a long instead of a size_t to BlasVector constructor is causing an weird type resolution problem, which I can still not fully understand.
Meanwhile 2 options can fix the problem:
- have sage cython code send size_t parameters to LinBox, as required by the interface. This means doing explicit casts (inelegant) or changing the type of ncols and nrows in matrix classes (heavy change)
- removing the templated constructor in LinBox::BlasVector that is in the way. This change is not harmfull for the library, but it feels not right to remove features for some weird type resolution issue on OSX due to sage not respecting the interface. This second option would also delay the fixing of this issue to the integration of the next release of LinBox or patching sage's LinBox.



---

archive/issue_comments_348270.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@ClementPernet](#comment:34):\n> As mentionned in [linbox/issues/138](https://github.com/linbox-team/linbox/issues/138), passing a long instead of a size_t to BlasVector constructor is causing an weird type resolution problem, which I can still not fully understand.\n> Meanwhile 2 options can fix the problem:\n> - have sage cython code send size_t parameters to LinBox, as required by the interface. This means doing explicit casts (inelegant) or changing the type of ncols and nrows in matrix classes (heavy change)\n\nOne possible obstruction for the change `Py_ssize_t` -> `size_t` is that matrices can be accessed with negative indices. Perhaps it is not so dramatic. However, if this change happend we want to do it coherently with vectors, etc.\n\nFor the other proposition, calling properly LinBox with casting where necessary do not look too ugly for me. We can arrange so that it only appears in the code at `sage/libs/linbox/`.\n\n> - removing the templated constructor in LinBox::BlasVector that is in the way. This change is not harmfull for the library, but it feels not right to remove features for some weird type resolution issue on OSX due to sage not respecting the interface. This second option would also delay the fixing of this issue to the integration of the next release of LinBox or patching sage's LinBox.",
    "created_at": "2018-10-18T15:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348270",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@ClementPernet](#comment:34):
> As mentionned in [linbox/issues/138](https://github.com/linbox-team/linbox/issues/138), passing a long instead of a size_t to BlasVector constructor is causing an weird type resolution problem, which I can still not fully understand.
> Meanwhile 2 options can fix the problem:
> - have sage cython code send size_t parameters to LinBox, as required by the interface. This means doing explicit casts (inelegant) or changing the type of ncols and nrows in matrix classes (heavy change)

One possible obstruction for the change `Py_ssize_t` -> `size_t` is that matrices can be accessed with negative indices. Perhaps it is not so dramatic. However, if this change happend we want to do it coherently with vectors, etc.

For the other proposition, calling properly LinBox with casting where necessary do not look too ugly for me. We can arrange so that it only appears in the code at `sage/libs/linbox/`.

> - removing the templated constructor in LinBox::BlasVector that is in the way. This change is not harmfull for the library, but it feels not right to remove features for some weird type resolution issue on OSX due to sage not respecting the interface. This second option would also delay the fixing of this issue to the integration of the next release of LinBox or patching sage's LinBox.



---

archive/issue_comments_348271.json:
```json
{
    "body": "Changed commit from **[`1d8d266`](https://github.com/sagemath/sagetrac-mirror/commit/1d8d266779da4d0e9078e2050d9bb861a2ac213b)** to **[`4ec1fa5`](https://github.com/sagemath/sagetrac-mirror/commit/4ec1fa51976f71392a47e1c54116115a6f47a385)**",
    "created_at": "2018-10-29T15:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348271",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d8d266`](https://github.com/sagemath/sagetrac-mirror/commit/1d8d266779da4d0e9078e2050d9bb861a2ac213b)** to **[`4ec1fa5`](https://github.com/sagemath/sagetrac-mirror/commit/4ec1fa51976f71392a47e1c54116115a6f47a385)**



---

archive/issue_comments_348272.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9377c30cee7660c78fb87ff3fea67f5dedd262d\"><code>a9377c3</code></a></td><td><code>23214: use linbox in sparse integer matrices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ec1fa51976f71392a47e1c54116115a6f47a385\"><code>4ec1fa5</code></a></td><td><code>23214: disable sage extension from linbox</code></td></tr></table>\n",
    "created_at": "2018-10-29T15:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348272",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9377c30cee7660c78fb87ff3fea67f5dedd262d"><code>a9377c3</code></a></td><td><code>23214: use linbox in sparse integer matrices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ec1fa51976f71392a47e1c54116115a6f47a385"><code>4ec1fa5</code></a></td><td><code>23214: disable sage extension from linbox</code></td></tr></table>




---

archive/issue_comments_348273.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nPlease Mac OSX testing needed!",
    "created_at": "2018-10-29T15:52:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348273",
    "user": "https://github.com/videlec"
}
```

<div id="comment:37" align="right">comment:37</div>

Please Mac OSX testing needed!



---

archive/issue_events_320693.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-10-29T15:52:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320693"
}
```



---

archive/issue_events_320694.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-10-29T15:52:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320694"
}
```



---

archive/issue_comments_348274.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,6 +2,8 @@\n - solving sparse systems over integers\n - computing determinant and rank\n - computing minimal and characteristic polynomials\n+\n+Some cleaning had to be done as a first step (used to be #26178).\n \n LinBox issues\n \n``````\n",
    "created_at": "2018-10-29T16:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348274",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,6 +2,8 @@
 - solving sparse systems over integers
 - computing determinant and rank
 - computing minimal and characteristic polynomials
+
+Some cleaning had to be done as a first step (used to be #26178).
 
 LinBox issues
 
``````




---

archive/issue_events_320695.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-10-29T16:01:37Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "title_is": "enhance sparse integer matrix with linbox (+ cleaning)",
    "title_was": "enhance sparse integer matrix with linbox",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320695"
}
```



---

archive/issue_events_320696.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-10-29T16:01:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320696"
}
```



---

archive/issue_events_320697.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-10-29T16:01:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320697"
}
```



---

archive/issue_comments_348275.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@videlec](#comment:37):\n> Please Mac OSX testing needed!\n\n`make ptestlong` is running.",
    "created_at": "2018-10-29T16:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348275",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@videlec](#comment:37):
> Please Mac OSX testing needed!

`make ptestlong` is running.



---

archive/issue_comments_348276.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nWe have almost the same error but for `matrix_modn_sparse`.\n\n\n```\n[sagelib-8.5.beta1] In file included from build/cythonized/sage/matrix/matrix_modn_sparse.cpp:725:\n[sagelib-8.5.beta1] In file included from /Users/doctorant/sage/local/include/linbox/matrix/dense-matrix.h:79:\n[sagelib-8.5.beta1] In file included from /Users/doctorant/sage/local/include/linbox/matrix/densematrix/blas-matrix.h:44:\n[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:306:11: error: member reference base type 'const long' is not a structure or union\n[sagelib-8.5.beta1]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)\n[sagelib-8.5.beta1]                               ~^~~~~\n[sagelib-8.5.beta1] build/cythonized/sage/matrix/matrix_modn_sparse.cpp:12191:19: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::BlasVector<long>' requested here\n[sagelib-8.5.beta1]   __pyx_v_b = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._nrows);\n[sagelib-8.5.beta1]                   ^\n[sagelib-8.5.beta1] In file included from build/cythonized/sage/matrix/matrix_modn_sparse.cpp:725:\n[sagelib-8.5.beta1] In file included from /Users/doctorant/sage/local/include/linbox/matrix/dense-matrix.h:79:\n[sagelib-8.5.beta1] In file included from /Users/doctorant/sage/local/include/linbox/matrix/densematrix/blas-matrix.h:44:\n[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:306:38: error: member reference base type 'const long' is not a structure or union\n[sagelib-8.5.beta1]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)\n[sagelib-8.5.beta1]                                                          ~^~~~~\n[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:306:61: warning: field '_rep' is uninitialized when used here [-Wuninitialized]\n[sagelib-8.5.beta1]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)\n[sagelib-8.5.beta1]                                                                                  ^\n[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:129:13: error: type 'long' cannot be used prior to '::' because it has no members\n[sagelib-8.5.beta1]                         typename OtherVector::const_iterator jt = V.begin();\n[sagelib-8.5.beta1]                                  ^\n[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:311:4: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::createBlasVector<long>' requested here\n[sagelib-8.5.beta1]                         createBlasVector(V);\n[sagelib-8.5.beta1]                         ^\n[sagelib-8.5.beta1] build/cythonized/sage/matrix/matrix_modn_sparse.cpp:12191:19: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::BlasVector<long>' requested here\n[sagelib-8.5.beta1]   __pyx_v_b = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._nrows);\n[sagelib-8.5.beta1]                   ^\n[sagelib-8.5.beta1] 8 warnings and 3 errors generated.\n[sagelib-8.5.beta1] error: command 'gcc' failed with exit status 1\n[sagelib-8.5.beta1] [ 3/86] make[4]: *** [sage] Error 1\n```",
    "created_at": "2018-10-30T08:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348276",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:40" align="right">comment:40</div>

We have almost the same error but for `matrix_modn_sparse`.


```
[sagelib-8.5.beta1] In file included from build/cythonized/sage/matrix/matrix_modn_sparse.cpp:725:
[sagelib-8.5.beta1] In file included from /Users/doctorant/sage/local/include/linbox/matrix/dense-matrix.h:79:
[sagelib-8.5.beta1] In file included from /Users/doctorant/sage/local/include/linbox/matrix/densematrix/blas-matrix.h:44:
[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:306:11: error: member reference base type 'const long' is not a structure or union
[sagelib-8.5.beta1]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)
[sagelib-8.5.beta1]                               ~^~~~~
[sagelib-8.5.beta1] build/cythonized/sage/matrix/matrix_modn_sparse.cpp:12191:19: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::BlasVector<long>' requested here
[sagelib-8.5.beta1]   __pyx_v_b = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._nrows);
[sagelib-8.5.beta1]                   ^
[sagelib-8.5.beta1] In file included from build/cythonized/sage/matrix/matrix_modn_sparse.cpp:725:
[sagelib-8.5.beta1] In file included from /Users/doctorant/sage/local/include/linbox/matrix/dense-matrix.h:79:
[sagelib-8.5.beta1] In file included from /Users/doctorant/sage/local/include/linbox/matrix/densematrix/blas-matrix.h:44:
[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:306:38: error: member reference base type 'const long' is not a structure or union
[sagelib-8.5.beta1]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)
[sagelib-8.5.beta1]                                                          ~^~~~~
[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:306:61: warning: field '_rep' is uninitialized when used here [-Wuninitialized]
[sagelib-8.5.beta1]                         _size(V.size()),_1stride(1),_rep(V.size(), F.zero),_ptr(&_rep[0]),_field(&F)
[sagelib-8.5.beta1]                                                                                  ^
[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:129:13: error: type 'long' cannot be used prior to '::' because it has no members
[sagelib-8.5.beta1]                         typename OtherVector::const_iterator jt = V.begin();
[sagelib-8.5.beta1]                                  ^
[sagelib-8.5.beta1] /Users/doctorant/sage/local/include/linbox/vector/blas-vector.h:311:4: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::createBlasVector<long>' requested here
[sagelib-8.5.beta1]                         createBlasVector(V);
[sagelib-8.5.beta1]                         ^
[sagelib-8.5.beta1] build/cythonized/sage/matrix/matrix_modn_sparse.cpp:12191:19: note: in instantiation of function template specialization 'LinBox::BlasVector<Givaro::ZRing<Givaro::Integer>, std::__1::vector<Givaro::Integer, std::__1::allocator<Givaro::Integer> > >::BlasVector<long>' requested here
[sagelib-8.5.beta1]   __pyx_v_b = new LinBox::DenseVector<Givaro::ZRing<Givaro::Integer>>(__pyx_v_givZZ, __pyx_v_self->__pyx_base.__pyx_base.__pyx_base.__pyx_base.__pyx_base._nrows);
[sagelib-8.5.beta1]                   ^
[sagelib-8.5.beta1] 8 warnings and 3 errors generated.
[sagelib-8.5.beta1] error: command 'gcc' failed with exit status 1
[sagelib-8.5.beta1] [ 3/86] make[4]: *** [sage] Error 1
```



---

archive/issue_comments_348277.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23214)** to **[u/cpernet/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/23214)**",
    "created_at": "2018-10-30T09:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348277",
    "user": "https://github.com/ClementPernet"
}
```

Changed branch from **[u/vdelecroix/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23214)** to **[u/cpernet/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/23214)**



---

archive/issue_comments_348278.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThere was indeed some casts missing. I pushed a fixed and checked that all casts have been done.\n@vinklein, could you check again please?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0f5a9964550afec7d36827641de9ce929c06d1f\"><code>d0f5a99</code></a></td><td><code>fix missing cast to size_t</code></td></tr></table>\n",
    "created_at": "2018-10-30T09:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348278",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:42" align="right">comment:42</div>

There was indeed some casts missing. I pushed a fixed and checked that all casts have been done.
@vinklein, could you check again please?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0f5a9964550afec7d36827641de9ce929c06d1f"><code>d0f5a99</code></a></td><td><code>fix missing cast to size_t</code></td></tr></table>




---

archive/issue_comments_348279.json:
```json
{
    "body": "Changed commit from **[`4ec1fa5`](https://github.com/sagemath/sagetrac-mirror/commit/4ec1fa51976f71392a47e1c54116115a6f47a385)** to **[`d0f5a99`](https://github.com/sagemath/sagetrac-mirror/commit/d0f5a9964550afec7d36827641de9ce929c06d1f)**",
    "created_at": "2018-10-30T09:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348279",
    "user": "https://github.com/ClementPernet"
}
```

Changed commit from **[`4ec1fa5`](https://github.com/sagemath/sagetrac-mirror/commit/4ec1fa51976f71392a47e1c54116115a6f47a385)** to **[`d0f5a99`](https://github.com/sagemath/sagetrac-mirror/commit/d0f5a9964550afec7d36827641de9ce929c06d1f)**



---

archive/issue_comments_348280.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nSure.",
    "created_at": "2018-10-30T09:23:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348280",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:43" align="right">comment:43</div>

Sure.



---

archive/issue_comments_348281.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI got 3 failing doctests, see patchbot.",
    "created_at": "2018-10-30T16:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348281",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:44" align="right">comment:44</div>

I got 3 failing doctests, see patchbot.



---

archive/issue_comments_348282.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nTests are still running on OSX. That mean off course that all compilation problems are solved.",
    "created_at": "2018-10-30T16:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348282",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:45" align="right">comment:45</div>

Tests are still running on OSX. That mean off course that all compilation problems are solved.



---

archive/issue_comments_348283.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI get 5 errors on OSX:\n\n```\nsage -t --long src/sage/combinat/designs/ext_rep.py  # Killed due to abort\nsage -t --long src/sage/doctest/external.py  # Killed due to abort\nsage -t --long src/sage/matrix/matrix_modn_sparse.pyx  # 3 doctests failed\n```\n`matrix_modn_sparse.pyx` errors are the sames as the patchbot ones and the two others are not ticket dependent (see Justin C. Walker message in [Sage 8.5.beta1 released](https://groups.google.com/forum/?fromgroups#!topic/sage-release/yiJTgNhjB6o) ).",
    "created_at": "2018-10-30T16:40:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348283",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:46" align="right">comment:46</div>

I get 5 errors on OSX:

```
sage -t --long src/sage/combinat/designs/ext_rep.py  # Killed due to abort
sage -t --long src/sage/doctest/external.py  # Killed due to abort
sage -t --long src/sage/matrix/matrix_modn_sparse.pyx  # 3 doctests failed
```
`matrix_modn_sparse.pyx` errors are the sames as the patchbot ones and the two others are not ticket dependent (see Justin C. Walker message in [Sage 8.5.beta1 released](https://groups.google.com/forum/?fromgroups#!topic/sage-release/yiJTgNhjB6o) ).



---

archive/issue_comments_348284.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nMy bad. Error should be fixed now.",
    "created_at": "2018-10-30T22:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348284",
    "user": "https://github.com/videlec"
}
```

<div id="comment:47" align="right">comment:47</div>

My bad. Error should be fixed now.



---

archive/issue_comments_348285.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nforgot to push ?",
    "created_at": "2018-10-31T07:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348285",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:48" align="right">comment:48</div>

forgot to push ?



---

archive/issue_comments_348286.json:
```json
{
    "body": "Changed commit from **[`d0f5a99`](https://github.com/sagemath/sagetrac-mirror/commit/d0f5a9964550afec7d36827641de9ce929c06d1f)** to **[`ea33422`](https://github.com/sagemath/sagetrac-mirror/commit/ea33422553f347d9cb647ca212d3c5f91ecff354)**",
    "created_at": "2018-10-31T08:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348286",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`d0f5a99`](https://github.com/sagemath/sagetrac-mirror/commit/d0f5a9964550afec7d36827641de9ce929c06d1f)** to **[`ea33422`](https://github.com/sagemath/sagetrac-mirror/commit/ea33422553f347d9cb647ca212d3c5f91ecff354)**



---

archive/issue_comments_348287.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nNot quite.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea33422553f347d9cb647ca212d3c5f91ecff354\"><code>ea33422</code></a></td><td><code>23214: fix doctests</code></td></tr></table>\n",
    "created_at": "2018-10-31T08:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348287",
    "user": "https://github.com/videlec"
}
```

<div id="comment:49" align="right">comment:49</div>

Not quite.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea33422553f347d9cb647ca212d3c5f91ecff354"><code>ea33422</code></a></td><td><code>23214: fix doctests</code></td></tr></table>




---

archive/issue_comments_348288.json:
```json
{
    "body": "Changed branch from **[u/cpernet/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/23214)** to **[u/vdelecroix/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23214)**",
    "created_at": "2018-10-31T08:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348288",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/cpernet/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/cpernet/23214)** to **[u/vdelecroix/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23214)**



---

archive/issue_comments_348289.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThere seems to be a test failure on one of the patchbots:\n\n```\nFile \"src/sage/matrix/matrix_space.py\", line 1982, in sage.matrix.matrix_space.MatrixSpace._an_element_\nFailed example:\n    M.density()\nExpected:\n    99/1000000\nGot:\n    49/500000\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage.matrix.matrix_space.MatrixSpace._an_element_\n    [383 tests, 1 failure, 6.40 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 54.6 src/sage/matrix/matrix_space.py  # 1 doctest failed\n```\nCan you reproduce this locally (sorry, I cannot test this right now on my laptop)?",
    "created_at": "2018-10-31T12:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348289",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:50" align="right">comment:50</div>

There seems to be a test failure on one of the patchbots:

```
File "src/sage/matrix/matrix_space.py", line 1982, in sage.matrix.matrix_space.MatrixSpace._an_element_
Failed example:
    M.density()
Expected:
    99/1000000
Got:
    49/500000
**********************************************************************
1 item had failures:
   1 of   7 in sage.matrix.matrix_space.MatrixSpace._an_element_
    [383 tests, 1 failure, 6.40 s]
----------------------------------------------------------------------
sage -t --long --warn-long 54.6 src/sage/matrix/matrix_space.py  # 1 doctest failed
```
Can you reproduce this locally (sorry, I cannot test this right now on my laptop)?



---

archive/issue_comments_348290.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nThis concerns `petitbonum` and, on the other hand, everything is fine on `pc78-math`.\n\nI can not reproduce either.",
    "created_at": "2018-11-01T09:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348290",
    "user": "https://github.com/videlec"
}
```

<div id="comment:51" align="right">comment:51</div>

This concerns `petitbonum` and, on the other hand, everything is fine on `pc78-math`.

I can not reproduce either.



---

archive/issue_comments_348291.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nThis one on [tmonteil-debian-stretch-32](https://patchbot.sagemath.org/log/23214/debian/9.5/i686/4.9.0-7-686/tmonteil-debian-stretch-32/2018-11-02%2002:27:16?short) (32 bits) is more annoying\n\n```\n[sagelib-8.5.beta2] build/cythonized/sage/matrix/matrix_modn_sparse.cpp:8931:132: error: no matching function for call to 'LinBox::GaussDomain<Givaro::Modular<long long unsigned int, long long unsigned int> >::InPlaceLinearPivoting(size_t&, uint64_t&, LinBox::SparseMatrix<Givaro::Modular<long long unsigned int, long long unsigned int>, LinBox::SparseMatrixFormat::SparseSeq>&, size_t, size_t)'\n[sagelib-8.5.beta2]    (void)(__pyx_v_dom->InPlaceLinearPivoting(__pyx_v_A_rank, __pyx_v_A_det, (__pyx_v_A[0]), __pyx_v_A->rowdim(), __pyx_v_A->coldim()));\n[sagelib-8.5.beta2]                                                                                                                                     ^\n```\n`@`Cl\u00e9ment: any clue of what might be wrong on 32 bit architecture?",
    "created_at": "2018-11-02T08:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348291",
    "user": "https://github.com/videlec"
}
```

<div id="comment:52" align="right">comment:52</div>

This one on [tmonteil-debian-stretch-32](https://patchbot.sagemath.org/log/23214/debian/9.5/i686/4.9.0-7-686/tmonteil-debian-stretch-32/2018-11-02%2002:27:16?short) (32 bits) is more annoying

```
[sagelib-8.5.beta2] build/cythonized/sage/matrix/matrix_modn_sparse.cpp:8931:132: error: no matching function for call to 'LinBox::GaussDomain<Givaro::Modular<long long unsigned int, long long unsigned int> >::InPlaceLinearPivoting(size_t&, uint64_t&, LinBox::SparseMatrix<Givaro::Modular<long long unsigned int, long long unsigned int>, LinBox::SparseMatrixFormat::SparseSeq>&, size_t, size_t)'
[sagelib-8.5.beta2]    (void)(__pyx_v_dom->InPlaceLinearPivoting(__pyx_v_A_rank, __pyx_v_A_det, (__pyx_v_A[0]), __pyx_v_A->rowdim(), __pyx_v_A->coldim()));
[sagelib-8.5.beta2]                                                                                                                                     ^
```
`@`Cl√©ment: any clue of what might be wrong on 32 bit architecture?



---

archive/issue_events_320698.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-11-02T08:27:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320698"
}
```



---

archive/issue_events_320699.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-11-02T08:27:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320699"
}
```



---

archive/issue_comments_348292.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\n`@`Clement: note that in LinBox the function is declared as (`linbox/algorithms/gauss.h` line 227)\n\n```C++\n// Sparsest method\n//   erases elements while computing rank/det.\ntemplate <class _Matrix>                                      \nunsigned long& InPlaceLinearPivoting(unsigned long &rank,\n                                     Element& determinant,\n                                     _Matrix        &A,\n                                     unsigned long Ni,\n                                     unsigned long Nj) const;\n```\nHere I don't understand why `rank`, `Ni` and `Nj` are not `size_t` as they should rather be.",
    "created_at": "2018-11-02T12:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348292",
    "user": "https://github.com/videlec"
}
```

<div id="comment:53" align="right">comment:53</div>

`@`Clement: note that in LinBox the function is declared as (`linbox/algorithms/gauss.h` line 227)

```C++
// Sparsest method
//   erases elements while computing rank/det.
template <class _Matrix>                                      
unsigned long& InPlaceLinearPivoting(unsigned long &rank,
                                     Element& determinant,
                                     _Matrix        &A,
                                     unsigned long Ni,
                                     unsigned long Nj) const;
```
Here I don't understand why `rank`, `Ni` and `Nj` are not `size_t` as they should rather be.



---

archive/issue_comments_348293.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI filled the [Issue 144](https://github.com/linbox-team/linbox/issues/144) on linbox website.",
    "created_at": "2018-11-02T19:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348293",
    "user": "https://github.com/videlec"
}
```

<div id="comment:54" align="right">comment:54</div>

I filled the [Issue 144](https://github.com/linbox-team/linbox/issues/144) on linbox website.



---

archive/issue_comments_348294.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,5 +9,6 @@\n \n - [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)\n - [Issue 138 (Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)\n+- [Issue 144 (row index: unsigned long versus size_t)](https://github.com/linbox-team/linbox/issues/144)\n \n (see also #22872 for the linbox task ticket)\n``````\n",
    "created_at": "2018-11-02T19:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348294",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,5 +9,6 @@
 
 - [Issue 118 (determinant hangs)](https://github.com/linbox-team/linbox/issues/118)
 - [Issue 138 (Compilation failure on OSX)](https://github.com/linbox-team/linbox/issues/138)
+- [Issue 144 (row index: unsigned long versus size_t)](https://github.com/linbox-team/linbox/issues/144)
 
 (see also #22872 for the linbox task ticket)
``````




---

archive/issue_comments_348295.json:
```json
{
    "body": "Changed commit from **[`ea33422`](https://github.com/sagemath/sagetrac-mirror/commit/ea33422553f347d9cb647ca212d3c5f91ecff354)** to **[`98ac984`](https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca)**",
    "created_at": "2018-11-02T22:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348295",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ea33422`](https://github.com/sagemath/sagetrac-mirror/commit/ea33422553f347d9cb647ca212d3c5f91ecff354)** to **[`98ac984`](https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca)**



---

archive/issue_comments_348296.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca\"><code>98ac984</code></a></td><td><code>23214: follow LinBox declarations</code></td></tr></table>\n",
    "created_at": "2018-11-02T22:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348296",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca"><code>98ac984</code></a></td><td><code>23214: follow LinBox declarations</code></td></tr></table>




---

archive/issue_events_320700.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-11-02T22:29:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320700"
}
```



---

archive/issue_events_320701.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-11-02T22:29:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320701"
}
```



---

archive/issue_comments_348297.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nGood news: tests pass on 32 bits.\n\n@vinklein: can you test one more time on OSX?\n\nIf everything went fine on OSX, I think we should get this ticket merged as is. I will change `unsigned long` to `size_t` as soon as LinBox gets updated.",
    "created_at": "2018-11-03T13:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348297",
    "user": "https://github.com/videlec"
}
```

<div id="comment:57" align="right">comment:57</div>

Good news: tests pass on 32 bits.

@vinklein: can you test one more time on OSX?

If everything went fine on OSX, I think we should get this ticket merged as is. I will change `unsigned long` to `size_t` as soon as LinBox gets updated.



---

archive/issue_comments_348298.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThis is also good on my machine and on a 32 and 64 bit patchbot.",
    "created_at": "2018-11-04T12:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348298",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:58" align="right">comment:58</div>

This is also good on my machine and on a 32 and 64 bit patchbot.



---

archive/issue_comments_348299.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@videlec](#comment:57):\n> @vinklein: can you test one more time on OSX?\n\nSure.",
    "created_at": "2018-11-05T08:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348299",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@videlec](#comment:57):
> @vinklein: can you test one more time on OSX?

Sure.



---

archive/issue_comments_348300.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nBuild & tests pass on OSX (`98ac984`)",
    "created_at": "2018-11-05T14:24:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348300",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:60" align="right">comment:60</div>

Build & tests pass on OSX (`98ac984`)



---

archive/issue_comments_348301.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Vincent Klein.**",
    "created_at": "2018-11-05T14:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348301",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Vincent Klein.**



---

archive/issue_events_320702.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-11-05T14:33:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320702"
}
```



---

archive/issue_events_320703.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-11-05T14:33:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320703"
}
```



---

archive/issue_comments_348302.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nMerci Vincent!",
    "created_at": "2018-11-05T15:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348302",
    "user": "https://github.com/videlec"
}
```

<div id="comment:62" align="right">comment:62</div>

Merci Vincent!



---

archive/issue_comments_348303.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw, Vincent Klein.** to **Travis Scrimshaw, Vincent Klein**",
    "created_at": "2018-11-05T16:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348303",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Travis Scrimshaw, Vincent Klein.** to **Travis Scrimshaw, Vincent Klein**



---

archive/issue_comments_348304.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nDe rien !",
    "created_at": "2018-11-05T16:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348304",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:64" align="right">comment:64</div>

De rien !



---

archive/issue_events_320704.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-07T11:28:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320704"
}
```



---

archive/issue_events_320705.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b86c2e15db8e4ff3730534ec9732443109fae482",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-11-07T11:28:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23214#event-320705"
}
```



---

archive/issue_comments_348305.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23214)** to **[`98ac984`](https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca)**",
    "created_at": "2018-11-07T11:28:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348305",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/23214](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23214)** to **[`98ac984`](https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca)**



---

archive/issue_comments_348306.json:
```json
{
    "body": "Changed commit from **[`98ac984`](https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca)** to none",
    "created_at": "2019-10-10T22:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348306",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[`98ac984`](https://github.com/sagemath/sagetrac-mirror/commit/98ac98478bedfaf6a2ac8d84da67253978e7e9ca)** to none



---

archive/issue_comments_348307.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nI strongly suspect that this ticket caused #28586 (breakage in solving sparse linear systems over prime fields), as it was the most substantial related change that got in in Sage 8.5.beta3. (and I bisected #28586 to 8.5.beta3).",
    "created_at": "2019-10-10T22:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23214",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23214#issuecomment-348307",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:66" align="right">comment:66</div>

I strongly suspect that this ticket caused #28586 (breakage in solving sparse linear systems over prime fields), as it was the most substantial related change that got in in Sage 8.5.beta3. (and I bisected #28586 to 8.5.beta3).
