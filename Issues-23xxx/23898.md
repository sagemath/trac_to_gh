# Issue 23898: Upgrade to gcc 7.2.0 (gcc 5.4.0 does not build with Xcode 9.0)

archive/issues_023661.json:
```json
{
    "body": "Sage's gcc does not build with Xcode 9.0 (released 19 Sept 2017?). See [the log file](https://sites.math.washington.edu/~palmieri/Sage/gcc-5.4.0.log).\n\nThis is the actual error:\n\n```\ng++ -c   -g  -DIN_GCC    -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wno-format -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -fno-common  -DHAVE_CONFIG_H -I. -I. -I../../src/gcc -I../../src/gcc/. -I../../src/gcc/../include -I../../src/gcc/../libcpp/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include  -I../../src/gcc/../libdecnumber -I../../src/gcc/../libdecnumber/dpd -I../libdecnumber -I../../src/gcc/../libbacktrace   -o auto-profile.o -MT auto-profile.o -MMD -MP -MF ./.deps/auto-profile.TPo ../../src/gcc/auto-profile.c\nclang: warning: treating 'c' input as 'c++' when in C++ mode, this behavior is deprecated [-Wdeprecated]\nIn file included from ../../src/gcc/auto-profile.c:25:\nIn file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/map:446:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/functional:1398:2: error: no member named 'fancy_abort' in namespace 'std::__1'; did you mean simply 'fancy_abort'?\n        _VSTD::abort();\n        ^~~~~~~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/__config:392:15: note: expanded from macro '_VSTD'\n#define _VSTD std::_LIBCPP_NAMESPACE\n              ^\n../../src/gcc/system.h:700:13: note: 'fancy_abort' declared here\nextern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;\n            ^\n```\n\nA fix: upgrade GCC to 7.2.0.\n\n**Tarball**: ftp://ftp.fu-berlin.de/unix/languages/gcc/releases/gcc-7.2.0/gcc-7.2.0.tar.xz\n\nDepends on #18236\n\nDepends on #24011\n\nDepends on #24012\n\n**CC:**  @kiwifb\n\n**Branch/Commit:** [714f6f07b72634aed00fd9208e4c1073b9b85e4b](https://github.com/sagemath/sagetrac-mirror/commit/714f6f07b72634aed00fd9208e4c1073b9b85e4b)\n\n**Reviewer:** Ralf Stephan\n\n**Author:** John Palmieri\n\nIssue created by migration from https://trac.sagemath.org/ticket/23898\n\n",
    "closed_at": "2017-10-29T10:32:30Z",
    "created_at": "2017-09-19T23:56:00Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "title": "Upgrade to gcc 7.2.0 (gcc 5.4.0 does not build with Xcode 9.0)",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/23898",
    "user": "https://github.com/jhpalmieri"
}
```
Sage's gcc does not build with Xcode 9.0 (released 19 Sept 2017?). See [the log file](https://sites.math.washington.edu/~palmieri/Sage/gcc-5.4.0.log).

This is the actual error:

```
g++ -c   -g  -DIN_GCC    -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wno-format -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -fno-common  -DHAVE_CONFIG_H -I. -I. -I../../src/gcc -I../../src/gcc/. -I../../src/gcc/../include -I../../src/gcc/../libcpp/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include  -I../../src/gcc/../libdecnumber -I../../src/gcc/../libdecnumber/dpd -I../libdecnumber -I../../src/gcc/../libbacktrace   -o auto-profile.o -MT auto-profile.o -MMD -MP -MF ./.deps/auto-profile.TPo ../../src/gcc/auto-profile.c
clang: warning: treating 'c' input as 'c++' when in C++ mode, this behavior is deprecated [-Wdeprecated]
In file included from ../../src/gcc/auto-profile.c:25:
In file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/map:446:
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/functional:1398:2: error: no member named 'fancy_abort' in namespace 'std::__1'; did you mean simply 'fancy_abort'?
        _VSTD::abort();
        ^~~~~~~
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/__config:392:15: note: expanded from macro '_VSTD'
#define _VSTD std::_LIBCPP_NAMESPACE
              ^
../../src/gcc/system.h:700:13: note: 'fancy_abort' declared here
extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;
            ^
```

A fix: upgrade GCC to 7.2.0.

**Tarball**: ftp://ftp.fu-berlin.de/unix/languages/gcc/releases/gcc-7.2.0/gcc-7.2.0.tar.xz

Depends on #18236

Depends on #24011

Depends on #24012

**CC:**  @kiwifb

**Branch/Commit:** [714f6f07b72634aed00fd9208e4c1073b9b85e4b](https://github.com/sagemath/sagetrac-mirror/commit/714f6f07b72634aed00fd9208e4c1073b9b85e4b)

**Reviewer:** Ralf Stephan

**Author:** John Palmieri

Issue created by migration from https://trac.sagemath.org/ticket/23898





---

archive/issue_events_212310.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-09-20T06:59:05Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "rename": {
        "from": "gcc vs. Xcode 9.0",
        "to": "gcc does not build with Xcode 9.0"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212310"
}
```



---

archive/issue_comments_363203.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,19 @@\n Sage's gcc does not build with Xcode 9.0 (released 19 Sept 2017?). See [the log file](https://sites.math.washington.edu/~palmieri/Sage/gcc-5.4.0.log).\n \n+This is the actual error:\n+\n+```\n+g++ -c   -g  -DIN_GCC    -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wno-format -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -fno-common  -DHAVE_CONFIG_H -I. -I. -I../../src/gcc -I../../src/gcc/. -I../../src/gcc/../include -I../../src/gcc/../libcpp/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include  -I../../src/gcc/../libdecnumber -I../../src/gcc/../libdecnumber/dpd -I../libdecnumber -I../../src/gcc/../libbacktrace   -o auto-profile.o -MT auto-profile.o -MMD -MP -MF ./.deps/auto-profile.TPo ../../src/gcc/auto-profile.c\n+clang: warning: treating 'c' input as 'c++' when in C++ mode, this behavior is deprecated [-Wdeprecated]\n+In file included from ../../src/gcc/auto-profile.c:25:\n+In file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/map:446:\n+/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/functional:1398:2: error: no member named 'fancy_abort' in namespace 'std::__1'; did you mean simply 'fancy_abort'?\n+        _VSTD::abort();\n+        ^~~~~~~\n+/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/__config:392:15: note: expanded from macro '_VSTD'\n+#define _VSTD std::_LIBCPP_NAMESPACE\n+              ^\n+../../src/gcc/system.h:700:13: note: 'fancy_abort' declared here\n+extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;\n+            ^\n+```\n``````\n",
    "created_at": "2017-09-20T07:02:34Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363203",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,19 @@
 Sage's gcc does not build with Xcode 9.0 (released 19 Sept 2017?). See [the log file](https://sites.math.washington.edu/~palmieri/Sage/gcc-5.4.0.log).
 
+This is the actual error:
+
+```
+g++ -c   -g  -DIN_GCC    -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wno-format -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -fno-common  -DHAVE_CONFIG_H -I. -I. -I../../src/gcc -I../../src/gcc/. -I../../src/gcc/../include -I../../src/gcc/../libcpp/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.1.beta5/local/include  -I../../src/gcc/../libdecnumber -I../../src/gcc/../libdecnumber/dpd -I../libdecnumber -I../../src/gcc/../libbacktrace   -o auto-profile.o -MT auto-profile.o -MMD -MP -MF ./.deps/auto-profile.TPo ../../src/gcc/auto-profile.c
+clang: warning: treating 'c' input as 'c++' when in C++ mode, this behavior is deprecated [-Wdeprecated]
+In file included from ../../src/gcc/auto-profile.c:25:
+In file included from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/map:446:
+/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/functional:1398:2: error: no member named 'fancy_abort' in namespace 'std::__1'; did you mean simply 'fancy_abort'?
+        _VSTD::abort();
+        ^~~~~~~
+/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/__config:392:15: note: expanded from macro '_VSTD'
+#define _VSTD std::_LIBCPP_NAMESPACE
+              ^
+../../src/gcc/system.h:700:13: note: 'fancy_abort' declared here
+extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;
+            ^
+```
``````




---

archive/issue_comments_363204.json:
```json
{
    "body": "<a id='comment:4'></a>\nI just upgraded Sage's gcc to 6.4.0 and it built successfully with Xcode 9.0. Is there a reason not to upgrade to this version? Or to 7.2.0 (which I haven't tried yet)?",
    "created_at": "2017-10-03T21:44:50Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363204",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
I just upgraded Sage's gcc to 6.4.0 and it built successfully with Xcode 9.0. Is there a reason not to upgrade to this version? Or to 7.2.0 (which I haven't tried yet)?



---

archive/issue_comments_363205.json:
```json
{
    "body": "<a id='comment:5'></a>\nI did `make ptestlong` with gcc 6.4.0 and all tests passed. I did not have to make any changes to eclib (see #23922 \u2013 that problem must be specific to clang).",
    "created_at": "2017-10-04T04:55:27Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363205",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
I did `make ptestlong` with gcc 6.4.0 and all tests passed. I did not have to make any changes to eclib (see #23922 â€“ that problem must be specific to clang).



---

archive/issue_comments_363206.json:
```json
{
    "body": "<a id='comment:6'></a>\nSame with gcc 7.2.0.",
    "created_at": "2017-10-04T17:04:26Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363206",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
Same with gcc 7.2.0.



---

archive/issue_comments_363207.json:
```json
{
    "body": "**Branch:** [u/jhpalmieri/gcc7.2](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gcc7.2)",
    "created_at": "2017-10-05T00:29:36Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363207",
    "user": "https://github.com/jhpalmieri"
}
```

**Branch:** [u/jhpalmieri/gcc7.2](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gcc7.2)



---

archive/issue_comments_363208.json:
```json
{
    "body": "**Author:** John Palmieri",
    "created_at": "2017-10-05T00:31:06Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363208",
    "user": "https://github.com/jhpalmieri"
}
```

**Author:** John Palmieri



---

archive/issue_events_212311.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-10-05T00:31:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212311"
}
```



---

archive/issue_comments_363209.json:
```json
{
    "body": "<a id='comment:8'></a>\nOkay, let's upgrade GCC to version 7.2.0.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5bef64e2d1db57aef352597c1d039b27cd1e2a1\">f5bef64</a></td><td><code>trac 23898: upgrade GCC to version 7.2.0</code></td></tr></table>\n",
    "created_at": "2017-10-05T00:31:06Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363209",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:8'></a>
Okay, let's upgrade GCC to version 7.2.0.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5bef64e2d1db57aef352597c1d039b27cd1e2a1">f5bef64</a></td><td><code>trac 23898: upgrade GCC to version 7.2.0</code></td></tr></table>




---

archive/issue_comments_363210.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,3 +17,6 @@\n extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;\n             ^\n ```\n+\n+A fix: upgrade GCC to 7.2.0. Use gzipped tarball from the `releases/gcc-7.2.0` directory of any [GCC mirror](https://gcc.gnu.org/mirrors.html), for example: http://mirrors-usa.go-parts.com/gcc/releases/gcc-7.2.0/gcc-7.2.0.tar.gz\n+\n``````\n",
    "created_at": "2017-10-05T00:31:06Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363210",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,3 +17,6 @@
 extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;
             ^
 ```
+
+A fix: upgrade GCC to 7.2.0. Use gzipped tarball from the `releases/gcc-7.2.0` directory of any [GCC mirror](https://gcc.gnu.org/mirrors.html), for example: http://mirrors-usa.go-parts.com/gcc/releases/gcc-7.2.0/gcc-7.2.0.tar.gz
+
``````




---

archive/issue_comments_363211.json:
```json
{
    "body": "**Commit:** [f5bef64e2d1db57aef352597c1d039b27cd1e2a1](https://github.com/sagemath/sagetrac-mirror/commit/f5bef64e2d1db57aef352597c1d039b27cd1e2a1)",
    "created_at": "2017-10-05T00:31:06Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363211",
    "user": "https://github.com/jhpalmieri"
}
```

**Commit:** [f5bef64e2d1db57aef352597c1d039b27cd1e2a1](https://github.com/sagemath/sagetrac-mirror/commit/f5bef64e2d1db57aef352597c1d039b27cd1e2a1)



---

archive/issue_comments_363212.json:
```json
{
    "body": "<a id='comment:9'></a>\nI have only tested this on OS X with Xcode 8 and Xcode 9. It needs testing on many other platforms.",
    "created_at": "2017-10-05T00:32:07Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363212",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
I have only tested this on OS X with Xcode 8 and Xcode 9. It needs testing on many other platforms.



---

archive/issue_comments_363213.json:
```json
{
    "body": "<a id='comment:10'></a>\nI might test this on various platforms, but not very soon.",
    "created_at": "2017-10-05T12:01:13Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363213",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
I might test this on various platforms, but not very soon.



---

archive/issue_comments_363214.json:
```json
{
    "body": "<a id='comment:11'></a>\nChecking on Linux Fedora 26 now.",
    "created_at": "2017-10-05T18:35:41Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363214",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>
Checking on Linux Fedora 26 now.



---

archive/issue_events_212312.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2017-10-05T22:59:22Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "rename": {
        "from": "gcc does not build with Xcode 9.0",
        "to": "Upgrade to gcc 7.2.0 (gcc 5.4.0 does not build with Xcode 9.0)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212312"
}
```



---

archive/issue_comments_363215.json:
```json
{
    "body": "<a id='comment:12'></a>\nMaking the ticket summary more explicit.",
    "created_at": "2017-10-05T22:59:22Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363215",
    "user": "https://github.com/slel"
}
```

<a id='comment:12'></a>
Making the ticket summary more explicit.



---

archive/issue_comments_363216.json:
```json
{
    "body": "<a id='comment:13'></a>\nIs this known? I have `SAGE_INSTALL_GCC=yes`, check out develop, check out this branch, then `make start` will NOT build gcc.",
    "created_at": "2017-10-06T06:25:53Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363216",
    "user": "https://github.com/rwst"
}
```

<a id='comment:13'></a>
Is this known? I have `SAGE_INSTALL_GCC=yes`, check out develop, check out this branch, then `make start` will NOT build gcc.



---

archive/issue_comments_363217.json:
```json
{
    "body": "<a id='comment:14'></a>\nHow did you get this to work? With this branch and downloading gcc-7.2.0.tar.gz, I still get an error when installing sage:\n\n```\n[ntl-10.3.0] libtool: install: cp -p .libs/libntl.33.dylib /Applications/sage/local/lib/libntl.33.dylib\n[ntl-10.3.0] libtool: install: (cd /Applications/sage/local/lib && { ln -s -f libntl.33.dylib libntl.dylib || { rm -f libntl.dylib && ln -s libntl.33.dylib libntl.dylib; }; })\n[ntl-10.3.0] libtool: install: cp -p .libs/libntl.lai /Applications/sage/local/lib/libntl.la\n[ntl-10.3.0] libtool: install: cp -p .libs/libntl.a /Applications/sage/local/lib/libntl.a\n[ntl-10.3.0] libtool: install: chmod 644 /Applications/sage/local/lib/libntl.a\n[ntl-10.3.0] libtool: install: ranlib /Applications/sage/local/lib/libntl.a\n[ntl-10.3.0] \n[ntl-10.3.0] real\t4m38.570s\n[ntl-10.3.0] user\t7m31.224s\n[ntl-10.3.0] sys\t0m15.756s\n[ntl-10.3.0] Successfully installed ntl-10.3.0\n[ntl-10.3.0] Deleting temporary build directory\n[ntl-10.3.0] /Applications/sage/local/var/tmp/sage/build/ntl-10.3.0\n[ntl-10.3.0] Finished installing ntl-10.3.0.spkg\nmake[1]: *** [all] Error 2\n\nreal\t4m39.614s\nuser\t8m55.690s\nsys\t0m42.746s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make all'):\n\n* package: gcc-7.2.0\n  log file: /Applications/sage/logs/pkgs/gcc-7.2.0.log\n  build directory: /Applications/sage/local/var/tmp/sage/build/gcc-7.2.0\n\n* package: givaro-4.0.2.p0\n  log file: /Applications/sage/logs/pkgs/givaro-4.0.2.p0.log\n  build directory: /Applications/sage/local/var/tmp/sage/build/givaro-4.0.2.p0\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n\nmake: *** [all] Error 1\n```",
    "created_at": "2017-10-06T06:30:57Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363217",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:14'></a>
How did you get this to work? With this branch and downloading gcc-7.2.0.tar.gz, I still get an error when installing sage:

```
[ntl-10.3.0] libtool: install: cp -p .libs/libntl.33.dylib /Applications/sage/local/lib/libntl.33.dylib
[ntl-10.3.0] libtool: install: (cd /Applications/sage/local/lib && { ln -s -f libntl.33.dylib libntl.dylib || { rm -f libntl.dylib && ln -s libntl.33.dylib libntl.dylib; }; })
[ntl-10.3.0] libtool: install: cp -p .libs/libntl.lai /Applications/sage/local/lib/libntl.la
[ntl-10.3.0] libtool: install: cp -p .libs/libntl.a /Applications/sage/local/lib/libntl.a
[ntl-10.3.0] libtool: install: chmod 644 /Applications/sage/local/lib/libntl.a
[ntl-10.3.0] libtool: install: ranlib /Applications/sage/local/lib/libntl.a
[ntl-10.3.0] 
[ntl-10.3.0] real	4m38.570s
[ntl-10.3.0] user	7m31.224s
[ntl-10.3.0] sys	0m15.756s
[ntl-10.3.0] Successfully installed ntl-10.3.0
[ntl-10.3.0] Deleting temporary build directory
[ntl-10.3.0] /Applications/sage/local/var/tmp/sage/build/ntl-10.3.0
[ntl-10.3.0] Finished installing ntl-10.3.0.spkg
make[1]: *** [all] Error 2

real	4m39.614s
user	8m55.690s
sys	0m42.746s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all'):

* package: gcc-7.2.0
  log file: /Applications/sage/logs/pkgs/gcc-7.2.0.log
  build directory: /Applications/sage/local/var/tmp/sage/build/gcc-7.2.0

* package: givaro-4.0.2.p0
  log file: /Applications/sage/logs/pkgs/givaro-4.0.2.p0.log
  build directory: /Applications/sage/local/var/tmp/sage/build/givaro-4.0.2.p0

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.

make: *** [all] Error 1
```



---

archive/issue_comments_363218.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [aschilling](#comment%3A14):\n> How did you get this to work? With this branch and downloading gcc-7.2.0.tar.gz, I still get an error when installing sage:\n\n\nMore info from `/Applications/sage/logs/pkgs/gcc-7.2.0.log` please.",
    "created_at": "2017-10-06T06:33:58Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363218",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>
Replying to [aschilling](#comment%3A14):
> How did you get this to work? With this branch and downloading gcc-7.2.0.tar.gz, I still get an error when installing sage:


More info from `/Applications/sage/logs/pkgs/gcc-7.2.0.log` please.



---

archive/issue_comments_363219.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [fbissey](#comment%3A15):\n> Replying to [aschilling](#comment%3A14):\n> > How did you get this to work? With this branch and downloading gcc-7.2.0.tar.gz, I still get an error when installing sage:\n\n> \n> More info from `/Applications/sage/logs/pkgs/gcc-7.2.0.log` please.\n\n\nWhere in the tree should I put gcc-7.2.0.tar.gz?",
    "created_at": "2017-10-06T06:35:26Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363219",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:16'></a>
Replying to [fbissey](#comment%3A15):
> Replying to [aschilling](#comment%3A14):
> > How did you get this to work? With this branch and downloading gcc-7.2.0.tar.gz, I still get an error when installing sage:

> 
> More info from `/Applications/sage/logs/pkgs/gcc-7.2.0.log` please.


Where in the tree should I put gcc-7.2.0.tar.gz?



---

archive/issue_comments_363220.json:
```json
{
    "body": "<a id='comment:17'></a>\nin `upstream/`.",
    "created_at": "2017-10-06T06:36:24Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363220",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>
in `upstream/`.



---

archive/issue_comments_363221.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [fbissey](#comment%3A17):\n> in `upstream/`.\n\n\nThat is where I put it. But somehow it tries to download it from mirrors\n\n```\nFound local metadata for gcc-7.2.0\nAttempting to download package gcc-7.2.0.tar.gz from mirrors\nhttp://mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\nERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nhttp://mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\nERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nhttp://files.sagemath.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n....\nERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nTraceback (most recent call last):\n  File \"/Applications/sage/build/bin/sage-download-file\", line 28, in <module>\n    run_safe()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 118, in run_safe\n    run()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 100, in run\n    app.download_tarball(args.url_or_tarball, args.destination)\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/app.py\", line 43, in download_tarball\n    tarball.download()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/tarball.py\", line 161, in download\n    raise FileNotMirroredError('tarball does not exist on mirror network')\nsage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network\n************************************************************************\nError downloading gcc-7.2.0.tar.gz\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\nexplaining the problem and including the log file\n  /Applications/sage/logs/pkgs/gcc-7.2.0.log\nDescribe your computer, operating system, etc.\n************************************************************************\nFound local metadata for gcc-7.2.0\nAttempting to download package gcc-7.2.0.tar.gz from mirrors\nhttp://mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\nERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nhttp://mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\nERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nhttp://files.sagemath.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n...\nERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nTraceback (most recent call last):\n  File \"/Applications/sage/build/bin/sage-download-file\", line 28, in <module>\n    run_safe()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 118, in run_safe\n    run()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 100, in run\n    app.download_tarball(args.url_or_tarball, args.destination)\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/app.py\", line 43, in download_tarball\n    tarball.download()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/tarball.py\", line 161, in download\n    raise FileNotMirroredError('tarball does not exist on mirror network')\nsage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network\n************************************************************************\nError downloading gcc-7.2.0.tar.gz\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\nexplaining the problem and including the log file\n  /Applications/sage/logs/pkgs/gcc-7.2.0.log\nDescribe your computer, operating system, etc.\n************************************************************************\nFound local metadata for gcc-7.2.0\nAttempting to download package gcc-7.2.0.tar.gz from mirrors\nhttp://mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\nERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nhttp://mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\nERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nhttp://files.sagemath.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz\n...\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\nERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz'\nTraceback (most recent call last):\n  File \"/Applications/sage/build/bin/sage-download-file\", line 28, in <module>\n    run_safe()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 118, in run_safe\n    run()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py\", line 100, in run\n    app.download_tarball(args.url_or_tarball, args.destination)\n  File \"/Applications/sage/build/bin/../sage_bootstrap/download/app.py\", line 43, in download_tarball\n    tarball.download()\n  File \"/Applications/sage/build/bin/../sage_bootstrap/tarball.py\", line 161, in download\n    raise FileNotMirroredError('tarball does not exist on mirror network')\nsage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network\n************************************************************************\nError downloading gcc-7.2.0.tar.gz\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\nexplaining the problem and including the log file\n  /Applications/sage/logs/pkgs/gcc-7.2.0.log\nDescribe your computer, operating system, etc.\n************************************************************************\n\n```",
    "created_at": "2017-10-06T06:48:24Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363221",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:18'></a>
Replying to [fbissey](#comment%3A17):
> in `upstream/`.


That is where I put it. But somehow it tries to download it from mirrors

```
Found local metadata for gcc-7.2.0
Attempting to download package gcc-7.2.0.tar.gz from mirrors
http://mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
ERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
http://mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
ERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
http://files.sagemath.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz
....
ERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
Traceback (most recent call last):
  File "/Applications/sage/build/bin/sage-download-file", line 28, in <module>
    run_safe()
  File "/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 118, in run_safe
    run()
  File "/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 100, in run
    app.download_tarball(args.url_or_tarball, args.destination)
  File "/Applications/sage/build/bin/../sage_bootstrap/download/app.py", line 43, in download_tarball
    tarball.download()
  File "/Applications/sage/build/bin/../sage_bootstrap/tarball.py", line 161, in download
    raise FileNotMirroredError('tarball does not exist on mirror network')
sage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network
************************************************************************
Error downloading gcc-7.2.0.tar.gz
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the log file
  /Applications/sage/logs/pkgs/gcc-7.2.0.log
Describe your computer, operating system, etc.
************************************************************************
Found local metadata for gcc-7.2.0
Attempting to download package gcc-7.2.0.tar.gz from mirrors
http://mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
ERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
http://mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
ERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
http://files.sagemath.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz
...
ERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
Traceback (most recent call last):
  File "/Applications/sage/build/bin/sage-download-file", line 28, in <module>
    run_safe()
  File "/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 118, in run_safe
    run()
  File "/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 100, in run
    app.download_tarball(args.url_or_tarball, args.destination)
  File "/Applications/sage/build/bin/../sage_bootstrap/download/app.py", line 43, in download_tarball
    tarball.download()
  File "/Applications/sage/build/bin/../sage_bootstrap/tarball.py", line 161, in download
    raise FileNotMirroredError('tarball does not exist on mirror network')
sage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network
************************************************************************
Error downloading gcc-7.2.0.tar.gz
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the log file
  /Applications/sage/logs/pkgs/gcc-7.2.0.log
Describe your computer, operating system, etc.
************************************************************************
Found local metadata for gcc-7.2.0
Attempting to download package gcc-7.2.0.tar.gz from mirrors
http://mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
ERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors.xmission.com/sage/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
http://mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
ERROR [transfer|run:135]: [Errno 404] Not Found: '//mirrors-usa.go-parts.com/sage/sagemath/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
http://files.sagemath.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz
...
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
ERROR [transfer|run:135]: [Errno 404] Not Found: '//sagepad.org/spkg/upstream/gcc/gcc-7.2.0.tar.gz'
Traceback (most recent call last):
  File "/Applications/sage/build/bin/sage-download-file", line 28, in <module>
    run_safe()
  File "/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 118, in run_safe
    run()
  File "/Applications/sage/build/bin/../sage_bootstrap/download/cmdline.py", line 100, in run
    app.download_tarball(args.url_or_tarball, args.destination)
  File "/Applications/sage/build/bin/../sage_bootstrap/download/app.py", line 43, in download_tarball
    tarball.download()
  File "/Applications/sage/build/bin/../sage_bootstrap/tarball.py", line 161, in download
    raise FileNotMirroredError('tarball does not exist on mirror network')
sage_bootstrap.tarball.FileNotMirroredError: tarball does not exist on mirror network
************************************************************************
Error downloading gcc-7.2.0.tar.gz
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the log file
  /Applications/sage/logs/pkgs/gcc-7.2.0.log
Describe your computer, operating system, etc.
************************************************************************

```



---

archive/issue_comments_363222.json:
```json
{
    "body": "<a id='comment:19'></a>\nWorks well on Fedora 26, all tests pass. I did the following:\n \n* get the tarfile in upstream/\n* get the branch via git\n* $ make distclean\n* $ SAGE_INSTALL_GCC=yes ./configure\n* $ SAGE_INSTALL_GCC=yes make ptestlong",
    "created_at": "2017-10-06T06:49:13Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363222",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>
Works well on Fedora 26, all tests pass. I did the following:
 
* get the tarfile in upstream/
* get the branch via git
* $ make distclean
* $ SAGE_INSTALL_GCC=yes ./configure
* $ SAGE_INSTALL_GCC=yes make ptestlong



---

archive/issue_comments_363223.json:
```json
{
    "body": "<a id='comment:20'></a>\nNot all gcc mirror seem to carry the same tarball. When I did experiments last week, one mirror was carrying a >100MB tarball (with several other stuff included like go) compared to the one on the main mirror. So get the one linked here rather than the one on a closer mirror. Someone messed up big time upstream.",
    "created_at": "2017-10-06T06:52:08Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363223",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
Not all gcc mirror seem to carry the same tarball. When I did experiments last week, one mirror was carrying a >100MB tarball (with several other stuff included like go) compared to the one on the main mirror. So get the one linked here rather than the one on a closer mirror. Someone messed up big time upstream.



---

archive/issue_comments_363224.json:
```json
{
    "body": "<a id='comment:21'></a>\nFor Europeans the fu-berlin tarball seems fine.",
    "created_at": "2017-10-06T06:53:58Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363224",
    "user": "https://github.com/rwst"
}
```

<a id='comment:21'></a>
For Europeans the fu-berlin tarball seems fine.



---

archive/issue_comments_363225.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [aschilling](#comment%3A18):\n> Replying to [fbissey](#comment%3A17):\n> > in `upstream/`.\n\n> \n> That is where I put it. But somehow it tries to download it from mirrors\n\n\nThis might indicate that the tarball you got didn't match - then it is silently deleted and an attempt to download one is made.\n\nThe tarball linked is huge, in fact, over 100Mb.",
    "created_at": "2017-10-06T06:54:21Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363225",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>
Replying to [aschilling](#comment%3A18):
> Replying to [fbissey](#comment%3A17):
> > in `upstream/`.

> 
> That is where I put it. But somehow it tries to download it from mirrors


This might indicate that the tarball you got didn't match - then it is silently deleted and an attempt to download one is made.

The tarball linked is huge, in fact, over 100Mb.



---

archive/issue_comments_363226.json:
```json
{
    "body": "<a id='comment:23'></a>\nChecking my numbers. The tarball I got is 107MB, the one I first downloaded was actually several hundreds MB.",
    "created_at": "2017-10-06T06:56:42Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363226",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'></a>
Checking my numbers. The tarball I got is 107MB, the one I first downloaded was actually several hundreds MB.



---

archive/issue_comments_363227.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [dimpase](#comment%3A22):\n> Replying to [aschilling](#comment%3A18):\n> > Replying to [fbissey](#comment%3A17):\n> > > in `upstream/`.\n\n> > \n> > That is where I put it. But somehow it tries to download it from mirrors\n\n> \n> This might indicate that the tarball you got didn't match - then it is silently deleted and an attempt to download one is made.\n\n\nI have opened #23972 to rectify the silent tarball deletion.",
    "created_at": "2017-10-06T06:59:24Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363227",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>
Replying to [dimpase](#comment%3A22):
> Replying to [aschilling](#comment%3A18):
> > Replying to [fbissey](#comment%3A17):
> > > in `upstream/`.

> > 
> > That is where I put it. But somehow it tries to download it from mirrors

> 
> This might indicate that the tarball you got didn't match - then it is silently deleted and an attempt to download one is made.


I have opened #23972 to rectify the silent tarball deletion.



---

archive/issue_comments_363228.json:
```json
{
    "body": "<a id='comment:25'></a>\nNote that we can use a smaller tarball (maybe 60MB?) if we use a `.xz` file instead. No other Sage packages use `.xz` files, so I was reluctant to try here.",
    "created_at": "2017-10-06T14:40:55Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363228",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'></a>
Note that we can use a smaller tarball (maybe 60MB?) if we use a `.xz` file instead. No other Sage packages use `.xz` files, so I was reluctant to try here.



---

archive/issue_comments_363229.json:
```json
{
    "body": "<a id='comment:26'></a>\nSage comes with an `xz` standard package. So this would just be a matter of adding `.xz` support to the Sage build system. I think it would be good anyway to do that, but please create a new ticket for that.",
    "created_at": "2017-10-06T15:46:47Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363229",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Sage comes with an `xz` standard package. So this would just be a matter of adding `.xz` support to the Sage build system. I think it would be good anyway to do that, but please create a new ticket for that.



---

archive/issue_comments_363230.json:
```json
{
    "body": "<a id='comment:27'></a>\nThanks for your comments! I downloaded gcc-7.2.0.tar.gz again and followed Dima's instructions. Now Sage compiles!",
    "created_at": "2017-10-06T16:32:22Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363230",
    "user": "https://github.com/anneschilling"
}
```

<a id='comment:27'></a>
Thanks for your comments! I downloaded gcc-7.2.0.tar.gz again and followed Dima's instructions. Now Sage compiles!



---

archive/issue_comments_363231.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [jdemeyer](#comment%3A26):\n> Sage comes with an `xz` standard package. So this would just be a matter of adding `.xz` support to the Sage build system. I think it would be good anyway to do that, but please create a new ticket for that.\n\n\nSince we rely on the system's pre-existing Python for package decompression and since `lzma` support is only available in Python 3, this won't be as simple as what we currently do for tar files. In particular, `tarfile.is_tarfile('gcc-7.2.0.tar.xz')` returns `True` in Python 3 but `False` in Python 2.",
    "created_at": "2017-10-06T18:27:44Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363231",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>
Replying to [jdemeyer](#comment%3A26):
> Sage comes with an `xz` standard package. So this would just be a matter of adding `.xz` support to the Sage build system. I think it would be good anyway to do that, but please create a new ticket for that.


Since we rely on the system's pre-existing Python for package decompression and since `lzma` support is only available in Python 3, this won't be as simple as what we currently do for tar files. In particular, `tarfile.is_tarfile('gcc-7.2.0.tar.xz')` returns `True` in Python 3 but `False` in Python 2.



---

archive/issue_comments_363232.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [jdemeyer](#comment%3A26):\n> Sage comes with an `xz` standard package. So this would just be a matter of adding `.xz` support to the Sage build system. I think it would be good anyway to do that, but please create a new ticket for that.\n\n\nSee #18236.",
    "created_at": "2017-10-06T19:01:20Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363232",
    "user": "https://github.com/rwst"
}
```

<a id='comment:29'></a>
Replying to [jdemeyer](#comment%3A26):
> Sage comes with an `xz` standard package. So this would just be a matter of adding `.xz` support to the Sage build system. I think it would be good anyway to do that, but please create a new ticket for that.


See #18236.



---

archive/issue_comments_363233.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [jhpalmieri](#comment%3A28):\n> Since we rely on the system's pre-existing Python for package decompression and since `lzma` support is only available in Python 3, this won't be as simple as what we currently do for tar files. In particular, `tarfile.is_tarfile('gcc-7.2.0.tar.xz')` returns `True` in Python 3 but `False` in Python 2.\n\n\nRight. I forgot that we use Python these days to uncompress tarballs. For a long time, this was done by a shell script. Still, it doesn't mean that it won't work with Python, we can manually call the `xz` program.",
    "created_at": "2017-10-07T08:03:42Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363233",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Replying to [jhpalmieri](#comment%3A28):
> Since we rely on the system's pre-existing Python for package decompression and since `lzma` support is only available in Python 3, this won't be as simple as what we currently do for tar files. In particular, `tarfile.is_tarfile('gcc-7.2.0.tar.xz')` returns `True` in Python 3 but `False` in Python 2.


Right. I forgot that we use Python these days to uncompress tarballs. For a long time, this was done by a shell script. Still, it doesn't mean that it won't work with Python, we can manually call the `xz` program.



---

archive/issue_comments_363234.json:
```json
{
    "body": "<a id='comment:31'></a>\nIt appears there is a \"backport\": https://pypi.python.org/pypi/backports.lzma/",
    "created_at": "2017-10-07T09:41:35Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363234",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:31'></a>
It appears there is a "backport": https://pypi.python.org/pypi/backports.lzma/



---

archive/issue_comments_363235.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [fbissey](#comment%3A31):\n> It appears there is a \"backport\": https://pypi.python.org/pypi/backports.lzma/\n\n\nThat is not relevant for Sage because we use the *system* Python to uncompress tarballs.",
    "created_at": "2017-10-07T10:26:17Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363235",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
Replying to [fbissey](#comment%3A31):
> It appears there is a "backport": https://pypi.python.org/pypi/backports.lzma/


That is not relevant for Sage because we use the *system* Python to uncompress tarballs.



---

archive/issue_comments_363236.json:
```json
{
    "body": "<a id='comment:33'></a>\nAnyway, the discussion about `.xz` tarballs should be continued on #18236.",
    "created_at": "2017-10-07T10:26:59Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363236",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:33'></a>
Anyway, the discussion about `.xz` tarballs should be continued on #18236.



---

archive/issue_comments_363237.json:
```json
{
    "body": "install.log",
    "created_at": "2017-10-07T13:18:17Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363237",
    "user": "https://github.com/rwst"
}
```

install.log



---

archive/attachments_021677.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "install.log",
    "asset_url": "tarball://root/attachments/ticket23898/install.log",
    "created_at": "2017-10-07T13:19:17Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket23898/install.log",
    "user": "https://github.com/rwst"
}
```



---

archive/issue_comments_363238.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Attachment:** [install.log](https://github.com/sagemath/sage/files/ticket23898/install.log)\n\nOn OpenSuSE 42.2 lcalc does not build, see above for log.",
    "created_at": "2017-10-07T13:19:17Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363238",
    "user": "https://github.com/rwst"
}
```

<a id='comment:34'></a>
**Attachment:** [install.log](https://github.com/sagemath/sage/files/ticket23898/install.log)

On OpenSuSE 42.2 lcalc does not build, see above for log.



---

archive/issue_comments_363239.json:
```json
{
    "body": "<a id='comment:35'></a>\nSee https://sourceware.org/bugzilla/show_bug.cgi?id=19590",
    "created_at": "2017-10-07T13:24:09Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363239",
    "user": "https://github.com/rwst"
}
```

<a id='comment:35'></a>
See https://sourceware.org/bugzilla/show_bug.cgi?id=19590



---

archive/issue_comments_363240.json:
```json
{
    "body": "<a id='comment:36'></a>\nIndeed both the OpenSuSE gcc-5.3.1 and the installed gcc-7.2.0 fail the test case given in that link, the system glibc is 2.22-4.9.1 which is older than the glibc in the above bug report.",
    "created_at": "2017-10-07T13:45:09Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363240",
    "user": "https://github.com/rwst"
}
```

<a id='comment:36'></a>
Indeed both the OpenSuSE gcc-5.3.1 and the installed gcc-7.2.0 fail the test case given in that link, the system glibc is 2.22-4.9.1 which is older than the glibc in the above bug report.



---

archive/issue_comments_363241.json:
```json
{
    "body": "<a id='comment:37'></a>\nThe test case passes if I remove `-ffast-math` from the compile options. How do I remove it when compiling lcalc?",
    "created_at": "2017-10-07T13:47:41Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363241",
    "user": "https://github.com/rwst"
}
```

<a id='comment:37'></a>
The test case passes if I remove `-ffast-math` from the compile options. How do I remove it when compiling lcalc?



---

archive/issue_events_212313.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-07T14:18:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212313"
}
```



---

archive/issue_events_212314.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-07T14:18:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212314"
}
```



---

archive/issue_comments_363242.json:
```json
{
    "body": "<a id='comment:38'></a>\nIn our lcalc-1.23 the line `lcalc-1.23/src/Makefile:MACHINE_SPECIFIC_FLAGS = -ffast-math -fPIC` is no longer in the newer version at https://github.com/dimpase/lcalc which is enhanced from the last official version at https://code.google.com/archive/p/l-calc/, see [#23341 comment:35](https://github.com/sagemath/sage/issues/23341#comment:35)\n\nSo, in order to enable building on systems with glibc < 2.23 at least the lcalc Makefile should be patched. Even better would be the upgrade to the version at https://github.com/dimpase/lcalc. I propose to hijack #23341 for this and make it a dependency of this ticket.",
    "created_at": "2017-10-07T14:18:06Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363242",
    "user": "https://github.com/rwst"
}
```

<a id='comment:38'></a>
In our lcalc-1.23 the line `lcalc-1.23/src/Makefile:MACHINE_SPECIFIC_FLAGS = -ffast-math -fPIC` is no longer in the newer version at https://github.com/dimpase/lcalc which is enhanced from the last official version at https://code.google.com/archive/p/l-calc/, see [#23341 comment:35](https://github.com/sagemath/sage/issues/23341#comment:35)

So, in order to enable building on systems with glibc < 2.23 at least the lcalc Makefile should be patched. Even better would be the upgrade to the version at https://github.com/dimpase/lcalc. I propose to hijack #23341 for this and make it a dependency of this ticket.



---

archive/issue_comments_363243.json:
```json
{
    "body": "<a id='comment:39'></a>\nIf you don't want the dependency, the patch that makes lcalc compile and install here:\n\n```\n--- a/src/Makefile.old\t2017-10-07 16:51:18.112467539 +0200\n+++ a/src/Makefile\t2017-10-07 16:51:51.901214940 +0200\n@@ -41,7 +41,7 @@\n \n \n #MACHINE_SPECIFIC_FLAGS = -Wno-long-double\n-MACHINE_SPECIFIC_FLAGS = -ffast-math -fPIC\n+MACHINE_SPECIFIC_FLAGS = -fPIC\n \n #G4 = FALSE\n #ifeq ($(G4),TRUE)\n```",
    "created_at": "2017-10-07T14:57:59Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363243",
    "user": "https://github.com/rwst"
}
```

<a id='comment:39'></a>
If you don't want the dependency, the patch that makes lcalc compile and install here:

```
--- a/src/Makefile.old	2017-10-07 16:51:18.112467539 +0200
+++ a/src/Makefile	2017-10-07 16:51:51.901214940 +0200
@@ -41,7 +41,7 @@
 
 
 #MACHINE_SPECIFIC_FLAGS = -Wno-long-double
-MACHINE_SPECIFIC_FLAGS = -ffast-math -fPIC
+MACHINE_SPECIFIC_FLAGS = -fPIC
 
 #G4 = FALSE
 #ifeq ($(G4),TRUE)
```



---

archive/issue_comments_363244.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [rws](#comment%3A36):\n> Indeed both the OpenSuSE gcc-5.3.1 and the installed gcc-7.2.0 fail the test case given in that link, the system glibc is 2.22-4.9.1 which is older than the glibc in the above bug report.\n\n\nSo it seems that the lcalc issue has nothing to do with this ticket.",
    "created_at": "2017-10-07T15:01:27Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363244",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>
Replying to [rws](#comment%3A36):
> Indeed both the OpenSuSE gcc-5.3.1 and the installed gcc-7.2.0 fail the test case given in that link, the system glibc is 2.22-4.9.1 which is older than the glibc in the above bug report.


So it seems that the lcalc issue has nothing to do with this ticket.



---

archive/issue_comments_363245.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [jdemeyer](#comment%3A40):\n> Replying to [rws](#comment%3A36):\n> > Indeed both the OpenSuSE gcc-5.3.1 and the installed gcc-7.2.0 fail the test case given in that link, the system glibc is 2.22-4.9.1 which is older than the glibc in the above bug report.\n\n> \n> So it seems that the lcalc issue has nothing to do with this ticket.\n\n\nThere is the possibility the OpenSuSE gcc-5.3.1 has something our gcc-5.4.0 does not have. I'm compiling 5.4.0 right now.",
    "created_at": "2017-10-07T15:19:14Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363245",
    "user": "https://github.com/rwst"
}
```

<a id='comment:41'></a>
Replying to [jdemeyer](#comment%3A40):
> Replying to [rws](#comment%3A36):
> > Indeed both the OpenSuSE gcc-5.3.1 and the installed gcc-7.2.0 fail the test case given in that link, the system glibc is 2.22-4.9.1 which is older than the glibc in the above bug report.

> 
> So it seems that the lcalc issue has nothing to do with this ticket.


There is the possibility the OpenSuSE gcc-5.3.1 has something our gcc-5.4.0 does not have. I'm compiling 5.4.0 right now.



---

archive/issue_comments_363246.json:
```json
{
    "body": "<a id='comment:42'></a>\nThe test file (EDITED: and lcalc) compiles with 5.4.0. That's why I didn't notice the problem earlier: because of #21811 I had the Sage-internal gcc installed. So, it all is relevant for this ticket.",
    "created_at": "2017-10-07T15:46:47Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363246",
    "user": "https://github.com/rwst"
}
```

<a id='comment:42'></a>
The test file (EDITED: and lcalc) compiles with 5.4.0. That's why I didn't notice the problem earlier: because of #21811 I had the Sage-internal gcc installed. So, it all is relevant for this ticket.



---

archive/issue_comments_363247.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [jdemeyer](#comment%3A30):\n> Right. I forgot that we use Python these days to uncompress tarballs.\n\n\nDoes this mean that `bzip2` should just be a regular package, not part of the `base` Makefile target?",
    "created_at": "2017-10-07T23:05:10Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363247",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:43'></a>
Replying to [jdemeyer](#comment%3A30):
> Right. I forgot that we use Python these days to uncompress tarballs.


Does this mean that `bzip2` should just be a regular package, not part of the `base` Makefile target?



---

archive/issue_comments_363248.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [jhpalmieri](#comment%3A43):\n> Does this mean that `bzip2` should just be a regular package, not part of the `base` Makefile target?\n\n\nSee #24005",
    "created_at": "2017-10-10T10:11:22Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363248",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
Replying to [jhpalmieri](#comment%3A43):
> Does this mean that `bzip2` should just be a regular package, not part of the `base` Makefile target?


See #24005



---

archive/issue_comments_363249.json:
```json
{
    "body": "**Dependencies:** #18236",
    "created_at": "2017-10-10T12:06:12Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363249",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #18236



---

archive/issue_comments_363250.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,5 +18,6 @@\n             ^\n ```\n \n-A fix: upgrade GCC to 7.2.0. Use gzipped tarball from the `releases/gcc-7.2.0` directory of any [GCC mirror](https://gcc.gnu.org/mirrors.html), for example: http://mirrors-usa.go-parts.com/gcc/releases/gcc-7.2.0/gcc-7.2.0.tar.gz\n+A fix: upgrade GCC to 7.2.0.\n \n+**Tarball**: ftp://ftp.fu-berlin.de/unix/languages/gcc/releases/gcc-7.2.0/gcc-7.2.0.tar.xz\n``````\n",
    "created_at": "2017-10-10T12:06:12Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363250",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,5 +18,6 @@
             ^
 ```
 
-A fix: upgrade GCC to 7.2.0. Use gzipped tarball from the `releases/gcc-7.2.0` directory of any [GCC mirror](https://gcc.gnu.org/mirrors.html), for example: http://mirrors-usa.go-parts.com/gcc/releases/gcc-7.2.0/gcc-7.2.0.tar.gz
+A fix: upgrade GCC to 7.2.0.
 
+**Tarball**: ftp://ftp.fu-berlin.de/unix/languages/gcc/releases/gcc-7.2.0/gcc-7.2.0.tar.xz
``````




---

archive/issue_comments_363251.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/gcc7.2](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gcc7.2)\" to \"[u/jdemeyer/gcc7.2](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/gcc7.2)\".",
    "created_at": "2017-10-10T12:07:52Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363251",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/jhpalmieri/gcc7.2](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/gcc7.2)" to "[u/jdemeyer/gcc7.2](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/gcc7.2)".



---

archive/issue_comments_363252.json:
```json
{
    "body": "<a id='comment:47'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13d60a14be741a37edb5641f0f54f378a1097baa\">13d60a1</a></td><td><code>Support xz compressed tarballs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/714f6f07b72634aed00fd9208e4c1073b9b85e4b\">714f6f0</a></td><td><code>Upgrade GCC to version 7.2.0</code></td></tr></table>\n",
    "created_at": "2017-10-10T12:10:04Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363252",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13d60a14be741a37edb5641f0f54f378a1097baa">13d60a1</a></td><td><code>Support xz compressed tarballs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/714f6f07b72634aed00fd9208e4c1073b9b85e4b">714f6f0</a></td><td><code>Upgrade GCC to version 7.2.0</code></td></tr></table>




---

archive/issue_comments_363253.json:
```json
{
    "body": "**Changing commit** from \"[f5bef64e2d1db57aef352597c1d039b27cd1e2a1](https://github.com/sagemath/sagetrac-mirror/commit/f5bef64e2d1db57aef352597c1d039b27cd1e2a1)\" to \"[714f6f07b72634aed00fd9208e4c1073b9b85e4b](https://github.com/sagemath/sagetrac-mirror/commit/714f6f07b72634aed00fd9208e4c1073b9b85e4b)\".",
    "created_at": "2017-10-10T12:10:04Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363253",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[f5bef64e2d1db57aef352597c1d039b27cd1e2a1](https://github.com/sagemath/sagetrac-mirror/commit/f5bef64e2d1db57aef352597c1d039b27cd1e2a1)" to "[714f6f07b72634aed00fd9208e4c1073b9b85e4b](https://github.com/sagemath/sagetrac-mirror/commit/714f6f07b72634aed00fd9208e4c1073b9b85e4b)".



---

archive/issue_comments_363254.json:
```json
{
    "body": "<a id='comment:48'></a>\nThis breaks the optional package `pysingular`:\n\n```\n[pysingular-0.9.1]     gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -DPYTHON_VERSION_OLDER_THREE_FIVE=1 -I/home/jdemeyer/sage/local/include/singular -I/home/jdemeyer/sage/local/include/python2.7 -c SingularModule.cpp -o build/temp.linux-x86_64-2.7/SingularModule.o\n[pysingular-0.9.1]     SingularModule.cpp: In function 'PyObject* GetSingularCompletion(PyObject*, PyObject*)':\n[pysingular-0.9.1]     SingularModule.cpp:140:47: error: ISO C++ forbids comparison between pointer and integer [-fpermissive]\n[pysingular-0.9.1]          while( singular_complete_return[ pos ] != '\\0' ){\n[pysingular-0.9.1]                                                    ^~~~\n[pysingular-0.9.1]     error: command 'gcc' failed with exit status 1\n[pysingular-0.9.1]     Running setup.py install for PySingular: finished with status 'error'\n```",
    "created_at": "2017-10-11T09:53:57Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363254",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'></a>
This breaks the optional package `pysingular`:

```
[pysingular-0.9.1]     gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -DPYTHON_VERSION_OLDER_THREE_FIVE=1 -I/home/jdemeyer/sage/local/include/singular -I/home/jdemeyer/sage/local/include/python2.7 -c SingularModule.cpp -o build/temp.linux-x86_64-2.7/SingularModule.o
[pysingular-0.9.1]     SingularModule.cpp: In function 'PyObject* GetSingularCompletion(PyObject*, PyObject*)':
[pysingular-0.9.1]     SingularModule.cpp:140:47: error: ISO C++ forbids comparison between pointer and integer [-fpermissive]
[pysingular-0.9.1]          while( singular_complete_return[ pos ] != '\0' ){
[pysingular-0.9.1]                                                    ^~~~
[pysingular-0.9.1]     error: command 'gcc' failed with exit status 1
[pysingular-0.9.1]     Running setup.py install for PySingular: finished with status 'error'
```



---

archive/issue_comments_363255.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [jdemeyer](#comment%3A48):\n> This breaks the optional package `pysingular`:\n> \n> ```\n> [pysingular-0.9.1]     gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -DPYTHON_VERSION_OLDER_THREE_FIVE=1 -I/home/jdemeyer/sage/local/include/singular -I/home/jdemeyer/sage/local/include/python2.7 -c SingularModule.cpp -o build/temp.linux-x86_64-2.7/SingularModule.o\n> [pysingular-0.9.1]     SingularModule.cpp: In function 'PyObject* GetSingularCompletion(PyObject*, PyObject*)':\n> [pysingular-0.9.1]     SingularModule.cpp:140:47: error: ISO C++ forbids comparison between pointer and integer [-fpermissive]\n> ```\n\nThat is, it's a bug there in pysingular.",
    "created_at": "2017-10-11T10:18:03Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363255",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>
Replying to [jdemeyer](#comment%3A48):
> This breaks the optional package `pysingular`:
> 
> ```
> [pysingular-0.9.1]     gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -DPYTHON_VERSION_OLDER_THREE_FIVE=1 -I/home/jdemeyer/sage/local/include/singular -I/home/jdemeyer/sage/local/include/python2.7 -c SingularModule.cpp -o build/temp.linux-x86_64-2.7/SingularModule.o
> [pysingular-0.9.1]     SingularModule.cpp: In function 'PyObject* GetSingularCompletion(PyObject*, PyObject*)':
> [pysingular-0.9.1]     SingularModule.cpp:140:47: error: ISO C++ forbids comparison between pointer and integer [-fpermissive]
> ```

That is, it's a bug there in pysingular.



---

archive/issue_comments_363256.json:
```json
{
    "body": "<a id='comment:50'></a>\nAlso gambit fails to build: https://github.com/gambitproject/gambit/issues/220",
    "created_at": "2017-10-11T10:19:07Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363256",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:50'></a>
Also gambit fails to build: https://github.com/gambitproject/gambit/issues/220



---

archive/issue_comments_363257.json:
```json
{
    "body": "<a id='comment:51'></a>\nAll other optional packages build.",
    "created_at": "2017-10-11T10:21:13Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363257",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'></a>
All other optional packages build.



---

archive/issue_comments_363258.json:
```json
{
    "body": "**Changing dependencies** from \"#18236\" to \"#18236, #24011, #24012\".",
    "created_at": "2017-10-11T10:36:44Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363258",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#18236" to "#18236, #24011, #24012".



---

archive/issue_comments_363259.json:
```json
{
    "body": "<a id='comment:53'></a>\n...and all doctests pass.",
    "created_at": "2017-10-11T11:35:42Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363259",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>
...and all doctests pass.



---

archive/issue_comments_363260.json:
```json
{
    "body": "<a id='comment:54'></a>\nSo the only remaining issue now is that lcalc doesn't build with GCC-7.2.0 with old glibc versions...",
    "created_at": "2017-10-13T08:43:40Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363260",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>
So the only remaining issue now is that lcalc doesn't build with GCC-7.2.0 with old glibc versions...



---

archive/issue_comments_363261.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [jdemeyer](#comment%3A54):\n> So the only remaining issue now is that lcalc doesn't build with GCC-7.2.0 with old glibc versions...\n\n\nI don't really have any suggestions for how to deal with that. Patch the makefile as in [comment:39](#comment%3A39)?",
    "created_at": "2017-10-13T16:55:48Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363261",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:55'></a>
Replying to [jdemeyer](#comment%3A54):
> So the only remaining issue now is that lcalc doesn't build with GCC-7.2.0 with old glibc versions...


I don't really have any suggestions for how to deal with that. Patch the makefile as in [comment:39](#comment%3A39)?



---

archive/issue_comments_363262.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [jdemeyer](#comment%3A54):\n> So the only remaining issue now is that lcalc doesn't build with GCC-7.2.0 with old glibc versions...\n\n\ndid you try one of these lcalc patches mentioned in #23919 ?",
    "created_at": "2017-10-19T08:16:47Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363262",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>
Replying to [jdemeyer](#comment%3A54):
> So the only remaining issue now is that lcalc doesn't build with GCC-7.2.0 with old glibc versions...


did you try one of these lcalc patches mentioned in #23919 ?



---

archive/issue_comments_363263.json:
```json
{
    "body": "<a id='comment:57'></a>\nWe need someone with an old glibc who can test out different patches. Would it be worth trying (on another ticket) upgrading to GCC 6.4.0? We need to get something into Sage so it will build with the most recent version of OS X and Xcode.",
    "created_at": "2017-10-20T18:24:14Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363263",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:57'></a>
We need someone with an old glibc who can test out different patches. Would it be worth trying (on another ticket) upgrading to GCC 6.4.0? We need to get something into Sage so it will build with the most recent version of OS X and Xcode.



---

archive/issue_comments_363264.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [jhpalmieri](#comment%3A57):\n> We need someone with an old glibc who can test out different patches.\n\n\nI upgraded recently and now have glibc-2.22-8.4.",
    "created_at": "2017-10-21T06:01:30Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363264",
    "user": "https://github.com/rwst"
}
```

<a id='comment:58'></a>
Replying to [jhpalmieri](#comment%3A57):
> We need someone with an old glibc who can test out different patches.


I upgraded recently and now have glibc-2.22-8.4.



---

archive/issue_comments_363265.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [rws](#comment%3A58):\n> Replying to [jhpalmieri](#comment%3A57):\n> > We need someone with an old glibc who can test out different patches.\n\n> \n> I upgraded recently and now have glibc-2.22-8.4.\n\n\nDoes this now build for you?",
    "created_at": "2017-10-21T22:35:09Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363265",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:59'></a>
Replying to [rws](#comment%3A58):
> Replying to [jhpalmieri](#comment%3A57):
> > We need someone with an old glibc who can test out different patches.

> 
> I upgraded recently and now have glibc-2.22-8.4.


Does this now build for you?



---

archive/issue_comments_363266.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [jhpalmieri](#comment%3A59):\n> > I upgraded recently and now have glibc-2.22-8.4.\n\n> \n> Does this now build for you?\n\n\nThis branch merged with 8.1.beta9 builds from distclean, after two failures to build brial (`pkg_resources.DistributionNotFound: The 'pip' distribution was not found`). Just restarting the make succeeded. This was after upgrading OpenSuSE from 42.2 to 42.3.\n\nI'd suggest requiring the 42.3 upgrade as it is no pain and very easy to do.",
    "created_at": "2017-10-24T13:20:05Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363266",
    "user": "https://github.com/rwst"
}
```

<a id='comment:60'></a>
Replying to [jhpalmieri](#comment%3A59):
> > I upgraded recently and now have glibc-2.22-8.4.

> 
> Does this now build for you?


This branch merged with 8.1.beta9 builds from distclean, after two failures to build brial (`pkg_resources.DistributionNotFound: The 'pip' distribution was not found`). Just restarting the make succeeded. This was after upgrading OpenSuSE from 42.2 to 42.3.

I'd suggest requiring the 42.3 upgrade as it is no pain and very easy to do.



---

archive/issue_comments_363267.json:
```json
{
    "body": "<a id='comment:61'></a>\nI'm upgrading this to a blocker because we need to upgrade gcc to build on the most recent OS X. I am happy with Jeroen's changes (to use `.xz` instead of `.gz`).",
    "created_at": "2017-10-24T14:51:19Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363267",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:61'></a>
I'm upgrading this to a blocker because we need to upgrade gcc to build on the most recent OS X. I am happy with Jeroen's changes (to use `.xz` instead of `.gz`).



---

archive/issue_events_212315.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-10-24T14:51:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212315"
}
```



---

archive/issue_events_212316.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-10-24T14:51:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212316"
}
```



---

archive/issue_events_212317.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-10-24T14:51:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212317"
}
```



---

archive/issue_events_212318.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-10-24T14:51:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212318"
}
```



---

archive/issue_comments_363268.json:
```json
{
    "body": "**Reviewer:** Ralf Stephan",
    "created_at": "2017-10-24T15:58:39Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363268",
    "user": "https://github.com/rwst"
}
```

**Reviewer:** Ralf Stephan



---

archive/issue_events_212319.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-24T15:58:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212319"
}
```



---

archive/issue_events_212320.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-24T15:58:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212320"
}
```



---

archive/issue_comments_363269.json:
```json
{
    "body": "<a id='comment:63'></a>\nSo, the patch is trivially looking good, and it's tested on Xcode 8/9, Linux Fedora 26, and OpenSuSE Leap 42.3.",
    "created_at": "2017-10-24T15:58:39Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363269",
    "user": "https://github.com/rwst"
}
```

<a id='comment:63'></a>
So, the patch is trivially looking good, and it's tested on Xcode 8/9, Linux Fedora 26, and OpenSuSE Leap 42.3.



---

archive/issue_events_212321.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-29T10:32:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212321"
}
```



---

archive/issue_events_212322.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a90b25ebf7314976b5bda32a93642fe0a9bbb58c",
    "created_at": "2017-10-29T10:32:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23898#event-212322"
}
```



---

archive/issue_comments_363270.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/gcc7.2](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/gcc7.2)\" to \"[714f6f07b72634aed00fd9208e4c1073b9b85e4b](https://github.com/sagemath/sagetrac-mirror/commit/714f6f07b72634aed00fd9208e4c1073b9b85e4b)\".",
    "created_at": "2017-10-29T10:32:30Z",
    "issue": "https://github.com/sagemath/sage/issues/23898",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23898#issuecomment-363270",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/gcc7.2](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/gcc7.2)" to "[714f6f07b72634aed00fd9208e4c1073b9b85e4b](https://github.com/sagemath/sagetrac-mirror/commit/714f6f07b72634aed00fd9208e4c1073b9b85e4b)".
