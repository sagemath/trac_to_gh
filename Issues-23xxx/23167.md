# Issue 23167: Coercions between Function Fields

archive/issues_022930.json:
```json
{
    "body": "The following are desired features.\n\nCoercions between base fields should induce coercions on function fields:\n\n```\nsage: K.<x> = FunctionField(QQ)\nsage: L.<x> = FunctionField(GaussianIntegers().fraction_field())\nsage: L.has_coerce_map_from(K)\nTrue\n```\n\nAlso in towers:\n\n```\nsage: K.<x> = FunctionField(QQ)\nsage: R.<y> = K[]\nsage: L.<y> = K.extension(y^3 + 1)\nsage: K.<x> = FunctionField(GaussianIntegers().fraction_field())\nsage: R.<y> = K[]\nsage: M.<y> = K.extension(y^3 + 1)\nsage: M.has_coerce_map_from(L)\nTrue\n```\n\nAnd when the base ring coerces into the extension:\n\n```\nsage: K.<x> = FunctionField(QQ)\nsage: R.<I> = K[]\nsage: L.<I> = K.extension(I^2 + 1)\nsage: M.<x> = FunctionField(GaussianIntegers().fraction_field())\nsage: M.has_coerce_map_from(L) # not tested, base_morphism is not implemented\nTrue\n```\n\nKeywords: sd86.5\n\nBranch/Commit: e2ad9b3dd3078d4f9e4c2589b0355e99131803fc\n\nReviewer: Julian R\u00fcth\n\nAuthor: David Roe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23167\n\n",
    "closed_at": "2017-06-13T06:51:35Z",
    "created_at": "2017-06-07T21:06:51Z",
    "labels": [
        "component: commutative algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Coercions between Function Fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23167",
    "user": "https://github.com/saraedum"
}
```
The following are desired features.

Coercions between base fields should induce coercions on function fields:

```
sage: K.<x> = FunctionField(QQ)
sage: L.<x> = FunctionField(GaussianIntegers().fraction_field())
sage: L.has_coerce_map_from(K)
True
```

Also in towers:

```
sage: K.<x> = FunctionField(QQ)
sage: R.<y> = K[]
sage: L.<y> = K.extension(y^3 + 1)
sage: K.<x> = FunctionField(GaussianIntegers().fraction_field())
sage: R.<y> = K[]
sage: M.<y> = K.extension(y^3 + 1)
sage: M.has_coerce_map_from(L)
True
```

And when the base ring coerces into the extension:

```
sage: K.<x> = FunctionField(QQ)
sage: R.<I> = K[]
sage: L.<I> = K.extension(I^2 + 1)
sage: M.<x> = FunctionField(GaussianIntegers().fraction_field())
sage: M.has_coerce_map_from(L) # not tested, base_morphism is not implemented
True
```

Keywords: sd86.5

Branch/Commit: e2ad9b3dd3078d4f9e4c2589b0355e99131803fc

Reviewer: Julian Rüth

Author: David Roe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23167





---

archive/issue_comments_434808.json:
```json
{
    "body": "Changing branch from \"\" to \"u/roed/coercions_between_function_fields\"",
    "created_at": "2017-06-08T01:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434808",
    "user": "https://github.com/roed314"
}
```

Changing branch from "" to "u/roed/coercions_between_function_fields"



---

archive/issue_comments_434809.json:
```json
{
    "body": "Changing commit from \"\" to \"c227ee780c801638bb17ea666379179d2d425f66\"",
    "created_at": "2017-06-08T01:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434809",
    "user": "https://github.com/roed314"
}
```

Changing commit from "" to "c227ee780c801638bb17ea666379179d2d425f66"



---

archive/issue_comments_434810.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-08T01:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434810",
    "user": "https://github.com/roed314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_434811.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2017-06-08T01:32:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434811",
    "user": "https://github.com/roed314"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_434812.json:
```json
{
    "body": "Changing author from \"\" to \"David Roe\"",
    "created_at": "2017-06-08T07:04:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434812",
    "user": "https://github.com/saraedum"
}
```

Changing author from "" to "David Roe"



---

archive/issue_comments_434813.json:
```json
{
    "body": "Changing branch from \"u/roed/coercions_between_function_fields\" to \"u/saraedum/coercions_between_function_fields\"",
    "created_at": "2017-06-08T07:06:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434813",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/roed/coercions_between_function_fields" to "u/saraedum/coercions_between_function_fields"



---

archive/issue_comments_434814.json:
```json
{
    "body": "Changing commit from \"c227ee780c801638bb17ea666379179d2d425f66\" to \"369a518285a1491274b21a31cd453df16cbe05a6\"",
    "created_at": "2017-06-08T22:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434814",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "c227ee780c801638bb17ea666379179d2d425f66" to "369a518285a1491274b21a31cd453df16cbe05a6"



---

archive/issue_comments_434815.json:
```json
{
    "body": "<a id='comment:5'></a>Positive review. But one doctest fails because an `is_injective` is not implemented. I think that we should just disable the doctest because the failing doctest is not in the scope of this. (We discussed several ways of fixing this. The best would probably be to change the `DefaultConvertMap` to be a `DefaultCoerceMap` [does not exist yet] which is in the category of domain and codomain and would therefore by magically be injective.)\n\n---\nNew commits:",
    "created_at": "2017-06-08T22:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434815",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>Positive review. But one doctest fails because an `is_injective` is not implemented. I think that we should just disable the doctest because the failing doctest is not in the scope of this. (We discussed several ways of fixing this. The best would probably be to change the `DefaultConvertMap` to be a `DefaultCoerceMap` [does not exist yet] which is in the category of domain and codomain and would therefore by magically be injective.)

---
New commits:



---

archive/issue_comments_434816.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Julian R\u00fcth\"",
    "created_at": "2017-06-08T22:31:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434816",
    "user": "https://github.com/saraedum"
}
```

Changing reviewer from "" to "Julian Rüth"



---

archive/issue_comments_434817.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-08T22:31:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434817",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_434818.json:
```json
{
    "body": "Changing work_issues from \"\" to \"one doctest fails\"",
    "created_at": "2017-06-08T22:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434818",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "one doctest fails"



---

archive/issue_comments_434819.json:
```json
{
    "body": "Changing branch from \"u/saraedum/coercions_between_function_fields\" to \"u/roed/coercions_between_function_fields\"",
    "created_at": "2017-06-09T00:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434819",
    "user": "https://github.com/roed314"
}
```

Changing branch from "u/saraedum/coercions_between_function_fields" to "u/roed/coercions_between_function_fields"



---

archive/issue_comments_434820.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-09T01:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434820",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_434821.json:
```json
{
    "body": "<a id='comment:9'></a>I disabled the doctest.  See #23184 for a followup which should allow the doctest to be re-enabled.\n\n---\nNew commits:",
    "created_at": "2017-06-09T01:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434821",
    "user": "https://github.com/roed314"
}
```

<a id='comment:9'></a>I disabled the doctest.  See #23184 for a followup which should allow the doctest to be re-enabled.

---
New commits:



---

archive/issue_comments_434822.json:
```json
{
    "body": "Changing commit from \"369a518285a1491274b21a31cd453df16cbe05a6\" to \"b3331784fec7ec424b8af1142239d3be9d1315a3\"",
    "created_at": "2017-06-09T01:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434822",
    "user": "https://github.com/roed314"
}
```

Changing commit from "369a518285a1491274b21a31cd453df16cbe05a6" to "b3331784fec7ec424b8af1142239d3be9d1315a3"



---

archive/issue_comments_434823.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-09T01:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434823",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_434824.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-06-10T14:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434824",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_434825.json:
```json
{
    "body": "<a id='comment:11'></a>Documentation doesn't build",
    "created_at": "2017-06-10T14:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434825",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>Documentation doesn't build



---

archive/issue_comments_434826.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-06-10T14:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434826",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_434827.json:
```json
{
    "body": "<a id='comment:12'></a>Was #23152...",
    "created_at": "2017-06-10T14:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434827",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>Was #23152...



---

archive/issue_comments_434828.json:
```json
{
    "body": "<a id='comment:13'></a>\n```\nsage -t --long --warn-long 69.1 src/sage/categories/rings.py\n**********************************************************************\nFile \"src/sage/categories/rings.py\", line 97, in sage.categories.rings.Rings.MorphismMethods.is_injective\nFailed example:\n    f = K.hom([codomain(1)]); f\nException raised:\n    Traceback (most recent call last):\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.categories.rings.Rings.MorphismMethods.is_injective[8]>\", line 1, in <module>\n        f = K.hom([codomain(Integer(1))]); f\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/function_field/function_field.py\", line 1935, in hom\n        raise ValueError(\"You must specify a morphism on the base field\")\n    ValueError: You must specify a morphism on the base field\n**********************************************************************\nFile \"src/sage/categories/rings.py\", line 102, in sage.categories.rings.Rings.MorphismMethods.is_injective\nFailed example:\n    f.is_injective()\nExpected:\n    False\nGot:\n    True\n**********************************************************************\n```",
    "created_at": "2017-06-11T14:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434828",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>
```
sage -t --long --warn-long 69.1 src/sage/categories/rings.py
**********************************************************************
File "src/sage/categories/rings.py", line 97, in sage.categories.rings.Rings.MorphismMethods.is_injective
Failed example:
    f = K.hom([codomain(1)]); f
Exception raised:
    Traceback (most recent call last):
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.categories.rings.Rings.MorphismMethods.is_injective[8]>", line 1, in <module>
        f = K.hom([codomain(Integer(1))]); f
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/rings/function_field/function_field.py", line 1935, in hom
        raise ValueError("You must specify a morphism on the base field")
    ValueError: You must specify a morphism on the base field
**********************************************************************
File "src/sage/categories/rings.py", line 102, in sage.categories.rings.Rings.MorphismMethods.is_injective
Failed example:
    f.is_injective()
Expected:
    False
Got:
    True
**********************************************************************
```



---

archive/issue_comments_434829.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-06-11T14:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434829",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_434830.json:
```json
{
    "body": "Changing branch from \"u/roed/coercions_between_function_fields\" to \"u/saraedum/coercions_between_function_fields\"",
    "created_at": "2017-06-12T01:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434830",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/roed/coercions_between_function_fields" to "u/saraedum/coercions_between_function_fields"



---

archive/issue_comments_434831.json:
```json
{
    "body": "Changing commit from \"b3331784fec7ec424b8af1142239d3be9d1315a3\" to \"e2ad9b3dd3078d4f9e4c2589b0355e99131803fc\"",
    "created_at": "2017-06-12T01:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b3331784fec7ec424b8af1142239d3be9d1315a3" to "e2ad9b3dd3078d4f9e4c2589b0355e99131803fc"



---

archive/issue_comments_434832.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-12T01:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_434833.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-06-12T01:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434833",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_434834.json:
```json
{
    "body": "<a id='comment:16'></a>tests pass; david agreed to this fix.",
    "created_at": "2017-06-12T01:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434834",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:16'></a>tests pass; david agreed to this fix.



---

archive/issue_comments_434835.json:
```json
{
    "body": "Changing work_issues from \"one doctest fails\" to \"\"",
    "created_at": "2017-06-12T01:40:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434835",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "one doctest fails" to ""



---

archive/issue_events_059851.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-13T06:51:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23167#event-59851"
}
```



---

archive/issue_comments_434836.json:
```json
{
    "body": "Changing branch from \"u/saraedum/coercions_between_function_fields\" to \"e2ad9b3dd3078d4f9e4c2589b0355e99131803fc\"",
    "created_at": "2017-06-13T06:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434836",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/saraedum/coercions_between_function_fields" to "e2ad9b3dd3078d4f9e4c2589b0355e99131803fc"



---

archive/issue_comments_434837.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-13T06:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23167#issuecomment-434837",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
