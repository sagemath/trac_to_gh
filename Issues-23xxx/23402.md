# Issue 23402: faster hash of number field elements

archive/issues_023165.json:
```json
{
    "assignees": [],
    "body": "Hashing of nf element go through `self.polynomial()` which is damn slow!\n\nThe attached branch provides a quick hash version (that is more robust than the one for polynomial). A x10 speed up is seen on the following example (425 ms vs 40ms)\n\n```\nsage: K.<b> = NumberField(x^3 - 2)\nsage: l = [i * b + j * b^2 for i in range(100) for j in range(100)]\nsage: l.sort()\nsage: %time s = set(l[i+1] - l[i] for i in range(len(l)-1))\n```\n\nDepends on #23388\n\nCC:  @bhutz\n\nKeywords: **days88, IMA coding sprints**\n\nBranch/Commit: **[`8d8a2ea`](https://github.com/sagemath/sagetrac-mirror/commit/8d8a2ea708b6fbb8aaa22f5fec07d6bbc4a96d9a)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **number fields**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23402_\n\n",
    "closed_at": "2017-08-29T19:50:58Z",
    "created_at": "2017-07-11T13:58:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "faster hash of number field elements",
    "type": "issue",
    "updated_at": "2017-08-29T19:50:58Z",
    "url": "https://github.com/sagemath/sage/issues/23402",
    "user": "https://github.com/videlec"
}
```
Hashing of nf element go through `self.polynomial()` which is damn slow!

The attached branch provides a quick hash version (that is more robust than the one for polynomial). A x10 speed up is seen on the following example (425 ms vs 40ms)

```
sage: K.<b> = NumberField(x^3 - 2)
sage: l = [i * b + j * b^2 for i in range(100) for j in range(100)]
sage: l.sort()
sage: %time s = set(l[i+1] - l[i] for i in range(len(l)-1))
```

Depends on #23388

CC:  @bhutz

Keywords: **days88, IMA coding sprints**

Branch/Commit: **[`8d8a2ea`](https://github.com/sagemath/sagetrac-mirror/commit/8d8a2ea708b6fbb8aaa22f5fec07d6bbc4a96d9a)**

Reviewer: **Travis Scrimshaw**

Author: **Vincent Delecroix**

Component: **number fields**

_Issue created by migration from https://trac.sagemath.org/ticket/23402_





---

archive/issue_events_327248.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-11T13:58:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327248"
}
```



---

archive/issue_events_327249.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-11T13:58:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
    "label_color": "0000ff",
    "label_name": "c: number fields",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327249"
}
```



---

archive/issue_events_327250.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-11T13:58:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327250"
}
```



---

archive/issue_events_327251.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-11T13:58:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327251"
}
```



---

archive/issue_comments_351347.json:
```json
{
    "body": "Author: **Vincent Delecroix**",
    "created_at": "2017-07-13T17:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351347",
    "user": "https://github.com/videlec"
}
```

Author: **Vincent Delecroix**



---

archive/issue_comments_351348.json:
```json
{
    "body": "Commit: **[`2873d21`](https://github.com/sagemath/sagetrac-mirror/commit/2873d21f869dabd15a7df049dfa2262706b74893)**",
    "created_at": "2017-07-13T17:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351348",
    "user": "https://github.com/videlec"
}
```

Commit: **[`2873d21`](https://github.com/sagemath/sagetrac-mirror/commit/2873d21f869dabd15a7df049dfa2262706b74893)**



---

archive/issue_comments_351349.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0146c864d25d7f5f711d83a6c67a2e352a54ad15\"><code>0146c86</code></a></td><td><code>23388: faster floor for nf element</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2873d21f869dabd15a7df049dfa2262706b74893\"><code>2873d21</code></a></td><td><code>23402: faster hash for nf elements</code></td></tr></table>\n",
    "created_at": "2017-07-13T17:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351349",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0146c864d25d7f5f711d83a6c67a2e352a54ad15"><code>0146c86</code></a></td><td><code>23388: faster floor for nf element</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2873d21f869dabd15a7df049dfa2262706b74893"><code>2873d21</code></a></td><td><code>23402: faster hash for nf elements</code></td></tr></table>




---

archive/issue_comments_351350.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,10 @@\n Hashing of nf element go through `self.polynomial()` which is damn slow!\n+\n+On the following example\n+\n+```\n+sage: K.<b> = NumberField(x^3 - 2)\n+sage: l = [i * b + j * b^2 for i in range(100) for j in range(100)]\n+sage: %time s = set(l[i+1] - l[i] for i in range(len(l)-1))\n+```\n+I see a 10x speed up (425 ms vs 45ms)\n``````\n",
    "created_at": "2017-07-13T17:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351350",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,10 @@
 Hashing of nf element go through `self.polynomial()` which is damn slow!
+
+On the following example
+
+```
+sage: K.<b> = NumberField(x^3 - 2)
+sage: l = [i * b + j * b^2 for i in range(100) for j in range(100)]
+sage: %time s = set(l[i+1] - l[i] for i in range(len(l)-1))
+```
+I see a 10x speed up (425 ms vs 45ms)
``````




---

archive/issue_comments_351351.json:
```json
{
    "body": "Branch: **[u/vdelecroix/23402](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23402)**",
    "created_at": "2017-07-13T17:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351351",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/23402](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23402)**



---

archive/issue_events_327252.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-13T17:22:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327252"
}
```



---

archive/issue_comments_351352.json:
```json
{
    "body": "Dependencies: **#23388**",
    "created_at": "2017-07-13T17:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351352",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#23388**



---

archive/issue_comments_351353.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,6 +5,7 @@\n ```\n sage: K.<b> = NumberField(x^3 - 2)\n sage: l = [i * b + j * b^2 for i in range(100) for j in range(100)]\n+sage: l.sort()\n sage: %time s = set(l[i+1] - l[i] for i in range(len(l)-1))\n ```\n-I see a 10x speed up (425 ms vs 45ms)\n+I see a 10x speed up (425 ms vs 40ms)\n``````\n",
    "created_at": "2017-07-13T17:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351353",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,6 +5,7 @@
 ```
 sage: K.<b> = NumberField(x^3 - 2)
 sage: l = [i * b + j * b^2 for i in range(100) for j in range(100)]
+sage: l.sort()
 sage: %time s = set(l[i+1] - l[i] for i in range(len(l)-1))
 ```
-I see a 10x speed up (425 ms vs 45ms)
+I see a 10x speed up (425 ms vs 40ms)
``````




---

archive/issue_comments_351354.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhere did the two magic numbers come from? Also, why is one is hex and the other in decimal?",
    "created_at": "2017-07-14T00:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351354",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

Where did the two magic numbers come from? Also, why is one is hex and the other in decimal?



---

archive/issue_comments_351355.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThese \"magic numbers\" are just used to randomize the bits and can be obtained via\n\n```\nsage: phi = (1 + sqrt(5))/2\nsage: hex(int(2^32 / phi))\n'0x9e3779b9'\nsage: int(phi * 2^62)\n7461864723258187525\n```\nThe `7461864723258187525` was not chosen by me but comes from the hash value of rationals...\n\nI can actually be more coherent and use the same value in both places.",
    "created_at": "2017-07-14T13:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351355",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

These "magic numbers" are just used to randomize the bits and can be obtained via

```
sage: phi = (1 + sqrt(5))/2
sage: hex(int(2^32 / phi))
'0x9e3779b9'
sage: int(phi * 2^62)
7461864723258187525
```
The `7461864723258187525` was not chosen by me but comes from the hash value of rationals...

I can actually be more coherent and use the same value in both places.



---

archive/issue_comments_351356.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n... bad idea (got stupid collisions)",
    "created_at": "2017-07-14T13:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351356",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

... bad idea (got stupid collisions)



---

archive/issue_comments_351357.json:
```json
{
    "body": "Changed commit from **[`2873d21`](https://github.com/sagemath/sagetrac-mirror/commit/2873d21f869dabd15a7df049dfa2262706b74893)** to **[`862184f`](https://github.com/sagemath/sagetrac-mirror/commit/862184f6f277732287d2ffdf8aa06db8a94a7269)**",
    "created_at": "2017-07-14T13:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351357",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2873d21`](https://github.com/sagemath/sagetrac-mirror/commit/2873d21f869dabd15a7df049dfa2262706b74893)** to **[`862184f`](https://github.com/sagemath/sagetrac-mirror/commit/862184f6f277732287d2ffdf8aa06db8a94a7269)**



---

archive/issue_comments_351358.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/862184f6f277732287d2ffdf8aa06db8a94a7269\"><code>862184f</code></a></td><td><code>23402: faster hash for nf elements</code></td></tr></table>\n",
    "created_at": "2017-07-14T13:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351358",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/862184f6f277732287d2ffdf8aa06db8a94a7269"><code>862184f</code></a></td><td><code>23402: faster hash for nf elements</code></td></tr></table>




---

archive/issue_comments_351359.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nMore coherent version in `8124ba5` where both values are:\n- 63 bits\n- documented\n- in decimal notation",
    "created_at": "2017-07-14T13:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351359",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

More coherent version in `8124ba5` where both values are:
- 63 bits
- documented
- in decimal notation



---

archive/issue_comments_351360.json:
```json
{
    "body": "Changed commit from **[`862184f`](https://github.com/sagemath/sagetrac-mirror/commit/862184f6f277732287d2ffdf8aa06db8a94a7269)** to **[`8124ba5`](https://github.com/sagemath/sagetrac-mirror/commit/8124ba562387db04596077ba178d1fca154d0ab3)**",
    "created_at": "2017-07-14T13:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351360",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`862184f`](https://github.com/sagemath/sagetrac-mirror/commit/862184f6f277732287d2ffdf8aa06db8a94a7269)** to **[`8124ba5`](https://github.com/sagemath/sagetrac-mirror/commit/8124ba562387db04596077ba178d1fca154d0ab3)**



---

archive/issue_comments_351361.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8124ba562387db04596077ba178d1fca154d0ab3\"><code>8124ba5</code></a></td><td><code>23402: faster hash for nf elements</code></td></tr></table>\n",
    "created_at": "2017-07-14T13:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351361",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8124ba562387db04596077ba178d1fca154d0ab3"><code>8124ba5</code></a></td><td><code>23402: faster hash for nf elements</code></td></tr></table>




---

archive/issue_comments_351362.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOkay, thanks. LGTM.",
    "created_at": "2017-07-14T14:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351362",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Okay, thanks. LGTM.



---

archive/issue_comments_351363.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-07-14T14:35:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351363",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_327253.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-14T14:35:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327253"
}
```



---

archive/issue_events_327254.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-14T14:35:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327254"
}
```



---

archive/issue_comments_351364.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nChanging the hash is changing the order of display in sets... some doctests break.",
    "created_at": "2017-07-20T10:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351364",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Changing the hash is changing the order of display in sets... some doctests break.



---

archive/issue_events_327255.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-20T10:07:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327255"
}
```



---

archive/issue_events_327256.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-20T10:07:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327256"
}
```



---

archive/issue_comments_351365.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47780570267859ae89fc66341eea97e9ead7fd2d\"><code>4778057</code></a></td><td><code>23402: fix doctests23402: fix doctests</code></td></tr></table>\n",
    "created_at": "2017-07-20T13:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351365",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47780570267859ae89fc66341eea97e9ead7fd2d"><code>4778057</code></a></td><td><code>23402: fix doctests23402: fix doctests</code></td></tr></table>




---

archive/issue_comments_351366.json:
```json
{
    "body": "Changed commit from **[`8124ba5`](https://github.com/sagemath/sagetrac-mirror/commit/8124ba562387db04596077ba178d1fca154d0ab3)** to **[`4778057`](https://github.com/sagemath/sagetrac-mirror/commit/47780570267859ae89fc66341eea97e9ead7fd2d)**",
    "created_at": "2017-07-20T13:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351366",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8124ba5`](https://github.com/sagemath/sagetrac-mirror/commit/8124ba562387db04596077ba178d1fca154d0ab3)** to **[`4778057`](https://github.com/sagemath/sagetrac-mirror/commit/47780570267859ae89fc66341eea97e9ead7fd2d)**



---

archive/issue_comments_351367.json:
```json
{
    "body": "Changed commit from **[`4778057`](https://github.com/sagemath/sagetrac-mirror/commit/47780570267859ae89fc66341eea97e9ead7fd2d)** to **[`9de6f18`](https://github.com/sagemath/sagetrac-mirror/commit/9de6f1881aaa2160081585490d70b698bfd5cbdf)**",
    "created_at": "2017-07-20T13:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351367",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4778057`](https://github.com/sagemath/sagetrac-mirror/commit/47780570267859ae89fc66341eea97e9ead7fd2d)** to **[`9de6f18`](https://github.com/sagemath/sagetrac-mirror/commit/9de6f1881aaa2160081585490d70b698bfd5cbdf)**



---

archive/issue_comments_351368.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9de6f1881aaa2160081585490d70b698bfd5cbdf\"><code>9de6f18</code></a></td><td><code>23402: fix doctests</code></td></tr></table>\n",
    "created_at": "2017-07-20T13:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351368",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9de6f1881aaa2160081585490d70b698bfd5cbdf"><code>9de6f18</code></a></td><td><code>23402: fix doctests</code></td></tr></table>




---

archive/issue_comments_351369.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Hashing of nf element go through `self.polynomial()` which is damn slow!\n \n-On the following example\n+The attached branch provides a quick hash version (that is more robust than the one for polynomial). A x10 speed up is seen on the following example (425 ms vs 40ms)\n \n ```\n sage: K.<b> = NumberField(x^3 - 2)\n@@ -8,4 +8,3 @@\n sage: l.sort()\n sage: %time s = set(l[i+1] - l[i] for i in range(len(l)-1))\n ```\n-I see a 10x speed up (425 ms vs 40ms)\n``````\n",
    "created_at": "2017-07-20T14:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351369",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Hashing of nf element go through `self.polynomial()` which is damn slow!
 
-On the following example
+The attached branch provides a quick hash version (that is more robust than the one for polynomial). A x10 speed up is seen on the following example (425 ms vs 40ms)
 
 ```
 sage: K.<b> = NumberField(x^3 - 2)
@@ -8,4 +8,3 @@
 sage: l.sort()
 sage: %time s = set(l[i+1] - l[i] for i in range(len(l)-1))
 ```
-I see a 10x speed up (425 ms vs 40ms)
``````




---

archive/issue_comments_351370.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNow tests do pass.",
    "created_at": "2017-07-20T15:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351370",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">comment:14</div>

Now tests do pass.



---

archive/issue_events_327257.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-20T15:21:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327257"
}
```



---

archive/issue_events_327258.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-07-20T15:21:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327258"
}
```



---

archive/issue_events_327259.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-20T22:20:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327259"
}
```



---

archive/issue_events_327260.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-20T22:20:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327260"
}
```



---

archive/issue_comments_351371.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nFails on 32-bit:\n\n```\nsage -t --long src/sage/rings/number_field/number_field_element.pyx\n**********************************************************************\nFile \"src/sage/rings/number_field/number_field_element.pyx\", line 2888, in sage.rings.number_field.number_field_element.NumberFieldElement.__hash__\nFailed example:\n    len(set(map(hash, elts))) == len(elts)\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of   9 in sage.rings.number_field.number_field_element.NumberFieldElement.__hash__\n    [1084 tests, 1 failure, 827.34 s]\n```",
    "created_at": "2017-07-26T22:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351371",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

Fails on 32-bit:

```
sage -t --long src/sage/rings/number_field/number_field_element.pyx
**********************************************************************
File "src/sage/rings/number_field/number_field_element.pyx", line 2888, in sage.rings.number_field.number_field_element.NumberFieldElement.__hash__
Failed example:
    len(set(map(hash, elts))) == len(elts)
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of   9 in sage.rings.number_field.number_field_element.NumberFieldElement.__hash__
    [1084 tests, 1 failure, 827.34 s]
```



---

archive/issue_comments_351372.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIndeed... 3 collisions in 32 bits! Probabilistically, we should not see any collision before a sample of size 2<sup>16</sup> = sqrt(2<sup>32</sup>).",
    "created_at": "2017-07-27T12:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351372",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">comment:17</div>

Indeed... 3 collisions in 32 bits! Probabilistically, we should not see any collision before a sample of size 2<sup>16</sup> = sqrt(2<sup>32</sup>).



---

archive/issue_events_327261.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2017-07-27T13:16:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327261"
}
```



---

archive/issue_events_327262.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2017-07-27T13:16:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327262"
}
```



---

archive/issue_comments_351373.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab28ce8a7d7dd60a1b426b16462f53645cee5f4f\"><code>ab28ce8</code></a></td><td><code>23402: better magic numbers avoiding small collisions</code></td></tr></table>\n",
    "created_at": "2017-07-27T13:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351373",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab28ce8a7d7dd60a1b426b16462f53645cee5f4f"><code>ab28ce8</code></a></td><td><code>23402: better magic numbers avoiding small collisions</code></td></tr></table>




---

archive/issue_comments_351374.json:
```json
{
    "body": "Changed commit from **[`9de6f18`](https://github.com/sagemath/sagetrac-mirror/commit/9de6f1881aaa2160081585490d70b698bfd5cbdf)** to **[`ab28ce8`](https://github.com/sagemath/sagetrac-mirror/commit/ab28ce8a7d7dd60a1b426b16462f53645cee5f4f)**",
    "created_at": "2017-07-27T13:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351374",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9de6f18`](https://github.com/sagemath/sagetrac-mirror/commit/9de6f1881aaa2160081585490d70b698bfd5cbdf)** to **[`ab28ce8`](https://github.com/sagemath/sagetrac-mirror/commit/ab28ce8a7d7dd60a1b426b16462f53645cee5f4f)**



---

archive/issue_comments_351375.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nneeds review (no collision on the 18 first bits which is more than enough for 32 bits)",
    "created_at": "2017-07-27T13:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351375",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

needs review (no collision on the 18 first bits which is more than enough for 32 bits)



---

archive/issue_comments_351376.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nDoctest order failures due to the new hash. See patchbot report.",
    "created_at": "2017-07-27T15:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351376",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Doctest order failures due to the new hash. See patchbot report.



---

archive/issue_events_327263.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-27T15:44:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327263"
}
```



---

archive/issue_events_327264.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-07-27T15:44:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327264"
}
```



---

archive/issue_comments_351377.json:
```json
{
    "body": "Changed commit from **[`ab28ce8`](https://github.com/sagemath/sagetrac-mirror/commit/ab28ce8a7d7dd60a1b426b16462f53645cee5f4f)** to **[`9d0329f`](https://github.com/sagemath/sagetrac-mirror/commit/9d0329f8d1440e53a3195cd24e9fdeb518ec9775)**",
    "created_at": "2017-08-23T23:47:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351377",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ab28ce8`](https://github.com/sagemath/sagetrac-mirror/commit/ab28ce8a7d7dd60a1b426b16462f53645cee5f4f)** to **[`9d0329f`](https://github.com/sagemath/sagetrac-mirror/commit/9d0329f8d1440e53a3195cd24e9fdeb518ec9775)**



---

archive/issue_comments_351378.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0361ee1bbf8298f16d6e4b55edc7f4f3383f72bc\"><code>0361ee1</code></a></td><td><code>23402: faster hash for nf elements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f26871b5313a58b5854af1fb5d62d58a839488a\"><code>4f26871</code></a></td><td><code>23402: fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd1406b5781bb8ba7d9aab86503aee28829d0067\"><code>dd1406b</code></a></td><td><code>23402: better magic numbers avoiding small collisions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d0329f8d1440e53a3195cd24e9fdeb518ec9775\"><code>9d0329f</code></a></td><td><code>23402: more doctest fixes</code></td></tr></table>\n",
    "created_at": "2017-08-23T23:47:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351378",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0361ee1bbf8298f16d6e4b55edc7f4f3383f72bc"><code>0361ee1</code></a></td><td><code>23402: faster hash for nf elements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f26871b5313a58b5854af1fb5d62d58a839488a"><code>4f26871</code></a></td><td><code>23402: fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd1406b5781bb8ba7d9aab86503aee28829d0067"><code>dd1406b</code></a></td><td><code>23402: better magic numbers avoiding small collisions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d0329f8d1440e53a3195cd24e9fdeb518ec9775"><code>9d0329f</code></a></td><td><code>23402: more doctest fixes</code></td></tr></table>




---

archive/issue_events_327265.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-23T23:48:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327265"
}
```



---

archive/issue_events_327266.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-23T23:48:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327266"
}
```



---

archive/issue_comments_351379.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n(rebased with a new commit to fix the doctests)",
    "created_at": "2017-08-23T23:48:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351379",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">comment:22</div>

(rebased with a new commit to fix the doctests)



---

archive/issue_comments_351380.json:
```json
{
    "body": "Changed commit from **[`9d0329f`](https://github.com/sagemath/sagetrac-mirror/commit/9d0329f8d1440e53a3195cd24e9fdeb518ec9775)** to **[`8d8a2ea`](https://github.com/sagemath/sagetrac-mirror/commit/8d8a2ea708b6fbb8aaa22f5fec07d6bbc4a96d9a)**",
    "created_at": "2017-08-24T02:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351380",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9d0329f`](https://github.com/sagemath/sagetrac-mirror/commit/9d0329f8d1440e53a3195cd24e9fdeb518ec9775)** to **[`8d8a2ea`](https://github.com/sagemath/sagetrac-mirror/commit/8d8a2ea708b6fbb8aaa22f5fec07d6bbc4a96d9a)**



---

archive/issue_comments_351381.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d8a2ea708b6fbb8aaa22f5fec07d6bbc4a96d9a\"><code>8d8a2ea</code></a></td><td><code>23402: one more doctest fix</code></td></tr></table>\n",
    "created_at": "2017-08-24T02:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351381",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d8a2ea708b6fbb8aaa22f5fec07d6bbc4a96d9a"><code>8d8a2ea</code></a></td><td><code>23402: one more doctest fix</code></td></tr></table>




---

archive/issue_comments_351382.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThe second doctest change in `8d8a2ea708` looks fishy. Actually, the version after my changes looks better!!",
    "created_at": "2017-08-24T02:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351382",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

The second doctest change in `8d8a2ea708` looks fishy. Actually, the version after my changes looks better!!



---

archive/issue_comments_351383.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n@bhutz: Ben can you have a look at the doctest change in `invariants_of_degree`? The first change just a reordering. But the second one reproduced below looks like there was something very wrong before\n\n```diff\n             sage: S3 = MatrixGroup(SymmetricGroup(3))\n             sage: chi = S3.character(S3.character_table()[0])\n             sage: S3.invariants_of_degree(5, chi=chi)\n-            [x*y + (2*izeta3^3 + 3*izeta3^2 + 8*izeta3 + 3)*x*z + (-2*izeta3^3 -\n-            3*izeta3^2 - 8*izeta3 - 4)*y*z,\n-             x^2 + (-2*izeta3^3 - 3*izeta3^2 - 8*izeta3 - 4)*y^2 + (2*izeta3^3 +\n-            3*izeta3^2 + 8*izeta3 + 3)*z^2]\n+            [x0^4*x1 - x0*x1^4 - x0^4*x2 + x1^4*x2 + x0*x2^4 - x1*x2^4,\n+             x0^3*x1^2 - x0^2*x1^3 - x0^3*x2^2 + x1^3*x2^2 + x0^2*x2^3 - x1^2*x2^3]\n```",
    "created_at": "2017-08-24T02:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351383",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

@bhutz: Ben can you have a look at the doctest change in `invariants_of_degree`? The first change just a reordering. But the second one reproduced below looks like there was something very wrong before

```diff
             sage: S3 = MatrixGroup(SymmetricGroup(3))
             sage: chi = S3.character(S3.character_table()[0])
             sage: S3.invariants_of_degree(5, chi=chi)
-            [x*y + (2*izeta3^3 + 3*izeta3^2 + 8*izeta3 + 3)*x*z + (-2*izeta3^3 -
-            3*izeta3^2 - 8*izeta3 - 4)*y*z,
-             x^2 + (-2*izeta3^3 - 3*izeta3^2 - 8*izeta3 - 4)*y^2 + (2*izeta3^3 +
-            3*izeta3^2 + 8*izeta3 + 3)*z^2]
+            [x0^4*x1 - x0*x1^4 - x0^4*x2 + x1^4*x2 + x0*x2^4 - x1*x2^4,
+             x0^3*x1^2 - x0^2*x1^3 - x0^3*x2^2 + x1^3*x2^2 + x0^2*x2^3 - x1^2*x2^3]
```



---

archive/issue_comments_351384.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nActually, it looks like you messed up the doc test in commit 4f26871 and are now changing it back in commit 8d8a2ea.\n\nSo I see nothing wrong here with the invariants code.",
    "created_at": "2017-08-24T11:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351384",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:26" align="right">comment:26</div>

Actually, it looks like you messed up the doc test in commit 4f26871 and are now changing it back in commit 8d8a2ea.

So I see nothing wrong here with the invariants code.



---

archive/issue_comments_351385.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@bhutz](#comment:26):\n> Actually, it looks like you messed up the doc test in commit 4f26871 and are now changing it back in commit 8d8a2ea.\n> \n> So I see nothing wrong here with the invariants code.\n\nMy bad. Thanks for having a look!",
    "created_at": "2017-08-24T12:57:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351385",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@bhutz](#comment:26):
> Actually, it looks like you messed up the doc test in commit 4f26871 and are now changing it back in commit 8d8a2ea.
> 
> So I see nothing wrong here with the invariants code.

My bad. Thanks for having a look!



---

archive/issue_events_327267.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-24T14:14:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327267"
}
```



---

archive/issue_events_327268.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-24T14:14:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327268"
}
```



---

archive/issue_comments_351386.json:
```json
{
    "body": "Changed keywords from none to **days88, IMA coding sprints**",
    "created_at": "2017-08-24T14:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351386",
    "user": "https://github.com/tscrim"
}
```

Changed keywords from none to **days88, IMA coding sprints**



---

archive/issue_events_327269.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-24T14:14:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327269"
}
```



---

archive/issue_events_327270.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-24T14:14:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327270"
}
```



---

archive/issue_comments_351387.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThanks.\n\nLGTM.",
    "created_at": "2017-08-24T14:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351387",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">comment:28</div>

Thanks.

LGTM.



---

archive/issue_comments_351388.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/23402](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23402)** to **[`8d8a2ea`](https://github.com/sagemath/sagetrac-mirror/commit/8d8a2ea708b6fbb8aaa22f5fec07d6bbc4a96d9a)**",
    "created_at": "2017-08-29T19:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23402#issuecomment-351388",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/23402](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23402)** to **[`8d8a2ea`](https://github.com/sagemath/sagetrac-mirror/commit/8d8a2ea708b6fbb8aaa22f5fec07d6bbc4a96d9a)**



---

archive/issue_events_327271.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-29T19:50:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327271"
}
```



---

archive/issue_events_327272.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "97ac7822d9b099fd94439d55e5bf1e19ad9085eb",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-08-29T19:50:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23402",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23402#event-327272"
}
```
