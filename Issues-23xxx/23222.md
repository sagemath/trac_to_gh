# Issue 23222: Add test to EllipticCurve.isogeny() to check for validity of kernel polynomials

archive/issues_022985.json:
```json
{
    "assignees": [],
    "body": "In this example\n\n```\nsage: K = GF(47^2)\nsage: E = EllipticCurve([0, K.gen()])\nsage: f = E.division_polynomial(7).factor()[4][0]\nsage: E.is_supersingular()\nTrue\nsage: E.isogeny(f).codomain().is_supersingular()\nFalse\nsage: phi = E.isogeny(E.division_polynomial(7).factor()[8][0])\nsage: phi(E.random_point())\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: Coordinates [16*z2 + 30, 3*z2 + 22, 1] do not define a point on Elliptic Curve defined by y^2 = x^3 + (3*z2+36)*x over Finite Field in z2 of size 47^2\n```\n\nThe factors of the seventh division polynomial are not detected as bad kernel polynomials, and a wrong isogeny is computed instead.\n\nTests to detect these cases are in `.isogenies_prime_degree_general()`. They should be moved to an independent function and called before applying V\u00e9lu's formulas.\n\nCC:  @JohnCremona\n\nKeywords: **isogenies, v\u00e9lu's formulas**\n\nBranch: **[`28e369f`](https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493)**\n\nReviewer: **Luca De Feo, Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **John Cremona**\n\nComponent: **elliptic curves**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23222_\n\n",
    "closed_at": "2019-01-22T12:40:34Z",
    "created_at": "2017-06-12T11:55:31Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add test to EllipticCurve.isogeny() to check for validity of kernel polynomials",
    "type": "issue",
    "updated_at": "2019-01-24T11:00:54Z",
    "url": "https://github.com/sagemath/sage/issues/23222",
    "user": "https://github.com/defeo"
}
```
In this example

```
sage: K = GF(47^2)
sage: E = EllipticCurve([0, K.gen()])
sage: f = E.division_polynomial(7).factor()[4][0]
sage: E.is_supersingular()
True
sage: E.isogeny(f).codomain().is_supersingular()
False
sage: phi = E.isogeny(E.division_polynomial(7).factor()[8][0])
sage: phi(E.random_point())
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: Coordinates [16*z2 + 30, 3*z2 + 22, 1] do not define a point on Elliptic Curve defined by y^2 = x^3 + (3*z2+36)*x over Finite Field in z2 of size 47^2
```

The factors of the seventh division polynomial are not detected as bad kernel polynomials, and a wrong isogeny is computed instead.

Tests to detect these cases are in `.isogenies_prime_degree_general()`. They should be moved to an independent function and called before applying Vélu's formulas.

CC:  @JohnCremona

Keywords: **isogenies, vélu's formulas**

Branch: **[`28e369f`](https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493)**

Reviewer: **Luca De Feo, Frédéric Chapoton**

Author: **John Cremona**

Component: **elliptic curves**

_Issue created by migration from https://trac.sagemath.org/ticket/23222_





---

archive/issue_events_323608.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-06-12T11:55:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323608"
}
```



---

archive/issue_events_323609.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-06-12T11:55:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "c: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323609"
}
```



---

archive/issue_events_323610.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-06-12T11:55:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323610"
}
```



---

archive/issue_events_323611.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-06-12T11:55:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323611"
}
```



---

archive/issue_comments_348627.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nRemember that the Trace of Frobenius is an integer, not an element of the field, so seeing 94 which is 0 mod 47 is ok.\nSecondly, you have omitted the isogeny whose kernel is the product of the 3 linear factors of the 7-division polynomial.\nThirdly, if you want to see the 7-isogenous curves it is better to do\n\n```\nE.isogenies_prime_degree(7)\n```\nsince it is non-trivial to combine the factors of the division polynomial correctly.  In this case there are only two 7-isogenies.  Not that E.isogeny(f) does *not* actually check that f is a valid kernel polynomial even when check=True is give (the default).  It should!  When it was written we did not have code to do that but now we do.  It is slightly buried in the function isogenies_prime_degree_general().",
    "created_at": "2017-06-12T19:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348627",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:1" align="right">comment:1</div>

Remember that the Trace of Frobenius is an integer, not an element of the field, so seeing 94 which is 0 mod 47 is ok.
Secondly, you have omitted the isogeny whose kernel is the product of the 3 linear factors of the 7-division polynomial.
Thirdly, if you want to see the 7-isogenous curves it is better to do

```
E.isogenies_prime_degree(7)
```
since it is non-trivial to combine the factors of the division polynomial correctly.  In this case there are only two 7-isogenies.  Not that E.isogeny(f) does *not* actually check that f is a valid kernel polynomial even when check=True is give (the default).  It should!  When it was written we did not have code to do that but now we do.  It is slightly buried in the function isogenies_prime_degree_general().



---

archive/issue_comments_348628.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@JohnCremona](#comment:1):\n> Remember that the Trace of Frobenius is an integer, not an element of the field, so seeing 94 which is 0 mod 47 is ok.\n\nI agree with that, but doesn't Sato-Tate say that two curves are isogenous over a finite field iff they have the **same** trace? As I said, j=0 and j=36 are isogenous over GF(47<sup>2</sup>), but the exact curves in the example are not. And, indeed:\n\n```\nsage: phi = E.isogeny(E.division_polynomial(7).factor()[8][0])\nsage: phi(E.random_point())\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: Coordinates [16*z2 + 30, 3*z2 + 22, 1] do not define a point on Elliptic Curve defined by y^2 = x^3 + (3*z2+36)*x over Finite Field in z2 of size 47^2\n```\n\n> Secondly, you have omitted the isogeny whose kernel is the product of the 3 linear factors of the 7-division polynomial.\n\nYes. I just wanted to highlight the bug. One of the buggy factors would have been enough.\n\n> Thirdly, if you want to see the 7-isogenous curves it is better to do\n> \n> ```\n> E.isogenies_prime_degree(7)\n> ```\n> since it is non-trivial to combine the factors of the division polynomial correctly.\n\nAbsolutely. However, I found the bug while doing a more general search.\n\n> Not that E.isogeny(f) does *not* actually check that f is a valid kernel polynomial even when check=True is give (the default).  It should!  When it was written we did not have code to do that but now we do.  It is slightly buried in the function isogenies_prime_degree_general().\n\nWell, that's not completely correct:\n\n```\nsage: E.isogeny(E.base_field().polynomial_ring().random_element(3))\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: The polynomial does not define a finite subgroup of the elliptic curve.\n```\n\nSo there are some checks, but they are buggy, at least for j=0,1728, I suspect.\n\nI do not have time to dig this further right now. Hopefully in a couple of weeks I can come up with a fix.",
    "created_at": "2017-06-12T21:15:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348628",
    "user": "https://github.com/defeo"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@JohnCremona](#comment:1):
> Remember that the Trace of Frobenius is an integer, not an element of the field, so seeing 94 which is 0 mod 47 is ok.

I agree with that, but doesn't Sato-Tate say that two curves are isogenous over a finite field iff they have the **same** trace? As I said, j=0 and j=36 are isogenous over GF(47<sup>2</sup>), but the exact curves in the example are not. And, indeed:

```
sage: phi = E.isogeny(E.division_polynomial(7).factor()[8][0])
sage: phi(E.random_point())
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: Coordinates [16*z2 + 30, 3*z2 + 22, 1] do not define a point on Elliptic Curve defined by y^2 = x^3 + (3*z2+36)*x over Finite Field in z2 of size 47^2
```

> Secondly, you have omitted the isogeny whose kernel is the product of the 3 linear factors of the 7-division polynomial.

Yes. I just wanted to highlight the bug. One of the buggy factors would have been enough.

> Thirdly, if you want to see the 7-isogenous curves it is better to do
> 
> ```
> E.isogenies_prime_degree(7)
> ```
> since it is non-trivial to combine the factors of the division polynomial correctly.

Absolutely. However, I found the bug while doing a more general search.

> Not that E.isogeny(f) does *not* actually check that f is a valid kernel polynomial even when check=True is give (the default).  It should!  When it was written we did not have code to do that but now we do.  It is slightly buried in the function isogenies_prime_degree_general().

Well, that's not completely correct:

```
sage: E.isogeny(E.base_field().polynomial_ring().random_element(3))
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: The polynomial does not define a finite subgroup of the elliptic curve.
```

So there are some checks, but they are buggy, at least for j=0,1728, I suspect.

I do not have time to dig this further right now. Hopefully in a couple of weeks I can come up with a fix.



---

archive/issue_comments_348629.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe j-invariant does not determine the trace since it only determines the curve up to twist; in your case there are more than 2 twists as well.\n\nYes, some checking is done for validity of kernel polys, but that is misleading since bad input passes those tests as they are not complete.\n\nWe'll come back to that.",
    "created_at": "2017-06-13T07:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348629",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:3" align="right">comment:3</div>

The j-invariant does not determine the trace since it only determines the curve up to twist; in your case there are more than 2 twists as well.

Yes, some checking is done for validity of kernel polys, but that is misleading since bad input passes those tests as they are not complete.

We'll come back to that.



---

archive/issue_comments_348630.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nCan we close this as invalid / won't fix?  I just re-read the comments and think that I explained why none of the output which had been thought to be suspect was incorrect.",
    "created_at": "2018-04-13T08:55:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348630",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:4" align="right">comment:4</div>

Can we close this as invalid / won't fix?  I just re-read the comments and think that I explained why none of the output which had been thought to be suspect was incorrect.



---

archive/issue_comments_348631.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI still don't get it. Admittedly, `E.isogeny(f)` does not test that `f` is a valid kernel polynomial. But, why is `f` not a valid kernel polynomial in this example:\n\n```\nsage: f = E.division_polynomial(7).factor()[4][0]\nsage: E.is_supersingular()\nTrue\nsage: E.isogeny(f).codomain().is_supersingular()\nFalse\n```\n\nAlso, the `TypeError` in [comment 2](#comment:2) is not nice and would deserve fixing.",
    "created_at": "2018-04-13T13:12:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348631",
    "user": "https://github.com/defeo"
}
```

<div id="comment:5" align="right">comment:5</div>

I still don't get it. Admittedly, `E.isogeny(f)` does not test that `f` is a valid kernel polynomial. But, why is `f` not a valid kernel polynomial in this example:

```
sage: f = E.division_polynomial(7).factor()[4][0]
sage: E.is_supersingular()
True
sage: E.isogeny(f).codomain().is_supersingular()
False
```

Also, the `TypeError` in [comment 2](#comment:2) is not nice and would deserve fixing.



---

archive/issue_comments_348632.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe kernel poly of a 7-isogeny is a degree 3 factor of the 7-division poly but not every degree 3 factor is a kernel poly!  In this case the 3 roots of your degree 3 factor, which all lie in GF(47^6), are the x-coordinates of points in 3 different subgroups of order 7.\n\nIn the function isogenies_prime_degree_general() in sage.schemes.elliptic_curves.isogeny_small_degree, this is implemented properly: factor the l-division poly (here l is an odd prime); keep only factors of degree dividing (l-1)/2;  for each such factor work out whether or not it is an irreducible factor of a kernel poly.\n\nIt would be possible to extract from the code of that function a test for whether a polynomial of degree (l-1)/2 actually is a kernel poly.  Feel free to make a ticket for that!  The relevent theory is in Kimi Tsukazaki's thesis (cited in that file).",
    "created_at": "2018-04-13T13:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348632",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:6" align="right">comment:6</div>

The kernel poly of a 7-isogeny is a degree 3 factor of the 7-division poly but not every degree 3 factor is a kernel poly!  In this case the 3 roots of your degree 3 factor, which all lie in GF(47^6), are the x-coordinates of points in 3 different subgroups of order 7.

In the function isogenies_prime_degree_general() in sage.schemes.elliptic_curves.isogeny_small_degree, this is implemented properly: factor the l-division poly (here l is an odd prime); keep only factors of degree dividing (l-1)/2;  for each such factor work out whether or not it is an irreducible factor of a kernel poly.

It would be possible to extract from the code of that function a test for whether a polynomial of degree (l-1)/2 actually is a kernel poly.  Feel free to make a ticket for that!  The relevent theory is in Kimi Tsukazaki's thesis (cited in that file).



---

archive/issue_comments_348633.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOh, right!\n\nCan't we just edit this ticket so that it points to the problem, instead of closing it and opening a new one?",
    "created_at": "2018-04-13T14:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348633",
    "user": "https://github.com/defeo"
}
```

<div id="comment:7" align="right">comment:7</div>

Oh, right!

Can't we just edit this ticket so that it points to the problem, instead of closing it and opening a new one?



---

archive/issue_comments_348634.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSure, go ahead.  Once we have a stand-alone function test_kernel_poly(E,f,ell) it is clear where to put a call to it: in place of lines 2450-2454 where now it only tests if the polynomial divides the division poly.  I should have done this ages ago.",
    "created_at": "2018-04-13T14:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348634",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:8" align="right">comment:8</div>

Sure, go ahead.  Once we have a stand-alone function test_kernel_poly(E,f,ell) it is clear where to put a call to it: in place of lines 2450-2454 where now it only tests if the polynomial divides the division poly.  I should have done this ages ago.



---

archive/issue_comments_348635.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,16 +1,21 @@\n-I'm not sure about what's happening here. While playing around with supersingular curves:\n+In this example\n \n ```\n sage: K = GF(47^2)\n-sage: E = EllipticCurve([0,K.gen()])\n-sage: E.trace_of_frobenius()\n--47\n-sage: [E.isogeny(f).codomain().j_invariant() for f,_ in E.division_polynomial(7).factor()[3:]]\n-[0, 24*z2 + 1, 24*z2 + 1, 24*z2 + 1, 36, 36, 36]\n-sage: [E.isogeny(f).codomain().trace_of_frobenius() for f,_ in E.division_polynomial(7).factor()[3:]]\n-[-47, -49, -49, -49, 94, 94, 94]\n+sage: E = EllipticCurve([0, K.gen()])\n+sage: f = E.division_polynomial(7).factor()[4][0]\n+sage: E.is_supersingular()\n+True\n+sage: E.isogeny(f).codomain().is_supersingular()\n+False\n+sage: phi = E.isogeny(E.division_polynomial(7).factor()[8][0])\n+sage: phi(E.random_point())\n+---------------------------------------------------------------------------\n+TypeError                                 Traceback (most recent call last)\n+...\n+TypeError: Coordinates [16*z2 + 30, 3*z2 + 22, 1] do not define a point on Elliptic Curve defined by y^2 = x^3 + (3*z2+36)*x over Finite Field in z2 of size 47^2\n ```\n \n-The first curve is ok. The occurrences of trace 94 are weird, but j=0 and j=36 (1728) are 7-isogenous nevertheless. But trace -49?! That's not even supersingular!\n+The factors of the seventh division polynomial are not detected as bad kernel polynomials, and a wrong isogeny is computed instead.\n \n-What's even more weird is that Magma gives the same results, so I'm starting to doubt of my own sanity.\n+Tests to detect these cases are in `.isogenies_prime_degree_general()`. They should be moved to an independent function and called before applying V\u00e9lu's formulas.\n``````\n",
    "created_at": "2018-04-13T14:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348635",
    "user": "https://github.com/defeo"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,16 +1,21 @@
-I'm not sure about what's happening here. While playing around with supersingular curves:
+In this example
 
 ```
 sage: K = GF(47^2)
-sage: E = EllipticCurve([0,K.gen()])
-sage: E.trace_of_frobenius()
--47
-sage: [E.isogeny(f).codomain().j_invariant() for f,_ in E.division_polynomial(7).factor()[3:]]
-[0, 24*z2 + 1, 24*z2 + 1, 24*z2 + 1, 36, 36, 36]
-sage: [E.isogeny(f).codomain().trace_of_frobenius() for f,_ in E.division_polynomial(7).factor()[3:]]
-[-47, -49, -49, -49, 94, 94, 94]
+sage: E = EllipticCurve([0, K.gen()])
+sage: f = E.division_polynomial(7).factor()[4][0]
+sage: E.is_supersingular()
+True
+sage: E.isogeny(f).codomain().is_supersingular()
+False
+sage: phi = E.isogeny(E.division_polynomial(7).factor()[8][0])
+sage: phi(E.random_point())
+---------------------------------------------------------------------------
+TypeError                                 Traceback (most recent call last)
+...
+TypeError: Coordinates [16*z2 + 30, 3*z2 + 22, 1] do not define a point on Elliptic Curve defined by y^2 = x^3 + (3*z2+36)*x over Finite Field in z2 of size 47^2
 ```
 
-The first curve is ok. The occurrences of trace 94 are weird, but j=0 and j=36 (1728) are 7-isogenous nevertheless. But trace -49?! That's not even supersingular!
+The factors of the seventh division polynomial are not detected as bad kernel polynomials, and a wrong isogeny is computed instead.
 
-What's even more weird is that Magma gives the same results, so I'm starting to doubt of my own sanity.
+Tests to detect these cases are in `.isogenies_prime_degree_general()`. They should be moved to an independent function and called before applying Vélu's formulas.
``````




---

archive/issue_events_323612.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2018-04-13T14:52:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "title_is": "Add test to EllipticCurve.isogeny() to check for validity of kernel polynomials",
    "title_was": "Incorrect output from V\u00e9lu's formulas on j=0?",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323612"
}
```



---

archive/issue_events_323613.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2018-04-13T14:52:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323613"
}
```



---

archive/issue_events_323614.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2018-04-13T14:52:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323614"
}
```



---

archive/issue_comments_348636.json:
```json
{
    "body": "Changed keywords from **isogenies, supersingular** to **isogenies, v\u00e9lu's formulas**",
    "created_at": "2018-04-13T14:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348636",
    "user": "https://github.com/defeo"
}
```

Changed keywords from **isogenies, supersingular** to **isogenies, vélu's formulas**



---

archive/issue_events_323615.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2018-04-16T11:22:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323615"
}
```



---

archive/issue_events_323616.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2018-04-16T11:22:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323616"
}
```



---

archive/issue_comments_348637.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nWorking on it...",
    "created_at": "2018-04-16T11:22:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348637",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:10" align="right">comment:10</div>

Working on it...



---

archive/issue_comments_348638.json:
```json
{
    "body": "Branch: **[u/cremona/23222](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/23222)**",
    "created_at": "2018-04-16T14:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348638",
    "user": "https://github.com/JohnCremona"
}
```

Branch: **[u/cremona/23222](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/23222)**



---

archive/issue_comments_348639.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c120af3a0cb8323954bd5994984bc433adadfe8\"><code>0c120af</code></a></td><td><code>#23222: check validity of isogeny kernel polynomials</code></td></tr></table>\n",
    "created_at": "2018-04-16T14:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348639",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:11"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c120af3a0cb8323954bd5994984bc433adadfe8"><code>0c120af</code></a></td><td><code>#23222: check validity of isogeny kernel polynomials</code></td></tr></table>




---

archive/issue_comments_348640.json:
```json
{
    "body": "Author: **John Cremona**",
    "created_at": "2018-04-16T14:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348640",
    "user": "https://github.com/JohnCremona"
}
```

Author: **John Cremona**



---

archive/issue_events_323617.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2018-04-16T14:39:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323617"
}
```



---

archive/issue_events_323618.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2018-04-16T14:39:08Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323618"
}
```



---

archive/issue_events_323619.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2018-04-16T14:39:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323619"
}
```



---

archive/issue_comments_348641.json:
```json
{
    "body": "Commit: **[`0c120af`](https://github.com/sagemath/sagetrac-mirror/commit/0c120af3a0cb8323954bd5994984bc433adadfe8)**",
    "created_at": "2018-04-16T14:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348641",
    "user": "https://github.com/JohnCremona"
}
```

Commit: **[`0c120af`](https://github.com/sagemath/sagetrac-mirror/commit/0c120af3a0cb8323954bd5994984bc433adadfe8)**



---

archive/issue_comments_348642.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7518f7da457d7dc25a32a0ba9e92ab58a189b45\"><code>f7518f7</code></a></td><td><code>#23222: fix docstring formatting error</code></td></tr></table>\n",
    "created_at": "2018-04-16T15:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348642",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7518f7da457d7dc25a32a0ba9e92ab58a189b45"><code>f7518f7</code></a></td><td><code>#23222: fix docstring formatting error</code></td></tr></table>




---

archive/issue_comments_348643.json:
```json
{
    "body": "Changed commit from **[`0c120af`](https://github.com/sagemath/sagetrac-mirror/commit/0c120af3a0cb8323954bd5994984bc433adadfe8)** to **[`f7518f7`](https://github.com/sagemath/sagetrac-mirror/commit/f7518f7da457d7dc25a32a0ba9e92ab58a189b45)**",
    "created_at": "2018-04-16T15:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348643",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c120af`](https://github.com/sagemath/sagetrac-mirror/commit/0c120af3a0cb8323954bd5994984bc433adadfe8)** to **[`f7518f7`](https://github.com/sagemath/sagetrac-mirror/commit/f7518f7da457d7dc25a32a0ba9e92ab58a189b45)**



---

archive/issue_events_323620.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-12-01T13:42:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323620"
}
```



---

archive/issue_events_323621.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-12-01T13:42:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323621"
}
```



---

archive/issue_comments_348644.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nred banch, needs rebasing",
    "created_at": "2018-12-01T13:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348644",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

red banch, needs rebasing



---

archive/issue_comments_348645.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@fchapoton](#comment:13):\n> red branch, needs rebasing\n\nI will rebase it, but it would be good to have a commitment from someone to review it, since the actual work on this was done over 6 months ago.",
    "created_at": "2018-12-01T15:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348645",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@fchapoton](#comment:13):
> red branch, needs rebasing

I will rebase it, but it would be good to have a commitment from someone to review it, since the actual work on this was done over 6 months ago.



---

archive/issue_comments_348646.json:
```json
{
    "body": "Changed commit from **[`f7518f7`](https://github.com/sagemath/sagetrac-mirror/commit/f7518f7da457d7dc25a32a0ba9e92ab58a189b45)** to **[`0683290`](https://github.com/sagemath/sagetrac-mirror/commit/0683290a5a04626d57eed1e28910bfc9346a6f34)**",
    "created_at": "2018-12-01T20:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348646",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f7518f7`](https://github.com/sagemath/sagetrac-mirror/commit/f7518f7da457d7dc25a32a0ba9e92ab58a189b45)** to **[`0683290`](https://github.com/sagemath/sagetrac-mirror/commit/0683290a5a04626d57eed1e28910bfc9346a6f34)**



---

archive/issue_comments_348647.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0683290a5a04626d57eed1e28910bfc9346a6f34\"><code>0683290</code></a></td><td><code>Merge branch 'develop' into 23222</code></td></tr></table>\n",
    "created_at": "2018-12-01T20:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348647",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0683290a5a04626d57eed1e28910bfc9346a6f34"><code>0683290</code></a></td><td><code>Merge branch 'develop' into 23222</code></td></tr></table>




---

archive/issue_events_323622.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2018-12-01T20:28:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323622"
}
```



---

archive/issue_events_323623.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2018-12-01T20:28:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323623"
}
```



---

archive/issue_comments_348648.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIt's been in my todo list for 6 months indeed. But I won't have time before Christmas.",
    "created_at": "2018-12-02T09:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348648",
    "user": "https://github.com/defeo"
}
```

<div id="comment:17" align="right">comment:17</div>

It's been in my todo list for 6 months indeed. But I won't have time before Christmas.



---

archive/issue_comments_348649.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI have one doctest failure:\n\n```\nsage -t --long --warn-long 83.4 src/sage/schemes/elliptic_curves/ell_field.py                                                          \n**********************************************************************                                                                 \nFile \"src/sage/schemes/elliptic_curves/ell_field.py\", line 1023, in sage.schemes.elliptic_curves.ell_field.EllipticCurve_field.isogeni$\ns_prime_degree\nFailed example:\n    E.isogenies_prime_degree(5)\nException raised:\n    Traceback (most recent call last):\n      File \"/data/dfl/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/data/dfl/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.schemes.elliptic_curves.ell_field.EllipticCurve_field.isogenies_prime_degree[28]>\", line 1, in <module>\n        E.isogenies_prime_degree(Integer(5))\n      File \"/data/dfl/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_field.py\", line 1091, in isogenies_prime$\ndegree\n        return sum([isogenies_prime_degree(self, d) for d in L], [])\n      File \"/data/dfl/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/isogeny_small_degree.py\", line 2328, in isog$\nnies_prime_degree\n        return isogenies_prime_degree_general(E,l, minimal_models=minimal_models)\n      File \"/data/dfl/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/isogeny_small_degree.py\", line 2197, in isog$\nnies_prime_degree_general\n        return [E.isogeny(k) for k in ker]\n      File \"/data/dfl/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_field.py\", line 880, in isogeny\n        raise RuntimeError(\"Unable to construct isogeny: %s\" % e)\n    RuntimeError: Unable to construct isogeny: 'sage.rings.fraction_field_FpT.FpTElement' object has no attribute 'divides'\n**********************************************************************\n```\n\n...investigating.",
    "created_at": "2019-01-15T10:26:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348649",
    "user": "https://github.com/defeo"
}
```

<div id="comment:18" align="right">comment:18</div>

I have one doctest failure:

```
sage -t --long --warn-long 83.4 src/sage/schemes/elliptic_curves/ell_field.py                                                          
**********************************************************************                                                                 
File "src/sage/schemes/elliptic_curves/ell_field.py", line 1023, in sage.schemes.elliptic_curves.ell_field.EllipticCurve_field.isogeni$
s_prime_degree
Failed example:
    E.isogenies_prime_degree(5)
Exception raised:
    Traceback (most recent call last):
      File "/data/dfl/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/data/dfl/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_field.EllipticCurve_field.isogenies_prime_degree[28]>", line 1, in <module>
        E.isogenies_prime_degree(Integer(5))
      File "/data/dfl/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_field.py", line 1091, in isogenies_prime$
degree
        return sum([isogenies_prime_degree(self, d) for d in L], [])
      File "/data/dfl/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/isogeny_small_degree.py", line 2328, in isog$
nies_prime_degree
        return isogenies_prime_degree_general(E,l, minimal_models=minimal_models)
      File "/data/dfl/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/isogeny_small_degree.py", line 2197, in isog$
nies_prime_degree_general
        return [E.isogeny(k) for k in ker]
      File "/data/dfl/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_field.py", line 880, in isogeny
        raise RuntimeError("Unable to construct isogeny: %s" % e)
    RuntimeError: Unable to construct isogeny: 'sage.rings.fraction_field_FpT.FpTElement' object has no attribute 'divides'
**********************************************************************
```

...investigating.



---

archive/issue_comments_348650.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThe doctest failure is due to #27064. No issue to be addressed here.",
    "created_at": "2019-01-15T17:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348650",
    "user": "https://github.com/defeo"
}
```

<div id="comment:19" align="right">comment:19</div>

The doctest failure is due to #27064. No issue to be addressed here.



---

archive/issue_comments_348651.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIn `is_kernel_polynomial`, there is this test:\n\n```\npsi_m = E.division_polynomial(m)\nif not f.divides(psi_m):\n    return False\n```\n\nisn't it (much) more efficient to do\n\n```\nif E.division_polynomial(m, x=f.parent().quo(f).gen()) != 0:\n    return False\n```",
    "created_at": "2019-01-15T18:13:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348651",
    "user": "https://github.com/defeo"
}
```

<div id="comment:20" align="right">comment:20</div>

In `is_kernel_polynomial`, there is this test:

```
psi_m = E.division_polynomial(m)
if not f.divides(psi_m):
    return False
```

isn't it (much) more efficient to do

```
if E.division_polynomial(m, x=f.parent().quo(f).gen()) != 0:
    return False
```



---

archive/issue_comments_348652.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe doc still says\n\n```\n   * \"check\" (default: True) does some partial checks that the\n\n        input is valid (e.g., that the kernel polynomial provided is\n        valid); however, invalid input can in some cases still pass,\n        since that the points define a group is not checked.\n```\n\nwhat are the invalid inputs that still pass?",
    "created_at": "2019-01-15T18:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348652",
    "user": "https://github.com/defeo"
}
```

<div id="comment:21" align="right">comment:21</div>

The doc still says

```
   * "check" (default: True) does some partial checks that the

        input is valid (e.g., that the kernel polynomial provided is
        valid); however, invalid input can in some cases still pass,
        since that the points define a group is not checked.
```

what are the invalid inputs that still pass?



---

archive/issue_comments_348653.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI will correct the docstring and also avoid using f.divides as suggested.",
    "created_at": "2019-01-17T12:29:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348653",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:22" align="right">comment:22</div>

I will correct the docstring and also avoid using f.divides as suggested.



---

archive/issue_events_323624.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2019-01-17T12:29:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323624"
}
```



---

archive/issue_events_323625.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2019-01-17T12:29:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323625"
}
```



---

archive/issue_events_323626.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2019-01-17T12:29:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323626"
}
```



---

archive/issue_events_323627.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2019-01-17T12:29:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323627"
}
```



---

archive/issue_comments_348654.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f123620b09a4d8788f1fd2740c7d5b8f4aed9af8\"><code>f123620</code></a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into 23222</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c30e532e3f228a35bc900f5b1357ddfe5e9e8f5\"><code>0c30e53</code></a></td><td><code>Merge branch 'develop' into 23222</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e7593fb01c48cf7d1d1c35f015462f56dc2aaa9\"><code>7e7593f</code></a></td><td><code>#23222 small change to avoid #27064, and update docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72a61bbd024b6b089b71aa8a3405f07e6fb55ae2\"><code>72a61bb</code></a></td><td><code>Merge remote-tracking branch 'trac/u/cremona/23222' into 23222</code></td></tr></table>\n",
    "created_at": "2019-01-17T13:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348654",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f123620b09a4d8788f1fd2740c7d5b8f4aed9af8"><code>f123620</code></a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into 23222</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c30e532e3f228a35bc900f5b1357ddfe5e9e8f5"><code>0c30e53</code></a></td><td><code>Merge branch 'develop' into 23222</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e7593fb01c48cf7d1d1c35f015462f56dc2aaa9"><code>7e7593f</code></a></td><td><code>#23222 small change to avoid #27064, and update docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72a61bbd024b6b089b71aa8a3405f07e6fb55ae2"><code>72a61bb</code></a></td><td><code>Merge remote-tracking branch 'trac/u/cremona/23222' into 23222</code></td></tr></table>




---

archive/issue_comments_348655.json:
```json
{
    "body": "Changed commit from **[`0683290`](https://github.com/sagemath/sagetrac-mirror/commit/0683290a5a04626d57eed1e28910bfc9346a6f34)** to **[`72a61bb`](https://github.com/sagemath/sagetrac-mirror/commit/72a61bbd024b6b089b71aa8a3405f07e6fb55ae2)**",
    "created_at": "2019-01-17T13:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348655",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0683290`](https://github.com/sagemath/sagetrac-mirror/commit/0683290a5a04626d57eed1e28910bfc9346a6f34)** to **[`72a61bb`](https://github.com/sagemath/sagetrac-mirror/commit/72a61bbd024b6b089b71aa8a3405f07e6fb55ae2)**



---

archive/issue_comments_348656.json:
```json
{
    "body": "Reviewer: **defeo, chapoton**",
    "created_at": "2019-01-17T13:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348656",
    "user": "https://github.com/JohnCremona"
}
```

Reviewer: **defeo, chapoton**



---

archive/issue_events_323628.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2019-01-17T13:03:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323628"
}
```



---

archive/issue_events_323629.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2019-01-17T13:03:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323629"
}
```



---

archive/issue_comments_348657.json:
```json
{
    "body": "Changed branch from **[u/cremona/23222](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/23222)** to **[u/defeo/23222](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/23222)**",
    "created_at": "2019-01-17T16:04:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348657",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/cremona/23222](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/23222)** to **[u/defeo/23222](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/23222)**



---

archive/issue_comments_348658.json:
```json
{
    "body": "Changed commit from **[`72a61bb`](https://github.com/sagemath/sagetrac-mirror/commit/72a61bbd024b6b089b71aa8a3405f07e6fb55ae2)** to **[`28e369f`](https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493)**",
    "created_at": "2019-01-17T16:12:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348658",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`72a61bb`](https://github.com/sagemath/sagetrac-mirror/commit/72a61bbd024b6b089b71aa8a3405f07e6fb55ae2)** to **[`28e369f`](https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493)**



---

archive/issue_comments_348659.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f123620b09a4d8788f1fd2740c7d5b8f4aed9af8\"><code>f123620</code></a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into 23222</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c30e532e3f228a35bc900f5b1357ddfe5e9e8f5\"><code>0c30e53</code></a></td><td><code>Merge branch 'develop' into 23222</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e7593fb01c48cf7d1d1c35f015462f56dc2aaa9\"><code>7e7593f</code></a></td><td><code>#23222 small change to avoid #27064, and update docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72a61bbd024b6b089b71aa8a3405f07e6fb55ae2\"><code>72a61bb</code></a></td><td><code>Merge remote-tracking branch 'trac/u/cremona/23222' into 23222</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493\"><code>28e369f</code></a></td><td><code>Merge branch 'u/cremona/23222' of git://trac.sagemath.org/sage into t/23222/23222</code></td></tr></table>\n",
    "created_at": "2019-01-17T16:12:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348659",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f123620b09a4d8788f1fd2740c7d5b8f4aed9af8"><code>f123620</code></a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into 23222</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c30e532e3f228a35bc900f5b1357ddfe5e9e8f5"><code>0c30e53</code></a></td><td><code>Merge branch 'develop' into 23222</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e7593fb01c48cf7d1d1c35f015462f56dc2aaa9"><code>7e7593f</code></a></td><td><code>#23222 small change to avoid #27064, and update docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72a61bbd024b6b089b71aa8a3405f07e6fb55ae2"><code>72a61bb</code></a></td><td><code>Merge remote-tracking branch 'trac/u/cremona/23222' into 23222</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493"><code>28e369f</code></a></td><td><code>Merge branch 'u/cremona/23222' of git://trac.sagemath.org/sage into t/23222/23222</code></td></tr></table>




---

archive/issue_comments_348660.json:
```json
{
    "body": "Changed reviewer from **defeo, chapoton** to **Luca De Feo, Fr\u00e9deric Chapoton**",
    "created_at": "2019-01-17T16:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348660",
    "user": "https://github.com/defeo"
}
```

Changed reviewer from **defeo, chapoton** to **Luca De Feo, Fréderic Chapoton**



---

archive/issue_comments_348661.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nDoctests pass. I just fixed a minor problem in the docstring (`r\"\"\"` instead of `\"\"\"`). Thanks, and sorry for the long time.",
    "created_at": "2019-01-17T16:24:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348661",
    "user": "https://github.com/defeo"
}
```

<div id="comment:27" align="right">comment:27</div>

Doctests pass. I just fixed a minor problem in the docstring (`r"""` instead of `"""`). Thanks, and sorry for the long time.



---

archive/issue_events_323630.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2019-01-17T16:24:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323630"
}
```



---

archive/issue_events_323631.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2019-01-17T16:24:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323631"
}
```



---

archive/issue_comments_348662.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThanks!",
    "created_at": "2019-01-17T16:24:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348662",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:28" align="right">comment:28</div>

Thanks!



---

archive/issue_comments_348663.json:
```json
{
    "body": "Changed reviewer from **Luca De Feo, Fr\u00e9deric Chapoton** to **Luca De Feo, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-01-17T16:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348663",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **Luca De Feo, Fréderic Chapoton** to **Luca De Feo, Frédéric Chapoton**



---

archive/issue_comments_348664.json:
```json
{
    "body": "Changed branch from **[u/defeo/23222](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/23222)** to **[`28e369f`](https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493)**",
    "created_at": "2019-01-22T12:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348664",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/defeo/23222](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/23222)** to **[`28e369f`](https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493)**



---

archive/issue_events_323632.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-22T12:40:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323632"
}
```



---

archive/issue_events_323633.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "619281186a682a3cccd27b9c73d6e9062af3afb3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-01-22T12:40:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23222#event-323633"
}
```



---

archive/issue_comments_348665.json:
```json
{
    "body": "Changed commit from **[`28e369f`](https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493)** to none",
    "created_at": "2019-01-24T11:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348665",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`28e369f`](https://github.com/sagemath/sagetrac-mirror/commit/28e369f252fa8339ba379c5619096016afdc4493)** to none



---

archive/issue_comments_348666.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\none py3-incompatible import was added here ; fix at #27107",
    "created_at": "2019-01-24T11:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23222#issuecomment-348666",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>

one py3-incompatible import was added here ; fix at #27107
