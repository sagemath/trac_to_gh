# Issue 23423: divided_difference in SchubertPolynomialRing should not throw errors on unused variables

archive/issues_023186.json:
```json
{
    "body": "\n```\nsage: X = SchubertPolynomialRing(ZZ)\nsage: a = X([1,2,3,4,5])\nsage: a.divided_difference(4)\n```\nThis should yield `0`, not an error. Elements of X are polynomials in infinitely many variables; when they don't use a variable, it doesn't mean that this variable cannot be divided-differenced over.\n\nFollowup to #23403.\n\nCC:  @tscrim sage-combinat\n\nKeywords: schubert, polynomials, divided differences\n\nBranch/Commit: 37b46486872755c05a2c096ac5423b3cc1016786\n\nReviewer: Travis Scrimshaw\n\nAuthor: Darij Grinberg\n\nDependencies: #23403\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23423\n\n",
    "closed_at": "2017-09-20T22:26:40Z",
    "created_at": "2017-07-13T13:50:52Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "divided_difference in SchubertPolynomialRing should not throw errors on unused variables",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23423",
    "user": "https://github.com/darijgr"
}
```

```
sage: X = SchubertPolynomialRing(ZZ)
sage: a = X([1,2,3,4,5])
sage: a.divided_difference(4)
```
This should yield `0`, not an error. Elements of X are polynomials in infinitely many variables; when they don't use a variable, it doesn't mean that this variable cannot be divided-differenced over.

Followup to #23403.

CC:  @tscrim sage-combinat

Keywords: schubert, polynomials, divided differences

Branch/Commit: 37b46486872755c05a2c096ac5423b3cc1016786

Reviewer: Travis Scrimshaw

Author: Darij Grinberg

Dependencies: #23403

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23423





---

archive/issue_comments_440352.json:
```json
{
    "body": "<a id='comment:1'></a>Now solved in #23403.",
    "created_at": "2017-07-16T13:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440352",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:1'></a>Now solved in #23403.



---

archive/issue_comments_440353.json:
```json
{
    "body": "<a id='comment:2'></a>It is an orthogonal issue from #23403, and this would be a great place to discuss this as there could be a good use case for considering having a finite number of variables and having this throw an error. I agree with the change, but it is better documented by having a separate ticket for it.",
    "created_at": "2017-07-16T13:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440353",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>It is an orthogonal issue from #23403, and this would be a great place to discuss this as there could be a good use case for considering having a finite number of variables and having this throw an error. I agree with the change, but it is better documented by having a separate ticket for it.



---

archive/issue_comments_440354.json:
```json
{
    "body": "<a id='comment:3'></a>As discussed with Travis, this ticket is now the place for branch public/combinat/improve_schubert_divided_difference , which builds on top of #23403. Will need rebasing, though, once #23403 is p_r'd.",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440354",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:3'></a>As discussed with Travis, this ticket is now the place for branch public/combinat/improve_schubert_divided_difference , which builds on top of #23403. Will need rebasing, though, once #23403 is p_r'd.



---

archive/issue_comments_440355.json:
```json
{
    "body": "Changing commit from \"\" to \"f915925252394a15968678505299eaf256bb1d06\"",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440355",
    "user": "https://github.com/darijgr"
}
```

Changing commit from "" to "f915925252394a15968678505299eaf256bb1d06"



---

archive/issue_comments_440356.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#23403\"",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440356",
    "user": "https://github.com/darijgr"
}
```

Changing dependencies from "" to "#23403"



---

archive/issue_comments_440357.json:
```json
{
    "body": "Changing branch from \"\" to \"public/combinat/improve_schubert_divided_difference\"",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440357",
    "user": "https://github.com/darijgr"
}
```

Changing branch from "" to "public/combinat/improve_schubert_divided_difference"



---

archive/issue_comments_440358.json:
```json
{
    "body": "<a id='comment:4'></a>Okay, I did some more investigating. The biggest time sink in the symmetrica version is not symmetrica, but instead most of the time is spent on checking the input via `reduced_word`. Even with removing that check, enough time is spent on the overhead that even the non-optimized native algorithm beats going to/from symmetrica unless maybe I really spent some time optimizing the interface, which, IMO, is time not well spent.",
    "created_at": "2017-07-16T23:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440358",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Okay, I did some more investigating. The biggest time sink in the symmetrica version is not symmetrica, but instead most of the time is spent on checking the input via `reduced_word`. Even with removing that check, enough time is spent on the overhead that even the non-optimized native algorithm beats going to/from symmetrica unless maybe I really spent some time optimizing the interface, which, IMO, is time not well spent.



---

archive/issue_comments_440359.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-12T15:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440359",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_440360.json:
```json
{
    "body": "<a id='comment:6'></a>Turns out no rebase is needed.",
    "created_at": "2017-09-12T15:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440360",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:6'></a>Turns out no rebase is needed.



---

archive/issue_comments_440361.json:
```json
{
    "body": "<a id='comment:7'></a>We should change `newm` to `algorithm`, which takes `'sage'` or `'symmetrica'`. I also think a better check is `if i in ZZ:` too, but that isn't something I will quibble over. Once that is done (with corresponding documentation updates), this will be a positive review.",
    "created_at": "2017-09-15T20:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440361",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>We should change `newm` to `algorithm`, which takes `'sage'` or `'symmetrica'`. I also think a better check is `if i in ZZ:` too, but that isn't something I will quibble over. Once that is done (with corresponding documentation updates), this will be a positive review.



---

archive/issue_comments_440362.json:
```json
{
    "body": "<a id='comment:8'></a>Is that something I should do, or you want to do?\n\nI'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.",
    "created_at": "2017-09-16T18:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440362",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:8'></a>Is that something I should do, or you want to do?

I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.



---

archive/issue_comments_440363.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [darij](#comment%3A8):\n> Is that something I should do, or you want to do?\n\n\nI can do it, but it might take me a little longer to push right now. However, it was somewhat a question of seeing if you agree; granted, I didn't phrase it like I should have.\n\n> I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.\n\n\nYes, it is. The rationale: if by chance a user is doing 2/2, it will still work. Granted, this is not likely to happen, but I've had it happen to me enough that I'm paranoid about it now.",
    "created_at": "2017-09-16T18:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440363",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>Replying to [darij](#comment%3A8):
> Is that something I should do, or you want to do?


I can do it, but it might take me a little longer to push right now. However, it was somewhat a question of seeing if you agree; granted, I didn't phrase it like I should have.

> I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.


Yes, it is. The rationale: if by chance a user is doing 2/2, it will still work. Granted, this is not likely to happen, but I've had it happen to me enough that I'm paranoid about it now.



---

archive/issue_comments_440364.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-16T18:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440364",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_440365.json:
```json
{
    "body": "Changing commit from \"f915925252394a15968678505299eaf256bb1d06\" to \"37b46486872755c05a2c096ac5423b3cc1016786\"",
    "created_at": "2017-09-16T18:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440365",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f915925252394a15968678505299eaf256bb1d06" to "37b46486872755c05a2c096ac5423b3cc1016786"



---

archive/issue_comments_440366.json:
```json
{
    "body": "<a id='comment:11'></a>Done those changes. But be warned that I haven't tested the correct behavior of the ``'symmetrica'`` algorithm on polynomials with too few variables.",
    "created_at": "2017-09-16T18:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440366",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:11'></a>Done those changes. But be warned that I haven't tested the correct behavior of the ``'symmetrica'`` algorithm on polynomials with too few variables.



---

archive/issue_comments_440367.json:
```json
{
    "body": "Changing author from \"\" to \"Darij Grinberg\"",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440367",
    "user": "https://github.com/tscrim"
}
```

Changing author from "" to "Darij Grinberg"



---

archive/issue_comments_440368.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440368",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_440369.json:
```json
{
    "body": "<a id='comment:12'></a>Thank you.",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440369",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Thank you.



---

archive/issue_comments_440370.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440370",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_440371.json:
```json
{
    "body": "Changing branch from \"public/combinat/improve_schubert_divided_difference\" to \"37b46486872755c05a2c096ac5423b3cc1016786\"",
    "created_at": "2017-09-20T22:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440371",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/combinat/improve_schubert_divided_difference" to "37b46486872755c05a2c096ac5423b3cc1016786"



---

archive/issue_comments_440372.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-20T22:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-440372",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060187.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-20T22:26:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23423#event-60187"
}
```
