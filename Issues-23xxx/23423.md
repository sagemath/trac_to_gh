# Issue 23423: divided_difference in SchubertPolynomialRing should not throw errors on unused variables

archive/issues_023186.json:
```json
{
    "body": "\n```\nsage: X = SchubertPolynomialRing(ZZ)\nsage: a = X([1,2,3,4,5])\nsage: a.divided_difference(4)\n```\nThis should yield `0`, not an error. Elements of X are polynomials in infinitely many variables; when they don't use a variable, it doesn't mean that this variable cannot be divided-differenced over.\n\nFollowup to #23403.\n\nCC:  @tscrim sage-combinat\n\nKeywords: schubert, polynomials, divided differences\n\nBranch/Commit: [37b46486872755c05a2c096ac5423b3cc1016786](https://github.com/sagemath/sagetrac-mirror/commit/37b46486872755c05a2c096ac5423b3cc1016786)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Darij Grinberg\n\nDependencies: #23403\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23423\n\n",
    "closed_at": "2017-09-20T22:26:40Z",
    "created_at": "2017-07-13T13:50:52Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "divided_difference in SchubertPolynomialRing should not throw errors on unused variables",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23423",
    "user": "https://github.com/darijgr"
}
```

```
sage: X = SchubertPolynomialRing(ZZ)
sage: a = X([1,2,3,4,5])
sage: a.divided_difference(4)
```
This should yield `0`, not an error. Elements of X are polynomials in infinitely many variables; when they don't use a variable, it doesn't mean that this variable cannot be divided-differenced over.

Followup to #23403.

CC:  @tscrim sage-combinat

Keywords: schubert, polynomials, divided differences

Branch/Commit: [37b46486872755c05a2c096ac5423b3cc1016786](https://github.com/sagemath/sagetrac-mirror/commit/37b46486872755c05a2c096ac5423b3cc1016786)

Reviewer: Travis Scrimshaw

Author: Darij Grinberg

Dependencies: #23403

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23423





---

archive/issue_comments_442810.json:
```json
{
    "body": "<a id='comment:1'></a>\nNow solved in #23403.",
    "created_at": "2017-07-16T13:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442810",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:1'></a>
Now solved in #23403.



---

archive/issue_comments_442811.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt is an orthogonal issue from #23403, and this would be a great place to discuss this as there could be a good use case for considering having a finite number of variables and having this throw an error. I agree with the change, but it is better documented by having a separate ticket for it.",
    "created_at": "2017-07-16T13:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442811",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
It is an orthogonal issue from #23403, and this would be a great place to discuss this as there could be a good use case for considering having a finite number of variables and having this throw an error. I agree with the change, but it is better documented by having a separate ticket for it.



---

archive/issue_comments_442812.json:
```json
{
    "body": "<a id='comment:3'></a>\nAs discussed with Travis, this ticket is now the place for branch public/combinat/improve_schubert_divided_difference , which builds on top of #23403. Will need rebasing, though, once #23403 is p_r'd.",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442812",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:3'></a>
As discussed with Travis, this ticket is now the place for branch public/combinat/improve_schubert_divided_difference , which builds on top of #23403. Will need rebasing, though, once #23403 is p_r'd.



---

archive/issue_comments_442813.json:
```json
{
    "body": "Commit: [f915925252394a15968678505299eaf256bb1d06](https://github.com/sagemath/sagetrac-mirror/commit/f915925252394a15968678505299eaf256bb1d06)",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442813",
    "user": "https://github.com/darijgr"
}
```

Commit: [f915925252394a15968678505299eaf256bb1d06](https://github.com/sagemath/sagetrac-mirror/commit/f915925252394a15968678505299eaf256bb1d06)



---

archive/issue_comments_442814.json:
```json
{
    "body": "Dependencies: #23403",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442814",
    "user": "https://github.com/darijgr"
}
```

Dependencies: #23403



---

archive/issue_comments_442815.json:
```json
{
    "body": "Branch: [public/combinat/improve_schubert_divided_difference](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/improve_schubert_divided_difference)",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442815",
    "user": "https://github.com/darijgr"
}
```

Branch: [public/combinat/improve_schubert_divided_difference](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/improve_schubert_divided_difference)



---

archive/issue_comments_442816.json:
```json
{
    "body": "<a id='comment:4'></a>\nOkay, I did some more investigating. The biggest time sink in the symmetrica version is not symmetrica, but instead most of the time is spent on checking the input via `reduced_word`. Even with removing that check, enough time is spent on the overhead that even the non-optimized native algorithm beats going to/from symmetrica unless maybe I really spent some time optimizing the interface, which, IMO, is time not well spent.",
    "created_at": "2017-07-16T23:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442816",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
Okay, I did some more investigating. The biggest time sink in the symmetrica version is not symmetrica, but instead most of the time is spent on checking the input via `reduced_word`. Even with removing that check, enough time is spent on the overhead that even the non-optimized native algorithm beats going to/from symmetrica unless maybe I really spent some time optimizing the interface, which, IMO, is time not well spent.



---

archive/issue_comments_442817.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-12T15:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442817",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_442818.json:
```json
{
    "body": "<a id='comment:6'></a>\nTurns out no rebase is needed.",
    "created_at": "2017-09-12T15:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442818",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:6'></a>
Turns out no rebase is needed.



---

archive/issue_comments_442819.json:
```json
{
    "body": "<a id='comment:7'></a>\nWe should change `newm` to `algorithm`, which takes `'sage'` or `'symmetrica'`. I also think a better check is `if i in ZZ:` too, but that isn't something I will quibble over. Once that is done (with corresponding documentation updates), this will be a positive review.",
    "created_at": "2017-09-15T20:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442819",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
We should change `newm` to `algorithm`, which takes `'sage'` or `'symmetrica'`. I also think a better check is `if i in ZZ:` too, but that isn't something I will quibble over. Once that is done (with corresponding documentation updates), this will be a positive review.



---

archive/issue_comments_442820.json:
```json
{
    "body": "<a id='comment:8'></a>\nIs that something I should do, or you want to do?\n\nI'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.",
    "created_at": "2017-09-16T18:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442820",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:8'></a>
Is that something I should do, or you want to do?

I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.



---

archive/issue_comments_442821.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [darij](#comment%3A8):\n> Is that something I should do, or you want to do?\n\n\nI can do it, but it might take me a little longer to push right now. However, it was somewhat a question of seeing if you agree; granted, I didn't phrase it like I should have.\n\n> I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.\n\n\nYes, it is. The rationale: if by chance a user is doing 2/2, it will still work. Granted, this is not likely to happen, but I've had it happen to me enough that I'm paranoid about it now.",
    "created_at": "2017-09-16T18:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442821",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
Replying to [darij](#comment%3A8):
> Is that something I should do, or you want to do?


I can do it, but it might take me a little longer to push right now. However, it was somewhat a question of seeing if you agree; granted, I didn't phrase it like I should have.

> I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.


Yes, it is. The rationale: if by chance a user is doing 2/2, it will still work. Granted, this is not likely to happen, but I've had it happen to me enough that I'm paranoid about it now.



---

archive/issue_comments_442822.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|\n|[a5b2cff](https://github.com/sagemath/sagetrac-mirror/commit/a5b2cff2c87d17220efc4cc25a44dcabc2b5691b)|`Merge branch 'public/combinat/improve_schubert_divided_difference' of git://trac.sagemath.org/sage into schub`|\n|[37b4648](https://github.com/sagemath/sagetrac-mirror/commit/37b46486872755c05a2c096ac5423b3cc1016786)|`changes suggested by Travis`|",
    "created_at": "2017-09-16T18:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442822",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
|[a5b2cff](https://github.com/sagemath/sagetrac-mirror/commit/a5b2cff2c87d17220efc4cc25a44dcabc2b5691b)|`Merge branch 'public/combinat/improve_schubert_divided_difference' of git://trac.sagemath.org/sage into schub`|
|[37b4648](https://github.com/sagemath/sagetrac-mirror/commit/37b46486872755c05a2c096ac5423b3cc1016786)|`changes suggested by Travis`|



---

archive/issue_comments_442823.json:
```json
{
    "body": "Changing commit from \"[f915925252394a15968678505299eaf256bb1d06](https://github.com/sagemath/sagetrac-mirror/commit/f915925252394a15968678505299eaf256bb1d06)\" to \"[37b46486872755c05a2c096ac5423b3cc1016786](https://github.com/sagemath/sagetrac-mirror/commit/37b46486872755c05a2c096ac5423b3cc1016786)\"",
    "created_at": "2017-09-16T18:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442823",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[f915925252394a15968678505299eaf256bb1d06](https://github.com/sagemath/sagetrac-mirror/commit/f915925252394a15968678505299eaf256bb1d06)" to "[37b46486872755c05a2c096ac5423b3cc1016786](https://github.com/sagemath/sagetrac-mirror/commit/37b46486872755c05a2c096ac5423b3cc1016786)"



---

archive/issue_comments_442824.json:
```json
{
    "body": "<a id='comment:11'></a>\nDone those changes. But be warned that I haven't tested the correct behavior of the ``'symmetrica'`` algorithm on polynomials with too few variables.",
    "created_at": "2017-09-16T18:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442824",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:11'></a>
Done those changes. But be warned that I haven't tested the correct behavior of the ``'symmetrica'`` algorithm on polynomials with too few variables.



---

archive/issue_comments_442825.json:
```json
{
    "body": "Author: Darij Grinberg",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442825",
    "user": "https://github.com/tscrim"
}
```

Author: Darij Grinberg



---

archive/issue_comments_442826.json:
```json
{
    "body": "Reviewer: Travis Scrimshaw",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442826",
    "user": "https://github.com/tscrim"
}
```

Reviewer: Travis Scrimshaw



---

archive/issue_comments_442827.json:
```json
{
    "body": "<a id='comment:12'></a>\nThank you.",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442827",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Thank you.



---

archive/issue_comments_442828.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442828",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_442829.json:
```json
{
    "body": "Changing branch from \"[public/combinat/improve_schubert_divided_difference](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/improve_schubert_divided_difference)\" to \"[37b46486872755c05a2c096ac5423b3cc1016786](https://github.com/sagemath/sagetrac-mirror/commit/37b46486872755c05a2c096ac5423b3cc1016786)\"",
    "created_at": "2017-09-20T22:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442829",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[public/combinat/improve_schubert_divided_difference](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/improve_schubert_divided_difference)" to "[37b46486872755c05a2c096ac5423b3cc1016786](https://github.com/sagemath/sagetrac-mirror/commit/37b46486872755c05a2c096ac5423b3cc1016786)"



---

archive/issue_comments_442830.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-20T22:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23423#issuecomment-442830",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_068444.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-20T22:26:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23423",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23423#event-68444"
}
```
