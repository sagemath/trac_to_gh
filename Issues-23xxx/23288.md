# Issue 23288: implement is_squarefree for p-adic rings

archive/issues_023288.json:
```json
{
    "body": "CC:  @roed314\n\nCurrently, this does not work\n\n```\nsage: R.<a> = ZqFM(9)\nsage: a.is_squarefree()\nAttributeError\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/23525\n\n",
    "closed_at": "2017-08-05T23:27:17Z",
    "created_at": "2017-07-23T09:01:58Z",
    "labels": [
        "component: padics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "implement is_squarefree for p-adic rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23288",
    "user": "https://github.com/saraedum"
}
```
CC:  @roed314

Currently, this does not work

```
sage: R.<a> = ZqFM(9)
sage: a.is_squarefree()
AttributeError
```

Issue created by migration from https://trac.sagemath.org/ticket/23525





---

archive/issue_comments_325516.json:
```json
{
    "body": "I did not run any doctests yet (still rebuilding sage.)\n\n---\nNew commits:",
    "created_at": "2017-07-27T23:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325516",
    "user": "https://github.com/saraedum"
}
```

I did not run any doctests yet (still rebuilding sage.)

---
New commits:



---

archive/issue_comments_325517.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-27T23:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325517",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_325518.json:
```json
{
    "body": "Maybe we should just raise a `TypeError` for fields?  `QQ` and number fields don't define an `is_squarefree` method (though elements of orders don't either).  This may be another case where we can return a technically correct answer but it's most likely not what the user was expecting.",
    "created_at": "2017-07-28T02:25:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325518",
    "user": "https://github.com/roed314"
}
```

Maybe we should just raise a `TypeError` for fields?  `QQ` and number fields don't define an `is_squarefree` method (though elements of orders don't either).  This may be another case where we can return a technically correct answer but it's most likely not what the user was expecting.



---

archive/issue_comments_325519.json:
```json
{
    "body": "I think it makes sense to return mathematically correct answers even if they are trivial. It means that you can write algorithms without checking for trivial cases. E.g., we do this already to determine whether a polynomial is squarefree: first we check whether it's content is squarefree. A trivial check over fields, but still the correct thing to do. So currently we need to protect this check with a `self.base_ring() in Fields()` to work around the fact that `Fields.ElementMethods` does not implement `is_squarefree()` [which it imho should.]",
    "created_at": "2017-07-28T03:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325519",
    "user": "https://github.com/saraedum"
}
```

I think it makes sense to return mathematically correct answers even if they are trivial. It means that you can write algorithms without checking for trivial cases. E.g., we do this already to determine whether a polynomial is squarefree: first we check whether it's content is squarefree. A trivial check over fields, but still the correct thing to do. So currently we need to protect this check with a `self.base_ring() in Fields()` to work around the fact that `Fields.ElementMethods` does not implement `is_squarefree()` [which it imho should.]



---

archive/issue_comments_325520.json:
```json
{
    "body": "PS: I think it really depends on who are you writing code for. Beginners will be surprised that\n\n```\nsage: x = 8/2; x\n4\nsage: x.is_squarefree()\nTrue\n```\nbut eventually you are going to learn that parents are very important in Sage\u2026",
    "created_at": "2017-07-28T03:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325520",
    "user": "https://github.com/saraedum"
}
```

PS: I think it really depends on who are you writing code for. Beginners will be surprised that

```
sage: x = 8/2; x
4
sage: x.is_squarefree()
True
```
but eventually you are going to learn that parents are very important in Sageâ€¦



---

archive/issue_comments_325521.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-03T16:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_325522.json:
```json
{
    "body": "Okay, we had some more discussion on IRC and I'm fine with this now.  Positive review once tests pass.",
    "created_at": "2017-08-03T17:39:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325522",
    "user": "https://github.com/roed314"
}
```

Okay, we had some more discussion on IRC and I'm fine with this now.  Positive review once tests pass.



---

archive/issue_comments_325523.json:
```json
{
    "body": "The only failure is the intermittent\n\n```\nsage -t --long src/sage/rings/fraction_field_FpT.pyx  # 3 doctests failed\n```\nwhich is already addressed by #23554.",
    "created_at": "2017-08-04T03:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325523",
    "user": "https://github.com/roed314"
}
```

The only failure is the intermittent

```
sage -t --long src/sage/rings/fraction_field_FpT.pyx  # 3 doctests failed
```
which is already addressed by #23554.



---

archive/issue_comments_325524.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-04T03:41:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325524",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_325525.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-05T23:27:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23288#issuecomment-325525",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060308.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-05T23:27:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23288",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23288#event-60308"
}
```
