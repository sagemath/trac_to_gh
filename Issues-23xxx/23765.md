# Issue 23765: Connected filtered Hopf algebras have a default antipode

archive/issues_023528.json:
```json
{
    "assignees": [],
    "body": "We move it up from the connected graded Hopf algebras.\n\nCC:  @sagetrac-sage-combinat @darijgr @fchapoton\n\nKeywords: **Hopf algebras**\n\nBranch/Commit: **[99d8127](https://github.com/sagemath/sagetrac-mirror/commit/99d812771a78de19f4dbf096035f145f28cff248)**\n\nReviewer: **Darij Grinberg**\n\nAuthor: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23765_\n\n",
    "closed_at": "2017-09-20T22:26:38Z",
    "created_at": "2017-08-31T14:47:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20categories",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Connected filtered Hopf algebras have a default antipode",
    "type": "issue",
    "updated_at": "2017-09-20T22:26:38Z",
    "url": "https://github.com/sagemath/sage/issues/23765",
    "user": "https://github.com/tscrim"
}
```
We move it up from the connected graded Hopf algebras.

CC:  @sagetrac-sage-combinat @darijgr @fchapoton

Keywords: **Hopf algebras**

Branch/Commit: **[99d8127](https://github.com/sagemath/sagetrac-mirror/commit/99d812771a78de19f4dbf096035f145f28cff248)**

Reviewer: **Darij Grinberg**

Author: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/23765_





---

archive/issue_events_312285.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-31T14:47:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312285"
}
```



---

archive/issue_events_312286.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-31T14:47:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20categories",
    "label_color": "0000ff",
    "label_name": "component: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312286"
}
```



---

archive/issue_events_312287.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-31T14:47:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312287"
}
```



---

archive/issue_events_312288.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-31T14:47:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312288"
}
```



---

archive/issue_comments_361158.json:
```json
{
    "body": "Branch: **[public/categories/filtered_connected_hopf_algebras-23765](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/filtered_connected_hopf_algebras-23765)**",
    "created_at": "2017-08-31T14:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361158",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/categories/filtered_connected_hopf_algebras-23765](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/filtered_connected_hopf_algebras-23765)**



---

archive/issue_events_312289.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-08-31T14:48:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312289"
}
```



---

archive/issue_comments_361159.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af4c1f169a02eb9fca49fc1caef7139f3f981cef\">af4c1f1</a></td><td><code>Connected filtered Hopf algebras can use the default antipode.</code></td></tr></table>\n",
    "created_at": "2017-08-31T14:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361159",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af4c1f169a02eb9fca49fc1caef7139f3f981cef">af4c1f1</a></td><td><code>Connected filtered Hopf algebras can use the default antipode.</code></td></tr></table>




---

archive/issue_comments_361160.json:
```json
{
    "body": "Commit: **[af4c1f1](https://github.com/sagemath/sagetrac-mirror/commit/af4c1f169a02eb9fca49fc1caef7139f3f981cef)**",
    "created_at": "2017-08-31T14:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361160",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[af4c1f1](https://github.com/sagemath/sagetrac-mirror/commit/af4c1f169a02eb9fca49fc1caef7139f3f981cef)**



---

archive/issue_comments_361161.json:
```json
{
    "body": "Changed commit from **[af4c1f1](https://github.com/sagemath/sagetrac-mirror/commit/af4c1f169a02eb9fca49fc1caef7139f3f981cef)** to **[0426f3e](https://github.com/sagemath/sagetrac-mirror/commit/0426f3e643ba35cb76a13c406b700721a709a27c)**",
    "created_at": "2017-08-31T14:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361161",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[af4c1f1](https://github.com/sagemath/sagetrac-mirror/commit/af4c1f169a02eb9fca49fc1caef7139f3f981cef)** to **[0426f3e](https://github.com/sagemath/sagetrac-mirror/commit/0426f3e643ba35cb76a13c406b700721a709a27c)**



---

archive/issue_comments_361162.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0426f3e643ba35cb76a13c406b700721a709a27c\">0426f3e</a></td><td><code>Connected filtered Hopf algebras can use the default antipode.</code></td></tr></table>\n",
    "created_at": "2017-08-31T14:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361162",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0426f3e643ba35cb76a13c406b700721a709a27c">0426f3e</a></td><td><code>Connected filtered Hopf algebras can use the default antipode.</code></td></tr></table>




---

archive/issue_comments_361163.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nWhat do you require of the basis? If the basis is just required to play well with the filtration, then `counit_on_basis` is wrong since any basis element of any degree might have a nonzero counit.\n\nEDIT: Similarly, `antipode_on_basis` also assumes that any nontrivial basis element has zero counit (in this case, it's fine). This shouldn't be hard to fix.",
    "created_at": "2017-08-31T16:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361163",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:4" align="right">Comment 4</div>

What do you require of the basis? If the basis is just required to play well with the filtration, then `counit_on_basis` is wrong since any basis element of any degree might have a nonzero counit.

EDIT: Similarly, `antipode_on_basis` also assumes that any nontrivial basis element has zero counit (in this case, it's fine). This shouldn't be hard to fix.



---

archive/issue_comments_361164.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nEach basis element should be contained in a homogeneous degree component (i.e. A<sub>i</sub> - A,,i - 1,,). Other than that, I don't think there is any requirements.",
    "created_at": "2017-08-31T17:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361164",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">Comment 5</div>

Each basis element should be contained in a homogeneous degree component (i.e. A<sub>i</sub> - A,,i - 1,,). Other than that, I don't think there is any requirements.



---

archive/issue_comments_361165.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI can't ssh to UMN now, and I have uninstalled my virtualbox from this laptop already (planning to get a new one when I'm back to Minneapolis). Meanwhile, can you please do the following?\n\n1. Remove the `counit_on_basis` method. Or, if you feel like making things more interesting, keep it in, but only if a keyword argument `augmented_basis` has been set to `True` when instantiating the class. (\"Augmented basis\" means that the basis has the property that only the element 1 has nonzero counit.)\n\n2. In `antipode_on_basis`, replace\n\n```\n+                return -x__S_Id(self.monomial(index).coproduct()\n+                                - tensor([self.monomial(index), self.one()])\n+                               )\n```\nby\n\n```\n+                smi = self.monomial(index)\n+                return -x__S_Id(smi.coproduct()\n+                                - tensor([smi, self.one()])\n+                               ) + smi.counit()\n```\n\n3. Bonus: Those weird non-graded bases of Sym corresponding to the symplectic(?) groups should now properly work without hacks...",
    "created_at": "2017-09-01T11:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361165",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:6" align="right">Comment 6</div>

I can't ssh to UMN now, and I have uninstalled my virtualbox from this laptop already (planning to get a new one when I'm back to Minneapolis). Meanwhile, can you please do the following?

1. Remove the `counit_on_basis` method. Or, if you feel like making things more interesting, keep it in, but only if a keyword argument `augmented_basis` has been set to `True` when instantiating the class. ("Augmented basis" means that the basis has the property that only the element 1 has nonzero counit.)

2. In `antipode_on_basis`, replace

```
+                return -x__S_Id(self.monomial(index).coproduct()
+                                - tensor([self.monomial(index), self.one()])
+                               )
```
by

```
+                smi = self.monomial(index)
+                return -x__S_Id(smi.coproduct()
+                                - tensor([smi, self.one()])
+                               ) + smi.counit()
```

3. Bonus: Those weird non-graded bases of Sym corresponding to the symplectic(?) groups should now properly work without hacks...



---

archive/issue_comments_361166.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nReplying to [@darijgr](#comment%3A6):\n> I can't ssh to UMN now, and I have uninstalled my virtualbox from this laptop already (planning to get a new one when I'm back to Minneapolis). Meanwhile, can you please do the following?\n\nSure, I will push the changes.\n\n> 1. Remove the `counit_on_basis` method. Or, if you feel like making things more interesting, keep it in, but only if a keyword argument `augmented_basis` has been set to `True` when instantiating the class. (\"Augmented basis\" means that the basis has the property that only the element 1 has nonzero counit.)\n\nQuestion before I do that: This would not be correct in general in the graded case as well, right?",
    "created_at": "2017-09-01T14:51:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361166",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">Comment 7</div>

Replying to [@darijgr](#comment%3A6):
> I can't ssh to UMN now, and I have uninstalled my virtualbox from this laptop already (planning to get a new one when I'm back to Minneapolis). Meanwhile, can you please do the following?

Sure, I will push the changes.

> 1. Remove the `counit_on_basis` method. Or, if you feel like making things more interesting, keep it in, but only if a keyword argument `augmented_basis` has been set to `True` when instantiating the class. ("Augmented basis" means that the basis has the property that only the element 1 has nonzero counit.)

Question before I do that: This would not be correct in general in the graded case as well, right?



---

archive/issue_comments_361167.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nOops, I've just realized that a graded basis of a connected graded module as we define it is *automatically* augmented. So the stuff you removed from the Graded().Category() class should probably go back.\n\nBUT a graded module can have a filtered basis that is not graded and not augmented. (Stable dual Grothendieck polynomials for Sym are an example of a filtered basis that is not graded, but augmented. One of your symplectic bases, I think, is neither.) I am wondering whether we have the tools for this. Ideally, it should be in the category\n\n```\nHopfAlgebras().Filtered().Connected().WithBasis()\n```\nand in the category\n\n```\nHopfAlgebras().Graded().Connected()\n```\nbut NOT in the category\n\n```\nHopfAlgebras().Graded().Connected().WithBasis()\n```\nI never understood the category framework well enough to tell if this works natively.",
    "created_at": "2017-09-01T14:54:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361167",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:8" align="right">Comment 8</div>

Oops, I've just realized that a graded basis of a connected graded module as we define it is *automatically* augmented. So the stuff you removed from the Graded().Category() class should probably go back.

BUT a graded module can have a filtered basis that is not graded and not augmented. (Stable dual Grothendieck polynomials for Sym are an example of a filtered basis that is not graded, but augmented. One of your symplectic bases, I think, is neither.) I am wondering whether we have the tools for this. Ideally, it should be in the category

```
HopfAlgebras().Filtered().Connected().WithBasis()
```
and in the category

```
HopfAlgebras().Graded().Connected()
```
but NOT in the category

```
HopfAlgebras().Graded().Connected().WithBasis()
```
I never understood the category framework well enough to tell if this works natively.



---

archive/issue_comments_361168.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54d31378f4a51d72960892456c013a3643861b06\">54d3137</a></td><td><code>Addressing Darij's comments.</code></td></tr></table>\n",
    "created_at": "2017-09-01T15:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361168",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54d31378f4a51d72960892456c013a3643861b06">54d3137</a></td><td><code>Addressing Darij's comments.</code></td></tr></table>




---

archive/issue_comments_361169.json:
```json
{
    "body": "Changed commit from **[0426f3e](https://github.com/sagemath/sagetrac-mirror/commit/0426f3e643ba35cb76a13c406b700721a709a27c)** to **[54d3137](https://github.com/sagemath/sagetrac-mirror/commit/54d31378f4a51d72960892456c013a3643861b06)**",
    "created_at": "2017-09-01T15:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361169",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0426f3e](https://github.com/sagemath/sagetrac-mirror/commit/0426f3e643ba35cb76a13c406b700721a709a27c)** to **[54d3137](https://github.com/sagemath/sagetrac-mirror/commit/54d31378f4a51d72960892456c013a3643861b06)**



---

archive/issue_comments_361170.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nDone all related to this ticket.\n\nIf you do\n\n```\nHopfAlgebras(QQ).Graded().WithBasis()\n```\nyou are saying the Hopf algebra is graded, but your basis does not necessarily respect that grading, in contrast with\n\n```\nHopfAlgebras(QQ).WithBasis().Graded()\n```\nwhere you are specifying the basis is graded. You can see the difference here:\n\n```\nsage: HopfAlgebras(QQ).Graded().WithBasis()\nJoin of Category of hopf algebras with basis over Rational Field and Category of graded algebras over Rational Field\nsage: type(HopfAlgebras(QQ).Graded().WithBasis())\n<class 'sage.categories.category.JoinCategory_with_category'>\nsage: HopfAlgebras(QQ).WithBasis().Graded()\nCategory of graded hopf algebras with basis over Rational Field\nsage: type(HopfAlgebras(QQ).WithBasis().Graded())\n<class 'sage.categories.graded_hopf_algebras_with_basis.GradedHopfAlgebrasWithBasis_with_category'>\n```\nHowever, the Sym issue is a separate ticket IMO.",
    "created_at": "2017-09-01T15:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361170",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">Comment 10</div>

Done all related to this ticket.

If you do

```
HopfAlgebras(QQ).Graded().WithBasis()
```
you are saying the Hopf algebra is graded, but your basis does not necessarily respect that grading, in contrast with

```
HopfAlgebras(QQ).WithBasis().Graded()
```
where you are specifying the basis is graded. You can see the difference here:

```
sage: HopfAlgebras(QQ).Graded().WithBasis()
Join of Category of hopf algebras with basis over Rational Field and Category of graded algebras over Rational Field
sage: type(HopfAlgebras(QQ).Graded().WithBasis())
<class 'sage.categories.category.JoinCategory_with_category'>
sage: HopfAlgebras(QQ).WithBasis().Graded()
Category of graded hopf algebras with basis over Rational Field
sage: type(HopfAlgebras(QQ).WithBasis().Graded())
<class 'sage.categories.graded_hopf_algebras_with_basis.GradedHopfAlgebrasWithBasis_with_category'>
```
However, the Sym issue is a separate ticket IMO.



---

archive/issue_comments_361171.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69fe5291fece5c68cbc19466596c5a6f2f48fe42\">69fe529</a></td><td><code>Fixing some doctests.</code></td></tr></table>\n",
    "created_at": "2017-09-02T15:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361171",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69fe5291fece5c68cbc19466596c5a6f2f48fe42">69fe529</a></td><td><code>Fixing some doctests.</code></td></tr></table>




---

archive/issue_comments_361172.json:
```json
{
    "body": "Changed commit from **[54d3137](https://github.com/sagemath/sagetrac-mirror/commit/54d31378f4a51d72960892456c013a3643861b06)** to **[69fe529](https://github.com/sagemath/sagetrac-mirror/commit/69fe5291fece5c68cbc19466596c5a6f2f48fe42)**",
    "created_at": "2017-09-02T15:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361172",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[54d3137](https://github.com/sagemath/sagetrac-mirror/commit/54d31378f4a51d72960892456c013a3643861b06)** to **[69fe529](https://github.com/sagemath/sagetrac-mirror/commit/69fe5291fece5c68cbc19466596c5a6f2f48fe42)**



---

archive/issue_comments_361173.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\n*ping*",
    "created_at": "2017-09-16T14:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361173",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">Comment 12</div>

*ping*



---

archive/issue_comments_361174.json:
```json
{
    "body": "Changed commit from **[69fe529](https://github.com/sagemath/sagetrac-mirror/commit/69fe5291fece5c68cbc19466596c5a6f2f48fe42)** to **[bd4dd22](https://github.com/sagemath/sagetrac-mirror/commit/bd4dd22a886f1a0326b1b93d5029a41b8e8b551c)**",
    "created_at": "2017-09-16T15:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361174",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[69fe529](https://github.com/sagemath/sagetrac-mirror/commit/69fe5291fece5c68cbc19466596c5a6f2f48fe42)** to **[bd4dd22](https://github.com/sagemath/sagetrac-mirror/commit/bd4dd22a886f1a0326b1b93d5029a41b8e8b551c)**



---

archive/issue_comments_361175.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/019f005e270bd3e7bdf2a5991dc73a1cae59efab\">019f005</a></td><td><code>Merge branch 'public/categories/filtered_connected_hopf_algebras-23765' of git://trac.sagemath.org/sage into cfh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd4dd22a886f1a0326b1b93d5029a41b8e8b551c\">bd4dd22</a></td><td><code>document requirements on basis</code></td></tr></table>\n",
    "created_at": "2017-09-16T15:01:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361175",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/019f005e270bd3e7bdf2a5991dc73a1cae59efab">019f005</a></td><td><code>Merge branch 'public/categories/filtered_connected_hopf_algebras-23765' of git://trac.sagemath.org/sage into cfh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd4dd22a886f1a0326b1b93d5029a41b8e8b551c">bd4dd22</a></td><td><code>document requirements on basis</code></td></tr></table>




---

archive/issue_comments_361176.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nJust got my Sage running again yesterday, now compiling some months worth of updates; so this will take a while. Should be done today though.\n\nQuick question: Why is `HopfAlgebrasWithBasis` not a parent category of this? Would this lead to the incorrect conclusion that `FilteredHopfAlgebrasWithBasis == HopfAlgebras.Filtered.WithBasis`?",
    "created_at": "2017-09-16T15:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361176",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:14" align="right">Comment 14</div>

Just got my Sage running again yesterday, now compiling some months worth of updates; so this will take a while. Should be done today though.

Quick question: Why is `HopfAlgebrasWithBasis` not a parent category of this? Would this lead to the incorrect conclusion that `FilteredHopfAlgebrasWithBasis == HopfAlgebras.Filtered.WithBasis`?



---

archive/issue_comments_361177.json:
```json
{
    "body": "Changed commit from **[bd4dd22](https://github.com/sagemath/sagetrac-mirror/commit/bd4dd22a886f1a0326b1b93d5029a41b8e8b551c)** to **[7a024ae](https://github.com/sagemath/sagetrac-mirror/commit/7a024ae8a5635e0d49d66cfdff50960c3b9068b9)**",
    "created_at": "2017-09-16T15:15:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361177",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bd4dd22](https://github.com/sagemath/sagetrac-mirror/commit/bd4dd22a886f1a0326b1b93d5029a41b8e8b551c)** to **[7a024ae](https://github.com/sagemath/sagetrac-mirror/commit/7a024ae8a5635e0d49d66cfdff50960c3b9068b9)**



---

archive/issue_comments_361178.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e6949ce0c1becafa558604450cb09141f4710a9\">7e6949c</a></td><td><code>Small fixes to Darij's push.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a024ae8a5635e0d49d66cfdff50960c3b9068b9\">7a024ae</a></td><td><code>Removing requirements as it comes from being a subcategory of FilteredModulesWithBasis.</code></td></tr></table>\n",
    "created_at": "2017-09-16T15:15:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361178",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e6949ce0c1becafa558604450cb09141f4710a9">7e6949c</a></td><td><code>Small fixes to Darij's push.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a024ae8a5635e0d49d66cfdff50960c3b9068b9">7a024ae</a></td><td><code>Removing requirements as it comes from being a subcategory of FilteredModulesWithBasis.</code></td></tr></table>




---

archive/issue_comments_361179.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@darijgr](#comment%3A14):\n> Just got my Sage running again yesterday, now compiling some months worth of updates; so this will take a while. Should be done today though.\n\nYay.\n\n> Quick question: Why is `HopfAlgebrasWithBasis` not a parent category of this? Would this lead to the incorrect conclusion that `FilteredHopfAlgebrasWithBasis == HopfAlgebras.Filtered.WithBasis`?\n\nI don't understand. We have this:\n\n```\nsage: from sage.categories.filtered_hopf_algebras_with_basis import FilteredHopfAlgebrasWithBasis\nsage: FilteredHopfAlgebrasWithBasis(QQ).super_categories()\n[Category of hopf algebras with basis over Rational Field,\n Category of filtered algebras with basis over Rational Field]\n```\n\nI also removed your requirements as this is a subcategory of `FilteredModulesWithBasis`, so it has to respect them.",
    "created_at": "2017-09-16T15:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361179",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@darijgr](#comment%3A14):
> Just got my Sage running again yesterday, now compiling some months worth of updates; so this will take a while. Should be done today though.

Yay.

> Quick question: Why is `HopfAlgebrasWithBasis` not a parent category of this? Would this lead to the incorrect conclusion that `FilteredHopfAlgebrasWithBasis == HopfAlgebras.Filtered.WithBasis`?

I don't understand. We have this:

```
sage: from sage.categories.filtered_hopf_algebras_with_basis import FilteredHopfAlgebrasWithBasis
sage: FilteredHopfAlgebrasWithBasis(QQ).super_categories()
[Category of hopf algebras with basis over Rational Field,
 Category of filtered algebras with basis over Rational Field]
```

I also removed your requirements as this is a subcategory of `FilteredModulesWithBasis`, so it has to respect them.



---

archive/issue_comments_361180.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nOh, I should learn reading.\n\nI wouldn't get rid of the requirements, though. Maybe replace them by something like this:\n\n```\n    A filtered Hopf algebra with basis over a commutative ring `R`\n    is a filtered Hopf algebra over `R` endowed with the structure\n    of a filtered module with basis (with the same underlying\n    filtered-module structure).\n    A filtered Hopf algebra over `R` means a Hopf algebra equipped\n    with a module filtration such that all structure maps of the\n    Hopf algebra respect the filtration. See\n    :class:`~sage.categories.filtered_modules_with_basis.FilteredModulesWithBasis`\n    for the notion of a filtered module.\n```\n(Something similar is done in `filtered_algebras_with_basis.py`.)",
    "created_at": "2017-09-16T15:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361180",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:17" align="right">Comment 17</div>

Oh, I should learn reading.

I wouldn't get rid of the requirements, though. Maybe replace them by something like this:

```
    A filtered Hopf algebra with basis over a commutative ring `R`
    is a filtered Hopf algebra over `R` endowed with the structure
    of a filtered module with basis (with the same underlying
    filtered-module structure).
    A filtered Hopf algebra over `R` means a Hopf algebra equipped
    with a module filtration such that all structure maps of the
    Hopf algebra respect the filtration. See
    :class:`~sage.categories.filtered_modules_with_basis.FilteredModulesWithBasis`
    for the notion of a filtered module.
```
(Something similar is done in `filtered_algebras_with_basis.py`.)



---

archive/issue_comments_361181.json:
```json
{
    "body": "Changed commit from **[7a024ae](https://github.com/sagemath/sagetrac-mirror/commit/7a024ae8a5635e0d49d66cfdff50960c3b9068b9)** to **[a079ae9](https://github.com/sagemath/sagetrac-mirror/commit/a079ae932dd3bc92a77d563739fdd8706e9fc595)**",
    "created_at": "2017-09-16T16:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361181",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7a024ae](https://github.com/sagemath/sagetrac-mirror/commit/7a024ae8a5635e0d49d66cfdff50960c3b9068b9)** to **[a079ae9](https://github.com/sagemath/sagetrac-mirror/commit/a079ae932dd3bc92a77d563739fdd8706e9fc595)**



---

archive/issue_comments_361182.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a079ae932dd3bc92a77d563739fdd8706e9fc595\">a079ae9</a></td><td><code>Adding Darij's description.</code></td></tr></table>\n",
    "created_at": "2017-09-16T16:21:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361182",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a079ae932dd3bc92a77d563739fdd8706e9fc595">a079ae9</a></td><td><code>Adding Darij's description.</code></td></tr></table>




---

archive/issue_comments_361183.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nI can live with that (although it feels a little verbose and superfluous).",
    "created_at": "2017-09-16T16:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361183",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">Comment 19</div>

I can live with that (although it feels a little verbose and superfluous).



---

archive/issue_comments_361184.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2a04461b7c3dd5a9c2a7340c66105afc5c92afa\">a2a0446</a></td><td><code>improve docs</code></td></tr></table>\n",
    "created_at": "2017-09-16T18:15:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361184",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2a04461b7c3dd5a9c2a7340c66105afc5c92afa">a2a0446</a></td><td><code>improve docs</code></td></tr></table>




---

archive/issue_comments_361185.json:
```json
{
    "body": "Changed commit from **[a079ae9](https://github.com/sagemath/sagetrac-mirror/commit/a079ae932dd3bc92a77d563739fdd8706e9fc595)** to **[a2a0446](https://github.com/sagemath/sagetrac-mirror/commit/a2a04461b7c3dd5a9c2a7340c66105afc5c92afa)**",
    "created_at": "2017-09-16T18:15:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361185",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a079ae9](https://github.com/sagemath/sagetrac-mirror/commit/a079ae932dd3bc92a77d563739fdd8706e9fc595)** to **[a2a0446](https://github.com/sagemath/sagetrac-mirror/commit/a2a04461b7c3dd5a9c2a7340c66105afc5c92afa)**



---

archive/issue_comments_361186.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nYeah, that was an awkward formulation. Let me know if the new one is better. Positive_review if you are OK with my changes.\n\nSorry for how long this took!\n\n(Rationale for my other changes: Theoretically, a basis of a connected graded Hopf algebra might contain, say, -1 instead of 1. Thus, the claim that the counit of $i$ is \"1 & \\hbox{if $i$ is the unique element of degree $0$}\" is false. Also, the recursive formula for S(x) in the graded case was not true for degree 0, so I replaced \"in general\" by \"when `|x| > 0`\".)",
    "created_at": "2017-09-16T18:16:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361186",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:21" align="right">Comment 21</div>

Yeah, that was an awkward formulation. Let me know if the new one is better. Positive_review if you are OK with my changes.

Sorry for how long this took!

(Rationale for my other changes: Theoretically, a basis of a connected graded Hopf algebra might contain, say, -1 instead of 1. Thus, the claim that the counit of $i$ is "1 & \hbox{if $i$ is the unique element of degree $0$}" is false. Also, the recursive formula for S(x) in the graded case was not true for degree 0, so I replaced "in general" by "when `|x| > 0`".)



---

archive/issue_comments_361187.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nI know this is basically bikeshedding, but I do not want the word \"requirement\" to appear. It feels too much like exposing implementation details (or maybe instructions to [future] authors) to the casual user. So could you revert this part:\n\n```diff\n-    for the notion of a filtered module.\n+    for the meaning of the latter requirement).\n```\n(with adding the `)` of course). You can set a positive review on my behalf when done.\n\nThank you for doing the review.",
    "created_at": "2017-09-16T18:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361187",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">Comment 22</div>

I know this is basically bikeshedding, but I do not want the word "requirement" to appear. It feels too much like exposing implementation details (or maybe instructions to [future] authors) to the casual user. So could you revert this part:

```diff
-    for the notion of a filtered module.
+    for the meaning of the latter requirement).
```
(with adding the `)` of course). You can set a positive review on my behalf when done.

Thank you for doing the review.



---

archive/issue_comments_361188.json:
```json
{
    "body": "Reviewer: **Darij Grinberg**",
    "created_at": "2017-09-16T18:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361188",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Darij Grinberg**



---

archive/issue_comments_361189.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99d812771a78de19f4dbf096035f145f28cff248\">99d8127</a></td><td><code>polish the doc a little bit more (Travis's suggestion)</code></td></tr></table>\n",
    "created_at": "2017-09-16T18:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361189",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99d812771a78de19f4dbf096035f145f28cff248">99d8127</a></td><td><code>polish the doc a little bit more (Travis's suggestion)</code></td></tr></table>




---

archive/issue_comments_361190.json:
```json
{
    "body": "Changed commit from **[a2a0446](https://github.com/sagemath/sagetrac-mirror/commit/a2a04461b7c3dd5a9c2a7340c66105afc5c92afa)** to **[99d8127](https://github.com/sagemath/sagetrac-mirror/commit/99d812771a78de19f4dbf096035f145f28cff248)**",
    "created_at": "2017-09-16T18:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361190",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a2a0446](https://github.com/sagemath/sagetrac-mirror/commit/a2a04461b7c3dd5a9c2a7340c66105afc5c92afa)** to **[99d8127](https://github.com/sagemath/sagetrac-mirror/commit/99d812771a78de19f4dbf096035f145f28cff248)**



---

archive/issue_events_312290.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2017-09-16T18:44:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312290"
}
```



---

archive/issue_events_312291.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2017-09-16T18:44:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312291"
}
```



---

archive/issue_comments_361191.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nPerfect! (I've added \"with basis\", though, as I had forgotten it.)",
    "created_at": "2017-09-16T18:44:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361191",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:25" align="right">Comment 25</div>

Perfect! (I've added "with basis", though, as I had forgotten it.)



---

archive/issue_comments_361192.json:
```json
{
    "body": "Changed branch from **[public/categories/filtered_connected_hopf_algebras-23765](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/filtered_connected_hopf_algebras-23765)** to **[99d8127](https://github.com/sagemath/sagetrac-mirror/commit/99d812771a78de19f4dbf096035f145f28cff248)**",
    "created_at": "2017-09-20T22:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23765#issuecomment-361192",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/categories/filtered_connected_hopf_algebras-23765](https://github.com/sagemath/sagetrac-mirror/tree/public/categories/filtered_connected_hopf_algebras-23765)** to **[99d8127](https://github.com/sagemath/sagetrac-mirror/commit/99d812771a78de19f4dbf096035f145f28cff248)**



---

archive/issue_events_312292.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-20T22:26:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312292"
}
```



---

archive/issue_events_312293.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a2179491b7c4235f17cbe442bfc46e5e4d30eef2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-09-20T22:26:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23765",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23765#event-312293"
}
```
