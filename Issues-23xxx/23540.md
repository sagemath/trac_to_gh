# Issue 23540: twisted warnings when pyopenssl installed

archive/issues_023303.json:
```json
{
    "body": "pyopenssl introduced a deprecation in their latest release 17.2.0 (released on 25th of July), see [#658](https://github.com/pyca/pyopenssl/pull/658). As a consequence, when this version is installed is Sagemath, Twisted produces warnings. These warnings appear in various places, in particular when we quit the console\n\n```\nsage: quit\nExiting Sage (...)\n/opt/sage/local/lib/python2.7/site-packages/twisted/protocols/tls.py:41: DeprecationWarning: OpenSSL.rand is deprecated - you should use os.urandom instead\n  from OpenSSL.SSL import Error, ZeroReturnError, WantReadError\n:0: UserWarning: You do not have a working installation of the service_identity module: 'No module named service_identity'.  Please install it from <https://pypi.python.org/pypi/service_identity> and make sure all of its dependencies are satisfied.  Without the service_identity module, Twisted can perform only rudimentary TLS client hostname verification.  Many valid certificate/hostname mappings may be rejected.\n```\nAfter installing `service_identity` as adviced it gets a little bit better\n\n```\n]$ sage -q\nsage: quit\nExiting Sage (...)\n/opt/sage/local/lib/python2.7/site-packages/twisted/protocols/tls.py:41: DeprecationWarning: OpenSSL.rand is deprecated - you should use os.urandom instead\n  from OpenSSL.SSL import Error, ZeroReturnError, WantReadError\n```\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/23540\n\n",
    "closed_at": "2017-10-04T14:57:19Z",
    "created_at": "2017-07-25T12:26:24Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "twisted warnings when pyopenssl installed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23540",
    "user": "https://github.com/videlec"
}
```
pyopenssl introduced a deprecation in their latest release 17.2.0 (released on 25th of July), see [#658](https://github.com/pyca/pyopenssl/pull/658). As a consequence, when this version is installed is Sagemath, Twisted produces warnings. These warnings appear in various places, in particular when we quit the console

```
sage: quit
Exiting Sage (...)
/opt/sage/local/lib/python2.7/site-packages/twisted/protocols/tls.py:41: DeprecationWarning: OpenSSL.rand is deprecated - you should use os.urandom instead
  from OpenSSL.SSL import Error, ZeroReturnError, WantReadError
:0: UserWarning: You do not have a working installation of the service_identity module: 'No module named service_identity'.  Please install it from <https://pypi.python.org/pypi/service_identity> and make sure all of its dependencies are satisfied.  Without the service_identity module, Twisted can perform only rudimentary TLS client hostname verification.  Many valid certificate/hostname mappings may be rejected.
```
After installing `service_identity` as adviced it gets a little bit better

```
]$ sage -q
sage: quit
Exiting Sage (...)
/opt/sage/local/lib/python2.7/site-packages/twisted/protocols/tls.py:41: DeprecationWarning: OpenSSL.rand is deprecated - you should use os.urandom instead
  from OpenSSL.SSL import Error, ZeroReturnError, WantReadError
```

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/23540





---

archive/issue_comments_325742.json:
```json
{
    "body": "<a id='comment:2'></a>the latest release of `twisted` still has this `from OpenSSL.SSL ...`, so I don't know what to do here, except suppressing the warning somehow.",
    "created_at": "2017-07-25T13:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23540#issuecomment-325742",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>the latest release of `twisted` still has this `from OpenSSL.SSL ...`, so I don't know what to do here, except suppressing the warning somehow.



---

archive/issue_comments_325743.json:
```json
{
    "body": "<a id='comment:3'></a>Note that the deprecation on pyopenssl side is recent [#658](https://github.com/pyca/pyopenssl/pull/658). And their release from 5 days ago!",
    "created_at": "2017-07-25T13:33:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23540#issuecomment-325743",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>Note that the deprecation on pyopenssl side is recent [#658](https://github.com/pyca/pyopenssl/pull/658). And their release from 5 days ago!



---

archive/issue_comments_325744.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2017-10-04T14:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23540#issuecomment-325744",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate



---

archive/issue_events_060327.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-04T14:57:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23540",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23540#event-60327"
}
```



---

archive/issue_comments_325745.json:
```json
{
    "body": "<a id='comment:6'></a>Duplicate of #22581.",
    "created_at": "2017-10-04T14:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23540",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23540#issuecomment-325745",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>Duplicate of #22581.



---

archive/issue_events_060328.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-04T14:57:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23540",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23540#event-60328"
}
```
