# Issue 23700: update gc to version 7.6

archive/issues_023463.json:
```json
{
    "body": "An update to gc is needed to support arm64/aarch64, see #23687,\nas well as for FreeBSD support, see #22679.\nIt also appears to be good to be in sync with Linux boxes that ship make with guile extension (the latter depends on gc, and causes interesting errors, see #24575).\n\nThe source is here:\nhttps://github.com/ivmai/bdwgc/releases/download/v7.6.4/gc-7.6.4.tar.gz\n\nOn some platforms this new version also needs libatomic_ops, see #23701\n\nCC:  @kiwifb @embray\n\nBranch/Commit: cd63b82e0d58ecd4961a22e084c6d43af667c7bc\n\nReviewer: Erik Bray, Dima Pasechnik, Jeroen Demeyer\n\nAuthor: Dima Pasechnik, Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23700\n\n",
    "closed_at": "2018-03-08T00:02:44Z",
    "created_at": "2017-08-24T13:58:07Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "update gc to version 7.6",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23700",
    "user": "https://github.com/dimpase"
}
```
An update to gc is needed to support arm64/aarch64, see #23687,
as well as for FreeBSD support, see #22679.
It also appears to be good to be in sync with Linux boxes that ship make with guile extension (the latter depends on gc, and causes interesting errors, see #24575).

The source is here:
https://github.com/ivmai/bdwgc/releases/download/v7.6.4/gc-7.6.4.tar.gz

On some platforms this new version also needs libatomic_ops, see #23701

CC:  @kiwifb @embray

Branch/Commit: cd63b82e0d58ecd4961a22e084c6d43af667c7bc

Reviewer: Erik Bray, Dima Pasechnik, Jeroen Demeyer

Author: Dima Pasechnik, Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23700





---

archive/issue_comments_446843.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#23701\"",
    "created_at": "2017-08-24T14:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446843",
    "user": "https://github.com/dimpase"
}
```

Changing dependencies from "" to "#23701"



---

archive/issue_comments_446844.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n The source is here: http://www.hboehm.info/gc/gc_source/gc-7.6.0.tar.gz\n \n-On some platforms this new version also needs libatomic_ops.\n+On some platforms this new version also needs libatomic_ops, see #23701\n``````\n",
    "created_at": "2017-08-24T14:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446844",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 The source is here: http://www.hboehm.info/gc/gc_source/gc-7.6.0.tar.gz
 
-On some platforms this new version also needs libatomic_ops.
+On some platforms this new version also needs libatomic_ops, see #23701
``````




---

archive/issue_comments_446845.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[7d09a89](https://git.sagemath.org/sage.git/commit/?id=7d09a89df33436f32667b197112687c297e27bcd)|`libatomic_ops added as standard pkg`|\n|[7c8c3e3](https://git.sagemath.org/sage.git/commit/?id=7c8c3e39a6df40b63ce038a041bcaf414fb357f9)|`Merge branch 'libatomic_ops' into gcupdate`|\n|[277ddd7](https://git.sagemath.org/sage.git/commit/?id=277ddd77e391269febfa10a66c62f34f475b4181)|`libatomic_ops is a dependency`|",
    "created_at": "2017-08-24T15:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[7d09a89](https://git.sagemath.org/sage.git/commit/?id=7d09a89df33436f32667b197112687c297e27bcd)|`libatomic_ops added as standard pkg`|
|[7c8c3e3](https://git.sagemath.org/sage.git/commit/?id=7c8c3e39a6df40b63ce038a041bcaf414fb357f9)|`Merge branch 'libatomic_ops' into gcupdate`|
|[277ddd7](https://git.sagemath.org/sage.git/commit/?id=277ddd77e391269febfa10a66c62f34f475b4181)|`libatomic_ops is a dependency`|



---

archive/issue_comments_446846.json:
```json
{
    "body": "Changing commit from \"37cbca100a8be09b868a9280550de5a039600cac\" to \"277ddd77e391269febfa10a66c62f34f475b4181\"",
    "created_at": "2017-08-24T15:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "37cbca100a8be09b868a9280550de5a039600cac" to "277ddd77e391269febfa10a66c62f34f475b4181"



---

archive/issue_comments_446847.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-24T15:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446847",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_446848.json:
```json
{
    "body": "<a id='comment:3'></a>\nErik, could you please check whether this works on Cygwin without your patch?\n\n(one need #23701 first, and re-running `./configure` to register the new package)",
    "created_at": "2017-08-24T15:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446848",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>
Erik, could you please check whether this works on Cygwin without your patch?

(one need #23701 first, and re-running `./configure` to register the new package)



---

archive/issue_comments_446849.json:
```json
{
    "body": "Changing author from \"\" to \"Dima Pasechnik\"",
    "created_at": "2017-08-24T15:16:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446849",
    "user": "https://github.com/dimpase"
}
```

Changing author from "" to "Dima Pasechnik"



---

archive/issue_comments_446850.json:
```json
{
    "body": "<a id='comment:4'></a>\nAh, yes. I remember this.  I'll give it a go.",
    "created_at": "2017-08-25T15:33:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446850",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
Ah, yes. I remember this.  I'll give it a go.



---

archive/issue_comments_446851.json:
```json
{
    "body": "<a id='comment:5'></a>\nI think this branch needs to be updated on the latest version of #23701 since it's using 7.4.6 and this branch is using 7.4.4.",
    "created_at": "2017-08-25T15:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446851",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>
I think this branch needs to be updated on the latest version of #23701 since it's using 7.4.6 and this branch is using 7.4.4.



---

archive/issue_comments_446852.json:
```json
{
    "body": "Changing commit from \"277ddd77e391269febfa10a66c62f34f475b4181\" to \"e53f78480379ce726091927c870c0869cb115b40\"",
    "created_at": "2017-08-25T15:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "277ddd77e391269febfa10a66c62f34f475b4181" to "e53f78480379ce726091927c870c0869cb115b40"



---

archive/issue_comments_446853.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[4d5bbd0](https://git.sagemath.org/sage.git/commit/?id=4d5bbd03ee8762042cde99740e821169c3d3a579)|`libatomic_ops 7.4.6 added as standard pkg`|\n|[e53f784](https://git.sagemath.org/sage.git/commit/?id=e53f78480379ce726091927c870c0869cb115b40)|`Merge branch 'u/dimpase/libatomic_ops' of trac.sagemath.org:sage into gcupdate`|",
    "created_at": "2017-08-25T15:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[4d5bbd0](https://git.sagemath.org/sage.git/commit/?id=4d5bbd03ee8762042cde99740e821169c3d3a579)|`libatomic_ops 7.4.6 added as standard pkg`|
|[e53f784](https://git.sagemath.org/sage.git/commit/?id=e53f78480379ce726091927c870c0869cb115b40)|`Merge branch 'u/dimpase/libatomic_ops' of trac.sagemath.org:sage into gcupdate`|



---

archive/issue_comments_446854.json:
```json
{
    "body": "<a id='comment:7'></a>\nYou're right - done now.",
    "created_at": "2017-08-25T15:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446854",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
You're right - done now.



---

archive/issue_comments_446855.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks--now it's working. Or at least, it's building.  Can't say anything about tests right now.",
    "created_at": "2017-08-25T15:57:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446855",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
Thanks--now it's working. Or at least, it's building.  Can't say anything about tests right now.



---

archive/issue_comments_446856.json:
```json
{
    "body": "<a id='comment:9'></a>\non FreeBSD this needs the patch fixing https://github.com/ivmai/bdwgc/issues/132",
    "created_at": "2017-08-30T12:09:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446856",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
on FreeBSD this needs the patch fixing https://github.com/ivmai/bdwgc/issues/132



---

archive/issue_comments_446857.json:
```json
{
    "body": "Changing commit from \"e53f78480379ce726091927c870c0869cb115b40\" to \"931652aecee2bd1d775ccbd8fcc18aa5d1afb0ee\"",
    "created_at": "2017-08-30T14:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446857",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e53f78480379ce726091927c870c0869cb115b40" to "931652aecee2bd1d775ccbd8fcc18aa5d1afb0ee"



---

archive/issue_comments_446858.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[8166e21](https://git.sagemath.org/sage.git/commit/?id=8166e2103f9a9c92cf72fd90ccc192352b859fb4)|`libatomic_ops 7.6.4 added as standard pkg`|\n|[64da17f](https://git.sagemath.org/sage.git/commit/?id=64da17f2ff0ab29ec2d2d2a80b1c49ee4f054b21)|`Merge branch 'libatomic_ops' into gcupdate`|\n|[82eabae](https://git.sagemath.org/sage.git/commit/?id=82eabaec2123ef6246f2a854a469c7ca3d6d7368)|`patch for FreeBSD`|\n|[931652a](https://git.sagemath.org/sage.git/commit/?id=931652aecee2bd1d775ccbd8fcc18aa5d1afb0ee)|`Merge branch 'u/dimpase/gcupdate' of trac.sagemath.org:sage into gcupdate`|",
    "created_at": "2017-08-30T14:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446858",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[8166e21](https://git.sagemath.org/sage.git/commit/?id=8166e2103f9a9c92cf72fd90ccc192352b859fb4)|`libatomic_ops 7.6.4 added as standard pkg`|
|[64da17f](https://git.sagemath.org/sage.git/commit/?id=64da17f2ff0ab29ec2d2d2a80b1c49ee4f054b21)|`Merge branch 'libatomic_ops' into gcupdate`|
|[82eabae](https://git.sagemath.org/sage.git/commit/?id=82eabaec2123ef6246f2a854a469c7ca3d6d7368)|`patch for FreeBSD`|
|[931652a](https://git.sagemath.org/sage.git/commit/?id=931652aecee2bd1d775ccbd8fcc18aa5d1afb0ee)|`Merge branch 'u/dimpase/gcupdate' of trac.sagemath.org:sage into gcupdate`|



---

archive/issue_comments_446859.json:
```json
{
    "body": "<a id='comment:11'></a>\nOn Linux tests pass, but I can trigger a nasty crash interactively:\n\n```\nsage: from sage.libs.ecl import *\nsage: from sage.interfaces.maxima_lib import <TAB>\n```\nDebian [experimental uses gc 7.4.4](https://people.debian.org/~thansen/debian-sage-status.html), so this would be one to test for this regression, too.",
    "created_at": "2017-09-28T03:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446859",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>
On Linux tests pass, but I can trigger a nasty crash interactively:

```
sage: from sage.libs.ecl import *
sage: from sage.interfaces.maxima_lib import <TAB>
```
Debian [experimental uses gc 7.4.4](https://people.debian.org/~thansen/debian-sage-status.html), so this would be one to test for this regression, too.



---

archive/issue_comments_446860.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-09-28T03:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446860",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_446861.json:
```json
{
    "body": "<a id='comment:12'></a>\nWith GC included in ECL (tagged version 7.5.0 in ECL source, although I haven't checked how canonical this is) I do get the crash in comment 11.",
    "created_at": "2017-09-28T08:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446861",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>
With GC included in ECL (tagged version 7.5.0 in ECL source, although I haven't checked how canonical this is) I do get the crash in comment 11.



---

archive/issue_comments_446862.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[f9ca589](https://git.sagemath.org/sage.git/commit/?id=f9ca58999ad1adb3c71a5be8ae9b14b7d8abbd02)|`Merge branch 'u/dimpase/gcupdate' of trac.sagemath.org:sage into gc76`|\n|[e365c32](https://git.sagemath.org/sage.git/commit/?id=e365c32caf4e82cc9f6a43f066d8314313756248)|`backported patch for FreeBSD support`|",
    "created_at": "2017-10-03T10:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[f9ca589](https://git.sagemath.org/sage.git/commit/?id=f9ca58999ad1adb3c71a5be8ae9b14b7d8abbd02)|`Merge branch 'u/dimpase/gcupdate' of trac.sagemath.org:sage into gc76`|
|[e365c32](https://git.sagemath.org/sage.git/commit/?id=e365c32caf4e82cc9f6a43f066d8314313756248)|`backported patch for FreeBSD support`|



---

archive/issue_comments_446863.json:
```json
{
    "body": "Changing commit from \"931652aecee2bd1d775ccbd8fcc18aa5d1afb0ee\" to \"e365c32caf4e82cc9f6a43f066d8314313756248\"",
    "created_at": "2017-10-03T10:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "931652aecee2bd1d775ccbd8fcc18aa5d1afb0ee" to "e365c32caf4e82cc9f6a43f066d8314313756248"



---

archive/issue_comments_446864.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-03T10:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446864",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_446865.json:
```json
{
    "body": "<a id='comment:15'></a>\nTurns out this is still not building properly on Cygwin.  It fails to produce a shared lib at link time:\n\n```\n/bin/sh ./libtool  --tag=CC   --mode=link gcc   -fexceptions -Wall -Wextra -O2 -g  -fno-strict-aliasing  -version-info 1:3:0 -no-undefined -L/home/embray/src/sagemath/sage/local/lib -Wl,-rpath,/home/embray/src/sagemath/sage/local/lib  -o libgc.la -rpath /home/embray/src/sagemath/sage/local/lib allchblk.lo alloc.lo blacklst.lo checksums.lo dbg_mlc.lo dyn_load.lo finalize.lo gc_dlopen.lo gcj_mlc.lo headers.lo mach_dep.lo malloc.lo mallocx.lo mark.lo mark_rts.lo misc.lo new_hblk.lo obj_map.lo os_dep.lo pcr_interface.lo ptr_chck.lo real_malloc.lo reclaim.lo specific.lo stubborn.lo thread_local_alloc.lo typd_mlc.lo win32_threads.lo     fnlz_mlc.lo    -L/home/embray/src/sagemath/sage/local/lib -latomic_ops\nmv -f cord/.deps/libcord_la-cordxtra.Tpo cord/.deps/libcord_la-cordxtra.Plo\n\n*** Warning: linker path does not have real file for library -latomic_ops.\n*** I have the capability to make that library automatically link in when\n*** you link to this library.  But I can only do this if you have a\n*** shared version of the library, which you do not appear to have\n*** because I did check the linker path looking for a file starting\n*** with libatomic_ops and none of the candidates passed a file format test\n*** using a file magic. Last file checked: /home/embray/src/sagemath/sage/local/lib/libatomic_ops.a\n*** The inter-library dependencies that have been dropped here will be\n*** automatically added whenever a program is linked with this library\n*** or is declared to -dlopen it.\n\n*** Since this library must not contain undefined symbols,\n*** because either the platform does not support them or\n*** it was explicitly requested with -no-undefined,\n*** libtool will only create a static version of it.\nlibtool: link: ar cru .libs/libgc.a  allchblk.o alloc.o blacklst.o checksums.o dbg_mlc.o dyn_load.o finalize.o gc_dlopen.o gcj_mlc.o headers.o mach_dep.o malloc.o mallocx.o mark.o mark_rts.o misc.o new_hblk.o obj_map.o os_dep.o pcr_interface.o ptr_chck.o real_malloc.o reclaim.o specific.o stubborn.o thread_local_alloc.o typd_mlc.o win32_threads.o fnlz_mlc.o\nlibtool: link: ranlib .libs/libgc.a\nlibtool: link: ( cd \".libs\" && rm -f \"libgc.la\" && ln -s \"../libgc.la\" \"libgc.la\" )\n/bin/sh ./libtool  --tag=CC   --mode=link gcc   -fexceptions -Wall -Wextra -O2 -g  -fno-strict-aliasing -version-info 1:3:0 -no-undefined -L/home/embray/src/sagemath/sage/local/lib -Wl,-rpath,/home/embray/src/sagemath/sage/local/lib  -o libcord.la -rpath /home/embray/src/sagemath/sage/local/lib cord/libcord_la-cordbscs.lo cord/libcord_la-cordprnt.lo cord/libcord_la-cordxtra.lo ./libgc.la\n\n*** Warning: This system cannot link to static lib archive ./libgc.la.\n*** I have the capability to make that library automatically link in when\n*** you link to this library.  But I can only do this if you have a\n*** shared version of the library, which you do not appear to have.\n\n*** Warning: linker path does not have real file for library -latomic_ops.\n*** I have the capability to make that library automatically link in when\n*** you link to this library.  But I can only do this if you have a\n*** shared version of the library, which you do not appear to have\n*** because I did check the linker path looking for a file starting\n*** with libatomic_ops and none of the candidates passed a file format test\n*** using a file magic. Last file checked: /home/embray/src/sagemath/sage/local/lib/libatomic_ops.a\n*** The inter-library dependencies that have been dropped here will be\n*** automatically added whenever a program is linked with this library\n*** or is declared to -dlopen it.\n\n*** Since this library must not contain undefined symbols,\n*** because either the platform does not support them or\n*** it was explicitly requested with -no-undefined,\n*** libtool will only create a static version of it.\nlibtool: link: ar cru .libs/libcord.a  cord/libcord_la-cordbscs.o cord/libcord_la-cordprnt.o cord/libcord_la-cordxtra.o\nlibtool: link: ranlib .libs/libcord.a\nlibtool: link: ( cd \".libs\" && rm -f \"libcord.la\" && ln -s \"../libcord.la\" \"libcord.la\" )\n```\n\nIt's probably a minor issue with link flag ordering.  I will investigate and provide a solution.",
    "created_at": "2017-10-09T12:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446865",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
Turns out this is still not building properly on Cygwin.  It fails to produce a shared lib at link time:

```
/bin/sh ./libtool  --tag=CC   --mode=link gcc   -fexceptions -Wall -Wextra -O2 -g  -fno-strict-aliasing  -version-info 1:3:0 -no-undefined -L/home/embray/src/sagemath/sage/local/lib -Wl,-rpath,/home/embray/src/sagemath/sage/local/lib  -o libgc.la -rpath /home/embray/src/sagemath/sage/local/lib allchblk.lo alloc.lo blacklst.lo checksums.lo dbg_mlc.lo dyn_load.lo finalize.lo gc_dlopen.lo gcj_mlc.lo headers.lo mach_dep.lo malloc.lo mallocx.lo mark.lo mark_rts.lo misc.lo new_hblk.lo obj_map.lo os_dep.lo pcr_interface.lo ptr_chck.lo real_malloc.lo reclaim.lo specific.lo stubborn.lo thread_local_alloc.lo typd_mlc.lo win32_threads.lo     fnlz_mlc.lo    -L/home/embray/src/sagemath/sage/local/lib -latomic_ops
mv -f cord/.deps/libcord_la-cordxtra.Tpo cord/.deps/libcord_la-cordxtra.Plo

*** Warning: linker path does not have real file for library -latomic_ops.
*** I have the capability to make that library automatically link in when
*** you link to this library.  But I can only do this if you have a
*** shared version of the library, which you do not appear to have
*** because I did check the linker path looking for a file starting
*** with libatomic_ops and none of the candidates passed a file format test
*** using a file magic. Last file checked: /home/embray/src/sagemath/sage/local/lib/libatomic_ops.a
*** The inter-library dependencies that have been dropped here will be
*** automatically added whenever a program is linked with this library
*** or is declared to -dlopen it.

*** Since this library must not contain undefined symbols,
*** because either the platform does not support them or
*** it was explicitly requested with -no-undefined,
*** libtool will only create a static version of it.
libtool: link: ar cru .libs/libgc.a  allchblk.o alloc.o blacklst.o checksums.o dbg_mlc.o dyn_load.o finalize.o gc_dlopen.o gcj_mlc.o headers.o mach_dep.o malloc.o mallocx.o mark.o mark_rts.o misc.o new_hblk.o obj_map.o os_dep.o pcr_interface.o ptr_chck.o real_malloc.o reclaim.o specific.o stubborn.o thread_local_alloc.o typd_mlc.o win32_threads.o fnlz_mlc.o
libtool: link: ranlib .libs/libgc.a
libtool: link: ( cd ".libs" && rm -f "libgc.la" && ln -s "../libgc.la" "libgc.la" )
/bin/sh ./libtool  --tag=CC   --mode=link gcc   -fexceptions -Wall -Wextra -O2 -g  -fno-strict-aliasing -version-info 1:3:0 -no-undefined -L/home/embray/src/sagemath/sage/local/lib -Wl,-rpath,/home/embray/src/sagemath/sage/local/lib  -o libcord.la -rpath /home/embray/src/sagemath/sage/local/lib cord/libcord_la-cordbscs.lo cord/libcord_la-cordprnt.lo cord/libcord_la-cordxtra.lo ./libgc.la

*** Warning: This system cannot link to static lib archive ./libgc.la.
*** I have the capability to make that library automatically link in when
*** you link to this library.  But I can only do this if you have a
*** shared version of the library, which you do not appear to have.

*** Warning: linker path does not have real file for library -latomic_ops.
*** I have the capability to make that library automatically link in when
*** you link to this library.  But I can only do this if you have a
*** shared version of the library, which you do not appear to have
*** because I did check the linker path looking for a file starting
*** with libatomic_ops and none of the candidates passed a file format test
*** using a file magic. Last file checked: /home/embray/src/sagemath/sage/local/lib/libatomic_ops.a
*** The inter-library dependencies that have been dropped here will be
*** automatically added whenever a program is linked with this library
*** or is declared to -dlopen it.

*** Since this library must not contain undefined symbols,
*** because either the platform does not support them or
*** it was explicitly requested with -no-undefined,
*** libtool will only create a static version of it.
libtool: link: ar cru .libs/libcord.a  cord/libcord_la-cordbscs.o cord/libcord_la-cordprnt.o cord/libcord_la-cordxtra.o
libtool: link: ranlib .libs/libcord.a
libtool: link: ( cd ".libs" && rm -f "libcord.la" && ln -s "../libcord.la" "libcord.la" )
```

It's probably a minor issue with link flag ordering.  I will investigate and provide a solution.



---

archive/issue_comments_446866.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-09T12:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446866",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_446867.json:
```json
{
    "body": "Changing commit from \"e365c32caf4e82cc9f6a43f066d8314313756248\" to \"32b8eeba01a780943c24e58e8108582babeec8b7\"",
    "created_at": "2017-10-09T14:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446867",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e365c32caf4e82cc9f6a43f066d8314313756248" to "32b8eeba01a780943c24e58e8108582babeec8b7"



---

archive/issue_comments_446868.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|\n|[7b0f626](https://git.sagemath.org/sage.git/commit/?id=7b0f626d206ef4b53befb3f15002b11876b850c2)|`Merge branch 'u/dimpase/libatomic_ops' of trac.sagemath.org:sage into laup`|\n|[5c5d8f6](https://git.sagemath.org/sage.git/commit/?id=5c5d8f6c84a0a0b00c8c924a881adc20051d6528)|`remove meaningless flags`|\n|[32b8eeb](https://git.sagemath.org/sage.git/commit/?id=32b8eeba01a780943c24e58e8108582babeec8b7)|`Merge branch 'u/dimpase/gcupdate' of trac.sagemath.org:sage into laup`|",
    "created_at": "2017-10-09T14:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
|[7b0f626](https://git.sagemath.org/sage.git/commit/?id=7b0f626d206ef4b53befb3f15002b11876b850c2)|`Merge branch 'u/dimpase/libatomic_ops' of trac.sagemath.org:sage into laup`|
|[5c5d8f6](https://git.sagemath.org/sage.git/commit/?id=5c5d8f6c84a0a0b00c8c924a881adc20051d6528)|`remove meaningless flags`|
|[32b8eeb](https://git.sagemath.org/sage.git/commit/?id=32b8eeba01a780943c24e58e8108582babeec8b7)|`Merge branch 'u/dimpase/gcupdate' of trac.sagemath.org:sage into laup`|



---

archive/issue_comments_446869.json:
```json
{
    "body": "<a id='comment:17'></a>\nupdated the branch to take into account update on #23701",
    "created_at": "2017-10-09T14:10:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446869",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>
updated the branch to take into account update on #23701



---

archive/issue_comments_446870.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-An update to gc is needed to support arm64/aarch64, see #23687.\n+An update to gc is needed to support arm64/aarch64, see #23687,\n+as well as for FreeBSD support, see #22679.\n \n The source is here: http://www.hboehm.info/gc/gc_source/gc-7.6.0.tar.gz\n \n``````\n",
    "created_at": "2017-10-09T14:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446870",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-An update to gc is needed to support arm64/aarch64, see #23687.
+An update to gc is needed to support arm64/aarch64, see #23687,
+as well as for FreeBSD support, see #22679.
 
 The source is here: http://www.hboehm.info/gc/gc_source/gc-7.6.0.tar.gz
 
``````




---

archive/issue_comments_446871.json:
```json
{
    "body": "<a id='comment:19'></a>\nAh, I should have warned you, I'm about to propose another needed change for #23701.",
    "created_at": "2017-10-09T14:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446871",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
Ah, I should have warned you, I'm about to propose another needed change for #23701.



---

archive/issue_comments_446872.json:
```json
{
    "body": "<a id='comment:20'></a>\nWe should go for 7.6.2:\nhttps://github.com/ivmai/bdwgc/releases/tag/v7.6.2\nIn particular, this includes the patches needed by the FreeBSD port.\nI will update this accordingly.",
    "created_at": "2018-01-06T00:22:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446872",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>
We should go for 7.6.2:
https://github.com/ivmai/bdwgc/releases/tag/v7.6.2
In particular, this includes the patches needed by the FreeBSD port.
I will update this accordingly.



---

archive/issue_comments_446873.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[54e1da7](https://git.sagemath.org/sage.git/commit/?id=54e1da7be205dda93525f2c5b4c57f28ce5bd47c)|`Merge branch 'develop' into libatomic_ops`|\n|[a024f8d](https://git.sagemath.org/sage.git/commit/?id=a024f8d8183ff46dee1b34a73887885bb206dda9)|`7.6.2 is the current version`|\n|[7db1b14](https://git.sagemath.org/sage.git/commit/?id=7db1b1444d1dbb2829f06a78585c8bb40bca5855)|`Merge 'libatomic_ops' -> gcupdate, update to 7.6.2`|",
    "created_at": "2018-01-06T01:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446873",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[54e1da7](https://git.sagemath.org/sage.git/commit/?id=54e1da7be205dda93525f2c5b4c57f28ce5bd47c)|`Merge branch 'develop' into libatomic_ops`|
|[a024f8d](https://git.sagemath.org/sage.git/commit/?id=a024f8d8183ff46dee1b34a73887885bb206dda9)|`7.6.2 is the current version`|
|[7db1b14](https://git.sagemath.org/sage.git/commit/?id=7db1b1444d1dbb2829f06a78585c8bb40bca5855)|`Merge 'libatomic_ops' -> gcupdate, update to 7.6.2`|



---

archive/issue_comments_446874.json:
```json
{
    "body": "Changing commit from \"32b8eeba01a780943c24e58e8108582babeec8b7\" to \"7db1b1444d1dbb2829f06a78585c8bb40bca5855\"",
    "created_at": "2018-01-06T01:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446874",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "32b8eeba01a780943c24e58e8108582babeec8b7" to "7db1b1444d1dbb2829f06a78585c8bb40bca5855"



---

archive/issue_events_060562.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-01-06T01:30:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23700#event-60562"
}
```



---

archive/issue_comments_446875.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n An update to gc is needed to support arm64/aarch64, see #23687,\n as well as for FreeBSD support, see #22679.\n \n-The source is here: http://www.hboehm.info/gc/gc_source/gc-7.6.0.tar.gz\n+The source is here: https://github.com/ivmai/bdwgc/releases/download/v7.6.2/gc-7.6.2.tar.gz\n \n On some platforms this new version also needs libatomic_ops, see #23701\n``````\n",
    "created_at": "2018-01-06T01:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446875",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 An update to gc is needed to support arm64/aarch64, see #23687,
 as well as for FreeBSD support, see #22679.
 
-The source is here: http://www.hboehm.info/gc/gc_source/gc-7.6.0.tar.gz
+The source is here: https://github.com/ivmai/bdwgc/releases/download/v7.6.2/gc-7.6.2.tar.gz
 
 On some platforms this new version also needs libatomic_ops, see #23701
``````




---

archive/issue_comments_446876.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[b97bf99](https://git.sagemath.org/sage.git/commit/?id=b97bf993652a49c9dbc14dd40e2bed2090e70465)|`removing already included patches`|",
    "created_at": "2018-01-06T01:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446876",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[b97bf99](https://git.sagemath.org/sage.git/commit/?id=b97bf993652a49c9dbc14dd40e2bed2090e70465)|`removing already included patches`|



---

archive/issue_comments_446877.json:
```json
{
    "body": "Changing commit from \"7db1b1444d1dbb2829f06a78585c8bb40bca5855\" to \"b97bf993652a49c9dbc14dd40e2bed2090e70465\"",
    "created_at": "2018-01-06T01:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446877",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7db1b1444d1dbb2829f06a78585c8bb40bca5855" to "b97bf993652a49c9dbc14dd40e2bed2090e70465"



---

archive/issue_comments_446878.json:
```json
{
    "body": "Changing commit from \"b97bf993652a49c9dbc14dd40e2bed2090e70465\" to \"e790e65e44e0ff74a9b58ee8366348f3f2ca9a5d\"",
    "created_at": "2018-01-08T14:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b97bf993652a49c9dbc14dd40e2bed2090e70465" to "e790e65e44e0ff74a9b58ee8366348f3f2ca9a5d"



---

archive/issue_comments_446879.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[e790e65](https://git.sagemath.org/sage.git/commit/?id=e790e65e44e0ff74a9b58ee8366348f3f2ca9a5d)|`removing already included patches`|",
    "created_at": "2018-01-08T14:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446879",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[e790e65](https://git.sagemath.org/sage.git/commit/?id=e790e65e44e0ff74a9b58ee8366348f3f2ca9a5d)|`removing already included patches`|



---

archive/issue_comments_446880.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-08T14:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446880",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_446881.json:
```json
{
    "body": "<a id='comment:25'></a>\nOK, another advantage is that all our patches are now upstream!",
    "created_at": "2018-01-08T14:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446881",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>
OK, another advantage is that all our patches are now upstream!



---

archive/issue_comments_446882.json:
```json
{
    "body": "<a id='comment:26'></a>\nI'm trying to get this built on Cygwin--will report back with any findings.",
    "created_at": "2018-01-10T11:11:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446882",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'></a>
I'm trying to get this built on Cygwin--will report back with any findings.



---

archive/issue_comments_446883.json:
```json
{
    "body": "<a id='comment:27'></a>\nIIRC I had some trouble with this on Cygwin (specifically with libatomic_ops), but that was a while ago and I got distracted.  Going to give it another try.",
    "created_at": "2018-02-02T14:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446883",
    "user": "https://github.com/embray"
}
```

<a id='comment:27'></a>
IIRC I had some trouble with this on Cygwin (specifically with libatomic_ops), but that was a while ago and I got distracted.  Going to give it another try.



---

archive/issue_comments_446884.json:
```json
{
    "body": "<a id='comment:28'></a>\nLikewise withticket: ticket:23701#comment:15#comment:23701 would you accept a small update to this for Cygwin?",
    "created_at": "2018-02-02T16:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446884",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'></a>
Likewise withticket: ticket:23701#comment:15#comment:23701 would you accept a small update to this for Cygwin?



---

archive/issue_comments_446885.json:
```json
{
    "body": "<a id='comment:29'></a>\nsure",
    "created_at": "2018-02-02T16:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446885",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>
sure



---

archive/issue_comments_446886.json:
```json
{
    "body": "<a id='comment:30'></a>\nRebased on top of my updates to #23701 and incorporated a minor change for Cygwin.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|\n|[7135b2f](https://git.sagemath.org/sage.git/commit?id=7135b2f0438f7ff6021d72a02e75fabee80ccecd)|`On Cygwin install libatomic_ops as a shared lib only; this is inline with what the official Cygwin package does`|\n|[18813a2](https://git.sagemath.org/sage.git/commit?id=18813a24286e40c935400688e514a989fe5e20a6)|`Convert libatomic_ops to use sage-dist-helpers`|\n|[e57cfc4](https://git.sagemath.org/sage.git/commit?id=e57cfc40bbcefe56ec0b4e009e525dcb457b08b4)|`update to 7.6.0`|\n|[897c091](https://git.sagemath.org/sage.git/commit?id=897c09181e2fc23d1517850e3f981f1d05cd2fac)|`patch for FreeBSD`|\n|[2d923f2](https://git.sagemath.org/sage.git/commit?id=2d923f2667c636e1e760a56124e72e4c2ed7d6c3)|`backported patch for FreeBSD support`|\n|[822cc06](https://git.sagemath.org/sage.git/commit?id=822cc06cfcd46bbb9d567c38f2963865a7f91ae5)|`removing already included patches`|\n|[f6fd533](https://git.sagemath.org/sage.git/commit?id=f6fd533444925c55efe2da905362159f5006806e)|`update gc to 7.6.2`|\n|[c2eb88c](https://git.sagemath.org/sage.git/commit?id=c2eb88c41a904432f8f6e81a6f462ed01f909ee0)|`For Cygwin only builds shared libraries`|",
    "created_at": "2018-02-05T09:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446886",
    "user": "https://github.com/embray"
}
```

<a id='comment:30'></a>
Rebased on top of my updates to #23701 and incorporated a minor change for Cygwin.

---
New commits:
|                                                                                                                                          |                                                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|
|[7135b2f](https://git.sagemath.org/sage.git/commit?id=7135b2f0438f7ff6021d72a02e75fabee80ccecd)|`On Cygwin install libatomic_ops as a shared lib only; this is inline with what the official Cygwin package does`|
|[18813a2](https://git.sagemath.org/sage.git/commit?id=18813a24286e40c935400688e514a989fe5e20a6)|`Convert libatomic_ops to use sage-dist-helpers`|
|[e57cfc4](https://git.sagemath.org/sage.git/commit?id=e57cfc40bbcefe56ec0b4e009e525dcb457b08b4)|`update to 7.6.0`|
|[897c091](https://git.sagemath.org/sage.git/commit?id=897c09181e2fc23d1517850e3f981f1d05cd2fac)|`patch for FreeBSD`|
|[2d923f2](https://git.sagemath.org/sage.git/commit?id=2d923f2667c636e1e760a56124e72e4c2ed7d6c3)|`backported patch for FreeBSD support`|
|[822cc06](https://git.sagemath.org/sage.git/commit?id=822cc06cfcd46bbb9d567c38f2963865a7f91ae5)|`removing already included patches`|
|[f6fd533](https://git.sagemath.org/sage.git/commit?id=f6fd533444925c55efe2da905362159f5006806e)|`update gc to 7.6.2`|
|[c2eb88c](https://git.sagemath.org/sage.git/commit?id=c2eb88c41a904432f8f6e81a6f462ed01f909ee0)|`For Cygwin only builds shared libraries`|



---

archive/issue_comments_446887.json:
```json
{
    "body": "Changing branch from \"u/dimpase/gcupdate\" to \"public/ticket-23700\"",
    "created_at": "2018-02-05T09:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446887",
    "user": "https://github.com/embray"
}
```

Changing branch from "u/dimpase/gcupdate" to "public/ticket-23700"



---

archive/issue_comments_446888.json:
```json
{
    "body": "Changing commit from \"e790e65e44e0ff74a9b58ee8366348f3f2ca9a5d\" to \"c2eb88c41a904432f8f6e81a6f462ed01f909ee0\"",
    "created_at": "2018-02-05T09:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446888",
    "user": "https://github.com/embray"
}
```

Changing commit from "e790e65e44e0ff74a9b58ee8366348f3f2ca9a5d" to "c2eb88c41a904432f8f6e81a6f462ed01f909ee0"



---

archive/issue_comments_446889.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Erik Bray\"",
    "created_at": "2018-02-05T09:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446889",
    "user": "https://github.com/embray"
}
```

Changing reviewer from "" to "Erik Bray"



---

archive/issue_comments_446890.json:
```json
{
    "body": "Changing reviewer from \"Erik Bray\" to \"Erik Bray, Dima Pasechnik\"",
    "created_at": "2018-02-20T16:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446890",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "Erik Bray" to "Erik Bray, Dima Pasechnik"



---

archive/issue_comments_446891.json:
```json
{
    "body": "Changing author from \"Dima Pasechnik\" to \"Dima Pasechnik, Erik Bray\"",
    "created_at": "2018-02-20T16:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446891",
    "user": "https://github.com/dimpase"
}
```

Changing author from "Dima Pasechnik" to "Dima Pasechnik, Erik Bray"



---

archive/issue_comments_446892.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-20T16:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446892",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_446893.json:
```json
{
    "body": "<a id='comment:32'></a>\n\n```\nFound local metadata for gc-7.6.2\nUsing cached file /mnt/disk/home/release/Sage/upstream/gc-7.6.2.tar.gz\ngc-7.6.2\n====================================================\nSetting up build directory for gc-7.6.2\nFinished extraction\nApplying patches from ../patches...\nApplying ../patches/0001-On-Cygwin-use-mprotect-instead-of-mmap-to-set-PROT_N.patch\npatching file os_dep.c\nHunk #1 FAILED at 698.\nHunk #2 FAILED at 2404.\nHunk #3 FAILED at 2515.\n3 out of 3 hunks FAILED -- saving rejects to file os_dep.c.rej\nError applying '../patches/0001-On-Cygwin-use-mprotect-instead-of-mmap-to-set-PROT_N.patch'\n************************************************************************\nError applying patches\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\nexplaining the problem and including the log file\n  /mnt/disk/home/release/Sage/logs/pkgs/gc-7.6.2.log\nDescribe your computer, operating system, etc.\n************************************************************************\n```",
    "created_at": "2018-02-21T19:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446893",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>

```
Found local metadata for gc-7.6.2
Using cached file /mnt/disk/home/release/Sage/upstream/gc-7.6.2.tar.gz
gc-7.6.2
====================================================
Setting up build directory for gc-7.6.2
Finished extraction
Applying patches from ../patches...
Applying ../patches/0001-On-Cygwin-use-mprotect-instead-of-mmap-to-set-PROT_N.patch
patching file os_dep.c
Hunk #1 FAILED at 698.
Hunk #2 FAILED at 2404.
Hunk #3 FAILED at 2515.
3 out of 3 hunks FAILED -- saving rejects to file os_dep.c.rej
Error applying '../patches/0001-On-Cygwin-use-mprotect-instead-of-mmap-to-set-PROT_N.patch'
************************************************************************
Error applying patches
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
explaining the problem and including the log file
  /mnt/disk/home/release/Sage/logs/pkgs/gc-7.6.2.log
Describe your computer, operating system, etc.
************************************************************************
```



---

archive/issue_comments_446894.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-02-21T19:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446894",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_446895.json:
```json
{
    "body": "<a id='comment:33'></a>\nfacepalm...\nwe should bump it up to 7.6.4 anyway.",
    "created_at": "2018-02-21T20:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446895",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>
facepalm...
we should bump it up to 7.6.4 anyway.



---

archive/issue_comments_446896.json:
```json
{
    "body": "<a id='comment:34'></a>\nI believe that the failing patch is already in 7.6.4, see\nhttps://github.com/ivmai/bdwgc/commit/be148f4141ab5d6812928a7bceeb2617384e7fe7",
    "created_at": "2018-02-21T23:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446896",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
I believe that the failing patch is already in 7.6.4, see
https://github.com/ivmai/bdwgc/commit/be148f4141ab5d6812928a7bceeb2617384e7fe7



---

archive/issue_comments_446897.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n An update to gc is needed to support arm64/aarch64, see #23687,\n as well as for FreeBSD support, see #22679.\n \n-The source is here: https://github.com/ivmai/bdwgc/releases/download/v7.6.2/gc-7.6.2.tar.gz\n+The source is here:\n+https://github.com/ivmai/bdwgc/releases/download/v7.6.4/gc-7.6.4.tar.gz\n \n On some platforms this new version also needs libatomic_ops, see #23701\n``````\n",
    "created_at": "2018-02-21T23:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446897",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 An update to gc is needed to support arm64/aarch64, see #23687,
 as well as for FreeBSD support, see #22679.
 
-The source is here: https://github.com/ivmai/bdwgc/releases/download/v7.6.2/gc-7.6.2.tar.gz
+The source is here:
+https://github.com/ivmai/bdwgc/releases/download/v7.6.4/gc-7.6.4.tar.gz
 
 On some platforms this new version also needs libatomic_ops, see #23701
``````




---

archive/issue_comments_446898.json:
```json
{
    "body": "Changing commit from \"c2eb88c41a904432f8f6e81a6f462ed01f909ee0\" to \"0263addf139baf3f62fda637bb220a7491af2f18\"",
    "created_at": "2018-02-21T23:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446898",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "c2eb88c41a904432f8f6e81a6f462ed01f909ee0" to "0263addf139baf3f62fda637bb220a7491af2f18"



---

archive/issue_comments_446899.json:
```json
{
    "body": "Changing branch from \"public/ticket-23700\" to \"u/dimpase/gc764\"",
    "created_at": "2018-02-21T23:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446899",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "public/ticket-23700" to "u/dimpase/gc764"



---

archive/issue_comments_446900.json:
```json
{
    "body": "<a id='comment:35'></a>\nLast 10 new commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[871bc6a](https://git.sagemath.org/sage.git/commit?id=871bc6a620810fad44f76a6b953d13f74e6aca51)|`7.6.2 is the current version`|\n|[71e46a4](https://git.sagemath.org/sage.git/commit?id=71e46a4413ebf5e5f2de9ed407f0b8318f68c3bf)|`On Cygwin install libatomic_ops as a shared lib only; this is inline with what the official Cygwin package does`|\n|[0308045](https://git.sagemath.org/sage.git/commit?id=030804598976d16009b191b517703f7effff3d9e)|`Convert libatomic_ops to use sage-dist-helpers`|\n|[8c47a8a](https://git.sagemath.org/sage.git/commit?id=8c47a8aaabf1a4a702043b6899f82b34c4fc57b6)|`update to 7.6.0`|\n|[6148efd](https://git.sagemath.org/sage.git/commit?id=6148efdd0ed81cea1e61030986e0ab63d82a6152)|`patch for FreeBSD`|\n|[7496a68](https://git.sagemath.org/sage.git/commit?id=7496a689c007de7ba0b9fda2a3b81413b4944bfb)|`backported patch for FreeBSD support`|\n|[674a6d6](https://git.sagemath.org/sage.git/commit?id=674a6d68b99c77465238282321ecbdc7354b457e)|`removing already included patches`|\n|[48766dd](https://git.sagemath.org/sage.git/commit?id=48766dd68e6c0e17c094ddd60c93a60228a8702a)|`update gc to 7.6.2`|\n|[cdb00d4](https://git.sagemath.org/sage.git/commit?id=cdb00d45ec1653366451f0636939b9df62bf8adb)|`For Cygwin only builds shared libraries`|\n|[0263add](https://git.sagemath.org/sage.git/commit?id=0263addf139baf3f62fda637bb220a7491af2f18)|`updated to 7.6.4 and removed patch`|",
    "created_at": "2018-02-21T23:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446900",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>
Last 10 new commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[871bc6a](https://git.sagemath.org/sage.git/commit?id=871bc6a620810fad44f76a6b953d13f74e6aca51)|`7.6.2 is the current version`|
|[71e46a4](https://git.sagemath.org/sage.git/commit?id=71e46a4413ebf5e5f2de9ed407f0b8318f68c3bf)|`On Cygwin install libatomic_ops as a shared lib only; this is inline with what the official Cygwin package does`|
|[0308045](https://git.sagemath.org/sage.git/commit?id=030804598976d16009b191b517703f7effff3d9e)|`Convert libatomic_ops to use sage-dist-helpers`|
|[8c47a8a](https://git.sagemath.org/sage.git/commit?id=8c47a8aaabf1a4a702043b6899f82b34c4fc57b6)|`update to 7.6.0`|
|[6148efd](https://git.sagemath.org/sage.git/commit?id=6148efdd0ed81cea1e61030986e0ab63d82a6152)|`patch for FreeBSD`|
|[7496a68](https://git.sagemath.org/sage.git/commit?id=7496a689c007de7ba0b9fda2a3b81413b4944bfb)|`backported patch for FreeBSD support`|
|[674a6d6](https://git.sagemath.org/sage.git/commit?id=674a6d68b99c77465238282321ecbdc7354b457e)|`removing already included patches`|
|[48766dd](https://git.sagemath.org/sage.git/commit?id=48766dd68e6c0e17c094ddd60c93a60228a8702a)|`update gc to 7.6.2`|
|[cdb00d4](https://git.sagemath.org/sage.git/commit?id=cdb00d45ec1653366451f0636939b9df62bf8adb)|`For Cygwin only builds shared libraries`|
|[0263add](https://git.sagemath.org/sage.git/commit?id=0263addf139baf3f62fda637bb220a7491af2f18)|`updated to 7.6.4 and removed patch`|



---

archive/issue_comments_446901.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-21T23:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446901",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_446902.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n An update to gc is needed to support arm64/aarch64, see #23687,\n as well as for FreeBSD support, see #22679.\n+It also appears to be good to be in sync with Linux boxes that ship make with guile extension (the latter depends on gc, and causes interesting errors, see #24575).\n \n The source is here:\n https://github.com/ivmai/bdwgc/releases/download/v7.6.4/gc-7.6.4.tar.gz\n``````\n",
    "created_at": "2018-02-22T00:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446902",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 An update to gc is needed to support arm64/aarch64, see #23687,
 as well as for FreeBSD support, see #22679.
+It also appears to be good to be in sync with Linux boxes that ship make with guile extension (the latter depends on gc, and causes interesting errors, see #24575).
 
 The source is here:
 https://github.com/ivmai/bdwgc/releases/download/v7.6.4/gc-7.6.4.tar.gz
``````




---

archive/issue_comments_446903.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-27T09:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446903",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_446904.json:
```json
{
    "body": "<a id='comment:37'></a>\n1. `build/pkgs/libatomic_ops/spkg-install`: you are wrongly using \"BoehmGC\".\n\n2. `build/pkgs/libatomic_ops/spkg-install`: instead of a generic variable like `CONFIGURE_FLAGS`, please use `LIBATOMIC_OPS_CONFIGURE` to be more consistent with other packages.\n\n3. `build/pkgs/libatomic_ops/spkg-check`: there is no longer need for the `if [ -z \"$SAGE_LOCAL\" ]; then` boilerplate.",
    "created_at": "2018-02-27T09:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446904",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
1. `build/pkgs/libatomic_ops/spkg-install`: you are wrongly using "BoehmGC".

2. `build/pkgs/libatomic_ops/spkg-install`: instead of a generic variable like `CONFIGURE_FLAGS`, please use `LIBATOMIC_OPS_CONFIGURE` to be more consistent with other packages.

3. `build/pkgs/libatomic_ops/spkg-check`: there is no longer need for the `if [ -z "$SAGE_LOCAL" ]; then` boilerplate.



---

archive/issue_comments_446905.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-27T09:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446905",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_446906.json:
```json
{
    "body": "<a id='comment:38'></a>\nJeroen, `libatomic_ops` has nothing to do with this ticket. It was #23701.\nIf you think #23701 needs an improvement please open another ticket.",
    "created_at": "2018-02-27T09:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446906",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>
Jeroen, `libatomic_ops` has nothing to do with this ticket. It was #23701.
If you think #23701 needs an improvement please open another ticket.



---

archive/issue_comments_446907.json:
```json
{
    "body": "<a id='comment:39'></a>\nThey were just minor comments, nothing serious.",
    "created_at": "2018-02-27T09:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446907",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
They were just minor comments, nothing serious.



---

archive/issue_comments_446908.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [dimpase](#comment%3A38):\n> Jeroen, `libatomic_ops` has nothing to do with this ticket. It was #23701.\n> If you think #23701 needs an improvement please open another ticket.\n\n\nTo be very precise, the commits which are supposedly from #23701 do not actually appear on the branch at #23701. So this ticket needs to be rebased.",
    "created_at": "2018-02-27T10:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446908",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>
Replying to [dimpase](#comment%3A38):
> Jeroen, `libatomic_ops` has nothing to do with this ticket. It was #23701.
> If you think #23701 needs an improvement please open another ticket.


To be very precise, the commits which are supposedly from #23701 do not actually appear on the branch at #23701. So this ticket needs to be rebased.



---

archive/issue_comments_446909.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-27T10:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446909",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_446910.json:
```json
{
    "body": "<a id='comment:41'></a>\nThere is also the obvious missing dependency\n\n```\n[gc-7.6.4] checking for atomic_ops... no\n[gc-7.6.4] checking atomic_ops.h usability... no\n[gc-7.6.4] checking atomic_ops.h presence... no\n[gc-7.6.4] checking for atomic_ops.h... no\n[gc-7.6.4] configure: error: libatomic_ops is required.  You can either install it on\n[gc-7.6.4]                   your system, or fetch and unpack a recent version into the\n[gc-7.6.4]                   source directory and link or rename it to libatomic_ops.\n[gc-7.6.4] Error configuring BoehmGC.\n```",
    "created_at": "2018-02-27T10:47:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446910",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:41'></a>
There is also the obvious missing dependency

```
[gc-7.6.4] checking for atomic_ops... no
[gc-7.6.4] checking atomic_ops.h usability... no
[gc-7.6.4] checking atomic_ops.h presence... no
[gc-7.6.4] checking for atomic_ops.h... no
[gc-7.6.4] configure: error: libatomic_ops is required.  You can either install it on
[gc-7.6.4]                   your system, or fetch and unpack a recent version into the
[gc-7.6.4]                   source directory and link or rename it to libatomic_ops.
[gc-7.6.4] Error configuring BoehmGC.
```



---

archive/issue_comments_446911.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [jdemeyer](#comment%3A41):\n> There is also the obvious missing dependency\n> \n> ```\n> [gc-7.6.4] checking for atomic_ops... no\n> [gc-7.6.4] checking atomic_ops.h usability... no\n> [gc-7.6.4] checking atomic_ops.h presence... no\n> [gc-7.6.4] checking for atomic_ops.h... no\n> [gc-7.6.4] configure: error: libatomic_ops is required.  You can either install it on\n> [gc-7.6.4]                   your system, or fetch and unpack a recent version into the\n> [gc-7.6.4]                   source directory and link or rename it to libatomic_ops.\n> [gc-7.6.4] Error configuring BoehmGC.\n> ```\n\n\ngood catch, but how do you get this? OS/compiler?",
    "created_at": "2018-02-27T11:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446911",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>
Replying to [jdemeyer](#comment%3A41):
> There is also the obvious missing dependency
> 
> ```
> [gc-7.6.4] checking for atomic_ops... no
> [gc-7.6.4] checking atomic_ops.h usability... no
> [gc-7.6.4] checking atomic_ops.h presence... no
> [gc-7.6.4] checking for atomic_ops.h... no
> [gc-7.6.4] configure: error: libatomic_ops is required.  You can either install it on
> [gc-7.6.4]                   your system, or fetch and unpack a recent version into the
> [gc-7.6.4]                   source directory and link or rename it to libatomic_ops.
> [gc-7.6.4] Error configuring BoehmGC.
> ```


good catch, but how do you get this? OS/compiler?



---

archive/issue_comments_446912.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [dimpase](#comment%3A42):\n> OS/compiler?\n\n\nDoesn't matter. Any OS, any compiler.",
    "created_at": "2018-02-27T11:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446912",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
Replying to [dimpase](#comment%3A42):
> OS/compiler?


Doesn't matter. Any OS, any compiler.



---

archive/issue_comments_446913.json:
```json
{
    "body": "Changing commit from \"0263addf139baf3f62fda637bb220a7491af2f18\" to \"4d6eee33939ae419776f36b4cd08406e8212d663\"",
    "created_at": "2018-02-27T11:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446913",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0263addf139baf3f62fda637bb220a7491af2f18" to "4d6eee33939ae419776f36b4cd08406e8212d663"



---

archive/issue_comments_446914.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[4d6eee3](https://git.sagemath.org/sage.git/commit/?id=4d6eee33939ae419776f36b4cd08406e8212d663)|`added deps; addressed reviewer comments: #23700:37`|",
    "created_at": "2018-02-27T11:57:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[4d6eee3](https://git.sagemath.org/sage.git/commit/?id=4d6eee33939ae419776f36b4cd08406e8212d663)|`added deps; addressed reviewer comments: #23700:37`|



---

archive/issue_comments_446915.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-27T11:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446915",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_446916.json:
```json
{
    "body": "<a id='comment:45'></a>\nall fixed, hopefully.",
    "created_at": "2018-02-27T11:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446916",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>
all fixed, hopefully.



---

archive/issue_comments_446917.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-02-27T14:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446917",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_446918.json:
```json
{
    "body": "<a id='comment:46'></a>\n1. This branch still needs to be rebased to the branch at #23701.\n\n2. You should replace `CONFIGURE_FLAGS` -> `LIBATOMIC_OPS_CONFIGURE` everywhere in `build/pkgs/libatomic_ops/spkg-install`",
    "created_at": "2018-02-27T14:25:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446918",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
1. This branch still needs to be rebased to the branch at #23701.

2. You should replace `CONFIGURE_FLAGS` -> `LIBATOMIC_OPS_CONFIGURE` everywhere in `build/pkgs/libatomic_ops/spkg-install`



---

archive/issue_comments_446919.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[4d5bbd0](https://git.sagemath.org/sage.git/commit/?id=4d5bbd03ee8762042cde99740e821169c3d3a579)|`libatomic_ops 7.4.6 added as standard pkg`|\n|[7b0f626](https://git.sagemath.org/sage.git/commit/?id=7b0f626d206ef4b53befb3f15002b11876b850c2)|`Merge branch 'u/dimpase/libatomic_ops' of trac.sagemath.org:sage into laup`|\n|[5c5d8f6](https://git.sagemath.org/sage.git/commit/?id=5c5d8f6c84a0a0b00c8c924a881adc20051d6528)|`remove meaningless flags`|\n|[54e1da7](https://git.sagemath.org/sage.git/commit/?id=54e1da7be205dda93525f2c5b4c57f28ce5bd47c)|`Merge branch 'develop' into libatomic_ops`|\n|[a024f8d](https://git.sagemath.org/sage.git/commit/?id=a024f8d8183ff46dee1b34a73887885bb206dda9)|`7.6.2 is the current version`|\n|[7135b2f](https://git.sagemath.org/sage.git/commit/?id=7135b2f0438f7ff6021d72a02e75fabee80ccecd)|`On Cygwin install libatomic_ops as a shared lib only; this is inline with what the official Cygwin package does`|\n|[18813a2](https://git.sagemath.org/sage.git/commit/?id=18813a24286e40c935400688e514a989fe5e20a6)|`Convert libatomic_ops to use sage-dist-helpers`|\n|[8d05b70](https://git.sagemath.org/sage.git/commit/?id=8d05b7031e8a557f774dcdab21b9ab8dcc44521e)|`Merge branch 'atomic762' into gc764`|\n|[cd63b82](https://git.sagemath.org/sage.git/commit/?id=cd63b82e0d58ecd4961a22e084c6d43af667c7bc)|`LIBATOMIC_OPS_CONFIGURE throughout`|",
    "created_at": "2018-02-27T18:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[4d5bbd0](https://git.sagemath.org/sage.git/commit/?id=4d5bbd03ee8762042cde99740e821169c3d3a579)|`libatomic_ops 7.4.6 added as standard pkg`|
|[7b0f626](https://git.sagemath.org/sage.git/commit/?id=7b0f626d206ef4b53befb3f15002b11876b850c2)|`Merge branch 'u/dimpase/libatomic_ops' of trac.sagemath.org:sage into laup`|
|[5c5d8f6](https://git.sagemath.org/sage.git/commit/?id=5c5d8f6c84a0a0b00c8c924a881adc20051d6528)|`remove meaningless flags`|
|[54e1da7](https://git.sagemath.org/sage.git/commit/?id=54e1da7be205dda93525f2c5b4c57f28ce5bd47c)|`Merge branch 'develop' into libatomic_ops`|
|[a024f8d](https://git.sagemath.org/sage.git/commit/?id=a024f8d8183ff46dee1b34a73887885bb206dda9)|`7.6.2 is the current version`|
|[7135b2f](https://git.sagemath.org/sage.git/commit/?id=7135b2f0438f7ff6021d72a02e75fabee80ccecd)|`On Cygwin install libatomic_ops as a shared lib only; this is inline with what the official Cygwin package does`|
|[18813a2](https://git.sagemath.org/sage.git/commit/?id=18813a24286e40c935400688e514a989fe5e20a6)|`Convert libatomic_ops to use sage-dist-helpers`|
|[8d05b70](https://git.sagemath.org/sage.git/commit/?id=8d05b7031e8a557f774dcdab21b9ab8dcc44521e)|`Merge branch 'atomic762' into gc764`|
|[cd63b82](https://git.sagemath.org/sage.git/commit/?id=cd63b82e0d58ecd4961a22e084c6d43af667c7bc)|`LIBATOMIC_OPS_CONFIGURE throughout`|



---

archive/issue_comments_446920.json:
```json
{
    "body": "Changing commit from \"4d6eee33939ae419776f36b4cd08406e8212d663\" to \"cd63b82e0d58ecd4961a22e084c6d43af667c7bc\"",
    "created_at": "2018-02-27T18:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4d6eee33939ae419776f36b4cd08406e8212d663" to "cd63b82e0d58ecd4961a22e084c6d43af667c7bc"



---

archive/issue_comments_446921.json:
```json
{
    "body": "<a id='comment:48'></a>\nI've addressed the comment 46.",
    "created_at": "2018-02-27T18:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446921",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>
I've addressed the comment 46.



---

archive/issue_comments_446922.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-02-27T18:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446922",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_446923.json:
```json
{
    "body": "<a id='comment:49'></a>\nThe git history is a total mess now... at least messy enough that I'd like to see it merged with the next beta before considering to review it.",
    "created_at": "2018-02-27T19:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446923",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'></a>
The git history is a total mess now... at least messy enough that I'd like to see it merged with the next beta before considering to review it.



---

archive/issue_comments_446924.json:
```json
{
    "body": "<a id='comment:50'></a>\nwell, yes, I tried to rebase, and it was really doing weird stuff, such as creating `LICENSE` file and changing `.gitignore`, so I merged instead.",
    "created_at": "2018-02-27T19:44:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446924",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'></a>
well, yes, I tried to rebase, and it was really doing weird stuff, such as creating `LICENSE` file and changing `.gitignore`, so I merged instead.



---

archive/issue_comments_446925.json:
```json
{
    "body": "<a id='comment:51'></a>\nPerhaps I could try to clean it up?",
    "created_at": "2018-03-02T10:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446925",
    "user": "https://github.com/embray"
}
```

<a id='comment:51'></a>
Perhaps I could try to clean it up?



---

archive/issue_comments_446926.json:
```json
{
    "body": "Changing dependencies from \"#23701\" to \"\"",
    "created_at": "2018-03-05T05:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446926",
    "user": "https://github.com/dimpase"
}
```

Changing dependencies from "#23701" to ""



---

archive/issue_comments_446927.json:
```json
{
    "body": "<a id='comment:52'></a>\nHopefully it is clean enough now, as the merge of #23701 has happened.",
    "created_at": "2018-03-05T05:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446927",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:52'></a>
Hopefully it is clean enough now, as the merge of #23701 has happened.



---

archive/issue_comments_446928.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [dimpase](#comment%3A52):\n> Hopefully it is clean enough now\n\n\nIt's not cleaner than before since the branch didn't change. The fact that #23701 was merged does mean that the diff is easier to read on Trac.",
    "created_at": "2018-03-06T16:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446928",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>
Replying to [dimpase](#comment%3A52):
> Hopefully it is clean enough now


It's not cleaner than before since the branch didn't change. The fact that #23701 was merged does mean that the diff is easier to read on Trac.



---

archive/issue_comments_446929.json:
```json
{
    "body": "<a id='comment:54'></a>\nThe diff is pretty small now: there are largish patches removed, and the rest it really \"admin\".\n\nErik, does the branch work on Cygwin for you now? (You never answered comment 34 above).\nThe commit in the upstream repo seems to do the same job and is authored by you, but it looks differently---hopefully it does the same thing.",
    "created_at": "2018-03-06T17:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446929",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'></a>
The diff is pretty small now: there are largish patches removed, and the rest it really "admin".

Erik, does the branch work on Cygwin for you now? (You never answered comment 34 above).
The commit in the upstream repo seems to do the same job and is authored by you, but it looks differently---hopefully it does the same thing.



---

archive/issue_comments_446930.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-03-06T19:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446930",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_446931.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [dimpase](#comment%3A54):\n> The diff is pretty small now\n\n\nYes, the diff is small but the history remains ugly: there are several commits on this branch which are really duplicates of commits from #23701.\n\nNow, all that doesn't really matter.",
    "created_at": "2018-03-06T19:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446931",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>
Replying to [dimpase](#comment%3A54):
> The diff is pretty small now


Yes, the diff is small but the history remains ugly: there are several commits on this branch which are really duplicates of commits from #23701.

Now, all that doesn't really matter.



---

archive/issue_comments_446932.json:
```json
{
    "body": "Changing reviewer from \"Erik Bray, Dima Pasechnik\" to \"Erik Bray, Dima Pasechnik, Jeroen Demeyer\"",
    "created_at": "2018-03-06T19:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446932",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "Erik Bray, Dima Pasechnik" to "Erik Bray, Dima Pasechnik, Jeroen Demeyer"



---

archive/issue_comments_446933.json:
```json
{
    "body": "<a id='comment:57'></a>\nLGTM. My offer still stands to clean up the commit history if desired, but otherwise I'll let it be.",
    "created_at": "2018-03-07T09:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446933",
    "user": "https://github.com/embray"
}
```

<a id='comment:57'></a>
LGTM. My offer still stands to clean up the commit history if desired, but otherwise I'll let it be.



---

archive/issue_events_060563.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-08T00:02:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23700#event-60563"
}
```



---

archive/issue_comments_446934.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-03-08T00:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446934",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_446935.json:
```json
{
    "body": "Changing branch from \"u/dimpase/gc764\" to \"cd63b82e0d58ecd4961a22e084c6d43af667c7bc\"",
    "created_at": "2018-03-08T00:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23700",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23700#issuecomment-446935",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dimpase/gc764" to "cd63b82e0d58ecd4961a22e084c6d43af667c7bc"
