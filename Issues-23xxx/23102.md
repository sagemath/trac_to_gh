# Issue 23102: Support __richcmp__ in Python classes

archive/issues_022865.json:
```json
{
    "assignees": [],
    "body": "Sage has a lot of functionality to deal with \"rich comparisons\" using `__richcmp__` in Cython or `_richcmp_` in Python or Cython for subclasses of `Element`. However, we are still missing rich comparison support for Python classes which are not subclasses from `Element`.\n\nA good example of this is `RealSet` in `src/sage/sets/real_set.py`. Currently, comparison is implemented using `__cmp__`. Changing this to Python 3 comparisons would normally require 6 methods (`__eq__`, `__ne__`, `__lt__`, `__le__`, `__gt__`, `__ge__`). It would be convenient to support this with just one `__richcmp__` method like in Cython.\n\nThis ticket proposes:\n\n1. Add a decorator `richcmp_method` which adds support for `__richcmp__` to a Python class.\n\n2. Implement `RealSet.__richcmp__` using this.\n\nDepends on #23103\n\nCC:  @fchapoton @tscrim @embray\n\nBranch/Commit: **[`4d1021b`](https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251)**\n\nReviewer: **Travis Scrimshaw, Erik Bray**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23102_\n\n",
    "closed_at": "2017-06-22T07:24:28Z",
    "created_at": "2017-05-30T08:25:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Support __richcmp__ in Python classes",
    "type": "issue",
    "updated_at": "2017-06-22T07:24:28Z",
    "url": "https://github.com/sagemath/sage/issues/23102",
    "user": "https://github.com/jdemeyer"
}
```
Sage has a lot of functionality to deal with "rich comparisons" using `__richcmp__` in Cython or `_richcmp_` in Python or Cython for subclasses of `Element`. However, we are still missing rich comparison support for Python classes which are not subclasses from `Element`.

A good example of this is `RealSet` in `src/sage/sets/real_set.py`. Currently, comparison is implemented using `__cmp__`. Changing this to Python 3 comparisons would normally require 6 methods (`__eq__`, `__ne__`, `__lt__`, `__le__`, `__gt__`, `__ge__`). It would be convenient to support this with just one `__richcmp__` method like in Cython.

This ticket proposes:

1. Add a decorator `richcmp_method` which adds support for `__richcmp__` to a Python class.

2. Implement `RealSet.__richcmp__` using this.

Depends on #23103

CC:  @fchapoton @tscrim @embray

Branch/Commit: **[`4d1021b`](https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251)**

Reviewer: **Travis Scrimshaw, Erik Bray**

Author: **Jeroen Demeyer**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/23102_





---

archive/issue_events_319250.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-30T08:25:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319250"
}
```



---

archive/issue_events_319251.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-30T08:25:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319251"
}
```



---

archive/issue_events_319252.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-30T08:25:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319252"
}
```



---

archive/issue_events_319253.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-30T08:25:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319253"
}
```



---

archive/issue_comments_345872.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Sage has a lot of functionality to deal with \"rich comparisons\" using `__richcmp__` in Cython or `_richcmp_` in Python/Cython for subclasses of `Element`. However, we are still missing rich comparison support for Python classes which are not subclasses from `Element`.\n+Sage has a lot of functionality to deal with \"rich comparisons\" using `__richcmp__` in Cython or `_richcmp_` in Python or Cython for subclasses of `Element`. However, we are still missing rich comparison support for Python classes which are not subclasses from `Element`.\n \n A good example of this is `RealSet` in `src/sage/sets/real_set.py`. Currently, comparison is implement using `__cmp__`. Changing this to Python 3 comparisons would normally require 6 methods (`__eq__`, `__ne__`, `__lt__`, `__le__`, `__gt__`, `__ge__`). It would be convenient to support this with just one `__richcmp__` method like in Cython.\n \n``````\n",
    "created_at": "2017-05-30T08:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345872",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Sage has a lot of functionality to deal with "rich comparisons" using `__richcmp__` in Cython or `_richcmp_` in Python/Cython for subclasses of `Element`. However, we are still missing rich comparison support for Python classes which are not subclasses from `Element`.
+Sage has a lot of functionality to deal with "rich comparisons" using `__richcmp__` in Cython or `_richcmp_` in Python or Cython for subclasses of `Element`. However, we are still missing rich comparison support for Python classes which are not subclasses from `Element`.
 
 A good example of this is `RealSet` in `src/sage/sets/real_set.py`. Currently, comparison is implement using `__cmp__`. Changing this to Python 3 comparisons would normally require 6 methods (`__eq__`, `__ne__`, `__lt__`, `__le__`, `__gt__`, `__ge__`). It would be convenient to support this with just one `__richcmp__` method like in Cython.
 
``````




---

archive/issue_comments_345873.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhat about using `@total_ordering` to reduce the number of rich comparison methods? I know this is an abuse of terminology, but it does mean we only need to define `__eq__` and `__lt__`. However, I generally do like the idea of having a consistent API.",
    "created_at": "2017-05-30T14:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345873",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

What about using `@total_ordering` to reduce the number of rich comparison methods? I know this is an abuse of terminology, but it does mean we only need to define `__eq__` and `__lt__`. However, I generally do like the idea of having a consistent API.



---

archive/issue_comments_345874.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/23102](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23102)**",
    "created_at": "2017-05-30T14:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345874",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/23102](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23102)**



---

archive/issue_comments_345875.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@tscrim](#comment%3A2):\n> What about using `@total_ordering` to reduce the number of rich comparison methods?\n\n1. `@total_ordering` reduces the number of rich comparison methods from 6 to 2. This ticket reduces it from 6 to 1.\n\n2. `@total_ordering` is less efficient (if you only have `==` and `<`, you might need two calls to determine `<=`)\n  \n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/256bf191ab0472303bb11e105a246106e894c4ec\"><code>256bf19</code></a></td><td><code>Move richcmp stuff to new file richcmp.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b591b78190f41d6073729a860868edf4ab95a05c\"><code>b591b78</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1\"><code>47f97ec</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr></table>\n",
    "created_at": "2017-05-30T15:00:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345875",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@tscrim](#comment%3A2):
> What about using `@total_ordering` to reduce the number of rich comparison methods?

1. `@total_ordering` reduces the number of rich comparison methods from 6 to 2. This ticket reduces it from 6 to 1.

2. `@total_ordering` is less efficient (if you only have `==` and `<`, you might need two calls to determine `<=`)
  
---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/256bf191ab0472303bb11e105a246106e894c4ec"><code>256bf19</code></a></td><td><code>Move richcmp stuff to new file richcmp.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b591b78190f41d6073729a860868edf4ab95a05c"><code>b591b78</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1"><code>47f97ec</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr></table>




---

archive/issue_comments_345876.json:
```json
{
    "body": "Commit: **[`47f97ec`](https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1)**",
    "created_at": "2017-05-30T15:00:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345876",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`47f97ec`](https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1)**



---

archive/issue_events_319254.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-30T15:01:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319254"
}
```



---

archive/issue_comments_345877.json:
```json
{
    "body": "Dependencies: **#23103**",
    "created_at": "2017-05-30T15:01:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345877",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#23103**



---

archive/issue_comments_345878.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Sage has a lot of functionality to deal with \"rich comparisons\" using `__richcmp__` in Cython or `_richcmp_` in Python or Cython for subclasses of `Element`. However, we are still missing rich comparison support for Python classes which are not subclasses from `Element`.\n \n-A good example of this is `RealSet` in `src/sage/sets/real_set.py`. Currently, comparison is implement using `__cmp__`. Changing this to Python 3 comparisons would normally require 6 methods (`__eq__`, `__ne__`, `__lt__`, `__le__`, `__gt__`, `__ge__`). It would be convenient to support this with just one `__richcmp__` method like in Cython.\n+A good example of this is `RealSet` in `src/sage/sets/real_set.py`. Currently, comparison is implemented using `__cmp__`. Changing this to Python 3 comparisons would normally require 6 methods (`__eq__`, `__ne__`, `__lt__`, `__le__`, `__gt__`, `__ge__`). It would be convenient to support this with just one `__richcmp__` method like in Cython.\n \n This ticket proposes:\n \n``````\n",
    "created_at": "2017-05-30T15:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345878",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Sage has a lot of functionality to deal with "rich comparisons" using `__richcmp__` in Cython or `_richcmp_` in Python or Cython for subclasses of `Element`. However, we are still missing rich comparison support for Python classes which are not subclasses from `Element`.
 
-A good example of this is `RealSet` in `src/sage/sets/real_set.py`. Currently, comparison is implement using `__cmp__`. Changing this to Python 3 comparisons would normally require 6 methods (`__eq__`, `__ne__`, `__lt__`, `__le__`, `__gt__`, `__ge__`). It would be convenient to support this with just one `__richcmp__` method like in Cython.
+A good example of this is `RealSet` in `src/sage/sets/real_set.py`. Currently, comparison is implemented using `__cmp__`. Changing this to Python 3 comparisons would normally require 6 methods (`__eq__`, `__ne__`, `__lt__`, `__le__`, `__gt__`, `__ge__`). It would be convenient to support this with just one `__richcmp__` method like in Cython.
 
 This ticket proposes:
 
``````




---

archive/issue_comments_345879.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNote that from #22828, there is\n\n```\ndef richcmp_by_eq_and_lt(left, right, op):\n```\nin\n\n```\nsrc/sage/rings/asymptotic/misc.py\n```\nthat should also be moved to the common new place.",
    "created_at": "2017-05-31T06:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345879",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

Note that from #22828, there is

```
def richcmp_by_eq_and_lt(left, right, op):
```
in

```
src/sage/rings/asymptotic/misc.py
```
that should also be moved to the common new place.



---

archive/issue_comments_345880.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@fchapoton](#comment%3A8):\n> Note that from #22828, there is\n> \n> ```\n> def richcmp_by_eq_and_lt(left, right, op):\n> ```\n> in\n> \n> ```\n> src/sage/rings/asymptotic/misc.py\n> ```\n> that should also be moved to the common new place.\n\nMakes sense. I created #23109 for that.",
    "created_at": "2017-05-31T07:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345880",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@fchapoton](#comment%3A8):
> Note that from #22828, there is
> 
> ```
> def richcmp_by_eq_and_lt(left, right, op):
> ```
> in
> 
> ```
> src/sage/rings/asymptotic/misc.py
> ```
> that should also be moved to the common new place.

Makes sense. I created #23109 for that.



---

archive/issue_comments_345881.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nTypo in `richcmp_method`: `mtehod`. Have you run some timings to compare how this works versus direct implementation versus `@total_ordering` in Python classes? I can do this, but not for 2-3 days because I will be traveling.",
    "created_at": "2017-06-01T05:20:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345881",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Typo in `richcmp_method`: `mtehod`. Have you run some timings to compare how this works versus direct implementation versus `@total_ordering` in Python classes? I can do this, but not for 2-3 days because I will be traveling.



---

archive/issue_comments_345882.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@tscrim](#comment%3A10):\n> Have you run some timings to compare how this works versus direct implementation versus `@total_ordering` in Python classes? I can do this, but not for 2-3 days because I will be traveling.\n\nI just did that, see [attachment: cmp-timing.py](https://github.com/sagemath/sage/files/ticket23102/cmp-timing.py.gz)\n\nFirst of all, for a plain equality check (`@total_ordering` is not involved in this), the timing is almost the same for `__eq__` and `__richcmp__`, the latter being just slightly slower:\n\n```\nsage: load(\"cmp-timing.py\")\nsage: timeit('A1 == A2', number=1000000, repeat=100)\n1000000 loops, best of 100: 281 ns per loop\nsage: timeit('B1 == B2', number=1000000, repeat=100)\n1000000 loops, best of 100: 293 ns per loop\n```\n\nNow, comparisons involving `@total_ordering` take almost twice or three times as much time:\n\n```\nsage: load(\"cmp-timing.py\")\nsage: timeit('A1 > A2', number=1000000, repeat=20)   # calls A2.__lt__(A1)\n1000000 loops, best of 20: 557 ns per loop\nsage: timeit('B1 > B2', number=1000000, repeat=20)\n1000000 loops, best of 20: 292 ns per loop\n```\n\n```\nsage: load(\"cmp-timing.py\")\nsage: timeit('A2 <= A1', number=1000000, repeat=20)  # Calls A2.__lt__(A1) and A2.__eq__(A1)\n1000000 loops, best of 20: 820 ns per loop\nsage: timeit('B2 <= B1', number=1000000, repeat=20)\n1000000 loops, best of 20: 293 ns per loop\n```\nAs one might expect, the time is roughly linear in the number of Python method calls.",
    "created_at": "2017-06-01T08:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345882",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@tscrim](#comment%3A10):
> Have you run some timings to compare how this works versus direct implementation versus `@total_ordering` in Python classes? I can do this, but not for 2-3 days because I will be traveling.

I just did that, see [attachment: cmp-timing.py](https://github.com/sagemath/sage/files/ticket23102/cmp-timing.py.gz)

First of all, for a plain equality check (`@total_ordering` is not involved in this), the timing is almost the same for `__eq__` and `__richcmp__`, the latter being just slightly slower:

```
sage: load("cmp-timing.py")
sage: timeit('A1 == A2', number=1000000, repeat=100)
1000000 loops, best of 100: 281 ns per loop
sage: timeit('B1 == B2', number=1000000, repeat=100)
1000000 loops, best of 100: 293 ns per loop
```

Now, comparisons involving `@total_ordering` take almost twice or three times as much time:

```
sage: load("cmp-timing.py")
sage: timeit('A1 > A2', number=1000000, repeat=20)   # calls A2.__lt__(A1)
1000000 loops, best of 20: 557 ns per loop
sage: timeit('B1 > B2', number=1000000, repeat=20)
1000000 loops, best of 20: 292 ns per loop
```

```
sage: load("cmp-timing.py")
sage: timeit('A2 <= A1', number=1000000, repeat=20)  # Calls A2.__lt__(A1) and A2.__eq__(A1)
1000000 loops, best of 20: 820 ns per loop
sage: timeit('B2 <= B1', number=1000000, repeat=20)
1000000 loops, best of 20: 293 ns per loop
```
As one might expect, the time is roughly linear in the number of Python method calls.



---

archive/issue_comments_345883.json:
```json
{
    "body": "Attachment: **[cmp-timing.py.gz](https://github.com/sagemath/sage/files/ticket23102/cmp-timing.py.gz)**\n\nSmall script to test timing",
    "created_at": "2017-06-01T08:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345883",
    "user": "https://github.com/jdemeyer"
}
```

Attachment: **[cmp-timing.py.gz](https://github.com/sagemath/sage/files/ticket23102/cmp-timing.py.gz)**

Small script to test timing



---

archive/issue_comments_345884.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-06-01T08:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345884",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_345885.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThank you for running those timings. That is more than enough to convince me. If tests pass, you can set a positive review on my behalf. Sleepy time for me now. :)",
    "created_at": "2017-06-01T08:25:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345885",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Thank you for running those timings. That is more than enough to convince me. If tests pass, you can set a positive review on my behalf. Sleepy time for me now. :)



---

archive/issue_comments_345886.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de\"><code>acfd0aa</code></a></td><td><code>Typo</code></td></tr></table>\n",
    "created_at": "2017-06-01T09:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345886",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de"><code>acfd0aa</code></a></td><td><code>Typo</code></td></tr></table>




---

archive/issue_comments_345887.json:
```json
{
    "body": "Changed commit from **[`47f97ec`](https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1)** to **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)**",
    "created_at": "2017-06-01T09:30:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345887",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`47f97ec`](https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1)** to **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)**



---

archive/issue_events_319255.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-01T09:31:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319255"
}
```



---

archive/issue_events_319256.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-01T09:31:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319256"
}
```



---

archive/issue_comments_345888.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/23102](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23102)** to **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)**",
    "created_at": "2017-06-07T20:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345888",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/23102](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23102)** to **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)**



---

archive/issue_events_319257.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-07T20:13:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319257"
}
```



---

archive/issue_events_319258.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-07T20:13:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319258"
}
```



---

archive/issue_comments_345889.json:
```json
{
    "body": "Changed commit from **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)** to none",
    "created_at": "2017-06-09T18:37:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345889",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)** to none



---

archive/issue_comments_345890.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThis happened randomly:\n\n```\nsage -t --long src/sage/sets/real_set.py\n**********************************************************************\nFile \"src/sage/sets/real_set.py\", line 701, in sage.sets.real_set.RealSet.__richcmp__\nFailed example:\n    cmp(I1, I2)\nExpected:\n    1\nGot:\n    -1\n**********************************************************************\nFile \"src/sage/sets/real_set.py\", line 703, in sage.sets.real_set.RealSet.__richcmp__\nFailed example:\n    sorted([I1, I2])\nExpected:\n    [(0, 5], (1, 3]]\nGot:\n    [(1, 3], (0, 5]]\n**********************************************************************\n1 item had failures:\n   2 of   6 in sage.sets.real_set.RealSet.__richcmp__\n    [203 tests, 2 failures, 0.55 s]\n```",
    "created_at": "2017-06-09T18:37:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345890",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

This happened randomly:

```
sage -t --long src/sage/sets/real_set.py
**********************************************************************
File "src/sage/sets/real_set.py", line 701, in sage.sets.real_set.RealSet.__richcmp__
Failed example:
    cmp(I1, I2)
Expected:
    1
Got:
    -1
**********************************************************************
File "src/sage/sets/real_set.py", line 703, in sage.sets.real_set.RealSet.__richcmp__
Failed example:
    sorted([I1, I2])
Expected:
    [(0, 5], (1, 3]]
Got:
    [(1, 3], (0, 5]]
**********************************************************************
1 item had failures:
   2 of   6 in sage.sets.real_set.RealSet.__richcmp__
    [203 tests, 2 failures, 0.55 s]
```



---

archive/issue_events_319259.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-09T18:37:06Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319259"
}
```



---

archive/issue_comments_345891.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nConfirmed. It seems that the category framework gets in the way. Commenting out this line fixes the problem\n\n```\nParent.__init__(self, category = Sets())\n```",
    "created_at": "2017-06-12T13:32:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345891",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Confirmed. It seems that the category framework gets in the way. Commenting out this line fixes the problem

```
Parent.__init__(self, category = Sets())
```



---

archive/issue_comments_345892.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI really would not want to go backwards in category initalization for parents. Although the category methods should not be interfering. I don't see how they would cause problems...",
    "created_at": "2017-06-12T13:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345892",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

I really would not want to go backwards in category initalization for parents. Although the category methods should not be interfering. I don't see how they would cause problems...



---

archive/issue_comments_345893.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@tscrim](#comment%3A18):\n> I really would not want to go backwards in category initalization for parents.\n\nSorry, I didn't say that we should remove that line. Just that removing that line fixes this specific problem that `__richcmp__` doesn't work.",
    "created_at": "2017-06-12T13:42:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345893",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@tscrim](#comment%3A18):
> I really would not want to go backwards in category initalization for parents.

Sorry, I didn't say that we should remove that line. Just that removing that line fixes this specific problem that `__richcmp__` doesn't work.



---

archive/issue_comments_345894.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOK, the real problem is that the `richcmp_method` decorator doesn't work with subclassing. It only works on the class where it is defined, not on subclasses. Given that the category framework creates a `RealSet_with_category` subclass, this breaks.",
    "created_at": "2017-06-12T13:46:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345894",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

OK, the real problem is that the `richcmp_method` decorator doesn't work with subclassing. It only works on the class where it is defined, not on subclasses. Given that the category framework creates a `RealSet_with_category` subclass, this breaks.



---

archive/issue_comments_345895.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jdemeyer](#comment%3A19):\n> Replying to [@tscrim](#comment%3A18):\n> > I really would not want to go backwards in category initalization for parents.\n\n> \n> Sorry, I didn't say that we should remove that line. Just that removing that line fixes this specific problem that `__richcmp__` doesn't work.\n\nI didn't mean to imply you were. I just wanted to make it clear that we didn't want to do this in case someone else came along and saw this.",
    "created_at": "2017-06-12T13:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345895",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jdemeyer](#comment%3A19):
> Replying to [@tscrim](#comment%3A18):
> > I really would not want to go backwards in category initalization for parents.

> 
> Sorry, I didn't say that we should remove that line. Just that removing that line fixes this specific problem that `__richcmp__` doesn't work.

I didn't mean to imply you were. I just wanted to make it clear that we didn't want to do this in case someone else came along and saw this.



---

archive/issue_comments_345896.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jdemeyer](#comment%3A20):\n> OK, the real problem is that the `richcmp_method` decorator doesn't work with subclassing. It only works on the class where it is defined, not on subclasses. Given that the category framework creates a `RealSet_with_category` subclass, this breaks.\n\nPerhaps the way to go would be to bind `__eq__` and friends to a particular class that compare with the `__richcmp__`?",
    "created_at": "2017-06-12T14:07:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345896",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jdemeyer](#comment%3A20):
> OK, the real problem is that the `richcmp_method` decorator doesn't work with subclassing. It only works on the class where it is defined, not on subclasses. Given that the category framework creates a `RealSet_with_category` subclass, this breaks.

Perhaps the way to go would be to bind `__eq__` and friends to a particular class that compare with the `__richcmp__`?



---

archive/issue_comments_345897.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nOK, I think the problem is that my trick doesn't add slot wrappers (attributes like `__eq__` on the class). I'll try to add those wrappers and see if that works.",
    "created_at": "2017-06-12T15:10:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345897",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

OK, I think the problem is that my trick doesn't add slot wrappers (attributes like `__eq__` on the class). I'll try to add those wrappers and see if that works.



---

archive/issue_comments_345898.json:
```json
{
    "body": "Changed branch from **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)** to **[u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)**",
    "created_at": "2017-06-14T08:32:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345898",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)** to **[u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)**



---

archive/issue_comments_345899.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b591b78190f41d6073729a860868edf4ab95a05c\"><code>b591b78</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1\"><code>47f97ec</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de\"><code>acfd0aa</code></a></td><td><code>Typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1569dda377326cdae9cbae8649fed7fd36640e1f\"><code>1569dda</code></a></td><td><code>Merge tag '8.0.beta10' into t/23102/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2\"><code>f52d5c3</code></a></td><td><code>Install slot wrappers for rich comparison methods</code></td></tr></table>\n",
    "created_at": "2017-06-14T08:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345899",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b591b78190f41d6073729a860868edf4ab95a05c"><code>b591b78</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1"><code>47f97ec</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de"><code>acfd0aa</code></a></td><td><code>Typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1569dda377326cdae9cbae8649fed7fd36640e1f"><code>1569dda</code></a></td><td><code>Merge tag '8.0.beta10' into t/23102/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2"><code>f52d5c3</code></a></td><td><code>Install slot wrappers for rich comparison methods</code></td></tr></table>




---

archive/issue_events_319260.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-14T08:33:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319260"
}
```



---

archive/issue_comments_345900.json:
```json
{
    "body": "Commit: **[`f52d5c3`](https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2)**",
    "created_at": "2017-06-14T08:33:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345900",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`f52d5c3`](https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2)**



---

archive/issue_events_319261.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-14T12:18:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319261"
}
```



---

archive/issue_events_319262.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-14T12:18:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319262"
}
```



---

archive/issue_comments_345901.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIf I understand correctly what is going on, then yes, this should work in general. So I'm going to set it to a positive review since it works AFAIK.\n\nErik, I'm cc-ing you in case you know something about the inner workings of Python and can confirm the code looks proper. If you don't, then no need to respond.",
    "created_at": "2017-06-14T12:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345901",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">comment:26</div>

If I understand correctly what is going on, then yes, this should work in general. So I'm going to set it to a positive review since it works AFAIK.

Erik, I'm cc-ing you in case you know something about the inner workings of Python and can confirm the code looks proper. If you don't, then no need to respond.



---

archive/issue_comments_345902.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOf course, none of this slot stuff is documented anywhere in the Python docs... the only way to figure it out is to read the Python source code.",
    "created_at": "2017-06-14T12:23:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345902",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Of course, none of this slot stuff is documented anywhere in the Python docs... the only way to figure it out is to read the Python source code.



---

archive/issue_comments_345903.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWhy\n\n```\nif type(slotwrapper).__name__ != 'wrapper_descriptor':\n```\n\nand not explicitly something like\n\n```\nif type(slotwrapper) != PyWrapperDescr_Type:\n```\n?",
    "created_at": "2017-06-15T08:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345903",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">comment:28</div>

Why

```
if type(slotwrapper).__name__ != 'wrapper_descriptor':
```

and not explicitly something like

```
if type(slotwrapper) != PyWrapperDescr_Type:
```
?



---

archive/issue_events_319263.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-06-15T08:44:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319263"
}
```



---

archive/issue_events_319264.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-06-15T08:44:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319264"
}
```



---

archive/issue_comments_345904.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOne other minor concern:  If a class has both `__richcmp__` and, say, `__lt__`, this will just silently override the `__lt__`.  For consistency with Cython, I'd say having both should be an outright error (with Cython it will just raise a compiler error if you try to define `__lt__` in a `cdef` class).  So maybe it should raise a `RuntimeError` if a class tries to define both.\n\nBut that also raises the question of what to do with subclasses.  If you subclass a class with `__richcmp__` and add an `__lt__` in the subclass, the subclass's `__lt__` should take over.  I *think* that's what will happen anyways.\n\nBut what if you subclass a class that has `__lt__` and add `__richcmp__` in the subclass?",
    "created_at": "2017-06-15T09:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345904",
    "user": "https://github.com/embray"
}
```

<div id="comment:29" align="right">comment:29</div>

One other minor concern:  If a class has both `__richcmp__` and, say, `__lt__`, this will just silently override the `__lt__`.  For consistency with Cython, I'd say having both should be an outright error (with Cython it will just raise a compiler error if you try to define `__lt__` in a `cdef` class).  So maybe it should raise a `RuntimeError` if a class tries to define both.

But that also raises the question of what to do with subclasses.  If you subclass a class with `__richcmp__` and add an `__lt__` in the subclass, the subclass's `__lt__` should take over.  I *think* that's what will happen anyways.

But what if you subclass a class that has `__lt__` and add `__richcmp__` in the subclass?



---

archive/issue_comments_345905.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n> But what if you subclass a class that has `__lt__` and add `__richcmp__` in the subclass?\n\nTo answer my own question, this wouldn't be a concern I guess since this will just override the parent class's `__lt__` and that's to be expected.\n\nIt would be good to have a test of subclassing and overriding one of the comparison operators though.",
    "created_at": "2017-06-15T09:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345905",
    "user": "https://github.com/embray"
}
```

<div id="comment:30" align="right">comment:30</div>

> But what if you subclass a class that has `__lt__` and add `__richcmp__` in the subclass?

To answer my own question, this wouldn't be a concern I guess since this will just override the parent class's `__lt__` and that's to be expected.

It would be good to have a test of subclassing and overriding one of the comparison operators though.



---

archive/issue_comments_345906.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)** to **[`f52d5c3`](https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2)**",
    "created_at": "2017-06-15T16:45:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345906",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)** to **[`f52d5c3`](https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2)**



---

archive/issue_events_319265.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-15T16:45:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319265"
}
```



---

archive/issue_events_319266.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-15T16:45:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319266"
}
```



---

archive/issue_events_319267.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-15T16:52:30Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319267"
}
```



---

archive/issue_comments_345907.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nready to merge == positive review != let somebody else look at it first, Travis",
    "created_at": "2017-06-15T16:52:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345907",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

ready to merge == positive review != let somebody else look at it first, Travis



---

archive/issue_comments_345908.json:
```json
{
    "body": "Changed commit from **[`f52d5c3`](https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2)** to none",
    "created_at": "2017-06-15T16:52:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345908",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`f52d5c3`](https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2)** to none



---

archive/issue_comments_345909.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nSo, is it merged or not? I think Erik's comments make sense, but they could easily be addressed in a follow-up ticket.",
    "created_at": "2017-06-15T19:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345909",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

So, is it merged or not? I think Erik's comments make sense, but they could easily be addressed in a follow-up ticket.



---

archive/issue_comments_345910.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nNot merged",
    "created_at": "2017-06-15T22:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345910",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">comment:34</div>

Not merged



---

archive/issue_comments_345911.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nThey could definitely be addressed in a followup ticket (if indeed my comments need addressing at all).",
    "created_at": "2017-06-16T08:07:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345911",
    "user": "https://github.com/embray"
}
```

<div id="comment:35" align="right">comment:35</div>

They could definitely be addressed in a followup ticket (if indeed my comments need addressing at all).



---

archive/issue_comments_345912.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nAs an aside, I wonder if there's ever been a proposal to actually support `__richcmp__` in user-defined classes (in a manner similar to this, such that it would automatically implment the individual comparison methods).  And if it has been proposed I wonder why it was rejected.  I'm going to search around a bit for answers...",
    "created_at": "2017-06-16T08:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345912",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">comment:36</div>

As an aside, I wonder if there's ever been a proposal to actually support `__richcmp__` in user-defined classes (in a manner similar to this, such that it would automatically implment the individual comparison methods).  And if it has been proposed I wonder why it was rejected.  I'm going to search around a bit for answers...



---

archive/issue_comments_345913.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nA close reading of PEP-207 reveals:\n\n> The choice of six special methods was made over a single (e.g. `__richcmp__`) method to allow the dispatching on the opcode to be performed at the level of the C implementation rather than the user-defined method.\n\nwhich makes perfect sense. But, if as Sage demonstrates, there's a usecase for a single user-defined `__richcmp__` I don't see why it shouldn't be an option...",
    "created_at": "2017-06-16T08:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345913",
    "user": "https://github.com/embray"
}
```

<div id="comment:37" align="right">comment:37</div>

A close reading of PEP-207 reveals:

> The choice of six special methods was made over a single (e.g. `__richcmp__`) method to allow the dispatching on the opcode to be performed at the level of the C implementation rather than the user-defined method.

which makes perfect sense. But, if as Sage demonstrates, there's a usecase for a single user-defined `__richcmp__` I don't see why it shouldn't be an option...



---

archive/issue_events_319268.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-16T13:16:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319268"
}
```



---

archive/issue_comments_345914.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nAs Jeroen and Erik said, I felt it could be merged into Sage and further changes could be handled on followup tickets.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b591b78190f41d6073729a860868edf4ab95a05c\"><code>b591b78</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1\"><code>47f97ec</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de\"><code>acfd0aa</code></a></td><td><code>Typo</code></td></tr></table>\n",
    "created_at": "2017-06-16T13:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345914",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">comment:38</div>

As Jeroen and Erik said, I felt it could be merged into Sage and further changes could be handled on followup tickets.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b591b78190f41d6073729a860868edf4ab95a05c"><code>b591b78</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47f97ec88f373697faafeb84579becb064213dc1"><code>47f97ec</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de"><code>acfd0aa</code></a></td><td><code>Typo</code></td></tr></table>




---

archive/issue_comments_345915.json:
```json
{
    "body": "Commit: **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)**",
    "created_at": "2017-06-16T13:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345915",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)**



---

archive/issue_comments_345916.json:
```json
{
    "body": "Changed branch from **[`f52d5c3`](https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2)** to **[u/jdemeyer/ticket/23102](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23102)**",
    "created_at": "2017-06-16T13:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345916",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[`f52d5c3`](https://github.com/sagemath/sagetrac-mirror/commit/f52d5c341e965716f799530424cf242c6a5547c2)** to **[u/jdemeyer/ticket/23102](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23102)**



---

archive/issue_comments_345917.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI'll work on it right now.",
    "created_at": "2017-06-16T13:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345917",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

I'll work on it right now.



---

archive/issue_comments_345918.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49b6f76c43231e4bf600b187b32fed6b625c6adb\"><code>49b6f76</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d343d9d1f1d5c9b7e35f518a1f85604082e51ca0\"><code>d343d9d</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3aac3ccf0141d51e4c97ea852942b8c2196b9a13\"><code>3aac3cc</code></a></td><td><code>Typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657\"><code>86e9fcf</code></a></td><td><code>Install slot wrappers for rich comparison methods</code></td></tr></table>\n",
    "created_at": "2017-06-16T13:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345918",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49b6f76c43231e4bf600b187b32fed6b625c6adb"><code>49b6f76</code></a></td><td><code>Support `__richcmp__` in Python classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d343d9d1f1d5c9b7e35f518a1f85604082e51ca0"><code>d343d9d</code></a></td><td><code>Implement RealSet comparisons using __richcmp__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3aac3ccf0141d51e4c97ea852942b8c2196b9a13"><code>3aac3cc</code></a></td><td><code>Typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657"><code>86e9fcf</code></a></td><td><code>Install slot wrappers for rich comparison methods</code></td></tr></table>




---

archive/issue_comments_345919.json:
```json
{
    "body": "Changed commit from **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)** to **[`86e9fcf`](https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657)**",
    "created_at": "2017-06-16T13:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345919",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`acfd0aa`](https://github.com/sagemath/sagetrac-mirror/commit/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de)** to **[`86e9fcf`](https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657)**



---

archive/issue_comments_345920.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nTravis: you put back the wrong branch. This is the original branch, rebased to 8.0.beta11.",
    "created_at": "2017-06-16T13:41:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345920",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">comment:41</div>

Travis: you put back the wrong branch. This is the original branch, rebased to 8.0.beta11.



---

archive/issue_comments_345921.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nAh, sorry; I had thought `u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de` was just a trac formatting error.",
    "created_at": "2017-06-16T13:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345921",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:42" align="right">comment:42</div>

Ah, sorry; I had thought `u/jdemeyer/acfd0aaea4de51b64c21fdd1a7a8d6e9174448de` was just a trac formatting error.



---

archive/issue_comments_345922.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@embray](#comment%3A28):\n> \n> ```\n> if type(slotwrapper) != PyWrapperDescr_Type:\n> ```\n\nGood point. It didn't occur to me to use the C/API for this. Python doesn't expose this type anywhere AFAIK, but the C/API does.",
    "created_at": "2017-06-16T14:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345922",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@embray](#comment%3A28):
> 
> ```
> if type(slotwrapper) != PyWrapperDescr_Type:
> ```

Good point. It didn't occur to me to use the C/API for this. Python doesn't expose this type anywhere AFAIK, but the C/API does.



---

archive/issue_comments_345923.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251\"><code>4d1021b</code></a></td><td><code>Further fixes and tests for richcmp_method</code></td></tr></table>\n",
    "created_at": "2017-06-16T15:03:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345923",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251"><code>4d1021b</code></a></td><td><code>Further fixes and tests for richcmp_method</code></td></tr></table>




---

archive/issue_comments_345924.json:
```json
{
    "body": "Changed commit from **[`86e9fcf`](https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657)** to **[`4d1021b`](https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251)**",
    "created_at": "2017-06-16T15:03:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345924",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`86e9fcf`](https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657)** to **[`4d1021b`](https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251)**



---

archive/issue_events_319269.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-16T15:04:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319269"
}
```



---

archive/issue_events_319270.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-16T15:04:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319270"
}
```



---

archive/issue_comments_345925.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI think this addresses all Erik's concerns.",
    "created_at": "2017-06-16T15:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345925",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

I think this addresses all Erik's concerns.



---

archive/issue_comments_345926.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Erik Bray**",
    "created_at": "2017-06-16T15:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345926",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, Erik Bray**



---

archive/issue_comments_345927.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@jdemeyer](#comment%3A43):\n> Replying to [@embray](#comment%3A28):\n> > \n> > ```\n> > if type(slotwrapper) != PyWrapperDescr_Type:\n> > ```\n\n> \n> Good point. It didn't occur to me to use the C/API for this. Python doesn't expose this type anywhere AFAIK, but the C/API does.\n\nYou can get at it in Python, for example, with `type(bytes.__lt__)`, but in Cython you might as well just use the type directly since it's exposed by the C API.",
    "created_at": "2017-06-16T15:33:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345927",
    "user": "https://github.com/embray"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@jdemeyer](#comment%3A43):
> Replying to [@embray](#comment%3A28):
> > 
> > ```
> > if type(slotwrapper) != PyWrapperDescr_Type:
> > ```

> 
> Good point. It didn't occur to me to use the C/API for this. Python doesn't expose this type anywhere AFAIK, but the C/API does.

You can get at it in Python, for example, with `type(bytes.__lt__)`, but in Cython you might as well just use the type directly since it's exposed by the C API.



---

archive/issue_comments_345928.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nis this ready to go ?",
    "created_at": "2017-06-19T17:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345928",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:47" align="right">comment:47</div>

is this ready to go ?



---

archive/issue_comments_345929.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nErik?",
    "created_at": "2017-06-20T08:19:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345929",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">comment:48</div>

Erik?



---

archive/issue_comments_345930.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nYep, perfect--thanks.",
    "created_at": "2017-06-20T08:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345930",
    "user": "https://github.com/embray"
}
```

<div id="comment:49" align="right">comment:49</div>

Yep, perfect--thanks.



---

archive/issue_events_319271.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-06-20T08:21:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319271"
}
```



---

archive/issue_events_319272.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-06-20T08:21:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319272"
}
```



---

archive/issue_comments_345931.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/23102](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23102)** to **[`4d1021b`](https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251)**",
    "created_at": "2017-06-22T07:24:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23102#issuecomment-345931",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/23102](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23102)** to **[`4d1021b`](https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251)**



---

archive/issue_events_319273.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:24:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319273"
}
```



---

archive/issue_events_319274.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3c9723b88e9b8e59a3916920db1a18b51bf47705",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-22T07:24:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23102",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23102#event-319274"
}
```
