# Issue 23175: Implement computation of Riemann period matrices etc.

archive/issues_022938.json:
```json
{
    "assignees": [],
    "body": "Include a class that supports analytic computation of period matrices and computation of endomorphism matrices.\n\nDepends on #23140\n\nCC:  @adeines\n\nKeywords: **sd86.5**\n\nBranch/Commit: **[`6e689c2`](https://github.com/sagemath/sagetrac-mirror/commit/6e689c2aa87ec16fa6ce335e171aa4bce1885120)**\n\nReviewer: **Julian R\u00fcth**\n\nAuthor: **Nils Bruin, Alexandre Zotine**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23175_\n\n",
    "closed_at": "2017-06-22T07:24:21Z",
    "created_at": "2017-06-08T00:52:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement computation of Riemann period matrices etc.",
    "type": "issue",
    "updated_at": "2017-06-22T07:24:21Z",
    "url": "https://github.com/sagemath/sage/issues/23175",
    "user": "https://github.com/nbruin"
}
```
Include a class that supports analytic computation of period matrices and computation of endomorphism matrices.

Depends on #23140

CC:  @adeines

Keywords: **sd86.5**

Branch/Commit: **[`6e689c2`](https://github.com/sagemath/sagetrac-mirror/commit/6e689c2aa87ec16fa6ce335e171aa4bce1885120)**

Reviewer: **Julian Rüth**

Author: **Nils Bruin, Alexandre Zotine**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/23175_





---

archive/issue_events_324507.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-08T00:52:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324507"
}
```



---

archive/issue_events_324508.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-08T00:52:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324508"
}
```



---

archive/issue_events_324509.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-08T00:52:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324509"
}
```



---

archive/issue_events_324510.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-08T00:52:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324510"
}
```



---

archive/issue_comments_347431.json:
```json
{
    "body": "Branch: **[u/nbruin/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/riemann_surface)**",
    "created_at": "2017-06-08T01:00:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347431",
    "user": "https://github.com/nbruin"
}
```

Branch: **[u/nbruin/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/riemann_surface)**



---

archive/issue_comments_347432.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWe'll likely be rewriting history on this branch.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1287234af088ddf7d631e75aa6a9581c09b860c\"><code>f128723</code></a></td><td><code>Creation of a vectorized gauss_legendre integrator</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c823208f6305337954d5c1b6f90f3ee655bcb6a\"><code>8c82320</code></a></td><td><code>Change to node for degree=1, based on bugfix in mpmath:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490\"><code>a455f3e</code></a></td><td><code>some PEP8, reviewer comments; rationalized \"degree\" parameter for \"nodes\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ffce6a66ed253e5592f88010cb98beddeca794c\"><code>3ffce6a</code></a></td><td><code>Initial check-in of RiemannSurface</code></td></tr></table>\n",
    "created_at": "2017-06-08T01:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347432",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:2" align="right">comment:2</div>

We'll likely be rewriting history on this branch.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1287234af088ddf7d631e75aa6a9581c09b860c"><code>f128723</code></a></td><td><code>Creation of a vectorized gauss_legendre integrator</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c823208f6305337954d5c1b6f90f3ee655bcb6a"><code>8c82320</code></a></td><td><code>Change to node for degree=1, based on bugfix in mpmath:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490"><code>a455f3e</code></a></td><td><code>some PEP8, reviewer comments; rationalized "degree" parameter for "nodes"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ffce6a66ed253e5592f88010cb98beddeca794c"><code>3ffce6a</code></a></td><td><code>Initial check-in of RiemannSurface</code></td></tr></table>




---

archive/issue_comments_347433.json:
```json
{
    "body": "Dependencies: **#23140**",
    "created_at": "2017-06-08T01:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347433",
    "user": "https://github.com/nbruin"
}
```

Dependencies: **#23140**



---

archive/issue_comments_347434.json:
```json
{
    "body": "Changed keywords from none to **sd86.5**",
    "created_at": "2017-06-08T01:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347434",
    "user": "https://github.com/nbruin"
}
```

Changed keywords from none to **sd86.5**



---

archive/issue_comments_347435.json:
```json
{
    "body": "Commit: **[`3ffce6a`](https://github.com/sagemath/sagetrac-mirror/commit/3ffce6a66ed253e5592f88010cb98beddeca794c)**",
    "created_at": "2017-06-08T01:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347435",
    "user": "https://github.com/nbruin"
}
```

Commit: **[`3ffce6a`](https://github.com/sagemath/sagetrac-mirror/commit/3ffce6a66ed253e5592f88010cb98beddeca794c)**



---

archive/issue_comments_347436.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce9fca4f7042629ad0e733e9bf87044cfa668597\"><code>ce9fca4</code></a></td><td><code>some further imports</code></td></tr></table>\n",
    "created_at": "2017-06-08T17:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347436",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce9fca4f7042629ad0e733e9bf87044cfa668597"><code>ce9fca4</code></a></td><td><code>some further imports</code></td></tr></table>




---

archive/issue_comments_347437.json:
```json
{
    "body": "Changed commit from **[`3ffce6a`](https://github.com/sagemath/sagetrac-mirror/commit/3ffce6a66ed253e5592f88010cb98beddeca794c)** to **[`ce9fca4`](https://github.com/sagemath/sagetrac-mirror/commit/ce9fca4f7042629ad0e733e9bf87044cfa668597)**",
    "created_at": "2017-06-08T17:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347437",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ffce6a`](https://github.com/sagemath/sagetrac-mirror/commit/3ffce6a66ed253e5592f88010cb98beddeca794c)** to **[`ce9fca4`](https://github.com/sagemath/sagetrac-mirror/commit/ce9fca4f7042629ad0e733e9bf87044cfa668597)**



---

archive/issue_comments_347438.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0143571215b3720f77a4f62db5d1e9e235758d08\"><code>0143571</code></a></td><td><code>renamed file</code></td></tr></table>\n",
    "created_at": "2017-06-08T22:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347438",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0143571215b3720f77a4f62db5d1e9e235758d08"><code>0143571</code></a></td><td><code>renamed file</code></td></tr></table>




---

archive/issue_comments_347439.json:
```json
{
    "body": "Changed commit from **[`ce9fca4`](https://github.com/sagemath/sagetrac-mirror/commit/ce9fca4f7042629ad0e733e9bf87044cfa668597)** to **[`0143571`](https://github.com/sagemath/sagetrac-mirror/commit/0143571215b3720f77a4f62db5d1e9e235758d08)**",
    "created_at": "2017-06-08T22:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347439",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ce9fca4`](https://github.com/sagemath/sagetrac-mirror/commit/ce9fca4f7042629ad0e733e9bf87044cfa668597)** to **[`0143571`](https://github.com/sagemath/sagetrac-mirror/commit/0143571215b3720f77a4f62db5d1e9e235758d08)**



---

archive/issue_comments_347440.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b543141ea069952f5ac4dce73ce4a3756a53f704\"><code>b543141</code></a></td><td><code>Minor updates to documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b21c02ac9323d880e182d96e77deacde1eeffd0b\"><code>b21c02a</code></a></td><td><code>Added a few imports to documentation.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9edca9a447d5f9fcfa42f939c70cbaa59e126e1\"><code>c9edca9</code></a></td><td><code>small changes</code></td></tr></table>\n",
    "created_at": "2017-06-09T00:34:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347440",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b543141ea069952f5ac4dce73ce4a3756a53f704"><code>b543141</code></a></td><td><code>Minor updates to documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b21c02ac9323d880e182d96e77deacde1eeffd0b"><code>b21c02a</code></a></td><td><code>Added a few imports to documentation.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9edca9a447d5f9fcfa42f939c70cbaa59e126e1"><code>c9edca9</code></a></td><td><code>small changes</code></td></tr></table>




---

archive/issue_comments_347441.json:
```json
{
    "body": "Changed commit from **[`0143571`](https://github.com/sagemath/sagetrac-mirror/commit/0143571215b3720f77a4f62db5d1e9e235758d08)** to **[`c9edca9`](https://github.com/sagemath/sagetrac-mirror/commit/c9edca9a447d5f9fcfa42f939c70cbaa59e126e1)**",
    "created_at": "2017-06-09T00:34:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347441",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0143571`](https://github.com/sagemath/sagetrac-mirror/commit/0143571215b3720f77a4f62db5d1e9e235758d08)** to **[`c9edca9`](https://github.com/sagemath/sagetrac-mirror/commit/c9edca9a447d5f9fcfa42f939c70cbaa59e126e1)**



---

archive/issue_comments_347442.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c26f623ce8e5cf57cf8402d84a139220f75ea644\"><code>c26f623</code></a></td><td><code>avoid integer division in python code</code></td></tr></table>\n",
    "created_at": "2017-06-09T06:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347442",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c26f623ce8e5cf57cf8402d84a139220f75ea644"><code>c26f623</code></a></td><td><code>avoid integer division in python code</code></td></tr></table>




---

archive/issue_comments_347443.json:
```json
{
    "body": "Changed commit from **[`c9edca9`](https://github.com/sagemath/sagetrac-mirror/commit/c9edca9a447d5f9fcfa42f939c70cbaa59e126e1)** to **[`c26f623`](https://github.com/sagemath/sagetrac-mirror/commit/c26f623ce8e5cf57cf8402d84a139220f75ea644)**",
    "created_at": "2017-06-09T06:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347443",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9edca9`](https://github.com/sagemath/sagetrac-mirror/commit/c9edca9a447d5f9fcfa42f939c70cbaa59e126e1)** to **[`c26f623`](https://github.com/sagemath/sagetrac-mirror/commit/c26f623ce8e5cf57cf8402d84a139220f75ea644)**



---

archive/issue_comments_347444.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f8dbb1d48834aa301bc8f6bd82b7c122ffcf890\"><code>8f8dbb1</code></a></td><td><code>avoid integer division in python code</code></td></tr></table>\n",
    "created_at": "2017-06-09T07:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347444",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f8dbb1d48834aa301bc8f6bd82b7c122ffcf890"><code>8f8dbb1</code></a></td><td><code>avoid integer division in python code</code></td></tr></table>




---

archive/issue_comments_347445.json:
```json
{
    "body": "Changed commit from **[`c26f623`](https://github.com/sagemath/sagetrac-mirror/commit/c26f623ce8e5cf57cf8402d84a139220f75ea644)** to **[`8f8dbb1`](https://github.com/sagemath/sagetrac-mirror/commit/8f8dbb1d48834aa301bc8f6bd82b7c122ffcf890)**",
    "created_at": "2017-06-09T07:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347445",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c26f623`](https://github.com/sagemath/sagetrac-mirror/commit/c26f623ce8e5cf57cf8402d84a139220f75ea644)** to **[`8f8dbb1`](https://github.com/sagemath/sagetrac-mirror/commit/8f8dbb1d48834aa301bc8f6bd82b7c122ffcf890)**



---

archive/issue_comments_347446.json:
```json
{
    "body": "Changed commit from **[`8f8dbb1`](https://github.com/sagemath/sagetrac-mirror/commit/8f8dbb1d48834aa301bc8f6bd82b7c122ffcf890)** to **[`54bdd61`](https://github.com/sagemath/sagetrac-mirror/commit/54bdd617f2bf7c6f177123bbdc7adffd5673854f)**",
    "created_at": "2017-06-09T14:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347446",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8f8dbb1`](https://github.com/sagemath/sagetrac-mirror/commit/8f8dbb1d48834aa301bc8f6bd82b7c122ffcf890)** to **[`54bdd61`](https://github.com/sagemath/sagetrac-mirror/commit/54bdd617f2bf7c6f177123bbdc7adffd5673854f)**



---

archive/issue_comments_347447.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bec1bf3f520acc98afe269926f511edf7a023d65\"><code>bec1bf3</code></a></td><td><code>Fixed a doctest.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54bdd617f2bf7c6f177123bbdc7adffd5673854f\"><code>54bdd61</code></a></td><td><code>Merge branch 'u/nbruin/riemann_surface' of git://trac.sagemath.org/sage into t/23175/riemann_surface</code></td></tr></table>\n",
    "created_at": "2017-06-09T14:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347447",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bec1bf3f520acc98afe269926f511edf7a023d65"><code>bec1bf3</code></a></td><td><code>Fixed a doctest.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54bdd617f2bf7c6f177123bbdc7adffd5673854f"><code>54bdd61</code></a></td><td><code>Merge branch 'u/nbruin/riemann_surface' of git://trac.sagemath.org/sage into t/23175/riemann_surface</code></td></tr></table>




---

archive/issue_comments_347448.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b1c2d61c9f88c175b8edb15ad69ca2307163ae3\"><code>5b1c2d6</code></a></td><td><code>Initial Check-in of RiemannSurface</code></td></tr></table>\n",
    "created_at": "2017-06-11T06:14:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347448",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b1c2d61c9f88c175b8edb15ad69ca2307163ae3"><code>5b1c2d6</code></a></td><td><code>Initial Check-in of RiemannSurface</code></td></tr></table>




---

archive/issue_comments_347449.json:
```json
{
    "body": "Changed commit from **[`54bdd61`](https://github.com/sagemath/sagetrac-mirror/commit/54bdd617f2bf7c6f177123bbdc7adffd5673854f)** to **[`5b1c2d6`](https://github.com/sagemath/sagetrac-mirror/commit/5b1c2d61c9f88c175b8edb15ad69ca2307163ae3)**",
    "created_at": "2017-06-11T06:14:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347449",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`54bdd61`](https://github.com/sagemath/sagetrac-mirror/commit/54bdd617f2bf7c6f177123bbdc7adffd5673854f)** to **[`5b1c2d6`](https://github.com/sagemath/sagetrac-mirror/commit/5b1c2d61c9f88c175b8edb15ad69ca2307163ae3)**



---

archive/issue_comments_347450.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nDocumentation should now be more or less up to standards.",
    "created_at": "2017-06-11T06:42:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347450",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:10" align="right">comment:10</div>

Documentation should now be more or less up to standards.



---

archive/issue_events_324511.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-11T06:42:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324511"
}
```



---

archive/issue_comments_347451.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2017-06-12T05:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347451",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian Rüth**



---

archive/issue_comments_347452.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI am making some style changes. I am still working on this, but here are already some comments.\n\nPlease fix/comment the following:\n\n* I guess you want to make this more accessible than `from sage.schemes.riemann_surfaces.riemann_surface import RiemannSurface`?\n* Why so much precision in the examples? Having 200 bits of precision seems like a lot. I tried a couple of the examples with less precision and found the output much easier to parse.\n* `TODO: have an example where self.genus < 0 to raise error`\n* Comment on the constant 100 in `_determine_new_w` and `_newton_iteration` (nothing fancy necessary, just say that this is a random bound that worked well in practice?)\n* In `period_matrix`: `Computes the period matrix of f given the homology basis and cohomology basis.` What is \"given\" here?\n* Why do you perform your own caching in `period_matrix` (`self._PM`) and `riemann_matrix` (`self._RM`), `cohomology_basis` (`self._differentials`) ?\n* The `self._differentials[1]` is very confusing. Why do you need it?\n* `raise ValueError('Length of differentials list is not equal to genus.')` should this not be a `NotImplementedError`?\n* Does `simple_vector_line_integral` require a previous call to `cohomology_basis` to work? (The docstring makes it seem so.) If this is the case, then the method should probably not be public. In other words, the `NOTE` there is confusing.\n* The `if/else` in `homology_basis`\u2026could you add a comment on why you can be sure that `cds[0] != cds[1]`? If this could go wrong in low precision, you might want to replace the assert with something else.\n* Should `RiemannSurface` really be an `object` and not at least a `SageObject`? You could probably add a comment about why this is not a scheme in the hierarchy of the namespace there.\n\nThere are some confusing comments in the source code, please try to make them more understandable to people who did not write this code:\n\n```       \n# Using singular to compute the genus quickly. Later, use rank/2 of\n        # gram matrix?\n```\n \n\n```\n        # TODO: can we get rid of the comments below?\n        # I'm not sure if this check will work, but could be useful?\n        # I think singular's genus computation returns a negative genus\n        # if it's reducible. Either way, if the genus is negative we should\n        # terminate.\n```\n\n`#TODO: Why not make a list in the first place with the edges?`\n\n```\n        #mt = Matrix(ZZ,[[1 if i==j else 0 for j in range(4*g**2)] +\n        #  [((S*w.monomial_coefficient(vars[i]).real_part()).round() for w in W] +\n        #  [S*w.monomial_coefficient(vars[i]).imag_part()).round() for w in W] for i in range(len(vars))])\n```",
    "created_at": "2017-06-12T05:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347452",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:11" align="right">comment:11</div>

I am making some style changes. I am still working on this, but here are already some comments.

Please fix/comment the following:

* I guess you want to make this more accessible than `from sage.schemes.riemann_surfaces.riemann_surface import RiemannSurface`?
* Why so much precision in the examples? Having 200 bits of precision seems like a lot. I tried a couple of the examples with less precision and found the output much easier to parse.
* `TODO: have an example where self.genus < 0 to raise error`
* Comment on the constant 100 in `_determine_new_w` and `_newton_iteration` (nothing fancy necessary, just say that this is a random bound that worked well in practice?)
* In `period_matrix`: `Computes the period matrix of f given the homology basis and cohomology basis.` What is "given" here?
* Why do you perform your own caching in `period_matrix` (`self._PM`) and `riemann_matrix` (`self._RM`), `cohomology_basis` (`self._differentials`) ?
* The `self._differentials[1]` is very confusing. Why do you need it?
* `raise ValueError('Length of differentials list is not equal to genus.')` should this not be a `NotImplementedError`?
* Does `simple_vector_line_integral` require a previous call to `cohomology_basis` to work? (The docstring makes it seem so.) If this is the case, then the method should probably not be public. In other words, the `NOTE` there is confusing.
* The `if/else` in `homology_basis`…could you add a comment on why you can be sure that `cds[0] != cds[1]`? If this could go wrong in low precision, you might want to replace the assert with something else.
* Should `RiemannSurface` really be an `object` and not at least a `SageObject`? You could probably add a comment about why this is not a scheme in the hierarchy of the namespace there.

There are some confusing comments in the source code, please try to make them more understandable to people who did not write this code:

```       
# Using singular to compute the genus quickly. Later, use rank/2 of
        # gram matrix?
```
 

```
        # TODO: can we get rid of the comments below?
        # I'm not sure if this check will work, but could be useful?
        # I think singular's genus computation returns a negative genus
        # if it's reducible. Either way, if the genus is negative we should
        # terminate.
```

`#TODO: Why not make a list in the first place with the edges?`

```
        #mt = Matrix(ZZ,[[1 if i==j else 0 for j in range(4*g**2)] +
        #  [((S*w.monomial_coefficient(vars[i]).real_part()).round() for w in W] +
        #  [S*w.monomial_coefficient(vars[i]).imag_part()).round() for w in W] for i in range(len(vars))])
```



---

archive/issue_events_324512.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-06-12T05:32:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324512"
}
```



---

archive/issue_events_324513.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-06-12T05:32:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324513"
}
```



---

archive/issue_comments_347453.json:
```json
{
    "body": "Changed branch from **[u/nbruin/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/riemann_surface)** to **[u/saraedum/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/riemann_surface)**",
    "created_at": "2017-06-12T07:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347453",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/nbruin/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/riemann_surface)** to **[u/saraedum/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/riemann_surface)**



---

archive/issue_comments_347454.json:
```json
{
    "body": "Changed commit from **[`5b1c2d6`](https://github.com/sagemath/sagetrac-mirror/commit/5b1c2d61c9f88c175b8edb15ad69ca2307163ae3)** to **[`4b3eeea`](https://github.com/sagemath/sagetrac-mirror/commit/4b3eeea12060e9d2dc38ab4c1ee70ae8c2cacd45)**",
    "created_at": "2017-06-12T07:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347454",
    "user": "https://github.com/saraedum"
}
```

Changed commit from **[`5b1c2d6`](https://github.com/sagemath/sagetrac-mirror/commit/5b1c2d61c9f88c175b8edb15ad69ca2307163ae3)** to **[`4b3eeea`](https://github.com/sagemath/sagetrac-mirror/commit/4b3eeea12060e9d2dc38ab4c1ee70ae8c2cacd45)**



---

archive/issue_comments_347455.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI hope you do not mind my changes. And sorry for writing so many comments. You don't really have to fix all of them, it's just things I stumbled upon so I thought I could as well mention them.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/415e21ddaaf42ac0e830cf3693670a1deb193a33\"><code>415e21d</code></a></td><td><code>Merge branch 'develop' into t/23175/riemann_surface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b3eeea12060e9d2dc38ab4c1ee70ae8c2cacd45\"><code>4b3eeea</code></a></td><td><code>Some reviewer style changes</code></td></tr></table>\n",
    "created_at": "2017-06-12T07:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347455",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:13" align="right">comment:13</div>

I hope you do not mind my changes. And sorry for writing so many comments. You don't really have to fix all of them, it's just things I stumbled upon so I thought I could as well mention them.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/415e21ddaaf42ac0e830cf3693670a1deb193a33"><code>415e21d</code></a></td><td><code>Merge branch 'develop' into t/23175/riemann_surface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b3eeea12060e9d2dc38ab4c1ee70ae8c2cacd45"><code>4b3eeea</code></a></td><td><code>Some reviewer style changes</code></td></tr></table>




---

archive/issue_comments_347456.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@saraedum](#comment:11):\n> I am making some style changes.\n\nThank you for style formatting!\n\n> * I guess you want to make this more accessible than `from sage.schemes.riemann_surfaces.riemann_surface import RiemannSurface`?\n\nProbably affine and projective plane curves will eventually grow a method \"riemann_surface\", so I don't think accessibility is an issue. `RiemannSurface` can mean more than just a compact one, so I'd be careful exposing it in the global namespace for that reason under that name (and other names get unappetizing pretty quickly)\n\n> * Why so much precision in the examples? Having 200 bits of precision seems like a lot. I tried a couple of the examples with less precision and found the output much easier to parse.\n\nTurned it back a little\n\n> * `TODO: have an example where self.genus < 0 to raise error`\n\nRemoved it. Actually, surfaces with multiple components shouldn't be an issue. The singular backend doesn't like them, though.\n\n> * Comment on the constant 100 in `_determine_new_w` and `_newton_iteration` (nothing fancy necessary, just say that this is a random bound that worked well in practice?)\n\nDone. This will never be triggered in practice.\n\n> * In `period_matrix`: `Computes the period matrix of f given the homology basis and cohomology basis.` What is \"given\" here?\n\nFixed\n\n> * Why do you perform your own caching in `period_matrix` (`self._PM`) and `riemann_matrix` (`self._RM`),\n\nWe did this to accommodate for the different options in the cohomology basis. However, in practice nobody would change that, and in actuality there's a benefit in providing the user a hook to specify this him/herself. This is implemented now, so the period matrix can now be cached in a vanilla way (and the riemann matrix is easily derived, so doesn't need to be cached)\n\n> `cohomology_basis` (`self._differentials`) ?\n\nThat's because the attribute can be specified in multiple ways.\n\n> * The `self._differentials[1]` is very confusing. Why do you need it?\n\nRemoved now, in favour of a user-configurable \"differentials\" value.\n\n> * `raise ValueError('Length of differentials list is not equal to genus.')` should this not be a `NotImplementedError`?\n\nNo, that's an error. \"Genus\" here should be H<sup>0(k,Omega</sup>1_S). Thus the genus of the union of two elliptic curves should be 2.\n\n> * Does `simple_vector_line_integral` require a previous call to `cohomology_basis` to work? (The docstring makes it seem so.) If this is the case, then the method should probably not be public. In other words, the `NOTE` there is confusing.\n\nNo, it's a useful routine in general, but it does need stuff preinitialized (you'll get an error otherwise, no incorrect results). It's pretty inner-loop otherwise, so it shouldn't be weighed down with an expensive call to homology_basis.\n\n> * The `if/else` in `homology_basis`\u2026could you add a comment on why you can be sure that `cds[0] != cds[1]`? If this could go wrong in low precision, you might want to replace the assert with something else.\n\nThere are much worse ways in which that code can fail than the assert. I don't think it's worth worrying about.\n\n> * Should `RiemannSurface` really be an `object` and not at least a `SageObject`?\n\nI don't see a benefit from making it a `SageObject`. I don't see how this object would benefit from interacting more closely with sage objects. It's just a container to spit out Riemann matrices.\n\n> You could probably add a comment about why this is not a scheme in the hierarchy of the namespace there.\n\nI don't think I have a comment on that.\n \n> There are some confusing comments in the source code, please try to make them more understandable to people who did not write this code:\n> \n> ```       \n> # Using singular to compute the genus quickly. Later, use rank/2 of\n>         # gram matrix?\n> ```\n\nGone\n\n> ```\n>         # TODO: can we get rid of the comments below?\n>         # I'm not sure if this check will work, but could be useful?\n>         # I think singular's genus computation returns a negative genus\n>         # if it's reducible. Either way, if the genus is negative we should\n>         # terminate.\n> ```\n\nfixed\n\n> `#TODO: Why not make a list in the first place with the edges?`\n\nfixed\n\n> ```\n>         #mt = Matrix(ZZ,[[1 if i==j else 0 for j in range(4*g**2)] +\n>         #  [((S*w.monomial_coefficient(vars[i]).real_part()).round() for w in W] +\n>         #  [S*w.monomial_coefficient(vars[i]).imag_part()).round() for w in W] for i in range(len(vars))])\n> ```\n\nremoved",
    "created_at": "2017-06-14T00:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347456",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@saraedum](#comment:11):
> I am making some style changes.

Thank you for style formatting!

> * I guess you want to make this more accessible than `from sage.schemes.riemann_surfaces.riemann_surface import RiemannSurface`?

Probably affine and projective plane curves will eventually grow a method "riemann_surface", so I don't think accessibility is an issue. `RiemannSurface` can mean more than just a compact one, so I'd be careful exposing it in the global namespace for that reason under that name (and other names get unappetizing pretty quickly)

> * Why so much precision in the examples? Having 200 bits of precision seems like a lot. I tried a couple of the examples with less precision and found the output much easier to parse.

Turned it back a little

> * `TODO: have an example where self.genus < 0 to raise error`

Removed it. Actually, surfaces with multiple components shouldn't be an issue. The singular backend doesn't like them, though.

> * Comment on the constant 100 in `_determine_new_w` and `_newton_iteration` (nothing fancy necessary, just say that this is a random bound that worked well in practice?)

Done. This will never be triggered in practice.

> * In `period_matrix`: `Computes the period matrix of f given the homology basis and cohomology basis.` What is "given" here?

Fixed

> * Why do you perform your own caching in `period_matrix` (`self._PM`) and `riemann_matrix` (`self._RM`),

We did this to accommodate for the different options in the cohomology basis. However, in practice nobody would change that, and in actuality there's a benefit in providing the user a hook to specify this him/herself. This is implemented now, so the period matrix can now be cached in a vanilla way (and the riemann matrix is easily derived, so doesn't need to be cached)

> `cohomology_basis` (`self._differentials`) ?

That's because the attribute can be specified in multiple ways.

> * The `self._differentials[1]` is very confusing. Why do you need it?

Removed now, in favour of a user-configurable "differentials" value.

> * `raise ValueError('Length of differentials list is not equal to genus.')` should this not be a `NotImplementedError`?

No, that's an error. "Genus" here should be H<sup>0(k,Omega</sup>1_S). Thus the genus of the union of two elliptic curves should be 2.

> * Does `simple_vector_line_integral` require a previous call to `cohomology_basis` to work? (The docstring makes it seem so.) If this is the case, then the method should probably not be public. In other words, the `NOTE` there is confusing.

No, it's a useful routine in general, but it does need stuff preinitialized (you'll get an error otherwise, no incorrect results). It's pretty inner-loop otherwise, so it shouldn't be weighed down with an expensive call to homology_basis.

> * The `if/else` in `homology_basis`…could you add a comment on why you can be sure that `cds[0] != cds[1]`? If this could go wrong in low precision, you might want to replace the assert with something else.

There are much worse ways in which that code can fail than the assert. I don't think it's worth worrying about.

> * Should `RiemannSurface` really be an `object` and not at least a `SageObject`?

I don't see a benefit from making it a `SageObject`. I don't see how this object would benefit from interacting more closely with sage objects. It's just a container to spit out Riemann matrices.

> You could probably add a comment about why this is not a scheme in the hierarchy of the namespace there.

I don't think I have a comment on that.
 
> There are some confusing comments in the source code, please try to make them more understandable to people who did not write this code:
> 
> ```       
> # Using singular to compute the genus quickly. Later, use rank/2 of
>         # gram matrix?
> ```

Gone

> ```
>         # TODO: can we get rid of the comments below?
>         # I'm not sure if this check will work, but could be useful?
>         # I think singular's genus computation returns a negative genus
>         # if it's reducible. Either way, if the genus is negative we should
>         # terminate.
> ```

fixed

> `#TODO: Why not make a list in the first place with the edges?`

fixed

> ```
>         #mt = Matrix(ZZ,[[1 if i==j else 0 for j in range(4*g**2)] +
>         #  [((S*w.monomial_coefficient(vars[i]).real_part()).round() for w in W] +
>         #  [S*w.monomial_coefficient(vars[i]).imag_part()).round() for w in W] for i in range(len(vars))])
> ```

removed



---

archive/issue_comments_347457.json:
```json
{
    "body": "Changed branch from **[u/saraedum/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/riemann_surface)** to **[u/nbruin/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/riemann_surface)**",
    "created_at": "2017-06-14T00:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347457",
    "user": "https://github.com/nbruin"
}
```

Changed branch from **[u/saraedum/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/riemann_surface)** to **[u/nbruin/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/riemann_surface)**



---

archive/issue_comments_347458.json:
```json
{
    "body": "Changed commit from **[`4b3eeea`](https://github.com/sagemath/sagetrac-mirror/commit/4b3eeea12060e9d2dc38ab4c1ee70ae8c2cacd45)** to **[`358f995`](https://github.com/sagemath/sagetrac-mirror/commit/358f995077d983e1efedfe4de3950973910fea42)**",
    "created_at": "2017-06-14T00:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347458",
    "user": "https://github.com/nbruin"
}
```

Changed commit from **[`4b3eeea`](https://github.com/sagemath/sagetrac-mirror/commit/4b3eeea12060e9d2dc38ab4c1ee70ae8c2cacd45)** to **[`358f995`](https://github.com/sagemath/sagetrac-mirror/commit/358f995077d983e1efedfe4de3950973910fea42)**



---

archive/issue_events_324514.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-14T00:10:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324514"
}
```



---

archive/issue_events_324515.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-14T00:10:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324515"
}
```



---

archive/issue_comments_347459.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/358f995077d983e1efedfe4de3950973910fea42\"><code>358f995</code></a></td><td><code>Bugfixes and review suggestions.</code></td></tr></table>\n",
    "created_at": "2017-06-14T00:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347459",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:16"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/358f995077d983e1efedfe4de3950973910fea42"><code>358f995</code></a></td><td><code>Bugfixes and review suggestions.</code></td></tr></table>




---

archive/issue_comments_347460.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8b255b2abb1d6091dd783db35232d5b5ec1083a\"><code>f8b255b</code></a></td><td><code>Bugfixes and review suggestions.</code></td></tr></table>\n",
    "created_at": "2017-06-14T00:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347460",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8b255b2abb1d6091dd783db35232d5b5ec1083a"><code>f8b255b</code></a></td><td><code>Bugfixes and review suggestions.</code></td></tr></table>




---

archive/issue_comments_347461.json:
```json
{
    "body": "Changed commit from **[`358f995`](https://github.com/sagemath/sagetrac-mirror/commit/358f995077d983e1efedfe4de3950973910fea42)** to **[`f8b255b`](https://github.com/sagemath/sagetrac-mirror/commit/f8b255b2abb1d6091dd783db35232d5b5ec1083a)**",
    "created_at": "2017-06-14T00:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347461",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`358f995`](https://github.com/sagemath/sagetrac-mirror/commit/358f995077d983e1efedfe4de3950973910fea42)** to **[`f8b255b`](https://github.com/sagemath/sagetrac-mirror/commit/f8b255b2abb1d6091dd783db35232d5b5ec1083a)**



---

archive/issue_comments_347462.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOk. Feel free to set this to positive review when the patchbot is happy.",
    "created_at": "2017-06-14T00:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347462",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:18" align="right">comment:18</div>

Ok. Feel free to set this to positive review when the patchbot is happy.



---

archive/issue_comments_347463.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34ac9e1ee7523a9e926fa1582f4d1ace7238e939\"><code>34ac9e1</code></a></td><td><code>Several fixes:</code></td></tr></table>\n",
    "created_at": "2017-06-14T19:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347463",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34ac9e1ee7523a9e926fa1582f4d1ace7238e939"><code>34ac9e1</code></a></td><td><code>Several fixes:</code></td></tr></table>




---

archive/issue_comments_347464.json:
```json
{
    "body": "Changed commit from **[`f8b255b`](https://github.com/sagemath/sagetrac-mirror/commit/f8b255b2abb1d6091dd783db35232d5b5ec1083a)** to **[`34ac9e1`](https://github.com/sagemath/sagetrac-mirror/commit/34ac9e1ee7523a9e926fa1582f4d1ace7238e939)**",
    "created_at": "2017-06-14T19:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347464",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f8b255b`](https://github.com/sagemath/sagetrac-mirror/commit/f8b255b2abb1d6091dd783db35232d5b5ec1083a)** to **[`34ac9e1`](https://github.com/sagemath/sagetrac-mirror/commit/34ac9e1ee7523a9e926fa1582f4d1ace7238e939)**



---

archive/issue_comments_347465.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nSorry! I ran into one case where the Voronoi cells  as computed did not give rise to a homology basis (because we were discarding edges in a way that led to an non-connected diagram). I rewrote another routine to be better documented and clearer as well.\n\nKnock-on effect of the changed voronoi cells is that a lot of doctests with arbitrary output changed, but those are not very insightful. Nonetheless, probably good form if the reviewer gives a thumbs-up to these changes before we set this to positive.",
    "created_at": "2017-06-14T19:18:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347465",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:20" align="right">comment:20</div>

Sorry! I ran into one case where the Voronoi cells  as computed did not give rise to a homology basis (because we were discarding edges in a way that led to an non-connected diagram). I rewrote another routine to be better documented and clearer as well.

Knock-on effect of the changed voronoi cells is that a lot of doctests with arbitrary output changed, but those are not very insightful. Nonetheless, probably good form if the reviewer gives a thumbs-up to these changes before we set this to positive.



---

archive/issue_comments_347466.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce5097a4dcb6bf45a11078b3a91fc926c2b73592\"><code>ce5097a</code></a></td><td><code>Two more fixes:</code></td></tr></table>\n",
    "created_at": "2017-06-14T23:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347466",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce5097a4dcb6bf45a11078b3a91fc926c2b73592"><code>ce5097a</code></a></td><td><code>Two more fixes:</code></td></tr></table>




---

archive/issue_comments_347467.json:
```json
{
    "body": "Changed commit from **[`34ac9e1`](https://github.com/sagemath/sagetrac-mirror/commit/34ac9e1ee7523a9e926fa1582f4d1ace7238e939)** to **[`ce5097a`](https://github.com/sagemath/sagetrac-mirror/commit/ce5097a4dcb6bf45a11078b3a91fc926c2b73592)**",
    "created_at": "2017-06-14T23:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347467",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`34ac9e1`](https://github.com/sagemath/sagetrac-mirror/commit/34ac9e1ee7523a9e926fa1582f4d1ace7238e939)** to **[`ce5097a`](https://github.com/sagemath/sagetrac-mirror/commit/ce5097a4dcb6bf45a11078b3a91fc926c2b73592)**



---

archive/issue_comments_347468.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32856842d33c8b378d354331ddc12dfd7f5884bc\"><code>3285684</code></a></td><td><code>Use sage_mantissa_exponent to get a cheaper log2</code></td></tr></table>\n",
    "created_at": "2017-06-15T01:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347468",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32856842d33c8b378d354331ddc12dfd7f5884bc"><code>3285684</code></a></td><td><code>Use sage_mantissa_exponent to get a cheaper log2</code></td></tr></table>




---

archive/issue_comments_347469.json:
```json
{
    "body": "Changed commit from **[`ce5097a`](https://github.com/sagemath/sagetrac-mirror/commit/ce5097a4dcb6bf45a11078b3a91fc926c2b73592)** to **[`3285684`](https://github.com/sagemath/sagetrac-mirror/commit/32856842d33c8b378d354331ddc12dfd7f5884bc)**",
    "created_at": "2017-06-15T01:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347469",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ce5097a`](https://github.com/sagemath/sagetrac-mirror/commit/ce5097a4dcb6bf45a11078b3a91fc926c2b73592)** to **[`3285684`](https://github.com/sagemath/sagetrac-mirror/commit/32856842d33c8b378d354331ddc12dfd7f5884bc)**



---

archive/issue_comments_347470.json:
```json
{
    "body": "Changed commit from **[`3285684`](https://github.com/sagemath/sagetrac-mirror/commit/32856842d33c8b378d354331ddc12dfd7f5884bc)** to **[`4eaaff0`](https://github.com/sagemath/sagetrac-mirror/commit/4eaaff07e7c64df6f205d9b9293458d1d755b1a9)**",
    "created_at": "2017-06-15T05:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347470",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3285684`](https://github.com/sagemath/sagetrac-mirror/commit/32856842d33c8b378d354331ddc12dfd7f5884bc)** to **[`4eaaff0`](https://github.com/sagemath/sagetrac-mirror/commit/4eaaff07e7c64df6f205d9b9293458d1d755b1a9)**



---

archive/issue_comments_347471.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4eaaff07e7c64df6f205d9b9293458d1d755b1a9\"><code>4eaaff0</code></a></td><td><code>correction to implementation of voronoi_ghost</code></td></tr></table>\n",
    "created_at": "2017-06-15T05:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347471",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4eaaff07e7c64df6f205d9b9293458d1d755b1a9"><code>4eaaff0</code></a></td><td><code>correction to implementation of voronoi_ghost</code></td></tr></table>




---

archive/issue_comments_347472.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nFeel free to set this back to positive review if you're confident that tests are going to pass.",
    "created_at": "2017-06-16T06:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347472",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:24" align="right">comment:24</div>

Feel free to set this back to positive review if you're confident that tests are going to pass.



---

archive/issue_comments_347473.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nOK. the bots seem busy. I've tested on 8.0beta11 and all tests pass. A previous complaint by a plugin about \"EXAMPLE:\" rather than \"EXAMPLES:\" has been fixed too, so following Julian's assessment: positive review. Preferably new issues get their own ticket.",
    "created_at": "2017-06-16T15:49:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347473",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:25" align="right">comment:25</div>

OK. the bots seem busy. I've tested on 8.0beta11 and all tests pass. A previous complaint by a plugin about "EXAMPLE:" rather than "EXAMPLES:" has been fixed too, so following Julian's assessment: positive review. Preferably new issues get their own ticket.



---

archive/issue_events_324516.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-16T15:49:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324516"
}
```



---

archive/issue_events_324517.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-16T15:49:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324517"
}
```



---

archive/issue_events_324518.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-17T10:28:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324518"
}
```



---

archive/issue_events_324519.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-17T10:28:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324519"
}
```



---

archive/issue_comments_347474.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nFails on 32-bit:\n\n```\nsage -t --long src/sage/schemes/riemann_surfaces/riemann_surface.py\n**********************************************************************\nFile \"src/sage/schemes/riemann_surfaces/riemann_surface.py\", line 806, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.upstairs_edges\nFailed example:\n    edgeset = S.upstairs_edges(); edgeset\nExpected:\n    [[(0, 0), (1, 0)],\n     [(0, 1), (1, 1)],\n     [(0, 0), (5, 1)],\n     [(0, 1), (5, 0)],\n     [(1, 0), (4, 1)],\n     [(1, 1), (4, 0)],\n     [(2, 0), (3, 1)],\n     [(2, 1), (3, 0)],\n     [(2, 0), (4, 0)],\n     [(2, 1), (4, 1)],\n     [(3, 0), (5, 0)],\n     [(3, 1), (5, 1)],\n     [(4, 0), (5, 0)],\n     [(4, 1), (5, 1)]]\nGot:\n    [[(0, 0), (1, 1)],\n     [(0, 1), (1, 0)],\n     [(0, 0), (5, 0)],\n     [(0, 1), (5, 1)],\n     [(1, 0), (4, 0)],\n     [(1, 1), (4, 1)],\n     [(2, 0), (3, 0)],\n     [(2, 1), (3, 1)],\n     [(2, 0), (4, 1)],\n     [(2, 1), (4, 0)],\n     [(3, 0), (5, 1)],\n     [(3, 1), (5, 0)],\n     [(4, 0), (5, 0)],\n     [(4, 1), (5, 1)]]\n**********************************************************************\nFile \"src/sage/schemes/riemann_surfaces/riemann_surface.py\", line 1423, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.period_matrix\nFailed example:\n    S.period_matrix() # abs tol 0.000001\nExpected:\n    [-0.77519780590366792 + 0.61819962132820207*I  -0.19145804690473785 - 1.3890819401503317*I  -2.1720559850746018 + 0.49575760460334677*I -0.23874427945779023 - 0.49575760460334677*I -0.43020232636252808 - 0.89332433554698493*I  -0.96665585280840577 - 2.0072815614785338*I]\n    [  2.1720559850746018 + 0.49575760460334677*I  -3.1387118378830076 - 0.27512471421878286*I  -0.53645352644587770 - 1.1139572259315488*I    1.3968581791709339 + 1.1139572259315488*I   -1.7418536587120737 - 1.3890819401503317*I -0.96665585280840577 - 0.77088231882212961*I]\n    [  0.53645352644587769 - 1.1139572259315488*I  -1.5031093792542835 - 0.89332433554698493*I  0.77519780590366793 + 0.61819962132820208*I   2.7085095115204795 - 0.61819962132820208*I   1.2054001322661960 - 0.27512471421878285*I -0.96665585280840577 + 0.22063289038456391*I]\nGot:\n    [     0.43020232636252809 - 1.3345901163161127*I     0.96665585280840577 - 0.77088231882212962*I      2.1720559850746018 + 0.49575760460334669*I  1.1926223897340549e-18 - 0.99151520920669346*I     0.96665585280840577 - 0.22063289038456391*I  -2.3852447794681098e-18 + 2.2279144518630976*I]\n    [      1.7418536587120737 + 2.6254811828067359*I     0.96665585280840577 + 0.22063289038456391*I      0.53645352644587770 - 1.1139572259315489*I  -2.1684043449710089e-19 + 2.2279144518630977*I      0.96665585280840577 + 2.0072815614785338*I  -2.6020852139652106e-18 - 1.2363992426564042*I]\n    [     -1.2054001322661960 + 1.2666399234254763*I      0.96665585280840577 - 2.0072815614785338*I    -0.77519780590366792 + 0.61819962132820217*I   3.2526065174565133e-19 - 1.2363992426564042*I     0.96665585280840577 + 0.77088231882212962*I -4.3368086899420177e-18 - 0.99151520920669343*I]\nTolerance exceeded in 33 of 36:\n    -0.77519780590366792 vs 0.43020232636252809, tolerance 1e+00 > 1e-06\n    + 0.61819962132820207 vs - 1.3345901163161127, tolerance 2e+00 > 1e-06\n    -0.19145804690473785 vs 0.96665585280840577, tolerance 1e+00 > 1e-06\n    - 1.3890819401503317 vs - 0.77088231882212962, tolerance 6e-01 > 1e-06\n    -2.1720559850746018 vs 2.1720559850746018, tolerance 4e+00 > 1e-06\n    -0.23874427945779023 vs 1.1926223897340549e-18, tolerance 2e-01 > 1e-06\n    - 0.49575760460334677 vs - 0.99151520920669346, tolerance 5e-01 > 1e-06\n    -0.43020232636252808 vs 0.96665585280840577, tolerance 1e+00 > 1e-06\n    - 0.89332433554698493 vs - 0.22063289038456391, tolerance 7e-01 > 1e-06\n    -0.96665585280840577 vs -2.3852447794681098e-18, tolerance 1e+00 > 1e-06\n    - 2.0072815614785338 vs + 2.2279144518630976, tolerance 4e+00 > 1e-06\n    2.1720559850746018 vs 1.7418536587120737, tolerance 4e-01 > 1e-06\n    + 0.49575760460334677 vs + 2.6254811828067359, tolerance 2e+00 > 1e-06\n    -3.1387118378830076 vs 0.96665585280840577, tolerance 4e+00 > 1e-06\n    - 0.27512471421878286 vs + 0.22063289038456391, tolerance 5e-01 > 1e-06\n    -0.53645352644587770 vs 0.53645352644587770, tolerance 1e+00 > 1e-06\n    1.3968581791709339 vs -2.1684043449710089e-19, tolerance 1e+00 > 1e-06\n    + 1.1139572259315488 vs + 2.2279144518630977, tolerance 1e+00 > 1e-06\n    -1.7418536587120737 vs 0.96665585280840577, tolerance 3e+00 > 1e-06\n    - 1.3890819401503317 vs + 2.0072815614785338, tolerance 3e+00 > 1e-06\n    -0.96665585280840577 vs -2.6020852139652106e-18, tolerance 1e+00 > 1e-06\n    - 0.77088231882212961 vs - 1.2363992426564042, tolerance 5e-01 > 1e-06\n    0.53645352644587769 vs -1.2054001322661960, tolerance 2e+00 > 1e-06\n    - 1.1139572259315488 vs + 1.2666399234254763, tolerance 2e+00 > 1e-06\n    -1.5031093792542835 vs 0.96665585280840577, tolerance 2e+00 > 1e-06\n    - 0.89332433554698493 vs - 2.0072815614785338, tolerance 1e+00 > 1e-06\n    0.77519780590366793 vs -0.77519780590366792, tolerance 2e+00 > 1e-06\n    2.7085095115204795 vs 3.2526065174565133e-19, tolerance 3e+00 > 1e-06\n    - 0.61819962132820208 vs - 1.2363992426564042, tolerance 6e-01 > 1e-06\n    1.2054001322661960 vs 0.96665585280840577, tolerance 2e-01 > 1e-06\n    - 0.27512471421878285 vs + 0.77088231882212962, tolerance 1e+00 > 1e-06\n    -0.96665585280840577 vs -4.3368086899420177e-18, tolerance 1e+00 > 1e-06\n    + 0.22063289038456391 vs - 0.99151520920669343, tolerance 1e+00 > 1e-06\n**********************************************************************\nFile \"src/sage/schemes/riemann_surfaces/riemann_surface.py\", line 1454, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.riemann_matrix\nFailed example:\n    S.riemann_matrix() #abs tol 0.0000001\nExpected:\n    [        0.50000000000000000 + 1.3228756555322953*I       -0.25000000000000000 + 0.66143782776614765*I  6.7220534694101275e-18 - 2.1684043449710089e-18*I]\n    [      -0.25000000000000000 + 0.66143782776614764*I        0.25000000000000000 + 0.66143782776614765*I     0.50000000000000000 - 1.7347234759768071e-18*I]\n    [-6.5052130349130266e-19 + 3.4694469519536142e-18*I     0.50000000000000000 + 3.4694469519536142e-18*I        0.25000000000000000 + 0.66143782776614765*I]\nGot:\n    [       0.37500000000000000 + 0.33071891388307383*I     0.50000000000000000 - 6.9388939039072284e-18*I    -0.50000000000000001 - 7.9146758591441824e-18*I]\n    [    0.50000000000000001 - 4.3368086899420177e-18*I        0.24999999999999999 + 0.66143782776614764*I -1.1275702593849246e-17 + 1.3877787807814457e-17*I]\n    [   -0.50000000000000000 + 1.5178830414797062e-17*I  2.7105054312137611e-18 - 5.4210108624275222e-18*I        0.24999999999999998 + 0.66143782776614762*I]\nTolerance exceeded in 10 of 18:\n    0.50000000000000000 vs 0.37500000000000000, tolerance 1e-01 > 1e-07\n    + 1.3228756555322953 vs + 0.33071891388307383, tolerance 1e+00 > 1e-07\n    -0.25000000000000000 vs 0.50000000000000000, tolerance 8e-01 > 1e-07\n    + 0.66143782776614765 vs - 6.9388939039072284e-18, tolerance 7e-01 > 1e-07\n    6.7220534694101275e-18 vs -0.50000000000000001, tolerance 5e-01 > 1e-07\n    -0.25000000000000000 vs 0.50000000000000001, tolerance 8e-01 > 1e-07\n    + 0.66143782776614764 vs - 4.3368086899420177e-18, tolerance 7e-01 > 1e-07\n    0.50000000000000000 vs -1.1275702593849246e-17, tolerance 5e-01 > 1e-07\n    -6.5052130349130266e-19 vs -0.50000000000000000, tolerance 5e-01 > 1e-07\n    0.50000000000000000 vs 2.7105054312137611e-18, tolerance 5e-01 > 1e-07\n**********************************************************************\n3 items had failures:\n   1 of   6 in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.period_matrix\n   1 of   6 in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.riemann_matrix\n   1 of   6 in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.upstairs_edges\n    [206 tests, 3 failures, 28.84 s]\n```",
    "created_at": "2017-06-17T10:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347474",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">comment:27</div>

Fails on 32-bit:

```
sage -t --long src/sage/schemes/riemann_surfaces/riemann_surface.py
**********************************************************************
File "src/sage/schemes/riemann_surfaces/riemann_surface.py", line 806, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.upstairs_edges
Failed example:
    edgeset = S.upstairs_edges(); edgeset
Expected:
    [[(0, 0), (1, 0)],
     [(0, 1), (1, 1)],
     [(0, 0), (5, 1)],
     [(0, 1), (5, 0)],
     [(1, 0), (4, 1)],
     [(1, 1), (4, 0)],
     [(2, 0), (3, 1)],
     [(2, 1), (3, 0)],
     [(2, 0), (4, 0)],
     [(2, 1), (4, 1)],
     [(3, 0), (5, 0)],
     [(3, 1), (5, 1)],
     [(4, 0), (5, 0)],
     [(4, 1), (5, 1)]]
Got:
    [[(0, 0), (1, 1)],
     [(0, 1), (1, 0)],
     [(0, 0), (5, 0)],
     [(0, 1), (5, 1)],
     [(1, 0), (4, 0)],
     [(1, 1), (4, 1)],
     [(2, 0), (3, 0)],
     [(2, 1), (3, 1)],
     [(2, 0), (4, 1)],
     [(2, 1), (4, 0)],
     [(3, 0), (5, 1)],
     [(3, 1), (5, 0)],
     [(4, 0), (5, 0)],
     [(4, 1), (5, 1)]]
**********************************************************************
File "src/sage/schemes/riemann_surfaces/riemann_surface.py", line 1423, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.period_matrix
Failed example:
    S.period_matrix() # abs tol 0.000001
Expected:
    [-0.77519780590366792 + 0.61819962132820207*I  -0.19145804690473785 - 1.3890819401503317*I  -2.1720559850746018 + 0.49575760460334677*I -0.23874427945779023 - 0.49575760460334677*I -0.43020232636252808 - 0.89332433554698493*I  -0.96665585280840577 - 2.0072815614785338*I]
    [  2.1720559850746018 + 0.49575760460334677*I  -3.1387118378830076 - 0.27512471421878286*I  -0.53645352644587770 - 1.1139572259315488*I    1.3968581791709339 + 1.1139572259315488*I   -1.7418536587120737 - 1.3890819401503317*I -0.96665585280840577 - 0.77088231882212961*I]
    [  0.53645352644587769 - 1.1139572259315488*I  -1.5031093792542835 - 0.89332433554698493*I  0.77519780590366793 + 0.61819962132820208*I   2.7085095115204795 - 0.61819962132820208*I   1.2054001322661960 - 0.27512471421878285*I -0.96665585280840577 + 0.22063289038456391*I]
Got:
    [     0.43020232636252809 - 1.3345901163161127*I     0.96665585280840577 - 0.77088231882212962*I      2.1720559850746018 + 0.49575760460334669*I  1.1926223897340549e-18 - 0.99151520920669346*I     0.96665585280840577 - 0.22063289038456391*I  -2.3852447794681098e-18 + 2.2279144518630976*I]
    [      1.7418536587120737 + 2.6254811828067359*I     0.96665585280840577 + 0.22063289038456391*I      0.53645352644587770 - 1.1139572259315489*I  -2.1684043449710089e-19 + 2.2279144518630977*I      0.96665585280840577 + 2.0072815614785338*I  -2.6020852139652106e-18 - 1.2363992426564042*I]
    [     -1.2054001322661960 + 1.2666399234254763*I      0.96665585280840577 - 2.0072815614785338*I    -0.77519780590366792 + 0.61819962132820217*I   3.2526065174565133e-19 - 1.2363992426564042*I     0.96665585280840577 + 0.77088231882212962*I -4.3368086899420177e-18 - 0.99151520920669343*I]
Tolerance exceeded in 33 of 36:
    -0.77519780590366792 vs 0.43020232636252809, tolerance 1e+00 > 1e-06
    + 0.61819962132820207 vs - 1.3345901163161127, tolerance 2e+00 > 1e-06
    -0.19145804690473785 vs 0.96665585280840577, tolerance 1e+00 > 1e-06
    - 1.3890819401503317 vs - 0.77088231882212962, tolerance 6e-01 > 1e-06
    -2.1720559850746018 vs 2.1720559850746018, tolerance 4e+00 > 1e-06
    -0.23874427945779023 vs 1.1926223897340549e-18, tolerance 2e-01 > 1e-06
    - 0.49575760460334677 vs - 0.99151520920669346, tolerance 5e-01 > 1e-06
    -0.43020232636252808 vs 0.96665585280840577, tolerance 1e+00 > 1e-06
    - 0.89332433554698493 vs - 0.22063289038456391, tolerance 7e-01 > 1e-06
    -0.96665585280840577 vs -2.3852447794681098e-18, tolerance 1e+00 > 1e-06
    - 2.0072815614785338 vs + 2.2279144518630976, tolerance 4e+00 > 1e-06
    2.1720559850746018 vs 1.7418536587120737, tolerance 4e-01 > 1e-06
    + 0.49575760460334677 vs + 2.6254811828067359, tolerance 2e+00 > 1e-06
    -3.1387118378830076 vs 0.96665585280840577, tolerance 4e+00 > 1e-06
    - 0.27512471421878286 vs + 0.22063289038456391, tolerance 5e-01 > 1e-06
    -0.53645352644587770 vs 0.53645352644587770, tolerance 1e+00 > 1e-06
    1.3968581791709339 vs -2.1684043449710089e-19, tolerance 1e+00 > 1e-06
    + 1.1139572259315488 vs + 2.2279144518630977, tolerance 1e+00 > 1e-06
    -1.7418536587120737 vs 0.96665585280840577, tolerance 3e+00 > 1e-06
    - 1.3890819401503317 vs + 2.0072815614785338, tolerance 3e+00 > 1e-06
    -0.96665585280840577 vs -2.6020852139652106e-18, tolerance 1e+00 > 1e-06
    - 0.77088231882212961 vs - 1.2363992426564042, tolerance 5e-01 > 1e-06
    0.53645352644587769 vs -1.2054001322661960, tolerance 2e+00 > 1e-06
    - 1.1139572259315488 vs + 1.2666399234254763, tolerance 2e+00 > 1e-06
    -1.5031093792542835 vs 0.96665585280840577, tolerance 2e+00 > 1e-06
    - 0.89332433554698493 vs - 2.0072815614785338, tolerance 1e+00 > 1e-06
    0.77519780590366793 vs -0.77519780590366792, tolerance 2e+00 > 1e-06
    2.7085095115204795 vs 3.2526065174565133e-19, tolerance 3e+00 > 1e-06
    - 0.61819962132820208 vs - 1.2363992426564042, tolerance 6e-01 > 1e-06
    1.2054001322661960 vs 0.96665585280840577, tolerance 2e-01 > 1e-06
    - 0.27512471421878285 vs + 0.77088231882212962, tolerance 1e+00 > 1e-06
    -0.96665585280840577 vs -4.3368086899420177e-18, tolerance 1e+00 > 1e-06
    + 0.22063289038456391 vs - 0.99151520920669343, tolerance 1e+00 > 1e-06
**********************************************************************
File "src/sage/schemes/riemann_surfaces/riemann_surface.py", line 1454, in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.riemann_matrix
Failed example:
    S.riemann_matrix() #abs tol 0.0000001
Expected:
    [        0.50000000000000000 + 1.3228756555322953*I       -0.25000000000000000 + 0.66143782776614765*I  6.7220534694101275e-18 - 2.1684043449710089e-18*I]
    [      -0.25000000000000000 + 0.66143782776614764*I        0.25000000000000000 + 0.66143782776614765*I     0.50000000000000000 - 1.7347234759768071e-18*I]
    [-6.5052130349130266e-19 + 3.4694469519536142e-18*I     0.50000000000000000 + 3.4694469519536142e-18*I        0.25000000000000000 + 0.66143782776614765*I]
Got:
    [       0.37500000000000000 + 0.33071891388307383*I     0.50000000000000000 - 6.9388939039072284e-18*I    -0.50000000000000001 - 7.9146758591441824e-18*I]
    [    0.50000000000000001 - 4.3368086899420177e-18*I        0.24999999999999999 + 0.66143782776614764*I -1.1275702593849246e-17 + 1.3877787807814457e-17*I]
    [   -0.50000000000000000 + 1.5178830414797062e-17*I  2.7105054312137611e-18 - 5.4210108624275222e-18*I        0.24999999999999998 + 0.66143782776614762*I]
Tolerance exceeded in 10 of 18:
    0.50000000000000000 vs 0.37500000000000000, tolerance 1e-01 > 1e-07
    + 1.3228756555322953 vs + 0.33071891388307383, tolerance 1e+00 > 1e-07
    -0.25000000000000000 vs 0.50000000000000000, tolerance 8e-01 > 1e-07
    + 0.66143782776614765 vs - 6.9388939039072284e-18, tolerance 7e-01 > 1e-07
    6.7220534694101275e-18 vs -0.50000000000000001, tolerance 5e-01 > 1e-07
    -0.25000000000000000 vs 0.50000000000000001, tolerance 8e-01 > 1e-07
    + 0.66143782776614764 vs - 4.3368086899420177e-18, tolerance 7e-01 > 1e-07
    0.50000000000000000 vs -1.1275702593849246e-17, tolerance 5e-01 > 1e-07
    -6.5052130349130266e-19 vs -0.50000000000000000, tolerance 5e-01 > 1e-07
    0.50000000000000000 vs 2.7105054312137611e-18, tolerance 5e-01 > 1e-07
**********************************************************************
3 items had failures:
   1 of   6 in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.period_matrix
   1 of   6 in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.riemann_matrix
   1 of   6 in sage.schemes.riemann_surfaces.riemann_surface.RiemannSurface.upstairs_edges
    [206 tests, 3 failures, 28.84 s]
```



---

archive/issue_comments_347475.json:
```json
{
    "body": "Changed commit from **[`4eaaff0`](https://github.com/sagemath/sagetrac-mirror/commit/4eaaff07e7c64df6f205d9b9293458d1d755b1a9)** to **[`6e689c2`](https://github.com/sagemath/sagetrac-mirror/commit/6e689c2aa87ec16fa6ce335e171aa4bce1885120)**",
    "created_at": "2017-06-17T18:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347475",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4eaaff0`](https://github.com/sagemath/sagetrac-mirror/commit/4eaaff07e7c64df6f205d9b9293458d1d755b1a9)** to **[`6e689c2`](https://github.com/sagemath/sagetrac-mirror/commit/6e689c2aa87ec16fa6ce335e171aa4bce1885120)**



---

archive/issue_comments_347476.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e689c2aa87ec16fa6ce335e171aa4bce1885120\"><code>6e689c2</code></a></td><td><code>make doctests more robust</code></td></tr></table>\n",
    "created_at": "2017-06-17T18:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347476",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e689c2aa87ec16fa6ce335e171aa4bce1885120"><code>6e689c2</code></a></td><td><code>make doctests more robust</code></td></tr></table>




---

archive/issue_events_324520.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-17T18:27:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324520"
}
```



---

archive/issue_events_324521.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-17T18:27:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324521"
}
```



---

archive/issue_comments_347477.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nSigh ... doctesting doctests with non-uniquely represented objects is a pain. It would be nice if we'd have a way of getting wider architecture exposure without Volker having to intervene. Let's try this.",
    "created_at": "2017-06-17T18:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347477",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:29" align="right">comment:29</div>

Sigh ... doctesting doctests with non-uniquely represented objects is a pain. It would be nice if we'd have a way of getting wider architecture exposure without Volker having to intervene. Let's try this.



---

archive/issue_events_324522.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-06-18T19:06:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324522"
}
```



---

archive/issue_events_324523.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-06-18T19:06:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324523"
}
```



---

archive/issue_comments_347478.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLooks good. (Yes, I guess a better CI/CD infrastructure would be helpful. As I am just transferring the company I work for to gitlab CI/CD, I discussed this quite a bit with roed during the past few days actually. But I guess it would be quite some effort to swap our patchbot/buildbot out for a more standardized solution\u2026)",
    "created_at": "2017-06-18T19:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347478",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:31" align="right">comment:31</div>

Looks good. (Yes, I guess a better CI/CD infrastructure would be helpful. As I am just transferring the company I work for to gitlab CI/CD, I discussed this quite a bit with roed during the past few days actually. But I guess it would be quite some effort to swap our patchbot/buildbot out for a more standardized solution…)



---

archive/issue_events_324524.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:24:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324524"
}
```



---

archive/issue_events_324525.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b0dd8cc26d05f3af3050dffc97ec99b9add65687",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-22T07:24:21Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23175#event-324525"
}
```



---

archive/issue_comments_347479.json:
```json
{
    "body": "Changed branch from **[u/nbruin/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/riemann_surface)** to **[`6e689c2`](https://github.com/sagemath/sagetrac-mirror/commit/6e689c2aa87ec16fa6ce335e171aa4bce1885120)**",
    "created_at": "2017-06-22T07:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23175#issuecomment-347479",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/nbruin/riemann_surface](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/riemann_surface)** to **[`6e689c2`](https://github.com/sagemath/sagetrac-mirror/commit/6e689c2aa87ec16fa6ce335e171aa4bce1885120)**
