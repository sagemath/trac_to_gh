# Issue 23581: LLL_gram, clarifying and handling undefined behavior when `self` is not positive definite

archive/issues_023344.json:
```json
{
    "body": "I tried to make it clear that `self` must be positive definite and showed some examples where things can go awry if that is not the case.\n\nI tempted to mention LLLGram in magma that seems to address this issues, and might a nice alternative through `magma_free`\n\n```\nmap(eval, magma_free(\"G, U, r := LLLGram(Matrix(2,2,[0,1,1,0])); print ElementToSequence(G); print ElementToSequence(U); print r;\").splitlines())\n```\n\n\nKeywords: days88\n\nBranch/Commit: 2e12286450747b30f74c21c64e1f25e49e3ce93b\n\nReviewer: Aly Deines\n\nAuthor: Edgar Costa\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23581\n\n",
    "closed_at": "2017-09-10T11:56:25Z",
    "created_at": "2017-08-04T19:53:16Z",
    "labels": [
        "component: linear algebra",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "LLL_gram, clarifying and handling undefined behavior when `self` is not positive definite",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23581",
    "user": "https://github.com/edgarcosta"
}
```
I tried to make it clear that `self` must be positive definite and showed some examples where things can go awry if that is not the case.

I tempted to mention LLLGram in magma that seems to address this issues, and might a nice alternative through `magma_free`

```
map(eval, magma_free("G, U, r := LLLGram(Matrix(2,2,[0,1,1,0])); print ElementToSequence(G); print ElementToSequence(U); print r;").splitlines())
```


Keywords: days88

Branch/Commit: 2e12286450747b30f74c21c64e1f25e49e3ce93b

Reviewer: Aly Deines

Author: Edgar Costa

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23581





---

archive/issue_comments_347761.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-08-05T02:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347761",
    "user": "https://github.com/edgarcosta"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_347762.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,11 @@\n I tried to make it clear that `self` must be positive definite and showed some examples where things can go awry if that is not the case.\n \n-I tempted to mention LLLGram in magma that seems to address this issues, and might a nice alternative through {magma_free}\n+I tempted to mention LLLGram in magma that seems to address this issues, and might a nice alternative through `magma_free`\n \n ```\n map(eval, magma_free(\"G, U, r := LLLGram(Matrix(2,2,[0,1,1,0])); print ElementToSequence(G); print ElementToSequence(U); print r;\").splitlines())\n ```\n+\n \n Author: Edgar Costa\n \n``````\n",
    "created_at": "2017-08-05T02:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347762",
    "user": "https://github.com/edgarcosta"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,11 @@
 I tried to make it clear that `self` must be positive definite and showed some examples where things can go awry if that is not the case.
 
-I tempted to mention LLLGram in magma that seems to address this issues, and might a nice alternative through {magma_free}
+I tempted to mention LLLGram in magma that seems to address this issues, and might a nice alternative through `magma_free`
 
 ```
 map(eval, magma_free("G, U, r := LLLGram(Matrix(2,2,[0,1,1,0])); print ElementToSequence(G); print ElementToSequence(U); print r;").splitlines())
 ```
+
 
 Author: Edgar Costa
 
``````




---

archive/issue_comments_347763.json:
```json
{
    "body": "<a id='comment:2'></a>Doc does not build :\n\n```\n+[dochtml] [matrices ] docstring of sage.matrix.matrix_integer_dense.Matrix_integer_dense.LLL_gram:3: ERROR: Unexpected indentation.\n+[dochtml] [matrices ] docstring of sage.matrix.matrix_integer_dense.Matrix_integer_dense.LLL_gram:11: WARNING: Bullet list ends without a blank line; unexpected unindent.\n```\nYou need to respect the doc syntax (http://doc.sagemath.org/html/en/developer/coding_basics.html).",
    "created_at": "2017-08-05T06:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347763",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>Doc does not build :

```
+[dochtml] [matrices ] docstring of sage.matrix.matrix_integer_dense.Matrix_integer_dense.LLL_gram:3: ERROR: Unexpected indentation.
+[dochtml] [matrices ] docstring of sage.matrix.matrix_integer_dense.Matrix_integer_dense.LLL_gram:11: WARNING: Bullet list ends without a blank line; unexpected unindent.
```
You need to respect the doc syntax (http://doc.sagemath.org/html/en/developer/coding_basics.html).



---

archive/issue_comments_347764.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-07T15:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347764",
    "user": "https://github.com/edgarcosta"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_347765.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-07T15:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347765",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347766.json:
```json
{
    "body": "<a id='comment:5'></a>there should be an empty line after `.. WARNING::`\n\nand for the reference to pari, you can use the trac role, that creates an hyperlink:\n\n```\n:pari:`qfllgram`\n```",
    "created_at": "2017-08-07T15:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347766",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>there should be an empty line after `.. WARNING::`

and for the reference to pari, you can use the trac role, that creates an hyperlink:

```
:pari:`qfllgram`
```



---

archive/issue_comments_347767.json:
```json
{
    "body": "<a id='comment:6'></a>in the doctests, the syntax is\n\n```\nhere we go::\n\n    sage: 2+2\n    4\n```\nyou forgot the double colon and the empty line just after it.",
    "created_at": "2017-08-07T15:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347767",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>in the doctests, the syntax is

```
here we go::

    sage: 2+2
    4
```
you forgot the double colon and the empty line just after it.



---

archive/issue_comments_347768.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-07T15:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347768",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347769.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-07T15:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347769",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347770.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-07T15:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347770",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347771.json:
```json
{
    "body": "<a id='comment:10'></a>Thanks for the tips!\nI'm now double checking that everything builds fine.\n\nOnly after doing `make doc-clean` I managed to see the errors that you mentioned.",
    "created_at": "2017-08-07T15:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347771",
    "user": "https://github.com/edgarcosta"
}
```

<a id='comment:10'></a>Thanks for the tips!
I'm now double checking that everything builds fine.

Only after doing `make doc-clean` I managed to see the errors that you mentioned.



---

archive/issue_comments_347772.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-07T21:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347773.json:
```json
{
    "body": "<a id='comment:12'></a>I think it is all good now.",
    "created_at": "2017-08-07T21:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347773",
    "user": "https://github.com/edgarcosta"
}
```

<a id='comment:12'></a>I think it is all good now.



---

archive/issue_comments_347774.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-07T21:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347774",
    "user": "https://github.com/edgarcosta"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_347775.json:
```json
{
    "body": "<a id='comment:13'></a>There is a mixture of qfllgram and qflllgram. How many l's are there ?",
    "created_at": "2017-08-08T06:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347775",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>There is a mixture of qfllgram and qflllgram. How many l's are there ?



---

archive/issue_comments_347776.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-22T19:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347776",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347777.json:
```json
{
    "body": "<a id='comment:15'></a>I have fixed the number of l's.\n\nSorry for the delay, totally missed your comment.\n\nCheers,\nEdgar",
    "created_at": "2017-08-22T19:57:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347777",
    "user": "https://github.com/edgarcosta"
}
```

<a id='comment:15'></a>I have fixed the number of l's.

Sorry for the delay, totally missed your comment.

Cheers,
Edgar



---

archive/issue_comments_347778.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-25T14:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347779.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-25T14:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347779",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347780.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-25T14:22:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347780",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347781.json:
```json
{
    "body": "<a id='comment:19'></a>Looks good.  Just a few changes.\n\nI think\n\n```\nsage: Matrix(ZZ, [-5, -1, -1, -5]).LLL_gram() # not tested\n```\n\nshould be\n\n```\nsage: Matrix(ZZ, 2, 2, [-5, -1, -1, -5]).LLL_gram() # not tested\n```\n\nIf you change that and remove all trailing whitespace, I'll give you a positive review.",
    "created_at": "2017-08-25T14:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347781",
    "user": "https://github.com/adeines"
}
```

<a id='comment:19'></a>Looks good.  Just a few changes.

I think

```
sage: Matrix(ZZ, [-5, -1, -1, -5]).LLL_gram() # not tested
```

should be

```
sage: Matrix(ZZ, 2, 2, [-5, -1, -1, -5]).LLL_gram() # not tested
```

If you change that and remove all trailing whitespace, I'll give you a positive review.



---

archive/issue_comments_347782.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-25T14:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347782",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_347783.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-08-25T14:48:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347783",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_347784.json:
```json
{
    "body": "Changing keywords from \"\" to \"days88\".",
    "created_at": "2017-08-25T17:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347784",
    "user": "https://github.com/edgarcosta"
}
```

Changing keywords from "" to "days88".



---

archive/issue_comments_347785.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-25T17:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347785",
    "user": "https://github.com/edgarcosta"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_347786.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-25T20:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347786",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_347787.json:
```json
{
    "body": "<a id='comment:22'></a>Thanks!",
    "created_at": "2017-08-25T20:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347787",
    "user": "https://github.com/adeines"
}
```

<a id='comment:22'></a>Thanks!



---

archive/issue_comments_347788.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-10T11:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23581#issuecomment-347788",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060425.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-10T11:56:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23581",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23581#event-60425"
}
```
