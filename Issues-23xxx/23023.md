# Issue 23023: Upgrade to Sphinx 1.6.x

archive/issues_022786.json:
```json
{
    "assignees": [],
    "body": "**Tarballs**:\n\n1. https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz\n\n2. https://pypi.python.org/packages/17/75/3698d7992a828ad6d7be99c0a888b75ed173a9280e53dbae67326029b60e/typing-3.6.1.tar.gz\n\nCC:  @kiwifb @embray\n\nBranch: **[c488967](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)**\n\nReviewer: **Fran\u00e7ois Bissey, Jeroen Demeyer, John Palmieri**\n\nAuthor: **Jeroen Demeyer, Fran\u00e7ois Bissey, John Palmieri**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23023_\n\n",
    "closed_at": "2017-08-26T09:58:15Z",
    "created_at": "2017-05-18T11:12:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to Sphinx 1.6.x",
    "type": "issue",
    "updated_at": "2017-09-11T23:03:53Z",
    "url": "https://github.com/sagemath/sage/issues/23023",
    "user": "https://github.com/jdemeyer"
}
```
**Tarballs**:

1. https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz

2. https://pypi.python.org/packages/17/75/3698d7992a828ad6d7be99c0a888b75ed173a9280e53dbae67326029b60e/typing-3.6.1.tar.gz

CC:  @kiwifb @embray

Branch: **[c488967](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)**

Reviewer: **François Bissey, Jeroen Demeyer, John Palmieri**

Author: **Jeroen Demeyer, François Bissey, John Palmieri**

_Issue created by migration from https://trac.sagemath.org/ticket/23023_





---

archive/issue_events_303099.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-18T11:12:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303099"
}
```



---

archive/issue_events_303100.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-18T11:12:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303100"
}
```



---

archive/issue_events_303101.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-18T11:12:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303101"
}
```



---

archive/issue_events_303102.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-18T11:12:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303102"
}
```



---

archive/issue_comments_347121.json:
```json
{
    "body": "Branch: **[u/jdemeyer/upgrade_to_sphinx_1_6_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_sphinx_1_6_x)**",
    "created_at": "2017-05-19T07:00:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347121",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/upgrade_to_sphinx_1_6_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_sphinx_1_6_x)**



---

archive/issue_comments_347122.json:
```json
{
    "body": "Commit: **[6a2b786](https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5)**",
    "created_at": "2017-05-19T18:27:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347122",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[6a2b786](https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5)**



---

archive/issue_comments_347123.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5\">6a2b786</a></td><td><code>Upgrade to Sphinx 1.6.1</code></td></tr></table>\n",
    "created_at": "2017-05-19T18:27:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347123",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5">6a2b786</a></td><td><code>Upgrade to Sphinx 1.6.1</code></td></tr></table>




---

archive/issue_comments_347124.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n **Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz\n+\n+There is an upstream i18n problem: https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM\n``````\n",
    "created_at": "2017-05-22T11:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347124",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 **Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz
+
+There is an upstream i18n problem: https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM
``````




---

archive/issue_comments_347125.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2017-05-22T11:18:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347125",
    "user": "https://github.com/jdemeyer"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_347126.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n **Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz\n \n-There is an upstream i18n problem: https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM\n+There is an upstream i18n bug (log messages are translated to the language of the compiled document): https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM\n``````\n",
    "created_at": "2017-05-22T11:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347126",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 **Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz
 
-There is an upstream i18n problem: https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM
+There is an upstream i18n bug (log messages are translated to the language of the compiled document): https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM
``````




---

archive/issue_comments_347127.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-**Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz\n-\n-There is an upstream i18n bug (log messages are translated to the language of the compiled document): https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM\n+**Tarball**: https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz\n``````\n",
    "created_at": "2017-07-03T08:13:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347127",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-**Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz
-
-There is an upstream i18n bug (log messages are translated to the language of the compiled document): https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM
+**Tarball**: https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz
``````




---

archive/issue_comments_347128.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to none",
    "created_at": "2017-07-03T08:13:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347128",
    "user": "https://github.com/jdemeyer"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to none



---

archive/issue_comments_347129.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n-**Tarball**: https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz\n+**Tarballs**:\n+\n+1. https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz\n+\n+2. https://pypi.python.org/packages/17/75/3698d7992a828ad6d7be99c0a888b75ed173a9280e53dbae67326029b60e/typing-3.6.1.tar.gz\n``````\n",
    "created_at": "2017-07-03T09:25:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347129",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
-**Tarball**: https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz
+**Tarballs**:
+
+1. https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz
+
+2. https://pypi.python.org/packages/17/75/3698d7992a828ad6d7be99c0a888b75ed173a9280e53dbae67326029b60e/typing-3.6.1.tar.gz
``````




---

archive/issue_comments_347130.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c\">2ea32c1</a></td><td><code>Upgrade to Sphinx 1.6.3</code></td></tr></table>\n",
    "created_at": "2017-07-03T09:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347130",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c">2ea32c1</a></td><td><code>Upgrade to Sphinx 1.6.3</code></td></tr></table>




---

archive/issue_comments_347131.json:
```json
{
    "body": "Changed commit from **[6a2b786](https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5)** to **[2ea32c1](https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c)**",
    "created_at": "2017-07-03T09:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347131",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6a2b786](https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5)** to **[2ea32c1](https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c)**



---

archive/issue_events_303103.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-04T08:27:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303103"
}
```



---

archive/issue_comments_347132.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nAre we using sphinx.websupport for anything? This is now split:\n\n```\n# -*- coding: utf-8 -*-\n\"\"\"\n    sphinx.websupport\n    ~~~~~~~~~~~~~~~~~\n\n    Base Module for web support functions.\n\n    :copyright: Copyright 2007-2017 by the Sphinx team, see AUTHORS.\n    :license: BSD, see LICENSE for details.\n\"\"\"\n\nimport warnings\n\nfrom sphinx.deprecation import RemovedInSphinx20Warning\n\ntry:\n    from sphinxcontrib.websupport import WebSupport  # NOQA\n    from sphinxcontrib.websupport import errors  # NOQA\n    from sphinxcontrib.websupport.search import BaseSearch, SEARCH_ADAPTERS  # NOQA\n    from sphinxcontrib.websupport.storage import StorageBackend  # NOQA\n\n    warnings.warn('sphinx.websupport module is now provided as sphinxcontrib-websupport. '\n                  'sphinx.websupport will be removed at Sphinx-2.0. '\n                  'Please use the package instead.',\n                  RemovedInSphinx20Warning)\nexcept ImportError:\n    warnings.warn('Since Sphinx-1.6, sphinx.websupport module is now separated to '\n                  'sphinxcontrib-websupport package. Please add it into your dependency list.')\n```",
    "created_at": "2017-07-04T22:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347132",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">Comment 10</div>

Are we using sphinx.websupport for anything? This is now split:

```
# -*- coding: utf-8 -*-
"""
    sphinx.websupport
    ~~~~~~~~~~~~~~~~~

    Base Module for web support functions.

    :copyright: Copyright 2007-2017 by the Sphinx team, see AUTHORS.
    :license: BSD, see LICENSE for details.
"""

import warnings

from sphinx.deprecation import RemovedInSphinx20Warning

try:
    from sphinxcontrib.websupport import WebSupport  # NOQA
    from sphinxcontrib.websupport import errors  # NOQA
    from sphinxcontrib.websupport.search import BaseSearch, SEARCH_ADAPTERS  # NOQA
    from sphinxcontrib.websupport.storage import StorageBackend  # NOQA

    warnings.warn('sphinx.websupport module is now provided as sphinxcontrib-websupport. '
                  'sphinx.websupport will be removed at Sphinx-2.0. '
                  'Please use the package instead.',
                  RemovedInSphinx20Warning)
except ImportError:
    warnings.warn('Since Sphinx-1.6, sphinx.websupport module is now separated to '
                  'sphinxcontrib-websupport package. Please add it into your dependency list.')
```



---

archive/issue_comments_347133.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nThis thing needs imagemagick's `convert` program. Not sure if we would use it and this is a relatively low requirement on a normal desktop but still surprised me. From `sphinx/ext/imgconverter.py`\n\n```\ndef setup(app):\n    # type: (Sphinx) -> Dict[unicode, Any]\n    app.add_post_transform(ImagemagickConverter)\n    app.add_config_value('image_converter', 'convert', 'env')\n    app.add_config_value('image_converter_args', [], 'env')\n\n    return {\n        'version': 'builtin',\n        'parallel_read_safe': True,\n        'parallel_write_safe': True,\n    }\n```\nI have been trying to run the self tests for myself and that came up. Because it is a relatively new machine install `convert` was not installed.",
    "created_at": "2017-07-05T02:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347133",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">Comment 11</div>

This thing needs imagemagick's `convert` program. Not sure if we would use it and this is a relatively low requirement on a normal desktop but still surprised me. From `sphinx/ext/imgconverter.py`

```
def setup(app):
    # type: (Sphinx) -> Dict[unicode, Any]
    app.add_post_transform(ImagemagickConverter)
    app.add_config_value('image_converter', 'convert', 'env')
    app.add_config_value('image_converter_args', [], 'env')

    return {
        'version': 'builtin',
        'parallel_read_safe': True,
        'parallel_write_safe': True,
    }
```
I have been trying to run the self tests for myself and that came up. Because it is a relatively new machine install `convert` was not installed.



---

archive/issue_comments_347134.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@kiwifb](#comment%3A11):\n> I have been trying to run the self tests for myself and that came up.\n\nExactly what came up? What happened? And is it a regression from Sphinx 1.5.3 to Sphinx 1.6.3?",
    "created_at": "2017-07-05T10:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347134",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@kiwifb](#comment%3A11):
> I have been trying to run the self tests for myself and that came up.

Exactly what came up? What happened? And is it a regression from Sphinx 1.5.3 to Sphinx 1.6.3?



---

archive/issue_comments_347135.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@jdemeyer](#comment%3A12):\n> Replying to [@kiwifb](#comment%3A11):\n> > I have been trying to run the self tests for myself and that came up.\n\n> \n> Exactly what came up? What happened? And is it a regression from Sphinx 1.5.3 to Sphinx 1.6.3?\n\nsphinx own testsuite. I didn't have `convert` installed on the system and it broke. That stuff appears to be new, that extension didn't exist in 1.5.3, I haven't tested it within sage yet. The spkg doesn't have a spkg-check anyway, too many requirements not in sage to run it. But I'll probably do a test run soon without `convert` installed to see if it needs to be added to the list of sage's requirement",
    "created_at": "2017-07-05T10:11:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347135",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@jdemeyer](#comment%3A12):
> Replying to [@kiwifb](#comment%3A11):
> > I have been trying to run the self tests for myself and that came up.

> 
> Exactly what came up? What happened? And is it a regression from Sphinx 1.5.3 to Sphinx 1.6.3?

sphinx own testsuite. I didn't have `convert` installed on the system and it broke. That stuff appears to be new, that extension didn't exist in 1.5.3, I haven't tested it within sage yet. The spkg doesn't have a spkg-check anyway, too many requirements not in sage to run it. But I'll probably do a test run soon without `convert` installed to see if it needs to be added to the list of sage's requirement



---

archive/issue_comments_347136.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@kiwifb](#comment%3A13):\n> But I'll probably do a test run soon without `convert` installed to see if it needs to be added to the list of sage's requirement\n\nSounds good. If it's only needed for the Sphinx testsuite but not for Sage, I wouldn't worry about it.",
    "created_at": "2017-07-05T10:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347136",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@kiwifb](#comment%3A13):
> But I'll probably do a test run soon without `convert` installed to see if it needs to be added to the list of sage's requirement

Sounds good. If it's only needed for the Sphinx testsuite but not for Sage, I wouldn't worry about it.



---

archive/issue_events_303104.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-07-06T01:36:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303104"
}
```



---

archive/issue_events_303105.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-07-06T01:36:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303105"
}
```



---

archive/issue_comments_347137.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2017-07-06T01:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347137",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_347138.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nLooks fine to me.",
    "created_at": "2017-07-06T01:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347138",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">Comment 15</div>

Looks fine to me.



---

archive/issue_events_303106.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-12T12:49:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303106"
}
```



---

archive/issue_events_303107.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-12T12:49:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303107"
}
```



---

archive/issue_comments_347139.json:
```json
{
    "body": "Dependencies: **#23179**",
    "created_at": "2017-07-12T12:49:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347139",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#23179**



---

archive/issue_events_303108.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-29T20:41:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303108"
}
```



---

archive/issue_events_303109.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-29T20:41:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303109"
}
```



---

archive/issue_comments_347140.json:
```json
{
    "body": "Changed dependencies from **#23179** to none",
    "created_at": "2017-07-29T20:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347140",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#23179** to none



---

archive/issue_events_303110.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-30T14:00:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303110"
}
```



---

archive/issue_events_303111.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-30T14:00:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303111"
}
```



---

archive/issue_comments_347141.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nThe japanese docs don't build any more (make all-pdf works):\n\n```\n[docpdf] make[2]: Entering directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/ja/a_tour_of_sage'\n[docpdf] make[2]: *** No rule to make target 'all-pdf-ja'.  Stop.\n[docpdf] make[2]: Leaving directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/ja/a_tour_of_sage'\n[docpdf] Error building the documentation.\n```\n\nFor the record, we now also depend on latexmk (in TeXlive):\n\n```\n[docpdf] [repl     ] WARNING: LaTeX file written to /mnt/disk/home/release/Sage/local/share/doc/sage/latex/en/reference/repl\n[docpdf] make[2]: Entering directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/en/reference/repl'\n[docpdf] latexmk -pdf -dvi- -ps-  'repl.tex'\n[docpdf] make[2]: latexmk: Command not found\n[docpdf] Makefile:33: recipe for target 'repl.pdf' failed\n```\nThis is easily fixed by installing latexmk.",
    "created_at": "2017-07-30T14:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347141",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">Comment 18</div>

The japanese docs don't build any more (make all-pdf works):

```
[docpdf] make[2]: Entering directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/ja/a_tour_of_sage'
[docpdf] make[2]: *** No rule to make target 'all-pdf-ja'.  Stop.
[docpdf] make[2]: Leaving directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/ja/a_tour_of_sage'
[docpdf] Error building the documentation.
```

For the record, we now also depend on latexmk (in TeXlive):

```
[docpdf] [repl     ] WARNING: LaTeX file written to /mnt/disk/home/release/Sage/local/share/doc/sage/latex/en/reference/repl
[docpdf] make[2]: Entering directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/en/reference/repl'
[docpdf] latexmk -pdf -dvi- -ps-  'repl.tex'
[docpdf] make[2]: latexmk: Command not found
[docpdf] Makefile:33: recipe for target 'repl.pdf' failed
```
This is easily fixed by installing latexmk.



---

archive/issue_comments_347142.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nI can see it. `make all-pdf` completing is probably thanks to parallel building. In docbuild/__init__.py\n\n```\n    def pdf(self):\n        \"\"\"\n        Builds the PDF files for this document.  This is done by first\n        (re)-building the LaTeX output, going into that LaTeX\n        directory, and running 'make all-pdf' (or for the special case of\n        the ja docs, 'all-pdf-ja(ex,to run platex)' there.\n\n        EXAMPLES::\n\n            sage: from sage_setup.docbuild import DocBuilder\n            sage: b = DocBuilder('tutorial')\n            sage: b.pdf() #not tested\n        \"\"\"\n        self.latex()\n        tex_dir = self._output_dir('latex')\n        pdf_dir = self._output_dir('pdf')\n        make_target = \"cd '%s' && $MAKE %s && mv -f *.pdf '%s'\"\n        error_message = \"failed to run $MAKE %s in %s\"\n        MB_LANG = {'ja': 'all-pdf-ja'} # language name : the modified target\n\n        # Replace the command for languages that require special processing\n        if self.lang in MB_LANG:\n            command = MB_LANG[self.lang]\n        else:\n            command = 'all-pdf'\n\n        if subprocess.call(make_target%(tex_dir, command, pdf_dir), shell=True):\n            raise RuntimeError(error_message%(command, tex_dir))\n        logger.warning(\"Build finished.  The built documents can be found in %s\", pdf_dir)\n```\nso `ja` used to be treated specially. But it appears that with sphinx 1.6.3 the Japanese specific target is not produced, just the regular `all-pdf`. \n\nSetting `MB_LANG={}` seems to work but the bigger question is whether to keep expecting some exceptions. sphinx may be moving away from particularism, in that case we should ditch it too.",
    "created_at": "2017-07-31T00:02:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347142",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">Comment 19</div>

I can see it. `make all-pdf` completing is probably thanks to parallel building. In docbuild/__init__.py

```
    def pdf(self):
        """
        Builds the PDF files for this document.  This is done by first
        (re)-building the LaTeX output, going into that LaTeX
        directory, and running 'make all-pdf' (or for the special case of
        the ja docs, 'all-pdf-ja(ex,to run platex)' there.

        EXAMPLES::

            sage: from sage_setup.docbuild import DocBuilder
            sage: b = DocBuilder('tutorial')
            sage: b.pdf() #not tested
        """
        self.latex()
        tex_dir = self._output_dir('latex')
        pdf_dir = self._output_dir('pdf')
        make_target = "cd '%s' && $MAKE %s && mv -f *.pdf '%s'"
        error_message = "failed to run $MAKE %s in %s"
        MB_LANG = {'ja': 'all-pdf-ja'} # language name : the modified target

        # Replace the command for languages that require special processing
        if self.lang in MB_LANG:
            command = MB_LANG[self.lang]
        else:
            command = 'all-pdf'

        if subprocess.call(make_target%(tex_dir, command, pdf_dir), shell=True):
            raise RuntimeError(error_message%(command, tex_dir))
        logger.warning("Build finished.  The built documents can be found in %s", pdf_dir)
```
so `ja` used to be treated specially. But it appears that with sphinx 1.6.3 the Japanese specific target is not produced, just the regular `all-pdf`. 

Setting `MB_LANG={}` seems to work but the bigger question is whether to keep expecting some exceptions. sphinx may be moving away from particularism, in that case we should ditch it too.



---

archive/issue_comments_347143.json:
```json
{
    "body": "Changed commit from **[2ea32c1](https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c)** to **[6930d06](https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7)**",
    "created_at": "2017-08-08T02:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347143",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[2ea32c1](https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c)** to **[6930d06](https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7)**



---

archive/issue_comments_347144.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nLet's start moving this forwards again. I conformed to the boiler plate in #23179 and remove the Japanese specific stuff. If I were upstream I would have removed any kind of particularism at that level, so I am acting as if they just did until proven otherwise.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81253e8ca153e9fea1da822343559c0f48ea0e0f\">81253e8</a></td><td><code>Merge branch 'develop' into sphinx16</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bbfe54817ad4af89945c2a631922f0d60a5c4d6\">7bbfe54</a></td><td><code>conform typing to the new boiler plate.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7\">6930d06</a></td><td><code>Remove language specific targeting as upstream has removed at least the only one we are using.</code></td></tr></table>\n",
    "created_at": "2017-08-08T02:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347144",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">Comment 20</div>

Let's start moving this forwards again. I conformed to the boiler plate in #23179 and remove the Japanese specific stuff. If I were upstream I would have removed any kind of particularism at that level, so I am acting as if they just did until proven otherwise.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81253e8ca153e9fea1da822343559c0f48ea0e0f">81253e8</a></td><td><code>Merge branch 'develop' into sphinx16</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bbfe54817ad4af89945c2a631922f0d60a5c4d6">7bbfe54</a></td><td><code>conform typing to the new boiler plate.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7">6930d06</a></td><td><code>Remove language specific targeting as upstream has removed at least the only one we are using.</code></td></tr></table>




---

archive/issue_events_303112.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-08T02:39:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303112"
}
```



---

archive/issue_events_303113.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-08T02:39:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303113"
}
```



---

archive/issue_comments_347145.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/upgrade_to_sphinx_1_6_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_sphinx_1_6_x)** to **[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)**",
    "created_at": "2017-08-08T02:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347145",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/jdemeyer/upgrade_to_sphinx_1_6_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_sphinx_1_6_x)** to **[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)**



---

archive/issue_comments_347146.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, Fran\u00e7ois Bissey**",
    "created_at": "2017-08-08T07:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347146",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Jeroen Demeyer** to **Jeroen Demeyer, François Bissey**



---

archive/issue_comments_347147.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nThanks for moving forward with this! I'll test it right away.",
    "created_at": "2017-08-08T07:36:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347147",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

Thanks for moving forward with this! I'll test it right away.



---

archive/issue_comments_347148.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Jeroen Demeyer**",
    "created_at": "2017-08-08T18:41:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347148",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **François Bissey** to **François Bissey, Jeroen Demeyer**



---

archive/issue_events_303114.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-08T18:41:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303114"
}
```



---

archive/issue_events_303115.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-08T18:41:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303115"
}
```



---

archive/issue_events_303116.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-10T21:58:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303116"
}
```



---

archive/issue_events_303117.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-10T21:58:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303117"
}
```



---

archive/issue_comments_347149.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\n\n```\nsage -t --long --warn-long 75.4 src/doc/en/thematic_tutorials/sandpile.rst  # 2 doctests failed\nsage -t --long --warn-long 75.4 src/sage/sandpiles/sandpile.py  # 2 doctests failed\nsage -t --long --warn-long 75.4 src/sage/repl/ipython_tests.py  # 1 doctest failed\n```",
    "created_at": "2017-08-10T21:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347149",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">Comment 23</div>


```
sage -t --long --warn-long 75.4 src/doc/en/thematic_tutorials/sandpile.rst  # 2 doctests failed
sage -t --long --warn-long 75.4 src/sage/sandpiles/sandpile.py  # 2 doctests failed
sage -t --long --warn-long 75.4 src/sage/repl/ipython_tests.py  # 1 doctest failed
```



---

archive/issue_comments_347150.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nProblem with \"smart\" quotes? See http://www.sphinx-doc.org/en/stable/config.html#confval-html_use_smartypants. Should we create a `docutils.conf` file? I tried creating one containing\n\n```\n[parsers]\nsmart_quotes = no\n```\nbut I couldn't figure out the right place to put it, or at least no location that I tried had any effect on the failing doctests.",
    "created_at": "2017-08-10T23:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347150",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">Comment 24</div>

Problem with "smart" quotes? See http://www.sphinx-doc.org/en/stable/config.html#confval-html_use_smartypants. Should we create a `docutils.conf` file? I tried creating one containing

```
[parsers]
smart_quotes = no
```
but I couldn't figure out the right place to put it, or at least no location that I tried had any effect on the failing doctests.



---

archive/issue_comments_347151.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nCould be. Jeroen and I both doctested the stuff before - without issues. My personal suspicion is interference with another merged ticket. In any case I am re-starting at Volker's current snapshot to see if I can reproduce it.",
    "created_at": "2017-08-10T23:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347151",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">Comment 25</div>

Could be. Jeroen and I both doctested the stuff before - without issues. My personal suspicion is interference with another merged ticket. In any case I am re-starting at Volker's current snapshot to see if I can reproduce it.



---

archive/issue_comments_347152.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nI see the doctest failures on OS X when I apply this on top of 8.1.beta1. Could it be platform-specific?\n\nNote that changing line 680 in `local/lib/python2.7/site-packages/sphinx/environment/__init__.py`\n\n```\n       self.settings['smart_quotes'] = True\n```\nfrom `True` to `False` fixes the doctests.",
    "created_at": "2017-08-10T23:39:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347152",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:26" align="right">Comment 26</div>

I see the doctest failures on OS X when I apply this on top of 8.1.beta1. Could it be platform-specific?

Note that changing line 680 in `local/lib/python2.7/site-packages/sphinx/environment/__init__.py`

```
       self.settings['smart_quotes'] = True
```
from `True` to `False` fixes the doctests.



---

archive/issue_comments_347153.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nI think I figured out the right place for `docutils.conf`:\n\n```diff\ndiff --git a/src/sage/misc/sphinxify.py b/src/sage/misc/sphinxify.py\nindex f084a19bf6..f114b9fcd7 100644\n--- a/src/sage/misc/sphinxify.py\n+++ b/src/sage/misc/sphinxify.py\n@@ -80,6 +80,10 @@ def sphinxify(docstring, format='html'):\n     # buildername, confoverrides, status, warning, freshenv).\n     confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')\n \n+    open(os.path.join(srcdir, 'docutils.conf'), 'w').write(r\"\"\"\n+[parser]\n+smart_quotes = no\n+\"\"\")\n     doctreedir = os.path.join(srcdir, 'doctrees')\n     confoverrides = {'html_context': {}, 'master_doc': 'docstring'}\n  \n```\nBut even though Sphinx seems to find this file, it doesn't change Sphinx's setting for `self.settings['smart_quotes']`.",
    "created_at": "2017-08-11T00:00:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347153",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:27" align="right">Comment 27</div>

I think I figured out the right place for `docutils.conf`:

```diff
diff --git a/src/sage/misc/sphinxify.py b/src/sage/misc/sphinxify.py
index f084a19bf6..f114b9fcd7 100644
--- a/src/sage/misc/sphinxify.py
+++ b/src/sage/misc/sphinxify.py
@@ -80,6 +80,10 @@ def sphinxify(docstring, format='html'):
     # buildername, confoverrides, status, warning, freshenv).
     confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')
 
+    open(os.path.join(srcdir, 'docutils.conf'), 'w').write(r"""
+[parser]
+smart_quotes = no
+""")
     doctreedir = os.path.join(srcdir, 'doctrees')
     confoverrides = {'html_context': {}, 'master_doc': 'docstring'}
  
```
But even though Sphinx seems to find this file, it doesn't change Sphinx's setting for `self.settings['smart_quotes']`.



---

archive/issue_comments_347154.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nNot platform specific, but it may have been triggered by something else. What you show about the sphinx environment is quite suggestive. I will investigate that stuff.",
    "created_at": "2017-08-11T01:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347154",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:28" align="right">Comment 28</div>

Not platform specific, but it may have been triggered by something else. What you show about the sphinx environment is quite suggestive. I will investigate that stuff.



---

archive/issue_comments_347155.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI cannot seem to be able to force the smart_quotes to `False` at runtime either. More curious, I am looking at the file `sandpile.py` and there are other instances of help messages with double quotes that don't trigger doctests failures. So I am wondering if utf8 is also part of the mix.",
    "created_at": "2017-08-11T02:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347155",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">Comment 29</div>

I cannot seem to be able to force the smart_quotes to `False` at runtime either. More curious, I am looking at the file `sandpile.py` and there are other instances of help messages with double quotes that don't trigger doctests failures. So I am wondering if utf8 is also part of the mix.



---

archive/issue_comments_347156.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nIt's strange. In the two sandpile files with failures, single quotes are getting replaced, but not `--` by an en-dash. In `ipython_tests.py`, `--` is replaced by en-dashes, but that's all, the quotes are not changed.",
    "created_at": "2017-08-11T02:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347156",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:30" align="right">Comment 30</div>

It's strange. In the two sandpile files with failures, single quotes are getting replaced, but not `--` by an en-dash. In `ipython_tests.py`, `--` is replaced by en-dashes, but that's all, the quotes are not changed.



---

archive/issue_comments_347157.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nTwo more things: first, I am seeing some messages unnecessarily labeled as \"warnings\":\n\n```\n[dochtml] Build finished.  The built documents can be found in /Users/palmieri/Desktop/Sage_stuff/git/sage/local/share/doc/sage/inventory/en/reference/parallel\n[dochtml] [parallel ] WARNING: Build finished.  The built documents can be found in /Users/palmieri/Desktop/Sage_stuff/git/sage/local/share/doc/sage/inventory/en/reference/parallel\n```\nSecond, there are deprecation warnings:\n\n```\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/sphinx/util/compat.py:40: RemovedInSphinx17Warning: sphinx.util.compat.Directive is deprecated and will be removed in Sphinx 1.7, please use docutils' instead.\n```\nIt looks like these can be removed with this change:\n\n```diff\ndiff --git a/src/sage_setup/docbuild/ext/sage_autodoc.py b/src/sage_setup/docbuild/ext/sage_autodoc.py\nindex 32b045c6bf..7590e22918 100644\n--- a/src/sage_setup/docbuild/ext/sage_autodoc.py\n+++ b/src/sage_setup/docbuild/ext/sage_autodoc.py\n@@ -39,7 +39,7 @@ from sphinx.locale import _\n from sphinx.pycode import ModuleAnalyzer, PycodeError\n from sphinx.application import ExtensionError\n from sphinx.util.nodes import nested_parse_with_titles\n-from sphinx.util.compat import Directive\n+from docutils.parsers.rst import Directive\n from sphinx.util.inspect import getargspec, isdescriptor, safe_getmembers, \\\n     safe_getattr, object_description, is_builtin_class_method\n from sphinx.util.docstrings import prepare_docstring\n```\nEdit: this is while building the reference manual.",
    "created_at": "2017-08-11T03:05:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347157",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">Comment 31</div>

Two more things: first, I am seeing some messages unnecessarily labeled as "warnings":

```
[dochtml] Build finished.  The built documents can be found in /Users/palmieri/Desktop/Sage_stuff/git/sage/local/share/doc/sage/inventory/en/reference/parallel
[dochtml] [parallel ] WARNING: Build finished.  The built documents can be found in /Users/palmieri/Desktop/Sage_stuff/git/sage/local/share/doc/sage/inventory/en/reference/parallel
```
Second, there are deprecation warnings:

```
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/sphinx/util/compat.py:40: RemovedInSphinx17Warning: sphinx.util.compat.Directive is deprecated and will be removed in Sphinx 1.7, please use docutils' instead.
```
It looks like these can be removed with this change:

```diff
diff --git a/src/sage_setup/docbuild/ext/sage_autodoc.py b/src/sage_setup/docbuild/ext/sage_autodoc.py
index 32b045c6bf..7590e22918 100644
--- a/src/sage_setup/docbuild/ext/sage_autodoc.py
+++ b/src/sage_setup/docbuild/ext/sage_autodoc.py
@@ -39,7 +39,7 @@ from sphinx.locale import _
 from sphinx.pycode import ModuleAnalyzer, PycodeError
 from sphinx.application import ExtensionError
 from sphinx.util.nodes import nested_parse_with_titles
-from sphinx.util.compat import Directive
+from docutils.parsers.rst import Directive
 from sphinx.util.inspect import getargspec, isdescriptor, safe_getmembers, \
     safe_getattr, object_description, is_builtin_class_method
 from sphinx.util.docstrings import prepare_docstring
```
Edit: this is while building the reference manual.



---

archive/issue_comments_347158.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nYes, we can definitely do something about the deprecation. The `WARNING` is more curious.",
    "created_at": "2017-08-11T03:09:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347158",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">Comment 32</div>

Yes, we can definitely do something about the deprecation. The `WARNING` is more curious.



---

archive/issue_comments_347159.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nLooks like the WARNING is self inflicted\n\n```\n        # replacements: pairs of regular expressions and their replacements,\n        # to be applied to Sphinx output.\n        self.replacements = [(re.compile('build succeeded, [0-9]+ warning[s]?.'),\n                              'build succeeded.')]\n```\nfrom `sage_setup/docbuild/sphinxbuild.py`",
    "created_at": "2017-08-11T03:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347159",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:33" align="right">Comment 33</div>

Looks like the WARNING is self inflicted

```
        # replacements: pairs of regular expressions and their replacements,
        # to be applied to Sphinx output.
        self.replacements = [(re.compile('build succeeded, [0-9]+ warning[s]?.'),
                              'build succeeded.')]
```
from `sage_setup/docbuild/sphinxbuild.py`



---

archive/issue_comments_347160.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@jhpalmieri](#comment%3A27):\n> I think I figured out the right place for `docutils.conf`:\n> \n> ```diff\n> diff --git a/src/sage/misc/sphinxify.py b/src/sage/misc/sphinxify.py\n> index f084a19bf6..f114b9fcd7 100644\n> --- a/src/sage/misc/sphinxify.py\n> +++ b/src/sage/misc/sphinxify.py\n> @@ -80,6 +80,10 @@ def sphinxify(docstring, format='html'):\n>      # buildername, confoverrides, status, warning, freshenv).\n>      confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')\n>  \n> +    open(os.path.join(srcdir, 'docutils.conf'), 'w').write(r\"\"\"\n> +[parser]\n> +smart_quotes = no\n> +\"\"\")\n>      doctreedir = os.path.join(srcdir, 'doctrees')\n>      confoverrides = {'html_context': {}, 'master_doc': 'docstring'}\n>   \n> ```\n> But even though Sphinx seems to find this file, it doesn't change Sphinx's setting for `self.settings['smart_quotes']`.\n\nparser -> parsers I got something to work that way specifying `DOCUTILSCONFIG`",
    "created_at": "2017-08-11T03:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347160",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@jhpalmieri](#comment%3A27):
> I think I figured out the right place for `docutils.conf`:
> 
> ```diff
> diff --git a/src/sage/misc/sphinxify.py b/src/sage/misc/sphinxify.py
> index f084a19bf6..f114b9fcd7 100644
> --- a/src/sage/misc/sphinxify.py
> +++ b/src/sage/misc/sphinxify.py
> @@ -80,6 +80,10 @@ def sphinxify(docstring, format='html'):
>      # buildername, confoverrides, status, warning, freshenv).
>      confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')
>  
> +    open(os.path.join(srcdir, 'docutils.conf'), 'w').write(r"""
> +[parser]
> +smart_quotes = no
> +""")
>      doctreedir = os.path.join(srcdir, 'doctrees')
>      confoverrides = {'html_context': {}, 'master_doc': 'docstring'}
>   
> ```
> But even though Sphinx seems to find this file, it doesn't change Sphinx's setting for `self.settings['smart_quotes']`.

parser -> parsers I got something to work that way specifying `DOCUTILSCONFIG`



---

archive/issue_comments_347161.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nYes, your change but with `parsers` instead of `parser` works for sandpile.py.",
    "created_at": "2017-08-11T03:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347161",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:35" align="right">Comment 35</div>

Yes, your change but with `parsers` instead of `parser` works for sandpile.py.



---

archive/issue_comments_347162.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nGood, thanks for catching that. I thought I had tried \"parsers\", and in fact I had, but with the wrong location for `docutils.conf`.",
    "created_at": "2017-08-11T04:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347162",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">Comment 36</div>

Good, thanks for catching that. I thought I had tried "parsers", and in fact I had, but with the wrong location for `docutils.conf`.



---

archive/issue_comments_347163.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nWe can silence the warnings by adding the appropriate regular expression to `self.useless_chatter`:\n\n```diff\ndiff --git a/src/sage_setup/docbuild/sphinxbuild.py b/src/sage_setup/docbuild/sphinxbuild.py\nindex 1deac3d312..ade37bd80f 100644\n--- a/src/sage_setup/docbuild/sphinxbuild.py\n+++ b/src/sage_setup/docbuild/sphinxbuild.py\n@@ -56,6 +56,7 @@ class SageSphinxLogger(object):\n             re.compile('WARNING: while setting up extension'),\n             re.compile('WARNING: Any IDs not assiend for figure node'),\n             re.compile('WARNING: .* is not referenced'),\n+            re.compile('WARNING: Build finished.*'),\n             re.compile('language \"hu\" not supported'),\n             )\n \n```",
    "created_at": "2017-08-11T04:42:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347163",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:37" align="right">Comment 37</div>

We can silence the warnings by adding the appropriate regular expression to `self.useless_chatter`:

```diff
diff --git a/src/sage_setup/docbuild/sphinxbuild.py b/src/sage_setup/docbuild/sphinxbuild.py
index 1deac3d312..ade37bd80f 100644
--- a/src/sage_setup/docbuild/sphinxbuild.py
+++ b/src/sage_setup/docbuild/sphinxbuild.py
@@ -56,6 +56,7 @@ class SageSphinxLogger(object):
             re.compile('WARNING: while setting up extension'),
             re.compile('WARNING: Any IDs not assiend for figure node'),
             re.compile('WARNING: .* is not referenced'),
+            re.compile('WARNING: Build finished.*'),
             re.compile('language "hu" not supported'),
             )
 
```



---

archive/issue_comments_347164.json:
```json
{
    "body": "Changed branch from **[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)** to **[u/jhpalmieri/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx1.6.3)**",
    "created_at": "2017-08-11T04:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347164",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)** to **[u/jhpalmieri/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx1.6.3)**



---

archive/issue_comments_347165.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nHere is a branch with my proposed changes.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c\">56bffcc</a></td><td><code>trac 23023:</code></td></tr></table>\n",
    "created_at": "2017-08-11T04:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347165",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:39" align="right">Comment 39</div>

Here is a branch with my proposed changes.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c">56bffcc</a></td><td><code>trac 23023:</code></td></tr></table>




---

archive/issue_comments_347166.json:
```json
{
    "body": "Changed commit from **[6930d06](https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7)** to **[56bffcc](https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c)**",
    "created_at": "2017-08-11T04:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347166",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[6930d06](https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7)** to **[56bffcc](https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c)**



---

archive/issue_comments_347167.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@jhpalmieri](#comment%3A37):\n> We can silence the warnings by adding the appropriate regular expression to `self.useless_chatter`:\n> \n> ```diff\n> diff --git a/src/sage_setup/docbuild/sphinxbuild.py b/src/sage_setup/docbuild/sphinxbuild.py\n> index 1deac3d312..ade37bd80f 100644\n> --- a/src/sage_setup/docbuild/sphinxbuild.py\n> +++ b/src/sage_setup/docbuild/sphinxbuild.py\n> @@ -56,6 +56,7 @@ class SageSphinxLogger(object):\n>              re.compile('WARNING: while setting up extension'),\n>              re.compile('WARNING: Any IDs not assiend for figure node'),\n>              re.compile('WARNING: .* is not referenced'),\n> +            re.compile('WARNING: Build finished.*'),\n>              re.compile('language \"hu\" not supported'),\n>              )\n>  \n> ```\n\nYes we could, but I believe we are generating them ourselves a few lines down #23023?replyto=37#comment:33. I think we shouldn't generate them in the first place.",
    "created_at": "2017-08-11T05:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347167",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@jhpalmieri](#comment%3A37):
> We can silence the warnings by adding the appropriate regular expression to `self.useless_chatter`:
> 
> ```diff
> diff --git a/src/sage_setup/docbuild/sphinxbuild.py b/src/sage_setup/docbuild/sphinxbuild.py
> index 1deac3d312..ade37bd80f 100644
> --- a/src/sage_setup/docbuild/sphinxbuild.py
> +++ b/src/sage_setup/docbuild/sphinxbuild.py
> @@ -56,6 +56,7 @@ class SageSphinxLogger(object):
>              re.compile('WARNING: while setting up extension'),
>              re.compile('WARNING: Any IDs not assiend for figure node'),
>              re.compile('WARNING: .* is not referenced'),
> +            re.compile('WARNING: Build finished.*'),
>              re.compile('language "hu" not supported'),
>              )
>  
> ```

Yes we could, but I believe we are generating them ourselves a few lines down #23023?replyto=37#comment:33. I think we shouldn't generate them in the first place.



---

archive/issue_comments_347168.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nThese warning messages say \"Build finished...\". The other line (from [comment:33](#comment%3A33)) refers to strings saying \"build succeeded...\", so I don't think they're the same thing.",
    "created_at": "2017-08-11T15:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347168",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">Comment 41</div>

These warning messages say "Build finished...". The other line (from [comment:33](#comment%3A33)) refers to strings saying "build succeeded...", so I don't think they're the same thing.



---

archive/issue_comments_347169.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey, Jeroen Demeyer** to **Fran\u00e7ois Bissey, Jeroen Demeyer, John Palmieri**",
    "created_at": "2017-08-12T03:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347169",
    "user": "https://github.com/kiwifb"
}
```

Changed reviewer from **François Bissey, Jeroen Demeyer** to **François Bissey, Jeroen Demeyer, John Palmieri**



---

archive/issue_events_303118.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-12T03:09:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303118"
}
```



---

archive/issue_events_303119.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-12T03:09:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303119"
}
```



---

archive/issue_comments_347170.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nReplying to [@jhpalmieri](#comment%3A41):\n> These warning messages say \"Build finished...\". The other line (from [comment:33](#comment%3A33)) refers to strings saying \"build succeeded...\", so I don't think they're the same thing.\n\nRight you are. So, at the very least back to need review. I find it surprising that there doesn't seem to be an easier way to set smart_quotes but that's the only documented way.",
    "created_at": "2017-08-12T03:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347170",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:42" align="right">Comment 42</div>

Replying to [@jhpalmieri](#comment%3A41):
> These warning messages say "Build finished...". The other line (from [comment:33](#comment%3A33)) refers to strings saying "build succeeded...", so I don't think they're the same thing.

Right you are. So, at the very least back to need review. I find it surprising that there doesn't seem to be an easier way to set smart_quotes but that's the only documented way.



---

archive/issue_comments_347171.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer, Fran\u00e7ois Bissey** to **Jeroen Demeyer, Fran\u00e7ois Bissey, John Palmieri**",
    "created_at": "2017-08-12T03:09:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347171",
    "user": "https://github.com/kiwifb"
}
```

Changed author from **Jeroen Demeyer, François Bissey** to **Jeroen Demeyer, François Bissey, John Palmieri**



---

archive/issue_comments_347172.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nEverything else was positively reviewed, so I can't review my own branch. Can you reproduce the doctest failures and verify that the change to sphinxify.py fixes them?\n\nFrom the docutils documentation, it sounds like there is a command-line switch to turn off smart quotes, but I don't think we can use that since we are not calling docutils from the command line.",
    "created_at": "2017-08-12T05:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347172",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:43" align="right">Comment 43</div>

Everything else was positively reviewed, so I can't review my own branch. Can you reproduce the doctest failures and verify that the change to sphinxify.py fixes them?

From the docutils documentation, it sounds like there is a command-line switch to turn off smart quotes, but I don't think we can use that since we are not calling docutils from the command line.



---

archive/issue_events_303120.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-12T06:38:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303120"
}
```



---

archive/issue_events_303121.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-12T06:38:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303121"
}
```



---

archive/issue_comments_347173.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nReplying to [@jhpalmieri](#comment%3A43):\n> Everything else was positively reviewed, so I can't review my own branch. Can you reproduce the doctest failures and verify that the change to sphinxify.py fixes them?\n> \n\nI can and I already checked.\n\n> From the docutils documentation, it sounds like there is a command-line switch to turn off smart quotes, but I don't think we can use that since we are not calling docutils from the command line.\n\nYes. I am fairly sure there is a direct way to get sphinx to call docutils with different options but I don't know how to do it.",
    "created_at": "2017-08-12T06:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347173",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">Comment 44</div>

Replying to [@jhpalmieri](#comment%3A43):
> Everything else was positively reviewed, so I can't review my own branch. Can you reproduce the doctest failures and verify that the change to sphinxify.py fixes them?
> 

I can and I already checked.

> From the docutils documentation, it sounds like there is a command-line switch to turn off smart quotes, but I don't think we can use that since we are not calling docutils from the command line.

Yes. I am fairly sure there is a direct way to get sphinx to call docutils with different options but I don't know how to do it.



---

archive/issue_events_303122.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-12T17:45:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303122"
}
```



---

archive/issue_events_303123.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-12T17:45:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303123"
}
```



---

archive/issue_comments_347174.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nParallel \"make doc-pdf\" doesn't work, hangs with N = number of processes python zombies.",
    "created_at": "2017-08-12T17:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347174",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:45" align="right">Comment 45</div>

Parallel "make doc-pdf" doesn't work, hangs with N = number of processes python zombies.



---

archive/issue_comments_347175.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nReplying to [@vbraun](#comment%3A45):\n> Parallel \"make doc-pdf\" doesn't work, hangs with N = number of processes python zombies.\n\nI can't reproduce this on OS X. More silly warning messages, but it completes:\n\n```\n[docpdf] Elapsed time: 895.7 seconds.\n[docpdf] [website  ] WARNING: Elapsed time: 895.7 seconds.\n[docpdf] Done building the documentation!\n[docpdf] [website  ] WARNING: Done building the documentation!\n\nreal\t15m5.280s\nuser\t59m42.040s\nsys\t3m0.851s\nSage build/upgrade complete!\n```",
    "created_at": "2017-08-12T21:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347175",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:46" align="right">Comment 46</div>

Replying to [@vbraun](#comment%3A45):
> Parallel "make doc-pdf" doesn't work, hangs with N = number of processes python zombies.

I can't reproduce this on OS X. More silly warning messages, but it completes:

```
[docpdf] Elapsed time: 895.7 seconds.
[docpdf] [website  ] WARNING: Elapsed time: 895.7 seconds.
[docpdf] Done building the documentation!
[docpdf] [website  ] WARNING: Done building the documentation!

real	15m5.280s
user	59m42.040s
sys	3m0.851s
Sage build/upgrade complete!
```



---

archive/issue_comments_347176.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nCouldn't reproduce it here either on Gentoo at \"-j8\".",
    "created_at": "2017-08-13T01:55:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347176",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:47" align="right">Comment 47</div>

Couldn't reproduce it here either on Gentoo at "-j8".



---

archive/issue_comments_347177.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nAnd in case it matters, I'm using \"-j6\".",
    "created_at": "2017-08-13T03:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347177",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:48" align="right">Comment 48</div>

And in case it matters, I'm using "-j6".



---

archive/issue_comments_347178.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nJust got a hicup while doing another test. `typing` wasn't installed in time for building doc-pdf, so dependencies will have to be tweaked.",
    "created_at": "2017-08-13T22:58:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347178",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:49" align="right">Comment 49</div>

Just got a hicup while doing another test. `typing` wasn't installed in time for building doc-pdf, so dependencies will have to be tweaked.



---

archive/issue_comments_347179.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx1.6.3)** to **[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)**",
    "created_at": "2017-08-13T23:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347179",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/jhpalmieri/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx1.6.3)** to **[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)**



---

archive/issue_comments_347180.json:
```json
{
    "body": "Changed commit from **[56bffcc](https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c)** to **[c488967](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)**",
    "created_at": "2017-08-13T23:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347180",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[56bffcc](https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c)** to **[c488967](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)**



---

archive/issue_events_303124.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-13T23:40:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303124"
}
```



---

archive/issue_events_303125.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-13T23:40:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303125"
}
```



---

archive/issue_comments_347181.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nThat should take care of that last problem, but it doesn't explain Volker's issue that we cannot seem to able to reproduce. I am waiting for more opinions before putting it back to positive.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/039c7f976532ff378257ed65cb43a79f1a2dcaf3\">039c7f9</a></td><td><code>Merge branch 'develop' into sphinx-1.6.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85\">c488967</a></td><td><code>Add typing to DOC_DEPENDENCIES</code></td></tr></table>\n",
    "created_at": "2017-08-13T23:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347181",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:50" align="right">Comment 50</div>

That should take care of that last problem, but it doesn't explain Volker's issue that we cannot seem to able to reproduce. I am waiting for more opinions before putting it back to positive.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/039c7f976532ff378257ed65cb43a79f1a2dcaf3">039c7f9</a></td><td><code>Merge branch 'develop' into sphinx-1.6.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85">c488967</a></td><td><code>Add typing to DOC_DEPENDENCIES</code></td></tr></table>




---

archive/issue_comments_347182.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nShould `typing` be a dependency for `sphinx`, or just for doc-building?",
    "created_at": "2017-08-14T00:29:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347182",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:51" align="right">Comment 51</div>

Should `typing` be a dependency for `sphinx`, or just for doc-building?



---

archive/issue_comments_347183.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nIt is a runtime dependency. You could probably use some functionalities of sphinx without touching `typing`, that's why I put it there rather a dependency of `sphinx` but I gave it some thought.",
    "created_at": "2017-08-14T01:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347183",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:52" align="right">Comment 52</div>

It is a runtime dependency. You could probably use some functionalities of sphinx without touching `typing`, that's why I put it there rather a dependency of `sphinx` but I gave it some thought.



---

archive/issue_comments_347184.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nDo we wait for more information, or do we mark this as \"positive review\" and hope that the dependencies fix the problem?",
    "created_at": "2017-08-14T05:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347184",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:53" align="right">Comment 53</div>

Do we wait for more information, or do we mark this as "positive review" and hope that the dependencies fix the problem?



---

archive/issue_comments_347185.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nWe may as well have another go.",
    "created_at": "2017-08-14T05:23:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347185",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:54" align="right">Comment 54</div>

We may as well have another go.



---

archive/issue_events_303126.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-14T05:23:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303126"
}
```



---

archive/issue_events_303127.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-08-14T05:23:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303127"
}
```



---

archive/issue_comments_347186.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nReplying to [@kiwifb](#comment%3A52):\n> It is a runtime dependency. You could probably use some functionalities of sphinx without touching `typing`, that's why I put it there rather a dependency of `sphinx` but I gave it some thought.\n\nI agree. You don't need typing just to install Sphinx.",
    "created_at": "2017-08-14T08:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347186",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:55" align="right">Comment 55</div>

Replying to [@kiwifb](#comment%3A52):
> It is a runtime dependency. You could probably use some functionalities of sphinx without touching `typing`, that's why I put it there rather a dependency of `sphinx` but I gave it some thought.

I agree. You don't need typing just to install Sphinx.



---

archive/issue_comments_347187.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nStill get the error from `make -j10 doc-pdf`. The docpdf.log contains errors like\n\n```\n<sin_plot.png, id=51, 602.25pt x 501.875pt> <use sin_plot.png> [3 [85]]make[2]: *** write jobserver: Bad file descriptor.  Stop.\n```\nSeems like some script is mucking with the inherited make jobserver file descriptor.",
    "created_at": "2017-08-14T22:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347187",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:56" align="right">Comment 56</div>

Still get the error from `make -j10 doc-pdf`. The docpdf.log contains errors like

```
<sin_plot.png, id=51, 602.25pt x 501.875pt> <use sin_plot.png> [3 [85]]make[2]: *** write jobserver: Bad file descriptor.  Stop.
```
Seems like some script is mucking with the inherited make jobserver file descriptor.



---

archive/issue_events_303128.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-14T22:34:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303128"
}
```



---

archive/issue_events_303129.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-14T22:34:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303129"
}
```



---

archive/issue_comments_347188.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nThat a little bit more to work on than your first report. I'll see if I can trigger this again.",
    "created_at": "2017-08-14T22:36:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347188",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:57" align="right">Comment 57</div>

That a little bit more to work on than your first report. I'll see if I can trigger this again.



---

archive/issue_comments_347189.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nBtw which latexmk are you using? 4.52c here...",
    "created_at": "2017-08-15T06:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347189",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:58" align="right">Comment 58</div>

Btw which latexmk are you using? 4.52c here...



---

archive/issue_comments_347190.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\n`4.35` here, I can upgrade to see if it has an impact. I may be slow to respond in the next couple of days. The proverbial `s**t` hit the fan at work today.",
    "created_at": "2017-08-15T07:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347190",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:59" align="right">Comment 59</div>

`4.35` here, I can upgrade to see if it has an impact. I may be slow to respond in the next couple of days. The proverbial `s**t` hit the fan at work today.



---

archive/issue_comments_347191.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\n4.52c for me.",
    "created_at": "2017-08-15T14:37:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347191",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:60" align="right">Comment 60</div>

4.52c for me.



---

archive/issue_comments_347192.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nNo difference with `latekmk-4.52c` here.",
    "created_at": "2017-08-20T22:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347192",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:61" align="right">Comment 61</div>

No difference with `latekmk-4.52c` here.



---

archive/issue_comments_347193.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nI upgraded to Fedora 26 and can't reproduce it any more...",
    "created_at": "2017-08-26T09:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347193",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:62" align="right">Comment 62</div>

I upgraded to Fedora 26 and can't reproduce it any more...



---

archive/issue_events_303130.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-26T09:58:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303130"
}
```



---

archive/issue_events_303131.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5057c1198db8c5b36b8aaed4dfe9c7dee677fcf4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-08-26T09:58:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23023#event-303131"
}
```



---

archive/issue_comments_347194.json:
```json
{
    "body": "Changed branch from **[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)** to **[c488967](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)**",
    "created_at": "2017-08-26T09:58:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347194",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)** to **[c488967](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)**



---

archive/issue_comments_347195.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nReplying to [@vbraun](#comment%3A62):\n> I upgraded to Fedora 26 and can't reproduce it any more...\n\nWeird. But glad we are moving forward on that one.",
    "created_at": "2017-08-26T10:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347195",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:64" align="right">Comment 64</div>

Replying to [@vbraun](#comment%3A62):
> I upgraded to Fedora 26 and can't reproduce it any more...

Weird. But glad we are moving forward on that one.



---

archive/issue_comments_347196.json:
```json
{
    "body": "Changed commit from **[c488967](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)** to none",
    "created_at": "2017-08-26T10:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347196",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[c488967](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)** to none



---

archive/issue_comments_347197.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nThanks for finally getting this done.",
    "created_at": "2017-08-28T14:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347197",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">Comment 65</div>

Thanks for finally getting this done.



---

archive/issue_comments_347198.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nWhat is the reason for `typing` package being `standard` rather than `pip` type?",
    "created_at": "2017-08-31T08:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347198",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:66" align="right">Comment 66</div>

What is the reason for `typing` package being `standard` rather than `pip` type?



---

archive/issue_comments_347199.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nNot sure. I cannot say I really ever cared for that particular distinction - sorry.",
    "created_at": "2017-08-31T08:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347199",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:67" align="right">Comment 67</div>

Not sure. I cannot say I really ever cared for that particular distinction - sorry.



---

archive/issue_comments_347200.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nReplying to [@kiwifb](#comment%3A67):\n> Not sure. I cannot say I really ever cared for that particular distinction - sorry.\n\nIn particular, it's about having an extra tarball to care about; (`pip` type, to the contrary, is just a placeholder, no tarball to worry about...)\n\nThe only thing I can imagine is that one needs to specify in some standard package that it depends on it (either via Sage deps mechanism, or via pip/setup.py, I suppose...)",
    "created_at": "2017-08-31T08:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347200",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:68" align="right">Comment 68</div>

Replying to [@kiwifb](#comment%3A67):
> Not sure. I cannot say I really ever cared for that particular distinction - sorry.

In particular, it's about having an extra tarball to care about; (`pip` type, to the contrary, is just a placeholder, no tarball to worry about...)

The only thing I can imagine is that one needs to specify in some standard package that it depends on it (either via Sage deps mechanism, or via pip/setup.py, I suppose...)



---

archive/issue_comments_347201.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nRight, if you need to download it then it really makes it a special kind of optional package. `typing` is meant to be a standard package so part of the sage tarball.",
    "created_at": "2017-08-31T08:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347201",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:69" align="right">Comment 69</div>

Right, if you need to download it then it really makes it a special kind of optional package. `typing` is meant to be a standard package so part of the sage tarball.



---

archive/issue_comments_347202.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nReplying to [@dimpase](#comment%3A66):\n> What is the reason for `typing` package being `standard` rather than `pip` type?\n\n`standard` packages can depend only on `standard` packages: we do not assume Internet access when building Sage from source.",
    "created_at": "2017-08-31T08:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347202",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:70" align="right">Comment 70</div>

Replying to [@dimpase](#comment%3A66):
> What is the reason for `typing` package being `standard` rather than `pip` type?

`standard` packages can depend only on `standard` packages: we do not assume Internet access when building Sage from source.



---

archive/issue_comments_347203.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nI am stuck on #14645 with a pip package I don't know how to specify, due to \"`-`\" in its name, namely `sphinxcontrib-websupport`. It cannot be of type `pip`, as `-` is not allowed in the Sage package names, as far as I can tell...",
    "created_at": "2017-08-31T08:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347203",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:71" align="right">Comment 71</div>

I am stuck on #14645 with a pip package I don't know how to specify, due to "`-`" in its name, namely `sphinxcontrib-websupport`. It cannot be of type `pip`, as `-` is not allowed in the Sage package names, as far as I can tell...



---

archive/issue_comments_347204.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">Comment 72</div>\n\nAnd can it be a standard package or is it the same problem? In any case that problem should be its own ticket.",
    "created_at": "2017-08-31T08:58:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347204",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:72" align="right">Comment 72</div>

And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.



---

archive/issue_comments_347205.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nReplying to [@kiwifb](#comment%3A72):\n> And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.\n\nOf course with a standard package you can do anything in principle, but the standard machinery you used it `typing` won't work IMHO, as `sage-pip-install` (i.e. `$PIP_INSTALL` used in `spkg-install`) does not seem to allow\nthe name of pip package to be installed as an argument...",
    "created_at": "2017-08-31T09:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347205",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:73" align="right">Comment 73</div>

Replying to [@kiwifb](#comment%3A72):
> And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.

Of course with a standard package you can do anything in principle, but the standard machinery you used it `typing` won't work IMHO, as `sage-pip-install` (i.e. `$PIP_INSTALL` used in `spkg-install`) does not seem to allow
the name of pip package to be installed as an argument...



---

archive/issue_comments_347206.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nReplying to [@dimpase](#comment%3A73):\n> Replying to [@kiwifb](#comment%3A72):\n> > And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.\n\n> \n> Of course with a standard package you can do anything in principle, but the standard machinery you used it `typing` won't work IMHO, as `sage-pip-install` (i.e. `$PIP_INSTALL` used in `spkg-install`) does not seem to allow\n> the name of pip package to be installed as an argument...\n\nWe should really have this conversation at #14645 not here. I am not sure what your problem is with `$PIP_INSTALL`. It is a replacement for `python setup.py` in the package source tree. It behaves in a similar way but is better at package management operation (it knows how to remove a previous install properly).",
    "created_at": "2017-08-31T09:25:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347206",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:74" align="right">Comment 74</div>

Replying to [@dimpase](#comment%3A73):
> Replying to [@kiwifb](#comment%3A72):
> > And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.

> 
> Of course with a standard package you can do anything in principle, but the standard machinery you used it `typing` won't work IMHO, as `sage-pip-install` (i.e. `$PIP_INSTALL` used in `spkg-install`) does not seem to allow
> the name of pip package to be installed as an argument...

We should really have this conversation at #14645 not here. I am not sure what your problem is with `$PIP_INSTALL`. It is a replacement for `python setup.py` in the package source tree. It behaves in a similar way but is better at package management operation (it knows how to remove a previous install properly).



---

archive/issue_comments_347207.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\nI have opened #23764 to deal with this issue. Sorry for noise here.",
    "created_at": "2017-08-31T09:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347207",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:75" align="right">Comment 75</div>

I have opened #23764 to deal with this issue. Sorry for noise here.



---

archive/issue_comments_347208.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nSee #23834 for a followup.",
    "created_at": "2017-09-11T23:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23023#issuecomment-347208",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:76" align="right">Comment 76</div>

See #23834 for a followup.
