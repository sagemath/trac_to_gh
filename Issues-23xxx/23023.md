# Issue 23023: Upgrade to Sphinx 1.6.x

archive/issues_022786.json:
```json
{
    "body": "**Tarballs**:\n\n1. https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz\n\n2. https://pypi.python.org/packages/17/75/3698d7992a828ad6d7be99c0a888b75ed173a9280e53dbae67326029b60e/typing-3.6.1.tar.gz\n\n**CC:**  @kiwifb @embray\n\n**Branch:** [c48896722c5546fbdca8a58e6516828912d87f85](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)\n\n**Reviewer:** Fran\u00e7ois Bissey, Jeroen Demeyer, John Palmieri\n\n**Author:** Jeroen Demeyer, Fran\u00e7ois Bissey, John Palmieri\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23023\n\n",
    "closed_at": "2017-08-26T09:58:15Z",
    "created_at": "2017-05-18T11:12:23Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Upgrade to Sphinx 1.6.x",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23023",
    "user": "https://github.com/jdemeyer"
}
```
**Tarballs**:

1. https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz

2. https://pypi.python.org/packages/17/75/3698d7992a828ad6d7be99c0a888b75ed173a9280e53dbae67326029b60e/typing-3.6.1.tar.gz

**CC:**  @kiwifb @embray

**Branch:** [c48896722c5546fbdca8a58e6516828912d87f85](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)

**Reviewer:** François Bissey, Jeroen Demeyer, John Palmieri

**Author:** Jeroen Demeyer, François Bissey, John Palmieri

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/23023





---

archive/issue_comments_433798.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/upgrade_to_sphinx_1_6_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_sphinx_1_6_x)",
    "created_at": "2017-05-19T07:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433798",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/upgrade_to_sphinx_1_6_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_sphinx_1_6_x)



---

archive/issue_comments_433799.json:
```json
{
    "body": "**Commit:** [6a2b7866eaec483120b0abd99271bd589adb95b5](https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5)",
    "created_at": "2017-05-19T18:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [6a2b7866eaec483120b0abd99271bd589adb95b5](https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5)



---

archive/issue_comments_433800.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5\">6a2b786</a></td><td><code>Upgrade to Sphinx 1.6.1</code></td></tr></table>\n",
    "created_at": "2017-05-19T18:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433800",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5">6a2b786</a></td><td><code>Upgrade to Sphinx 1.6.1</code></td></tr></table>




---

archive/issue_comments_433801.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n **Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz\n+\n+There is an upstream i18n problem: https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM\n``````\n",
    "created_at": "2017-05-22T11:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433801",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 **Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz
+
+There is an upstream i18n problem: https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM
``````




---

archive/issue_comments_433802.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2017-05-22T11:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433802",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "N/A" to "Reported upstream. No feedback yet.".



---

archive/issue_comments_433803.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n **Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz\n \n-There is an upstream i18n problem: https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM\n+There is an upstream i18n bug (log messages are translated to the language of the compiled document): https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM\n``````\n",
    "created_at": "2017-05-22T11:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433803",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 **Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz
 
-There is an upstream i18n problem: https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM
+There is an upstream i18n bug (log messages are translated to the language of the compiled document): https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM
``````




---

archive/issue_comments_433804.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-**Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz\n-\n-There is an upstream i18n bug (log messages are translated to the language of the compiled document): https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM\n+**Tarball**: https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz\n``````\n",
    "created_at": "2017-07-03T08:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433804",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-**Tarball**: https://pypi.python.org/packages/0a/32/594257b9fccc8ce4d120e86d481cabe55ee9de7c1686af2ee58eb4ec741e/Sphinx-1.6.1.tar.gz
-
-There is an upstream i18n bug (log messages are translated to the language of the compiled document): https://groups.google.com/forum/#!topic/sphinx-users/B6PHvgm6fMM
+**Tarball**: https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz
``````




---

archive/issue_comments_433805.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. No feedback yet.\" to \"N/A\".",
    "created_at": "2017-07-03T08:13:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433805",
    "user": "https://github.com/jdemeyer"
}
```

**Changing upstream** from "Reported upstream. No feedback yet." to "N/A".



---

archive/issue_comments_433806.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n-**Tarball**: https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz\n+**Tarballs**:\n+\n+1. https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz\n+\n+2. https://pypi.python.org/packages/17/75/3698d7992a828ad6d7be99c0a888b75ed173a9280e53dbae67326029b60e/typing-3.6.1.tar.gz\n``````\n",
    "created_at": "2017-07-03T09:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433806",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,5 @@
-**Tarball**: https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz
+**Tarballs**:
+
+1. https://pypi.python.org/packages/10/91/ceb2e0d763e0c626f7afd7e3272a5bb76dd06eed1f0b908270ea31984062/Sphinx-1.6.3.tar.gz
+
+2. https://pypi.python.org/packages/17/75/3698d7992a828ad6d7be99c0a888b75ed173a9280e53dbae67326029b60e/typing-3.6.1.tar.gz
``````




---

archive/issue_comments_433807.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c\">2ea32c1</a></td><td><code>Upgrade to Sphinx 1.6.3</code></td></tr></table>\n",
    "created_at": "2017-07-03T09:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c">2ea32c1</a></td><td><code>Upgrade to Sphinx 1.6.3</code></td></tr></table>




---

archive/issue_comments_433808.json:
```json
{
    "body": "**Changing commit** from \"[6a2b7866eaec483120b0abd99271bd589adb95b5](https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5)\" to \"[2ea32c168574623501bcd031253e8e322afa9a8c](https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c)\".",
    "created_at": "2017-07-03T09:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433808",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6a2b7866eaec483120b0abd99271bd589adb95b5](https://github.com/sagemath/sagetrac-mirror/commit/6a2b7866eaec483120b0abd99271bd589adb95b5)" to "[2ea32c168574623501bcd031253e8e322afa9a8c](https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c)".



---

archive/issue_comments_433809.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2017-07-04T08:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433809",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_433810.json:
```json
{
    "body": "<a id='comment:10'></a>\nAre we using sphinx.websupport for anything? This is now split:\n\n```\n# -*- coding: utf-8 -*-\n\"\"\"\n    sphinx.websupport\n    ~~~~~~~~~~~~~~~~~\n\n    Base Module for web support functions.\n\n    :copyright: Copyright 2007-2017 by the Sphinx team, see AUTHORS.\n    :license: BSD, see LICENSE for details.\n\"\"\"\n\nimport warnings\n\nfrom sphinx.deprecation import RemovedInSphinx20Warning\n\ntry:\n    from sphinxcontrib.websupport import WebSupport  # NOQA\n    from sphinxcontrib.websupport import errors  # NOQA\n    from sphinxcontrib.websupport.search import BaseSearch, SEARCH_ADAPTERS  # NOQA\n    from sphinxcontrib.websupport.storage import StorageBackend  # NOQA\n\n    warnings.warn('sphinx.websupport module is now provided as sphinxcontrib-websupport. '\n                  'sphinx.websupport will be removed at Sphinx-2.0. '\n                  'Please use the package instead.',\n                  RemovedInSphinx20Warning)\nexcept ImportError:\n    warnings.warn('Since Sphinx-1.6, sphinx.websupport module is now separated to '\n                  'sphinxcontrib-websupport package. Please add it into your dependency list.')\n```",
    "created_at": "2017-07-04T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433810",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:10'></a>
Are we using sphinx.websupport for anything? This is now split:

```
# -*- coding: utf-8 -*-
"""
    sphinx.websupport
    ~~~~~~~~~~~~~~~~~

    Base Module for web support functions.

    :copyright: Copyright 2007-2017 by the Sphinx team, see AUTHORS.
    :license: BSD, see LICENSE for details.
"""

import warnings

from sphinx.deprecation import RemovedInSphinx20Warning

try:
    from sphinxcontrib.websupport import WebSupport  # NOQA
    from sphinxcontrib.websupport import errors  # NOQA
    from sphinxcontrib.websupport.search import BaseSearch, SEARCH_ADAPTERS  # NOQA
    from sphinxcontrib.websupport.storage import StorageBackend  # NOQA

    warnings.warn('sphinx.websupport module is now provided as sphinxcontrib-websupport. '
                  'sphinx.websupport will be removed at Sphinx-2.0. '
                  'Please use the package instead.',
                  RemovedInSphinx20Warning)
except ImportError:
    warnings.warn('Since Sphinx-1.6, sphinx.websupport module is now separated to '
                  'sphinxcontrib-websupport package. Please add it into your dependency list.')
```



---

archive/issue_comments_433811.json:
```json
{
    "body": "<a id='comment:11'></a>\nThis thing needs imagemagick's `convert` program. Not sure if we would use it and this is a relatively low requirement on a normal desktop but still surprised me. From `sphinx/ext/imgconverter.py`\n\n```\ndef setup(app):\n    # type: (Sphinx) -> Dict[unicode, Any]\n    app.add_post_transform(ImagemagickConverter)\n    app.add_config_value('image_converter', 'convert', 'env')\n    app.add_config_value('image_converter_args', [], 'env')\n\n    return {\n        'version': 'builtin',\n        'parallel_read_safe': True,\n        'parallel_write_safe': True,\n    }\n```\nI have been trying to run the self tests for myself and that came up. Because it is a relatively new machine install `convert` was not installed.",
    "created_at": "2017-07-05T02:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433811",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
This thing needs imagemagick's `convert` program. Not sure if we would use it and this is a relatively low requirement on a normal desktop but still surprised me. From `sphinx/ext/imgconverter.py`

```
def setup(app):
    # type: (Sphinx) -> Dict[unicode, Any]
    app.add_post_transform(ImagemagickConverter)
    app.add_config_value('image_converter', 'convert', 'env')
    app.add_config_value('image_converter_args', [], 'env')

    return {
        'version': 'builtin',
        'parallel_read_safe': True,
        'parallel_write_safe': True,
    }
```
I have been trying to run the self tests for myself and that came up. Because it is a relatively new machine install `convert` was not installed.



---

archive/issue_comments_433812.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [fbissey](#comment%3A11):\n> I have been trying to run the self tests for myself and that came up.\n\n\nExactly what came up? What happened? And is it a regression from Sphinx 1.5.3 to Sphinx 1.6.3?",
    "created_at": "2017-07-05T10:00:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433812",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Replying to [fbissey](#comment%3A11):
> I have been trying to run the self tests for myself and that came up.


Exactly what came up? What happened? And is it a regression from Sphinx 1.5.3 to Sphinx 1.6.3?



---

archive/issue_comments_433813.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jdemeyer](#comment%3A12):\n> Replying to [fbissey](#comment%3A11):\n> > I have been trying to run the self tests for myself and that came up.\n\n> \n> Exactly what came up? What happened? And is it a regression from Sphinx 1.5.3 to Sphinx 1.6.3?\n\n\nsphinx own testsuite. I didn't have `convert` installed on the system and it broke. That stuff appears to be new, that extension didn't exist in 1.5.3, I haven't tested it within sage yet. The spkg doesn't have a spkg-check anyway, too many requirements not in sage to run it. But I'll probably do a test run soon without `convert` installed to see if it needs to be added to the list of sage's requirement",
    "created_at": "2017-07-05T10:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433813",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
Replying to [jdemeyer](#comment%3A12):
> Replying to [fbissey](#comment%3A11):
> > I have been trying to run the self tests for myself and that came up.

> 
> Exactly what came up? What happened? And is it a regression from Sphinx 1.5.3 to Sphinx 1.6.3?


sphinx own testsuite. I didn't have `convert` installed on the system and it broke. That stuff appears to be new, that extension didn't exist in 1.5.3, I haven't tested it within sage yet. The spkg doesn't have a spkg-check anyway, too many requirements not in sage to run it. But I'll probably do a test run soon without `convert` installed to see if it needs to be added to the list of sage's requirement



---

archive/issue_comments_433814.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [fbissey](#comment%3A13):\n> But I'll probably do a test run soon without `convert` installed to see if it needs to be added to the list of sage's requirement\n\n\nSounds good. If it's only needed for the Sphinx testsuite but not for Sage, I wouldn't worry about it.",
    "created_at": "2017-07-05T10:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433814",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Replying to [fbissey](#comment%3A13):
> But I'll probably do a test run soon without `convert` installed to see if it needs to be added to the list of sage's requirement


Sounds good. If it's only needed for the Sphinx testsuite but not for Sage, I wouldn't worry about it.



---

archive/issue_comments_433815.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2017-07-06T01:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433815",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_433816.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2017-07-06T01:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433816",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** François Bissey



---

archive/issue_comments_433817.json:
```json
{
    "body": "<a id='comment:15'></a>\nLooks fine to me.",
    "created_at": "2017-07-06T01:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433817",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>
Looks fine to me.



---

archive/issue_comments_433818.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2017-07-12T12:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433818",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_433819.json:
```json
{
    "body": "**Dependencies:** #23179",
    "created_at": "2017-07-12T12:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433819",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #23179



---

archive/issue_comments_433820.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2017-07-29T20:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433820",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_433821.json:
```json
{
    "body": "**Changing dependencies** from \"#23179\" to \"\".",
    "created_at": "2017-07-29T20:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433821",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#23179" to "".



---

archive/issue_comments_433822.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2017-07-30T14:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433822",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_433823.json:
```json
{
    "body": "<a id='comment:18'></a>\nThe japanese docs don't build any more (make all-pdf works):\n\n```\n[docpdf] make[2]: Entering directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/ja/a_tour_of_sage'\n[docpdf] make[2]: *** No rule to make target 'all-pdf-ja'.  Stop.\n[docpdf] make[2]: Leaving directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/ja/a_tour_of_sage'\n[docpdf] Error building the documentation.\n```\n\nFor the record, we now also depend on latexmk (in TeXlive):\n\n```\n[docpdf] [repl     ] WARNING: LaTeX file written to /mnt/disk/home/release/Sage/local/share/doc/sage/latex/en/reference/repl\n[docpdf] make[2]: Entering directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/en/reference/repl'\n[docpdf] latexmk -pdf -dvi- -ps-  'repl.tex'\n[docpdf] make[2]: latexmk: Command not found\n[docpdf] Makefile:33: recipe for target 'repl.pdf' failed\n```\nThis is easily fixed by installing latexmk.",
    "created_at": "2017-07-30T14:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433823",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:18'></a>
The japanese docs don't build any more (make all-pdf works):

```
[docpdf] make[2]: Entering directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/ja/a_tour_of_sage'
[docpdf] make[2]: *** No rule to make target 'all-pdf-ja'.  Stop.
[docpdf] make[2]: Leaving directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/ja/a_tour_of_sage'
[docpdf] Error building the documentation.
```

For the record, we now also depend on latexmk (in TeXlive):

```
[docpdf] [repl     ] WARNING: LaTeX file written to /mnt/disk/home/release/Sage/local/share/doc/sage/latex/en/reference/repl
[docpdf] make[2]: Entering directory '/mnt/disk/home/release/Sage/local/share/doc/sage/latex/en/reference/repl'
[docpdf] latexmk -pdf -dvi- -ps-  'repl.tex'
[docpdf] make[2]: latexmk: Command not found
[docpdf] Makefile:33: recipe for target 'repl.pdf' failed
```
This is easily fixed by installing latexmk.



---

archive/issue_comments_433824.json:
```json
{
    "body": "<a id='comment:19'></a>\nI can see it. `make all-pdf` completing is probably thanks to parallel building. In docbuild/__init__.py\n\n```\n    def pdf(self):\n        \"\"\"\n        Builds the PDF files for this document.  This is done by first\n        (re)-building the LaTeX output, going into that LaTeX\n        directory, and running 'make all-pdf' (or for the special case of\n        the ja docs, 'all-pdf-ja(ex,to run platex)' there.\n\n        EXAMPLES::\n\n            sage: from sage_setup.docbuild import DocBuilder\n            sage: b = DocBuilder('tutorial')\n            sage: b.pdf() #not tested\n        \"\"\"\n        self.latex()\n        tex_dir = self._output_dir('latex')\n        pdf_dir = self._output_dir('pdf')\n        make_target = \"cd '%s' && $MAKE %s && mv -f *.pdf '%s'\"\n        error_message = \"failed to run $MAKE %s in %s\"\n        MB_LANG = {'ja': 'all-pdf-ja'} # language name : the modified target\n\n        # Replace the command for languages that require special processing\n        if self.lang in MB_LANG:\n            command = MB_LANG[self.lang]\n        else:\n            command = 'all-pdf'\n\n        if subprocess.call(make_target%(tex_dir, command, pdf_dir), shell=True):\n            raise RuntimeError(error_message%(command, tex_dir))\n        logger.warning(\"Build finished.  The built documents can be found in %s\", pdf_dir)\n```\nso `ja` used to be treated specially. But it appears that with sphinx 1.6.3 the Japanese specific target is not produced, just the regular `all-pdf`. \n\nSetting `MB_LANG={}` seems to work but the bigger question is whether to keep expecting some exceptions. sphinx may be moving away from particularism, in that case we should ditch it too.",
    "created_at": "2017-07-31T00:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433824",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>
I can see it. `make all-pdf` completing is probably thanks to parallel building. In docbuild/__init__.py

```
    def pdf(self):
        """
        Builds the PDF files for this document.  This is done by first
        (re)-building the LaTeX output, going into that LaTeX
        directory, and running 'make all-pdf' (or for the special case of
        the ja docs, 'all-pdf-ja(ex,to run platex)' there.

        EXAMPLES::

            sage: from sage_setup.docbuild import DocBuilder
            sage: b = DocBuilder('tutorial')
            sage: b.pdf() #not tested
        """
        self.latex()
        tex_dir = self._output_dir('latex')
        pdf_dir = self._output_dir('pdf')
        make_target = "cd '%s' && $MAKE %s && mv -f *.pdf '%s'"
        error_message = "failed to run $MAKE %s in %s"
        MB_LANG = {'ja': 'all-pdf-ja'} # language name : the modified target

        # Replace the command for languages that require special processing
        if self.lang in MB_LANG:
            command = MB_LANG[self.lang]
        else:
            command = 'all-pdf'

        if subprocess.call(make_target%(tex_dir, command, pdf_dir), shell=True):
            raise RuntimeError(error_message%(command, tex_dir))
        logger.warning("Build finished.  The built documents can be found in %s", pdf_dir)
```
so `ja` used to be treated specially. But it appears that with sphinx 1.6.3 the Japanese specific target is not produced, just the regular `all-pdf`. 

Setting `MB_LANG={}` seems to work but the bigger question is whether to keep expecting some exceptions. sphinx may be moving away from particularism, in that case we should ditch it too.



---

archive/issue_comments_433825.json:
```json
{
    "body": "**Changing commit** from \"[2ea32c168574623501bcd031253e8e322afa9a8c](https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c)\" to \"[6930d06663d7bbac51c840f163ba0874fbd2e9e7](https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7)\".",
    "created_at": "2017-08-08T02:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433825",
    "user": "https://github.com/kiwifb"
}
```

**Changing commit** from "[2ea32c168574623501bcd031253e8e322afa9a8c](https://github.com/sagemath/sagetrac-mirror/commit/2ea32c168574623501bcd031253e8e322afa9a8c)" to "[6930d06663d7bbac51c840f163ba0874fbd2e9e7](https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7)".



---

archive/issue_comments_433826.json:
```json
{
    "body": "<a id='comment:20'></a>\nLet's start moving this forwards again. I conformed to the boiler plate in #23179 and remove the Japanese specific stuff. If I were upstream I would have removed any kind of particularism at that level, so I am acting as if they just did until proven otherwise.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81253e8ca153e9fea1da822343559c0f48ea0e0f\">81253e8</a></td><td><code>Merge branch 'develop' into sphinx16</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bbfe54817ad4af89945c2a631922f0d60a5c4d6\">7bbfe54</a></td><td><code>conform typing to the new boiler plate.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7\">6930d06</a></td><td><code>Remove language specific targeting as upstream has removed at least the only one we are using.</code></td></tr></table>\n",
    "created_at": "2017-08-08T02:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433826",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
Let's start moving this forwards again. I conformed to the boiler plate in #23179 and remove the Japanese specific stuff. If I were upstream I would have removed any kind of particularism at that level, so I am acting as if they just did until proven otherwise.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81253e8ca153e9fea1da822343559c0f48ea0e0f">81253e8</a></td><td><code>Merge branch 'develop' into sphinx16</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bbfe54817ad4af89945c2a631922f0d60a5c4d6">7bbfe54</a></td><td><code>conform typing to the new boiler plate.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7">6930d06</a></td><td><code>Remove language specific targeting as upstream has removed at least the only one we are using.</code></td></tr></table>




---

archive/issue_comments_433827.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2017-08-08T02:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433827",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_433828.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/upgrade_to_sphinx_1_6_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_sphinx_1_6_x)\" to \"[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)\".",
    "created_at": "2017-08-08T02:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433828",
    "user": "https://github.com/kiwifb"
}
```

**Changing branch** from "[u/jdemeyer/upgrade_to_sphinx_1_6_x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_to_sphinx_1_6_x)" to "[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)".



---

archive/issue_comments_433829.json:
```json
{
    "body": "**Changing author** from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Fran\u00e7ois Bissey\".",
    "created_at": "2017-08-08T07:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433829",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Jeroen Demeyer" to "Jeroen Demeyer, François Bissey".



---

archive/issue_comments_433830.json:
```json
{
    "body": "<a id='comment:21'></a>\nThanks for moving forward with this! I'll test it right away.",
    "created_at": "2017-08-08T07:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433830",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Thanks for moving forward with this! I'll test it right away.



---

archive/issue_comments_433831.json:
```json
{
    "body": "**Changing reviewer** from \"Fran\u00e7ois Bissey\" to \"Fran\u00e7ois Bissey, Jeroen Demeyer\".",
    "created_at": "2017-08-08T18:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433831",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "François Bissey" to "François Bissey, Jeroen Demeyer".



---

archive/issue_comments_433832.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2017-08-08T18:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433832",
    "user": "https://github.com/jdemeyer"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_433833.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2017-08-10T21:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433833",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_433834.json:
```json
{
    "body": "<a id='comment:23'></a>\n\n```\nsage -t --long --warn-long 75.4 src/doc/en/thematic_tutorials/sandpile.rst  # 2 doctests failed\nsage -t --long --warn-long 75.4 src/sage/sandpiles/sandpile.py  # 2 doctests failed\nsage -t --long --warn-long 75.4 src/sage/repl/ipython_tests.py  # 1 doctest failed\n```",
    "created_at": "2017-08-10T21:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433834",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>

```
sage -t --long --warn-long 75.4 src/doc/en/thematic_tutorials/sandpile.rst  # 2 doctests failed
sage -t --long --warn-long 75.4 src/sage/sandpiles/sandpile.py  # 2 doctests failed
sage -t --long --warn-long 75.4 src/sage/repl/ipython_tests.py  # 1 doctest failed
```



---

archive/issue_comments_433835.json:
```json
{
    "body": "<a id='comment:24'></a>\nProblem with \"smart\" quotes? See http://www.sphinx-doc.org/en/stable/config.html#confval-html_use_smartypants. Should we create a `docutils.conf` file? I tried creating one containing\n\n```\n[parsers]\nsmart_quotes = no\n```\nbut I couldn't figure out the right place to put it, or at least no location that I tried had any effect on the failing doctests.",
    "created_at": "2017-08-10T23:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433835",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'></a>
Problem with "smart" quotes? See http://www.sphinx-doc.org/en/stable/config.html#confval-html_use_smartypants. Should we create a `docutils.conf` file? I tried creating one containing

```
[parsers]
smart_quotes = no
```
but I couldn't figure out the right place to put it, or at least no location that I tried had any effect on the failing doctests.



---

archive/issue_comments_433836.json:
```json
{
    "body": "<a id='comment:25'></a>\nCould be. Jeroen and I both doctested the stuff before - without issues. My personal suspicion is interference with another merged ticket. In any case I am re-starting at Volker's current snapshot to see if I can reproduce it.",
    "created_at": "2017-08-10T23:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433836",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:25'></a>
Could be. Jeroen and I both doctested the stuff before - without issues. My personal suspicion is interference with another merged ticket. In any case I am re-starting at Volker's current snapshot to see if I can reproduce it.



---

archive/issue_comments_433837.json:
```json
{
    "body": "<a id='comment:26'></a>\nI see the doctest failures on OS X when I apply this on top of 8.1.beta1. Could it be platform-specific?\n\nNote that changing line 680 in `local/lib/python2.7/site-packages/sphinx/environment/__init__.py`\n\n```\n       self.settings['smart_quotes'] = True\n```\nfrom `True` to `False` fixes the doctests.",
    "created_at": "2017-08-10T23:39:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433837",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:26'></a>
I see the doctest failures on OS X when I apply this on top of 8.1.beta1. Could it be platform-specific?

Note that changing line 680 in `local/lib/python2.7/site-packages/sphinx/environment/__init__.py`

```
       self.settings['smart_quotes'] = True
```
from `True` to `False` fixes the doctests.



---

archive/issue_comments_433838.json:
```json
{
    "body": "<a id='comment:27'></a>\nI think I figured out the right place for `docutils.conf`:\n\n```diff\ndiff --git a/src/sage/misc/sphinxify.py b/src/sage/misc/sphinxify.py\nindex f084a19bf6..f114b9fcd7 100644\n--- a/src/sage/misc/sphinxify.py\n+++ b/src/sage/misc/sphinxify.py\n@@ -80,6 +80,10 @@ def sphinxify(docstring, format='html'):\n     # buildername, confoverrides, status, warning, freshenv).\n     confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')\n \n+    open(os.path.join(srcdir, 'docutils.conf'), 'w').write(r\"\"\"\n+[parser]\n+smart_quotes = no\n+\"\"\")\n     doctreedir = os.path.join(srcdir, 'doctrees')\n     confoverrides = {'html_context': {}, 'master_doc': 'docstring'}\n  \n```\nBut even though Sphinx seems to find this file, it doesn't change Sphinx's setting for `self.settings['smart_quotes']`.",
    "created_at": "2017-08-11T00:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433838",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:27'></a>
I think I figured out the right place for `docutils.conf`:

```diff
diff --git a/src/sage/misc/sphinxify.py b/src/sage/misc/sphinxify.py
index f084a19bf6..f114b9fcd7 100644
--- a/src/sage/misc/sphinxify.py
+++ b/src/sage/misc/sphinxify.py
@@ -80,6 +80,10 @@ def sphinxify(docstring, format='html'):
     # buildername, confoverrides, status, warning, freshenv).
     confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')
 
+    open(os.path.join(srcdir, 'docutils.conf'), 'w').write(r"""
+[parser]
+smart_quotes = no
+""")
     doctreedir = os.path.join(srcdir, 'doctrees')
     confoverrides = {'html_context': {}, 'master_doc': 'docstring'}
  
```
But even though Sphinx seems to find this file, it doesn't change Sphinx's setting for `self.settings['smart_quotes']`.



---

archive/issue_comments_433839.json:
```json
{
    "body": "<a id='comment:28'></a>\nNot platform specific, but it may have been triggered by something else. What you show about the sphinx environment is quite suggestive. I will investigate that stuff.",
    "created_at": "2017-08-11T01:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433839",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:28'></a>
Not platform specific, but it may have been triggered by something else. What you show about the sphinx environment is quite suggestive. I will investigate that stuff.



---

archive/issue_comments_433840.json:
```json
{
    "body": "<a id='comment:29'></a>\nI cannot seem to be able to force the smart_quotes to `False` at runtime either. More curious, I am looking at the file `sandpile.py` and there are other instances of help messages with double quotes that don't trigger doctests failures. So I am wondering if utf8 is also part of the mix.",
    "created_at": "2017-08-11T02:22:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433840",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:29'></a>
I cannot seem to be able to force the smart_quotes to `False` at runtime either. More curious, I am looking at the file `sandpile.py` and there are other instances of help messages with double quotes that don't trigger doctests failures. So I am wondering if utf8 is also part of the mix.



---

archive/issue_comments_433841.json:
```json
{
    "body": "<a id='comment:30'></a>\nIt's strange. In the two sandpile files with failures, single quotes are getting replaced, but not `--` by an en-dash. In `ipython_tests.py`, `--` is replaced by en-dashes, but that's all, the quotes are not changed.",
    "created_at": "2017-08-11T02:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433841",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:30'></a>
It's strange. In the two sandpile files with failures, single quotes are getting replaced, but not `--` by an en-dash. In `ipython_tests.py`, `--` is replaced by en-dashes, but that's all, the quotes are not changed.



---

archive/issue_comments_433842.json:
```json
{
    "body": "<a id='comment:31'></a>\nTwo more things: first, I am seeing some messages unnecessarily labeled as \"warnings\":\n\n```\n[dochtml] Build finished.  The built documents can be found in /Users/palmieri/Desktop/Sage_stuff/git/sage/local/share/doc/sage/inventory/en/reference/parallel\n[dochtml] [parallel ] WARNING: Build finished.  The built documents can be found in /Users/palmieri/Desktop/Sage_stuff/git/sage/local/share/doc/sage/inventory/en/reference/parallel\n```\nSecond, there are deprecation warnings:\n\n```\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/sphinx/util/compat.py:40: RemovedInSphinx17Warning: sphinx.util.compat.Directive is deprecated and will be removed in Sphinx 1.7, please use docutils' instead.\n```\nIt looks like these can be removed with this change:\n\n```diff\ndiff --git a/src/sage_setup/docbuild/ext/sage_autodoc.py b/src/sage_setup/docbuild/ext/sage_autodoc.py\nindex 32b045c6bf..7590e22918 100644\n--- a/src/sage_setup/docbuild/ext/sage_autodoc.py\n+++ b/src/sage_setup/docbuild/ext/sage_autodoc.py\n@@ -39,7 +39,7 @@ from sphinx.locale import _\n from sphinx.pycode import ModuleAnalyzer, PycodeError\n from sphinx.application import ExtensionError\n from sphinx.util.nodes import nested_parse_with_titles\n-from sphinx.util.compat import Directive\n+from docutils.parsers.rst import Directive\n from sphinx.util.inspect import getargspec, isdescriptor, safe_getmembers, \\\n     safe_getattr, object_description, is_builtin_class_method\n from sphinx.util.docstrings import prepare_docstring\n```\nEdit: this is while building the reference manual.",
    "created_at": "2017-08-11T03:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433842",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'></a>
Two more things: first, I am seeing some messages unnecessarily labeled as "warnings":

```
[dochtml] Build finished.  The built documents can be found in /Users/palmieri/Desktop/Sage_stuff/git/sage/local/share/doc/sage/inventory/en/reference/parallel
[dochtml] [parallel ] WARNING: Build finished.  The built documents can be found in /Users/palmieri/Desktop/Sage_stuff/git/sage/local/share/doc/sage/inventory/en/reference/parallel
```
Second, there are deprecation warnings:

```
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/sphinx/util/compat.py:40: RemovedInSphinx17Warning: sphinx.util.compat.Directive is deprecated and will be removed in Sphinx 1.7, please use docutils' instead.
```
It looks like these can be removed with this change:

```diff
diff --git a/src/sage_setup/docbuild/ext/sage_autodoc.py b/src/sage_setup/docbuild/ext/sage_autodoc.py
index 32b045c6bf..7590e22918 100644
--- a/src/sage_setup/docbuild/ext/sage_autodoc.py
+++ b/src/sage_setup/docbuild/ext/sage_autodoc.py
@@ -39,7 +39,7 @@ from sphinx.locale import _
 from sphinx.pycode import ModuleAnalyzer, PycodeError
 from sphinx.application import ExtensionError
 from sphinx.util.nodes import nested_parse_with_titles
-from sphinx.util.compat import Directive
+from docutils.parsers.rst import Directive
 from sphinx.util.inspect import getargspec, isdescriptor, safe_getmembers, \
     safe_getattr, object_description, is_builtin_class_method
 from sphinx.util.docstrings import prepare_docstring
```
Edit: this is while building the reference manual.



---

archive/issue_comments_433843.json:
```json
{
    "body": "<a id='comment:32'></a>\nYes, we can definitely do something about the deprecation. The `WARNING` is more curious.",
    "created_at": "2017-08-11T03:09:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433843",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'></a>
Yes, we can definitely do something about the deprecation. The `WARNING` is more curious.



---

archive/issue_comments_433844.json:
```json
{
    "body": "<a id='comment:33'></a>\nLooks like the WARNING is self inflicted\n\n```\n        # replacements: pairs of regular expressions and their replacements,\n        # to be applied to Sphinx output.\n        self.replacements = [(re.compile('build succeeded, [0-9]+ warning[s]?.'),\n                              'build succeeded.')]\n```\nfrom `sage_setup/docbuild/sphinxbuild.py`",
    "created_at": "2017-08-11T03:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433844",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:33'></a>
Looks like the WARNING is self inflicted

```
        # replacements: pairs of regular expressions and their replacements,
        # to be applied to Sphinx output.
        self.replacements = [(re.compile('build succeeded, [0-9]+ warning[s]?.'),
                              'build succeeded.')]
```
from `sage_setup/docbuild/sphinxbuild.py`



---

archive/issue_comments_433845.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [jhpalmieri](#comment%3A27):\n> I think I figured out the right place for `docutils.conf`:\n> \n> ```diff\n> diff --git a/src/sage/misc/sphinxify.py b/src/sage/misc/sphinxify.py\n> index f084a19bf6..f114b9fcd7 100644\n> --- a/src/sage/misc/sphinxify.py\n> +++ b/src/sage/misc/sphinxify.py\n> @@ -80,6 +80,10 @@ def sphinxify(docstring, format='html'):\n>      # buildername, confoverrides, status, warning, freshenv).\n>      confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')\n>  \n> +    open(os.path.join(srcdir, 'docutils.conf'), 'w').write(r\"\"\"\n> +[parser]\n> +smart_quotes = no\n> +\"\"\")\n>      doctreedir = os.path.join(srcdir, 'doctrees')\n>      confoverrides = {'html_context': {}, 'master_doc': 'docstring'}\n>   \n> ```\n> But even though Sphinx seems to find this file, it doesn't change Sphinx's setting for `self.settings['smart_quotes']`.\n\n\nparser -> parsers I got something to work that way specifying `DOCUTILSCONFIG`",
    "created_at": "2017-08-11T03:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433845",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:34'></a>
Replying to [jhpalmieri](#comment%3A27):
> I think I figured out the right place for `docutils.conf`:
> 
> ```diff
> diff --git a/src/sage/misc/sphinxify.py b/src/sage/misc/sphinxify.py
> index f084a19bf6..f114b9fcd7 100644
> --- a/src/sage/misc/sphinxify.py
> +++ b/src/sage/misc/sphinxify.py
> @@ -80,6 +80,10 @@ def sphinxify(docstring, format='html'):
>      # buildername, confoverrides, status, warning, freshenv).
>      confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')
>  
> +    open(os.path.join(srcdir, 'docutils.conf'), 'w').write(r"""
> +[parser]
> +smart_quotes = no
> +""")
>      doctreedir = os.path.join(srcdir, 'doctrees')
>      confoverrides = {'html_context': {}, 'master_doc': 'docstring'}
>   
> ```
> But even though Sphinx seems to find this file, it doesn't change Sphinx's setting for `self.settings['smart_quotes']`.


parser -> parsers I got something to work that way specifying `DOCUTILSCONFIG`



---

archive/issue_comments_433846.json:
```json
{
    "body": "<a id='comment:35'></a>\nYes, your change but with `parsers` instead of `parser` works for sandpile.py.",
    "created_at": "2017-08-11T03:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433846",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:35'></a>
Yes, your change but with `parsers` instead of `parser` works for sandpile.py.



---

archive/issue_comments_433847.json:
```json
{
    "body": "<a id='comment:36'></a>\nGood, thanks for catching that. I thought I had tried \"parsers\", and in fact I had, but with the wrong location for `docutils.conf`.",
    "created_at": "2017-08-11T04:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433847",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:36'></a>
Good, thanks for catching that. I thought I had tried "parsers", and in fact I had, but with the wrong location for `docutils.conf`.



---

archive/issue_comments_433848.json:
```json
{
    "body": "<a id='comment:37'></a>\nWe can silence the warnings by adding the appropriate regular expression to `self.useless_chatter`:\n\n```diff\ndiff --git a/src/sage_setup/docbuild/sphinxbuild.py b/src/sage_setup/docbuild/sphinxbuild.py\nindex 1deac3d312..ade37bd80f 100644\n--- a/src/sage_setup/docbuild/sphinxbuild.py\n+++ b/src/sage_setup/docbuild/sphinxbuild.py\n@@ -56,6 +56,7 @@ class SageSphinxLogger(object):\n             re.compile('WARNING: while setting up extension'),\n             re.compile('WARNING: Any IDs not assiend for figure node'),\n             re.compile('WARNING: .* is not referenced'),\n+            re.compile('WARNING: Build finished.*'),\n             re.compile('language \"hu\" not supported'),\n             )\n \n```",
    "created_at": "2017-08-11T04:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433848",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:37'></a>
We can silence the warnings by adding the appropriate regular expression to `self.useless_chatter`:

```diff
diff --git a/src/sage_setup/docbuild/sphinxbuild.py b/src/sage_setup/docbuild/sphinxbuild.py
index 1deac3d312..ade37bd80f 100644
--- a/src/sage_setup/docbuild/sphinxbuild.py
+++ b/src/sage_setup/docbuild/sphinxbuild.py
@@ -56,6 +56,7 @@ class SageSphinxLogger(object):
             re.compile('WARNING: while setting up extension'),
             re.compile('WARNING: Any IDs not assiend for figure node'),
             re.compile('WARNING: .* is not referenced'),
+            re.compile('WARNING: Build finished.*'),
             re.compile('language "hu" not supported'),
             )
 
```



---

archive/issue_comments_433849.json:
```json
{
    "body": "**Changing branch** from \"[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)\" to \"[u/jhpalmieri/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx1.6.3)\".",
    "created_at": "2017-08-11T04:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433849",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing branch** from "[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)" to "[u/jhpalmieri/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx1.6.3)".



---

archive/issue_comments_433850.json:
```json
{
    "body": "<a id='comment:39'></a>\nHere is a branch with my proposed changes.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c\">56bffcc</a></td><td><code>trac 23023:</code></td></tr></table>\n",
    "created_at": "2017-08-11T04:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433850",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:39'></a>
Here is a branch with my proposed changes.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c">56bffcc</a></td><td><code>trac 23023:</code></td></tr></table>




---

archive/issue_comments_433851.json:
```json
{
    "body": "**Changing commit** from \"[6930d06663d7bbac51c840f163ba0874fbd2e9e7](https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7)\" to \"[56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c](https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c)\".",
    "created_at": "2017-08-11T04:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433851",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[6930d06663d7bbac51c840f163ba0874fbd2e9e7](https://github.com/sagemath/sagetrac-mirror/commit/6930d06663d7bbac51c840f163ba0874fbd2e9e7)" to "[56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c](https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c)".



---

archive/issue_comments_433852.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [jhpalmieri](#comment%3A37):\n> We can silence the warnings by adding the appropriate regular expression to `self.useless_chatter`:\n> \n> ```diff\n> diff --git a/src/sage_setup/docbuild/sphinxbuild.py b/src/sage_setup/docbuild/sphinxbuild.py\n> index 1deac3d312..ade37bd80f 100644\n> --- a/src/sage_setup/docbuild/sphinxbuild.py\n> +++ b/src/sage_setup/docbuild/sphinxbuild.py\n> @@ -56,6 +56,7 @@ class SageSphinxLogger(object):\n>              re.compile('WARNING: while setting up extension'),\n>              re.compile('WARNING: Any IDs not assiend for figure node'),\n>              re.compile('WARNING: .* is not referenced'),\n> +            re.compile('WARNING: Build finished.*'),\n>              re.compile('language \"hu\" not supported'),\n>              )\n>  \n> ```\n\nYes we could, but I believe we are generating them ourselves a few lines down #23023?replyto=37#comment:33. I think we shouldn't generate them in the first place.",
    "created_at": "2017-08-11T05:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433852",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:40'></a>
Replying to [jhpalmieri](#comment%3A37):
> We can silence the warnings by adding the appropriate regular expression to `self.useless_chatter`:
> 
> ```diff
> diff --git a/src/sage_setup/docbuild/sphinxbuild.py b/src/sage_setup/docbuild/sphinxbuild.py
> index 1deac3d312..ade37bd80f 100644
> --- a/src/sage_setup/docbuild/sphinxbuild.py
> +++ b/src/sage_setup/docbuild/sphinxbuild.py
> @@ -56,6 +56,7 @@ class SageSphinxLogger(object):
>              re.compile('WARNING: while setting up extension'),
>              re.compile('WARNING: Any IDs not assiend for figure node'),
>              re.compile('WARNING: .* is not referenced'),
> +            re.compile('WARNING: Build finished.*'),
>              re.compile('language "hu" not supported'),
>              )
>  
> ```

Yes we could, but I believe we are generating them ourselves a few lines down #23023?replyto=37#comment:33. I think we shouldn't generate them in the first place.



---

archive/issue_comments_433853.json:
```json
{
    "body": "<a id='comment:41'></a>\nThese warning messages say \"Build finished...\". The other line (from[comment:33](#comment%3A33)) refers to strings saying \"build succeeded...\", so I don't think they're the same thing.",
    "created_at": "2017-08-11T15:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433853",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:41'></a>
These warning messages say "Build finished...". The other line (from[comment:33](#comment%3A33)) refers to strings saying "build succeeded...", so I don't think they're the same thing.



---

archive/issue_comments_433854.json:
```json
{
    "body": "**Changing reviewer** from \"Fran\u00e7ois Bissey, Jeroen Demeyer\" to \"Fran\u00e7ois Bissey, Jeroen Demeyer, John Palmieri\".",
    "created_at": "2017-08-12T03:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433854",
    "user": "https://github.com/kiwifb"
}
```

**Changing reviewer** from "François Bissey, Jeroen Demeyer" to "François Bissey, Jeroen Demeyer, John Palmieri".



---

archive/issue_comments_433855.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2017-08-12T03:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433855",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_433856.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [jhpalmieri](#comment%3A41):\n> These warning messages say \"Build finished...\". The other line (from[comment:33](#comment%3A33)) refers to strings saying \"build succeeded...\", so I don't think they're the same thing.\n\n\nRight you are. So, at the very least back to need review. I find it surprising that there doesn't seem to be an easier way to set smart_quotes but that's the only documented way.",
    "created_at": "2017-08-12T03:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433856",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:42'></a>
Replying to [jhpalmieri](#comment%3A41):
> These warning messages say "Build finished...". The other line (from[comment:33](#comment%3A33)) refers to strings saying "build succeeded...", so I don't think they're the same thing.


Right you are. So, at the very least back to need review. I find it surprising that there doesn't seem to be an easier way to set smart_quotes but that's the only documented way.



---

archive/issue_comments_433857.json:
```json
{
    "body": "**Changing author** from \"Jeroen Demeyer, Fran\u00e7ois Bissey\" to \"Jeroen Demeyer, Fran\u00e7ois Bissey, John Palmieri\".",
    "created_at": "2017-08-12T03:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433857",
    "user": "https://github.com/kiwifb"
}
```

**Changing author** from "Jeroen Demeyer, François Bissey" to "Jeroen Demeyer, François Bissey, John Palmieri".



---

archive/issue_comments_433858.json:
```json
{
    "body": "<a id='comment:43'></a>\nEverything else was positively reviewed, so I can't review my own branch. Can you reproduce the doctest failures and verify that the change to sphinxify.py fixes them?\n\nFrom the docutils documentation, it sounds like there is a command-line switch to turn off smart quotes, but I don't think we can use that since we are not calling docutils from the command line.",
    "created_at": "2017-08-12T05:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433858",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:43'></a>
Everything else was positively reviewed, so I can't review my own branch. Can you reproduce the doctest failures and verify that the change to sphinxify.py fixes them?

From the docutils documentation, it sounds like there is a command-line switch to turn off smart quotes, but I don't think we can use that since we are not calling docutils from the command line.



---

archive/issue_comments_433859.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2017-08-12T06:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433859",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_433860.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [jhpalmieri](#comment%3A43):\n> Everything else was positively reviewed, so I can't review my own branch. Can you reproduce the doctest failures and verify that the change to sphinxify.py fixes them?\n> \n\n\nI can and I already checked.\n\n> From the docutils documentation, it sounds like there is a command-line switch to turn off smart quotes, but I don't think we can use that since we are not calling docutils from the command line.\n\n\nYes. I am fairly sure there is a direct way to get sphinx to call docutils with different options but I don't know how to do it.",
    "created_at": "2017-08-12T06:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433860",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:44'></a>
Replying to [jhpalmieri](#comment%3A43):
> Everything else was positively reviewed, so I can't review my own branch. Can you reproduce the doctest failures and verify that the change to sphinxify.py fixes them?
> 


I can and I already checked.

> From the docutils documentation, it sounds like there is a command-line switch to turn off smart quotes, but I don't think we can use that since we are not calling docutils from the command line.


Yes. I am fairly sure there is a direct way to get sphinx to call docutils with different options but I don't know how to do it.



---

archive/issue_comments_433861.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2017-08-12T17:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433861",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_433862.json:
```json
{
    "body": "<a id='comment:45'></a>\nParallel \"make doc-pdf\" doesn't work, hangs with N = number of processes python zombies.",
    "created_at": "2017-08-12T17:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433862",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'></a>
Parallel "make doc-pdf" doesn't work, hangs with N = number of processes python zombies.



---

archive/issue_comments_433863.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [vbraun](#comment%3A45):\n> Parallel \"make doc-pdf\" doesn't work, hangs with N = number of processes python zombies.\n\n\nI can't reproduce this on OS X. More silly warning messages, but it completes:\n\n```\n[docpdf] Elapsed time: 895.7 seconds.\n[docpdf] [website  ] WARNING: Elapsed time: 895.7 seconds.\n[docpdf] Done building the documentation!\n[docpdf] [website  ] WARNING: Done building the documentation!\n\nreal\t15m5.280s\nuser\t59m42.040s\nsys\t3m0.851s\nSage build/upgrade complete!\n```",
    "created_at": "2017-08-12T21:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433863",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:46'></a>
Replying to [vbraun](#comment%3A45):
> Parallel "make doc-pdf" doesn't work, hangs with N = number of processes python zombies.


I can't reproduce this on OS X. More silly warning messages, but it completes:

```
[docpdf] Elapsed time: 895.7 seconds.
[docpdf] [website  ] WARNING: Elapsed time: 895.7 seconds.
[docpdf] Done building the documentation!
[docpdf] [website  ] WARNING: Done building the documentation!

real	15m5.280s
user	59m42.040s
sys	3m0.851s
Sage build/upgrade complete!
```



---

archive/issue_comments_433864.json:
```json
{
    "body": "<a id='comment:47'></a>\nCouldn't reproduce it here either on Gentoo at \"-j8\".",
    "created_at": "2017-08-13T01:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433864",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'></a>
Couldn't reproduce it here either on Gentoo at "-j8".



---

archive/issue_comments_433865.json:
```json
{
    "body": "<a id='comment:48'></a>\nAnd in case it matters, I'm using \"-j6\".",
    "created_at": "2017-08-13T03:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433865",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:48'></a>
And in case it matters, I'm using "-j6".



---

archive/issue_comments_433866.json:
```json
{
    "body": "<a id='comment:49'></a>\nJust got a hicup while doing another test. `typing` wasn't installed in time for building doc-pdf, so dependencies will have to be tweaked.",
    "created_at": "2017-08-13T22:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433866",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:49'></a>
Just got a hicup while doing another test. `typing` wasn't installed in time for building doc-pdf, so dependencies will have to be tweaked.



---

archive/issue_comments_433867.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx1.6.3)\" to \"[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)\".",
    "created_at": "2017-08-13T23:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433867",
    "user": "https://github.com/kiwifb"
}
```

**Changing branch** from "[u/jhpalmieri/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sphinx1.6.3)" to "[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)".



---

archive/issue_comments_433868.json:
```json
{
    "body": "**Changing commit** from \"[56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c](https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c)\" to \"[c48896722c5546fbdca8a58e6516828912d87f85](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)\".",
    "created_at": "2017-08-13T23:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433868",
    "user": "https://github.com/kiwifb"
}
```

**Changing commit** from "[56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c](https://github.com/sagemath/sagetrac-mirror/commit/56bffcc8508c9a0ed9c052d0fc4db5ae9e71e53c)" to "[c48896722c5546fbdca8a58e6516828912d87f85](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)".



---

archive/issue_comments_433869.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2017-08-13T23:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433869",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_433870.json:
```json
{
    "body": "<a id='comment:50'></a>\nThat should take care of that last problem, but it doesn't explain Volker's issue that we cannot seem to able to reproduce. I am waiting for more opinions before putting it back to positive.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/039c7f976532ff378257ed65cb43a79f1a2dcaf3\">039c7f9</a></td><td><code>Merge branch 'develop' into sphinx-1.6.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85\">c488967</a></td><td><code>Add typing to DOC_DEPENDENCIES</code></td></tr></table>\n",
    "created_at": "2017-08-13T23:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433870",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:50'></a>
That should take care of that last problem, but it doesn't explain Volker's issue that we cannot seem to able to reproduce. I am waiting for more opinions before putting it back to positive.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/039c7f976532ff378257ed65cb43a79f1a2dcaf3">039c7f9</a></td><td><code>Merge branch 'develop' into sphinx-1.6.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85">c488967</a></td><td><code>Add typing to DOC_DEPENDENCIES</code></td></tr></table>




---

archive/issue_comments_433871.json:
```json
{
    "body": "<a id='comment:51'></a>\nShould `typing` be a dependency for `sphinx`, or just for doc-building?",
    "created_at": "2017-08-14T00:29:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433871",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:51'></a>
Should `typing` be a dependency for `sphinx`, or just for doc-building?



---

archive/issue_comments_433872.json:
```json
{
    "body": "<a id='comment:52'></a>\nIt is a runtime dependency. You could probably use some functionalities of sphinx without touching `typing`, that's why I put it there rather a dependency of `sphinx` but I gave it some thought.",
    "created_at": "2017-08-14T01:14:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433872",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:52'></a>
It is a runtime dependency. You could probably use some functionalities of sphinx without touching `typing`, that's why I put it there rather a dependency of `sphinx` but I gave it some thought.



---

archive/issue_comments_433873.json:
```json
{
    "body": "<a id='comment:53'></a>\nDo we wait for more information, or do we mark this as \"positive review\" and hope that the dependencies fix the problem?",
    "created_at": "2017-08-14T05:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433873",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:53'></a>
Do we wait for more information, or do we mark this as "positive review" and hope that the dependencies fix the problem?



---

archive/issue_comments_433874.json:
```json
{
    "body": "<a id='comment:54'></a>\nWe may as well have another go.",
    "created_at": "2017-08-14T05:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433874",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:54'></a>
We may as well have another go.



---

archive/issue_comments_433875.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2017-08-14T05:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433875",
    "user": "https://github.com/kiwifb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_433876.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [fbissey](#comment%3A52):\n> It is a runtime dependency. You could probably use some functionalities of sphinx without touching `typing`, that's why I put it there rather a dependency of `sphinx` but I gave it some thought.\n\n\nI agree. You don't need typing just to install Sphinx.",
    "created_at": "2017-08-14T08:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433876",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:55'></a>
Replying to [fbissey](#comment%3A52):
> It is a runtime dependency. You could probably use some functionalities of sphinx without touching `typing`, that's why I put it there rather a dependency of `sphinx` but I gave it some thought.


I agree. You don't need typing just to install Sphinx.



---

archive/issue_comments_433877.json:
```json
{
    "body": "<a id='comment:56'></a>\nStill get the error from `make -j10 doc-pdf`. The docpdf.log contains errors like\n\n```\n<sin_plot.png, id=51, 602.25pt x 501.875pt> <use sin_plot.png> [3 [85]]make[2]: *** write jobserver: Bad file descriptor.  Stop.\n```\nSeems like some script is mucking with the inherited make jobserver file descriptor.",
    "created_at": "2017-08-14T22:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433877",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:56'></a>
Still get the error from `make -j10 doc-pdf`. The docpdf.log contains errors like

```
<sin_plot.png, id=51, 602.25pt x 501.875pt> <use sin_plot.png> [3 [85]]make[2]: *** write jobserver: Bad file descriptor.  Stop.
```
Seems like some script is mucking with the inherited make jobserver file descriptor.



---

archive/issue_comments_433878.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2017-08-14T22:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433878",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_433879.json:
```json
{
    "body": "<a id='comment:57'></a>\nThat a little bit more to work on than your first report. I'll see if I can trigger this again.",
    "created_at": "2017-08-14T22:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433879",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:57'></a>
That a little bit more to work on than your first report. I'll see if I can trigger this again.



---

archive/issue_comments_433880.json:
```json
{
    "body": "<a id='comment:58'></a>\nBtw which latexmk are you using? 4.52c here...",
    "created_at": "2017-08-15T06:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433880",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:58'></a>
Btw which latexmk are you using? 4.52c here...



---

archive/issue_comments_433881.json:
```json
{
    "body": "<a id='comment:59'></a>\n`4.35` here, I can upgrade to see if it has an impact. I may be slow to respond in the next couple of days. The proverbial `s**t` hit the fan at work today.",
    "created_at": "2017-08-15T07:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433881",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:59'></a>
`4.35` here, I can upgrade to see if it has an impact. I may be slow to respond in the next couple of days. The proverbial `s**t` hit the fan at work today.



---

archive/issue_comments_433882.json:
```json
{
    "body": "<a id='comment:60'></a>\n4.52c for me.",
    "created_at": "2017-08-15T14:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433882",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:60'></a>
4.52c for me.



---

archive/issue_comments_433883.json:
```json
{
    "body": "<a id='comment:61'></a>\nNo difference with `latekmk-4.52c` here.",
    "created_at": "2017-08-20T22:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433883",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:61'></a>
No difference with `latekmk-4.52c` here.



---

archive/issue_comments_433884.json:
```json
{
    "body": "<a id='comment:62'></a>\nI upgraded to Fedora 26 and can't reproduce it any more...",
    "created_at": "2017-08-26T09:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433884",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:62'></a>
I upgraded to Fedora 26 and can't reproduce it any more...



---

archive/issue_events_067813.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-08-26T09:58:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23023#event-67813"
}
```



---

archive/issue_comments_433885.json:
```json
{
    "body": "**Changing branch** from \"[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)\" to \"[c48896722c5546fbdca8a58e6516828912d87f85](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)\".",
    "created_at": "2017-08-26T09:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433885",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/fbissey/sphinx1.6.3](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/sphinx1.6.3)" to "[c48896722c5546fbdca8a58e6516828912d87f85](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)".



---

archive/issue_comments_433886.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2017-08-26T09:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433886",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_433887.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [vbraun](#comment%3A62):\n> I upgraded to Fedora 26 and can't reproduce it any more...\n\n\nWeird. But glad we are moving forward on that one.",
    "created_at": "2017-08-26T10:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433887",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:64'></a>
Replying to [vbraun](#comment%3A62):
> I upgraded to Fedora 26 and can't reproduce it any more...


Weird. But glad we are moving forward on that one.



---

archive/issue_comments_433888.json:
```json
{
    "body": "**Changing commit** from \"[c48896722c5546fbdca8a58e6516828912d87f85](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)\" to \"\".",
    "created_at": "2017-08-26T10:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433888",
    "user": "https://github.com/kiwifb"
}
```

**Changing commit** from "[c48896722c5546fbdca8a58e6516828912d87f85](https://github.com/sagemath/sagetrac-mirror/commit/c48896722c5546fbdca8a58e6516828912d87f85)" to "".



---

archive/issue_comments_433889.json:
```json
{
    "body": "<a id='comment:65'></a>\nThanks for finally getting this done.",
    "created_at": "2017-08-28T14:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433889",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'></a>
Thanks for finally getting this done.



---

archive/issue_comments_433890.json:
```json
{
    "body": "<a id='comment:66'></a>\nWhat is the reason for `typing` package being `standard` rather than `pip` type?",
    "created_at": "2017-08-31T08:20:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433890",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:66'></a>
What is the reason for `typing` package being `standard` rather than `pip` type?



---

archive/issue_comments_433891.json:
```json
{
    "body": "<a id='comment:67'></a>\nNot sure. I cannot say I really ever cared for that particular distinction - sorry.",
    "created_at": "2017-08-31T08:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433891",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:67'></a>
Not sure. I cannot say I really ever cared for that particular distinction - sorry.



---

archive/issue_comments_433892.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [fbissey](#comment%3A67):\n> Not sure. I cannot say I really ever cared for that particular distinction - sorry.\n\nIn particular, it's about having an extra tarball to care about; (`pip` type, to the contrary, is just a placeholder, no tarball to worry about...)\n\nThe only thing I can imagine is that one needs to specify in some standard package that it depends on it (either via Sage deps mechanism, or via pip/setup.py, I suppose...)",
    "created_at": "2017-08-31T08:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433892",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:68'></a>
Replying to [fbissey](#comment%3A67):
> Not sure. I cannot say I really ever cared for that particular distinction - sorry.

In particular, it's about having an extra tarball to care about; (`pip` type, to the contrary, is just a placeholder, no tarball to worry about...)

The only thing I can imagine is that one needs to specify in some standard package that it depends on it (either via Sage deps mechanism, or via pip/setup.py, I suppose...)



---

archive/issue_comments_433893.json:
```json
{
    "body": "<a id='comment:69'></a>\nRight, if you need to download it then it really makes it a special kind of optional package. `typing` is meant to be a standard package so part of the sage tarball.",
    "created_at": "2017-08-31T08:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433893",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:69'></a>
Right, if you need to download it then it really makes it a special kind of optional package. `typing` is meant to be a standard package so part of the sage tarball.



---

archive/issue_comments_433894.json:
```json
{
    "body": "<a id='comment:70'></a>\nReplying to [dimpase](#comment%3A66):\n> What is the reason for `typing` package being `standard` rather than `pip` type?\n\n\n`standard` packages can depend only on `standard` packages: we do not assume Internet access when building Sage from source.",
    "created_at": "2017-08-31T08:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433894",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:70'></a>
Replying to [dimpase](#comment%3A66):
> What is the reason for `typing` package being `standard` rather than `pip` type?


`standard` packages can depend only on `standard` packages: we do not assume Internet access when building Sage from source.



---

archive/issue_comments_433895.json:
```json
{
    "body": "<a id='comment:71'></a>\nI am stuck on #14645 with a pip package I don't know how to specify, due to \"`-`\" in its name, namely `sphinxcontrib-websupport`. It cannot be of type `pip`, as `-` is not allowed in the Sage package names, as far as I can tell...",
    "created_at": "2017-08-31T08:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433895",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:71'></a>
I am stuck on #14645 with a pip package I don't know how to specify, due to "`-`" in its name, namely `sphinxcontrib-websupport`. It cannot be of type `pip`, as `-` is not allowed in the Sage package names, as far as I can tell...



---

archive/issue_comments_433896.json:
```json
{
    "body": "<a id='comment:72'></a>\nAnd can it be a standard package or is it the same problem? In any case that problem should be its own ticket.",
    "created_at": "2017-08-31T08:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433896",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:72'></a>
And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.



---

archive/issue_comments_433897.json:
```json
{
    "body": "<a id='comment:73'></a>\nReplying to [fbissey](#comment%3A72):\n> And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.\n\n\nOf course with a standard package you can do anything in principle, but the standard machinery you used it `typing` won't work IMHO, as `sage-pip-install` (i.e. `$PIP_INSTALL` used in `spkg-install`) does not seem to allow\nthe name of pip package to be installed as an argument...",
    "created_at": "2017-08-31T09:09:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433897",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:73'></a>
Replying to [fbissey](#comment%3A72):
> And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.


Of course with a standard package you can do anything in principle, but the standard machinery you used it `typing` won't work IMHO, as `sage-pip-install` (i.e. `$PIP_INSTALL` used in `spkg-install`) does not seem to allow
the name of pip package to be installed as an argument...



---

archive/issue_comments_433898.json:
```json
{
    "body": "<a id='comment:74'></a>\nReplying to [dimpase](#comment%3A73):\n> Replying to [fbissey](#comment%3A72):\n> > And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.\n\n> \n> Of course with a standard package you can do anything in principle, but the standard machinery you used it `typing` won't work IMHO, as `sage-pip-install` (i.e. `$PIP_INSTALL` used in `spkg-install`) does not seem to allow\n> the name of pip package to be installed as an argument...\n\n\nWe should really have this conversation at #14645 not here. I am not sure what your problem is with `$PIP_INSTALL`. It is a replacement for `python setup.py` in the package source tree. It behaves in a similar way but is better at package management operation (it knows how to remove a previous install properly).",
    "created_at": "2017-08-31T09:25:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433898",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:74'></a>
Replying to [dimpase](#comment%3A73):
> Replying to [fbissey](#comment%3A72):
> > And can it be a standard package or is it the same problem? In any case that problem should be its own ticket.

> 
> Of course with a standard package you can do anything in principle, but the standard machinery you used it `typing` won't work IMHO, as `sage-pip-install` (i.e. `$PIP_INSTALL` used in `spkg-install`) does not seem to allow
> the name of pip package to be installed as an argument...


We should really have this conversation at #14645 not here. I am not sure what your problem is with `$PIP_INSTALL`. It is a replacement for `python setup.py` in the package source tree. It behaves in a similar way but is better at package management operation (it knows how to remove a previous install properly).



---

archive/issue_comments_433899.json:
```json
{
    "body": "<a id='comment:75'></a>\nI have opened #23764 to deal with this issue. Sorry for noise here.",
    "created_at": "2017-08-31T09:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433899",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:75'></a>
I have opened #23764 to deal with this issue. Sorry for noise here.



---

archive/issue_comments_433900.json:
```json
{
    "body": "<a id='comment:76'></a>\nSee #23834 for a followup.",
    "created_at": "2017-09-11T23:03:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23023#issuecomment-433900",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:76'></a>
See #23834 for a followup.
