# Issue 23106: Python scripts in src/bin are not ready for Sage + Python 3

archive/issues_022869.json:
```json
{
    "assignees": [],
    "body": "Many of the scripts in `src/bin` start with `#!/usr/bin/env python` (which is Python 2) and then try to import from the Sage library. This will not work if Sage has been installed using `SAGE_PYTHON3=yes`.\n\nThese scripts need modification, and perhaps there are others:\n\n- sage-cython: `from sage.env import SAGE_SRC` -- could be modified to avoid this import, for example using `os.getenv('SAGE_SRC')`\n\n- sage-eval\n\n- sage-fixdoctests\n\n- sage-ipython: particularly important, since it is used to run Sage.\n\n- sage-list-packages\n\n- sage-notebook\n\n- sage-preparse\n\n- sage-rst2sws\n\n- sage-rst2txt\n\n- sage-run-cython\n\n- sage-runtests\n\n- sage-startuptime.py\n\n- sage-sws2rst\n\n\nCC:  @jdemeyer @embray\n\nBranch/Commit: **[847df2c](https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324)**\n\nReviewer: **Erik Bray**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23106_\n\n",
    "closed_at": "2018-01-18T18:09:28Z",
    "created_at": "2017-05-30T21:01:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Python scripts in src/bin are not ready for Sage + Python 3",
    "type": "issue",
    "updated_at": "2018-01-18T18:09:28Z",
    "url": "https://github.com/sagemath/sage/issues/23106",
    "user": "https://github.com/jhpalmieri"
}
```
Many of the scripts in `src/bin` start with `#!/usr/bin/env python` (which is Python 2) and then try to import from the Sage library. This will not work if Sage has been installed using `SAGE_PYTHON3=yes`.

These scripts need modification, and perhaps there are others:

- sage-cython: `from sage.env import SAGE_SRC` -- could be modified to avoid this import, for example using `os.getenv('SAGE_SRC')`

- sage-eval

- sage-fixdoctests

- sage-ipython: particularly important, since it is used to run Sage.

- sage-list-packages

- sage-notebook

- sage-preparse

- sage-rst2sws

- sage-rst2txt

- sage-run-cython

- sage-runtests

- sage-startuptime.py

- sage-sws2rst


CC:  @jdemeyer @embray

Branch/Commit: **[847df2c](https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324)**

Reviewer: **Erik Bray**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/23106_





---

archive/issue_events_304130.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-05-30T21:01:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304130"
}
```



---

archive/issue_events_304131.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-05-30T21:01:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "000080",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304131"
}
```



---

archive/issue_events_304132.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-05-30T21:01:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304132"
}
```



---

archive/issue_comments_348680.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nIndeed,\n\n```\ngit grep -c \"from sage\"\nsage-cython:1\nsage-env-config.in:1\nsage-eval:3\nsage-fixdoctests:2\nsage-ipython:1\nsage-list-packages:1\nsage-notebook:5\nsage-preparse:3\nsage-rst2sws:3\nsage-rst2txt:1\nsage-run-cython:2\nsage-runtests:1\nsage-startuptime.py:1\nsage-sws2rst:1\n```\nsome of these are in fact `from sagenb` imports",
    "created_at": "2017-05-31T12:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348680",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">Comment 1</div>

Indeed,

```
git grep -c "from sage"
sage-cython:1
sage-env-config.in:1
sage-eval:3
sage-fixdoctests:2
sage-ipython:1
sage-list-packages:1
sage-notebook:5
sage-preparse:3
sage-rst2sws:3
sage-rst2txt:1
sage-run-cython:2
sage-runtests:1
sage-startuptime.py:1
sage-sws2rst:1
```
some of these are in fact `from sagenb` imports



---

archive/issue_comments_348681.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\n- sage-notebook, sage-rst2sws, sage-rst2txt, sage-sws2rst: I would say that we don't touch these files. They all use SageNB, which is not (yet?) compatible with Python 3. SageNB is also slowly being phased out, which makes these a lower priority anyway.\n\n- sage-env-config.in is a false positive: it is a shell script and does no importing of Python modules.\n\n- sage-cython is easy to fix:\n\n```diff\ndiff --git a/src/bin/sage-cython b/src/bin/sage-cython\nindex 77ba303b39..ffff293ca2 100755\n--- a/src/bin/sage-cython\n+++ b/src/bin/sage-cython\n@@ -3,7 +3,9 @@\n import os, sys\n args = sys.argv[1:]\n \n-from sage.env import SAGE_SRC\n+if \"SAGE_SRC\" not in os.environ:\n+    raise RuntimeError(\"The environment variable SAGE_SRC must be set.\")\n+SAGE_SRC = os.environ[\"SAGE_SRC\"]\n \n # args can have length 0, in case we're printing a usage message (see trac 12207)\n pyx_file = os.path.abspath(args[-1]) if len(args) else None\n```\n\nThe others may depend on how we approach the Sage + Python 3 runtime question. If we follow the model at #23119, we can create scripts `sage3-eval`, `sage3-preparse`, etc., and call those from the main `sage` script. (The model that I propose at #23119 is that there is a top-level script called \"sage\", as now, plus a symlink to it called \"sage3\". They essentially call `src/bin/$0`, which translates to `src/bin/sage` or `src/bin/sage3`, one of which is a symlink of the other. Then that script can call `$0-eval`, `$0-preparse`, etc.)",
    "created_at": "2017-05-31T22:47:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348681",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">Comment 2</div>

- sage-notebook, sage-rst2sws, sage-rst2txt, sage-sws2rst: I would say that we don't touch these files. They all use SageNB, which is not (yet?) compatible with Python 3. SageNB is also slowly being phased out, which makes these a lower priority anyway.

- sage-env-config.in is a false positive: it is a shell script and does no importing of Python modules.

- sage-cython is easy to fix:

```diff
diff --git a/src/bin/sage-cython b/src/bin/sage-cython
index 77ba303b39..ffff293ca2 100755
--- a/src/bin/sage-cython
+++ b/src/bin/sage-cython
@@ -3,7 +3,9 @@
 import os, sys
 args = sys.argv[1:]
 
-from sage.env import SAGE_SRC
+if "SAGE_SRC" not in os.environ:
+    raise RuntimeError("The environment variable SAGE_SRC must be set.")
+SAGE_SRC = os.environ["SAGE_SRC"]
 
 # args can have length 0, in case we're printing a usage message (see trac 12207)
 pyx_file = os.path.abspath(args[-1]) if len(args) else None
```

The others may depend on how we approach the Sage + Python 3 runtime question. If we follow the model at #23119, we can create scripts `sage3-eval`, `sage3-preparse`, etc., and call those from the main `sage` script. (The model that I propose at #23119 is that there is a top-level script called "sage", as now, plus a symlink to it called "sage3". They essentially call `src/bin/$0`, which translates to `src/bin/sage` or `src/bin/sage3`, one of which is a symlink of the other. Then that script can call `$0-eval`, `$0-preparse`, etc.)



---

archive/issue_comments_348682.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nany progress here ?",
    "created_at": "2017-08-18T07:44:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348682",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">Comment 3</div>

any progress here ?



---

archive/issue_events_304133.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-18T07:44:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304133"
}
```



---

archive/issue_events_304134.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-18T07:44:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304134"
}
```



---

archive/issue_comments_348683.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI made #23653 for sage-cython",
    "created_at": "2017-08-19T16:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348683",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">Comment 4</div>

I made #23653 for sage-cython



---

archive/issue_comments_348684.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nMost of these just need to be fixed to use `#!/usr/bin/env sage-python23` no?",
    "created_at": "2017-08-21T13:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348684",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">Comment 6</div>

Most of these just need to be fixed to use `#!/usr/bin/env sage-python23` no?



---

archive/issue_comments_348685.json:
```json
{
    "body": "Commit: **[5eb29bf](https://github.com/sagemath/sagetrac-mirror/commit/5eb29bf3f711fe6593b89a04e0efc4dab56fd49f)**",
    "created_at": "2017-08-21T14:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348685",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[5eb29bf](https://github.com/sagemath/sagetrac-mirror/commit/5eb29bf3f711fe6593b89a04e0efc4dab56fd49f)**



---

archive/issue_comments_348686.json:
```json
{
    "body": "Branch: **[public/23106](https://github.com/sagemath/sagetrac-mirror/tree/public/23106)**",
    "created_at": "2017-08-21T14:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348686",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/23106](https://github.com/sagemath/sagetrac-mirror/tree/public/23106)**



---

archive/issue_comments_348687.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI had the same idea, but was rather not sure of its validity. Here is a branch doing that.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5eb29bf3f711fe6593b89a04e0efc4dab56fd49f\">5eb29bf</a></td><td><code>modify scripts towards python3 compatibility</code></td></tr></table>\n",
    "created_at": "2017-08-21T14:14:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348687",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">Comment 7</div>

I had the same idea, but was rather not sure of its validity. Here is a branch doing that.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5eb29bf3f711fe6593b89a04e0efc4dab56fd49f">5eb29bf</a></td><td><code>modify scripts towards python3 compatibility</code></td></tr></table>




---

archive/issue_comments_348688.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-08-21T19:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348688",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_348689.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThis seems to work smoothly. What do you think ?",
    "created_at": "2017-08-21T19:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348689",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">Comment 8</div>

This seems to work smoothly. What do you think ?



---

archive/issue_events_304135.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-08-21T19:51:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304135"
}
```



---

archive/issue_comments_348690.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nShould we do the same for the remaining 4\n\n```\nsage-notebook\nsage-rst2sws\nsage-rst2txt\nsage-sws2rst\n```\n?",
    "created_at": "2017-08-22T08:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348690",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">Comment 9</div>

Should we do the same for the remaining 4

```
sage-notebook
sage-rst2sws
sage-rst2txt
sage-sws2rst
```
?



---

archive/issue_comments_348691.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nnaive question: why is `python` pointing to `python2` if Sage has been built with `SAGE_PYTHON3=yes`!?",
    "created_at": "2017-08-22T11:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348691",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">Comment 10</div>

naive question: why is `python` pointing to `python2` if Sage has been built with `SAGE_PYTHON3=yes`!?



---

archive/issue_comments_348692.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nI think Volker once said that one should rather always let python point to python2.\n\nSee [#22582 comment:31](https://github.com/sagemath/sage/issues/22582#comment:31)",
    "created_at": "2017-08-22T12:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348692",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">Comment 11</div>

I think Volker once said that one should rather always let python point to python2.

See [#22582 comment:31](https://github.com/sagemath/sage/issues/22582#comment:31)



---

archive/issue_comments_348693.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nI view `sage-python23` as a build-time tool. Actually, I view the setting of `SAGE_PYTHON3` as something which only affects the Sage build, not necessarily how things are run. The Sage community has not made any decisions about how to actually run Sage using Python 3. As a result, I am somewhat wary of just using `sage-python23` everywhere. I tried to explain this in [comment:2](#comment%3A2).",
    "created_at": "2017-08-22T15:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348693",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">Comment 12</div>

I view `sage-python23` as a build-time tool. Actually, I view the setting of `SAGE_PYTHON3` as something which only affects the Sage build, not necessarily how things are run. The Sage community has not made any decisions about how to actually run Sage using Python 3. As a result, I am somewhat wary of just using `sage-python23` everywhere. I tried to explain this in [comment:2](#comment%3A2).



---

archive/issue_comments_348694.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@fchapoton](#comment%3A11):\n> I think Volker once said that one should rather always let python point to python2.\n> \n> See [#22582 comment:31](https://github.com/sagemath/sage/issues/22582#comment:31)\n\nI don't think that makes any sense. It won't be *that* long before Python 2 is deprecated and removed entirely.  `python` should just be whatever the default python is.",
    "created_at": "2017-08-24T10:10:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348694",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@fchapoton](#comment%3A11):
> I think Volker once said that one should rather always let python point to python2.
> 
> See [#22582 comment:31](https://github.com/sagemath/sage/issues/22582#comment:31)

I don't think that makes any sense. It won't be *that* long before Python 2 is deprecated and removed entirely.  `python` should just be whatever the default python is.



---

archive/issue_comments_348695.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@jhpalmieri](#comment%3A12):\n> I view `sage-python23` as a build-time tool. Actually, I view the setting of `SAGE_PYTHON3` as something which only affects the Sage build, not necessarily how things are run. The Sage community has not made any decisions about how to actually run Sage using Python 3. As a result, I am somewhat wary of just using `sage-python23` everywhere. I tried to explain this in [comment:2](#comment%3A2).\n\nThat's a fair point. I think you're right--better it just be `/usr/bin/env python`.  I don't think it makes sense to have side-by-side Python 2 and Python 3 installations of Sage, or the ability to switch between on the fly.  That may be slightly convenient for working on Python 3 compatibility *development*, but that only affects a few people who can probably afford to have two separate builds for those purposes.  One thing I am working with \"abstract package\" support is a better way (better than setting `SAGE_PYTHON3=yes`) to select the default Python at `./configure` time, but changing that selection still requires a rebuild of anything that depends on Python.",
    "created_at": "2017-08-24T10:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348695",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@jhpalmieri](#comment%3A12):
> I view `sage-python23` as a build-time tool. Actually, I view the setting of `SAGE_PYTHON3` as something which only affects the Sage build, not necessarily how things are run. The Sage community has not made any decisions about how to actually run Sage using Python 3. As a result, I am somewhat wary of just using `sage-python23` everywhere. I tried to explain this in [comment:2](#comment%3A2).

That's a fair point. I think you're right--better it just be `/usr/bin/env python`.  I don't think it makes sense to have side-by-side Python 2 and Python 3 installations of Sage, or the ability to switch between on the fly.  That may be slightly convenient for working on Python 3 compatibility *development*, but that only affects a few people who can probably afford to have two separate builds for those purposes.  One thing I am working with "abstract package" support is a better way (better than setting `SAGE_PYTHON3=yes`) to select the default Python at `./configure` time, but changing that selection still requires a rebuild of anything that depends on Python.



---

archive/issue_comments_348696.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@embray](#comment%3A13):\n> Replying to [@fchapoton](#comment%3A11):\n> > I think Volker once said that one should rather always let python point to python2.\n> > \n> > See [#22582 comment:31](https://github.com/sagemath/sage/issues/22582#comment:31)\n\n> \n> I don't think that makes any sense. It won't be *that* long before Python 2 is deprecated and removed entirely.  `python` should just be whatever the default python is.\n\nTo clarify, it's not just that Volker once said it, it's [PEP 394](https://www.python.org/dev/peps/pep-0394/).",
    "created_at": "2017-08-24T15:27:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348696",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@embray](#comment%3A13):
> Replying to [@fchapoton](#comment%3A11):
> > I think Volker once said that one should rather always let python point to python2.
> > 
> > See [#22582 comment:31](https://github.com/sagemath/sage/issues/22582#comment:31)

> 
> I don't think that makes any sense. It won't be *that* long before Python 2 is deprecated and removed entirely.  `python` should just be whatever the default python is.

To clarify, it's not just that Volker once said it, it's [PEP 394](https://www.python.org/dev/peps/pep-0394/).



---

archive/issue_comments_348697.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBoy, that PEP is a mess.  But I agree it makes sense, for shebang lines at least, that `python2` or `python3` is always specified....",
    "created_at": "2017-08-25T15:38:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348697",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">Comment 16</div>

Boy, that PEP is a mess.  But I agree it makes sense, for shebang lines at least, that `python2` or `python3` is always specified....



---

archive/issue_comments_348698.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nThis would now start to be really very useful (as sage starts with python3 using the experimental branch).",
    "created_at": "2017-10-15T07:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348698",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">Comment 17</div>

This would now start to be really very useful (as sage starts with python3 using the experimental branch).



---

archive/issue_comments_348699.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@fchapoton](#comment%3A17):\n> This would now start to be really very useful (as sage starts with python3 using the experimental branch).\n\nI think we need to make a design decision before we can make progress on this ticket. Once you set `SAGE_PYTHON3=yes` (or set the appropriate configure flag, some time in the future), does that forever \"pollute\" the Sage scripts so that they use python3, or do we want to somehow allow python2 and python3 builds to live side by side? If the former, we need to either save the setting so that future incremental builds in the same directory continue to use SAGE_PYTHON3=yes, or we let users shoot themselves in the foot by building with Python 3 and then a few weeks later upgrading matplotlib and forgetting to set the variable, so it tries to use Python 2 and something goes horribly wrong.\n\nThere are a few Sage packages which depend on Python and build libraries which do not reside in `local/lib/python$VERSION/`, and those present obstacles to side-by-side builds.",
    "created_at": "2017-10-20T18:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348699",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@fchapoton](#comment%3A17):
> This would now start to be really very useful (as sage starts with python3 using the experimental branch).

I think we need to make a design decision before we can make progress on this ticket. Once you set `SAGE_PYTHON3=yes` (or set the appropriate configure flag, some time in the future), does that forever "pollute" the Sage scripts so that they use python3, or do we want to somehow allow python2 and python3 builds to live side by side? If the former, we need to either save the setting so that future incremental builds in the same directory continue to use SAGE_PYTHON3=yes, or we let users shoot themselves in the foot by building with Python 3 and then a few weeks later upgrading matplotlib and forgetting to set the variable, so it tries to use Python 2 and something goes horribly wrong.

There are a few Sage packages which depend on Python and build libraries which do not reside in `local/lib/python$VERSION/`, and those present obstacles to side-by-side builds.



---

archive/issue_comments_348700.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nFrom a development perspective there's a convenience to allowing simultaneous Python 2 and Python 3 installations to live side-by-side.  But currently this doesn't even work since some libraries, such as Pynac, can't be be installed with Python 2 and Python 3 support simultaneously (this could be fixed, for example, by attaching the Python version to the SONAME of the library, but I don't think that's currently supported).\n\nThat said, from a more general user perspective I don't think there's much advantage.  I think it will be much, much simpler if `SAGE_PYTHON3` is treated solely as a built-time variable that indicates what Python should be used to build and run Sage.  And of course it should really be replaced with a `./configure` flag.  I think that makes the whole affair much, much simpler.\n\nOne thing that should still be possible is re-configuring with a different `--with-python=` flag, and rebuilding with that Python.  I had some success making that work in my experimental ticket #23465.",
    "created_at": "2017-10-23T08:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348700",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">Comment 19</div>

From a development perspective there's a convenience to allowing simultaneous Python 2 and Python 3 installations to live side-by-side.  But currently this doesn't even work since some libraries, such as Pynac, can't be be installed with Python 2 and Python 3 support simultaneously (this could be fixed, for example, by attaching the Python version to the SONAME of the library, but I don't think that's currently supported).

That said, from a more general user perspective I don't think there's much advantage.  I think it will be much, much simpler if `SAGE_PYTHON3` is treated solely as a built-time variable that indicates what Python should be used to build and run Sage.  And of course it should really be replaced with a `./configure` flag.  I think that makes the whole affair much, much simpler.

One thing that should still be possible is re-configuring with a different `--with-python=` flag, and rebuilding with that Python.  I had some success making that work in my experimental ticket #23465.



---

archive/issue_events_304136.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-09T19:26:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304136"
}
```



---

archive/issue_events_304137.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-09T19:26:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304137"
}
```



---

archive/issue_events_304138.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-09T19:26:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304138"
}
```



---

archive/issue_events_304139.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-09T19:26:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304139"
}
```



---

archive/issue_comments_348701.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nI've fixed quite a number of these in my branch just by changing the shebang lines to use `sage-python23`.  There *might* be some cases where this isn't appropriate, but I've found it to b the right way to go in most cases.",
    "created_at": "2018-01-10T13:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348701",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">Comment 21</div>

I've fixed quite a number of these in my branch just by changing the shebang lines to use `sage-python23`.  There *might* be some cases where this isn't appropriate, but I've found it to b the right way to go in most cases.



---

archive/issue_comments_348702.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nCertainly the fixes in the branch attached to this ticket are a good start.  I think we should go ahead and merge it, and leave bigger questions for a separate ticket.",
    "created_at": "2018-01-10T13:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348702",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">Comment 22</div>

Certainly the fixes in the branch attached to this ticket are a good start.  I think we should go ahead and merge it, and leave bigger questions for a separate ticket.



---

archive/issue_comments_348703.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nso, positive review ?",
    "created_at": "2018-01-10T13:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348703",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">Comment 23</div>

so, positive review ?



---

archive/issue_comments_348704.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2018-01-10T13:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348704",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_events_304140.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-10T13:15:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304140"
}
```



---

archive/issue_events_304141.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-10T13:15:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304141"
}
```



---

archive/issue_comments_348705.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nFor me, yeah. I just wasn't sure if there were other objections.",
    "created_at": "2018-01-10T13:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348705",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">Comment 24</div>

For me, yeah. I just wasn't sure if there were other objections.



---

archive/issue_comments_348706.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nTo the extent that we want to separate the build process from the runtime process, this should be a temporary solution, right? We either shouldn't be calling `sage-python23` from runtime pieces (since `sage-python23` lives in `build/bin`) or we should move it or have a new script in `src/bin` which does something similar.",
    "created_at": "2018-01-10T18:25:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348706",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:25" align="right">Comment 25</div>

To the extent that we want to separate the build process from the runtime process, this should be a temporary solution, right? We either shouldn't be calling `sage-python23` from runtime pieces (since `sage-python23` lives in `build/bin`) or we should move it or have a new script in `src/bin` which does something similar.



---

archive/issue_events_304142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-13T22:43:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304142"
}
```



---

archive/issue_events_304143.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-13T22:43:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304143"
}
```



---

archive/issue_comments_348707.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\n\n```\nsage -t --long --warn-long 78.8 src/sage/misc/gperftools.py\n**********************************************************************\nFile \"src/sage/misc/gperftools.py\", line 244, in sage.misc.gperftools.Profiler._executable\nFailed example:\n    prof._executable()\nExpected:\n    '.../python'\nGot:\n    '/mnt/disk/home/release/Sage/local/bin/python2'\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.misc.gperftools.Profiler._executable\n    [36 tests, 1 failure, 0.94 s]\n```",
    "created_at": "2018-01-13T22:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348707",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">Comment 26</div>


```
sage -t --long --warn-long 78.8 src/sage/misc/gperftools.py
**********************************************************************
File "src/sage/misc/gperftools.py", line 244, in sage.misc.gperftools.Profiler._executable
Failed example:
    prof._executable()
Expected:
    '.../python'
Got:
    '/mnt/disk/home/release/Sage/local/bin/python2'
**********************************************************************
1 item had failures:
   1 of   4 in sage.misc.gperftools.Profiler._executable
    [36 tests, 1 failure, 0.94 s]
```



---

archive/issue_comments_348708.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c8d97fc7f9f86a191fb10d3bf42c6121f6d0a00\">2c8d97f</a></td><td><code>Merge branch 'public/23106' in 8.2.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa\">25dddc5</a></td><td><code>trac 23106 detail</code></td></tr></table>\n",
    "created_at": "2018-01-16T09:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348708",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c8d97fc7f9f86a191fb10d3bf42c6121f6d0a00">2c8d97f</a></td><td><code>Merge branch 'public/23106' in 8.2.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa">25dddc5</a></td><td><code>trac 23106 detail</code></td></tr></table>




---

archive/issue_comments_348709.json:
```json
{
    "body": "Changed commit from **[5eb29bf](https://github.com/sagemath/sagetrac-mirror/commit/5eb29bf3f711fe6593b89a04e0efc4dab56fd49f)** to **[25dddc5](https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa)**",
    "created_at": "2018-01-16T09:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348709",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5eb29bf](https://github.com/sagemath/sagetrac-mirror/commit/5eb29bf3f711fe6593b89a04e0efc4dab56fd49f)** to **[25dddc5](https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa)**



---

archive/issue_comments_348710.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c8d97fc7f9f86a191fb10d3bf42c6121f6d0a00\">2c8d97f</a></td><td><code>Merge branch 'public/23106' in 8.2.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa\">25dddc5</a></td><td><code>trac 23106 detail</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c8d97fc7f9f86a191fb10d3bf42c6121f6d0a00\">2c8d97f</a></td><td><code>Merge branch 'public/23106' in 8.2.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa\">25dddc5</a></td><td><code>trac 23106 detail</code></td></tr></table>\n",
    "created_at": "2018-01-16T09:30:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348710",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:28" align="right">Comment 28</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c8d97fc7f9f86a191fb10d3bf42c6121f6d0a00">2c8d97f</a></td><td><code>Merge branch 'public/23106' in 8.2.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa">25dddc5</a></td><td><code>trac 23106 detail</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c8d97fc7f9f86a191fb10d3bf42c6121f6d0a00">2c8d97f</a></td><td><code>Merge branch 'public/23106' in 8.2.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa">25dddc5</a></td><td><code>trac 23106 detail</code></td></tr></table>




---

archive/issue_events_304144.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-16T09:30:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304144"
}
```



---

archive/issue_events_304145.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-01-16T09:30:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304145"
}
```



---

archive/issue_comments_348711.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nThat fix won't work on Python 3--just put `.../python...` (and consider squashing)",
    "created_at": "2018-01-16T14:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348711",
    "user": "https://github.com/embray"
}
```

<div id="comment:29" align="right">Comment 29</div>

That fix won't work on Python 3--just put `.../python...` (and consider squashing)



---

archive/issue_events_304146.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T14:05:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304146"
}
```



---

archive/issue_events_304147.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T14:05:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304147"
}
```



---

archive/issue_comments_348712.json:
```json
{
    "body": "Changed commit from **[25dddc5](https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa)** to **[847df2c](https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324)**",
    "created_at": "2018-01-16T14:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348712",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[25dddc5](https://github.com/sagemath/sagetrac-mirror/commit/25dddc53d545ad2400023000d62d33bb990879aa)** to **[847df2c](https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324)**



---

archive/issue_comments_348713.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324\">847df2c</a></td><td><code>modify scripts towards python3 compatibility</code></td></tr></table>\n",
    "created_at": "2018-01-16T14:08:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348713",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324">847df2c</a></td><td><code>modify scripts towards python3 compatibility</code></td></tr></table>




---

archive/issue_comments_348714.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\ndone\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324\">847df2c</a></td><td><code>modify scripts towards python3 compatibility</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324\">847df2c</a></td><td><code>modify scripts towards python3 compatibility</code></td></tr></table>\n",
    "created_at": "2018-01-16T14:08:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348714",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">Comment 31</div>

done

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324">847df2c</a></td><td><code>modify scripts towards python3 compatibility</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324">847df2c</a></td><td><code>modify scripts towards python3 compatibility</code></td></tr></table>




---

archive/issue_comments_348715.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nThanks!",
    "created_at": "2018-01-16T14:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348715",
    "user": "https://github.com/embray"
}
```

<div id="comment:32" align="right">Comment 32</div>

Thanks!



---

archive/issue_events_304148.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T14:17:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304148"
}
```



---

archive/issue_events_304149.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T14:17:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304149"
}
```



---

archive/issue_comments_348716.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@jhpalmieri](#comment%3A25):\n> To the extent that we want to separate the build process from the runtime process, this should be a temporary solution, right? We either shouldn't be calling `sage-python23` from runtime pieces (since `sage-python23` lives in `build/bin`) or we should move it or have a new script in `src/bin` which does something similar.\n\nI don't particularly care where the scripts live in the source code--I think that scripts are needed at build time living in `src/bin` makes sense, but don't have strong opinions about it.\n\nAll that matters to me is what happens at installation.  I think all scripts in `build/bin` should be installed to `$SAGE_LOCAL/bin`.  Similarly I'm of the opinion that most other files in `build/` should be installed somewhere under `$SAGE_LOCAL` so that, for example, one can install new packages for Sage at runtime without having a full sage source tree lying around.  That is, package installations and upgrades fully become a \"runtime\" feature of Sage.  That's all a much bigger topic beyond this though.",
    "created_at": "2018-01-16T14:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348716",
    "user": "https://github.com/embray"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@jhpalmieri](#comment%3A25):
> To the extent that we want to separate the build process from the runtime process, this should be a temporary solution, right? We either shouldn't be calling `sage-python23` from runtime pieces (since `sage-python23` lives in `build/bin`) or we should move it or have a new script in `src/bin` which does something similar.

I don't particularly care where the scripts live in the source code--I think that scripts are needed at build time living in `src/bin` makes sense, but don't have strong opinions about it.

All that matters to me is what happens at installation.  I think all scripts in `build/bin` should be installed to `$SAGE_LOCAL/bin`.  Similarly I'm of the opinion that most other files in `build/` should be installed somewhere under `$SAGE_LOCAL` so that, for example, one can install new packages for Sage at runtime without having a full sage source tree lying around.  That is, package installations and upgrades fully become a "runtime" feature of Sage.  That's all a much bigger topic beyond this though.



---

archive/issue_events_304150.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-18T18:09:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304150"
}
```



---

archive/issue_events_304151.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2b2c3eaf7f521b001eb4fe07ad80beb544114508",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-01-18T18:09:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23106#event-304151"
}
```



---

archive/issue_comments_348717.json:
```json
{
    "body": "Changed branch from **[public/23106](https://github.com/sagemath/sagetrac-mirror/tree/public/23106)** to **[847df2c](https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324)**",
    "created_at": "2018-01-18T18:09:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23106#issuecomment-348717",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/23106](https://github.com/sagemath/sagetrac-mirror/tree/public/23106)** to **[847df2c](https://github.com/sagemath/sagetrac-mirror/commit/847df2c99cbce5f35f4c7c15da1ecb26843f5324)**
