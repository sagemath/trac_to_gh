# Issue 23983: dot2tex breaks docbuild

archive/issues_023746.json:
```json
{
    "assignees": [],
    "body": "If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build (see log below)\n\nFor the same reason, the following optional doctest fails:\n\n```\nsage -t src/sage/categories/loop_crystals.py\n**********************************************************************\nFile \"src/sage/categories/loop_crystals.py\", line 118, in sage.categories.loop_crystals.LoopCrystals.ParentMethods.digraph\nFailed example:\n    G.latex_options()  # optional - dot2tex\nExpected:\n    LaTeX options for Digraph on 29 vertices:\n    {...'edge_options': <function <lambda> at 0x...>,...}\nGot:\n    LaTeX options for Digraph on 29 vertices: {}\n**********************************************************************\n```\nHowever, this test is not actually run by default because of #23997.\n\n```\n[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/word_options\n[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/words\n[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/yang_baxter_graph\n[dochtml] [combinat ] reading sources... [100%] sage/rings/cfinite_sequence\n[dochtml] [combinat ] WARNING: Could not locate Graphviz binaries\n[dochtml] [combinat ] WARNING: Failed to create xdotdata. Is Graphviz installed?\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:39: WARNING: undefined label: sage.coding (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:40: WARNING: undefined label: sage.dynamics (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:41: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:39: WARNING: undefined label: sage.coding (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:40: WARNING: undefined label: sage.dynamics (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:41: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:36: WARNING: undefined label: sage.algebras.catalog (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:37: WARNING: undefined label: sage.groups.groups_catalog (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:64: WARNING: undefined label: sage.algebras.free_zinbiel_algebra (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/src/doc/en/reference/combinat/sage/combinat/counting.rst:6: WARNING: undefined label: sage.databases.oeis (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/enumerated_sets.py:docstring of sage.combinat.enumerated_sets:59: WARNING: undefined label: sage.groups.perm_gps.permutation_groups_catalog (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/enumerated_sets.py:docstring of sage.combinat.enumerated_sets:84: WARNING: undefined label: sage.groups.matrix_gps.catalog (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/posets/__init__.py:docstring of sage.combinat.posets.__init__:23: WARNING: undefined label: sage.categories.category (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:63: WARNING: undefined label: sage.groups.groups_catalog (if the link has no caption the label must precede a section header)\n[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:70: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n[dochtml]     \"__main__\", fname, loader, pkg_name)\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/runpy.py\", line 72, in _run_code\n[dochtml]     exec code in run_globals\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1675, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 310, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 505, in _wrapper\n[dochtml]     build_many(build_ref_doc, L)\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 260, in build_many\n[dochtml]     results.append(target(arg))\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 71, in build_ref_doc\n[dochtml]     getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 720, in _wrapper\n[dochtml]     getattr(DocBuilder, build_type)(self, *args, **kwds)\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 105, in f\n[dochtml]     runsphinx()\n[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py\", line 218, in runsphinx\n[dochtml]     raise exception  \n[dochtml] OSError: [combinat ] WARNING: Could not locate Graphviz binaries\n```\n\nCC:  @koffie @nthiery\n\nBranch/Commit: **[13a60ea](https://github.com/sagemath/sagetrac-mirror/commit/13a60ea63818302d376a1aa44fbb6faf4f4e28f3)**\n\nReviewer: **Maarten Derickx**\n\nAuthor: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23983_\n\n",
    "closed_at": "2017-10-16T22:45:01Z",
    "created_at": "2017-10-07T10:33:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "dot2tex breaks docbuild",
    "type": "issue",
    "updated_at": "2017-10-16T22:45:01Z",
    "url": "https://github.com/sagemath/sage/issues/23983",
    "user": "https://github.com/jdemeyer"
}
```
If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build (see log below)

For the same reason, the following optional doctest fails:

```
sage -t src/sage/categories/loop_crystals.py
**********************************************************************
File "src/sage/categories/loop_crystals.py", line 118, in sage.categories.loop_crystals.LoopCrystals.ParentMethods.digraph
Failed example:
    G.latex_options()  # optional - dot2tex
Expected:
    LaTeX options for Digraph on 29 vertices:
    {...'edge_options': <function <lambda> at 0x...>,...}
Got:
    LaTeX options for Digraph on 29 vertices: {}
**********************************************************************
```
However, this test is not actually run by default because of #23997.

```
[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/word_options
[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/words
[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/yang_baxter_graph
[dochtml] [combinat ] reading sources... [100%] sage/rings/cfinite_sequence
[dochtml] [combinat ] WARNING: Could not locate Graphviz binaries
[dochtml] [combinat ] WARNING: Failed to create xdotdata. Is Graphviz installed?
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:39: WARNING: undefined label: sage.coding (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:40: WARNING: undefined label: sage.dynamics (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:41: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:39: WARNING: undefined label: sage.coding (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:40: WARNING: undefined label: sage.dynamics (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:41: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:36: WARNING: undefined label: sage.algebras.catalog (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:37: WARNING: undefined label: sage.groups.groups_catalog (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:64: WARNING: undefined label: sage.algebras.free_zinbiel_algebra (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/src/doc/en/reference/combinat/sage/combinat/counting.rst:6: WARNING: undefined label: sage.databases.oeis (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/enumerated_sets.py:docstring of sage.combinat.enumerated_sets:59: WARNING: undefined label: sage.groups.perm_gps.permutation_groups_catalog (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/enumerated_sets.py:docstring of sage.combinat.enumerated_sets:84: WARNING: undefined label: sage.groups.matrix_gps.catalog (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/posets/__init__.py:docstring of sage.combinat.posets.__init__:23: WARNING: undefined label: sage.categories.category (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:63: WARNING: undefined label: sage.groups.groups_catalog (if the link has no caption the label must precede a section header)
[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:70: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
[dochtml]     "__main__", fname, loader, pkg_name)
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/runpy.py", line 72, in _run_code
[dochtml]     exec code in run_globals
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1675, in main
[dochtml]     builder()
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 310, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 505, in _wrapper
[dochtml]     build_many(build_ref_doc, L)
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 260, in build_many
[dochtml]     results.append(target(arg))
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 71, in build_ref_doc
[dochtml]     getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 720, in _wrapper
[dochtml]     getattr(DocBuilder, build_type)(self, *args, **kwds)
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 105, in f
[dochtml]     runsphinx()
[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py", line 218, in runsphinx
[dochtml]     raise exception  
[dochtml] OSError: [combinat ] WARNING: Could not locate Graphviz binaries
```

CC:  @koffie @nthiery

Branch/Commit: **[13a60ea](https://github.com/sagemath/sagetrac-mirror/commit/13a60ea63818302d376a1aa44fbb6faf4f4e28f3)**

Reviewer: **Maarten Derickx**

Author: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/23983_





---

archive/issue_events_315051.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-07T10:33:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315051"
}
```



---

archive/issue_events_315052.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-07T10:33:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "component: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315052"
}
```



---

archive/issue_events_315053.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-07T10:33:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315053"
}
```



---

archive/issue_events_315054.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-07T10:33:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315054"
}
```



---

archive/issue_comments_364990.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build\n``````\n",
    "created_at": "2017-10-07T11:00:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364990",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build
``````




---

archive/issue_comments_364991.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,50 @@\n-If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build\n+If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build:\n+\n+```\n+[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/word_options\n+[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/words\n+[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/yang_baxter_graph\n+[dochtml] [combinat ] reading sources... [100%] sage/rings/cfinite_sequence\n+[dochtml] [combinat ] WARNING: Could not locate Graphviz binaries\n+[dochtml] [combinat ] WARNING: Failed to create xdotdata. Is Graphviz installed?\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:39: WARNING: undefined label: sage.coding (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:40: WARNING: undefined label: sage.dynamics (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:41: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:39: WARNING: undefined label: sage.coding (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:40: WARNING: undefined label: sage.dynamics (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:41: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:36: WARNING: undefined label: sage.algebras.catalog (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:37: WARNING: undefined label: sage.groups.groups_catalog (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:64: WARNING: undefined label: sage.algebras.free_zinbiel_algebra (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/src/doc/en/reference/combinat/sage/combinat/counting.rst:6: WARNING: undefined label: sage.databases.oeis (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/enumerated_sets.py:docstring of sage.combinat.enumerated_sets:59: WARNING: undefined label: sage.groups.perm_gps.permutation_groups_catalog (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/enumerated_sets.py:docstring of sage.combinat.enumerated_sets:84: WARNING: undefined label: sage.groups.matrix_gps.catalog (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/posets/__init__.py:docstring of sage.combinat.posets.__init__:23: WARNING: undefined label: sage.categories.category (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:63: WARNING: undefined label: sage.groups.groups_catalog (if the link has no caption the label must precede a section header)\n+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:70: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)\n+[dochtml] Error building the documentation.\n+[dochtml] Traceback (most recent call last):\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n+[dochtml]     \"__main__\", fname, loader, pkg_name)\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/runpy.py\", line 72, in _run_code\n+[dochtml]     exec code in run_globals\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n+[dochtml]     main()\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1675, in main\n+[dochtml]     builder()\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 310, in _wrapper\n+[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 505, in _wrapper\n+[dochtml]     build_many(build_ref_doc, L)\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 260, in build_many\n+[dochtml]     results.append(target(arg))\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 71, in build_ref_doc\n+[dochtml]     getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 720, in _wrapper\n+[dochtml]     getattr(DocBuilder, build_type)(self, *args, **kwds)\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 105, in f\n+[dochtml]     runsphinx()\n+[dochtml]   File \"/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py\", line 218, in runsphinx\n+[dochtml]     raise exception  \n+[dochtml] OSError: [combinat ] WARNING: Could not locate Graphviz binaries\n+```\n``````\n",
    "created_at": "2017-10-07T12:17:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364991",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,50 @@
-If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build
+If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build:
+
+```
+[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/word_options
+[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/words
+[dochtml] [combinat ] reading sources... [ 99%] sage/combinat/yang_baxter_graph
+[dochtml] [combinat ] reading sources... [100%] sage/rings/cfinite_sequence
+[dochtml] [combinat ] WARNING: Could not locate Graphviz binaries
+[dochtml] [combinat ] WARNING: Failed to create xdotdata. Is Graphviz installed?
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:39: WARNING: undefined label: sage.coding (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:40: WARNING: undefined label: sage.dynamics (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat:41: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:39: WARNING: undefined label: sage.coding (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:40: WARNING: undefined label: sage.dynamics (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/__init__.py:docstring of sage.combinat.__init__:41: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:36: WARNING: undefined label: sage.algebras.catalog (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:37: WARNING: undefined label: sage.groups.groups_catalog (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/algebraic_combinatorics.py:docstring of sage.combinat.algebraic_combinatorics:64: WARNING: undefined label: sage.algebras.free_zinbiel_algebra (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/src/doc/en/reference/combinat/sage/combinat/counting.rst:6: WARNING: undefined label: sage.databases.oeis (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/enumerated_sets.py:docstring of sage.combinat.enumerated_sets:59: WARNING: undefined label: sage.groups.perm_gps.permutation_groups_catalog (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/enumerated_sets.py:docstring of sage.combinat.enumerated_sets:84: WARNING: undefined label: sage.groups.matrix_gps.catalog (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/posets/__init__.py:docstring of sage.combinat.posets.__init__:23: WARNING: undefined label: sage.categories.category (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:63: WARNING: undefined label: sage.groups.groups_catalog (if the link has no caption the label must precede a section header)
+[dochtml] [combinat ] /home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage/combinat/quickref.py:docstring of sage.combinat.quickref:70: WARNING: undefined label: sage.graphs (if the link has no caption the label must precede a section header)
+[dochtml] Error building the documentation.
+[dochtml] Traceback (most recent call last):
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
+[dochtml]     "__main__", fname, loader, pkg_name)
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/runpy.py", line 72, in _run_code
+[dochtml]     exec code in run_globals
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
+[dochtml]     main()
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1675, in main
+[dochtml]     builder()
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 310, in _wrapper
+[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 505, in _wrapper
+[dochtml]     build_many(build_ref_doc, L)
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 260, in build_many
+[dochtml]     results.append(target(arg))
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 71, in build_ref_doc
+[dochtml]     getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 720, in _wrapper
+[dochtml]     getattr(DocBuilder, build_type)(self, *args, **kwds)
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 105, in f
+[dochtml]     runsphinx()
+[dochtml]   File "/home/worker/sage-patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py", line 218, in runsphinx
+[dochtml]     raise exception  
+[dochtml] OSError: [combinat ] WARNING: Could not locate Graphviz binaries
+```
``````




---

archive/issue_comments_364992.json:
```json
{
    "body": "Branch: **[u/jdemeyer/dot2tex_breaks_docbuild](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/dot2tex_breaks_docbuild)**",
    "created_at": "2017-10-07T12:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364992",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/dot2tex_breaks_docbuild](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/dot2tex_breaks_docbuild)**



---

archive/issue_events_315055.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-07T12:43:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315055"
}
```



---

archive/issue_comments_364993.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2017-10-07T12:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364993",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_364994.json:
```json
{
    "body": "Commit: **[899b06a](https://github.com/sagemath/sagetrac-mirror/commit/899b06a3f1b420c59067ee9f463901c1a7c04df9)**",
    "created_at": "2017-10-07T12:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364994",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[899b06a](https://github.com/sagemath/sagetrac-mirror/commit/899b06a3f1b420c59067ee9f463901c1a7c04df9)**



---

archive/issue_comments_364995.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/899b06a3f1b420c59067ee9f463901c1a7c04df9\">899b06a</a></td><td><code>Explicitly check for Graphviz in have_dot2tex()</code></td></tr></table>\n",
    "created_at": "2017-10-07T12:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364995",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">Comment 4</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/899b06a3f1b420c59067ee9f463901c1a7c04df9">899b06a</a></td><td><code>Explicitly check for Graphviz in have_dot2tex()</code></td></tr></table>




---

archive/issue_comments_364996.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nWouldn't it be better to check for wether Graphviz is installed during the installation of dot2tex an raise an appropriate error telling the user to install graphviz if it is not? I find it a bit confusing that now after a succesfull:\n\n```\nsage -i dot2tex\n```\n\none still can have  `have_dot2tex()` return false.",
    "created_at": "2017-10-07T20:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364996",
    "user": "https://github.com/koffie"
}
```

<div id="comment:5" align="right">Comment 5</div>

Wouldn't it be better to check for wether Graphviz is installed during the installation of dot2tex an raise an appropriate error telling the user to install graphviz if it is not? I find it a bit confusing that now after a succesfull:

```
sage -i dot2tex
```

one still can have  `have_dot2tex()` return false.



---

archive/issue_comments_364997.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nP.s. the experimental package graphiz still builds on OS X but apparently not on other platforms, see #7438 .",
    "created_at": "2017-10-07T22:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364997",
    "user": "https://github.com/koffie"
}
```

<div id="comment:6" align="right">Comment 6</div>

P.s. the experimental package graphiz still builds on OS X but apparently not on other platforms, see #7438 .



---

archive/issue_comments_364998.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nWe basically require a system-wide installation of Graphviz because I don't think anyone uses the broken(? and outdated?) experimental package. So Graphviz is a dependency, but not during the installation of dot2tex. I would be in favor of erroring out of a dot2tex installation if Graphviz is not installed.",
    "created_at": "2017-10-08T01:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364998",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">Comment 7</div>

We basically require a system-wide installation of Graphviz because I don't think anyone uses the broken(? and outdated?) experimental package. So Graphviz is a dependency, but not during the installation of dot2tex. I would be in favor of erroring out of a dot2tex installation if Graphviz is not installed.



---

archive/issue_comments_364999.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@tscrim](#comment%3A7):\n> I would be in favor of erroring out of a dot2tex installation if Graphviz is not installed.\n\nYes, please - together with a helpful error message!  That would have saved me quite some time in the past.",
    "created_at": "2017-10-08T05:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-364999",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@tscrim](#comment%3A7):
> I would be in favor of erroring out of a dot2tex installation if Graphviz is not installed.

Yes, please - together with a helpful error message!  That would have saved me quite some time in the past.



---

archive/issue_comments_365000.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI do not object to the change here as it matches the docstring. However, I think we should have the same changes in `assert_have_dot2tex`.",
    "created_at": "2017-10-09T04:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365000",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">Comment 9</div>

I do not object to the change here as it matches the docstring. However, I think we should have the same changes in `assert_have_dot2tex`.



---

archive/issue_comments_365001.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nI think the question is: could it ever make sense to run `dot2tex` *without* graphviz? If there is some (even minor) usefulness to dot2tex without graphviz, then graphviz should not be a dependency of dot2tex.",
    "created_at": "2017-10-09T08:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365001",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">Comment 10</div>

I think the question is: could it ever make sense to run `dot2tex` *without* graphviz? If there is some (even minor) usefulness to dot2tex without graphviz, then graphviz should not be a dependency of dot2tex.



---

archive/issue_comments_365002.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,21 @@\n-If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build:\n+If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build (see log below)\n+\n+For the same reason, the following optional doctest fails:\n+\n+```\n+sage -t src/sage/categories/loop_crystals.py\n+**********************************************************************\n+File \"src/sage/categories/loop_crystals.py\", line 118, in sage.categories.loop_crystals.LoopCrystals.ParentMethods.digraph\n+Failed example:\n+    G.latex_options()  # optional - dot2tex\n+Expected:\n+    LaTeX options for Digraph on 29 vertices:\n+    {...'edge_options': <function <lambda> at 0x...>,...}\n+Got:\n+    LaTeX options for Digraph on 29 vertices: {}\n+**********************************************************************\n+```\n+However, this test is not actually run by default because of #23997.\n \n ```\n [dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/word_options\n``````\n",
    "created_at": "2017-10-09T12:39:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365002",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,21 @@
-If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build:
+If the package `dot2tex` is installed, but Graphviz is not, the documentation fails to build (see log below)
+
+For the same reason, the following optional doctest fails:
+
+```
+sage -t src/sage/categories/loop_crystals.py
+**********************************************************************
+File "src/sage/categories/loop_crystals.py", line 118, in sage.categories.loop_crystals.LoopCrystals.ParentMethods.digraph
+Failed example:
+    G.latex_options()  # optional - dot2tex
+Expected:
+    LaTeX options for Digraph on 29 vertices:
+    {...'edge_options': <function <lambda> at 0x...>,...}
+Got:
+    LaTeX options for Digraph on 29 vertices: {}
+**********************************************************************
+```
+However, this test is not actually run by default because of #23997.
 
 ```
 [dochtml] [combinat ] reading sources... [ 99%] sage/combinat/words/word_options
``````




---

archive/issue_comments_365003.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nThe description on PyPI says \"Dot2tex is a tool for converting graphs rendered by Graphviz to formats that can be used with LaTeX.\"\n\nSo I guess that one could consider graphviz to be a hard dependency.",
    "created_at": "2017-10-09T13:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365003",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">Comment 12</div>

The description on PyPI says "Dot2tex is a tool for converting graphs rendered by Graphviz to formats that can be used with LaTeX."

So I guess that one could consider graphviz to be a hard dependency.



---

archive/issue_comments_365004.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nI also checked the sage code on occurrences of dot2tex, and they where all related to `set_latex_options` of graphs or things that render like graphs. The documentation of `set_latex_options` also clearly state that graph layout programs have to be one of the graphviz layout programs.\n\nIt is in theory possible for another program then one from graphviz suite to generate dot files, however all things that I have seen outside of sage (like [gprof2dot](https://github.com/jrfonseca/gprof2dot)) all have graphviz as a dependency since the dot file is a standard created by graphviz and graphviz provides a lot of utilities for generating/manipulating dot files.\n\nI am for a hard dependency as well since at the moment dot2tex in sage is completely useless without graphviz, and I think it will be very unlikely that use cases of the dot file format will pop up in the future that do not in some way or another require graphviz.",
    "created_at": "2017-10-09T14:00:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365004",
    "user": "https://github.com/koffie"
}
```

<div id="comment:13" align="right">Comment 13</div>

I also checked the sage code on occurrences of dot2tex, and they where all related to `set_latex_options` of graphs or things that render like graphs. The documentation of `set_latex_options` also clearly state that graph layout programs have to be one of the graphviz layout programs.

It is in theory possible for another program then one from graphviz suite to generate dot files, however all things that I have seen outside of sage (like [gprof2dot](https://github.com/jrfonseca/gprof2dot)) all have graphviz as a dependency since the dot file is a standard created by graphviz and graphviz provides a lot of utilities for generating/manipulating dot files.

I am for a hard dependency as well since at the moment dot2tex in sage is completely useless without graphviz, and I think it will be very unlikely that use cases of the dot file format will pop up in the future that do not in some way or another require graphviz.



---

archive/issue_comments_365005.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nAnd to the above I would like to add that having a hard dependency will make the user experience of sage less confusing. Since I think:\n\n```\nsage -i dot2tex\nError: you should install graphviz from http://www.graphviz.org/Download..php\n```\n\nis a better user experience then `sage -i dot2tex` seemingly succeeding, but all the places in sage that say they require dot2tex not working as they should, or falling back to an implementation not using dot2tex .",
    "created_at": "2017-10-09T14:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365005",
    "user": "https://github.com/koffie"
}
```

<div id="comment:14" align="right">Comment 14</div>

And to the above I would like to add that having a hard dependency will make the user experience of sage less confusing. Since I think:

```
sage -i dot2tex
Error: you should install graphviz from http://www.graphviz.org/Download..php
```

is a better user experience then `sage -i dot2tex` seemingly succeeding, but all the places in sage that say they require dot2tex not working as they should, or falling back to an implementation not using dot2tex .



---

archive/issue_comments_365006.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13a60ea63818302d376a1aa44fbb6faf4f4e28f3\">13a60ea</a></td><td><code>Check for Graphviz dependency when installing dot2tex</code></td></tr></table>\n",
    "created_at": "2017-10-10T09:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365006",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13a60ea63818302d376a1aa44fbb6faf4f4e28f3">13a60ea</a></td><td><code>Check for Graphviz dependency when installing dot2tex</code></td></tr></table>




---

archive/issue_comments_365007.json:
```json
{
    "body": "Changed commit from **[899b06a](https://github.com/sagemath/sagetrac-mirror/commit/899b06a3f1b420c59067ee9f463901c1a7c04df9)** to **[13a60ea](https://github.com/sagemath/sagetrac-mirror/commit/13a60ea63818302d376a1aa44fbb6faf4f4e28f3)**",
    "created_at": "2017-10-10T09:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365007",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[899b06a](https://github.com/sagemath/sagetrac-mirror/commit/899b06a3f1b420c59067ee9f463901c1a7c04df9)** to **[13a60ea](https://github.com/sagemath/sagetrac-mirror/commit/13a60ea63818302d376a1aa44fbb6faf4f4e28f3)**



---

archive/issue_comments_365008.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nI tested that with this ticket dot2tex fails to install if graphviz is not installed and that it correctly installs if graphviz is installed. The error message looks very clear.",
    "created_at": "2017-10-10T11:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365008",
    "user": "https://github.com/koffie"
}
```

<div id="comment:16" align="right">Comment 16</div>

I tested that with this ticket dot2tex fails to install if graphviz is not installed and that it correctly installs if graphviz is installed. The error message looks very clear.



---

archive/issue_comments_365009.json:
```json
{
    "body": "Reviewer: **Maarten Derickx**",
    "created_at": "2017-10-10T11:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365009",
    "user": "https://github.com/koffie"
}
```

Reviewer: **Maarten Derickx**



---

archive/issue_events_315056.json:
```json
{
    "actor": "https://github.com/koffie",
    "created_at": "2017-10-10T11:52:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315056"
}
```



---

archive/issue_events_315057.json:
```json
{
    "actor": "https://github.com/koffie",
    "created_at": "2017-10-10T11:52:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315057"
}
```



---

archive/issue_comments_365010.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nTypo? `http://www.graphviz.org/Download..php\"`",
    "created_at": "2017-10-10T15:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365010",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">Comment 17</div>

Typo? `http://www.graphviz.org/Download..php"`



---

archive/issue_comments_365011.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nNope, I was surprised as well, but that is actually the link. It works without the double dot as well, but will then redirect you to the double dot version.",
    "created_at": "2017-10-10T15:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365011",
    "user": "https://github.com/koffie"
}
```

<div id="comment:18" align="right">Comment 18</div>

Nope, I was surprised as well, but that is actually the link. It works without the double dot as well, but will then redirect you to the double dot version.



---

archive/issue_comments_365012.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/dot2tex_breaks_docbuild](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/dot2tex_breaks_docbuild)** to **[13a60ea](https://github.com/sagemath/sagetrac-mirror/commit/13a60ea63818302d376a1aa44fbb6faf4f4e28f3)**",
    "created_at": "2017-10-16T22:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23983#issuecomment-365012",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/dot2tex_breaks_docbuild](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/dot2tex_breaks_docbuild)** to **[13a60ea](https://github.com/sagemath/sagetrac-mirror/commit/13a60ea63818302d376a1aa44fbb6faf4f4e28f3)**



---

archive/issue_events_315058.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-16T22:45:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315058"
}
```



---

archive/issue_events_315059.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "067b87c6100e91ca2a791bd1306e93194fd98e87",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-10-16T22:45:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23983",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23983#event-315059"
}
```
