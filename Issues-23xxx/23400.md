# Issue 23400: Cleanup of matrix_gfpn_dense

archive/issues_023163.json:
```json
{
    "body": "Ticket #21437 is supposed to be split into smaller chunks, and this is one of them: Make the code Python 3 compliant, use sig_on/sig_check/sig_off with more care, use the `for i in range(bla)` instead of `for i from 0<=i<bla`.\n\nBranch/Commit: c0fd902e57aa97eb1be16e03e786b7c0615ce09a\n\nReviewer: Travis Scrimshaw\n\nAuthor: Simon King\n\nDependencies: #21437 #23411\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/23400\n\n",
    "closed_at": "2017-10-29T10:32:09Z",
    "created_at": "2017-07-10T19:50:15Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Cleanup of matrix_gfpn_dense",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23400",
    "user": "https://github.com/simon-king-jena"
}
```
Ticket #21437 is supposed to be split into smaller chunks, and this is one of them: Make the code Python 3 compliant, use sig_on/sig_check/sig_off with more care, use the `for i in range(bla)` instead of `for i from 0<=i<bla`.

Branch/Commit: c0fd902e57aa97eb1be16e03e786b7c0615ce09a

Reviewer: Travis Scrimshaw

Author: Simon King

Dependencies: #21437 #23411

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/23400





---

archive/issue_comments_344858.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-10T21:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344858",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_344859.json:
```json
{
    "body": "<a id='comment:2'></a>I suppose it is not needed to add a merge with the one commit from #23352 that is not already included in the branch from here.\n\n---\nNew commits:",
    "created_at": "2017-07-10T21:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344859",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:2'></a>I suppose it is not needed to add a merge with the one commit from #23352 that is not already included in the branch from here.

---
New commits:



---

archive/issue_comments_344860.json:
```json
{
    "body": "<a id='comment:3'></a>I really really really hate git's merging incapabilities.",
    "created_at": "2017-07-11T08:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344860",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>I really really really hate git's merging incapabilities.



---

archive/issue_comments_344861.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-07-11T08:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344861",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_344862.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-07-11T09:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_344863.json:
```json
{
    "body": "<a id='comment:5'></a>Since git wasn't able to merge the commit \"Fix ticket number in deprecation warning\", that merely replaces one number by another number in a single line, without touching anything else, I had to manually merge and subsequently rebase the branch.\n\nI don't know if it is just me. Is there really no way to avoid dull manual work when all what I want to achieve is having a simple change in a single line?",
    "created_at": "2017-07-11T09:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344863",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>Since git wasn't able to merge the commit "Fix ticket number in deprecation warning", that merely replaces one number by another number in a single line, without touching anything else, I had to manually merge and subsequently rebase the branch.

I don't know if it is just me. Is there really no way to avoid dull manual work when all what I want to achieve is having a simple change in a single line?



---

archive/issue_comments_344864.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-07-11T09:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344864",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_344865.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 SimonKing]:\n> Since git wasn't able to merge the commit \"Fix ticket number in deprecation warning\", that merely replaces one number by another number in a single line, without touching anything else, I had to manually merge and subsequently rebase the branch.\n> \n> I don't know if it is just me. Is there really no way to avoid dull manual work when all what I want to achieve is having a simple change in a single line?\n\n\nIt sounds like you have two branches that have the \"equivalent\" commits but are based off two different branches. So they are not the *same* commits and git then has to deal with these conflicts. If the one particular commit with the change is what you wanted and are having these troubles, then you might want to cherry-pick the commit in.\n\nDon't forget to also do `git merge --abort` when you want to stop doing a merge, but I think git is usually smart enough not to let you do really anything else in that state (although do not rely on this). Feel free to e-mail me if you have any git questions or want me to do something git related if you're having trouble too.",
    "created_at": "2017-07-11T14:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344865",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>Replying to [comment:5 SimonKing]:
> Since git wasn't able to merge the commit "Fix ticket number in deprecation warning", that merely replaces one number by another number in a single line, without touching anything else, I had to manually merge and subsequently rebase the branch.
> 
> I don't know if it is just me. Is there really no way to avoid dull manual work when all what I want to achieve is having a simple change in a single line?


It sounds like you have two branches that have the "equivalent" commits but are based off two different branches. So they are not the *same* commits and git then has to deal with these conflicts. If the one particular commit with the change is what you wanted and are having these troubles, then you might want to cherry-pick the commit in.

Don't forget to also do `git merge --abort` when you want to stop doing a merge, but I think git is usually smart enough not to let you do really anything else in that state (although do not rely on this). Feel free to e-mail me if you have any git questions or want me to do something git related if you're having trouble too.



---

archive/issue_comments_344866.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 tscrim]:\n> It sounds like you have two branches that have the \"equivalent\" commits but are based off two different branches. So they are not the *same* commits and git then has to deal with these conflicts. If the one particular commit with the change is what you wanted and are having these troubles, then you might want to cherry-pick the commit in.\n\n\nNo, this is not what my problem came from. And I did cherry-pick. See example below.\n\n> Don't forget to also do `git merge --abort` when you want to stop doing a merge, \n\n\nI did.\n\nJust for testing git, I created the following toy example:\n- git init in some folder.\n- create `my_file`, that contains the alphabet, one lower-case letter in each line. Add that file and commit. That's the starting point.\n- create two branches A and B.\n- In branch A, change the letter j in my_file to J (upper-case) and commit. Let's call this \"commit xyz\".\n- In branch B, change all vowels to upper-case letters, and commit.\n\nNow I am on branch B, and I want to apply the changeset from xyz. This could be tried by either \"git merge A\" or by \"git cherry-pick xyz\"; it turns out that the resulting problem is the same.\n\nOf course the changeset from xyz cannot be applied, as the changeset's context contains one line with the lower-case letter i, but is being applied to a file where there is an upper-case letter I. So, of course, there is a conflict.\n\nTherefore, after \"git merge\" resp. \"git cherry-pick\", we do \"git mergetool\". Result: meld opens with three versions of my_file. The left column is from branch B (vowels are upper-case, j is lower case). The middle column, which will eventually contain the result of the merge, is the common ancestor of A and B (*all* letters are lower-case). The right column is from branch A (only J is upper-case, the rest is lower-case).\n\nConsequently, in order to merge, I need to *manually* change all vowels in the middle column to upper-case, and also change j to upper-case. In other words, I need to manually apply all changes.\n\nAnd I really wonder why git makes me do 6 changes (5 vowels plus j), when 4 of these changes (namely the vowels a,e,o,u) are outside of the changeset.\n\nTo me, it seems obvious that in the middle column we should start with B (perhaps even after applying the hunks from the changeset that cleanly apply), because that's what we want to apply the changeset to. And then, we can solve the problem by focusing on the changeset: Change i into I and j into J. Done.\n\nSo, what is git's rationale for not doing the obvious? How to do better?",
    "created_at": "2017-07-11T14:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344866",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>Replying to [comment:7 tscrim]:
> It sounds like you have two branches that have the "equivalent" commits but are based off two different branches. So they are not the *same* commits and git then has to deal with these conflicts. If the one particular commit with the change is what you wanted and are having these troubles, then you might want to cherry-pick the commit in.


No, this is not what my problem came from. And I did cherry-pick. See example below.

> Don't forget to also do `git merge --abort` when you want to stop doing a merge, 


I did.

Just for testing git, I created the following toy example:
- git init in some folder.
- create `my_file`, that contains the alphabet, one lower-case letter in each line. Add that file and commit. That's the starting point.
- create two branches A and B.
- In branch A, change the letter j in my_file to J (upper-case) and commit. Let's call this "commit xyz".
- In branch B, change all vowels to upper-case letters, and commit.

Now I am on branch B, and I want to apply the changeset from xyz. This could be tried by either "git merge A" or by "git cherry-pick xyz"; it turns out that the resulting problem is the same.

Of course the changeset from xyz cannot be applied, as the changeset's context contains one line with the lower-case letter i, but is being applied to a file where there is an upper-case letter I. So, of course, there is a conflict.

Therefore, after "git merge" resp. "git cherry-pick", we do "git mergetool". Result: meld opens with three versions of my_file. The left column is from branch B (vowels are upper-case, j is lower case). The middle column, which will eventually contain the result of the merge, is the common ancestor of A and B (*all* letters are lower-case). The right column is from branch A (only J is upper-case, the rest is lower-case).

Consequently, in order to merge, I need to *manually* change all vowels in the middle column to upper-case, and also change j to upper-case. In other words, I need to manually apply all changes.

And I really wonder why git makes me do 6 changes (5 vowels plus j), when 4 of these changes (namely the vowels a,e,o,u) are outside of the changeset.

To me, it seems obvious that in the middle column we should start with B (perhaps even after applying the hunks from the changeset that cleanly apply), because that's what we want to apply the changeset to. And then, we can solve the problem by focusing on the changeset: Change i into I and j into J. Done.

So, what is git's rationale for not doing the obvious? How to do better?



---

archive/issue_comments_344867.json:
```json
{
    "body": "<a id='comment:9'></a>This is not git but the mergetool (which one are you using?). If you look at the actual file manually, you should see\n\n```\n<<<<<<< HEAD\nI\nj\n=======\ni\nJ\n>>>>>>> A\n```\n(where `A` was the branch I was merging in) indicating that this was the only conflict git noticed. You can manually resolve the conflict, then run `git add file` and `git commit` to indicate you have resolved the merge.\n\nNow my default mergetool `meld` does display the entire diff between the two files. However, it has an option to merge all non-confliciting changes, and I have to resolve manually the actual conflicts. It took me a little while to learn my mergetool, but now I am pretty good at it. However, git does do the conflict as you are expecting it to.",
    "created_at": "2017-07-11T14:47:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344867",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>This is not git but the mergetool (which one are you using?). If you look at the actual file manually, you should see

```
<<<<<<< HEAD
I
j
=======
i
J
>>>>>>> A
```
(where `A` was the branch I was merging in) indicating that this was the only conflict git noticed. You can manually resolve the conflict, then run `git add file` and `git commit` to indicate you have resolved the merge.

Now my default mergetool `meld` does display the entire diff between the two files. However, it has an option to merge all non-confliciting changes, and I have to resolve manually the actual conflicts. It took me a little while to learn my mergetool, but now I am pretty good at it. However, git does do the conflict as you are expecting it to.



---

archive/issue_comments_344868.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 tscrim]:\n> This is not git but the mergetool (which one are you using?). If you look at the actual file manually, you should see\n> \n> ```\n> <<<<<<< HEAD\n> I\n> j\n> =======\n> i\n> J\n> >>>>>>> A\n> ```\n\n\nI see. For me, it is\n\n```\nh\n<<<<<<< HEAD\nI\nj\ni\nj\n=======\ni\nJ\n>>>>>>> A\nk\n```\nbecause I have this in my .gitconfig:\n||||||| merged common ancestors\n```\n[merge]\n        tool = meld\n        log = true\n        conflictstyle = diff3\n```\nWhen I remove the conflictstyle option, I get the same as you. \n\n> Now my default mergetool `meld` does display the entire diff between the two files. However, it has an option to merge all non-confliciting changes, and I have to resolve manually the actual conflicts. It took me a little while to learn my mergetool, but now I am pretty good at it. However, git does do the conflict as you are expecting it to.\n\n\nPart of the problem may be this: I tried to replace meld with kdiff3. However, if I have this in .gitconfig\n\n```\n[merge]\n        tool = kdiff3\n        log = true\n```\nand do \"git mergetool\", then simply kdiff3 doesn't open. Do you know why?",
    "created_at": "2017-07-11T14:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344868",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:10'></a>Replying to [comment:9 tscrim]:
> This is not git but the mergetool (which one are you using?). If you look at the actual file manually, you should see
> 
> ```
> <<<<<<< HEAD
> I
> j
> =======
> i
> J
> >>>>>>> A
> ```


I see. For me, it is

```
h
<<<<<<< HEAD
I
j
i
j
=======
i
J
>>>>>>> A
k
```
because I have this in my .gitconfig:
||||||| merged common ancestors
```
[merge]
        tool = meld
        log = true
        conflictstyle = diff3
```
When I remove the conflictstyle option, I get the same as you. 

> Now my default mergetool `meld` does display the entire diff between the two files. However, it has an option to merge all non-confliciting changes, and I have to resolve manually the actual conflicts. It took me a little while to learn my mergetool, but now I am pretty good at it. However, git does do the conflict as you are expecting it to.


Part of the problem may be this: I tried to replace meld with kdiff3. However, if I have this in .gitconfig

```
[merge]
        tool = kdiff3
        log = true
```
and do "git mergetool", then simply kdiff3 doesn't open. Do you know why?



---

archive/issue_comments_344869.json:
```json
{
    "body": "<a id='comment:11'></a>Aha! I found why kdiff3 didn't open: It silently did the job! See [here](https://stackoverflow.com/questions/15321472/how-could-i-force-mergetool-gui-kdiff3-to-be-always-shown/15813064#15813064)\n\nSo, with the other configuration, \"git mergetool\" triggered kdiff3 to resolve the conflict automatically and save the result. So, I didn't need any manual intervention at all!\n\nI will change to kdiff3, then...",
    "created_at": "2017-07-11T15:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344869",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:11'></a>Aha! I found why kdiff3 didn't open: It silently did the job! See [here](https://stackoverflow.com/questions/15321472/how-could-i-force-mergetool-gui-kdiff3-to-be-always-shown/15813064#15813064)

So, with the other configuration, "git mergetool" triggered kdiff3 to resolve the conflict automatically and save the result. So, I didn't need any manual intervention at all!

I will change to kdiff3, then...



---

archive/issue_comments_344870.json:
```json
{
    "body": "<a id='comment:12'></a>Argh.\n\nAfter kdiff3's successful automatic merge, I did \"git commit\". To be on the safe side, I wanted to repeat the test. So, I did \"git reset --hard HEAD~\".\n\nThen, the following happened when retrying:\n\n```\n$ git merge A\nAuto-merging my_file\nCONFLICT (content): Merge conflict in my_file\nResolved 'my_file' using previous resolution.\nAutomatic merge failed; fix conflicts and then commit the result.\n```\nThese are conflicting messages: It says the it resolved the problem using previous resolution, but also stated that the automatic merge failed.\n\nTherefore, I had a look at my_file, which looked fine: The conflict was correctly resolved. However, \"git log\" showed that the commit from A has in fact not been merged.\n\nTherefore, I tried \"git commit\". Result:\n\n```\n$ git commit \nU\tmy_file\nerror: commit is not possible because you have unmerged files.\nhint: Fix them up in the work tree, and then use 'git add/rm <file>'\nhint: as appropriate to mark resolution and make a commit.\nfatal: Exiting because of an unresolved conflict.\n```\n\nSince there seem to be unresolved conflicts, I did\n\n```\n$ git mergetool \nNo files need merging\n```\nWTF? There are unresolved conflicts, thus, I cannot commit, but no files need merging? Let's see the status:\n\n```\nOn branch B\nYou have unmerged paths.\n  (fix conflicts and run \"git commit\")\n\nUnmerged paths:\n  (use \"git add <file>...\" to mark resolution)\n\n\tboth modified:   my_file\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\n\tmy_file.orig\n```\nHm. Very very strange (to me, at least). Can you explain what is happening here?",
    "created_at": "2017-07-11T15:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344870",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:12'></a>Argh.

After kdiff3's successful automatic merge, I did "git commit". To be on the safe side, I wanted to repeat the test. So, I did "git reset --hard HEAD~".

Then, the following happened when retrying:

```
$ git merge A
Auto-merging my_file
CONFLICT (content): Merge conflict in my_file
Resolved 'my_file' using previous resolution.
Automatic merge failed; fix conflicts and then commit the result.
```
These are conflicting messages: It says the it resolved the problem using previous resolution, but also stated that the automatic merge failed.

Therefore, I had a look at my_file, which looked fine: The conflict was correctly resolved. However, "git log" showed that the commit from A has in fact not been merged.

Therefore, I tried "git commit". Result:

```
$ git commit 
U	my_file
error: commit is not possible because you have unmerged files.
hint: Fix them up in the work tree, and then use 'git add/rm <file>'
hint: as appropriate to mark resolution and make a commit.
fatal: Exiting because of an unresolved conflict.
```

Since there seem to be unresolved conflicts, I did

```
$ git mergetool 
No files need merging
```
WTF? There are unresolved conflicts, thus, I cannot commit, but no files need merging? Let's see the status:

```
On branch B
You have unmerged paths.
  (fix conflicts and run "git commit")

Unmerged paths:
  (use "git add <file>..." to mark resolution)

	both modified:   my_file

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	my_file.orig
```
Hm. Very very strange (to me, at least). Can you explain what is happening here?



---

archive/issue_comments_344871.json:
```json
{
    "body": "<a id='comment:13'></a>I think what had happened is `kdiff3` did not run `git add file`, which indicates to git that you have resolved the conflict, before you did your `git commit`. So I think that is how you ended up in this state. Try running\n\n```\n$ git add my_file\n$ git commit\n```",
    "created_at": "2017-07-11T15:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344871",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>I think what had happened is `kdiff3` did not run `git add file`, which indicates to git that you have resolved the conflict, before you did your `git commit`. So I think that is how you ended up in this state. Try running

```
$ git add my_file
$ git commit
```



---

archive/issue_comments_344872.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 tscrim]:\n> I think what had happened is `kdiff3` did not run `git add file`, which indicates to git that you have resolved the conflict, before you did your `git commit`. So I think that is how you ended up in this state. Try running\n> \n> ```\n> $ git add my_file\n> $ git commit\n> ```\n\n\nThank you! Yes, that did the trick.\n\nOK. In future I will use kdiff3 instead of meld. Would you recommend to add \"conflictstyle = diff3\" to my .gitconfig, or better not use it?",
    "created_at": "2017-07-11T15:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344872",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:14'></a>Replying to [comment:13 tscrim]:
> I think what had happened is `kdiff3` did not run `git add file`, which indicates to git that you have resolved the conflict, before you did your `git commit`. So I think that is how you ended up in this state. Try running
> 
> ```
> $ git add my_file
> $ git commit
> ```


Thank you! Yes, that did the trick.

OK. In future I will use kdiff3 instead of meld. Would you recommend to add "conflictstyle = diff3" to my .gitconfig, or better not use it?



---

archive/issue_comments_344873.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 SimonKing]:\n> Replying to [comment:13 tscrim]:\n> > I think what had happened is `kdiff3` did not run `git add file`, which indicates to git that you have resolved the conflict, before you did your `git commit`. So I think that is how you ended up in this state. Try running\n> > \n> > ```\n> > $ git add my_file\n> > $ git commit\n> > ```\n\n> \n> Thank you! Yes, that did the trick.\n\n\nNo problem.\n\n> OK. In future I will use kdiff3 instead of meld. Would you recommend to add \"conflictstyle = diff3\" to my .gitconfig, or better not use it?\n\n\nI don't use it for my workflow, but I would say it depends on what works best for you.",
    "created_at": "2017-07-11T15:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344873",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>Replying to [comment:14 SimonKing]:
> Replying to [comment:13 tscrim]:
> > I think what had happened is `kdiff3` did not run `git add file`, which indicates to git that you have resolved the conflict, before you did your `git commit`. So I think that is how you ended up in this state. Try running
> > 
> > ```
> > $ git add my_file
> > $ git commit
> > ```

> 
> Thank you! Yes, that did the trick.


No problem.

> OK. In future I will use kdiff3 instead of meld. Would you recommend to add "conflictstyle = diff3" to my .gitconfig, or better not use it?


I don't use it for my workflow, but I would say it depends on what works best for you.



---

archive/issue_comments_344874.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-07-12T16:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344874",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_344875.json:
```json
{
    "body": "<a id='comment:17'></a>I believe #23411, #23352 and #21437 should be stable now (although they still need a review), since the touched code should be clean. Thus, I am rebasing this ticket on top of the aforementioned (unless someone tells me to wait). Furthermore, I think #23399 (with further additions to meataxe) should be based on clean code, i.e., should be based on this ticket.",
    "created_at": "2017-07-15T11:15:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344875",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:17'></a>I believe #23411, #23352 and #21437 should be stable now (although they still need a review), since the touched code should be clean. Thus, I am rebasing this ticket on top of the aforementioned (unless someone tells me to wait). Furthermore, I think #23399 (with further additions to meataxe) should be based on clean code, i.e., should be based on this ticket.



---

archive/issue_comments_344876.json:
```json
{
    "body": "<a id='comment:18'></a>Oops, #23411 needs work. Anyway, this ticket should be based on the others...",
    "created_at": "2017-07-15T11:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344876",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:18'></a>Oops, #23411 needs work. Anyway, this ticket should be based on the others...



---

archive/issue_comments_344877.json:
```json
{
    "body": "<a id='comment:20'></a>Since #21437 depends on #23410, #23411 and #23352 anyway, I'm shortening the list of dependencies here. And then I'll resume work, as I believe that the dependencies should be more or less stable now.",
    "created_at": "2017-07-16T12:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344877",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:20'></a>Since #21437 depends on #23410, #23411 and #23352 anyway, I'm shortening the list of dependencies here. And then I'll resume work, as I believe that the dependencies should be more or less stable now.



---

archive/issue_comments_344878.json:
```json
{
    "body": "<a id='comment:22'></a>I don't know the policy about dependencies. #23411 is a dependency of #21437 and merges cleanly into #21437; however, the branch from #21437 doesn't contain all of #23411. Should it?\n\nIn any case, I believe the branch here *should* contain #23411. So, I'll start on top of #21437 with #23411 merged.",
    "created_at": "2017-07-16T13:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344878",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:22'></a>I don't know the policy about dependencies. #23411 is a dependency of #21437 and merges cleanly into #21437; however, the branch from #21437 doesn't contain all of #23411. Should it?

In any case, I believe the branch here *should* contain #23411. So, I'll start on top of #21437 with #23411 merged.



---

archive/issue_comments_344879.json:
```json
{
    "body": "<a id='comment:23'></a>IMO, it is easier for the reviewer to have all of the dependencies merged in. Although it does make it harder for looking at the diff. We do not have any concrete policy on the IIRC.",
    "created_at": "2017-07-16T13:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344879",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>IMO, it is easier for the reviewer to have all of the dependencies merged in. Although it does make it harder for looking at the diff. We do not have any concrete policy on the IIRC.



---

archive/issue_comments_344880.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2017-07-16T13:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_344881.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-07-16T14:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344881",
    "user": "https://github.com/simon-king-jena"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_344882.json:
```json
{
    "body": "<a id='comment:25'></a>The refactoring of meataxe tickets is now almost accomplished: Only #23399 (for the addition of new functionality) is left.",
    "created_at": "2017-07-16T14:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344882",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:25'></a>The refactoring of meataxe tickets is now almost accomplished: Only #23399 (for the addition of new functionality) is left.



---

archive/issue_comments_344883.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:23 tscrim]:\n> IMO, it is easier for the reviewer to have all of the dependencies merged in. Although it does make it harder for looking at the diff. We do not have any concrete policy on the IIRC.\n\n\nThank you. Here, I got a merge conflict (with #23352, not with #23411), and thus an explicit merge commit was needed anyway.",
    "created_at": "2017-07-16T14:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344883",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:26'></a>Replying to [comment:23 tscrim]:
> IMO, it is easier for the reviewer to have all of the dependencies merged in. Although it does make it harder for looking at the diff. We do not have any concrete policy on the IIRC.


Thank you. Here, I got a merge conflict (with #23352, not with #23411), and thus an explicit merge commit was needed anyway.



---

archive/issue_comments_344884.json:
```json
{
    "body": "<a id='comment:27'></a>LGTM. I did a trivial rebase, so I'm allowing myself to set a positive review.\n  \n---\nNew commits:",
    "created_at": "2017-10-26T04:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344884",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:27'></a>LGTM. I did a trivial rebase, so I'm allowing myself to set a positive review.
  
---
New commits:



---

archive/issue_events_060156.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-10-26T04:11:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23400#event-60156"
}
```



---

archive/issue_comments_344885.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-26T04:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344885",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_344886.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-29T10:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23400#issuecomment-344886",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060157.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-29T10:32:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23400",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23400#event-60157"
}
```
