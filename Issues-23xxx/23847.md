# Issue 23847: make the experimental FriCAS package optional

archive/issues_023610.json:
```json
{
    "assignees": [],
    "body": "FriCAS is a CAS that provides some functionality which is otherwise either missing (e.g., guessing formulas), or not as complete as might be desirable (e.g., symbolic integration).\n\nThe FriCAS interface was completely rewritten after FriCAS was demoted to experimental in #18563 and is now quite mature, containing lots of doctests.\n\nDepends on #21377\nDepends on #22525\nDepends on #23782\n\nCC:  @fchapoton @EmmanuelCharpentier @embray\n\nKeywords: **FriCAS**\n\nBranch/Commit: **[`f48e8c5`](https://github.com/sagemath/sagetrac-mirror/commit/f48e8c5a94d1df496a17189a5b77e513ab053d2d)**\n\nReviewer: **Emmanuel Charpentier, Jeroen Demeyer, Dima Pasechnik, Erik Bray**\n\nAuthor: **Martin Rubey**\n\nComponent: **packages: optional**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23847_\n\n",
    "closed_at": "2017-10-21T19:01:47Z",
    "created_at": "2017-09-13T14:31:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "make the experimental FriCAS package optional",
    "type": "issue",
    "updated_at": "2017-10-21T19:01:47Z",
    "url": "https://github.com/sagemath/sage/issues/23847",
    "user": "https://github.com/mantepse"
}
```
FriCAS is a CAS that provides some functionality which is otherwise either missing (e.g., guessing formulas), or not as complete as might be desirable (e.g., symbolic integration).

The FriCAS interface was completely rewritten after FriCAS was demoted to experimental in #18563 and is now quite mature, containing lots of doctests.

Depends on #21377
Depends on #22525
Depends on #23782

CC:  @fchapoton @EmmanuelCharpentier @embray

Keywords: **FriCAS**

Branch/Commit: **[`f48e8c5`](https://github.com/sagemath/sagetrac-mirror/commit/f48e8c5a94d1df496a17189a5b77e513ab053d2d)**

Reviewer: **Emmanuel Charpentier, Jeroen Demeyer, Dima Pasechnik, Erik Bray**

Author: **Martin Rubey**

Component: **packages: optional**

_Issue created by migration from https://trac.sagemath.org/ticket/23847_





---

archive/issue_events_331264.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-13T14:31:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331264"
}
```



---

archive/issue_events_331265.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-13T14:31:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331265"
}
```



---

archive/issue_events_331266.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-13T14:31:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331266"
}
```



---

archive/issue_events_331267.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-13T14:31:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331267"
}
```



---

archive/issue_comments_359821.json:
```json
{
    "body": "Changed keywords from none to **FriCAS**",
    "created_at": "2017-09-15T11:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359821",
    "user": "https://github.com/mantepse"
}
```

Changed keywords from none to **FriCAS**



---

archive/issue_events_331268.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-09-27T05:09:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331268"
}
```



---

archive/issue_comments_359822.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@mantepse](#comment:2):\n\nWhat kind of review do you think is suitable for this ? I have had fricas installed for about 2 years, with no specific problems.\n\nSince, AFAICT, #21377 and #22525 are already merged in 8.1.beta6, the only test I could do would be to test #23782 and `ptestlong`.\n\nMaybe we should grasp the opportunity to document this interface a bit better, and possibly doctest some opportunities made available by fricas ?\n\nIn [your post](https://groups.google.com/d/msg/sage-devel/cHkVjFt1pIY/3DhGTFRMAwAJ), you quoted \"guessing formulas\", lazy powerseries, as well as enhancements to symbolic integration and differential equations solving. Documenting those examples, either in the relevant \"main\" documentation or in a specific page) and doctesting them would be useful.\n\nWhat do you think ?",
    "created_at": "2017-09-27T07:06:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359822",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@mantepse](#comment:2):

What kind of review do you think is suitable for this ? I have had fricas installed for about 2 years, with no specific problems.

Since, AFAICT, #21377 and #22525 are already merged in 8.1.beta6, the only test I could do would be to test #23782 and `ptestlong`.

Maybe we should grasp the opportunity to document this interface a bit better, and possibly doctest some opportunities made available by fricas ?

In [your post](https://groups.google.com/d/msg/sage-devel/cHkVjFt1pIY/3DhGTFRMAwAJ), you quoted "guessing formulas", lazy powerseries, as well as enhancements to symbolic integration and differential equations solving. Documenting those examples, either in the relevant "main" documentation or in a specific page) and doctesting them would be useful.

What do you think ?



---

archive/issue_events_331269.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-09-27T07:07:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331269"
}
```



---

archive/issue_events_331270.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-09-27T07:07:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331270"
}
```



---

archive/issue_comments_359823.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> In [your post](https://groups.google.com/d/msg/sage-devel/cHkVjFt1pIY/3DhGTFRMAwAJ), you quoted \"guessing formulas\", lazy powerseries, as well as enhancements to symbolic integration and differential equations solving. Documenting those examples, either in the relevant \"main\" documentation or in a specific page) and doctesting them would be useful.\n\nThese are actually in the main documentation.  To see it:\n\n```\nsage: import sage.interfaces.fricas\nsage: sage.interfaces.fricas?\n```\n\nI agree that exposing some of the functionality would be good, but I think that's for another ticket.  I wouldn't do it for an experimental package.",
    "created_at": "2017-09-27T07:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359823",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:5" align="right">comment:5</div>

> In [your post](https://groups.google.com/d/msg/sage-devel/cHkVjFt1pIY/3DhGTFRMAwAJ), you quoted "guessing formulas", lazy powerseries, as well as enhancements to symbolic integration and differential equations solving. Documenting those examples, either in the relevant "main" documentation or in a specific page) and doctesting them would be useful.

These are actually in the main documentation.  To see it:

```
sage: import sage.interfaces.fricas
sage: sage.interfaces.fricas?
```

I agree that exposing some of the functionality would be good, but I think that's for another ticket.  I wouldn't do it for an experimental package.



---

archive/issue_comments_359824.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@mantepse](#comment:5):\n\n[ Snip... ]\n\n> I agree that exposing some of the functionality would be good, but I think that's for another ticket.\n\nYou may be right...\n\n> I wouldn't do it for an experimental package.\n\nBut your ticket aims to make it an *optional* package...\n\nAnyway : sage 8.1.beta6+#23782 passes `ptestlong` without any error. What remains to do is changing $SAGE_ROOT/build/pkgs/fricas/type from `experimental` to `optional`, fix the checksums, commit and push. Care to do it ? (I can review it this afternoon...).",
    "created_at": "2017-09-27T09:08:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359824",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@mantepse](#comment:5):

[ Snip... ]

> I agree that exposing some of the functionality would be good, but I think that's for another ticket.

You may be right...

> I wouldn't do it for an experimental package.

But your ticket aims to make it an *optional* package...

Anyway : sage 8.1.beta6+#23782 passes `ptestlong` without any error. What remains to do is changing $SAGE_ROOT/build/pkgs/fricas/type from `experimental` to `optional`, fix the checksums, commit and push. Care to do it ? (I can review it this afternoon...).



---

archive/issue_comments_359825.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n> > I wouldn't do it for an experimental package.\n\n> \n> But your ticket aims to make it an *optional* package...\n\nYes, I *might* do it for an optional package :-)\n\n> What remains to do is changing $SAGE_ROOT/build/pkgs/fricas/type from `experimental` to `optional`, fix the checksums, commit and push. Care to do it ? (I can review it this afternoon...).\n\nwhy would the checksum change?  (fricas was updated in #21377)",
    "created_at": "2017-09-27T11:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359825",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:7" align="right">comment:7</div>

> > I wouldn't do it for an experimental package.

> 
> But your ticket aims to make it an *optional* package...

Yes, I *might* do it for an optional package :-)

> What remains to do is changing $SAGE_ROOT/build/pkgs/fricas/type from `experimental` to `optional`, fix the checksums, commit and push. Care to do it ? (I can review it this afternoon...).

why would the checksum change?  (fricas was updated in #21377)



---

archive/issue_comments_359826.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mantepse](#comment:7):\n> > > I wouldn't do it for an experimental package.\n\n> > \n> > But your ticket aims to make it an *optional* package...\n\n> \n> Yes, I *might* do it for an optional package :-)\n> \n> > What remains to do is changing $SAGE_ROOT/build/pkgs/fricas/type from `experimental` to `optional`, fix the checksums, commit and push. Care to do it ? (I can review it this afternoon...).\n\n> \n> why would the checksum change?  (fricas was updated in #21377)\n\n'Cause, unless I'm mistaken, the $SAGE_ROOT/build/pkgs/fricas/type file is accoundd for in the checksum computation ?",
    "created_at": "2017-09-27T12:37:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359826",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mantepse](#comment:7):
> > > I wouldn't do it for an experimental package.

> > 
> > But your ticket aims to make it an *optional* package...

> 
> Yes, I *might* do it for an optional package :-)
> 
> > What remains to do is changing $SAGE_ROOT/build/pkgs/fricas/type from `experimental` to `optional`, fix the checksums, commit and push. Care to do it ? (I can review it this afternoon...).

> 
> why would the checksum change?  (fricas was updated in #21377)

'Cause, unless I'm mistaken, the $SAGE_ROOT/build/pkgs/fricas/type file is accoundd for in the checksum computation ?



---

archive/issue_comments_359827.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIt would be easier to test this if all dependencies would actually be merged in a beta release.",
    "created_at": "2017-09-27T12:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359827",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

It would be easier to test this if all dependencies would actually be merged in a beta release.



---

archive/issue_comments_359828.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@EmmanuelCharpentier](#comment:8):\n> 'Cause, unless I'm mistaken, the $SAGE_ROOT/build/pkgs/fricas/type file is accoundd for in the checksum computation ?\n\nNo, the checksum is the checksum of the source tarball. It does not depend on anything from Sage.",
    "created_at": "2017-09-27T12:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359828",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@EmmanuelCharpentier](#comment:8):
> 'Cause, unless I'm mistaken, the $SAGE_ROOT/build/pkgs/fricas/type file is accoundd for in the checksum computation ?

No, the checksum is the checksum of the source tarball. It does not depend on anything from Sage.



---

archive/issue_comments_359829.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAbout this ticket itself: the way I see it, the only difference between an optional package and an experimental package is that an optional package is required to work on all supported platforms. \"working\" is defined as building, passing its own testsuite and passing Sage doctests. Regarding the test suite: does FriCAS have one? There is no `spkg-check` file.\n\nIf it works as defined above, then there doesn't even need to be a vote: just make it optional.\n\nI can run some tests on various systems. As I said above, I'd prefer to wait for a beta release where are dependencies have been merged.",
    "created_at": "2017-09-27T13:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359829",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

About this ticket itself: the way I see it, the only difference between an optional package and an experimental package is that an optional package is required to work on all supported platforms. "working" is defined as building, passing its own testsuite and passing Sage doctests. Regarding the test suite: does FriCAS have one? There is no `spkg-check` file.

If it works as defined above, then there doesn't even need to be a vote: just make it optional.

I can run some tests on various systems. As I said above, I'd prefer to wait for a beta release where are dependencies have been merged.



---

archive/issue_comments_359830.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jdemeyer](#comment:11):\n> About this ticket itself: the way I see it, the only difference between an optional package and an experimental package is that an optional package is required to work on all supported platforms. \n> \"working\" is defined as building, passing its own testsuite and passing Sage doctests.\n\nOne of the FriCAS maintainers says (https://groups.google.com/d/msg/fricas-devel/s5WtJx8u-kA/XVJPuUAQBwAJ) that this should be the case.  I have no way of testing it.\n\n> Regarding the test suite: does FriCAS have one? There is no `spkg-check` file.\n\nConcerning this, he answered:\n\n> You can invoke the testsuite by \"cd src/input && make\", although there's no script to collect the results, there's an unofficial one: \n\n> https://raw.githubusercontent.com/oldk1331/fricas/116f64b1fea32b7148421a4efb43117cf3eee819/src/scripts/test.sh \n\nI wonder how useful this testsuite is for sage then.  I also do not know how long it takes to run it.  I just started it.\n \n> If it works as defined above, then there doesn't even need to be a vote: just make it optional.\n> \n> I can run some tests on various systems. As I said above, I'd prefer to wait for a beta release where are dependencies have been merged.\n\nI'll set the type to optional and the ticket to needs-review and you do it whenever you wish, OK?",
    "created_at": "2017-09-27T16:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359830",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jdemeyer](#comment:11):
> About this ticket itself: the way I see it, the only difference between an optional package and an experimental package is that an optional package is required to work on all supported platforms. 
> "working" is defined as building, passing its own testsuite and passing Sage doctests.

One of the FriCAS maintainers says (https://groups.google.com/d/msg/fricas-devel/s5WtJx8u-kA/XVJPuUAQBwAJ) that this should be the case.  I have no way of testing it.

> Regarding the test suite: does FriCAS have one? There is no `spkg-check` file.

Concerning this, he answered:

> You can invoke the testsuite by "cd src/input && make", although there's no script to collect the results, there's an unofficial one: 

> https://raw.githubusercontent.com/oldk1331/fricas/116f64b1fea32b7148421a4efb43117cf3eee819/src/scripts/test.sh 

I wonder how useful this testsuite is for sage then.  I also do not know how long it takes to run it.  I just started it.
 
> If it works as defined above, then there doesn't even need to be a vote: just make it optional.
> 
> I can run some tests on various systems. As I said above, I'd prefer to wait for a beta release where are dependencies have been merged.

I'll set the type to optional and the ticket to needs-review and you do it whenever you wish, OK?



---

archive/issue_comments_359831.json:
```json
{
    "body": "Branch: **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)**",
    "created_at": "2017-09-27T16:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359831",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)**



---

archive/issue_comments_359832.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOn my laptop (Intel(R) Celeron(R) CPU  N2940  @ 1.83GHz) the test suite runs for about half an hour.  For each of the ~ 200 input files it produces an output file.  Essential differences mean new bugs.\n\nI don't think that we want to run this.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca\">f8567eb</a></td><td><code>set type to optional</code></td></tr></table>\n",
    "created_at": "2017-09-27T18:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359832",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:14" align="right">comment:14</div>

On my laptop (Intel(R) Celeron(R) CPU  N2940  @ 1.83GHz) the test suite runs for about half an hour.  For each of the ~ 200 input files it produces an output file.  Essential differences mean new bugs.

I don't think that we want to run this.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca">f8567eb</a></td><td><code>set type to optional</code></td></tr></table>




---

archive/issue_comments_359833.json:
```json
{
    "body": "Commit: **[`f8567eb`](https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca)**",
    "created_at": "2017-09-27T18:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359833",
    "user": "https://github.com/mantepse"
}
```

Commit: **[`f8567eb`](https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca)**



---

archive/issue_comments_359834.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@mantepse](#comment:14):\n> I don't think that we want to run this.\n\nWhy not? I don't understand how you came to this conclusion.",
    "created_at": "2017-09-27T19:27:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359834",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@mantepse](#comment:14):
> I don't think that we want to run this.

Why not? I don't understand how you came to this conclusion.



---

archive/issue_comments_359835.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@jdemeyer](#comment:15):\n> Replying to [@mantepse](#comment:14):\n> > I don't think that we want to run this.\n\n> \n> Why not? I don't understand how you came to this conclusion.\n\nBecause you don't get a result, such as \"tests passed\".  Well, it might make sense to run it and say something like \"output of tests can be found in ...\"\n\nWhat do you think?",
    "created_at": "2017-09-27T19:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359835",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@jdemeyer](#comment:15):
> Replying to [@mantepse](#comment:14):
> > I don't think that we want to run this.

> 
> Why not? I don't understand how you came to this conclusion.

Because you don't get a result, such as "tests passed".  Well, it might make sense to run it and say something like "output of tests can be found in ..."

What do you think?



---

archive/issue_comments_359836.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@mantepse](#comment:16):\n> Because you don't get a result, such as \"tests passed\".\n\nOK, got it.",
    "created_at": "2017-09-27T20:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359836",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@mantepse](#comment:16):
> Because you don't get a result, such as "tests passed".

OK, got it.



---

archive/issue_events_331271.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-10-01T16:01:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331271"
}
```



---

archive/issue_events_331272.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-10-01T16:01:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331272"
}
```



---

archive/issue_comments_359837.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nLGTM : on Debian testing running on core i7 + 16 GB RAM, 8.1-beta7+#23847 passes `ptestlong` with no error whatsoever *(mirabile dictu),* as well as `sage -t --optional fricas,sage src/sage/interfaces/fricas.py`.\n\nAs suggested by Jeroen Demeyer, I think that this should be tested on other \"officially supported Sage platforms\", whatever that means.\n\nAt the very minimum, I suggest Mac OS X (which is full of surprises, nowadays), the Sage appliance used under Windows, and maybe the Cygwin(-64 ?) port made by Erik Bray, if Erik thinks that his port is ready for diffusion (I put him in `Cc`).\n\nStatus remains at `needs_review`, but should be put as `positive_review` when this will have been tested on all \"interesting\" platforms.",
    "created_at": "2017-10-04T09:09:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359837",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:19" align="right">comment:19</div>

LGTM : on Debian testing running on core i7 + 16 GB RAM, 8.1-beta7+#23847 passes `ptestlong` with no error whatsoever *(mirabile dictu),* as well as `sage -t --optional fricas,sage src/sage/interfaces/fricas.py`.

As suggested by Jeroen Demeyer, I think that this should be tested on other "officially supported Sage platforms", whatever that means.

At the very minimum, I suggest Mac OS X (which is full of surprises, nowadays), the Sage appliance used under Windows, and maybe the Cygwin(-64 ?) port made by Erik Bray, if Erik thinks that his port is ready for diffusion (I put him in `Cc`).

Status remains at `needs_review`, but should be put as `positive_review` when this will have been tested on all "interesting" platforms.



---

archive/issue_comments_359838.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAll dependencies have now been merged in 8.1.beta7",
    "created_at": "2017-10-04T11:05:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359838",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

All dependencies have now been merged in 8.1.beta7



---

archive/issue_comments_359839.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jdemeyer](#comment:20):\n> All dependencies have now been merged in 8.1.beta7\n\nIndeed. I waited for this before `ptest`ing it.",
    "created_at": "2017-10-04T13:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359839",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jdemeyer](#comment:20):
> All dependencies have now been merged in 8.1.beta7

Indeed. I waited for this before `ptest`ing it.



---

archive/issue_comments_359840.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton, Jeroen Demeyer**",
    "created_at": "2017-10-04T13:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359840",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Frédéric Chapoton, Jeroen Demeyer**



---

archive/issue_comments_359841.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nOne thing which is very annoying is that the build cannot be interrupted with `CTRL-C`.",
    "created_at": "2017-10-04T13:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359841",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

One thing which is very annoying is that the build cannot be interrupted with `CTRL-C`.



---

archive/issue_comments_359842.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWorks fine on Linux i386 (32-bit).",
    "created_at": "2017-10-05T10:43:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359842",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Works fine on Linux i386 (32-bit).



---

archive/issue_events_331273.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-05T12:14:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331273"
}
```



---

archive/issue_events_331274.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-05T12:14:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331274"
}
```



---

archive/issue_comments_359843.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nOn `Linux sardonis 4.4.0-57-generic #78-Ubuntu SMP Fri Dec 9 23:46:13 UTC 2016 ppc64le ppc64le ppc64le GNU/Linux`:\n\n```\nsage -t --long src/sage/interfaces/fricas.py\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 69, in sage.interfaces.fricas\nFailed example:\n    f^2                                                                   # optional - fricas\nExpected:\n       10     5 5    10\n      y   - 2x y  + x\nGot:  \n    10      5 5    10\n    y   - 2 x y  + x\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 95, in sage.interfaces.fricas\nFailed example:\n    fricas(\"guessADE([partition n for n in 0..40], homogeneous==4)\")      # optional - fricas\nExpected:\n     [\n       [\n           n\n         [x ]f(x):\n              2    3 (iv)          2    2 ,             3  ,,,         2    2 ,,   2\n             x f(x) f    (x) + (20x f(x) f (x) + 5x f(x) )f   (x) - 39x f(x) f  (x)\n    <BLANKLINE>\n           +\n                 2     ,   2           2 ,           3  ,,        2 ,   4\n             (12x f(x)f (x)  - 15x f(x) f (x) + 4f(x) )f  (x) + 6x f (x)\n    <BLANKLINE>\n           +\n                      ,   3         2 ,   2\n             10x f(x)f (x)  - 16f(x) f (x)\n    <BLANKLINE>\n             =\n             0\n         ,\n                        2     3      4\n        f(x)= 1 + x + 2x  + 3x  + O(x )]\n       ]\nGot:\n    [\n      [\n          n\n        [x ]f(x):\n               2    3 (iv)           2    2 ,              3  ,,,\n              x f(x) f    (x) + (20 x f(x) f (x) + 5 x f(x) )f   (x)\n\n            +\n                    2    2 ,,   2\n              - 39 x f(x) f  (x)\n\n            +\n                   2     ,   2            2 ,            3  ,,         2 ,   4\n              (12 x f(x)f (x)  - 15 x f(x) f (x) + 4 f(x) )f  (x) + 6 x f (x)\n\n            +\n                        ,   3          2 ,   2\n              10 x f(x)f (x)  - 16 f(x) f (x)\n\n          =\n            0\n        ,\n                         2      3      4\n       f(x) = 1 + x + 2 x  + 3 x  + O(x )]\n      ]\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 122, in sage.interfaces.fricas\nFailed example:\n    fricas.set(\"sol\", \"solve(deq, y, x)\"); fricas(\"sol\")                  # optional - fricas\nExpected:\n                  5      3      2               3     2      3      3     2\n                 x  - 10x  + 20x  + 4         2x  - 3x  + 1 x  - 1 x  - 3x  - 1\n    [particular= --------------------,basis= [-------------,------,------------]]\n                          15x                       x          x         x\nGot:\n    5       3       2\n                  x  - 10 x  + 20 x  + 4\n    [particular = ----------------------,\n                           15 x\n                 3      2       3       3      2\n              2 x  - 3 x  + 1  x  - 1  x  - 3 x  - 1\n     basis = [---------------, ------, -------------]]\n                     x            x          x\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 157, in sage.interfaces.fricas\nFailed example:\n    2*(1+2*x+sqrt(1-4*x)-2*x*y).recip()                                   # optional - fricas\nExpected:\n                   2      3     2 2     3      4       4       5\n       1 + (x y + x ) + 2x  + (x y  + 2x y + 6x ) + (4x y + 18x )\n     +\n         3 3     4 2      5       6       5 2      6        7\n       (x y  + 3x y  + 13x y + 57x ) + (6x y  + 40x y + 186x )\n     +\n         4 4     5 3      6 2       7        8       6 3      7 2       8         9\n       (x y  + 4x y  + 21x y  + 130x y + 622x ) + (8x y  + 66x y  + 432x y + 2120x )\n     +\n         5 5     6 4      7 3       8 2        9         10\n       (x y  + 5x y  + 30x y  + 220x y  + 1466x y + 7338x  ) + O(11)\nGot:\n    2       3     2 2      3       4        4        5\n      1 + (x y + x ) + 2 x  + (x y  + 2 x y + 6 x ) + (4 x y + 18 x )\n    +\n        3 3      4 2       5        6        5 2       6         7\n      (x y  + 3 x y  + 13 x y + 57 x ) + (6 x y  + 40 x y + 186 x )\n    +\n        4 4      5 3       6 2        7         8\n      (x y  + 4 x y  + 21 x y  + 130 x y + 622 x )\n    +\n          6 3       7 2        8          9\n      (8 x y  + 66 x y  + 432 x y + 2120 x )\n    +\n        5 5      6 4       7 3        8 2         9          10\n      (x y  + 5 x y  + 30 x y  + 220 x y  + 1466 x y + 7338 x  ) + O(11)\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 543, in sage.interfaces.fricas.FriCAS.get\nFailed example:\n    fricas.get(a.name())                                          # optional - fricas\nExpected:\n    '   +-+\\r\\n29\\\\|2  + 41'\nGot:\n    '    +-+\\r\\n29 \\\\|2  + 41'\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 545, in sage.interfaces.fricas.FriCAS.get\nFailed example:\n    fricas.get('(1 + sqrt(2))^5')                                 # optional - fricas\nExpected:\n    '   +-+\\r\\n29\\\\|2  + 41'\nGot:\n    '    +-+\\r\\n29 \\\\|2  + 41'\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 547, in sage.interfaces.fricas.FriCAS.get\nFailed example:\n    fricas.new('(1 + sqrt(2))^5')                                 # optional - fricas\nExpected:\n       +-+\n    29\\|2  + 41\nGot:\n    +-+\n    29 \\|2  + 41\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 629, in sage.interfaces.fricas.FriCAS.get_unparsed_InputForm\nFailed example:\n    fricas.get_unparsed_InputForm('1..3')                         # optional - fricas\nExpected:\n    '1..3$Segment(Integer())'\nGot:\n    '(1..3)$Segment(PositiveInteger())'\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 655, in sage.interfaces.fricas.FriCAS._equality_symbol\nFailed example:\n    a = fricas(x==6); a                                           # optional - fricas, indirect doctest\nExpected:\n    x= 6\nGot:\n    x = 6\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 661, in sage.interfaces.fricas.FriCAS._equality_symbol\nFailed example:\n    a = fricas(x==6); a                                           # optional - fricas\nExpected:\n    2= 6\nGot:\n    2 = 6\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 1147, in sage.interfaces.fricas.FriCASElement._sage_\nFailed example:\n    a = fricas('(1 + sqrt(2))^5'); a                              # optional - fricas\nExpected:\n       +-+\n    29\\|2  + 41\nGot:\n    +-+\n    29 \\|2  + 41\n**********************************************************************\n```",
    "created_at": "2017-10-05T12:14:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359843",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

On `Linux sardonis 4.4.0-57-generic #78-Ubuntu SMP Fri Dec 9 23:46:13 UTC 2016 ppc64le ppc64le ppc64le GNU/Linux`:

```
sage -t --long src/sage/interfaces/fricas.py
**********************************************************************
File "src/sage/interfaces/fricas.py", line 69, in sage.interfaces.fricas
Failed example:
    f^2                                                                   # optional - fricas
Expected:
       10     5 5    10
      y   - 2x y  + x
Got:  
    10      5 5    10
    y   - 2 x y  + x
**********************************************************************
File "src/sage/interfaces/fricas.py", line 95, in sage.interfaces.fricas
Failed example:
    fricas("guessADE([partition n for n in 0..40], homogeneous==4)")      # optional - fricas
Expected:
     [
       [
           n
         [x ]f(x):
              2    3 (iv)          2    2 ,             3  ,,,         2    2 ,,   2
             x f(x) f    (x) + (20x f(x) f (x) + 5x f(x) )f   (x) - 39x f(x) f  (x)
    <BLANKLINE>
           +
                 2     ,   2           2 ,           3  ,,        2 ,   4
             (12x f(x)f (x)  - 15x f(x) f (x) + 4f(x) )f  (x) + 6x f (x)
    <BLANKLINE>
           +
                      ,   3         2 ,   2
             10x f(x)f (x)  - 16f(x) f (x)
    <BLANKLINE>
             =
             0
         ,
                        2     3      4
        f(x)= 1 + x + 2x  + 3x  + O(x )]
       ]
Got:
    [
      [
          n
        [x ]f(x):
               2    3 (iv)           2    2 ,              3  ,,,
              x f(x) f    (x) + (20 x f(x) f (x) + 5 x f(x) )f   (x)

            +
                    2    2 ,,   2
              - 39 x f(x) f  (x)

            +
                   2     ,   2            2 ,            3  ,,         2 ,   4
              (12 x f(x)f (x)  - 15 x f(x) f (x) + 4 f(x) )f  (x) + 6 x f (x)

            +
                        ,   3          2 ,   2
              10 x f(x)f (x)  - 16 f(x) f (x)

          =
            0
        ,
                         2      3      4
       f(x) = 1 + x + 2 x  + 3 x  + O(x )]
      ]
**********************************************************************
File "src/sage/interfaces/fricas.py", line 122, in sage.interfaces.fricas
Failed example:
    fricas.set("sol", "solve(deq, y, x)"); fricas("sol")                  # optional - fricas
Expected:
                  5      3      2               3     2      3      3     2
                 x  - 10x  + 20x  + 4         2x  - 3x  + 1 x  - 1 x  - 3x  - 1
    [particular= --------------------,basis= [-------------,------,------------]]
                          15x                       x          x         x
Got:
    5       3       2
                  x  - 10 x  + 20 x  + 4
    [particular = ----------------------,
                           15 x
                 3      2       3       3      2
              2 x  - 3 x  + 1  x  - 1  x  - 3 x  - 1
     basis = [---------------, ------, -------------]]
                     x            x          x
**********************************************************************
File "src/sage/interfaces/fricas.py", line 157, in sage.interfaces.fricas
Failed example:
    2*(1+2*x+sqrt(1-4*x)-2*x*y).recip()                                   # optional - fricas
Expected:
                   2      3     2 2     3      4       4       5
       1 + (x y + x ) + 2x  + (x y  + 2x y + 6x ) + (4x y + 18x )
     +
         3 3     4 2      5       6       5 2      6        7
       (x y  + 3x y  + 13x y + 57x ) + (6x y  + 40x y + 186x )
     +
         4 4     5 3      6 2       7        8       6 3      7 2       8         9
       (x y  + 4x y  + 21x y  + 130x y + 622x ) + (8x y  + 66x y  + 432x y + 2120x )
     +
         5 5     6 4      7 3       8 2        9         10
       (x y  + 5x y  + 30x y  + 220x y  + 1466x y + 7338x  ) + O(11)
Got:
    2       3     2 2      3       4        4        5
      1 + (x y + x ) + 2 x  + (x y  + 2 x y + 6 x ) + (4 x y + 18 x )
    +
        3 3      4 2       5        6        5 2       6         7
      (x y  + 3 x y  + 13 x y + 57 x ) + (6 x y  + 40 x y + 186 x )
    +
        4 4      5 3       6 2        7         8
      (x y  + 4 x y  + 21 x y  + 130 x y + 622 x )
    +
          6 3       7 2        8          9
      (8 x y  + 66 x y  + 432 x y + 2120 x )
    +
        5 5      6 4       7 3        8 2         9          10
      (x y  + 5 x y  + 30 x y  + 220 x y  + 1466 x y + 7338 x  ) + O(11)
**********************************************************************
File "src/sage/interfaces/fricas.py", line 543, in sage.interfaces.fricas.FriCAS.get
Failed example:
    fricas.get(a.name())                                          # optional - fricas
Expected:
    '   +-+\r\n29\\|2  + 41'
Got:
    '    +-+\r\n29 \\|2  + 41'
**********************************************************************
File "src/sage/interfaces/fricas.py", line 545, in sage.interfaces.fricas.FriCAS.get
Failed example:
    fricas.get('(1 + sqrt(2))^5')                                 # optional - fricas
Expected:
    '   +-+\r\n29\\|2  + 41'
Got:
    '    +-+\r\n29 \\|2  + 41'
**********************************************************************
File "src/sage/interfaces/fricas.py", line 547, in sage.interfaces.fricas.FriCAS.get
Failed example:
    fricas.new('(1 + sqrt(2))^5')                                 # optional - fricas
Expected:
       +-+
    29\|2  + 41
Got:
    +-+
    29 \|2  + 41
**********************************************************************
File "src/sage/interfaces/fricas.py", line 629, in sage.interfaces.fricas.FriCAS.get_unparsed_InputForm
Failed example:
    fricas.get_unparsed_InputForm('1..3')                         # optional - fricas
Expected:
    '1..3$Segment(Integer())'
Got:
    '(1..3)$Segment(PositiveInteger())'
**********************************************************************
File "src/sage/interfaces/fricas.py", line 655, in sage.interfaces.fricas.FriCAS._equality_symbol
Failed example:
    a = fricas(x==6); a                                           # optional - fricas, indirect doctest
Expected:
    x= 6
Got:
    x = 6
**********************************************************************
File "src/sage/interfaces/fricas.py", line 661, in sage.interfaces.fricas.FriCAS._equality_symbol
Failed example:
    a = fricas(x==6); a                                           # optional - fricas
Expected:
    2= 6
Got:
    2 = 6
**********************************************************************
File "src/sage/interfaces/fricas.py", line 1147, in sage.interfaces.fricas.FriCASElement._sage_
Failed example:
    a = fricas('(1 + sqrt(2))^5'); a                              # optional - fricas
Expected:
       +-+
    29\|2  + 41
Got:
    +-+
    29 \|2  + 41
**********************************************************************
```



---

archive/issue_comments_359844.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nSorry, I just realized now that I should rebase to 8.1.beta7",
    "created_at": "2017-10-05T12:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359844",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Sorry, I just realized now that I should rebase to 8.1.beta7



---

archive/issue_comments_359845.json:
```json
{
    "body": "Changed branch from **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)** to **[u/jdemeyer/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/make_the_experimental_fricas_package_optional)**",
    "created_at": "2017-10-05T12:21:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359845",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)** to **[u/jdemeyer/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/make_the_experimental_fricas_package_optional)**



---

archive/issue_comments_359846.json:
```json
{
    "body": "Changed commit from **[`f8567eb`](https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca)** to **[`6409c5b`](https://github.com/sagemath/sagetrac-mirror/commit/6409c5b2cbdfe454899b6ed8bbe1d4b314855533)**",
    "created_at": "2017-10-05T12:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359846",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`f8567eb`](https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca)** to **[`6409c5b`](https://github.com/sagemath/sagetrac-mirror/commit/6409c5b2cbdfe454899b6ed8bbe1d4b314855533)**



---

archive/issue_comments_359847.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nRebased\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6409c5b2cbdfe454899b6ed8bbe1d4b314855533\">6409c5b</a></td><td><code>set type to optional</code></td></tr></table>\n",
    "created_at": "2017-10-05T12:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359847",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Rebased

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6409c5b2cbdfe454899b6ed8bbe1d4b314855533">6409c5b</a></td><td><code>set type to optional</code></td></tr></table>




---

archive/issue_events_331275.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-05T12:21:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331275"
}
```



---

archive/issue_events_331276.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-05T12:21:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331276"
}
```



---

archive/issue_events_331277.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-05T13:07:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331277"
}
```



---

archive/issue_events_331278.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-05T13:07:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331278"
}
```



---

archive/issue_comments_359848.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nDid Fr\u00e9d\u00e9ric do some of the review? It seems to me that it was Emmanuel Charpentier that should be listed as co-reviewer.",
    "created_at": "2017-10-05T15:05:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359848",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:30" align="right">comment:30</div>

Did Frédéric do some of the review? It seems to me that it was Emmanuel Charpentier that should be listed as co-reviewer.



---

archive/issue_comments_359849.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nOf course. I confused the user names \"charpent\" and \"chapoton\".",
    "created_at": "2017-10-05T15:13:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359849",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

Of course. I confused the user names "charpent" and "chapoton".



---

archive/issue_comments_359850.json:
```json
{
    "body": "Changed reviewer from **Fr\u00e9d\u00e9ric Chapoton, Jeroen Demeyer** to **Emmanuel Charpentier, Jeroen Demeyer**",
    "created_at": "2017-10-05T15:13:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359850",
    "user": "https://github.com/jdemeyer"
}
```

Changed reviewer from **Frédéric Chapoton, Jeroen Demeyer** to **Emmanuel Charpentier, Jeroen Demeyer**



---

archive/issue_comments_359851.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI will test now on Cygwin.",
    "created_at": "2017-10-05T16:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359851",
    "user": "https://github.com/embray"
}
```

<div id="comment:32" align="right">comment:32</div>

I will test now on Cygwin.



---

archive/issue_events_331279.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-06T12:02:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331279"
}
```



---

archive/issue_events_331280.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-06T12:02:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331280"
}
```



---

archive/issue_comments_359852.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n\n```\n[fricas-1.3.2] Thread model: posix\n[fricas-1.3.2] gcc version 5.4.0 (GCC)\n[fricas-1.3.2] ****************************************************\n[fricas-1.3.2] checking build system type... x86_64-cygwin\n[fricas-1.3.2] configure: error: invalid value of canonical build\n[fricas-1.3.2] Error configuring fricas.\n[fricas-1.3.2]\n[fricas-1.3.2] real     0m1.548s\n[fricas-1.3.2] user     0m0.347s\n[fricas-1.3.2] sys      0m1.101s\n```\n\nI'll investigate. I have some suspicions...",
    "created_at": "2017-10-06T12:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359852",
    "user": "https://github.com/embray"
}
```

<div id="comment:33" align="right">comment:33</div>


```
[fricas-1.3.2] Thread model: posix
[fricas-1.3.2] gcc version 5.4.0 (GCC)
[fricas-1.3.2] ****************************************************
[fricas-1.3.2] checking build system type... x86_64-cygwin
[fricas-1.3.2] configure: error: invalid value of canonical build
[fricas-1.3.2] Error configuring fricas.
[fricas-1.3.2]
[fricas-1.3.2] real     0m1.548s
[fricas-1.3.2] user     0m0.347s
[fricas-1.3.2] sys      0m1.101s
```

I'll investigate. I have some suspicions...



---

archive/issue_comments_359853.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAs I suspected, the problem is a buggy/outdated `config.guess`.  I'm not sure how we want to go about fixing that.  The simplest way is to just include an up-to-date version and copy it over...",
    "created_at": "2017-10-06T12:11:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359853",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">comment:34</div>

As I suspected, the problem is a buggy/outdated `config.guess`.  I'm not sure how we want to go about fixing that.  The simplest way is to just include an up-to-date version and copy it over...



---

archive/issue_comments_359854.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWeirdly, last time FriCAS [updated their `config.guess`](https://sourceforge.net/p/fricas/code/2251/), the version it was updated to does not correspond exactly with the [upstream `config.guess` from the same date](http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob;f=config.guess;h=1f5c50c0d1529d50b94dc3533ca72a47f0fa5849;hb=47681e2a9b5e8236e38cffe03c85e571782fc080), almost as if it were hand-edited and mistakes were made.",
    "created_at": "2017-10-06T12:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359854",
    "user": "https://github.com/embray"
}
```

<div id="comment:35" align="right">comment:35</div>

Weirdly, last time FriCAS [updated their `config.guess`](https://sourceforge.net/p/fricas/code/2251/), the version it was updated to does not correspond exactly with the [upstream `config.guess` from the same date](http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob;f=config.guess;h=1f5c50c0d1529d50b94dc3533ca72a47f0fa5849;hb=47681e2a9b5e8236e38cffe03c85e571782fc080), almost as if it were hand-edited and mistakes were made.



---

archive/issue_comments_359855.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI forwarded your observation to the FriCAS mailing list...",
    "created_at": "2017-10-06T12:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359855",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:36" align="right">comment:36</div>

I forwarded your observation to the FriCAS mailing list...



---

archive/issue_comments_359856.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nIt's also strange that they updated that file in **2017** to a version from **2014**.",
    "created_at": "2017-10-06T13:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359856",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

It's also strange that they updated that file in **2017** to a version from **2014**.



---

archive/issue_comments_359857.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@embray](#comment:34):\n> The simplest way is to just include an up-to-date version and copy it over...\n\nWe already do that for several packages. See `ccache` (#23710) for one example.",
    "created_at": "2017-10-06T13:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359857",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@embray](#comment:34):
> The simplest way is to just include an up-to-date version and copy it over...

We already do that for several packages. See `ccache` (#23710) for one example.



---

archive/issue_comments_359858.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@embray](#comment:35):\n> almost as if it were hand-edited and mistakes were made.\n\nIt could be that they used a version from a (Linux) distribution, which might ship a patched version. That might also explain the discrepancy in the year, if the latest version shipped by that distro is from 2014.",
    "created_at": "2017-10-06T13:34:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359858",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@embray](#comment:35):
> almost as if it were hand-edited and mistakes were made.

It could be that they used a version from a (Linux) distribution, which might ship a patched version. That might also explain the discrepancy in the year, if the latest version shipped by that distro is from 2014.



---

archive/issue_comments_359859.json:
```json
{
    "body": "Changed commit from **[`6409c5b`](https://github.com/sagemath/sagetrac-mirror/commit/6409c5b2cbdfe454899b6ed8bbe1d4b314855533)** to **[`e765d16`](https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d)**",
    "created_at": "2017-10-06T13:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359859",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6409c5b`](https://github.com/sagemath/sagetrac-mirror/commit/6409c5b2cbdfe454899b6ed8bbe1d4b314855533)** to **[`e765d16`](https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d)**



---

archive/issue_comments_359860.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d\">e765d16</a></td><td><code>Use newer version of config.guess and config.sub</code></td></tr></table>\n",
    "created_at": "2017-10-06T13:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359860",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d">e765d16</a></td><td><code>Use newer version of config.guess and config.sub</code></td></tr></table>




---

archive/issue_events_331281.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-06T13:50:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331281"
}
```



---

archive/issue_events_331282.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-10-06T13:50:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331282"
}
```



---

archive/issue_events_331283.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-06T14:12:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331283"
}
```



---

archive/issue_events_331284.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-10-06T14:12:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331284"
}
```



---

archive/issue_comments_359861.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\n\n```\nsage -t --long src/sage/interfaces/fricas.py\n**********************************************************************\nFile \"src/sage/interfaces/fricas.py\", line 313, in sage.interfaces.fricas.FriCAS._quit_string\nFailed example:\n    pr.children()                                                 # optional - fricas\nExpected:\n    [<psutil.Process(pid=..., name='AXIOMsys') at ...>,\n     <psutil.Process(pid=..., name='session') at ...>,\n     <psutil.Process(pid=..., name='spadclient') at ...>,\n     <psutil.Process(pid=..., name='sman') at ...>]\nGot:\n    [<psutil.Process(pid=9800, name='session') at 7660406796560>,\n     <psutil.Process(pid=19536, name='spadclient') at 7660406797648>,\n     <psutil.Process(pid=21068, name='AXIOMsys') at 7660406797712>,\n     <psutil.Process(pid=21532, name='sman') at 7660406797776>]\n```\n\nIt seems psutil is sorting the processes by pid, so there's no way to guarantee what order they're in.  I don't know what this test is for or if it's important but if it really is then it should sort these processes by name.",
    "created_at": "2017-10-06T14:12:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359861",
    "user": "https://github.com/embray"
}
```

<div id="comment:42" align="right">comment:42</div>


```
sage -t --long src/sage/interfaces/fricas.py
**********************************************************************
File "src/sage/interfaces/fricas.py", line 313, in sage.interfaces.fricas.FriCAS._quit_string
Failed example:
    pr.children()                                                 # optional - fricas
Expected:
    [<psutil.Process(pid=..., name='AXIOMsys') at ...>,
     <psutil.Process(pid=..., name='session') at ...>,
     <psutil.Process(pid=..., name='spadclient') at ...>,
     <psutil.Process(pid=..., name='sman') at ...>]
Got:
    [<psutil.Process(pid=9800, name='session') at 7660406796560>,
     <psutil.Process(pid=19536, name='spadclient') at 7660406797648>,
     <psutil.Process(pid=21068, name='AXIOMsys') at 7660406797712>,
     <psutil.Process(pid=21532, name='sman') at 7660406797776>]
```

It seems psutil is sorting the processes by pid, so there's no way to guarantee what order they're in.  I don't know what this test is for or if it's important but if it really is then it should sort these processes by name.



---

archive/issue_comments_359862.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\n(Build works for me now; thanks)",
    "created_at": "2017-10-06T14:12:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359862",
    "user": "https://github.com/embray"
}
```

<div id="comment:43" align="right">comment:43</div>

(Build works for me now; thanks)



---

archive/issue_comments_359863.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThis test is part of an effort to make sure that FriCAS is really shut down when quitting.  This is actually an unsolved problem, it doesn't work reliably.  Taking into account your observation, the following would make it pass:\n\n```\n            sage: import psutil                                                 # optional - fricas\n            sage: p = fricas.pid(); pr = psutil.Process(p); pr                  # optional - fricas\n            <psutil.Process(pid=..., name='sman') at ...>\n            sage: sorted(pr.children(), key = lambda c: c.name())               # optional - fricas\n            [<psutil.Process(pid=..., name='AXIOMsys') at ...>,\n             <psutil.Process(pid=..., name='session') at ...>,\n             <psutil.Process(pid=..., name='spadclient') at ...>,\n             <psutil.Process(pid=..., name='sman') at ...>]\n            sage: fricas.quit()                                                 # optional - fricas\n            sage: pr.is_running()                                               # optional - fricas, random\n            False\n```\nHowever, note that tag `random` in the last line - it turns out that frequently, FriCAS doesn't really stop - only the child processes are gone.  Actually, we could append\n\n```\n            sage: pr.children() if pr.is_running() # optional - fricas\n            []\n```\nas final test.",
    "created_at": "2017-10-06T14:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359863",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:44" align="right">comment:44</div>

This test is part of an effort to make sure that FriCAS is really shut down when quitting.  This is actually an unsolved problem, it doesn't work reliably.  Taking into account your observation, the following would make it pass:

```
            sage: import psutil                                                 # optional - fricas
            sage: p = fricas.pid(); pr = psutil.Process(p); pr                  # optional - fricas
            <psutil.Process(pid=..., name='sman') at ...>
            sage: sorted(pr.children(), key = lambda c: c.name())               # optional - fricas
            [<psutil.Process(pid=..., name='AXIOMsys') at ...>,
             <psutil.Process(pid=..., name='session') at ...>,
             <psutil.Process(pid=..., name='spadclient') at ...>,
             <psutil.Process(pid=..., name='sman') at ...>]
            sage: fricas.quit()                                                 # optional - fricas
            sage: pr.is_running()                                               # optional - fricas, random
            False
```
However, note that tag `random` in the last line - it turns out that frequently, FriCAS doesn't really stop - only the child processes are gone.  Actually, we could append

```
            sage: pr.children() if pr.is_running() # optional - fricas
            []
```
as final test.



---

archive/issue_comments_359864.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nAs it turns out, also that test fails.  When doctesting, after `fricas.quit()` only some processes are gone immediately.",
    "created_at": "2017-10-06T16:02:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359864",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:45" align="right">comment:45</div>

As it turns out, also that test fails.  When doctesting, after `fricas.quit()` only some processes are gone immediately.



---

archive/issue_comments_359865.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@mantepse](#comment:36):\n> I forwarded your observation to the FriCAS mailing list...\n\nIf you have a link to that post, it would be good to put it on this ticket.",
    "created_at": "2017-10-07T08:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359865",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@mantepse](#comment:36):
> I forwarded your observation to the FriCAS mailing list...

If you have a link to that post, it would be good to put it on this ticket.



---

archive/issue_comments_359866.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI notified upstream, maybe we should remind them before they make the next release:\n\nhttps://groups.google.com/d/msg/fricas-devel/cmhTjr8IxPU/tY_Idyf2AQAJ\n\nI am currently recompiling sage, to try the suggestion to start fricas with `-nosman`.",
    "created_at": "2017-10-07T08:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359866",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:47" align="right">comment:47</div>

I notified upstream, maybe we should remind them before they make the next release:

https://groups.google.com/d/msg/fricas-devel/cmhTjr8IxPU/tY_Idyf2AQAJ

I am currently recompiling sage, to try the suggestion to start fricas with `-nosman`.



---

archive/issue_comments_359867.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nFor some reason, using `-nosman` doesn't work.  I can start fricas on the command line with `fricas -nosman`, and in sage manually, but for some reason it breaks the interface :-(",
    "created_at": "2017-10-07T09:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359867",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:48" align="right">comment:48</div>

For some reason, using `-nosman` doesn't work.  I can start fricas on the command line with `fricas -nosman`, and in sage manually, but for some reason it breaks the interface :-(



---

archive/issue_comments_359868.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nThe issue is a difference in newlines: on linux, with `fricas -nosman`, I have\n\n```\nsage: fricas.eval(\"1+1\", reformat=False)\n'\\n|startAlgebraOutput|\\n   2\\n|endOfAlgebraOutput|'\n```\nwhereas with `fricas -nox -noclef`, I have\n\n```\nsage: fricas.eval(\"1+1\", reformat=False)\n'\\r\\n|startAlgebraOutput|\\r\\n   2\\r\\n|endOfAlgebraOutput|\\r'\n```\nI'm not sure what the right fix is.  I think I'll replace `\\r\\n` throughout with `\\n`.",
    "created_at": "2017-10-07T12:08:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359868",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:49" align="right">comment:49</div>

The issue is a difference in newlines: on linux, with `fricas -nosman`, I have

```
sage: fricas.eval("1+1", reformat=False)
'\n|startAlgebraOutput|\n   2\n|endOfAlgebraOutput|'
```
whereas with `fricas -nox -noclef`, I have

```
sage: fricas.eval("1+1", reformat=False)
'\r\n|startAlgebraOutput|\r\n   2\r\n|endOfAlgebraOutput|\r'
```
I'm not sure what the right fix is.  I think I'll replace `\r\n` throughout with `\n`.



---

archive/issue_comments_359869.json:
```json
{
    "body": "Changed commit from **[`e765d16`](https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d)** to **[`f8567eb`](https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca)**",
    "created_at": "2017-10-07T13:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359869",
    "user": "https://github.com/mantepse"
}
```

Changed commit from **[`e765d16`](https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d)** to **[`f8567eb`](https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca)**



---

archive/issue_comments_359870.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/make_the_experimental_fricas_package_optional)** to **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)**",
    "created_at": "2017-10-07T13:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359870",
    "user": "https://github.com/mantepse"
}
```

Changed branch from **[u/jdemeyer/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/make_the_experimental_fricas_package_optional)** to **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)**



---

archive/issue_comments_359871.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca\">f8567eb</a></td><td><code>set type to optional</code></td></tr></table>\n",
    "created_at": "2017-10-07T13:10:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359871",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:50"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca">f8567eb</a></td><td><code>set type to optional</code></td></tr></table>




---

archive/issue_comments_359872.json:
```json
{
    "body": "Changed branch from **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)** to none",
    "created_at": "2017-10-07T13:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359872",
    "user": "https://github.com/mantepse"
}
```

Changed branch from **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)** to none



---

archive/issue_comments_359873.json:
```json
{
    "body": "Changed commit from **[`f8567eb`](https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca)** to none",
    "created_at": "2017-10-07T13:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359873",
    "user": "https://github.com/mantepse"
}
```

Changed commit from **[`f8567eb`](https://github.com/sagemath/sagetrac-mirror/commit/f8567ebfe1a7f690e069dff95f4ebcacc6b90aca)** to none



---

archive/issue_comments_359874.json:
```json
{
    "body": "Branch: **[u/jdemeyer/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/make_the_experimental_fricas_package_optional)**",
    "created_at": "2017-10-07T13:13:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359874",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/jdemeyer/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/make_the_experimental_fricas_package_optional)**



---

archive/issue_comments_359875.json:
```json
{
    "body": "Commit: **[`e765d16`](https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d)**",
    "created_at": "2017-10-07T13:13:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359875",
    "user": "https://github.com/mantepse"
}
```

Commit: **[`e765d16`](https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d)**



---

archive/issue_comments_359876.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nApparently, I cannot push anymore.  Well, it's working now, I'll try to attach a patch.",
    "created_at": "2017-10-07T13:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359876",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:53" align="right">comment:53</div>

Apparently, I cannot push anymore.  Well, it's working now, I'll try to attach a patch.



---

archive/issue_comments_359877.json:
```json
{
    "body": "Changed commit from **[`e765d16`](https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d)** to **[`f48e8c5`](https://github.com/sagemath/sagetrac-mirror/commit/f48e8c5a94d1df496a17189a5b77e513ab053d2d)**",
    "created_at": "2017-10-07T18:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359877",
    "user": "https://github.com/mantepse"
}
```

Changed commit from **[`e765d16`](https://github.com/sagemath/sagetrac-mirror/commit/e765d16e3a13600a0dcb28f109c4bb3d046fed4d)** to **[`f48e8c5`](https://github.com/sagemath/sagetrac-mirror/commit/f48e8c5a94d1df496a17189a5b77e513ab053d2d)**



---

archive/issue_comments_359878.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/make_the_experimental_fricas_package_optional)** to **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)**",
    "created_at": "2017-10-07T18:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359878",
    "user": "https://github.com/mantepse"
}
```

Changed branch from **[u/jdemeyer/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/make_the_experimental_fricas_package_optional)** to **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)**



---

archive/issue_events_331285.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-10-07T18:56:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331285"
}
```



---

archive/issue_events_331286.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-10-07T18:56:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331286"
}
```



---

archive/issue_comments_359879.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nshould work now! please test on cygwin and MacOS X - I modified the handling of newlines!",
    "created_at": "2017-10-07T18:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359879",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:55" align="right">comment:55</div>

should work now! please test on cygwin and MacOS X - I modified the handling of newlines!



---

archive/issue_comments_359880.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\ntested on FreeBSD 11 with clang (thus pretty close to OSX) (cf #22679), all tests in `src/sage/interfaces/fricas.py` pass.",
    "created_at": "2017-10-08T10:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359880",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">comment:56</div>

tested on FreeBSD 11 with clang (thus pretty close to OSX) (cf #22679), all tests in `src/sage/interfaces/fricas.py` pass.



---

archive/issue_comments_359881.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nping?",
    "created_at": "2017-10-16T05:09:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359881",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:57" align="right">comment:57</div>

ping?



---

archive/issue_comments_359882.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nI'll test on OSX later today.",
    "created_at": "2017-10-18T10:54:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359882",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:58" align="right">comment:58</div>

I'll test on OSX later today.



---

archive/issue_events_331287.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-10-19T08:09:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331287"
}
```



---

archive/issue_events_331288.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-10-19T08:09:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331288"
}
```



---

archive/issue_comments_359883.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nOK, all good on OSX.",
    "created_at": "2017-10-19T08:09:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359883",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:59" align="right">comment:59</div>

OK, all good on OSX.



---

archive/issue_comments_359884.json:
```json
{
    "body": "Changed reviewer from **Emmanuel Charpentier, Jeroen Demeyer** to **Emmanuel Charpentier, Jeroen Demeyer, Dima Pasechnik**",
    "created_at": "2017-10-19T08:09:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359884",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Emmanuel Charpentier, Jeroen Demeyer** to **Emmanuel Charpentier, Jeroen Demeyer, Dima Pasechnik**



---

archive/issue_comments_359885.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nLGTM now that that one test is fixed.",
    "created_at": "2017-10-19T14:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359885",
    "user": "https://github.com/embray"
}
```

<div id="comment:60" align="right">comment:60</div>

LGTM now that that one test is fixed.



---

archive/issue_comments_359886.json:
```json
{
    "body": "Changed reviewer from **Emmanuel Charpentier, Jeroen Demeyer, Dima Pasechnik** to **Emmanuel Charpentier, Jeroen Demeyer, Dima Pasechnik, Erik Bray**",
    "created_at": "2017-10-19T14:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359886",
    "user": "https://github.com/embray"
}
```

Changed reviewer from **Emmanuel Charpentier, Jeroen Demeyer, Dima Pasechnik** to **Emmanuel Charpentier, Jeroen Demeyer, Dima Pasechnik, Erik Bray**



---

archive/issue_comments_359887.json:
```json
{
    "body": "Changed branch from **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)** to **[`f48e8c5`](https://github.com/sagemath/sagetrac-mirror/commit/f48e8c5a94d1df496a17189a5b77e513ab053d2d)**",
    "created_at": "2017-10-21T19:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23847#issuecomment-359887",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mantepse/make_the_experimental_fricas_package_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/make_the_experimental_fricas_package_optional)** to **[`f48e8c5`](https://github.com/sagemath/sagetrac-mirror/commit/f48e8c5a94d1df496a17189a5b77e513ab053d2d)**



---

archive/issue_events_331289.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-21T19:01:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331289"
}
```



---

archive/issue_events_331290.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "79bca3d1713d7113cd10894f678a6a918174c898",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-10-21T19:01:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23847",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23847#event-331290"
}
```
