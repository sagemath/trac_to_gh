# Issue 23435: Dynamic classes of extension types should behave like extension types

archive/issues_023198.json:
```json
{
    "assignees": [],
    "body": "This ticket creates dynamic classes with `__slots__ = []` if all base classes of the dynamic class are extension types. This causes the dynamic class to behave like an extension type. In fact, `is_extension_type()` will return `True` for such a dynamic class.\n\nThe goal is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses and which reduces memory usage.\n\nCC:  @nthiery @tscrim\n\nBranch/Commit: **[`d0f2207`](https://github.com/sagemath/sagetrac-mirror/commit/d0f220731ef334528c73484a3e13be6bc985a640)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **performance**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23435_\n\n",
    "closed_at": "2017-09-20T22:26:13Z",
    "created_at": "2017-07-14T14:40:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/performance",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Dynamic classes of extension types should behave like extension types",
    "type": "issue",
    "updated_at": "2017-09-20T22:26:13Z",
    "url": "https://github.com/sagemath/sage/issues/23435",
    "user": "https://github.com/jdemeyer"
}
```
This ticket creates dynamic classes with `__slots__ = []` if all base classes of the dynamic class are extension types. This causes the dynamic class to behave like an extension type. In fact, `is_extension_type()` will return `True` for such a dynamic class.

The goal is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses and which reduces memory usage.

CC:  @nthiery @tscrim

Branch/Commit: **[`d0f2207`](https://github.com/sagemath/sagetrac-mirror/commit/d0f220731ef334528c73484a3e13be6bc985a640)**

Reviewer: **Travis Scrimshaw**

Author: **Jeroen Demeyer**

Component: **performance**

_Issue created by migration from https://trac.sagemath.org/ticket/23435_





---

archive/issue_events_326206.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-14T14:40:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326206"
}
```



---

archive/issue_events_326207.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-14T14:40:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/performance",
    "label_color": "696969",
    "label_name": "performance",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326207"
}
```



---

archive/issue_events_326208.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-14T14:40:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326208"
}
```



---

archive/issue_events_326209.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-14T14:40:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326209"
}
```



---

archive/issue_comments_352143.json:
```json
{
    "body": "Branch: **[u/jdemeyer/ticket/23435](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23435)**",
    "created_at": "2017-07-14T15:03:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352143",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/ticket/23435](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23435)**



---

archive/issue_events_326210.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-14T15:05:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326210"
}
```



---

archive/issue_comments_352144.json:
```json
{
    "body": "Commit: **[`d4fdfca`](https://github.com/sagemath/sagetrac-mirror/commit/d4fdfca8cc54d606bf54041b22bf653cd42fa4e9)**",
    "created_at": "2017-07-14T15:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352144",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`d4fdfca`](https://github.com/sagemath/sagetrac-mirror/commit/d4fdfca8cc54d606bf54041b22bf653cd42fa4e9)**



---

archive/issue_comments_352145.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf224b7e57b9dfc46446d8673a546f3e9f377008\">cf224b7</a></td><td><code>Implement wrapperdescr_call without checking</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a4ef8c8928387ba78ceef8e9ede0b8b15245386\">9a4ef8c</a></td><td><code>Wording</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed0d88c9c42f1f7d10eebba7c4a29e620709072d\">ed0d88c</a></td><td><code>Move various things to src/sage/cpython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cb44f89a4478d711ba829d2cea0f8548623f989\">6cb44f8</a></td><td><code>New function can_assign_class()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4fdfca8cc54d606bf54041b22bf653cd42fa4e9\">d4fdfca</a></td><td><code>Dynamic classes of extension types should behave like extension types</code></td></tr></table>\n",
    "created_at": "2017-07-14T15:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352145",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf224b7e57b9dfc46446d8673a546f3e9f377008">cf224b7</a></td><td><code>Implement wrapperdescr_call without checking</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a4ef8c8928387ba78ceef8e9ede0b8b15245386">9a4ef8c</a></td><td><code>Wording</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed0d88c9c42f1f7d10eebba7c4a29e620709072d">ed0d88c</a></td><td><code>Move various things to src/sage/cpython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cb44f89a4478d711ba829d2cea0f8548623f989">6cb44f8</a></td><td><code>New function can_assign_class()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4fdfca8cc54d606bf54041b22bf653cd42fa4e9">d4fdfca</a></td><td><code>Dynamic classes of extension types should behave like extension types</code></td></tr></table>




---

archive/issue_comments_352146.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n When `dynamic_class()` creates a class whose base classes are all extension types, the new dynamic class is created with `__slots__ = []` such that it behaves more like an extension type.\n \n-The goal of this ticket is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses. \n+The goal of this ticket is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses and which reduces memory usage.\n``````\n",
    "created_at": "2017-07-14T15:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352146",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 When `dynamic_class()` creates a class whose base classes are all extension types, the new dynamic class is created with `__slots__ = []` such that it behaves more like an extension type.
 
-The goal of this ticket is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses. 
+The goal of this ticket is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses and which reduces memory usage.
``````




---

archive/issue_comments_352147.json:
```json
{
    "body": "Changed commit from **[`d4fdfca`](https://github.com/sagemath/sagetrac-mirror/commit/d4fdfca8cc54d606bf54041b22bf653cd42fa4e9)** to **[`1fc75fb`](https://github.com/sagemath/sagetrac-mirror/commit/1fc75fbfe17b1d71789e82c750e958a3a0ba60ad)**",
    "created_at": "2017-07-14T21:45:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352147",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d4fdfca`](https://github.com/sagemath/sagetrac-mirror/commit/d4fdfca8cc54d606bf54041b22bf653cd42fa4e9)** to **[`1fc75fb`](https://github.com/sagemath/sagetrac-mirror/commit/1fc75fbfe17b1d71789e82c750e958a3a0ba60ad)**



---

archive/issue_comments_352148.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fc75fbfe17b1d71789e82c750e958a3a0ba60ad\">1fc75fb</a></td><td><code>Dynamic classes of extension types should behave like extension types</code></td></tr></table>\n",
    "created_at": "2017-07-14T21:45:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352148",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fc75fbfe17b1d71789e82c750e958a3a0ba60ad">1fc75fb</a></td><td><code>Dynamic classes of extension types should behave like extension types</code></td></tr></table>




---

archive/issue_comments_352149.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-When `dynamic_class()` creates a class whose base classes are all extension types, the new dynamic class is created with `__slots__ = []` such that it behaves more like an extension type.\n+This ticket creates dynamic classes with `__slots__ = []` if all base classes of the dynamic class are extension types. This causes the dynamic class to behave like an extension type. In fact, `is_extension_type()` will return `True` for such a dynamic class.\n \n-The goal of this ticket is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses and which reduces memory usage.\n+The goal is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses and which reduces memory usage.\n``````\n",
    "created_at": "2017-07-14T21:48:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352149",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-When `dynamic_class()` creates a class whose base classes are all extension types, the new dynamic class is created with `__slots__ = []` such that it behaves more like an extension type.
+This ticket creates dynamic classes with `__slots__ = []` if all base classes of the dynamic class are extension types. This causes the dynamic class to behave like an extension type. In fact, `is_extension_type()` will return `True` for such a dynamic class.
 
-The goal of this ticket is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses and which reduces memory usage.
+The goal is to reduce the performance penalty when replacing an extension type by a dynamic class: extension types and Python classes with `__slots__` have no `__dict__` which speeds up all attribute accesses and which reduces memory usage.
``````




---

archive/issue_comments_352150.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSome doctests in `src/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst` involving `sage.combinat.free_module.CombinatorialFreeModule_with_category.element_class` break.",
    "created_at": "2017-07-15T08:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352150",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Some doctests in `src/doc/en/thematic_tutorials/tutorial-objects-and-classes.rst` involving `sage.combinat.free_module.CombinatorialFreeModule_with_category.element_class` break.



---

archive/issue_events_326211.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-15T08:18:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326211"
}
```



---

archive/issue_events_326212.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-15T08:18:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326212"
}
```



---

archive/issue_comments_352151.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI am pretty sure the problem comes from a missed an `is_extension_type()` in `__make_element_class__` in `parent.pyx`.",
    "created_at": "2017-08-28T17:12:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352151",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

I am pretty sure the problem comes from a missed an `is_extension_type()` in `__make_element_class__` in `parent.pyx`.



---

archive/issue_comments_352152.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n(Edit: I misinterpreted your comment)",
    "created_at": "2017-08-28T20:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352152",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

(Edit: I misinterpreted your comment)



---

archive/issue_comments_352153.json:
```json
{
    "body": "Changed commit from **[`1fc75fb`](https://github.com/sagemath/sagetrac-mirror/commit/1fc75fbfe17b1d71789e82c750e958a3a0ba60ad)** to **[`da56de4`](https://github.com/sagemath/sagetrac-mirror/commit/da56de403d18709acd9c5b780d18c267f14ac712)**",
    "created_at": "2017-08-29T10:19:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352153",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1fc75fb`](https://github.com/sagemath/sagetrac-mirror/commit/1fc75fbfe17b1d71789e82c750e958a3a0ba60ad)** to **[`da56de4`](https://github.com/sagemath/sagetrac-mirror/commit/da56de403d18709acd9c5b780d18c267f14ac712)**



---

archive/issue_comments_352154.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da56de403d18709acd9c5b780d18c267f14ac712\">da56de4</a></td><td><code>Add a `__dict__` to IndexedFreeModuleElement</code></td></tr></table>\n",
    "created_at": "2017-08-29T10:19:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352154",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da56de403d18709acd9c5b780d18c267f14ac712">da56de4</a></td><td><code>Add a `__dict__` to IndexedFreeModuleElement</code></td></tr></table>




---

archive/issue_events_326213.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-29T10:32:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326213"
}
```



---

archive/issue_events_326214.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-29T10:32:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326214"
}
```



---

archive/issue_comments_352155.json:
```json
{
    "body": "Changed commit from **[`da56de4`](https://github.com/sagemath/sagetrac-mirror/commit/da56de403d18709acd9c5b780d18c267f14ac712)** to **[`d1670e1`](https://github.com/sagemath/sagetrac-mirror/commit/d1670e1324092d3dcb5b5297bf75e59bc47f6c29)**",
    "created_at": "2017-08-30T08:32:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352155",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`da56de4`](https://github.com/sagemath/sagetrac-mirror/commit/da56de403d18709acd9c5b780d18c267f14ac712)** to **[`d1670e1`](https://github.com/sagemath/sagetrac-mirror/commit/d1670e1324092d3dcb5b5297bf75e59bc47f6c29)**



---

archive/issue_comments_352156.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1670e1324092d3dcb5b5297bf75e59bc47f6c29\">d1670e1</a></td><td><code>Merge tag '8.1.beta3' into t/23435/ticket/23435</code></td></tr></table>\n",
    "created_at": "2017-08-30T08:32:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352156",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1670e1324092d3dcb5b5297bf75e59bc47f6c29">d1670e1</a></td><td><code>Merge tag '8.1.beta3' into t/23435/ticket/23435</code></td></tr></table>




---

archive/issue_comments_352157.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI doubt anyone is using the features provided from having a `__dict__`. So I think the better solution would be to change the tutorial because the `CFM.element_class` is really just a workaround not inheriting properly from the category implementation. Because once we remove that workaround, we would run into the same problem.\n\nAlso, IMO this test is not accurate (or at least somewhat misleading):\n\n```\nSome particular actions modify the data structure of ``el``::\n\n    sage: el.rename(\"bla\")\n    sage: el\n    bla\n```\nFor the tests that are failing in the `.. NOTE::`, we can just change it to, e.g., `E.<x,y> = algebras.Exterior(QQ)` that has a proper Python subclass.\n\nDoes this sound okay?",
    "created_at": "2017-08-30T14:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352157",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

I doubt anyone is using the features provided from having a `__dict__`. So I think the better solution would be to change the tutorial because the `CFM.element_class` is really just a workaround not inheriting properly from the category implementation. Because once we remove that workaround, we would run into the same problem.

Also, IMO this test is not accurate (or at least somewhat misleading):

```
Some particular actions modify the data structure of ``el``::

    sage: el.rename("bla")
    sage: el
    bla
```
For the tests that are failing in the `.. NOTE::`, we can just change it to, e.g., `E.<x,y> = algebras.Exterior(QQ)` that has a proper Python subclass.

Does this sound okay?



---

archive/issue_comments_352158.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tscrim](#comment:12):\n> For the tests that are failing in the `.. NOTE::`, we can just change it to, e.g., `E.<x,y> = algebras.Exterior(QQ)` that has a proper Python subclass.\n> \n> Does this sound okay?\n\nI would rather prefer to just remove those examples. I don't think it makes sense to document something as a feature when that feature depends on the implementation detail of whether the class has a `__dict__`. With your proposal, we would get breakage again if someone decides that `algebras.Exterior` should be implemented in Cython.",
    "created_at": "2017-08-30T14:51:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352158",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tscrim](#comment:12):
> For the tests that are failing in the `.. NOTE::`, we can just change it to, e.g., `E.<x,y> = algebras.Exterior(QQ)` that has a proper Python subclass.
> 
> Does this sound okay?

I would rather prefer to just remove those examples. I don't think it makes sense to document something as a feature when that feature depends on the implementation detail of whether the class has a `__dict__`. With your proposal, we would get breakage again if someone decides that `algebras.Exterior` should be implemented in Cython.



---

archive/issue_comments_352159.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jdemeyer](#comment:13):\n> Replying to [@tscrim](#comment:12):\n> > For the tests that are failing in the `.. NOTE::`, we can just change it to, e.g., `E.<x,y> = algebras.Exterior(QQ)` that has a proper Python subclass.\n> > \n> > Does this sound okay?\n\n> \n> I would rather prefer to just remove those examples. I don't think it makes sense to document something as a feature when that feature depends on the implementation detail of whether the class has a `__dict__`. With your proposal, we would get breakage again if someone decides that `algebras.Exterior` should be implemented in Cython.\n\nGood point. What about doing a custom class for that example, since it is about showing the difference between Python and Cython, which is a point that should be made? (Of course, I am happy to remove the \"changing data structure\" test.)",
    "created_at": "2017-08-30T15:02:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352159",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jdemeyer](#comment:13):
> Replying to [@tscrim](#comment:12):
> > For the tests that are failing in the `.. NOTE::`, we can just change it to, e.g., `E.<x,y> = algebras.Exterior(QQ)` that has a proper Python subclass.
> > 
> > Does this sound okay?

> 
> I would rather prefer to just remove those examples. I don't think it makes sense to document something as a feature when that feature depends on the implementation detail of whether the class has a `__dict__`. With your proposal, we would get breakage again if someone decides that `algebras.Exterior` should be implemented in Cython.

Good point. What about doing a custom class for that example, since it is about showing the difference between Python and Cython, which is a point that should be made? (Of course, I am happy to remove the "changing data structure" test.)



---

archive/issue_comments_352160.json:
```json
{
    "body": "Changed commit from **[`d1670e1`](https://github.com/sagemath/sagetrac-mirror/commit/d1670e1324092d3dcb5b5297bf75e59bc47f6c29)** to **[`d0f2207`](https://github.com/sagemath/sagetrac-mirror/commit/d0f220731ef334528c73484a3e13be6bc985a640)**",
    "created_at": "2017-09-18T11:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352160",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d1670e1`](https://github.com/sagemath/sagetrac-mirror/commit/d1670e1324092d3dcb5b5297bf75e59bc47f6c29)** to **[`d0f2207`](https://github.com/sagemath/sagetrac-mirror/commit/d0f220731ef334528c73484a3e13be6bc985a640)**



---

archive/issue_comments_352161.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9ae79ac9d6f390492e533931610c9ff3d2135ac\">e9ae79a</a></td><td><code>Dynamic classes of extension types should behave like extension types</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0f220731ef334528c73484a3e13be6bc985a640\">d0f2207</a></td><td><code>Fix documentation regarding Python/Cython classes</code></td></tr></table>\n",
    "created_at": "2017-09-18T11:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352161",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9ae79ac9d6f390492e533931610c9ff3d2135ac">e9ae79a</a></td><td><code>Dynamic classes of extension types should behave like extension types</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0f220731ef334528c73484a3e13be6bc985a640">d0f2207</a></td><td><code>Fix documentation regarding Python/Cython classes</code></td></tr></table>




---

archive/issue_comments_352162.json:
```json
{
    "body": "Changed dependencies from **#23419** to none",
    "created_at": "2017-09-18T11:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352162",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#23419** to none



---

archive/issue_comments_352163.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-09-19T15:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352163",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_326215.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-19T15:42:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326215"
}
```



---

archive/issue_events_326216.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-09-19T15:42:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326216"
}
```



---

archive/issue_comments_352164.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nLet it be so.",
    "created_at": "2017-09-19T15:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352164",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

Let it be so.



---

archive/issue_events_326217.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-20T22:26:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326217"
}
```



---

archive/issue_events_326218.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f09c3e44a703d32bb45d1d33fae7151628bd94dd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-09-20T22:26:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23435#event-326218"
}
```



---

archive/issue_comments_352165.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/ticket/23435](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23435)** to **[`d0f2207`](https://github.com/sagemath/sagetrac-mirror/commit/d0f220731ef334528c73484a3e13be6bc985a640)**",
    "created_at": "2017-09-20T22:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23435",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23435#issuecomment-352165",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/ticket/23435](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/23435)** to **[`d0f2207`](https://github.com/sagemath/sagetrac-mirror/commit/d0f220731ef334528c73484a3e13be6bc985a640)**
