# Issue 23572: doctests for the english translation of the book "Calcul mathématique avec Sage"

archive/issues_023335.json:
```json
{
    "assignees": [],
    "body": "The purpose of this ticket is to add the doctests corresponding to the examples given in the english translation of the book \"Calcul math\u00e9matique avec Sage\" (see https://members.loria.fr/PZimmermann/sagebook/english.html).\n\nSage already includes doctests for the original version of this book (published in french in 2013). These doctests are in `src/sage/tests/french_book`, and should be updated.\n\nThe final version of the book is now under press, so it is time for adding/updating doctests.\n\n**NOTE**: some doctests are not exactly those from the book. They have been modified (in a minimal manner) so that they will pass when sage is run using python 3.\n\n**bugs found**:\n1. Using `scipy.sparse.lil_matrix` is now broken: #23867\n\nDepends on #27066\n\nAssignee: **@fchapoton**\n\nCC:  @mforets @dcoudert @nthiery @vinklein @jhpalmieri\n\nBranch/Commit: **[ae36049](https://github.com/sagemath/sagetrac-mirror/commit/ae3604981449d425841ff188904cf641397307a8)**\n\nUpstream: **Reported upstream. No feedback yet.**\n\nReviewer: **Erik Bray, Fr\u00e9d\u00e9ric Chapoton, Vincent Klein**\n\nAuthor: **Erik Bray, Fr\u00e9d\u00e9ric Chapoton, Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23572_\n\n",
    "closed_at": "2019-02-10T12:55:37Z",
    "created_at": "2017-08-02T13:00:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/doctest%20coverage",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "doctests for the english translation of the book \"Calcul math\u00e9matique avec Sage\"",
    "type": "issue",
    "updated_at": "2019-02-10T12:55:37Z",
    "url": "https://github.com/sagemath/sage/issues/23572",
    "user": "https://github.com/zimmermann6"
}
```
The purpose of this ticket is to add the doctests corresponding to the examples given in the english translation of the book "Calcul mathématique avec Sage" (see https://members.loria.fr/PZimmermann/sagebook/english.html).

Sage already includes doctests for the original version of this book (published in french in 2013). These doctests are in `src/sage/tests/french_book`, and should be updated.

The final version of the book is now under press, so it is time for adding/updating doctests.

**NOTE**: some doctests are not exactly those from the book. They have been modified (in a minimal manner) so that they will pass when sage is run using python 3.

**bugs found**:
1. Using `scipy.sparse.lil_matrix` is now broken: #23867

Depends on #27066

Assignee: **@fchapoton**

CC:  @mforets @dcoudert @nthiery @vinklein @jhpalmieri

Branch/Commit: **[ae36049](https://github.com/sagemath/sagetrac-mirror/commit/ae3604981449d425841ff188904cf641397307a8)**

Upstream: **Reported upstream. No feedback yet.**

Reviewer: **Erik Bray, Frédéric Chapoton, Vincent Klein**

Author: **Erik Bray, Frédéric Chapoton, Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/23572_





---

archive/issue_events_309885.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2017-08-02T13:00:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309885"
}
```



---

archive/issue_events_309886.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2017-08-02T13:00:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/doctest%20coverage",
    "label_color": "696969",
    "label_name": "doctest coverage",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309886"
}
```



---

archive/issue_events_309887.json:
```json
{
    "actor": "https://github.com/zimmermann6",
    "created_at": "2017-08-02T13:00:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309887"
}
```



---

archive/issue_comments_357217.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\none issue we encounter is the following. The code below differs between Sage 8.0 and Sage 8.1beta3:\n\n```\n   def NearlySingularMatrix(R,n):\n      M=matrix(R,n,n)\n      for i in range(0,n):\n         for j in range(0,n):\n            M[i,j]= (1+log(R(1+i)))/((i+1)^2+(j+1)^2)\n      return M\n   n=35\n   print NearlySingularMatrix(RDF,n).det()\n```\nWith Sage 8.0 we get `0.0`, whereas with Sage 8.1beta3 we get `-0.0`.\nI thought the determinant code was deterministic, and since RDF computations follow IEEE 754, we should get a deterministic answer. How can we get different answers?",
    "created_at": "2017-08-30T08:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357217",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:2" align="right">Comment 2</div>

one issue we encounter is the following. The code below differs between Sage 8.0 and Sage 8.1beta3:

```
   def NearlySingularMatrix(R,n):
      M=matrix(R,n,n)
      for i in range(0,n):
         for j in range(0,n):
            M[i,j]= (1+log(R(1+i)))/((i+1)^2+(j+1)^2)
      return M
   n=35
   print NearlySingularMatrix(RDF,n).det()
```
With Sage 8.0 we get `0.0`, whereas with Sage 8.1beta3 we get `-0.0`.
I thought the determinant code was deterministic, and since RDF computations follow IEEE 754, we should get a deterministic answer. How can we get different answers?



---

archive/issue_comments_357218.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nanother issue:\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 8.0, Release Date: 2017-07-21                     \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\nsage: C = graphs.ChvatalGraph()\nsage: from sage.graphs.graph_coloring import edge_coloring\nsage: edge_coloring(C, hex_colors = True)\n\n{'#00ffff': [(0, 6), (1, 5), (2, 8), (3, 4), (7, 11), (9, 10)],\n '#7f00ff': [(0, 4), (1, 7), (2, 6), (3, 9), (5, 11), (8, 10)],\n '#7fff00': [(0, 9), (1, 2), (3, 7), (4, 8), (5, 10), (6, 11)],\n '#ff0000': [(0, 1), (2, 3), (4, 5), (6, 10), (7, 8), (9, 11)]}\n```\nWith Sage 8.1beta3 we get:\n\n```\n    {'#00ffff': [(0, 9), (1, 5), (2, 6), (3, 4), (7, 11), (8, 10)],\n     '#7f00ff': [(0, 1), (2, 8), (3, 7), (4, 5), (6, 10), (9, 11)],\n     '#7fff00': [(0, 4), (1, 2), (3, 9), (5, 10), (6, 11), (7, 8)],\n     '#ff0000': [(0, 6), (1, 7), (2, 3), (4, 8), (5, 11), (9, 10)]}\n```\nIs there a way to get a deterministic answer? Is there any random seed that controls the edge coloring algorithm?",
    "created_at": "2017-08-30T08:19:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357218",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:3" align="right">Comment 3</div>

another issue:

```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 8.0, Release Date: 2017-07-21                     │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
sage: C = graphs.ChvatalGraph()
sage: from sage.graphs.graph_coloring import edge_coloring
sage: edge_coloring(C, hex_colors = True)

{'#00ffff': [(0, 6), (1, 5), (2, 8), (3, 4), (7, 11), (9, 10)],
 '#7f00ff': [(0, 4), (1, 7), (2, 6), (3, 9), (5, 11), (8, 10)],
 '#7fff00': [(0, 9), (1, 2), (3, 7), (4, 8), (5, 10), (6, 11)],
 '#ff0000': [(0, 1), (2, 3), (4, 5), (6, 10), (7, 8), (9, 11)]}
```
With Sage 8.1beta3 we get:

```
    {'#00ffff': [(0, 9), (1, 5), (2, 6), (3, 4), (7, 11), (8, 10)],
     '#7f00ff': [(0, 1), (2, 8), (3, 7), (4, 5), (6, 10), (9, 11)],
     '#7fff00': [(0, 4), (1, 2), (3, 9), (5, 10), (6, 11), (7, 8)],
     '#ff0000': [(0, 6), (1, 7), (2, 3), (4, 8), (5, 11), (9, 10)]}
```
Is there a way to get a deterministic answer? Is there any random seed that controls the edge coloring algorithm?



---

archive/issue_comments_357219.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nfor comment [comment:3], I'll ask David Coudert who worked on `edge_coloring` in #22564.\n\nPaul",
    "created_at": "2017-08-30T09:37:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357219",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:4" align="right">Comment 4</div>

for comment [comment:3], I'll ask David Coudert who worked on `edge_coloring` in #22564.

Paul



---

archive/issue_comments_357220.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nThe coloring is done with ILP and the result depends on the ILP solver.\n#22564 has been merged in 8.1.beta?? The patch only slightly changes the order in which constraints are added to the ILP and it is enough the get a different solution from 8.0. \n\n```\nsage: from sage.graphs.graph_coloring import edge_coloring\nsage: edge_coloring(C, hex_colors = True, solver='GLPK')\n\n{'#00ffff': [(0, 9), (1, 5), (2, 6), (3, 4), (7, 11), (8, 10)],\n '#7f00ff': [(0, 1), (2, 8), (3, 7), (4, 5), (6, 10), (9, 11)],\n '#7fff00': [(0, 4), (1, 2), (3, 9), (5, 10), (6, 11), (7, 8)],\n '#ff0000': [(0, 6), (1, 7), (2, 3), (4, 8), (5, 11), (9, 10)]}\nsage: edge_coloring(C, hex_colors = True, solver='Cplex')\n\n{'#00ffff': [(0, 6), (1, 5), (2, 3), (4, 8), (7, 11), (9, 10)],\n '#7f00ff': [(0, 1), (2, 6), (3, 4), (5, 10), (7, 8), (9, 11)],\n '#7fff00': [(0, 9), (1, 2), (3, 7), (4, 5), (6, 11), (8, 10)],\n '#ff0000': [(0, 4), (1, 7), (2, 8), (3, 9), (5, 11), (6, 10)]}\nsage: edge_coloring(C, hex_colors = True, solver='PPL')\n\n{'#00ffff': [(0, 9), (1, 5), (2, 8), (3, 4), (6, 10), (7, 11)],\n '#7f00ff': [(0, 6), (1, 7), (2, 3), (4, 5), (8, 10), (9, 11)],\n '#7fff00': [(0, 4), (1, 2), (3, 9), (5, 10), (6, 11), (7, 8)],\n '#ff0000': [(0, 1), (2, 6), (3, 7), (4, 8), (5, 11), (9, 10)]}\nsage: edge_coloring(C, hex_colors = True, solver='Coin')\n\n{'#00ffff': [(0, 4), (1, 5), (2, 6), (3, 9), (7, 11), (8, 10)],\n '#7f00ff': [(0, 6), (1, 2), (3, 7), (4, 8), (5, 10), (9, 11)],\n '#7fff00': [(0, 1), (2, 3), (4, 5), (6, 11), (7, 8), (9, 10)],\n '#ff0000': [(0, 9), (1, 7), (2, 8), (3, 4), (5, 11), (6, 10)]}\nsage: edge_coloring(C, hex_colors = True, solver='Gurobi')\n\n{'#00ffff': [(0, 1), (2, 6), (3, 9), (4, 5), (7, 11), (8, 10)],\n '#7f00ff': [(0, 6), (1, 7), (2, 3), (4, 8), (5, 10), (9, 11)],\n '#7fff00': [(0, 4), (1, 5), (2, 8), (3, 7), (6, 11), (9, 10)],\n '#ff0000': [(0, 9), (1, 2), (3, 4), (5, 11), (6, 10), (7, 8)]}\n```\nIn doctests, you must set the solver to `GLPK`. Otherwise, the default solver is used (e.g., `Cplex` if you have it).",
    "created_at": "2017-08-30T11:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357220",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">Comment 6</div>

The coloring is done with ILP and the result depends on the ILP solver.
#22564 has been merged in 8.1.beta?? The patch only slightly changes the order in which constraints are added to the ILP and it is enough the get a different solution from 8.0. 

```
sage: from sage.graphs.graph_coloring import edge_coloring
sage: edge_coloring(C, hex_colors = True, solver='GLPK')

{'#00ffff': [(0, 9), (1, 5), (2, 6), (3, 4), (7, 11), (8, 10)],
 '#7f00ff': [(0, 1), (2, 8), (3, 7), (4, 5), (6, 10), (9, 11)],
 '#7fff00': [(0, 4), (1, 2), (3, 9), (5, 10), (6, 11), (7, 8)],
 '#ff0000': [(0, 6), (1, 7), (2, 3), (4, 8), (5, 11), (9, 10)]}
sage: edge_coloring(C, hex_colors = True, solver='Cplex')

{'#00ffff': [(0, 6), (1, 5), (2, 3), (4, 8), (7, 11), (9, 10)],
 '#7f00ff': [(0, 1), (2, 6), (3, 4), (5, 10), (7, 8), (9, 11)],
 '#7fff00': [(0, 9), (1, 2), (3, 7), (4, 5), (6, 11), (8, 10)],
 '#ff0000': [(0, 4), (1, 7), (2, 8), (3, 9), (5, 11), (6, 10)]}
sage: edge_coloring(C, hex_colors = True, solver='PPL')

{'#00ffff': [(0, 9), (1, 5), (2, 8), (3, 4), (6, 10), (7, 11)],
 '#7f00ff': [(0, 6), (1, 7), (2, 3), (4, 5), (8, 10), (9, 11)],
 '#7fff00': [(0, 4), (1, 2), (3, 9), (5, 10), (6, 11), (7, 8)],
 '#ff0000': [(0, 1), (2, 6), (3, 7), (4, 8), (5, 11), (9, 10)]}
sage: edge_coloring(C, hex_colors = True, solver='Coin')

{'#00ffff': [(0, 4), (1, 5), (2, 6), (3, 9), (7, 11), (8, 10)],
 '#7f00ff': [(0, 6), (1, 2), (3, 7), (4, 8), (5, 10), (9, 11)],
 '#7fff00': [(0, 1), (2, 3), (4, 5), (6, 11), (7, 8), (9, 10)],
 '#ff0000': [(0, 9), (1, 7), (2, 8), (3, 4), (5, 11), (6, 10)]}
sage: edge_coloring(C, hex_colors = True, solver='Gurobi')

{'#00ffff': [(0, 1), (2, 6), (3, 9), (4, 5), (7, 11), (8, 10)],
 '#7f00ff': [(0, 6), (1, 7), (2, 3), (4, 8), (5, 10), (9, 11)],
 '#7fff00': [(0, 4), (1, 5), (2, 8), (3, 7), (6, 11), (9, 10)],
 '#ff0000': [(0, 9), (1, 2), (3, 4), (5, 11), (6, 10), (7, 8)]}
```
In doctests, you must set the solver to `GLPK`. Otherwise, the default solver is used (e.g., `Cplex` if you have it).



---

archive/issue_comments_357221.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nDavid,\n\n1) from the trac page, #22564 has been merged in 8.0, thus the difference I see should be due to subsequent changes\n\n2) is there any reason why the order of the constraints was changed? It makes it difficult to add doctests for this example from our book about Sage",
    "created_at": "2017-08-30T11:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357221",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:7" align="right">Comment 7</div>

David,

1) from the trac page, #22564 has been merged in 8.0, thus the difference I see should be due to subsequent changes

2) is there any reason why the order of the constraints was changed? It makes it difficult to add doctests for this example from our book about Sage



---

archive/issue_comments_357222.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@zimmermann6](#comment%3A7):\n> David,\n> \n> 1) from the trac page, #22564 has been merged in 8.0, thus the difference I see should be due to subsequent changes\n> \n> 2) is there any reason why the order of the constraints was changed? It makes it difficult to add doctests for this example from our book about Sage\n\nI changed the code 1) to split the graph into connected components and color them separately (should be faster), and 2) because I don't understand why we should use list comprehension for adding constraints. It was:\n\n```\n    #  A vertex can not have two incident edges with the same color.\n    [p.add_constraint(\n            p.sum([color[R(e),i] for e in g.edges_incident(v, labels=False)]), max=1)\n                for v in g.vertex_iterator()\n                    for i in range(k)]\n    # an edge must have a color\n    [p.add_constraint(p.sum([color[R(e),i] for i in range(k)]), max=1, min=1)\n         for e in g.edge_iterator(labels=False)]\n    # anything is good as an objective value as long as it is satisfiable\n    e = next(g.edge_iterator(labels=False))\n    p.set_objective(color[R(e),0])\n```\nNow it is:\n\n```\n    # A vertex can not have two incident edges with the same color.\n    for v in h.vertex_iterator():\n        for i in range(k):\n            p.add_constraint(p.sum(color[R(u,v),i] for u in h.neighbor_iterator(v)) <= 1)\n    # Nn edge must have a color\n    for u,v in h.edge_iterator(labels=False):\n        p.add_constraint(p.sum(color[R(u,v),i] for i in range(k)) == 1)\n    # We color the edges of the vertex of maximum degree\n    for i,v in enumerate(h.neighbors(X)):\n        p.add_constraint( color[R(v,X),i] == 1 )\n```\nSo the main changes are:\n- use of `neighbor_iterator` instead of `edges_incident` in the first set of constraints (it has always been assumed in this method that the graph is simple)\n- removal of the objective function (not needed)\n- now force the coloring of the edges incident to the vertex of maximum degree (could speed up the resolution).\n\nIn fact, I bet that changing the version of `GLPK` could already change the result (e.g., faster algorithm converging to a different optimal solution). Furthermore, I assume that some internal heuristics of the solvers are randomized since we can set [random seed of Cplex](https://www.ibm.com/support/knowledgecenter/SSSA5P_12.6.3/ilog.odms.cplex.help/CPLEX/Parameters/topics/RandomSeed.html).",
    "created_at": "2017-08-30T12:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357222",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@zimmermann6](#comment%3A7):
> David,
> 
> 1) from the trac page, #22564 has been merged in 8.0, thus the difference I see should be due to subsequent changes
> 
> 2) is there any reason why the order of the constraints was changed? It makes it difficult to add doctests for this example from our book about Sage

I changed the code 1) to split the graph into connected components and color them separately (should be faster), and 2) because I don't understand why we should use list comprehension for adding constraints. It was:

```
    #  A vertex can not have two incident edges with the same color.
    [p.add_constraint(
            p.sum([color[R(e),i] for e in g.edges_incident(v, labels=False)]), max=1)
                for v in g.vertex_iterator()
                    for i in range(k)]
    # an edge must have a color
    [p.add_constraint(p.sum([color[R(e),i] for i in range(k)]), max=1, min=1)
         for e in g.edge_iterator(labels=False)]
    # anything is good as an objective value as long as it is satisfiable
    e = next(g.edge_iterator(labels=False))
    p.set_objective(color[R(e),0])
```
Now it is:

```
    # A vertex can not have two incident edges with the same color.
    for v in h.vertex_iterator():
        for i in range(k):
            p.add_constraint(p.sum(color[R(u,v),i] for u in h.neighbor_iterator(v)) <= 1)
    # Nn edge must have a color
    for u,v in h.edge_iterator(labels=False):
        p.add_constraint(p.sum(color[R(u,v),i] for i in range(k)) == 1)
    # We color the edges of the vertex of maximum degree
    for i,v in enumerate(h.neighbors(X)):
        p.add_constraint( color[R(v,X),i] == 1 )
```
So the main changes are:
- use of `neighbor_iterator` instead of `edges_incident` in the first set of constraints (it has always been assumed in this method that the graph is simple)
- removal of the objective function (not needed)
- now force the coloring of the edges incident to the vertex of maximum degree (could speed up the resolution).

In fact, I bet that changing the version of `GLPK` could already change the result (e.g., faster algorithm converging to a different optimal solution). Furthermore, I assume that some internal heuristics of the solvers are randomized since we can set [random seed of Cplex](https://www.ibm.com/support/knowledgecenter/SSSA5P_12.6.3/ilog.odms.cplex.help/CPLEX/Parameters/topics/RandomSeed.html).



---

archive/issue_comments_357223.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nDavid, thank you for the explanation (by the way there is a typo: \"Nn edge must have a color\" should be \"An edge...\").\n\nSince it seems impossible to have a reliable doctest for this example, we won't test it.",
    "created_at": "2017-08-30T12:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357223",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:9" align="right">Comment 9</div>

David, thank you for the explanation (by the way there is a typo: "Nn edge must have a color" should be "An edge...").

Since it seems impossible to have a reliable doctest for this example, we won't test it.



---

archive/issue_comments_357224.json:
```json
{
    "body": "Replying to [ticket:23572 zimmerma]:\n> Sage already includes doctests for the original version of this book (published in french in 2013). These doctests are in `src/sage/tests/french_book`, and should be updated.\n\nDidn't you mention at some point that you didn't care any more about these doctests? I seem to remember something along those lines...",
    "created_at": "2017-08-31T12:16:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357224",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:23572 zimmerma]:
> Sage already includes doctests for the original version of this book (published in french in 2013). These doctests are in `src/sage/tests/french_book`, and should be updated.

Didn't you mention at some point that you didn't care any more about these doctests? I seem to remember something along those lines...



---

archive/issue_comments_357225.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nJeroen,\n\nwhat I said is that there were too many changes in Sage upstream (with respect to Sage 5.9 which we used in the french book in 2013) so that we could check them (and even, sometimes, we had no chance to give our opinion on them before they were merged into Sage). Those doctests nevertheless did they job since most of the examples still run with current versions of Sage.\n\nNow that we have updated the book to Sage 8.0, we'd like to add the (new) doctests to Sage doctests, so that the new (english) version of the book will not be obsolete too quickly.",
    "created_at": "2017-09-01T11:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357225",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:11" align="right">Comment 11</div>

Jeroen,

what I said is that there were too many changes in Sage upstream (with respect to Sage 5.9 which we used in the french book in 2013) so that we could check them (and even, sometimes, we had no chance to give our opinion on them before they were merged into Sage). Those doctests nevertheless did they job since most of the examples still run with current versions of Sage.

Now that we have updated the book to Sage 8.0, we'd like to add the (new) doctests to Sage doctests, so that the new (english) version of the book will not be obsolete too quickly.



---

archive/issue_comments_357226.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nNicolas Thiery just tested the doctests of our book with Sage 8.1beta5 and several do fail (while all tests pass with Sage 8.0). Here are the issues:\n\n1) the `lil_matrix` do not work any more. Cf the example on page 299 of the english translation:\n\n```\n  sage: from scipy.sparse.linalg.dsolve import *\n  sage: from scipy.sparse import lil_matrix\n  sage: from numpy import array\n  sage: n = 200\n  sage: n2 = n*n\n  sage: A = lil_matrix((n2, n2))\n  sage: h2 = 1./float((n+1)^2)\n  sage: for i in range(0,n2):\n  ....:    A[i,i]=4*h2+1.\n  ....:    if i+1<n2: A[i,int(i+1)]=-h2\n  ....:    if i>0:    A[i,int(i-1)]=-h2\n  ....:    if i+n<n2: A[i,int(i+n)]=-h2\n  ....:    if i-n>=0: A[i,int(i-n)]=-h2\n  sage: Acsc = A.tocsc()\n  sage: b = array([1 for i in range(0,n2)])\n  sage: solve = factorized(Acsc) # LU factorisation\n  sage: S = solve(b)             # resolution\n```\nNow if fails at the `A = lil_matrix((n2, n2))` line with:\n\n```\n    TypeError: unrecognized lil_matrix constructor usage\n```\nAren't `lil_matrix` tested in the current doctests?\n\n2) the category of `QQ` changed:\n\n```\nFailed example:\n    QQ.category()\nExpected:\n    Join of Category of quotient fields and Category of metric spaces\nGot:\n    Join of Category of number fields and Category of quotient fields and Category of metric spaces\n```\n3) we have different output for graphs of the commands `minor` and `edge_coloring`. We will try to fix those with `solver='GLPK'` (cf comment [comment:6] above). If that does not work, is there a random seed that we can set to make those commands deterministic?",
    "created_at": "2017-09-15T09:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357226",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:12" align="right">Comment 12</div>

Nicolas Thiery just tested the doctests of our book with Sage 8.1beta5 and several do fail (while all tests pass with Sage 8.0). Here are the issues:

1) the `lil_matrix` do not work any more. Cf the example on page 299 of the english translation:

```
  sage: from scipy.sparse.linalg.dsolve import *
  sage: from scipy.sparse import lil_matrix
  sage: from numpy import array
  sage: n = 200
  sage: n2 = n*n
  sage: A = lil_matrix((n2, n2))
  sage: h2 = 1./float((n+1)^2)
  sage: for i in range(0,n2):
  ....:    A[i,i]=4*h2+1.
  ....:    if i+1<n2: A[i,int(i+1)]=-h2
  ....:    if i>0:    A[i,int(i-1)]=-h2
  ....:    if i+n<n2: A[i,int(i+n)]=-h2
  ....:    if i-n>=0: A[i,int(i-n)]=-h2
  sage: Acsc = A.tocsc()
  sage: b = array([1 for i in range(0,n2)])
  sage: solve = factorized(Acsc) # LU factorisation
  sage: S = solve(b)             # resolution
```
Now if fails at the `A = lil_matrix((n2, n2))` line with:

```
    TypeError: unrecognized lil_matrix constructor usage
```
Aren't `lil_matrix` tested in the current doctests?

2) the category of `QQ` changed:

```
Failed example:
    QQ.category()
Expected:
    Join of Category of quotient fields and Category of metric spaces
Got:
    Join of Category of number fields and Category of quotient fields and Category of metric spaces
```
3) we have different output for graphs of the commands `minor` and `edge_coloring`. We will try to fix those with `solver='GLPK'` (cf comment [comment:6] above). If that does not work, is there a random seed that we can set to make those commands deterministic?



---

archive/issue_comments_357227.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@zimmermann6](#comment%3A12):\n> 3) we have different output for graphs of the commands `minor` and `edge_coloring`. We will try to fix those with `solver='GLPK'` (cf comment [comment:6] above). If that does not work, is there a random seed that we can set to make those commands deterministic?\n\nAre these tests really non-deterministic or just different with different versions of Sage?",
    "created_at": "2017-09-15T09:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357227",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@zimmermann6](#comment%3A12):
> 3) we have different output for graphs of the commands `minor` and `edge_coloring`. We will try to fix those with `solver='GLPK'` (cf comment [comment:6] above). If that does not work, is there a random seed that we can set to make those commands deterministic?

Are these tests really non-deterministic or just different with different versions of Sage?



---

archive/issue_comments_357228.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@zimmermann6](#comment%3A12):\n> 2) the category of `QQ` changed:\n> \n> ```\n> Failed example:\n>     QQ.category()\n> Expected:\n>     Join of Category of quotient fields and Category of metric spaces\n> Got:\n>     Join of Category of number fields and Category of quotient fields and Category of metric spaces\n> ```\n\nThis is a good and intentional change: just change the expected output.",
    "created_at": "2017-09-15T09:56:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357228",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@zimmermann6](#comment%3A12):
> 2) the category of `QQ` changed:
> 
> ```
> Failed example:
>     QQ.category()
> Expected:
>     Join of Category of quotient fields and Category of metric spaces
> Got:
>     Join of Category of number fields and Category of quotient fields and Category of metric spaces
> ```

This is a good and intentional change: just change the expected output.



---

archive/issue_comments_357229.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nReplying to [@zimmermann6](#comment%3A12):\n> Aren't `lil_matrix` tested in the current doctests?\n\n`lil_matrix` is not used or tested anywhere in Sage. I'll have a look.",
    "created_at": "2017-09-15T10:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357229",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">Comment 15</div>

Replying to [@zimmermann6](#comment%3A12):
> Aren't `lil_matrix` tested in the current doctests?

`lil_matrix` is not used or tested anywhere in Sage. I'll have a look.



---

archive/issue_comments_357230.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\n> 1) the lil_matrix do not work any more.\n\na scipy update? in sage 8.0.beta5 the version is 0.19.1, while in 8.0 it is 0.17.1.\n\nhowever, the docstring says it's still valid:\n\n```\n...\n        lil_matrix((M, N), [dtype])\n            to construct an empty matrix with shape (M, N)\n            dtype is optional, defaulting to dtype='d'. \n```",
    "created_at": "2017-09-15T10:27:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357230",
    "user": "https://github.com/mforets"
}
```

<div id="comment:16" align="right">Comment 16</div>

> 1) the lil_matrix do not work any more.

a scipy update? in sage 8.0.beta5 the version is 0.19.1, while in 8.0 it is 0.17.1.

however, the docstring says it's still valid:

```
...
        lil_matrix((M, N), [dtype])
            to construct an empty matrix with shape (M, N)
            dtype is optional, defaulting to dtype='d'. 
```



---

archive/issue_comments_357231.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2017-09-15T10:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357231",
    "user": "https://github.com/jdemeyer"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_357232.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,5 @@\n \n We should probably wait for the final version of the book before adding/updating doctests.\n \n-\n+**Upstream bugs**:\n+1. Using `scipy.sparse.lil_matrix` is now broken: https://github.com/numpy/numpy/pull/9691\n``````\n",
    "created_at": "2017-09-15T10:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357232",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,5 @@
 
 We should probably wait for the final version of the book before adding/updating doctests.
 
-
+**Upstream bugs**:
+1. Using `scipy.sparse.lil_matrix` is now broken: https://github.com/numpy/numpy/pull/9691
``````




---

archive/issue_comments_357233.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@jdemeyer](#comment%3A13):\n> Replying to [@zimmermann6](#comment%3A12):\n> > 3) we have different output for graphs of the commands `minor` and `edge_coloring`. We will try to fix those with `solver='GLPK'` (cf comment [comment:6] above). If that does not work, is there a random seed that we can set to make those commands deterministic?\n\n> \n> Are these tests really non-deterministic or just different with different versions of Sage?\n\nno idea, I first asked Nicolas to test with `solver='GLPK'`.",
    "created_at": "2017-09-15T10:36:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357233",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@jdemeyer](#comment%3A13):
> Replying to [@zimmermann6](#comment%3A12):
> > 3) we have different output for graphs of the commands `minor` and `edge_coloring`. We will try to fix those with `solver='GLPK'` (cf comment [comment:6] above). If that does not work, is there a random seed that we can set to make those commands deterministic?

> 
> Are these tests really non-deterministic or just different with different versions of Sage?

no idea, I first asked Nicolas to test with `solver='GLPK'`.



---

archive/issue_comments_357234.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@jdemeyer](#comment%3A14):\n> Replying to [@zimmermann6](#comment%3A12):\n> > 2) the category of `QQ` changed:\n> > \n> > ```\n> > Failed example:\n> >     QQ.category()\n> > Expected:\n> >     Join of Category of quotient fields and Category of metric spaces\n> > Got:\n> >     Join of Category of number fields and Category of quotient fields and Category of metric spaces\n> > ```\n\n> \n> This is a good and intentional change: just change the expected output.\n\nthis is not possible, since we currently use Sage 8.0 for the book, and this will make the doctests fail with 8.0.",
    "created_at": "2017-09-15T10:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357234",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@jdemeyer](#comment%3A14):
> Replying to [@zimmermann6](#comment%3A12):
> > 2) the category of `QQ` changed:
> > 
> > ```
> > Failed example:
> >     QQ.category()
> > Expected:
> >     Join of Category of quotient fields and Category of metric spaces
> > Got:
> >     Join of Category of number fields and Category of quotient fields and Category of metric spaces
> > ```

> 
> This is a good and intentional change: just change the expected output.

this is not possible, since we currently use Sage 8.0 for the book, and this will make the doctests fail with 8.0.



---

archive/issue_comments_357235.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@zimmermann6](#comment%3A19):\n> this is not possible, since we currently use Sage 8.0 for the book, and this will make the doctests fail with 8.0.\n\nIs there any particular reason that you focus on 8.0? Given that the book is still in preparation, you could use Sage 8.1 instead.",
    "created_at": "2017-09-15T10:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357235",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@zimmermann6](#comment%3A19):
> this is not possible, since we currently use Sage 8.0 for the book, and this will make the doctests fail with 8.0.

Is there any particular reason that you focus on 8.0? Given that the book is still in preparation, you could use Sage 8.1 instead.



---

archive/issue_comments_357236.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n We should probably wait for the final version of the book before adding/updating doctests.\n \n **Upstream bugs**:\n-1. Using `scipy.sparse.lil_matrix` is now broken: https://github.com/numpy/numpy/pull/9691\n+1. Using `scipy.sparse.lil_matrix` is now broken: https://github.com/scipy/scipy/issues/7860 and https://github.com/numpy/numpy/pull/9691\n``````\n",
    "created_at": "2017-09-15T10:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357236",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 We should probably wait for the final version of the book before adding/updating doctests.
 
 **Upstream bugs**:
-1. Using `scipy.sparse.lil_matrix` is now broken: https://github.com/numpy/numpy/pull/9691
+1. Using `scipy.sparse.lil_matrix` is now broken: https://github.com/scipy/scipy/issues/7860 and https://github.com/numpy/numpy/pull/9691
``````




---

archive/issue_comments_357237.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,5 @@\n \n We should probably wait for the final version of the book before adding/updating doctests.\n \n-**Upstream bugs**:\n-1. Using `scipy.sparse.lil_matrix` is now broken: https://github.com/scipy/scipy/issues/7860 and https://github.com/numpy/numpy/pull/9691\n+**bugs found**:\n+1. Using `scipy.sparse.lil_matrix` is now broken: #23867\n``````\n",
    "created_at": "2017-09-15T11:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357237",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,5 @@
 
 We should probably wait for the final version of the book before adding/updating doctests.
 
-**Upstream bugs**:
-1. Using `scipy.sparse.lil_matrix` is now broken: https://github.com/scipy/scipy/issues/7860 and https://github.com/numpy/numpy/pull/9691
+**bugs found**:
+1. Using `scipy.sparse.lil_matrix` is now broken: #23867
``````




---

archive/issue_comments_357238.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nI opened #23867 for the `lil_matrix()` issue.",
    "created_at": "2017-09-15T11:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357238",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">Comment 23</div>

I opened #23867 for the `lil_matrix()` issue.



---

archive/issue_comments_357239.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nGeneral comment: all the doctests in the book which return types will change in Python 3. Python 2 uses `<type 'int'>` while Python 3 uses `<class 'int'>`.",
    "created_at": "2017-09-21T08:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357239",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">Comment 24</div>

General comment: all the doctests in the book which return types will change in Python 3. Python 2 uses `<type 'int'>` while Python 3 uses `<class 'int'>`.



---

archive/issue_comments_357240.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@jdemeyer](#comment%3A24):\n> General comment: all the doctests in the book which return types will change in Python 3. Python 2 uses `<type 'int'>` while Python 3 uses `<class 'int'>`.\n\nthanks Jeroen. Alas, there is nothing we can do for that, just wait for Python 3 and update.",
    "created_at": "2017-09-21T11:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357240",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@jdemeyer](#comment%3A24):
> General comment: all the doctests in the book which return types will change in Python 3. Python 2 uses `<type 'int'>` while Python 3 uses `<class 'int'>`.

thanks Jeroen. Alas, there is nothing we can do for that, just wait for Python 3 and update.



---

archive/issue_comments_357241.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nFor Sage doctests, you should write `<... 'int'>` instead of `<type 'int'>`.",
    "created_at": "2017-09-21T11:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357241",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">Comment 26</div>

For Sage doctests, you should write `<... 'int'>` instead of `<type 'int'>`.



---

archive/issue_comments_357242.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\ngood idea! I will do that change in the doctests.",
    "created_at": "2017-09-21T11:12:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357242",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:27" align="right">Comment 27</div>

good idea! I will do that change in the doctests.



---

archive/issue_comments_357243.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@jdemeyer](#comment%3A26):\n> For Sage doctests, you should write `<... 'int'>` instead of `<type 'int'>`.\n\nThis actually isn't necessary; the doctest parser already accounts for this minor difference.",
    "created_at": "2018-07-02T15:55:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357243",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@jdemeyer](#comment%3A26):
> For Sage doctests, you should write `<... 'int'>` instead of `<type 'int'>`.

This actually isn't necessary; the doctest parser already accounts for this minor difference.



---

archive/issue_comments_357244.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI can take this over.",
    "created_at": "2018-07-10T14:01:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357244",
    "user": "https://github.com/embray"
}
```

<div id="comment:29" align="right">Comment 29</div>

I can take this over.



---

archive/issue_comments_357245.json:
```json
{
    "body": "Assignee: **@embray**",
    "created_at": "2018-07-10T14:01:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357245",
    "user": "https://github.com/embray"
}
```

Assignee: **@embray**



---

archive/issue_events_309888.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-14T07:32:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309888"
}
```



---

archive/issue_events_309889.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-14T07:32:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309889"
}
```



---

archive/issue_events_309890.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-14T07:32:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309890"
}
```



---

archive/issue_events_309891.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-14T07:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309891"
}
```



---

archive/issue_comments_357246.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nGetting this done ASAP before 8.4 is out is pretty important, especially to make sure there's enough time to fix any failures that might still be lingering.",
    "created_at": "2018-09-14T07:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357246",
    "user": "https://github.com/embray"
}
```

<div id="comment:30" align="right">Comment 30</div>

Getting this done ASAP before 8.4 is out is pretty important, especially to make sure there's enough time to fix any failures that might still be lingering.



---

archive/issue_comments_357247.json:
```json
{
    "body": "Branch: **[u/embray/ticket-23572](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-23572)**",
    "created_at": "2018-09-14T10:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357247",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/ticket-23572](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-23572)**



---

archive/issue_comments_357248.json:
```json
{
    "body": "Commit: **[7f3490e](https://github.com/sagemath/sagetrac-mirror/commit/7f3490eba3cd65e5a3e90580cd8d040a04040bc8)**",
    "created_at": "2018-09-14T10:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357248",
    "user": "https://github.com/embray"
}
```

Commit: **[7f3490e](https://github.com/sagemath/sagetrac-mirror/commit/7f3490eba3cd65e5a3e90580cd8d040a04040bc8)**



---

archive/issue_comments_357249.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nCurrent versions of the examples/exercises.  There are still about half a dozen test failures, all of which are insubstantial and most of which stem from #25247, but will still need to be fixed.  The question is whether to fix them in the book, in the test suite, or both.\n\nFor one of them I'm getting a deprecation warning from scipy that we should probably heed:\n\n```\nsage -t --long src/sage/tests/books/sagebook/linsolve_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 385, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    x = cg(A, b, M = msc, tol=1.e-8)\nExpected nothing\nGot:\n    doctest:warning\n    ...\n    :\n    DeprecationWarning: scipy.sparse.linalg.cg called without specifying `atol`. The default value will be changed in a future release. For compatibility, specify a value for `atol` explicitly, e.g., ``cg(..., atol=0)``, or to retain the old behavior ``cg(..., atol='legacy')``\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f3490eba3cd65e5a3e90580cd8d040a04040bc8\">7f3490e</a></td><td><code>replace sage/tests/french_book with sage/tests/books/sagebook, containing</code></td></tr></table>\n",
    "created_at": "2018-09-14T10:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357249",
    "user": "https://github.com/embray"
}
```

<div id="comment:31" align="right">Comment 31</div>

Current versions of the examples/exercises.  There are still about half a dozen test failures, all of which are insubstantial and most of which stem from #25247, but will still need to be fixed.  The question is whether to fix them in the book, in the test suite, or both.

For one of them I'm getting a deprecation warning from scipy that we should probably heed:

```
sage -t --long src/sage/tests/books/sagebook/linsolve_doctest.py
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 385, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    x = cg(A, b, M = msc, tol=1.e-8)
Expected nothing
Got:
    doctest:warning
    ...
    :
    DeprecationWarning: scipy.sparse.linalg.cg called without specifying `atol`. The default value will be changed in a future release. For compatibility, specify a value for `atol` explicitly, e.g., ``cg(..., atol=0)``, or to retain the old behavior ``cg(..., atol='legacy')``
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f3490eba3cd65e5a3e90580cd8d040a04040bc8">7f3490e</a></td><td><code>replace sage/tests/french_book with sage/tests/books/sagebook, containing</code></td></tr></table>




---

archive/issue_comments_357250.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2018-09-14T10:03:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357250",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_events_309892.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-09-14T10:03:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309892"
}
```



---

archive/issue_comments_357251.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nErik,\n\n1) the examples of the book are now updated to Sage 8.3, and all examples pass with Sage 8.3\n\n2) about the conjugate gradient failure, there is no `atol` option in Sage 8.3, only `tol`,\nand using `atol=0` or `atol='legacy'` gives an error in Sage 8.3:\n\n```\nsage: x = cg(A, b, M = msc, tol=1.e-8, atol=0)       \n...\nTypeError: cg() got an unexpected keyword argument 'atol'\n```\nThe only solution I see is to ignore this warning in the doctests. How can we do this?",
    "created_at": "2018-09-18T15:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357251",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:33" align="right">Comment 33</div>

Erik,

1) the examples of the book are now updated to Sage 8.3, and all examples pass with Sage 8.3

2) about the conjugate gradient failure, there is no `atol` option in Sage 8.3, only `tol`,
and using `atol=0` or `atol='legacy'` gives an error in Sage 8.3:

```
sage: x = cg(A, b, M = msc, tol=1.e-8, atol=0)       
...
TypeError: cg() got an unexpected keyword argument 'atol'
```
The only solution I see is to ignore this warning in the doctests. How can we do this?



---

archive/issue_comments_357252.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nI'm not sure what to do about this--I don't recall what version of scipy is included by default with Sage 8.3, but in 8.4.beta5 it's now scipy 1.1.0, which wants you to specify `atol`.  \n\nI could have the test ignore that warning, but it would be better to just include a fixed version of that example in Sage.  The question is hhether to update the example in the book as well, or to just manually edit that one test in the copy included in the Sage tests.",
    "created_at": "2018-09-18T17:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357252",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">Comment 34</div>

I'm not sure what to do about this--I don't recall what version of scipy is included by default with Sage 8.3, but in 8.4.beta5 it's now scipy 1.1.0, which wants you to specify `atol`.  

I could have the test ignore that warning, but it would be better to just include a fixed version of that example in Sage.  The question is hhether to update the example in the book as well, or to just manually edit that one test in the copy included in the Sage tests.



---

archive/issue_comments_357253.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nEither way it would require manually modifying the test module.",
    "created_at": "2018-09-18T17:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357253",
    "user": "https://github.com/embray"
}
```

<div id="comment:35" align="right">Comment 35</div>

Either way it would require manually modifying the test module.



---

archive/issue_comments_357254.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nWe can't change the example in the book since it should work with Sage 8.3.\n\nI suggest you modify the doctest in the Sage distribution, by adding `atol='legacy'`.\n\nThis should solve this issue.",
    "created_at": "2018-09-19T06:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357254",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:36" align="right">Comment 36</div>

We can't change the example in the book since it should work with Sage 8.3.

I suggest you modify the doctest in the Sage distribution, by adding `atol='legacy'`.

This should solve this issue.



---

archive/issue_comments_357255.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nSo, to answer the more general question, if there are any examples from the book that no longer work exactly on Sage 8.4, I should copy them from the book as-is, and then *only* modify the copies that are added to Sage by this ticket?\n\nI ask because if any of the examples need to be modified, one will eventually want to get them back into the book for a future version.",
    "created_at": "2018-09-20T12:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357255",
    "user": "https://github.com/embray"
}
```

<div id="comment:37" align="right">Comment 37</div>

So, to answer the more general question, if there are any examples from the book that no longer work exactly on Sage 8.4, I should copy them from the book as-is, and then *only* modify the copies that are added to Sage by this ticket?

I ask because if any of the examples need to be modified, one will eventually want to get them back into the book for a future version.



---

archive/issue_comments_357256.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@embray](#comment%3A37):\n> So, to answer the more general question, if there are any examples from the book that no longer work exactly on Sage 8.4, I should copy them from the book as-is, and then *only* modify the copies that are added to Sage by this ticket?\n\nyes. But please tell me of any such examples. Maybe we can still modify them in the book so that they work both for 8.3 and 8.4 (this is unfortunately not possible for the `atol` issue above).",
    "created_at": "2018-09-21T07:03:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357256",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@embray](#comment%3A37):
> So, to answer the more general question, if there are any examples from the book that no longer work exactly on Sage 8.4, I should copy them from the book as-is, and then *only* modify the copies that are added to Sage by this ticket?

yes. But please tell me of any such examples. Maybe we can still modify them in the book so that they work both for 8.3 and 8.4 (this is unfortunately not possible for the `atol` issue above).



---

archive/issue_comments_357257.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nPerhaps I'll just create a branch on the book repo for now to add any relevant updates.",
    "created_at": "2018-09-21T12:19:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357257",
    "user": "https://github.com/embray"
}
```

<div id="comment:39" align="right">Comment 39</div>

Perhaps I'll just create a branch on the book repo for now to add any relevant updates.



---

archive/issue_comments_357258.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nFor completeness, these are the current failures I get against 8.4.beta6:\n\n```\nsage -t src/sage/tests/books/sagebook/integration_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 109, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    gp('intnum(x=0, 1, x^(-99/100))') # abs tol 1e-16\nExpected:\n    73.62914262423378365\nGot:\n    73.629142624233783843668417691077783339\nTolerance exceeded:\n    73.62914262423378365 vs 73.629142624233783843668417691077783339, tolerance 2e-16 > 1e-16\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 119, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 1e-16\nExpected:\n    74.47274932028288503\nGot:\n    74.472749320282885192304428135608736736\nTolerance exceeded:\n    74.47274932028288503 vs 74.472749320282885192304428135608736736, tolerance 2e-16 > 1e-16\n**********************************************************************\n1 item had failures:\n   2 of  87 in sage.tests.books.sagebook.integration_doctest\n    [86 tests, 2 failures, 23.25 s]\nsage -t src/sage/tests/books/sagebook/polynomes_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/polynomes_doctest.py\", line 240, in sage.tests.books.sagebook.polynomes_doctest\nFailed example:\n    r.reduce(); r\nExpected:\n    1.00000000000000/(-x + 1.00000000000000)\nGot:\n    -1.00000000000000/(x - 1.00000000000000)\n**********************************************************************\n1 item had failures:\n   1 of 111 in sage.tests.books.sagebook.polynomes_doctest\n    [110 tests, 1 failure, 2.23 s]\nsage -t src/sage/tests/books/sagebook/sol/integration_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/sol/integration_doctest.py\", line 39, in sage.tests.books.sagebook.sol.integration_doctest\nFailed example:\n    N(QuadNC(lambda x: x * log(1+x), 0, 1, 19)) # abs tol 1e-15\nExpected:\n    0.250000000000001\nGot:\n    0.249999999999999\nTolerance exceeded:\n    0.250000000000001 vs 0.249999999999999, tolerance 2e-15 > 1e-15\nFile \"src/sage/tests/books/sagebook/numbertheory_doctest.py\", line 34, in sage.tests.books.sagebook.numbertheory_doctest\nFailed example:\n    1/a\nExpected:\n    Traceback (most recent call last):\n      ...\n    ZeroDivisionError: Inverse does not exist.\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n...\n    ZeroDivisionError: inverse of Mod(3, 15) does not exist\n```\n\nMost of them seem to be caused by slight changes in PARI, though I'm not sure about the one with polynomes; obviously it's just choosing for some reason not to distribute the minus sign.\n\nThe last one is because the old exception message was slightly enhanced.",
    "created_at": "2018-09-25T11:25:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357258",
    "user": "https://github.com/embray"
}
```

<div id="comment:40" align="right">Comment 40</div>

For completeness, these are the current failures I get against 8.4.beta6:

```
sage -t src/sage/tests/books/sagebook/integration_doctest.py
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 109, in sage.tests.books.sagebook.integration_doctest
Failed example:
    gp('intnum(x=0, 1, x^(-99/100))') # abs tol 1e-16
Expected:
    73.62914262423378365
Got:
    73.629142624233783843668417691077783339
Tolerance exceeded:
    73.62914262423378365 vs 73.629142624233783843668417691077783339, tolerance 2e-16 > 1e-16
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 119, in sage.tests.books.sagebook.integration_doctest
Failed example:
    gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 1e-16
Expected:
    74.47274932028288503
Got:
    74.472749320282885192304428135608736736
Tolerance exceeded:
    74.47274932028288503 vs 74.472749320282885192304428135608736736, tolerance 2e-16 > 1e-16
**********************************************************************
1 item had failures:
   2 of  87 in sage.tests.books.sagebook.integration_doctest
    [86 tests, 2 failures, 23.25 s]
sage -t src/sage/tests/books/sagebook/polynomes_doctest.py
**********************************************************************
File "src/sage/tests/books/sagebook/polynomes_doctest.py", line 240, in sage.tests.books.sagebook.polynomes_doctest
Failed example:
    r.reduce(); r
Expected:
    1.00000000000000/(-x + 1.00000000000000)
Got:
    -1.00000000000000/(x - 1.00000000000000)
**********************************************************************
1 item had failures:
   1 of 111 in sage.tests.books.sagebook.polynomes_doctest
    [110 tests, 1 failure, 2.23 s]
sage -t src/sage/tests/books/sagebook/sol/integration_doctest.py
**********************************************************************
File "src/sage/tests/books/sagebook/sol/integration_doctest.py", line 39, in sage.tests.books.sagebook.sol.integration_doctest
Failed example:
    N(QuadNC(lambda x: x * log(1+x), 0, 1, 19)) # abs tol 1e-15
Expected:
    0.250000000000001
Got:
    0.249999999999999
Tolerance exceeded:
    0.250000000000001 vs 0.249999999999999, tolerance 2e-15 > 1e-15
File "src/sage/tests/books/sagebook/numbertheory_doctest.py", line 34, in sage.tests.books.sagebook.numbertheory_doctest
Failed example:
    1/a
Expected:
    Traceback (most recent call last):
      ...
    ZeroDivisionError: Inverse does not exist.
Got:
    <BLANKLINE>
    Traceback (most recent call last):
...
    ZeroDivisionError: inverse of Mod(3, 15) does not exist
```

Most of them seem to be caused by slight changes in PARI, though I'm not sure about the one with polynomes; obviously it's just choosing for some reason not to distribute the minus sign.

The last one is because the old exception message was slightly enhanced.



---

archive/issue_comments_357259.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nErik, I fixed the error tolerances in the book. Please could you check again?\n\nFor the failure in polynomes, is there a way in the doctests to check we get one of both outputs?\n\nFor the numbertheory failure, it is unfortunate the error message did change. Is there a way to check for \"ZeroDivisionError: ... does not exist\" in the doctest?",
    "created_at": "2018-09-26T08:39:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357259",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:41" align="right">Comment 41</div>

Erik, I fixed the error tolerances in the book. Please could you check again?

For the failure in polynomes, is there a way in the doctests to check we get one of both outputs?

For the numbertheory failure, it is unfortunate the error message did change. Is there a way to check for "ZeroDivisionError: ... does not exist" in the doctest?



---

archive/issue_comments_357260.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nReplying to [@zimmermann6](#comment%3A41):\n> Erik, I fixed the error tolerances in the book. Please could you check again?\n\nI will double check, but yesterday I pulled down the latest version of the book, rebuilt it, and re-copied the files.  I can try doing it one more time, perhaps with with a clean of the repository first...\n\n> For the failure in polynomes, is there a way in the doctests to check we get one of both outputs?\n\nTheoretically you could check for both, but it would make for a rather ugly test like:\n\n```\nsage: repr(r) in ['1.00000000000000/(-x + 1.00000000000000)', '-1.00000000000000/(x - 1.00000000000000)']\nTrue\n```\n\nRather than checking for one of both it would be better to simply check the result by value like:\n\n```\nsage: r == -1.0/(x - 1.0)\n```\n\nor something like that.  There might also be a way to normalize it; I'll take a close look.\n\n\n\n> For the numbertheory failure, it is unfortunate the error message did change. Is there a way to check for \"ZeroDivisionError: ... does not exist\" in the doctest?\n\nI don't think it's that \"unfortunate\".  It did change for the better, and in 8.4, whereas I had thought the book was still aiming specifically at 8.3.  While having these tests in the Sage test suite is an important way to keep track of how our changes impact real use cases, it should not block useful changes that happen to deviate from the book (especially in trivial ways).\n\nI don't see any point in changing the doctest in Sage to be less specific.  If you want to change it in the book, `ZeroDivisionEror: ...does not exist` would work, but is maybe a bit ugly and uninformative...?",
    "created_at": "2018-09-26T09:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357260",
    "user": "https://github.com/embray"
}
```

<div id="comment:42" align="right">Comment 42</div>

Replying to [@zimmermann6](#comment%3A41):
> Erik, I fixed the error tolerances in the book. Please could you check again?

I will double check, but yesterday I pulled down the latest version of the book, rebuilt it, and re-copied the files.  I can try doing it one more time, perhaps with with a clean of the repository first...

> For the failure in polynomes, is there a way in the doctests to check we get one of both outputs?

Theoretically you could check for both, but it would make for a rather ugly test like:

```
sage: repr(r) in ['1.00000000000000/(-x + 1.00000000000000)', '-1.00000000000000/(x - 1.00000000000000)']
True
```

Rather than checking for one of both it would be better to simply check the result by value like:

```
sage: r == -1.0/(x - 1.0)
```

or something like that.  There might also be a way to normalize it; I'll take a close look.



> For the numbertheory failure, it is unfortunate the error message did change. Is there a way to check for "ZeroDivisionError: ... does not exist" in the doctest?

I don't think it's that "unfortunate".  It did change for the better, and in 8.4, whereas I had thought the book was still aiming specifically at 8.3.  While having these tests in the Sage test suite is an important way to keep track of how our changes impact real use cases, it should not block useful changes that happen to deviate from the book (especially in trivial ways).

I don't see any point in changing the doctest in Sage to be less specific.  If you want to change it in the book, `ZeroDivisionEror: ...does not exist` would work, but is maybe a bit ugly and uninformative...?



---

archive/issue_comments_357261.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nErik,\n\nfor the \"polynomes\" failure, I have added the doctest you suggest with `repr` (the second one you propose also works before `r.reduce()`, thus is not enough).\n\nFor the \"numbertheory\" failure, I have added \"test=false\", so this example is not tested any more.\n\nAll doctests still work with Sage 8.3.\n\nPlease could you check they all work with 8.4beta6?\n\nThank you.",
    "created_at": "2018-09-26T11:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357261",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:43" align="right">Comment 43</div>

Erik,

for the "polynomes" failure, I have added the doctest you suggest with `repr` (the second one you propose also works before `r.reduce()`, thus is not enough).

For the "numbertheory" failure, I have added "test=false", so this example is not tested any more.

All doctests still work with Sage 8.3.

Please could you check they all work with 8.4beta6?

Thank you.



---

archive/issue_comments_357262.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nReplying to [@zimmermann6](#comment%3A43):\n> Erik,\n> \n> for the \"polynomes\" failure, I have added the doctest you suggest with `repr` (the second one you propose also works before `r.reduce()`, thus is not enough).\n\nI really wouldn't....  My whole point was it was not a good test, and even worse as an example in a book.  Let me see if there is a better way to write this example; I just haven't tried yet.\n\n> For the \"numbertheory\" failure, I have added \"test=false\", so this example is not tested any more.\n> \n> All doctests still work with Sage 8.3.\n> \n> Please could you check they all work with 8.4beta6?\n\nThat's what I'm currently testing against...",
    "created_at": "2018-09-26T11:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357262",
    "user": "https://github.com/sagetrac-gitlab-bot"
}
```

<div id="comment:44" align="right">Comment 44</div>

Replying to [@zimmermann6](#comment%3A43):
> Erik,
> 
> for the "polynomes" failure, I have added the doctest you suggest with `repr` (the second one you propose also works before `r.reduce()`, thus is not enough).

I really wouldn't....  My whole point was it was not a good test, and even worse as an example in a book.  Let me see if there is a better way to write this example; I just haven't tried yet.

> For the "numbertheory" failure, I have added "test=false", so this example is not tested any more.
> 
> All doctests still work with Sage 8.3.
> 
> Please could you check they all work with 8.4beta6?

That's what I'm currently testing against...



---

archive/issue_comments_357263.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nSorry, the above was me.  Forgot I was still logged in as my bot :)",
    "created_at": "2018-09-26T11:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357263",
    "user": "https://github.com/embray"
}
```

<div id="comment:45" align="right">Comment 45</div>

Sorry, the above was me.  Forgot I was still logged in as my bot :)



---

archive/issue_comments_357264.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nOkay, I double-checked and as I suspected I am up to date with the book files, and still get slight floating point difference in the tests I mentioned previously.  I wonder if there has been a PARI or Cypari update since 8.3.\n\nAnyways, this diff is all I need for the tests to pass:\n\n```diff\ndiff --git a/src/sage/tests/books/sagebook/integration_doctest.py b/src/sage/tests/books/sagebook/integration_doctest.py\nindex 4f2699c..1a7c610 100644\n--- a/src/sage/tests/books/sagebook/integration_doctest.py\n+++ b/src/sage/tests/books/sagebook/integration_doctest.py\n@@ -106,7 +106,7 @@ Sage example in ./integration.tex, line 717::\n Sage example in ./integration.tex, line 745::\n\n   sage: p = gp.set_precision(old_prec) # we reset the default precision\n-  sage: gp('intnum(x=0, 1, x^(-99/100))') # abs tol 1e-16\n+  sage: gp('intnum(x=0, 1, x^(-99/100))') # abs tol 2e-16\n   73.62914262423378365\n\n Sage example in ./integration.tex, line 753::\n@@ -116,7 +116,7 @@ Sage example in ./integration.tex, line 753::\n\n Sage example in ./integration.tex, line 764::\n\n-  sage: gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 1e-16\n+  sage: gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 2e-16\n   74.47274932028288503\n\n Sage example in ./integration.tex, line 783::\ndiff --git a/src/sage/tests/books/sagebook/linsolve_doctest.py b/src/sage/tests/books/sagebook/linsolve_doctest.py\nindex 552bfc2..812b6b7 100644\n--- a/src/sage/tests/books/sagebook/linsolve_doctest.py\n+++ b/src/sage/tests/books/sagebook/linsolve_doctest.py\n@@ -382,7 +382,7 @@ Sage example in ./linsolve.tex, line 2721::\n   ....:     m[i,i] = 1./A[i,i]\n   sage: msc = m.tocsc()\n   sage: from scipy.sparse.linalg import cg\n-  sage: x = cg(A, b, M = msc, tol=1.e-8)\n+  sage: x = cg(A, b, M=msc, atol=1.e-8)\n\n Sage example in ./linsolve.tex, line 2782::\n\ndiff --git a/src/sage/tests/books/sagebook/numbertheory_doctest.py b/src/sage/tests/books/sagebook/numbertheory_doctest.py\nindex cb8e331..09b291d 100644\n--- a/src/sage/tests/books/sagebook/numbertheory_doctest.py\n+++ b/src/sage/tests/books/sagebook/numbertheory_doctest.py\n@@ -34,7 +34,7 @@ Sage example in ./numbertheory.tex, line 174::\n   sage: 1/a\n   Traceback (most recent call last):\n     ...\n-  ZeroDivisionError: Inverse does not exist.\n+  ZeroDivisionError: inverse of Mod(3, 15) does not exist\n\n Sage example in ./numbertheory.tex, line 199::\n\ndiff --git a/src/sage/tests/books/sagebook/polynomes_doctest.py b/src/sage/tests/books/sagebook/polynomes_doctest.py\nindex 926922d..77ba536 100644\n--- a/src/sage/tests/books/sagebook/polynomes_doctest.py\n+++ b/src/sage/tests/books/sagebook/polynomes_doctest.py\n@@ -238,7 +238,7 @@ Sage example in ./polynomes.tex, line 1399::\n Sage example in ./polynomes.tex, line 1411::\n\n   sage: r.reduce(); r\n-  1.00000000000000/(-x + 1.00000000000000)\n+  -1.00000000000000/(x - 1.00000000000000)\n\n Sage example in ./polynomes.tex, line 1487::\n\ndiff --git a/src/sage/tests/books/sagebook/sol/integration_doctest.py b/src/sage/tests/books/sagebook/sol/integration_doctest.py\nindex 518dcc9..b2c2e68 100644\n--- a/src/sage/tests/books/sagebook/sol/integration_doctest.py\n+++ b/src/sage/tests/books/sagebook/sol/integration_doctest.py\n@@ -36,7 +36,7 @@ Sage example in ./sol/integration.tex, line 58::\n\n   sage: numerical_integral(x * log(1+x), 0, 1)\n   (0.25, 2.7755575615628914e-15)\n-  sage: N(QuadNC(lambda x: x * log(1+x), 0, 1, 19)) # abs tol 1e-15\n+  sage: N(QuadNC(lambda x: x * log(1+x), 0, 1, 19)) # abs tol 2e-15\n   0.250000000000001\n   sage: numerical_integral(sqrt(1-x^2), 0, 1)\n   (0.785398167726482..., 9.042725224567119...e-07)\n```\n\nI still think the best thing to do is to apply that just in the sage doctests, and then duplicate it to a branch in the book for future updates.",
    "created_at": "2018-09-26T16:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357264",
    "user": "https://github.com/embray"
}
```

<div id="comment:46" align="right">Comment 46</div>

Okay, I double-checked and as I suspected I am up to date with the book files, and still get slight floating point difference in the tests I mentioned previously.  I wonder if there has been a PARI or Cypari update since 8.3.

Anyways, this diff is all I need for the tests to pass:

```diff
diff --git a/src/sage/tests/books/sagebook/integration_doctest.py b/src/sage/tests/books/sagebook/integration_doctest.py
index 4f2699c..1a7c610 100644
--- a/src/sage/tests/books/sagebook/integration_doctest.py
+++ b/src/sage/tests/books/sagebook/integration_doctest.py
@@ -106,7 +106,7 @@ Sage example in ./integration.tex, line 717::
 Sage example in ./integration.tex, line 745::

   sage: p = gp.set_precision(old_prec) # we reset the default precision
-  sage: gp('intnum(x=0, 1, x^(-99/100))') # abs tol 1e-16
+  sage: gp('intnum(x=0, 1, x^(-99/100))') # abs tol 2e-16
   73.62914262423378365

 Sage example in ./integration.tex, line 753::
@@ -116,7 +116,7 @@ Sage example in ./integration.tex, line 753::

 Sage example in ./integration.tex, line 764::

-  sage: gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 1e-16
+  sage: gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 2e-16
   74.47274932028288503

 Sage example in ./integration.tex, line 783::
diff --git a/src/sage/tests/books/sagebook/linsolve_doctest.py b/src/sage/tests/books/sagebook/linsolve_doctest.py
index 552bfc2..812b6b7 100644
--- a/src/sage/tests/books/sagebook/linsolve_doctest.py
+++ b/src/sage/tests/books/sagebook/linsolve_doctest.py
@@ -382,7 +382,7 @@ Sage example in ./linsolve.tex, line 2721::
   ....:     m[i,i] = 1./A[i,i]
   sage: msc = m.tocsc()
   sage: from scipy.sparse.linalg import cg
-  sage: x = cg(A, b, M = msc, tol=1.e-8)
+  sage: x = cg(A, b, M=msc, atol=1.e-8)

 Sage example in ./linsolve.tex, line 2782::

diff --git a/src/sage/tests/books/sagebook/numbertheory_doctest.py b/src/sage/tests/books/sagebook/numbertheory_doctest.py
index cb8e331..09b291d 100644
--- a/src/sage/tests/books/sagebook/numbertheory_doctest.py
+++ b/src/sage/tests/books/sagebook/numbertheory_doctest.py
@@ -34,7 +34,7 @@ Sage example in ./numbertheory.tex, line 174::
   sage: 1/a
   Traceback (most recent call last):
     ...
-  ZeroDivisionError: Inverse does not exist.
+  ZeroDivisionError: inverse of Mod(3, 15) does not exist

 Sage example in ./numbertheory.tex, line 199::

diff --git a/src/sage/tests/books/sagebook/polynomes_doctest.py b/src/sage/tests/books/sagebook/polynomes_doctest.py
index 926922d..77ba536 100644
--- a/src/sage/tests/books/sagebook/polynomes_doctest.py
+++ b/src/sage/tests/books/sagebook/polynomes_doctest.py
@@ -238,7 +238,7 @@ Sage example in ./polynomes.tex, line 1399::
 Sage example in ./polynomes.tex, line 1411::

   sage: r.reduce(); r
-  1.00000000000000/(-x + 1.00000000000000)
+  -1.00000000000000/(x - 1.00000000000000)

 Sage example in ./polynomes.tex, line 1487::

diff --git a/src/sage/tests/books/sagebook/sol/integration_doctest.py b/src/sage/tests/books/sagebook/sol/integration_doctest.py
index 518dcc9..b2c2e68 100644
--- a/src/sage/tests/books/sagebook/sol/integration_doctest.py
+++ b/src/sage/tests/books/sagebook/sol/integration_doctest.py
@@ -36,7 +36,7 @@ Sage example in ./sol/integration.tex, line 58::

   sage: numerical_integral(x * log(1+x), 0, 1)
   (0.25, 2.7755575615628914e-15)
-  sage: N(QuadNC(lambda x: x * log(1+x), 0, 1, 19)) # abs tol 1e-15
+  sage: N(QuadNC(lambda x: x * log(1+x), 0, 1, 19)) # abs tol 2e-15
   0.250000000000001
   sage: numerical_integral(sqrt(1-x^2), 0, 1)
   (0.785398167726482..., 9.042725224567119...e-07)
```

I still think the best thing to do is to apply that just in the sage doctests, and then duplicate it to a branch in the book for future updates.



---

archive/issue_comments_357265.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nErik, the `abs tol` changes were already applied in the book sources, thus you should not need them any more.\n\nAs I told before, we cannot apply the `atol` change since the example would not work any more with Sage 8.3, which is the version we use in the book (and the latest release at that time). I have just added `test=false` to that example, thus it should not appear any more in the doctests.\n\nFor the numbertheory issue, I have also put `test=false` in the book sources, thus it should no longer be tested.\n\nAnd finally for the polynomes issue, I have replaced the test by the one using `repr(r)` that you suggested (in silent mode).\n\nIn summary, if you regenerate the doctests with revision 739453a of the book sources, all doctests should pass with both 8.3 and 8.4beta. Please can you confirm?",
    "created_at": "2018-09-27T07:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357265",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:47" align="right">Comment 47</div>

Erik, the `abs tol` changes were already applied in the book sources, thus you should not need them any more.

As I told before, we cannot apply the `atol` change since the example would not work any more with Sage 8.3, which is the version we use in the book (and the latest release at that time). I have just added `test=false` to that example, thus it should not appear any more in the doctests.

For the numbertheory issue, I have also put `test=false` in the book sources, thus it should no longer be tested.

And finally for the polynomes issue, I have replaced the test by the one using `repr(r)` that you suggested (in silent mode).

In summary, if you regenerate the doctests with revision 739453a of the book sources, all doctests should pass with both 8.3 and 8.4beta. Please can you confirm?



---

archive/issue_comments_357266.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nReplying to [@zimmermann6](#comment%3A47):\n> Erik, the `abs tol` changes were already applied in the book sources, thus you should not need them any more.\n\nOk. I see you did that yesterday, *after* I already double-checked.\n\n> As I told before, we cannot apply the `atol` change since the example would not work any more with Sage 8.3, which is the version we use in the book (and the latest release at that time). I have just added `test=false` to that example, thus it should not appear any more in the doctests.\n\nIf you say so.  My point is just that it's a test that can work fine when modified.  Perhaps it's not worth testing though since it's just a scipy function.\n\n> For the numbertheory issue, I have also put `test=false` in the book sources, thus it should no longer be tested.\n> \n> And finally for the polynomes issue, I have replaced the test by the one using `repr(r)` that you suggested (in silent mode).\n\nThat helps, but I still don't think it's a good way to test this.",
    "created_at": "2018-09-27T08:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357266",
    "user": "https://github.com/embray"
}
```

<div id="comment:48" align="right">Comment 48</div>

Replying to [@zimmermann6](#comment%3A47):
> Erik, the `abs tol` changes were already applied in the book sources, thus you should not need them any more.

Ok. I see you did that yesterday, *after* I already double-checked.

> As I told before, we cannot apply the `atol` change since the example would not work any more with Sage 8.3, which is the version we use in the book (and the latest release at that time). I have just added `test=false` to that example, thus it should not appear any more in the doctests.

If you say so.  My point is just that it's a test that can work fine when modified.  Perhaps it's not worth testing though since it's just a scipy function.

> For the numbertheory issue, I have also put `test=false` in the book sources, thus it should no longer be tested.
> 
> And finally for the polynomes issue, I have replaced the test by the one using `repr(r)` that you suggested (in silent mode).

That helps, but I still don't think it's a good way to test this.



---

archive/issue_comments_357267.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nI guess, my point is, if there's a `[silent]` copy of that test in the book source, solely for the purpose of generating doctests to into Sage's test suite, then it might as well just be the version of the test that works on Sage 8.4.  There's no reason at all for it to work on 8.3.",
    "created_at": "2018-09-27T08:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357267",
    "user": "https://github.com/embray"
}
```

<div id="comment:49" align="right">Comment 49</div>

I guess, my point is, if there's a `[silent]` copy of that test in the book source, solely for the purpose of generating doctests to into Sage's test suite, then it might as well just be the version of the test that works on Sage 8.4.  There's no reason at all for it to work on 8.3.



---

archive/issue_comments_357268.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nTo be clear, the result here should be deterministic.  Looking at the diffs, there was some work done in this area recently.",
    "created_at": "2018-09-27T08:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357268",
    "user": "https://github.com/embray"
}
```

<div id="comment:50" align="right">Comment 50</div>

To be clear, the result here should be deterministic.  Looking at the diffs, there was some work done in this area recently.



---

archive/issue_comments_357269.json:
```json
{
    "body": "Changed commit from **[7f3490e](https://github.com/sagemath/sagetrac-mirror/commit/7f3490eba3cd65e5a3e90580cd8d040a04040bc8)** to **[d801481](https://github.com/sagemath/sagetrac-mirror/commit/d8014819b4a93c41c5ef0cdd73a8851b11806a07)**",
    "created_at": "2018-10-05T10:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357269",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7f3490e](https://github.com/sagemath/sagetrac-mirror/commit/7f3490eba3cd65e5a3e90580cd8d040a04040bc8)** to **[d801481](https://github.com/sagemath/sagetrac-mirror/commit/d8014819b4a93c41c5ef0cdd73a8851b11806a07)**



---

archive/issue_comments_357270.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8014819b4a93c41c5ef0cdd73a8851b11806a07\">d801481</a></td><td><code>replace sage/tests/french_book with sage/tests/books/sagebook, containing</code></td></tr></table>\n",
    "created_at": "2018-10-05T10:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357270",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51" align="right">Comment 51</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8014819b4a93c41c5ef0cdd73a8851b11806a07">d801481</a></td><td><code>replace sage/tests/french_book with sage/tests/books/sagebook, containing</code></td></tr></table>




---

archive/issue_comments_357271.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nWell, I went ahead and updated this from the latest version of the book, and now all tests pass, so let's just go with it.  I am still confused, Paul, about what exactly your long-term intentions are w.r.t. keeping the book+sage+doctests all in sync.  But this is good enough for now.\n\nVolker, if we could have this merged in 8.4 that would be ideal.  If for some reason it has to wait, I will do my best to ensure that these tests are still passing (which shouldn't be the problem, as I believe the time has passed for non-critical changes to 8.4), but it should definitely be merged first thing after 8.4 is released, if not before.",
    "created_at": "2018-10-05T10:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357271",
    "user": "https://github.com/embray"
}
```

<div id="comment:52" align="right">Comment 52</div>

Well, I went ahead and updated this from the latest version of the book, and now all tests pass, so let's just go with it.  I am still confused, Paul, about what exactly your long-term intentions are w.r.t. keeping the book+sage+doctests all in sync.  But this is good enough for now.

Volker, if we could have this merged in 8.4 that would be ideal.  If for some reason it has to wait, I will do my best to ensure that these tests are still passing (which shouldn't be the problem, as I believe the time has passed for non-critical changes to 8.4), but it should definitely be merged first thing after 8.4 is released, if not before.



---

archive/issue_events_309893.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-05T10:55:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309893"
}
```



---

archive/issue_events_309894.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-05T10:55:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309894"
}
```



---

archive/issue_comments_357272.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nsorry for the delay, I was busy with the book itself.\n\nErik, the goal of including this into Sage is that people changing the behavior of Sage know when they break examples in the french book, which is the same I guess for other stuff in `sage/tests`.\n\nIt would be nice if someone could review that ticket (as author of the book, I feel in conflict of interest).",
    "created_at": "2018-10-17T16:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357272",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:53" align="right">Comment 53</div>

sorry for the delay, I was busy with the book itself.

Erik, the goal of including this into Sage is that people changing the behavior of Sage know when they break examples in the french book, which is the same I guess for other stuff in `sage/tests`.

It would be nice if someone could review that ticket (as author of the book, I feel in conflict of interest).



---

archive/issue_comments_357273.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nReplying to [@zimmermann6](#comment%3A53):\n> sorry for the delay, I was busy with the book itself.\n> \n> Erik, the goal of including this into Sage is that people changing the behavior of Sage know when they break examples in the french book, which is the same I guess for other stuff in `sage/tests`.\n\nI understand that obviously, and that wasn't my question. My question is to what extent do you expect Sage development to conform to the examples in the book and for how long; and what is your goal for handling cases where changes to Sage do necessarily break examples from the book? As we saw from moving from 8.3 to 8.4 there were changes that \"broke\" the examples, albeit usually in mostly trivial ways, but that were changes for the better that should not have been held back just because it would have caused some differences from published books. \n\nIIUC the goal here is to just conform with the version of Sage that the book claims to conform to. But if the book needs to be updated in the future the question is how to go about that.",
    "created_at": "2018-10-17T16:33:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357273",
    "user": "https://github.com/embray"
}
```

<div id="comment:54" align="right">Comment 54</div>

Replying to [@zimmermann6](#comment%3A53):
> sorry for the delay, I was busy with the book itself.
> 
> Erik, the goal of including this into Sage is that people changing the behavior of Sage know when they break examples in the french book, which is the same I guess for other stuff in `sage/tests`.

I understand that obviously, and that wasn't my question. My question is to what extent do you expect Sage development to conform to the examples in the book and for how long; and what is your goal for handling cases where changes to Sage do necessarily break examples from the book? As we saw from moving from 8.3 to 8.4 there were changes that "broke" the examples, albeit usually in mostly trivial ways, but that were changes for the better that should not have been held back just because it would have caused some differences from published books. 

IIUC the goal here is to just conform with the version of Sage that the book claims to conform to. But if the book needs to be updated in the future the question is how to go about that.



---

archive/issue_comments_357274.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nMaybe the book should avoid using \".next()\", \"<>\", \"xrange\" and \".iteritems\", no ??\n\nSee the patchbot plugins for the long list of python3 incompatibilities...",
    "created_at": "2018-10-17T18:09:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357274",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:55" align="right">Comment 55</div>

Maybe the book should avoid using ".next()", "<>", "xrange" and ".iteritems", no ??

See the patchbot plugins for the long list of python3 incompatibilities...



---

archive/issue_comments_357275.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nReplying to [@fchapoton](#comment%3A55):\n> Maybe the book should avoid using \".next()\", \"<>\", \"xrange\" and \".iteritems\", no ??\n> \n> See the patchbot plugins for the long list of python3 incompatibilities...\n\nsorry, this is too late. The book is now in press. Maybe for the next edition?",
    "created_at": "2018-10-18T07:20:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357275",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:56" align="right">Comment 56</div>

Replying to [@fchapoton](#comment%3A55):
> Maybe the book should avoid using ".next()", "<>", "xrange" and ".iteritems", no ??
> 
> See the patchbot plugins for the long list of python3 incompatibilities...

sorry, this is too late. The book is now in press. Maybe for the next edition?



---

archive/issue_comments_357276.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nErik,\n\n[...]\n\n> I understand that obviously, and that wasn't my question. My question is to what extent do you expect Sage development to conform to the examples in the book and for how long; and what is your goal for handling cases where changes to Sage do necessarily break examples from the book? As we saw from moving from 8.3 to 8.4 there were changes that \"broke\" the examples, albeit usually in mostly trivial ways, but that were changes for the better that should not have been held back just because it would have caused some differences from published books. \n> \n> IIUC the goal here is to just conform with the version of Sage that the book claims to conform to. But if the book needs to be updated in the future the question is how to go about that. \n\nthe Sage developers will decide what is best, like they did in the past, between changing the behavior of Sage and breaking examples from published material. I cannot decide for them to what extent or how long.\n\nThe goal is (1) to inform the Sage developers about published material that they could break, and (2) to inform the authors of the book (by adding them in cc of the corresponding tickets) when changes are made that break some examples. In case (2) we will then discuss together case-by-case, and maybe it will be an opportunity to improve the examples in the book.",
    "created_at": "2018-10-18T07:31:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357276",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:57" align="right">Comment 57</div>

Erik,

[...]

> I understand that obviously, and that wasn't my question. My question is to what extent do you expect Sage development to conform to the examples in the book and for how long; and what is your goal for handling cases where changes to Sage do necessarily break examples from the book? As we saw from moving from 8.3 to 8.4 there were changes that "broke" the examples, albeit usually in mostly trivial ways, but that were changes for the better that should not have been held back just because it would have caused some differences from published books. 
> 
> IIUC the goal here is to just conform with the version of Sage that the book claims to conform to. But if the book needs to be updated in the future the question is how to go about that. 

the Sage developers will decide what is best, like they did in the past, between changing the behavior of Sage and breaking examples from published material. I cannot decide for them to what extent or how long.

The goal is (1) to inform the Sage developers about published material that they could break, and (2) to inform the authors of the book (by adding them in cc of the corresponding tickets) when changes are made that break some examples. In case (2) we will then discuss together case-by-case, and maybe it will be an opportunity to improve the examples in the book.



---

archive/issue_comments_357277.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nReplying to [@zimmermann6](#comment%3A56):\n> Replying to [@fchapoton](#comment%3A55):\n> > Maybe the book should avoid using \".next()\", \"<>\", \"xrange\" and \".iteritems\", no ??\n> > \n> > See the patchbot plugins for the long list of python3 incompatibilities...\n\n> \n> sorry, this is too late. The book is now in press. Maybe for the next edition?\n\nOk. But my point is that we are not going to accept here and now any doctest that does not pass on python3.",
    "created_at": "2018-10-18T07:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357277",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:58" align="right">Comment 58</div>

Replying to [@zimmermann6](#comment%3A56):
> Replying to [@fchapoton](#comment%3A55):
> > Maybe the book should avoid using ".next()", "<>", "xrange" and ".iteritems", no ??
> > 
> > See the patchbot plugins for the long list of python3 incompatibilities...

> 
> sorry, this is too late. The book is now in press. Maybe for the next edition?

Ok. But my point is that we are not going to accept here and now any doctest that does not pass on python3.



---

archive/issue_comments_357278.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\n> Ok. But my point is that we are not going to accept here and now any doctest that does not pass on python3. \n\nNicolas (which I added in cc) checked some time ago with Python3, and if I recall correctly, all tests did pass. Nicolas please can you confirm?",
    "created_at": "2018-10-18T07:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357278",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:59" align="right">Comment 59</div>

> Ok. But my point is that we are not going to accept here and now any doctest that does not pass on python3. 

Nicolas (which I added in cc) checked some time ago with Python3, and if I recall correctly, all tests did pass. Nicolas please can you confirm?



---

archive/issue_comments_357279.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nMany doctests are not passing with python3. Among them, some (a lot) are not your fault, just failing because sage is not yet fully ready to run with python3.\n\nBut many are caused by bad doctests in the books : use of .next, use of <>, use of xrange, etc\n\nFor example, every doctest starting with map must be wrapped with list(map(..)):\n\n```\nFailed example:\n    map (cos, [0, pi/6, pi/4, pi/3, pi/2])\nExpected:\n    [1, 1/2*sqrt(3), 1/2*sqrt(2), 1/2, 0]\nGot:\n    <map object at 0x7f1c2dd9cf28>\n```\nAn example for xrange:\n\n```\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 36, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    interp_points = [(1+2*u/(n-1), N(f(1+2*u/(n-1))))\n                     for u in xrange(n)]\nException raised:\n    Traceback (most recent call last):\n      File \"/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/doctest/forker.py\", line 659, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/doctest/forker.py\", line 1070, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.books.sagebook.integration_doctest[7]>\", line 2, in <module>\n        for u in xrange(n)]\n    NameError: name 'xrange' is not defined\n```\n\nAnd the global test result:\n\n```\nsage -t --long --warn-long src/sage/tests/books/sagebook/combinat_doctest.py  # 25 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/float_doctest.py  # 3 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/graphique_doctest.py  # 1 doctest failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/graphtheory_doctest.py  # 11 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/lp_doctest.py  # 1 doctest failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/mpoly_doctest.py  # 19 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/programmation_doctest.py  # 23 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/nonlinear_doctest.py  # 24 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/linsolve_doctest.py  # 2 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/polynomes_doctest.py  # 1 doctest failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/integration_doctest.py  # 5 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/sol/combinat_doctest.py  # 1 doctest failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/sol/graphique_doctest.py  # 2 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/sol/graphtheory_doctest.py  # 1 doctest failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/sol/mpoly_doctest.py  # 6 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/sol/nonlinear_doctest.py  # 2 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/sol/numbertheory_doctest.py  # 11 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/sol/polynomes_doctest.py  # 4 doctests failed\nsage -t --long --warn-long src/sage/tests/books/sagebook/sol/integration_doctest.py  # 6 doctests failed\n```",
    "created_at": "2018-10-18T10:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357279",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:60" align="right">Comment 60</div>

Many doctests are not passing with python3. Among them, some (a lot) are not your fault, just failing because sage is not yet fully ready to run with python3.

But many are caused by bad doctests in the books : use of .next, use of <>, use of xrange, etc

For example, every doctest starting with map must be wrapped with list(map(..)):

```
Failed example:
    map (cos, [0, pi/6, pi/4, pi/3, pi/2])
Expected:
    [1, 1/2*sqrt(3), 1/2*sqrt(2), 1/2, 0]
Got:
    <map object at 0x7f1c2dd9cf28>
```
An example for xrange:

```
File "src/sage/tests/books/sagebook/integration_doctest.py", line 36, in sage.tests.books.sagebook.integration_doctest
Failed example:
    interp_points = [(1+2*u/(n-1), N(f(1+2*u/(n-1))))
                     for u in xrange(n)]
Exception raised:
    Traceback (most recent call last):
      File "/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/doctest/forker.py", line 659, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/doctest/forker.py", line 1070, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.books.sagebook.integration_doctest[7]>", line 2, in <module>
        for u in xrange(n)]
    NameError: name 'xrange' is not defined
```

And the global test result:

```
sage -t --long --warn-long src/sage/tests/books/sagebook/combinat_doctest.py  # 25 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/float_doctest.py  # 3 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/graphique_doctest.py  # 1 doctest failed
sage -t --long --warn-long src/sage/tests/books/sagebook/graphtheory_doctest.py  # 11 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/lp_doctest.py  # 1 doctest failed
sage -t --long --warn-long src/sage/tests/books/sagebook/mpoly_doctest.py  # 19 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/programmation_doctest.py  # 23 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/nonlinear_doctest.py  # 24 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/linsolve_doctest.py  # 2 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/polynomes_doctest.py  # 1 doctest failed
sage -t --long --warn-long src/sage/tests/books/sagebook/integration_doctest.py  # 5 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/sol/combinat_doctest.py  # 1 doctest failed
sage -t --long --warn-long src/sage/tests/books/sagebook/sol/graphique_doctest.py  # 2 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/sol/graphtheory_doctest.py  # 1 doctest failed
sage -t --long --warn-long src/sage/tests/books/sagebook/sol/mpoly_doctest.py  # 6 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/sol/nonlinear_doctest.py  # 2 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/sol/numbertheory_doctest.py  # 11 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/sol/polynomes_doctest.py  # 4 doctests failed
sage -t --long --warn-long src/sage/tests/books/sagebook/sol/integration_doctest.py  # 6 doctests failed
```



---

archive/issue_comments_357280.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nReplying to [@zimmermann6](#comment%3A59):\n> > Ok. But my point is that we are not going to accept here and now any doctest that does not pass on python3. \n\n> \n> Nicolas (which I added in cc) checked some time ago with Python3, and if I recall correctly, all tests did pass. Nicolas please can you confirm?\n\nMore precisely: I had checked with Python 2 together with from future imports (print_statements, division, absolute_import); this does not cover all Python3 incompatibilities.",
    "created_at": "2018-10-19T15:11:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357280",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:62" align="right">Comment 62</div>

Replying to [@zimmermann6](#comment%3A59):
> > Ok. But my point is that we are not going to accept here and now any doctest that does not pass on python3. 

> 
> Nicolas (which I added in cc) checked some time ago with Python3, and if I recall correctly, all tests did pass. Nicolas please can you confirm?

More precisely: I had checked with Python 2 together with from future imports (print_statements, division, absolute_import); this does not cover all Python3 incompatibilities.



---

archive/issue_comments_357281.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nBecause we are now (**painfully**) trying to make all doctests pass with python3, this ticket will only be accepted with the necessary changes that make all or most of its doctests pass with python3. I am sorry that this forces some differences with the fresh new book.\n\nOn the other hand, I am surprised that this book for example still uses (and maybe even recommends using) `<>`, which is known since along time to be deprecated.",
    "created_at": "2018-10-19T15:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357281",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:63" align="right">Comment 63</div>

Because we are now (**painfully**) trying to make all doctests pass with python3, this ticket will only be accepted with the necessary changes that make all or most of its doctests pass with python3. I am sorry that this forces some differences with the fresh new book.

On the other hand, I am surprised that this book for example still uses (and maybe even recommends using) `<>`, which is known since along time to be deprecated.



---

archive/issue_comments_357282.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nReplying to [@fchapoton](#comment%3A63):\n> Because we are now (**painfully**) trying to make all doctests pass with python3, this ticket will only be accepted with the necessary changes that make all or most of its doctests pass with python3. I am sorry that this forces some differences with the fresh new book.\n\nthis ticket would make no sense any more, if not checking the examples from the book.\n\nWe are in a dead end. I see no solution.",
    "created_at": "2018-10-19T16:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357282",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:64" align="right">Comment 64</div>

Replying to [@fchapoton](#comment%3A63):
> Because we are now (**painfully**) trying to make all doctests pass with python3, this ticket will only be accepted with the necessary changes that make all or most of its doctests pass with python3. I am sorry that this forces some differences with the fresh new book.

this ticket would make no sense any more, if not checking the examples from the book.

We are in a dead end. I see no solution.



---

archive/issue_comments_357283.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nBut couldn't you adapt the examples in the book to make them Python 3 compatible?",
    "created_at": "2018-10-19T17:49:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357283",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">Comment 65</div>

But couldn't you adapt the examples in the book to make them Python 3 compatible?



---

archive/issue_events_309895.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:40:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309895"
}
```



---

archive/issue_events_309896.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-10-28T11:40:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309896"
}
```



---

archive/issue_comments_357284.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nReplying to [@jdemeyer](#comment%3A65):\n> But couldn't you adapt the examples in the book to make them Python 3 compatible?\n\nAs Paul already demonstrated to me while working on this ticket earlier, the tex markup for the book is already such that it's possible to have multiple copies of a given example: One that is actually shown in the book, but excluded from the tests, and one that is hidden from the text but included in the generated doctests.  So we could easily do that for the examples that are currently not Python 3 compatible.\n\nOr, more simply, for now I could just modify the copies of the examples included in Sage to be Python 3 compatible.  Most, if not all of these changes do not change the substance of the example, but rather are minor syntactic and spelling changes, mostly to do with Python itself (and not anything Sage-specific).",
    "created_at": "2018-10-28T15:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357284",
    "user": "https://github.com/embray"
}
```

<div id="comment:67" align="right">Comment 67</div>

Replying to [@jdemeyer](#comment%3A65):
> But couldn't you adapt the examples in the book to make them Python 3 compatible?

As Paul already demonstrated to me while working on this ticket earlier, the tex markup for the book is already such that it's possible to have multiple copies of a given example: One that is actually shown in the book, but excluded from the tests, and one that is hidden from the text but included in the generated doctests.  So we could easily do that for the examples that are currently not Python 3 compatible.

Or, more simply, for now I could just modify the copies of the examples included in Sage to be Python 3 compatible.  Most, if not all of these changes do not change the substance of the example, but rather are minor syntactic and spelling changes, mostly to do with Python itself (and not anything Sage-specific).



---

archive/issue_comments_357285.json:
```json
{
    "body": "Changed branch from **[u/embray/ticket-23572](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-23572)** to **[public/french_book_python3](https://github.com/sagemath/sagetrac-mirror/tree/public/french_book_python3)**",
    "created_at": "2018-11-04T13:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357285",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/embray/ticket-23572](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-23572)** to **[public/french_book_python3](https://github.com/sagemath/sagetrac-mirror/tree/public/french_book_python3)**



---

archive/issue_comments_357286.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nHere is a branch with some tests modified to be compatible with python3.\n\nWork in progress.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bc53442a3ebef50e67f735c02aaf81c5fc5ea08\">5bc5344</a></td><td><code>Merge branch 'u/embray/ticket-23572' in 8.5.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b15724091409b162560c8eadfe9886b9b7ce24ee\">b157240</a></td><td><code>python3 compatibility of doctests</code></td></tr></table>\n",
    "created_at": "2018-11-04T13:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357286",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:68" align="right">Comment 68</div>

Here is a branch with some tests modified to be compatible with python3.

Work in progress.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bc53442a3ebef50e67f735c02aaf81c5fc5ea08">5bc5344</a></td><td><code>Merge branch 'u/embray/ticket-23572' in 8.5.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b15724091409b162560c8eadfe9886b9b7ce24ee">b157240</a></td><td><code>python3 compatibility of doctests</code></td></tr></table>




---

archive/issue_comments_357287.json:
```json
{
    "body": "Changed commit from **[d801481](https://github.com/sagemath/sagetrac-mirror/commit/d8014819b4a93c41c5ef0cdd73a8851b11806a07)** to **[b157240](https://github.com/sagemath/sagetrac-mirror/commit/b15724091409b162560c8eadfe9886b9b7ce24ee)**",
    "created_at": "2018-11-04T13:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357287",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[d801481](https://github.com/sagemath/sagetrac-mirror/commit/d8014819b4a93c41c5ef0cdd73a8851b11806a07)** to **[b157240](https://github.com/sagemath/sagetrac-mirror/commit/b15724091409b162560c8eadfe9886b9b7ce24ee)**



---

archive/issue_comments_357288.json:
```json
{
    "body": "Changed commit from **[b157240](https://github.com/sagemath/sagetrac-mirror/commit/b15724091409b162560c8eadfe9886b9b7ce24ee)** to **[9bd7f8f](https://github.com/sagemath/sagetrac-mirror/commit/9bd7f8f5f3227b8d62e12c19443d84b88050dd7e)**",
    "created_at": "2018-11-04T13:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357288",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b157240](https://github.com/sagemath/sagetrac-mirror/commit/b15724091409b162560c8eadfe9886b9b7ce24ee)** to **[9bd7f8f](https://github.com/sagemath/sagetrac-mirror/commit/9bd7f8f5f3227b8d62e12c19443d84b88050dd7e)**



---

archive/issue_comments_357289.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9bd7f8f5f3227b8d62e12c19443d84b88050dd7e\">9bd7f8f</a></td><td><code>more py3 fixes</code></td></tr></table>\n",
    "created_at": "2018-11-04T13:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357289",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69" align="right">Comment 69</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9bd7f8f5f3227b8d62e12c19443d84b88050dd7e">9bd7f8f</a></td><td><code>more py3 fixes</code></td></tr></table>




---

archive/issue_comments_357290.json:
```json
{
    "body": "Changed commit from **[9bd7f8f](https://github.com/sagemath/sagetrac-mirror/commit/9bd7f8f5f3227b8d62e12c19443d84b88050dd7e)** to **[0a09136](https://github.com/sagemath/sagetrac-mirror/commit/0a09136c26c89ac5f82c4bc28d77c74e80c5ab68)**",
    "created_at": "2018-11-04T13:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357290",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9bd7f8f](https://github.com/sagemath/sagetrac-mirror/commit/9bd7f8f5f3227b8d62e12c19443d84b88050dd7e)** to **[0a09136](https://github.com/sagemath/sagetrac-mirror/commit/0a09136c26c89ac5f82c4bc28d77c74e80c5ab68)**



---

archive/issue_comments_357291.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a09136c26c89ac5f82c4bc28d77c74e80c5ab68\">0a09136</a></td><td><code>even more py3 fixes</code></td></tr></table>\n",
    "created_at": "2018-11-04T13:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357291",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:70" align="right">Comment 70</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a09136c26c89ac5f82c4bc28d77c74e80c5ab68">0a09136</a></td><td><code>even more py3 fixes</code></td></tr></table>




---

archive/issue_comments_357292.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nFor the ones involving `reduce` that you marked `# py2`, instead you could import `reduce` from `functools`.  \n\nIn fact, I always found it annoying that Guido took `reduce` out of the built-ins.  I think for Sage on Python 3, in order to maintain compatibility, we should add `reduce` back in as a default global.\n\nFr\u00e9d\u00e9ric, could you add a new ticket to do that, and drop the `# py2` stuff from this ticket and make this a dependency on the `reduce` one?  Then squash the the Python 3 fixes you added into a single commit (to make it a bit more manageable).  After that's done we should set this positive_review.\n\nAs I suspected, none of the Python 3 fixes for these tests materially impact the tests in any semantically meaningful way.",
    "created_at": "2018-11-06T10:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357292",
    "user": "https://github.com/embray"
}
```

<div id="comment:71" align="right">Comment 71</div>

For the ones involving `reduce` that you marked `# py2`, instead you could import `reduce` from `functools`.  

In fact, I always found it annoying that Guido took `reduce` out of the built-ins.  I think for Sage on Python 3, in order to maintain compatibility, we should add `reduce` back in as a default global.

Frédéric, could you add a new ticket to do that, and drop the `# py2` stuff from this ticket and make this a dependency on the `reduce` one?  Then squash the the Python 3 fixes you added into a single commit (to make it a bit more manageable).  After that's done we should set this positive_review.

As I suspected, none of the Python 3 fixes for these tests materially impact the tests in any semantically meaningful way.



---

archive/issue_comments_357293.json:
```json
{
    "body": "Work Issues: **support `reduce` as a global in Python 3**",
    "created_at": "2018-11-06T10:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357293",
    "user": "https://github.com/embray"
}
```

Work Issues: **support `reduce` as a global in Python 3**



---

archive/issue_events_309897.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-06T10:39:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309897"
}
```



---

archive/issue_events_309898.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-06T10:39:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309898"
}
```



---

archive/issue_comments_357294.json:
```json
{
    "body": "Changed commit from **[0a09136](https://github.com/sagemath/sagetrac-mirror/commit/0a09136c26c89ac5f82c4bc28d77c74e80c5ab68)** to **[ec5b502](https://github.com/sagemath/sagetrac-mirror/commit/ec5b502d1e7b20bdc3eedb11e9c4d5ed1eebfc9c)**",
    "created_at": "2018-11-06T14:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357294",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0a09136](https://github.com/sagemath/sagetrac-mirror/commit/0a09136c26c89ac5f82c4bc28d77c74e80c5ab68)** to **[ec5b502](https://github.com/sagemath/sagetrac-mirror/commit/ec5b502d1e7b20bdc3eedb11e9c4d5ed1eebfc9c)**



---

archive/issue_comments_357295.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec5b502d1e7b20bdc3eedb11e9c4d5ed1eebfc9c\">ec5b502</a></td><td><code>python3 compatibility of doctests</code></td></tr></table>\n",
    "created_at": "2018-11-06T14:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357295",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73" align="right">Comment 73</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec5b502d1e7b20bdc3eedb11e9c4d5ed1eebfc9c">ec5b502</a></td><td><code>python3 compatibility of doctests</code></td></tr></table>




---

archive/issue_events_309899.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-06T20:45:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309899"
}
```



---

archive/issue_events_309900.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-06T20:45:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309900"
}
```



---

archive/issue_comments_357296.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\ndone",
    "created_at": "2018-11-06T20:45:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357296",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:74" align="right">Comment 74</div>

done



---

archive/issue_comments_357297.json:
```json
{
    "body": "Dependencies: **#26656**",
    "created_at": "2018-11-06T20:45:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357297",
    "user": "https://github.com/fchapoton"
}
```

Dependencies: **#26656**



---

archive/issue_comments_357298.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faa2a2e5ab4fbb9ba3642285c03caec06402390c\">faa2a2e</a></td><td><code>trac 23572 book: more py3 doctests fixed</code></td></tr></table>\n",
    "created_at": "2018-11-07T19:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357298",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75" align="right">Comment 75</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faa2a2e5ab4fbb9ba3642285c03caec06402390c">faa2a2e</a></td><td><code>trac 23572 book: more py3 doctests fixed</code></td></tr></table>




---

archive/issue_comments_357299.json:
```json
{
    "body": "Changed commit from **[ec5b502](https://github.com/sagemath/sagetrac-mirror/commit/ec5b502d1e7b20bdc3eedb11e9c4d5ed1eebfc9c)** to **[faa2a2e](https://github.com/sagemath/sagetrac-mirror/commit/faa2a2e5ab4fbb9ba3642285c03caec06402390c)**",
    "created_at": "2018-11-07T19:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357299",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ec5b502](https://github.com/sagemath/sagetrac-mirror/commit/ec5b502d1e7b20bdc3eedb11e9c4d5ed1eebfc9c)** to **[faa2a2e](https://github.com/sagemath/sagetrac-mirror/commit/faa2a2e5ab4fbb9ba3642285c03caec06402390c)**



---

archive/issue_events_309901.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T15:26:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309901"
}
```



---

archive/issue_events_309902.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T15:26:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309902"
}
```



---

archive/issue_comments_357300.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2018-11-08T15:26:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357300",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_comments_357301.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">Comment 77</div>\n\nsorry, but I am not sure that the doctests do pass, as the patchbot has reported something strange. And they certainly do not all pass with python3..",
    "created_at": "2018-11-08T16:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357301",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:77" align="right">Comment 77</div>

sorry, but I am not sure that the doctests do pass, as the patchbot has reported something strange. And they certainly do not all pass with python3..



---

archive/issue_events_309903.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:50:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309903"
}
```



---

archive/issue_events_309904.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-11-08T16:50:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309904"
}
```



---

archive/issue_comments_357302.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">Comment 78</div>\n\nWell, please have a look then, because this looks related to some of the python 3 fixes you added (strangely).  I also assumed when you wrote \"done\" you had squashed the python 3 fixes--which you did--but it seems you've added more.",
    "created_at": "2018-11-08T16:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357302",
    "user": "https://github.com/embray"
}
```

<div id="comment:78" align="right">Comment 78</div>

Well, please have a look then, because this looks related to some of the python 3 fixes you added (strangely).  I also assumed when you wrote "done" you had squashed the python 3 fixes--which you did--but it seems you've added more.



---

archive/issue_comments_357303.json:
```json
{
    "body": "Changed assignee from **@embray** to **@fchapoton**",
    "created_at": "2018-11-08T16:51:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357303",
    "user": "https://github.com/embray"
}
```

Changed assignee from **@embray** to **@fchapoton**



---

archive/issue_comments_357304.json:
```json
{
    "body": "Changed commit from **[faa2a2e](https://github.com/sagemath/sagetrac-mirror/commit/faa2a2e5ab4fbb9ba3642285c03caec06402390c)** to **[a4a22ae](https://github.com/sagemath/sagetrac-mirror/commit/a4a22ae97f3ea60cf8e61478aecf8379f83be5c1)**",
    "created_at": "2018-11-10T14:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357304",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[faa2a2e](https://github.com/sagemath/sagetrac-mirror/commit/faa2a2e5ab4fbb9ba3642285c03caec06402390c)** to **[a4a22ae](https://github.com/sagemath/sagetrac-mirror/commit/a4a22ae97f3ea60cf8e61478aecf8379f83be5c1)**



---

archive/issue_comments_357305.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">Comment 80</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4a22ae97f3ea60cf8e61478aecf8379f83be5c1\">a4a22ae</a></td><td><code>trac 23572 fix doctest failing because book was moved</code></td></tr></table>\n",
    "created_at": "2018-11-10T14:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357305",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80" align="right">Comment 80</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4a22ae97f3ea60cf8e61478aecf8379f83be5c1">a4a22ae</a></td><td><code>trac 23572 fix doctest failing because book was moved</code></td></tr></table>




---

archive/issue_events_309905.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-10T14:04:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309905"
}
```



---

archive/issue_events_309906.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-10T14:04:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309906"
}
```



---

archive/issue_comments_357306.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">Comment 82</div>\n\nred branch",
    "created_at": "2018-11-12T08:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357306",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:82" align="right">Comment 82</div>

red branch



---

archive/issue_events_309907.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-12T08:51:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309907"
}
```



---

archive/issue_events_309908.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-12T08:51:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309908"
}
```



---

archive/issue_comments_357307.json:
```json
{
    "body": "Changed commit from **[a4a22ae](https://github.com/sagemath/sagetrac-mirror/commit/a4a22ae97f3ea60cf8e61478aecf8379f83be5c1)** to **[6d8f188](https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e)**",
    "created_at": "2018-11-12T09:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a4a22ae](https://github.com/sagemath/sagetrac-mirror/commit/a4a22ae97f3ea60cf8e61478aecf8379f83be5c1)** to **[6d8f188](https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e)**



---

archive/issue_comments_357308.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">Comment 83</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e\">6d8f188</a></td><td><code>Merge branch 'public/french_book_python3' in 8.5.b3</code></td></tr></table>\n",
    "created_at": "2018-11-12T09:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357308",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:83" align="right">Comment 83</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e">6d8f188</a></td><td><code>Merge branch 'public/french_book_python3' in 8.5.b3</code></td></tr></table>




---

archive/issue_comments_357309.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">Comment 84</div>\n\nrebased\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e\">6d8f188</a></td><td><code>Merge branch 'public/french_book_python3' in 8.5.b3</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e\">6d8f188</a></td><td><code>Merge branch 'public/french_book_python3' in 8.5.b3</code></td></tr></table>\n",
    "created_at": "2018-11-12T09:10:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357309",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:84" align="right">Comment 84</div>

rebased

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e">6d8f188</a></td><td><code>Merge branch 'public/french_book_python3' in 8.5.b3</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e">6d8f188</a></td><td><code>Merge branch 'public/french_book_python3' in 8.5.b3</code></td></tr></table>




---

archive/issue_events_309909.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-12T09:10:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309909"
}
```



---

archive/issue_events_309910.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-11-12T09:10:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309910"
}
```



---

archive/issue_comments_357310.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">Comment 85</div>\n\nWhy this change?\n\n```diff\ndiff --git a/src/sage/tests/books/sagebook/combinat_doctest.py b/src/sage/tests/books/sagebook/combinat_doctest.py\nindex 2192fe6..40a0aa1 100644\n--- a/src/sage/tests/books/sagebook/combinat_doctest.py\n+++ b/src/sage/tests/books/sagebook/combinat_doctest.py\n@@ -590,9 +590,9 @@ Sage example in ./combinat.tex, line 1895::\n Sage example in ./combinat.tex, line 1909::\n \n   sage: cubes = [t**3 for t in range(-999,1000)]\n-  sage: exists([(x,y) for x in cubes for y in cubes], lambda x,y: x+y == 218) # long\n+  sage: exists([(x,y) for x in cubes for y in cubes], lambda xy: sum(xy) == 218) # long\n   (True, (-125, 343))\n-  sage: exists(((x,y) for x in cubes for y in cubes), lambda x,y: x+y == 218) # long\n+  sage: exists(((x,y) for x in cubes for y in cubes), lambda xy: sum(xy) == 218) # long\n   (True, (-125, 343))\n \n Sage example in ./combinat.tex, line 1927::\n```\n\nThat doesn't look necessary...?\n\nThis one also looks like a more substantive change than it should be:\n\n```diff\ndiff --git a/src/sage/tests/books/sagebook/graphtheory_doctest.py b/src/sage/tests/books/sagebook/graphtheory_doctest.py\nindex c60c4a8..f64f416 100644\n--- a/src/sage/tests/books/sagebook/graphtheory_doctest.py\n+++ b/src/sage/tests/books/sagebook/graphtheory_doctest.py\n@@ -360,9 +360,8 @@ Sage example in ./graphtheory.tex, line 2070::\n \n Sage example in ./graphtheory.tex, line 2084::\n \n-  sage: G.independent_set()\n-  [4, 6, 9, 11, 16, 21, 23, 26, 28, 33, 38, 43, 50,\n-  56, 61, 71, 76, 78, 83, 88, 93, 95, 98, 100]\n+  sage: X = G.independent_set(); G.is_independent_set(X)\n+  True\n \n Sage example in ./graphtheory.tex, line 2139::\n```\n\nIf it happens that on Python 3 a different independent set is returned that's fine, but then we should mark that line `# random` and add the `G.is_independent_set(X)` test on a separate line.\n\nI can fix the latter.  But for the prior I wanted to check with you why the change was made since AFAICT there's no reason for it.",
    "created_at": "2018-11-12T10:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357310",
    "user": "https://github.com/embray"
}
```

<div id="comment:85" align="right">Comment 85</div>

Why this change?

```diff
diff --git a/src/sage/tests/books/sagebook/combinat_doctest.py b/src/sage/tests/books/sagebook/combinat_doctest.py
index 2192fe6..40a0aa1 100644
--- a/src/sage/tests/books/sagebook/combinat_doctest.py
+++ b/src/sage/tests/books/sagebook/combinat_doctest.py
@@ -590,9 +590,9 @@ Sage example in ./combinat.tex, line 1895::
 Sage example in ./combinat.tex, line 1909::
 
   sage: cubes = [t**3 for t in range(-999,1000)]
-  sage: exists([(x,y) for x in cubes for y in cubes], lambda x,y: x+y == 218) # long
+  sage: exists([(x,y) for x in cubes for y in cubes], lambda xy: sum(xy) == 218) # long
   (True, (-125, 343))
-  sage: exists(((x,y) for x in cubes for y in cubes), lambda x,y: x+y == 218) # long
+  sage: exists(((x,y) for x in cubes for y in cubes), lambda xy: sum(xy) == 218) # long
   (True, (-125, 343))
 
 Sage example in ./combinat.tex, line 1927::
```

That doesn't look necessary...?

This one also looks like a more substantive change than it should be:

```diff
diff --git a/src/sage/tests/books/sagebook/graphtheory_doctest.py b/src/sage/tests/books/sagebook/graphtheory_doctest.py
index c60c4a8..f64f416 100644
--- a/src/sage/tests/books/sagebook/graphtheory_doctest.py
+++ b/src/sage/tests/books/sagebook/graphtheory_doctest.py
@@ -360,9 +360,8 @@ Sage example in ./graphtheory.tex, line 2070::
 
 Sage example in ./graphtheory.tex, line 2084::
 
-  sage: G.independent_set()
-  [4, 6, 9, 11, 16, 21, 23, 26, 28, 33, 38, 43, 50,
-  56, 61, 71, 76, 78, 83, 88, 93, 95, 98, 100]
+  sage: X = G.independent_set(); G.is_independent_set(X)
+  True
 
 Sage example in ./graphtheory.tex, line 2139::
```

If it happens that on Python 3 a different independent set is returned that's fine, but then we should mark that line `# random` and add the `G.is_independent_set(X)` test on a separate line.

I can fix the latter.  But for the prior I wanted to check with you why the change was made since AFAICT there's no reason for it.



---

archive/issue_comments_357311.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">Comment 86</div>\n\nWith python3:\n\n```\nsage: cubes = [t**3 for t in range(-999,1000)]\nsage: exists([(x,y) for x in cubes for y in cubes], lambda xy: sum(xy) == 218) \n(True, (-125, 343))\nsage: exists([(x,y) for x in cubes for y in cubes], lambda x,y: x+y == 218)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-3-ea62578e4e4d> in <module>()\n----> 1 exists([(x,y) for x in cubes for y in cubes], lambda x,y: x+y == Integer(218))\n\n/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/misc/misc.py in exists(S, P)\n   1389     \"\"\"\n   1390     for x in S:\n-> 1391         if P(x):\n   1392             return True, x\n   1393     return False, None\n\nTypeError: <lambda>() missing 1 required positional argument: 'y'\n```",
    "created_at": "2018-11-12T16:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357311",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:86" align="right">Comment 86</div>

With python3:

```
sage: cubes = [t**3 for t in range(-999,1000)]
sage: exists([(x,y) for x in cubes for y in cubes], lambda xy: sum(xy) == 218) 
(True, (-125, 343))
sage: exists([(x,y) for x in cubes for y in cubes], lambda x,y: x+y == 218)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-3-ea62578e4e4d> in <module>()
----> 1 exists([(x,y) for x in cubes for y in cubes], lambda x,y: x+y == Integer(218))

/home/chapoton/sage3/local/lib/python3.6/site-packages/sage/misc/misc.py in exists(S, P)
   1389     """
   1390     for x in S:
-> 1391         if P(x):
   1392             return True, x
   1393     return False, None

TypeError: <lambda>() missing 1 required positional argument: 'y'
```



---

archive/issue_comments_357312.json:
```json
{
    "body": "Changed commit from **[6d8f188](https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e)** to **[b32170f](https://github.com/sagemath/sagetrac-mirror/commit/b32170fe754f9293b8c7324414511c61f12ce64b)**",
    "created_at": "2018-11-19T10:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357312",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6d8f188](https://github.com/sagemath/sagetrac-mirror/commit/6d8f188bb44969dbdab282109070a8bf6f25667e)** to **[b32170f](https://github.com/sagemath/sagetrac-mirror/commit/b32170fe754f9293b8c7324414511c61f12ce64b)**



---

archive/issue_comments_357313.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">Comment 87</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a316cfb3248df48a09b4e42bb76437cd72f50f7\">4a316cf</a></td><td><code>Merge branch 'public/french_book_python3' in 8.5.b4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b32170fe754f9293b8c7324414511c61f12ce64b\">b32170f</a></td><td><code>reviewer suggestion about independent set test</code></td></tr></table>\n",
    "created_at": "2018-11-19T10:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357313",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87" align="right">Comment 87</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a316cfb3248df48a09b4e42bb76437cd72f50f7">4a316cf</a></td><td><code>Merge branch 'public/french_book_python3' in 8.5.b4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b32170fe754f9293b8c7324414511c61f12ce64b">b32170f</a></td><td><code>reviewer suggestion about independent set test</code></td></tr></table>




---

archive/issue_comments_357314.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">Comment 88</div>\n\nThe suggested change for independent set is done. The other suggestion is not right, see above.",
    "created_at": "2018-11-19T10:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357314",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:88" align="right">Comment 88</div>

The suggested change for independent set is done. The other suggestion is not right, see above.



---

archive/issue_comments_357315.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">Comment 89</div>\n\nWhy did `sage.misc.misc.exists` change/break?  It looks like it used to be able to accept a list of tuples and now it can't?",
    "created_at": "2018-11-19T18:02:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357315",
    "user": "https://github.com/embray"
}
```

<div id="comment:89" align="right">Comment 89</div>

Why did `sage.misc.misc.exists` change/break?  It looks like it used to be able to accept a list of tuples and now it can't?



---

archive/issue_comments_357316.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">Comment 90</div>\n\nnothing has changed, the \"exists\" failing doctests also fail with python2.",
    "created_at": "2018-11-19T19:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357316",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:90" align="right">Comment 90</div>

nothing has changed, the "exists" failing doctests also fail with python2.



---

archive/issue_comments_357317.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">Comment 91</div>\n\nanybody out there ?",
    "created_at": "2018-11-25T19:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357317",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:91" align="right">Comment 91</div>

anybody out there ?



---

archive/issue_comments_357318.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">Comment 92</div>\n\nReplying to [@fchapoton](#comment%3A90):\n> nothing has changed, the \"exists\" failing doctests also fail with python2.\n\nI understand that's not a Python 3 specific thing, but something *must* have changed in Sage since the 8.4 release since that test didn't fail before...or did it?  Was there some reason it wasn't being run?",
    "created_at": "2018-11-26T09:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357318",
    "user": "https://github.com/embray"
}
```

<div id="comment:92" align="right">Comment 92</div>

Replying to [@fchapoton](#comment%3A90):
> nothing has changed, the "exists" failing doctests also fail with python2.

I understand that's not a Python 3 specific thing, but something *must* have changed in Sage since the 8.4 release since that test didn't fail before...or did it?  Was there some reason it wasn't being run?



---

archive/issue_comments_357319.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">Comment 93</div>\n\nReplying to [@embray](#comment%3A92):\n> Replying to [@fchapoton](#comment%3A90):\n> > nothing has changed, the \"exists\" failing doctests also fail with python2.\n\n> \n> I understand that's not a Python 3 specific thing, but something *must* have changed in Sage since the 8.4 release since that test didn't fail before...or did it?  Was there some reason it wasn't being run?\n\nWell, AFAICT, it really *hasn't* changed at all recently.  So I wonder how that test ever passed, unless it was never being run at all...",
    "created_at": "2018-11-26T09:22:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357319",
    "user": "https://github.com/embray"
}
```

<div id="comment:93" align="right">Comment 93</div>

Replying to [@embray](#comment%3A92):
> Replying to [@fchapoton](#comment%3A90):
> > nothing has changed, the "exists" failing doctests also fail with python2.

> 
> I understand that's not a Python 3 specific thing, but something *must* have changed in Sage since the 8.4 release since that test didn't fail before...or did it?  Was there some reason it wasn't being run?

Well, AFAICT, it really *hasn't* changed at all recently.  So I wonder how that test ever passed, unless it was never being run at all...



---

archive/issue_comments_357320.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">Comment 94</div>\n\nAh, I see now.  In the original test it used `lambda (x,y):`, which actually gets parsed as tuple unpacking in the function signature (e.g. same as `def f((x, y)):`) which was dropped in Python 3.  That's very subtle since in the `lambda` context it's less clear that that's what's going on (perhaps at least part of why it was dropped).\n\nOkay.",
    "created_at": "2018-11-26T09:25:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357320",
    "user": "https://github.com/embray"
}
```

<div id="comment:94" align="right">Comment 94</div>

Ah, I see now.  In the original test it used `lambda (x,y):`, which actually gets parsed as tuple unpacking in the function signature (e.g. same as `def f((x, y)):`) which was dropped in Python 3.  That's very subtle since in the `lambda` context it's less clear that that's what's going on (perhaps at least part of why it was dropped).

Okay.



---

archive/issue_comments_357321.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">Comment 95</div>\n\nSo ? Can we move on ? Paul, what do you think ?",
    "created_at": "2018-12-02T21:32:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357321",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:95" align="right">Comment 95</div>

So ? Can we move on ? Paul, what do you think ?



---

archive/issue_comments_357322.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">Comment 96</div>\n\n> So ? Can we move on ? Paul, what do you think ? \n\nas I said in comment [comment:64], this ticket has diverged from the book (now in print), thus I am no longer motivated to work on it.",
    "created_at": "2018-12-03T09:48:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357322",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:96" align="right">Comment 96</div>

> So ? Can we move on ? Paul, what do you think ? 

as I said in comment [comment:64], this ticket has diverged from the book (now in print), thus I am no longer motivated to work on it.



---

archive/issue_comments_357323.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">Comment 97</div>\n\nBonjour Paul.\n\nEst-ce que \u00e7a veut dire qu'on peut valider ce ticket ? D'une certaine fa\u00e7on, les doctests sont ceux du livre, juste modifi\u00e9s minimalement pour \u00eatre valides sous python 3.\n\nJe suis d\u00e9sol\u00e9 que \u00e7a complique la relation avec le livre. C'est vraiment dommage que le livre ne soit pas compatible avec python 3.",
    "created_at": "2018-12-03T09:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357323",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:97" align="right">Comment 97</div>

Bonjour Paul.

Est-ce que ça veut dire qu'on peut valider ce ticket ? D'une certaine façon, les doctests sont ceux du livre, juste modifiés minimalement pour être valides sous python 3.

Je suis désolé que ça complique la relation avec le livre. C'est vraiment dommage que le livre ne soit pas compatible avec python 3.



---

archive/issue_comments_357324.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">Comment 98</div>\n\nyes please go on, after modifying the description to reflect the fact that these doctests are not exactly those from the book",
    "created_at": "2018-12-03T10:10:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357324",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:98" align="right">Comment 98</div>

yes please go on, after modifying the description to reflect the fact that these doctests are not exactly those from the book



---

archive/issue_comments_357325.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">Comment 99</div>\n\nI modified the ticket description. Needs review. Erik ?",
    "created_at": "2018-12-07T19:30:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357325",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:99" align="right">Comment 99</div>

I modified the ticket description. Needs review. Erik ?



---

archive/issue_comments_357326.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,10 @@\n-the purpose of this ticket is to add the doctests corresponding to the examples given in the english translation of the book \"Calcul math\u00e9matique avec Sage\" (see https://members.loria.fr/PZimmermann/sagebook/english.html).\n+The purpose of this ticket is to add the doctests corresponding to the examples given in the english translation of the book \"Calcul math\u00e9matique avec Sage\" (see https://members.loria.fr/PZimmermann/sagebook/english.html).\n \n Sage already includes doctests for the original version of this book (published in french in 2013). These doctests are in `src/sage/tests/french_book`, and should be updated.\n \n-We should probably wait for the final version of the book before adding/updating doctests.\n+The final version of the book is now under press, so it is time for adding/updating doctests.\n+\n+**NOTE**: some doctests are not exactly those from the book. They have been modified (in a minimal manner) so that they will pass when sage is run using python 3.\n \n **bugs found**:\n 1. Using `scipy.sparse.lil_matrix` is now broken: #23867\n``````\n",
    "created_at": "2018-12-07T19:30:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357326",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,10 @@
-the purpose of this ticket is to add the doctests corresponding to the examples given in the english translation of the book "Calcul mathématique avec Sage" (see https://members.loria.fr/PZimmermann/sagebook/english.html).
+The purpose of this ticket is to add the doctests corresponding to the examples given in the english translation of the book "Calcul mathématique avec Sage" (see https://members.loria.fr/PZimmermann/sagebook/english.html).
 
 Sage already includes doctests for the original version of this book (published in french in 2013). These doctests are in `src/sage/tests/french_book`, and should be updated.
 
-We should probably wait for the final version of the book before adding/updating doctests.
+The final version of the book is now under press, so it is time for adding/updating doctests.
+
+**NOTE**: some doctests are not exactly those from the book. They have been modified (in a minimal manner) so that they will pass when sage is run using python 3.
 
 **bugs found**:
 1. Using `scipy.sparse.lil_matrix` is now broken: #23867
``````




---

archive/issue_events_309911.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-10T13:09:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309911"
}
```



---

archive/issue_events_309912.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-10T13:09:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309912"
}
```



---

archive/issue_comments_357327.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nThe alternative, I suppose, would be to provide some way to just completely skip those tests on Python 3.  In a way, that might have been better.  Of course they were not written with Python 3 in mind: The book was not either, as Sage does not support Python 3 yet.  But I agree with Fr\u00e9d\u00e9ric that the translation required for running these tests on Python 3 is also trivial, and so they are still serving their intended purpose of noting changes to Sage that would invalidate the book's examples.",
    "created_at": "2018-12-10T13:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357327",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">Comment 1</div>

The alternative, I suppose, would be to provide some way to just completely skip those tests on Python 3.  In a way, that might have been better.  Of course they were not written with Python 3 in mind: The book was not either, as Sage does not support Python 3 yet.  But I agree with Frédéric that the translation required for running these tests on Python 3 is also trivial, and so they are still serving their intended purpose of noting changes to Sage that would invalidate the book's examples.



---

archive/issue_events_309913.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-12-19T17:01:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309913"
}
```



---

archive/issue_events_309914.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-12-19T17:01:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309914"
}
```



---

archive/issue_comments_357328.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nOne patchbot reports\n\n```\nsage -t --long src/sage/tests/books/sagebook/float_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 287, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    RBF(pi)\nExpected:\n    [3.141592653589793 +/- 5.61e-16]\nGot:\n    [3.141592653589793 +/- 3.39e-16]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 289, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    RealBallField(100)(pi)\nExpected:\n    [3.14159265358979323846264338328 +/- 3.83e-30]\nGot:\n    [3.14159265358979323846264338328 +/- 2.25e-30]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 431, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    CBF(sqrt(2),pi)\nExpected:\n    [1.414213562373095 +/- 4.10e-16] + [3.141592653589793 +/- 5.61e-16]*I\nGot:\n    [1.414213562373095 +/- 4.10e-16] + [3.141592653589793 +/- 3.39e-16]*I\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 437, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    CBF(sqrt(2)+pi*I)\nExpected:\n    [1.414213562373095 +/- 4.10e-16] + [3.141592653589793 +/- 5.61e-16]*I\nGot:\n    [1.414213562373095 +/- 4.10e-16] + [3.141592653589793 +/- 3.39e-16]*I\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 462, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    ComplexBallField(100)(1+I*pi).arg()\nExpected:\n    [1.26262725567891168344432208360 +/- 6.60e-30]\nGot:\n    [1.26262725567891168344432208360 +/- 6.46e-30]\n**********************************************************************\n```\n\nDo we have a reason to say that this patchbot is wrong?",
    "created_at": "2018-12-19T17:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357328",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">Comment 2</div>

One patchbot reports

```
sage -t --long src/sage/tests/books/sagebook/float_doctest.py
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 287, in sage.tests.books.sagebook.float_doctest
Failed example:
    RBF(pi)
Expected:
    [3.141592653589793 +/- 5.61e-16]
Got:
    [3.141592653589793 +/- 3.39e-16]
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 289, in sage.tests.books.sagebook.float_doctest
Failed example:
    RealBallField(100)(pi)
Expected:
    [3.14159265358979323846264338328 +/- 3.83e-30]
Got:
    [3.14159265358979323846264338328 +/- 2.25e-30]
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 431, in sage.tests.books.sagebook.float_doctest
Failed example:
    CBF(sqrt(2),pi)
Expected:
    [1.414213562373095 +/- 4.10e-16] + [3.141592653589793 +/- 5.61e-16]*I
Got:
    [1.414213562373095 +/- 4.10e-16] + [3.141592653589793 +/- 3.39e-16]*I
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 437, in sage.tests.books.sagebook.float_doctest
Failed example:
    CBF(sqrt(2)+pi*I)
Expected:
    [1.414213562373095 +/- 4.10e-16] + [3.141592653589793 +/- 5.61e-16]*I
Got:
    [1.414213562373095 +/- 4.10e-16] + [3.141592653589793 +/- 3.39e-16]*I
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 462, in sage.tests.books.sagebook.float_doctest
Failed example:
    ComplexBallField(100)(1+I*pi).arg()
Expected:
    [1.26262725567891168344432208360 +/- 6.60e-30]
Got:
    [1.26262725567891168344432208360 +/- 6.46e-30]
**********************************************************************
```

Do we have a reason to say that this patchbot is wrong?



---

archive/issue_comments_357329.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nand in fact two patchbots complain at this same place..",
    "created_at": "2018-12-19T20:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357329",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">Comment 3</div>

and in fact two patchbots complain at this same place..



---

archive/issue_comments_357330.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nThis would be due to #26360.  For now we should use the (not ideal) solution from that ticket of just replacing the mantissa in those floats with `...`.",
    "created_at": "2018-12-20T12:51:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357330",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">Comment 4</div>

This would be due to #26360.  For now we should use the (not ideal) solution from that ticket of just replacing the mantissa in those floats with `...`.



---

archive/issue_comments_357331.json:
```json
{
    "body": "Changed commit from **[b32170f](https://github.com/sagemath/sagetrac-mirror/commit/b32170fe754f9293b8c7324414511c61f12ce64b)** to **[a00c64c](https://github.com/sagemath/sagetrac-mirror/commit/a00c64c5d6f0599b988469895f69837dba8d9e71)**",
    "created_at": "2018-12-30T10:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357331",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b32170f](https://github.com/sagemath/sagetrac-mirror/commit/b32170fe754f9293b8c7324414511c61f12ce64b)** to **[a00c64c](https://github.com/sagemath/sagetrac-mirror/commit/a00c64c5d6f0599b988469895f69837dba8d9e71)**



---

archive/issue_comments_357332.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/324b483928015c6aa59b00eb7ba4ca9e3cfa3841\">324b483</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6.b0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a00c64c5d6f0599b988469895f69837dba8d9e71\">a00c64c</a></td><td><code>livre sage doctests: fix floating errors</code></td></tr></table>\n",
    "created_at": "2018-12-30T10:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357332",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/324b483928015c6aa59b00eb7ba4ca9e3cfa3841">324b483</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6.b0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a00c64c5d6f0599b988469895f69837dba8d9e71">a00c64c</a></td><td><code>livre sage doctests: fix floating errors</code></td></tr></table>




---

archive/issue_comments_357333.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI have fixed the float doctests in the suggested way.",
    "created_at": "2018-12-30T10:33:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357333",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">Comment 6</div>

I have fixed the float doctests in the suggested way.



---

archive/issue_events_309915.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-12-30T10:33:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309915"
}
```



---

archive/issue_events_309916.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-12-30T10:33:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309916"
}
```



---

archive/issue_comments_357334.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nbot is now morally green",
    "created_at": "2018-12-30T19:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357334",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">Comment 7</div>

bot is now morally green



---

archive/issue_events_309917.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-31T10:06:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309917"
}
```



---

archive/issue_events_309918.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-31T10:06:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309918"
}
```



---

archive/issue_events_309919.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-31T10:06:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309919"
}
```



---

archive/issue_events_309920.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-12-31T10:06:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309920"
}
```



---

archive/issue_comments_357335.json:
```json
{
    "body": "Changed author from **Erik Bray** to **Erik Bray, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2018-12-31T10:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357335",
    "user": "https://github.com/fchapoton"
}
```

Changed author from **Erik Bray** to **Erik Bray, Frédéric Chapoton**



---

archive/issue_comments_357336.json:
```json
{
    "body": "Changed reviewer from **Erik Bray** to **Erik Bray, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2018-12-31T10:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357336",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **Erik Bray** to **Erik Bray, Frédéric Chapoton**



---

archive/issue_comments_357337.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\non OSX:\n\n```\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 208, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    print(\"exact - classical summation: %.1f\" % (s-ii))\nExpected:\n    exact - classical summation: -45.5\nGot:\n    exact - classical summation: -45.6\n**********************************************************************\n1 item had failures:\n   1 of 142 in sage.tests.books.sagebook.float_doctest\n    [141 tests, 1 failure, 40.89 s]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/graphtheory_doctest.py\", line 66, in sage.tests.books.sagebook.graphtheory_doctest\nFailed example:\n    P.minor(graphs.CompleteBipartiteGraph(3,3))\nExpected:\n    {0: [1], 1: [8], 2: [4], 3: [6, 7, 9], 4: [2, 3], 5: [0, 5]}\nGot:\n    {0: [0, 4], 1: [1, 6, 8], 2: [2, 7], 3: [3], 4: [9], 5: [5]}\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/graphtheory_doctest.py\", line 68, in sage.tests.books.sagebook.graphtheory_doctest\nFailed example:\n    P.minor(graphs.CompleteGraph(5))\nExpected:\n    {0: [1, 6], 1: [0, 5], 2: [2, 7], 3: [4, 9], 4: [3, 8]}\nGot:\n    {0: [5, 8], 1: [1, 6], 2: [2, 3], 3: [7, 9], 4: [0, 4]}\n**********************************************************************\n1 item had failures:\n   2 of 114 in sage.tests.books.sagebook.graphtheory_doctest\n    [113 tests, 2 failures, 8.61 s]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 24, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    N(integrate(sin(x^2)/(x^2), x, 1, infinity))\nExpected:\n    0.285736646322853 - 6.93889390390723e-18*I\nGot:\n    0.285736646322853 + 6.93889390390723e-18*I\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 45, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    N(integrate(exp(-x^2)*log(x), x, 17, 42))\nExpected:\n    2.5657285006962035e-127\nGot:\n    2.565728500696221e-127\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 57, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    numerical_integral(exp(-x^2)*log(x), 17, 42)\nExpected:\n    (2.5657285006962035e-127, 3.3540254049238093e-128)\nGot:\n    (2.565728500696221e-127, 3.3540254049023843e-128)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 64, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    numerical_integral(exp(-x^100), 0, 1.1, algorithm='qng')\nExpected:\n    (0.994327538576531..., 0.016840666914688864)\nGot:\n    (0.9943275385765319, 0.016840666914705607)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 74, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    N(integrate(exp(-x^2)*log(x), x, 17, 42), digits=60)\nExpected:\n    2.5657285006962035e-127\nGot:\n    2.565728500696221e-127\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 95, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    gp('intnum(x=17, 20, exp(-x^2)*log(x))')\nExpected:\n    2.5657285005610514829173563961304785900 E-127\nGot:\n    2.565728500561051482917356396 E-127\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 100, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    gp('intnum(x=0, 1, sin(sin(x)))')\nExpected:\n    0.43060610312069060491237735524846578643\nGot:\n    0.4306061031206906049123773553\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 109, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    gp('intnum(x=0, 1, x^(-99/100))') # abs tol 2e-16\nExpected:\n    73.62914262423378365\nGot:\n    67.28157752276430690714796980\nTolerance exceeded:\n    73.62914262423378365 vs 67.28157752276430690714796980, tolerance 6e+00 > 2e-16\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 114, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    gp('intnum(x=[0, -99/100], 1, x^(-99/100))')\nExpected:\n    100.00000000000000000000000000000000000\nGot:\n    100.0000000000000000000000000\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 119, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 2e-16\nExpected:\n    74.47274932028288503\nGot:\n    68.16118711180150288540450897\nTolerance exceeded:\n    74.47274932028288503 vs 68.16118711180150288540450897, tolerance 6e+00 > 2e-16\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 178, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    f(0.0), f(0.5), f(1.0)\nExpected:\n    (0.0, 0.8414895067661431, 1.6318696084180513)\nGot:\n    (0.0, 0.8414895067661431, 1.6318696084180517)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 183, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    numerical_integral(f, 0, 1)\nExpected:\n    (0.8606791942204567, 6.301207560882073e-07)\nGot:\n    (0.8606791942204566, 6.301207561280224e-07)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 190, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    numerical_integral(f, 0, 1)\nExpected:\n    (0.860679194220456..., 6.301207560882096e-07)\nGot:\n    (0.8606791942204566, 6.301207560974723e-07)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 197, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    numerical_integral(f, 0, 1)\nExpected:\n    (0.8606791942204567, 6.301207561187562e-07)\nGot:\n    (0.8606791942204565, 6.301207561295888e-07)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/integration_doctest.py\", line 213, in sage.tests.books.sagebook.integration_doctest\nFailed example:\n    evalI(100)\nExpected:\n    (0.8606792028826138, 5.553962923506737e-07)\nGot:\n    (0.8606792028826138, 5.553962919606637e-07)\n**********************************************************************\n1 item had failures:\n  15 of  87 in sage.tests.books.sagebook.integration_doctest\n    [86 tests, 15 failures, 23.56 s]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 129, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    R1.solve_right(c)\nExpected:\n    (-1.499999999999999, -0.49999999999999867, 2.749999999999997)\nGot:\n    (-1.4999999999999967, -0.49999999999999745, 2.749999999999994)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 135, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    Z.norm(Infinity)*(Z^-1).norm(Infinity) # abs tol 1e-11\nExpected:\n    1992.3750000000168\nGot:\n    1992.3750000000014\nTolerance exceeded:\n    1992.3750000000168 vs 1992.3750000000014, tolerance 2e-11 > 1e-11\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 150, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    x = V*lamb; x\nExpected:\n    (0.2370370370370367, 0.4518518518518521, 0.3703703703703702)\nGot:\n    (-5341941225574732.0, -2670970612787367.0, 6677426531968419.0)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 155, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    m = 3; [ Sig[i,i] for i in range(0,m) ]\nExpected:\n    [8.309316833256451, 1.3983038884881154, 0.0]\nGot:\n    [8.309316833256451, 1.3983038884881158, 1.1474751322044736e-16]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 180, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    Q\nExpected:\n    [ 0.7612151656410958  0.6484993998439783]\n    [-0.6484993998439782  0.7612151656410955]\nGot:\n    [ 0.7612151656410957   0.648499399843978]\n    [-0.6484993998439779  0.7612151656410955]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 215, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    X\nExpected:\n    (0.9276845629439007, 0.10329475725387141, -0.3587917847435305)\nGot:\n    (0.9276845629439006, 0.1032947572538714, -0.3587917847435305)\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 234, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    Aref.eigenvalues()\nExpected:\n    [585.0305586200212, 92.91426499150643, 0.03226690899408103, 4.022909479477674]\nGot:\n    [585.0305586200216, 92.91426499150661, 0.03226690899409142, 4.022909479477676]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 241, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    eigen_vals\nExpected:\n    [   6.39294791648918                 0.0                 0.0]\n    [                0.0   0.560519476111939                 0.0]\n    [                0.0                 0.0 -1.9534673926011215]\nGot:\n    [  6.392947916489186                 0.0                 0.0]\n    [                0.0  0.5605194761119401                 0.0]\n    [                0.0                 0.0 -1.9534673926011223]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/linsolve_doctest.py\", line 272, in sage.tests.books.sagebook.linsolve_doctest\nFailed example:\n    roots = comp.eigenvalues(); roots\nExpected:\n    [0.3475215101190289 + 0.5665505533984981*I, 0.3475215101190289 - 0.5665505533984981*I,\n     0.34502377696179265 + 0.43990870238588275*I, 0.34502377696179265 - 0.43990870238588275*I,\n     -0.5172576143252197 + 0.5129582067889322*I, -0.5172576143252197 - 0.5129582067889322*I,\n     -1.3669971645459291, -9.983578180965276]\nGot:\n    [0.3475215101190277 + 0.5665505533984982*I,\n     0.3475215101190277 - 0.5665505533984982*I,\n     0.34502377696179476 + 0.4399087023858829*I,\n     0.34502377696179476 - 0.4399087023858829*I,\n     -0.5172576143252197 + 0.5129582067889321*I,\n     -0.5172576143252197 - 0.5129582067889321*I,\n     -1.366997164545929,\n     -9.983578180965276]\n**********************************************************************\n1 item had failures:\n   9 of 132 in sage.tests.books.sagebook.linsolve_doctest\n    [131 tests, 9 failures, 17.02 s]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/mpoly_doctest.py\", line 395, in sage.tests.books.sagebook.mpoly_doctest\nFailed example:\n    ys = CDF['y'](Jy.0).roots(); ys\nExpected:\n    [(-0.8000000000000002, 1), (0.0, 1), (0.8, 1)]\nGot:\n    [(-0.8, 1), (0.0, 1), (0.7999999999999997, 1)]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/mpoly_doctest.py\", line 397, in sage.tests.books.sagebook.mpoly_doctest\nFailed example:\n    [CDF['x'](p(y=ys[0][0])).roots() for p in J.gens()]\nExpected:\n    [[(-0.5999999999999999 - 1.306289919090511e-16*I, 1),\n     (0.6000000000000001 + 1.3062899190905113e-16*I, 1)],\n     [(0.6000000000000001 - 3.1350958058172247e-16*I, 1),\n      (2.600000000000001 + 3.135095805817224e-16*I, 1)]]\nGot:\n    [[(-0.6 - 1.30628991909051e-16*I, 1), (0.6 + 1.3062899190905103e-16*I, 1)],\n     [(0.6 - 3.135095805817224e-16*I, 1),\n      (2.6000000000000005 + 3.1350958058172237e-16*I, 1)]]\n**********************************************************************\n1 item had failures:\n   2 of 161 in sage.tests.books.sagebook.mpoly_doctest\n    [160 tests, 2 failures, 8.27 s]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/polynomes_doctest.py\", line 76, in sage.tests.books.sagebook.polynomes_doctest\nFailed example:\n    p.change_ring(RDF).factor()\nExpected:\n    (x - 15.810249675906654) * (x - 0.18975032409334563)\nGot:\n    (x - 15.810249675906654) * (x - 0.1897503240933456)\n**********************************************************************\n1 item had failures:\n   1 of 111 in sage.tests.books.sagebook.polynomes_doctest\n    [110 tests, 1 failure, 2.48 s]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/sol/integration_doctest.py\", line 39, in sage.tests.books.sagebook.sol.integration_doctest\nFailed example:\n    N(QuadNC(lambda x: x * log(1+x), 0, 1, 19)) # abs tol 2e-15\nExpected:\n    0.250000000000001\nGot:\n    0.249999999999996\nTolerance exceeded:\n    0.250000000000001 vs 0.249999999999996, tolerance 5e-15 > 2e-15\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/sol/integration_doctest.py\", line 41, in sage.tests.books.sagebook.sol.integration_doctest\nFailed example:\n    numerical_integral(sqrt(1-x^2), 0, 1)\nExpected:\n    (0.785398167726482..., 9.042725224567119...e-07)\nGot:\n    (0.7853981677264822, 9.042725224536535e-07)\n**********************************************************************\n1 item had failures:\n   2 of  13 in sage.tests.books.sagebook.sol.integration_doctest\n    [12 tests, 2 failures, 2.76 s]\n----------------------------------------------------------------------\n```",
    "created_at": "2018-12-31T22:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357337",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:0" align="right">Comment 0</div>

on OSX:

```
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 208, in sage.tests.books.sagebook.float_doctest
Failed example:
    print("exact - classical summation: %.1f" % (s-ii))
Expected:
    exact - classical summation: -45.5
Got:
    exact - classical summation: -45.6
**********************************************************************
1 item had failures:
   1 of 142 in sage.tests.books.sagebook.float_doctest
    [141 tests, 1 failure, 40.89 s]
**********************************************************************
File "src/sage/tests/books/sagebook/graphtheory_doctest.py", line 66, in sage.tests.books.sagebook.graphtheory_doctest
Failed example:
    P.minor(graphs.CompleteBipartiteGraph(3,3))
Expected:
    {0: [1], 1: [8], 2: [4], 3: [6, 7, 9], 4: [2, 3], 5: [0, 5]}
Got:
    {0: [0, 4], 1: [1, 6, 8], 2: [2, 7], 3: [3], 4: [9], 5: [5]}
**********************************************************************
File "src/sage/tests/books/sagebook/graphtheory_doctest.py", line 68, in sage.tests.books.sagebook.graphtheory_doctest
Failed example:
    P.minor(graphs.CompleteGraph(5))
Expected:
    {0: [1, 6], 1: [0, 5], 2: [2, 7], 3: [4, 9], 4: [3, 8]}
Got:
    {0: [5, 8], 1: [1, 6], 2: [2, 3], 3: [7, 9], 4: [0, 4]}
**********************************************************************
1 item had failures:
   2 of 114 in sage.tests.books.sagebook.graphtheory_doctest
    [113 tests, 2 failures, 8.61 s]
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 24, in sage.tests.books.sagebook.integration_doctest
Failed example:
    N(integrate(sin(x^2)/(x^2), x, 1, infinity))
Expected:
    0.285736646322853 - 6.93889390390723e-18*I
Got:
    0.285736646322853 + 6.93889390390723e-18*I
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 45, in sage.tests.books.sagebook.integration_doctest
Failed example:
    N(integrate(exp(-x^2)*log(x), x, 17, 42))
Expected:
    2.5657285006962035e-127
Got:
    2.565728500696221e-127
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 57, in sage.tests.books.sagebook.integration_doctest
Failed example:
    numerical_integral(exp(-x^2)*log(x), 17, 42)
Expected:
    (2.5657285006962035e-127, 3.3540254049238093e-128)
Got:
    (2.565728500696221e-127, 3.3540254049023843e-128)
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 64, in sage.tests.books.sagebook.integration_doctest
Failed example:
    numerical_integral(exp(-x^100), 0, 1.1, algorithm='qng')
Expected:
    (0.994327538576531..., 0.016840666914688864)
Got:
    (0.9943275385765319, 0.016840666914705607)
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 74, in sage.tests.books.sagebook.integration_doctest
Failed example:
    N(integrate(exp(-x^2)*log(x), x, 17, 42), digits=60)
Expected:
    2.5657285006962035e-127
Got:
    2.565728500696221e-127
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 95, in sage.tests.books.sagebook.integration_doctest
Failed example:
    gp('intnum(x=17, 20, exp(-x^2)*log(x))')
Expected:
    2.5657285005610514829173563961304785900 E-127
Got:
    2.565728500561051482917356396 E-127
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 100, in sage.tests.books.sagebook.integration_doctest
Failed example:
    gp('intnum(x=0, 1, sin(sin(x)))')
Expected:
    0.43060610312069060491237735524846578643
Got:
    0.4306061031206906049123773553
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 109, in sage.tests.books.sagebook.integration_doctest
Failed example:
    gp('intnum(x=0, 1, x^(-99/100))') # abs tol 2e-16
Expected:
    73.62914262423378365
Got:
    67.28157752276430690714796980
Tolerance exceeded:
    73.62914262423378365 vs 67.28157752276430690714796980, tolerance 6e+00 > 2e-16
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 114, in sage.tests.books.sagebook.integration_doctest
Failed example:
    gp('intnum(x=[0, -99/100], 1, x^(-99/100))')
Expected:
    100.00000000000000000000000000000000000
Got:
    100.0000000000000000000000000
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 119, in sage.tests.books.sagebook.integration_doctest
Failed example:
    gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 2e-16
Expected:
    74.47274932028288503
Got:
    68.16118711180150288540450897
Tolerance exceeded:
    74.47274932028288503 vs 68.16118711180150288540450897, tolerance 6e+00 > 2e-16
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 178, in sage.tests.books.sagebook.integration_doctest
Failed example:
    f(0.0), f(0.5), f(1.0)
Expected:
    (0.0, 0.8414895067661431, 1.6318696084180513)
Got:
    (0.0, 0.8414895067661431, 1.6318696084180517)
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 183, in sage.tests.books.sagebook.integration_doctest
Failed example:
    numerical_integral(f, 0, 1)
Expected:
    (0.8606791942204567, 6.301207560882073e-07)
Got:
    (0.8606791942204566, 6.301207561280224e-07)
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 190, in sage.tests.books.sagebook.integration_doctest
Failed example:
    numerical_integral(f, 0, 1)
Expected:
    (0.860679194220456..., 6.301207560882096e-07)
Got:
    (0.8606791942204566, 6.301207560974723e-07)
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 197, in sage.tests.books.sagebook.integration_doctest
Failed example:
    numerical_integral(f, 0, 1)
Expected:
    (0.8606791942204567, 6.301207561187562e-07)
Got:
    (0.8606791942204565, 6.301207561295888e-07)
**********************************************************************
File "src/sage/tests/books/sagebook/integration_doctest.py", line 213, in sage.tests.books.sagebook.integration_doctest
Failed example:
    evalI(100)
Expected:
    (0.8606792028826138, 5.553962923506737e-07)
Got:
    (0.8606792028826138, 5.553962919606637e-07)
**********************************************************************
1 item had failures:
  15 of  87 in sage.tests.books.sagebook.integration_doctest
    [86 tests, 15 failures, 23.56 s]
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 129, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    R1.solve_right(c)
Expected:
    (-1.499999999999999, -0.49999999999999867, 2.749999999999997)
Got:
    (-1.4999999999999967, -0.49999999999999745, 2.749999999999994)
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 135, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    Z.norm(Infinity)*(Z^-1).norm(Infinity) # abs tol 1e-11
Expected:
    1992.3750000000168
Got:
    1992.3750000000014
Tolerance exceeded:
    1992.3750000000168 vs 1992.3750000000014, tolerance 2e-11 > 1e-11
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 150, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    x = V*lamb; x
Expected:
    (0.2370370370370367, 0.4518518518518521, 0.3703703703703702)
Got:
    (-5341941225574732.0, -2670970612787367.0, 6677426531968419.0)
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 155, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    m = 3; [ Sig[i,i] for i in range(0,m) ]
Expected:
    [8.309316833256451, 1.3983038884881154, 0.0]
Got:
    [8.309316833256451, 1.3983038884881158, 1.1474751322044736e-16]
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 180, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    Q
Expected:
    [ 0.7612151656410958  0.6484993998439783]
    [-0.6484993998439782  0.7612151656410955]
Got:
    [ 0.7612151656410957   0.648499399843978]
    [-0.6484993998439779  0.7612151656410955]
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 215, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    X
Expected:
    (0.9276845629439007, 0.10329475725387141, -0.3587917847435305)
Got:
    (0.9276845629439006, 0.1032947572538714, -0.3587917847435305)
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 234, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    Aref.eigenvalues()
Expected:
    [585.0305586200212, 92.91426499150643, 0.03226690899408103, 4.022909479477674]
Got:
    [585.0305586200216, 92.91426499150661, 0.03226690899409142, 4.022909479477676]
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 241, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    eigen_vals
Expected:
    [   6.39294791648918                 0.0                 0.0]
    [                0.0   0.560519476111939                 0.0]
    [                0.0                 0.0 -1.9534673926011215]
Got:
    [  6.392947916489186                 0.0                 0.0]
    [                0.0  0.5605194761119401                 0.0]
    [                0.0                 0.0 -1.9534673926011223]
**********************************************************************
File "src/sage/tests/books/sagebook/linsolve_doctest.py", line 272, in sage.tests.books.sagebook.linsolve_doctest
Failed example:
    roots = comp.eigenvalues(); roots
Expected:
    [0.3475215101190289 + 0.5665505533984981*I, 0.3475215101190289 - 0.5665505533984981*I,
     0.34502377696179265 + 0.43990870238588275*I, 0.34502377696179265 - 0.43990870238588275*I,
     -0.5172576143252197 + 0.5129582067889322*I, -0.5172576143252197 - 0.5129582067889322*I,
     -1.3669971645459291, -9.983578180965276]
Got:
    [0.3475215101190277 + 0.5665505533984982*I,
     0.3475215101190277 - 0.5665505533984982*I,
     0.34502377696179476 + 0.4399087023858829*I,
     0.34502377696179476 - 0.4399087023858829*I,
     -0.5172576143252197 + 0.5129582067889321*I,
     -0.5172576143252197 - 0.5129582067889321*I,
     -1.366997164545929,
     -9.983578180965276]
**********************************************************************
1 item had failures:
   9 of 132 in sage.tests.books.sagebook.linsolve_doctest
    [131 tests, 9 failures, 17.02 s]
**********************************************************************
File "src/sage/tests/books/sagebook/mpoly_doctest.py", line 395, in sage.tests.books.sagebook.mpoly_doctest
Failed example:
    ys = CDF['y'](Jy.0).roots(); ys
Expected:
    [(-0.8000000000000002, 1), (0.0, 1), (0.8, 1)]
Got:
    [(-0.8, 1), (0.0, 1), (0.7999999999999997, 1)]
**********************************************************************
File "src/sage/tests/books/sagebook/mpoly_doctest.py", line 397, in sage.tests.books.sagebook.mpoly_doctest
Failed example:
    [CDF['x'](p(y=ys[0][0])).roots() for p in J.gens()]
Expected:
    [[(-0.5999999999999999 - 1.306289919090511e-16*I, 1),
     (0.6000000000000001 + 1.3062899190905113e-16*I, 1)],
     [(0.6000000000000001 - 3.1350958058172247e-16*I, 1),
      (2.600000000000001 + 3.135095805817224e-16*I, 1)]]
Got:
    [[(-0.6 - 1.30628991909051e-16*I, 1), (0.6 + 1.3062899190905103e-16*I, 1)],
     [(0.6 - 3.135095805817224e-16*I, 1),
      (2.6000000000000005 + 3.1350958058172237e-16*I, 1)]]
**********************************************************************
1 item had failures:
   2 of 161 in sage.tests.books.sagebook.mpoly_doctest
    [160 tests, 2 failures, 8.27 s]
**********************************************************************
File "src/sage/tests/books/sagebook/polynomes_doctest.py", line 76, in sage.tests.books.sagebook.polynomes_doctest
Failed example:
    p.change_ring(RDF).factor()
Expected:
    (x - 15.810249675906654) * (x - 0.18975032409334563)
Got:
    (x - 15.810249675906654) * (x - 0.1897503240933456)
**********************************************************************
1 item had failures:
   1 of 111 in sage.tests.books.sagebook.polynomes_doctest
    [110 tests, 1 failure, 2.48 s]
**********************************************************************
File "src/sage/tests/books/sagebook/sol/integration_doctest.py", line 39, in sage.tests.books.sagebook.sol.integration_doctest
Failed example:
    N(QuadNC(lambda x: x * log(1+x), 0, 1, 19)) # abs tol 2e-15
Expected:
    0.250000000000001
Got:
    0.249999999999996
Tolerance exceeded:
    0.250000000000001 vs 0.249999999999996, tolerance 5e-15 > 2e-15
**********************************************************************
File "src/sage/tests/books/sagebook/sol/integration_doctest.py", line 41, in sage.tests.books.sagebook.sol.integration_doctest
Failed example:
    numerical_integral(sqrt(1-x^2), 0, 1)
Expected:
    (0.785398167726482..., 9.042725224567119...e-07)
Got:
    (0.7853981677264822, 9.042725224536535e-07)
**********************************************************************
1 item had failures:
   2 of  13 in sage.tests.books.sagebook.sol.integration_doctest
    [12 tests, 2 failures, 2.76 s]
----------------------------------------------------------------------
```



---

archive/issue_events_309921.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-12-31T22:29:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309921"
}
```



---

archive/issue_events_309922.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-12-31T22:29:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309922"
}
```



---

archive/issue_comments_357338.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c6139a8390accbad55e913cba4dd06f2f74787a\">3c6139a</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d6fb708c43e73cf173845cab7a188f61729d96b\">6d6fb70</a></td><td><code>partial fix for numerical noise on osX</code></td></tr></table>\n",
    "created_at": "2019-01-01T18:13:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357338",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1" align="right">Comment 1</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c6139a8390accbad55e913cba4dd06f2f74787a">3c6139a</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d6fb708c43e73cf173845cab7a188f61729d96b">6d6fb70</a></td><td><code>partial fix for numerical noise on osX</code></td></tr></table>




---

archive/issue_comments_357339.json:
```json
{
    "body": "Changed commit from **[a00c64c](https://github.com/sagemath/sagetrac-mirror/commit/a00c64c5d6f0599b988469895f69837dba8d9e71)** to **[6d6fb70](https://github.com/sagemath/sagetrac-mirror/commit/6d6fb708c43e73cf173845cab7a188f61729d96b)**",
    "created_at": "2019-01-01T18:13:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357339",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a00c64c](https://github.com/sagemath/sagetrac-mirror/commit/a00c64c5d6f0599b988469895f69837dba8d9e71)** to **[6d6fb70](https://github.com/sagemath/sagetrac-mirror/commit/6d6fb708c43e73cf173845cab7a188f61729d96b)**



---

archive/issue_comments_357340.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI did what I could (blindly) for the numerical noise on osX. We need an OsX reviewer to finish the job..",
    "created_at": "2019-01-01T18:14:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357340",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">Comment 2</div>

I did what I could (blindly) for the numerical noise on osX. We need an OsX reviewer to finish the job..



---

archive/issue_comments_357341.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nThank you.  What a pain in the ass.  If we had #26784 or another way to skip some tests on a specific platform I would just mark the entire directory to be skipped on OSX.  It's really beside the point of these tests that they give the exact same results on all imaginable platforms supported by Sage.",
    "created_at": "2019-01-03T19:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357341",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">Comment 3</div>

Thank you.  What a pain in the ass.  If we had #26784 or another way to skip some tests on a specific platform I would just mark the entire directory to be skipped on OSX.  It's really beside the point of these tests that they give the exact same results on all imaginable platforms supported by Sage.



---

archive/issue_comments_357342.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI think for the rest of these it would suffice to just mark `# known fail` for now and move on.  It's not critical.  I don't think these tests were ever run on OSX before.",
    "created_at": "2019-01-03T19:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357342",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">Comment 4</div>

I think for the rest of these it would suffice to just mark `# known fail` for now and move on.  It's not critical.  I don't think these tests were ever run on OSX before.



---

archive/issue_comments_357343.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nI have no OsX computer available to see what remains to be fixed or tagged.",
    "created_at": "2019-01-10T12:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357343",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">Comment 5</div>

I have no OsX computer available to see what remains to be fixed or tagged.



---

archive/issue_events_309923.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309923"
}
```



---

archive/issue_events_309924.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:15:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309924"
}
```



---

archive/issue_comments_357344.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nRetarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357344",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">Comment 6</div>

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_comments_357345.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nHere is what i get with an OSX computer:\n\n```\nMacBook-de-admin:sage admin$ ./sage -t --long src/sage/tests/books/sagebook\nThis looks like the first time you are running Sage.\nCleaning up, do not interrupt this.\nDone cleaning.\nno stored timings available\nRunning doctests with ID 2019-01-17-09-16-48-9bc3bf58.\nGit branch: t/23572/public/french_book_python3\nUsing --optional=dochtml,gfortran,mpir,python2,sage\nDoctesting 32 files.\nsage -t --long src/sage/tests/books/sagebook/calculus_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/calculus_doctest.py\", line 210, in sage.tests.books.sagebook.calculus_doctest\nFailed example:\n    solve([x^2 * y * z == 18, x * y^3 * z == 24,x * y * z^4 == 6], x, y, z)\nExpected:\n    [[x == 3, y == 2, z == 1],\n     [x == (1.337215067329613 - 2.685489874065195*I),\n      y == (-1.700434271459228 + 1.052864325754712*I),\n      z == (0.9324722294043555 - 0.3612416661871523*I)], ...]\nGot:\n    [[x == 3, y == 2, z == 1], [x == (1.337215067329607 - 2.6854898740652*I), y == (-1.700434271459228 + 1.052864325754712*I), z == (0.9324722294043555 - 0.3612416661871516*I)], [x == (1.337215067329607 + 2.685489874065201*I), y == (-1.700434271459228 - 1.052864325754712*I), z == (0.9324722294043555 + 0.3612416661871516*I)], [x == (-2.550651407188843 - 1.57929648863207*I), y == (-0.5473259801441658 + 1.923651286345638*I), z == (-0.9829730996839017 - 0.1837495178165701*I)], [x == (-2.550651407188842 + 1.57929648863207*I), y == (-0.5473259801441658 - 1.923651286345638*I), z == (-0.9829730996839017 + 0.1837495178165701*I)], [x == (0.2768050783899186 - 2.987202528885068*I), y == (1.478017834441328 - 1.347391287293138*I), z == (-0.8502171357296142 - 0.5264321628773558*I)], [x == (0.276805078389906 + 2.987202528885103*I), y == (1.478017834441318 + 1.347391287293114*I), z == (-0.8502171357296142 + 0.5264321628773558*I)], [x == (-0.8209889702162457 + 2.885476929518458*I), y == (-1.205269272758512 - 1.59603445456048*I), z == (0.09226835946330207 - 0.9957341762950345*I)], [x == (-0.8209889702162482 - 2.885476929518459*I), y == (-1.205269272758513 + 1.596034454560479*I), z == (0.09226835946330207 + 0.9957341762950345*I)], [x == (-1.807903909137758 - 2.394051681840712*I), y == (0.8914767115530775 - 1.790326582710134*I), z == (0.7390089172206591 - 0.6736956436465571*I)], [x == (-1.80790390913777 + 2.394051681840719*I), y == (0.8914767115530766 + 1.790326582710125*I), z == (0.7390089172206591 + 0.6736956436465571*I)], [x == (2.217026751661979 + 2.021086930939673*I), y == (1.864944458808712 + 0.722483332374306*I), z == (-0.2736629900720828 - 0.9618256431728189*I)], [x == (2.217026751662001 - 2.021086930939692*I), y == (1.864944458808693 - 0.7224833323742994*I), z == (-0.2736629900720828 + 0.9618256431728189*I)], [x == (2.797416688213066 - 1.083724998561461*I), y == (-1.965946199367804 + 0.3674990356331406*I), z == (-0.6026346363792563 - 0.7980172272802396*I)], [x == (2.797416688213067 + 1.083724998561461*I), y == (-1.965946199367804 - 0.3674990356331406*I), z == (-0.6026346363792563 + 0.7980172272802396*I)], [x == (-2.948919299051704 + 0.5512485534497115*I), y == (0.184536718926604 + 1.991468352590069*I), z == (0.4457383557765383 - 0.8951632913550623*I)], [x == (-2.948919299051704 - 0.5512485534497119*I), y == (0.1845367189266038 - 1.991468352590069*I), z == (0.4457383557765383 + 0.8951632913550623*I)]]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/calculus_doctest.py\", line 225, in sage.tests.books.sagebook.calculus_doctest\nFailed example:\n    find_root(expr, 0.1, pi)\nExpected:\n    2.0943951023931957\nGot:\n    2.0943951023931953\n**********************************************************************\n1 item had failures:\n   2 of 146 in sage.tests.books.sagebook.calculus_doctest\n    [145 tests, 2 failures, 7.85 s]\n...\n----------------------------------------------------------------------\nsage -t --long src/sage/tests/books/sagebook/calculus_doctest.py  # 2 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 383.2 seconds\n    cpu time: 346.3 seconds\n    cumulative wall time: 381.1 seconds\n```",
    "created_at": "2019-01-17T12:08:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357345",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:7" align="right">Comment 7</div>

Here is what i get with an OSX computer:

```
MacBook-de-admin:sage admin$ ./sage -t --long src/sage/tests/books/sagebook
This looks like the first time you are running Sage.
Cleaning up, do not interrupt this.
Done cleaning.
no stored timings available
Running doctests with ID 2019-01-17-09-16-48-9bc3bf58.
Git branch: t/23572/public/french_book_python3
Using --optional=dochtml,gfortran,mpir,python2,sage
Doctesting 32 files.
sage -t --long src/sage/tests/books/sagebook/calculus_doctest.py
**********************************************************************
File "src/sage/tests/books/sagebook/calculus_doctest.py", line 210, in sage.tests.books.sagebook.calculus_doctest
Failed example:
    solve([x^2 * y * z == 18, x * y^3 * z == 24,x * y * z^4 == 6], x, y, z)
Expected:
    [[x == 3, y == 2, z == 1],
     [x == (1.337215067329613 - 2.685489874065195*I),
      y == (-1.700434271459228 + 1.052864325754712*I),
      z == (0.9324722294043555 - 0.3612416661871523*I)], ...]
Got:
    [[x == 3, y == 2, z == 1], [x == (1.337215067329607 - 2.6854898740652*I), y == (-1.700434271459228 + 1.052864325754712*I), z == (0.9324722294043555 - 0.3612416661871516*I)], [x == (1.337215067329607 + 2.685489874065201*I), y == (-1.700434271459228 - 1.052864325754712*I), z == (0.9324722294043555 + 0.3612416661871516*I)], [x == (-2.550651407188843 - 1.57929648863207*I), y == (-0.5473259801441658 + 1.923651286345638*I), z == (-0.9829730996839017 - 0.1837495178165701*I)], [x == (-2.550651407188842 + 1.57929648863207*I), y == (-0.5473259801441658 - 1.923651286345638*I), z == (-0.9829730996839017 + 0.1837495178165701*I)], [x == (0.2768050783899186 - 2.987202528885068*I), y == (1.478017834441328 - 1.347391287293138*I), z == (-0.8502171357296142 - 0.5264321628773558*I)], [x == (0.276805078389906 + 2.987202528885103*I), y == (1.478017834441318 + 1.347391287293114*I), z == (-0.8502171357296142 + 0.5264321628773558*I)], [x == (-0.8209889702162457 + 2.885476929518458*I), y == (-1.205269272758512 - 1.59603445456048*I), z == (0.09226835946330207 - 0.9957341762950345*I)], [x == (-0.8209889702162482 - 2.885476929518459*I), y == (-1.205269272758513 + 1.596034454560479*I), z == (0.09226835946330207 + 0.9957341762950345*I)], [x == (-1.807903909137758 - 2.394051681840712*I), y == (0.8914767115530775 - 1.790326582710134*I), z == (0.7390089172206591 - 0.6736956436465571*I)], [x == (-1.80790390913777 + 2.394051681840719*I), y == (0.8914767115530766 + 1.790326582710125*I), z == (0.7390089172206591 + 0.6736956436465571*I)], [x == (2.217026751661979 + 2.021086930939673*I), y == (1.864944458808712 + 0.722483332374306*I), z == (-0.2736629900720828 - 0.9618256431728189*I)], [x == (2.217026751662001 - 2.021086930939692*I), y == (1.864944458808693 - 0.7224833323742994*I), z == (-0.2736629900720828 + 0.9618256431728189*I)], [x == (2.797416688213066 - 1.083724998561461*I), y == (-1.965946199367804 + 0.3674990356331406*I), z == (-0.6026346363792563 - 0.7980172272802396*I)], [x == (2.797416688213067 + 1.083724998561461*I), y == (-1.965946199367804 - 0.3674990356331406*I), z == (-0.6026346363792563 + 0.7980172272802396*I)], [x == (-2.948919299051704 + 0.5512485534497115*I), y == (0.184536718926604 + 1.991468352590069*I), z == (0.4457383557765383 - 0.8951632913550623*I)], [x == (-2.948919299051704 - 0.5512485534497119*I), y == (0.1845367189266038 - 1.991468352590069*I), z == (0.4457383557765383 + 0.8951632913550623*I)]]
**********************************************************************
File "src/sage/tests/books/sagebook/calculus_doctest.py", line 225, in sage.tests.books.sagebook.calculus_doctest
Failed example:
    find_root(expr, 0.1, pi)
Expected:
    2.0943951023931957
Got:
    2.0943951023931953
**********************************************************************
1 item had failures:
   2 of 146 in sage.tests.books.sagebook.calculus_doctest
    [145 tests, 2 failures, 7.85 s]
...
----------------------------------------------------------------------
sage -t --long src/sage/tests/books/sagebook/calculus_doctest.py  # 2 doctests failed
----------------------------------------------------------------------
Total time for all tests: 383.2 seconds
    cpu time: 346.3 seconds
    cumulative wall time: 381.1 seconds
```



---

archive/issue_comments_357346.json:
```json
{
    "body": "Changed commit from **[6d6fb70](https://github.com/sagemath/sagetrac-mirror/commit/6d6fb708c43e73cf173845cab7a188f61729d96b)** to **[6da3629](https://github.com/sagemath/sagetrac-mirror/commit/6da362973acff90517448e8e8fb3eef6282b313f)**",
    "created_at": "2019-01-17T12:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357346",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6d6fb70](https://github.com/sagemath/sagetrac-mirror/commit/6d6fb708c43e73cf173845cab7a188f61729d96b)** to **[6da3629](https://github.com/sagemath/sagetrac-mirror/commit/6da362973acff90517448e8e8fb3eef6282b313f)**



---

archive/issue_comments_357347.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17d97d8a974bcc684668385b4072803d69cfa815\">17d97d8</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6da362973acff90517448e8e8fb3eef6282b313f\">6da3629</a></td><td><code>book doctests : adding some tolerance again</code></td></tr></table>\n",
    "created_at": "2019-01-17T12:28:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357347",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17d97d8a974bcc684668385b4072803d69cfa815">17d97d8</a></td><td><code>Merge branch 'public/french_book_python3' in 8.6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6da362973acff90517448e8e8fb3eef6282b313f">6da3629</a></td><td><code>book doctests : adding some tolerance again</code></td></tr></table>




---

archive/issue_comments_357348.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nThanks a lot. Could you please double check now with my latest fixes ?",
    "created_at": "2019-01-17T12:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357348",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">Comment 9</div>

Thanks a lot. Could you please double check now with my latest fixes ?



---

archive/issue_comments_357349.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nYes `sage -t --long src/sage/tests/books/sagebook` now pass on OSX. In my humble opinion a green would mean positive review.",
    "created_at": "2019-01-17T12:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357349",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:0" align="right">Comment 0</div>

Yes `sage -t --long src/sage/tests/books/sagebook` now pass on OSX. In my humble opinion a green would mean positive review.



---

archive/issue_comments_357350.json:
```json
{
    "body": "Changed author from **Erik Bray, Fr\u00e9d\u00e9ric Chapoton** to **Erik Bray, Fr\u00e9d\u00e9ric Chapoton, Vincent Klein**",
    "created_at": "2019-01-17T12:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357350",
    "user": "https://github.com/vinklein"
}
```

Changed author from **Erik Bray, Frédéric Chapoton** to **Erik Bray, Frédéric Chapoton, Vincent Klein**



---

archive/issue_comments_357351.json:
```json
{
    "body": "Changed reviewer from **Erik Bray, Fr\u00e9d\u00e9ric Chapoton** to **Erik Bray, Fr\u00e9d\u00e9ric Chapoton, Vincent Klein**",
    "created_at": "2019-01-17T12:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357351",
    "user": "https://github.com/vinklein"
}
```

Changed reviewer from **Erik Bray, Frédéric Chapoton** to **Erik Bray, Frédéric Chapoton, Vincent Klein**



---

archive/issue_comments_357352.json:
```json
{
    "body": "Changed author from **Erik Bray, Fr\u00e9d\u00e9ric Chapoton, Vincent Klein** to **Erik Bray, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-01-17T12:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357352",
    "user": "https://github.com/vinklein"
}
```

Changed author from **Erik Bray, Frédéric Chapoton, Vincent Klein** to **Erik Bray, Frédéric Chapoton**



---

archive/issue_comments_357353.json:
```json
{
    "body": "Changed work issues from **support `reduce` as a global in Python 3** to none",
    "created_at": "2019-01-17T14:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357353",
    "user": "https://github.com/fchapoton"
}
```

Changed work issues from **support `reduce` as a global in Python 3** to none



---

archive/issue_comments_357354.json:
```json
{
    "body": "Changed dependencies from **#26656** to none",
    "created_at": "2019-01-17T14:48:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357354",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#26656** to none



---

archive/issue_comments_357355.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nGreat, thank you Vincent!  Hopefully this time...",
    "created_at": "2019-01-18T12:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357355",
    "user": "https://github.com/embray"
}
```

<div id="comment:3" align="right">Comment 3</div>

Great, thank you Vincent!  Hopefully this time...



---

archive/issue_events_309925.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-18T12:23:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309925"
}
```



---

archive/issue_events_309926.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-18T12:23:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309926"
}
```



---

archive/issue_events_309927.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-23T23:36:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309927"
}
```



---

archive/issue_events_309928.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-23T23:36:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309928"
}
```



---

archive/issue_comments_357356.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\n\n```\nsage -t --long src/sage/tests/books/sagebook/float_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 282, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    RIF(0,+infinity)\nExpected:\n    [0.00000000000000000 .. +infinity]\nGot:\n    [0.0000000000000000 .. +infinity]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 339, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    E = RIF(0,1); log(E)\nExpected:\n    [-infinity .. -0.00000000000000000]\nGot:\n    [-infinity .. -0.0000000000000000]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 352, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    1-x^2\nExpected:\n    [0.00000000000000000 .. 1.0000000000000000]\nGot:\n    [0.0000000000000000 .. 1.0000000000000000]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 354, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    1-x*x\nExpected:\n    [0.00000000000000000 .. 2.0000000000000000]\nGot:\n    [0.0000000000000000 .. 2.0000000000000000]\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/float_doctest.py\", line 356, in sage.tests.books.sagebook.float_doctest\nFailed example:\n    (1-x)*(1+x)\nExpected:\n    [0.00000000000000000 .. 4.0000000000000000]\nGot:\n    [0.0000000000000000 .. 4.0000000000000000]\n**********************************************************************\n1 item had failures:\n   5 of 142 in sage.tests.books.sagebook.float_doctest\n    [141 tests, 5 failures, 20.45 s]\n\n\nsage -t --long src/sage/tests/books/sagebook/sol/float_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/sagebook/sol/float_doctest.py\", line 137, in sage.tests.books.sagebook.sol.float_doctest\nFailed example:\n    f(I)\nExpected:\n    [0.00000000000000000 .. 1.0000000000000000]\nGot:\n    [0.0000000000000000 .. 1.0000000000000000]\n**********************************************************************\n1 item had failures:\n   1 of  49 in sage.tests.books.sagebook.sol.float_doctest\n    [48 tests, 1 failure, 1.79 s]\n\n```",
    "created_at": "2019-01-23T23:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357356",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">Comment 4</div>


```
sage -t --long src/sage/tests/books/sagebook/float_doctest.py
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 282, in sage.tests.books.sagebook.float_doctest
Failed example:
    RIF(0,+infinity)
Expected:
    [0.00000000000000000 .. +infinity]
Got:
    [0.0000000000000000 .. +infinity]
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 339, in sage.tests.books.sagebook.float_doctest
Failed example:
    E = RIF(0,1); log(E)
Expected:
    [-infinity .. -0.00000000000000000]
Got:
    [-infinity .. -0.0000000000000000]
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 352, in sage.tests.books.sagebook.float_doctest
Failed example:
    1-x^2
Expected:
    [0.00000000000000000 .. 1.0000000000000000]
Got:
    [0.0000000000000000 .. 1.0000000000000000]
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 354, in sage.tests.books.sagebook.float_doctest
Failed example:
    1-x*x
Expected:
    [0.00000000000000000 .. 2.0000000000000000]
Got:
    [0.0000000000000000 .. 2.0000000000000000]
**********************************************************************
File "src/sage/tests/books/sagebook/float_doctest.py", line 356, in sage.tests.books.sagebook.float_doctest
Failed example:
    (1-x)*(1+x)
Expected:
    [0.00000000000000000 .. 4.0000000000000000]
Got:
    [0.0000000000000000 .. 4.0000000000000000]
**********************************************************************
1 item had failures:
   5 of 142 in sage.tests.books.sagebook.float_doctest
    [141 tests, 5 failures, 20.45 s]


sage -t --long src/sage/tests/books/sagebook/sol/float_doctest.py
**********************************************************************
File "src/sage/tests/books/sagebook/sol/float_doctest.py", line 137, in sage.tests.books.sagebook.sol.float_doctest
Failed example:
    f(I)
Expected:
    [0.00000000000000000 .. 1.0000000000000000]
Got:
    [0.0000000000000000 .. 1.0000000000000000]
**********************************************************************
1 item had failures:
   1 of  49 in sage.tests.books.sagebook.sol.float_doctest
    [48 tests, 1 failure, 1.79 s]

```



---

archive/issue_comments_357357.json:
```json
{
    "body": "Changed commit from **[6da3629](https://github.com/sagemath/sagetrac-mirror/commit/6da362973acff90517448e8e8fb3eef6282b313f)** to **[4c9163c](https://github.com/sagemath/sagetrac-mirror/commit/4c9163c5e84afc8a1deff94e16d776fe7a690852)**",
    "created_at": "2019-01-24T08:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357357",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6da3629](https://github.com/sagemath/sagetrac-mirror/commit/6da362973acff90517448e8e8fb3eef6282b313f)** to **[4c9163c](https://github.com/sagemath/sagetrac-mirror/commit/4c9163c5e84afc8a1deff94e16d776fe7a690852)**



---

archive/issue_comments_357358.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c9163c5e84afc8a1deff94e16d776fe7a690852\">4c9163c</a></td><td><code>fix osX doctests for 0.0000000000</code></td></tr></table>\n",
    "created_at": "2019-01-24T08:15:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357358",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c9163c5e84afc8a1deff94e16d776fe7a690852">4c9163c</a></td><td><code>fix osX doctests for 0.0000000000</code></td></tr></table>




---

archive/issue_events_309929.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-24T08:17:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309929"
}
```



---

archive/issue_events_309930.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-01-24T08:17:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309930"
}
```



---

archive/issue_comments_357359.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\noh, boy.. Ce ticket commence a me porter sur les nerfs.\n\nVincent, tu veux bien v\u00e9rifier que tous les tests du livre passent sur OsX, s'il te plait ?",
    "created_at": "2019-01-24T08:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357359",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">Comment 6</div>

oh, boy.. Ce ticket commence a me porter sur les nerfs.

Vincent, tu veux bien vérifier que tous les tests du livre passent sur OsX, s'il te plait ?



---

archive/issue_comments_357360.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nH\u00e9las, \u00e7\u00e0 va prendre un peu de temps. Je n'ai pas dans l'imm\u00e9diat de mac install\u00e9 avec un sage sous la main.",
    "created_at": "2019-01-24T08:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357360",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:7" align="right">Comment 7</div>

Hélas, çà va prendre un peu de temps. Je n'ai pas dans l'immédiat de mac installé avec un sage sous la main.



---

archive/issue_comments_357361.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\n@jhpalmieri \n\nJohn, would you by chance be able to run the doctests of the modified files on OsX ? If so, please do.",
    "created_at": "2019-01-24T13:00:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357361",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">Comment 8</div>

@jhpalmieri 

John, would you by chance be able to run the doctests of the modified files on OsX ? If so, please do.



---

archive/issue_comments_357362.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nFor the last commit, I personally think it would have been better to just replace `0.00000000000000000` by `0.0000000000000000` (as done in #26156). Using `...` implies that the test is somehow not deterministic, while it is.",
    "created_at": "2019-01-24T13:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357362",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">Comment 9</div>

For the last commit, I personally think it would have been better to just replace `0.00000000000000000` by `0.0000000000000000` (as done in #26156). Using `...` implies that the test is somehow not deterministic, while it is.



---

archive/issue_comments_357363.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nJust to clear things up: the failure from [comment:124] has nothing to do with OS X (I wonder why you think that).",
    "created_at": "2019-01-24T13:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357363",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">Comment 0</div>

Just to clear things up: the failure from [comment:124] has nothing to do with OS X (I wonder why you think that).



---

archive/issue_comments_357364.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nok, right. No time to change my last commit right now",
    "created_at": "2019-01-24T13:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357364",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">Comment 1</div>

ok, right. No time to change my last commit right now



---

archive/issue_comments_357365.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nSince it's a tiny change and it's my \"fault\", I'll fix it.",
    "created_at": "2019-01-24T14:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357365",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">Comment 2</div>

Since it's a tiny change and it's my "fault", I'll fix it.



---

archive/issue_comments_357366.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nAnother question while I'm looking at the code: what's the meaning of `sol` in the directory name `src/sage/tests/books/sagebook/sol`? The way I understand it, that's the directory for the tests of the (old) french book, but I don't understand the name `sol`.",
    "created_at": "2019-01-24T15:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357366",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">Comment 3</div>

Another question while I'm looking at the code: what's the meaning of `sol` in the directory name `src/sage/tests/books/sagebook/sol`? The way I understand it, that's the directory for the tests of the (old) french book, but I don't understand the name `sol`.



---

archive/issue_comments_357367.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nAlso the name `sagebook` is not very descriptive.",
    "created_at": "2019-01-24T15:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357367",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">Comment 4</div>

Also the name `sagebook` is not very descriptive.



---

archive/issue_comments_357368.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\n**sol**utions of exercises ?",
    "created_at": "2019-01-24T15:09:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357368",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">Comment 5</div>

**sol**utions of exercises ?



---

archive/issue_comments_357369.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07902fc060fc9bd93b21079a565d7449f7d6ecbe\">07902fc</a></td><td><code>replace sage/tests/french_book with sage/tests/books/sagebook, containing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c6b2435b568bdd0d4a162e759c2765564b0d968\">7c6b243</a></td><td><code>python3 compatibility of doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/860b65c4723a2d7af3289afb365b53a665ebc208\">860b65c</a></td><td><code>Fix 0.00000000000000000 in doctests</code></td></tr></table>\n",
    "created_at": "2019-01-24T15:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357369",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07902fc060fc9bd93b21079a565d7449f7d6ecbe">07902fc</a></td><td><code>replace sage/tests/french_book with sage/tests/books/sagebook, containing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c6b2435b568bdd0d4a162e759c2765564b0d968">7c6b243</a></td><td><code>python3 compatibility of doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/860b65c4723a2d7af3289afb365b53a665ebc208">860b65c</a></td><td><code>Fix 0.00000000000000000 in doctests</code></td></tr></table>




---

archive/issue_comments_357370.json:
```json
{
    "body": "Changed commit from **[4c9163c](https://github.com/sagemath/sagetrac-mirror/commit/4c9163c5e84afc8a1deff94e16d776fe7a690852)** to **[860b65c](https://github.com/sagemath/sagetrac-mirror/commit/860b65c4723a2d7af3289afb365b53a665ebc208)**",
    "created_at": "2019-01-24T15:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357370",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4c9163c](https://github.com/sagemath/sagetrac-mirror/commit/4c9163c5e84afc8a1deff94e16d776fe7a690852)** to **[860b65c](https://github.com/sagemath/sagetrac-mirror/commit/860b65c4723a2d7af3289afb365b53a665ebc208)**



---

archive/issue_comments_357371.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\n@fchapoton It looks like you are right the examples under `sol` modules comes from \"Annex A. Solutions des exercises\" chapter of the French version. \\\\\nThis chapter is named  \"ANNEX A. ANSWERS TO EXERCISES\" in the English book. I let you decide if `ans` or `answers` or another thing would be a better module name.",
    "created_at": "2019-01-24T15:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357371",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:7" align="right">Comment 7</div>

@fchapoton It looks like you are right the examples under `sol` modules comes from "Annex A. Solutions des exercises" chapter of the French version. \\
This chapter is named  "ANNEX A. ANSWERS TO EXERCISES" in the English book. I let you decide if `ans` or `answers` or another thing would be a better module name.



---

archive/issue_comments_357372.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nI confirm \"sol\" means \"solutions of exercises\". This part was also updated for the english version.",
    "created_at": "2019-01-24T15:26:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357372",
    "user": "https://github.com/zimmermann6"
}
```

<div id="comment:8" align="right">Comment 8</div>

I confirm "sol" means "solutions of exercises". This part was also updated for the english version.



---

archive/issue_comments_357373.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4dfe2da3ac68011737d637c3dfbdda20bb49b10\">d4dfe2d</a></td><td><code>Rename sagebook -> computational-mathematics-with-sagemath</code></td></tr></table>\n",
    "created_at": "2019-01-24T15:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357373",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4dfe2da3ac68011737d637c3dfbdda20bb49b10">d4dfe2d</a></td><td><code>Rename sagebook -> computational-mathematics-with-sagemath</code></td></tr></table>




---

archive/issue_comments_357374.json:
```json
{
    "body": "Changed commit from **[860b65c](https://github.com/sagemath/sagetrac-mirror/commit/860b65c4723a2d7af3289afb365b53a665ebc208)** to **[d4dfe2d](https://github.com/sagemath/sagetrac-mirror/commit/d4dfe2da3ac68011737d637c3dfbdda20bb49b10)**",
    "created_at": "2019-01-24T15:27:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357374",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[860b65c](https://github.com/sagemath/sagetrac-mirror/commit/860b65c4723a2d7af3289afb365b53a665ebc208)** to **[d4dfe2d](https://github.com/sagemath/sagetrac-mirror/commit/d4dfe2da3ac68011737d637c3dfbdda20bb49b10)**



---

archive/issue_comments_357375.json:
```json
{
    "body": "Changed commit from **[d4dfe2d](https://github.com/sagemath/sagetrac-mirror/commit/d4dfe2da3ac68011737d637c3dfbdda20bb49b10)** to **[10bbaae](https://github.com/sagemath/sagetrac-mirror/commit/10bbaae5c50226711e110d65a840fb9d74c5f7a1)**",
    "created_at": "2019-01-24T15:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357375",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d4dfe2d](https://github.com/sagemath/sagetrac-mirror/commit/d4dfe2da3ac68011737d637c3dfbdda20bb49b10)** to **[10bbaae](https://github.com/sagemath/sagetrac-mirror/commit/10bbaae5c50226711e110d65a840fb9d74c5f7a1)**



---

archive/issue_comments_357376.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10bbaae5c50226711e110d65a840fb9d74c5f7a1\">10bbaae</a></td><td><code>Update README</code></td></tr></table>\n",
    "created_at": "2019-01-24T15:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357376",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0" align="right">Comment 0</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10bbaae5c50226711e110d65a840fb9d74c5f7a1">10bbaae</a></td><td><code>Update README</code></td></tr></table>




---

archive/issue_comments_357377.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nSorry for this picky remark but `computational_mathematics_with_sagemath` would be a far more standard compliant name (`_` instead of `-`).",
    "created_at": "2019-01-24T15:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357377",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:1" align="right">Comment 1</div>

Sorry for this picky remark but `computational_mathematics_with_sagemath` would be a far more standard compliant name (`_` instead of `-`).



---

archive/issue_comments_357378.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI get one doctest failure:\n\n```\nsage -t --warn-long 53.8 src/sage/tests/py3_syntax.py\n**********************************************************************\nFile \"src/sage/tests/py3_syntax.py\", line 80, in sage.tests.py3_syntax.SortedDirectoryWalkerABC.__iter__\nFailed example:\n    next(iter(test))\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.py3_syntax.SortedDirectoryWalkerABC.__iter__[2]>\", line 1, in <module>\n        next(iter(test))\n    StopIteration\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.tests.py3_syntax.SortedDirectoryWalkerABC.__iter__\n    [27 tests, 1 failure, 0.05 s]\n----------------------------------------------------------------------\nsage -t --warn-long 53.8 src/sage/tests/py3_syntax.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 0.1 seconds\n    cpu time: 0.0 seconds\n    cumulative wall time: 0.1 seconds\n```",
    "created_at": "2019-01-24T18:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357378",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">Comment 2</div>

I get one doctest failure:

```
sage -t --warn-long 53.8 src/sage/tests/py3_syntax.py
**********************************************************************
File "src/sage/tests/py3_syntax.py", line 80, in sage.tests.py3_syntax.SortedDirectoryWalkerABC.__iter__
Failed example:
    next(iter(test))
Exception raised:
    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/jpalmier/Desktop/Sage/git/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.py3_syntax.SortedDirectoryWalkerABC.__iter__[2]>", line 1, in <module>
        next(iter(test))
    StopIteration
**********************************************************************
1 item had failures:
   1 of   4 in sage.tests.py3_syntax.SortedDirectoryWalkerABC.__iter__
    [27 tests, 1 failure, 0.05 s]
----------------------------------------------------------------------
sage -t --warn-long 53.8 src/sage/tests/py3_syntax.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 0.1 seconds
    cpu time: 0.0 seconds
    cumulative wall time: 0.1 seconds
```



---

archive/issue_comments_357379.json:
```json
{
    "body": "Changed commit from **[10bbaae](https://github.com/sagemath/sagetrac-mirror/commit/10bbaae5c50226711e110d65a840fb9d74c5f7a1)** to **[fd9e5d1](https://github.com/sagemath/sagetrac-mirror/commit/fd9e5d1cf0729629bb0d5cc7f05323175d4f888b)**",
    "created_at": "2019-01-24T19:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357379",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[10bbaae](https://github.com/sagemath/sagetrac-mirror/commit/10bbaae5c50226711e110d65a840fb9d74c5f7a1)** to **[fd9e5d1](https://github.com/sagemath/sagetrac-mirror/commit/fd9e5d1cf0729629bb0d5cc7f05323175d4f888b)**



---

archive/issue_comments_357380.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd9e5d1cf0729629bb0d5cc7f05323175d4f888b\">fd9e5d1</a></td><td><code>fix the py3_syntax doctest</code></td></tr></table>\n",
    "created_at": "2019-01-24T19:14:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357380",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd9e5d1cf0729629bb0d5cc7f05323175d4f888b">fd9e5d1</a></td><td><code>fix the py3_syntax doctest</code></td></tr></table>




---

archive/issue_comments_357381.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nmy last fix is not correct yet",
    "created_at": "2019-01-25T07:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357381",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">Comment 4</div>

my last fix is not correct yet



---

archive/issue_comments_357382.json:
```json
{
    "body": "Changed commit from **[fd9e5d1](https://github.com/sagemath/sagetrac-mirror/commit/fd9e5d1cf0729629bb0d5cc7f05323175d4f888b)** to **[96d55d4](https://github.com/sagemath/sagetrac-mirror/commit/96d55d4ff346642b182703ebd3e08f96c65c7898)**",
    "created_at": "2019-01-25T08:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357382",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fd9e5d1](https://github.com/sagemath/sagetrac-mirror/commit/fd9e5d1cf0729629bb0d5cc7f05323175d4f888b)** to **[96d55d4](https://github.com/sagemath/sagetrac-mirror/commit/96d55d4ff346642b182703ebd3e08f96c65c7898)**



---

archive/issue_comments_357383.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96d55d4ff346642b182703ebd3e08f96c65c7898\">96d55d4</a></td><td><code>fix doctest</code></td></tr></table>\n",
    "created_at": "2019-01-25T08:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357383",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96d55d4ff346642b182703ebd3e08f96c65c7898">96d55d4</a></td><td><code>fix doctest</code></td></tr></table>




---

archive/issue_comments_357384.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nand now a bunch of ubuntu ppc failing doctests, just for the fun of it... :-(",
    "created_at": "2019-01-25T11:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357384",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">Comment 6</div>

and now a bunch of ubuntu ppc failing doctests, just for the fun of it... :-(



---

archive/issue_comments_357385.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">Comment 147</div>\n\nReplying to [@fchapoton](#comment%3A146):\n> and now a bunch of ubuntu ppc failing doctests, just for the fun of it... :-(\n\nMost of those are numerical noise, not so bad.",
    "created_at": "2019-01-25T11:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357385",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:147" align="right">Comment 147</div>

Replying to [@fchapoton](#comment%3A146):
> and now a bunch of ubuntu ppc failing doctests, just for the fun of it... :-(

Most of those are numerical noise, not so bad.



---

archive/issue_comments_357386.json:
```json
{
    "body": "Changed commit from **[96d55d4](https://github.com/sagemath/sagetrac-mirror/commit/96d55d4ff346642b182703ebd3e08f96c65c7898)** to **[a7d2dc9](https://github.com/sagemath/sagetrac-mirror/commit/a7d2dc9374419ba61b4038ce563282344eaeb699)**",
    "created_at": "2019-01-27T13:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357386",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[96d55d4](https://github.com/sagemath/sagetrac-mirror/commit/96d55d4ff346642b182703ebd3e08f96c65c7898)** to **[a7d2dc9](https://github.com/sagemath/sagetrac-mirror/commit/a7d2dc9374419ba61b4038ce563282344eaeb699)**



---

archive/issue_comments_357387.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/252be989741dac8140f7a38d0045cdaa08be8f1f\">252be98</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.b1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7d2dc9374419ba61b4038ce563282344eaeb699\">a7d2dc9</a></td><td><code>fixing almost all ubuntu/ppc numerical precision doctests in book</code></td></tr></table>\n",
    "created_at": "2019-01-27T13:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357387",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/252be989741dac8140f7a38d0045cdaa08be8f1f">252be98</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.b1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7d2dc9374419ba61b4038ce563282344eaeb699">a7d2dc9</a></td><td><code>fixing almost all ubuntu/ppc numerical precision doctests in book</code></td></tr></table>




---

archive/issue_comments_357388.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nThere is one suspect doctest that I have not fixed.. Namely\n\n```\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/linsolve_doctest.py\", line 150, in sage.tests.books.computational-mathematics-with-sagemath.linsolve_doctest\nFailed example:\n    x = V*lamb; x\nExpected:\n    (0.2370370370370367, 0.4518518518518521, 0.3703703703703702)\nGot:\n    (-2.083296832557597e+16, -1.0416484162787986e+16, 2.6041210406969964e+16)\n```",
    "created_at": "2019-01-27T13:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357388",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">Comment 9</div>

There is one suspect doctest that I have not fixed.. Namely

```
File "src/sage/tests/books/computational-mathematics-with-sagemath/linsolve_doctest.py", line 150, in sage.tests.books.computational-mathematics-with-sagemath.linsolve_doctest
Failed example:
    x = V*lamb; x
Expected:
    (0.2370370370370367, 0.4518518518518521, 0.3703703703703702)
Got:
    (-2.083296832557597e+16, -1.0416484162787986e+16, 2.6041210406969964e+16)
```



---

archive/issue_comments_357389.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nmay I just tag this bad one with # known bug ?",
    "created_at": "2019-01-28T13:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357389",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:0" align="right">Comment 0</div>

may I just tag this bad one with # known bug ?



---

archive/issue_comments_357390.json:
```json
{
    "body": "<div id=\"comment:151\" align=\"right\">Comment 151</div>\n\nReplying to [@fchapoton](#comment%3A150):\n> may I just tag this bad one with # known bug ?\n\nI cracked open my actual copy of the book to better understand the context to this example (being that I'm stupid it was not immediately obvious to me).  The purpose of the example is to demonstrate using single value decomposition to find an approximate solution to overdetermined system of equations.  I don't know exactly how SVD is implemented but the docs say that U and V are not guaranteed to be unique, and indeed the problem does not have an exact solution.\n\nSo for this test I would just mark it `# random` (I don't think it's a bug, it's just not guaranteed deterministic between systems).",
    "created_at": "2019-01-28T15:24:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357390",
    "user": "https://github.com/embray"
}
```

<div id="comment:151" align="right">Comment 151</div>

Replying to [@fchapoton](#comment%3A150):
> may I just tag this bad one with # known bug ?

I cracked open my actual copy of the book to better understand the context to this example (being that I'm stupid it was not immediately obvious to me).  The purpose of the example is to demonstrate using single value decomposition to find an approximate solution to overdetermined system of equations.  I don't know exactly how SVD is implemented but the docs say that U and V are not guaranteed to be unique, and indeed the problem does not have an exact solution.

So for this test I would just mark it `# random` (I don't think it's a bug, it's just not guaranteed deterministic between systems).



---

archive/issue_comments_357391.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f76c2aafc6ec0d2189736b6b969478aa1dfd7d6e\">f76c2aa</a></td><td><code>adding one # random</code></td></tr></table>\n",
    "created_at": "2019-01-28T16:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357391",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f76c2aafc6ec0d2189736b6b969478aa1dfd7d6e">f76c2aa</a></td><td><code>adding one # random</code></td></tr></table>




---

archive/issue_comments_357392.json:
```json
{
    "body": "Changed commit from **[a7d2dc9](https://github.com/sagemath/sagetrac-mirror/commit/a7d2dc9374419ba61b4038ce563282344eaeb699)** to **[f76c2aa](https://github.com/sagemath/sagetrac-mirror/commit/f76c2aafc6ec0d2189736b6b969478aa1dfd7d6e)**",
    "created_at": "2019-01-28T16:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357392",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a7d2dc9](https://github.com/sagemath/sagetrac-mirror/commit/a7d2dc9374419ba61b4038ce563282344eaeb699)** to **[f76c2aa](https://github.com/sagemath/sagetrac-mirror/commit/f76c2aafc6ec0d2189736b6b969478aa1dfd7d6e)**



---

archive/issue_comments_357393.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\ncan we now try to send it again to the buildbots, please ?",
    "created_at": "2019-01-29T17:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357393",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">Comment 3</div>

can we now try to send it again to the buildbots, please ?



---

archive/issue_comments_357394.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nSure, but I would like to see better commit messages.",
    "created_at": "2019-01-29T17:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357394",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">Comment 4</div>

Sure, but I would like to see better commit messages.



---

archive/issue_comments_357395.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5947493a49a57d19a4fe8b2c40c4451c9f91dac1\">5947493</a></td><td><code>This example is inherently non-deterministic between systems, by design.  So it</code></td></tr></table>\n",
    "created_at": "2019-01-29T17:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357395",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5947493a49a57d19a4fe8b2c40c4451c9f91dac1">5947493</a></td><td><code>This example is inherently non-deterministic between systems, by design.  So it</code></td></tr></table>




---

archive/issue_comments_357396.json:
```json
{
    "body": "Changed commit from **[f76c2aa](https://github.com/sagemath/sagetrac-mirror/commit/f76c2aafc6ec0d2189736b6b969478aa1dfd7d6e)** to **[5947493](https://github.com/sagemath/sagetrac-mirror/commit/5947493a49a57d19a4fe8b2c40c4451c9f91dac1)**",
    "created_at": "2019-01-29T17:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357396",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f76c2aa](https://github.com/sagemath/sagetrac-mirror/commit/f76c2aafc6ec0d2189736b6b969478aa1dfd7d6e)** to **[5947493](https://github.com/sagemath/sagetrac-mirror/commit/5947493a49a57d19a4fe8b2c40c4451c9f91dac1)**



---

archive/issue_events_309931.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-29T17:20:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309931"
}
```



---

archive/issue_events_309932.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-29T17:20:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309932"
}
```



---

archive/issue_comments_357397.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\n\n```\n**********************************************************************\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/float_doctest.py\", line 208, in sage.tests.books.computational-mathematics-with-sagemath.float_doctest\nFailed example:\n    print(\"exact - classical summation: %.1f\" % (s-ii))\nExpected:\n    exact - classical summation: -45.5\nGot:\n    exact - classical summation: -45.6\n**********************************************************************\n1 item had failures:\n   1 of 142 in sage.tests.books.computational-mathematics-with-sagemath.float_doctest\n    [141 tests, 1 failure, 50.05 s]\n**********************************************************************\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py\", line 109, in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest\nFailed example:\n    gp('intnum(x=0, 1, x^(-99/100))') # abs tol 2e-16\nExpected:\n    73.62914262423378365\nGot:\n    67.28157752276430690714796980\nTolerance exceeded:\n    73.62914262423378365 vs 67.28157752276430690714796980, tolerance 7e0 > 2e-16\n**********************************************************************\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py\", line 119, in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest\nFailed example:\n    gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 2e-16\nExpected:\n    74.47274932028288503\nGot:\n    68.16118711180150288540450897\nTolerance exceeded:\n    74.47274932028288503 vs 68.16118711180150288540450897, tolerance 7e0 > 2e-16\n**********************************************************************\n1 item had failures:\n   2 of  87 in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest\n    [86 tests, 2 failures, 28.58 s]\n**********************************************************************\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/linsolve_doctest.py\", line 135, in sage.tests.books.computational-mathematics-with-sagemath.linsolve_doctest\nFailed example:\n    Z.norm(Infinity)*(Z^-1).norm(Infinity) # abs tol 1e-11\nExpected:\n    1992.3750000000168\nGot:\n    1992.3750000000014\nTolerance exceeded:\n    1992.3750000000168 vs 1992.3750000000014, tolerance 2e-11 > 1e-11\n**********************************************************************\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/linsolve_doctest.py\", line 180, in sage.tests.books.computational-mathematics-with-sagemath.linsolve_doctest\nFailed example:\n    Q\nExpected:\n    [ 0.7612151656410958  0.6484993998439783]\n    [-0.6484993998439782  0.7612151656410955]\nGot:\n    [ 0.7612151656410957   0.648499399843978]\n    [-0.6484993998439779  0.7612151656410955]\n**********************************************************************\n1 item had failures:\n   2 of 132 in sage.tests.books.computational-mathematics-with-sagemath.linsolve_doctest\n    [131 tests, 2 failures, 21.59 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/float_doctest.py  # 1 doctest failed\nsage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py  # 2 doctests failed\nsage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/linsolve_doctest.py  # 2 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2019-01-31T08:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357397",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">Comment 7</div>


```
**********************************************************************
File "src/sage/tests/books/computational-mathematics-with-sagemath/float_doctest.py", line 208, in sage.tests.books.computational-mathematics-with-sagemath.float_doctest
Failed example:
    print("exact - classical summation: %.1f" % (s-ii))
Expected:
    exact - classical summation: -45.5
Got:
    exact - classical summation: -45.6
**********************************************************************
1 item had failures:
   1 of 142 in sage.tests.books.computational-mathematics-with-sagemath.float_doctest
    [141 tests, 1 failure, 50.05 s]
**********************************************************************
File "src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py", line 109, in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest
Failed example:
    gp('intnum(x=0, 1, x^(-99/100))') # abs tol 2e-16
Expected:
    73.62914262423378365
Got:
    67.28157752276430690714796980
Tolerance exceeded:
    73.62914262423378365 vs 67.28157752276430690714796980, tolerance 7e0 > 2e-16
**********************************************************************
File "src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py", line 119, in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest
Failed example:
    gp('intnum(x=[0, -1/42], 1, x^(-99/100))') # abs tol 2e-16
Expected:
    74.47274932028288503
Got:
    68.16118711180150288540450897
Tolerance exceeded:
    74.47274932028288503 vs 68.16118711180150288540450897, tolerance 7e0 > 2e-16
**********************************************************************
1 item had failures:
   2 of  87 in sage.tests.books.computational-mathematics-with-sagemath.integration_doctest
    [86 tests, 2 failures, 28.58 s]
**********************************************************************
File "src/sage/tests/books/computational-mathematics-with-sagemath/linsolve_doctest.py", line 135, in sage.tests.books.computational-mathematics-with-sagemath.linsolve_doctest
Failed example:
    Z.norm(Infinity)*(Z^-1).norm(Infinity) # abs tol 1e-11
Expected:
    1992.3750000000168
Got:
    1992.3750000000014
Tolerance exceeded:
    1992.3750000000168 vs 1992.3750000000014, tolerance 2e-11 > 1e-11
**********************************************************************
File "src/sage/tests/books/computational-mathematics-with-sagemath/linsolve_doctest.py", line 180, in sage.tests.books.computational-mathematics-with-sagemath.linsolve_doctest
Failed example:
    Q
Expected:
    [ 0.7612151656410958  0.6484993998439783]
    [-0.6484993998439782  0.7612151656410955]
Got:
    [ 0.7612151656410957   0.648499399843978]
    [-0.6484993998439779  0.7612151656410955]
**********************************************************************
1 item had failures:
   2 of 132 in sage.tests.books.computational-mathematics-with-sagemath.linsolve_doctest
    [131 tests, 2 failures, 21.59 s]
----------------------------------------------------------------------
sage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/float_doctest.py  # 1 doctest failed
sage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py  # 2 doctests failed
sage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/linsolve_doctest.py  # 2 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_events_309933.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-31T08:10:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309933"
}
```



---

archive/issue_events_309934.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-31T08:10:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309934"
}
```



---

archive/issue_comments_357398.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nWhat platform??\n\nAlso, could you please make it a priority to merge this ticket?  Or else it will never get done.  As far as I know everyone who's worked on it has been able to get all the tests the pass just fine.",
    "created_at": "2019-01-31T11:31:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357398",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">Comment 8</div>

What platform??

Also, could you please make it a priority to merge this ticket?  Or else it will never get done.  As far as I know everyone who's worked on it has been able to get all the tests the pass just fine.



---

archive/issue_comments_357399.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nIn other words, this suite of tests touches so many parts of the Sage code that it's unfair to merge this ticket along with a bunch of others, and then say this one \"failed\" because something was changed in one of those other tickets that caused some of these tests to fail.  If anything it's those tickets that should be marked as \"needs_work\" or they should add this ticket as a dependency.  \n\nOtherwise it is impossible for us to guess which other tickets you're going to integrate in with it, and thus impossible to predict how some example results will change.",
    "created_at": "2019-01-31T11:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357399",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">Comment 9</div>

In other words, this suite of tests touches so many parts of the Sage code that it's unfair to merge this ticket along with a bunch of others, and then say this one "failed" because something was changed in one of those other tickets that caused some of these tests to fail.  If anything it's those tickets that should be marked as "needs_work" or they should add this ticket as a dependency.  

Otherwise it is impossible for us to guess which other tickets you're going to integrate in with it, and thus impossible to predict how some example results will change.



---

archive/issue_comments_357400.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nThats on 32-bit. It all seems to be numerical precision issues, just add the relevant #tol and we can try again.",
    "created_at": "2019-01-31T11:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357400",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:0" align="right">Comment 0</div>

Thats on 32-bit. It all seems to be numerical precision issues, just add the relevant #tol and we can try again.



---

archive/issue_comments_357401.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nOkay, thanks.  I don't think a lot of people are testing on 32-bit then.\n\nI wonder if we could just mark those tests `# 64-bit` actually.  I honestly don't care if they are tested on 32-bit.",
    "created_at": "2019-01-31T12:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357401",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">Comment 1</div>

Okay, thanks.  I don't think a lot of people are testing on 32-bit then.

I wonder if we could just mark those tests `# 64-bit` actually.  I honestly don't care if they are tested on 32-bit.



---

archive/issue_comments_357402.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e933a3abfebe1b2d6e325f16e542e51e3c68016\">1e933a3</a></td><td><code>replace sage/tests/french_book with sage/tests/books/sagebook, containing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b5b86680f500000e180638f09bb5b140361aaa3\">0b5b866</a></td><td><code>python3 compatibility of doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/065610d5d2512b1d17ab2e49f083177d9197abb3\">065610d</a></td><td><code>Fix 0.00000000000000000 in doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e8bd5a5fabb179091075a8cbeefd124201f7dc8\">3e8bd5a</a></td><td><code>Rename sagebook -> computational-mathematics-with-sagemath</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8e7c1f98be0afaa1091f4e9db3880d5b9b8ee5e\">f8e7c1f</a></td><td><code>This example is inherently non-deterministic between systems, by design.  So it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/111af39340990402e8bb726e2a0b44bed8142736\">111af39</a></td><td><code>Fix gp tests</code></td></tr></table>\n",
    "created_at": "2019-01-31T15:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357402",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e933a3abfebe1b2d6e325f16e542e51e3c68016">1e933a3</a></td><td><code>replace sage/tests/french_book with sage/tests/books/sagebook, containing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b5b86680f500000e180638f09bb5b140361aaa3">0b5b866</a></td><td><code>python3 compatibility of doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/065610d5d2512b1d17ab2e49f083177d9197abb3">065610d</a></td><td><code>Fix 0.00000000000000000 in doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e8bd5a5fabb179091075a8cbeefd124201f7dc8">3e8bd5a</a></td><td><code>Rename sagebook -> computational-mathematics-with-sagemath</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8e7c1f98be0afaa1091f4e9db3880d5b9b8ee5e">f8e7c1f</a></td><td><code>This example is inherently non-deterministic between systems, by design.  So it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/111af39340990402e8bb726e2a0b44bed8142736">111af39</a></td><td><code>Fix gp tests</code></td></tr></table>




---

archive/issue_comments_357403.json:
```json
{
    "body": "Changed commit from **[5947493](https://github.com/sagemath/sagetrac-mirror/commit/5947493a49a57d19a4fe8b2c40c4451c9f91dac1)** to **[111af39](https://github.com/sagemath/sagetrac-mirror/commit/111af39340990402e8bb726e2a0b44bed8142736)**",
    "created_at": "2019-01-31T15:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357403",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5947493](https://github.com/sagemath/sagetrac-mirror/commit/5947493a49a57d19a4fe8b2c40c4451c9f91dac1)** to **[111af39](https://github.com/sagemath/sagetrac-mirror/commit/111af39340990402e8bb726e2a0b44bed8142736)**



---

archive/issue_comments_357404.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c4747b0c16716f7d5ea7c95af6000ccf47212c9\">1c4747b</a></td><td><code>Fix gp tests</code></td></tr></table>\n",
    "created_at": "2019-01-31T15:40:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357404",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c4747b0c16716f7d5ea7c95af6000ccf47212c9">1c4747b</a></td><td><code>Fix gp tests</code></td></tr></table>




---

archive/issue_comments_357405.json:
```json
{
    "body": "Changed commit from **[111af39](https://github.com/sagemath/sagetrac-mirror/commit/111af39340990402e8bb726e2a0b44bed8142736)** to **[1c4747b](https://github.com/sagemath/sagetrac-mirror/commit/1c4747b0c16716f7d5ea7c95af6000ccf47212c9)**",
    "created_at": "2019-01-31T15:40:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357405",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[111af39](https://github.com/sagemath/sagetrac-mirror/commit/111af39340990402e8bb726e2a0b44bed8142736)** to **[1c4747b](https://github.com/sagemath/sagetrac-mirror/commit/1c4747b0c16716f7d5ea7c95af6000ccf47212c9)**



---

archive/issue_comments_357406.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/192ecd677f255ed988049495182312de4e9913fd\">192ecd6</a></td><td><code>Add/increase a few tolerances</code></td></tr></table>\n",
    "created_at": "2019-01-31T15:48:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357406",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4" align="right">Comment 4</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/192ecd677f255ed988049495182312de4e9913fd">192ecd6</a></td><td><code>Add/increase a few tolerances</code></td></tr></table>




---

archive/issue_comments_357407.json:
```json
{
    "body": "Changed commit from **[1c4747b](https://github.com/sagemath/sagetrac-mirror/commit/1c4747b0c16716f7d5ea7c95af6000ccf47212c9)** to **[192ecd6](https://github.com/sagemath/sagetrac-mirror/commit/192ecd677f255ed988049495182312de4e9913fd)**",
    "created_at": "2019-01-31T15:48:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357407",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1c4747b](https://github.com/sagemath/sagetrac-mirror/commit/1c4747b0c16716f7d5ea7c95af6000ccf47212c9)** to **[192ecd6](https://github.com/sagemath/sagetrac-mirror/commit/192ecd677f255ed988049495182312de4e9913fd)**



---

archive/issue_comments_357408.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d93a151f071e012476d2a894f0307de3b7de657d\">d93a151</a></td><td><code>More doctest fixes</code></td></tr></table>\n",
    "created_at": "2019-01-31T19:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357408",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d93a151f071e012476d2a894f0307de3b7de657d">d93a151</a></td><td><code>More doctest fixes</code></td></tr></table>




---

archive/issue_comments_357409.json:
```json
{
    "body": "Changed commit from **[192ecd6](https://github.com/sagemath/sagetrac-mirror/commit/192ecd677f255ed988049495182312de4e9913fd)** to **[d93a151](https://github.com/sagemath/sagetrac-mirror/commit/d93a151f071e012476d2a894f0307de3b7de657d)**",
    "created_at": "2019-01-31T19:16:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357409",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[192ecd6](https://github.com/sagemath/sagetrac-mirror/commit/192ecd677f255ed988049495182312de4e9913fd)** to **[d93a151](https://github.com/sagemath/sagetrac-mirror/commit/d93a151f071e012476d2a894f0307de3b7de657d)**



---

archive/issue_comments_357410.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nOn my laptop, I get\n\n```\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/graphique_doctest.py\", line 112, in sage.tests.books.computational-mathematics-with-sagemath.graphique_doctest\nFailed example:\n    for i in srange(-2, 2, 0.2):\n        g += line(desolve_rk4(DE, y(x), ics=[1, i],\\\n                          step=0.05, end_points=[0,2]))\n        g += line(desolve_rk4(DE, y(x), ics=[-1, i],\\\n                          step=0.05, end_points=[-2,0]))\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1086, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.books.computational-mathematics-with-sagemath.graphique_doctest[50]>\", line 3, in <module>\n        step=RealNumber('0.05'), end_points=[Integer(0),Integer(2)]))\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/calculus/desolvers.py\", line 1378, in desolve_rk4\n        sol_2=maxima(cmd).sage()\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 1074, in sage\n        return self._sage_(*args, **kwds)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/maxima_abstract.py\", line 1238, in _sage_\n        maxima=self.parent())\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/calculus/calculus.py\", line 2163, in symbolic_expression_from_maxima_string\n        raise TypeError(\"unable to make sense of Maxima expression '%s' in Sage\"%s)\n    TypeError: unable to make sense of Maxima expression '(kill(sage4)$o44)[[1.0,-2.0],[1.05,-2.149874965475482],[1.1,-2.298999939830521],[1.15,-2.446624921487998],[1.2,-2.591999909207452],[1.25,-2.7343749020044],[1.3,-2.872999899091065],[1.35,-3.007124899832311],[1.4,-3.135999903712506],[1.45,-3.258874910310362],[1.5,-3.374999919279643],[1.55,-3.483624930334245],[1.6,-3.58399994323656],[1.65,-3.675374957788335],[1.7,-3.756999973823437],[1.75,-3.828124991202094],[1.8,-3.888000009806273],[1.85,-3.935875029535953],[1.9,-3.971000050306113],[1.95,-3.992625072044261],[2.0,-4.000000094688424]]' in Sage\n```",
    "created_at": "2019-01-31T21:42:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357410",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">Comment 6</div>

On my laptop, I get

```
File "src/sage/tests/books/computational-mathematics-with-sagemath/graphique_doctest.py", line 112, in sage.tests.books.computational-mathematics-with-sagemath.graphique_doctest
Failed example:
    for i in srange(-2, 2, 0.2):
        g += line(desolve_rk4(DE, y(x), ics=[1, i],\
                          step=0.05, end_points=[0,2]))
        g += line(desolve_rk4(DE, y(x), ics=[-1, i],\
                          step=0.05, end_points=[-2,0]))
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1086, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.books.computational-mathematics-with-sagemath.graphique_doctest[50]>", line 3, in <module>
        step=RealNumber('0.05'), end_points=[Integer(0),Integer(2)]))
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/calculus/desolvers.py", line 1378, in desolve_rk4
        sol_2=maxima(cmd).sage()
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 1074, in sage
        return self._sage_(*args, **kwds)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/interfaces/maxima_abstract.py", line 1238, in _sage_
        maxima=self.parent())
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/calculus/calculus.py", line 2163, in symbolic_expression_from_maxima_string
        raise TypeError("unable to make sense of Maxima expression '%s' in Sage"%s)
    TypeError: unable to make sense of Maxima expression '(kill(sage4)$o44)[[1.0,-2.0],[1.05,-2.149874965475482],[1.1,-2.298999939830521],[1.15,-2.446624921487998],[1.2,-2.591999909207452],[1.25,-2.7343749020044],[1.3,-2.872999899091065],[1.35,-3.007124899832311],[1.4,-3.135999903712506],[1.45,-3.258874910310362],[1.5,-3.374999919279643],[1.55,-3.483624930334245],[1.6,-3.58399994323656],[1.65,-3.675374957788335],[1.7,-3.756999973823437],[1.75,-3.828124991202094],[1.8,-3.888000009806273],[1.85,-3.935875029535953],[1.9,-3.971000050306113],[1.95,-3.992625072044261],[2.0,-4.000000094688424]]' in Sage
```



---

archive/issue_comments_357411.json:
```json
{
    "body": "Changed commit from **[d93a151](https://github.com/sagemath/sagetrac-mirror/commit/d93a151f071e012476d2a894f0307de3b7de657d)** to **[64c8fd9](https://github.com/sagemath/sagetrac-mirror/commit/64c8fd9411e1f5a555478b43ba77da99269d64c0)**",
    "created_at": "2019-01-31T21:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357411",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d93a151](https://github.com/sagemath/sagetrac-mirror/commit/d93a151f071e012476d2a894f0307de3b7de657d)** to **[64c8fd9](https://github.com/sagemath/sagetrac-mirror/commit/64c8fd9411e1f5a555478b43ba77da99269d64c0)**



---

archive/issue_comments_357412.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64c8fd9411e1f5a555478b43ba77da99269d64c0\">64c8fd9</a></td><td><code>More doctest fixes</code></td></tr></table>\n",
    "created_at": "2019-01-31T21:42:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357412",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64c8fd9411e1f5a555478b43ba77da99269d64c0">64c8fd9</a></td><td><code>More doctest fixes</code></td></tr></table>




---

archive/issue_comments_357413.json:
```json
{
    "body": "Changed commit from **[64c8fd9](https://github.com/sagemath/sagetrac-mirror/commit/64c8fd9411e1f5a555478b43ba77da99269d64c0)** to **[4e07cba](https://github.com/sagemath/sagetrac-mirror/commit/4e07cba7119fb36f71056df8adcc8f97229bd5a4)**",
    "created_at": "2019-01-31T22:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357413",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[64c8fd9](https://github.com/sagemath/sagetrac-mirror/commit/64c8fd9411e1f5a555478b43ba77da99269d64c0)** to **[4e07cba](https://github.com/sagemath/sagetrac-mirror/commit/4e07cba7119fb36f71056df8adcc8f97229bd5a4)**



---

archive/issue_comments_357414.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e07cba7119fb36f71056df8adcc8f97229bd5a4\">4e07cba</a></td><td><code>More doctest fixes</code></td></tr></table>\n",
    "created_at": "2019-01-31T22:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357414",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e07cba7119fb36f71056df8adcc8f97229bd5a4">4e07cba</a></td><td><code>More doctest fixes</code></td></tr></table>




---

archive/issue_comments_357415.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nAll tests pass on 32 bits. I don't know what's up with Maxima in [comment:166]. That error is reproducible, but only on 1 system so far.",
    "created_at": "2019-01-31T22:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357415",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">Comment 9</div>

All tests pass on 32 bits. I don't know what's up with Maxima in [comment:166]. That error is reproducible, but only on 1 system so far.



---

archive/issue_comments_357416.json:
```json
{
    "body": "Changed author from **Erik Bray, Fr\u00e9d\u00e9ric Chapoton** to **Erik Bray, Fr\u00e9d\u00e9ric Chapoton, Jeroen Demeyer**",
    "created_at": "2019-01-31T22:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357416",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Erik Bray, Frédéric Chapoton** to **Erik Bray, Frédéric Chapoton, Jeroen Demeyer**



---

archive/issue_events_309935.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-31T22:10:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309935"
}
```



---

archive/issue_events_309936.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-31T22:10:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309936"
}
```



---

archive/issue_comments_357417.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nThe error in [comment:166] is because of GC happening at the \"wrong\" time.",
    "created_at": "2019-01-31T22:12:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357417",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:0" align="right">Comment 0</div>

The error in [comment:166] is because of GC happening at the "wrong" time.



---

archive/issue_comments_357418.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nPing. Needs review.",
    "created_at": "2019-02-04T08:23:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357418",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">Comment 1</div>

Ping. Needs review.



---

archive/issue_events_309937.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-05T19:58:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309937"
}
```



---

archive/issue_events_309938.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-05T19:58:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309938"
}
```



---

archive/issue_comments_357419.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nok, looks good enough. Let us try again",
    "created_at": "2019-02-05T19:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357419",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">Comment 2</div>

ok, looks good enough. Let us try again



---

archive/issue_comments_357420.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nTo the release manager: please merge this ASAP.",
    "created_at": "2019-02-07T08:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357420",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3" align="right">Comment 3</div>

To the release manager: please merge this ASAP.



---

archive/issue_comments_357421.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nPlease merge in #27066\n\n```\nsage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/sol/polynomes_doctest.py\n**********************************************************************\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/sol/polynomes_doctest.py\", line 79, in sage.tests.books.computational-mathematics-with-sagemath.sol.polynomes_doctest\nFailed example:\n    berlekamp_massey([1, 1, 2, 3, 8, 11, 34, 39, 148, 127])\nExpected:\n    x^3 - 5*x + 2\nGot:\n    doctest:warning\n      File \"/mnt/disk/home/release/Sage/src/bin/sage-runtests\", line 163, in <module>\n        err = DC.run()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/control.py\", line 1225, in run\n        self.run_doctests()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/control.py\", line 929, in run_doctests\n        self.dispatcher.dispatch()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 2000, in dispatch\n        self.parallel_dispatch()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1897, in parallel_dispatch\n        w.start()  # This might take some time\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 2183, in start\n        super(DocTestWorker, self).start()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/process.py\", line 130, in start\n        self._popen = Popen(self)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/forking.py\", line 126, in __init__\n        code = process_obj._bootstrap()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/process.py\", line 267, in _bootstrap\n        self.run()\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 2139, in run\n        task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 2477, in __call__\n        doctests, extras = self._run(runner, options, results)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 2526, in _run\n        result = runner.run(test)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 869, in run\n        return self._run(test, compileflags, out)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.tests.books.computational-mathematics-with-sagemath.sol.polynomes_doctest[22]>\", line 1, in <module>\n        berlekamp_massey([Integer(1), Integer(1), Integer(2), Integer(3), Integer(8), Integer(11), Integer(34), Integer(39), Integer(148), Integer(127)])\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py\", line 102, in deprecation\n        warning(trac_number, message, DeprecationWarning, stacklevel)\n      File \"/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py\", line 148, in warning\n        warn(message, warning_class, stacklevel)\n    :\n    DeprecationWarning: \n    Importing berlekamp_massey from here is deprecated. If you need to use it, please import it directly from sage.matrix.berlekamp_massey\n    See https://trac.sagemath.org/27066 for details.\n    x^3 - 5*x + 2\n**********************************************************************\n1 item had failures:\n   1 of  33 in sage.tests.books.computational-mathematics-with-sagemath.sol.polynomes_doctest\n    [32 tests, 1 failure, 18.18 s]\nsage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/combinat_doctest.py\n    [265 tests, 39.67 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/sol/polynomes_doctest.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2019-02-07T20:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357421",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:4" align="right">Comment 4</div>

Please merge in #27066

```
sage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/sol/polynomes_doctest.py
**********************************************************************
File "src/sage/tests/books/computational-mathematics-with-sagemath/sol/polynomes_doctest.py", line 79, in sage.tests.books.computational-mathematics-with-sagemath.sol.polynomes_doctest
Failed example:
    berlekamp_massey([1, 1, 2, 3, 8, 11, 34, 39, 148, 127])
Expected:
    x^3 - 5*x + 2
Got:
    doctest:warning
      File "/mnt/disk/home/release/Sage/src/bin/sage-runtests", line 163, in <module>
        err = DC.run()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/control.py", line 1225, in run
        self.run_doctests()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/control.py", line 929, in run_doctests
        self.dispatcher.dispatch()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2000, in dispatch
        self.parallel_dispatch()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1897, in parallel_dispatch
        w.start()  # This might take some time
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2183, in start
        super(DocTestWorker, self).start()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/process.py", line 130, in start
        self._popen = Popen(self)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/forking.py", line 126, in __init__
        code = process_obj._bootstrap()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/multiprocessing/process.py", line 267, in _bootstrap
        self.run()
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2139, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2477, in __call__
        doctests, extras = self._run(runner, options, results)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 2526, in _run
        result = runner.run(test)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 869, in run
        return self._run(test, compileflags, out)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.tests.books.computational-mathematics-with-sagemath.sol.polynomes_doctest[22]>", line 1, in <module>
        berlekamp_massey([Integer(1), Integer(1), Integer(2), Integer(3), Integer(8), Integer(11), Integer(34), Integer(39), Integer(148), Integer(127)])
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 102, in deprecation
        warning(trac_number, message, DeprecationWarning, stacklevel)
      File "/mnt/disk/home/release/Sage/local/lib/python2.7/site-packages/sage/misc/superseded.py", line 148, in warning
        warn(message, warning_class, stacklevel)
    :
    DeprecationWarning: 
    Importing berlekamp_massey from here is deprecated. If you need to use it, please import it directly from sage.matrix.berlekamp_massey
    See https://trac.sagemath.org/27066 for details.
    x^3 - 5*x + 2
**********************************************************************
1 item had failures:
   1 of  33 in sage.tests.books.computational-mathematics-with-sagemath.sol.polynomes_doctest
    [32 tests, 1 failure, 18.18 s]
sage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/combinat_doctest.py
    [265 tests, 39.67 s]
----------------------------------------------------------------------
sage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/sol/polynomes_doctest.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_events_309939.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-07T20:34:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309939"
}
```



---

archive/issue_events_309940.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-07T20:34:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309940"
}
```



---

archive/issue_comments_357422.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/210796300b1f3e6d9537c825d9bac21bea937322\">2107963</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/473c626fdf3171defa77dd62a4fc5e9a2151f2b1\">473c626</a></td><td><code>Merge branch 'u/chapoton/27066' in french book branch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c\">3e2e949</a></td><td><code>fix doctest using berlekamp</code></td></tr></table>\n",
    "created_at": "2019-02-08T19:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357422",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/210796300b1f3e6d9537c825d9bac21bea937322">2107963</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/473c626fdf3171defa77dd62a4fc5e9a2151f2b1">473c626</a></td><td><code>Merge branch 'u/chapoton/27066' in french book branch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c">3e2e949</a></td><td><code>fix doctest using berlekamp</code></td></tr></table>




---

archive/issue_comments_357423.json:
```json
{
    "body": "Changed commit from **[4e07cba](https://github.com/sagemath/sagetrac-mirror/commit/4e07cba7119fb36f71056df8adcc8f97229bd5a4)** to **[3e2e949](https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c)**",
    "created_at": "2019-02-08T19:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357423",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4e07cba](https://github.com/sagemath/sagetrac-mirror/commit/4e07cba7119fb36f71056df8adcc8f97229bd5a4)** to **[3e2e949](https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c)**



---

archive/issue_events_309941.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-08T19:28:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309941"
}
```



---

archive/issue_events_309942.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-08T19:28:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309942"
}
```



---

archive/issue_comments_357424.json:
```json
{
    "body": "Dependencies: **#27066**",
    "created_at": "2019-02-08T19:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357424",
    "user": "https://github.com/fchapoton"
}
```

Dependencies: **#27066**



---

archive/issue_comments_357425.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\ndone and tested, setting back to positive\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/210796300b1f3e6d9537c825d9bac21bea937322\">2107963</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/473c626fdf3171defa77dd62a4fc5e9a2151f2b1\">473c626</a></td><td><code>Merge branch 'u/chapoton/27066' in french book branch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c\">3e2e949</a></td><td><code>fix doctest using berlekamp</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/210796300b1f3e6d9537c825d9bac21bea937322\">2107963</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/473c626fdf3171defa77dd62a4fc5e9a2151f2b1\">473c626</a></td><td><code>Merge branch 'u/chapoton/27066' in french book branch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c\">3e2e949</a></td><td><code>fix doctest using berlekamp</code></td></tr></table>\n",
    "created_at": "2019-02-08T19:28:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357425",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">Comment 6</div>

done and tested, setting back to positive

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/210796300b1f3e6d9537c825d9bac21bea937322">2107963</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/473c626fdf3171defa77dd62a4fc5e9a2151f2b1">473c626</a></td><td><code>Merge branch 'u/chapoton/27066' in french book branch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c">3e2e949</a></td><td><code>fix doctest using berlekamp</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/210796300b1f3e6d9537c825d9bac21bea937322">2107963</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/473c626fdf3171defa77dd62a4fc5e9a2151f2b1">473c626</a></td><td><code>Merge branch 'u/chapoton/27066' in french book branch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c">3e2e949</a></td><td><code>fix doctest using berlekamp</code></td></tr></table>




---

archive/issue_events_309943.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-09T13:51:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309943"
}
```



---

archive/issue_events_309944.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-09T13:51:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309944"
}
```



---

archive/issue_comments_357426.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nHere is a (hopefully final) 32-bit numerical noise nugget:\n\n```\n**********************************************************************\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/sol/integration_doctest.py\", line 53, in sage.tests.books.computational-mathematics-with-sagemath.sol.integration_doctest\nFailed example:\n    [N(QuadNC(lambda x: sqrt(1-x^2), 0, 1, n) - pi/4)\n     for n in [2, 8, 16]]\nExpected:\n    [-0.285398163397448, -0.00524656673640445, -0.00125482109302663]\nGot:\n    [-0.285398163397448, -0.00524656673640433, -0.00125482109302577]\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.tests.books.computational-mathematics-with-sagemath.sol.integration_doctest\n    [12 tests, 1 failure, 2.52 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/sol/integration_doctest.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 8302.0 seconds\n```",
    "created_at": "2019-02-09T13:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357426",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">Comment 7</div>

Here is a (hopefully final) 32-bit numerical noise nugget:

```
**********************************************************************
File "src/sage/tests/books/computational-mathematics-with-sagemath/sol/integration_doctest.py", line 53, in sage.tests.books.computational-mathematics-with-sagemath.sol.integration_doctest
Failed example:
    [N(QuadNC(lambda x: sqrt(1-x^2), 0, 1, n) - pi/4)
     for n in [2, 8, 16]]
Expected:
    [-0.285398163397448, -0.00524656673640445, -0.00125482109302663]
Got:
    [-0.285398163397448, -0.00524656673640433, -0.00125482109302577]
**********************************************************************
1 item had failures:
   1 of  13 in sage.tests.books.computational-mathematics-with-sagemath.sol.integration_doctest
    [12 tests, 1 failure, 2.52 s]
----------------------------------------------------------------------
sage -t --long src/sage/tests/books/computational-mathematics-with-sagemath/sol/integration_doctest.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 8302.0 seconds
```



---

archive/issue_comments_357427.json:
```json
{
    "body": "Changed commit from **[3e2e949](https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c)** to **[ae36049](https://github.com/sagemath/sagetrac-mirror/commit/ae3604981449d425841ff188904cf641397307a8)**",
    "created_at": "2019-02-09T15:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357427",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3e2e949](https://github.com/sagemath/sagetrac-mirror/commit/3e2e949901b68c3da92ae266f9c5c274e272451c)** to **[ae36049](https://github.com/sagemath/sagetrac-mirror/commit/ae3604981449d425841ff188904cf641397307a8)**



---

archive/issue_comments_357428.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05a659d114b0ce740e91532a6ba801b8cb0f9ef6\">05a659d</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.B3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae3604981449d425841ff188904cf641397307a8\">ae36049</a></td><td><code>one more abs tol in the book</code></td></tr></table>\n",
    "created_at": "2019-02-09T15:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357428",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05a659d114b0ce740e91532a6ba801b8cb0f9ef6">05a659d</a></td><td><code>Merge branch 'public/french_book_python3' in 8.7.B3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae3604981449d425841ff188904cf641397307a8">ae36049</a></td><td><code>one more abs tol in the book</code></td></tr></table>




---

archive/issue_comments_357429.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nok, done. This ticket is a pain..",
    "created_at": "2019-02-09T15:22:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357429",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">Comment 9</div>

ok, done. This ticket is a pain..



---

archive/issue_events_309945.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-09T15:22:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309945"
}
```



---

archive/issue_events_309946.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-02-09T15:22:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309946"
}
```



---

archive/issue_events_309947.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-10T12:55:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309947"
}
```



---

archive/issue_events_309948.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d4add0dd4b88014ed085a3cd475df51e88fc495e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-02-10T12:55:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23572#event-309948"
}
```



---

archive/issue_comments_357430.json:
```json
{
    "body": "Changed branch from **[public/french_book_python3](https://github.com/sagemath/sagetrac-mirror/tree/public/french_book_python3)** to **[ae36049](https://github.com/sagemath/sagetrac-mirror/commit/ae3604981449d425841ff188904cf641397307a8)**",
    "created_at": "2019-02-10T12:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23572#issuecomment-357430",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/french_book_python3](https://github.com/sagemath/sagetrac-mirror/tree/public/french_book_python3)** to **[ae36049](https://github.com/sagemath/sagetrac-mirror/commit/ae3604981449d425841ff188904cf641397307a8)**
