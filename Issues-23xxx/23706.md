# Issue 23706: allow several implementations of matrices in MatrixSpace

archive/issues_023469.json:
```json
{
    "body": "The aim of this ticket is to revamp the `MatrixSpace` constructor in order to be able to choose the implementation.\n\nFor example, with the attached branch one can have access to 2 implementations of integer matrices\n\n```\nsage: MatrixSpace(ZZ, 3, implementation='flint')\nFull MatrixSpace of 3 by 3 dense matrices over Integer Ring\nsage: MatrixSpace(ZZ, 3, implementation='generic')\nFull MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)\n```\n\nOne important change is the move of the method `_get_matrix_class` of `MatrixSpace` as an independent function.\n\nA problem arose with `CartanMatrix` (in `sage/combinat/root_system/cartan_matrix.py`). The class `CartanMatrix` inherits from `Matrix_integer_sparse` but does not properly redefines the parent. As a consequence of the changes here, many matrix operations are not valid anymore for inherited types (mostly submatrices operations such as `__getitem__` with slices or `stack`). A fix is provided by defining `CartanMatrix.matrix_space`.\n\nfollow up: #23714 (implementation of gap matrices)\n\nDepends on #24096\n\n**CC:**  @jplab @simon-king-jena\n\n**Keywords:** days88\n\n**Branch/Commit:** [018226b9ecafdc082a4eb8289269af85b2908d3b](https://github.com/sagemath/sagetrac-mirror/commit/018226b9ecafdc082a4eb8289269af85b2908d3b)\n\n**Reviewer:** Jean-Philippe Labb\u00e9, Travis Scrimshaw\n\n**Author:** Vincent Delecroix\n\nIssue created by migration from https://trac.sagemath.org/ticket/23706\n\n",
    "closed_at": "2017-12-18T19:39:30Z",
    "created_at": "2017-08-25T00:05:44Z",
    "labels": [
        "component: linear algebra",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "title": "allow several implementations of matrices in MatrixSpace",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/23706",
    "user": "https://github.com/videlec"
}
```
The aim of this ticket is to revamp the `MatrixSpace` constructor in order to be able to choose the implementation.

For example, with the attached branch one can have access to 2 implementations of integer matrices

```
sage: MatrixSpace(ZZ, 3, implementation='flint')
Full MatrixSpace of 3 by 3 dense matrices over Integer Ring
sage: MatrixSpace(ZZ, 3, implementation='generic')
Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)
```

One important change is the move of the method `_get_matrix_class` of `MatrixSpace` as an independent function.

A problem arose with `CartanMatrix` (in `sage/combinat/root_system/cartan_matrix.py`). The class `CartanMatrix` inherits from `Matrix_integer_sparse` but does not properly redefines the parent. As a consequence of the changes here, many matrix operations are not valid anymore for inherited types (mostly submatrices operations such as `__getitem__` with slices or `stack`). A fix is provided by defining `CartanMatrix.matrix_space`.

follow up: #23714 (implementation of gap matrices)

Depends on #24096

**CC:**  @jplab @simon-king-jena

**Keywords:** days88

**Branch/Commit:** [018226b9ecafdc082a4eb8289269af85b2908d3b](https://github.com/sagemath/sagetrac-mirror/commit/018226b9ecafdc082a4eb8289269af85b2908d3b)

**Reviewer:** Jean-Philippe Labbé, Travis Scrimshaw

**Author:** Vincent Delecroix

Issue created by migration from https://trac.sagemath.org/ticket/23706





---

archive/issue_comments_359887.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n Implement a generic matrix class using libgap as a backend and revamp the `MatrixSpace` constructor in order to be able to choose the implementation.\n+\n+In particular with the proposed branch one can have access to 3 implementations of integer matrices\n+\n+```\n+sage: Mflint = MatrixSpace(ZZ, 3, implementation='flint')\n+sage: Mgeneric = MatrixSpace(ZZ, 3, implementation='generic')\n+sage: Mgap = MatrixSpace(ZZ, 3, implementation='gap')\n+```\n``````\n",
    "created_at": "2017-08-25T00:07:22Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359887",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,9 @@
 Implement a generic matrix class using libgap as a backend and revamp the `MatrixSpace` constructor in order to be able to choose the implementation.
+
+In particular with the proposed branch one can have access to 3 implementations of integer matrices
+
+```
+sage: Mflint = MatrixSpace(ZZ, 3, implementation='flint')
+sage: Mgeneric = MatrixSpace(ZZ, 3, implementation='generic')
+sage: Mgap = MatrixSpace(ZZ, 3, implementation='gap')
+```
``````




---

archive/issue_comments_359888.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd88\".",
    "created_at": "2017-08-25T00:08:01Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359888",
    "user": "https://github.com/videlec"
}
```

**Changing keywords** from "" to "sd88".



---

archive/issue_comments_359889.json:
```json
{
    "body": "**Changing keywords** from \"sd88\" to \"days88\".",
    "created_at": "2017-08-25T02:16:10Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359889",
    "user": "https://github.com/jplab"
}
```

**Changing keywords** from "sd88" to "days88".



---

archive/issue_comments_359890.json:
```json
{
    "body": "**Branch:** [u/vdelecroix/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23706)",
    "created_at": "2017-08-25T02:17:39Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359890",
    "user": "https://github.com/videlec"
}
```

**Branch:** [u/vdelecroix/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23706)



---

archive/issue_comments_359891.json:
```json
{
    "body": "<a id='comment:4'></a>\nexperimental branch ready!\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/457d2fbd122ea7c9c20489cdea11f46bb8a8aed1\">457d2fb</a></td><td><code>23704: getitem/setitem for libgap elements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2\">34f1ddc</a></td><td><code>TMP 23706 commit</code></td></tr></table>\n",
    "created_at": "2017-08-25T02:17:39Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359891",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
experimental branch ready!

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/457d2fbd122ea7c9c20489cdea11f46bb8a8aed1">457d2fb</a></td><td><code>23704: getitem/setitem for libgap elements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2">34f1ddc</a></td><td><code>TMP 23706 commit</code></td></tr></table>




---

archive/issue_comments_359892.json:
```json
{
    "body": "**Commit:** [34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2](https://github.com/sagemath/sagetrac-mirror/commit/34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2)",
    "created_at": "2017-08-25T02:17:39Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359892",
    "user": "https://github.com/videlec"
}
```

**Commit:** [34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2](https://github.com/sagemath/sagetrac-mirror/commit/34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2)



---

archive/issue_comments_359893.json:
```json
{
    "body": "**Reviewer:** Jean-Philippe Labb\u00e9",
    "created_at": "2017-08-25T02:32:31Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359893",
    "user": "https://github.com/jplab"
}
```

**Reviewer:** Jean-Philippe Labbé



---

archive/issue_comments_359894.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe title of the ticket could be a bit more specific.",
    "created_at": "2017-08-25T02:32:31Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359894",
    "user": "https://github.com/jplab"
}
```

<a id='comment:5'></a>
The title of the ticket could be a bit more specific.



---

archive/issue_comments_359895.json:
```json
{
    "body": "**Changing commit** from \"[34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2](https://github.com/sagemath/sagetrac-mirror/commit/34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2)\" to \"[d9f0532af4ca79ba467e466c741416b4409ca960](https://github.com/sagemath/sagetrac-mirror/commit/d9f0532af4ca79ba467e466c741416b4409ca960)\".",
    "created_at": "2017-08-25T02:49:54Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2](https://github.com/sagemath/sagetrac-mirror/commit/34f1ddc7e0ea69ab280567bf68da69d5fb2f0cd2)" to "[d9f0532af4ca79ba467e466c741416b4409ca960](https://github.com/sagemath/sagetrac-mirror/commit/d9f0532af4ca79ba467e466c741416b4409ca960)".



---

archive/issue_comments_359896.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9f0532af4ca79ba467e466c741416b4409ca960\">d9f0532</a></td><td><code>TMP 23706 commit</code></td></tr></table>\n",
    "created_at": "2017-08-25T02:49:54Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9f0532af4ca79ba467e466c741416b4409ca960">d9f0532</a></td><td><code>TMP 23706 commit</code></td></tr></table>




---

archive/issue_comments_359897.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9258189cabf82a1083d1e519408b4472032c5c6\">a925818</a></td><td><code>23704: forgot to set j appropriately!</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/007bdcf7710533d0fd413c56d9d566b84db1873f\">007bdcf</a></td><td><code>TMP COMMIT 23706: fix some doctests</code></td></tr></table>\n",
    "created_at": "2017-08-25T03:49:17Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9258189cabf82a1083d1e519408b4472032c5c6">a925818</a></td><td><code>23704: forgot to set j appropriately!</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/007bdcf7710533d0fd413c56d9d566b84db1873f">007bdcf</a></td><td><code>TMP COMMIT 23706: fix some doctests</code></td></tr></table>




---

archive/issue_comments_359898.json:
```json
{
    "body": "**Changing commit** from \"[d9f0532af4ca79ba467e466c741416b4409ca960](https://github.com/sagemath/sagetrac-mirror/commit/d9f0532af4ca79ba467e466c741416b4409ca960)\" to \"[007bdcf7710533d0fd413c56d9d566b84db1873f](https://github.com/sagemath/sagetrac-mirror/commit/007bdcf7710533d0fd413c56d9d566b84db1873f)\".",
    "created_at": "2017-08-25T03:49:17Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359898",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d9f0532af4ca79ba467e466c741416b4409ca960](https://github.com/sagemath/sagetrac-mirror/commit/d9f0532af4ca79ba467e466c741416b4409ca960)" to "[007bdcf7710533d0fd413c56d9d566b84db1873f](https://github.com/sagemath/sagetrac-mirror/commit/007bdcf7710533d0fd413c56d9d566b84db1873f)".



---

archive/issue_comments_359899.json:
```json
{
    "body": "**Changing commit** from \"[007bdcf7710533d0fd413c56d9d566b84db1873f](https://github.com/sagemath/sagetrac-mirror/commit/007bdcf7710533d0fd413c56d9d566b84db1873f)\" to \"[f8940d448bddc312f64ad8707cec630abf178b08](https://github.com/sagemath/sagetrac-mirror/commit/f8940d448bddc312f64ad8707cec630abf178b08)\".",
    "created_at": "2017-08-25T03:52:10Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[007bdcf7710533d0fd413c56d9d566b84db1873f](https://github.com/sagemath/sagetrac-mirror/commit/007bdcf7710533d0fd413c56d9d566b84db1873f)" to "[f8940d448bddc312f64ad8707cec630abf178b08](https://github.com/sagemath/sagetrac-mirror/commit/f8940d448bddc312f64ad8707cec630abf178b08)".



---

archive/issue_comments_359900.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8940d448bddc312f64ad8707cec630abf178b08\">f8940d4</a></td><td><code>TMP 23706: remove print statement</code></td></tr></table>\n",
    "created_at": "2017-08-25T03:52:10Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8940d448bddc312f64ad8707cec630abf178b08">f8940d4</a></td><td><code>TMP 23706: remove print statement</code></td></tr></table>




---

archive/issue_comments_359901.json:
```json
{
    "body": "**Changing commit** from \"[f8940d448bddc312f64ad8707cec630abf178b08](https://github.com/sagemath/sagetrac-mirror/commit/f8940d448bddc312f64ad8707cec630abf178b08)\" to \"[235c5615b9dd35891a5ff5d598884093b152520b](https://github.com/sagemath/sagetrac-mirror/commit/235c5615b9dd35891a5ff5d598884093b152520b)\".",
    "created_at": "2017-08-25T04:26:38Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359901",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f8940d448bddc312f64ad8707cec630abf178b08](https://github.com/sagemath/sagetrac-mirror/commit/f8940d448bddc312f64ad8707cec630abf178b08)" to "[235c5615b9dd35891a5ff5d598884093b152520b](https://github.com/sagemath/sagetrac-mirror/commit/235c5615b9dd35891a5ff5d598884093b152520b)".



---

archive/issue_comments_359902.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/235c5615b9dd35891a5ff5d598884093b152520b\">235c561</a></td><td><code>TMP 23706 COMMIT: remove randomize for cyclo_dense</code></td></tr></table>\n",
    "created_at": "2017-08-25T04:26:38Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/235c5615b9dd35891a5ff5d598884093b152520b">235c561</a></td><td><code>TMP 23706 COMMIT: remove randomize for cyclo_dense</code></td></tr></table>




---

archive/issue_comments_359903.json:
```json
{
    "body": "**Changing commit** from \"[235c5615b9dd35891a5ff5d598884093b152520b](https://github.com/sagemath/sagetrac-mirror/commit/235c5615b9dd35891a5ff5d598884093b152520b)\" to \"[dce22c869eee2d2b4a6f59cd9f2e6b5eda633121](https://github.com/sagemath/sagetrac-mirror/commit/dce22c869eee2d2b4a6f59cd9f2e6b5eda633121)\".",
    "created_at": "2017-08-25T04:27:48Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[235c5615b9dd35891a5ff5d598884093b152520b](https://github.com/sagemath/sagetrac-mirror/commit/235c5615b9dd35891a5ff5d598884093b152520b)" to "[dce22c869eee2d2b4a6f59cd9f2e6b5eda633121](https://github.com/sagemath/sagetrac-mirror/commit/dce22c869eee2d2b4a6f59cd9f2e6b5eda633121)".



---

archive/issue_comments_359904.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dce22c869eee2d2b4a6f59cd9f2e6b5eda633121\">dce22c8</a></td><td><code>TMP COMMIT 23706: more careful about input</code></td></tr></table>\n",
    "created_at": "2017-08-25T04:27:48Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359904",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dce22c869eee2d2b4a6f59cd9f2e6b5eda633121">dce22c8</a></td><td><code>TMP COMMIT 23706: more careful about input</code></td></tr></table>




---

archive/issue_events_210807.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-25T04:29:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "rename": {
        "from": "gap class for matrices",
        "to": "allow several implementations of matrices in MatrixSpace"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210807"
}
```



---

archive/issue_comments_359905.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n-Implement a generic matrix class using libgap as a backend and revamp the `MatrixSpace` constructor in order to be able to choose the implementation.\n+The aim of this ticket is two fold:\n+\n+1. Implement a generic matrix class using libgap as a backend\n+\n+2. Revamp the `MatrixSpace` constructor in order to be able to choose the implementation.\n \n In particular with the proposed branch one can have access to 3 implementations of integer matrices\n \n``````\n",
    "created_at": "2017-08-25T04:29:13Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359905",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
-Implement a generic matrix class using libgap as a backend and revamp the `MatrixSpace` constructor in order to be able to choose the implementation.
+The aim of this ticket is two fold:
+
+1. Implement a generic matrix class using libgap as a backend
+
+2. Revamp the `MatrixSpace` constructor in order to be able to choose the implementation.
 
 In particular with the proposed branch one can have access to 3 implementations of integer matrices
 
``````




---

archive/issue_comments_359906.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,3 +11,5 @@\n sage: Mgeneric = MatrixSpace(ZZ, 3, implementation='generic')\n sage: Mgap = MatrixSpace(ZZ, 3, implementation='gap')\n ```\n+\n+follow up: #23714\n``````\n",
    "created_at": "2017-08-25T14:57:42Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359906",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,3 +11,5 @@
 sage: Mgeneric = MatrixSpace(ZZ, 3, implementation='generic')
 sage: Mgap = MatrixSpace(ZZ, 3, implementation='gap')
 ```
+
+follow up: #23714
``````




---

archive/issue_comments_359907.json:
```json
{
    "body": "**Changing commit** from \"[dce22c869eee2d2b4a6f59cd9f2e6b5eda633121](https://github.com/sagemath/sagetrac-mirror/commit/dce22c869eee2d2b4a6f59cd9f2e6b5eda633121)\" to \"[f1013de2bc8d01830840422c367dbe9224d0aeb6](https://github.com/sagemath/sagetrac-mirror/commit/f1013de2bc8d01830840422c367dbe9224d0aeb6)\".",
    "created_at": "2017-08-25T21:13:41Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dce22c869eee2d2b4a6f59cd9f2e6b5eda633121](https://github.com/sagemath/sagetrac-mirror/commit/dce22c869eee2d2b4a6f59cd9f2e6b5eda633121)" to "[f1013de2bc8d01830840422c367dbe9224d0aeb6](https://github.com/sagemath/sagetrac-mirror/commit/f1013de2bc8d01830840422c367dbe9224d0aeb6)".



---

archive/issue_comments_359908.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dc210b25996eedbd21a7c4dd9894c1a798205d3\">4dc210b</a></td><td><code>23704: forgot to set j appropriately!</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3241d6cf5d6e93e5830c858d7a5a4cee88b14c9\">c3241d6</a></td><td><code>23704: \"multi-indices \"multi indices\" \"multiindices\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1013de2bc8d01830840422c367dbe9224d0aeb6\">f1013de</a></td><td><code>23706: allow different matrix implementations</code></td></tr></table>\n",
    "created_at": "2017-08-25T21:13:41Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359908",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dc210b25996eedbd21a7c4dd9894c1a798205d3">4dc210b</a></td><td><code>23704: forgot to set j appropriately!</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3241d6cf5d6e93e5830c858d7a5a4cee88b14c9">c3241d6</a></td><td><code>23704: "multi-indices "multi indices" "multiindices"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1013de2bc8d01830840422c367dbe9224d0aeb6">f1013de</a></td><td><code>23706: allow different matrix implementations</code></td></tr></table>




---

archive/issue_events_210808.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-25T21:14:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210808"
}
```



---

archive/issue_comments_359909.json:
```json
{
    "body": "**Dependencies:** #23704",
    "created_at": "2017-08-25T21:14:01Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359909",
    "user": "https://github.com/videlec"
}
```

**Dependencies:** #23704



---

archive/issue_comments_359910.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,9 +7,12 @@\n In particular with the proposed branch one can have access to 3 implementations of integer matrices\n \n ```\n-sage: Mflint = MatrixSpace(ZZ, 3, implementation='flint')\n-sage: Mgeneric = MatrixSpace(ZZ, 3, implementation='generic')\n-sage: Mgap = MatrixSpace(ZZ, 3, implementation='gap')\n+sage: MatrixSpace(ZZ, 3, implementation='flint')\n+Full MatrixSpace of 3 by 3 dense matrices over Integer Ring\n+sage: MatrixSpace(ZZ, 3, implementation='generic')\n+Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)\n+sage: MatrixSpace(ZZ, 3, implementation='gap')\n+Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)\n ```\n \n follow up: #23714\n``````\n",
    "created_at": "2017-08-25T21:14:48Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359910",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,9 +7,12 @@
 In particular with the proposed branch one can have access to 3 implementations of integer matrices
 
 ```
-sage: Mflint = MatrixSpace(ZZ, 3, implementation='flint')
-sage: Mgeneric = MatrixSpace(ZZ, 3, implementation='generic')
-sage: Mgap = MatrixSpace(ZZ, 3, implementation='gap')
+sage: MatrixSpace(ZZ, 3, implementation='flint')
+Full MatrixSpace of 3 by 3 dense matrices over Integer Ring
+sage: MatrixSpace(ZZ, 3, implementation='generic')
+Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)
+sage: MatrixSpace(ZZ, 3, implementation='gap')
+Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)
 ```
 
 follow up: #23714
``````




---

archive/issue_comments_359911.json:
```json
{
    "body": "**Changing commit** from \"[f1013de2bc8d01830840422c367dbe9224d0aeb6](https://github.com/sagemath/sagetrac-mirror/commit/f1013de2bc8d01830840422c367dbe9224d0aeb6)\" to \"[0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce](https://github.com/sagemath/sagetrac-mirror/commit/0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce)\".",
    "created_at": "2017-08-25T21:40:03Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359911",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f1013de2bc8d01830840422c367dbe9224d0aeb6](https://github.com/sagemath/sagetrac-mirror/commit/f1013de2bc8d01830840422c367dbe9224d0aeb6)" to "[0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce](https://github.com/sagemath/sagetrac-mirror/commit/0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce)".



---

archive/issue_comments_359912.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce\">0cbf7ff</a></td><td><code>23706: fix call to _get_matrix_class</code></td></tr></table>\n",
    "created_at": "2017-08-25T21:40:03Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359912",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce">0cbf7ff</a></td><td><code>23706: fix call to _get_matrix_class</code></td></tr></table>




---

archive/issue_comments_359913.json:
```json
{
    "body": "<a id='comment:17'></a>\nhum... got a lot of failures\n\n```\ncombinat/root_system/root_lattice_realizations.py  # 1 doctest failed\ncombinat/root_system/root_system.py  # 1 doctest failed\ncombinat/root_system/weight_space.py  # 3 doctests failed\ncombinat/root_system/type_affine.py  # 3 doctests failed\ncombinat/root_system/ambient_space.py  # 1 doctest failed\ncombinat/root_system/root_space.py  # 1 doctest failed\ncombinat/root_system/cartan_type.py  # 2 doctests failed\ncategories/crystals.py  # 2 doctests failed\ncombinat/root_system/weight_lattice_realizations.py  # 12 doctests failed\ncombinat/root_system/cartan_matrix.py  # 5 doctests failed\ncombinat/root_system/type_relabel.py  # 1 doctest failed\ncombinat/root_system/dynkin_diagram.py  # 4 doctests failed\ncombinat/root_system/type_marked.py  # 1 doctest failed\ncombinat/root_system/type_reducible.py  # 2 doctests failed\n```",
    "created_at": "2017-08-25T21:56:14Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359913",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'></a>
hum... got a lot of failures

```
combinat/root_system/root_lattice_realizations.py  # 1 doctest failed
combinat/root_system/root_system.py  # 1 doctest failed
combinat/root_system/weight_space.py  # 3 doctests failed
combinat/root_system/type_affine.py  # 3 doctests failed
combinat/root_system/ambient_space.py  # 1 doctest failed
combinat/root_system/root_space.py  # 1 doctest failed
combinat/root_system/cartan_type.py  # 2 doctests failed
categories/crystals.py  # 2 doctests failed
combinat/root_system/weight_lattice_realizations.py  # 12 doctests failed
combinat/root_system/cartan_matrix.py  # 5 doctests failed
combinat/root_system/type_relabel.py  # 1 doctest failed
combinat/root_system/dynkin_diagram.py  # 4 doctests failed
combinat/root_system/type_marked.py  # 1 doctest failed
combinat/root_system/type_reducible.py  # 2 doctests failed
```



---

archive/issue_events_210809.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-25T22:35:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210809"
}
```



---

archive/issue_events_210810.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-25T22:35:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210810"
}
```



---

archive/issue_comments_359914.json:
```json
{
    "body": "<a id='comment:18'></a>\nNeeds to fix #23721 first.",
    "created_at": "2017-08-25T22:35:08Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359914",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>
Needs to fix #23721 first.



---

archive/issue_comments_359915.json:
```json
{
    "body": "**Changing dependencies** from \"#23704\" to \"#23704, #23721\".",
    "created_at": "2017-08-25T22:35:08Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359915",
    "user": "https://github.com/videlec"
}
```

**Changing dependencies** from "#23704" to "#23704, #23721".



---

archive/issue_comments_359916.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a087066fdf94cc9a0405807705b8867d538b5980\">a087066</a></td><td><code>23721: __copy__/__deepcopy__ on GapElement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f74040baa887b1ff6e286cbccb7af77f364c6f3\">9f74040</a></td><td><code>23706: allow to choose implementation of matrices</code></td></tr></table>\n",
    "created_at": "2017-09-03T17:44:25Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a087066fdf94cc9a0405807705b8867d538b5980">a087066</a></td><td><code>23721: __copy__/__deepcopy__ on GapElement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f74040baa887b1ff6e286cbccb7af77f364c6f3">9f74040</a></td><td><code>23706: allow to choose implementation of matrices</code></td></tr></table>




---

archive/issue_comments_359917.json:
```json
{
    "body": "**Changing commit** from \"[0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce](https://github.com/sagemath/sagetrac-mirror/commit/0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce)\" to \"[9f74040baa887b1ff6e286cbccb7af77f364c6f3](https://github.com/sagemath/sagetrac-mirror/commit/9f74040baa887b1ff6e286cbccb7af77f364c6f3)\".",
    "created_at": "2017-09-03T17:44:25Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce](https://github.com/sagemath/sagetrac-mirror/commit/0cbf7ff5a1e4ec51bfd4251e7a0677b77ec945ce)" to "[9f74040baa887b1ff6e286cbccb7af77f364c6f3](https://github.com/sagemath/sagetrac-mirror/commit/9f74040baa887b1ff6e286cbccb7af77f364c6f3)".



---

archive/issue_comments_359918.json:
```json
{
    "body": "**Changing dependencies** from \"#23704, #23721\" to \"\".",
    "created_at": "2017-09-03T17:45:52Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359918",
    "user": "https://github.com/videlec"
}
```

**Changing dependencies** from "#23704, #23721" to "".



---

archive/issue_comments_359919.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,18 +1,12 @@\n-The aim of this ticket is two fold:\n+The aim of this ticket is to revamp the `MatrixSpace` constructor in order to be able to choose the implementation.\n \n-1. Implement a generic matrix class using libgap as a backend\n-\n-2. Revamp the `MatrixSpace` constructor in order to be able to choose the implementation.\n-\n-In particular with the proposed branch one can have access to 3 implementations of integer matrices\n+For example, one can have access to 2 implementations of integer matrices\n \n ```\n sage: MatrixSpace(ZZ, 3, implementation='flint')\n Full MatrixSpace of 3 by 3 dense matrices over Integer Ring\n sage: MatrixSpace(ZZ, 3, implementation='generic')\n Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)\n-sage: MatrixSpace(ZZ, 3, implementation='gap')\n-Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)\n ```\n \n-follow up: #23714\n+follow up: #23714 (implementation of gap matrices)\n``````\n",
    "created_at": "2017-09-03T17:45:52Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359919",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,18 +1,12 @@
-The aim of this ticket is two fold:
+The aim of this ticket is to revamp the `MatrixSpace` constructor in order to be able to choose the implementation.
 
-1. Implement a generic matrix class using libgap as a backend
-
-2. Revamp the `MatrixSpace` constructor in order to be able to choose the implementation.
-
-In particular with the proposed branch one can have access to 3 implementations of integer matrices
+For example, one can have access to 2 implementations of integer matrices
 
 ```
 sage: MatrixSpace(ZZ, 3, implementation='flint')
 Full MatrixSpace of 3 by 3 dense matrices over Integer Ring
 sage: MatrixSpace(ZZ, 3, implementation='generic')
 Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)
-sage: MatrixSpace(ZZ, 3, implementation='gap')
-Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_gap)
 ```
 
-follow up: #23714
+follow up: #23714 (implementation of gap matrices)
``````




---

archive/issue_comments_359920.json:
```json
{
    "body": "<a id='comment:21'></a>\nI postponed the introduction of `Matrix_gap` in ticket #23714",
    "created_at": "2017-09-03T17:47:01Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359920",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>
I postponed the introduction of `Matrix_gap` in ticket #23714



---

archive/issue_events_210811.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-09-03T17:47:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210811"
}
```



---

archive/issue_events_210812.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-09-03T17:47:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210812"
}
```



---

archive/issue_events_210813.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-09-03T17:53:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210813"
}
```



---

archive/issue_events_210814.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-09-03T17:53:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210814"
}
```



---

archive/issue_comments_359921.json:
```json
{
    "body": "<a id='comment:22'></a>\n... wrong commits",
    "created_at": "2017-09-03T17:53:11Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359921",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>
... wrong commits



---

archive/issue_comments_359922.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4efbf513a230daf4a39316149eedea94282ee335\">4efbf51</a></td><td><code>23706: allow to choose matrix mplementation</code></td></tr></table>\n",
    "created_at": "2017-09-03T20:53:12Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4efbf513a230daf4a39316149eedea94282ee335">4efbf51</a></td><td><code>23706: allow to choose matrix mplementation</code></td></tr></table>




---

archive/issue_comments_359923.json:
```json
{
    "body": "**Changing commit** from \"[9f74040baa887b1ff6e286cbccb7af77f364c6f3](https://github.com/sagemath/sagetrac-mirror/commit/9f74040baa887b1ff6e286cbccb7af77f364c6f3)\" to \"[4efbf513a230daf4a39316149eedea94282ee335](https://github.com/sagemath/sagetrac-mirror/commit/4efbf513a230daf4a39316149eedea94282ee335)\".",
    "created_at": "2017-09-03T20:53:12Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9f74040baa887b1ff6e286cbccb7af77f364c6f3](https://github.com/sagemath/sagetrac-mirror/commit/9f74040baa887b1ff6e286cbccb7af77f364c6f3)" to "[4efbf513a230daf4a39316149eedea94282ee335](https://github.com/sagemath/sagetrac-mirror/commit/4efbf513a230daf4a39316149eedea94282ee335)".



---

archive/issue_events_210815.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-09-03T20:57:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210815"
}
```



---

archive/issue_events_210816.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-09-03T20:57:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210816"
}
```



---

archive/issue_comments_359924.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,4 +9,6 @@\n Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)\n ```\n \n+One important change is the move of the method `_get_matrix_class` of `MatrixSpace` as an independent function.\n+\n follow up: #23714 (implementation of gap matrices)\n``````\n",
    "created_at": "2017-09-03T20:57:31Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359924",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,4 +9,6 @@
 Full MatrixSpace of 3 by 3 dense matrices over Integer Ring (using Matrix_generic_dense)
 ```
 
+One important change is the move of the method `_get_matrix_class` of `MatrixSpace` as an independent function.
+
 follow up: #23714 (implementation of gap matrices)
``````




---

archive/issue_comments_359925.json:
```json
{
    "body": "<a id='comment:25'></a>\nJP, do you feel up for the review?",
    "created_at": "2017-09-03T21:04:52Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359925",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>
JP, do you feel up for the review?



---

archive/issue_comments_359926.json:
```json
{
    "body": "<a id='comment:26'></a>\nFucking root systems\n\n```\nsage -t --long src/sage/combinat/root_system/cartan_type.py  # 2 doctests failed\nsage -t --long src/sage/combinat/root_system/weight_lattice_realizations.py  # 12 doctests failed\nsage -t --long src/sage/combinat/root_system/ambient_space.py  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/root_lattice_realizations.py  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/type_marked.py  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/type_reducible.py  # 2 doctests failed\nsage -t --long src/sage/combinat/root_system/root_space.py  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/cartan_matrix.py  # 5 doctests failed\nsage -t --long src/sage/combinat/root_system/dynkin_diagram.py  # 4 doctests failed\nsage -t --long src/sage/combinat/root_system/weight_space.py  # 3 doctests failed\nsage -t --long src/sage/combinat/root_system/type_relabel.py  # 1 doctest failed\nsage -t --long src/sage/combinat/root_system/type_affine.py  # 3 doctests failed\nsage -t --long src/sage/combinat/root_system/root_system.py  # 1 doctest failed\nsage -t --long src/sage/categories/crystals.py  # 2 doctests failed\n```",
    "created_at": "2017-09-04T04:40:30Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359926",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>
Fucking root systems

```
sage -t --long src/sage/combinat/root_system/cartan_type.py  # 2 doctests failed
sage -t --long src/sage/combinat/root_system/weight_lattice_realizations.py  # 12 doctests failed
sage -t --long src/sage/combinat/root_system/ambient_space.py  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/root_lattice_realizations.py  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/type_marked.py  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/type_reducible.py  # 2 doctests failed
sage -t --long src/sage/combinat/root_system/root_space.py  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/cartan_matrix.py  # 5 doctests failed
sage -t --long src/sage/combinat/root_system/dynkin_diagram.py  # 4 doctests failed
sage -t --long src/sage/combinat/root_system/weight_space.py  # 3 doctests failed
sage -t --long src/sage/combinat/root_system/type_relabel.py  # 1 doctest failed
sage -t --long src/sage/combinat/root_system/type_affine.py  # 3 doctests failed
sage -t --long src/sage/combinat/root_system/root_system.py  # 1 doctest failed
sage -t --long src/sage/categories/crystals.py  # 2 doctests failed
```



---

archive/issue_comments_359927.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5fa13d8e9c3b44b549873810299b256fa7b6123\">d5fa13d</a></td><td><code>23706: dirty fixes for Cartan matrices</code></td></tr></table>\n",
    "created_at": "2017-09-04T05:16:09Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359927",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5fa13d8e9c3b44b549873810299b256fa7b6123">d5fa13d</a></td><td><code>23706: dirty fixes for Cartan matrices</code></td></tr></table>




---

archive/issue_comments_359928.json:
```json
{
    "body": "**Changing commit** from \"[4efbf513a230daf4a39316149eedea94282ee335](https://github.com/sagemath/sagetrac-mirror/commit/4efbf513a230daf4a39316149eedea94282ee335)\" to \"[d5fa13d8e9c3b44b549873810299b256fa7b6123](https://github.com/sagemath/sagetrac-mirror/commit/d5fa13d8e9c3b44b549873810299b256fa7b6123)\".",
    "created_at": "2017-09-04T05:16:09Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359928",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4efbf513a230daf4a39316149eedea94282ee335](https://github.com/sagemath/sagetrac-mirror/commit/4efbf513a230daf4a39316149eedea94282ee335)" to "[d5fa13d8e9c3b44b549873810299b256fa7b6123](https://github.com/sagemath/sagetrac-mirror/commit/d5fa13d8e9c3b44b549873810299b256fa7b6123)".



---

archive/issue_comments_359929.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,4 +11,6 @@\n \n One important change is the move of the method `_get_matrix_class` of `MatrixSpace` as an independent function.\n \n+A problem arose with `CartanMatrix` (in `sage/combinat/root_system/cartan_matrix.py`). The class `CartanMatrix` inherits from `Matrix_integer_sparse` but does not properly redefines the parent. As a consequence of the changes here, many matrix operations are not valid anymore for inherited types (mostly submatrices operations such as `__getitem__` with slices or `stack`). A fix is provided by defining `CartanMatrix.matrix_space`.\n+\n follow up: #23714 (implementation of gap matrices)\n``````\n",
    "created_at": "2017-09-04T05:30:33Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359929",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,4 +11,6 @@
 
 One important change is the move of the method `_get_matrix_class` of `MatrixSpace` as an independent function.
 
+A problem arose with `CartanMatrix` (in `sage/combinat/root_system/cartan_matrix.py`). The class `CartanMatrix` inherits from `Matrix_integer_sparse` but does not properly redefines the parent. As a consequence of the changes here, many matrix operations are not valid anymore for inherited types (mostly submatrices operations such as `__getitem__` with slices or `stack`). A fix is provided by defining `CartanMatrix.matrix_space`.
+
 follow up: #23714 (implementation of gap matrices)
``````




---

archive/issue_comments_359930.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98d9ae1b64aac938ccb96b1b4f699b44b434bbf5\">98d9ae1</a></td><td><code>23706: fix for CartanMatrix</code></td></tr></table>\n",
    "created_at": "2017-09-04T05:38:44Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98d9ae1b64aac938ccb96b1b4f699b44b434bbf5">98d9ae1</a></td><td><code>23706: fix for CartanMatrix</code></td></tr></table>




---

archive/issue_comments_359931.json:
```json
{
    "body": "**Changing commit** from \"[d5fa13d8e9c3b44b549873810299b256fa7b6123](https://github.com/sagemath/sagetrac-mirror/commit/d5fa13d8e9c3b44b549873810299b256fa7b6123)\" to \"[98d9ae1b64aac938ccb96b1b4f699b44b434bbf5](https://github.com/sagemath/sagetrac-mirror/commit/98d9ae1b64aac938ccb96b1b4f699b44b434bbf5)\".",
    "created_at": "2017-09-04T05:38:44Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359931",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d5fa13d8e9c3b44b549873810299b256fa7b6123](https://github.com/sagemath/sagetrac-mirror/commit/d5fa13d8e9c3b44b549873810299b256fa7b6123)" to "[98d9ae1b64aac938ccb96b1b4f699b44b434bbf5](https://github.com/sagemath/sagetrac-mirror/commit/98d9ae1b64aac938ccb96b1b4f699b44b434bbf5)".



---

archive/issue_comments_359932.json:
```json
{
    "body": "<a id='comment:30'></a>\nCartan matrices are fixed... waiting for patchbot verdict again.",
    "created_at": "2017-09-04T05:39:30Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359932",
    "user": "https://github.com/videlec"
}
```

<a id='comment:30'></a>
Cartan matrices are fixed... waiting for patchbot verdict again.



---

archive/issue_comments_359933.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n The aim of this ticket is to revamp the `MatrixSpace` constructor in order to be able to choose the implementation.\n \n-For example, one can have access to 2 implementations of integer matrices\n+For example, with the attached branch one can have access to 2 implementations of integer matrices\n \n ```\n sage: MatrixSpace(ZZ, 3, implementation='flint')\n``````\n",
    "created_at": "2017-09-04T05:40:30Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359933",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 The aim of this ticket is to revamp the `MatrixSpace` constructor in order to be able to choose the implementation.
 
-For example, one can have access to 2 implementations of integer matrices
+For example, with the attached branch one can have access to 2 implementations of integer matrices
 
 ```
 sage: MatrixSpace(ZZ, 3, implementation='flint')
``````




---

archive/issue_comments_359934.json:
```json
{
    "body": "<a id='comment:32'></a>\nOk, I'm \"back on trac\"!\n\nI'll give a look at this today.\n\nWhere should I throw in the benchmarking script? I guess it is not a good idea to hard code the best implementation, but at least, in the tests, we could add some relevant benchmarks to keep track of the evolution?",
    "created_at": "2017-09-04T09:42:03Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359934",
    "user": "https://github.com/jplab"
}
```

<a id='comment:32'></a>
Ok, I'm "back on trac"!

I'll give a look at this today.

Where should I throw in the benchmarking script? I guess it is not a good idea to hard code the best implementation, but at least, in the tests, we could add some relevant benchmarks to keep track of the evolution?



---

archive/issue_comments_359935.json:
```json
{
    "body": "<a id='comment:33'></a>\nIn the description of the test:\n\n```\n+        Check that multiplication for matrices with different backends are not allowed::\n```\n\nI would also mention that sparsity is checked ( the reason why there is no X appearing in row 2, column 3...)\n\nThe changes in the CartanMatrix look good.\n\nIn one of the bot's report, I get an error here:\n\n```\n**********************************************************************\nFile \"src/sage/matrix/matrix_gfpn_dense.pyx\", line 1484, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._echelon_in_place_classical\nFailed example:\n    type(X)\nExpected:\n    <type 'sage.matrix.matrix_generic_dense.Matrix_generic_dense'>\nGot:\n    <type 'sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense'>\n**********************************************************************\n```\n\nOther errors look to be unrelated. I'm still looking into the changes.",
    "created_at": "2017-09-04T13:20:50Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359935",
    "user": "https://github.com/jplab"
}
```

<a id='comment:33'></a>
In the description of the test:

```
+        Check that multiplication for matrices with different backends are not allowed::
```

I would also mention that sparsity is checked ( the reason why there is no X appearing in row 2, column 3...)

The changes in the CartanMatrix look good.

In one of the bot's report, I get an error here:

```
**********************************************************************
File "src/sage/matrix/matrix_gfpn_dense.pyx", line 1484, in sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense._echelon_in_place_classical
Failed example:
    type(X)
Expected:
    <type 'sage.matrix.matrix_generic_dense.Matrix_generic_dense'>
Got:
    <type 'sage.matrix.matrix_gfpn_dense.Matrix_gfpn_dense'>
**********************************************************************
```

Other errors look to be unrelated. I'm still looking into the changes.



---

archive/issue_comments_359936.json:
```json
{
    "body": "<a id='comment:34'></a>\nI ran the test on the file `src/sage/matrix/matrix_gfpn_dense.pyx` and all tests passed...",
    "created_at": "2017-09-04T13:40:26Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359936",
    "user": "https://github.com/jplab"
}
```

<a id='comment:34'></a>
I ran the test on the file `src/sage/matrix/matrix_gfpn_dense.pyx` and all tests passed...



---

archive/issue_comments_359937.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23706)\" to \"[u/jipilab/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/23706)\".",
    "created_at": "2017-09-04T14:35:42Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359937",
    "user": "https://github.com/jplab"
}
```

**Changing branch** from "[u/vdelecroix/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23706)" to "[u/jipilab/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/23706)".



---

archive/issue_comments_359938.json:
```json
{
    "body": "<a id='comment:36'></a>\nJust did some pep8 corrections... Otherwise, it looks good. Perhaps we should wait to get a proper bot to go over the changes as they touch many files...\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9\">ae0bfc3</a></td><td><code>Some pep8 conventions</code></td></tr></table>\n",
    "created_at": "2017-09-04T14:36:47Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359938",
    "user": "https://github.com/jplab"
}
```

<a id='comment:36'></a>
Just did some pep8 corrections... Otherwise, it looks good. Perhaps we should wait to get a proper bot to go over the changes as they touch many files...

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9">ae0bfc3</a></td><td><code>Some pep8 conventions</code></td></tr></table>




---

archive/issue_comments_359939.json:
```json
{
    "body": "**Changing commit** from \"[98d9ae1b64aac938ccb96b1b4f699b44b434bbf5](https://github.com/sagemath/sagetrac-mirror/commit/98d9ae1b64aac938ccb96b1b4f699b44b434bbf5)\" to \"[ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9](https://github.com/sagemath/sagetrac-mirror/commit/ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9)\".",
    "created_at": "2017-09-04T14:36:47Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359939",
    "user": "https://github.com/jplab"
}
```

**Changing commit** from "[98d9ae1b64aac938ccb96b1b4f699b44b434bbf5](https://github.com/sagemath/sagetrac-mirror/commit/98d9ae1b64aac938ccb96b1b4f699b44b434bbf5)" to "[ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9](https://github.com/sagemath/sagetrac-mirror/commit/ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9)".



---

archive/issue_comments_359940.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [jipilab](#comment%3A34):\n> I ran the test on the file `src/sage/matrix/matrix_gfpn_dense.pyx` and all tests passed...\n\n\nThis need to be fixed. It depends whether `meataxe` is installed or not.",
    "created_at": "2017-09-04T16:16:45Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359940",
    "user": "https://github.com/videlec"
}
```

<a id='comment:37'></a>
Replying to [jipilab](#comment%3A34):
> I ran the test on the file `src/sage/matrix/matrix_gfpn_dense.pyx` and all tests passed...


This need to be fixed. It depends whether `meataxe` is installed or not.



---

archive/issue_comments_359941.json:
```json
{
    "body": "<a id='comment:38'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc35c82b9d07517be8af21f67dbca33241cda6ac\">cc35c82</a></td><td><code>23706: fix doctest in matrix_gfpn_dense.pyx</code></td></tr></table>\n",
    "created_at": "2017-09-04T16:46:34Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359941",
    "user": "https://github.com/videlec"
}
```

<a id='comment:38'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc35c82b9d07517be8af21f67dbca33241cda6ac">cc35c82</a></td><td><code>23706: fix doctest in matrix_gfpn_dense.pyx</code></td></tr></table>




---

archive/issue_comments_359942.json:
```json
{
    "body": "**Changing branch** from \"[u/jipilab/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/23706)\" to \"[public/23706](https://github.com/sagemath/sagetrac-mirror/tree/public/23706)\".",
    "created_at": "2017-09-04T16:46:34Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359942",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[u/jipilab/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/23706)" to "[public/23706](https://github.com/sagemath/sagetrac-mirror/tree/public/23706)".



---

archive/issue_comments_359943.json:
```json
{
    "body": "**Changing commit** from \"[ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9](https://github.com/sagemath/sagetrac-mirror/commit/ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9)\" to \"[cc35c82b9d07517be8af21f67dbca33241cda6ac](https://github.com/sagemath/sagetrac-mirror/commit/cc35c82b9d07517be8af21f67dbca33241cda6ac)\".",
    "created_at": "2017-09-04T16:46:34Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359943",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9](https://github.com/sagemath/sagetrac-mirror/commit/ae0bfc33a476dcf8ffe6e14808b4f36c2a2bf9c9)" to "[cc35c82b9d07517be8af21f67dbca33241cda6ac](https://github.com/sagemath/sagetrac-mirror/commit/cc35c82b9d07517be8af21f67dbca33241cda6ac)".



---

archive/issue_comments_359944.json:
```json
{
    "body": "<a id='comment:39'></a>\nMuch cleaner now!!",
    "created_at": "2017-09-04T16:46:50Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359944",
    "user": "https://github.com/videlec"
}
```

<a id='comment:39'></a>
Much cleaner now!!



---

archive/issue_comments_359945.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [jipilab](#comment%3A32):\n> Ok, I'm \"back on trac\"!\n> \n> I'll give a look at this today.\n> \n> Where should I throw in the benchmarking script? I guess it is not a good idea to hard code the best implementation, but at least, in the tests, we could add some relevant benchmarks to keep track of the evolution?\n\n\nNot here. You should open a new ticket (and you can add it to the follow-up list of this ticket). Moreover the concept of \"best implementation\" depends on what you intend to do (e.g. matrix multiplication, Gauss elimination, determinant, etc).",
    "created_at": "2017-09-10T16:13:24Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359945",
    "user": "https://github.com/videlec"
}
```

<a id='comment:40'></a>
Replying to [jipilab](#comment%3A32):
> Ok, I'm "back on trac"!
> 
> I'll give a look at this today.
> 
> Where should I throw in the benchmarking script? I guess it is not a good idea to hard code the best implementation, but at least, in the tests, we could add some relevant benchmarks to keep track of the evolution?


Not here. You should open a new ticket (and you can add it to the follow-up list of this ticket). Moreover the concept of "best implementation" depends on what you intend to do (e.g. matrix multiplication, Gauss elimination, determinant, etc).



---

archive/issue_comments_359946.json:
```json
{
    "body": "<a id='comment:41'></a>\nThe ticket does not apply on beta5. I'm compiling b5 right now and I'll check if I can diagnose further. I have to install `meataxe` and checkout testing. Give my machine some time and I get back here!",
    "created_at": "2017-09-13T07:57:56Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359946",
    "user": "https://github.com/jplab"
}
```

<a id='comment:41'></a>
The ticket does not apply on beta5. I'm compiling b5 right now and I'll check if I can diagnose further. I have to install `meataxe` and checkout testing. Give my machine some time and I get back here!



---

archive/issue_comments_359947.json:
```json
{
    "body": "<a id='comment:42'></a>\nIs there a dependency to #23721?",
    "created_at": "2017-09-13T07:59:48Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359947",
    "user": "https://github.com/jplab"
}
```

<a id='comment:42'></a>
Is there a dependency to #23721?



---

archive/issue_comments_359948.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [jipilab](#comment%3A42):\n> Is there a dependency to #23721?\n\n\nNot that I know of...",
    "created_at": "2017-09-13T08:19:06Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359948",
    "user": "https://github.com/videlec"
}
```

<a id='comment:43'></a>
Replying to [jipilab](#comment%3A42):
> Is there a dependency to #23721?


Not that I know of...



---

archive/issue_comments_359949.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [jipilab](#comment%3A41):\n> The ticket does not apply on beta5. I'm compiling b5 right now and I'll check if I can diagnose further. I have to install `meataxe` and checkout testing. Give my machine some time and I get back here!\n\n\nThe problem comes from something that has changed in `matrix_space.py`. The merge is simple but I have to leave in 5 minutes... will fix that first thing this afternoon.",
    "created_at": "2017-09-13T08:21:59Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359949",
    "user": "https://github.com/videlec"
}
```

<a id='comment:44'></a>
Replying to [jipilab](#comment%3A41):
> The ticket does not apply on beta5. I'm compiling b5 right now and I'll check if I can diagnose further. I have to install `meataxe` and checkout testing. Give my machine some time and I get back here!


The problem comes from something that has changed in `matrix_space.py`. The merge is simple but I have to leave in 5 minutes... will fix that first thing this afternoon.



---

archive/issue_comments_359950.json:
```json
{
    "body": "**Changing commit** from \"[cc35c82b9d07517be8af21f67dbca33241cda6ac](https://github.com/sagemath/sagetrac-mirror/commit/cc35c82b9d07517be8af21f67dbca33241cda6ac)\" to \"[869b155d053a8f4cb8d69d2575328b2d3ceabc86](https://github.com/sagemath/sagetrac-mirror/commit/869b155d053a8f4cb8d69d2575328b2d3ceabc86)\".",
    "created_at": "2017-09-13T12:30:15Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359950",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cc35c82b9d07517be8af21f67dbca33241cda6ac](https://github.com/sagemath/sagetrac-mirror/commit/cc35c82b9d07517be8af21f67dbca33241cda6ac)" to "[869b155d053a8f4cb8d69d2575328b2d3ceabc86](https://github.com/sagemath/sagetrac-mirror/commit/869b155d053a8f4cb8d69d2575328b2d3ceabc86)".



---

archive/issue_comments_359951.json:
```json
{
    "body": "<a id='comment:45'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/869b155d053a8f4cb8d69d2575328b2d3ceabc86\">869b155</a></td><td><code>Rebased on beta5 (attempt to solve conflict)</code></td></tr></table>\n",
    "created_at": "2017-09-13T12:30:15Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/869b155d053a8f4cb8d69d2575328b2d3ceabc86">869b155</a></td><td><code>Rebased on beta5 (attempt to solve conflict)</code></td></tr></table>




---

archive/issue_comments_359952.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [vdelecroix](#comment%3A44):\n> Replying to [jipilab](#comment%3A41):\n> > The ticket does not apply on beta5. I'm compiling b5 right now and I'll check if I can diagnose further. I have to install `meataxe` and checkout testing. Give my machine some time and I get back here!\n\n> \n> The problem comes from something that has changed in `matrix_space.py`. The merge is simple but I have to leave in 5 minutes... will fix that first thing this afternoon.\n\n\nDamn, I just read this comment... Hope I did not create any trouble.",
    "created_at": "2017-09-13T12:31:50Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359952",
    "user": "https://github.com/jplab"
}
```

<a id='comment:46'></a>
Replying to [vdelecroix](#comment%3A44):
> Replying to [jipilab](#comment%3A41):
> > The ticket does not apply on beta5. I'm compiling b5 right now and I'll check if I can diagnose further. I have to install `meataxe` and checkout testing. Give my machine some time and I get back here!

> 
> The problem comes from something that has changed in `matrix_space.py`. The merge is simple but I have to leave in 5 minutes... will fix that first thing this afternoon.


Damn, I just read this comment... Hope I did not create any trouble.



---

archive/issue_comments_359953.json:
```json
{
    "body": "<a id='comment:47'></a>\nIt's ok.",
    "created_at": "2017-09-13T12:34:24Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359953",
    "user": "https://github.com/videlec"
}
```

<a id='comment:47'></a>
It's ok.



---

archive/issue_comments_359954.json:
```json
{
    "body": "<a id='comment:48'></a>\nThere are some spurious doc errors, otherwise, it looks good.",
    "created_at": "2017-09-14T06:30:33Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359954",
    "user": "https://github.com/jplab"
}
```

<a id='comment:48'></a>
There are some spurious doc errors, otherwise, it looks good.



---

archive/issue_comments_359955.json:
```json
{
    "body": "**Changing commit** from \"[869b155d053a8f4cb8d69d2575328b2d3ceabc86](https://github.com/sagemath/sagetrac-mirror/commit/869b155d053a8f4cb8d69d2575328b2d3ceabc86)\" to \"[079981ab5ca646a65072815b7b956060b908f5f7](https://github.com/sagemath/sagetrac-mirror/commit/079981ab5ca646a65072815b7b956060b908f5f7)\".",
    "created_at": "2017-09-14T07:28:43Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[869b155d053a8f4cb8d69d2575328b2d3ceabc86](https://github.com/sagemath/sagetrac-mirror/commit/869b155d053a8f4cb8d69d2575328b2d3ceabc86)" to "[079981ab5ca646a65072815b7b956060b908f5f7](https://github.com/sagemath/sagetrac-mirror/commit/079981ab5ca646a65072815b7b956060b908f5f7)".



---

archive/issue_comments_359956.json:
```json
{
    "body": "<a id='comment:49'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47a0f13ee84df5a8839f518fd1a42094a86cf515\">47a0f13</a></td><td><code>23706: remove trailing whitespaces in cartan_matrix.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/079981ab5ca646a65072815b7b956060b908f5f7\">079981a</a></td><td><code>23706: fix doctests</code></td></tr></table>\n",
    "created_at": "2017-09-14T07:28:43Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47a0f13ee84df5a8839f518fd1a42094a86cf515">47a0f13</a></td><td><code>23706: remove trailing whitespaces in cartan_matrix.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/079981ab5ca646a65072815b7b956060b908f5f7">079981a</a></td><td><code>23706: fix doctests</code></td></tr></table>




---

archive/issue_comments_359957.json:
```json
{
    "body": "<a id='comment:50'></a>\nj'ai pouss\u00e9... reste plus qu'\u00e0 attendre les verdicts de madame patchbot.",
    "created_at": "2017-09-14T07:46:35Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359957",
    "user": "https://github.com/videlec"
}
```

<a id='comment:50'></a>
j'ai poussé... reste plus qu'à attendre les verdicts de madame patchbot.



---

archive/issue_comments_359958.json:
```json
{
    "body": "**Changing branch** from \"[public/23706](https://github.com/sagemath/sagetrac-mirror/tree/public/23706)\" to \"[u/vdelecroix/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23706)\".",
    "created_at": "2017-10-24T15:54:33Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359958",
    "user": "https://github.com/videlec"
}
```

**Changing branch** from "[public/23706](https://github.com/sagemath/sagetrac-mirror/tree/public/23706)" to "[u/vdelecroix/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23706)".



---

archive/issue_comments_359959.json:
```json
{
    "body": "**Changing commit** from \"[079981ab5ca646a65072815b7b956060b908f5f7](https://github.com/sagemath/sagetrac-mirror/commit/079981ab5ca646a65072815b7b956060b908f5f7)\" to \"[5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed](https://github.com/sagemath/sagetrac-mirror/commit/5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed)\".",
    "created_at": "2017-10-24T15:54:33Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359959",
    "user": "https://github.com/videlec"
}
```

**Changing commit** from "[079981ab5ca646a65072815b7b956060b908f5f7](https://github.com/sagemath/sagetrac-mirror/commit/079981ab5ca646a65072815b7b956060b908f5f7)" to "[5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed](https://github.com/sagemath/sagetrac-mirror/commit/5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed)".



---

archive/issue_comments_359960.json:
```json
{
    "body": "<a id='comment:51'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dee269a9a3996f78fd1adbe02653d653f1520cbf\">dee269a</a></td><td><code>23706: allow to choose matrix implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ca3ae53ef5a945d4aa3b398755a4ce45eed9bf0\">0ca3ae5</a></td><td><code>23706: fix for CartanMatrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cb0c2f54972aa5c2f9c05d3d3d6f60d79cf1a19\">4cb0c2f</a></td><td><code>Some pep8 conventions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed\">5c415f5</a></td><td><code>23706: fix doctest in matrix_gfpn_dense.pyx</code></td></tr></table>\n",
    "created_at": "2017-10-24T15:54:33Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359960",
    "user": "https://github.com/videlec"
}
```

<a id='comment:51'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dee269a9a3996f78fd1adbe02653d653f1520cbf">dee269a</a></td><td><code>23706: allow to choose matrix implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ca3ae53ef5a945d4aa3b398755a4ce45eed9bf0">0ca3ae5</a></td><td><code>23706: fix for CartanMatrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cb0c2f54972aa5c2f9c05d3d3d6f60d79cf1a19">4cb0c2f</a></td><td><code>Some pep8 conventions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed">5c415f5</a></td><td><code>23706: fix doctest in matrix_gfpn_dense.pyx</code></td></tr></table>




---

archive/issue_comments_359961.json:
```json
{
    "body": "**Dependencies:** #24096",
    "created_at": "2017-10-25T09:23:55Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359961",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #24096



---

archive/issue_comments_359962.json:
```json
{
    "body": "<a id='comment:52'></a>\nConflicts with #24096",
    "created_at": "2017-10-25T09:23:55Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359962",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:52'></a>
Conflicts with #24096



---

archive/issue_comments_359963.json:
```json
{
    "body": "**Changing commit** from \"[5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed](https://github.com/sagemath/sagetrac-mirror/commit/5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed)\" to \"[4f818deff90d1db47f55603509d22f0c267fcf8a](https://github.com/sagemath/sagetrac-mirror/commit/4f818deff90d1db47f55603509d22f0c267fcf8a)\".",
    "created_at": "2017-11-11T19:09:52Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed](https://github.com/sagemath/sagetrac-mirror/commit/5c415f5070e1e4cfb0e57c3c99cdd1470114e2ed)" to "[4f818deff90d1db47f55603509d22f0c267fcf8a](https://github.com/sagemath/sagetrac-mirror/commit/4f818deff90d1db47f55603509d22f0c267fcf8a)".



---

archive/issue_comments_359964.json:
```json
{
    "body": "<a id='comment:53'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08c9865e4318a21730a26217386da9e4ce9034c8\">08c9865</a></td><td><code>23706: allow to choose matrix implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3b5370cda08f0d7355aa7b92a2aaae5ff5a2640\">c3b5370</a></td><td><code>23706: fix for CartanMatrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07376df12515a6e4ab008600b8b0ca2daecda720\">07376df</a></td><td><code>Some pep8 conventions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f818deff90d1db47f55603509d22f0c267fcf8a\">4f818de</a></td><td><code>23706: fix doctest in matrix_gfpn_dense.pyx</code></td></tr></table>\n",
    "created_at": "2017-11-11T19:09:52Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08c9865e4318a21730a26217386da9e4ce9034c8">08c9865</a></td><td><code>23706: allow to choose matrix implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3b5370cda08f0d7355aa7b92a2aaae5ff5a2640">c3b5370</a></td><td><code>23706: fix for CartanMatrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07376df12515a6e4ab008600b8b0ca2daecda720">07376df</a></td><td><code>Some pep8 conventions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f818deff90d1db47f55603509d22f0c267fcf8a">4f818de</a></td><td><code>23706: fix doctest in matrix_gfpn_dense.pyx</code></td></tr></table>




---

archive/issue_comments_359965.json:
```json
{
    "body": "<a id='comment:54'></a>\nrebased on 8.1.rc0",
    "created_at": "2017-11-11T19:10:56Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359965",
    "user": "https://github.com/videlec"
}
```

<a id='comment:54'></a>
rebased on 8.1.rc0



---

archive/issue_comments_359966.json:
```json
{
    "body": "<a id='comment:55'></a>\npatchbot is happy! jipilab?",
    "created_at": "2017-11-12T20:18:32Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359966",
    "user": "https://github.com/videlec"
}
```

<a id='comment:55'></a>
patchbot is happy! jipilab?



---

archive/issue_comments_359967.json:
```json
{
    "body": "<a id='comment:56'></a>\nI have a few comments:\n\n```diff\n-    def matrix_space(self, nrows=None, ncols=None, sparse=None):\n+    def matrix_space(self, nrows=None, ncols=None, sparse=True):\n         r\"\"\"\n         Return a matrix space over the integers.\n \n         INPUT:\n \n-        - ``nrows`` - number of rows\n+        - ``nrows`` -- number of rows\n \n-        - ``ncols`` - number of columns\n+        - ``ncols`` -- number of columns\n \n-        - ``sparse`` - (boolean) sparseness\n+        - ``sparse`` -- (boolean) sparseness\n \n         EXAMPLES::\n \n             sage: cm = CartanMatrix(['A', 3])\n             sage: cm.matrix_space()\n             Full MatrixSpace of 3 by 3 sparse matrices over Integer Ring\n             sage: cm.matrix_space(2, 2)\n             Full MatrixSpace of 2 by 2 sparse matrices over Integer Ring\n             sage: cm[:2,1:]   # indirect doctest\n             [-1  0]\n             [ 2 -1]\n         \"\"\"\n         if nrows is None:\n             nrows = self.nrows()\n         if ncols is None:\n             ncols = self.ncols()\n-        if sparse is None:\n-            sparse = True\n \n         if nrows == self.nrows() and ncols == self.ncols() and sparse:\n             return self.parent()\n         else:\n             from sage.matrix.matrix_space import MatrixSpace\n             return MatrixSpace(ZZ, nrows, ncols, sparse is None or bool(sparse))\n```\n\nI would make this into a more 2/3 compatible test:\n\n```\n            sage: for i in range(3):\n            ....:     for j in range(3):\n            ....:         try:\n            ....:             s = M[i].an_element() * M[j].an_element()\n            ....:             print('X', end='')\n            ....:         except TypeError:\n            ....:             print(' ', end='')\n            ....:     print()\n```\nI would instead create a 0/1-matrix and output that. Another option would be creating an appropriate string with `'\\n'.join(...)`. Similar for another test.\n\nThese tests should not be marked as meataxe if it really is using the generic implementation:\n\n```\n            sage: MS = MatrixSpace(M.base_ring(), M.nrows(), M.ncols(), implementation='generic')\n            sage: X = MS(M)                         # optional: meataxe\n            sage: type(X)                           # optional: meataxe\n            sage: X.echelon_form() # optional: meataxe\n```\nOtherwise that would be a bug.\n\nDo we want m4ri to have precedence over trying meataxe when no implementation is given? (I'm cc-ing Simon to note that there might be a change in behavior.)\n\nI'm also split on documenting about when we use a non-generic implementation by default. It feels too much like an implementation detail that it should be hidden from the more casual users, but I think it is good for the more advanced users to have it in the public doc. Thoughts?\n\nI'm also not 100% convinced about having to explicitly convert matrices of different implementations, but since things are likely to be incompatible and it seems unlikely that this would be a problem (I think a user who is choosing implementations will probably be careful and might even appreciate this error). I do not have a good reason to make this an objection, but I am just noting that this might come up from a user.",
    "created_at": "2017-11-13T00:51:18Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359967",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:56'></a>
I have a few comments:

```diff
-    def matrix_space(self, nrows=None, ncols=None, sparse=None):
+    def matrix_space(self, nrows=None, ncols=None, sparse=True):
         r"""
         Return a matrix space over the integers.
 
         INPUT:
 
-        - ``nrows`` - number of rows
+        - ``nrows`` -- number of rows
 
-        - ``ncols`` - number of columns
+        - ``ncols`` -- number of columns
 
-        - ``sparse`` - (boolean) sparseness
+        - ``sparse`` -- (boolean) sparseness
 
         EXAMPLES::
 
             sage: cm = CartanMatrix(['A', 3])
             sage: cm.matrix_space()
             Full MatrixSpace of 3 by 3 sparse matrices over Integer Ring
             sage: cm.matrix_space(2, 2)
             Full MatrixSpace of 2 by 2 sparse matrices over Integer Ring
             sage: cm[:2,1:]   # indirect doctest
             [-1  0]
             [ 2 -1]
         """
         if nrows is None:
             nrows = self.nrows()
         if ncols is None:
             ncols = self.ncols()
-        if sparse is None:
-            sparse = True
 
         if nrows == self.nrows() and ncols == self.ncols() and sparse:
             return self.parent()
         else:
             from sage.matrix.matrix_space import MatrixSpace
             return MatrixSpace(ZZ, nrows, ncols, sparse is None or bool(sparse))
```

I would make this into a more 2/3 compatible test:

```
            sage: for i in range(3):
            ....:     for j in range(3):
            ....:         try:
            ....:             s = M[i].an_element() * M[j].an_element()
            ....:             print('X', end='')
            ....:         except TypeError:
            ....:             print(' ', end='')
            ....:     print()
```
I would instead create a 0/1-matrix and output that. Another option would be creating an appropriate string with `'\n'.join(...)`. Similar for another test.

These tests should not be marked as meataxe if it really is using the generic implementation:

```
            sage: MS = MatrixSpace(M.base_ring(), M.nrows(), M.ncols(), implementation='generic')
            sage: X = MS(M)                         # optional: meataxe
            sage: type(X)                           # optional: meataxe
            sage: X.echelon_form() # optional: meataxe
```
Otherwise that would be a bug.

Do we want m4ri to have precedence over trying meataxe when no implementation is given? (I'm cc-ing Simon to note that there might be a change in behavior.)

I'm also split on documenting about when we use a non-generic implementation by default. It feels too much like an implementation detail that it should be hidden from the more casual users, but I think it is good for the more advanced users to have it in the public doc. Thoughts?

I'm also not 100% convinced about having to explicitly convert matrices of different implementations, but since things are likely to be incompatible and it seems unlikely that this would be a problem (I think a user who is choosing implementations will probably be careful and might even appreciate this error). I do not have a good reason to make this an objection, but I am just noting that this might come up from a user.



---

archive/issue_events_210817.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-13T00:51:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210817"
}
```



---

archive/issue_events_210818.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-13T00:51:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210818"
}
```



---

archive/issue_comments_359968.json:
```json
{
    "body": "**Changing reviewer** from \"Jean-Philippe Labb\u00e9\" to \"Jean-Philippe Labb\u00e9, Travis Scrimshaw\".",
    "created_at": "2017-11-13T00:51:18Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359968",
    "user": "https://github.com/tscrim"
}
```

**Changing reviewer** from "Jean-Philippe Labbé" to "Jean-Philippe Labbé, Travis Scrimshaw".



---

archive/issue_comments_359969.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eeeba324b329c69b8e7c625423cfe4eca4862fc2\">eeeba32</a></td><td><code>23706: a default argument and doctests</code></td></tr></table>\n",
    "created_at": "2017-11-13T07:03:01Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eeeba324b329c69b8e7c625423cfe4eca4862fc2">eeeba32</a></td><td><code>23706: a default argument and doctests</code></td></tr></table>




---

archive/issue_comments_359970.json:
```json
{
    "body": "**Changing commit** from \"[4f818deff90d1db47f55603509d22f0c267fcf8a](https://github.com/sagemath/sagetrac-mirror/commit/4f818deff90d1db47f55603509d22f0c267fcf8a)\" to \"[eeeba324b329c69b8e7c625423cfe4eca4862fc2](https://github.com/sagemath/sagetrac-mirror/commit/eeeba324b329c69b8e7c625423cfe4eca4862fc2)\".",
    "created_at": "2017-11-13T07:03:01Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4f818deff90d1db47f55603509d22f0c267fcf8a](https://github.com/sagemath/sagetrac-mirror/commit/4f818deff90d1db47f55603509d22f0c267fcf8a)" to "[eeeba324b329c69b8e7c625423cfe4eca4862fc2](https://github.com/sagemath/sagetrac-mirror/commit/eeeba324b329c69b8e7c625423cfe4eca4862fc2)".



---

archive/issue_comments_359971.json:
```json
{
    "body": "<a id='comment:58'></a>\nThanks Travis for having a look.\n\nReplying to [tscrim](#comment%3A56):\n> [SNIP]\n\n\nagreed and changed in eeeba32\n\n> Do we want m4ri to have precedence over trying meataxe when no implementation is given? (I'm cc-ing Simon to note that there might be a change in behavior.)\n\n\nThere should not be any change. It concerns only the case `characteristic = 2`.\n\n```\nif implementation is None:\n    if R.characteristic() == 2 and R.order() <= 65536:\n        implementation = 'm4ri'\n    elif R.order() <= 255:\n        try:\n            from . import matrix_gfpn_dense\n        except ImportError:\n            implementation = 'generic'\n        else:\n            implementation = 'meataxe'\n    else:\n        implementation = 'generic'\n```\nwhere it used to be\n\n```\nif R.characteristic() == 2:\n    if R.order() <= 65536:\n        return matrix_gf2e_dense.Matrix_gf2e_dense\nelif R.order() <= 255:\n    try:\n        from . import matrix_gfpn_dense\n        return matrix_gfpn_dense.Matrix_gfpn_dense\n    except ImportError:\n        pass\n```\n\n> I'm also split on documenting about when we use a non-generic implementation by default. It feels too much like an implementation detail that it should be hidden from the more casual users, but I think it is good for the more advanced users to have it in the public doc. Thoughts?\n\n\nWhat would you expect exactly? It would be a nightmare to keep the documentation up to date.\n\n> I'm also not 100% convinced about having to explicitly convert matrices of different implementations, but since things are likely to be incompatible and it seems unlikely that this would be a problem (I think a user who is choosing implementations will probably be careful and might even appreciate this error). I do not have a good reason to make this an objection, but I am just noting that this might come up from a user.\n\n\nIt should be possible to implement coercion to the default implementation (with conversion). Anyway, I would like to keep such changes for later.",
    "created_at": "2017-11-13T07:11:22Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359971",
    "user": "https://github.com/videlec"
}
```

<a id='comment:58'></a>
Thanks Travis for having a look.

Replying to [tscrim](#comment%3A56):
> [SNIP]


agreed and changed in eeeba32

> Do we want m4ri to have precedence over trying meataxe when no implementation is given? (I'm cc-ing Simon to note that there might be a change in behavior.)


There should not be any change. It concerns only the case `characteristic = 2`.

```
if implementation is None:
    if R.characteristic() == 2 and R.order() <= 65536:
        implementation = 'm4ri'
    elif R.order() <= 255:
        try:
            from . import matrix_gfpn_dense
        except ImportError:
            implementation = 'generic'
        else:
            implementation = 'meataxe'
    else:
        implementation = 'generic'
```
where it used to be

```
if R.characteristic() == 2:
    if R.order() <= 65536:
        return matrix_gf2e_dense.Matrix_gf2e_dense
elif R.order() <= 255:
    try:
        from . import matrix_gfpn_dense
        return matrix_gfpn_dense.Matrix_gfpn_dense
    except ImportError:
        pass
```

> I'm also split on documenting about when we use a non-generic implementation by default. It feels too much like an implementation detail that it should be hidden from the more casual users, but I think it is good for the more advanced users to have it in the public doc. Thoughts?


What would you expect exactly? It would be a nightmare to keep the documentation up to date.

> I'm also not 100% convinced about having to explicitly convert matrices of different implementations, but since things are likely to be incompatible and it seems unlikely that this would be a problem (I think a user who is choosing implementations will probably be careful and might even appreciate this error). I do not have a good reason to make this an objection, but I am just noting that this might come up from a user.


It should be possible to implement coercion to the default implementation (with conversion). Anyway, I would like to keep such changes for later.



---

archive/issue_events_210819.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-11-13T07:11:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210819"
}
```



---

archive/issue_events_210820.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-11-13T07:11:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210820"
}
```



---

archive/issue_comments_359972.json:
```json
{
    "body": "<a id='comment:60'></a>\nReplying to [vdelecroix](#comment%3A58):\n> Thanks Travis for having a look.\n> > Do we want m4ri to have precedence over trying meataxe when no implementation is given? (I'm cc-ing Simon to note that there might be a change in behavior.)\n\n> \n> There should not be any change. It concerns only the case `characteristic = 2`.\n> [snip]\n\n\nRight, actually I might have misread what meataxe is for and it's a non-issue because it is not meant for characteristic 2. Sorry for the noise.\n\n> > I'm also split on documenting about when we use a non-generic implementation by default. It feels too much like an implementation detail that it should be hidden from the more casual users, but I think it is good for the more advanced users to have it in the public doc. Thoughts?\n\n> \n> What would you expect exactly? It would be a nightmare to keep the documentation up to date.\n\n\nKeeping it up to date would not be such a problem; at least I don't expect it to change that much. However, I tried a few different ways to present the info and nothing really worked too well. There's just a few too many little cases for the finite fields. I guess if someone cares enough they are good enough to just look at the code.\n\nThanks. Positive review.",
    "created_at": "2017-11-13T07:29:40Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359972",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:60'></a>
Replying to [vdelecroix](#comment%3A58):
> Thanks Travis for having a look.
> > Do we want m4ri to have precedence over trying meataxe when no implementation is given? (I'm cc-ing Simon to note that there might be a change in behavior.)

> 
> There should not be any change. It concerns only the case `characteristic = 2`.
> [snip]


Right, actually I might have misread what meataxe is for and it's a non-issue because it is not meant for characteristic 2. Sorry for the noise.

> > I'm also split on documenting about when we use a non-generic implementation by default. It feels too much like an implementation detail that it should be hidden from the more casual users, but I think it is good for the more advanced users to have it in the public doc. Thoughts?

> 
> What would you expect exactly? It would be a nightmare to keep the documentation up to date.


Keeping it up to date would not be such a problem; at least I don't expect it to change that much. However, I tried a few different ways to present the info and nothing really worked too well. There's just a few too many little cases for the finite fields. I guess if someone cares enough they are good enough to just look at the code.

Thanks. Positive review.



---

archive/issue_events_210821.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-13T07:29:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210821"
}
```



---

archive/issue_events_210822.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-11-13T07:29:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210822"
}
```



---

archive/issue_comments_359973.json:
```json
{
    "body": "<a id='comment:61'></a>\nDocumentation doesn't build",
    "created_at": "2017-12-09T12:59:17Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359973",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:61'></a>
Documentation doesn't build



---

archive/issue_events_210823.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-09T12:59:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210823"
}
```



---

archive/issue_events_210824.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-09T12:59:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210824"
}
```



---

archive/issue_comments_359974.json:
```json
{
    "body": "**Changing commit** from \"[eeeba324b329c69b8e7c625423cfe4eca4862fc2](https://github.com/sagemath/sagetrac-mirror/commit/eeeba324b329c69b8e7c625423cfe4eca4862fc2)\" to \"[6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888](https://github.com/sagemath/sagetrac-mirror/commit/6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888)\".",
    "created_at": "2017-12-14T11:28:54Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[eeeba324b329c69b8e7c625423cfe4eca4862fc2](https://github.com/sagemath/sagetrac-mirror/commit/eeeba324b329c69b8e7c625423cfe4eca4862fc2)" to "[6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888](https://github.com/sagemath/sagetrac-mirror/commit/6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888)".



---

archive/issue_comments_359975.json:
```json
{
    "body": "<a id='comment:62'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c06ed6e5657e2057896f55625ee3dfd2dcd80ae0\">c06ed6e</a></td><td><code>23706: allow to choose matrix implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/758947ee9d1b26e79c96092974129c00dd2e6608\">758947e</a></td><td><code>23706: fix for CartanMatrix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e394c15d718313ea7445f1e0eae8ec9f2435aff5\">e394c15</a></td><td><code>Some pep8 conventions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c16fc7934b2658230aa448d6150343adf083e091\">c16fc79</a></td><td><code>23706: fix doctest in matrix_gfpn_dense.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888\">6bff8c8</a></td><td><code>23706: a default argument and doctests</code></td></tr></table>\n",
    "created_at": "2017-12-14T11:28:54Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c06ed6e5657e2057896f55625ee3dfd2dcd80ae0">c06ed6e</a></td><td><code>23706: allow to choose matrix implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/758947ee9d1b26e79c96092974129c00dd2e6608">758947e</a></td><td><code>23706: fix for CartanMatrix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e394c15d718313ea7445f1e0eae8ec9f2435aff5">e394c15</a></td><td><code>Some pep8 conventions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c16fc7934b2658230aa448d6150343adf083e091">c16fc79</a></td><td><code>23706: fix doctest in matrix_gfpn_dense.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888">6bff8c8</a></td><td><code>23706: a default argument and doctests</code></td></tr></table>




---

archive/issue_comments_359976.json:
```json
{
    "body": "<a id='comment:63'></a>\nWith the rebasing I do not have any problem with the documentation.",
    "created_at": "2017-12-14T11:30:03Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359976",
    "user": "https://github.com/videlec"
}
```

<a id='comment:63'></a>
With the rebasing I do not have any problem with the documentation.



---

archive/issue_events_210825.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-14T11:30:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210825"
}
```



---

archive/issue_events_210826.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-14T11:30:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210826"
}
```



---

archive/issue_events_210827.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-14T11:30:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210827"
}
```



---

archive/issue_events_210828.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-14T11:30:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210828"
}
```



---

archive/issue_comments_359977.json:
```json
{
    "body": "<a id='comment:64'></a>\nfound out\n\n```\n[dochtml] [matrices ] docstring of sage.matrix.action.MatrixMatrixAction:24: WARNING: Unexpected indentation.\n[dochtml] [matrices ] docstring of sage.matrix.action.MatrixMatrixAction:25: WARNING: Block quote ends without a blank line; unexpected unindent.\n[dochtml] [matrices ] /opt/sage/local/lib/python2.7/site-packages/sage/matrix/special.py:docstring of sage.matrix.special:48: WARNING: undefined label: sage.combinat.matrices.hadamard_matrix (if the link has no caption the label must precede a section header)\n[dochtml] [matrices ] /opt/sage/local/lib/python2.7/site-packages/sage/matrix/special.py:docstring of sage.matrix.special:49: WARNING: undefined label: sage.combinat.matrices.latin (if the link has no caption the label must precede a section header)\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/opt/sage/local/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n[dochtml]     \"__main__\", fname, loader, pkg_name)\n[dochtml]   File \"/opt/sage/local/lib/python2.7/runpy.py\", line 72, in _run_code\n[dochtml]     exec code in run_globals\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1675, in main\n[dochtml]     builder()\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 310, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 505, in _wrapper\n[dochtml]     build_many(build_ref_doc, L)\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 260, in build_many\n[dochtml]     results.append(target(arg))\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 71, in build_ref_doc\n[dochtml]     getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 720, in _wrapper\n[dochtml]     getattr(DocBuilder, build_type)(self, *args, **kwds)\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 105, in f\n[dochtml]     runsphinx()\n[dochtml]   File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py\", line 218, in runsphinx\n[dochtml]     raise exception\n[dochtml] OSError: [matrices ] docstring of sage.matrix.action.MatrixMatrixAction:24: WARNING: Unexpected indentation.\n[dochtml] \n[dochtml] [matrices ] WARNING: Error building the documentation.\n[dochtml] [matrices ] Traceback (most recent call last):\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/runpy.py\", line 174, in _run_module_as_main\n[dochtml] [matrices ] \"__main__\", fname, loader, pkg_name)\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/runpy.py\", line 72, in _run_code\n[dochtml] [matrices ] exec code in run_globals\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml] [matrices ] main()\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1675, in main\n[dochtml] [matrices ] builder()\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 310, in _wrapper\n[dochtml] [matrices ] getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 505, in _wrapper\n[dochtml] [matrices ] build_many(build_ref_doc, L)\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 260, in build_many\n[dochtml] [matrices ] results.append(target(arg))\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 71, in build_ref_doc\n[dochtml] [matrices ] getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 720, in _wrapper\n[dochtml] [matrices ] getattr(DocBuilder, build_type)(self, *args, **kwds)\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 105, in f\n[dochtml] [matrices ] runsphinx()\n[dochtml] [matrices ] File \"/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py\", line 218, in runsphinx\n[dochtml] [matrices ] raise exception\n[dochtml] [matrices ] OSError: [matrices ] docstring of sage.matrix.action.MatrixMatrixAction:24: WARNING: Unexpected indentation.\n```",
    "created_at": "2017-12-14T23:19:27Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359977",
    "user": "https://github.com/videlec"
}
```

<a id='comment:64'></a>
found out

```
[dochtml] [matrices ] docstring of sage.matrix.action.MatrixMatrixAction:24: WARNING: Unexpected indentation.
[dochtml] [matrices ] docstring of sage.matrix.action.MatrixMatrixAction:25: WARNING: Block quote ends without a blank line; unexpected unindent.
[dochtml] [matrices ] /opt/sage/local/lib/python2.7/site-packages/sage/matrix/special.py:docstring of sage.matrix.special:48: WARNING: undefined label: sage.combinat.matrices.hadamard_matrix (if the link has no caption the label must precede a section header)
[dochtml] [matrices ] /opt/sage/local/lib/python2.7/site-packages/sage/matrix/special.py:docstring of sage.matrix.special:49: WARNING: undefined label: sage.combinat.matrices.latin (if the link has no caption the label must precede a section header)
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/opt/sage/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
[dochtml]     "__main__", fname, loader, pkg_name)
[dochtml]   File "/opt/sage/local/lib/python2.7/runpy.py", line 72, in _run_code
[dochtml]     exec code in run_globals
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1675, in main
[dochtml]     builder()
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 310, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 505, in _wrapper
[dochtml]     build_many(build_ref_doc, L)
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 260, in build_many
[dochtml]     results.append(target(arg))
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 71, in build_ref_doc
[dochtml]     getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 720, in _wrapper
[dochtml]     getattr(DocBuilder, build_type)(self, *args, **kwds)
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 105, in f
[dochtml]     runsphinx()
[dochtml]   File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py", line 218, in runsphinx
[dochtml]     raise exception
[dochtml] OSError: [matrices ] docstring of sage.matrix.action.MatrixMatrixAction:24: WARNING: Unexpected indentation.
[dochtml] 
[dochtml] [matrices ] WARNING: Error building the documentation.
[dochtml] [matrices ] Traceback (most recent call last):
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
[dochtml] [matrices ] "__main__", fname, loader, pkg_name)
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/runpy.py", line 72, in _run_code
[dochtml] [matrices ] exec code in run_globals
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml] [matrices ] main()
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1675, in main
[dochtml] [matrices ] builder()
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 310, in _wrapper
[dochtml] [matrices ] getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 505, in _wrapper
[dochtml] [matrices ] build_many(build_ref_doc, L)
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 260, in build_many
[dochtml] [matrices ] results.append(target(arg))
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 71, in build_ref_doc
[dochtml] [matrices ] getattr(ReferenceSubBuilder(doc, lang), format)(*args, **kwds)
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 720, in _wrapper
[dochtml] [matrices ] getattr(DocBuilder, build_type)(self, *args, **kwds)
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 105, in f
[dochtml] [matrices ] runsphinx()
[dochtml] [matrices ] File "/opt/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py", line 218, in runsphinx
[dochtml] [matrices ] raise exception
[dochtml] [matrices ] OSError: [matrices ] docstring of sage.matrix.action.MatrixMatrixAction:24: WARNING: Unexpected indentation.
```



---

archive/issue_events_210829.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-14T23:19:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210829"
}
```



---

archive/issue_events_210830.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-14T23:19:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210830"
}
```



---

archive/issue_comments_359978.json:
```json
{
    "body": "**Changing commit** from \"[6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888](https://github.com/sagemath/sagetrac-mirror/commit/6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888)\" to \"[018226b9ecafdc082a4eb8289269af85b2908d3b](https://github.com/sagemath/sagetrac-mirror/commit/018226b9ecafdc082a4eb8289269af85b2908d3b)\".",
    "created_at": "2017-12-14T23:47:15Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888](https://github.com/sagemath/sagetrac-mirror/commit/6bff8c84a2cf7013f1bbc1b1a1cf737454a6a888)" to "[018226b9ecafdc082a4eb8289269af85b2908d3b](https://github.com/sagemath/sagetrac-mirror/commit/018226b9ecafdc082a4eb8289269af85b2908d3b)".



---

archive/issue_comments_359979.json:
```json
{
    "body": "<a id='comment:65'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/018226b9ecafdc082a4eb8289269af85b2908d3b\">018226b</a></td><td><code>23706: separate the NOTE and TESTS blocks</code></td></tr></table>\n",
    "created_at": "2017-12-14T23:47:15Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359979",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/018226b9ecafdc082a4eb8289269af85b2908d3b">018226b</a></td><td><code>23706: separate the NOTE and TESTS blocks</code></td></tr></table>




---

archive/issue_comments_359980.json:
```json
{
    "body": "<a id='comment:66'></a>\nI don't understand why, but sphinx was in trouble with `NOTE` and `TESTS` being in the same documentation string.",
    "created_at": "2017-12-14T23:48:25Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359980",
    "user": "https://github.com/videlec"
}
```

<a id='comment:66'></a>
I don't understand why, but sphinx was in trouble with `NOTE` and `TESTS` being in the same documentation string.



---

archive/issue_events_210831.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-14T23:48:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210831"
}
```



---

archive/issue_events_210832.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-12-14T23:48:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210832"
}
```



---

archive/issue_comments_359981.json:
```json
{
    "body": "<a id='comment:67'></a>\nIt may not be Sphinx but our custom handling of the `TESTS` block (at least, IIRC we do something special there in order to hide the block).",
    "created_at": "2017-12-15T04:50:48Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359981",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:67'></a>
It may not be Sphinx but our custom handling of the `TESTS` block (at least, IIRC we do something special there in order to hide the block).



---

archive/issue_events_210833.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-15T04:59:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210833"
}
```



---

archive/issue_events_210834.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-12-15T04:59:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210834"
}
```



---

archive/issue_comments_359982.json:
```json
{
    "body": "<a id='comment:68'></a>\nAnyways, the workaround is fine with me and there is a green patchbot. Back to positive review.",
    "created_at": "2017-12-15T04:59:29Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359982",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:68'></a>
Anyways, the workaround is fine with me and there is a green patchbot. Back to positive review.



---

archive/issue_comments_359983.json:
```json
{
    "body": "<a id='comment:69'></a>\nthanks Travis.",
    "created_at": "2017-12-15T14:12:29Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359983",
    "user": "https://github.com/videlec"
}
```

<a id='comment:69'></a>
thanks Travis.



---

archive/issue_events_210835.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-18T19:39:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210835"
}
```



---

archive/issue_events_210836.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e70eba2aa24041aafbe477997f46ba5fd92bf275",
    "created_at": "2017-12-18T19:39:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23706#event-210836"
}
```



---

archive/issue_comments_359984.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23706)\" to \"[018226b9ecafdc082a4eb8289269af85b2908d3b](https://github.com/sagemath/sagetrac-mirror/commit/018226b9ecafdc082a4eb8289269af85b2908d3b)\".",
    "created_at": "2017-12-18T19:39:30Z",
    "issue": "https://github.com/sagemath/sage/issues/23706",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23706#issuecomment-359984",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vdelecroix/23706](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/23706)" to "[018226b9ecafdc082a4eb8289269af85b2908d3b](https://github.com/sagemath/sagetrac-mirror/commit/018226b9ecafdc082a4eb8289269af85b2908d3b)".
