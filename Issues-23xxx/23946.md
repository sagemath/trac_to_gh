# Issue 23946: Exhaust over Weil polynomials

archive/issues_023709.json:
```json
{
    "assignees": [],
    "body": "I have reasonably stable code (mostly in C, depending on FLINT) for exhausting over Weil polynomials:\n\nhttps://github.com/kedlaya/root-unitary\n\nThe goal of this ticket is to incorporate this code into Sage in some fashion.\n\nDepends on #24016\n\nCC:  @roed314\n\nComponent: **number theory**\n\nKeywords: **Weil polynomials, sd91**\n\nAuthor: **Kiran Kedlaya**\n\nBranch/Commit: **[`e02ae3c`](https://github.com/sagemath/sagetrac-mirror/commit/e02ae3cfc9bd4da34ee8f3b3b9a9b94e7666fa6f)**\n\nReviewer: **David Roe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23946_\n\n",
    "closed_at": "2020-01-05T15:47:17Z",
    "created_at": "2017-09-30T20:23:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Exhaust over Weil polynomials",
    "type": "issue",
    "updated_at": "2020-01-05T15:47:17Z",
    "url": "https://github.com/sagemath/sage/issues/23946",
    "user": "https://github.com/kedlaya"
}
```
I have reasonably stable code (mostly in C, depending on FLINT) for exhausting over Weil polynomials:

https://github.com/kedlaya/root-unitary

The goal of this ticket is to incorporate this code into Sage in some fashion.

Depends on #24016

CC:  @roed314

Component: **number theory**

Keywords: **Weil polynomials, sd91**

Author: **Kiran Kedlaya**

Branch/Commit: **[`e02ae3c`](https://github.com/sagemath/sagetrac-mirror/commit/e02ae3cfc9bd4da34ee8f3b3b9a9b94e7666fa6f)**

Reviewer: **David Roe**

_Issue created by migration from https://trac.sagemath.org/ticket/23946_





---

archive/issue_events_329633.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2017-09-30T20:23:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329633"
}
```



---

archive/issue_events_329634.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2017-09-30T20:23:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329634"
}
```



---

archive/issue_events_329635.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2017-09-30T20:23:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329635"
}
```



---

archive/issue_events_329636.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2017-09-30T20:23:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329636"
}
```



---

archive/issue_comments_361382.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nStatus update: I've pushed many recent changes to the branch `repackage_for_sage` of the Github repo. In particular, I have been working to make the call syntax much more transparent; for instance, to compute the Weil polynomials corresponding to abelian varieties of dimension `g` over the finite field of order `q`, one can now use standard Python iterator syntax:\n\n```\nsage: wp = WeilPolynomials(2*g, q)\nsage: for i in wp:\n...\n```\nSome to-do items: check that all my old test scripts still work; write more tests; add more documentation; add more input sanitization.\n\nIn the meantime, I'd appreciate some feedback about where this might belong in Sage.",
    "created_at": "2017-10-12T05:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361382",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:1" align="right">comment:1</div>

Status update: I've pushed many recent changes to the branch `repackage_for_sage` of the Github repo. In particular, I have been working to make the call syntax much more transparent; for instance, to compute the Weil polynomials corresponding to abelian varieties of dimension `g` over the finite field of order `q`, one can now use standard Python iterator syntax:

```
sage: wp = WeilPolynomials(2*g, q)
sage: for i in wp:
...
```
Some to-do items: check that all my old test scripts still work; write more tests; add more documentation; add more input sanitization.

In the meantime, I'd appreciate some feedback about where this might belong in Sage.



---

archive/issue_comments_361383.json:
```json
{
    "body": "Dependencies: **#24016**",
    "created_at": "2017-10-12T05:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361383",
    "user": "https://github.com/kedlaya"
}
```

Dependencies: **#24016**



---

archive/issue_comments_361384.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nReplying to [@kedlaya](#comment%3A1):\n> In the meantime, I'd appreciate some feedback about where this might belong in Sage.\n\nFirst of all, your github repo contains both C code and `.sage` files. Are the `.sage` files considered to be part of your package or are they really only use cases/examples/tests/documentation?\n\n\nThere are two possibilities, each with its advantages and disadvantages:\n\n(A) Make it an external (presumably optional) package and interface it from Sage.\n\n(B) Make it actually a part of Sage itself.\n\nAdvantages of (A) are that you keep control of the package: you can easily change the package at will (with (B) every change would need to go through the Sage Trac) and you don't need to care about Sage coding standards. Also important: with (A) your package could be used without Sage. With (B), there might be more initial work needed to get it into Sage but then it might be less work to maintain.",
    "created_at": "2017-10-12T12:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361384",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

Replying to [@kedlaya](#comment%3A1):
> In the meantime, I'd appreciate some feedback about where this might belong in Sage.

First of all, your github repo contains both C code and `.sage` files. Are the `.sage` files considered to be part of your package or are they really only use cases/examples/tests/documentation?


There are two possibilities, each with its advantages and disadvantages:

(A) Make it an external (presumably optional) package and interface it from Sage.

(B) Make it actually a part of Sage itself.

Advantages of (A) are that you keep control of the package: you can easily change the package at will (with (B) every change would need to go through the Sage Trac) and you don't need to care about Sage coding standards. Also important: with (A) your package could be used without Sage. With (B), there might be more initial work needed to get it into Sage but then it might be less work to maintain.



---

archive/issue_comments_361385.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI just merged a pull request in from another branch, which has the effect of significantly reconfiguring the file structure. In particular, there are no longer any `.sage` files in the main directory; the ones that exist are all in subdirectories and are indeed examples/tests.\n\nThe main code base now consists of two `.c` files (and their `.h` headers) and one `.pyx` file. I still don't have any sort of independent build structure set up; moreover, the `.pyx` file is more than just a simple wrapper, it is where the parallelism is currently implemented. So at the moment there is really no way to use the code without Sage, and I don't particularly intend to work on making that possible. (Exception: if someone wants to use the code from some other platform like Julia, I'd be willing to cooperate with that.)",
    "created_at": "2017-10-18T04:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361385",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:3" align="right">comment:3</div>

I just merged a pull request in from another branch, which has the effect of significantly reconfiguring the file structure. In particular, there are no longer any `.sage` files in the main directory; the ones that exist are all in subdirectories and are indeed examples/tests.

The main code base now consists of two `.c` files (and their `.h` headers) and one `.pyx` file. I still don't have any sort of independent build structure set up; moreover, the `.pyx` file is more than just a simple wrapper, it is where the parallelism is currently implemented. So at the moment there is really no way to use the code without Sage, and I don't particularly intend to work on making that possible. (Exception: if someone wants to use the code from some other platform like Julia, I'd be willing to cooperate with that.)



---

archive/issue_comments_361386.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI think that the code is stable enough that we should just add it to Sage.  Maybe create a folder `sage/rings/polynomial/weil/` and put them in there?",
    "created_at": "2017-10-18T21:44:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361386",
    "user": "https://github.com/roed314"
}
```

<div id="comment:4" align="right">comment:4</div>

I think that the code is stable enough that we should just add it to Sage.  Maybe create a folder `sage/rings/polynomial/weil/` and put them in there?



---

archive/issue_comments_361387.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@roed314](#comment%3A4):\n> I think that the code is stable enough that we should just add it to Sage.  Maybe create a folder `sage/rings/polynomial/weil/` and put them in there?\n\nDo you mean put everything in there? Or put the Cython in `sage/rings/polynomials/weil_polynomials.pyx` and the C files in `sage/rings/polynomial/weil`?\n\nAlso, if someone can point me to some guidance about a module to the Sage library (e.g., how to format `__init__.py` and `all.py` and the like to make the new code discoverable), that would be helpful.",
    "created_at": "2017-10-23T17:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361387",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@roed314](#comment%3A4):
> I think that the code is stable enough that we should just add it to Sage.  Maybe create a folder `sage/rings/polynomial/weil/` and put them in there?

Do you mean put everything in there? Or put the Cython in `sage/rings/polynomials/weil_polynomials.pyx` and the C files in `sage/rings/polynomial/weil`?

Also, if someone can point me to some guidance about a module to the Sage library (e.g., how to format `__init__.py` and `all.py` and the like to make the new code discoverable), that would be helpful.



---

archive/issue_comments_361388.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kedlaya](#comment%3A5):\n> Replying to [@roed314](#comment%3A4):\n> > I think that the code is stable enough that we should just add it to Sage.  Maybe create a folder `sage/rings/polynomial/weil/` and put them in there?\n\n> \n> Do you mean put everything in there? Or put the Cython in `sage/rings/polynomials/weil_polynomials.pyx` and the C files in `sage/rings/polynomial/weil`?\n\nI meant putting everything in there.  We should also talk about the best way for a user to access these methods; perhaps a method `weil_polynomials` on `ZZ[x]` and `QQ[x]` that returns your iterator?\n\n> Also, if someone can point me to some guidance about a module to the Sage library (e.g., how to format `__init__.py` and `all.py` and the like to make the new code discoverable), that would be helpful.\n\nSee http://doc.sagemath.org/html/en/developer/coding_basics.html#files-and-directory-structure for some details.  You'll also need to add lines to `src/module_list.py` for each extension module.",
    "created_at": "2017-10-25T16:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361388",
    "user": "https://github.com/roed314"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kedlaya](#comment%3A5):
> Replying to [@roed314](#comment%3A4):
> > I think that the code is stable enough that we should just add it to Sage.  Maybe create a folder `sage/rings/polynomial/weil/` and put them in there?

> 
> Do you mean put everything in there? Or put the Cython in `sage/rings/polynomials/weil_polynomials.pyx` and the C files in `sage/rings/polynomial/weil`?

I meant putting everything in there.  We should also talk about the best way for a user to access these methods; perhaps a method `weil_polynomials` on `ZZ[x]` and `QQ[x]` that returns your iterator?

> Also, if someone can point me to some guidance about a module to the Sage library (e.g., how to format `__init__.py` and `all.py` and the like to make the new code discoverable), that would be helpful.

See http://doc.sagemath.org/html/en/developer/coding_basics.html#files-and-directory-structure for some details.  You'll also need to add lines to `src/module_list.py` for each extension module.



---

archive/issue_comments_361389.json:
```json
{
    "body": "Branch: **[u/kedlaya/exhaust_over_weil_polynomials](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/exhaust_over_weil_polynomials)**",
    "created_at": "2017-11-07T05:18:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361389",
    "user": "https://github.com/kedlaya"
}
```

Branch: **[u/kedlaya/exhaust_over_weil_polynomials](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/exhaust_over_weil_polynomials)**



---

archive/issue_comments_361390.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nPushed some partial progress, but this doesn't compile yet.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da3d4834070e9cd38206dd0f467c98aa5c483376\"><code>da3d483</code></a></td><td><code>Add directory src/sage/rings/polynomial/weil/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d12b0ea0aa53cbf558e6ac873414778dd12796a4\"><code>d12b0ea</code></a></td><td><code>Update module list, all.py</code></td></tr></table>\n",
    "created_at": "2017-11-07T05:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361390",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:8" align="right">comment:8</div>

Pushed some partial progress, but this doesn't compile yet.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da3d4834070e9cd38206dd0f467c98aa5c483376"><code>da3d483</code></a></td><td><code>Add directory src/sage/rings/polynomial/weil/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d12b0ea0aa53cbf558e6ac873414778dd12796a4"><code>d12b0ea</code></a></td><td><code>Update module list, all.py</code></td></tr></table>




---

archive/issue_comments_361391.json:
```json
{
    "body": "Commit: **[`d12b0ea`](https://github.com/sagemath/sagetrac-mirror/commit/d12b0ea0aa53cbf558e6ac873414778dd12796a4)**",
    "created_at": "2017-11-07T05:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361391",
    "user": "https://github.com/kedlaya"
}
```

Commit: **[`d12b0ea`](https://github.com/sagemath/sagetrac-mirror/commit/d12b0ea0aa53cbf558e6ac873414778dd12796a4)**



---

archive/issue_comments_361392.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da3d4834070e9cd38206dd0f467c98aa5c483376\"><code>da3d483</code></a></td><td><code>Add directory src/sage/rings/polynomial/weil/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d12b0ea0aa53cbf558e6ac873414778dd12796a4\"><code>d12b0ea</code></a></td><td><code>Update module list, all.py</code></td></tr></table>\n",
    "created_at": "2019-12-14T05:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361392",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:9"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da3d4834070e9cd38206dd0f467c98aa5c483376"><code>da3d483</code></a></td><td><code>Add directory src/sage/rings/polynomial/weil/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d12b0ea0aa53cbf558e6ac873414778dd12796a4"><code>d12b0ea</code></a></td><td><code>Update module list, all.py</code></td></tr></table>




---

archive/issue_comments_361393.json:
```json
{
    "body": "Changed branch from **[u/kedlaya/exhaust_over_weil_polynomials](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/exhaust_over_weil_polynomials)** to none",
    "created_at": "2019-12-14T05:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361393",
    "user": "https://github.com/kedlaya"
}
```

Changed branch from **[u/kedlaya/exhaust_over_weil_polynomials](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/exhaust_over_weil_polynomials)** to none



---

archive/issue_comments_361394.json:
```json
{
    "body": "Changed commit from **[`d12b0ea`](https://github.com/sagemath/sagetrac-mirror/commit/d12b0ea0aa53cbf558e6ac873414778dd12796a4)** to none",
    "created_at": "2019-12-14T05:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361394",
    "user": "https://github.com/kedlaya"
}
```

Changed commit from **[`d12b0ea`](https://github.com/sagemath/sagetrac-mirror/commit/d12b0ea0aa53cbf558e6ac873414778dd12796a4)** to none



---

archive/issue_comments_361395.json:
```json
{
    "body": "Branch: **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)**",
    "created_at": "2019-12-14T05:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361395",
    "user": "https://github.com/kedlaya"
}
```

Branch: **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)**



---

archive/issue_comments_361396.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOK, here is a new branch which seems to compile. Still a lot of polishing to be done, but it should be possible to at least play with the code now.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bfaf04113158c27f171fc302fc74852a2d41560\"><code>2bfaf04</code></a></td><td><code>Initial commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7e1e2aba0711734b95318254822eee0a6ba5b09\"><code>d7e1e2a</code></a></td><td><code>Succesful compilation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a62e66aa58ccd7e82740078ce2c71d62a10ea52\"><code>2a62e66</code></a></td><td><code>Bug fix from upstream (incorrect handling of leading coeffs)</code></td></tr></table>\n",
    "created_at": "2019-12-14T05:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361396",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:12" align="right">comment:12</div>

OK, here is a new branch which seems to compile. Still a lot of polishing to be done, but it should be possible to at least play with the code now.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bfaf04113158c27f171fc302fc74852a2d41560"><code>2bfaf04</code></a></td><td><code>Initial commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7e1e2aba0711734b95318254822eee0a6ba5b09"><code>d7e1e2a</code></a></td><td><code>Succesful compilation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a62e66aa58ccd7e82740078ce2c71d62a10ea52"><code>2a62e66</code></a></td><td><code>Bug fix from upstream (incorrect handling of leading coeffs)</code></td></tr></table>




---

archive/issue_comments_361397.json:
```json
{
    "body": "Commit: **[`2a62e66`](https://github.com/sagemath/sagetrac-mirror/commit/2a62e66aa58ccd7e82740078ce2c71d62a10ea52)**",
    "created_at": "2019-12-14T05:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361397",
    "user": "https://github.com/kedlaya"
}
```

Commit: **[`2a62e66`](https://github.com/sagemath/sagetrac-mirror/commit/2a62e66aa58ccd7e82740078ce2c71d62a10ea52)**



---

archive/issue_comments_361398.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\ndoes not work for me:\n\n```\nsage: from sage.rings.polynomial.weil.weil_polynomials import *\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-1-5b4f8184ba57> in <module>()\n----> 1 from sage.rings.polynomial.weil.weil_polynomials import *\n\nImportError: /home/chapoton/sage3/local/lib/python3.7/site-packages/sage/rings/polynomial/weil/weil_polynomials.cpython-37m-x86_64-linux-gnu.so: undefined symbol: GOMP_loop_nonmonotonic_dynamic_start\n```\n\nand there are missing empty lines in the doc after lines ending with `::`",
    "created_at": "2019-12-14T20:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361398",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

does not work for me:

```
sage: from sage.rings.polynomial.weil.weil_polynomials import *
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-1-5b4f8184ba57> in <module>()
----> 1 from sage.rings.polynomial.weil.weil_polynomials import *

ImportError: /home/chapoton/sage3/local/lib/python3.7/site-packages/sage/rings/polynomial/weil/weil_polynomials.cpython-37m-x86_64-linux-gnu.so: undefined symbol: GOMP_loop_nonmonotonic_dynamic_start
```

and there are missing empty lines in the doc after lines ending with `::`



---

archive/issue_comments_361399.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThat is the code looking for OpenMP (which is optional, since we don't ship it with Sage). Does it help if you take out the compiler directive in line 2 of `sage/rings/polynomial/weil/weil_polynomials.pyx`?\n\nThe docstrings need a fair bit of work to get to 100% doctest coverage, let alone proper formatting. I can of course work on that independently.",
    "created_at": "2019-12-14T21:02:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361399",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:14" align="right">comment:14</div>

That is the code looking for OpenMP (which is optional, since we don't ship it with Sage). Does it help if you take out the compiler directive in line 2 of `sage/rings/polynomial/weil/weil_polynomials.pyx`?

The docstrings need a fair bit of work to get to 100% doctest coverage, let alone proper formatting. I can of course work on that independently.



---

archive/issue_events_329637.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2019-12-14T21:02:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329637"
}
```



---

archive/issue_events_329638.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2019-12-14T21:02:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329638"
}
```



---

archive/issue_comments_361400.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nyes, removing the distutils directive make it work",
    "created_at": "2019-12-14T21:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361400",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

yes, removing the distutils directive make it work



---

archive/issue_comments_361401.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd2f537559a8c43af7f5b622f5275c3253caab80\"><code>cd2f537</code></a></td><td><code>Eliminate compiler warnings about return from a void function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1438c238cc5ab5aca7b0f558ff0261f7112ca9ec\"><code>1438c23</code></a></td><td><code>Suppress OpenMP, add doctests</code></td></tr></table>\n",
    "created_at": "2019-12-14T22:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361401",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd2f537559a8c43af7f5b622f5275c3253caab80"><code>cd2f537</code></a></td><td><code>Eliminate compiler warnings about return from a void function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1438c238cc5ab5aca7b0f558ff0261f7112ca9ec"><code>1438c23</code></a></td><td><code>Suppress OpenMP, add doctests</code></td></tr></table>




---

archive/issue_comments_361402.json:
```json
{
    "body": "Changed commit from **[`2a62e66`](https://github.com/sagemath/sagetrac-mirror/commit/2a62e66aa58ccd7e82740078ce2c71d62a10ea52)** to **[`1438c23`](https://github.com/sagemath/sagetrac-mirror/commit/1438c238cc5ab5aca7b0f558ff0261f7112ca9ec)**",
    "created_at": "2019-12-14T22:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361402",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2a62e66`](https://github.com/sagemath/sagetrac-mirror/commit/2a62e66aa58ccd7e82740078ce2c71d62a10ea52)** to **[`1438c23`](https://github.com/sagemath/sagetrac-mirror/commit/1438c238cc5ab5aca7b0f558ff0261f7112ca9ec)**



---

archive/issue_comments_361403.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIn addition to suppressing OpenMP, I also added doctests to get to 100% coverage.\n\nCc'ing roed, who is somewhat familiar to the code.",
    "created_at": "2019-12-14T22:52:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361403",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:17" align="right">comment:17</div>

In addition to suppressing OpenMP, I also added doctests to get to 100% coverage.

Cc'ing roed, who is somewhat familiar to the code.



---

archive/issue_comments_361404.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nplease remove the \"next\" method.\n\nand in the test of `__next__`, use next(it) to call the iterator.",
    "created_at": "2019-12-15T12:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361404",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

please remove the "next" method.

and in the test of `__next__`, use next(it) to call the iterator.



---

archive/issue_comments_361405.json:
```json
{
    "body": "Changed commit from **[`1438c23`](https://github.com/sagemath/sagetrac-mirror/commit/1438c238cc5ab5aca7b0f558ff0261f7112ca9ec)** to **[`7516836`](https://github.com/sagemath/sagetrac-mirror/commit/7516836408314c97f176d62d677b7d2d924e861b)**",
    "created_at": "2019-12-15T17:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361405",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1438c23`](https://github.com/sagemath/sagetrac-mirror/commit/1438c238cc5ab5aca7b0f558ff0261f7112ca9ec)** to **[`7516836`](https://github.com/sagemath/sagetrac-mirror/commit/7516836408314c97f176d62d677b7d2d924e861b)**



---

archive/issue_comments_361406.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7516836408314c97f176d62d677b7d2d924e861b\"><code>7516836</code></a></td><td><code>Removed \"next\" method</code></td></tr></table>\n",
    "created_at": "2019-12-15T17:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361406",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7516836408314c97f176d62d677b7d2d924e861b"><code>7516836</code></a></td><td><code>Removed "next" method</code></td></tr></table>




---

archive/issue_comments_361407.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a6feb9edc7b3621738f1dac42ea0dbeea7282c3\"><code>1a6feb9</code></a></td><td><code>Merge edits from Edgar Costa</code></td></tr></table>\n",
    "created_at": "2019-12-15T22:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361407",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a6feb9edc7b3621738f1dac42ea0dbeea7282c3"><code>1a6feb9</code></a></td><td><code>Merge edits from Edgar Costa</code></td></tr></table>




---

archive/issue_comments_361408.json:
```json
{
    "body": "Changed commit from **[`7516836`](https://github.com/sagemath/sagetrac-mirror/commit/7516836408314c97f176d62d677b7d2d924e861b)** to **[`1a6feb9`](https://github.com/sagemath/sagetrac-mirror/commit/1a6feb9edc7b3621738f1dac42ea0dbeea7282c3)**",
    "created_at": "2019-12-15T22:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361408",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7516836`](https://github.com/sagemath/sagetrac-mirror/commit/7516836408314c97f176d62d677b7d2d924e861b)** to **[`1a6feb9`](https://github.com/sagemath/sagetrac-mirror/commit/1a6feb9edc7b3621738f1dac42ea0dbeea7282c3)**



---

archive/issue_comments_361409.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nneeds review ?",
    "created_at": "2019-12-17T19:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361409",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

needs review ?



---

archive/issue_comments_361410.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nStanding by for some feedback from roed first.",
    "created_at": "2019-12-17T20:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361410",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:22" align="right">comment:22</div>

Standing by for some feedback from roed first.



---

archive/issue_comments_361411.json:
```json
{
    "body": "Changed branch from **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)** to **[u/roed/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/weilpoly_search)**",
    "created_at": "2019-12-18T19:01:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361411",
    "user": "https://github.com/roed314"
}
```

Changed branch from **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)** to **[u/roed/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/weilpoly_search)**



---

archive/issue_comments_361412.json:
```json
{
    "body": "Changed commit from **[`1a6feb9`](https://github.com/sagemath/sagetrac-mirror/commit/1a6feb9edc7b3621738f1dac42ea0dbeea7282c3)** to **[`c1be1fb`](https://github.com/sagemath/sagetrac-mirror/commit/c1be1fbff4f97dcd107be3e92c6e3b676afdbf00)**",
    "created_at": "2019-12-18T19:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361412",
    "user": "https://github.com/roed314"
}
```

Changed commit from **[`1a6feb9`](https://github.com/sagemath/sagetrac-mirror/commit/1a6feb9edc7b3621738f1dac42ea0dbeea7282c3)** to **[`c1be1fb`](https://github.com/sagemath/sagetrac-mirror/commit/c1be1fbff4f97dcd107be3e92c6e3b676afdbf00)**



---

archive/issue_comments_361413.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAbout to board a flight, and I want to make a few more changes, but can you take a look at the documentation I added and make sure it looks right?  It would also be nice to see some examples illustrating the different inputs available to the iterator.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1be1fbff4f97dcd107be3e92c6e3b676afdbf00\"><code>c1be1fb</code></a></td><td><code>Some Weil polynomial changes</code></td></tr></table>\n",
    "created_at": "2019-12-18T19:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361413",
    "user": "https://github.com/roed314"
}
```

<div id="comment:24" align="right">comment:24</div>

About to board a flight, and I want to make a few more changes, but can you take a look at the documentation I added and make sure it looks right?  It would also be nice to see some examples illustrating the different inputs available to the iterator.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1be1fbff4f97dcd107be3e92c6e3b676afdbf00"><code>c1be1fb</code></a></td><td><code>Some Weil polynomial changes</code></td></tr></table>




---

archive/issue_comments_361414.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d88c654e80d164044cfb3b946f2475ef6dd1ece2\"><code>d88c654</code></a></td><td><code>Fix some raise/return problems, add weil_polynomials method for polynomial rings, add some documentation</code></td></tr></table>\n",
    "created_at": "2019-12-19T00:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361414",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d88c654e80d164044cfb3b946f2475ef6dd1ece2"><code>d88c654</code></a></td><td><code>Fix some raise/return problems, add weil_polynomials method for polynomial rings, add some documentation</code></td></tr></table>




---

archive/issue_comments_361415.json:
```json
{
    "body": "Changed commit from **[`c1be1fb`](https://github.com/sagemath/sagetrac-mirror/commit/c1be1fbff4f97dcd107be3e92c6e3b676afdbf00)** to **[`d88c654`](https://github.com/sagemath/sagetrac-mirror/commit/d88c654e80d164044cfb3b946f2475ef6dd1ece2)**",
    "created_at": "2019-12-19T00:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361415",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c1be1fb`](https://github.com/sagemath/sagetrac-mirror/commit/c1be1fbff4f97dcd107be3e92c6e3b676afdbf00)** to **[`d88c654`](https://github.com/sagemath/sagetrac-mirror/commit/d88c654e80d164044cfb3b946f2475ef6dd1ece2)**



---

archive/issue_comments_361416.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAlright, I made the other changes I wanted to make (most notably adding a method to polynomial rings).  Here are some documentation questions that I'd like to see addressed, but I think this ticket is basically ready to go.\n\n* I don't understand how specifying congruence constraints on leading coefficients works.  I tried the following:\n\n```\nsage: R.<T> = ZZ[]\nsage: R.weil_polynomials(4,2,lead=((1,0),(0,2)))\n[T^4 + 4, T^4 - T^2 + 4, T^4 - 2*T^2 + 4, T^4 - 3*T^2 + 4, T^4 - 4*T^2 + 4]\n```\nI would expect this to give polynomials where the coefficient of `T^3` was even, but I'm not sure what I'm getting.  Is it ignoring the 2 and giving me those where the coefficient of `T^3` is exactly 0?  Kiran, can you give me an idea of how this functionality is supposed to work?\n* I don't quite understand what `node_limit` does.  Raises a `RuntimeError` if the number of terminal nodes ever exceeds the given value?\n* Similarly, I guessed that `squarefree` omits polynomials that are not squarefree.\n\nOverall, can you check/correct the changes I made?  Also, if there's anything else useful to be said about how to recompile with OpenMP support, feel free to augment the documentation that I added.",
    "created_at": "2019-12-19T01:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361416",
    "user": "https://github.com/roed314"
}
```

<div id="comment:26" align="right">comment:26</div>

Alright, I made the other changes I wanted to make (most notably adding a method to polynomial rings).  Here are some documentation questions that I'd like to see addressed, but I think this ticket is basically ready to go.

* I don't understand how specifying congruence constraints on leading coefficients works.  I tried the following:

```
sage: R.<T> = ZZ[]
sage: R.weil_polynomials(4,2,lead=((1,0),(0,2)))
[T^4 + 4, T^4 - T^2 + 4, T^4 - 2*T^2 + 4, T^4 - 3*T^2 + 4, T^4 - 4*T^2 + 4]
```
I would expect this to give polynomials where the coefficient of `T^3` was even, but I'm not sure what I'm getting.  Is it ignoring the 2 and giving me those where the coefficient of `T^3` is exactly 0?  Kiran, can you give me an idea of how this functionality is supposed to work?
* I don't quite understand what `node_limit` does.  Raises a `RuntimeError` if the number of terminal nodes ever exceeds the given value?
* Similarly, I guessed that `squarefree` omits polynomials that are not squarefree.

Overall, can you check/correct the changes I made?  Also, if there's anything else useful to be said about how to recompile with OpenMP support, feel free to augment the documentation that I added.



---

archive/issue_comments_361417.json:
```json
{
    "body": "Changed branch from **[u/roed/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/weilpoly_search)** to **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)**",
    "created_at": "2019-12-19T02:03:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361417",
    "user": "https://github.com/kedlaya"
}
```

Changed branch from **[u/roed/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/weilpoly_search)** to **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)**



---

archive/issue_comments_361418.json:
```json
{
    "body": "Changed commit from **[`d88c654`](https://github.com/sagemath/sagetrac-mirror/commit/d88c654e80d164044cfb3b946f2475ef6dd1ece2)** to **[`0aaec04`](https://github.com/sagemath/sagetrac-mirror/commit/0aaec041320d09285a7d95171147d32f4304e850)**",
    "created_at": "2019-12-19T02:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361418",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d88c654`](https://github.com/sagemath/sagetrac-mirror/commit/d88c654e80d164044cfb3b946f2475ef6dd1ece2)** to **[`0aaec04`](https://github.com/sagemath/sagetrac-mirror/commit/0aaec041320d09285a7d95171147d32f4304e850)**



---

archive/issue_comments_361419.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0aaec041320d09285a7d95171147d32f4304e850\"><code>0aaec04</code></a></td><td><code>Updated some docstrings</code></td></tr></table>\n",
    "created_at": "2019-12-19T02:13:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361419",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0aaec041320d09285a7d95171147d32f4304e850"><code>0aaec04</code></a></td><td><code>Updated some docstrings</code></td></tr></table>




---

archive/issue_comments_361420.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f48bf4e43e3afd232f719a760fb877c97951853\"><code>6f48bf4</code></a></td><td><code>Fix squarefree search, add doctest</code></td></tr></table>\n",
    "created_at": "2019-12-19T03:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361420",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f48bf4e43e3afd232f719a760fb877c97951853"><code>6f48bf4</code></a></td><td><code>Fix squarefree search, add doctest</code></td></tr></table>




---

archive/issue_comments_361421.json:
```json
{
    "body": "Changed commit from **[`0aaec04`](https://github.com/sagemath/sagetrac-mirror/commit/0aaec041320d09285a7d95171147d32f4304e850)** to **[`6f48bf4`](https://github.com/sagemath/sagetrac-mirror/commit/6f48bf4e43e3afd232f719a760fb877c97951853)**",
    "created_at": "2019-12-19T03:18:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361421",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0aaec04`](https://github.com/sagemath/sagetrac-mirror/commit/0aaec041320d09285a7d95171147d32f4304e850)** to **[`6f48bf4`](https://github.com/sagemath/sagetrac-mirror/commit/6f48bf4e43e3afd232f719a760fb877c97951853)**



---

archive/issue_comments_361422.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@roed314](#comment%3A26):\n> Alright, I made the other changes I wanted to make (most notably adding a method to polynomial rings).  Here are some documentation questions that I'd like to see addressed, but I think this ticket is basically ready to go.\n> \n\nI made a few tweaks in the latest commits. I really like having a method for polynomial rings; I'm guessing most users will only use the code this way. The iterator is really only needed for power use cases.\n\nSince there is already an `is_weil_polynomial` method for polynomial elements, I edited the docstring for that method to point to `weil_polynomials` and vice versa.\n\n> * I don't understand how specifying congruence constraints on leading coefficients works.  I tried the following:\n> \n> ```\n> sage: R.<T> = ZZ[]\n> sage: R.weil_polynomials(4,2,lead=((1,0),(0,2)))\n> [T^4 + 4, T^4 - T^2 + 4, T^4 - 2*T^2 + 4, T^4 - 3*T^2 + 4, T^4 - 4*T^2 + 4]\n> ```\n> I would expect this to give polynomials where the coefficient of `T^3` was even, but I'm not sure what I'm getting.  Is it ignoring the 2 and giving me those where the coefficient of `T^3` is exactly 0?  Kiran, can you give me an idea of how this functionality is supposed to work?\n\nYou just caught a bug in the C code which I have now fixed (here and upstream). I added a doctest documenting how this is supposed to work.\n\n> * I don't quite understand what `node_limit` does.  Raises a `RuntimeError` if the number of terminal nodes ever exceeds the given value?\n\nCorrect. It is there as a failsafe in case you don't want your code to run forever.\n\n> * Similarly, I guessed that `squarefree` omits polynomials that are not squarefree.\n> \n\nCorrect, except that there was a (long-known) bug in that too. I fixed that and added a doctest.\n\n> Overall, can you check/correct the changes I made?  Also, if there's anything else useful to be said about how to recompile with OpenMP support, feel free to augment the documentation that I added.\n\nOne issue is that on my system, I have to put the distutils lines at the top of the code when uncommenting them, which I think runs contrary to Sage conventions. I added a comment about this.\n\nSince it seems we are basically into the review phase anyway, let me go ahead and set state accordingly. I would be particularly open to suggestions for additional doctests; there are probably many use cases I haven't thought to test yet, and I'd like to make sure not to break those in future versions of the code.",
    "created_at": "2019-12-19T03:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361422",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@roed314](#comment%3A26):
> Alright, I made the other changes I wanted to make (most notably adding a method to polynomial rings).  Here are some documentation questions that I'd like to see addressed, but I think this ticket is basically ready to go.
> 

I made a few tweaks in the latest commits. I really like having a method for polynomial rings; I'm guessing most users will only use the code this way. The iterator is really only needed for power use cases.

Since there is already an `is_weil_polynomial` method for polynomial elements, I edited the docstring for that method to point to `weil_polynomials` and vice versa.

> * I don't understand how specifying congruence constraints on leading coefficients works.  I tried the following:
> 
> ```
> sage: R.<T> = ZZ[]
> sage: R.weil_polynomials(4,2,lead=((1,0),(0,2)))
> [T^4 + 4, T^4 - T^2 + 4, T^4 - 2*T^2 + 4, T^4 - 3*T^2 + 4, T^4 - 4*T^2 + 4]
> ```
> I would expect this to give polynomials where the coefficient of `T^3` was even, but I'm not sure what I'm getting.  Is it ignoring the 2 and giving me those where the coefficient of `T^3` is exactly 0?  Kiran, can you give me an idea of how this functionality is supposed to work?

You just caught a bug in the C code which I have now fixed (here and upstream). I added a doctest documenting how this is supposed to work.

> * I don't quite understand what `node_limit` does.  Raises a `RuntimeError` if the number of terminal nodes ever exceeds the given value?

Correct. It is there as a failsafe in case you don't want your code to run forever.

> * Similarly, I guessed that `squarefree` omits polynomials that are not squarefree.
> 

Correct, except that there was a (long-known) bug in that too. I fixed that and added a doctest.

> Overall, can you check/correct the changes I made?  Also, if there's anything else useful to be said about how to recompile with OpenMP support, feel free to augment the documentation that I added.

One issue is that on my system, I have to put the distutils lines at the top of the code when uncommenting them, which I think runs contrary to Sage conventions. I added a comment about this.

Since it seems we are basically into the review phase anyway, let me go ahead and set state accordingly. I would be particularly open to suggestions for additional doctests; there are probably many use cases I haven't thought to test yet, and I'd like to make sure not to break those in future versions of the code.



---

archive/issue_events_329639.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2019-12-19T03:27:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329639"
}
```



---

archive/issue_comments_361423.json:
```json
{
    "body": "Author: **Kiran Kedlaya**",
    "created_at": "2019-12-19T03:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361423",
    "user": "https://github.com/kedlaya"
}
```

Author: **Kiran Kedlaya**



---

archive/issue_comments_361424.json:
```json
{
    "body": "Changed branch from **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)** to **[u/roed/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/weilpoly_search)**",
    "created_at": "2019-12-19T08:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361424",
    "user": "https://github.com/roed314"
}
```

Changed branch from **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)** to **[u/roed/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/weilpoly_search)**



---

archive/issue_comments_361425.json:
```json
{
    "body": "Changed commit from **[`6f48bf4`](https://github.com/sagemath/sagetrac-mirror/commit/6f48bf4e43e3afd232f719a760fb877c97951853)** to **[`d8a813f`](https://github.com/sagemath/sagetrac-mirror/commit/d8a813f7df1d503ef41e16c28beb2f77907fe444)**",
    "created_at": "2019-12-19T09:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361425",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f48bf4`](https://github.com/sagemath/sagetrac-mirror/commit/6f48bf4e43e3afd232f719a760fb877c97951853)** to **[`d8a813f`](https://github.com/sagemath/sagetrac-mirror/commit/d8a813f7df1d503ef41e16c28beb2f77907fe444)**



---

archive/issue_comments_361426.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8a813f7df1d503ef41e16c28beb2f77907fe444\"><code>d8a813f</code></a></td><td><code>Add some weil polynomial tests</code></td></tr></table>\n",
    "created_at": "2019-12-19T09:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361426",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8a813f7df1d503ef41e16c28beb2f77907fe444"><code>d8a813f</code></a></td><td><code>Add some weil polynomial tests</code></td></tr></table>




---

archive/issue_comments_361427.json:
```json
{
    "body": "Reviewer: **David Roe**",
    "created_at": "2019-12-19T09:45:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361427",
    "user": "https://github.com/roed314"
}
```

Reviewer: **David Roe**



---

archive/issue_comments_361428.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI've added some more tests.  I think I'm happy to give this positive review if all tests are passing.   I'm also happy to try to keep brainstorming some more doctests if you'd like.",
    "created_at": "2019-12-19T09:45:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361428",
    "user": "https://github.com/roed314"
}
```

<div id="comment:33" align="right">comment:33</div>

I've added some more tests.  I think I'm happy to give this positive review if all tests are passing.   I'm also happy to try to keep brainstorming some more doctests if you'd like.



---

archive/issue_comments_361429.json:
```json
{
    "body": "Changed branch from **[u/roed/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/weilpoly_search)** to **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)**",
    "created_at": "2019-12-19T15:57:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361429",
    "user": "https://github.com/kedlaya"
}
```

Changed branch from **[u/roed/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/roed/weilpoly_search)** to **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)**



---

archive/issue_comments_361430.json:
```json
{
    "body": "Changed commit from **[`d8a813f`](https://github.com/sagemath/sagetrac-mirror/commit/d8a813f7df1d503ef41e16c28beb2f77907fe444)** to **[`dbb6095`](https://github.com/sagemath/sagetrac-mirror/commit/dbb60955f2e17b0b73dbd0353f4f8bfed223916b)**",
    "created_at": "2019-12-19T16:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361430",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d8a813f`](https://github.com/sagemath/sagetrac-mirror/commit/d8a813f7df1d503ef41e16c28beb2f77907fe444)** to **[`dbb6095`](https://github.com/sagemath/sagetrac-mirror/commit/dbb60955f2e17b0b73dbd0353f4f8bfed223916b)**



---

archive/issue_comments_361431.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbb60955f2e17b0b73dbd0353f4f8bfed223916b\"><code>dbb6095</code></a></td><td><code>Fix compiler warnings</code></td></tr></table>\n",
    "created_at": "2019-12-19T16:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361431",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbb60955f2e17b0b73dbd0353f4f8bfed223916b"><code>dbb6095</code></a></td><td><code>Fix compiler warnings</code></td></tr></table>




---

archive/issue_comments_361432.json:
```json
{
    "body": "Changed commit from **[`dbb6095`](https://github.com/sagemath/sagetrac-mirror/commit/dbb60955f2e17b0b73dbd0353f4f8bfed223916b)** to **[`e0b9ff9`](https://github.com/sagemath/sagetrac-mirror/commit/e0b9ff9bcd8d3b5ef3f1c6b40fd6e6f6a1c175a9)**",
    "created_at": "2019-12-19T16:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361432",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dbb6095`](https://github.com/sagemath/sagetrac-mirror/commit/dbb60955f2e17b0b73dbd0353f4f8bfed223916b)** to **[`e0b9ff9`](https://github.com/sagemath/sagetrac-mirror/commit/e0b9ff9bcd8d3b5ef3f1c6b40fd6e6f6a1c175a9)**



---

archive/issue_comments_361433.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0b9ff9bcd8d3b5ef3f1c6b40fd6e6f6a1c175a9\"><code>e0b9ff9</code></a></td><td><code>Add ref to github repo for Weil polynomials</code></td></tr></table>\n",
    "created_at": "2019-12-19T16:50:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361433",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0b9ff9bcd8d3b5ef3f1c6b40fd6e6f6a1c175a9"><code>e0b9ff9</code></a></td><td><code>Add ref to github repo for Weil polynomials</code></td></tr></table>




---

archive/issue_comments_361434.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nA few last-minute changes:\n\n- There was a trivial bug in `polynomial_ring.py` about checking the base ring (which patchbot also noticed); I fixed that and added some doctests to confirm.\n- I fixed some compiler warnings on the backend.\n- I added a link to the github repo in the main package docstring.\n\nThat's probably enough doctests for the moment; I'll inevitably have to add more in response to later bugfixes. Let's see what patchbot has to say next.",
    "created_at": "2019-12-19T17:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361434",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:37" align="right">comment:37</div>

A few last-minute changes:

- There was a trivial bug in `polynomial_ring.py` about checking the base ring (which patchbot also noticed); I fixed that and added some doctests to confirm.
- I fixed some compiler warnings on the backend.
- I added a link to the github repo in the main package docstring.

That's probably enough doctests for the moment; I'll inevitably have to add more in response to later bugfixes. Let's see what patchbot has to say next.



---

archive/issue_events_329640.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2019-12-19T18:14:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329640"
}
```



---

archive/issue_events_329641.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2019-12-19T18:14:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329641"
}
```



---

archive/issue_comments_361435.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nPatchbot is green; I think we're good to go!  I'll optimistically set the milestone to 9.0. :-)",
    "created_at": "2019-12-19T18:14:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361435",
    "user": "https://github.com/roed314"
}
```

<div id="comment:38" align="right">comment:38</div>

Patchbot is green; I think we're good to go!  I'll optimistically set the milestone to 9.0. :-)



---

archive/issue_events_329642.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2019-12-19T18:14:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329642"
}
```



---

archive/issue_events_329643.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2019-12-19T18:14:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329643"
}
```



---

archive/issue_comments_361436.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOn Python 2 there are various errors of the form \n\n```\n**********************************************************************\nFile \"src/sage/rings/polynomial/weil/weil_polynomials.pyx\", line 168, in sage.rings.polynomial.weil.weil_polynomials.dfs_manager.node_count\nFailed example:\n    _ = next(it)\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage2_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage2_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.polynomial.weil.weil_polynomials.dfs_manager.node_count[3]>\", line 1, in <module>\n        _ = next(it)\n    TypeError: instance has no next() method\n**********************************************************************\n```",
    "created_at": "2019-12-25T09:57:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361436",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:39" align="right">comment:39</div>

On Python 2 there are various errors of the form 

```
**********************************************************************
File "src/sage/rings/polynomial/weil/weil_polynomials.pyx", line 168, in sage.rings.polynomial.weil.weil_polynomials.dfs_manager.node_count
Failed example:
    _ = next(it)
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage2_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage2_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.polynomial.weil.weil_polynomials.dfs_manager.node_count[3]>", line 1, in <module>
        _ = next(it)
    TypeError: instance has no next() method
**********************************************************************
```



---

archive/issue_events_329644.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-25T09:57:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329644"
}
```



---

archive/issue_events_329645.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-25T09:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329645"
}
```



---

archive/issue_comments_361437.json:
```json
{
    "body": "Changed commit from **[`e0b9ff9`](https://github.com/sagemath/sagetrac-mirror/commit/e0b9ff9bcd8d3b5ef3f1c6b40fd6e6f6a1c175a9)** to **[`7f44a49`](https://github.com/sagemath/sagetrac-mirror/commit/7f44a49a42de8291e091ca2f4c516111282888b0)**",
    "created_at": "2019-12-25T16:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361437",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e0b9ff9`](https://github.com/sagemath/sagetrac-mirror/commit/e0b9ff9bcd8d3b5ef3f1c6b40fd6e6f6a1c175a9)** to **[`7f44a49`](https://github.com/sagemath/sagetrac-mirror/commit/7f44a49a42de8291e091ca2f4c516111282888b0)**



---

archive/issue_comments_361438.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f44a49a42de8291e091ca2f4c516111282888b0\"><code>7f44a49</code></a></td><td><code>Reinstate next() method for Py2 compatibility</code></td></tr></table>\n",
    "created_at": "2019-12-25T16:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361438",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f44a49a42de8291e091ca2f4c516111282888b0"><code>7f44a49</code></a></td><td><code>Reinstate next() method for Py2 compatibility</code></td></tr></table>




---

archive/issue_comments_361439.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@vbraun](#comment%3A39):\n> On Python 2 there are various errors of the form \n> \n> ```\n> **********************************************************************\n> File \"src/sage/rings/polynomial/weil/weil_polynomials.pyx\", line 168, in sage.rings.polynomial.weil.weil_polynomials.dfs_manager.node_count\n> Failed example:\n>     _ = next(it)\n> Exception raised:\n>     Traceback (most recent call last):\n>       File \"/var/lib/buildbot/slave/sage2_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n>         self.compile_and_execute(example, compiler, test.globs)\n>       File \"/var/lib/buildbot/slave/sage2_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n>         exec(compiled, globs)\n>       File \"<doctest sage.rings.polynomial.weil.weil_polynomials.dfs_manager.node_count[3]>\", line 1, in <module>\n>         _ = next(it)\n>     TypeError: instance has no next() method\n> **********************************************************************\n> ```\n\nI was asked to remove that method (see [comment:18](#comment%3A18)), but anyway here it is again.",
    "created_at": "2019-12-25T16:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361439",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@vbraun](#comment%3A39):
> On Python 2 there are various errors of the form 
> 
> ```
> **********************************************************************
> File "src/sage/rings/polynomial/weil/weil_polynomials.pyx", line 168, in sage.rings.polynomial.weil.weil_polynomials.dfs_manager.node_count
> Failed example:
>     _ = next(it)
> Exception raised:
>     Traceback (most recent call last):
>       File "/var/lib/buildbot/slave/sage2_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
>         self.compile_and_execute(example, compiler, test.globs)
>       File "/var/lib/buildbot/slave/sage2_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
>         exec(compiled, globs)
>       File "<doctest sage.rings.polynomial.weil.weil_polynomials.dfs_manager.node_count[3]>", line 1, in <module>
>         _ = next(it)
>     TypeError: instance has no next() method
> **********************************************************************
> ```

I was asked to remove that method (see [comment:18](#comment%3A18)), but anyway here it is again.



---

archive/issue_events_329646.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2019-12-25T16:37:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329646"
}
```



---

archive/issue_events_329647.json:
```json
{
    "actor": "https://github.com/kedlaya",
    "created_at": "2019-12-25T16:37:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329647"
}
```



---

archive/issue_comments_361440.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a3e93d0c200fa3d381c7d6b6433134439e04b33\"><code>6a3e93d</code></a></td><td><code>Fix typos in doctest</code></td></tr></table>\n",
    "created_at": "2019-12-25T19:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361440",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a3e93d0c200fa3d381c7d6b6433134439e04b33"><code>6a3e93d</code></a></td><td><code>Fix typos in doctest</code></td></tr></table>




---

archive/issue_comments_361441.json:
```json
{
    "body": "Changed commit from **[`7f44a49`](https://github.com/sagemath/sagetrac-mirror/commit/7f44a49a42de8291e091ca2f4c516111282888b0)** to **[`6a3e93d`](https://github.com/sagemath/sagetrac-mirror/commit/6a3e93d0c200fa3d381c7d6b6433134439e04b33)**",
    "created_at": "2019-12-25T19:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361441",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7f44a49`](https://github.com/sagemath/sagetrac-mirror/commit/7f44a49a42de8291e091ca2f4c516111282888b0)** to **[`6a3e93d`](https://github.com/sagemath/sagetrac-mirror/commit/6a3e93d0c200fa3d381c7d6b6433134439e04b33)**



---

archive/issue_comments_361442.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nLooking at the patchbot logs, it seems that at least one of the bots failed to build because of nested function declarations in the C code. I thought we were always compiling the Sage library with gcc, which supports nested functions even though they are not in the ANSI standard...?",
    "created_at": "2019-12-25T19:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361442",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:44" align="right">comment:44</div>

Looking at the patchbot logs, it seems that at least one of the bots failed to build because of nested function declarations in the C code. I thought we were always compiling the Sage library with gcc, which supports nested functions even though they are not in the ANSI standard...?



---

archive/issue_comments_361443.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\non osx we now use clang by default",
    "created_at": "2019-12-25T21:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361443",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:45" align="right">comment:45</div>

on osx we now use clang by default



---

archive/issue_comments_361444.json:
```json
{
    "body": "<div id=\"comment:46\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e02ae3cfc9bd4da34ee8f3b3b9a9b94e7666fa6f\"><code>e02ae3c</code></a></td><td><code>Un-nest functions in C code for non-GNU compilers</code></td></tr></table>\n",
    "created_at": "2019-12-25T23:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361444",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e02ae3cfc9bd4da34ee8f3b3b9a9b94e7666fa6f"><code>e02ae3c</code></a></td><td><code>Un-nest functions in C code for non-GNU compilers</code></td></tr></table>




---

archive/issue_comments_361445.json:
```json
{
    "body": "Changed commit from **[`6a3e93d`](https://github.com/sagemath/sagetrac-mirror/commit/6a3e93d0c200fa3d381c7d6b6433134439e04b33)** to **[`e02ae3c`](https://github.com/sagemath/sagetrac-mirror/commit/e02ae3cfc9bd4da34ee8f3b3b9a9b94e7666fa6f)**",
    "created_at": "2019-12-25T23:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361445",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6a3e93d`](https://github.com/sagemath/sagetrac-mirror/commit/6a3e93d0c200fa3d381c7d6b6433134439e04b33)** to **[`e02ae3c`](https://github.com/sagemath/sagetrac-mirror/commit/e02ae3cfc9bd4da34ee8f3b3b9a9b94e7666fa6f)**



---

archive/issue_comments_361446.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nAh, it seems clang does not (yet) support nested functions as in GNU C. So I redid that bit of the C code; let's see what the patchbots have to say now.",
    "created_at": "2019-12-25T23:58:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361446",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:47" align="right">comment:47</div>

Ah, it seems clang does not (yet) support nested functions as in GNU C. So I redid that bit of the C code; let's see what the patchbots have to say now.



---

archive/issue_comments_361447.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nSome of the patchbots are set up strangely, but I'm not seeing any systemic issues with this branch.",
    "created_at": "2019-12-30T07:29:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361447",
    "user": "https://github.com/kedlaya"
}
```

<div id="comment:48" align="right">comment:48</div>

Some of the patchbots are set up strangely, but I'm not seeing any systemic issues with this branch.



---

archive/issue_events_329648.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2019-12-30T23:28:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329648"
}
```



---

archive/issue_events_329649.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2019-12-30T23:28:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329649"
}
```



---

archive/issue_events_329650.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2019-12-30T23:28:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329650"
}
```



---

archive/issue_events_329651.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2019-12-30T23:28:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329651"
}
```



---

archive/issue_comments_361448.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI agree.  We have successful tests run on Darwin, so I'm setting this back to positive review.",
    "created_at": "2019-12-30T23:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361448",
    "user": "https://github.com/roed314"
}
```

<div id="comment:49" align="right">comment:49</div>

I agree.  We have successful tests run on Darwin, so I'm setting this back to positive review.



---

archive/issue_comments_361449.json:
```json
{
    "body": "Changed branch from **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)** to **[`e02ae3c`](https://github.com/sagemath/sagetrac-mirror/commit/e02ae3cfc9bd4da34ee8f3b3b9a9b94e7666fa6f)**",
    "created_at": "2020-01-05T15:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23946#issuecomment-361449",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/kedlaya/weilpoly_search](https://github.com/sagemath/sagetrac-mirror/tree/u/kedlaya/weilpoly_search)** to **[`e02ae3c`](https://github.com/sagemath/sagetrac-mirror/commit/e02ae3cfc9bd4da34ee8f3b3b9a9b94e7666fa6f)**



---

archive/issue_events_329652.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-05T15:47:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329652"
}
```



---

archive/issue_events_329653.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c80928120c4227bc0a4624ad351e795f1eeec6a5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-01-05T15:47:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23946",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23946#event-329653"
}
```
