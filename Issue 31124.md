# Issue 31124: tox.yml: Fix up "dist" workflow

Issue created by migration from https://trac.sagemath.org/ticket/31361

Original creator: mkoeppe

Original creation time: 2021-02-08 07:02:29

CC:  @kliem slabbe

It is still looking for `debian-bootstrap.txt`

https://github.com/sagemath/sage/runs/1850247704?check_suite_focus=true



---

Comment by mkoeppe created at 2021-02-09 00:12:31

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-02-09 00:12:31

New commits:


---

Comment by @kliem created at 2021-02-16 11:28:23

I don't think this works.


```
build/bin/sage-get-system-packages debian _bootstrap
```


returns nothing because `debian-bootstrap.txt` is located in `build/pkgs/debian-bootstrap.txt`.

With the following change, it would work:


```diff
diff --git a/build/bin/sage-get-system-packages b/build/bin/sage-get-system-packages
index 8675f3dbfa..ee8b4666d5 100755
--- a/build/bin/sage-get-system-packages
+++ b/build/bin/sage-get-system-packages
@@ -22,6 +22,9 @@ case "$SYSTEM" in
 esac
 for PKG_BASE in $SPKGS; do
     SYSTEM_PACKAGES_FILE="$SAGE_ROOT"/build/pkgs/$PKG_BASE/$SYSTEM_PACKAGES_FILE_NAME
+    if [ $PKG_BASE = "_bootstrap" ]; then
+        SYSTEM_PACKAGES_FILE="$SAGE_ROOT"/build/pkgs/"$SYSTEM"-bootstrap.txt
+    fi
     if [ -f $SYSTEM_PACKAGES_FILE ]; then
        echo $(${STRIP_COMMENTS} $SYSTEM_PACKAGES_FILE)
     fi
```



---

Comment by @kliem created at 2021-02-16 11:28:23

Changing status from needs_review to needs_work.


---

Comment by @kliem created at 2021-02-16 11:35:16

Never mind. I guess this stuff moved and I wasn't on the current beta. On the current beta this works.


---

Comment by @kliem created at 2021-02-16 11:35:16

Changing status from needs_work to positive_review.


---

Comment by mkoeppe created at 2021-02-16 15:13:43

Thank you! Yes, these files were moved in #29124


---

Comment by vbraun created at 2021-03-09 00:01:46

Resolution: fixed
