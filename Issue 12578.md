# Issue 12578: Fix scoping / name look-up issue und PolyBoRi 0.8.0 and support flags from the envrionment

Issue created by migration from https://trac.sagemath.org/ticket/12750

Original creator: AlexanderDreyer

Original creation time: 2012-03-26 15:19:57

Assignee: AlexGhitza

CC:  leif polybori malb burcin

The following was found out here:
http://groups.google.com/group/sage-release/browse_thread/thread/e2a87c73dc1625f2

```
* PolyBoRi fails to build due to stricter (C++11) scoping / name look-up rules.
    Unfortunately PolyBoRi doesn't honor CXXFLAGS, so I had to use CXX="g++-4.7.0 -fpermissive" to make the spkg build. 
```


The scoping issue should be fixed here:
https://bitbucket.org/brickenstein/polybori/changeset/43b3931ceed7/raw/

Also, we should support CXXFLAGS and CFLAGS (ANd CPPFLAGS?) in the spkg.


---

Comment by AlexanderDreyer created at 2012-03-26 15:25:51

Changing assignee from AlexGhitza to AlexanderDreyer.


---

Comment by AlexanderDreyer created at 2012-03-26 15:25:51

There an updates spkg here:
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.0.p2.spkg


---

Comment by leif created at 2012-03-26 20:11:06

Changing keywords from "" to "C++11 GCC 4.7.0 CXXFLAGS -fpermissive".


---

Comment by leif created at 2012-03-26 20:12:02

Changing status from new to needs_review.


---

Comment by AlexanderDreyer created at 2012-03-26 20:50:09

Remove assignee AlexanderDreyer.


---

Comment by AlexanderDreyer created at 2012-03-26 21:36:17

Set assignee to AlexanderDreyer.


---

Comment by leif created at 2012-03-28 14:02:40

Changing status from needs_review to positive_review.


---

Comment by leif created at 2012-03-28 14:02:40

Works as advertised, i.e., builds with GCC 4.7.0 (_without_ `-fpermissive`) and also honors `CXXFLAGS` in the C++ compile commands (although I have to admit I haven't checked _all of them_, just a couple).  Also passes its test suite.

I haven't really looked at the new spkg itself though, but I _expect_ it to have no flaws... ;-)


---

Comment by leif created at 2012-03-28 14:17:09

Replying to [comment:6 leif]:
> I haven't really looked at the new spkg itself though, but I _expect_ it to have no flaws... ;-)

Ok, did so.  "Global" `CFLAGS`, `CPPFLAGS` and `CXXFLAGS` are properly added now, and upstream patches fixing the name look-up issue get applied.

The last revision isn't tagged yet (which the merge script then will do later), but more importantly, `SPKG.txt` lacks a new changelog entry.


---

Comment by leif created at 2012-03-28 14:17:09

Changing status from positive_review to needs_work.


---

Comment by AlexanderDreyer created at 2012-03-28 14:27:30

I forgot that in the first. I immediately replaced it the spkg, but maybe it was cached somewhere, s.th. you might have to reload it.

The latest entry is as follows:

```
### polybori-0.8.0.p2 (Alexander Dreyer, March 26th, 2012)
 * Fix scoping/name look-up issue and support flags from the environment
```



---

Comment by AlexanderDreyer created at 2012-03-28 14:33:46

Changing status from needs_work to needs_review.


---

Comment by leif created at 2012-03-28 14:35:05

Replying to [comment:8 AlexanderDreyer]:
> I forgot that in the first. I immediately replaced it the spkg, but maybe it was cached somewhere, s.th. you might have to reload it.

Well, the updated one is nearly 5 hours younger... ;-)


---

Comment by leif created at 2012-03-28 14:35:05

Changing status from needs_review to positive_review.


---

Comment by AlexanderDreyer created at 2012-03-28 22:31:03

Replying to [comment:10 leif]:
> Replying to [comment:8 AlexanderDreyer]:
> > I forgot that in the first. I immediately replaced it the spkg, but maybe it was cached somewhere, s.th. you might have to reload it.
> 
> Well, the updated one is nearly 5 hours younger... ;-)
Right, 'immediately' in a philosophical manner ;-) No, sorry I had had trouble connecting to boxen then.


---

Comment by AlexanderDreyer created at 2012-03-29 07:52:51

Replying to [comment:10 leif]:
> Replying to [comment:8 AlexanderDreyer]:
> > I forgot that in the first. I immediately replaced it the spkg, but maybe it was cached somewhere, s.th. you might have to reload it.
> 
> Well, the updated one is nearly 5 hours younger... ;-)

Can you also have a look at #12754 for PolyBoRi 0.8.1?


---

Comment by jdemeyer created at 2012-04-02 15:26:17

Resolution: fixed
