# Issue 34066: √élu algorithm: asymptotically faster elliptic-curve isogenies

archive/issues_034066.json:
```json
{
    "body": "CC:  defeo cremona wuthrich bensmith tanja tscrim vdelecroix slelievre klee\n\nSage currently computes an isogeny of prime degree `\u2113` using `\u03f4(\u2113)` base-field operations. We can achieve the same task in `O\u0303(\u221a\u2113)` operations using the **\u221a\u00e9lu algorithm**; see https://velusqrt.isogeny.org.\n\nIssue created by migration from https://trac.sagemath.org/ticket/34303\n\n",
    "created_at": "2022-08-08T10:19:09Z",
    "labels": [
        "elliptic curves",
        "major",
        "enhancement"
    ],
    "title": "\u221a\u00e9lu algorithm: asymptotically faster elliptic-curve isogenies",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34066",
    "user": "lorenz"
}
```
CC:  defeo cremona wuthrich bensmith tanja tscrim vdelecroix slelievre klee

Sage currently computes an isogeny of prime degree `ℓ` using `ϴ(ℓ)` base-field operations. We can achieve the same task in `Õ(√ℓ)` operations using the **√élu algorithm**; see https://velusqrt.isogeny.org.

Issue created by migration from https://trac.sagemath.org/ticket/34303





---

archive/issue_comments_483412.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-08T10:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483412",
    "user": "lorenz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_483413.json:
```json
{
    "body": "I have a question: although I know that the application of greatest interest involves curves over finite fields, I assume that the faster algorithm also works in characteristic 0, so that isogenies between curves defined over number fields will also be affected by this? I hope so.",
    "created_at": "2022-08-10T13:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483413",
    "user": "cremona"
}
```

I have a question: although I know that the application of greatest interest involves curves over finite fields, I assume that the faster algorithm also works in characteristic 0, so that isogenies between curves defined over number fields will also be affected by this? I hope so.



---

archive/issue_comments_483414.json:
```json
{
    "body": "That's a good question. The \u221a\u00e9lu speedup works best if you have an actual rational kernel point as input, which requires big field extensions for large isogeny degrees over number fields. There is a variant of the algorithm for rational kernels made up of irrational points, but the speedup is smaller in that case.\n\nDo you have an application in mind? Which field and isogeny degree, and how is the input given? It shouldn't be hard to make this work for number fields, but I'm not sure if it helps at all, which is why I restricted the current implementation to finite fields.",
    "created_at": "2022-08-16T16:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483414",
    "user": "lorenz"
}
```

That's a good question. The √élu speedup works best if you have an actual rational kernel point as input, which requires big field extensions for large isogeny degrees over number fields. There is a variant of the algorithm for rational kernels made up of irrational points, but the speedup is smaller in that case.

Do you have an application in mind? Which field and isogeny degree, and how is the input given? It shouldn't be hard to make this work for number fields, but I'm not sure if it helps at all, which is why I restricted the current implementation to finite fields.



---

archive/issue_comments_483415.json:
```json
{
    "body": "I was hoping we could get this into the upcoming release so that other people can play around with it. This is opt-in and marked as experimental, so a minimum viable review basically consists of checking that it doesn't do any harm. Could someone please spare a few minutes to have a look?",
    "created_at": "2022-08-18T17:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483415",
    "user": "lorenz"
}
```

I was hoping we could get this into the upcoming release so that other people can play around with it. This is opt-in and marked as experimental, so a minimum viable review basically consists of checking that it doesn't do any harm. Could someone please spare a few minutes to have a look?



---

archive/issue_comments_483416.json:
```json
{
    "body": "Replying to [comment:3 lorenz]:\n> That's a good question. The \u221a\u00e9lu speedup works best if you have an actual rational kernel point as input, which requires big field extensions for large isogeny degrees over number fields. There is a variant of the algorithm for rational kernels made up of irrational points, but the speedup is smaller in that case.\n> \n> Do you have an application in mind? Which field and isogeny degree, and how is the input given? It shouldn't be hard to make this work for number fields, but I'm not sure if it helps at all, which is why I restricted the current implementation to finite fields.\n\nThe isogenies I compute are mostly over number fields and of small prime degree ell, where \"small\" mostly means <50.  And for most of these ell, I have implemented special code for them (which works over finte fields too, except characteristic ell).  As for the input, it's just the curve and ell and I need all the ell-isogenous curves;  there are easy necessary conditions for an ell-isogeny to exist so I would rarely try to compute one when it does not exist.",
    "created_at": "2022-08-18T18:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483416",
    "user": "cremona"
}
```

Replying to [comment:3 lorenz]:
> That's a good question. The √élu speedup works best if you have an actual rational kernel point as input, which requires big field extensions for large isogeny degrees over number fields. There is a variant of the algorithm for rational kernels made up of irrational points, but the speedup is smaller in that case.
> 
> Do you have an application in mind? Which field and isogeny degree, and how is the input given? It shouldn't be hard to make this work for number fields, but I'm not sure if it helps at all, which is why I restricted the current implementation to finite fields.

The isogenies I compute are mostly over number fields and of small prime degree ell, where "small" mostly means <50.  And for most of these ell, I have implemented special code for them (which works over finte fields too, except characteristic ell).  As for the input, it's just the curve and ell and I need all the ell-isogenous curves;  there are easy necessary conditions for an ell-isogeny to exist so I would rarely try to compute one when it does not exist.



---

archive/issue_comments_483417.json:
```json
{
    "body": "Replying to [comment:4 lorenz]:\n> I was hoping we could get this into the upcoming release so that other people can play around with it. This is opt-in and marked as experimental, so a minimum viable review basically consists of checking that it doesn't do any harm. Could someone please spare a few minutes to have a look?\n\nI had a first look, and will come back to it tomorrow.",
    "created_at": "2022-08-18T18:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483417",
    "user": "cremona"
}
```

Replying to [comment:4 lorenz]:
> I was hoping we could get this into the upcoming release so that other people can play around with it. This is opt-in and marked as experimental, so a minimum viable review basically consists of checking that it doesn't do any harm. Could someone please spare a few minutes to have a look?

I had a first look, and will come back to it tomorrow.



---

archive/issue_comments_483418.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-08-19T10:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483418",
    "user": "cremona"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_483419.json:
```json
{
    "body": "Here are some comments made as I read the code, so not in order of importance.  Point 4 about documenting parameters is the most important -- otherwise docstrings, examples ans tests are very good.\n\n1. Instead of \n\n```\n    sage: sum(iso(psiQ) == phiQ for iso in isos)\n    1\n```\n\nI would suggest\n\n```\n    sage: any(iso(psiQ) == phiQ for iso in isos)\n    True\n```\n\n\n2. There's a comment which says that the code works on \"short Weierstrass curves\", so I assume that menas that the characteristic should not be 2 (and perhaps also not 3).  This should probably be stated at the top of the file `hom_velusqrt.py`.  I haven't yet checked whether this condition is checked in the code.\n\n3. I see the comment about this implementation only being over finite fields.  I think that is fine, given that isogenies of high degree over number fields are rarely encountered (since the field would have to have high degree over `QQ`), as I said in an earlier comment.\n\n4. Methods' docstrings should have an INPUT block documenting all parameters (apart from `self`), for example the `_init_` method, of ProductTree and more (not itemised here!).\n\nI see that the code here is not called from elsewhere -- in particular, not called by default by isogeny methods of elliptic curve classes -- so is certainly harmless to include.",
    "created_at": "2022-08-19T10:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483419",
    "user": "cremona"
}
```

Here are some comments made as I read the code, so not in order of importance.  Point 4 about documenting parameters is the most important -- otherwise docstrings, examples ans tests are very good.

1. Instead of 

```
    sage: sum(iso(psiQ) == phiQ for iso in isos)
    1
```

I would suggest

```
    sage: any(iso(psiQ) == phiQ for iso in isos)
    True
```


2. There's a comment which says that the code works on "short Weierstrass curves", so I assume that menas that the characteristic should not be 2 (and perhaps also not 3).  This should probably be stated at the top of the file `hom_velusqrt.py`.  I haven't yet checked whether this condition is checked in the code.

3. I see the comment about this implementation only being over finite fields.  I think that is fine, given that isogenies of high degree over number fields are rarely encountered (since the field would have to have high degree over `QQ`), as I said in an earlier comment.

4. Methods' docstrings should have an INPUT block documenting all parameters (apart from `self`), for example the `_init_` method, of ProductTree and more (not itemised here!).

I see that the code here is not called from elsewhere -- in particular, not called by default by isogeny methods of elliptic curve classes -- so is certainly harmless to include.



---

archive/issue_comments_483420.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-21T02:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483420",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483421.json:
```json
{
    "body": "Thank you for the comments! I added `INPUT:` blocks to (I believe) all functions that need them.\n\nI also made comparison work using the same code as for composite isogenies (by reducing to evaluation), and added a (purely opt-in) call path from the `.isogeny()` method for elliptic curves so that it's easy to use the new algorithm without typing long import statements.\n\nAbout your other remarks:\n\n1. `sum(...) == 1` is a stronger statement than `any(...)`, which is why I wrote it this way: The former checks unique existence, the latter just existence.\n\n2. The implementation does work for some curves in characteristic 3, but not all of them. In the code, it simply tries converting the curve to short Weierstra\u00df form and throws an exception if that fails. This is slightly more general than checking the characteristic.\n\n3. Indeed, the situation over number fields mentioned in comment:5:ticket:34303 does not seem like it would benefit from this. Should it turn out that there's something we can do after all, this can of course be taken care of at a later time.",
    "created_at": "2022-08-21T02:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483421",
    "user": "lorenz"
}
```

Thank you for the comments! I added `INPUT:` blocks to (I believe) all functions that need them.

I also made comparison work using the same code as for composite isogenies (by reducing to evaluation), and added a (purely opt-in) call path from the `.isogeny()` method for elliptic curves so that it's easy to use the new algorithm without typing long import statements.

About your other remarks:

1. `sum(...) == 1` is a stronger statement than `any(...)`, which is why I wrote it this way: The former checks unique existence, the latter just existence.

2. The implementation does work for some curves in characteristic 3, but not all of them. In the code, it simply tries converting the curve to short Weierstraß form and throws an exception if that fails. This is slightly more general than checking the characteristic.

3. Indeed, the situation over number fields mentioned in comment:5:ticket:34303 does not seem like it would benefit from this. Should it turn out that there's something we can do after all, this can of course be taken care of at a later time.



---

archive/issue_comments_483422.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-08-21T02:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483422",
    "user": "lorenz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_483423.json:
```json
{
    "body": "Replying to [comment:7 cremona]:\n>    4. Methods' docstrings should have an INPUT block documenting all parameters (apart from `self`), for example the `_init_` method, of ProductTree and more (not itemised here!).\n\nOne comment on this: To make it more publicly visible, it can be useful to have the inputs for `__init__` to be at the class-level documentation and not (repeated) at the method-level since it does not appear in the docstrings. However, this is mostly a suggestion when you expect the user to directly call the class to build the object (rather than, e.g., an element of a parent which is through the parent's `_element_constructor_`).\n\nOne additional comment to John's, the `INPUT:` items should always be in code format, e.g.:\n\n```diff\n     INPUT:\n \n-    - `n` -- odd integer `\\geq 5`\n+    - ``n`` -- odd integer `\\geq 5`\n```\n\n\nIn `_choose_IJK`, it would also be good to specify that this needs to be an `:class:`Integer`` otherwise the method will break. In fact, since you are just wanting the integer part, you could do\n\n```python\n(n-1).sqrtrem()[0] // 2\n```\n\nAs a general programming note, I prefer to avoid similar variable names, such as `b` and `b_`. It is too easy to make a mistake with them.",
    "created_at": "2022-08-21T23:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483423",
    "user": "tscrim"
}
```

Replying to [comment:7 cremona]:
>    4. Methods' docstrings should have an INPUT block documenting all parameters (apart from `self`), for example the `_init_` method, of ProductTree and more (not itemised here!).

One comment on this: To make it more publicly visible, it can be useful to have the inputs for `__init__` to be at the class-level documentation and not (repeated) at the method-level since it does not appear in the docstrings. However, this is mostly a suggestion when you expect the user to directly call the class to build the object (rather than, e.g., an element of a parent which is through the parent's `_element_constructor_`).

One additional comment to John's, the `INPUT:` items should always be in code format, e.g.:

```diff
     INPUT:
 
-    - `n` -- odd integer `\geq 5`
+    - ``n`` -- odd integer `\geq 5`
```


In `_choose_IJK`, it would also be good to specify that this needs to be an `:class:`Integer`` otherwise the method will break. In fact, since you are just wanting the integer part, you could do

```python
(n-1).sqrtrem()[0] // 2
```

As a general programming note, I prefer to avoid similar variable names, such as `b` and `b_`. It is too easy to make a mistake with them.



---

archive/issue_comments_483424.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T06:38:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483424",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483425.json:
```json
{
    "body": "Thanks! All done.",
    "created_at": "2022-08-22T06:39:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483425",
    "user": "lorenz"
}
```

Thanks! All done.



---

archive/issue_comments_483426.json:
```json
{
    "body": "Thanks for making all these changes, and answering my comments.   I am happy with this, so if Travis is too he can add his name to the reviewers list and set it to \"positive review\".",
    "created_at": "2022-08-22T08:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483426",
    "user": "cremona"
}
```

Thanks for making all these changes, and answering my comments.   I am happy with this, so if Travis is too he can add his name to the reviewers list and set it to "positive review".



---

archive/issue_comments_483427.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-22T08:29:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483427",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_483428.json:
```json
{
    "body": "Good with me too.",
    "created_at": "2022-08-22T08:29:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483428",
    "user": "tscrim"
}
```

Good with me too.



---

archive/issue_comments_483429.json:
```json
{
    "body": "Sorry for being late. Let me have some time to write a comment and a question.",
    "created_at": "2022-08-22T08:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483429",
    "user": "klee"
}
```

Sorry for being late. Let me have some time to write a comment and a question.



---

archive/issue_comments_483430.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-08-22T08:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483430",
    "user": "klee"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_483431.json:
```json
{
    "body": "One minor comment\n\n- You added a new option `short_weierstrass` to `compute_model`, but did not put it in `INPUT` section.\n\nAnd one question. You added this \n\n```\n.. WARNING::\n\n    This module is currently considered experimental.\n    It may change in a future release without prior warning.        \n```\n\nIn what sense is this experimental? What change do you mean? (1) bug fixes (2) wrong result (3) performance improvement, or (4) removal?\n\nI guess you mean only (3). In that case, you don't need to tag it as experimental. Any part of code in sage can be improved later without \"prior warning\". If this is the case, then I suggest to remove those scary \"experimental\" warnings.\n\nIf you mean (4), what is the condition of removal?",
    "created_at": "2022-08-22T08:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483431",
    "user": "klee"
}
```

One minor comment

- You added a new option `short_weierstrass` to `compute_model`, but did not put it in `INPUT` section.

And one question. You added this 

```
.. WARNING::

    This module is currently considered experimental.
    It may change in a future release without prior warning.        
```

In what sense is this experimental? What change do you mean? (1) bug fixes (2) wrong result (3) performance improvement, or (4) removal?

I guess you mean only (3). In that case, you don't need to tag it as experimental. Any part of code in sage can be improved later without "prior warning". If this is the case, then I suggest to remove those scary "experimental" warnings.

If you mean (4), what is the condition of removal?



---

archive/issue_comments_483432.json:
```json
{
    "body": "You have 2 (2)'s leading to a non-bijective map. `;)`",
    "created_at": "2022-08-22T08:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483432",
    "user": "tscrim"
}
```

You have 2 (2)'s leading to a non-bijective map. `;)`



---

archive/issue_comments_483433.json:
```json
{
    "body": "Kwankyu Lee's question is a good one, and I agree that there is no need for such a tag, unless you really think that this code is likely to give incorrect answers.  If that was the case, it would be better not to allow it as an option visible from the elliptic curve class.  Otherwise, if it was one day removed you would have to give deprecation warnings etc.  If you believe the code to be correct (as I hope you do!) then you can just delete the warning.",
    "created_at": "2022-08-22T10:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483433",
    "user": "cremona"
}
```

Kwankyu Lee's question is a good one, and I agree that there is no need for such a tag, unless you really think that this code is likely to give incorrect answers.  If that was the case, it would be better not to allow it as an option visible from the elliptic curve class.  Otherwise, if it was one day removed you would have to give deprecation warnings etc.  If you believe the code to be correct (as I hope you do!) then you can just delete the warning.



---

archive/issue_comments_483434.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T10:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483434",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_483435.json:
```json
{
    "body": "Thanks, done! I've also created #34409, which (inspired by your comments here) suggests to remove the experimental warning for composite elliptic-curve isogenies.",
    "created_at": "2022-08-22T11:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483435",
    "user": "lorenz"
}
```

Thanks, done! I've also created #34409, which (inspired by your comments here) suggests to remove the experimental warning for composite elliptic-curve isogenies.



---

archive/issue_comments_483436.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-08-22T11:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483436",
    "user": "lorenz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_483437.json:
```json
{
    "body": "Replying to [comment:17 tscrim]:\n> You have 2 (2)'s leading to a non-bijective map. `;)`\n\nFixed. Thanks. It was awful.",
    "created_at": "2022-08-22T11:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483437",
    "user": "klee"
}
```

Replying to [comment:17 tscrim]:
> You have 2 (2)'s leading to a non-bijective map. `;)`

Fixed. Thanks. It was awful.



---

archive/issue_comments_483438.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-22T11:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483438",
    "user": "klee"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_483439.json:
```json
{
    "body": "Replying to [comment:20 lorenz]:\n> Thanks, done! I've also created #34409, which (inspired by your comments here) suggests to remove the experimental warning for composite elliptic-curve isogenies.\n\nThank you. It was perhaps your being modest. But Sage should always deliver reliable code, and I think we should avoid including experimental code in Sage.",
    "created_at": "2022-08-22T11:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483439",
    "user": "klee"
}
```

Replying to [comment:20 lorenz]:
> Thanks, done! I've also created #34409, which (inspired by your comments here) suggests to remove the experimental warning for composite elliptic-curve isogenies.

Thank you. It was perhaps your being modest. But Sage should always deliver reliable code, and I think we should avoid including experimental code in Sage.



---

archive/issue_comments_483440.json:
```json
{
    "body": "Thanks a lot everyone!\n\n(Indeed, I'm reasonably convinced that the code is correct. I added the experimental warning not because I feared things were broken, but because it'd make it easier to tweak the API later. Presumably though, this won't be necessary anyway.)",
    "created_at": "2022-08-22T13:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483440",
    "user": "lorenz"
}
```

Thanks a lot everyone!

(Indeed, I'm reasonably convinced that the code is correct. I added the experimental warning not because I feared things were broken, but because it'd make it easier to tweak the API later. Presumably though, this won't be necessary anyway.)



---

archive/issue_comments_483441.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-30T06:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483441",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_483442.json:
```json
{
    "body": "Got a test failure with a specific random seed\n\n```\nsage -t --long --random-seed=66297844331759291946775140613791774160 /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/hom_velusqrt.py\n**********************************************************************\nFile \"/usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/hom_velusqrt.py\", line 829, in sage.schemes.elliptic_curves.hom_velusqrt.EllipticCurveHom_velusqrt\nFailed example:\n    any(map(check, psi.codomain().isomorphisms(phi.codomain())))\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\n",
    "created_at": "2022-08-31T15:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483442",
    "user": "arojas"
}
```

Got a test failure with a specific random seed

```
sage -t --long --random-seed=66297844331759291946775140613791774160 /usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/hom_velusqrt.py
**********************************************************************
File "/usr/lib/python3.10/site-packages/sage/schemes/elliptic_curves/hom_velusqrt.py", line 829, in sage.schemes.elliptic_curves.hom_velusqrt.EllipticCurveHom_velusqrt
Failed example:
    any(map(check, psi.codomain().isomorphisms(phi.codomain())))
Expected:
    True
Got:
    False
**********************************************************************
```




---

archive/issue_comments_483443.json:
```json
{
    "body": "and the linter now requires a blank line before nested definitions",
    "created_at": "2022-08-31T19:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483443",
    "user": "chapoton"
}
```

and the linter now requires a blank line before nested definitions



---

archive/issue_comments_483444.json:
```json
{
    "body": "Thanks both of you. See #34467 and #34466.",
    "created_at": "2022-09-01T07:14:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34066#issuecomment-483444",
    "user": "lorenz"
}
```

Thanks both of you. See #34467 and #34466.
