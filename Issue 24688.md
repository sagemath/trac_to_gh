# Issue 24688: Ford Fulkerson algorithm does not handle unconnected vertices correctly + unclear error message + lacks tests

Issue created by migration from Trac.

Original creator: tmonteil

Original creation time: 2018-03-07 15:30:00

As reported on [this ask question](https://ask.sagemath.org/question/41419/flow-gives-error-for-disconnected-vertices/), the `_ford_fulkerson` method for graphs does not handle unconnected vertices correctly:


```
sage: G = Graph({0:[],1:[]})
sage: G.flow(0,1, algorithm='FF')
ValueError: vertex '0' is not in the (di)graph
```


To be compared to:


```
sage: G.flow(0,1, algorithm='LP')
0.0
sage: G.flow(0,1, algorithm='igraph') # depends on python_igraph
0.0
```


Moreover, the error message is misleading since the vertex is here:


```
sage: G.vertices()
[0, 1]
```


This is because the test is about some `residual` auxiliary graph, not `self`.

Also, this method lacks test, there are much less than the various proposed options.



---

Comment by dcoudert created at 2018-03-28 19:02:21

Changing status from new to needs_review.


---

Comment by dcoudert created at 2018-03-28 19:02:21

The isolated vertices where ignored in the construction of the residual graph. Easy to fix.
----
New commits:


---

Comment by darij created at 2018-03-31 05:46:47

Changing keywords from "" to "graph, digraph, linear optimization".


---

Comment by darij created at 2018-03-31 05:46:47

LGTM, thanks for noticing the bug!


---

Comment by darij created at 2018-03-31 05:46:59

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-05-12 11:47:52

Resolution: fixed
