# Issue 13354: Add Philipp Jovanovic ANF to CNF converter

Issue created by migration from Trac.

Original creator: malb

Original creation time: 2012-10-01 14:18:20

Assignee: tbd

Keywords: SAT

The converter is available here

   https://github.com/Daeinar/anf2cnf-sage/blob/master/anf2cnf_sage.py

we should consider it for inclusion as it is more flexible than what we have now.


---

Comment by malb created at 2012-10-01 14:18:40

Changing assignee from tbd to jason.


---

Comment by malb created at 2012-10-01 14:18:40

Changing component from PLEASE CHANGE to misc.


---

Comment by malb created at 2012-10-01 14:23:46

The code is not ready for inclusion in Sage yet:
 * there are no doctests
 * it seems many local attributes are not marked local (`self.one` vs. `self._one` ), note that the current converter has a similar issue though
 * `phi` is a function in this converter, but an attribute in the one currently included in Sage. Also, `phi` returns a reference to an internal mutable variable, instead of a copy


---

Comment by boothby created at 2012-10-04 20:54:12

The conversion strategies are poorly documented.  At least one docstring should describe all of the strategies, and all of the methods which accept a strategy as an argument should provide the list of strategies and a reference to the docstring that describes them.

Additionally, I'm concerned that c_lin_cnf doesn't do anything for polynomials with length > 6.  This doesn't currently seem to cause any bugs, but it might in the future.  I'd rather see a generic implementation, or at the very least, `raise ValueError, "input polynomials must have length <= 6"`.


---

Comment by cosh created at 2012-10-09 08:58:03

Made some modifications to the code:

 * Every function now has at least one doctest
 * `phi` is now a ``@`property`
 * marked `self.one` and `self.zero` as local (although `self.zero` could be deleted completely as it is never used) 

What I want to do next is adding some error checking mechanisms for user parameters and re-implementing the `c_lin_cnf` function in a more generic way. Anything else that I forgot?


---

Comment by malb created at 2012-10-09 09:22:38

Replying to [comment:4 cosh]:
>  * Every function now has at least one doctest

Note that you misformated the doctest blocks: There's a `::` after the preceding line (e.g. `EXAMPLE::`) which starts a code block. Also, there's supposed to be an empty line between the `EXAMPLE::` and the first line of the code block. Again, this is part of the markup which starts a code block.

>  * `phi` is now a ``@`property`
>  * marked `self.one` and `self.zero` as local (although `self.zero` could be deleted completely as it is never used) 

Lets remove it then :)

> What I want to do next is adding some error checking mechanisms for user parameters and re-implementing the `c_lin_cnf` function in a more generic way. Anything else that I forgot?

As far as I can see, no.


---

Comment by cosh created at 2012-10-09 12:42:04

Replying to [comment:5 malb]:

> Replying to [comment:4 cosh] :
> > What I want to do next is adding some error checking mechanisms for user parameters and re-implementing the `c_lin_cnf`  function in a more generic way. Anything else that I forgot?
> As far as I can see, no.

Something that I think would be nice to have is some kind of mechanism which automatically selects (per polynomial?!) the "best suited" conversion strategy, as by now the user has to specify how all the polynomials get converted. But first one would have to find out what "best" means in this case before anything in that direction could be done. And even then I guess we would get very fast into NP complete areas. So a heuristic would be fine, too ...


---

Comment by nthiery created at 2012-10-10 11:24:50

Hi!

Please add in the doc and ticket description what ANF and CNF mean; that will save some time for the non experts, and will help find them through searches.

Thanks!


---

Comment by cosh created at 2012-10-11 11:54:46

Today I've added the generic implementation for `c_lin_cnf` using some combinatorics. By now I've restricted the `cutting_number` to range(3,8) (see line 58). I don't think greater `cutting_numbers` are really that useful as the number of clauses grows exponentially. Nevertheless, if required, this restriction can be easily removed. Well now only some further error checking is missing...


---

Comment by malb created at 2015-05-18 22:36:20

I think it was decided to drop it (I talked to Philipp ages ago)
