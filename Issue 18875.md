# Issue 18875: Add a function "isometry" to the quadratic forms package.

archive/issues_018875.json:
```json
{
    "body": "CC:  annahaensch tgaona\n\nKeywords: isometry\n\nAdds a function \"isometry\" that returns an isometry from one quadratic form to another, provided that it exists.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19112\n\n",
    "created_at": "2015-08-30T20:00:56Z",
    "labels": [
        "quadratic forms",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Add a function \"isometry\" to the quadratic forms package.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18875",
    "user": "tgaona"
}
```
CC:  annahaensch tgaona

Keywords: isometry

Adds a function "isometry" that returns an isometry from one quadratic form to another, provided that it exists.

Issue created by migration from https://trac.sagemath.org/ticket/19112





---

archive/issue_comments_258366.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-11-01T21:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258366",
    "user": "tgaona"
}
```

New commits:



---

archive/issue_comments_258367.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-11-01T21:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258367",
    "user": "tgaona"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_258368.json:
```json
{
    "body": "This looks like it reinvents the already-existing method `is_globally_equivalent_to`. What does your code add?",
    "created_at": "2015-11-02T18:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258368",
    "user": "jdemeyer"
}
```

This looks like it reinvents the already-existing method `is_globally_equivalent_to`. What does your code add?



---

archive/issue_comments_258369.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-11-02T18:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258369",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_258370.json:
```json
{
    "body": "Hi Jeroen,\n\nSorry for the slow response. This method should be able to return isometries for forms over fields, where I believe is_globally_equivalent_to just works over the ring of integers. For example:\n\n\n```\nsage: Q = DiagonalQuadraticForm(QQ, [1, 5])\nsage: F = QuadraticForm(QQ, 2, [1, 12, 81])\nsage: Q.is_globally_equivalent_to(F)\nFalse\nsage: Q.is_rationally_isometric(F)\nTrue\nsage: T = Q.isometry(F)\nsage: T\n[  1  -2]\n[  0 1/3]\nsage: Q.Gram_matrix() == T.transpose() * F.Gram_matrix() * T\nTrue\n```\n\n\nSo Q is equivalent to F over the rationals, but is_globally_equivalent_to doesn't recognize this. This method was intended to complement the is_rationally_isometric method, so perhaps it should be refactored to work in a similar manner as is_globally_equivalent_to, i.e, adding an optional flag to is_rationally_isometric to return the transition matrix for the isometry.",
    "created_at": "2015-11-03T22:42:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258370",
    "user": "tgaona"
}
```

Hi Jeroen,

Sorry for the slow response. This method should be able to return isometries for forms over fields, where I believe is_globally_equivalent_to just works over the ring of integers. For example:


```
sage: Q = DiagonalQuadraticForm(QQ, [1, 5])
sage: F = QuadraticForm(QQ, 2, [1, 12, 81])
sage: Q.is_globally_equivalent_to(F)
False
sage: Q.is_rationally_isometric(F)
True
sage: T = Q.isometry(F)
sage: T
[  1  -2]
[  0 1/3]
sage: Q.Gram_matrix() == T.transpose() * F.Gram_matrix() * T
True
```


So Q is equivalent to F over the rationals, but is_globally_equivalent_to doesn't recognize this. This method was intended to complement the is_rationally_isometric method, so perhaps it should be refactored to work in a similar manner as is_globally_equivalent_to, i.e, adding an optional flag to is_rationally_isometric to return the transition matrix for the isometry.



---

archive/issue_comments_258371.json:
```json
{
    "body": "Right, I think it's better to mention this more clearly in the documentation (I always get confused when quadratic-form people talk about isomorphic/isometric/equivalent, I never know what they mean).",
    "created_at": "2015-11-04T13:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258371",
    "user": "jdemeyer"
}
```

Right, I think it's better to mention this more clearly in the documentation (I always get confused when quadratic-form people talk about isomorphic/isometric/equivalent, I never know what they mean).



---

archive/issue_comments_258372.json:
```json
{
    "body": "That being said, I think you are really over-complicating the algorithm.\n\nSuppose one of the forms is given by the diagonal `5*x0^2 + ...`. Then really all you need to do in the first step is to find a vector `v` of \"length\" 5. This can be done with some algorithm based on PARI's `qfsolve()`: the only issue is that `qfsolve()` finds a projective point, but you really want an affine point.\n\nSo I suggest to do the following:\n1. implement an affine version of `qfsolve()` to solve equations of the form `Q(x) = C` where `Q` is a quadratic form and `C` is a constant. Do this in a separate Sage ticket.\n2. use this new function to implement `isometry` on this ticket.\n\nThis will have several major advantages:\n1. your code will be a lot faster.\n2. it will no longer run forever if there is isometry (which is unacceptable).\n3. you can remove the assumption that your quadratic form is positive-definite.",
    "created_at": "2015-11-04T14:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258372",
    "user": "jdemeyer"
}
```

That being said, I think you are really over-complicating the algorithm.

Suppose one of the forms is given by the diagonal `5*x0^2 + ...`. Then really all you need to do in the first step is to find a vector `v` of "length" 5. This can be done with some algorithm based on PARI's `qfsolve()`: the only issue is that `qfsolve()` finds a projective point, but you really want an affine point.

So I suggest to do the following:
1. implement an affine version of `qfsolve()` to solve equations of the form `Q(x) = C` where `Q` is a quadratic form and `C` is a constant. Do this in a separate Sage ticket.
2. use this new function to implement `isometry` on this ticket.

This will have several major advantages:
1. your code will be a lot faster.
2. it will no longer run forever if there is isometry (which is unacceptable).
3. you can remove the assumption that your quadratic form is positive-definite.



---

archive/issue_comments_258373.json:
```json
{
    "body": "Also, your branch is based on an old version of Sage. You should really develop from the latest beta version (currently `6.10.beta2`).",
    "created_at": "2015-11-04T14:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258373",
    "user": "jdemeyer"
}
```

Also, your branch is based on an old version of Sage. You should really develop from the latest beta version (currently `6.10.beta2`).



---

archive/issue_comments_258374.json:
```json
{
    "body": "Please follow [http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings) for the correct formatting of docstrings.",
    "created_at": "2015-11-04T14:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258374",
    "user": "jdemeyer"
}
```

Please follow [http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings](http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings) for the correct formatting of docstrings.



---

archive/issue_comments_258375.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2015-11-04T14:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258375",
    "user": "jdemeyer"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_258376.json:
```json
{
    "body": "I will make it more clear in the documentation that the method returns a transformation matrix, as opposed to saying it returns an isometry.\n\nAs to your second point, I agree that a cleaner, more efficient replacement for the first step of the algorithm is very desirable. However, I have looked at the source for PARI's `qfsolve()` and it isn't clear to me how to adapt it to return an affine vector `x` such that `Q(x) = C`. I would appreciate it if you could offer more guidance here, otherwise, I'm not sure how to proceed.\n\n> 2. it will no longer run forever if there is isometry (which is unacceptable).\n\nI can fix this by throwing an exception when `is_rationally_isometric()` returns false for the two forms. The reason I didn't include this initially is that I was working off of Sage 6.8 but `is_rationally_isometric()` was added in 6.9.\n\nI will fix the formatting in the docstring.",
    "created_at": "2015-11-04T22:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258376",
    "user": "tgaona"
}
```

I will make it more clear in the documentation that the method returns a transformation matrix, as opposed to saying it returns an isometry.

As to your second point, I agree that a cleaner, more efficient replacement for the first step of the algorithm is very desirable. However, I have looked at the source for PARI's `qfsolve()` and it isn't clear to me how to adapt it to return an affine vector `x` such that `Q(x) = C`. I would appreciate it if you could offer more guidance here, otherwise, I'm not sure how to proceed.

> 2. it will no longer run forever if there is isometry (which is unacceptable).

I can fix this by throwing an exception when `is_rationally_isometric()` returns false for the two forms. The reason I didn't include this initially is that I was working off of Sage 6.8 but `is_rationally_isometric()` was added in 6.9.

I will fix the formatting in the docstring.



---

archive/issue_comments_258377.json:
```json
{
    "body": "Given that your new functionality relies on `rational_diagonal_form()`, it would be a lot better in fact to base your patch on top of #18669.",
    "created_at": "2015-11-05T10:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258377",
    "user": "jdemeyer"
}
```

Given that your new functionality relies on `rational_diagonal_form()`, it would be a lot better in fact to base your patch on top of #18669.



---

archive/issue_comments_258378.json:
```json
{
    "body": "About solving quadratic forms:\n\nSuppose you want to solve `Q(x) = c`. Consider the quadratic form `Q(x) - c*z^2 = 0`, where `z` is an extra variable. Find a solution `(x,z)` to this quadratic form using `qfsolve()`.\n\n**Case 1**: If `z != 0`, then `Q(x/z) = c`.\n\n**Case 2**: We found a solution `Q(x) = 0`. Let `e` be any vector such that `B(x,e) != 0`, where `B` is the bilinear form corresponding to `Q`. To find `e`, just try all unit vectors `(0,..0,1,0...0)`. Let `a = (c - Q(e))/B(x,e)` and let `y = e + a*x`. Then `Q(y) = c`.\n\nIt would be great if you could implement this on a separate ticket.",
    "created_at": "2015-11-05T11:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258378",
    "user": "jdemeyer"
}
```

About solving quadratic forms:

Suppose you want to solve `Q(x) = c`. Consider the quadratic form `Q(x) - c*z^2 = 0`, where `z` is an extra variable. Find a solution `(x,z)` to this quadratic form using `qfsolve()`.

**Case 1**: If `z != 0`, then `Q(x/z) = c`.

**Case 2**: We found a solution `Q(x) = 0`. Let `e` be any vector such that `B(x,e) != 0`, where `B` is the bilinear form corresponding to `Q`. To find `e`, just try all unit vectors `(0,..0,1,0...0)`. Let `a = (c - Q(e))/B(x,e)` and let `y = e + a*x`. Then `Q(y) = c`.

It would be great if you could implement this on a separate ticket.



---

archive/issue_comments_258379.json:
```json
{
    "body": "Thanks for the clear explanation. I've opened up a separate ticket for this, and will address the various changes you've suggested.",
    "created_at": "2015-11-06T01:05:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258379",
    "user": "tgaona"
}
```

Thanks for the clear explanation. I've opened up a separate ticket for this, and will address the various changes you've suggested.



---

archive/issue_comments_258380.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-12T21:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258380",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258381.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-12T21:15:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258381",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258382.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-01T22:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258382",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258383.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-12-01T22:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258383",
    "user": "tgaona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_258384.json:
```json
{
    "body": "Can you review #18669?",
    "created_at": "2015-12-02T08:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258384",
    "user": "jdemeyer"
}
```

Can you review #18669?



---

archive/issue_comments_258385.json:
```json
{
    "body": "The patchbot complains about a TAB character.",
    "created_at": "2015-12-04T14:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258385",
    "user": "jdemeyer"
}
```

The patchbot complains about a TAB character.



---

archive/issue_comments_258386.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-04T17:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258386",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258387.json:
```json
{
    "body": "I haven't looked closely at the code, but some clean-up should be done:\n1. the function `diagonal_isometry` should have doctests\n2. remove commented code like `#print ...`",
    "created_at": "2015-12-05T21:53:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258387",
    "user": "jdemeyer"
}
```

I haven't looked closely at the code, but some clean-up should be done:
1. the function `diagonal_isometry` should have doctests
2. remove commented code like `#print ...`



---

archive/issue_comments_258388.json:
```json
{
    "body": "Why does the final term need to be a special case? I don't like special cases unless they are justified.",
    "created_at": "2015-12-05T21:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258388",
    "user": "jdemeyer"
}
```

Why does the final term need to be a special case? I don't like special cases unless they are justified.



---

archive/issue_comments_258389.json:
```json
{
    "body": "Are you sure it's worth to check `is_diagonal`? Is there significant gain?\n\nAre you sure it's worth to check `is_rationally_isometric`? I would just try to compute the isometry and let it fail if it doesn't exist.",
    "created_at": "2015-12-05T21:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258389",
    "user": "jdemeyer"
}
```

Are you sure it's worth to check `is_diagonal`? Is there significant gain?

Are you sure it's worth to check `is_rationally_isometric`? I would just try to compute the isometry and let it fail if it doesn't exist.



---

archive/issue_comments_258390.json:
```json
{
    "body": "Do you really need the `copy` in the function `isometry`?",
    "created_at": "2015-12-05T21:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258390",
    "user": "jdemeyer"
}
```

Do you really need the `copy` in the function `isometry`?



---

archive/issue_comments_258391.json:
```json
{
    "body": "Can you explain this block of code:\n\n```diff\n+            # Find a vector w such that Q(v) = F(w) where v = [1, ..., 0]\n+            # v, w = vectors_of_common_length_dev(Q, F, q_basis, f_basis, i)\n+            v = vector([0] * (n - i))\n+            index = 0;\n+            while True:\n+                v[index] = v[index] + 1\n+                index = (index + 1) % (n - i)\n+                c = Q(v)\n+                try:\n+                    w = F.solve(c)\n+                    #print(\"Find vectors {0} and {1} such that Q(v) = F(w)\".format(v, w))        \n+                    if not zero_row(f_basis, w, i) and not zero_row(q_basis, v, i):\n+                        break\n+                except ArithmeticError:\n+                    # No solution found, try another vector.\n+                    pass\n```\n",
    "created_at": "2015-12-05T21:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258391",
    "user": "jdemeyer"
}
```

Can you explain this block of code:

```diff
+            # Find a vector w such that Q(v) = F(w) where v = [1, ..., 0]
+            # v, w = vectors_of_common_length_dev(Q, F, q_basis, f_basis, i)
+            v = vector([0] * (n - i))
+            index = 0;
+            while True:
+                v[index] = v[index] + 1
+                index = (index + 1) % (n - i)
+                c = Q(v)
+                try:
+                    w = F.solve(c)
+                    #print("Find vectors {0} and {1} such that Q(v) = F(w)".format(v, w))        
+                    if not zero_row(f_basis, w, i) and not zero_row(q_basis, v, i):
+                        break
+                except ArithmeticError:
+                    # No solution found, try another vector.
+                    pass
```




---

archive/issue_comments_258392.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-12-05T21:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258392",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_258393.json:
```json
{
    "body": "Can you move the helper functions out of the `diagonal_isometry` function and also doctest them?",
    "created_at": "2015-12-05T22:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258393",
    "user": "jdemeyer"
}
```

Can you move the helper functions out of the `diagonal_isometry` function and also doctest them?



---

archive/issue_comments_258394.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-10T17:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258394",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258395.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-10T20:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258395",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258396.json:
```json
{
    "body": "Replying to [comment:23 jdemeyer]:\n> Why does the final term need to be a special case? I don't like special cases unless they are justified.\n\nIt was originally necessary because the `short_vector_list_up_to_length()` function didn't work for 1-dimensional quadratic forms, and the final iteration of the algorithm operates on two 1-dimensional forms. However, since that's been replaced by the PARI method, it's no longer necessary to have it as a special case, so thanks for pointing that out.\n\n> Are you sure it's worth to check `is_diagonal`? Is there significant gain?\n\nI suppose not, and simplifies the code to remove it, so I will.\n\n> Are you sure it's worth to check `is_rationally_isometric`?\n\nI believe this is necessary. The loop that looks for two vectors such that the modified bases including them will be non-singular will try vectors indefinitely until it finds a satisfactory pair. If the forms aren't equivalent there's no guarantee such a pair will be found.\n\n> Do you really need the `copy` in the function `isometry`?\n\nNope. That's a relic from an early version when `isometry` and `diagonal_isometry` were one function. I'll remove it, thanks for catching that.\n\n> Can you explain this block of code:\n\n```\n+            # Find a vector w such that Q(v) = F(w) where v = [1, ..., 0]\n+            # v, w = vectors_of_common_length_dev(Q, F, q_basis, f_basis, i)\n+            v = vector([0] * (n - i))\n+            index = 0;\n+            while True:\n+                v[index] = v[index] + 1\n+                index = (index + 1) % (n - i)\n+                c = Q(v)\n+                try:\n+                    w = F.solve(c)\n+                    #print(\"Find vectors {0} and {1} such that Q(v) = F(w)\".format(v, w))        \n+                    if not zero_row(f_basis, w, i) and not zero_row(q_basis, v, i):\n+                        break\n+                except ArithmeticError:\n+                    # No solution found, try another vector.\n+                    pass\n```\n\n\nThis block finds a pair of vectors `v` and `w` such that `Q(v) == F(v)`. These vectors will represent a linear combination of the vectors in the basis for each quadratic form. It's necessary that modifying the bases to include these vectors not produce a basis whose matrix is singular. So essentially this loop just looks for a pair of vectors satsifying these properties. It starts with `v = [1, 0, 0]` (for a 3-dimensional form) and finds `w` by calling `F.solve(Q(v))`. If this pair doesn't work, it finds a new `v` and starts over. I get new `v`'s by incrementing each term in the vector so the first few vectors that are generated are: `[1, 0, 0], [1, 1, 0], [1, 1, 1], [2, 1, 1]...`\n\nAlso, I realized that matrices have an `is_singular` function, so I'm getting rid of the `zero_row` function.\n----\nNew commits:",
    "created_at": "2015-12-10T20:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258396",
    "user": "tgaona"
}
```

Replying to [comment:23 jdemeyer]:
> Why does the final term need to be a special case? I don't like special cases unless they are justified.

It was originally necessary because the `short_vector_list_up_to_length()` function didn't work for 1-dimensional quadratic forms, and the final iteration of the algorithm operates on two 1-dimensional forms. However, since that's been replaced by the PARI method, it's no longer necessary to have it as a special case, so thanks for pointing that out.

> Are you sure it's worth to check `is_diagonal`? Is there significant gain?

I suppose not, and simplifies the code to remove it, so I will.

> Are you sure it's worth to check `is_rationally_isometric`?

I believe this is necessary. The loop that looks for two vectors such that the modified bases including them will be non-singular will try vectors indefinitely until it finds a satisfactory pair. If the forms aren't equivalent there's no guarantee such a pair will be found.

> Do you really need the `copy` in the function `isometry`?

Nope. That's a relic from an early version when `isometry` and `diagonal_isometry` were one function. I'll remove it, thanks for catching that.

> Can you explain this block of code:

```
+            # Find a vector w such that Q(v) = F(w) where v = [1, ..., 0]
+            # v, w = vectors_of_common_length_dev(Q, F, q_basis, f_basis, i)
+            v = vector([0] * (n - i))
+            index = 0;
+            while True:
+                v[index] = v[index] + 1
+                index = (index + 1) % (n - i)
+                c = Q(v)
+                try:
+                    w = F.solve(c)
+                    #print("Find vectors {0} and {1} such that Q(v) = F(w)".format(v, w))        
+                    if not zero_row(f_basis, w, i) and not zero_row(q_basis, v, i):
+                        break
+                except ArithmeticError:
+                    # No solution found, try another vector.
+                    pass
```


This block finds a pair of vectors `v` and `w` such that `Q(v) == F(v)`. These vectors will represent a linear combination of the vectors in the basis for each quadratic form. It's necessary that modifying the bases to include these vectors not produce a basis whose matrix is singular. So essentially this loop just looks for a pair of vectors satsifying these properties. It starts with `v = [1, 0, 0]` (for a 3-dimensional form) and finds `w` by calling `F.solve(Q(v))`. If this pair doesn't work, it finds a new `v` and starts over. I get new `v`'s by incrementing each term in the vector so the first few vectors that are generated are: `[1, 0, 0], [1, 1, 0], [1, 1, 1], [2, 1, 1]...`

Also, I realized that matrices have an `is_singular` function, so I'm getting rid of the `zero_row` function.
----
New commits:



---

archive/issue_comments_258397.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-12-10T20:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258397",
    "user": "tgaona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_258398.json:
```json
{
    "body": "More comments later, but already this: you make changes to `short_vector_list_up_to_length()` which I think do not belong to this ticket. In fact, it looks more likely that they belong to #14868. So I suggest you undo those changes here and move them to a new branch on #14868.",
    "created_at": "2015-12-12T16:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258398",
    "user": "jdemeyer"
}
```

More comments later, but already this: you make changes to `short_vector_list_up_to_length()` which I think do not belong to this ticket. In fact, it looks more likely that they belong to #14868. So I suggest you undo those changes here and move them to a new branch on #14868.



---

archive/issue_comments_258399.json:
```json
{
    "body": "Replying to [comment:31 tgaona]:\n> This block finds a pair of vectors `v` and `w` such that `Q(v) == F(v)`. These vectors will represent a linear combination of the vectors in the basis for each quadratic form. It's necessary that modifying the bases to include these vectors not produce a basis whose matrix is singular. So essentially this loop just looks for a pair of vectors satsifying these properties. It starts with `v = [1, 0, 0]` (for a 3-dimensional form) and finds `w` by calling `F.solve(Q(v))`. If this pair doesn't work, it finds a new `v` and starts over. I get new `v`'s by incrementing each term in the vector so the first few vectors that are generated are: `[1, 0, 0], [1, 1, 0], [1, 1, 1], [2, 1, 1]...`\n\nSorry, I still don't understand the algorithm. You really need more comments *in the code*. In particular, you need to explain the purpose of the variables `i`, `q_basis`, `f_basis`, `qb` and `fb`.\n\nMy feeling is that the current algorithm is too complicated (I don't think you need to loop for `v`), but I cannot really say how to improve it since I don't understand it.",
    "created_at": "2015-12-12T16:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258399",
    "user": "jdemeyer"
}
```

Replying to [comment:31 tgaona]:
> This block finds a pair of vectors `v` and `w` such that `Q(v) == F(v)`. These vectors will represent a linear combination of the vectors in the basis for each quadratic form. It's necessary that modifying the bases to include these vectors not produce a basis whose matrix is singular. So essentially this loop just looks for a pair of vectors satsifying these properties. It starts with `v = [1, 0, 0]` (for a 3-dimensional form) and finds `w` by calling `F.solve(Q(v))`. If this pair doesn't work, it finds a new `v` and starts over. I get new `v`'s by incrementing each term in the vector so the first few vectors that are generated are: `[1, 0, 0], [1, 1, 0], [1, 1, 1], [2, 1, 1]...`

Sorry, I still don't understand the algorithm. You really need more comments *in the code*. In particular, you need to explain the purpose of the variables `i`, `q_basis`, `f_basis`, `qb` and `fb`.

My feeling is that the current algorithm is too complicated (I don't think you need to loop for `v`), but I cannot really say how to improve it since I don't understand it.



---

archive/issue_comments_258400.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-12-22T13:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258400",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_258401.json:
```json
{
    "body": "I have looked over tgaona's algorithm, and it makes sense to me.  The block of code mentioned in comment 26 is a bit confusing, but I believe that it is necessary since its eventually necessary to invert, and therefore avoid the possibility of having a singular change of basis matrix.  \n\nAnother source of confusion, I believe, is in the description of the helper function `modify basis`.  I do believe that it does precisely what it needs to do in the context of the code, but the description is not quite correct, and a little bit misleading, since it is always a function acting on a submatrix of the original basis matrix. A better description might read \"Given a lattice L with basis matrix M and a vector, v=(v_1,...,v_n) of length n, this function extends the basis {b_1,...,b_n} of an underlying nxn orthogonal component of L to contain the vector v_1b_1+...+v_nb_n.\"   \n\nThe functions `diagonal_isometry`, `compute_gram_matrix_from_basis`, `modify_basis`, and `graham_schmidt` are all very particular to this parent function `isometry`, so (I believe) the standard Sage convention is to begin those with an underscore.  Also, I believe a better name for the parent function would be `explicit_isometry` just to differentiate this from the binary function returning True or False.  \n\nOther than that, I'll concede that there may very well be a faster way to run this algorithm, but as tgaona has it, it's certainly correct.",
    "created_at": "2016-01-11T03:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258401",
    "user": "annahaensch"
}
```

I have looked over tgaona's algorithm, and it makes sense to me.  The block of code mentioned in comment 26 is a bit confusing, but I believe that it is necessary since its eventually necessary to invert, and therefore avoid the possibility of having a singular change of basis matrix.  

Another source of confusion, I believe, is in the description of the helper function `modify basis`.  I do believe that it does precisely what it needs to do in the context of the code, but the description is not quite correct, and a little bit misleading, since it is always a function acting on a submatrix of the original basis matrix. A better description might read "Given a lattice L with basis matrix M and a vector, v=(v_1,...,v_n) of length n, this function extends the basis {b_1,...,b_n} of an underlying nxn orthogonal component of L to contain the vector v_1b_1+...+v_nb_n."   

The functions `diagonal_isometry`, `compute_gram_matrix_from_basis`, `modify_basis`, and `graham_schmidt` are all very particular to this parent function `isometry`, so (I believe) the standard Sage convention is to begin those with an underscore.  Also, I believe a better name for the parent function would be `explicit_isometry` just to differentiate this from the binary function returning True or False.  

Other than that, I'll concede that there may very well be a faster way to run this algorithm, but as tgaona has it, it's certainly correct.



---

archive/issue_comments_258402.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-12T15:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258402",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258403.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-01-17T02:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258403",
    "user": "tgaona"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_258404.json:
```json
{
    "body": "Sorry, but [comment:34] hasn't been addressed yet. The code is simply too hard to understand and therefore impossible to review for me.\n\nAnd why did you rename `isometry` -> `explicit_isometry`? That's much harder to find.",
    "created_at": "2016-01-17T09:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258404",
    "user": "jdemeyer"
}
```

Sorry, but [comment:34] hasn't been addressed yet. The code is simply too hard to understand and therefore impossible to review for me.

And why did you rename `isometry` -> `explicit_isometry`? That's much harder to find.



---

archive/issue_comments_258405.json:
```json
{
    "body": "Merge conflicts with Sage 7.0",
    "created_at": "2016-01-20T09:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258405",
    "user": "jdemeyer"
}
```

Merge conflicts with Sage 7.0



---

archive/issue_comments_258406.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-20T09:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258406",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_258407.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-30T18:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258407",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258408.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-09T19:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258408",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258409.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-09T19:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258409",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258410.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-09T19:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258410",
    "user": "tgaona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_258411.json:
```json
{
    "body": "Why this added line?\n\n```diff\n+            v = parilist[i]\n```\n",
    "created_at": "2016-03-10T07:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258411",
    "user": "jdemeyer"
}
```

Why this added line?

```diff
+            v = parilist[i]
```




---

archive/issue_comments_258412.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-10T07:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258412",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_258413.json:
```json
{
    "body": "I am still missing some high-level explanation of the algorithm. For example, what is `FM`?",
    "created_at": "2016-03-10T07:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258413",
    "user": "jdemeyer"
}
```

I am still missing some high-level explanation of the algorithm. For example, what is `FM`?



---

archive/issue_comments_258414.json:
```json
{
    "body": "I understand the algorithm, I don't think it's so complicated.  It just looks for a vector w in W of length corresponding to, V[0][0], the upper left most entry in V.  Then it simply extends the basis of W to contain w, preforms Gram Schmidt (fixing w), and then picks off <Q(w)> as an orthogonal component of W and <V[0][0]> as an orthogonal component of V.  I feel satisfied the the algorithm does what it claims to do, and that it is mathematically correct. \n\nA few notes on the documentation: \n\n1.  In your documentation for `_diagonal_isometry()` you call the function `isometry()` (of course it works out to be the same thing here, since the forms are diagonal to begin with. \n\n2. Your documentation for `_gram_schmidt()` is a bit misleading, since it looks like you are treating the columns of a Gram matrix as a set of vectors to be orthogonalized, rather, do the process on some sort of (preferably basis) matrix.   \n\nIn response to comment 45, I'm also not sure why v=parilist[i] got added.  Is there a reason you're touching `short_vector_list_up_to_length()`?  I think something may have happened on the merge.",
    "created_at": "2016-03-10T22:30:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258414",
    "user": "annahaensch"
}
```

I understand the algorithm, I don't think it's so complicated.  It just looks for a vector w in W of length corresponding to, V[0][0], the upper left most entry in V.  Then it simply extends the basis of W to contain w, preforms Gram Schmidt (fixing w), and then picks off <Q(w)> as an orthogonal component of W and <V[0][0]> as an orthogonal component of V.  I feel satisfied the the algorithm does what it claims to do, and that it is mathematically correct. 

A few notes on the documentation: 

1.  In your documentation for `_diagonal_isometry()` you call the function `isometry()` (of course it works out to be the same thing here, since the forms are diagonal to begin with. 

2. Your documentation for `_gram_schmidt()` is a bit misleading, since it looks like you are treating the columns of a Gram matrix as a set of vectors to be orthogonalized, rather, do the process on some sort of (preferably basis) matrix.   

In response to comment 45, I'm also not sure why v=parilist[i] got added.  Is there a reason you're touching `short_vector_list_up_to_length()`?  I think something may have happened on the merge.



---

archive/issue_comments_258415.json:
```json
{
    "body": "Replying to [comment:47 annahaensch]:\n> I understand the algorithm\n\nThe fact that **you** understand it, is not sufficient. It should be documented in the code such that **everybody** can understand it.",
    "created_at": "2016-03-11T08:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258415",
    "user": "jdemeyer"
}
```

Replying to [comment:47 annahaensch]:
> I understand the algorithm

The fact that **you** understand it, is not sufficient. It should be documented in the code such that **everybody** can understand it.



---

archive/issue_comments_258416.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-03-11T19:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258416",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258417.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-11T19:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258417",
    "user": "tgaona"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_258418.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-28T13:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258418",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258419.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-29T12:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258419",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_258420.json:
```json
{
    "body": "Thank you for writing this code. It is well documented and easy to read. \nThe basic algorithm works. Good job!\nAfter computing some examples I noticed that coefficients tend to explode and\nexamples beyond n=4 take ages. Is this expected? Is there an algorithm avoiding coefficient blowups?\n\nI can review it. Here are some comments:\n\n- use imperative in the docstrings: \"Computes something\". Should rather be: \"Compute something\" \n- There is no need to introduce a new method `isometry()`. Instead give `is_rationally_isometric` a new argument `return_matrix`. You can model analogous behavior as in `is_globally_equivalent_to`.\n\n- In the current implementation you do not check the `base_ring` is `ZZ` or `QQ`. This should be done. Or does it work more generally? For example the code does not work over the p-adics. \n- You do not need a new method`_compute_gram_matrix_from_basis`. Instead you can just use `Q(T).Gram_matrix_rational()`. Here `Q` is a quadratic form and `T` a transformation matrix.\n- make sure degenerate quadratic forms work as well and doctest it.\n- add a random doctest. For example something in the direction of:\n\n```\nsage: n = 4\nsage: G = matrix.random(QQ,n) #random\nsage: G = G + G.transpose()\nsage: Q = QuadraticForm(QQ,G)\nsage: T = matrix.random(QQ,n)\nsage: S = Q.isometry(Q(T))\nsage: Q == Q(S)\nTrue\n```\n",
    "created_at": "2017-10-15T19:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258420",
    "user": "sbrandhorst"
}
```

Thank you for writing this code. It is well documented and easy to read. 
The basic algorithm works. Good job!
After computing some examples I noticed that coefficients tend to explode and
examples beyond n=4 take ages. Is this expected? Is there an algorithm avoiding coefficient blowups?

I can review it. Here are some comments:

- use imperative in the docstrings: "Computes something". Should rather be: "Compute something" 
- There is no need to introduce a new method `isometry()`. Instead give `is_rationally_isometric` a new argument `return_matrix`. You can model analogous behavior as in `is_globally_equivalent_to`.

- In the current implementation you do not check the `base_ring` is `ZZ` or `QQ`. This should be done. Or does it work more generally? For example the code does not work over the p-adics. 
- You do not need a new method`_compute_gram_matrix_from_basis`. Instead you can just use `Q(T).Gram_matrix_rational()`. Here `Q` is a quadratic form and `T` a transformation matrix.
- make sure degenerate quadratic forms work as well and doctest it.
- add a random doctest. For example something in the direction of:

```
sage: n = 4
sage: G = matrix.random(QQ,n) #random
sage: G = G + G.transpose()
sage: Q = QuadraticForm(QQ,G)
sage: T = matrix.random(QQ,n)
sage: S = Q.isometry(Q(T))
sage: Q == Q(S)
True
```




---

archive/issue_comments_258421.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-30T18:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258421",
    "user": "sbrandhorst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_258422.json:
```json
{
    "body": "the patchbot results look OK (apart from pyflake plugin, which might tell you how to improve the code).",
    "created_at": "2019-05-28T12:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258422",
    "user": "dimpase"
}
```

the patchbot results look OK (apart from pyflake plugin, which might tell you how to improve the code).



---

archive/issue_comments_258423.json:
```json
{
    "body": "Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).",
    "created_at": "2019-06-14T14:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258423",
    "user": "embray"
}
```

Tickets still needing working or clarification should be moved to the next release milestone at the soonest (please feel free to revert if you think the ticket is close to being resolved).



---

archive/issue_comments_258424.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258424",
    "user": "embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_258425.json:
```json
{
    "body": "Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258425",
    "user": "mkoeppe"
}
```

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_258426.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-10-02T09:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258426",
    "user": "sbrandhorst"
}
```

New commits:



---

archive/issue_comments_258427.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-10-02T09:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258427",
    "user": "sbrandhorst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_258428.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-02T09:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258428",
    "user": "sbrandhorst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_258429.json:
```json
{
    "body": "I guess my contribution counts as a reviewer patch...",
    "created_at": "2020-10-02T09:31:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258429",
    "user": "sbrandhorst"
}
```

I guess my contribution counts as a reviewer patch...



---

archive/issue_comments_258430.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-07T16:23:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18875",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18875#issuecomment-258430",
    "user": "vbraun"
}
```

Resolution: fixed
