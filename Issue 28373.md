# Issue 28373: coercion bug with polynomial ring over matrix space

Issue created by migration from https://trac.sagemath.org/ticket/28610

Original creator: vdelecroix

Original creation time: 2019-10-15 17:29:36


```
sage: M = MatrixSpace(ZZ, 2)
sage: x = polygen(M)
sage: p = M([1,0,1,2]) + M([-1,2,3,0]) * x
sage: p / 2
Traceback (most recent call last):
/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:6950)()
    839         try:
--> 840             return self.__cached_methods[name]
    841         except KeyError:

KeyError: '_coerce_'

During handling of the above exception, another exception occurred:

AttributeError                            Traceback (most recent call last)
<ipython-input-27-c81a6e48866e> in <module>()
----> 1 p / Integer(2)

/opt/sage/local/lib/python3.7/site-packages/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__truediv__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:22911)()
   2235             R = (<Polynomial>left)._parent._base
   2236             try:
-> 2237                 x = R._coerce_(right)
   2238                 return left * ~x
   2239             except TypeError:

/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:6872)()
    832             AttributeError: 'PrimeNumbers_with_category' object has no attribute 'sadfasdf'
    833         """
--> 834         return self.getattr_from_category(name)
    835 
    836     cdef getattr_from_category(self, name):

/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:7035)()
    847                 cls = self._category.parent_class
    848 
--> 849             attr = getattr_from_other_class(self, cls, name)
    850             self.__cached_methods[name] = attr
    851             return attr

/opt/sage/local/lib/python3.7/site-packages/sage/cpython/getattr.pyx in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:2547)()
    387         dummy_error_message.cls = type(self)
    388         dummy_error_message.name = name
--> 389         raise AttributeError(dummy_error_message)
    390     cdef PyObject* attr = instance_getattr(cls, name)
    391     if attr is NULL:

AttributeError: 'MatrixSpace_with_category' object has no attribute '_coerce_'
```



---

Comment by embray created at 2020-01-06 14:10:03

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.
