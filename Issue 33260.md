# Issue 33260: coerce vs _coerce_

archive/issues_033260.json:
```json
{
    "body": "CC:  @mezzarobba\n\nEven though the `_coerce_` method is only implemented in the deprecated sage.structure.parent_old.Parent it is still used in some places. The current situation prevents to build a ring that inherits from Parent and use it as a base ring for the multivariate polynomial ring.\n\nWe replace all usage of `_coerce_` by `coerce` and deprecate the former.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33497\n\n",
    "created_at": "2022-03-13T20:56:55Z",
    "labels": [
        "component: algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "coerce vs _coerce_",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33260",
    "user": "https://github.com/videlec"
}
```
CC:  @mezzarobba

Even though the `_coerce_` method is only implemented in the deprecated sage.structure.parent_old.Parent it is still used in some places. The current situation prevents to build a ring that inherits from Parent and use it as a base ring for the multivariate polynomial ring.

We replace all usage of `_coerce_` by `coerce` and deprecate the former.

Issue created by migration from https://trac.sagemath.org/ticket/33497





---

archive/issue_comments_472934.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-03-13T22:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472934",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_472935.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-03-13T22:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472935",
    "user": "https://github.com/videlec"
}
```

New commits:



---

archive/issue_comments_472936.json:
```json
{
    "body": "This is definitely a step in the right direction. So +1 on this ticket. Definitely in the documentation it would be good to use `coerce()`. I am a little worried in the code that it might be slower in core code (integers (mod ring), rationals, and polynomial rings specifically). This might be something we just have to swallow when we finish the transition, but I am worried this might hide slightly potential optimizations. I know there are a lot of 'if's in that, so it is not a strong argument. I would probably feel better if there were some timings. What are your thoughts on this?",
    "created_at": "2022-03-14T07:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472936",
    "user": "https://github.com/tscrim"
}
```

This is definitely a step in the right direction. So +1 on this ticket. Definitely in the documentation it would be good to use `coerce()`. I am a little worried in the code that it might be slower in core code (integers (mod ring), rationals, and polynomial rings specifically). This might be something we just have to swallow when we finish the transition, but I am worried this might hide slightly potential optimizations. I know there are a lot of 'if's in that, so it is not a strong argument. I would probably feel better if there were some timings. What are your thoughts on this?



---

archive/issue_comments_472937.json:
```json
{
    "body": "Currently there is an indirection : `_coerce_`/`_coerce_c` calls `coerce`. So what I wrote should make everything faster. With the branch, you can see the indirection\n\n```\nsage: QQ._coerce_(3)\nDeprecationWarning: _coerce_ is deprecated, use coerce instead\nSee https://trac.sagemath.org/33497 for details.\n3\n```\n",
    "created_at": "2022-03-14T07:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472937",
    "user": "https://github.com/videlec"
}
```

Currently there is an indirection : `_coerce_`/`_coerce_c` calls `coerce`. So what I wrote should make everything faster. With the branch, you can see the indirection

```
sage: QQ._coerce_(3)
DeprecationWarning: _coerce_ is deprecated, use coerce instead
See https://trac.sagemath.org/33497 for details.
3
```




---

archive/issue_comments_472938.json:
```json
{
    "body": "I see. Thanks. So every parent that you changed already has an `element_constructor` then (and hence making that an indirection)?",
    "created_at": "2022-03-14T08:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472938",
    "user": "https://github.com/tscrim"
}
```

I see. Thanks. So every parent that you changed already has an `element_constructor` then (and hence making that an indirection)?



---

archive/issue_comments_472939.json:
```json
{
    "body": "I did not modify any parent. If tests pass, then all parents that are tested have an element constructor...",
    "created_at": "2022-03-14T09:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472939",
    "user": "https://github.com/videlec"
}
```

I did not modify any parent. If tests pass, then all parents that are tested have an element constructor...



---

archive/issue_comments_472940.json:
```json
{
    "body": "I wasn\u2019t be precise enough, but for the parents that you call `coerce()` instead of `_coerce_()`. Test passing is not an indication because you did these changes. It would need to be tested with the deprecation but *without* the aforementioned change.\n\nI am not sure that is a good thing that there is the element constructor and using the old coercion system as it means it is half way between the two, but that is not so relevant.",
    "created_at": "2022-03-14T09:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472940",
    "user": "https://github.com/tscrim"
}
```

I wasn’t be precise enough, but for the parents that you call `coerce()` instead of `_coerce_()`. Test passing is not an indication because you did these changes. It would need to be tested with the deprecation but *without* the aforementioned change.

I am not sure that is a good thing that there is the element constructor and using the old coercion system as it means it is half way between the two, but that is not so relevant.



---

archive/issue_comments_472941.json:
```json
{
    "body": "Should I add a warning when the element constructor is not implemented? ie\n\n```diff\ndiff --git a/src/sage/structure/parent_old.pyx b/src/sage/structure/parent_old.pyx\nindex 630f0ca861..02c3423a0b 100644\n--- a/src/sage/structure/parent_old.pyx\n+++ b/src/sage/structure/parent_old.pyx\n@@ -39,7 +39,8 @@ from cpython.bool cimport *\n cdef inline check_old_coerce(Parent p):\n     if p._element_constructor is not None:\n         raise RuntimeError(\"%s still using old coercion framework\" % p)\n-\n+    from warnings import warn\n+    warn(\"{} does not implement element_constructor\".format(p), RuntimeWarning)\n \n cdef class Parent(parent.Parent):\n     \"\"\"\n```\n",
    "created_at": "2022-03-14T10:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472941",
    "user": "https://github.com/videlec"
}
```

Should I add a warning when the element constructor is not implemented? ie

```diff
diff --git a/src/sage/structure/parent_old.pyx b/src/sage/structure/parent_old.pyx
index 630f0ca861..02c3423a0b 100644
--- a/src/sage/structure/parent_old.pyx
+++ b/src/sage/structure/parent_old.pyx
@@ -39,7 +39,8 @@ from cpython.bool cimport *
 cdef inline check_old_coerce(Parent p):
     if p._element_constructor is not None:
         raise RuntimeError("%s still using old coercion framework" % p)
-
+    from warnings import warn
+    warn("{} does not implement element_constructor".format(p), RuntimeWarning)
 
 cdef class Parent(parent.Parent):
     """
```




---

archive/issue_comments_472942.json:
```json
{
    "body": "That is a good idea for a way to check. My guess is there are still parents that use that. However, I suspect there are parents that do not implement it since it is something that comes from using the new style `Parent`. So I would be a little curious as to what would prevent them from moving to the new coercion framework. There also wouldn\u2019t be any way to reach the `_coerce_c()` or _coerce_impl()`, right?\n\nThe change `_coerce_c()` -> `coerce()` is not removing an indirection though.",
    "created_at": "2022-03-14T11:29:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472942",
    "user": "https://github.com/tscrim"
}
```

That is a good idea for a way to check. My guess is there are still parents that use that. However, I suspect there are parents that do not implement it since it is something that comes from using the new style `Parent`. So I would be a little curious as to what would prevent them from moving to the new coercion framework. There also wouldn’t be any way to reach the `_coerce_c()` or _coerce_impl()`, right?

The change `_coerce_c()` -> `coerce()` is not removing an indirection though.



---

archive/issue_comments_472943.json:
```json
{
    "body": "It seems to me that only multivariate polynomial rings are going through the old coercion framework\n\n```\n$ git grep -l '_coerce_c_impl('\nrings/polynomial/multi_polynomial_ring_base.pxd\nrings/polynomial/multi_polynomial_ring_base.pyx\nstructure/parent_base.pyx\nstructure/parent_old.pxd\n```\n",
    "created_at": "2022-03-14T12:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472943",
    "user": "https://github.com/videlec"
}
```

It seems to me that only multivariate polynomial rings are going through the old coercion framework

```
$ git grep -l '_coerce_c_impl('
rings/polynomial/multi_polynomial_ring_base.pxd
rings/polynomial/multi_polynomial_ring_base.pyx
structure/parent_base.pyx
structure/parent_old.pxd
```




---

archive/issue_comments_472944.json:
```json
{
    "body": "Then perhaps we can just leave those calls to `_coerce_c` and fully deprecate `_coerce_()`?\n\nAlso, the patchbot seems to report an infinite loop in `schemes/hyperelliptic_curves/monsky_washnitzer.py`:\n\n```\n      File \"/amd/compute/sagebot/sage/local/var/lib/sage/venv-python3.10.2/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py\", line 313, in __call__\n        return self.coerce(value)\n      File \"sage/structure/parent.pyx\", line 1183, in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:11113)\n        cpdef coerce(self, x):\n      File \"sage/structure/parent.pyx\", line 1215, in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:11059)\n        return (<map.Map>mor)._call_(x)\n      File \"sage/categories/morphism.pyx\", line 457, in sage.categories.morphism.CallMorphism._call_ (build/cythonized/sage/categories/morphism.c:6817)\n        return self._codomain(x)\n      File \"/amd/compute/sagebot/sage/local/var/lib/sage/venv-python3.10.2/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py\", line 313, in __call__\n        return self.coerce(value)\n```\n",
    "created_at": "2022-03-14T23:57:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472944",
    "user": "https://github.com/tscrim"
}
```

Then perhaps we can just leave those calls to `_coerce_c` and fully deprecate `_coerce_()`?

Also, the patchbot seems to report an infinite loop in `schemes/hyperelliptic_curves/monsky_washnitzer.py`:

```
      File "/amd/compute/sagebot/sage/local/var/lib/sage/venv-python3.10.2/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py", line 313, in __call__
        return self.coerce(value)
      File "sage/structure/parent.pyx", line 1183, in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:11113)
        cpdef coerce(self, x):
      File "sage/structure/parent.pyx", line 1215, in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:11059)
        return (<map.Map>mor)._call_(x)
      File "sage/categories/morphism.pyx", line 457, in sage.categories.morphism.CallMorphism._call_ (build/cythonized/sage/categories/morphism.c:6817)
        return self._codomain(x)
      File "/amd/compute/sagebot/sage/local/var/lib/sage/venv-python3.10.2/lib/python3.10/site-packages/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py", line 313, in __call__
        return self.coerce(value)
```




---

archive/issue_comments_472945.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-03-14T23:57:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472945",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_472946.json:
```json
{
    "body": "Yes, there is something going wrong in \"monsky_washnitzer\", probably (at least) in the class\n\n`SpecialCubicQuotientRing`\n\nwhich has no element constructor. Maybe it would also help to add a method \"one\" to this ring ?\n\n*EDIT*: adding \"one\" does not fix the infinite recursion",
    "created_at": "2022-03-15T07:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472946",
    "user": "https://github.com/fchapoton"
}
```

Yes, there is something going wrong in "monsky_washnitzer", probably (at least) in the class

`SpecialCubicQuotientRing`

which has no element constructor. Maybe it would also help to add a method "one" to this ring ?

*EDIT*: adding "one" does not fix the infinite recursion



---

archive/issue_comments_472947.json:
```json
{
    "body": "I pushed to trac a rough branch (public/monsky_coercion) where I tried to convert the Monsky-Washnitser file to the current coercion system. Not yet working, but possibly close to. Maybe Travis would know better what to do.",
    "created_at": "2022-03-15T21:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472947",
    "user": "https://github.com/fchapoton"
}
```

I pushed to trac a rough branch (public/monsky_coercion) where I tried to convert the Monsky-Washnitser file to the current coercion system. Not yet working, but possibly close to. Maybe Travis would know better what to do.



---

archive/issue_comments_472948.json:
```json
{
    "body": "I have made #33525 for the Monsky problem.",
    "created_at": "2022-03-18T15:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472948",
    "user": "https://github.com/fchapoton"
}
```

I have made #33525 for the Monsky problem.



---

archive/issue_comments_472949.json:
```json
{
    "body": "I would suggest not to touch the file `schemes/hyperelliptic_curves/monsky_washnitzer.py` here at all.",
    "created_at": "2022-03-18T15:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472949",
    "user": "https://github.com/fchapoton"
}
```

I would suggest not to touch the file `schemes/hyperelliptic_curves/monsky_washnitzer.py` here at all.



---

archive/issue_comments_472950.json:
```json
{
    "body": "so here is a branch just the same but with no changes in monsky\n----\nNew commits:",
    "created_at": "2022-03-18T20:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472950",
    "user": "https://github.com/fchapoton"
}
```

so here is a branch just the same but with no changes in monsky
----
New commits:



---

archive/issue_comments_472951.json:
```json
{
    "body": "it seems that the pathcbot ran the doctests without merging the dependency..",
    "created_at": "2022-03-19T08:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472951",
    "user": "https://github.com/fchapoton"
}
```

it seems that the pathcbot ran the doctests without merging the dependency..



---

archive/issue_comments_472952.json:
```json
{
    "body": "I think it needs to be manually merged in each ticket for testing.",
    "created_at": "2022-03-19T08:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472952",
    "user": "https://github.com/tscrim"
}
```

I think it needs to be manually merged in each ticket for testing.



---

archive/issue_comments_472953.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-24T23:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_472954.json:
```json
{
    "body": "I just pushed the merge. Running the tests that failed before, I get the following deprecation warnings:\n\n```\nsage -t --warn-long 36.7 --random-seed=61225901820605168759510913146636968794 src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py\n**********************************************************************\nFile \"src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py\", line 2457, in sage.schemes.hyperelliptic_curves.monsky_washnitzer.SpecialHyperellipticQuotientElement._rmul_\nFailed example:\n    x._rmul_(y)\nExpected:\n    y*1*x\n**********************************************************************\nFile \"src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py\", line 3103, in sage.schemes.hyperelliptic_curves.monsky_washnitzer.MonskyWashnitzerDifferential._add_\nFailed example:\n    x*w + w\nExpected:\n    (1 + x) dx/2y\n**********************************************************************\nFile \"src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py\", line 3279, in sage.schemes.hyperelliptic_curves.monsky_washnitzer.MonskyWashnitzerDifferential.extract_pow_y\nFailed example:\n    (A * C.invariant_differential()).extract_pow_y(5)\nExpected:\n    [1, 0, 0, 0, 0]\n**********************************************************************\nFile \"src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py\", line 3489, in sage.schemes.hyperelliptic_curves.monsky_washnitzer.MonskyWashnitzerDifferential.reduce_pos_y\nFailed example:\n    (y^2).diff().reduce_pos_y()\nExpected:\n    (y^2*1, 0 dx/2y)\n\nsage -t --warn-long 36.7 --random-seed=61225901820605168759510913146636968794 src/sage/schemes/hyperelliptic_curves/hyperelliptic_padic_field.py\n**********************************************************************\nFile \"src/sage/schemes/hyperelliptic_curves/hyperelliptic_padic_field.py\", line 735, in sage.schemes.hyperelliptic_curves.hyperelliptic_padic_field.coleman_integral\nFailed example:\n    C.coleman_integral(x*w, P, Q)\nExpected:\n    O(11^6)\n```\n\nand one proper failure:\n\n```\nsage -t --warn-long 36.7 --random-seed=61225901820605168759510913146636968794 src/sage/rings/finite_rings/element_pari_ffelt.pyx\n**********************************************************************\nFile \"src/sage/rings/finite_rings/element_pari_ffelt.pyx\", line 1285, in sage.rings.finite_rings.element_pari_ffelt.FiniteFieldElement_pari_ffelt._gap_init_\nFailed example:\n    gap.coerce(a)\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: order must be at most 65536\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/home/travis/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/travis/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.finite_rings.element_pari_ffelt.FiniteFieldElement_pari_ffelt._gap_init_[13]>\", line 1, in <module>\n        gap.coerce(a)\n      File \"sage/structure/parent.pyx\", line 1183, in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:11113)\n        cpdef coerce(self, x):\n      File \"sage/structure/parent.pyx\", line 1213, in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:11039)\n        raise TypeError(_LazyString(\"no canonical coercion from %s to %s\", (parent(x), self), {}))\n    TypeError: no canonical coercion from Finite Field in a of size 1009^2 to Gap\n```\n",
    "created_at": "2022-03-24T23:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472954",
    "user": "https://github.com/tscrim"
}
```

I just pushed the merge. Running the tests that failed before, I get the following deprecation warnings:

```
sage -t --warn-long 36.7 --random-seed=61225901820605168759510913146636968794 src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py
**********************************************************************
File "src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py", line 2457, in sage.schemes.hyperelliptic_curves.monsky_washnitzer.SpecialHyperellipticQuotientElement._rmul_
Failed example:
    x._rmul_(y)
Expected:
    y*1*x
**********************************************************************
File "src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py", line 3103, in sage.schemes.hyperelliptic_curves.monsky_washnitzer.MonskyWashnitzerDifferential._add_
Failed example:
    x*w + w
Expected:
    (1 + x) dx/2y
**********************************************************************
File "src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py", line 3279, in sage.schemes.hyperelliptic_curves.monsky_washnitzer.MonskyWashnitzerDifferential.extract_pow_y
Failed example:
    (A * C.invariant_differential()).extract_pow_y(5)
Expected:
    [1, 0, 0, 0, 0]
**********************************************************************
File "src/sage/schemes/hyperelliptic_curves/monsky_washnitzer.py", line 3489, in sage.schemes.hyperelliptic_curves.monsky_washnitzer.MonskyWashnitzerDifferential.reduce_pos_y
Failed example:
    (y^2).diff().reduce_pos_y()
Expected:
    (y^2*1, 0 dx/2y)

sage -t --warn-long 36.7 --random-seed=61225901820605168759510913146636968794 src/sage/schemes/hyperelliptic_curves/hyperelliptic_padic_field.py
**********************************************************************
File "src/sage/schemes/hyperelliptic_curves/hyperelliptic_padic_field.py", line 735, in sage.schemes.hyperelliptic_curves.hyperelliptic_padic_field.coleman_integral
Failed example:
    C.coleman_integral(x*w, P, Q)
Expected:
    O(11^6)
```

and one proper failure:

```
sage -t --warn-long 36.7 --random-seed=61225901820605168759510913146636968794 src/sage/rings/finite_rings/element_pari_ffelt.pyx
**********************************************************************
File "src/sage/rings/finite_rings/element_pari_ffelt.pyx", line 1285, in sage.rings.finite_rings.element_pari_ffelt.FiniteFieldElement_pari_ffelt._gap_init_
Failed example:
    gap.coerce(a)
Expected:
    Traceback (most recent call last):
    ...
    TypeError: order must be at most 65536
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/home/travis/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/travis/sage/local/var/lib/sage/venv-python3.8/lib/python3.8/site-packages/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.finite_rings.element_pari_ffelt.FiniteFieldElement_pari_ffelt._gap_init_[13]>", line 1, in <module>
        gap.coerce(a)
      File "sage/structure/parent.pyx", line 1183, in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:11113)
        cpdef coerce(self, x):
      File "sage/structure/parent.pyx", line 1213, in sage.structure.parent.Parent.coerce (build/cythonized/sage/structure/parent.c:11039)
        raise TypeError(_LazyString("no canonical coercion from %s to %s", (parent(x), self), {}))
    TypeError: no canonical coercion from Finite Field in a of size 1009^2 to Gap
```




---

archive/issue_comments_472955.json:
```json
{
    "body": "any idea where these deprecations comes from ?\nthe traceback is not very helpful:\n\n```\n      File \"<doctest sage.schemes.hyperelliptic_curves.hyperelliptic_padic_field.coleman_integral[8]>\", line 1, in <module>\n        C.coleman_integral(x*w, P, Q)\n      File \"/home/debian/sage/local/lib/python3.9/site-packages/sage/categories/pushout.py\", line 4112, in pushout\n        elif S.has_coerce_map_from(Rs[-1]):\n      File \"/home/debian/sage/local/lib/python3.9/site-packages/sage/misc/superseded.py\", line 99, in deprecation\n        warning(trac_number, message, DeprecationWarning, stacklevel)\n```\n\n\nEDIT: This may hint that monsky_washnitser is not yet in perfect shape..",
    "created_at": "2022-03-25T07:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472955",
    "user": "https://github.com/fchapoton"
}
```

any idea where these deprecations comes from ?
the traceback is not very helpful:

```
      File "<doctest sage.schemes.hyperelliptic_curves.hyperelliptic_padic_field.coleman_integral[8]>", line 1, in <module>
        C.coleman_integral(x*w, P, Q)
      File "/home/debian/sage/local/lib/python3.9/site-packages/sage/categories/pushout.py", line 4112, in pushout
        elif S.has_coerce_map_from(Rs[-1]):
      File "/home/debian/sage/local/lib/python3.9/site-packages/sage/misc/superseded.py", line 99, in deprecation
        warning(trac_number, message, DeprecationWarning, stacklevel)
```


EDIT: This may hint that monsky_washnitser is not yet in perfect shape..



---

archive/issue_comments_472956.json:
```json
{
    "body": "What is happening is this:\n\n```\nparent_old.Parent._coerce_impl() -> ParentWithBase._coerce_c_impl() -> _coerce_()\n```\n\n(I have also deprecated the second method locally and will push once I figure out how to fix things fully since it either calls `_coerce_` or errors out.) So my guess it is coming from one of these calls:\n\n```\ntravis@tscrim:~/sage/src/sage/combinat$ grep -R \"\\._coerce_impl(\" ../*\n../algebras/commutative_dga.py:            return self._coerce_impl(im_gens)\n../categories/crystals.py:            return self._coerce_impl(on_gens)\n../interfaces/r.py:        return super(R, self)._coerce_impl(x, use_special=use_special)\n../interfaces/polymake.py:        return super(PolymakeAbstract, self)._coerce_impl(x, use_special=use_special)\n../interfaces/interface.py:            result = self._coerce_impl(x, use_special=False)\n../modular/abvar/homspace.py:            sage: J = J0(37) ; J.Hom(J)._coerce_impl(matrix(ZZ,4,[5..20]))\n../modular/abvar/homspace.py:            sage: K = J0(11) * J0(11) ; J.Hom(K)._coerce_impl(matrix(ZZ,4,[5..20]))\n../modular/abvar/homspace.py:            return HomsetWithBase._coerce_impl(self, x)\n../rings/finite_rings/homset.py:            return self._coerce_impl(im_gens)\n../rings/finite_rings/homset.py:                return self._coerce_impl(im_gens)\n../rings/multi_power_series_ring.py:            sage: g1 = R._coerce_impl(f1)\n../rings/polynomial/pbori/pbori.pyx:            return self._coerce_impl(other)\n```\n\nReducing it down to removing the obvious non-related calls:\n\n```\n../algebras/commutative_dga.py:            return self._coerce_impl(im_gens)\n../rings/finite_rings/homset.py:            return self._coerce_impl(im_gens)\n../rings/finite_rings/homset.py:                return self._coerce_impl(im_gens)\n../rings/polynomial/pbori/pbori.pyx:            return self._coerce_impl(other)\n```\n\nIt is one of these is what is starting the process to yield the error.\n\nHowever, I don't think that is the root issue. Putting a `print(type(self))` in `parent_old.Parent._coerce_impl` yields\n\n```\n <class 'sage.schemes.hyperelliptic_curves.monsky_washnitzer.SpecialHyperellipticQuotientRing_with_category'>\n```\n\nIndeed, that is the problem as that is still using the old coercion framework, which I tested by changing it to inherit from `Parent` instead. I have created #33576 for this.",
    "created_at": "2022-03-27T06:27:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472956",
    "user": "https://github.com/tscrim"
}
```

What is happening is this:

```
parent_old.Parent._coerce_impl() -> ParentWithBase._coerce_c_impl() -> _coerce_()
```

(I have also deprecated the second method locally and will push once I figure out how to fix things fully since it either calls `_coerce_` or errors out.) So my guess it is coming from one of these calls:

```
travis@tscrim:~/sage/src/sage/combinat$ grep -R "\._coerce_impl(" ../*
../algebras/commutative_dga.py:            return self._coerce_impl(im_gens)
../categories/crystals.py:            return self._coerce_impl(on_gens)
../interfaces/r.py:        return super(R, self)._coerce_impl(x, use_special=use_special)
../interfaces/polymake.py:        return super(PolymakeAbstract, self)._coerce_impl(x, use_special=use_special)
../interfaces/interface.py:            result = self._coerce_impl(x, use_special=False)
../modular/abvar/homspace.py:            sage: J = J0(37) ; J.Hom(J)._coerce_impl(matrix(ZZ,4,[5..20]))
../modular/abvar/homspace.py:            sage: K = J0(11) * J0(11) ; J.Hom(K)._coerce_impl(matrix(ZZ,4,[5..20]))
../modular/abvar/homspace.py:            return HomsetWithBase._coerce_impl(self, x)
../rings/finite_rings/homset.py:            return self._coerce_impl(im_gens)
../rings/finite_rings/homset.py:                return self._coerce_impl(im_gens)
../rings/multi_power_series_ring.py:            sage: g1 = R._coerce_impl(f1)
../rings/polynomial/pbori/pbori.pyx:            return self._coerce_impl(other)
```

Reducing it down to removing the obvious non-related calls:

```
../algebras/commutative_dga.py:            return self._coerce_impl(im_gens)
../rings/finite_rings/homset.py:            return self._coerce_impl(im_gens)
../rings/finite_rings/homset.py:                return self._coerce_impl(im_gens)
../rings/polynomial/pbori/pbori.pyx:            return self._coerce_impl(other)
```

It is one of these is what is starting the process to yield the error.

However, I don't think that is the root issue. Putting a `print(type(self))` in `parent_old.Parent._coerce_impl` yields

```
 <class 'sage.schemes.hyperelliptic_curves.monsky_washnitzer.SpecialHyperellipticQuotientRing_with_category'>
```

Indeed, that is the problem as that is still using the old coercion framework, which I tested by changing it to inherit from `Parent` instead. I have created #33576 for this.



---

archive/issue_comments_472957.json:
```json
{
    "body": "With the changes on #33576, the only failure left I am getting is on `rings/finite_rings/element_pari_ffelt.pyx`, which I believe is essentially a trivial failure because of a different error message because of the coercion change (it is reporting the same error IMO). So I propose changing the doctest output, and then all tests should pass.",
    "created_at": "2022-03-27T22:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472957",
    "user": "https://github.com/tscrim"
}
```

With the changes on #33576, the only failure left I am getting is on `rings/finite_rings/element_pari_ffelt.pyx`, which I believe is essentially a trivial failure because of a different error message because of the coercion change (it is reporting the same error IMO). So I propose changing the doctest output, and then all tests should pass.



---

archive/issue_comments_472958.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2022-03-29T03:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_472959.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-29T03:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_472960.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-29T03:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472960",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_472961.json:
```json
{
    "body": "Here is with fixing the last doctest and the other deprecation I mentioned. I also merged in #33558 to resolve a trivial conflict.",
    "created_at": "2022-03-29T03:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472961",
    "user": "https://github.com/tscrim"
}
```

Here is with fixing the last doctest and the other deprecation I mentioned. I also merged in #33558 to resolve a trivial conflict.



---

archive/issue_comments_472962.json:
```json
{
    "body": "Morally green bot (pyflakes warnings are not introduced on this ticket).",
    "created_at": "2022-04-01T06:58:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472962",
    "user": "https://github.com/tscrim"
}
```

Morally green bot (pyflakes warnings are not introduced on this ticket).



---

archive/issue_comments_472963.json:
```json
{
    "body": "Ping. Should we try to get this into the next Sage release or wait for the next beta0?",
    "created_at": "2022-04-05T08:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472963",
    "user": "https://github.com/tscrim"
}
```

Ping. Should we try to get this into the next Sage release or wait for the next beta0?



---

archive/issue_comments_472964.json:
```json
{
    "body": "Would be great to have it in the next release! It is a major step forward in using `Parent`.",
    "created_at": "2022-04-05T17:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472964",
    "user": "https://github.com/videlec"
}
```

Would be great to have it in the next release! It is a major step forward in using `Parent`.



---

archive/issue_comments_472965.json:
```json
{
    "body": "Only my latest changes need to be reviewed as I have reviewed Fr\u00e9d\u00e9ric's and (re-)reviewed yours (as Fr\u00e9d\u00e9ric likely already reviewed yours). If mine are good, then it is a positive review.",
    "created_at": "2022-04-06T00:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472965",
    "user": "https://github.com/tscrim"
}
```

Only my latest changes need to be reviewed as I have reviewed Frédéric's and (re-)reviewed yours (as Frédéric likely already reviewed yours). If mine are good, then it is a positive review.



---

archive/issue_comments_472966.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2022-04-07T16:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472966",
    "user": "https://github.com/videlec"
}
```

Looks good to me.



---

archive/issue_comments_472967.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-07T16:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472967",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_472968.json:
```json
{
    "body": "Thank you.",
    "created_at": "2022-04-08T00:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472968",
    "user": "https://github.com/tscrim"
}
```

Thank you.



---

archive/issue_comments_472969.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-04-09T21:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472969",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_472970.json:
```json
{
    "body": "Merge failure on top of:\n\n5a999eb9e1 Trac #33468: Feature for gfan\n\nb389f97a3a Trac #33466: sage.features.lrs: Make it a JoinFeature of Lrs, LrsNash; use Executable.absolute_filename\n\n204cbf0584 Trac #33017: LazyImport.__instancecheck__, __subclasscheck__: Return False on ImportError\n\nae06fa42e0 Trac #31802: Bug in plotting 3d polyhedron with rays, add option polygon='rainbow'\n\n0553c9b0b9 Trac #30749: Characteristic polynomial of central Hyperplane arrangement returns wrong result?\n\n2317d5d7fc Trac #30411: src/tox.ini: Add environment pyright\n\ncf219d6eb2 Trac #33661: Don't test files created by jupyter-sphinx\n\n770a894d6c Trac #33642: Update build/pkgs/matplotlib/install-requires.txt and distros/conda.txt\n\na4429624dc Trac #33638: GH Actions: Fix cygwin\n\n0a5029cfbe Trac #33430: GH Actions: Fix homebrew-maximal, remove opensuse-15.2.1\n\n7ee048cefb Trac #33426: add more details on conda-based installations of Sage\n\n7acdc3d662 Trac #33246: canonical_label returns incorrect partite sets\n\n6df7b36536 Trac #33063: notebook: update to 6.4.10 to fix deprecation warning\n\n365d2b1957 Trac #33650: Set JUPYTER_DATA_DIR etc. during docbuild\n\nb2ddb07d71 Trac #33635: fixing the broken linter, again\n\nc489291a97 Trac #33632: fix indentation (E111) in pyx files in numerical/\n\na837fee19e Trac #33626: sageinspect.sage_getfile(x) incorrect when using an alternate suffix for extension modules\n\n216d60bb1b Trac #33633: fix indentation (E111) in pyx files in graphs, libs, proba\n\n39d402cb75 Trac #33629: add negative for continued fractions\n\n4955762701 Trac #33565: Add CODE_OF_CONDUCT.md to the repo\n\n00bc51075d Trac #33560: pytest: ignore cython files\n\na02eec36bf Trac #33582: clean up docstring formatting in schemes/elliptic_curves/\n\n31995b748a Trac #33618: docbuild: typo in arguments check leads to confusing error\n\n94a131cc20 Trac #33612: sage.matrix.matrix_space: Rename a test_... function to _test_... (with deprecation)\n\n823194cfff Trac #33605: cbc: Add system package information for gentoo, nix\n\n6eb1f67d62 Trac #33593: fix W391 in groups/ and algebras/\n\n5ec6108788 Trac #33571: Correct wrong paths in the developer's guide\n\nb886d89536 Trac #33628: Fig bug in graphs.RandomToleranceGraph\n\n5ee8a50e85 Trac #33616: Simplify inventory builder\n\n0a7c8f485c Trac #33615: full cleanup of modules/fp_graded/\n\n97533a71f9 Trac #33589: Gitpod: track remote trac branch\n\nb8d5371aae Trac #33576: Modernize coercion for SpecialHyperellipticQuotientRing\n\n55da3e109e Trac #33572: sage -pytest\n\n2f104e6454 Trac #33533: Update nbconvert to 6.4.x, add optional package pyppeteer\n\n7a5714ac65 Trac #33366: BipartiteGraph() fails to create graph from graph6 string\n\ndfd98a710e Trac #31006: Add more typing information to manifold package\n\n360ee4c168 Trac #30540: Add package phitigra: Graph editor that works with Jupyter\n\n3f93cd0a9c Trac #29640: Create an AUTHORS.md file with links\n\nd8f76fb1bd Trac #33624: doctest unnecessarily assumes SAGE_VENV/bin contains `sage` binary\n\nb438a78918 Trac #33608: Building documentation is broken in Sage 9.6.beta6\n\n88e25dd77b Trac #33631: Github workflow: Fix pyright\n\n78bfb6c7ad Updated [SageMath](SageMath) version to 9.6.beta7\n\n\n\nauthor 'Vincent Delecroix, Travis Scrimshaw,' does not look right",
    "created_at": "2022-04-09T21:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472970",
    "user": "https://github.com/vbraun"
}
```

Merge failure on top of:

5a999eb9e1 Trac #33468: Feature for gfan

b389f97a3a Trac #33466: sage.features.lrs: Make it a JoinFeature of Lrs, LrsNash; use Executable.absolute_filename

204cbf0584 Trac #33017: LazyImport.__instancecheck__, __subclasscheck__: Return False on ImportError

ae06fa42e0 Trac #31802: Bug in plotting 3d polyhedron with rays, add option polygon='rainbow'

0553c9b0b9 Trac #30749: Characteristic polynomial of central Hyperplane arrangement returns wrong result?

2317d5d7fc Trac #30411: src/tox.ini: Add environment pyright

cf219d6eb2 Trac #33661: Don't test files created by jupyter-sphinx

770a894d6c Trac #33642: Update build/pkgs/matplotlib/install-requires.txt and distros/conda.txt

a4429624dc Trac #33638: GH Actions: Fix cygwin

0a5029cfbe Trac #33430: GH Actions: Fix homebrew-maximal, remove opensuse-15.2.1

7ee048cefb Trac #33426: add more details on conda-based installations of Sage

7acdc3d662 Trac #33246: canonical_label returns incorrect partite sets

6df7b36536 Trac #33063: notebook: update to 6.4.10 to fix deprecation warning

365d2b1957 Trac #33650: Set JUPYTER_DATA_DIR etc. during docbuild

b2ddb07d71 Trac #33635: fixing the broken linter, again

c489291a97 Trac #33632: fix indentation (E111) in pyx files in numerical/

a837fee19e Trac #33626: sageinspect.sage_getfile(x) incorrect when using an alternate suffix for extension modules

216d60bb1b Trac #33633: fix indentation (E111) in pyx files in graphs, libs, proba

39d402cb75 Trac #33629: add negative for continued fractions

4955762701 Trac #33565: Add CODE_OF_CONDUCT.md to the repo

00bc51075d Trac #33560: pytest: ignore cython files

a02eec36bf Trac #33582: clean up docstring formatting in schemes/elliptic_curves/

31995b748a Trac #33618: docbuild: typo in arguments check leads to confusing error

94a131cc20 Trac #33612: sage.matrix.matrix_space: Rename a test_... function to _test_... (with deprecation)

823194cfff Trac #33605: cbc: Add system package information for gentoo, nix

6eb1f67d62 Trac #33593: fix W391 in groups/ and algebras/

5ec6108788 Trac #33571: Correct wrong paths in the developer's guide

b886d89536 Trac #33628: Fig bug in graphs.RandomToleranceGraph

5ee8a50e85 Trac #33616: Simplify inventory builder

0a7c8f485c Trac #33615: full cleanup of modules/fp_graded/

97533a71f9 Trac #33589: Gitpod: track remote trac branch

b8d5371aae Trac #33576: Modernize coercion for SpecialHyperellipticQuotientRing

55da3e109e Trac #33572: sage -pytest

2f104e6454 Trac #33533: Update nbconvert to 6.4.x, add optional package pyppeteer

7a5714ac65 Trac #33366: BipartiteGraph() fails to create graph from graph6 string

dfd98a710e Trac #31006: Add more typing information to manifold package

360ee4c168 Trac #30540: Add package phitigra: Graph editor that works with Jupyter

3f93cd0a9c Trac #29640: Create an AUTHORS.md file with links

d8f76fb1bd Trac #33624: doctest unnecessarily assumes SAGE_VENV/bin contains `sage` binary

b438a78918 Trac #33608: Building documentation is broken in Sage 9.6.beta6

88e25dd77b Trac #33631: Github workflow: Fix pyright

78bfb6c7ad Updated [SageMath](SageMath) version to 9.6.beta7



author 'Vincent Delecroix, Travis Scrimshaw,' does not look right



---

archive/issue_comments_472971.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-25T00:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_472972.json:
```json
{
    "body": "I am not getting any merge failure on 9.6.rc1. Although I guess this is probably too late to be merged into 9.6, so I guess we just have to wait for 9.7.beta0...",
    "created_at": "2022-04-25T00:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472972",
    "user": "https://github.com/tscrim"
}
```

I am not getting any merge failure on 9.6.rc1. Although I guess this is probably too late to be merged into 9.6, so I guess we just have to wait for 9.7.beta0...



---

archive/issue_comments_472973.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2022-04-25T00:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472973",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_472974.json:
```json
{
    "body": "The failure was actually just \"author 'Vincent Delecroix, Travis Scrimshaw,' does not look right\". You just fixed that.",
    "created_at": "2022-04-25T00:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472974",
    "user": "https://github.com/mkoeppe"
}
```

The failure was actually just "author 'Vincent Delecroix, Travis Scrimshaw,' does not look right". You just fixed that.



---

archive/issue_comments_472975.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-20T22:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33260#issuecomment-472975",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_030072.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-20T22:27:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33260",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33260#event-30072"
}
```
