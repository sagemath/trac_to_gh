# Issue 13015: Minpoly and charpoly don't check their arguments correctly

archive/issues_013015.json:
```json
{
    "body": "Assignee: jason, was\n\nThe following fails in sage (likewise with charpoly):\n\n```\nk=CyclotomicField(10)\nU=matrix(k, 1,1,[1])\nvar('t')\nU.minpoly(t)\n```\n\n\nThe error is in a call that the function makes to PolynomialRing :\n\n```\nTypeError: invalid input (Cyclotomic Field of order 10 and degree 4, t, None) to PolynomialRing function; please see the docstring for that function\n```\n\n\nStrangely, if you use :\n\n```\nk=CyclotomicField(10)\nU=matrix(k, 1,1,[1])\nvar('t')\nU.minpoly('t')\n```\n\neverything is fine.\n\nIn any case, I would expect charpoly/minpoly to complain themselves if I don't call them correctly (which isn't clear at all!) -- it's definitely not normal (and upsetting for newbies) that another function reacts.\n\nThis is with sage-5.1.beta6.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13187\n\n",
    "created_at": "2012-06-30T12:20:50Z",
    "labels": [
        "linear algebra",
        "minor",
        "bug"
    ],
    "title": "Minpoly and charpoly don't check their arguments correctly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13015",
    "user": "Snark"
}
```
Assignee: jason, was

The following fails in sage (likewise with charpoly):

```
k=CyclotomicField(10)
U=matrix(k, 1,1,[1])
var('t')
U.minpoly(t)
```


The error is in a call that the function makes to PolynomialRing :

```
TypeError: invalid input (Cyclotomic Field of order 10 and degree 4, t, None) to PolynomialRing function; please see the docstring for that function
```


Strangely, if you use :

```
k=CyclotomicField(10)
U=matrix(k, 1,1,[1])
var('t')
U.minpoly('t')
```

everything is fine.

In any case, I would expect charpoly/minpoly to complain themselves if I don't call them correctly (which isn't clear at all!) -- it's definitely not normal (and upsetting for newbies) that another function reacts.

This is with sage-5.1.beta6.

Issue created by migration from https://trac.sagemath.org/ticket/13187





---

archive/issue_comments_157362.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-30T17:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13015#issuecomment-157362",
    "user": "aapitzsch"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_157363.json:
```json
{
    "body": "Attachment\n\nThe attached patch fixes the problem and contains some code clean-up.",
    "created_at": "2012-06-30T17:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13015#issuecomment-157363",
    "user": "aapitzsch"
}
```

Attachment

The attached patch fixes the problem and contains some code clean-up.



---

archive/issue_comments_157364.json:
```json
{
    "body": "Eh, just moving that piece of code around is enough? Good!\n\nFive hours between the report and the patch? Excellent!\n\nThanks!",
    "created_at": "2012-06-30T19:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13015#issuecomment-157364",
    "user": "Snark"
}
```

Eh, just moving that piece of code around is enough? Good!

Five hours between the report and the patch? Excellent!

Thanks!



---

archive/issue_comments_157365.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-07-01T05:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13015#issuecomment-157365",
    "user": "robertwb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_157366.json:
```json
{
    "body": "Yep, that looks like a good fix to me. Lots of style changes (improvements) in this patch as well, but that's fine.",
    "created_at": "2012-07-01T05:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13015#issuecomment-157366",
    "user": "robertwb"
}
```

Yep, that looks like a good fix to me. Lots of style changes (improvements) in this patch as well, but that's fine.



---

archive/issue_comments_157367.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-07-07T22:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13015#issuecomment-157367",
    "user": "jdemeyer"
}
```

Resolution: fixed
