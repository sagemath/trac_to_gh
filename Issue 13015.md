# Issue 13015: Minpoly and charpoly don't check their arguments correctly

Issue created by migration from https://trac.sagemath.org/ticket/13187

Original creator: Snark

Original creation time: 2012-06-30 12:20:50

Assignee: jason, was

The following fails in sage (likewise with charpoly):

```
k=CyclotomicField(10)
U=matrix(k, 1,1,[1])
var('t')
U.minpoly(t)
```


The error is in a call that the function makes to PolynomialRing :

```
TypeError: invalid input (Cyclotomic Field of order 10 and degree 4, t, None) to PolynomialRing function; please see the docstring for that function
```


Strangely, if you use :

```
k=CyclotomicField(10)
U=matrix(k, 1,1,[1])
var('t')
U.minpoly('t')
```

everything is fine.

In any case, I would expect charpoly/minpoly to complain themselves if I don't call them correctly (which isn't clear at all!) -- it's definitely not normal (and upsetting for newbies) that another function reacts.

This is with sage-5.1.beta6.


---

Comment by aapitzsch created at 2012-06-30 17:45:47

Changing status from new to needs_review.


---

Attachment

The attached patch fixes the problem and contains some code clean-up.


---

Comment by Snark created at 2012-06-30 19:52:00

Eh, just moving that piece of code around is enough? Good!

Five hours between the report and the patch? Excellent!

Thanks!


---

Comment by robertwb created at 2012-07-01 05:00:06

Changing status from needs_review to positive_review.


---

Comment by robertwb created at 2012-07-01 05:00:06

Yep, that looks like a good fix to me. Lots of style changes (improvements) in this patch as well, but that's fine.


---

Comment by jdemeyer created at 2012-07-07 22:31:45

Resolution: fixed
