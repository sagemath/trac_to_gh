# Issue 14848: tropical coordinates for braid group elements

archive/issues_014848.json:
```json
{
    "body": "Keywords: braid group, tropical algebra\n\nthis ticket proposes to implement the tropical coordinates (due to Dynnikov and Wiest) for braid group elements\n\nIssue created by migration from https://trac.sagemath.org/ticket/15085\n\n",
    "created_at": "2013-08-23T12:04:09Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "tropical coordinates for braid group elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14848",
    "user": "chapoton"
}
```
Keywords: braid group, tropical algebra

this ticket proposes to implement the tropical coordinates (due to Dynnikov and Wiest) for braid group elements

Issue created by migration from https://trac.sagemath.org/ticket/15085





---

archive/issue_comments_189412.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to group theory.",
    "created_at": "2013-08-23T12:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189412",
    "user": "chapoton"
}
```

Changing component from PLEASE CHANGE to group theory.



---

archive/issue_comments_189413.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-23T12:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189413",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_189414.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2013-08-23T12:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189414",
    "user": "chapoton"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_189415.json:
```json
{
    "body": "should be ready for review",
    "created_at": "2013-08-23T12:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189415",
    "user": "chapoton"
}
```

should be ready for review



---

archive/issue_comments_189416.json:
```json
{
    "body": "Attachment [trac_15085_tropical_coordinates_for_braids-fc.patch](tarball://root/attachments/some-uuid/ticket15085/trac_15085_tropical_coordinates_for_braids-fc.patch) by tscrim created at 2013-08-23 19:13:51\n\nHey Frederic,\n\nI'm reworking the implementation a bit to get some improvements. Quick (stupid) question before finishing my review however, the resulting coordinates are suppose to lie in a tropical space, correct? If so, I want to change it so that the result is a list of elements in `TropicalSemiring` and computations are done in there as well. Edit: also, your patch will need a proper commit message.\n\nBest,\n\nTravis",
    "created_at": "2013-08-23T19:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189416",
    "user": "tscrim"
}
```

Attachment [trac_15085_tropical_coordinates_for_braids-fc.patch](tarball://root/attachments/some-uuid/ticket15085/trac_15085_tropical_coordinates_for_braids-fc.patch) by tscrim created at 2013-08-23 19:13:51

Hey Frederic,

I'm reworking the implementation a bit to get some improvements. Quick (stupid) question before finishing my review however, the resulting coordinates are suppose to lie in a tropical space, correct? If so, I want to change it so that the result is a list of elements in `TropicalSemiring` and computations are done in there as well. Edit: also, your patch will need a proper commit message.

Best,

Travis



---

archive/issue_comments_189417.json:
```json
{
    "body": "Hello Travis,\n\nthanks for working on that\n\nWell, the result is just a list of elements in ZZ (mathematically)\n\nWe can either put them in ZZ or in the tropical version of ZZ, if you prefer. The main point should be speed, in my humble opinion.",
    "created_at": "2013-08-23T19:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189417",
    "user": "chapoton"
}
```

Hello Travis,

thanks for working on that

Well, the result is just a list of elements in ZZ (mathematically)

We can either put them in ZZ or in the tropical version of ZZ, if you prefer. The main point should be speed, in my humble opinion.



---

archive/issue_comments_189418.json:
```json
{
    "body": "Attachment [trac_15085-review-ts.patch](tarball://root/attachments/some-uuid/ticket15085/trac_15085-review-ts.patch) by tscrim created at 2013-08-24 00:04:55",
    "created_at": "2013-08-24T00:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189418",
    "user": "tscrim"
}
```

Attachment [trac_15085-review-ts.patch](tarball://root/attachments/some-uuid/ticket15085/trac_15085-review-ts.patch) by tscrim created at 2013-08-24 00:04:55



---

archive/issue_comments_189419.json:
```json
{
    "body": "I did all of the computations as `int`'s and returned the result in the tropical ZZ in my review patch. Here are the timings with various options:\n\nWith my review patch:\n\n```\nsage: B = BraidGroup(3)\nsage: b = B([-2, -2, -1, -1, 2, 2, 1, 1])\nsage: %timeit b.tropical_coordinates()\n1000 loops, best of 3: 151 us per loop\nsage: %timeit b.tropical_coordinates()\n1000 loops, best of 3: 138 us per loop\n```\n\nBefore my review patch:\n\n```\nsage: %timeit b.tropical_coordinates()\n1000 loops, best of 3: 160 us per loop\nsage: %timeit b.tropical_coordinates()\n1000 loops, best of 3: 174 us per loop\n```\n\nWith review patch but not converting to (tropical) ZZ, instead leaving them as `int`'s:\n\n```\nsage: %timeit b.tropical_coordinates()\n10000 loops, best of 3: 81.1 us per loop\nsage: %timeit b.tropical_coordinates()\n1000 loops, best of 3: 80.4 us per loop\n```\n\nWith review patch but converting them into honest ZZ elements:\n\n```\nsage: %timeit b.tropical_coordinates()\n1000 loops, best of 3: 98.9 us per loop\nsage: %timeit b.tropical_coordinates()\n10000 loops, best of 3: 107 us per loop\n```\n\n\nPersonally I prefer to have them in tropical ZZ since that is what the function name indicates, but I don't have a strong opinion on this, so it's whatever you choose.",
    "created_at": "2013-08-24T00:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189419",
    "user": "tscrim"
}
```

I did all of the computations as `int`'s and returned the result in the tropical ZZ in my review patch. Here are the timings with various options:

With my review patch:

```
sage: B = BraidGroup(3)
sage: b = B([-2, -2, -1, -1, 2, 2, 1, 1])
sage: %timeit b.tropical_coordinates()
1000 loops, best of 3: 151 us per loop
sage: %timeit b.tropical_coordinates()
1000 loops, best of 3: 138 us per loop
```

Before my review patch:

```
sage: %timeit b.tropical_coordinates()
1000 loops, best of 3: 160 us per loop
sage: %timeit b.tropical_coordinates()
1000 loops, best of 3: 174 us per loop
```

With review patch but not converting to (tropical) ZZ, instead leaving them as `int`'s:

```
sage: %timeit b.tropical_coordinates()
10000 loops, best of 3: 81.1 us per loop
sage: %timeit b.tropical_coordinates()
1000 loops, best of 3: 80.4 us per loop
```

With review patch but converting them into honest ZZ elements:

```
sage: %timeit b.tropical_coordinates()
1000 loops, best of 3: 98.9 us per loop
sage: %timeit b.tropical_coordinates()
10000 loops, best of 3: 107 us per loop
```


Personally I prefer to have them in tropical ZZ since that is what the function name indicates, but I don't have a strong opinion on this, so it's whatever you choose.



---

archive/issue_comments_189420.json:
```json
{
    "body": "Hello,\n\nthanks for the review. Everything looks good to me. You can set a positive review if you want to.\n\nOne minor point (that maybe you can correct) is that it is better not to put whitespace before or after a parenthesis, as this is not recommended by the pep8 standard.\n\nFr\u00e9d\u00e9ric",
    "created_at": "2013-08-24T19:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189420",
    "user": "chapoton"
}
```

Hello,

thanks for the review. Everything looks good to me. You can set a positive review if you want to.

One minor point (that maybe you can correct) is that it is better not to put whitespace before or after a parenthesis, as this is not recommended by the pep8 standard.

Frédéric



---

archive/issue_comments_189421.json:
```json
{
    "body": "Hey Frederic,\n\nI put extra whitespace around blocks of parenthesis to help separate them/make them visually match better (pep8 [unfortunately] doesn't specify what to do with blocks of parenthesis). They probably aren't so useful here however because there's only 2 of them. So you can fold my review patch into yours and remove the whitespace since your base patch needs a proper commit message before we can set this to positive review.\n\nBest,\n\nTravis",
    "created_at": "2013-08-24T19:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189421",
    "user": "tscrim"
}
```

Hey Frederic,

I put extra whitespace around blocks of parenthesis to help separate them/make them visually match better (pep8 [unfortunately] doesn't specify what to do with blocks of parenthesis). They probably aren't so useful here however because there's only 2 of them. So you can fold my review patch into yours and remove the whitespace since your base patch needs a proper commit message before we can set this to positive review.

Best,

Travis



---

archive/issue_comments_189422.json:
```json
{
    "body": "folded patch, apply only this one",
    "created_at": "2013-08-24T19:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189422",
    "user": "chapoton"
}
```

folded patch, apply only this one



---

archive/issue_comments_189423.json:
```json
{
    "body": "Attachment [trac_15085_trop_coord_folded.patch](tarball://root/attachments/some-uuid/ticket15085/trac_15085_trop_coord_folded.patch) by chapoton created at 2013-08-24 19:22:19\n\nok, here is a folded patch with commit message (I often forget that..)",
    "created_at": "2013-08-24T19:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189423",
    "user": "chapoton"
}
```

Attachment [trac_15085_trop_coord_folded.patch](tarball://root/attachments/some-uuid/ticket15085/trac_15085_trop_coord_folded.patch) by chapoton created at 2013-08-24 19:22:19

ok, here is a folded patch with commit message (I often forget that..)



---

archive/issue_comments_189424.json:
```json
{
    "body": "Thanks Frederic.\n\nFor patchbot:\n\nApply: trac_15085_trop_coord_folded.patch",
    "created_at": "2013-08-24T19:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189424",
    "user": "tscrim"
}
```

Thanks Frederic.

For patchbot:

Apply: trac_15085_trop_coord_folded.patch



---

archive/issue_comments_189425.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-24T19:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189425",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_189426.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-28T06:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14848#issuecomment-189426",
    "user": "jdemeyer"
}
```

Resolution: fixed
