# Issue 31888: random Ore polynomials do not respect minimum degree bound

Issue created by migration from https://trac.sagemath.org/ticket/32125

Original creator: @mwageringel

Original creation time: 2021-07-04 10:12:55

CC:  caruso mjo


```
sage: R.<t> = ZZ[]
sage: sigma = R.hom([t+1])
sage: S.<x> = R['x',sigma]
sage: set([S.random_element(degree=(2, 4)).degree() for _ in range(1000)])
{ 0, 1, 2, 3, 4, -1 }
```


The degree should be between 2 and 4, in this example. The implementation does not check that the leading coefficient of the randomly generated polynomial is non-zero.



---

Comment by caruso created at 2021-09-02 08:10:33

Well, I agree that it's a bit disturbing but this behaviour is documented:


```        
    When ``monic`` is ``False``, the returned Ore polynomial may have
    a degree less than ``degree`` (it happens when the random leading
    coefficient is zero). However, if ``monic`` is ``True``, this
    cannot happen::
```


I remember that I chose this behaviour to be consistent with classical polynomials at the time. But meanwhile, it seems that the behaviour for usual polynomials has changed; so maybe, we also need to change it here.


---

Comment by @mwageringel created at 2021-09-05 07:49:27

Changing type from defect to enhancement.


---

Comment by @mwageringel created at 2021-09-05 07:49:27

I must admit I have missed that part of the documentation. Aligning the behavior with that of usual polynomials would make it a bit more intuitive I think. For reference, it was changed in #16682.


---

Comment by caruso created at 2021-09-05 08:41:27

OK, I've made the modification.

However, I'm not completely satisfied with this because `S.random_element()` now returns zero very often.
----
New commits:


---

Comment by @mwageringel created at 2021-09-05 09:50:56

Replying to [comment:6 caruso]:
> However, I'm not completely satisfied with this because `S.random_element()` now returns zero very often.

Indeed. What would you suggest to do instead? We could keep the default parameter `2` instead of `(-1,2)` maybe. My assumption was that the changes would be backward compatible, so I am surprised some of the doctests need to be adjusted.


---

Comment by caruso created at 2021-09-09 15:56:30

Changing status from new to needs_review.


---

Comment by caruso created at 2021-09-09 15:56:30

Replying to [comment:7 gh-mwageringel]:
> Indeed. What would you suggest to do instead? We could keep the default parameter `2` instead of `(-1,2)` maybe.

I'm not sure. But I would say that the best is to uniformize behaviours with classical polynomials. So, I change the status of this ticket to "needs review".

> My assumption was that the changes would be backward compatible, so I am surprised some of the doctests need to be adjusted.

That's just because the doctests were failing when the picked random polynomial vanishes (so there was a bug in the doctest). And now, it's often the case (so I saw the bug and could fix it).


---

Comment by mjo created at 2021-09-10 12:37:32

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2021-09-10 16:28:36

missing author name


---

Comment by @mwageringel created at 2021-09-10 19:03:15

Thanks for solving this.


---

Comment by vbraun created at 2021-09-15 22:06:08

Resolution: fixed
