# Issue 24663: Tensor product and coefficients

Issue created by migration from https://trac.sagemath.org/ticket/24900

Original creator: hivert

Original creation time: 2018-03-05 15:16:01

CC:  nthiery tscrim mkoeppe

Keywords: tensor product, free modules

Tensor products of combinatorial free modules still use an old version of
cartesian product. As a consequence extracting a coefficient is not possible:

```
sage: F = CombinatorialFreeModule(ZZ, [1,2]); F.__custom_name = "F"
sage: G = CombinatorialFreeModule(ZZ, [3,4]); G.__custom_name = "G"
sage: T = tensor([F, G]); T
sage: T.basis()[(1,3)].coefficient((1,3))
...
NotImplementedError:
```

I fix that. As a side effect, this change the result of `an_element` so that I
have to fix a few doctests.

Moreover, building the tensor of two infinite dimensional FM now raises a correct
warning:

```
sage: F = CombinatorialFreeModule(ZZ, NN)
sage: T = tensor([F, F]); T
Free module generated by Non negative integer semiring over Integer Ring ⊗ Free module generated by Non negative integer semiring over Integer Ring
sage: T.an_element()
/home/data/Sage-Install/sage-dev/local/lib/python2.7/site-packages/sage/categories/sets_cat.py:2159: UserWarning: Sage is not able to determine whether the factors of this Cartesian product are finite. The lexicographic ordering might not go through all elements.
  warn("Sage is not able to determine whether the factors of "
2*B[0] ⊗ B[1] + B[0] ⊗ B[0] + 3*B[0] ⊗ B[2] + B[42] ⊗ B[42]
```

I'm hiding this by asking only finite dim FM.



---

Comment by hivert created at 2018-03-05 15:18:45

New commits:


---

Comment by hivert created at 2018-03-05 15:18:45

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-03-14 16:50:33

many failing doctests


---

Comment by chapoton created at 2018-03-14 16:50:43

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2022-08-22 16:59:08

rebased, just to see where this stands now
----
New commits:


---

Comment by git created at 2022-08-23 08:57:46

Branch pushed to git repo; I updated commit sha1. New commits:
