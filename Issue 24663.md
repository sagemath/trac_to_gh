# Issue 24663: Tensor product and coefficients

archive/issues_024663.json:
```json
{
    "body": "CC:  nthiery tscrim mkoeppe\n\nKeywords: tensor product, free modules\n\nTensor products of combinatorial free modules still use an old version of\ncartesian product. As a consequence extracting a coefficient is not possible:\n\n```\nsage: F = CombinatorialFreeModule(ZZ, [1,2]); F.__custom_name = \"F\"\nsage: G = CombinatorialFreeModule(ZZ, [3,4]); G.__custom_name = \"G\"\nsage: T = tensor([F, G]); T\nsage: T.basis()[(1,3)].coefficient((1,3))\n...\nNotImplementedError:\n```\n\nI fix that. As a side effect, this change the result of `an_element` so that I\nhave to fix a few doctests.\n\nMoreover, building the tensor of two infinite dimensional FM now raises a correct\nwarning:\n\n```\nsage: F = CombinatorialFreeModule(ZZ, NN)\nsage: T = tensor([F, F]); T\nFree module generated by Non negative integer semiring over Integer Ring \u2297 Free module generated by Non negative integer semiring over Integer Ring\nsage: T.an_element()\n/home/data/Sage-Install/sage-dev/local/lib/python2.7/site-packages/sage/categories/sets_cat.py:2159: UserWarning: Sage is not able to determine whether the factors of this Cartesian product are finite. The lexicographic ordering might not go through all elements.\n  warn(\"Sage is not able to determine whether the factors of \"\n2*B[0] \u2297 B[1] + B[0] \u2297 B[0] + 3*B[0] \u2297 B[2] + B[42] \u2297 B[42]\n```\n\nI'm hiding this by asking only finite dim FM.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24900\n\n",
    "created_at": "2018-03-05T15:16:01Z",
    "labels": [
        "linear algebra",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Tensor product and coefficients",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24663",
    "user": "hivert"
}
```
CC:  nthiery tscrim mkoeppe

Keywords: tensor product, free modules

Tensor products of combinatorial free modules still use an old version of
cartesian product. As a consequence extracting a coefficient is not possible:

```
sage: F = CombinatorialFreeModule(ZZ, [1,2]); F.__custom_name = "F"
sage: G = CombinatorialFreeModule(ZZ, [3,4]); G.__custom_name = "G"
sage: T = tensor([F, G]); T
sage: T.basis()[(1,3)].coefficient((1,3))
...
NotImplementedError:
```

I fix that. As a side effect, this change the result of `an_element` so that I
have to fix a few doctests.

Moreover, building the tensor of two infinite dimensional FM now raises a correct
warning:

```
sage: F = CombinatorialFreeModule(ZZ, NN)
sage: T = tensor([F, F]); T
Free module generated by Non negative integer semiring over Integer Ring ⊗ Free module generated by Non negative integer semiring over Integer Ring
sage: T.an_element()
/home/data/Sage-Install/sage-dev/local/lib/python2.7/site-packages/sage/categories/sets_cat.py:2159: UserWarning: Sage is not able to determine whether the factors of this Cartesian product are finite. The lexicographic ordering might not go through all elements.
  warn("Sage is not able to determine whether the factors of "
2*B[0] ⊗ B[1] + B[0] ⊗ B[0] + 3*B[0] ⊗ B[2] + B[42] ⊗ B[42]
```

I'm hiding this by asking only finite dim FM.


Issue created by migration from https://trac.sagemath.org/ticket/24900





---

archive/issue_comments_345906.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-03-05T15:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24663",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24663#issuecomment-345906",
    "user": "hivert"
}
```

New commits:



---

archive/issue_comments_345907.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-03-05T15:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24663",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24663#issuecomment-345907",
    "user": "hivert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_345908.json:
```json
{
    "body": "many failing doctests",
    "created_at": "2018-03-14T16:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24663",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24663#issuecomment-345908",
    "user": "chapoton"
}
```

many failing doctests



---

archive/issue_comments_345909.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-03-14T16:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24663",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24663#issuecomment-345909",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_345910.json:
```json
{
    "body": "rebased, just to see where this stands now\n----\nNew commits:",
    "created_at": "2022-08-22T16:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24663",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24663#issuecomment-345910",
    "user": "chapoton"
}
```

rebased, just to see where this stands now
----
New commits:



---

archive/issue_comments_345911.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-23T08:57:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24663",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24663#issuecomment-345911",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
