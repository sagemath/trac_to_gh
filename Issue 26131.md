# Issue 26131: Setting up a Polyhedron from both Vrep and Hrep - for backend='polymake'

archive/issues_026131.json:
```json
{
    "body": "CC:  @jplab simonking @kliem @videlec\n\nFollow-up from #22701, where this was implemented for 'field'.\n\nIssue created by migration from https://trac.sagemath.org/ticket/26368\n\n",
    "created_at": "2018-09-30T17:22:13Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Setting up a Polyhedron from both Vrep and Hrep - for backend='polymake'",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26131",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @jplab simonking @kliem @videlec

Follow-up from #22701, where this was implemented for 'field'.

Issue created by migration from https://trac.sagemath.org/ticket/26368





---

archive/issue_comments_368009.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-25T23:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368009",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_368010.json:
```json
{
    "body": "#27745 has implemented this.",
    "created_at": "2021-05-25T23:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368010",
    "user": "https://github.com/mkoeppe"
}
```

#27745 has implemented this.



---

archive/issue_comments_368011.json:
```json
{
    "body": "While #27745 has illustrated how to implement this, it does not implement a method `_init_from_Vrepresentation_and_Hrepresentation`.\n\nThis method is utilized when changing backends or when doing fully characterized constructions.",
    "created_at": "2021-05-26T05:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368011",
    "user": "https://github.com/kliem"
}
```

While #27745 has illustrated how to implement this, it does not implement a method `_init_from_Vrepresentation_and_Hrepresentation`.

This method is utilized when changing backends or when doing fully characterized constructions.



---

archive/issue_comments_368012.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2021-05-26T05:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368012",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_368013.json:
```json
{
    "body": "Good point.",
    "created_at": "2021-05-26T05:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368013",
    "user": "https://github.com/mkoeppe"
}
```

Good point.



---

archive/issue_comments_368014.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2021-05-26T05:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368014",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_368015.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2021-05-26T10:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368015",
    "user": "https://github.com/kliem"
}
```

Last 10 new commits:



---

archive/issue_comments_368016.json:
```json
{
    "body": "Before doing this, we should really optimize sage to polymake input/output, this is really awful:\n\n\n```\nsage: P = polytopes.hypercube(8, backend='polymake')                                                                                                                                                                                                                                                                                                                       \nsage: %time a = P._polymake_polytope.VERTICES                                                                                                                                                                                                                                                                                                                              \nCPU times: user 457 \u00b5s, sys: 30 \u00b5s, total: 487 \u00b5s\nWall time: 489 \u00b5s\nsage: %time b = [vector(QQ(x) for x in c._repr_().split(' ')) for c in a]                                                                                                                                                                                                                                                                                                  \nCPU times: user 218 ms, sys: 15.9 ms, total: 234 ms\nWall time: 233 ms\nsage: %time b = [c.sage() for c in a]                                                                                                                                                                                                                                                                                                                                      \nCPU times: user 2.78 s, sys: 172 ms, total: 2.95 s\nWall time: 2.95 s\n```\n\n\nPolymake vector to sage vector should be much much better.",
    "created_at": "2021-05-26T10:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368016",
    "user": "https://github.com/kliem"
}
```

Before doing this, we should really optimize sage to polymake input/output, this is really awful:


```
sage: P = polytopes.hypercube(8, backend='polymake')                                                                                                                                                                                                                                                                                                                       
sage: %time a = P._polymake_polytope.VERTICES                                                                                                                                                                                                                                                                                                                              
CPU times: user 457 µs, sys: 30 µs, total: 487 µs
Wall time: 489 µs
sage: %time b = [vector(QQ(x) for x in c._repr_().split(' ')) for c in a]                                                                                                                                                                                                                                                                                                  
CPU times: user 218 ms, sys: 15.9 ms, total: 234 ms
Wall time: 233 ms
sage: %time b = [c.sage() for c in a]                                                                                                                                                                                                                                                                                                                                      
CPU times: user 2.78 s, sys: 172 ms, total: 2.95 s
Wall time: 2.95 s
```


Polymake vector to sage vector should be much much better.



---

archive/issue_comments_368017.json:
```json
{
    "body": "Is it possible to see with a profiler where the time is spent?",
    "created_at": "2021-05-26T14:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368017",
    "user": "https://github.com/mkoeppe"
}
```

Is it possible to see with a profiler where the time is spent?



---

archive/issue_comments_368018.json:
```json
{
    "body": "Did this. Not much can be done about input. However output can really be accelerated. Everything is slow: Iterating, item fetching etc. However, just taking the representation and string operations seems to work well.\n\nI have a branch I can push in an hour or so.",
    "created_at": "2021-05-26T15:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368018",
    "user": "https://github.com/kliem"
}
```

Did this. Not much can be done about input. However output can really be accelerated. Everything is slow: Iterating, item fetching etc. However, just taking the representation and string operations seems to work well.

I have a branch I can push in an hour or so.



---

archive/issue_comments_368019.json:
```json
{
    "body": "Is it easy to see how much time is spent on the polymake side (in Perl and compiled polymake code) vs. on the Python side?",
    "created_at": "2021-05-26T15:29:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368019",
    "user": "https://github.com/mkoeppe"
}
```

Is it easy to see how much time is spent on the polymake side (in Perl and compiled polymake code) vs. on the Python side?



---

archive/issue_comments_368020.json:
```json
{
    "body": "\n```\nsage: import pstats, cProfile                                                                                                                                                                                                                                                                                                                                              \nsage: cProfile.runctx(\"polytopes.hypercube(8, backend='polymake')\", globals(), locals(), \"/tmp/Profile.prof\")                                                                                                                                                                                                                                                              \nsage: s = pstats.Stats(\"/tmp/Profile.prof\")                                                                                                                                                                                                                                                                                                                                \nsage: s.strip_dirs().sort_stats(\"time\").print_stats()                                                                                                                                                                                                                                                                                                                      \nWed May 26 18:02:00 2021    /tmp/Profile.prof\n\n         230319 function calls (214830 primitive calls) in 2.368 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    1.433    1.433    1.433    1.433 {built-in method JuPyMake.InitializePolymake}\n     5463    0.733    0.000    0.733    0.000 {built-in method JuPyMake.ExecuteCommand}\n     2451    0.028    0.000    2.173    0.001 {method '_polymake_' of 'sage.structure.sage_object.SageObject' objects}\n5463/5458    0.018    0.000    2.195    0.000 polymake.py:2523(eval)\n   7903/8    0.015    0.000    2.303    0.288 interface.py:250(__call__)\n   2725/5    0.013    0.000    0.854    0.171 interface.py:334(_coerce_impl)\n     5176    0.012    0.000    2.186    0.000 interface.py:317(_coerce_from_special_method)\n      316    0.009    0.000    0.009    0.000 {built-in method builtins.compile}\n     2727    0.008    0.000    2.219    0.001 polymake.py:471(_create)\n8784/8779    0.006    0.000    0.007    0.000 {method 'format' of 'str' objects}\n       94    0.006    0.000    0.006    0.000 {built-in method marshal.loads}\n    10259    0.006    0.000    0.006    0.000 {built-in method builtins.hasattr}\n     2727    0.005    0.000    1.842    0.001 polymake.py:518(set)\n    35060    0.005    0.000    0.005    0.000 {built-in method builtins.isinstance}\n     2727    0.004    0.000    2.224    0.001 interface.py:705(__init__)\n   2725/5    0.004    0.000    0.854    0.171 polymake.py:303(_coerce_impl)\n     2727    0.004    0.000    0.006    0.000 polymake.py:431(_next_var_name)\n       17    0.003    0.000    0.003    0.000 {built-in method _imp.create_dynamic}\n     2725    0.002    0.000    0.006    0.000 interface.py:982(__del__)\n6266/5639    0.002    0.000    0.051    0.000 <frozen importlib._bootstrap>:1009(_handle_fromlist)\n  162/161    0.002    0.000    0.003    0.000 {built-in method builtins.__build_class__}\n     5465    0.002    0.000    0.002    0.000 polymake.py:2481(is_running)\n     7626    0.002    0.000    0.002    0.000 interface.py:95(name)\n     5463    0.001    0.000    0.001    0.000 verbose.py:251(get_verbose)\n      375    0.001    0.000    0.001    0.000 {built-in method posix.stat}\n     8477    0.001    0.000    0.001    0.000 {method 'strip' of 'str' objects}\n...\nsage: P = polytopes.hypercube(8, backend='polymake')                                                                                                                                                                                                                                                                                                                       \nsage: import pstats, cProfile                                                                                                                                                                                                                                                                                                                                              \nsage: cProfile.runctx(\"Polyhedron(ieqs=P.inequalities(), backend='polymake')\", globals(), locals(), \"/tmp/Profile.prof\")                                                                                                                                                                                                                                                   \nsage: s = pstats.Stats(\"/tmp/Profile.prof\")                                                                                                                                                                                                                                                                                                                                \nsage: s.strip_dirs().sort_stats(\"time\").print_stats()                                                                                                                                                                                                                                                                                                                      \nWed May 26 18:05:43 2021    /tmp/Profile.prof\n\n         566981 function calls (561525 primitive calls) in 3.534 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n    22084    3.020    0.000    3.020    0.000 {built-in method JuPyMake.ExecuteCommand}\n    22084    0.078    0.000    3.140    0.000 polymake.py:2523(eval)\n 2720/272    0.037    0.000    3.259    0.012 polymake.py:1460(_sage_)\n     2448    0.033    0.000    0.036    0.000 {built-in method builtins.eval}\n    27987    0.026    0.000    0.026    0.000 {built-in method builtins.hasattr}\n     2448    0.021    0.000    0.028    0.000 preparse.py:1143(preparse_numeric_literals)\n27098/27095    0.018    0.000    0.019    0.000 {method 'format' of 'str' objects}\n     2448    0.016    0.000    0.102    0.000 preparse.py:1693(preparse)\n     4896    0.015    0.000    0.019    0.000 {method 'sub' of 're.Pattern' objects}\n     2449    0.013    0.000    1.052    0.000 polymake.py:873(_repr_)\n    29664    0.012    0.000    0.014    0.000 interface.py:967(_check_valid)\n     2450    0.010    0.000    0.014    0.000 {built-in method builtins.getattr}\n     3089    0.009    0.000    0.954    0.000 polymake.py:471(_create)\n     2448    0.009    0.000    1.087    0.000 interface.py:992(_sage_repr)\n     2448    0.009    0.000    0.149    0.000 sage_eval.py:16(sage_eval)\n    24654    0.009    0.000    0.034    0.000 <frozen importlib._bootstrap>:1009(_handle_fromlist)\n7904/7902    0.009    0.000    0.045    0.000 polymake.py:1205(__getattr__)\n2864/2736    0.008    0.000    0.884    0.000 polymake.py:1346(__getitem__)\n     2724    0.008    0.000    0.771    0.000 polymake.py:1426(typeof)\n     5168    0.008    0.000    0.734    0.000 polymake.py:1121(typename)\n     2448    0.008    0.000    0.013    0.000 preparse.py:549(strip_string_literals)\n    36357    0.007    0.000    0.007    0.000 {built-in method builtins.isinstance}\n3325/2931    0.007    0.000    0.972    0.000 interface.py:250(__call__)\n     3089    0.006    0.000    0.514    0.000 polymake.py:518(set)\n     9792    0.006    0.000    0.008    0.000 re.py:271(_compile)\n    22089    0.006    0.000    0.006    0.000 polymake.py:2481(is_running)\n     3089    0.006    0.000    0.959    0.000 interface.py:705(__init__)\n     4900    0.005    0.000    0.688    0.000 polymake.py:600(get)\n    22084    0.005    0.000    0.005    0.000 verbose.py:251(get_verbose)\n     2449    0.004    0.000    1.073    0.000 interface.py:1094(__repr__)\n     4896    0.004    0.000    0.004    0.000 re.py:307(_subx)\n     7344    0.004    0.000    0.004    0.000 {method 'finditer' of 're.Pattern' objects}\n    26928    0.004    0.000    0.004    0.000 {method 'replace' of 'str' objects}\n     2448    0.004    0.000    0.008    0.000 preparse.py:1524(preparse_generators)\n    45197    0.004    0.000    0.004    0.000 {method 'parent' of 'sage.structure.element.Element' objects}\n      272    0.004    0.000    0.017    0.000 {sage.modules.free_module_element.vector}\n     2448    0.004    0.000    1.240    0.001 interface.py:1047(_sage_)\n      272    0.003    0.000    3.124    0.011 polymake.py:1537(<listcomp>)\n      832    0.003    0.000    0.006    0.000 free_module.py:1062(_element_constructor_)\n     2448    0.003    0.000    0.006    0.000 preparse.py:1407(preparse_calculus)\n...\n```\n\n\nThat is the ticket as is.\n\nI'm not exactly sure, why the method `_sage_` is as slow as it is. However, I already have a branch where I'm doing better by a factor of 100 or so. Just by parsing `_repr_` instead.\n\nThe input is slow as well, which does not suprise me, when forcing verbose things look like this:\n\n\n```\n\n## eval: print $SAGE0[0]->description;\n## eval: print $SAGE0[0];\n## eval: @SAGE23=(3);\n## eval: print scalar @SAGE23;\n## eval: @SAGE22=(1);\n## eval: print scalar @SAGE22;\n## eval: @SAGE21=(-1);\n## eval: print scalar @SAGE21;\n## eval: @SAGE20=(-1);\n## eval: print scalar @SAGE20;\n## eval: @SAGE19=([$SAGE22[0],$SAGE21[0],$SAGE20[0]]);\n## eval: print scalar @SAGE19;\n## eval: @SAGE18=(1);\n## eval: print scalar @SAGE18;\n## eval: @SAGE17=(-1);\n## eval: print scalar @SAGE17;\n## eval: @SAGE16=(1);\n## eval: print scalar @SAGE16;\n## eval: @SAGE15=([$SAGE18[0],$SAGE17[0],$SAGE16[0]]);\n## eval: print scalar @SAGE15;\n## eval: @SAGE14=(1);\n## eval: print scalar @SAGE14;\n## eval: @SAGE13=(1);\n## eval: print scalar @SAGE13;\n## eval: @SAGE12=(-1);\n## eval: print scalar @SAGE12;\n## eval: @SAGE11=([$SAGE14[0],$SAGE13[0],$SAGE12[0]]);\n## eval: print scalar @SAGE11;\n## eval: @SAGE10=(1);\n## eval: print scalar @SAGE10;\n## eval: @SAGE9=(1);\n## eval: print scalar @SAGE9;\n## eval: @SAGE8=(1);\n## eval: print scalar @SAGE8;\n## eval: @SAGE7=([$SAGE10[0],$SAGE9[0],$SAGE8[0]]);\n## eval: print scalar @SAGE7;\n## eval: @SAGE6=([$SAGE19[0],$SAGE15[0],$SAGE11[0],$SAGE7[0]]);\n## eval: print scalar @SAGE6;\n## eval: @SAGE5=([]);\n## eval: print scalar @SAGE5;\n## eval: @SAGE4=([]);\n## eval: print scalar @SAGE4;\n## eval: @SAGE3=(1);\n## eval: print scalar @SAGE3;\n## eval: @SAGE2=(-1);\n## eval: print scalar @SAGE2;\n## eval: @SAGE99=(0);\n## eval: print scalar @SAGE99;\n## eval: @SAGE100=([$SAGE3[0],$SAGE2[0],$SAGE99[0]]);\n## eval: print scalar @SAGE100;\n## eval: @SAGE149=(1);\n## eval: print scalar @SAGE149;\n## eval: @SAGE148=(0);\n## eval: print scalar @SAGE148;\n## eval: @SAGE147=(-1);\n## eval: print scalar @SAGE147;\n## eval: @SAGE146=([$SAGE149[0],$SAGE148[0],$SAGE147[0]]);\n## eval: print scalar @SAGE146;\n## eval: @SAGE145=(1);\n## eval: print scalar @SAGE145;\n## eval: @SAGE144=(1);\n## eval: print scalar @SAGE144;\n## eval: @SAGE143=(0);\n## eval: print scalar @SAGE143;\n## eval: @SAGE142=([$SAGE145[0],$SAGE144[0],$SAGE143[0]]);\n## eval: print scalar @SAGE142;\n## eval: @SAGE141=(1);\n## eval: print scalar @SAGE141;\n## eval: @SAGE140=(0);\n## eval: print scalar @SAGE140;\n## eval: @SAGE139=(1);\n## eval: print scalar @SAGE139;\n## eval: @SAGE138=([$SAGE141[0],$SAGE140[0],$SAGE139[0]]);\n## eval: print scalar @SAGE138;\n## eval: @SAGE137=([$SAGE100[0],$SAGE146[0],$SAGE142[0],$SAGE138[0]]);\n## eval: print scalar @SAGE137;\n## eval: @SAGE136=(new Polytope<Rational>(CONE_AMBIENT_DIM=>$SAGE23[0],VERTICES=>$SAGE6[0],LINEALITY_SPACE=>$SAGE5[0],AFFINE_HULL=>$SAGE4[0],FACETS=>$SAGE137[0]));\n## eval: print scalar @SAGE136;\nA 2-dimensional polyhedron in QQ^2 defined as the convex hull of 4 vertices\n```\n\n\nPolymake also accepts input files etc. in interactive mode. So maybe we could utilize this.",
    "created_at": "2021-05-26T16:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368020",
    "user": "https://github.com/kliem"
}
```


```
sage: import pstats, cProfile                                                                                                                                                                                                                                                                                                                                              
sage: cProfile.runctx("polytopes.hypercube(8, backend='polymake')", globals(), locals(), "/tmp/Profile.prof")                                                                                                                                                                                                                                                              
sage: s = pstats.Stats("/tmp/Profile.prof")                                                                                                                                                                                                                                                                                                                                
sage: s.strip_dirs().sort_stats("time").print_stats()                                                                                                                                                                                                                                                                                                                      
Wed May 26 18:02:00 2021    /tmp/Profile.prof

         230319 function calls (214830 primitive calls) in 2.368 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    1.433    1.433    1.433    1.433 {built-in method JuPyMake.InitializePolymake}
     5463    0.733    0.000    0.733    0.000 {built-in method JuPyMake.ExecuteCommand}
     2451    0.028    0.000    2.173    0.001 {method '_polymake_' of 'sage.structure.sage_object.SageObject' objects}
5463/5458    0.018    0.000    2.195    0.000 polymake.py:2523(eval)
   7903/8    0.015    0.000    2.303    0.288 interface.py:250(__call__)
   2725/5    0.013    0.000    0.854    0.171 interface.py:334(_coerce_impl)
     5176    0.012    0.000    2.186    0.000 interface.py:317(_coerce_from_special_method)
      316    0.009    0.000    0.009    0.000 {built-in method builtins.compile}
     2727    0.008    0.000    2.219    0.001 polymake.py:471(_create)
8784/8779    0.006    0.000    0.007    0.000 {method 'format' of 'str' objects}
       94    0.006    0.000    0.006    0.000 {built-in method marshal.loads}
    10259    0.006    0.000    0.006    0.000 {built-in method builtins.hasattr}
     2727    0.005    0.000    1.842    0.001 polymake.py:518(set)
    35060    0.005    0.000    0.005    0.000 {built-in method builtins.isinstance}
     2727    0.004    0.000    2.224    0.001 interface.py:705(__init__)
   2725/5    0.004    0.000    0.854    0.171 polymake.py:303(_coerce_impl)
     2727    0.004    0.000    0.006    0.000 polymake.py:431(_next_var_name)
       17    0.003    0.000    0.003    0.000 {built-in method _imp.create_dynamic}
     2725    0.002    0.000    0.006    0.000 interface.py:982(__del__)
6266/5639    0.002    0.000    0.051    0.000 <frozen importlib._bootstrap>:1009(_handle_fromlist)
  162/161    0.002    0.000    0.003    0.000 {built-in method builtins.__build_class__}
     5465    0.002    0.000    0.002    0.000 polymake.py:2481(is_running)
     7626    0.002    0.000    0.002    0.000 interface.py:95(name)
     5463    0.001    0.000    0.001    0.000 verbose.py:251(get_verbose)
      375    0.001    0.000    0.001    0.000 {built-in method posix.stat}
     8477    0.001    0.000    0.001    0.000 {method 'strip' of 'str' objects}
...
sage: P = polytopes.hypercube(8, backend='polymake')                                                                                                                                                                                                                                                                                                                       
sage: import pstats, cProfile                                                                                                                                                                                                                                                                                                                                              
sage: cProfile.runctx("Polyhedron(ieqs=P.inequalities(), backend='polymake')", globals(), locals(), "/tmp/Profile.prof")                                                                                                                                                                                                                                                   
sage: s = pstats.Stats("/tmp/Profile.prof")                                                                                                                                                                                                                                                                                                                                
sage: s.strip_dirs().sort_stats("time").print_stats()                                                                                                                                                                                                                                                                                                                      
Wed May 26 18:05:43 2021    /tmp/Profile.prof

         566981 function calls (561525 primitive calls) in 3.534 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    22084    3.020    0.000    3.020    0.000 {built-in method JuPyMake.ExecuteCommand}
    22084    0.078    0.000    3.140    0.000 polymake.py:2523(eval)
 2720/272    0.037    0.000    3.259    0.012 polymake.py:1460(_sage_)
     2448    0.033    0.000    0.036    0.000 {built-in method builtins.eval}
    27987    0.026    0.000    0.026    0.000 {built-in method builtins.hasattr}
     2448    0.021    0.000    0.028    0.000 preparse.py:1143(preparse_numeric_literals)
27098/27095    0.018    0.000    0.019    0.000 {method 'format' of 'str' objects}
     2448    0.016    0.000    0.102    0.000 preparse.py:1693(preparse)
     4896    0.015    0.000    0.019    0.000 {method 'sub' of 're.Pattern' objects}
     2449    0.013    0.000    1.052    0.000 polymake.py:873(_repr_)
    29664    0.012    0.000    0.014    0.000 interface.py:967(_check_valid)
     2450    0.010    0.000    0.014    0.000 {built-in method builtins.getattr}
     3089    0.009    0.000    0.954    0.000 polymake.py:471(_create)
     2448    0.009    0.000    1.087    0.000 interface.py:992(_sage_repr)
     2448    0.009    0.000    0.149    0.000 sage_eval.py:16(sage_eval)
    24654    0.009    0.000    0.034    0.000 <frozen importlib._bootstrap>:1009(_handle_fromlist)
7904/7902    0.009    0.000    0.045    0.000 polymake.py:1205(__getattr__)
2864/2736    0.008    0.000    0.884    0.000 polymake.py:1346(__getitem__)
     2724    0.008    0.000    0.771    0.000 polymake.py:1426(typeof)
     5168    0.008    0.000    0.734    0.000 polymake.py:1121(typename)
     2448    0.008    0.000    0.013    0.000 preparse.py:549(strip_string_literals)
    36357    0.007    0.000    0.007    0.000 {built-in method builtins.isinstance}
3325/2931    0.007    0.000    0.972    0.000 interface.py:250(__call__)
     3089    0.006    0.000    0.514    0.000 polymake.py:518(set)
     9792    0.006    0.000    0.008    0.000 re.py:271(_compile)
    22089    0.006    0.000    0.006    0.000 polymake.py:2481(is_running)
     3089    0.006    0.000    0.959    0.000 interface.py:705(__init__)
     4900    0.005    0.000    0.688    0.000 polymake.py:600(get)
    22084    0.005    0.000    0.005    0.000 verbose.py:251(get_verbose)
     2449    0.004    0.000    1.073    0.000 interface.py:1094(__repr__)
     4896    0.004    0.000    0.004    0.000 re.py:307(_subx)
     7344    0.004    0.000    0.004    0.000 {method 'finditer' of 're.Pattern' objects}
    26928    0.004    0.000    0.004    0.000 {method 'replace' of 'str' objects}
     2448    0.004    0.000    0.008    0.000 preparse.py:1524(preparse_generators)
    45197    0.004    0.000    0.004    0.000 {method 'parent' of 'sage.structure.element.Element' objects}
      272    0.004    0.000    0.017    0.000 {sage.modules.free_module_element.vector}
     2448    0.004    0.000    1.240    0.001 interface.py:1047(_sage_)
      272    0.003    0.000    3.124    0.011 polymake.py:1537(<listcomp>)
      832    0.003    0.000    0.006    0.000 free_module.py:1062(_element_constructor_)
     2448    0.003    0.000    0.006    0.000 preparse.py:1407(preparse_calculus)
...
```


That is the ticket as is.

I'm not exactly sure, why the method `_sage_` is as slow as it is. However, I already have a branch where I'm doing better by a factor of 100 or so. Just by parsing `_repr_` instead.

The input is slow as well, which does not suprise me, when forcing verbose things look like this:


```

## eval: print $SAGE0[0]->description;
## eval: print $SAGE0[0];
## eval: @SAGE23=(3);
## eval: print scalar @SAGE23;
## eval: @SAGE22=(1);
## eval: print scalar @SAGE22;
## eval: @SAGE21=(-1);
## eval: print scalar @SAGE21;
## eval: @SAGE20=(-1);
## eval: print scalar @SAGE20;
## eval: @SAGE19=([$SAGE22[0],$SAGE21[0],$SAGE20[0]]);
## eval: print scalar @SAGE19;
## eval: @SAGE18=(1);
## eval: print scalar @SAGE18;
## eval: @SAGE17=(-1);
## eval: print scalar @SAGE17;
## eval: @SAGE16=(1);
## eval: print scalar @SAGE16;
## eval: @SAGE15=([$SAGE18[0],$SAGE17[0],$SAGE16[0]]);
## eval: print scalar @SAGE15;
## eval: @SAGE14=(1);
## eval: print scalar @SAGE14;
## eval: @SAGE13=(1);
## eval: print scalar @SAGE13;
## eval: @SAGE12=(-1);
## eval: print scalar @SAGE12;
## eval: @SAGE11=([$SAGE14[0],$SAGE13[0],$SAGE12[0]]);
## eval: print scalar @SAGE11;
## eval: @SAGE10=(1);
## eval: print scalar @SAGE10;
## eval: @SAGE9=(1);
## eval: print scalar @SAGE9;
## eval: @SAGE8=(1);
## eval: print scalar @SAGE8;
## eval: @SAGE7=([$SAGE10[0],$SAGE9[0],$SAGE8[0]]);
## eval: print scalar @SAGE7;
## eval: @SAGE6=([$SAGE19[0],$SAGE15[0],$SAGE11[0],$SAGE7[0]]);
## eval: print scalar @SAGE6;
## eval: @SAGE5=([]);
## eval: print scalar @SAGE5;
## eval: @SAGE4=([]);
## eval: print scalar @SAGE4;
## eval: @SAGE3=(1);
## eval: print scalar @SAGE3;
## eval: @SAGE2=(-1);
## eval: print scalar @SAGE2;
## eval: @SAGE99=(0);
## eval: print scalar @SAGE99;
## eval: @SAGE100=([$SAGE3[0],$SAGE2[0],$SAGE99[0]]);
## eval: print scalar @SAGE100;
## eval: @SAGE149=(1);
## eval: print scalar @SAGE149;
## eval: @SAGE148=(0);
## eval: print scalar @SAGE148;
## eval: @SAGE147=(-1);
## eval: print scalar @SAGE147;
## eval: @SAGE146=([$SAGE149[0],$SAGE148[0],$SAGE147[0]]);
## eval: print scalar @SAGE146;
## eval: @SAGE145=(1);
## eval: print scalar @SAGE145;
## eval: @SAGE144=(1);
## eval: print scalar @SAGE144;
## eval: @SAGE143=(0);
## eval: print scalar @SAGE143;
## eval: @SAGE142=([$SAGE145[0],$SAGE144[0],$SAGE143[0]]);
## eval: print scalar @SAGE142;
## eval: @SAGE141=(1);
## eval: print scalar @SAGE141;
## eval: @SAGE140=(0);
## eval: print scalar @SAGE140;
## eval: @SAGE139=(1);
## eval: print scalar @SAGE139;
## eval: @SAGE138=([$SAGE141[0],$SAGE140[0],$SAGE139[0]]);
## eval: print scalar @SAGE138;
## eval: @SAGE137=([$SAGE100[0],$SAGE146[0],$SAGE142[0],$SAGE138[0]]);
## eval: print scalar @SAGE137;
## eval: @SAGE136=(new Polytope<Rational>(CONE_AMBIENT_DIM=>$SAGE23[0],VERTICES=>$SAGE6[0],LINEALITY_SPACE=>$SAGE5[0],AFFINE_HULL=>$SAGE4[0],FACETS=>$SAGE137[0]));
## eval: print scalar @SAGE136;
A 2-dimensional polyhedron in QQ^2 defined as the convex hull of 4 vertices
```


Polymake also accepts input files etc. in interactive mode. So maybe we could utilize this.



---

archive/issue_comments_368021.json:
```json
{
    "body": "I'm puzzled about this line:\n\n```\n 1.052    0.000 polymake.py:873(_repr_)\n```\n",
    "created_at": "2021-05-26T16:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368021",
    "user": "https://github.com/mkoeppe"
}
```

I'm puzzled about this line:

```
 1.052    0.000 polymake.py:873(_repr_)
```




---

archive/issue_comments_368022.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-27T07:39:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368023.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-05-27T07:50:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368023",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_368024.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-27T12:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368024",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368025.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-27T18:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368026.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-27T19:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368026",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_368027.json:
```json
{
    "body": "This seems to work well, thanks!",
    "created_at": "2021-05-27T19:01:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368027",
    "user": "https://github.com/mkoeppe"
}
```

This seems to work well, thanks!



---

archive/issue_comments_368028.json:
```json
{
    "body": "Thank you.\n\nThere is a problem with `JuPyMake` yet. It really doesn't play nicely with keyboard interrupts. Well polymake doesn't handle interrupts at all to start with, but killing sage the hard way at keyboard interrupt isn't really what you would expect.",
    "created_at": "2021-05-27T19:30:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368028",
    "user": "https://github.com/kliem"
}
```

Thank you.

There is a problem with `JuPyMake` yet. It really doesn't play nicely with keyboard interrupts. Well polymake doesn't handle interrupts at all to start with, but killing sage the hard way at keyboard interrupt isn't really what you would expect.



---

archive/issue_comments_368029.json:
```json
{
    "body": "Could you open a new ticket for this please?",
    "created_at": "2021-05-27T19:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368029",
    "user": "https://github.com/mkoeppe"
}
```

Could you open a new ticket for this please?



---

archive/issue_comments_368030.json:
```json
{
    "body": "\n```\nsage -t --long --warn-long 44.3 --random-seed=0 src/sage/geometry/polyhedron/backend_polymake.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/backend_polymake.py\", line 420, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake._init_from_Vrepresentation_and_Hrep\nresentation\nFailed example:\n    p = Polyhedron_polymake(parent, Vrep, Hrep,\n                            Vrep_minimal=True, Hrep_minimal=True)  # indirect doctest  # optional - polymake\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/interfaces/expect.py\", line 516, in _start\n        self._expect.expect(self._prompt)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/spawnbase.py\", line 343, in expect\n        return self.expect_list(compiled_pattern_list,\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/spawnbase.py\", line 372, in expect_list\n        return exp.expect_loop(timeout)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/expect.py\", line 179, in expect_loop\n        return self.eof(e)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/expect.py\", line 122, in eof\n        raise exc\n    pexpect.exceptions.EOF: End Of File (EOF). Exception style platform.\n    Polymake finished running /usr/bin/env TERM=dumb polymake\n    command: /usr/bin/env\n    args: ['/usr/bin/env', 'TERM=dumb', 'polymake']\n    buffer (last 100 chars): b''\n    before (last 100 chars): b'/usr/bin/env: \\xe2\\x80\\x98polymake\\xe2\\x80\\x99: No such file or directory\\r\\n'\n    after: <class 'pexpect.exceptions.EOF'>\n    match: None\n    match_index: None\n    exitstatus: 127\n    flag_eof: True\n[...]\n```\n",
    "created_at": "2021-07-21T20:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368030",
    "user": "https://github.com/vbraun"
}
```


```
sage -t --long --warn-long 44.3 --random-seed=0 src/sage/geometry/polyhedron/backend_polymake.py
**********************************************************************
File "src/sage/geometry/polyhedron/backend_polymake.py", line 420, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake._init_from_Vrepresentation_and_Hrep
resentation
Failed example:
    p = Polyhedron_polymake(parent, Vrep, Hrep,
                            Vrep_minimal=True, Hrep_minimal=True)  # indirect doctest  # optional - polymake
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/interfaces/expect.py", line 516, in _start
        self._expect.expect(self._prompt)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/spawnbase.py", line 343, in expect
        return self.expect_list(compiled_pattern_list,
      File "/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/spawnbase.py", line 372, in expect_list
        return exp.expect_loop(timeout)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/expect.py", line 179, in expect_loop
        return self.eof(e)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/expect.py", line 122, in eof
        raise exc
    pexpect.exceptions.EOF: End Of File (EOF). Exception style platform.
    Polymake finished running /usr/bin/env TERM=dumb polymake
    command: /usr/bin/env
    args: ['/usr/bin/env', 'TERM=dumb', 'polymake']
    buffer (last 100 chars): b''
    before (last 100 chars): b'/usr/bin/env: \xe2\x80\x98polymake\xe2\x80\x99: No such file or directory\r\n'
    after: <class 'pexpect.exceptions.EOF'>
    match: None
    match_index: None
    exitstatus: 127
    flag_eof: True
[...]
```




---

archive/issue_comments_368031.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-21T20:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368031",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_368032.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-22T06:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368033.json:
```json
{
    "body": "Replying to [comment:21 vbraun]:\n> {{{\n> sage -t --long --warn-long 44.3 --random-seed=0 src/sage/geometry/polyhedron/backend_polymake.py\n> **********************************************************************\n> File \"src/sage/geometry/polyhedron/backend_polymake.py\", line 420, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake._init_from_Vrepresentation_and_Hrep\n> resentation\n> Failed example:\n>     p = Polyhedron_polymake(parent, Vrep, Hrep,\n>                             Vrep_minimal=True, Hrep_minimal=True)  # indirect doctest  # optional - polymake\n> Exception raised:\n>     Traceback (most recent call last):\n>       File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/interfaces/expect.py\", line 516, in _start\n>         self._expect.expect(self._prompt)\n>       File \"/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/spawnbase.py\", line 343, in expect\n>         return self.expect_list(compiled_pattern_list,\n>       File \"/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/spawnbase.py\", line 372, in expect_list\n>         return exp.expect_loop(timeout)\n>       File \"/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/expect.py\", line 179, in expect_loop\n>         return self.eof(e)\n>       File \"/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/expect.py\", line 122, in eof\n>         raise exc\n>     pexpect.exceptions.EOF: End Of File (EOF). Exception style platform.\n>     Polymake finished running /usr/bin/env TERM=dumb polymake\n>     command: /usr/bin/env\n>     args: ['/usr/bin/env', 'TERM=dumb', 'polymake']\n>     buffer (last 100 chars): b''\n>     before (last 100 chars): b'/usr/bin/env: \\xe2\\x80\\x98polymake\\xe2\\x80\\x99: No such file or directory\\r\\n'\n>     after: <class 'pexpect.exceptions.EOF'>\n>     match: None\n>     match_index: None\n>     exitstatus: 127\n>     flag_eof: True\n> [...]\n> }}}\n\nMerging in the updates from #27745 should resolve this (or raise a proper deprecation warning or something).\n\nIn any case. `pexpect` is deprecated. I can't get it to work either. On some machines it still works, on some it doesn't. `jupymake` should work just fine.",
    "created_at": "2021-07-22T06:42:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368033",
    "user": "https://github.com/kliem"
}
```

Replying to [comment:21 vbraun]:
> {{{
> sage -t --long --warn-long 44.3 --random-seed=0 src/sage/geometry/polyhedron/backend_polymake.py
> **********************************************************************
> File "src/sage/geometry/polyhedron/backend_polymake.py", line 420, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake._init_from_Vrepresentation_and_Hrep
> resentation
> Failed example:
>     p = Polyhedron_polymake(parent, Vrep, Hrep,
>                             Vrep_minimal=True, Hrep_minimal=True)  # indirect doctest  # optional - polymake
> Exception raised:
>     Traceback (most recent call last):
>       File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/interfaces/expect.py", line 516, in _start
>         self._expect.expect(self._prompt)
>       File "/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/spawnbase.py", line 343, in expect
>         return self.expect_list(compiled_pattern_list,
>       File "/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/spawnbase.py", line 372, in expect_list
>         return exp.expect_loop(timeout)
>       File "/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/expect.py", line 179, in expect_loop
>         return self.eof(e)
>       File "/home/release/Sage/local/lib64/python3.9/site-packages/pexpect/expect.py", line 122, in eof
>         raise exc
>     pexpect.exceptions.EOF: End Of File (EOF). Exception style platform.
>     Polymake finished running /usr/bin/env TERM=dumb polymake
>     command: /usr/bin/env
>     args: ['/usr/bin/env', 'TERM=dumb', 'polymake']
>     buffer (last 100 chars): b''
>     before (last 100 chars): b'/usr/bin/env: \xe2\x80\x98polymake\xe2\x80\x99: No such file or directory\r\n'
>     after: <class 'pexpect.exceptions.EOF'>
>     match: None
>     match_index: None
>     exitstatus: 127
>     flag_eof: True
> [...]
> }}}

Merging in the updates from #27745 should resolve this (or raise a proper deprecation warning or something).

In any case. `pexpect` is deprecated. I can't get it to work either. On some machines it still works, on some it doesn't. `jupymake` should work just fine.



---

archive/issue_comments_368034.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-22T06:42:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368034",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_368035.json:
```json
{
    "body": "I think it's just that here\n\n```\n+            sage: p = Polyhedron_polymake(parent, Vrep, Hrep,\n+            ....:                         Vrep_minimal=True, Hrep_minimal=True)  # indirect doctest  # optional - polymake\n+            sage: p  # optional - polymake\n```\n\nthe `# optional - polymake` should appear on the first line",
    "created_at": "2021-07-22T14:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368035",
    "user": "https://github.com/mkoeppe"
}
```

I think it's just that here

```
+            sage: p = Polyhedron_polymake(parent, Vrep, Hrep,
+            ....:                         Vrep_minimal=True, Hrep_minimal=True)  # indirect doctest  # optional - polymake
+            sage: p  # optional - polymake
```

the `# optional - polymake` should appear on the first line



---

archive/issue_comments_368036.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-22T15:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368036",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_368037.json:
```json
{
    "body": "Replying to [comment:25 mkoeppe]:\n> I think it's just that here\n> {{{\n> +            sage: p = Polyhedron_polymake(parent, Vrep, Hrep,\n> +            ....:                         Vrep_minimal=True, Hrep_minimal=True)  # indirect doctest  # optional - polymake\n> +            sage: p  # optional - polymake\n> }}}\n> the `# optional - polymake` should appear on the first line\n\nRight. I wonder, when I will stop making this mistake ...",
    "created_at": "2021-07-22T15:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368037",
    "user": "https://github.com/kliem"
}
```

Replying to [comment:25 mkoeppe]:
> I think it's just that here
> {{{
> +            sage: p = Polyhedron_polymake(parent, Vrep, Hrep,
> +            ....:                         Vrep_minimal=True, Hrep_minimal=True)  # indirect doctest  # optional - polymake
> +            sage: p  # optional - polymake
> }}}
> the `# optional - polymake` should appear on the first line

Right. I wonder, when I will stop making this mistake ...



---

archive/issue_comments_368038.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-22T16:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368038",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_024279.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2021-07-24T15:28:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26131#event-24279"
}
```



---

archive/issue_comments_368039.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-24T15:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26131#issuecomment-368039",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
