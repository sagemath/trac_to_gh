# Issue 24455: Upgrade GDB

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2018-02-09 09:43:26

CC:  fbissey

*Tarball*: http://ftp.gnu.org/gnu/gdb/gdb-8.1.tar.xz


---

Comment by git created at 2018-02-09 09:58:58

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-02-09 09:59:16

Changing status from new to needs_review.


---

Comment by git created at 2018-02-09 10:02:16

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by fbissey created at 2018-02-28 09:09:03

I am not convinced that the `--with-gmp...` stuff is useful.It just happens that the top configure file is shared with gcc so the top options are the same. Do we want to add some configuration options for the python used? Is this picked up automagically?


---

Comment by jdemeyer created at 2018-02-28 09:11:17

Replying to [comment:6 fbissey]:
> I am not convinced that the `--with-gmp...` stuff is useful.

At least it doesn't hurt, right?

> Do we want to add some configuration options for the python used? Is this picked up automagically?

Let me have a look.


---

Comment by jdemeyer created at 2018-03-30 12:07:49

Replying to [comment:6 fbissey]:
> Do we want to add some configuration options for the python used? Is this picked up automagically?

Seems to work automagically:

```
checking whether to use python... auto
checking for python... /usr/local/src/sage-config/local/bin/python
checking for python2.7... yes
```



---

Comment by jdemeyer created at 2018-03-30 12:08:10

And I don't see any `configure` options regarding Python.


---

Comment by fbissey created at 2018-03-30 19:22:33

Replying to [comment:9 jdemeyer]:
> And I don't see any `configure` options regarding Python.

Ok full automagic or, more likely, possibly it is actually in one of the "sub-configure". It looks like standard autotools detection, so setting `PYTHON` would change the result.


---

Comment by @timokau created at 2018-07-11 17:33:51

Just fyi, for nixos I noticed that the cysignals tests fail for reasons that appear to be related with gdb 8. I didn't look into it any further.


---

Comment by git created at 2018-10-16 10:17:35

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dimpase created at 2018-10-16 10:20:50

does this work without `makeinfo` installed?


---

Comment by dimpase created at 2018-10-16 11:16:13

In fact it fails (on stable x86_64 Debian, nothing special)

```
...
[gdb-8.2] mv GDBvn.new GDBvn.texi
[gdb-8.2] /home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2/src/missing makeinfo --split-size=5000000 --split-size=5000000   -I ./../../readline/doc -I ./../mi -I . \
[gdb-8.2]       -o gdb.info ./gdb.texinfo
[gdb-8.2] /home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2/src/missing: 81: /home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2/src/missing: makeinfo: not found
[gdb-8.2] WARNING: 'makeinfo' is missing on your system.
[gdb-8.2]          You should only need it if you modified a '.texi' file, or
[gdb-8.2]          any other file indirectly affecting the aspect of the manual.
[gdb-8.2]          You might want to install the Texinfo package:
[gdb-8.2]          <http://www.gnu.org/software/texinfo/>
[gdb-8.2]          The spurious makeinfo call might also be the consequence of
[gdb-8.2]          using a buggy 'make' (AIX, DU, IRIX), in which case you might
[gdb-8.2]          want to install GNU make:
[gdb-8.2]          <http://www.gnu.org/software/make/>
[gdb-8.2] Makefile:486: recipe for target 'gdb.info' failed
[gdb-8.2] Makefile:1741: recipe for target 'install-only' failed
[gdb-8.2] make[5]: *** [install-only] Error 2
[gdb-8.2] make[5]: Leaving directory '/home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2/src/gdb'
[gdb-8.2] Makefile:1738: recipe for target 'install' failed
[gdb-8.2] make[4]: *** [install] Error 2
[gdb-8.2] make[4]: Leaving directory '/home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2/src/gdb'
[gdb-8.2] Makefile:9155: recipe for target 'install-gdb' failed
[gdb-8.2] make[3]: *** [install-gdb] Error 2
[gdb-8.2] make[3]: Leaving directory '/home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2/src'
[gdb-8.2] Makefile:2222: recipe for target 'install' failed
[gdb-8.2] make[2]: *** [install] Error 2
[gdb-8.2] make[2]: Leaving directory '/home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2/src'
[gdb-8.2] ********************************************************************************
[gdb-8.2] Error installing gdb-8.2
[gdb-8.2] ********************************************************************************
[gdb-8.2]
[gdb-8.2] real  10m22.381s
[gdb-8.2] user  8m18.012s
[gdb-8.2] sys   1m5.912s
[gdb-8.2] ************************************************************************
[gdb-8.2] Error installing package gdb-8.2
[gdb-8.2] ************************************************************************
[gdb-8.2] Please email sage-devel (http://groups.google.com/group/sage-devel)
[gdb-8.2] explaining the problem and including the log file
[gdb-8.2]   /home/dimpase/sage/logs/pkgs/gdb-8.2.log
[gdb-8.2] Describe your computer, operating system, etc.
[gdb-8.2] If you want to try to fix the problem yourself, *don't* just cd to
[gdb-8.2] /home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2 and type 'make' or whatever is appropriate.
[gdb-8.2] Instead, the following commands setup all environment variables
[gdb-8.2] correctly and load a subshell for you to debug the error:
[gdb-8.2]   (cd '/home/dimpase/sage/local/var/tmp/sage/build/gdb-8.2' && '/home/dimpase/sage/sage' --sh)
[gdb-8.2] When you are done debugging, you can type "exit" to leave the subshell.
[gdb-8.2] ************************************************************************
Makefile:2109: recipe for target '/home/dimpase/sage/local/var/lib/sage/installed/gdb-8.2' failed
make[1]: *** [/home/dimpase/sage/local/var/lib/sage/installed/gdb-8.2] Error 1
make[1]: Leaving directory '/home/dimpase/sage/build/make'
```


it is annoying, as e.g. I have no clue how people can get `makeinfo` on OSX.
However, I'd be OK if it was mentioned in SPKG.txt that `makeinfo` is needed.


---

Comment by dimpase created at 2018-10-17 14:22:15

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2018-10-17 14:22:15

I added a note in SPKG.txt about makeinfo. 
Good to go otherwise.


---

Comment by vbraun created at 2018-10-20 11:59:11

Resolution: fixed


---

Comment by embray created at 2018-10-28 14:52:23

This should be re-targeted for 8.5.
