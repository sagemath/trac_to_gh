# Issue 14106: CBC compilation problem -- optional arguments in a .pxd file

Issue created by migration from https://trac.sagemath.org/ticket/14310

Original creator: ncohen

Original creation time: 2013-03-19 11:20:43

Assignee: ncohen

CC:  pmueller

As reported there :

https://groups.google.com/forum/?fromgroups=#!topic/sage-support/ZMzeEG-NSFo

This apparently comes from a Cython upgrade. Anyway nobody used those optional parameters ! `:-P`

Nathann


---

Comment by ncohen created at 2013-03-19 11:27:13

Fixed ! It also seems that Coin was had become a bit too verbose, for some reason `O_o`

Nathann


---

Comment by ncohen created at 2013-03-19 11:27:13

Changing status from new to needs_review.


---

Comment by pmueller created at 2013-03-20 09:36:59

Changing status from needs_review to needs_work.


---

Comment by pmueller created at 2013-03-20 09:36:59

The patch installed fine, and some simple tests which work with different solvers work with the coin-cbc solver too.

However, as suggested in the section `Reviewing a patch', I did run `./sage --testall --long`, and got two failures:


```
**********************************************************************
File "/home/mueller/local/sage-5.8/devel/sage/doc/en/thematic_tutorials/linear_p
rogramming.rst", line 281:
    sage: p.solve()
Expected:
    3.1502766806530307
Got:
    3.15027668065
**********************************************************************
File "/home/mueller/local/sage-5.8/devel/sage/doc/en/thematic_tutorials/linear_p
rogramming.rst", line 291:
    sage: sum(weight[o] * taken[o] for o in L)
Expected:
    0.6964959796619171
Got:
    0.696495979661917
**********************************************************************
1 items had failures:
   2 of  18 in __main__.example_1
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/mueller/.sage//tmp/linear_programming_6443.py
```

and another one

```
**********************************************************************
File "/home/mueller/local/sage-5.8/devel/sage/sage/numerical/mip.pyx", line 1853
:
    sage: b.solver_parameter("simplex_or_intopt", "simplex_only")
Exception raised:
    Traceback (most recent call last):
      File "/home/mueller/local/sage-5.8/local/bin/ncadoctest.py", line 1231, in
 run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/mueller/local/sage-5.8/local/bin/sagedoctest.py", line 38, in 
run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compile
flags)
      File "/home/mueller/local/sage-5.8/local/bin/ncadoctest.py", line 1172, in
 run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_36[8]>", line 1, in <module>
        b.solver_parameter("simplex_or_intopt", "simplex_only")###line 1853:
    sage: b.solver_parameter("simplex_or_intopt", "simplex_only")
      File "generic_backend.pyx", line 837, in sage.numerical.backends.generic_b
ackend.GenericBackend.solver_parameter (sage/numerical/backends/generic_backend.
c:6199)
      File "generic_backend.pyx", line 861, in sage.numerical.backends.generic_b
ackend.GenericBackend.solver_parameter (sage/numerical/backends/generic_backend.
c:6103)
    NotImplementedError
**********************************************************************
File "/home/mueller/local/sage-5.8/devel/sage/sage/numerical/mip.pyx", line 1854
:
    sage: b.solver_parameter("verbosity_simplex", "GLP_MSG_ALL")
Exception raised:
    Traceback (most recent call last):
      File "/home/mueller/local/sage-5.8/local/bin/ncadoctest.py", line 1231, in
 run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/home/mueller/local/sage-5.8/local/bin/sagedoctest.py", line 38, in 
run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compile
flags)
      File "/home/mueller/local/sage-5.8/local/bin/ncadoctest.py", line 1172, in
 run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_36[9]>", line 1, in <module>
        b.solver_parameter("verbosity_simplex", "GLP_MSG_ALL")###line 1854:
    sage: b.solver_parameter("verbosity_simplex", "GLP_MSG_ALL")
      File "generic_backend.pyx", line 837, in sage.numerical.backends.generic_b
ackend.GenericBackend.solver_parameter (sage/numerical/backends/generic_backend.
c:6199)
      File "generic_backend.pyx", line 861, in sage.numerical.backends.generic_b
ackend.GenericBackend.solver_parameter (sage/numerical/backends/generic_backend.
c:6103)
    NotImplementedError
**********************************************************************
1 items had failures:
   2 of  14 in __main__.example_36
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/mueller/.sage//tmp/mip_20568.py
```

Not sure if that matters, but my understanding (as a beginner) is that this test is expected to produce not even one error, no matter how harmless it is.

-- Peter MÃ¼ller


---

Comment by ncohen created at 2013-03-20 18:01:27

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2013-03-20 18:01:27

Patch updated ! But the second doctest error you get has been fixed since by #14238 `:-)`

Nathann


---

Comment by pmueller created at 2013-03-20 18:31:31

Replying to [comment:3 ncohen]:
> Patch updated ! But the second doctest error you get has been fixed since by #14238 `:-)`
> 
> Nathann

Oops, sorry, I tested under 5.8 instead of 5.9.beta0. (I said I'm a beginner ...) Tomorrow I'll install 5.9, and test the patch again.


---

Attachment


---

Comment by pmueller created at 2013-03-21 16:24:15

Changing status from needs_review to positive_review.


---

Comment by pmueller created at 2013-03-21 16:24:15

The latest version of the patch now passed the tests under version 5.9.beta0 which failed before.


---

Comment by ncohen created at 2013-03-21 16:29:40

Thaaaaank you for this review ! You can now fill the "reviewer" field with your name `:-)`

Nathann


---

Comment by jdemeyer created at 2013-03-26 22:31:26

Resolution: fixed
