# Issue 30309: make sure the newest system python3 is selected

archive/issues_030309.json:
```json
{
    "body": "CC:  @mkoeppe @embray @orlitzky\n\n#29033 has introduced an unfortunate bug related to a weird search order in `AC_PATH_PROGS_FEATURE_CHECK()`, which has the outer loop over PATH entries. Thus, a python on the list `[python.foo python.baz ....]` of pythons that comes first in `PATH` and has all the features will be picked, not the first python on the list.\n\nAs modifying `PATH` to put the best python 1st might be error-prone (think about Conda, Homebrew, etc), this is fixed by providing an using a modified\nversion of `AC_PATH_PROGS_FEATURE_CHECK`, called `SAGE_PATH_PROGS_FEATURE_CHECK`.\n\nThis is of course an autoconf bug, too, as e.g. `AC_PATH_PROGS()` has a sane order, ie. its outer loop is over the list entries.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30546\n\n",
    "created_at": "2020-09-10T11:07:12Z",
    "labels": [
        "component: build: configure",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "make sure the newest system python3 is selected",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30309",
    "user": "https://github.com/dimpase"
}
```
CC:  @mkoeppe @embray @orlitzky

#29033 has introduced an unfortunate bug related to a weird search order in `AC_PATH_PROGS_FEATURE_CHECK()`, which has the outer loop over PATH entries. Thus, a python on the list `[python.foo python.baz ....]` of pythons that comes first in `PATH` and has all the features will be picked, not the first python on the list.

As modifying `PATH` to put the best python 1st might be error-prone (think about Conda, Homebrew, etc), this is fixed by providing an using a modified
version of `AC_PATH_PROGS_FEATURE_CHECK`, called `SAGE_PATH_PROGS_FEATURE_CHECK`.

This is of course an autoconf bug, too, as e.g. `AC_PATH_PROGS()` has a sane order, ie. its outer loop is over the list entries.

Issue created by migration from https://trac.sagemath.org/ticket/30546





---

archive/issue_comments_431797.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-10T11:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431797",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_431798.json:
```json
{
    "body": "perhaps copypasted comments in .m4 file may be trimmed.",
    "created_at": "2020-09-10T11:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431798",
    "user": "https://github.com/dimpase"
}
```

perhaps copypasted comments in .m4 file may be trimmed.



---

archive/issue_comments_431799.json:
```json
{
    "body": "I don't know if this is a defect. If you have a directory containing python3 in the front of your path, shouldn't that be the python we are using?",
    "created_at": "2020-09-10T15:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431799",
    "user": "https://github.com/mkoeppe"
}
```

I don't know if this is a defect. If you have a directory containing python3 in the front of your path, shouldn't that be the python we are using?



---

archive/issue_comments_431800.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2020-09-10T15:08:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431800",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_431801.json:
```json
{
    "body": "Why is that the case? It's perfectly fine to have different fully-featured python3.x installed.\nIt works on Homebrew to use its python3.8 in Sage, while python3 still is python3.7\nIt works on Gentoo, which may have python3.6-9 installed all at the same time.\n(Python plays an important role on Linux, one can't easily bump the version)\n\nE.g. that's what I have on a Gentoo box, without doing anything special:\n\n```\n# python3 <tab>\npython3            python3.7-config   python3.7m-config  python3.8-config   python3.9-config   \npython3.7          python3.7m         python3.8          python3.9          python3-config \n```\n\n\nOn Ubuntu 18.04 one can install python3.8 (the system python is 3.6, and I'm not sure if it works well in Sage)",
    "created_at": "2020-09-10T15:21:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431801",
    "user": "https://github.com/dimpase"
}
```

Why is that the case? It's perfectly fine to have different fully-featured python3.x installed.
It works on Homebrew to use its python3.8 in Sage, while python3 still is python3.7
It works on Gentoo, which may have python3.6-9 installed all at the same time.
(Python plays an important role on Linux, one can't easily bump the version)

E.g. that's what I have on a Gentoo box, without doing anything special:

```
# python3 <tab>
python3            python3.7-config   python3.7m-config  python3.8-config   python3.9-config   
python3.7          python3.7m         python3.8          python3.9          python3-config 
```


On Ubuntu 18.04 one can install python3.8 (the system python is 3.6, and I'm not sure if it works well in Sage)



---

archive/issue_comments_431802.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2020-09-10T15:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431802",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_431803.json:
```json
{
    "body": "Replying to [comment:5 dimpase]:\n> Why is that the case? \n\nBecause the user seems to have expressed a preference for the python3 provided by the directory in the front of the PATH.",
    "created_at": "2020-09-10T15:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431803",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:5 dimpase]:
> Why is that the case? 

Because the user seems to have expressed a preference for the python3 provided by the directory in the front of the PATH.



---

archive/issue_comments_431804.json:
```json
{
    "body": "Replying to [comment:7 mkoeppe]:\n> Replying to [comment:5 dimpase]:\n> > Why is that the case? \n> \n> Because the user seems to have expressed a preference for the python3 provided by the directory in the front of the PATH.\n> \nfor this, we should revive `--with-python=` option, not this kinds of silly hacks.\n\nBesides, as I said, it's not always safe to prepend stuff to your PATH.",
    "created_at": "2020-09-10T15:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431804",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:7 mkoeppe]:
> Replying to [comment:5 dimpase]:
> > Why is that the case? 
> 
> Because the user seems to have expressed a preference for the python3 provided by the directory in the front of the PATH.
> 
for this, we should revive `--with-python=` option, not this kinds of silly hacks.

Besides, as I said, it's not always safe to prepend stuff to your PATH.



---

archive/issue_comments_431805.json:
```json
{
    "body": "Putting the bin directory of a Python installation in the front of the PATH is the standard way of activating a venv, for example.",
    "created_at": "2020-09-10T16:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431805",
    "user": "https://github.com/mkoeppe"
}
```

Putting the bin directory of a Python installation in the front of the PATH is the standard way of activating a venv, for example.



---

archive/issue_comments_431806.json:
```json
{
    "body": "Replying to [ticket:30546 dimpase]:\n> As modifying `PATH` to put the best python 1st might be error-prone (think about Conda, Homebrew, etc)\n\nI would think this needs some elaboration.",
    "created_at": "2020-09-10T16:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431806",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [ticket:30546 dimpase]:
> As modifying `PATH` to put the best python 1st might be error-prone (think about Conda, Homebrew, etc)

I would think this needs some elaboration.



---

archive/issue_comments_431807.json:
```json
{
    "body": "Replying to [comment:10 mkoeppe]:\n> Replying to [ticket:30546 dimpase]:\n> > As modifying `PATH` to put the best python 1st might be error-prone (think about Conda, Homebrew, etc)\n> \n> I would think this needs some elaboration.\n\nSay, you build under Homebrew, but want to use system Python, in /usr/bin.\nPrepending /usr/bin to your PATH will likely break stuff in Hombrew, as some of it depends on /usr/local/bin being first in your PATH.\n\nSame with Conda - it prepends stuff to PATH, and prepending /usr/bin or /usr/local/bin to PATH under active Conda will likely break it. \n\nIn general, many Python-dependent environments have the concept of \"main\" Python. We discussed on `sage-devel` that Homebrew modifies `~/.zshrc` (if the account's shell is `zsh`)\n\n```\n% cat ~/.zshrc\nexport PATH=\"/usr/local/opt/python@3.7/bin:$PATH\"\n```\n\nPrepending to the PATH here might open a can of worms.",
    "created_at": "2020-09-10T17:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431807",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:10 mkoeppe]:
> Replying to [ticket:30546 dimpase]:
> > As modifying `PATH` to put the best python 1st might be error-prone (think about Conda, Homebrew, etc)
> 
> I would think this needs some elaboration.

Say, you build under Homebrew, but want to use system Python, in /usr/bin.
Prepending /usr/bin to your PATH will likely break stuff in Hombrew, as some of it depends on /usr/local/bin being first in your PATH.

Same with Conda - it prepends stuff to PATH, and prepending /usr/bin or /usr/local/bin to PATH under active Conda will likely break it. 

In general, many Python-dependent environments have the concept of "main" Python. We discussed on `sage-devel` that Homebrew modifies `~/.zshrc` (if the account's shell is `zsh`)

```
% cat ~/.zshrc
export PATH="/usr/local/opt/python@3.7/bin:$PATH"
```

Prepending to the PATH here might open a can of worms.



---

archive/issue_comments_431808.json:
```json
{
    "body": "I think I agree with Matthias here. Prepending locations to the search path is the \"standard\" way of encouraging autotools to find your preferred version of something, and our widespread use of e.g. `AC_CHECK_PROGS` and `AC_SEARCH_LIBS` relies on that.\n\nIn this case maybe it is unexpected that a copy of python-3.6 in `/usr/local/bin` will be preferred over a copy of `python-3.8` in `/usr/bin`, but... does that cause any real problems? We only detect supported versions, so any version we detect should be OK, right?",
    "created_at": "2020-09-10T18:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431808",
    "user": "https://github.com/orlitzky"
}
```

I think I agree with Matthias here. Prepending locations to the search path is the "standard" way of encouraging autotools to find your preferred version of something, and our widespread use of e.g. `AC_CHECK_PROGS` and `AC_SEARCH_LIBS` relies on that.

In this case maybe it is unexpected that a copy of python-3.6 in `/usr/local/bin` will be preferred over a copy of `python-3.8` in `/usr/bin`, but... does that cause any real problems? We only detect supported versions, so any version we detect should be OK, right?



---

archive/issue_comments_431809.json:
```json
{
    "body": "I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. \n\nYet I want to build Sage with Python3.8  in /usr/bin, as opposed to an earlier version which is 1st in the PATH.",
    "created_at": "2020-09-10T18:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431809",
    "user": "https://github.com/dimpase"
}
```

I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. 

Yet I want to build Sage with Python3.8  in /usr/bin, as opposed to an earlier version which is 1st in the PATH.



---

archive/issue_comments_431810.json:
```json
{
    "body": "Replying to [comment:11 dimpase]:\n> In general, many Python-dependent environments have the concept of \"main\" Python.\n\nYes, it's represented by the unversioned \"python3\" in the front of the PATH.",
    "created_at": "2020-09-10T18:43:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431810",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:11 dimpase]:
> In general, many Python-dependent environments have the concept of "main" Python.

Yes, it's represented by the unversioned "python3" in the front of the PATH.



---

archive/issue_comments_431811.json:
```json
{
    "body": "Replying to [comment:13 dimpase]:\n> I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. \n\nWhy would anyone want to prepend /usr/bin?",
    "created_at": "2020-09-10T18:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431811",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:13 dimpase]:
> I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. 

Why would anyone want to prepend /usr/bin?



---

archive/issue_comments_431812.json:
```json
{
    "body": "Sorry, I don't see evidence of a \"critical defect\" anywhere here",
    "created_at": "2020-09-10T18:44:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431812",
    "user": "https://github.com/mkoeppe"
}
```

Sorry, I don't see evidence of a "critical defect" anywhere here



---

archive/issue_comments_431813.json:
```json
{
    "body": "Replying to [comment:8 dimpase]:\n> we should revive `--with-python=` option\n\nYes, I think so. Note that it is already possible to do `./configure PYTHON3=/some/path/to/python3`, but this completely disables the check for the suitability of this python.",
    "created_at": "2020-09-10T18:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431813",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:8 dimpase]:
> we should revive `--with-python=` option

Yes, I think so. Note that it is already possible to do `./configure PYTHON3=/some/path/to/python3`, but this completely disables the check for the suitability of this python.



---

archive/issue_comments_431814.json:
```json
{
    "body": "Replying to [comment:13 dimpase]:\n> I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. \n> \n> Yet I want to build Sage with Python3.8  in /usr/bin, as opposed to an earlier version which is 1st in the PATH.\n\nI understand. Can you prepend your preferred location to `PATH` only during `./configure`? It's a given that you don't want to prepend it *everywhere*. We have a problem either way. If we make your change, then it becomes harder to override a newer python in `/usr/bin` with an older one in e.g. `/usr/local/bin`.\n\nBringing back `--with-python` could address both concerns... but does `PATH=whatever ./configure` not work?",
    "created_at": "2020-09-10T18:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431814",
    "user": "https://github.com/orlitzky"
}
```

Replying to [comment:13 dimpase]:
> I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. 
> 
> Yet I want to build Sage with Python3.8  in /usr/bin, as opposed to an earlier version which is 1st in the PATH.

I understand. Can you prepend your preferred location to `PATH` only during `./configure`? It's a given that you don't want to prepend it *everywhere*. We have a problem either way. If we make your change, then it becomes harder to override a newer python in `/usr/bin` with an older one in e.g. `/usr/local/bin`.

Bringing back `--with-python` could address both concerns... but does `PATH=whatever ./configure` not work?



---

archive/issue_comments_431815.json:
```json
{
    "body": "Replying to [comment:18 mjo]:\n> Replying to [comment:13 dimpase]:\n> > I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. \n> > \n> > Yet I want to build Sage with Python3.8  in /usr/bin, as opposed to an earlier version which is 1st in the PATH.\n> \n> I understand. Can you prepend your preferred location to `PATH` only during `./configure`? \n\nThis is a very fragile solution. There are many things in /usr/bin that might wreak havoc, imagine some `foobar-config` which has to be called by `./configure`\n\n\n> It's a given that you don't want to prepend it *everywhere*. We have a problem either way. \n\n\nmy solution has one advantage - it makes the outcome independent of the order of things in PATH, which is something that users might - and will - screw up.\n\n\n> If we make your change, then it becomes harder to override a newer python in `/usr/bin` with an older one in e.g. `/usr/local/bin`.\n> \n> Bringing back `--with-python` could address both concerns... but does `PATH=whatever ./configure` not work?\n\nit is a bit pointless to discuss whether it works on a box at hand, as it is obviously a very fragile solution, and I explained why.",
    "created_at": "2020-09-10T19:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431815",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:18 mjo]:
> Replying to [comment:13 dimpase]:
> > I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. 
> > 
> > Yet I want to build Sage with Python3.8  in /usr/bin, as opposed to an earlier version which is 1st in the PATH.
> 
> I understand. Can you prepend your preferred location to `PATH` only during `./configure`? 

This is a very fragile solution. There are many things in /usr/bin that might wreak havoc, imagine some `foobar-config` which has to be called by `./configure`


> It's a given that you don't want to prepend it *everywhere*. We have a problem either way. 


my solution has one advantage - it makes the outcome independent of the order of things in PATH, which is something that users might - and will - screw up.


> If we make your change, then it becomes harder to override a newer python in `/usr/bin` with an older one in e.g. `/usr/local/bin`.
> 
> Bringing back `--with-python` could address both concerns... but does `PATH=whatever ./configure` not work?

it is a bit pointless to discuss whether it works on a box at hand, as it is obviously a very fragile solution, and I explained why.



---

archive/issue_comments_431816.json:
```json
{
    "body": "Replying to [comment:19 dimpase]:\n> it is a bit pointless to discuss whether it works on a box at hand, as it is obviously a very fragile solution, and I explained why. \n\nWe probably don't want normal users doing it to override one specific program (python) and not others, sure. I was just curious. And I had forgotten that `PYTHON3=...` works by virtue of autotools.\n\nI guess we all agree `--with-python` is the most robust answer?",
    "created_at": "2020-09-10T19:48:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431816",
    "user": "https://github.com/orlitzky"
}
```

Replying to [comment:19 dimpase]:
> it is a bit pointless to discuss whether it works on a box at hand, as it is obviously a very fragile solution, and I explained why. 

We probably don't want normal users doing it to override one specific program (python) and not others, sure. I was just curious. And I had forgotten that `PYTHON3=...` works by virtue of autotools.

I guess we all agree `--with-python` is the most robust answer?



---

archive/issue_comments_431817.json:
```json
{
    "body": "Replying to [comment:19 dimpase]:\n> my solution has one advantage - it makes the outcome independent of the order of things in PATH, which is something that users might - and will - screw up.\n\nBut I don't think this is what users want. If there's a `python3` in the front of the PATH, we should not prefer a `python3.8` from the rear of the PATH. This is incompatible with standard practice of activating a venv.",
    "created_at": "2020-09-10T19:49:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431817",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:19 dimpase]:
> my solution has one advantage - it makes the outcome independent of the order of things in PATH, which is something that users might - and will - screw up.

But I don't think this is what users want. If there's a `python3` in the front of the PATH, we should not prefer a `python3.8` from the rear of the PATH. This is incompatible with standard practice of activating a venv.



---

archive/issue_comments_431818.json:
```json
{
    "body": "We could perhaps just reduce this list to just `python3`,\nand add the `--with-python` support.",
    "created_at": "2020-09-10T19:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431818",
    "user": "https://github.com/mkoeppe"
}
```

We could perhaps just reduce this list to just `python3`,
and add the `--with-python` support.



---

archive/issue_comments_431819.json:
```json
{
    "body": "Replying to [comment:22 mkoeppe]:\n> We could perhaps just reduce this list to just `python3`,\n\nBut there are cases where python3 is not what one wants - do you mean to bypass the test then all together? This is not a good idea, we still need to test the input provided by `--with-python=`\n\n> and add the `--with-python` support.",
    "created_at": "2020-09-10T20:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431819",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:22 mkoeppe]:
> We could perhaps just reduce this list to just `python3`,

But there are cases where python3 is not what one wants - do you mean to bypass the test then all together? This is not a good idea, we still need to test the input provided by `--with-python=`

> and add the `--with-python` support.



---

archive/issue_comments_431820.json:
```json
{
    "body": "No, just shorten the list of candidate binary names to just `python3`. Keeping the test and thus the loop over the elements of PATH.\n\nAnd add `--with-python`.\n\nBoth in the same ticket.",
    "created_at": "2020-09-10T20:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431820",
    "user": "https://github.com/mkoeppe"
}
```

No, just shorten the list of candidate binary names to just `python3`. Keeping the test and thus the loop over the elements of PATH.

And add `--with-python`.

Both in the same ticket.



---

archive/issue_comments_431821.json:
```json
{
    "body": "I don't understand - isn't prepending to PATH a venv's binary directory about a new directory, only containing (links to) things which aren't in the PATH at all, but nothing else?",
    "created_at": "2020-09-10T21:30:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431821",
    "user": "https://github.com/dimpase"
}
```

I don't understand - isn't prepending to PATH a venv's binary directory about a new directory, only containing (links to) things which aren't in the PATH at all, but nothing else?



---

archive/issue_comments_431822.json:
```json
{
    "body": "Replying to [comment:15 mkoeppe]:\n> Replying to [comment:13 dimpase]:\n> > I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. \n> \n> Why would anyone want to prepend /usr/bin?\n\nif you want to install Sage into a Python that is in /usr/bin, then under the current scheme of things it might not get picked if /usr/bin is not the 1st in PATH.",
    "created_at": "2020-09-10T21:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431822",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:15 mkoeppe]:
> Replying to [comment:13 dimpase]:
> > I don't understand - I have given you an example: prepending /usr/bin to PATH on Homebrew or Conda is basically not possible. 
> 
> Why would anyone want to prepend /usr/bin?

if you want to install Sage into a Python that is in /usr/bin, then under the current scheme of things it might not get picked if /usr/bin is not the 1st in PATH.



---

archive/issue_comments_431823.json:
```json
{
    "body": "Replying to [comment:24 mkoeppe]:\n> No, just shorten the list of candidate binary names to just `python3`.\nThen only the unversioned python3 would be possible, no?",
    "created_at": "2020-09-10T21:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431823",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:24 mkoeppe]:
> No, just shorten the list of candidate binary names to just `python3`.
Then only the unversioned python3 would be possible, no?



---

archive/issue_comments_431824.json:
```json
{
    "body": "If a user wants a versioned one, they would be using `--with-python=....`",
    "created_at": "2020-09-10T22:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431824",
    "user": "https://github.com/mkoeppe"
}
```

If a user wants a versioned one, they would be using `--with-python=....`



---

archive/issue_comments_431825.json:
```json
{
    "body": "Replying to [comment:28 mkoeppe]:\n> If a user wants a versioned one, they would be using `--with-python=....`\nnaturally one will need to run tests, currently encapsulated  in an argument of `AC_PATH_PROGS_FEATURE_CHECK()` on the input.",
    "created_at": "2020-09-11T07:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431825",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:28 mkoeppe]:
> If a user wants a versioned one, they would be using `--with-python=....`
naturally one will need to run tests, currently encapsulated  in an argument of `AC_PATH_PROGS_FEATURE_CHECK()` on the input.



---

archive/issue_comments_431826.json:
```json
{
    "body": "Yes.",
    "created_at": "2020-09-11T15:10:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431826",
    "user": "https://github.com/mkoeppe"
}
```

Yes.



---

archive/issue_comments_431827.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-11T16:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431827",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_431828.json:
```json
{
    "body": "Can we get rid of Python 2 checks here? It's pointless to try to build Sage with Python 3, so why bother with\n\n```\nAS_IF([test $SAGE_PYTHON_VERSION = 2], [\n        dnl If we use Python 2 for Sage, we install Python 3...\n```\n",
    "created_at": "2020-09-21T10:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431828",
    "user": "https://github.com/dimpase"
}
```

Can we get rid of Python 2 checks here? It's pointless to try to build Sage with Python 3, so why bother with

```
AS_IF([test $SAGE_PYTHON_VERSION = 2], [
        dnl If we use Python 2 for Sage, we install Python 3...
```




---

archive/issue_comments_431829.json:
```json
{
    "body": "Matthias, please refactor your wall of code in `build/pkgs/python3/spkg-configure.m4` into a separate macro that just checks the features (to be put in `m4/`), and the rest,\nits too onerous as it is, with setting various `ac_*_PYTHON3*` variables, very hard for me to proceed here otherwise.\n\nThe refactoring should have taken place on #27824, I know...",
    "created_at": "2020-09-21T10:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431829",
    "user": "https://github.com/dimpase"
}
```

Matthias, please refactor your wall of code in `build/pkgs/python3/spkg-configure.m4` into a separate macro that just checks the features (to be put in `m4/`), and the rest,
its too onerous as it is, with setting various `ac_*_PYTHON3*` variables, very hard for me to proceed here otherwise.

The refactoring should have taken place on #27824, I know...



---

archive/issue_comments_431830.json:
```json
{
    "body": "Good idea, will do.",
    "created_at": "2020-09-21T15:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431830",
    "user": "https://github.com/mkoeppe"
}
```

Good idea, will do.



---

archive/issue_comments_431831.json:
```json
{
    "body": "Here you go\n----\nNew commits:",
    "created_at": "2020-09-22T01:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431831",
    "user": "https://github.com/mkoeppe"
}
```

Here you go
----
New commits:



---

archive/issue_comments_431832.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-22T01:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431833.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-09-23T21:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431833",
    "user": "https://github.com/dimpase"
}
```

New commits:



---

archive/issue_comments_431834.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-23T21:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431834",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_431835.json:
```json
{
    "body": "\n```\n--- a/src/bin/sage-env-config.in\n+++ b/src/bin/sage-env-config.in\n@@ -46,7 +46,6 @@ CONFIGURED_OBJCXX=\"@OBJCXX@\"\n #######################################\n # Other configuration (exported)\n #######################################\n-export SAGE_PYTHON_VERSION=@SAGE_PYTHON_VERSION@\n export PYTHON_FOR_VENV=\"@PYTHON_FOR_VENV@\"\n```\n\nI don't think this is a good idea. User packages' install scripts might depend on it.",
    "created_at": "2020-09-23T21:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431835",
    "user": "https://github.com/mkoeppe"
}
```


```
--- a/src/bin/sage-env-config.in
+++ b/src/bin/sage-env-config.in
@@ -46,7 +46,6 @@ CONFIGURED_OBJCXX="@OBJCXX@"
 #######################################
 # Other configuration (exported)
 #######################################
-export SAGE_PYTHON_VERSION=@SAGE_PYTHON_VERSION@
 export PYTHON_FOR_VENV="@PYTHON_FOR_VENV@"
```

I don't think this is a good idea. User packages' install scripts might depend on it.



---

archive/issue_comments_431836.json:
```json
{
    "body": "\n```\n-case \"$with_python\" in\n-    3)  SAGE_PYTHON_VERSION=3;;\n-    3*) AC_MSG_WARN([the only allowed value for --with-python is 3; specific Python 3.x versions cannot be requested using --with-python.  For compatibility reasons, this is only a warning.  Use './configure PYTHON3=/path/to/python3' to use a specific Python 3 binary for the Sage venv.])\n-        SAGE_PYTHON_VERSION=3;;\n-    \"\") SAGE_PYTHON_VERSION=3;;\n-    *)\n-        AC_MSG_ERROR([the only allowed value for --with-python is 3.  Support for Python 2 has been removed in Sage 9.2.]);;\n```\n\nAnd I think the previously allowed argument `--with-python=3` should still be allowed and be a no-op; and `--with-python=2` should give a specific error message as before.",
    "created_at": "2020-09-23T21:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431836",
    "user": "https://github.com/mkoeppe"
}
```


```
-case "$with_python" in
-    3)  SAGE_PYTHON_VERSION=3;;
-    3*) AC_MSG_WARN([the only allowed value for --with-python is 3; specific Python 3.x versions cannot be requested using --with-python.  For compatibility reasons, this is only a warning.  Use './configure PYTHON3=/path/to/python3' to use a specific Python 3 binary for the Sage venv.])
-        SAGE_PYTHON_VERSION=3;;
-    "") SAGE_PYTHON_VERSION=3;;
-    *)
-        AC_MSG_ERROR([the only allowed value for --with-python is 3.  Support for Python 2 has been removed in Sage 9.2.]);;
```

And I think the previously allowed argument `--with-python=3` should still be allowed and be a no-op; and `--with-python=2` should give a specific error message as before.



---

archive/issue_comments_431837.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-23T21:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431838.json:
```json
{
    "body": "there is still one obsolete place, in docker/Dockerfile:\n\n\n```\nARG WITH_PYTHON=2\nENV WITH_PYTHON $WITH_PYTHON\nARG MAKEFLAGS=\"-j2\"\nENV MAKEFLAGS $MAKEFLAGS\nARG SAGE_NUM_THREADS=\"2\"\nENV SAGE_NUM_THREADS $SAGE_NUM_THREADS\nRUN make configure\nRUN ./configure --with-python=$WITH_PYTHON\n```\n\ncan it be removed?",
    "created_at": "2020-09-23T21:52:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431838",
    "user": "https://github.com/dimpase"
}
```

there is still one obsolete place, in docker/Dockerfile:


```
ARG WITH_PYTHON=2
ENV WITH_PYTHON $WITH_PYTHON
ARG MAKEFLAGS="-j2"
ENV MAKEFLAGS $MAKEFLAGS
ARG SAGE_NUM_THREADS="2"
ENV SAGE_NUM_THREADS $SAGE_NUM_THREADS
RUN make configure
RUN ./configure --with-python=$WITH_PYTHON
```

can it be removed?



---

archive/issue_comments_431839.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-23T21:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431840.json:
```json
{
    "body": "Yes, looks like it.",
    "created_at": "2020-09-23T21:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431840",
    "user": "https://github.com/mkoeppe"
}
```

Yes, looks like it.



---

archive/issue_comments_431841.json:
```json
{
    "body": "I think you missed a few places in tox.ini",
    "created_at": "2020-09-23T21:56:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431841",
    "user": "https://github.com/mkoeppe"
}
```

I think you missed a few places in tox.ini



---

archive/issue_comments_431842.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-23T22:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431843.json:
```json
{
    "body": "Need to adjust `.ci/build-docker.sh` too",
    "created_at": "2020-09-23T22:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431843",
    "user": "https://github.com/mkoeppe"
}
```

Need to adjust `.ci/build-docker.sh` too



---

archive/issue_comments_431844.json:
```json
{
    "body": "\n```\n--- a/src/doc/en/developer/portability_testing.rst\n+++ b/src/doc/en/developer/portability_testing.rst\n@@ -371,7 +371,7 @@ command ``docker build``.  For example::\n   [mkoeppe@sage sage]$ docker build . -f Dockerfile \\\n     --build-arg BASE_IMAGE=ubuntu:latest \\\n     --build-arg NUMPROC=4 \\\n-    --build-arg EXTRA_CONFIGURE_ARGS=\"--with-python=2\"\n+    --build-arg EXTRA_CONFIGURE_ARGS=\"--with-python=/usr/opt/python3.42\"\n```\n\nbetter to use an example that looks like a binary, not a directory",
    "created_at": "2020-09-23T22:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431844",
    "user": "https://github.com/mkoeppe"
}
```


```
--- a/src/doc/en/developer/portability_testing.rst
+++ b/src/doc/en/developer/portability_testing.rst
@@ -371,7 +371,7 @@ command ``docker build``.  For example::
   [mkoeppe@sage sage]$ docker build . -f Dockerfile \
     --build-arg BASE_IMAGE=ubuntu:latest \
     --build-arg NUMPROC=4 \
-    --build-arg EXTRA_CONFIGURE_ARGS="--with-python=2"
+    --build-arg EXTRA_CONFIGURE_ARGS="--with-python=/usr/opt/python3.42"
```

better to use an example that looks like a binary, not a directory



---

archive/issue_comments_431845.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-24T10:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431846.json:
```json
{
    "body": "OK, should we also get rid of `SAGE_PYTHON3` ?",
    "created_at": "2020-09-24T10:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431846",
    "user": "https://github.com/dimpase"
}
```

OK, should we also get rid of `SAGE_PYTHON3` ?



---

archive/issue_comments_431847.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-24T11:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431848.json:
```json
{
    "body": "comments 42, 43",
    "created_at": "2020-09-24T12:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431848",
    "user": "https://github.com/mkoeppe"
}
```

comments 42, 43



---

archive/issue_comments_431849.json:
```json
{
    "body": "Replying to [comment:42 mkoeppe]:\n> {{{\n> --- a/src/bin/sage-env-config.in\n> +++ b/src/bin/sage-env-config.in\n> `@``@` -46,7 +46,6 `@``@` CONFIGURED_OBJCXX=\"`@`OBJCXX`@`\"\n>  #######################################\n>  # Other configuration (exported)\n>  #######################################\n> -export SAGE_PYTHON_VERSION=`@`SAGE_PYTHON_VERSION`@`\n>  export PYTHON_FOR_VENV=\"`@`PYTHON_FOR_VENV`@`\"\n> }}}\n> I don't think this is a good idea. User packages' install scripts might depend on it.\n> \nit was never documented, thus, a fair game.",
    "created_at": "2020-09-24T15:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431849",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:42 mkoeppe]:
> {{{
> --- a/src/bin/sage-env-config.in
> +++ b/src/bin/sage-env-config.in
> `@``@` -46,7 +46,6 `@``@` CONFIGURED_OBJCXX="`@`OBJCXX`@`"
>  #######################################
>  # Other configuration (exported)
>  #######################################
> -export SAGE_PYTHON_VERSION=`@`SAGE_PYTHON_VERSION`@`
>  export PYTHON_FOR_VENV="`@`PYTHON_FOR_VENV`@`"
> }}}
> I don't think this is a good idea. User packages' install scripts might depend on it.
> 
it was never documented, thus, a fair game.



---

archive/issue_comments_431850.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-24T16:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431851.json:
```json
{
    "body": "Replying to [comment:57 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> ||[fc6b49d](https://git.sagemath.org/sage.git/commit/?id=fc6b49d4071a63c83c7ecb2db12b4ff0c43e5568)||`handle --with-python=2 or 3`||\n\nthis addesses comment:43",
    "created_at": "2020-09-24T16:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431851",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:57 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[fc6b49d](https://git.sagemath.org/sage.git/commit/?id=fc6b49d4071a63c83c7ecb2db12b4ff0c43e5568)||`handle --with-python=2 or 3`||

this addesses comment:43



---

archive/issue_comments_431852.json:
```json
{
    "body": "This seems to work well. I have made some small changes.\n----\nNew commits:",
    "created_at": "2020-09-24T16:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431852",
    "user": "https://github.com/mkoeppe"
}
```

This seems to work well. I have made some small changes.
----
New commits:



---

archive/issue_comments_431853.json:
```json
{
    "body": "If OK with you, feel free to set to positive review",
    "created_at": "2020-09-24T16:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431853",
    "user": "https://github.com/mkoeppe"
}
```

If OK with you, feel free to set to positive review



---

archive/issue_comments_431854.json:
```json
{
    "body": "Actually... this still needs to ensure an absolute path for PYTHON_FOR_VENV",
    "created_at": "2020-09-24T16:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431854",
    "user": "https://github.com/mkoeppe"
}
```

Actually... this still needs to ensure an absolute path for PYTHON_FOR_VENV



---

archive/issue_comments_431855.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-24T17:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431856.json:
```json
{
    "body": "I think this version is good.",
    "created_at": "2020-09-24T17:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431856",
    "user": "https://github.com/mkoeppe"
}
```

I think this version is good.



---

archive/issue_comments_431857.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-24T18:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431857",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_431858.json:
```json
{
    "body": "Merged #30576 to avoid merge conflict",
    "created_at": "2020-09-24T18:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431858",
    "user": "https://github.com/mkoeppe"
}
```

Merged #30576 to avoid merge conflict



---

archive/issue_comments_431859.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-09-24T18:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431859",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_431860.json:
```json
{
    "body": "Meregd #29500 to avoid merge conflict",
    "created_at": "2020-09-24T18:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431860",
    "user": "https://github.com/mkoeppe"
}
```

Meregd #29500 to avoid merge conflict



---

archive/issue_comments_431861.json:
```json
{
    "body": "it is broken:\n\n```\n$ ./configure --with-python=/usr/bin/python3 >/tmp/p\nconfigure: error: the python3 selected using --with-python=/usr/bin/python3 is not suitable\n```\n\n(while just `./configure`, using the same python3, but implicitly, works)\n\nIt seems you are repeating the error that took me hours to sort out today, you have two\n`AC_PATH_PROGS_FEATURE_CHECK` with the same tag. That's why I made sure only to have one call to AC_PATH_PROGS_FEATURE_CHECK - and why do you need more?",
    "created_at": "2020-09-24T20:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431861",
    "user": "https://github.com/dimpase"
}
```

it is broken:

```
$ ./configure --with-python=/usr/bin/python3 >/tmp/p
configure: error: the python3 selected using --with-python=/usr/bin/python3 is not suitable
```

(while just `./configure`, using the same python3, but implicitly, works)

It seems you are repeating the error that took me hours to sort out today, you have two
`AC_PATH_PROGS_FEATURE_CHECK` with the same tag. That's why I made sure only to have one call to AC_PATH_PROGS_FEATURE_CHECK - and why do you need more?



---

archive/issue_comments_431862.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-24T20:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431862",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_431863.json:
```json
{
    "body": "Perhaps it's just that AC_PATH_PROGS_FEATURE_CHECK does not like it if the searched executable is already an absolute path?\n\nI may only have tested with executable names without directory...",
    "created_at": "2020-09-24T20:54:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431863",
    "user": "https://github.com/mkoeppe"
}
```

Perhaps it's just that AC_PATH_PROGS_FEATURE_CHECK does not like it if the searched executable is already an absolute path?

I may only have tested with executable names without directory...



---

archive/issue_comments_431864.json:
```json
{
    "body": "OK, this appears to work. I just convert the name into an absolute one, if needed, by calling `AC_PATH_PROG()`\n----\nNew commits:",
    "created_at": "2020-09-24T21:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431864",
    "user": "https://github.com/dimpase"
}
```

OK, this appears to work. I just convert the name into an absolute one, if needed, by calling `AC_PATH_PROG()`
----
New commits:



---

archive/issue_comments_431865.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-24T21:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431865",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_431866.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-25T01:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431866",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_431867.json:
```json
{
    "body": "I think we really want this in 9.2, not the least as it documents stuff.",
    "created_at": "2020-09-25T11:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431867",
    "user": "https://github.com/dimpase"
}
```

I think we really want this in 9.2, not the least as it documents stuff.



---

archive/issue_comments_431868.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-09-25T11:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431868",
    "user": "https://github.com/dimpase"
}
```

Changing priority from major to critical.



---

archive/issue_comments_431869.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-30T22:30:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30309#issuecomment-431869",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_079379.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-30T22:30:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30309",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30309#event-79379"
}
```
