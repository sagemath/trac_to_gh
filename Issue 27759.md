# Issue 27759: py3: Fix doctests in optional Mathematica interface

archive/issues_027759.json:
```json
{
    "body": "This ticket fixes all the Python 3 issues causing doctest failures related to the optional Mathematica interface.\n\n- A regular expression is fixed that resulted in several of these messages:\n  {{{\n  FutureWarning: Possible nested set at position 3\n  }}}\n\n- The `__len__()` method now returns `int` as expected by `len()` in Python 3. Previously it returned Mathematica elements resulting in:\n  {{{\n  TypeError: 'MathematicaElement' object cannot be interpreted as an integer\n  }}}\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27996\n\n",
    "created_at": "2019-06-14T18:41:18Z",
    "labels": [
        "python3",
        "minor",
        "bug"
    ],
    "title": "py3: Fix doctests in optional Mathematica interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27759",
    "user": "@mwageringel"
}
```
This ticket fixes all the Python 3 issues causing doctest failures related to the optional Mathematica interface.

- A regular expression is fixed that resulted in several of these messages:
  {{{
  FutureWarning: Possible nested set at position 3
  }}}

- The `__len__()` method now returns `int` as expected by `len()` in Python 3. Previously it returned Mathematica elements resulting in:
  {{{
  TypeError: 'MathematicaElement' object cannot be interpreted as an integer
  }}}



Issue created by migration from https://trac.sagemath.org/ticket/27996





---

archive/issue_comments_392165.json:
```json
{
    "body": "Tested with Mathematica 11.3 on the relevant files using:\n\n```\n./sage -t --long --optional=sage,mathematica $(grep -i \"optional.*mathematica\" -r src/sage -l | paste -sd \" \" -)\n```\n\n----\nNew commits:",
    "created_at": "2019-06-14T18:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27759#issuecomment-392165",
    "user": "@mwageringel"
}
```

Tested with Mathematica 11.3 on the relevant files using:

```
./sage -t --long --optional=sage,mathematica $(grep -i "optional.*mathematica" -r src/sage -l | paste -sd " " -)
```

----
New commits:



---

archive/issue_comments_392166.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-14T18:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27759#issuecomment-392166",
    "user": "@mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_392167.json:
```json
{
    "body": "Changing keywords from \"\" to \"Mathematica\".",
    "created_at": "2019-06-14T18:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27759#issuecomment-392167",
    "user": "@mwageringel"
}
```

Changing keywords from "" to "Mathematica".



---

archive/issue_comments_392168.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-14T19:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27759#issuecomment-392168",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_392169.json:
```json
{
    "body": "ok, let it be",
    "created_at": "2019-06-14T19:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27759#issuecomment-392169",
    "user": "chapoton"
}
```

ok, let it be



---

archive/issue_comments_392170.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-07T12:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27759",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27759#issuecomment-392170",
    "user": "vbraun"
}
```

Resolution: fixed
