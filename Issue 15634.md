# Issue 15634: Improve cddlib build system (especially split out non-upstream stuff).

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2014-02-27 10:11:46

CC:  saraedum mjo

See #13026 comment 31 and 37.


---

Comment by leif created at 2014-05-13 14:55:23

Dan Drake just reported on sage-devel that building cddlib 094g fails on his system because apparently some (32-bit) `libgmp.so` from `/usr/local/lib` gets picked up, too(!):


```
/bin/bash ../libtool --tag=CC   --mode=link gcc  -g -O2 -L/usr/local/lib -L/var/tmp/ddrake/sage/local/lib  -o scdd_gmp simplecdd.o ../lib-src-gmp/libcddgmp.la -lgmp 
libtool: link: gcc -g -O2 -o .libs/scdd_gmp simplecdd.o -L/usr/local/lib -L/var/tmp/ddrake/sage/local/lib ../lib-src-gmp/.libs/libcddgmp.so /var/tmp/ddrake/sage/local/lib/libgmp.so /usr/local/lib/libgmp.so -Wl,-rpath -Wl,/var/tmp/ddrake/sage/local/lib
/usr/local/lib/libgmp.so: could not read symbols: File in wrong format
```


(Apparently only `libsrc` is affected, not `src`.)

We may have to reintegrate Volker's `--with-gmp` patch...


---

Comment by leif created at 2014-05-13 15:07:30

Replying to [comment:2 leif]:
> Dan Drake just reported on sage-devel that building cddlib 094g fails on his system because apparently some (32-bit) `libgmp.so` from `/usr/local/lib` gets picked up, too(!):
> 
> {{{
> /bin/bash ../libtool --tag=CC   --mode=link gcc  -g -O2 -L/usr/local/lib -L/var/tmp/ddrake/sage/local/lib  -o scdd_gmp simplecdd.o ../lib-src-gmp/libcddgmp.la -lgmp 
> libtool: link: gcc -g -O2 -o .libs/scdd_gmp simplecdd.o -L/usr/local/lib -L/var/tmp/ddrake/sage/local/lib ../lib-src-gmp/.libs/libcddgmp.so /var/tmp/ddrake/sage/local/lib/libgmp.so /usr/local/lib/libgmp.so -Wl,-rpath -Wl,/var/tmp/ddrake/sage/local/lib
> /usr/local/lib/libgmp.so: could not read symbols: File in wrong format
> }}}
> 
> (Apparently only `libsrc` is affected, not `src`.)
> 
> We may have to reintegrate Volker's `--with-gmp` patch...

Volker opened #16348.


---

Comment by vbraun created at 2014-05-13 15:11:56

I propose to close this ticket unless somebody writes a description with actionable items.


---

Comment by mkoeppe created at 2020-07-08 16:53:59

Outdated, should be closed


---

Comment by mkoeppe created at 2020-07-08 16:53:59

Changing status from new to needs_review.


---

Comment by mjo created at 2020-07-08 17:20:58

Changing status from needs_review to positive_review.


---

Comment by mjo created at 2020-07-08 17:20:58

There is no more non-upstream stuff as far as I know.


---

Comment by chapoton created at 2020-08-14 12:59:17

Resolution: invalid
