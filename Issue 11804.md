# Issue 11804: matrix plot colorbars

Issue created by migration from Trac.

Original creator: jason

Original creation time: 2011-11-01 21:02:42

Assignee: jason, was

CC:  kcrisman

I needed colorbars for matrix plots, so I added them.  I also fixed a small bug in how keyword arguments were being passed in contour plot colorbars.


---

Comment by jason created at 2011-11-01 21:25:58

Changing status from new to needs_review.


---

Attachment


---

Comment by jdemeyer created at 2011-11-03 16:14:43

Milestone sage-4.7.3 deleted


---

Comment by kcrisman created at 2011-12-15 18:32:54

I like the idea behind this a lot.  Using the formatting and colorbar would make doing matrix plots for number theory correctly a snap.  

Is it ok if review waits for SD 35.5, though?  I just don't know if I'll have time for this, even given the relevance to #9958.


---

Comment by rbeezer created at 2011-12-16 00:02:20

Nice.  Passes tests in the obvious directories.

Experimentally, the colorbar would appear to have a length equal to the longest side of the plot.  So in one orientation it matches the length of the side, aesthetically pleasing.  But in the other orientation it can be grossly larger than the plot.  Maybe to make sure the gradations do not get totally smooshed together in the colormap along the short edge?  

Anyway, several suggestions:

(a) Document the colorbar defaulting to length of long side.

(b) Use the right combination of max/min on matrix dimensions to provide the right rows:columns ratio to always provide a colorbar the same length as the matrix plot.

(c) Clearly document how to accomplish (b) with an option like `colorbar_options={'shrink':0.2} `.  which seems to be the way to accomplish what I'd like to be easily possible.

(d)  (b) and (c)

(e)  None of the above.

I could contribute to the docstring if you want to go that route.  But it has to be now, not much time for this for many days to come.

Rob


---

Comment by jason created at 2011-12-16 01:24:36

I think I prefer (a) and (c), and minimizing the amount of custom code we have on top of matplotlib.


---

Comment by rbeezer created at 2011-12-16 01:28:48

Replying to [comment:5 jason]:
> I think I prefer (a) and (c), and minimizing the amount of custom code we have on top of matplotlib.

OK, I'll write a documentation-only patch after dinner and we can trade reviews.


---

Attachment

Patch adds a doctest showing how to change the size of a colorbar.  The default behavior is not as straightforward as I thought, so it would not have been worth the effort to do this automatically.

There is also some minor cleanup in the documentation, mostly whitespace and line breaks.

With both patches on 4.8.alpha3 this passes all tests and documentation looks fine.  I'm clear on a positive review on Jason's patch.  If my documentation patch looks OK, go ahead and flip this to positive review.


---

Comment by jason created at 2011-12-16 05:11:38

Positive review on Rob's patch.  The problem turns out to be creating the extra axis for the colorbar.  Horizontally, it spans the full width of the graphic (by default 6 inches, I think).  Usually the actual graphic is cut down to the size of the matrix plot, but since the colorbar is there spanning the entire width, it stays at 6 inches.

You showed a good solution, though.


---

Comment by jason created at 2011-12-16 05:11:38

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-12-17 09:11:01

Resolution: fixed
