# Issue 16510: Add optional Arb package (arbitrary-precision floating-point ball arithmetic)

archive/issues_016510.json:
```json
{
    "body": "CC:  alina @fredrik-johansson @mezzarobba\n\nAdd Arb [http://fredrikj.net/arb/](http://fredrikj.net/arb/) as an optional/experimental package.\nSource code here:  [https://github.com/fredrik-johansson/arb/archive/master.zip](https://github.com/fredrik-johansson/arb/archive/master.zip)\n\nIssue created by migration from https://trac.sagemath.org/ticket/16747\n\n",
    "created_at": "2014-07-31T15:42:30Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Add optional Arb package (arbitrary-precision floating-point ball arithmetic)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16510",
    "user": "ktkohl"
}
```
CC:  alina @fredrik-johansson @mezzarobba

Add Arb [http://fredrikj.net/arb/](http://fredrikj.net/arb/) as an optional/experimental package.
Source code here:  [https://github.com/fredrik-johansson/arb/archive/master.zip](https://github.com/fredrik-johansson/arb/archive/master.zip)

Issue created by migration from https://trac.sagemath.org/ticket/16747





---

archive/issue_comments_217252.json:
```json
{
    "body": "How do I get the arb-2.2.tar.bz2 to be part of the commit?\n----\nNew commits:",
    "created_at": "2014-07-31T23:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217252",
    "user": "ktkohl"
}
```

How do I get the arb-2.2.tar.bz2 to be part of the commit?
----
New commits:



---

archive/issue_comments_217253.json:
```json
{
    "body": "I modified the patch:\n\n- use the .tar.gz file from github with version number instead of unversioned .zip file\n- use Sage's versions of flint, mpfr, gmp in building the package (if there is no version of one of those in the system paths, then the optional package won't compile).\n- Set package version to 2.2.0 to match the name of the top level directory of the .tar.gz file so that no renaming to src is necessary.\n\nIn that version, it compiles for me.\n\nAre you planning to provide and include python bindings for the library?\n----\nNew commits:",
    "created_at": "2014-08-08T13:03:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217253",
    "user": "@cheuberg"
}
```

I modified the patch:

- use the .tar.gz file from github with version number instead of unversioned .zip file
- use Sage's versions of flint, mpfr, gmp in building the package (if there is no version of one of those in the system paths, then the optional package won't compile).
- Set package version to 2.2.0 to match the name of the top level directory of the .tar.gz file so that no renaming to src is necessary.

In that version, it compiles for me.

Are you planning to provide and include python bindings for the library?
----
New commits:



---

archive/issue_comments_217254.json:
```json
{
    "body": "Replying to [comment:4 ktkohl]:\n> How do I get the arb-2.2.tar.bz2 to be part of the commit?\n\nIn the [developer guide](http://www.sagemath.org/doc/developer/packaging.html#manual-package-build-and-installation), it says \"If all went fine, open a ticket, put a link to the original tarball in the ticket and upload a branch with the code under `SAGE_ROOT/build/pkgs`.\" So IMHO, there is nothing else to do.",
    "created_at": "2014-09-01T16:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217254",
    "user": "@cheuberg"
}
```

Replying to [comment:4 ktkohl]:
> How do I get the arb-2.2.tar.bz2 to be part of the commit?

In the [developer guide](http://www.sagemath.org/doc/developer/packaging.html#manual-package-build-and-installation), it says "If all went fine, open a ticket, put a link to the original tarball in the ticket and upload a branch with the code under `SAGE_ROOT/build/pkgs`." So IMHO, there is nothing else to do.



---

archive/issue_comments_217255.json:
```json
{
    "body": "I recently updated the makefile in Arb (requires a git checkout). This might solve some potential build issues with the 2.2 release.",
    "created_at": "2014-09-01T17:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217255",
    "user": "@fredrik-johansson"
}
```

I recently updated the makefile in Arb (requires a git checkout). This might solve some potential build issues with the 2.2 release.



---

archive/issue_comments_217256.json:
```json
{
    "body": "Replying to [comment:9 fredrik.johansson]:\n> I recently updated the makefile in Arb (requires a git checkout). This might solve some potential build issues with the 2.2 release.\n\nFor the sage spkg, it would probably be easier to have a release on github with that change.\n\n`@`original authors: is there a reason why the status of this patch is not \"needs_review\"? I'd also like to renew my question on whether you plan to provide python bindings.",
    "created_at": "2014-09-23T06:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217256",
    "user": "@cheuberg"
}
```

Replying to [comment:9 fredrik.johansson]:
> I recently updated the makefile in Arb (requires a git checkout). This might solve some potential build issues with the 2.2 release.

For the sage spkg, it would probably be easier to have a release on github with that change.

`@`original authors: is there a reason why the status of this patch is not "needs_review"? I'd also like to renew my question on whether you plan to provide python bindings.



---

archive/issue_comments_217257.json:
```json
{
    "body": "I will make a new release soon.\n\nI've also just added methods arb_get_interval_mpfr/arb_set_interval_mpfr which should simplify conversion to/from Sage's RIF and CIF.",
    "created_at": "2014-09-25T12:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217257",
    "user": "@fredrik-johansson"
}
```

I will make a new release soon.

I've also just added methods arb_get_interval_mpfr/arb_set_interval_mpfr which should simplify conversion to/from Sage's RIF and CIF.



---

archive/issue_comments_217258.json:
```json
{
    "body": "https://github.com/fredrik-johansson/arb/archive/2.3.0.tar.gz is available",
    "created_at": "2014-09-25T17:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217258",
    "user": "@fredrik-johansson"
}
```

https://github.com/fredrik-johansson/arb/archive/2.3.0.tar.gz is available



---

archive/issue_comments_217259.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-17T07:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217259",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_217260.json:
```json
{
    "body": "Updated to version 2.3.0; replaced usernames of original ticket authors by their full names as given by `SPKG.txt`.",
    "created_at": "2014-10-17T07:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217260",
    "user": "@cheuberg"
}
```

Updated to version 2.3.0; replaced usernames of original ticket authors by their full names as given by `SPKG.txt`.



---

archive/issue_comments_217261.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-10-17T07:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217261",
    "user": "@cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_217262.json:
```json
{
    "body": "Changing keywords from \"\" to \"arb, optional package. interval field\".",
    "created_at": "2014-10-17T07:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217262",
    "user": "@cheuberg"
}
```

Changing keywords from "" to "arb, optional package. interval field".



---

archive/issue_comments_217263.json:
```json
{
    "body": "The tarball name is too strange: it should contain the package name (`arb-2.3.0.tar.gz`)",
    "created_at": "2014-10-17T08:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217263",
    "user": "@jdemeyer"
}
```

The tarball name is too strange: it should contain the package name (`arb-2.3.0.tar.gz`)



---

archive/issue_comments_217264.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-10-17T08:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217264",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_217265.json:
```json
{
    "body": "Is the `-j1` needed for `$MAKE install`?",
    "created_at": "2014-10-17T08:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217265",
    "user": "@jdemeyer"
}
```

Is the `-j1` needed for `$MAKE install`?



---

archive/issue_comments_217266.json:
```json
{
    "body": "Try to avoid long lines like\n\n```\nArb is a C library for arbitrary-precision floating-point ball arithmetic, developed by Fredrik Johansson (fredrik.johansson@gmail.com). It supports efficient high-precision computation with polynomials, power series, matrices and special functions over the real and complex numbers, with automatic, rigorous error control.\n```\n",
    "created_at": "2014-10-17T08:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217266",
    "user": "@jdemeyer"
}
```

Try to avoid long lines like

```
Arb is a C library for arbitrary-precision floating-point ball arithmetic, developed by Fredrik Johansson (fredrik.johansson@gmail.com). It supports efficient high-precision computation with polynomials, power series, matrices and special functions over the real and complex numbers, with automatic, rigorous error control.
```




---

archive/issue_comments_217267.json:
```json
{
    "body": "We most likely really need the `--libdir=\"$SAGE_LOCAL/lib\"`. Some systems have hacked lt to install libraries in strange locations by default.",
    "created_at": "2014-10-17T09:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217267",
    "user": "@vbraun"
}
```

We most likely really need the `--libdir="$SAGE_LOCAL/lib"`. Some systems have hacked lt to install libraries in strange locations by default.



---

archive/issue_comments_217268.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-19T04:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217268",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_217269.json:
```json
{
    "body": "Replying to [comment:15 jdemeyer]:\n> The tarball name is too strange: it should contain the package name (`arb-2.3.0.tar.gz`)\nI cannot change the original name on github, therefore I downloaded a copy, renamed the tarball and placed it in my own webspace, see the modified description of the ticket.",
    "created_at": "2014-10-19T04:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217269",
    "user": "@cheuberg"
}
```

Replying to [comment:15 jdemeyer]:
> The tarball name is too strange: it should contain the package name (`arb-2.3.0.tar.gz`)
I cannot change the original name on github, therefore I downloaded a copy, renamed the tarball and placed it in my own webspace, see the modified description of the ticket.



---

archive/issue_comments_217270.json:
```json
{
    "body": "Replying to [comment:16 jdemeyer]:\n> Is the `-j1` needed for `$MAKE install`?\nIMHO it is not needed and removing it should not have any effects (the only dependency of make install is the library which should have been compiled in parallel before; then make install creates two directories and copies a few files into these directories, but these steps would not be run in parallel, anyway). So `-j1` is removed in commit [f3ffd68](http://git.sagemath.org/sage.git/commit/?id=f3ffd68f4cab80fa7177b451557a7a5947725324).",
    "created_at": "2014-10-19T04:52:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217270",
    "user": "@cheuberg"
}
```

Replying to [comment:16 jdemeyer]:
> Is the `-j1` needed for `$MAKE install`?
IMHO it is not needed and removing it should not have any effects (the only dependency of make install is the library which should have been compiled in parallel before; then make install creates two directories and copies a few files into these directories, but these steps would not be run in parallel, anyway). So `-j1` is removed in commit [f3ffd68](http://git.sagemath.org/sage.git/commit/?id=f3ffd68f4cab80fa7177b451557a7a5947725324).



---

archive/issue_comments_217271.json:
```json
{
    "body": "Replying to [comment:17 jdemeyer]:\n> Try to avoid long lines\n\ndone in commit [f3f169d](http://git.sagemath.org/sage.git/commit/?id=f3f169d1af46a1a1f3ad30fb16cf048b348f938c).",
    "created_at": "2014-10-19T04:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217271",
    "user": "@cheuberg"
}
```

Replying to [comment:17 jdemeyer]:
> Try to avoid long lines

done in commit [f3f169d](http://git.sagemath.org/sage.git/commit/?id=f3f169d1af46a1a1f3ad30fb16cf048b348f938c).



---

archive/issue_comments_217272.json:
```json
{
    "body": "Replying to [comment:18 vbraun]:\n> We most likely really need the `--libdir=\"$SAGE_LOCAL/lib\"`. Some systems have hacked lt to install libraries in strange locations by default. \nThe `.configure` script of arb does not support the option `--libdir`. Its `Makefile.in` uses `$(DESTDIR)$(PREFIX)/lib` (and `$(DESTDIR)$(PREFIX)/include`) as targets when installing the library.\nTherefore, commit [7487164](http://git.sagemath.org/sage.git/commit/?id=74871647fade608ce1b4b2be7d4ca08a7e6da63c) removes `--libdir` (previously commented out).",
    "created_at": "2014-10-19T05:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217272",
    "user": "@cheuberg"
}
```

Replying to [comment:18 vbraun]:
> We most likely really need the `--libdir="$SAGE_LOCAL/lib"`. Some systems have hacked lt to install libraries in strange locations by default. 
The `.configure` script of arb does not support the option `--libdir`. Its `Makefile.in` uses `$(DESTDIR)$(PREFIX)/lib` (and `$(DESTDIR)$(PREFIX)/include`) as targets when installing the library.
Therefore, commit [7487164](http://git.sagemath.org/sage.git/commit/?id=74871647fade608ce1b4b2be7d4ca08a7e6da63c) removes `--libdir` (previously commented out).



---

archive/issue_comments_217273.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-10-19T05:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217273",
    "user": "@cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_217274.json:
```json
{
    "body": "Argh, no autotools/libtool :-(",
    "created_at": "2014-10-19T11:05:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217274",
    "user": "@vbraun"
}
```

Argh, no autotools/libtool :-(



---

archive/issue_comments_217275.json:
```json
{
    "body": "Rather minimal python bindings are now in #17194",
    "created_at": "2014-10-22T06:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217275",
    "user": "@cheuberg"
}
```

Rather minimal python bindings are now in #17194



---

archive/issue_comments_217276.json:
```json
{
    "body": "See discussion on [sage-devel](https://groups.google.com/forum/#!topic/sage-devel/-MZAvj8qxVk) concerning the section `SPKG Maintainers`.",
    "created_at": "2014-10-29T09:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217276",
    "user": "@cheuberg"
}
```

See discussion on [sage-devel](https://groups.google.com/forum/#!topic/sage-devel/-MZAvj8qxVk) concerning the section `SPKG Maintainers`.



---

archive/issue_comments_217277.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-10-31T18:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217277",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_217278.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-06T12:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217278",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_217279.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-11-15T16:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16510",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16510#issuecomment-217279",
    "user": "@vbraun"
}
```

Resolution: fixed
