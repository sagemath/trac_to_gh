# Issue 30864: How to install jupyterlab in SageMath 9.3.beta4?

archive/issues_030864.json:
```json
{
    "body": "CC:  chapoton saraedum slelievre slabbe dimpase egourgoulhon dunfield\n\nAccording to this [answer](https://ask.sagemath.org/question/50194/interact-in-jupyterlab-vs-jupyter/) on Ask [SageMath](SageMath), starting from Sage 9.2 beta ll, we can jupyterlab using:\n\n\n\n```\nsage -i jupyterlab_widgets\n```\n\n \n\nRunning this command on [SageMath](SageMath) 9.3.beta4 gives:\n\n\n\n```\nmake: *** No rule to make target 'all-toolchain'.  Stop.\n```\n\n\n\nSteps to reproduce:\n\n\n\n```\ndocker run -it sagemath/sagemath:develop bash\n\nsudo apt update && \\\n    sudo apt install -y build-essential\n\nsage -i jupyterlab_widgets\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31101\n\n",
    "created_at": "2020-12-23T11:22:44Z",
    "labels": [
        "packages: standard",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "How to install jupyterlab in SageMath 9.3.beta4?",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30864",
    "user": "@hsm207"
}
```
CC:  chapoton saraedum slelievre slabbe dimpase egourgoulhon dunfield

According to this [answer](https://ask.sagemath.org/question/50194/interact-in-jupyterlab-vs-jupyter/) on Ask [SageMath](SageMath), starting from Sage 9.2 beta ll, we can jupyterlab using:



```
sage -i jupyterlab_widgets
```

 

Running this command on [SageMath](SageMath) 9.3.beta4 gives:



```
make: *** No rule to make target 'all-toolchain'.  Stop.
```



Steps to reproduce:



```
docker run -it sagemath/sagemath:develop bash

sudo apt update && \
    sudo apt install -y build-essential

sage -i jupyterlab_widgets
```


Issue created by migration from https://trac.sagemath.org/ticket/31101





---

archive/issue_comments_441101.json:
```json
{
    "body": "This is not specific to `jupyterlab_widgets`. \n\n```\n$ sage -i normaliz\nmake: *** No rule to make target 'all-toolchain'.  Stop.\n```\n\nWhatever this docker image is prepared for, installing optional packages does not seem part of it.\n\n```\n$ ls -l sage\ntotal 180\n-rw-r--r-- 1 sage sage 66461 Dec 15 05:51 COPYING.txt\n-rw-r--r-- 1 sage sage    53 Dec 15 05:51 VERSION.txt\ndrwxr-xr-x 7 sage sage  4096 Dec 15 05:51 build\n-rwxr-xr-x 1 sage sage 86258 Dec 15 07:06 config.status\ndrwxr-xr-x 1 sage sage  4096 Dec 15 07:06 local\n-rwxr-xr-x 1 sage sage  4951 Dec 15 05:51 sage\ndrwxr-xr-x 5 sage sage  4096 Dec 15 07:07 src\n```\n\nOne notes that the top-level `Makefile` (and many other files) are missing. So no build operations are possible.",
    "created_at": "2020-12-23T17:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441101",
    "user": "mkoeppe"
}
```

This is not specific to `jupyterlab_widgets`. 

```
$ sage -i normaliz
make: *** No rule to make target 'all-toolchain'.  Stop.
```

Whatever this docker image is prepared for, installing optional packages does not seem part of it.

```
$ ls -l sage
total 180
-rw-r--r-- 1 sage sage 66461 Dec 15 05:51 COPYING.txt
-rw-r--r-- 1 sage sage    53 Dec 15 05:51 VERSION.txt
drwxr-xr-x 7 sage sage  4096 Dec 15 05:51 build
-rwxr-xr-x 1 sage sage 86258 Dec 15 07:06 config.status
drwxr-xr-x 1 sage sage  4096 Dec 15 07:06 local
-rwxr-xr-x 1 sage sage  4951 Dec 15 05:51 sage
drwxr-xr-x 5 sage sage  4096 Dec 15 07:07 src
```

One notes that the top-level `Makefile` (and many other files) are missing. So no build operations are possible.



---

archive/issue_comments_441102.json:
```json
{
    "body": "Changing priority from trivial to critical.",
    "created_at": "2020-12-23T17:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441102",
    "user": "mkoeppe"
}
```

Changing priority from trivial to critical.



---

archive/issue_comments_441103.json:
```json
{
    "body": "Changing keywords from \"\" to \"docker\".",
    "created_at": "2020-12-23T17:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441103",
    "user": "mkoeppe"
}
```

Changing keywords from "" to "docker".



---

archive/issue_comments_441104.json:
```json
{
    "body": "Also `sagemath/sagemath-dev:latest` appears to be Sage 9.0",
    "created_at": "2020-12-23T17:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441104",
    "user": "mkoeppe"
}
```

Also `sagemath/sagemath-dev:latest` appears to be Sage 9.0



---

archive/issue_comments_441105.json:
```json
{
    "body": "Replying to [comment:4 mkoeppe]:\n> Also `sagemath/sagemath-dev:latest` appears to be Sage 9.0\nProbably `sagemath/sagemath:develop` should be used instead (it was updated 2 days ago).",
    "created_at": "2020-12-29T16:19:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441105",
    "user": "egourgoulhon"
}
```

Replying to [comment:4 mkoeppe]:
> Also `sagemath/sagemath-dev:latest` appears to be Sage 9.0
Probably `sagemath/sagemath:develop` should be used instead (it was updated 2 days ago).



---

archive/issue_comments_441106.json:
```json
{
    "body": "I think that there's no `:latest` image due to a typo in 83acd7b0916e66fda4d0998132e69e441fb6c328. It's fixed already in `develop`.\n\n> > Also sagemath/sagemath-dev:latest appears to be Sage 9.0\n> Probably sagemath/sagemath:develop should be used instead (it was updated 2 days ago). \n\nThese are quite different. The former is a build from a released stable version of [SageMath](SageMath) (latest=master) in a version that allows to rebuild [SageMath](SageMath). The latter is a build from the latest beta but without such tooling, i.e., only with the very basics to run [SageMath](SageMath).",
    "created_at": "2021-01-21T00:52:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441106",
    "user": "saraedum"
}
```

I think that there's no `:latest` image due to a typo in 83acd7b0916e66fda4d0998132e69e441fb6c328. It's fixed already in `develop`.

> > Also sagemath/sagemath-dev:latest appears to be Sage 9.0
> Probably sagemath/sagemath:develop should be used instead (it was updated 2 days ago). 

These are quite different. The former is a build from a released stable version of [SageMath](SageMath) (latest=master) in a version that allows to rebuild [SageMath](SageMath). The latter is a build from the latest beta but without such tooling, i.e., only with the very basics to run [SageMath](SageMath).



---

archive/issue_comments_441107.json:
```json
{
    "body": "I am not sure I understand what this ticket is about. The dockerhub page does not seem to mention that you should `sage -i` to install packages. You should be able `pip` install packages though. And we might want to clarify this there.\n\nIt should be quite easy to make `sage -i` work for some packages in the sagemath docker image, see #27288#comment:11. I guess all one needs to do is create a new target in `Makefile` that is a tiny bit bigger than `micro_release` and makes the `Makefile` itself and the most important bits survive.",
    "created_at": "2021-01-21T01:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441107",
    "user": "saraedum"
}
```

I am not sure I understand what this ticket is about. The dockerhub page does not seem to mention that you should `sage -i` to install packages. You should be able `pip` install packages though. And we might want to clarify this there.

It should be quite easy to make `sage -i` work for some packages in the sagemath docker image, see #27288#comment:11. I guess all one needs to do is create a new target in `Makefile` that is a tiny bit bigger than `micro_release` and makes the `Makefile` itself and the most important bits survive.



---

archive/issue_comments_441108.json:
```json
{
    "body": "Moving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441108",
    "user": "mkoeppe"
}
```

Moving to 9.4, as 9.3 has been released.



---

archive/issue_comments_441109.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-09T00:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441109",
    "user": "saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_441110.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2021-12-09T00:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441110",
    "user": "saraedum"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_441111.json:
```json
{
    "body": "So, what should actually happen here? Or is this a duplicate of #27288?",
    "created_at": "2021-12-09T00:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441111",
    "user": "saraedum"
}
```

So, what should actually happen here? Or is this a duplicate of #27288?



---

archive/issue_comments_441112.json:
```json
{
    "body": "Changing component from packages: standard to docker.",
    "created_at": "2021-12-09T00:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441112",
    "user": "saraedum"
}
```

Changing component from packages: standard to docker.



---

archive/issue_comments_441113.json:
```json
{
    "body": "So, what should actually happen here? Or is this a duplicate of",
    "created_at": "2021-12-09T00:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30864",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30864#issuecomment-441113",
    "user": "saraedum"
}
```

So, what should actually happen here? Or is this a duplicate of
