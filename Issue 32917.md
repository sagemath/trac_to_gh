# Issue 32917: random doctest failure in sage.plot.matrix_plot

Issue created by migration from https://trac.sagemath.org/ticket/33154

Original creator: tornaria

Original creation time: 2022-01-12 19:03:43


```
sage -t --long --random-seed=77574003112252338109572980105396911878 src/sage/plot/matrix_plot.py
**********************************************************************
File "src/sage/plot/matrix_plot.py", line 518, in sage.plot.matrix_plot.matrix_plot
Failed example:
    matrix_plot(random_matrix(P, 3, 3))
Expected:
    Traceback (most recent call last):
    ...
    TypeError: cannot convert nonconstant polynomial
Got:
    Graphics object consisting of 1 graphics primitive
**********************************************************************
1 item had failures:
   1 of  50 in sage.plot.matrix_plot.matrix_plot
    [71 tests, 1 failure, 11.28 s]
----------------------------------------------------------------------
```


I guess if one is really (un)lucky, the polynomial matrix is really constant. Indeed changing `matrix_plot()` for `print()` I get:

```
sage -t --random-seed=77574003112252338109572980105396911878 src/sage/plot/matrix_plot.py
**********************************************************************
File "src/sage/plot/matrix_plot.py", line 518, in sage.plot.matrix_plot.matrix_plot
Failed example:
    print(random_matrix(P, 3, 3))
Expected:
    Traceback (most recent call last):
    ...
    TypeError: cannot convert nonconstant polynomial
Got:
    [                 0  0.782649657440611                  0]
    [ 0.963470417368214 -0.498443274186489                  0]
    [                 0  0.419385875878395                  0]
**********************************************************************
```

Of course most random seeds yield nonconstant matrices so I was really lucky here...




---

Comment by mjo created at 2022-01-13 18:40:13

Changing status from new to needs_review.


---

Comment by mjo created at 2022-01-13 18:40:13

New commits:


---

Comment by @mwageringel created at 2022-01-13 22:08:02

Changing status from needs_review to positive_review.


---

Comment by @mwageringel created at 2022-01-13 22:08:02

Ok, LGTM.


---

Comment by slelievre created at 2022-01-30 15:39:13

Setting milestone to 9.6 now that 9.5 is out.


---

Comment by vbraun created at 2022-02-13 10:17:19

Resolution: fixed
