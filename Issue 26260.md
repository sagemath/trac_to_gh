# Issue 26260: compiting the limit of the lognormal density crashes Sage.

archive/issues_026260.json:
```json
{
    "body": "CC:  @slel\n\ndEFINE THE LOGNORMAL DENSITY STARTING FROM THE NORMAL :\n\n```\nvar(\"mu\", domain=\"real\")\nvar(\"y,m,s,sigma\", domain=\"positive\")\ndnorm(x,mu,sigma)=e^(-(x-mu)^2/(2*sigma^2))/(sigma*sqrt(2*pi))\ndlnorm(u,mu,sigma)=(dnorm(x,mu,sigma).subs(x==log(y))*abs(diff(log(y),y))).simplify()\n```\n\n\nLet's try to prove that the limits are 0 at 0 and oo :\n\n```\nsage: dlnorm(y,mu,sigma).limit(y=oo)\n0\n```\n\n\nSo far so good. But :\n\n```\ndlnorm(y,mu,sigma).limit(y=0, dir=\"+\")\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\n## Numerous repetitions...\n\n\nProcess Sage erreur de segmentation\n```\n\n\nThis seems analogous but different of #14677...\n\nThis limit seems problematic to other subsystems :\n\n* Sympy returns \"Not implemented\"\n* libgiac returns \"Infinity\" (wrong)\n* Mathematica doesn't return (but (correctly) returns 0 when used directly).\n* When used directly, Maxima asks a lot of questions, and fails :\n\n```\nlimit(dlnorm(y,mu,sigma),y,0);\nIs sigma^2-mu positive, negative or zero?\n\np;\nIs mu positive, negative or zero?\n\np;\nIs 2*sigma^2-mu positive, negative or zero?\n\np;\n(%o10) ('limit(%e^-((log(y)-mu)^2/(2*sigma^2))/y,y,0))/(sqrt(2)*sqrt(%pi)\n                                                               *sigma)\n```\n\n\nThis failure mode is different from the one seen in Sage ; we may have a *new* bug...\n\nIssue created by migration from https://trac.sagemath.org/ticket/26497\n\n",
    "created_at": "2018-10-16T20:59:38Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "compiting the limit of the lognormal density crashes Sage.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26260",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
CC:  @slel

dEFINE THE LOGNORMAL DENSITY STARTING FROM THE NORMAL :

```
var("mu", domain="real")
var("y,m,s,sigma", domain="positive")
dnorm(x,mu,sigma)=e^(-(x-mu)^2/(2*sigma^2))/(sigma*sqrt(2*pi))
dlnorm(u,mu,sigma)=(dnorm(x,mu,sigma).subs(x==log(y))*abs(diff(log(y),y))).simplify()
```


Let's try to prove that the limits are 0 at 0 and oo :

```
sage: dlnorm(y,mu,sigma).limit(y=oo)
0
```


So far so good. But :

```
dlnorm(y,mu,sigma).limit(y=0, dir="+")
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;

## Numerous repetitions...


Process Sage erreur de segmentation
```


This seems analogous but different of #14677...

This limit seems problematic to other subsystems :

* Sympy returns "Not implemented"
* libgiac returns "Infinity" (wrong)
* Mathematica doesn't return (but (correctly) returns 0 when used directly).
* When used directly, Maxima asks a lot of questions, and fails :

```
limit(dlnorm(y,mu,sigma),y,0);
Is sigma^2-mu positive, negative or zero?

p;
Is mu positive, negative or zero?

p;
Is 2*sigma^2-mu positive, negative or zero?

p;
(%o10) ('limit(%e^-((log(y)-mu)^2/(2*sigma^2))/y,y,0))/(sqrt(2)*sqrt(%pi)
                                                               *sigma)
```


This failure mode is different from the one seen in Sage ; we may have a *new* bug...

Issue created by migration from https://trac.sagemath.org/ticket/26497





---

archive/issue_comments_369646.json:
```json
{
    "body": "It looks to me like a `domain:complex` error again. I get:\n\n```\nsage: maxima_calculus.eval(\"domain:real\")\n'real'\nsage: dlnorm(y,mu,sigma).limit(y=0, dir=\"+\")\n0\n```\n\nThat's to say, if we set domain to real, maxima in sage seems to do the right thing immediately. So I think it's basically the same problem as #14677.",
    "created_at": "2018-10-16T21:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26260#issuecomment-369646",
    "user": "https://github.com/nbruin"
}
```

It looks to me like a `domain:complex` error again. I get:

```
sage: maxima_calculus.eval("domain:real")
'real'
sage: dlnorm(y,mu,sigma).limit(y=0, dir="+")
0
```

That's to say, if we set domain to real, maxima in sage seems to do the right thing immediately. So I think it's basically the same problem as #14677.



---

archive/issue_comments_369647.json:
```json
{
    "body": "Changing keywords from \"\" to \"limit, maxima\".",
    "created_at": "2018-10-18T06:14:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26260#issuecomment-369647",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "limit, maxima".



---

archive/issue_events_065855.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-18T06:14:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26260",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26260#event-65855"
}
```
