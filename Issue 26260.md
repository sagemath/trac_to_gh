# Issue 26260: compiting the limit of the lognormal density crashes Sage.

Issue created by migration from Trac.

Original creator: charpent

Original creation time: 2018-10-16 20:59:38

CC:  slelievre

dEFINE THE LOGNORMAL DENSITY STARTING FROM THE NORMAL :

```
var("mu", domain="real")
var("y,m,s,sigma", domain="positive")
dnorm(x,mu,sigma)=e^(-(x-mu)^2/(2*sigma^2))/(sigma*sqrt(2*pi))
dlnorm(u,mu,sigma)=(dnorm(x,mu,sigma).subs(x==log(y))*abs(diff(log(y),y))).simplify()
```


Let's try to prove that the limits are 0 at 0 and oo :

```
sage: dlnorm(y,mu,sigma).limit(y=oo)
0
```


So far so good. But :

```
dlnorm(y,mu,sigma).limit(y=0, dir="+")
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;

## Numerous repetitions...


Process Sage erreur de segmentation
```


This seems analogous but different of #14677...

This limit seems problematic to other subsystems :

* Sympy returns "Not implemented"
* libgiac returns "Infinity" (wrong)
* Mathematica doesn't return (but (correctly) returns 0 when used directly).
* When used directly, Maxima asks a lot of questions, and fails :

```
limit(dlnorm(y,mu,sigma),y,0);
Is sigma^2-mu positive, negative or zero?

p;
Is mu positive, negative or zero?

p;
Is 2*sigma^2-mu positive, negative or zero?

p;
(%o10) ('limit(%e^-((log(y)-mu)^2/(2*sigma^2))/y,y,0))/(sqrt(2)*sqrt(%pi)
                                                               *sigma)
```


This failure mode is different from the one seen in Sage ; we may have a *new* bug...


---

Comment by nbruin created at 2018-10-16 21:07:04

It looks to me like a `domain:complex` error again. I get:

```
sage: maxima_calculus.eval("domain:real")
'real'
sage: dlnorm(y,mu,sigma).limit(y=0, dir="+")
0
```

That's to say, if we set domain to real, maxima in sage seems to do the right thing immediately. So I think it's basically the same problem as #14677.


---

Comment by slelievre created at 2018-10-18 06:14:45

Changing keywords from "" to "limit, maxima".
