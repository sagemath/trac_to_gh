# Issue 30238: sage -docbuild: error building docs of single file with relative imports

archive/issues_030238.json:
```json
{
    "body": "CC:  jhpalmieri @davewittemorris\n\nFollow-up from #29651:\n\nThe approach of `SingleFileBuilder`, creating a symlink to the source file, is not compatible with `from .module import`.\n\nExample:\n\n```\n$ ./sage -docbuild file=src/sage/geometry/polyhedron/base.py html \n[html     ] building [html]: targets for 1 source files that are out of date\n[html     ] updating environment: [new config] 1 added, 0 changed, 0 removed\n[html     ] WARNING: autodoc: failed to import module 'base'; the following exception was raised:\n[html     ] attempted relative import with no known parent package\n[html     ] writing additional pages...  searchdone\n[html     ] copying static files... ... done\n[html     ] dumping search index in English (code: en)... done\n[html     ] The HTML pages are in ../../../../.sage/docbuild/base/output/html.\nError building the documentation.\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30475\n\n",
    "created_at": "2020-08-30T18:36:17Z",
    "labels": [
        "build",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "sage -docbuild: error building docs of single file with relative imports",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30238",
    "user": "mkoeppe"
}
```
CC:  jhpalmieri @davewittemorris

Follow-up from #29651:

The approach of `SingleFileBuilder`, creating a symlink to the source file, is not compatible with `from .module import`.

Example:

```
$ ./sage -docbuild file=src/sage/geometry/polyhedron/base.py html 
[html     ] building [html]: targets for 1 source files that are out of date
[html     ] updating environment: [new config] 1 added, 0 changed, 0 removed
[html     ] WARNING: autodoc: failed to import module 'base'; the following exception was raised:
[html     ] attempted relative import with no known parent package
[html     ] writing additional pages...  searchdone
[html     ] copying static files... ... done
[html     ] dumping search index in English (code: en)... done
[html     ] The HTML pages are in ../../../../.sage/docbuild/base/output/html.
Error building the documentation.
```


Issue created by migration from https://trac.sagemath.org/ticket/30475





---

archive/issue_comments_431078.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30238#issuecomment-431078",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_431079.json:
```json
{
    "body": "Sorry for a naive question. What is the primary use of the single file doc builder? I didn't have an occasion to use it myself.\n\nIf the file is in the sage library, isn't it enough to use `sage -docbuild reference/discrete_geometry html` for `src/sage/geometry/polyhedron/base.py`, for instance?",
    "created_at": "2022-07-12T02:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30238#issuecomment-431079",
    "user": "klee"
}
```

Sorry for a naive question. What is the primary use of the single file doc builder? I didn't have an occasion to use it myself.

If the file is in the sage library, isn't it enough to use `sage -docbuild reference/discrete_geometry html` for `src/sage/geometry/polyhedron/base.py`, for instance?



---

archive/issue_comments_431080.json:
```json
{
    "body": "I think it can be useful for users who are working on a file outside of the Sage source tree",
    "created_at": "2022-07-12T04:18:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30238#issuecomment-431080",
    "user": "mkoeppe"
}
```

I think it can be useful for users who are working on a file outside of the Sage source tree
