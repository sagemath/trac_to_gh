# Issue 30017: TensorFreeModule._an_element_: Create a default basis in the base module if necessary

Issue created by migration from https://trac.sagemath.org/ticket/30254

Original creator: mkoeppe

Original creation time: 2020-07-30 15:58:40

CC:  egourgoulhon tscrim @mjungmath

Likewise for `ExtPowerFreeModule` etc.

The current code creates an element without components if the base module has no default basis. Such elements are not useful for running the test suite because adding them gives a "no common basis" error.

That currently all tests work depends in a subtle way on the order in which modules are created.

In this ticket, we propose to change the `_an_element_` method to create a default basis in the base module if none already exists -- this matches what `FiniteRankFreeModule._an_element_` already does.

This will simplify further refactoring of the code, such as the identification of modules discussed in #30241.



---

Comment by git created at 2020-07-30 16:43:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-07-30 16:49:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-07-30 16:53:21

Changing status from new to needs_review.


---

Comment by egourgoulhon created at 2020-07-30 21:02:22

Thanks for fixing this!


---

Comment by egourgoulhon created at 2020-07-30 21:02:22

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-07-30 21:08:06

Thanks!


---

Comment by vbraun created at 2020-08-07 19:06:26

Resolution: fixed
