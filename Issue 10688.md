# Issue 10688: Upgrading 4.5.3 -> 4.6.2.alpha4 fails

archive/issues_010688.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nCC:  @vbraun\n\nKeywords: cython upgrade dependencies\n\nThis is a problem I discovered when upgrading from sage-4.5.3 to a\ncandidate 4.6.2.alpha4.  Probably, the problem has existed for a while, it just \"surfaced\" or got noticed now.\n\nThe problem is that the file `sage/algebras/quatalg/quaternion_algebra_element.cpp`\nis **not** recreated from the corresponding .pyx file when upgrading. This then causes a compile error.\n\nThe file `sage/algebras/quatalg/quaternion_algebra_element.pyx`\nincludes (using Cython's `include` statement) `sage/ext/gmp.pxi` and the latter file was changed some Sage versions ago.\n\nThe following happens:\n\n```\n$ ./sage -b\n\n----------------------------------------------------------\nsage: Building and installing modified Sage library files.\n\n\nInstalling c_lib\nscons: `install' is up to date.\n=================== setup.py ========================\nUpdating Cython code....\nTime to execute 0 commands: 1.31130218506e-05 seconds\nFinished compiling Cython code (time = 0.0120220184326 seconds)\nrunning install\nrunning build\nrunning build_py\nrunning build_ext\nbuilding 'sage.algebras.quatalg.quaternion_algebra_element' extension\nbuilding 'sage.calculus.riemann' extension\n[...]\nbuilding 'sage.symbolic.pynac' extension\nbuilding 'sage.symbolic.ring' extension\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -O3 -Wall\n-Wstrict-prototypes -fPIC\n-I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/local/include/FLINT/ -I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/local/include\n-I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/local/include/csage\n-I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/devel/sage/sage/ext\n-I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/local/include/python2.6\n-c sage/algebras/quatalg/quaternion_algebra_element.cpp -o\nbuild/temp.linux-x86_64-2.6/sage/algebras/quatalg/quaternion_algebra_element.o\n-w\n[trouble...]\n```\n\nDepends on #10233\n\nApply trac_10751_fix.patch\n\nThat is, first apply `trac_10233_fix_cython_include_path.patch` from the dependency and then `trac_10751_fix.patch`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10751\n\n",
    "closed_at": "2011-03-08T21:47:17Z",
    "created_at": "2011-02-07T20:08:33Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Upgrading 4.5.3 -> 4.6.2.alpha4 fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10688",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: GeorgSWeber

CC:  @vbraun

Keywords: cython upgrade dependencies

This is a problem I discovered when upgrading from sage-4.5.3 to a
candidate 4.6.2.alpha4.  Probably, the problem has existed for a while, it just "surfaced" or got noticed now.

The problem is that the file `sage/algebras/quatalg/quaternion_algebra_element.cpp`
is **not** recreated from the corresponding .pyx file when upgrading. This then causes a compile error.

The file `sage/algebras/quatalg/quaternion_algebra_element.pyx`
includes (using Cython's `include` statement) `sage/ext/gmp.pxi` and the latter file was changed some Sage versions ago.

The following happens:

```
$ ./sage -b

----------------------------------------------------------
sage: Building and installing modified Sage library files.


Installing c_lib
scons: `install' is up to date.
=================== setup.py ========================
Updating Cython code....
Time to execute 0 commands: 1.31130218506e-05 seconds
Finished compiling Cython code (time = 0.0120220184326 seconds)
running install
running build
running build_py
running build_ext
building 'sage.algebras.quatalg.quaternion_algebra_element' extension
building 'sage.calculus.riemann' extension
[...]
building 'sage.symbolic.pynac' extension
building 'sage.symbolic.ring' extension
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -O3 -Wall
-Wstrict-prototypes -fPIC
-I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/local/include/FLINT/ -I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/local/include
-I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/local/include/csage
-I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/devel/sage/sage/ext
-I/mnt/usb1/scratch/jdemeyer/sage-4.5.3-4.6.2.alpha4/local/include/python2.6
-c sage/algebras/quatalg/quaternion_algebra_element.cpp -o
build/temp.linux-x86_64-2.6/sage/algebras/quatalg/quaternion_algebra_element.o
-w
[trouble...]
```

Depends on #10233

Apply trac_10751_fix.patch

That is, first apply `trac_10233_fix_cython_include_path.patch` from the dependency and then `trac_10751_fix.patch`.

Issue created by migration from https://trac.sagemath.org/ticket/10751





---

archive/issue_comments_112191.json:
```json
{
    "body": "Initial patch",
    "created_at": "2011-02-13T01:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112191",
    "user": "https://github.com/vbraun"
}
```

Initial patch



---

archive/issue_comments_112192.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2011-02-13T01:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112192",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_112193.json:
```json
{
    "body": "Changing keywords from \"upgrade cython\" to \"cython upgrade dependencies\".",
    "created_at": "2011-02-13T01:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112193",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "upgrade cython" to "cython upgrade dependencies".



---

archive/issue_comments_112194.json:
```json
{
    "body": "Attachment [trac_10751_setup_misses_cython_dependencies.patch](tarball://root/attachments/some-uuid/ticket10751/trac_10751_setup_misses_cython_dependencies.patch) by @vbraun created at 2011-02-13 01:52:47\n\nHere is the initial version of my rewrite. The basic idea is to split the dependency tracking off into the sage library (`sage/misc/dependencies.py`) so it can be reused, documented, and doctested. And instead of stuffing filenames as strings into dictionaries, classes encapsulating source file names are introduced. Let me know if you have any comments on these design decisions.\n\nI still want to polish the code a bit more, but the current patch fixes Jeroen's bug:\n\n```\n[vbraun@volker-two hg]$ touch sage/ext/gmp.pxi\n[vbraun@volker-two hg]$ sage -b\n\n----------------------------------------------------------\nsage: Building and installing modified Sage library files.\n\n\nInstalling c_lib\nscons: `install' is up to date.\nUpdating Cython code....\nBuilding sage/algebras/quatalg/quaternion_algebra_element.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/combinat/expnums.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/ext/multi_modular.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/matrix/matrix_cyclo_dense.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/matrix/matrix_integer_dense.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/matrix/matrix_rational_dense.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/matrix/matrix_rational_sparse.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/matrix/misc.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/modular/modform/eis_series_cython.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/quadratic_forms/count_local_2.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/integer.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/integer_ring.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/fast_arith.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/fraction_field_FpT.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/rational.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/padics/padic_base_coercion.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/padics/padic_capped_absolute_element.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/padics/padic_capped_relative_element.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/padics/padic_fixed_mod_element.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/padics/padic_generic_element.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/padics/padic_printing.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/padics/pow_computer.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/padics/pow_computer_ext.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/polynomial/polynomial_integer_dense_flint.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/polynomial/polynomial_rational_flint.pyx because it depends on sage/ext/gmp.pxi.\nBuilding sage/rings/polynomial/real_roots.pyx because it depends on sage/ext/gmp.pxi.\nExecute 26 commands (using 4 threads)\n```",
    "created_at": "2011-02-13T01:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112194",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_10751_setup_misses_cython_dependencies.patch](tarball://root/attachments/some-uuid/ticket10751/trac_10751_setup_misses_cython_dependencies.patch) by @vbraun created at 2011-02-13 01:52:47

Here is the initial version of my rewrite. The basic idea is to split the dependency tracking off into the sage library (`sage/misc/dependencies.py`) so it can be reused, documented, and doctested. And instead of stuffing filenames as strings into dictionaries, classes encapsulating source file names are introduced. Let me know if you have any comments on these design decisions.

I still want to polish the code a bit more, but the current patch fixes Jeroen's bug:

```
[vbraun@volker-two hg]$ touch sage/ext/gmp.pxi
[vbraun@volker-two hg]$ sage -b

----------------------------------------------------------
sage: Building and installing modified Sage library files.


Installing c_lib
scons: `install' is up to date.
Updating Cython code....
Building sage/algebras/quatalg/quaternion_algebra_element.pyx because it depends on sage/ext/gmp.pxi.
Building sage/combinat/expnums.pyx because it depends on sage/ext/gmp.pxi.
Building sage/ext/multi_modular.pyx because it depends on sage/ext/gmp.pxi.
Building sage/matrix/matrix_cyclo_dense.pyx because it depends on sage/ext/gmp.pxi.
Building sage/matrix/matrix_integer_dense.pyx because it depends on sage/ext/gmp.pxi.
Building sage/matrix/matrix_rational_dense.pyx because it depends on sage/ext/gmp.pxi.
Building sage/matrix/matrix_rational_sparse.pyx because it depends on sage/ext/gmp.pxi.
Building sage/matrix/misc.pyx because it depends on sage/ext/gmp.pxi.
Building sage/modular/modform/eis_series_cython.pyx because it depends on sage/ext/gmp.pxi.
Building sage/quadratic_forms/count_local_2.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/integer.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/integer_ring.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/fast_arith.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/fraction_field_FpT.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/rational.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/padics/padic_base_coercion.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/padics/padic_capped_absolute_element.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/padics/padic_capped_relative_element.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/padics/padic_fixed_mod_element.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/padics/padic_generic_element.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/padics/padic_printing.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/padics/pow_computer.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/padics/pow_computer_ext.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/polynomial/polynomial_integer_dense_flint.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/polynomial/polynomial_rational_flint.pyx because it depends on sage/ext/gmp.pxi.
Building sage/rings/polynomial/real_roots.pyx because it depends on sage/ext/gmp.pxi.
Execute 26 commands (using 4 threads)
```



---

archive/issue_comments_112195.json:
```json
{
    "body": "It's big. I guess the split in depency.py may make thing more manageable in the long term. We how to discuss the potential removal of debian stuff on the the list, #5903 doesn't say anything about setup.py and module_list.py (which I was thinking of cleaning).\n\nThe only mistake I can see from a first look is on line 529 of dependency.py\n\n```\nsage: gmp = SourceFile('/home/vbraun/opt/sage-4.6.2.alpha4/local/include/gmp.h')\n```\nI don't think we want to hardcode your setup :)",
    "created_at": "2011-02-13T09:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112195",
    "user": "https://github.com/kiwifb"
}
```

It's big. I guess the split in depency.py may make thing more manageable in the long term. We how to discuss the potential removal of debian stuff on the the list, #5903 doesn't say anything about setup.py and module_list.py (which I was thinking of cleaning).

The only mistake I can see from a first look is on line 529 of dependency.py

```
sage: gmp = SourceFile('/home/vbraun/opt/sage-4.6.2.alpha4/local/include/gmp.h')
```
I don't think we want to hardcode your setup :)



---

archive/issue_comments_112196.json:
```json
{
    "body": "We should switch Sage to use http://wiki.cython.org/enhancements/distutils_preprocessing . This would let us get rid of most of the manual module_list.py declarations as well.",
    "created_at": "2011-02-15T21:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112196",
    "user": "https://github.com/robertwb"
}
```

We should switch Sage to use http://wiki.cython.org/enhancements/distutils_preprocessing . This would let us get rid of most of the manual module_list.py declarations as well.



---

archive/issue_comments_112197.json:
```json
{
    "body": "Robert's distutils-preprocessing seems to be the best way to do things, and we should investigate that once the requisite Cython-14.1 is included. \n\nIn the meantime, I've made a small patch that fixes the dependency discovery bug (tested by touching sage/ext/gmp.pxi as above). This leaves the setup.py code in its current somewhat messy state, but I think we should go with the minimal bugfix until we can give distutils-preprocessing a try.\n\nAlso, enables parallel compile by default. I didn't even know we supported that. You can still disable it via setting the `MAKE='make -j1'` environment variable. Rebuilding the Sage library dropped from half an hour to 5 minutes ;-)",
    "created_at": "2011-02-18T13:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112197",
    "user": "https://github.com/vbraun"
}
```

Robert's distutils-preprocessing seems to be the best way to do things, and we should investigate that once the requisite Cython-14.1 is included. 

In the meantime, I've made a small patch that fixes the dependency discovery bug (tested by touching sage/ext/gmp.pxi as above). This leaves the setup.py code in its current somewhat messy state, but I think we should go with the minimal bugfix until we can give distutils-preprocessing a try.

Also, enables parallel compile by default. I didn't even know we supported that. You can still disable it via setting the `MAKE='make -j1'` environment variable. Rebuilding the Sage library dropped from half an hour to 5 minutes ;-)



---

archive/issue_comments_112198.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-02-18T13:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112198",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_112199.json:
```json
{
    "body": "Hmm patch bot still lists both patches erroneously.\n\nApply trac_10751_fix.patch",
    "created_at": "2011-02-19T13:22:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112199",
    "user": "https://github.com/vbraun"
}
```

Hmm patch bot still lists both patches erroneously.

Apply trac_10751_fix.patch



---

archive/issue_comments_112200.json:
```json
{
    "body": "`make -j` without argument to `-j` means: use unlimited number of threads.  Therefore, the code\n\n```\npos = MAKE.rfind('-j') \nif pos>=0: \n    nthreads = int(MAKE[pos+2:].split()[0])\n```\nshould be changed to\n\n```\npos = MAKE.rfind(' -j')\nif pos >= 0:\n    try: \n        nthreads = int(MAKE[pos+3:].split()[0])\n    except ValueError:\n        # If there is no argument to -j, use maximum number of threads\n        nthreads = 2*cpu_count\n```\nIn any case, the `ValueError` must be handled somehow.\n\nNote also that I have added a space before `-j`.",
    "created_at": "2011-02-20T17:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112200",
    "user": "https://github.com/jdemeyer"
}
```

`make -j` without argument to `-j` means: use unlimited number of threads.  Therefore, the code

```
pos = MAKE.rfind('-j') 
if pos>=0: 
    nthreads = int(MAKE[pos+2:].split()[0])
```
should be changed to

```
pos = MAKE.rfind(' -j')
if pos >= 0:
    try: 
        nthreads = int(MAKE[pos+3:].split()[0])
    except ValueError:
        # If there is no argument to -j, use maximum number of threads
        nthreads = 2*cpu_count
```
In any case, the `ValueError` must be handled somehow.

Note also that I have added a space before `-j`.



---

archive/issue_comments_112201.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-02-20T17:39:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112201",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_112202.json:
```json
{
    "body": "also `IndexError` should be caught in the same `except` clause.",
    "created_at": "2011-02-20T17:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112202",
    "user": "https://github.com/jdemeyer"
}
```

also `IndexError` should be caught in the same `except` clause.



---

archive/issue_comments_112203.json:
```json
{
    "body": "Ok, fixed. Also handling the `make -j=N` case now.",
    "created_at": "2011-02-20T18:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112203",
    "user": "https://github.com/vbraun"
}
```

Ok, fixed. Also handling the `make -j=N` case now.



---

archive/issue_comments_112204.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-02-22T17:04:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112204",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_112205.json:
```json
{
    "body": "I think you need to add a `try`/`except` as follows:\n\n```\ntry:\n    if MAKE[pos+3] == '=':   # make -j=N is the same as make -jN \n        pos += 1\nexcept IndexError:\n    pass \n```",
    "created_at": "2011-02-22T17:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112205",
    "user": "https://github.com/jdemeyer"
}
```

I think you need to add a `try`/`except` as follows:

```
try:
    if MAKE[pos+3] == '=':   # make -j=N is the same as make -jN 
        pos += 1
except IndexError:
    pass 
```



---

archive/issue_comments_112206.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-02-22T17:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112206",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_112207.json:
```json
{
    "body": "Yep, that if clause needs to be moved into the existing try/except block. Updated patch follows...",
    "created_at": "2011-02-22T17:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112207",
    "user": "https://github.com/vbraun"
}
```

Yep, that if clause needs to be moved into the existing try/except block. Updated patch follows...



---

archive/issue_comments_112208.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-02-22T17:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112208",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_112209.json:
```json
{
    "body": "Updated patch",
    "created_at": "2011-02-22T17:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112209",
    "user": "https://github.com/vbraun"
}
```

Updated patch



---

archive/issue_comments_112210.json:
```json
{
    "body": "Attachment [trac_10751_fix.patch](tarball://root/attachments/some-uuid/ticket10751/trac_10751_fix.patch) by @jdemeyer created at 2011-03-08 10:53:31\n\nLooks good to me.",
    "created_at": "2011-03-08T10:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112210",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [trac_10751_fix.patch](tarball://root/attachments/some-uuid/ticket10751/trac_10751_fix.patch) by @jdemeyer created at 2011-03-08 10:53:31

Looks good to me.



---

archive/issue_comments_112211.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-08T10:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112211",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_027702.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-08T21:47:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10688#event-27702"
}
```



---

archive/issue_comments_112212.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-03-08T21:47:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10688",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10688#issuecomment-112212",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
