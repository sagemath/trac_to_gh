# Issue 26569: Memory leak _is_relaxation()

archive/issues_026569.json:
```json
{
    "body": "`src/sage/matroids/basis_matroid.pyx` has `_is_relaxation()` with `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`. Try this:\n\n\n```\nfrom sage.matroids.advanced import *\nimport gc\n\ni = 0\nwhile True:\n    if i%1000==0: print get_memory_usage()\n    i += 1\n    M = BasisMatroid(matroids.named_matroids.NonFano())\n    N = BasisMatroid(matroids.named_matroids.Fano())\n    m = {e:e for e in M.groundset()}\n    M._is_relaxation(N, m)\n    N._is_relaxation(M, m)\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/26806\n\n",
    "created_at": "2018-12-03T19:49:05Z",
    "labels": [
        "component: memleak",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Memory leak _is_relaxation()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26569",
    "user": "https://github.com/jm58660"
}
```
`src/sage/matroids/basis_matroid.pyx` has `_is_relaxation()` with `bitset_init` for `bb_comp` and `b2`, but no corresponding `bitset_free`. Try this:


```
from sage.matroids.advanced import *
import gc

i = 0
while True:
    if i%1000==0: print get_memory_usage()
    i += 1
    M = BasisMatroid(matroids.named_matroids.NonFano())
    N = BasisMatroid(matroids.named_matroids.Fano())
    m = {e:e for e in M.groundset()}
    M._is_relaxation(N, m)
    N._is_relaxation(M, m)
```


Issue created by migration from https://trac.sagemath.org/ticket/26806





---

archive/issue_comments_373109.json:
```json
{
    "body": "this was easy",
    "created_at": "2018-12-04T09:45:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26569",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26569#issuecomment-373109",
    "user": "https://github.com/dimpase"
}
```

this was easy



---

archive/issue_comments_373110.json:
```json
{
    "body": "Thanks. Please fill author name and put to needs_review.\n\nIf this was too easy, see `psi(0.5)` at #19363...",
    "created_at": "2018-12-04T09:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26569",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26569#issuecomment-373110",
    "user": "https://github.com/jm58660"
}
```

Thanks. Please fill author name and put to needs_review.

If this was too easy, see `psi(0.5)` at #19363...



---

archive/issue_comments_373111.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-12-04T10:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26569",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26569#issuecomment-373111",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_373112.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-12-04T10:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26569",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26569#issuecomment-373112",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_373113.json:
```json
{
    "body": "Thanks.",
    "created_at": "2018-12-04T10:31:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26569",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26569#issuecomment-373113",
    "user": "https://github.com/jm58660"
}
```

Thanks.



---

archive/issue_comments_373114.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-12-07T12:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26569",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26569#issuecomment-373114",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
