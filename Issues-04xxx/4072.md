# Issue 4072: Fix issue in trait_names in the sage0 interface

archive/issues_004072.json:
```json
{
    "body": "\n```\nFile \"/Users/mhansen/sage-3.1.2.rc0/tmp/sage0.py\", line 164:\n    sage: t = sage0.trait_names()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mhansen/sage-3.1.2.rc0/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[2]>\", line 1, in <module>\n        t = sage0.trait_names()###line 164:\n    sage: t = sage0.trait_names()\n      File \"/Users/mhansen/sage-3.1.2.rc0/local/lib/python2.5/site-packages/sage/interfaces/sage0.py\", line 171, in trait_names\n        return eval(self.eval('globals().keys()'))\n      File \"<string>\", line 408\n         'cosh',\n^              \n     SyntaxError: invalid syntax\n**********************************************************************\nFile \"/Users/mhansen/sage-3.1.2.rc0/tmp/sage0.py\", line 165:\n    sage: len(t) > 100\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mhansen/sage-3.1.2.rc0/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[3]>\", line 1, in <module>\n        len(t) > Integer(100)###line 165:\n    sage: len(t) > 100\n    NameError: name 't' is not defined\n**********************************************************************\nFile \"/Users/mhansen/sage-3.1.2.rc0/tmp/sage0.py\", line 167:\n    sage: 'gcd' in t\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/mhansen/sage-3.1.2.rc0/local/lib/python2.5/doctest.py\", line 1228, in __run\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[4]>\", line 1, in <module>\n        'gcd' in t###line 167:\n    sage: 'gcd' in t\n    NameError: name 't' is not defined\n**********************************************************************\n1 items had failures:\n   3 of   5 in __main__.example_4\n***Test Failed*** 3 failures.\nFor whitespace errors, see the file /Users/mhansen/sage-3.1.2.rc0/tmp/.doctest_sage0.py\n         [81.0 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n```\n\n**Assignee:** @mwhansen\n\nIssue created by migration from https://trac.sagemath.org/ticket/4072\n\n",
    "closed_at": "2008-09-07T23:06:08Z",
    "created_at": "2008-09-07T18:23:43Z",
    "labels": [
        "component: interfaces",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.1.2",
    "title": "Fix issue in trait_names in the sage0 interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/4072",
    "user": "https://github.com/mwhansen"
}
```

```
File "/Users/mhansen/sage-3.1.2.rc0/tmp/sage0.py", line 164:
    sage: t = sage0.trait_names()
Exception raised:
    Traceback (most recent call last):
      File "/Users/mhansen/sage-3.1.2.rc0/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[2]>", line 1, in <module>
        t = sage0.trait_names()###line 164:
    sage: t = sage0.trait_names()
      File "/Users/mhansen/sage-3.1.2.rc0/local/lib/python2.5/site-packages/sage/interfaces/sage0.py", line 171, in trait_names
        return eval(self.eval('globals().keys()'))
      File "<string>", line 408
         'cosh',
^              
     SyntaxError: invalid syntax
**********************************************************************
File "/Users/mhansen/sage-3.1.2.rc0/tmp/sage0.py", line 165:
    sage: len(t) > 100
Exception raised:
    Traceback (most recent call last):
      File "/Users/mhansen/sage-3.1.2.rc0/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[3]>", line 1, in <module>
        len(t) > Integer(100)###line 165:
    sage: len(t) > 100
    NameError: name 't' is not defined
**********************************************************************
File "/Users/mhansen/sage-3.1.2.rc0/tmp/sage0.py", line 167:
    sage: 'gcd' in t
Exception raised:
    Traceback (most recent call last):
      File "/Users/mhansen/sage-3.1.2.rc0/local/lib/python2.5/doctest.py", line 1228, in __run
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[4]>", line 1, in <module>
        'gcd' in t###line 167:
    sage: 'gcd' in t
    NameError: name 't' is not defined
**********************************************************************
1 items had failures:
   3 of   5 in __main__.example_4
***Test Failed*** 3 failures.
For whitespace errors, see the file /Users/mhansen/sage-3.1.2.rc0/tmp/.doctest_sage0.py
         [81.0 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:

```

**Assignee:** @mwhansen

Issue created by migration from https://trac.sagemath.org/ticket/4072





---

archive/attachments_004300.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_4072.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket4072/trac_4072.patch",
    "created_at": "2008-09-07T18:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/mwhansen"
}
```



---

archive/issue_comments_030367.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2008-09-07T18:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4072#issuecomment-30367",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:1'></a>




---

archive/issue_comments_030368.json:
```json
{
    "body": "**Changing assignee** from @williamstein to @mwhansen.",
    "created_at": "2008-09-07T18:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4072#issuecomment-30368",
    "user": "https://github.com/mwhansen"
}
```

**Changing assignee** from @williamstein to @mwhansen.



---

archive/issue_comments_030369.json:
```json
{
    "body": "**Changing status** from new to assigned.",
    "created_at": "2008-09-07T18:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4072#issuecomment-30369",
    "user": "https://github.com/mwhansen"
}
```

**Changing status** from new to assigned.



---

archive/issue_comments_030370.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2008-09-07T18:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4072#issuecomment-30370",
    "user": "https://github.com/mwhansen"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_030371.json:
```json
{
    "body": "<a id='comment:2'></a>\nI seem to have another (unrelated?) problem which isn't fixed in rc0 + this patch:\n\n```\nsage -t  devel/sage/sage/interfaces/sage0.py                **********************************************************************\nFile \"/usr/local/sage-3.1.2.rc0/tmp/sage0.py\", line 276:\n    sage: sage0.eval('2+2')\nExpected:\n    '4'\nGot:\n    '\\x1b[0;31m\\x1b[0m4'\n**********************************************************************\nFile \"/usr/local/sage-3.1.2.rc0/tmp/sage0.py\", line 317:\n    sage: sage0.get('x')\nExpected:\n    \"...NameError: name 'x' is not defined\"\nGot:\n    \"\\x1b[0;31m---------------------------------------------------------------------------\\x1b[0m\\n\\x1b[0;31mNameError\\x1b[0m                                 Traceback (most recent call last)\\n\\n\\x1b[0;32m/usr/local/sage-3.1.2.rc0/data/extcode/sage/<ipython console>\\x1b[0m in \\x1b[0;36m<module>\\x1b[0;34m()\\x1b[0m\\n\\n\\x1b[0;31mNameError\\x1b[0m: name 'x' is not defined\"\n**********************************************************************\nFile \"/usr/local/sage-3.1.2.rc0/tmp/sage0.py\", line 326:\n    sage: sage0._contains('2', 'QQ')\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"/usr/local/sage-3.1.2.rc0/tmp/sage0.py\", line 432:\n    sage: sage0(4).gcd\nExpected:\n    <built-in method gcd of sage.rings.integer.Integer object at 0x...>\nGot:\n    <built-in method gcd of sage.rings.integer.Integer object at 0x33f2d80>\n**********************************************************************\nFile \"/usr/local/sage-3.1.2.rc0/tmp/sage0.py\", line 177:\n    sage: s.eval('2+2')\nExpected:\n    '4'\nGot:\n    '\\x1b[0;31m\\x1b[0m4'\n**********************************************************************\n5 items had failures:\n   1 of   3 in __main__.example_10\n   1 of   6 in __main__.example_13\n   1 of   3 in __main__.example_14\n   1 of   3 in __main__.example_22\n   1 of   5 in __main__.example_5\n***Test Failed*** 5 failures.\nFor whitespace errors, see the file /usr/local/sage-3.1.2.rc0/tmp/.doctest_sage0.py\n         [8.4 s]\nexit code: 1024\n\n----------------------------------------------------------------------\nThe following tests failed:\n\n\n        sage -t  devel/sage/sage/interfaces/sage0.py\n```",
    "created_at": "2008-09-07T19:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4072#issuecomment-30371",
    "user": "https://github.com/malb"
}
```

<a id='comment:2'></a>
I seem to have another (unrelated?) problem which isn't fixed in rc0 + this patch:

```
sage -t  devel/sage/sage/interfaces/sage0.py                **********************************************************************
File "/usr/local/sage-3.1.2.rc0/tmp/sage0.py", line 276:
    sage: sage0.eval('2+2')
Expected:
    '4'
Got:
    '\x1b[0;31m\x1b[0m4'
**********************************************************************
File "/usr/local/sage-3.1.2.rc0/tmp/sage0.py", line 317:
    sage: sage0.get('x')
Expected:
    "...NameError: name 'x' is not defined"
Got:
    "\x1b[0;31m---------------------------------------------------------------------------\x1b[0m\n\x1b[0;31mNameError\x1b[0m                                 Traceback (most recent call last)\n\n\x1b[0;32m/usr/local/sage-3.1.2.rc0/data/extcode/sage/<ipython console>\x1b[0m in \x1b[0;36m<module>\x1b[0;34m()\x1b[0m\n\n\x1b[0;31mNameError\x1b[0m: name 'x' is not defined"
**********************************************************************
File "/usr/local/sage-3.1.2.rc0/tmp/sage0.py", line 326:
    sage: sage0._contains('2', 'QQ')
Expected:
    True
Got:
    False
**********************************************************************
File "/usr/local/sage-3.1.2.rc0/tmp/sage0.py", line 432:
    sage: sage0(4).gcd
Expected:
    <built-in method gcd of sage.rings.integer.Integer object at 0x...>
Got:
    <built-in method gcd of sage.rings.integer.Integer object at 0x33f2d80>
**********************************************************************
File "/usr/local/sage-3.1.2.rc0/tmp/sage0.py", line 177:
    sage: s.eval('2+2')
Expected:
    '4'
Got:
    '\x1b[0;31m\x1b[0m4'
**********************************************************************
5 items had failures:
   1 of   3 in __main__.example_10
   1 of   6 in __main__.example_13
   1 of   3 in __main__.example_14
   1 of   3 in __main__.example_22
   1 of   5 in __main__.example_5
***Test Failed*** 5 failures.
For whitespace errors, see the file /usr/local/sage-3.1.2.rc0/tmp/.doctest_sage0.py
         [8.4 s]
exit code: 1024

----------------------------------------------------------------------
The following tests failed:


        sage -t  devel/sage/sage/interfaces/sage0.py
```



---

archive/issue_comments_030372.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2008-09-07T19:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4072#issuecomment-30372",
    "user": "https://github.com/malb"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_030373.json:
```json
{
    "body": "<a id='comment:3'></a>\n\n```\n[20:02] <mabshoff> malb: The failure you are seeing with http://trac.sagemath.org/sage_trac/ticket/4072 is related to ipython and its color handling on the shell.\n```\n\nSo I disabled colors in iPython and all is good.",
    "created_at": "2008-09-07T19:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4072#issuecomment-30373",
    "user": "https://github.com/malb"
}
```

<a id='comment:3'></a>

```
[20:02] <mabshoff> malb: The failure you are seeing with http://trac.sagemath.org/sage_trac/ticket/4072 is related to ipython and its color handling on the shell.
```

So I disabled colors in iPython and all is good.



---

archive/issue_comments_030374.json:
```json
{
    "body": "<a id='comment:4'></a>\nMerged in Sage 3.1.2.rc1",
    "created_at": "2008-09-07T23:06:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4072#issuecomment-30374",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:4'></a>
Merged in Sage 3.1.2.rc1



---

archive/issue_events_011813.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-09-07T23:06:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/4072",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4072#event-11813"
}
```
