# Issue 4327: Refactor and extend root systems plots

archive/issues_004327.json:
```json
{
    "assignees": [
        "https://github.com/mwhansen"
    ],
    "body": "The attached patch refactors in depth the root sytem plotting facilities of Sage.\nIn particular it contains all the features provided in MuPAD-Combinat and many more.\n\nSome of those features came up during discussions with Reda Chaibi, Arthur Lubovski and Christopher Hanusa. Thanks to them!\n\nSee: http://wiki.sagemath.org/combinat/CoolPictures?action=AttachFile&do=get&target=root-system-plots.pdf for a (slightly outdated) version of the enclosed tutorial with all the pictures shown. \n\nDepends on #14175\nDepends on #14176\nDepends on #14177\nDepends on #2023\n\nCC:  @sagetrac-sage-combinat @sagetrac-alubovsky\n\nReviewer: **Nicolas M. Thi\u00e9ry, Nicolas Borie, Travis Scrimshaw**\n\nAuthor: **Nicolas Borie, Nicolas M. Thi\u00e9ry**\n\nMerged: **sage-5.10.beta4**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4327_\n\n",
    "closed_at": "2013-05-17T06:33:19Z",
    "created_at": "2008-10-20T08:40:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.10",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Refactor and extend root systems plots",
    "type": "issue",
    "updated_at": "2013-05-25T10:57:10Z",
    "url": "https://github.com/sagemath/sage/issues/4327",
    "user": "https://github.com/nthiery"
}
```
The attached patch refactors in depth the root sytem plotting facilities of Sage.
In particular it contains all the features provided in MuPAD-Combinat and many more.

Some of those features came up during discussions with Reda Chaibi, Arthur Lubovski and Christopher Hanusa. Thanks to them!

See: http://wiki.sagemath.org/combinat/CoolPictures?action=AttachFile&do=get&target=root-system-plots.pdf for a (slightly outdated) version of the enclosed tutorial with all the pictures shown. 

Depends on #14175
Depends on #14176
Depends on #14177
Depends on #2023

CC:  @sagetrac-sage-combinat @sagetrac-alubovsky

Reviewer: **Nicolas M. Thiéry, Nicolas Borie, Travis Scrimshaw**

Author: **Nicolas Borie, Nicolas M. Thiéry**

Merged: **sage-5.10.beta4**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/4327_





---

archive/issue_events_048338.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2008-10-20T08:40:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "milestone_number": null,
    "milestone_title": "sage-5.10",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48338"
}
```



---

archive/issue_events_048339.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2008-10-20T08:40:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48339"
}
```



---

archive/issue_events_048340.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2008-10-20T08:40:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48340"
}
```



---

archive/issue_events_048341.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2008-10-20T08:40:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48341"
}
```



---

archive/issue_events_048342.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-10-20T08:40:33Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "subject": "https://github.com/nthiery",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48342"
}
```



---

archive/issue_comments_024933.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI find this ticket is completely integrated inside #4326\n\nI remember that i did this job. So feel free to merge/destroy/erase this ticket. I don't know the current way to dealt with such ticket...",
    "created_at": "2009-07-29T08:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24933",
    "user": "https://github.com/sagetrac-nborie"
}
```

<div id="comment:2" align="right">comment:2</div>

I find this ticket is completely integrated inside #4326

I remember that i did this job. So feel free to merge/destroy/erase this ticket. I don't know the current way to dealt with such ticket...



---

archive/issue_comments_024934.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nActually, there is still room for improvement to the current plots. So let's keep this open. I'll just update the description.",
    "created_at": "2009-07-30T13:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24934",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:3" align="right">comment:3</div>

Actually, there is still room for improvement to the current plots. So let's keep this open. I'll just update the description.



---

archive/issue_events_048343.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2009-07-30T13:45:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "title_is": "Improve root systems plots",
    "title_was": "Root systems plots",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48343"
}
```



---

archive/issue_comments_024935.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1 @@\n-Port from MuPAD-Combinat the plotting facilities for (affine) root systems.\n-\n-This will require in particular the port of:\n-- row/column annihilator\n-- a,acheck,c coeffs\n-- translation factors\n+Finish to port from MuPAD-Combinat the plotting facilities for (affine) root systems (see #4326 for a first implementation)\n``````\n",
    "created_at": "2009-07-30T13:45:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24935",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1 @@
-Port from MuPAD-Combinat the plotting facilities for (affine) root systems.
-
-This will require in particular the port of:
-- row/column annihilator
-- a,acheck,c coeffs
-- translation factors
+Finish to port from MuPAD-Combinat the plotting facilities for (affine) root systems (see #4326 for a first implementation)
``````




---

archive/issue_comments_024936.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHello,\n\nHere is a patch which realize the  porting of what was done in MuPAD... I tried to do my best but this patch really need a strong English language review. For anybody interssinting in reviewing, commenting, or anything... here are some pointers :\n\nMuPAD example :\nhttp://wstein.org/home/wstein/www/home/nthiery/2008-03-01-RootSystemPlots.html\n\nSage-support discussion :\nhttps://groups.google.com/forum/?hl=fr&fromgroups=#!topic/sage-support/fRTEE_IECzU",
    "created_at": "2012-09-13T12:30:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24936",
    "user": "https://github.com/sagetrac-nborie"
}
```

<div id="comment:4" align="right">comment:4</div>

Hello,

Here is a patch which realize the  porting of what was done in MuPAD... I tried to do my best but this patch really need a strong English language review. For anybody interssinting in reviewing, commenting, or anything... here are some pointers :

MuPAD example :
http://wstein.org/home/wstein/www/home/nthiery/2008-03-01-RootSystemPlots.html

Sage-support discussion :
https://groups.google.com/forum/?hl=fr&fromgroups=#!topic/sage-support/fRTEE_IECzU



---

archive/issue_comments_024937.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHellooooooooooo !!\n\nNicolas M. Thi\u00e9ry : that's the ticket that should have been set to `needs_review` ages ago and never was. It would be nice to have this into Sage, if only to be able to print beautifu Sage-combinat posters with fancy pictures inside.\n\nNathann",
    "created_at": "2013-01-21T14:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24937",
    "user": "https://github.com/nathanncohen"
}
```

<div id="comment:5" align="right">comment:5</div>

Hellooooooooooo !!

Nicolas M. Thiéry : that's the ticket that should have been set to `needs_review` ages ago and never was. It would be nice to have this into Sage, if only to be able to print beautifu Sage-combinat posters with fancy pictures inside.

Nathann



---

archive/issue_events_048344.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2013-01-21T14:02:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48344"
}
```



---

archive/issue_comments_024938.json:
```json
{
    "body": "Author: **Nicolas Borie, Nicolas M. Thi\u00e9ry**",
    "created_at": "2013-02-25T01:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24938",
    "user": "https://github.com/nthiery"
}
```

Author: **Nicolas Borie, Nicolas M. Thiéry**



---

archive/issue_comments_024939.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI'll upload a (quite heavily) refactored patch shortly.",
    "created_at": "2013-02-25T01:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24939",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:6" align="right">comment:6</div>

I'll upload a (quite heavily) refactored patch shortly.



---

archive/issue_events_048345.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-02-25T01:37:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48345"
}
```



---

archive/issue_events_048346.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-02-25T01:37:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48346"
}
```



---

archive/issue_comments_024940.json:
```json
{
    "body": "Dependencies: **#14175, #14176, #14177**",
    "created_at": "2013-02-25T01:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24940",
    "user": "https://github.com/nthiery"
}
```

Dependencies: **#14175, #14176, #14177**



---

archive/issue_comments_024941.json:
```json
{
    "body": "Reviewer: **Nicolas M. Thi\u00e9ry, Nicolas Borie**",
    "created_at": "2013-02-25T01:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24941",
    "user": "https://github.com/nthiery"
}
```

Reviewer: **Nicolas M. Thiéry, Nicolas Borie**



---

archive/issue_comments_024942.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n-Finish to port from MuPAD-Combinat the plotting facilities for (affine) root systems (see #4326 for a first implementation)\n+The attached patch refactors in depth the root sytem plotting facilities of Sage.\n+In particular it contains all the features provided in MuPAD-Combinat and many more.\n+\n+See: http://wiki.sagemath.org/combinat/CoolPictures?action=AttachFile&do=get&target=root-system-plots.pdf for a (slightly outdated) version of the enclosed tutorial with all the pictures shown. \n``````\n",
    "created_at": "2013-03-04T03:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24942",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
-Finish to port from MuPAD-Combinat the plotting facilities for (affine) root systems (see #4326 for a first implementation)
+The attached patch refactors in depth the root sytem plotting facilities of Sage.
+In particular it contains all the features provided in MuPAD-Combinat and many more.
+
+See: http://wiki.sagemath.org/combinat/CoolPictures?action=AttachFile&do=get&target=root-system-plots.pdf for a (slightly outdated) version of the enclosed tutorial with all the pictures shown. 
``````




---

archive/issue_events_048347.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-03-04T03:50:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "title_is": "Refactor and extend root systems plots",
    "title_was": "Improve root systems plots",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48347"
}
```



---

archive/issue_events_048348.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-03-04T03:50:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48348"
}
```



---

archive/issue_events_048349.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-03-04T03:50:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48349"
}
```



---

archive/issue_comments_024943.json:
```json
{
    "body": "Work Issues: **lazy import sage.combinat.root_system.plot**",
    "created_at": "2013-03-05T05:32:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24943",
    "user": "https://github.com/nthiery"
}
```

Work Issues: **lazy import sage.combinat.root_system.plot**



---

archive/issue_comments_024944.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSo, the test pass, but the startup module complains about the new module that is imported on startup. I'll try with a lazy import tomorrow. I leave it as needs review, as the review of all the rest can continue!",
    "created_at": "2013-03-05T05:32:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24944",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:8" align="right">comment:8</div>

So, the test pass, but the startup module complains about the new module that is imported on startup. I'll try with a lazy import tomorrow. I leave it as needs review, as the review of all the rest can continue!



---

archive/issue_comments_024945.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@nthiery](#comment%3A8):\n> So, the test pass, but the startup module complains about the new module that is imported on startup. I'll try with a lazy import tomorrow. I leave it as needs review, as the review of all the rest can continue!\n\nHmm, I just had a look, but am not sure how to handle this. Lazy importing works just fine for the code, but then:\n\n```\n    sage: sage.combinat.root_system.plot?\n```\n\nfails, whereas I think we want to support this natural way to access\nthis tutorial.\n\nThe seemingly natural solution would be to lazy import the full module. However:\n\n```\nsage: sage.misc.lazy_import.lazy_import('sage.combinat.root_system', 'plot')\nsage: type(plot)\nsage.misc.lazy_import.LazyImport\nsage: plot\n/opt/sage/sage : ligne 135 :  6989 Erreur de segmentation  (core dumped) \"$SAGE_ROOT/spkg/bin/sage\" \"$@\"\nProcess SAGE exited abnormally with code 139\n```\n\nI'll post on Sage-devel on this topic. In the mean time the rest of\nthe review can continue!\n\nIf we can't get a good solution shortly, I am at this point in favor\nof sticking to a non lazy import in order to allow for accessing the\ntutorial as above, even if the price is to import (yet another) new\nmodule in Sage.\n\nCheers,\n                         Nicolas",
    "created_at": "2013-03-06T03:22:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24945",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@nthiery](#comment%3A8):
> So, the test pass, but the startup module complains about the new module that is imported on startup. I'll try with a lazy import tomorrow. I leave it as needs review, as the review of all the rest can continue!

Hmm, I just had a look, but am not sure how to handle this. Lazy importing works just fine for the code, but then:

```
    sage: sage.combinat.root_system.plot?
```

fails, whereas I think we want to support this natural way to access
this tutorial.

The seemingly natural solution would be to lazy import the full module. However:

```
sage: sage.misc.lazy_import.lazy_import('sage.combinat.root_system', 'plot')
sage: type(plot)
sage.misc.lazy_import.LazyImport
sage: plot
/opt/sage/sage : ligne 135 :  6989 Erreur de segmentation  (core dumped) "$SAGE_ROOT/spkg/bin/sage" "$@"
Process SAGE exited abnormally with code 139
```

I'll post on Sage-devel on this topic. In the mean time the rest of
the review can continue!

If we can't get a good solution shortly, I am at this point in favor
of sticking to a non lazy import in order to allow for accessing the
tutorial as above, even if the price is to import (yet another) new
module in Sage.

Cheers,
                         Nicolas



---

archive/issue_comments_024946.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe updated patch implements wireframe drawing for 3D alcoves, and specifying a color as None to disable certain pieces. It also fixes a couple typos here and there in the doc.",
    "created_at": "2013-03-11T03:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24946",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:11" align="right">comment:11</div>

The updated patch implements wireframe drawing for 3D alcoves, and specifying a color as None to disable certain pieces. It also fixes a couple typos here and there in the doc.



---

archive/issue_comments_024947.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHey Nicolas<sup>2</sup>,\n\nDoes this conflict with #2023, and if so, which patch do you want to have the dependency?\n\nThanks,\n\nTravis",
    "created_at": "2013-04-13T20:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24947",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:12" align="right">comment:12</div>

Hey Nicolas<sup>2</sup>,

Does this conflict with #2023, and if so, which patch do you want to have the dependency?

Thanks,

Travis



---

archive/issue_comments_024948.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nIt could possibly conflict. Both patches should get soon into Sage, and I already had a good look at #2023. So once we have had that little discussion with Dan, we should just get it in. And then #4327 which is already based on it anyway.",
    "created_at": "2013-04-13T20:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24948",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:13" align="right">comment:13</div>

It could possibly conflict. Both patches should get soon into Sage, and I already had a good look at #2023. So once we have had that little discussion with Dan, we should just get it in. And then #4327 which is already based on it anyway.



---

archive/issue_comments_024949.json:
```json
{
    "body": "Changed dependencies from **#14175, #14176, #14177** to **#14175, #14176, #14177, #2023**",
    "created_at": "2013-04-13T20:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24949",
    "user": "https://github.com/nthiery"
}
```

Changed dependencies from **#14175, #14176, #14177** to **#14175, #14176, #14177, #2023**



---

archive/issue_comments_024950.json:
```json
{
    "body": "Changed work issues from **lazy import sage.combinat.root_system.plot** to none",
    "created_at": "2013-05-07T20:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24950",
    "user": "https://github.com/nthiery"
}
```

Changed work issues from **lazy import sage.combinat.root_system.plot** to none



---

archive/issue_comments_024951.json:
```json
{
    "body": "Changed reviewer from **Nicolas M. Thi\u00e9ry, Nicolas Borie** to **Nicolas M. Thi\u00e9ry, Nicolas Borie, Travis Scrimshaw**",
    "created_at": "2013-05-07T20:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24951",
    "user": "https://github.com/nthiery"
}
```

Changed reviewer from **Nicolas M. Thiéry, Nicolas Borie** to **Nicolas M. Thiéry, Nicolas Borie, Travis Scrimshaw**



---

archive/issue_comments_024952.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nFolded in Travis' reviewers patch and reuploaded.",
    "created_at": "2013-05-07T20:12:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24952",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:16" align="right">comment:16</div>

Folded in Travis' reviewers patch and reuploaded.



---

archive/issue_comments_024953.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n The attached patch refactors in depth the root sytem plotting facilities of Sage.\n In particular it contains all the features provided in MuPAD-Combinat and many more.\n \n+Some of those features came up during discussions with Reda Chaibi, Arthur Lubovski and Christopher Hanusa. Thanks to them!\n+\n See: http://wiki.sagemath.org/combinat/CoolPictures?action=AttachFile&do=get&target=root-system-plots.pdf for a (slightly outdated) version of the enclosed tutorial with all the pictures shown. \n``````\n",
    "created_at": "2013-05-07T20:21:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24953",
    "user": "https://github.com/nthiery"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 The attached patch refactors in depth the root sytem plotting facilities of Sage.
 In particular it contains all the features provided in MuPAD-Combinat and many more.
 
+Some of those features came up during discussions with Reda Chaibi, Arthur Lubovski and Christopher Hanusa. Thanks to them!
+
 See: http://wiki.sagemath.org/combinat/CoolPictures?action=AttachFile&do=get&target=root-system-plots.pdf for a (slightly outdated) version of the enclosed tutorial with all the pictures shown. 
``````




---

archive/issue_comments_024954.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nLooks good. Thank you.",
    "created_at": "2013-05-07T20:41:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24954",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Looks good. Thank you.



---

archive/issue_events_048350.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-07T20:41:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48350"
}
```



---

archive/issue_events_048351.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-07T20:41:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48351"
}
```



---

archive/issue_events_048352.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-08T18:04:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48352"
}
```



---

archive/issue_events_048353.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-08T18:04:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48353"
}
```



---

archive/issue_comments_024955.json:
```json
{
    "body": "Work Issues: **minor long test failure**",
    "created_at": "2013-05-08T18:04:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24955",
    "user": "https://github.com/nthiery"
}
```

Work Issues: **minor long test failure**



---

archive/issue_comments_024956.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nUploaded a new version (double checked by Travis) fixing one of the long doctest failure on 5.10. It was caused by the new matplotlib that emits a warning for arrows of length 0:\n\n```\nsage: arrow([1,1],[1,1])\n/home/nthiery/sage-5.10.beta1/local/lib/python2.7/site-packages/matplotlib/patches.py:3039: RuntimeWarning: invalid value encountered in double_scalars\n  ddx = pad_projected * dx / cp_distance\n/home/nthiery/sage-5.10.beta1/local/lib/python2.7/site-packages/matplotlib/patches.py:3040: RuntimeWarning: invalid value encountered in double_scalars\n  ddy = pad_projected * dy / cp_distance\n/home/nthiery/sage-5.10.beta1/local/lib/python2.7/site-packages/matplotlib/patches.py:3043: RuntimeWarning: invalid value encountered in double_scalars\n  dx = dx / cp_distance * head_dist\n/home/nthiery/sage-5.10.beta1/local/lib/python2.7/site-packages/matplotlib/patches.py:3044: RuntimeWarning: invalid value encountered in double_scalars\n  dy = dy / cp_distance * head_dist\n```\n\nThe other failure is due to some doctests being ignored. See:\n\n https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/4m1ydGdiGf8",
    "created_at": "2013-05-08T19:34:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24956",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:20" align="right">comment:20</div>

Uploaded a new version (double checked by Travis) fixing one of the long doctest failure on 5.10. It was caused by the new matplotlib that emits a warning for arrows of length 0:

```
sage: arrow([1,1],[1,1])
/home/nthiery/sage-5.10.beta1/local/lib/python2.7/site-packages/matplotlib/patches.py:3039: RuntimeWarning: invalid value encountered in double_scalars
  ddx = pad_projected * dx / cp_distance
/home/nthiery/sage-5.10.beta1/local/lib/python2.7/site-packages/matplotlib/patches.py:3040: RuntimeWarning: invalid value encountered in double_scalars
  ddy = pad_projected * dy / cp_distance
/home/nthiery/sage-5.10.beta1/local/lib/python2.7/site-packages/matplotlib/patches.py:3043: RuntimeWarning: invalid value encountered in double_scalars
  dx = dx / cp_distance * head_dist
/home/nthiery/sage-5.10.beta1/local/lib/python2.7/site-packages/matplotlib/patches.py:3044: RuntimeWarning: invalid value encountered in double_scalars
  dy = dy / cp_distance * head_dist
```

The other failure is due to some doctests being ignored. See:

 https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/4m1ydGdiGf8



---

archive/issue_comments_024957.json:
```json
{
    "body": "Changed work issues from **minor long test failure** to none",
    "created_at": "2013-05-09T01:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24957",
    "user": "https://github.com/nthiery"
}
```

Changed work issues from **minor long test failure** to none



---

archive/issue_events_048354.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-09T01:50:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48354"
}
```



---

archive/issue_events_048355.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-09T01:50:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48355"
}
```



---

archive/issue_comments_024958.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nHi Travis,\n\nThe updated patch fixes the doc so that later on doctests won't be\nignored, and update the number of ignored doctests in the mean time.\n\nAll long tests passed.\n\nHere is the metadiff:\n\n```\ndiff --git a/trac_4327-root_system_plot_refactor-nt.patch b/trac_4327-root_system_plot_refactor-nt.patch\n--- a/trac_4327-root_system_plot_refactor-nt.patch\n+++ b/trac_4327-root_system_plot_refactor-nt.patch\n@@ -1,5 +1,5 @@\n # HG changeset patch\n-# Parent aa718acb2dbac8faab463c994aa7f4052a546363\n+# Parent 89d0e0f941ae79ca2d8dd83d3ac6d20a4b82382a\n #4327: Refactor and extend root systems plots\n \n diff --git a/doc/en/reference/combinat/root_systems.rst b/doc/en/reference/combinat/root_systems.rst\n@@ -2569,7 +2569,7 @@ diff --git a/sage/combinat/root_system/t\n  import ambient_space\n  \n  class AmbientSpace(ambient_space.AmbientSpace):\n-@@ -135,13 +136,38 @@ class AmbientSpace(ambient_space.Ambient\n+@@ -135,13 +136,36 @@ class AmbientSpace(ambient_space.Ambient\n          given, returns (k, ... ,k), the k-th power of the\n          determinant.\n  \n@@ -2582,14 +2582,8 @@ diff --git a/sage/combinat/root_system/t\n          \"\"\"\n          return self.sum(self.monomial(j)*k for j in range(self.n))\n  \n-+    \"\"\"\n-+    Use barycentric projection by default\n-+\n-+    .. SEEALSO::\n-+\n-+        - :meth:`sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations._plot_projection`\n-+\n-+    EXAMPLES::\n++    __doc__ += \"\"\"\n++    By default, this ambient space uses the barycentric projection for plotting::\n +\n +        sage: L = RootSystem([\"A\",2]).ambient_space()\n +        sage: e = L.basis()\n@@ -2604,6 +2598,10 @@ diff --git a/sage/combinat/root_system/t\n +        (2, 2, 3, 0)\n +        sage: L._plot_projection(l)\n +        (0, -1121/1189, 7/3)\n++\n++    .. SEEALSO::\n++\n++        - :meth:`sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods._plot_projection`\n +    \"\"\"\n +    _plot_projection = RootLatticeRealizations.ParentMethods.__dict__['_plot_projection_barycentric']\n  \n@@ -2621,18 +2619,12 @@ diff --git a/sage/combinat/root_system/t\n  class AmbientSpace(ambient_space.AmbientSpace):\n      \"\"\"\n      EXAMPLES::\n-@@ -82,6 +82,32 @@ class AmbientSpace(ambient_space.Ambient\n+@@ -82,6 +82,30 @@ class AmbientSpace(ambient_space.Ambient\n          return Family({ 1: self([1,0,-1]),\n                          2: self([2,-1,-1])})\n  \n-+    \"\"\"\n-+    Use barycentric projection by default\n-+\n-+    .. SEEALSO::\n-+\n-+        - :meth:`sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations._plot_projection`\n-+\n-+    EXAMPLES::\n++    __doc__ += \"\"\"\n++    By default, this ambient space uses the barycentric projection for plotting::\n +\n +        sage: L = RootSystem([\"G\",2]).ambient_space()\n +        sage: e = L.basis()\n@@ -2647,6 +2639,10 @@ diff --git a/sage/combinat/root_system/t\n +        (2, 2, 3, 0)\n +        sage: L._plot_projection(l)\n +        (0, -1121/1189, 7/3)\n++\n++    .. SEEALSO::\n++\n++        - :meth:`sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods._plot_projection`\n +    \"\"\"\n +    _plot_projection = RootLatticeRealizations.ParentMethods.__dict__['_plot_projection_barycentric']\n +\n@@ -3011,3 +3007,15 @@ diff --git a/sage/combinat/root_system/w\n -            G.axes(False)\n -            return G\n -\n+diff --git a/sage/doctest/sources.py b/sage/doctest/sources.py\n+--- a/sage/doctest/sources.py\n++++ b/sage/doctest/sources.py\n+@@ -675,6 +675,8 @@ class FileDocTestSource(DocTestSource):\n+             There are 18 tests in sage/combinat/partition.py that are not being run\n+             There are 12 tests in sage/combinat/tableau.py that are not being run\n+             There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run\n++            There are 8 tests in sage/combinat/root_system/type_A.py that are not being run\n++            There are 8 tests in sage/combinat/root_system/type_G.py that are not being run\n+             There are 3 unexpected tests being run in sage/doctest/parsing.py\n+             There are 1 unexpected tests being run in sage/doctest/reporting.py\n+             There are 9 tests in sage/graphs/graph_plot.py that are not being run\n```",
    "created_at": "2013-05-09T01:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24958",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:21" align="right">comment:21</div>

Hi Travis,

The updated patch fixes the doc so that later on doctests won't be
ignored, and update the number of ignored doctests in the mean time.

All long tests passed.

Here is the metadiff:

```
diff --git a/trac_4327-root_system_plot_refactor-nt.patch b/trac_4327-root_system_plot_refactor-nt.patch
--- a/trac_4327-root_system_plot_refactor-nt.patch
+++ b/trac_4327-root_system_plot_refactor-nt.patch
@@ -1,5 +1,5 @@
 # HG changeset patch
-# Parent aa718acb2dbac8faab463c994aa7f4052a546363
+# Parent 89d0e0f941ae79ca2d8dd83d3ac6d20a4b82382a
 #4327: Refactor and extend root systems plots
 
 diff --git a/doc/en/reference/combinat/root_systems.rst b/doc/en/reference/combinat/root_systems.rst
@@ -2569,7 +2569,7 @@ diff --git a/sage/combinat/root_system/t
  import ambient_space
  
  class AmbientSpace(ambient_space.AmbientSpace):
-@@ -135,13 +136,38 @@ class AmbientSpace(ambient_space.Ambient
+@@ -135,13 +136,36 @@ class AmbientSpace(ambient_space.Ambient
          given, returns (k, ... ,k), the k-th power of the
          determinant.
  
@@ -2582,14 +2582,8 @@ diff --git a/sage/combinat/root_system/t
          """
          return self.sum(self.monomial(j)*k for j in range(self.n))
  
-+    """
-+    Use barycentric projection by default
-+
-+    .. SEEALSO::
-+
-+        - :meth:`sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations._plot_projection`
-+
-+    EXAMPLES::
++    __doc__ += """
++    By default, this ambient space uses the barycentric projection for plotting::
 +
 +        sage: L = RootSystem(["A",2]).ambient_space()
 +        sage: e = L.basis()
@@ -2604,6 +2598,10 @@ diff --git a/sage/combinat/root_system/t
 +        (2, 2, 3, 0)
 +        sage: L._plot_projection(l)
 +        (0, -1121/1189, 7/3)
++
++    .. SEEALSO::
++
++        - :meth:`sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods._plot_projection`
 +    """
 +    _plot_projection = RootLatticeRealizations.ParentMethods.__dict__['_plot_projection_barycentric']
  
@@ -2621,18 +2619,12 @@ diff --git a/sage/combinat/root_system/t
  class AmbientSpace(ambient_space.AmbientSpace):
      """
      EXAMPLES::
-@@ -82,6 +82,32 @@ class AmbientSpace(ambient_space.Ambient
+@@ -82,6 +82,30 @@ class AmbientSpace(ambient_space.Ambient
          return Family({ 1: self([1,0,-1]),
                          2: self([2,-1,-1])})
  
-+    """
-+    Use barycentric projection by default
-+
-+    .. SEEALSO::
-+
-+        - :meth:`sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations._plot_projection`
-+
-+    EXAMPLES::
++    __doc__ += """
++    By default, this ambient space uses the barycentric projection for plotting::
 +
 +        sage: L = RootSystem(["G",2]).ambient_space()
 +        sage: e = L.basis()
@@ -2647,6 +2639,10 @@ diff --git a/sage/combinat/root_system/t
 +        (2, 2, 3, 0)
 +        sage: L._plot_projection(l)
 +        (0, -1121/1189, 7/3)
++
++    .. SEEALSO::
++
++        - :meth:`sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods._plot_projection`
 +    """
 +    _plot_projection = RootLatticeRealizations.ParentMethods.__dict__['_plot_projection_barycentric']
 +
@@ -3011,3 +3007,15 @@ diff --git a/sage/combinat/root_system/w
 -            G.axes(False)
 -            return G
 -
+diff --git a/sage/doctest/sources.py b/sage/doctest/sources.py
+--- a/sage/doctest/sources.py
++++ b/sage/doctest/sources.py
+@@ -675,6 +675,8 @@ class FileDocTestSource(DocTestSource):
+             There are 18 tests in sage/combinat/partition.py that are not being run
+             There are 12 tests in sage/combinat/tableau.py that are not being run
+             There are 15 tests in sage/combinat/root_system/cartan_type.py that are not being run
++            There are 8 tests in sage/combinat/root_system/type_A.py that are not being run
++            There are 8 tests in sage/combinat/root_system/type_G.py that are not being run
+             There are 3 unexpected tests being run in sage/doctest/parsing.py
+             There are 1 unexpected tests being run in sage/doctest/reporting.py
+             There are 9 tests in sage/graphs/graph_plot.py that are not being run
```



---

archive/issue_comments_024959.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nLooks good to me. Thanks Nicolas.",
    "created_at": "2013-05-09T14:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24959",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

Looks good to me. Thanks Nicolas.



---

archive/issue_events_048356.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-09T14:45:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48356"
}
```



---

archive/issue_events_048357.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2013-05-09T14:45:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48357"
}
```



---

archive/issue_events_048358.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-13T16:16:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48358"
}
```



---

archive/issue_events_048359.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-13T16:16:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48359"
}
```



---

archive/issue_comments_024960.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe PDF documentation doesn't build:\n\n```\n! Package inputenc Error: Keyboard character used is undefined\n(inputenc)                in inputencoding `utf8x'.\n\nSee the inputenc package documentation for explanation.\nType  H <return>  for immediate help.\n ...\n\nl.96802 ...}1\\PYGZcb{}\\$' at the point (0.0,1.0)]}\n\n?  [54]\n! Emergency stop.\n ...\n\nl.96802 ...}1\\PYGZcb{}\\$' at the point (0.0,1.0)]}\n\n!  ==> Fatal error occurred, no output PDF file produced!\nTranscript written on combinat.log.\n```",
    "created_at": "2013-05-13T16:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24960",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

The PDF documentation doesn't build:

```
! Package inputenc Error: Keyboard character used is undefined
(inputenc)                in inputencoding `utf8x'.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
 ...

l.96802 ...}1\PYGZcb{}\$' at the point (0.0,1.0)]}

?  [54]
! Emergency stop.
 ...

l.96802 ...}1\PYGZcb{}\$' at the point (0.0,1.0)]}

!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on combinat.log.
```



---

archive/issue_comments_024961.json:
```json
{
    "body": "Attachment: **[trac_4327-root_system_plot_refactor-nt.patch.gz](https://github.com/sagemath/sage/files/ticket4327/trac_4327-root_system_plot_refactor-nt.patch.gz)**",
    "created_at": "2013-05-13T20:02:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24961",
    "user": "https://github.com/nthiery"
}
```

Attachment: **[trac_4327-root_system_plot_refactor-nt.patch.gz](https://github.com/sagemath/sage/files/ticket4327/trac_4327-root_system_plot_refactor-nt.patch.gz)**



---

archive/issue_comments_024962.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@jdemeyer](#comment%3A23):\n> The PDF documentation doesn't build:\n> \n> ```\n> ! Package inputenc Error: Keyboard character used is undefined\n> (inputenc)                in inputencoding `utf8x'.\n> ...\n> ```\n\nAh shoot, sorry about that. The docstrings for this method was missing its starting 'r', and which caused a `\\a` in it to be misinterpreted as a non UTF-8 character.\n\nThe newly updated patch fixes this. While I was at it, it fixes half a dozen other missing 'r' in other methods introduced by this patch.\n\nSince the change is trivial, I am allowing myself to put it back to positive review.\n\nFor the record, here is the diff between the two patches:\n\n```\ndiff --git a/trac_4327-root_system_plot_refactor-nt.patch b/trac_4327-root_system_plot_refactor-nt.patch\n--- a/trac_4327-root_system_plot_refactor-nt.patch\n+++ b/trac_4327-root_system_plot_refactor-nt.patch\n@@ -1,5 +1,5 @@\n # HG changeset patch\n-# Parent 89d0e0f941ae79ca2d8dd83d3ac6d20a4b82382a\n+# Parent 75e26170e32bcbb5f78e1784a1df985ecb71e1db\n #4327: Refactor and extend root systems plots\n \n diff --git a/doc/en/reference/combinat/root_systems.rst b/doc/en/reference/combinat/root_systems.rst\n@@ -631,7 +631,7 @@ new file mode 100644\n +lazy_import(\"sage.combinat.root_system.root_lattice_realizations\", \"RootLatticeRealizations\")\n +\n +class PlotOptions:\n-+    \"\"\"\n++    r\"\"\"\n +    A class for plotting options for root lattice realizations.\n +\n +    .. SEEALSO::\n@@ -740,7 +740,7 @@ new file mode 100644\n +\n +    @cached_method\n +    def in_bounding_box(self, x):\n-+        \"\"\"\n++        r\"\"\"\n +        Return whether ``x`` is in the bounding box.\n +\n +        INPUT:\n@@ -763,7 +763,7 @@ new file mode 100644\n +        return self.bounding_box.contains(self.projection(x))\n +\n +    def text(self, label, position):\n-+        \"\"\"\n++        r\"\"\"\n +        Return text widget with label ``label`` at position ``position``\n +\n +        INPUT:\n@@ -851,7 +851,7 @@ new file mode 100644\n +                return self._color(\"other\")\n +\n +    def projection(self, v):\n-+        \"\"\"\n++        r\"\"\"\n +        Return the projection of ``v``.\n +\n +        INPUT:\n@@ -880,7 +880,7 @@ new file mode 100644\n +        return v\n +\n +    def intersection_at_level_1(self, x):\n-+        \"\"\"\n++        r\"\"\"\n +        Return ``x`` scaled at the appropriate level, if level is set;\n +        otherwise return ``x``.\n +\n@@ -912,7 +912,7 @@ new file mode 100644\n +            return x\n +\n +    def empty(self, *args):\n-+        \"\"\"\n++        r\"\"\"\n +        Return an empty plot.\n +\n +        EXAMPLES::\n@@ -1255,7 +1255,7 @@ new file mode 100644\n +\n +@cached_function\n +def barycentric_projection_matrix(n, angle=0):\n-+    \"\"\"\n++    r\"\"\"\n +    Returns a family of `n+1` vectors evenly spaced in a real vector space of dimension `n`\n +\n +    Those vectors are of norm `1`, the scalar product between any two\n@@ -2339,7 +2339,7 @@ diff --git a/sage/combinat/root_system/r\n +\n +\n +        def plot_bounding_box(self, **options):\n-+            \"\"\"\n++            r\"\"\"\n +            Plot the bounding box.\n +\n +            INPUT:\n\n```",
    "created_at": "2013-05-13T20:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24962",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@jdemeyer](#comment%3A23):
> The PDF documentation doesn't build:
> 
> ```
> ! Package inputenc Error: Keyboard character used is undefined
> (inputenc)                in inputencoding `utf8x'.
> ...
> ```

Ah shoot, sorry about that. The docstrings for this method was missing its starting 'r', and which caused a `\a` in it to be misinterpreted as a non UTF-8 character.

The newly updated patch fixes this. While I was at it, it fixes half a dozen other missing 'r' in other methods introduced by this patch.

Since the change is trivial, I am allowing myself to put it back to positive review.

For the record, here is the diff between the two patches:

```
diff --git a/trac_4327-root_system_plot_refactor-nt.patch b/trac_4327-root_system_plot_refactor-nt.patch
--- a/trac_4327-root_system_plot_refactor-nt.patch
+++ b/trac_4327-root_system_plot_refactor-nt.patch
@@ -1,5 +1,5 @@
 # HG changeset patch
-# Parent 89d0e0f941ae79ca2d8dd83d3ac6d20a4b82382a
+# Parent 75e26170e32bcbb5f78e1784a1df985ecb71e1db
 #4327: Refactor and extend root systems plots
 
 diff --git a/doc/en/reference/combinat/root_systems.rst b/doc/en/reference/combinat/root_systems.rst
@@ -631,7 +631,7 @@ new file mode 100644
 +lazy_import("sage.combinat.root_system.root_lattice_realizations", "RootLatticeRealizations")
 +
 +class PlotOptions:
-+    """
++    r"""
 +    A class for plotting options for root lattice realizations.
 +
 +    .. SEEALSO::
@@ -740,7 +740,7 @@ new file mode 100644
 +
 +    @cached_method
 +    def in_bounding_box(self, x):
-+        """
++        r"""
 +        Return whether ``x`` is in the bounding box.
 +
 +        INPUT:
@@ -763,7 +763,7 @@ new file mode 100644
 +        return self.bounding_box.contains(self.projection(x))
 +
 +    def text(self, label, position):
-+        """
++        r"""
 +        Return text widget with label ``label`` at position ``position``
 +
 +        INPUT:
@@ -851,7 +851,7 @@ new file mode 100644
 +                return self._color("other")
 +
 +    def projection(self, v):
-+        """
++        r"""
 +        Return the projection of ``v``.
 +
 +        INPUT:
@@ -880,7 +880,7 @@ new file mode 100644
 +        return v
 +
 +    def intersection_at_level_1(self, x):
-+        """
++        r"""
 +        Return ``x`` scaled at the appropriate level, if level is set;
 +        otherwise return ``x``.
 +
@@ -912,7 +912,7 @@ new file mode 100644
 +            return x
 +
 +    def empty(self, *args):
-+        """
++        r"""
 +        Return an empty plot.
 +
 +        EXAMPLES::
@@ -1255,7 +1255,7 @@ new file mode 100644
 +
 +@cached_function
 +def barycentric_projection_matrix(n, angle=0):
-+    """
++    r"""
 +    Returns a family of `n+1` vectors evenly spaced in a real vector space of dimension `n`
 +
 +    Those vectors are of norm `1`, the scalar product between any two
@@ -2339,7 +2339,7 @@ diff --git a/sage/combinat/root_system/r
 +
 +
 +        def plot_bounding_box(self, **options):
-+            """
++            r"""
 +            Plot the bounding box.
 +
 +            INPUT:

```



---

archive/issue_events_048360.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-13T20:08:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48360"
}
```



---

archive/issue_events_048361.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2013-05-13T20:08:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48361"
}
```



---

archive/issue_comments_024963.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@nthiery](#comment%3A24):\n> Since the change is trivial, I am allowing myself to put it back to positive review.\n\nAssuming that you checked that the PDF documentation does build, that's okay.",
    "created_at": "2013-05-13T20:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24963",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@nthiery](#comment%3A24):
> Since the change is trivial, I am allowing myself to put it back to positive review.

Assuming that you checked that the PDF documentation does build, that's okay.



---

archive/issue_comments_024964.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jdemeyer](#comment%3A26):\n> Assuming that you checked that the PDF documentation does build, that's okay.\n\nYup, I did. Well at least for reference/combinat.",
    "created_at": "2013-05-13T21:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24964",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jdemeyer](#comment%3A26):
> Assuming that you checked that the PDF documentation does build, that's okay.

Yup, I did. Well at least for reference/combinat.



---

archive/issue_events_048362.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-16T06:19:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48362"
}
```



---

archive/issue_events_048363.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-16T06:19:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48363"
}
```



---

archive/issue_comments_024965.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n\n```\nsage -t devel/sage/sage/combinat/root_system/root_lattice_realizations.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/root_lattice_realizations.py\", line 1840, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.Pare\nntMethods.plot_roots\nFailed example:\n    list(RootSystem([\"A\",2]).root_lattice().plot_roots(\"all\"))\nExpected:\n    [Arrow from (0.0,0.0) to (1.0,0.0),\n     Text '$\\alpha_{1}$' at the point (1.05,0.0),\n     Arrow from (0.0,0.0) to (0.0,1.0),\n     Text '$\\alpha_{2}$' at the point (0.0,1.05),\n     Arrow from (0.0,0.0) to (1.0,1.0),\n     Text '$\\alpha_{1} + \\alpha_{2}$' at the point (1.05,1.05),\n     Arrow from (0.0,0.0) to (-1.0,0.0),\n     Text '$\\left(-1\\right)\\alpha_{1}$' at the point (-1.05,0.0),\n     Arrow from (0.0,0.0) to (0.0,-1.0),\n     Text '$\\left(-1\\right)\\alpha_{2}$' at the point (0.0,-1.05),\n     Arrow from (0.0,0.0) to (-1.0,-1.0),\n     Text '$\\left(-1\\right)\\alpha_{1} + \\left(-1\\right)\\alpha_{2}$' at the point (-1.05,-1.05)]\nGot:\n    [Arrow from (0.0,0.0) to (1.0,0.0), Text '$\\alpha_{1}$' at the point (1.05,0.0), Arrow from (0.0,0.0) to (0.0,1.0), Text '$\\alpha_{2}$' at the point (0.0,1.05), Arr\now from (0.0,0.0) to (1.0,1.0), Text '$\\alpha_{1} + \\alpha_{2}$' at the point (1.05,1.05), Arrow from (0.0,0.0) to (-1.0,0.0), Text '$-\\alpha_{1}$' at the point (-1.05,\n0.0), Arrow from (0.0,0.0) to (0.0,-1.0), Text '$-\\alpha_{2}$' at the point (0.0,-1.05), Arrow from (0.0,0.0) to (-1.0,-1.0), Text '$-\\alpha_{1} - \\alpha_{2}$' at the p\noint (-1.05,-1.05)]\n**********************************************************************\n```",
    "created_at": "2013-05-16T06:19:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24965",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>


```
sage -t devel/sage/sage/combinat/root_system/root_lattice_realizations.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/root_lattice_realizations.py", line 1840, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.Pare
ntMethods.plot_roots
Failed example:
    list(RootSystem(["A",2]).root_lattice().plot_roots("all"))
Expected:
    [Arrow from (0.0,0.0) to (1.0,0.0),
     Text '$\alpha_{1}$' at the point (1.05,0.0),
     Arrow from (0.0,0.0) to (0.0,1.0),
     Text '$\alpha_{2}$' at the point (0.0,1.05),
     Arrow from (0.0,0.0) to (1.0,1.0),
     Text '$\alpha_{1} + \alpha_{2}$' at the point (1.05,1.05),
     Arrow from (0.0,0.0) to (-1.0,0.0),
     Text '$\left(-1\right)\alpha_{1}$' at the point (-1.05,0.0),
     Arrow from (0.0,0.0) to (0.0,-1.0),
     Text '$\left(-1\right)\alpha_{2}$' at the point (0.0,-1.05),
     Arrow from (0.0,0.0) to (-1.0,-1.0),
     Text '$\left(-1\right)\alpha_{1} + \left(-1\right)\alpha_{2}$' at the point (-1.05,-1.05)]
Got:
    [Arrow from (0.0,0.0) to (1.0,0.0), Text '$\alpha_{1}$' at the point (1.05,0.0), Arrow from (0.0,0.0) to (0.0,1.0), Text '$\alpha_{2}$' at the point (0.0,1.05), Arr
ow from (0.0,0.0) to (1.0,1.0), Text '$\alpha_{1} + \alpha_{2}$' at the point (1.05,1.05), Arrow from (0.0,0.0) to (-1.0,0.0), Text '$-\alpha_{1}$' at the point (-1.05,
0.0), Arrow from (0.0,0.0) to (0.0,-1.0), Text '$-\alpha_{2}$' at the point (0.0,-1.05), Arrow from (0.0,0.0) to (-1.0,-1.0), Text '$-\alpha_{1} - \alpha_{2}$' at the p
oint (-1.05,-1.05)]
**********************************************************************
```



---

archive/issue_comments_024966.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nNever mind, last doctest failure is because of #13735.",
    "created_at": "2013-05-16T06:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24966",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Never mind, last doctest failure is because of #13735.



---

archive/issue_events_048364.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-16T06:28:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48364"
}
```



---

archive/issue_events_048365.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-16T06:28:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48365"
}
```



---

archive/issue_events_048366.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T06:33:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48366"
}
```



---

archive/issue_events_048367.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-05-17T06:33:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4327#event-48367"
}
```



---

archive/issue_comments_024967.json:
```json
{
    "body": "Merged: **sage-5.10.beta4**",
    "created_at": "2013-05-17T06:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24967",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.10.beta4**



---

archive/issue_comments_024968.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nYippee!\n\nThanks Nicolas, Travis, and everyone who contributed to get this done!",
    "created_at": "2013-05-19T22:16:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24968",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:31" align="right">comment:31</div>

Yippee!

Thanks Nicolas, Travis, and everyone who contributed to get this done!



---

archive/issue_comments_024969.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThe `plot_expose()` function should be a method of plot objects. Its definitely useful outside of root lattices. See #14640",
    "created_at": "2013-05-25T10:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4327#issuecomment-24969",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:32" align="right">comment:32</div>

The `plot_expose()` function should be a method of plot objects. Its definitely useful outside of root lattices. See #14640
