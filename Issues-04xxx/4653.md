# Issue 4653: Merge sage-words code into Sage

archive/issues_004653.json:
```json
{
    "assignees": [
        "https://github.com/saliola"
    ],
    "body": "The sage-word project wants to implement a complete package for word manipulation and combinatorics under Sage. The project maintains a [Google code page](http://code.google.com/p/sage-words).\n\nThe code has already been merged into sage-combinat, and although it needs a bit of work, it is ready to be merged into Sage. (By \"needs a bit of work\", I mean that there are some algorithms that need to be improved, but the code greatly improves the rudimentary functionality that exists in Sage.) The code is well documented, and a worksheet highlighting the features of the code can be found here:\n\n* [Sage worksheet](http://www-igm.univ-mlv.fr/~saliola/maths/talks/slides/SageTalk2/06_Words.sws)\n* [PDF file of worksheet](http://www-igm.univ-mlv.fr/~saliola/maths/talks/slides/SageTalk2/06_Words.pdf)\n\nArnaud Bergeron, Amy Glen, S\u00e9bastien Labb\u00e9, and Franco Saliola all contributed to the project, so they all deserve credit for this patch.\n\nCC:  @saliola @sagetrac-anakha @seblabbe @mwhansen @sagetrac-sage-combinat\n\nKeywords: **sage-combinat**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4653_\n\n",
    "closed_at": "2008-12-17T16:58:05Z",
    "created_at": "2008-11-29T12:45:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.2.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Merge sage-words code into Sage",
    "type": "issue",
    "updated_at": "2008-12-17T16:58:05Z",
    "url": "https://github.com/sagemath/sage/issues/4653",
    "user": "https://github.com/saliola"
}
```
The sage-word project wants to implement a complete package for word manipulation and combinatorics under Sage. The project maintains a [Google code page](http://code.google.com/p/sage-words).

The code has already been merged into sage-combinat, and although it needs a bit of work, it is ready to be merged into Sage. (By "needs a bit of work", I mean that there are some algorithms that need to be improved, but the code greatly improves the rudimentary functionality that exists in Sage.) The code is well documented, and a worksheet highlighting the features of the code can be found here:

* [Sage worksheet](http://www-igm.univ-mlv.fr/~saliola/maths/talks/slides/SageTalk2/06_Words.sws)
* [PDF file of worksheet](http://www-igm.univ-mlv.fr/~saliola/maths/talks/slides/SageTalk2/06_Words.pdf)

Arnaud Bergeron, Amy Glen, Sébastien Labbé, and Franco Saliola all contributed to the project, so they all deserve credit for this patch.

CC:  @saliola @sagetrac-anakha @seblabbe @mwhansen @sagetrac-sage-combinat

Keywords: **sage-combinat**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/4653_





---

archive/issue_events_053423.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2008-11-29T12:45:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "milestone_number": null,
    "milestone_title": "sage-3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53423"
}
```



---

archive/issue_events_053424.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2008-11-29T12:45:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53424"
}
```



---

archive/issue_events_053425.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2008-11-29T12:45:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53425"
}
```



---

archive/issue_events_053426.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2008-11-29T12:45:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53426"
}
```



---

archive/issue_events_053427.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2008-11-29T12:45:28Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "subject": "https://github.com/saliola",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53427"
}
```



---

archive/issue_events_053428.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2008-11-29T12:46:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53428"
}
```



---

archive/issue_events_053429.json:
```json
{
    "actor": "https://github.com/saliola",
    "created_at": "2008-11-29T12:46:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53429"
}
```



---

archive/issue_comments_027816.json:
```json
{
    "body": "Good move saliola! I was going to ask what were the objectives before getting the code into sage. I had one :\n- Get back to the 100% documentation and coverage we had in sage-word google code. In fact, some functions had been added without doc and/or tests while merging the code in sage-combinat.\n- Any other?",
    "created_at": "2008-11-29T15:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27816",
    "user": "https://github.com/seblabbe"
}
```

Good move saliola! I was going to ask what were the objectives before getting the code into sage. I had one :
- Get back to the 100% documentation and coverage we had in sage-word google code. In fact, some functions had been added without doc and/or tests while merging the code in sage-combinat.
- Any other?



---

archive/issue_comments_027817.json:
```json
{
    "body": "Attachment: **[sage_words-4653-final.patch.gz](https://github.com/sagemath/sage/files/ticket4653/sage_words-4653-final.patch.gz)**\n\npatch against 3.2",
    "created_at": "2008-11-29T23:56:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27817",
    "user": "https://github.com/saliola"
}
```

Attachment: **[sage_words-4653-final.patch.gz](https://github.com/sagemath/sage/files/ticket4653/sage_words-4653-final.patch.gz)**

patch against 3.2



---

archive/issue_comments_027818.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n> Good move saliola! I was going to ask what were the objectives before getting the code into sage. I had one :\n> - Get back to the 100% documentation and coverage we had in sage-word google code. In fact, some functions had been added without doc and/or tests while merging the code in sage-combinat.\n\nDone. I added the missing doctests this evening. It is now at 100% again.\n\n>    - Any other?\n\nI think there are a few things that should be done at some point, but they are not \"blockers\". They are mostly issues to polish some of the rough edges.",
    "created_at": "2008-11-30T00:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27818",
    "user": "https://github.com/saliola"
}
```

<div id="comment:3" align="right">comment:3</div>

> Good move saliola! I was going to ask what were the objectives before getting the code into sage. I had one :
> - Get back to the 100% documentation and coverage we had in sage-word google code. In fact, some functions had been added without doc and/or tests while merging the code in sage-combinat.

Done. I added the missing doctests this evening. It is now at 100% again.

>    - Any other?

I think there are a few things that should be done at some point, but they are not "blockers". They are mostly issues to polish some of the rough edges.



---

archive/issue_comments_027819.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHi guys,\n\none issue that might be worth considering now before merging is \"name space pollution\", i.e. there was some discussion at SD 11 that it would be better to have most of the functionality of certain packages like quadratic forms not in the global namespace. I am not sure what the situation with words is (sorry, no time to apply the patch and play :)), but it would be nice if most of the functionality would be in\n\n```\nwords.$FOO\n```\nSooner or later things will start colliding in the global namespace, so the time to fix this would be pre-merge :)\n\nCheers,\n\nMichael",
    "created_at": "2008-11-30T05:52:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27819",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:4" align="right">comment:4</div>

Hi guys,

one issue that might be worth considering now before merging is "name space pollution", i.e. there was some discussion at SD 11 that it would be better to have most of the functionality of certain packages like quadratic forms not in the global namespace. I am not sure what the situation with words is (sorry, no time to apply the patch and play :)), but it would be nice if most of the functionality would be in

```
words.$FOO
```
Sooner or later things will start colliding in the global namespace, so the time to fix this would be pre-merge :)

Cheers,

Michael



---

archive/issue_comments_027820.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHello Michael,\n\nReplying to [@sagetrac-mabshoff](#comment:4):\n> one issue that might be worth considering now before merging is \"name space pollution\", i.e. there was some discussion at SD 11 that it would be better to have most of the functionality of certain packages like quadratic forms not in the global namespace. I am not sure what the situation with words is (sorry, no time to apply the patch and play :)), but it would be nice if most of the functionality would be in\n> \n> ```\n> words.$FOO\n> ```\n\nThe all.py file imports only a few things into the global namespace:\n\n```\nAlphabet\nWord\nWordMorphism\nWordOptions\nWords\nwords\n```\nShould we merge them all into the new \"words\" class? I assume then that a user should be able to do something like the following to load all the commands into the global namespace easily:\n\n```\nfrom words import *\n```\nor \n\n```\nLoadPackage(words)\n```\nIs there a standard way of doing this? I.e. a standard way of naming the class that gets imported as words, a standard way of naming the file that contains this class, etc. I think it would be nice if these are decided upon soon because it would make finding them in the source code easy.\n\nFranco",
    "created_at": "2008-11-30T11:42:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27820",
    "user": "https://github.com/saliola"
}
```

<div id="comment:5" align="right">comment:5</div>

Hello Michael,

Replying to [@sagetrac-mabshoff](#comment:4):
> one issue that might be worth considering now before merging is "name space pollution", i.e. there was some discussion at SD 11 that it would be better to have most of the functionality of certain packages like quadratic forms not in the global namespace. I am not sure what the situation with words is (sorry, no time to apply the patch and play :)), but it would be nice if most of the functionality would be in
> 
> ```
> words.$FOO
> ```

The all.py file imports only a few things into the global namespace:

```
Alphabet
Word
WordMorphism
WordOptions
Words
words
```
Should we merge them all into the new "words" class? I assume then that a user should be able to do something like the following to load all the commands into the global namespace easily:

```
from words import *
```
or 

```
LoadPackage(words)
```
Is there a standard way of doing this? I.e. a standard way of naming the class that gets imported as words, a standard way of naming the file that contains this class, etc. I think it would be nice if these are decided upon soon because it would make finding them in the source code easy.

Franco



---

archive/issue_comments_027821.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@saliola](#comment:5):\n> Hello Michael,\n\nHi Franco,\n\n> The all.py file imports only a few things into the global namespace:\n> Alphabet\n> Word\n> WordMorphism\n> WordOptions\n> Words\n> words\n\nOk, that seems acceptable. But what is the difference between words and Words? I can tell you that there are many people (including William) around in Sage that absolutely dislike case sensitivity behavior changes, i.e. think LinAlg in Maple 10 or so. \n\n> Should we merge them all into the new \"words\" class? I assume then that a user should be able to do something like the following to load all the commands into the global namespace easily\n\nAs mentioned above five symbols in global namespace is fine. There are other subsystems that are much, much worst in this regard and it will take a while to fix those.\n\n> Is there a standard way of doing this? I.e. a standard way of naming the class that gets imported as words, a standard way of naming the file that contains this class, etc. I think it would be nice if these are decided upon soon because it would make finding them in the source code easy.\n\nThere is no standard way AFAIK, but we might want to come up with one as more and more \"libraries\" are becoming part of standard Sage.\n \n> Franco\n\nCheers,\n\nMichael",
    "created_at": "2008-11-30T11:47:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27821",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@saliola](#comment:5):
> Hello Michael,

Hi Franco,

> The all.py file imports only a few things into the global namespace:
> Alphabet
> Word
> WordMorphism
> WordOptions
> Words
> words

Ok, that seems acceptable. But what is the difference between words and Words? I can tell you that there are many people (including William) around in Sage that absolutely dislike case sensitivity behavior changes, i.e. think LinAlg in Maple 10 or so. 

> Should we merge them all into the new "words" class? I assume then that a user should be able to do something like the following to load all the commands into the global namespace easily

As mentioned above five symbols in global namespace is fine. There are other subsystems that are much, much worst in this regard and it will take a while to fix those.

> Is there a standard way of doing this? I.e. a standard way of naming the class that gets imported as words, a standard way of naming the file that contains this class, etc. I think it would be nice if these are decided upon soon because it would make finding them in the source code easy.

There is no standard way AFAIK, but we might want to come up with one as more and more "libraries" are becoming part of standard Sage.
 
> Franco

Cheers,

Michael



---

archive/issue_comments_027822.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@sagetrac-mabshoff](#comment:6):\n> Replying to [@saliola](#comment:5):\n> > Hello Michael,\n\n> \n> Hi Franco,\n> \n> > The all.py file imports only a few things into the global namespace:\n> > Alphabet\n> > Word\n> > WordMorphism\n> > WordOptions\n> > Words\n> > words\n\n> \n> Ok, that seems acceptable. But what is the difference between words and Words? I can tell you that there are many people (including William) around in Sage that absolutely dislike case sensitivity behavior changes, i.e. think LinAlg in Maple 10 or so. \n\nWe got the idea from graphs to put all examples/pre-defined words into a class. So one could do something like words.FibonacciWord(), for example. But there is no Graphs class, so this is not a problem with graphs (although I suspect that if Nicolas reads this, then he'll want to create a combinatorial class of all graphs). I will change it, but I need a better name. Perhaps WordExamples or WordConstructor? That has the benefit of showing up in tab-completion. Is something similar done anywhere besides in graphs? It would be good to be consistent. \n\nFranco",
    "created_at": "2008-11-30T12:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27822",
    "user": "https://github.com/saliola"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@sagetrac-mabshoff](#comment:6):
> Replying to [@saliola](#comment:5):
> > Hello Michael,

> 
> Hi Franco,
> 
> > The all.py file imports only a few things into the global namespace:
> > Alphabet
> > Word
> > WordMorphism
> > WordOptions
> > Words
> > words

> 
> Ok, that seems acceptable. But what is the difference between words and Words? I can tell you that there are many people (including William) around in Sage that absolutely dislike case sensitivity behavior changes, i.e. think LinAlg in Maple 10 or so. 

We got the idea from graphs to put all examples/pre-defined words into a class. So one could do something like words.FibonacciWord(), for example. But there is no Graphs class, so this is not a problem with graphs (although I suspect that if Nicolas reads this, then he'll want to create a combinatorial class of all graphs). I will change it, but I need a better name. Perhaps WordExamples or WordConstructor? That has the benefit of showing up in tab-completion. Is something similar done anywhere besides in graphs? It would be good to be consistent. 

Franco



---

archive/issue_comments_027823.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis discussion should probably be moved over to sage-devel and sage-combinat-devel.\n\nCheers,\n\nMichael",
    "created_at": "2008-11-30T12:12:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27823",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:8" align="right">comment:8</div>

This discussion should probably be moved over to sage-devel and sage-combinat-devel.

Cheers,

Michael



---

archive/issue_comments_027824.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n>  I will change it, but I need a better name. Perhaps WordExamples or WordConstructor? That has the benefit of showing up in tab-completion.\n\nInstead of the actual 'words', a suggestion could be 'lexicon' or 'wordbook' (I prefer the latter but I'm still not convinced).\n\nslabbe",
    "created_at": "2008-12-09T22:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27824",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">comment:9</div>

>  I will change it, but I need a better name. Perhaps WordExamples or WordConstructor? That has the benefit of showing up in tab-completion.

Instead of the actual 'words', a suggestion could be 'lexicon' or 'wordbook' (I prefer the latter but I'm still not convinced).

slabbe



---

archive/issue_comments_027825.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@seblabbe](#comment:9):\n> \n> >  I will change it, but I need a better name. Perhaps WordExamples or WordConstructor? That has the benefit of showing up in tab-completion.\n\n> \n> Instead of the actual 'words', a suggestion could be 'lexicon' or 'wordbook' (I prefer the latter but I'm still not convinced).\n\nI really like the idea of putting everything under \"words\", so that all the functionality is available using tab completion:\n\n```\nsage: words.[tab]\nwords.Alphabet\nwords.Examples\nwords.Morphism\nwords.Word\nwords.Words\n```\nThen one can do:\n\n```\nsage: words.examples.ThueMorseWord()\n``` \nSee finance.[tab] for a working example.\n\nI also propose loading Words and Word into the global name space, in which case Words would be an alias for words (so words(\"ab\") is the combinatorial class of all words over \"ab\").\n\nSince we will want to add a bunch of other objects and not necessarily load them into the global name space (for example: Paths), this might be the best way to proceed.\n \nWhat do you think? Other suggestions? We can also wait to see what the reviewer suggests.\n\nFranco",
    "created_at": "2008-12-11T20:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27825",
    "user": "https://github.com/saliola"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@seblabbe](#comment:9):
> 
> >  I will change it, but I need a better name. Perhaps WordExamples or WordConstructor? That has the benefit of showing up in tab-completion.

> 
> Instead of the actual 'words', a suggestion could be 'lexicon' or 'wordbook' (I prefer the latter but I'm still not convinced).

I really like the idea of putting everything under "words", so that all the functionality is available using tab completion:

```
sage: words.[tab]
words.Alphabet
words.Examples
words.Morphism
words.Word
words.Words
```
Then one can do:

```
sage: words.examples.ThueMorseWord()
``` 
See finance.[tab] for a working example.

I also propose loading Words and Word into the global name space, in which case Words would be an alias for words (so words("ab") is the combinatorial class of all words over "ab").

Since we will want to add a bunch of other objects and not necessarily load them into the global name space (for example: Paths), this might be the best way to proceed.
 
What do you think? Other suggestions? We can also wait to see what the reviewer suggests.

Franco



---

archive/issue_events_053430.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-15T18:53:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "milestone_number": null,
    "milestone_title": "sage-3.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53430"
}
```



---

archive/issue_events_053431.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-15T18:53:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "milestone_number": null,
    "milestone_title": "sage-3.2.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53431"
}
```



---

archive/issue_comments_027826.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAnother blocker :)\n\nCheers,\n\nMichael",
    "created_at": "2008-12-15T18:53:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27826",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:11" align="right">comment:11</div>

Another blocker :)

Cheers,

Michael



---

archive/issue_events_053432.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-15T18:53:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53432"
}
```



---

archive/issue_events_053433.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-15T18:53:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53433"
}
```



---

archive/issue_comments_027827.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nFranco,\n\nall that needs rebasing is the first hunk from permutation.py. This is my attempt:\n\n```\n--- a/sage/combinat/permutation.py\tSun Dec 14 22:48:15 2008 -0800\n+++ b/sage/combinat/permutation.py\tMon Dec 15 10:58:10 2008 -0800\n@@ -213,7 +213,8 @@\n             raise ValueError, \"cannot convert l (= %s) to a Permutation\"%l\n \n     # otherwise, it gets processed by CombinatorialObject's __init__.\n-    return Permutation_class(l)\n+    # Unfortunately, it requires objects to be lists.\n+    return Permutation_class(list(l))\n \n class Permutation_class(CombinatorialObject):\n     def __hash__(self):\n```\nAfter some discussion with Mike in IRC we decided to postpone the words vs. Words issue to later.\n\nCheers,\n\nMichael",
    "created_at": "2008-12-15T19:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27827",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:12" align="right">comment:12</div>

Franco,

all that needs rebasing is the first hunk from permutation.py. This is my attempt:

```
--- a/sage/combinat/permutation.py	Sun Dec 14 22:48:15 2008 -0800
+++ b/sage/combinat/permutation.py	Mon Dec 15 10:58:10 2008 -0800
@@ -213,7 +213,8 @@
             raise ValueError, "cannot convert l (= %s) to a Permutation"%l
 
     # otherwise, it gets processed by CombinatorialObject's __init__.
-    return Permutation_class(l)
+    # Unfortunately, it requires objects to be lists.
+    return Permutation_class(list(l))
 
 class Permutation_class(CombinatorialObject):
     def __hash__(self):
```
After some discussion with Mike in IRC we decided to postpone the words vs. Words issue to later.

Cheers,

Michael



---

archive/issue_comments_027828.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI am seeing two doctest failures, one which could have been caused by my dumb rebase attempt:\n\n```\nsage -t -long devel/sage/sage/structure/sage_object.pyx # 1 doctests \nsage -t -long devel/sage/sage/combinat/words/word_generators.py # 1 doctests failed\n```\nIn detail: This might be caused by missing pickles in the pickle jar:\n\n```\nsage -t -long \"devel/sage/sage/structure/sage_object.pyx\"   \n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.2.2.rc0/devel/sage/sage/structure/sage_object.pyx\", line 371, in __main__.example_16\nFailed example:\n    sage.structure.sage_object.unpickle_all(std)###line 682:_sage_    >>> sage.structure.sage_object.unpickle_all(std)\nExpected:\n    doctest:...: DeprecationWarning: Your data is stored in an old format. Please use the save() function to store your data in a more recent format.\n    Successfully unpickled ... objects.\n    Failed to unpickle 0 objects.\nGot:\n    doctest:1172: DeprecationWarning: Your data is stored in an old format. Please use the save() function to store your data in a more recent format.\n    ** failed:  _class__sage_combinat_word_Words_alphabet__.sobj\n    ** failed:  _class__sage_combinat_word_Words_n__.sobj\n    ** failed:  _class__sage_combinat_word_ShuffleProduct_overlapping__.sobj\n    ** failed:  _class__sage_combinat_word_ShuffleProduct_shifted__.sobj\n    ** failed:  _class__sage_combinat_word_ShuffleProduct_overlapping_r__.sobj\n    ** failed:  _class__sage_combinat_word_ShuffleProduct_w1w2__.sobj\n    Failed:\n    _class__sage_combinat_word_Words_alphabet__.sobj\n    _class__sage_combinat_word_Words_n__.sobj\n    _class__sage_combinat_word_ShuffleProduct_overlapping__.sobj\n    _class__sage_combinat_word_ShuffleProduct_shifted__.sobj\n    _class__sage_combinat_word_ShuffleProduct_overlapping_r__.sobj\n    _class__sage_combinat_word_ShuffleProduct_w1w2__.sobj\n    Successfully unpickled 448 objects.\n    Failed to unpickle 6 objects.\n**********************************************************************\n```\nand\n\n```\nsage -t -long \"devel/sage/sage/combinat/words/word_generators.py\"\n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.2.2.rc0/devel/sage/sage/combinat/words/word_generators.py\", line 282, in __main__.example_6\nFailed example:\n    f[:Integer(10000)] == u[:Integer(10000)] #long time###line 286:_sage_    >>> f[:10000] == u[:10000] #long time\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\n\nCheers,\n\nMichael",
    "created_at": "2008-12-15T19:20:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27828",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:13" align="right">comment:13</div>

I am seeing two doctest failures, one which could have been caused by my dumb rebase attempt:

```
sage -t -long devel/sage/sage/structure/sage_object.pyx # 1 doctests 
sage -t -long devel/sage/sage/combinat/words/word_generators.py # 1 doctests failed
```
In detail: This might be caused by missing pickles in the pickle jar:

```
sage -t -long "devel/sage/sage/structure/sage_object.pyx"   
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.2.2.rc0/devel/sage/sage/structure/sage_object.pyx", line 371, in __main__.example_16
Failed example:
    sage.structure.sage_object.unpickle_all(std)###line 682:_sage_    >>> sage.structure.sage_object.unpickle_all(std)
Expected:
    doctest:...: DeprecationWarning: Your data is stored in an old format. Please use the save() function to store your data in a more recent format.
    Successfully unpickled ... objects.
    Failed to unpickle 0 objects.
Got:
    doctest:1172: DeprecationWarning: Your data is stored in an old format. Please use the save() function to store your data in a more recent format.
    ** failed:  _class__sage_combinat_word_Words_alphabet__.sobj
    ** failed:  _class__sage_combinat_word_Words_n__.sobj
    ** failed:  _class__sage_combinat_word_ShuffleProduct_overlapping__.sobj
    ** failed:  _class__sage_combinat_word_ShuffleProduct_shifted__.sobj
    ** failed:  _class__sage_combinat_word_ShuffleProduct_overlapping_r__.sobj
    ** failed:  _class__sage_combinat_word_ShuffleProduct_w1w2__.sobj
    Failed:
    _class__sage_combinat_word_Words_alphabet__.sobj
    _class__sage_combinat_word_Words_n__.sobj
    _class__sage_combinat_word_ShuffleProduct_overlapping__.sobj
    _class__sage_combinat_word_ShuffleProduct_shifted__.sobj
    _class__sage_combinat_word_ShuffleProduct_overlapping_r__.sobj
    _class__sage_combinat_word_ShuffleProduct_w1w2__.sobj
    Successfully unpickled 448 objects.
    Failed to unpickle 6 objects.
**********************************************************************
```
and

```
sage -t -long "devel/sage/sage/combinat/words/word_generators.py"
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.2.2.rc0/devel/sage/sage/combinat/words/word_generators.py", line 282, in __main__.example_6
Failed example:
    f[:Integer(10000)] == u[:Integer(10000)] #long time###line 286:_sage_    >>> f[:10000] == u[:10000] #long time
Expected:
    True
Got:
    False
**********************************************************************
```

Cheers,

Michael



---

archive/issue_comments_027829.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI am taking care of the second one (related to word_generators.py) right now!\n\nIt will be in the sage-combinat tree in the next minutes...\n\nslabbe",
    "created_at": "2008-12-15T20:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27829",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:14" align="right">comment:14</div>

I am taking care of the second one (related to word_generators.py) right now!

It will be in the sage-combinat tree in the next minutes...

slabbe



---

archive/issue_comments_027830.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI put my changes into sage_words-4653-final.patch . Should I have done a new patch for the modification I did?\n\nslabbe",
    "created_at": "2008-12-15T21:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27830",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:15" align="right">comment:15</div>

I put my changes into sage_words-4653-final.patch . Should I have done a new patch for the modification I did?

slabbe



---

archive/issue_comments_027831.json:
```json
{
    "body": "Attachment: **[trac_4653.patch.gz](https://github.com/sagemath/sage/files/ticket4653/trac_4653.patch.gz)**\n\nrebased version of the previous patch (so apply only this patch)",
    "created_at": "2008-12-15T22:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27831",
    "user": "https://github.com/saliola"
}
```

Attachment: **[trac_4653.patch.gz](https://github.com/sagemath/sage/files/ticket4653/trac_4653.patch.gz)**

rebased version of the previous patch (so apply only this patch)



---

archive/issue_comments_027832.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI didn't see you message slabbe. I've already fixed the issue in the above patch.\n\nI haven't done anything to address the words vs Words issue yet. But this is something that needs to be addressed soon. I like the idea of putting everything into words.[tab] and using 'from words.all import *' to pollute the global name space. I can do this fairly quickly (the hard part would be correcting the doctests).\n\nMichael: just apply trac_4653.patch; and make sure that sage/combinat/word.py got deleted. Thanks.",
    "created_at": "2008-12-15T23:06:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27832",
    "user": "https://github.com/saliola"
}
```

<div id="comment:16" align="right">comment:16</div>

I didn't see you message slabbe. I've already fixed the issue in the above patch.

I haven't done anything to address the words vs Words issue yet. But this is something that needs to be addressed soon. I like the idea of putting everything into words.[tab] and using 'from words.all import *' to pollute the global name space. I can do this fairly quickly (the hard part would be correcting the doctests).

Michael: just apply trac_4653.patch; and make sure that sage/combinat/word.py got deleted. Thanks.



---

archive/issue_comments_027833.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@saliola](#comment:16):\n> I didn't see you message slabbe. I've already fixed the issue in the above patch.\n\nOk, the patch will go into rc1.\n\n> I haven't done anything to address the words vs Words issue yet. But this is something that needs to be addressed soon. I like the idea of putting everything into words.[tab] and using 'from words.all import *' to pollute the global name space. I can do this fairly quickly (the hard part would be correcting the doctests).\n\nI am not sure this is a good idea. For now I would suggest to keep everything as is.\n\n> Michael: just apply trac_4653.patch; and make sure that sage/combinat/word.py got deleted. Thanks.\n\nok.\n\nMike: Can you give this an official review?\n\nCheers,\n\nMicheal",
    "created_at": "2008-12-16T03:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27833",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@saliola](#comment:16):
> I didn't see you message slabbe. I've already fixed the issue in the above patch.

Ok, the patch will go into rc1.

> I haven't done anything to address the words vs Words issue yet. But this is something that needs to be addressed soon. I like the idea of putting everything into words.[tab] and using 'from words.all import *' to pollute the global name space. I can do this fairly quickly (the hard part would be correcting the doctests).

I am not sure this is a good idea. For now I would suggest to keep everything as is.

> Michael: just apply trac_4653.patch; and make sure that sage/combinat/word.py got deleted. Thanks.

ok.

Mike: Can you give this an official review?

Cheers,

Micheal



---

archive/issue_events_053434.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-16T03:54:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53434"
}
```



---

archive/issue_comments_027834.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI've looked over almost all of the code and am happy with it.  I think it should go in.  If any issues come up, we can take care of them later.\n\nAssuming that this applies and passes tests, I give it a positive review.",
    "created_at": "2008-12-17T11:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27834",
    "user": "https://github.com/mwhansen"
}
```

<div id="comment:18" align="right">comment:18</div>

I've looked over almost all of the code and am happy with it.  I think it should go in.  If any issues come up, we can take care of them later.

Assuming that this applies and passes tests, I give it a positive review.



---

archive/issue_events_053435.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-12-17T11:03:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53435"
}
```



---

archive/issue_events_053436.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-12-17T11:03:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53436"
}
```



---

archive/issue_comments_027835.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWith Franco's latest patch there is at least one import issue:\n\n```\n  File \"/scratch/mabshoff/release-cycle/sage-3.2.2.rc1/local/lib/python2.5/site-packages/sage/combinat/sf/ns_macdonald.py\", line 2, in <module>\n    import sage.combinat.word as word\nImportError: No module named word\n```\nTo reproduce nuke the old words py and pyc files from the build directory. I am poking around.\n\nCheers,\n\nMichael",
    "created_at": "2008-12-17T16:31:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27835",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:19" align="right">comment:19</div>

With Franco's latest patch there is at least one import issue:

```
  File "/scratch/mabshoff/release-cycle/sage-3.2.2.rc1/local/lib/python2.5/site-packages/sage/combinat/sf/ns_macdonald.py", line 2, in <module>
    import sage.combinat.word as word
ImportError: No module named word
```
To reproduce nuke the old words py and pyc files from the build directory. I am poking around.

Cheers,

Michael



---

archive/issue_comments_027836.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAttachment: **[words-import-fix.patch.gz](https://github.com/sagemath/sage/files/ticket4653/words-import-fix.patch.gz)**\n\nPositive review on words-import-fix.patch",
    "created_at": "2008-12-17T16:56:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27836",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:20" align="right">comment:20</div>

Attachment: **[words-import-fix.patch.gz](https://github.com/sagemath/sage/files/ticket4653/words-import-fix.patch.gz)**

Positive review on words-import-fix.patch



---

archive/issue_events_053437.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-17T16:58:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53437"
}
```



---

archive/issue_events_053438.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-12-17T16:58:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4653#event-53438"
}
```



---

archive/issue_comments_027837.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nMerged in Sage 3.2.2.rc1 - the pickling issue will be dealt with at #4640",
    "created_at": "2008-12-17T16:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4653",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4653#issuecomment-27837",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:21" align="right">comment:21</div>

Merged in Sage 3.2.2.rc1 - the pickling issue will be dealt with at #4640
