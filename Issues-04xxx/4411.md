# Issue 4411: phc breaks on one-variable problems

archive/issues_004411.json:
```json
{
    "body": "phcpack uses a different method and different output for 1-variable problems, which breaks some assumptions in the interface.  \n\nAttached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.  This patch was added as part of ticket 10607, so that part is done.\n\nApply only the patche\n[attachment:trac_4411-tmpfilename.patch].\n\nand test AFTER installing the optional spkg at #10607.\n\n**Assignee:** mhampton\n\n**Keywords:** phc, phcpack, numerical, polynomial\n\n**Reviewer:** Volker Braun\n\n**Author:** Marshall Hampton\n\n**Merged:** sage-5.6.beta2\n\nIssue created by migration from https://trac.sagemath.org/ticket/4411\n\n",
    "closed_at": "2012-12-27T10:24:36Z",
    "created_at": "2008-10-31T12:54:55Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.6",
    "title": "phc breaks on one-variable problems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/4411",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```
phcpack uses a different method and different output for 1-variable problems, which breaks some assumptions in the interface.  

Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.  This patch was added as part of ticket 10607, so that part is done.

Apply only the patche
[attachment:trac_4411-tmpfilename.patch].

and test AFTER installing the optional spkg at #10607.

**Assignee:** mhampton

**Keywords:** phc, phcpack, numerical, polynomial

**Reviewer:** Volker Braun

**Author:** Marshall Hampton

**Merged:** sage-5.6.beta2

Issue created by migration from https://trac.sagemath.org/ticket/4411





---

archive/issue_comments_026555.json:
```json
{
    "body": "Fixes 1-variable problems with phc",
    "created_at": "2011-01-11T23:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26555",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

Fixes 1-variable problems with phc



---

archive/issue_events_025737.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2011-01-11T23:09:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25737"
}
```



---

archive/attachments_004743.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_4411_fix_phc_1_variable.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket4411/trac_4411_fix_phc_1_variable.patch",
    "created_at": "2011-01-11T23:09:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```



---

archive/issue_comments_026556.json:
```json
{
    "body": "<a id='comment:2'></a>\nHere's an example for testing:\n\n```\nR1.<t> = PolynomialRing(QQ)\nstart_sys1 = [t^15-t-1]             \nsol = phc.blackbox(start_sys1, R1, verbose=False)        \nlen(sol.solutions())\n```\nshould give 15.",
    "created_at": "2011-01-11T23:09:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26556",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:2'></a>
Here's an example for testing:

```
R1.<t> = PolynomialRing(QQ)
start_sys1 = [t^15-t-1]             
sol = phc.blackbox(start_sys1, R1, verbose=False)        
len(sol.solutions())
```
should give 15.



---

archive/issue_comments_026557.json:
```json
{
    "body": "**Author:** Marshall Hampton",
    "created_at": "2011-01-11T23:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26557",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Author:** Marshall Hampton



---

archive/issue_comments_026558.json:
```json
{
    "body": "<a id='comment:4'></a>\nOops, for the above snippet you need to first import phc:\n\n```\nfrom sage.interfaces.phc import phc\n```\n\nand have the phc optional spkg installed.",
    "created_at": "2011-01-12T00:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26558",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:4'></a>
Oops, for the above snippet you need to first import phc:

```
from sage.interfaces.phc import phc
```

and have the phc optional spkg installed.



---

archive/issue_events_025738.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2011-01-12T00:54:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "component: interfaces",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25738"
}
```



---

archive/issue_events_025739.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2011-01-12T00:54:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "component: packages: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25739"
}
```



---

archive/issue_comments_026559.json:
```json
{
    "body": "<a id='comment:6'></a>\ncurrent spkg does not work on MacOSX 10.6. Will need an update...",
    "created_at": "2011-01-12T20:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26559",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
current spkg does not work on MacOSX 10.6. Will need an update...



---

archive/issue_events_025740.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-01-13T19:09:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25740"
}
```



---

archive/issue_events_025741.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2011-01-13T19:09:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25741"
}
```



---

archive/issue_comments_026560.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [dimpase](#comment%3A6):\n> current spkg does not work on MacOSX 10.6. Will need an update...\n\n\nThe new spkg (Marshall, could you post a link to it?) breaks parts of the current code, as some outputs(?) did change.",
    "created_at": "2011-01-13T19:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26560",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
Replying to [dimpase](#comment%3A6):
> current spkg does not work on MacOSX 10.6. Will need an update...


The new spkg (Marshall, could you post a link to it?) breaks parts of the current code, as some outputs(?) did change.



---

archive/issue_comments_026561.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,9 @@\n-phcpack uses a different method and different output for 1-variable problems, which breaks a lot of the assumptions in the interface.  I will ask Jan Verschelde if it is possible to harmonize the output, otherwise I will add some special-casing code to the interface.\n+phcpack uses a different method and different output for 1-variable problems, which breaks some assumptions in the interface.  \n+\n+Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.\n+\n+Apply only the patch:\n+trac_4411_and_10607_phc_fixes.patch\n+[http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch)\n+\n+AFTER installing the optional spkg at #10607\n``````\n",
    "created_at": "2011-03-26T16:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26561",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,9 @@
-phcpack uses a different method and different output for 1-variable problems, which breaks a lot of the assumptions in the interface.  I will ask Jan Verschelde if it is possible to harmonize the output, otherwise I will add some special-casing code to the interface.
+phcpack uses a different method and different output for 1-variable problems, which breaks some assumptions in the interface.  
+
+Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.
+
+Apply only the patch:
+trac_4411_and_10607_phc_fixes.patch
+[http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch)
+
+AFTER installing the optional spkg at #10607
``````




---

archive/issue_events_025742.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2011-03-26T16:45:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25742"
}
```



---

archive/issue_events_025743.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2011-03-26T16:45:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25743"
}
```



---

archive/issue_comments_026562.json:
```json
{
    "body": "<a id='comment:10'></a>\nFor this patch, the optional spkg from ticket #10607 should be used.  \n\n[http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg)",
    "created_at": "2011-03-26T16:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26562",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:10'></a>
For this patch, the optional spkg from ticket #10607 should be used.  

[http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg)



---

archive/issue_comments_026563.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,4 +6,5 @@\n trac_4411_and_10607_phc_fixes.patch\n [http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch)\n \n-AFTER installing the optional spkg at #10607\n+and test AFTER installing the optional spkg at #10607:\n+[http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg)\n``````\n",
    "created_at": "2011-03-26T16:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26563",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,4 +6,5 @@
 trac_4411_and_10607_phc_fixes.patch
 [http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch)
 
-AFTER installing the optional spkg at #10607
+and test AFTER installing the optional spkg at #10607:
+[http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg)
``````




---

archive/issue_comments_026564.json:
```json
{
    "body": "<a id='comment:12'></a>\nTested so far on OS X 10.6 and linux (64-bit).",
    "created_at": "2011-03-26T16:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26564",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:12'></a>
Tested so far on OS X 10.6 and linux (64-bit).



---

archive/issue_comments_026565.json:
```json
{
    "body": "<a id='comment:13'></a>\nThis (and 10607) also work on Solaris (tested on mark on skynet) in addition to OS X 10.6 and linux.",
    "created_at": "2011-03-27T01:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26565",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:13'></a>
This (and 10607) also work on Solaris (tested on mark on skynet) in addition to OS X 10.6 and linux.



---

archive/issue_comments_026566.json:
```json
{
    "body": "<a id='comment:14'></a>\nA few comments: the variable `real_tol` needs to be documented.  Also, the examples should probably be marked \"optional: phc\" instead of just \"optional\".\n\nIn the documentation it says \"A dictionary of lists if dictionaries of solutions, classified by type.\".  Should the word \"if\" be \"of\"?\n\nYou've changed the functions `get_solution_dicts` and `get_classified_solution_dicts`; can you add some doctests to illustrate and test the changes?",
    "created_at": "2011-07-15T02:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26566",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:14'></a>
A few comments: the variable `real_tol` needs to be documented.  Also, the examples should probably be marked "optional: phc" instead of just "optional".

In the documentation it says "A dictionary of lists if dictionaries of solutions, classified by type.".  Should the word "if" be "of"?

You've changed the functions `get_solution_dicts` and `get_classified_solution_dicts`; can you add some doctests to illustrate and test the changes?



---

archive/attachments_004744.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_4411_and_10607_phc_fixes.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket4411/trac_4411_and_10607_phc_fixes.patch",
    "created_at": "2011-08-05T03:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```



---

archive/issue_comments_026567.json:
```json
{
    "body": "updated patch for both 4411 and 10607",
    "created_at": "2011-08-05T03:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26567",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

updated patch for both 4411 and 10607



---

archive/issue_comments_026568.json:
```json
{
    "body": "<a id='comment:15'></a>\nI think I've addressed all of your comments.  The changes to get_solution_dicts and get_classified_solution_dicts are mostly trivial, just to handle to minor differences in output of phcpack for the 1-variable case.",
    "created_at": "2011-08-05T03:04:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26568",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:15'></a>
I think I've addressed all of your comments.  The changes to get_solution_dicts and get_classified_solution_dicts are mostly trivial, just to handle to minor differences in output of phcpack for the 1-variable case.



---

archive/issue_comments_026569.json:
```json
{
    "body": "<a id='comment:16'></a>\npatch doesn't apply to sage-5.0, I get a rejected hunk.",
    "created_at": "2012-05-17T22:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26569",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>
patch doesn't apply to sage-5.0, I get a rejected hunk.



---

archive/issue_comments_026570.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,4 +7,4 @@\n [http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch)\n \n and test AFTER installing the optional spkg at #10607:\n-[http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg)\n+[http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg)\n``````\n",
    "created_at": "2012-05-28T19:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26570",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,4 +7,4 @@
 [http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch)
 
 and test AFTER installing the optional spkg at #10607:
-[http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.60.spkg)
+[http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg)
``````




---

archive/issue_comments_026571.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n Apply only the patch:\n trac_4411_and_10607_phc_fixes.patch\n-[http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch)\n+[http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes_5.0.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes_5.0.patch)\n \n and test AFTER installing the optional spkg at #10607:\n [http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg)\n``````\n",
    "created_at": "2012-05-28T20:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26571",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 Apply only the patch:
 trac_4411_and_10607_phc_fixes.patch
-[http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes.patch)
+[http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes_5.0.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes_5.0.patch)
 
 and test AFTER installing the optional spkg at #10607:
 [http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg)
``````




---

archive/attachments_004745.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_4411_and_10607_phc_fixes_5.0.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket4411/trac_4411_and_10607_phc_fixes_5.0.patch",
    "created_at": "2012-05-28T20:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```



---

archive/issue_comments_026572.json:
```json
{
    "body": "rebased cumulative patch for #4411 and #10607, for sage-5.0",
    "created_at": "2012-05-28T20:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26572",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

rebased cumulative patch for #4411 and #10607, for sage-5.0



---

archive/issue_comments_026573.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [vbraun](#comment%3A16):\n> patch doesn't apply to sage-5.0, I get a rejected hunk.\n\n\nOkay, I fixed that and updated the description to point to a more recent phcpack spkg.  Please try again!  It would be depressing for this to rot again.",
    "created_at": "2012-05-28T20:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26573",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:19'></a>
Replying to [vbraun](#comment%3A16):
> patch doesn't apply to sage-5.0, I get a rejected hunk.


Okay, I fixed that and updated the description to point to a more recent phcpack spkg.  Please try again!  It would be depressing for this to rot again.



---

archive/issue_comments_026574.json:
```json
{
    "body": "<a id='comment:20'></a>\nI just posted a new spkg to #10607, since the old one wasn't building on my OS X Lion machine. I don't know what this package is doing, but all optional tests pass for me with the patch here and the spkg from #10607.",
    "created_at": "2012-06-12T21:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26574",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>
I just posted a new spkg to #10607, since the old one wasn't building on my OS X Lion machine. I don't know what this package is doing, but all optional tests pass for me with the patch here and the spkg from #10607.



---

archive/issue_events_025744.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T19:34:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "milestone": "sage-5.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25744"
}
```



---

archive/issue_events_025745.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T19:34:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "milestone": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25745"
}
```



---

archive/issue_comments_026575.json:
```json
{
    "body": "<a id='comment:21'></a>\nLooks good to me!",
    "created_at": "2012-10-23T19:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26575",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>
Looks good to me!



---

archive/issue_events_025746.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T19:34:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25746"
}
```



---

archive/issue_events_025747.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T19:34:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25747"
}
```



---

archive/issue_comments_026576.json:
```json
{
    "body": "**Reviewer:** Volker Braun",
    "created_at": "2012-10-23T19:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26576",
    "user": "https://github.com/vbraun"
}
```

**Reviewer:** Volker Braun



---

archive/issue_comments_026577.json:
```json
{
    "body": "<a id='comment:22'></a>\nI get the following doctest error on Sage-5.4.rc1, perhaps it has something to do with #13579?\n\n```\n[vbraun@volker-desktop hg]$ sage -t -only-optional=phc --verbose devel/sage-main/sage/interfaces/phc.py\nsage -t -only-optional=phc --verbose \"devel/sage-main/sage/interfaces/phc.py\"\nTrying:\n    set_random_seed(0L)\nExpecting nothing\nok\nTrying:\n    change_warning_output(sys.stdout)\nExpecting nothing\nok\nTrying:\n    from sage.interfaces.phc import *         #optional: phc###line 56:_sage_    >>> from sage.interfaces.phc import *         #optional: phc\nExpecting nothing\nok\nTrying:\n    R2 = PolynomialRing(QQ,Integer(2), names=('x1', 'x2',)); (x1, x2,) = R2._first_ngens(2)#optional: phc###line 57:_sage_    >>> R2.<x1,x2> = PolynomialRing(QQ,2)         #optional: phc\nExpecting nothing\nok\nTrying:\n    test_sys = [(x1-Integer(1))**Integer(5)-x2, (x2-Integer(1))**Integer(5)-Integer(1)] #optional: phc###line 58:_sage_    >>> test_sys = [(x1-1)^5-x2, (x2-1)^5-1] #optional: phc\nExpecting nothing\nok\nTrying:\n    sol = phc.blackbox(test_sys, R2)          #optional: phc###line 59:_sage_    >>> sol = phc.blackbox(test_sys, R2)          #optional: phc\nExpecting nothing\n\nThere exists already a file named /home/vbraun/.sage/temp/volker_desktop.stp.dias.ie/21208/tmp_filename-SmhVtI\nDo you want to destroy this file ? (y/n) y\n```",
    "created_at": "2012-10-23T19:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26577",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
I get the following doctest error on Sage-5.4.rc1, perhaps it has something to do with #13579?

```
[vbraun@volker-desktop hg]$ sage -t -only-optional=phc --verbose devel/sage-main/sage/interfaces/phc.py
sage -t -only-optional=phc --verbose "devel/sage-main/sage/interfaces/phc.py"
Trying:
    set_random_seed(0L)
Expecting nothing
ok
Trying:
    change_warning_output(sys.stdout)
Expecting nothing
ok
Trying:
    from sage.interfaces.phc import *         #optional: phc###line 56:_sage_    >>> from sage.interfaces.phc import *         #optional: phc
Expecting nothing
ok
Trying:
    R2 = PolynomialRing(QQ,Integer(2), names=('x1', 'x2',)); (x1, x2,) = R2._first_ngens(2)#optional: phc###line 57:_sage_    >>> R2.<x1,x2> = PolynomialRing(QQ,2)         #optional: phc
Expecting nothing
ok
Trying:
    test_sys = [(x1-Integer(1))**Integer(5)-x2, (x2-Integer(1))**Integer(5)-Integer(1)] #optional: phc###line 58:_sage_    >>> test_sys = [(x1-1)^5-x2, (x2-1)^5-1] #optional: phc
Expecting nothing
ok
Trying:
    sol = phc.blackbox(test_sys, R2)          #optional: phc###line 59:_sage_    >>> sol = phc.blackbox(test_sys, R2)          #optional: phc
Expecting nothing

There exists already a file named /home/vbraun/.sage/temp/volker_desktop.stp.dias.ie/21208/tmp_filename-SmhVtI
Do you want to destroy this file ? (y/n) y
```



---

archive/issue_events_025748.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T19:59:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25748"
}
```



---

archive/issue_events_025749.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2012-10-23T19:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25749"
}
```



---

archive/issue_comments_026578.json:
```json
{
    "body": "<a id='comment:23'></a>\nYes, I guess that since `tmp_filename` now creates the file in addition to returning its path, it causes the problem. Here's a patch. (There are other things which could be cleaned up, for example `log_filename` is never used, but I'm not going to bother.)",
    "created_at": "2012-10-25T20:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26578",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>
Yes, I guess that since `tmp_filename` now creates the file in addition to returning its path, it causes the problem. Here's a patch. (There are other things which could be cleaned up, for example `log_filename` is never used, but I'm not going to bother.)



---

archive/issue_comments_026579.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,9 +2,8 @@\n \n Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.\n \n-Apply only the patch:\n-trac_4411_and_10607_phc_fixes.patch\n-[http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes_5.0.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes_5.0.patch)\n+Apply only the patches\n+[attachment:trac_4411_and_10607_phc_fixes_5.0.patch] and [attachment:trac_4411-tmpfilename.patch].\n \n and test AFTER installing the optional spkg at #10607:\n [http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg)\n``````\n",
    "created_at": "2012-10-25T20:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26579",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,9 +2,8 @@
 
 Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.
 
-Apply only the patch:
-trac_4411_and_10607_phc_fixes.patch
-[http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes_5.0.patch](http://trac.sagemath.org/sage_trac/raw-attachment/ticket/4411/trac_4411_and_10607_phc_fixes_5.0.patch)
+Apply only the patches
+[attachment:trac_4411_and_10607_phc_fixes_5.0.patch] and [attachment:trac_4411-tmpfilename.patch].
 
 and test AFTER installing the optional spkg at #10607:
 [http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg)
``````




---

archive/issue_events_025750.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-10-25T20:27:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25750"
}
```



---

archive/issue_events_025751.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2012-10-25T20:27:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25751"
}
```



---

archive/attachments_004746.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_4411-tmpfilename.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket4411/trac_4411-tmpfilename.patch",
    "created_at": "2012-10-25T20:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/jhpalmieri"
}
```



---

archive/issue_comments_026580.json:
```json
{
    "body": "",
    "created_at": "2012-10-25T20:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26580",
    "user": "https://github.com/jhpalmieri"
}
```





---

archive/issue_comments_026581.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,5 +5,4 @@\n Apply only the patches\n [attachment:trac_4411_and_10607_phc_fixes_5.0.patch] and [attachment:trac_4411-tmpfilename.patch].\n \n-and test AFTER installing the optional spkg at #10607:\n-[http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg)\n+and test AFTER installing the optional spkg at #10607.\n``````\n",
    "created_at": "2012-10-25T20:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26581",
    "user": "https://github.com/jhpalmieri"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,5 +5,4 @@
 Apply only the patches
 [attachment:trac_4411_and_10607_phc_fixes_5.0.patch] and [attachment:trac_4411-tmpfilename.patch].
 
-and test AFTER installing the optional spkg at #10607:
-[http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg](http://sage.math.washington.edu/home/mhampton/phc-2.3.65.spkg)
+and test AFTER installing the optional spkg at #10607.
``````




---

archive/issue_comments_026582.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n phcpack uses a different method and different output for 1-variable problems, which breaks some assumptions in the interface.  \n \n-Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.\n+Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.  This patch was added as part of ticket 10607, so that part is done.\n \n-Apply only the patches\n-[attachment:trac_4411_and_10607_phc_fixes_5.0.patch] and [attachment:trac_4411-tmpfilename.patch].\n+Apply only the patche\n+[attachment:trac_4411-tmpfilename.patch].\n \n and test AFTER installing the optional spkg at #10607.\n``````\n",
    "created_at": "2012-12-21T14:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26582",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 phcpack uses a different method and different output for 1-variable problems, which breaks some assumptions in the interface.  
 
-Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.
+Attached patch trac_4411_and_10607_phc_fixes.patch fixes this problem and a recent change in phcpack output that breaks everything in the interface if not addressed.  This patch was added as part of ticket 10607, so that part is done.
 
-Apply only the patches
-[attachment:trac_4411_and_10607_phc_fixes_5.0.patch] and [attachment:trac_4411-tmpfilename.patch].
+Apply only the patche
+[attachment:trac_4411-tmpfilename.patch].
 
 and test AFTER installing the optional spkg at #10607.
``````




---

archive/issue_comments_026583.json:
```json
{
    "body": "<a id='comment:26'></a>\nThat does solve this new filename problem. This ticket should have been closed with 10607, but wasn't, so now I guess it can serve this new purpose of fixing the tmp file problem.",
    "created_at": "2012-12-21T14:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26583",
    "user": "https://trac.sagemath.org/admin/accounts/users/mhampton"
}
```

<a id='comment:26'></a>
That does solve this new filename problem. This ticket should have been closed with 10607, but wasn't, so now I guess it can serve this new purpose of fixing the tmp file problem.



---

archive/issue_events_025752.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2012-12-21T14:46:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25752"
}
```



---

archive/issue_events_025753.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mhampton",
    "created_at": "2012-12-21T14:46:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25753"
}
```



---

archive/issue_events_025754.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-21T15:11:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "milestone": "sage-5.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25754"
}
```



---

archive/issue_events_025755.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-21T15:11:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "milestone": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25755"
}
```



---

archive/issue_events_025756.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-26T16:18:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "component: packages: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25756"
}
```



---

archive/issue_events_025757.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-26T16:18:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "component: interfaces",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25757"
}
```



---

archive/issue_comments_026584.json:
```json
{
    "body": "**Merged:** sage-5.6.beta2",
    "created_at": "2012-12-27T10:24:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4411#issuecomment-26584",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.6.beta2



---

archive/issue_events_025758.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-27T10:24:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25758"
}
```



---

archive/issue_events_025759.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-12-27T10:24:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/4411",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4411#event-25759"
}
```
