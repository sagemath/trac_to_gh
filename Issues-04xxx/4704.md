# Issue 4704: Use jquery to make the javascript code nicer

archive/issues_004704.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout"
    ],
    "body": "This ticket splits off part of #4267.\n\n\n\nCC:  @boothby @TimothyClemans @robertwb\n\nComponent: **notebook**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4704_\n\n",
    "closed_at": "2009-01-19T08:09:56Z",
    "created_at": "2008-12-05T01:11:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Use jquery to make the javascript code nicer",
    "type": "issue",
    "updated_at": "2009-01-19T14:01:57Z",
    "url": "https://github.com/sagemath/sage/issues/4704",
    "user": "https://github.com/jasongrout"
}
```
This ticket splits off part of #4267.



CC:  @boothby @TimothyClemans @robertwb

Component: **notebook**

_Issue created by migration from https://trac.sagemath.org/ticket/4704_





---

archive/issue_events_053938.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-12-05T01:11:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53938"
}
```



---

archive/issue_events_053939.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-12-05T01:11:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53939"
}
```



---

archive/issue_events_053940.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-12-05T01:11:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53940"
}
```



---

archive/issue_events_053941.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-12-05T01:11:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53941"
}
```



---

archive/issue_events_053942.json:
```json
{
    "actor": "https://github.com/boothby",
    "created_at": "2008-12-05T01:11:07Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "subject": "https://github.com/jasongrout",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53942"
}
```



---

archive/issue_comments_028187.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAttachment: **[jquery-javascript-cleanup.patch.gz](https://github.com/sagemath/sage/files/ticket4704/jquery-javascript-cleanup.patch.gz)**\n\nThis depends on the patch at #4700.",
    "created_at": "2008-12-05T01:11:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28187",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:1" align="right">comment:1</div>

Attachment: **[jquery-javascript-cleanup.patch.gz](https://github.com/sagemath/sage/files/ticket4704/jquery-javascript-cleanup.patch.gz)**

This depends on the patch at #4700.



---

archive/issue_events_053943.json:
```json
{
    "actor": "https://github.com/boothby",
    "created_at": "2008-12-05T01:12:10Z",
    "event": "unassigned",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "subject": "https://github.com/jasongrout",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53943"
}
```



---

archive/issue_events_053944.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-12-05T01:12:10Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "subject": "https://github.com/jasongrout",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53944"
}
```



---

archive/issue_comments_028188.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIgnore the dependency on #4700.  Instead, this depends on #3767.",
    "created_at": "2008-12-05T10:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28188",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:4" align="right">comment:4</div>

Ignore the dependency on #4700.  Instead, this depends on #3767.



---

archive/issue_events_053945.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-12-06T05:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53945"
}
```



---

archive/issue_comments_028189.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis definitely needs to be commented on by Tom Boothby, since this patch simply deletes the entire optimized-for-us javascript AJAX \"framework\" he wrote, and replaces it by jQuery's.  Is jQuery's actually better?",
    "created_at": "2008-12-06T23:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28189",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:6" align="right">comment:6</div>

This definitely needs to be commented on by Tom Boothby, since this patch simply deletes the entire optimized-for-us javascript AJAX "framework" he wrote, and replaces it by jQuery's.  Is jQuery's actually better?



---

archive/issue_comments_028190.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYep, I agree.  CCing boothby.",
    "created_at": "2008-12-06T23:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28190",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:7" align="right">comment:7</div>

Yep, I agree.  CCing boothby.



---

archive/issue_comments_028191.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI'm not sure I see the point of this.  I'm inclined to say, \"If it ain't broke, don't fix it.\"  One might accuse me of being biased... but I really don't think I am here -- I'd be happy to see my code go if it made the rest of the notebook code significantly better.\n\nThere's one benefit that I see: \n\n```\n'newcell=0' + '&id=' + id + '&input='+escape0('%__sage_interact__\\n' + input))\n```\n\nbecomes\n\n```\n{newcell: 0, id: id, input: '%__sage_interact__\\n' + input}\n```\n\nand this is more readable (I'm hoping that the escape0 functionality is preserved).  I'd like to see what was, bradshaw, and tclemans say about this.  I'll test after finals are over.",
    "created_at": "2008-12-07T06:14:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28191",
    "user": "https://github.com/boothby"
}
```

<div id="comment:8" align="right">comment:8</div>

I'm not sure I see the point of this.  I'm inclined to say, "If it ain't broke, don't fix it."  One might accuse me of being biased... but I really don't think I am here -- I'd be happy to see my code go if it made the rest of the notebook code significantly better.

There's one benefit that I see: 

```
'newcell=0' + '&id=' + id + '&input='+escape0('%__sage_interact__\n' + input))
```

becomes

```
{newcell: 0, id: id, input: '%__sage_interact__\n' + input}
```

and this is more readable (I'm hoping that the escape0 functionality is preserved).  I'd like to see what was, bradshaw, and tclemans say about this.  I'll test after finals are over.



---

archive/issue_comments_028192.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI like the cleaner syntax.  The other thing that may be nice about jquery is that it offloads maintaining to a third party that presumably has more time to focus on it.  That may be a non-issue for our code right now, though.",
    "created_at": "2008-12-09T09:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28192",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:9" align="right">comment:9</div>

I like the cleaner syntax.  The other thing that may be nice about jquery is that it offloads maintaining to a third party that presumably has more time to focus on it.  That may be a non-issue for our code right now, though.



---

archive/issue_comments_028193.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIf there isn't any behavior or performance degradation, I think cleaner syntax is worth having, especially if it makes it easier for more people to work on the notebook code. Also, assuming that jquery can do all we need it to, the more we can offload javascript ajax and browser compatibility code to a larger community the more time we can focus on writing interesting stuff.",
    "created_at": "2008-12-10T02:23:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28193",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:10" align="right">comment:10</div>

If there isn't any behavior or performance degradation, I think cleaner syntax is worth having, especially if it makes it easier for more people to work on the notebook code. Also, assuming that jquery can do all we need it to, the more we can offload javascript ajax and browser compatibility code to a larger community the more time we can focus on writing interesting stuff.



---

archive/issue_comments_028194.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nboothby: could you test this patch now that finals are over?",
    "created_at": "2008-12-20T21:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28194",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:11" align="right">comment:11</div>

boothby: could you test this patch now that finals are over?



---

archive/issue_comments_028195.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nboothby: I should mention that everything is automatically escaped, so the escape0 functionality is preserved, but is way more transparent to the user.",
    "created_at": "2008-12-20T21:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28195",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:12" align="right">comment:12</div>

boothby: I should mention that everything is automatically escaped, so the escape0 functionality is preserved, but is way more transparent to the user.



---

archive/issue_events_053946.json:
```json
{
    "actor": "https://github.com/TimothyClemans",
    "created_at": "2008-12-20T21:41:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53946"
}
```



---

archive/issue_events_053947.json:
```json
{
    "actor": "https://github.com/TimothyClemans",
    "created_at": "2008-12-20T21:41:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53947"
}
```



---

archive/issue_comments_028196.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nJason asked me to comment. I don't know Javascript, but I like the idea of outsourcing to an actively developed library.",
    "created_at": "2008-12-20T21:41:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28196",
    "user": "https://github.com/TimothyClemans"
}
```

<div id="comment:13" align="right">comment:13</div>

Jason asked me to comment. I don't know Javascript, but I like the idea of outsourcing to an actively developed library.



---

archive/issue_events_053948.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-01-19T06:32:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "milestone_number": null,
    "milestone_title": "sage-3.4.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53948"
}
```



---

archive/issue_events_053949.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-01-19T06:32:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "milestone_number": null,
    "milestone_title": "sage-3.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53949"
}
```



---

archive/issue_comments_028197.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nPositive review due to #4705. Jason commented that Tom gave his thumbs up to this patch.\n\nCheers,\n\nMichael",
    "created_at": "2009-01-19T06:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28197",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:14" align="right">comment:14</div>

Positive review due to #4705. Jason commented that Tom gave his thumbs up to this patch.

Cheers,

Michael



---

archive/issue_events_053950.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-01-19T06:32:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53950"
}
```



---

archive/issue_events_053951.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-01-19T06:32:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53951"
}
```



---

archive/issue_comments_028198.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nMerged jquery-javascript-cleanup.patch in Sage 3.3.alpha0",
    "created_at": "2009-01-19T08:09:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28198",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:15" align="right">comment:15</div>

Merged jquery-javascript-cleanup.patch in Sage 3.3.alpha0



---

archive/issue_events_053952.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-01-19T08:09:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53952"
}
```



---

archive/issue_events_053953.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2009-01-19T08:09:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4704#event-53953"
}
```



---

archive/issue_comments_028199.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nMerged jquery-javascript-cleanup.patch in Sage 3.3.alpha0. Oops :)",
    "created_at": "2009-01-19T08:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28199",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:16" align="right">comment:16</div>

Merged jquery-javascript-cleanup.patch in Sage 3.3.alpha0. Oops :)



---

archive/issue_comments_028200.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWhen did I comment that Tom gave his thumbs up?  I don't remember that.",
    "created_at": "2009-01-19T13:53:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28200",
    "user": "https://github.com/jasongrout"
}
```

<div id="comment:17" align="right">comment:17</div>

When did I comment that Tom gave his thumbs up?  I don't remember that.



---

archive/issue_comments_028201.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jasongrout](#comment:17):\n> When did I comment that Tom gave his thumbs up?  I don't remember that.\n\nIt come up in IRC, but I am no longer 100% sure it was you who told me or of it was Tom directly. Either way, the code is in and while it might have slipped in somewhat below standards SD 12 will see some pounding of the new code, so things should turn out ok :)\n\nCheers,\n\nMichael",
    "created_at": "2009-01-19T14:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4704#issuecomment-28201",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jasongrout](#comment:17):
> When did I comment that Tom gave his thumbs up?  I don't remember that.

It come up in IRC, but I am no longer 100% sure it was you who told me or of it was Tom directly. Either way, the code is in and while it might have slipped in somewhat below standards SD 12 will see some pounding of the new code, so things should turn out ok :)

Cheers,

Michael
