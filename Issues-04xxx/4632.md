# Issue 4632: [with patch, with positive review] .roots(ring=QQbar) fails for polynomials with enormous (rational) coefficients

archive/issues_004632.json:
```json
{
    "body": "```\nsage: QQ['x']([-1574806689856485203713606790878806324846144211919939275932838223695235514282561297210584228295501990367896802287219614615718592306790806998478594573136498271898097227253339508472806599150574830973085668693785410871971313394976319704438483766679073615090307688071361570760253069748188250790686216116761641028997571981684497151720169056998220786278540994912669786651060910653545724175382042083495315866044137120083382859756320538222167370892414005604562057485506805590016305081667636242948134404040973531913166015302665956067878096607378584971478359783801542379092931747436523437500000000, -193515932916412990666476999904798981838783908664420988959823642066771192557156670863359708607729027554054703175272513097505138750681648289302786055327661244638666946766701871248492974002783633284663059534277050056388430626073123883006035020112991320833380652459040398248733202585248419694781102412345882087960535667042197701263875700609785583388094437490661697529942850974637145614502894865563658714889959149063444714656791303142632425977864052679698255996045239095634437997573963962429956870293270111083984375000000000, 83170608189851115406174052156020720006391221141822354139926261428103839206727940911499007309157560650324863068691249192581307931920254125633191130600449087349613636925163088513950945582369917075355210785440126887558346533726356989539553338506358560310306102959778069177179372222395037680173799313526664796809377865459533346598769484352028174469530113441058554304204590311274377428022769589018439585016413933419001103744044069987352241516113281250000000, 30780596844236145136671266066720159143772212705756140218160846382486086875917672569425439369657418375595991121876711014161905477956619986681576758421169748750674431330473384186475201251946484719689348800350470917022367299090454906257957127467247749613559761631288914151049175625483137995463393355067411691507776830072699817727104023701041344647669946847730352298451503906250000000000, 16837026080764386677826809963409589901906832169336314656090773268188533369173850472410642832904824882464821987940061157426041992904344896272244589245797112816182726139239310057740408111797911631913842732844850790967905084066195716939266674597632685094885825488090255475873154607960411323906396752521370605468750000, -1365036509706117570424076690021366855689949499827289827648200295899402739643890697790041978512460641225637590846458966227951950685833117543434624092525726218602560944878937528961934417330262388045264194813781102290993624145466462548468750000000, 853919457548839876430168021909087781068317609391760063848644003134545234791873702174757609333087463220123407683312737467402827289609877170673058467072926232858501013240625000, -889338579731123657300335367085196101945031228837229710956291192569000704051567165879290393195000, 1]).roots(QQbar)\n```\nfails because it tries to use numpy to find the roots of a polynomial where some coefficients are floating-point infinity.\n\nAssignee: cwitty\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/4632\n\n",
    "closed_at": "2008-11-28T21:49:55Z",
    "created_at": "2008-11-27T00:39:15Z",
    "labels": [
        "component: numerical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.2.1",
    "title": "[with patch, with positive review] .roots(ring=QQbar) fails for polynomials with enormous (rational) coefficients",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/4632",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```
```
sage: QQ['x']([-1574806689856485203713606790878806324846144211919939275932838223695235514282561297210584228295501990367896802287219614615718592306790806998478594573136498271898097227253339508472806599150574830973085668693785410871971313394976319704438483766679073615090307688071361570760253069748188250790686216116761641028997571981684497151720169056998220786278540994912669786651060910653545724175382042083495315866044137120083382859756320538222167370892414005604562057485506805590016305081667636242948134404040973531913166015302665956067878096607378584971478359783801542379092931747436523437500000000, -193515932916412990666476999904798981838783908664420988959823642066771192557156670863359708607729027554054703175272513097505138750681648289302786055327661244638666946766701871248492974002783633284663059534277050056388430626073123883006035020112991320833380652459040398248733202585248419694781102412345882087960535667042197701263875700609785583388094437490661697529942850974637145614502894865563658714889959149063444714656791303142632425977864052679698255996045239095634437997573963962429956870293270111083984375000000000, 83170608189851115406174052156020720006391221141822354139926261428103839206727940911499007309157560650324863068691249192581307931920254125633191130600449087349613636925163088513950945582369917075355210785440126887558346533726356989539553338506358560310306102959778069177179372222395037680173799313526664796809377865459533346598769484352028174469530113441058554304204590311274377428022769589018439585016413933419001103744044069987352241516113281250000000, 30780596844236145136671266066720159143772212705756140218160846382486086875917672569425439369657418375595991121876711014161905477956619986681576758421169748750674431330473384186475201251946484719689348800350470917022367299090454906257957127467247749613559761631288914151049175625483137995463393355067411691507776830072699817727104023701041344647669946847730352298451503906250000000000, 16837026080764386677826809963409589901906832169336314656090773268188533369173850472410642832904824882464821987940061157426041992904344896272244589245797112816182726139239310057740408111797911631913842732844850790967905084066195716939266674597632685094885825488090255475873154607960411323906396752521370605468750000, -1365036509706117570424076690021366855689949499827289827648200295899402739643890697790041978512460641225637590846458966227951950685833117543434624092525726218602560944878937528961934417330262388045264194813781102290993624145466462548468750000000, 853919457548839876430168021909087781068317609391760063848644003134545234791873702174757609333087463220123407683312737467402827289609877170673058467072926232858501013240625000, -889338579731123657300335367085196101945031228837229710956291192569000704051567165879290393195000, 1]).roots(QQbar)
```
fails because it tries to use numpy to find the roots of a polynomial where some coefficients are floating-point infinity.

Assignee: cwitty

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/4632





---

archive/issue_comments_037800.json:
```json
{
    "body": "Attachment [trac4632-enormous-coeffs-roots.patch](tarball://root/attachments/some-uuid/ticket4632/trac4632-enormous-coeffs-roots.patch) by cwitty created at 2008-11-28 17:38:10",
    "created_at": "2008-11-28T17:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4632#issuecomment-37800",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

Attachment [trac4632-enormous-coeffs-roots.patch](tarball://root/attachments/some-uuid/ticket4632/trac4632-enormous-coeffs-roots.patch) by cwitty created at 2008-11-28 17:38:10



---

archive/issue_comments_037801.json:
```json
{
    "body": "<a id='comment:1'></a>The attached patch fixes the problem (which also shows up as .roots(ring=CC) failing needlessly).",
    "created_at": "2008-11-28T17:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4632#issuecomment-37801",
    "user": "https://trac.sagemath.org/admin/accounts/users/cwitty"
}
```

<a id='comment:1'></a>The attached patch fixes the problem (which also shows up as .roots(ring=CC) failing needlessly).



---

archive/issue_comments_037802.json:
```json
{
    "body": "<a id='comment:2'></a>Still trouble:\n\n```\nsage: i1 = QQ['x'].0\nsage: 64142895751684972523861209285243282417707075329583674916117055188381394775628232666253440274186493488594874737405053591961632429138669138467297304724926962706230467037061800892052686428670590014901138630952149649710687408091127872467041015625 + \\\n20518713450315039322056250166088677399879179929554356597510415893439402054648039918099259058046422019712028170247806685000018681797593217868525785092085046308791139713218965061698940798604284522971262298949676588165941352844238281250000000*i1 + \\\n  12100960474360844852430089655545281513402833676859514717108294878572637167944626649959989923111097779896784230770808939216097183999909581480028275696898705356370334583174123713781608169021012180602575703926423575264648437500000000000000*i1^2 + \\\n  2605913589677160923631578932221252754861605246045698298923254729863286128917018068286069560387433296812804379214195609656093433213817341016672860153066568159542474331872213113284682303721328193165639027164489675000000000000000000000*i1^3 + \\\n  658259041485800976464302816116165215588236679873688147456723398511014527766003546546189637018719993970656294140752674263260405589667084004039725718906236759602716546087855161325790058548613293536926140838400000000000000000000000*i1^4 + \\\n  83854577222399022729090550461001938963657799535621113098887788754207755899629343668467056325038418901089451913134625030675149852634509566282127491809380290734179465166656517242795764550986198273186971648000000000000000000000*i1^5 + \\\n  11077342604533532525164090252320941615267509311333261074688160935771204008824783486355668815946618659325391586459706407800613824973226349002621729497752971963360336219028604043138670634200427191599104000000000000000000000*i1^6 + \\\n  881054522285626541517785542148420250688543924427857527709534753295899811009105208652356737247996544458276153340176562728483906684871855873552445635627957227774649742144091721258895691523604820787200000000000000000000*i1^7 + \\\n  75164979846414113543014721937221377774789918745150707905320399106583691885453904110964557260667320981478056027569246959425808622997355463290946341656722085188899310506124978198222746057718104064000000000000000000*i1^8 + \\\n  3913181683651999237383556151030509326567625094606369073062492876717959656737362991811448719761936127356389404590392279701275686688334547586721653925980556331947809647149866809107334022823936000000000000000000*i1^9 + \\\n  207945309923197227675066394920813581825473908934247588739515618804343576736081709076056978177837018217092693772146505845724503343162348632248309255642711748310752466973323126449861233213440000000000000000*i1^10 + \\\n  6716701065601380210100545970025344666144718133850671325025891235052150864344047553683076758757863399269458671558758355855458326738998435933269138482472116546974274283086234590921097216000000000000000*i1^11 + \\\n  190893821910195783437104046267707195948674755680199148146705868373592804991712403182669273886408506303303003423730737922041242308788908870982844997014855211593187677984862800707584000000000000000*i1^12 + \\\n  5867629873133525139602740661293389148687535809186142469423758963783693568989291159182499553241195137899010397662697136940761634420038956221772211285150148829586825005530328596480000000000000*i1^13 + \\\n  174128066474636339040468251199022844413910131388235902802651357105670999550310866544561172725633537026660188116703713702197111741946500688037944384258694561126973588763574272000000000000*i1^14 + \\\n  -743655179717315648408847727273753467171201293115039408736167509269910571278730908313802613474563508710939311612895559452283318993584503538008388945032561920510367734169600000000000*i1^15 + \\\n  2704263466440724763673019600029775165623071386021141657434785834092033407599191379221798097482965813066619946664401950353695134689638751295739555518753625253284413440000000000*i1^16 + \\\n  -7920657661346328516849663729933551966940189067473758528128786228728342737909655399359152717186692163201977219768061088078556576244522397147089917747732336869376000000000*i1^17 + \\\n  10815601288653108660863718803498725333145395957746798702542184994173534597009611774372771721245769184996754028158132835031332463558108904175895492173181747200000000*i1^18 + \\\n  -7025259394914985023537560410179506117495296226061783298311047304126733767683332500692411463584846958339961977350118838859647625974149724354297819299840000000*i1^19 + \\\n  2049712876434257587528902530951534114406510123534770838199001591149040200985153955268389232240212499713962733296299202327806997075399876196433920000000*i1^20 + \\\n  -331371072860421205834083116262837202692691752472035902490617155218675792149554941144036688544674077637642745080147334984795364631694750515200000*i1^21 + \\\n  19924407448746883912216721073318980086041378210199004111080024717375745417807953798733991147988720143895388439350128718933594147389440000*i1^22 + \\\n  -644111856861065070866706525087980962518494168795535882970210317418977507771523793330182258788377809193026575862244588937805824000*i1^23 + \\\n  501494943106368931064497262537231425688088044453073779786147096541643930385166983233976016203651376921809329220852121600*i1^24 + \\\n  410433527627442134308118298393342564356899007258029841287882737255835853884049174995159057694102920573747200*i1^25 + \\\n  1012629378133008045570223396268111873016080522054603249414300801451116017815902159146572436209664*i1^26\n....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: 1012629378133008045570223396268111873016080522054603249414300801451116017815902159146572436209664*x^26 + 410433527627442134308118298393342564356899007258029841287882737255835853884049174995159057694102920573747200*x^25 + 501494943106368931064497262537231425688088044453073779786147096541643930385166983233976016203651376921809329220852121600*x^24 - 644111856861065070866706525087980962518494168795535882970210317418977507771523793330182258788377809193026575862244588937805824000*x^23 + 19924407448746883912216721073318980086041378210199004111080024717375745417807953798733991147988720143895388439350128718933594147389440000*x^22 - 331371072860421205834083116262837202692691752472035902490617155218675792149554941144036688544674077637642745080147334984795364631694750515200000*x^21 + 2049712876434257587528902530951534114406510123534770838199001591149040200985153955268389232240212499713962733296299202327806997075399876196433920000000*x^20 - 7025259394914985023537560410179506117495296226061783298311047304126733767683332500692411463584846958339961977350118838859647625974149724354297819299840000000*x^19 + 10815601288653108660863718803498725333145395957746798702542184994173534597009611774372771721245769184996754028158132835031332463558108904175895492173181747200000000*x^18 - 7920657661346328516849663729933551966940189067473758528128786228728342737909655399359152717186692163201977219768061088078556576244522397147089917747732336869376000000000*x^17 + 2704263466440724763673019600029775165623071386021141657434785834092033407599191379221798097482965813066619946664401950353695134689638751295739555518753625253284413440000000000*x^16 - 743655179717315648408847727273753467171201293115039408736167509269910571278730908313802613474563508710939311612895559452283318993584503538008388945032561920510367734169600000000000*x^15 + 174128066474636339040468251199022844413910131388235902802651357105670999550310866544561172725633537026660188116703713702197111741946500688037944384258694561126973588763574272000000000000*x^14 + 5867629873133525139602740661293389148687535809186142469423758963783693568989291159182499553241195137899010397662697136940761634420038956221772211285150148829586825005530328596480000000000000*x^13 + 190893821910195783437104046267707195948674755680199148146705868373592804991712403182669273886408506303303003423730737922041242308788908870982844997014855211593187677984862800707584000000000000000*x^12 + 6716701065601380210100545970025344666144718133850671325025891235052150864344047553683076758757863399269458671558758355855458326738998435933269138482472116546974274283086234590921097216000000000000000*x^11 + 207945309923197227675066394920813581825473908934247588739515618804343576736081709076056978177837018217092693772146505845724503343162348632248309255642711748310752466973323126449861233213440000000000000000*x^10 + 3913181683651999237383556151030509326567625094606369073062492876717959656737362991811448719761936127356389404590392279701275686688334547586721653925980556331947809647149866809107334022823936000000000000000000*x^9 + 75164979846414113543014721937221377774789918745150707905320399106583691885453904110964557260667320981478056027569246959425808622997355463290946341656722085188899310506124978198222746057718104064000000000000000000*x^8 + 881054522285626541517785542148420250688543924427857527709534753295899811009105208652356737247996544458276153340176562728483906684871855873552445635627957227774649742144091721258895691523604820787200000000000000000000*x^7 + 11077342604533532525164090252320941615267509311333261074688160935771204008824783486355668815946618659325391586459706407800613824973226349002621729497752971963360336219028604043138670634200427191599104000000000000000000000*x^6 + 83854577222399022729090550461001938963657799535621113098887788754207755899629343668467056325038418901089451913134625030675149852634509566282127491809380290734179465166656517242795764550986198273186971648000000000000000000000*x^5 + 658259041485800976464302816116165215588236679873688147456723398511014527766003546546189637018719993970656294140752674263260405589667084004039725718906236759602716546087855161325790058548613293536926140838400000000000000000000000*x^4 + 2605913589677160923631578932221252754861605246045698298923254729863286128917018068286069560387433296812804379214195609656093433213817341016672860153066568159542474331872213113284682303721328193165639027164489675000000000000000000000*x^3 + 12100960474360844852430089655545281513402833676859514717108294878572637167944626649959989923111097779896784230770808939216097183999909581480028275696898705356370334583174123713781608169021012180602575703926423575264648437500000000000000*x^2 + 20518713450315039322056250166088677399879179929554356597510415893439402054648039918099259058046422019712028170247806685000018681797593217868525785092085046308791139713218965061698940798604284522971262298949676588165941352844238281250000000*x + 64142895751684972523861209285243282417707075329583674916117055188381394775628232666253440274186493488594874737405053591961632429138669138467297304724926962706230467037061800892052686428670590014901138630952149649710687408091127872467041015625\nsage: f = _\nsage: f.roots(CC)\n\n[(470361.820245868, 1),\n (1.25177790453357e9, 1),\n (-2.03298860112789e11 + 6.74115413126603e11*I, 1),\n (-2.03298860112789e11 - 6.74115413126603e11*I, 1),\n (1.16475054726688e7 + 1.30609589354525e7*I, 1),\n (1.16475054726688e7 - 1.30609589354525e7*I, 1),\n (2.78249805898164e6 + 2.98317202510733e6*I, 1),\n (2.78249805898164e6 - 2.98317202510733e6*I, 1),\n (996595.827928498 + 437557.094541233*I, 1),\n (996595.827928498 - 437557.094541233*I, 1),\n (-1630.61319607286 + 334060.449738135*I, 1),\n (-1630.61319607286 - 334060.449738135*I, 1),\n (12732.3063661902 + 25160.0301645502*I, 1),\n (12732.3063661902 - 25160.0301645502*I, 1),\n (-21504.3150468783 + 12109.1879518910*I, 1),\n (-21504.3150468783 - 12109.1879518910*I, 1),\n (-3658.06691532790 + 13146.4980245586*I, 1),\n (-3658.06691532790 - 13146.4980245586*I, 1),\n (1879.24848431825 + 12190.5599603421*I, 1),\n (1879.24848431825 - 12190.5599603421*I, 1),\n (-4469.59051158561 + 8416.93701866920*I, 1),\n (-4469.59051158561 - 8416.93701866920*I, 1),\n (-177.340482535130 + 3401.04786031455*I, 1),\n (-177.340482535130 - 3401.04786031455*I, 1),\n (-1581.01702889358 + 4447.86744726969*I, 1),\n (-1581.01702889358 - 4447.86744726969*I, 1)]\n\nsage: f.roots(QQbar, multiplicities=False)\n---------------------------------------------------------------------------\nLinAlgError                               Traceback (most recent call last)\n\n/Users/ncalexan/.sage/temp/mero.local/6993/_Users_ncalexan__sage_init_sage_0.py in <module>()\n----> 1 \n      2 \n      3 \n      4 \n      5 \n\n/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:24158)()\n   3609 \n   3610 \n-> 3611 \n   3612 \n   3613 \n\n/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/sage/rings/polynomial/complex_roots.py in complex_roots(p, skip_squarefree, retval, min_prec)\n    321         for (factor, exp) in factors:\n    322             cfac = CCX(factor)\n--> 323             rts = cfac.roots(multiplicities=False)\n    324             irts = interval_roots(factor, rts, max(prec, min_prec))\n    325             if irts is None:\n\n/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:23239)()\n   3540 \n   3541 \n-> 3542 \n   3543 \n   3544 \n\n/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/numpy/lib/polynomial.pyc in roots(p)\n    178         A = diag(NX.ones((N-2,), p.dtype), -1)\n    179         A[0, :] = -p[1:] / p[0]\n--> 180         roots = _eigvals(A)\n    181     else:\n    182         roots = NX.array([])\n\n/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/numpy/lib/polynomial.pyc in _eigvals(arg)\n     33     \"Return the eigenvalues of the argument\"\n     34     try:\n---> 35         return eigvals(arg)\n     36     except TypeError:\n     37         get_linalg_funcs()\n\n/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/numpy/linalg/linalg.pyc in eigvals(a)\n    595     _assertRank2(a)\n    596     _assertSquareness(a)\n--> 597     _assertFinite(a)\n    598     t, result_t = _commonType(a)\n    599     real_t = _linalgRealType(t)\n\n/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/numpy/linalg/linalg.pyc in _assertFinite(*arrays)\n    123     for a in arrays:\n    124         if not (isfinite(a).all()):\n--> 125             raise LinAlgError, \"Array must not contain infs or NaNs\"\n    126 \n    127 def _assertNonEmpty(*arrays):\n\nLinAlgError: Array must not contain infs or NaNs\n```",
    "created_at": "2008-11-28T19:13:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4632#issuecomment-37802",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:2'></a>Still trouble:

```
sage: i1 = QQ['x'].0
sage: 64142895751684972523861209285243282417707075329583674916117055188381394775628232666253440274186493488594874737405053591961632429138669138467297304724926962706230467037061800892052686428670590014901138630952149649710687408091127872467041015625 + \
20518713450315039322056250166088677399879179929554356597510415893439402054648039918099259058046422019712028170247806685000018681797593217868525785092085046308791139713218965061698940798604284522971262298949676588165941352844238281250000000*i1 + \
  12100960474360844852430089655545281513402833676859514717108294878572637167944626649959989923111097779896784230770808939216097183999909581480028275696898705356370334583174123713781608169021012180602575703926423575264648437500000000000000*i1^2 + \
  2605913589677160923631578932221252754861605246045698298923254729863286128917018068286069560387433296812804379214195609656093433213817341016672860153066568159542474331872213113284682303721328193165639027164489675000000000000000000000*i1^3 + \
  658259041485800976464302816116165215588236679873688147456723398511014527766003546546189637018719993970656294140752674263260405589667084004039725718906236759602716546087855161325790058548613293536926140838400000000000000000000000*i1^4 + \
  83854577222399022729090550461001938963657799535621113098887788754207755899629343668467056325038418901089451913134625030675149852634509566282127491809380290734179465166656517242795764550986198273186971648000000000000000000000*i1^5 + \
  11077342604533532525164090252320941615267509311333261074688160935771204008824783486355668815946618659325391586459706407800613824973226349002621729497752971963360336219028604043138670634200427191599104000000000000000000000*i1^6 + \
  881054522285626541517785542148420250688543924427857527709534753295899811009105208652356737247996544458276153340176562728483906684871855873552445635627957227774649742144091721258895691523604820787200000000000000000000*i1^7 + \
  75164979846414113543014721937221377774789918745150707905320399106583691885453904110964557260667320981478056027569246959425808622997355463290946341656722085188899310506124978198222746057718104064000000000000000000*i1^8 + \
  3913181683651999237383556151030509326567625094606369073062492876717959656737362991811448719761936127356389404590392279701275686688334547586721653925980556331947809647149866809107334022823936000000000000000000*i1^9 + \
  207945309923197227675066394920813581825473908934247588739515618804343576736081709076056978177837018217092693772146505845724503343162348632248309255642711748310752466973323126449861233213440000000000000000*i1^10 + \
  6716701065601380210100545970025344666144718133850671325025891235052150864344047553683076758757863399269458671558758355855458326738998435933269138482472116546974274283086234590921097216000000000000000*i1^11 + \
  190893821910195783437104046267707195948674755680199148146705868373592804991712403182669273886408506303303003423730737922041242308788908870982844997014855211593187677984862800707584000000000000000*i1^12 + \
  5867629873133525139602740661293389148687535809186142469423758963783693568989291159182499553241195137899010397662697136940761634420038956221772211285150148829586825005530328596480000000000000*i1^13 + \
  174128066474636339040468251199022844413910131388235902802651357105670999550310866544561172725633537026660188116703713702197111741946500688037944384258694561126973588763574272000000000000*i1^14 + \
  -743655179717315648408847727273753467171201293115039408736167509269910571278730908313802613474563508710939311612895559452283318993584503538008388945032561920510367734169600000000000*i1^15 + \
  2704263466440724763673019600029775165623071386021141657434785834092033407599191379221798097482965813066619946664401950353695134689638751295739555518753625253284413440000000000*i1^16 + \
  -7920657661346328516849663729933551966940189067473758528128786228728342737909655399359152717186692163201977219768061088078556576244522397147089917747732336869376000000000*i1^17 + \
  10815601288653108660863718803498725333145395957746798702542184994173534597009611774372771721245769184996754028158132835031332463558108904175895492173181747200000000*i1^18 + \
  -7025259394914985023537560410179506117495296226061783298311047304126733767683332500692411463584846958339961977350118838859647625974149724354297819299840000000*i1^19 + \
  2049712876434257587528902530951534114406510123534770838199001591149040200985153955268389232240212499713962733296299202327806997075399876196433920000000*i1^20 + \
  -331371072860421205834083116262837202692691752472035902490617155218675792149554941144036688544674077637642745080147334984795364631694750515200000*i1^21 + \
  19924407448746883912216721073318980086041378210199004111080024717375745417807953798733991147988720143895388439350128718933594147389440000*i1^22 + \
  -644111856861065070866706525087980962518494168795535882970210317418977507771523793330182258788377809193026575862244588937805824000*i1^23 + \
  501494943106368931064497262537231425688088044453073779786147096541643930385166983233976016203651376921809329220852121600*i1^24 + \
  410433527627442134308118298393342564356899007258029841287882737255835853884049174995159057694102920573747200*i1^25 + \
  1012629378133008045570223396268111873016080522054603249414300801451116017815902159146572436209664*i1^26
....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: ....: 1012629378133008045570223396268111873016080522054603249414300801451116017815902159146572436209664*x^26 + 410433527627442134308118298393342564356899007258029841287882737255835853884049174995159057694102920573747200*x^25 + 501494943106368931064497262537231425688088044453073779786147096541643930385166983233976016203651376921809329220852121600*x^24 - 644111856861065070866706525087980962518494168795535882970210317418977507771523793330182258788377809193026575862244588937805824000*x^23 + 19924407448746883912216721073318980086041378210199004111080024717375745417807953798733991147988720143895388439350128718933594147389440000*x^22 - 331371072860421205834083116262837202692691752472035902490617155218675792149554941144036688544674077637642745080147334984795364631694750515200000*x^21 + 2049712876434257587528902530951534114406510123534770838199001591149040200985153955268389232240212499713962733296299202327806997075399876196433920000000*x^20 - 7025259394914985023537560410179506117495296226061783298311047304126733767683332500692411463584846958339961977350118838859647625974149724354297819299840000000*x^19 + 10815601288653108660863718803498725333145395957746798702542184994173534597009611774372771721245769184996754028158132835031332463558108904175895492173181747200000000*x^18 - 7920657661346328516849663729933551966940189067473758528128786228728342737909655399359152717186692163201977219768061088078556576244522397147089917747732336869376000000000*x^17 + 2704263466440724763673019600029775165623071386021141657434785834092033407599191379221798097482965813066619946664401950353695134689638751295739555518753625253284413440000000000*x^16 - 743655179717315648408847727273753467171201293115039408736167509269910571278730908313802613474563508710939311612895559452283318993584503538008388945032561920510367734169600000000000*x^15 + 174128066474636339040468251199022844413910131388235902802651357105670999550310866544561172725633537026660188116703713702197111741946500688037944384258694561126973588763574272000000000000*x^14 + 5867629873133525139602740661293389148687535809186142469423758963783693568989291159182499553241195137899010397662697136940761634420038956221772211285150148829586825005530328596480000000000000*x^13 + 190893821910195783437104046267707195948674755680199148146705868373592804991712403182669273886408506303303003423730737922041242308788908870982844997014855211593187677984862800707584000000000000000*x^12 + 6716701065601380210100545970025344666144718133850671325025891235052150864344047553683076758757863399269458671558758355855458326738998435933269138482472116546974274283086234590921097216000000000000000*x^11 + 207945309923197227675066394920813581825473908934247588739515618804343576736081709076056978177837018217092693772146505845724503343162348632248309255642711748310752466973323126449861233213440000000000000000*x^10 + 3913181683651999237383556151030509326567625094606369073062492876717959656737362991811448719761936127356389404590392279701275686688334547586721653925980556331947809647149866809107334022823936000000000000000000*x^9 + 75164979846414113543014721937221377774789918745150707905320399106583691885453904110964557260667320981478056027569246959425808622997355463290946341656722085188899310506124978198222746057718104064000000000000000000*x^8 + 881054522285626541517785542148420250688543924427857527709534753295899811009105208652356737247996544458276153340176562728483906684871855873552445635627957227774649742144091721258895691523604820787200000000000000000000*x^7 + 11077342604533532525164090252320941615267509311333261074688160935771204008824783486355668815946618659325391586459706407800613824973226349002621729497752971963360336219028604043138670634200427191599104000000000000000000000*x^6 + 83854577222399022729090550461001938963657799535621113098887788754207755899629343668467056325038418901089451913134625030675149852634509566282127491809380290734179465166656517242795764550986198273186971648000000000000000000000*x^5 + 658259041485800976464302816116165215588236679873688147456723398511014527766003546546189637018719993970656294140752674263260405589667084004039725718906236759602716546087855161325790058548613293536926140838400000000000000000000000*x^4 + 2605913589677160923631578932221252754861605246045698298923254729863286128917018068286069560387433296812804379214195609656093433213817341016672860153066568159542474331872213113284682303721328193165639027164489675000000000000000000000*x^3 + 12100960474360844852430089655545281513402833676859514717108294878572637167944626649959989923111097779896784230770808939216097183999909581480028275696898705356370334583174123713781608169021012180602575703926423575264648437500000000000000*x^2 + 20518713450315039322056250166088677399879179929554356597510415893439402054648039918099259058046422019712028170247806685000018681797593217868525785092085046308791139713218965061698940798604284522971262298949676588165941352844238281250000000*x + 64142895751684972523861209285243282417707075329583674916117055188381394775628232666253440274186493488594874737405053591961632429138669138467297304724926962706230467037061800892052686428670590014901138630952149649710687408091127872467041015625
sage: f = _
sage: f.roots(CC)

[(470361.820245868, 1),
 (1.25177790453357e9, 1),
 (-2.03298860112789e11 + 6.74115413126603e11*I, 1),
 (-2.03298860112789e11 - 6.74115413126603e11*I, 1),
 (1.16475054726688e7 + 1.30609589354525e7*I, 1),
 (1.16475054726688e7 - 1.30609589354525e7*I, 1),
 (2.78249805898164e6 + 2.98317202510733e6*I, 1),
 (2.78249805898164e6 - 2.98317202510733e6*I, 1),
 (996595.827928498 + 437557.094541233*I, 1),
 (996595.827928498 - 437557.094541233*I, 1),
 (-1630.61319607286 + 334060.449738135*I, 1),
 (-1630.61319607286 - 334060.449738135*I, 1),
 (12732.3063661902 + 25160.0301645502*I, 1),
 (12732.3063661902 - 25160.0301645502*I, 1),
 (-21504.3150468783 + 12109.1879518910*I, 1),
 (-21504.3150468783 - 12109.1879518910*I, 1),
 (-3658.06691532790 + 13146.4980245586*I, 1),
 (-3658.06691532790 - 13146.4980245586*I, 1),
 (1879.24848431825 + 12190.5599603421*I, 1),
 (1879.24848431825 - 12190.5599603421*I, 1),
 (-4469.59051158561 + 8416.93701866920*I, 1),
 (-4469.59051158561 - 8416.93701866920*I, 1),
 (-177.340482535130 + 3401.04786031455*I, 1),
 (-177.340482535130 - 3401.04786031455*I, 1),
 (-1581.01702889358 + 4447.86744726969*I, 1),
 (-1581.01702889358 - 4447.86744726969*I, 1)]

sage: f.roots(QQbar, multiplicities=False)
---------------------------------------------------------------------------
LinAlgError                               Traceback (most recent call last)

/Users/ncalexan/.sage/temp/mero.local/6993/_Users_ncalexan__sage_init_sage_0.py in <module>()
----> 1 
      2 
      3 
      4 
      5 

/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:24158)()
   3609 
   3610 
-> 3611 
   3612 
   3613 

/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/sage/rings/polynomial/complex_roots.py in complex_roots(p, skip_squarefree, retval, min_prec)
    321         for (factor, exp) in factors:
    322             cfac = CCX(factor)
--> 323             rts = cfac.roots(multiplicities=False)
    324             irts = interval_roots(factor, rts, max(prec, min_prec))
    325             if irts is None:

/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/sage/rings/polynomial/polynomial_element.so in sage.rings.polynomial.polynomial_element.Polynomial.roots (sage/rings/polynomial/polynomial_element.c:23239)()
   3540 
   3541 
-> 3542 
   3543 
   3544 

/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/numpy/lib/polynomial.pyc in roots(p)
    178         A = diag(NX.ones((N-2,), p.dtype), -1)
    179         A[0, :] = -p[1:] / p[0]
--> 180         roots = _eigvals(A)
    181     else:
    182         roots = NX.array([])

/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/numpy/lib/polynomial.pyc in _eigvals(arg)
     33     "Return the eigenvalues of the argument"
     34     try:
---> 35         return eigvals(arg)
     36     except TypeError:
     37         get_linalg_funcs()

/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/numpy/linalg/linalg.pyc in eigvals(a)
    595     _assertRank2(a)
    596     _assertSquareness(a)
--> 597     _assertFinite(a)
    598     t, result_t = _commonType(a)
    599     real_t = _linalgRealType(t)

/Users/ncalexan/sage-3.2.1.alpha1/local/lib/python2.5/site-packages/numpy/linalg/linalg.pyc in _assertFinite(*arrays)
    123     for a in arrays:
    124         if not (isfinite(a).all()):
--> 125             raise LinAlgError, "Array must not contain infs or NaNs"
    126 
    127 def _assertNonEmpty(*arrays):

LinAlgError: Array must not contain infs or NaNs
```



---

archive/issue_comments_037803.json:
```json
{
    "body": "<a id='comment:3'></a>This is easier to read:\n\n```\nsage: f = QQ['x']([64142895751684972523861209285243282417707075329583674916117055188381394775628232666253440274186493488594874737405053591961632429138669138467297304724926962706230467037061800892052686428670590014901138630952149649710687408091127872467041015625, 20518713450315039322056250166088677399879179929554356597510415893439402054648039918099259058046422019712028170247806685000018681797593217868525785092085046308791139713218965061698940798604284522971262298949676588165941352844238281250000000, 12100960474360844852430089655545281513402833676859514717108294878572637167944626649959989923111097779896784230770808939216097183999909581480028275696898705356370334583174123713781608169021012180602575703926423575264648437500000000000000, 2605913589677160923631578932221252754861605246045698298923254729863286128917018068286069560387433296812804379214195609656093433213817341016672860153066568159542474331872213113284682303721328193165639027164489675000000000000000000000, 658259041485800976464302816116165215588236679873688147456723398511014527766003546546189637018719993970656294140752674263260405589667084004039725718906236759602716546087855161325790058548613293536926140838400000000000000000000000, 83854577222399022729090550461001938963657799535621113098887788754207755899629343668467056325038418901089451913134625030675149852634509566282127491809380290734179465166656517242795764550986198273186971648000000000000000000000, 11077342604533532525164090252320941615267509311333261074688160935771204008824783486355668815946618659325391586459706407800613824973226349002621729497752971963360336219028604043138670634200427191599104000000000000000000000, 881054522285626541517785542148420250688543924427857527709534753295899811009105208652356737247996544458276153340176562728483906684871855873552445635627957227774649742144091721258895691523604820787200000000000000000000, 75164979846414113543014721937221377774789918745150707905320399106583691885453904110964557260667320981478056027569246959425808622997355463290946341656722085188899310506124978198222746057718104064000000000000000000, 3913181683651999237383556151030509326567625094606369073062492876717959656737362991811448719761936127356389404590392279701275686688334547586721653925980556331947809647149866809107334022823936000000000000000000, 207945309923197227675066394920813581825473908934247588739515618804343576736081709076056978177837018217092693772146505845724503343162348632248309255642711748310752466973323126449861233213440000000000000000, 6716701065601380210100545970025344666144718133850671325025891235052150864344047553683076758757863399269458671558758355855458326738998435933269138482472116546974274283086234590921097216000000000000000, 190893821910195783437104046267707195948674755680199148146705868373592804991712403182669273886408506303303003423730737922041242308788908870982844997014855211593187677984862800707584000000000000000, 5867629873133525139602740661293389148687535809186142469423758963783693568989291159182499553241195137899010397662697136940761634420038956221772211285150148829586825005530328596480000000000000, 174128066474636339040468251199022844413910131388235902802651357105670999550310866544561172725633537026660188116703713702197111741946500688037944384258694561126973588763574272000000000000, -743655179717315648408847727273753467171201293115039408736167509269910571278730908313802613474563508710939311612895559452283318993584503538008388945032561920510367734169600000000000, 2704263466440724763673019600029775165623071386021141657434785834092033407599191379221798097482965813066619946664401950353695134689638751295739555518753625253284413440000000000, -7920657661346328516849663729933551966940189067473758528128786228728342737909655399359152717186692163201977219768061088078556576244522397147089917747732336869376000000000, 10815601288653108660863718803498725333145395957746798702542184994173534597009611774372771721245769184996754028158132835031332463558108904175895492173181747200000000, -7025259394914985023537560410179506117495296226061783298311047304126733767683332500692411463584846958339961977350118838859647625974149724354297819299840000000, 2049712876434257587528902530951534114406510123534770838199001591149040200985153955268389232240212499713962733296299202327806997075399876196433920000000, -331371072860421205834083116262837202692691752472035902490617155218675792149554941144036688544674077637642745080147334984795364631694750515200000, 19924407448746883912216721073318980086041378210199004111080024717375745417807953798733991147988720143895388439350128718933594147389440000, -644111856861065070866706525087980962518494168795535882970210317418977507771523793330182258788377809193026575862244588937805824000, 501494943106368931064497262537231425688088044453073779786147096541643930385166983233976016203651376921809329220852121600, 410433527627442134308118298393342564356899007258029841287882737255835853884049174995159057694102920573747200, 1012629378133008045570223396268111873016080522054603249414300801451116017815902159146572436209664])\n```",
    "created_at": "2008-11-28T19:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4632#issuecomment-37803",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:3'></a>This is easier to read:

```
sage: f = QQ['x']([64142895751684972523861209285243282417707075329583674916117055188381394775628232666253440274186493488594874737405053591961632429138669138467297304724926962706230467037061800892052686428670590014901138630952149649710687408091127872467041015625, 20518713450315039322056250166088677399879179929554356597510415893439402054648039918099259058046422019712028170247806685000018681797593217868525785092085046308791139713218965061698940798604284522971262298949676588165941352844238281250000000, 12100960474360844852430089655545281513402833676859514717108294878572637167944626649959989923111097779896784230770808939216097183999909581480028275696898705356370334583174123713781608169021012180602575703926423575264648437500000000000000, 2605913589677160923631578932221252754861605246045698298923254729863286128917018068286069560387433296812804379214195609656093433213817341016672860153066568159542474331872213113284682303721328193165639027164489675000000000000000000000, 658259041485800976464302816116165215588236679873688147456723398511014527766003546546189637018719993970656294140752674263260405589667084004039725718906236759602716546087855161325790058548613293536926140838400000000000000000000000, 83854577222399022729090550461001938963657799535621113098887788754207755899629343668467056325038418901089451913134625030675149852634509566282127491809380290734179465166656517242795764550986198273186971648000000000000000000000, 11077342604533532525164090252320941615267509311333261074688160935771204008824783486355668815946618659325391586459706407800613824973226349002621729497752971963360336219028604043138670634200427191599104000000000000000000000, 881054522285626541517785542148420250688543924427857527709534753295899811009105208652356737247996544458276153340176562728483906684871855873552445635627957227774649742144091721258895691523604820787200000000000000000000, 75164979846414113543014721937221377774789918745150707905320399106583691885453904110964557260667320981478056027569246959425808622997355463290946341656722085188899310506124978198222746057718104064000000000000000000, 3913181683651999237383556151030509326567625094606369073062492876717959656737362991811448719761936127356389404590392279701275686688334547586721653925980556331947809647149866809107334022823936000000000000000000, 207945309923197227675066394920813581825473908934247588739515618804343576736081709076056978177837018217092693772146505845724503343162348632248309255642711748310752466973323126449861233213440000000000000000, 6716701065601380210100545970025344666144718133850671325025891235052150864344047553683076758757863399269458671558758355855458326738998435933269138482472116546974274283086234590921097216000000000000000, 190893821910195783437104046267707195948674755680199148146705868373592804991712403182669273886408506303303003423730737922041242308788908870982844997014855211593187677984862800707584000000000000000, 5867629873133525139602740661293389148687535809186142469423758963783693568989291159182499553241195137899010397662697136940761634420038956221772211285150148829586825005530328596480000000000000, 174128066474636339040468251199022844413910131388235902802651357105670999550310866544561172725633537026660188116703713702197111741946500688037944384258694561126973588763574272000000000000, -743655179717315648408847727273753467171201293115039408736167509269910571278730908313802613474563508710939311612895559452283318993584503538008388945032561920510367734169600000000000, 2704263466440724763673019600029775165623071386021141657434785834092033407599191379221798097482965813066619946664401950353695134689638751295739555518753625253284413440000000000, -7920657661346328516849663729933551966940189067473758528128786228728342737909655399359152717186692163201977219768061088078556576244522397147089917747732336869376000000000, 10815601288653108660863718803498725333145395957746798702542184994173534597009611774372771721245769184996754028158132835031332463558108904175895492173181747200000000, -7025259394914985023537560410179506117495296226061783298311047304126733767683332500692411463584846958339961977350118838859647625974149724354297819299840000000, 2049712876434257587528902530951534114406510123534770838199001591149040200985153955268389232240212499713962733296299202327806997075399876196433920000000, -331371072860421205834083116262837202692691752472035902490617155218675792149554941144036688544674077637642745080147334984795364631694750515200000, 19924407448746883912216721073318980086041378210199004111080024717375745417807953798733991147988720143895388439350128718933594147389440000, -644111856861065070866706525087980962518494168795535882970210317418977507771523793330182258788377809193026575862244588937805824000, 501494943106368931064497262537231425688088044453073779786147096541643930385166983233976016203651376921809329220852121600, 410433527627442134308118298393342564356899007258029841287882737255835853884049174995159057694102920573747200, 1012629378133008045570223396268111873016080522054603249414300801451116017815902159146572436209664])
```



---

archive/issue_comments_037804.json:
```json
{
    "body": "<a id='comment:4'></a>Attachment [trac4632-enormous-coeffs-roots-v2.patch](tarball://root/attachments/some-uuid/ticket4632/trac4632-enormous-coeffs-roots-v2.patch) by @ncalexan created at 2008-11-28 19:42:56\n\nAfter some troubleshooting, this works on my machine for very large examples.",
    "created_at": "2008-11-28T19:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4632#issuecomment-37804",
    "user": "https://github.com/ncalexan"
}
```

<a id='comment:4'></a>Attachment [trac4632-enormous-coeffs-roots-v2.patch](tarball://root/attachments/some-uuid/ticket4632/trac4632-enormous-coeffs-roots-v2.patch) by @ncalexan created at 2008-11-28 19:42:56

After some troubleshooting, this works on my machine for very large examples.



---

archive/issue_comments_037805.json:
```json
{
    "body": "<a id='comment:5'></a>Merged trac4632-enormous-coeffs-roots-v2.patch in Sage 3.2.1.rc0",
    "created_at": "2008-11-28T21:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4632#issuecomment-37805",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>Merged trac4632-enormous-coeffs-roots-v2.patch in Sage 3.2.1.rc0



---

archive/issue_events_010559.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-11-28T21:49:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4632#event-10559"
}
```



---

archive/issue_comments_037806.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-11-28T21:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4632#issuecomment-37806",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_events_010560.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-11-28T21:49:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/4632",
    "milestone": "sage-3.2.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4632#event-10560"
}
```
