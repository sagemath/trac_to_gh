# Issue 4049: Don't use the -i option to tar as it does not exist on most BSDs

archive/issues_004049.json:
```json
{
    "assignees": [],
    "body": "While trying to compile sage under OpenBSD, the first problem I encountered was that it could not extract the spkgs because it passes the -i option to tar which is not recognized.  \n\nAfter reading the description of the meaning of that option on a linux man page:\n\n `--ignore-zeros'\n `-i'\n      With this option, `tar' will ignore zeroed blocks in the archive,\n      which normally signals EOF. \n\nAnd additional information about what is a zero block:\n\n Normally, `tar' stops reading when it encounters a block of zeros\n between file entries (which usually indicates the end of the archive).\n `--ignore-zeros' (`-i') allows `tar' to completely read an archive\n which contains a block of zeros before the end (i.e. a damaged archive,\n or one which was created by concatenating several archives together).\n\nI concluded that unless some spkgs are created by concatenating several tar archives together this option can be safely removed.\n\nIf there is a consensus to keep the option, I could always make a new patch \n\nAssignee: **anakha**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4049_\n\n",
    "closed_at": "2008-09-04T00:31:38Z",
    "created_at": "2008-09-03T17:59:15Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.1.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Don't use the -i option to tar as it does not exist on most BSDs",
    "type": "issue",
    "updated_at": "2008-09-04T00:31:38Z",
    "url": "https://github.com/sagemath/sage/issues/4049",
    "user": "https://github.com/sagetrac-anakha"
}
```
While trying to compile sage under OpenBSD, the first problem I encountered was that it could not extract the spkgs because it passes the -i option to tar which is not recognized.  

After reading the description of the meaning of that option on a linux man page:

 `--ignore-zeros'
 `-i'
      With this option, `tar' will ignore zeroed blocks in the archive,
      which normally signals EOF. 

And additional information about what is a zero block:

 Normally, `tar' stops reading when it encounters a block of zeros
 between file entries (which usually indicates the end of the archive).
 `--ignore-zeros' (`-i') allows `tar' to completely read an archive
 which contains a block of zeros before the end (i.e. a damaged archive,
 or one which was created by concatenating several archives together).

I concluded that unless some spkgs are created by concatenating several tar archives together this option can be safely removed.

If there is a consensus to keep the option, I could always make a new patch 

Assignee: **anakha**

_Issue created by migration from https://trac.sagemath.org/ticket/4049_





---

archive/issue_events_039400.json:
```json
{
    "actor": "https://github.com/sagetrac-anakha",
    "created_at": "2008-09-03T17:59:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "milestone_number": null,
    "milestone_title": "sage-3.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39400"
}
```



---

archive/issue_events_039401.json:
```json
{
    "actor": "https://github.com/sagetrac-anakha",
    "created_at": "2008-09-03T17:59:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39401"
}
```



---

archive/issue_events_039402.json:
```json
{
    "actor": "https://github.com/sagetrac-anakha",
    "created_at": "2008-09-03T17:59:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39402"
}
```



---

archive/issue_comments_023771.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAbout the new patch, I meant a new patch that only removes the option on systems where it is not supported.",
    "created_at": "2008-09-03T18:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4049#issuecomment-23771",
    "user": "https://github.com/sagetrac-anakha"
}
```

<a id='comment:1'>Comment 1:</a>
About the new patch, I meant a new patch that only removes the option on systems where it is not supported.



---

archive/issue_events_039403.json:
```json
{
    "actor": "https://github.com/sagetrac-anakha",
    "created_at": "2008-09-03T18:03:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39403"
}
```



---

archive/issue_events_039404.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-03T18:10:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "milestone_number": null,
    "milestone_title": "sage-3.1.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39404"
}
```



---

archive/issue_comments_023772.json:
```json
{
    "body": "Changed assignee from **cwitty** to **anakha**",
    "created_at": "2008-09-03T18:10:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4049#issuecomment-23772",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

Changed assignee from **cwitty** to **anakha**



---

archive/issue_events_039405.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-03T18:10:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39405"
}
```



---

archive/issue_events_039406.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-03T18:10:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39406"
}
```



---

archive/issue_comments_023773.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nAttachment: **[trac_4049.patch.gz](https://github.com/sagemath/sage/files/ticket4049/trac_4049.patch.gz)**\n\nPatch looks good to me. Positive review.\n\nOne general problem with Sage is that we depend on gnumake and gtar in a couple places. The shell scripts we use also assume GNUisms in a couple places, but I would be more than happy to get those wiped out.\n\nFor now I would suggest copying gmake into $SAGE_LOCAL/bin and rename it make. You should also treat gld and gas the same way for now.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-03T18:10:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4049#issuecomment-23773",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:2'>Comment 2:</a>
Attachment: **[trac_4049.patch.gz](https://github.com/sagemath/sage/files/ticket4049/trac_4049.patch.gz)**

Patch looks good to me. Positive review.

One general problem with Sage is that we depend on gnumake and gtar in a couple places. The shell scripts we use also assume GNUisms in a couple places, but I would be more than happy to get those wiped out.

For now I would suggest copying gmake into $SAGE_LOCAL/bin and rename it make. You should also treat gld and gas the same way for now.

Cheers,

Michael



---

archive/issue_comments_023774.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nUntil now, the regular make has not given me any errors.  I had to install bash though.  I will try to use the native system binaries as much as possible and only revert to the gnu ones if it fails too much.\n\nOtherwise, expect more reports like this one to remove GNUisms where it makes sense.",
    "created_at": "2008-09-03T18:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4049#issuecomment-23774",
    "user": "https://github.com/sagetrac-anakha"
}
```

<a id='comment:3'>Comment 3:</a>
Until now, the regular make has not given me any errors.  I had to install bash though.  I will try to use the native system binaries as much as possible and only revert to the gnu ones if it fails too much.

Otherwise, expect more reports like this one to remove GNUisms where it makes sense.



---

archive/issue_comments_023775.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [anakha](#comment%3A3):\n> Until now, the regular make has not given me any errors.  I had to install bash though.  I will try to use the native system binaries as much as possible and only revert to the gnu ones if it fails too much.\n> \n> Otherwise, expect more reports like this one to remove GNUisms where it makes sense.\n\nfreetype and eclib for now require gmake. We use bash for now and do not really plan to switch to a pure sh env since sh on Solaris is pretty broken. At least on FreeBSD the default location of bash is in /usr/local/bin and all shebangs of the scripts should not hard code the /bin/bash location.\n\nWe should continue this discussion on sage-devel though :)\n\nCheers,\n\nMichael",
    "created_at": "2008-09-03T18:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4049#issuecomment-23775",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [anakha](#comment%3A3):
> Until now, the regular make has not given me any errors.  I had to install bash though.  I will try to use the native system binaries as much as possible and only revert to the gnu ones if it fails too much.
> 
> Otherwise, expect more reports like this one to remove GNUisms where it makes sense.

freetype and eclib for now require gmake. We use bash for now and do not really plan to switch to a pure sh env since sh on Solaris is pretty broken. At least on FreeBSD the default location of bash is in /usr/local/bin and all shebangs of the scripts should not hard code the /bin/bash location.

We should continue this discussion on sage-devel though :)

Cheers,

Michael



---

archive/issue_events_039407.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-04T00:31:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39407"
}
```



---

archive/issue_events_039408.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-04T00:31:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4049#event-39408"
}
```



---

archive/issue_comments_023776.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nMerged in Sage 3.1.2.rc0 - and I merged the patch into both repos, i.e. spkg/base, too.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-04T00:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4049#issuecomment-23776",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:5'>Comment 5:</a>
Merged in Sage 3.1.2.rc0 - and I merged the patch into both repos, i.e. spkg/base, too.

Cheers,

Michael
