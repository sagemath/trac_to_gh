# Issue 4148: Upgrade to givaro-3.2.13rc2

archive/issues_004148.json:
```json
{
    "assignees": [
        "https://github.com/ClementPernet"
    ],
    "body": "Upgrade the givaro spkg to upstream version 3.2.13rc1.\nThis is required for the resolution of ticket #4147 and is therefore a defect.\n\nComponent: **finite rings**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4148_\n\n",
    "closed_at": "2008-09-20T02:46:16Z",
    "created_at": "2008-09-19T00:39:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20finite%20rings",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.1.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to givaro-3.2.13rc2",
    "type": "issue",
    "updated_at": "2008-09-20T02:46:16Z",
    "url": "https://github.com/sagemath/sage/issues/4148",
    "user": "https://github.com/ClementPernet"
}
```
Upgrade the givaro spkg to upstream version 3.2.13rc1.
This is required for the resolution of ticket #4147 and is therefore a defect.

Component: **finite rings**

_Issue created by migration from https://trac.sagemath.org/ticket/4148_





---

archive/issue_events_046606.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2008-09-19T00:39:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "milestone_number": null,
    "milestone_title": "sage-3.1.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46606"
}
```



---

archive/issue_events_046607.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2008-09-19T00:39:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20finite%20rings",
    "label_color": "0000ff",
    "label_name": "c: finite rings",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46607"
}
```



---

archive/issue_events_046608.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2008-09-19T00:39:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46608"
}
```



---

archive/issue_events_046609.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2008-09-19T00:39:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46609"
}
```



---

archive/issue_events_046610.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2008-09-19T00:39:53Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "subject": "https://github.com/ClementPernet",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46610"
}
```



---

archive/issue_comments_023579.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe proposed spkg is here:\n[http://sage.math.washington.edu/home/pernet/givaro-3.2.13rc1.spkg](http://sage.math.washington.edu/home/pernet/givaro-3.2.13rc1.spkg)\n\nAlready succesfully tested on sage.math and on my x86_32 Linux box.",
    "created_at": "2008-09-19T00:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23579",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:1" align="right">comment:1</div>

The proposed spkg is here:
[http://sage.math.washington.edu/home/pernet/givaro-3.2.13rc1.spkg](http://sage.math.washington.edu/home/pernet/givaro-3.2.13rc1.spkg)

Already succesfully tested on sage.math and on my x86_32 Linux box.



---

archive/issue_events_046611.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2008-09-19T00:42:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "title_is": "[need review] Upgrade to givaro-3.2.13rc1",
    "title_was": "Upgrade to givaro-3.2.13rc1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46611"
}
```



---

archive/issue_events_046612.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2008-09-19T01:26:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "title_is": "[work in progress] Upgrade to givaro-3.2.13rc1",
    "title_was": "[need review] Upgrade to givaro-3.2.13rc1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46612"
}
```



---

archive/issue_comments_023580.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI have a pb compiling givaro on PPC-OSX, because endianness parameter __BYTE_ORDER is not defined there. I am working on it.",
    "created_at": "2008-09-19T01:26:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23580",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:2" align="right">comment:2</div>

I have a pb compiling givaro on PPC-OSX, because endianness parameter __BYTE_ORDER is not defined there. I am working on it.



---

archive/issue_events_046613.json:
```json
{
    "actor": "https://github.com/ClementPernet",
    "created_at": "2008-09-19T02:33:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "title_is": "[with new spkg need review] Upgrade to givaro-3.2.13rc1",
    "title_was": "[work in progress] Upgrade to givaro-3.2.13rc1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46613"
}
```



---

archive/issue_comments_023581.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI changed the endianess detection in Givaro, which fixed the problem.\nThe new spkg is here:\n\n[http://sage.math.washington.edu/home/pernet/givaro-3.2.13rc2.spkg](http://sage.math.washington.edu/home/pernet/givaro-3.2.13rc2.spkg)",
    "created_at": "2008-09-19T02:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23581",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:3" align="right">comment:3</div>

I changed the endianess detection in Givaro, which fixed the problem.
The new spkg is here:

[http://sage.math.washington.edu/home/pernet/givaro-3.2.13rc2.spkg](http://sage.math.washington.edu/home/pernet/givaro-3.2.13rc2.spkg)



---

archive/issue_comments_023582.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSpkg looks good to me. I added some code to touch the extensions linked against Givaro so they are automatically rebuild when doing a \"sage -b\". The updated spkg is in\n\nhttp://sage.math.washington.edu/home/mabshoff/release-cycles-3.1.3/alpha0/givaro-3.2.13rc1.spkg\n\nPositive review, but I am doing some more build testing to be sure the spkg actually works.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-20T01:47:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23582",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:4" align="right">comment:4</div>

Spkg looks good to me. I added some code to touch the extensions linked against Givaro so they are automatically rebuild when doing a "sage -b". The updated spkg is in

http://sage.math.washington.edu/home/mabshoff/release-cycles-3.1.3/alpha0/givaro-3.2.13rc1.spkg

Positive review, but I am doing some more build testing to be sure the spkg actually works.

Cheers,

Michael



---

archive/issue_events_046614.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T01:47:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "title_is": "Upgrade to givaro-3.2.13rc1",
    "title_was": "[with new spkg need review] Upgrade to givaro-3.2.13rc1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46614"
}
```



---

archive/issue_events_046615.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T01:47:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46615"
}
```



---

archive/issue_events_046616.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T02:01:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46616"
}
```



---

archive/issue_events_046617.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T02:01:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46617"
}
```



---

archive/issue_comments_023583.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHhm, this spkg blows up on OSX 10.4 PPC as well as OSX 10.5 Intel with\n\n```\nMaking install in rational\n/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../.. -I../../..   -I../../../src/kernel/integer -I../../../src/kernel -I../../../src/kernel/system -I../../../src/kernel/memory   -I/Users/mabshoff/sage-3.1.2.rc2/local//include  -fPIC -I\"/Users/mabshoff/sage-3.1.2.rc2/local/include\" -MT givratcstor.lo -MD -MP -MF .deps/givratcstor.Tpo -c -o givratcstor.lo givratcstor.C\n g++ -DHAVE_CONFIG_H -I. -I../../.. -I../../.. -I../../../src/kernel/integer -I../../../src/kernel -I../../../src/kernel/system -I../../../src/kernel/memory -I/Users/mabshoff/sage-3.1.2.rc2/local//include -fPIC -I/Users/mabshoff/sage-3.1.2.rc2/local/include -MT givratcstor.lo -MD -MP -MF .deps/givratcstor.Tpo -c givratcstor.C  -fno-common -DPIC -o .libs/givratcstor.o\ngivratcstor.C:45: error: declaration of \u2018uint64 ieee::mantissa\u2019\ngivratcstor.C:42: error: conflicts with previous declaration \u2018uint64 ieee::mantissa\u2019\ngivratcstor.C:46: error: declaration of \u2018uint64 ieee::exponent\u2019\ngivratcstor.C:41: error: conflicts with previous declaration \u2018uint64 ieee::exponent\u2019\ngivratcstor.C:47: error: declaration of \u2018uint64 ieee::negative\u2019\ngivratcstor.C:40: error: conflicts with previous declaration \u2018uint64 ieee::negative\u2019\nmake[5]: *** [givratcstor.lo] Error 1\nmake[4]: *** [install-recursive] Error 1\nmake[3]: *** [install-recursive] Error 1\nmake[2]: *** [install-recursive] Error 1\nError installing givaro\n```\nPlease make sure to base this spkg off the one I link above by the same name as yours.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-20T02:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23583",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:5" align="right">comment:5</div>

Hhm, this spkg blows up on OSX 10.4 PPC as well as OSX 10.5 Intel with

```
Making install in rational
/bin/sh ../../../libtool --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I. -I../../.. -I../../..   -I../../../src/kernel/integer -I../../../src/kernel -I../../../src/kernel/system -I../../../src/kernel/memory   -I/Users/mabshoff/sage-3.1.2.rc2/local//include  -fPIC -I"/Users/mabshoff/sage-3.1.2.rc2/local/include" -MT givratcstor.lo -MD -MP -MF .deps/givratcstor.Tpo -c -o givratcstor.lo givratcstor.C
 g++ -DHAVE_CONFIG_H -I. -I../../.. -I../../.. -I../../../src/kernel/integer -I../../../src/kernel -I../../../src/kernel/system -I../../../src/kernel/memory -I/Users/mabshoff/sage-3.1.2.rc2/local//include -fPIC -I/Users/mabshoff/sage-3.1.2.rc2/local/include -MT givratcstor.lo -MD -MP -MF .deps/givratcstor.Tpo -c givratcstor.C  -fno-common -DPIC -o .libs/givratcstor.o
givratcstor.C:45: error: declaration of ‘uint64 ieee::mantissa’
givratcstor.C:42: error: conflicts with previous declaration ‘uint64 ieee::mantissa’
givratcstor.C:46: error: declaration of ‘uint64 ieee::exponent’
givratcstor.C:41: error: conflicts with previous declaration ‘uint64 ieee::exponent’
givratcstor.C:47: error: declaration of ‘uint64 ieee::negative’
givratcstor.C:40: error: conflicts with previous declaration ‘uint64 ieee::negative’
make[5]: *** [givratcstor.lo] Error 1
make[4]: *** [install-recursive] Error 1
make[3]: *** [install-recursive] Error 1
make[2]: *** [install-recursive] Error 1
Error installing givaro
```
Please make sure to base this spkg off the one I link above by the same name as yours.

Cheers,

Michael



---

archive/issue_comments_023584.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOk, the problem boils down to byte order detection being broken on OSX it seems:\n\n```\n#if     __BYTE_ORDER == __BIG_ENDIAN\n            uint64 negative:1;\n            uint64 exponent:11;\n            uint64 mantissa:52;\n#endif                          /* Big endian.  */\n#if     __BYTE_ORDER == __LITTLE_ENDIAN\n            uint64 mantissa:52;\n            uint64 exponent:11;\n            uint64 negative:1;\n#endif                          /* Little endian.  */\n```\n\nCheers,\n\nMichael",
    "created_at": "2008-09-20T02:05:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23584",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:6" align="right">comment:6</div>

Ok, the problem boils down to byte order detection being broken on OSX it seems:

```
#if     __BYTE_ORDER == __BIG_ENDIAN
            uint64 negative:1;
            uint64 exponent:11;
            uint64 mantissa:52;
#endif                          /* Big endian.  */
#if     __BYTE_ORDER == __LITTLE_ENDIAN
            uint64 mantissa:52;
            uint64 exponent:11;
            uint64 negative:1;
#endif                          /* Little endian.  */
```

Cheers,

Michael



---

archive/issue_comments_023585.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOoops, as Clement just pointed out to me I picked the wrong spkg. The one at\n\nhttp://sage.math.washington.edu/home/mabshoff/release-cycles-3.1.3/alpha0/givaro-3.2.13rc2.spkg\n\nbased on his spkg has the extension rebuild fix and builds fine for me and passes doctests on various platforms from OSX, Linux in various flavors and Solaris. Positive review.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-20T02:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23585",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:7" align="right">comment:7</div>

Ooops, as Clement just pointed out to me I picked the wrong spkg. The one at

http://sage.math.washington.edu/home/mabshoff/release-cycles-3.1.3/alpha0/givaro-3.2.13rc2.spkg

based on his spkg has the extension rebuild fix and builds fine for me and passes doctests on various platforms from OSX, Linux in various flavors and Solaris. Positive review.

Cheers,

Michael



---

archive/issue_events_046618.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T02:15:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46618"
}
```



---

archive/issue_events_046619.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T02:15:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46619"
}
```



---

archive/issue_comments_023586.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis is rc2 :)\n\nCheers,\n\nMichael",
    "created_at": "2008-09-20T02:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23586",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:8" align="right">comment:8</div>

This is rc2 :)

Cheers,

Michael



---

archive/issue_events_046620.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T02:17:08Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "title_is": "Upgrade to givaro-3.2.13rc2",
    "title_was": "Upgrade to givaro-3.2.13rc1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46620"
}
```



---

archive/issue_comments_023587.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nMerged in Sage 3.1.3.alpha0",
    "created_at": "2008-09-20T02:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4148#issuecomment-23587",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:9" align="right">comment:9</div>

Merged in Sage 3.1.3.alpha0



---

archive/issue_events_046621.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T02:46:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46621"
}
```



---

archive/issue_events_046622.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-20T02:46:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4148",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4148#event-46622"
}
```
