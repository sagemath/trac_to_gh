# Issue 4572: maxima output has misleading precision

archive/issues_004572.json:
```json
{
    "assignees": [],
    "body": "Internally, maxima uses floating point numbers internally unless explicitly told to use bigfloats (which we don't, and there's only one global precision in maxima so it will be non-trivial to try and do this consistantly). This patch changes the parsing code to use RDF instead, which is a better reflection of the underlying precision.\n\nIn addition, this has the benefit of removing the trailing zeros in calculus expressions involving real numbers (as they didn't really contain any information). \n\nAssignee: **@burcin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4572_\n\n",
    "closed_at": "2008-11-25T12:29:26Z",
    "created_at": "2008-11-20T22:00:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.2.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "maxima output has misleading precision",
    "type": "issue",
    "updated_at": "2008-11-25T12:29:26Z",
    "url": "https://github.com/sagemath/sage/issues/4572",
    "user": "https://github.com/robertwb"
}
```
Internally, maxima uses floating point numbers internally unless explicitly told to use bigfloats (which we don't, and there's only one global precision in maxima so it will be non-trivial to try and do this consistantly). This patch changes the parsing code to use RDF instead, which is a better reflection of the underlying precision.

In addition, this has the benefit of removing the trailing zeros in calculus expressions involving real numbers (as they didn't really contain any information). 

Assignee: **@burcin**

_Issue created by migration from https://trac.sagemath.org/ticket/4572_





---

archive/issue_events_045517.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-20T22:00:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "milestone_number": null,
    "milestone_title": "sage-3.2.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45517"
}
```



---

archive/issue_events_045518.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-20T22:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "component: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45518"
}
```



---

archive/issue_events_045519.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-20T22:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45519"
}
```



---

archive/issue_events_045520.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-20T22:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45520"
}
```



---

archive/issue_events_045521.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-20T22:00:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45521"
}
```



---

archive/issue_comments_028216.json:
```json
{
    "body": "Attachment: **[4572-maxima-float.patch.gz](https://github.com/sagemath/sage/files/ticket4572/4572-maxima-float.patch.gz)**",
    "created_at": "2008-11-20T22:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28216",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[4572-maxima-float.patch.gz](https://github.com/sagemath/sage/files/ticket4572/4572-maxima-float.patch.gz)**



---

archive/issue_events_045522.json:
```json
{
    "actor": "https://github.com/mwhansen",
    "created_at": "2008-11-21T17:18:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45522"
}
```



---

archive/issue_comments_028217.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nApplies and passes tests.",
    "created_at": "2008-11-21T17:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28217",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:1'>Comment 1:</a>
Applies and passes tests.



---

archive/issue_comments_028218.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nThis patch seems to cause a boat load of small and annoying doctest failures:\n\n```\n        sage -t -long devel/sage/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx # 1 doctests failed\n        sage -t -long devel/sage/sage/rings/real_rqdf.pyx # 1 doctests failed\n        sage -t -long devel/sage/sage/rings/real_double.pyx # 2 doctests failed\n        sage -t -long devel/sage/sage/rings/real_mpfr.pyx # 2 doctests failed\n        sage -t -long devel/sage/sage/rings/complex_double.pyx # 3 doctests failed\n        sage -t -long devel/sage/sage/plot/plot.py # 1 doctests failed\n        sage -t -long devel/sage/sage/misc/parser.pyx # 1 doctests failed\n        sage -t -long devel/sage/sage/misc/prandom.py # 1 doctests failed\n        sage -t -long devel/sage/sage/matrix/tests.py # 1 doctests failed\n        sage -t -long devel/sage/sage/interfaces/maxima.py # 3 doctests failed\n        sage -t -long devel/sage/sage/functions/special.py # 7 doctests failed\n        sage -t -long devel/sage/sage/functions/constants.py # 1 doctests failed\n        sage -t -long devel/sage/sage/functions/piecewise.py # 3 doctests failed\n        sage -t -long devel/doc/tut/tut.tex # 1 doctests failed\n```\nI will make 100% sure this can all be blamed on this patch.\n\nCheers,\n\nMichael",
    "created_at": "2008-11-21T19:48:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28218",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:2'>Comment 2:</a>
This patch seems to cause a boat load of small and annoying doctest failures:

```
        sage -t -long devel/sage/sage/rings/polynomial/polynomial_real_mpfr_dense.pyx # 1 doctests failed
        sage -t -long devel/sage/sage/rings/real_rqdf.pyx # 1 doctests failed
        sage -t -long devel/sage/sage/rings/real_double.pyx # 2 doctests failed
        sage -t -long devel/sage/sage/rings/real_mpfr.pyx # 2 doctests failed
        sage -t -long devel/sage/sage/rings/complex_double.pyx # 3 doctests failed
        sage -t -long devel/sage/sage/plot/plot.py # 1 doctests failed
        sage -t -long devel/sage/sage/misc/parser.pyx # 1 doctests failed
        sage -t -long devel/sage/sage/misc/prandom.py # 1 doctests failed
        sage -t -long devel/sage/sage/matrix/tests.py # 1 doctests failed
        sage -t -long devel/sage/sage/interfaces/maxima.py # 3 doctests failed
        sage -t -long devel/sage/sage/functions/special.py # 7 doctests failed
        sage -t -long devel/sage/sage/functions/constants.py # 1 doctests failed
        sage -t -long devel/sage/sage/functions/piecewise.py # 3 doctests failed
        sage -t -long devel/doc/tut/tut.tex # 1 doctests failed
```
I will make 100% sure this can all be blamed on this patch.

Cheers,

Michael



---

archive/issue_events_045523.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-21T20:05:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45523"
}
```



---

archive/issue_events_045524.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-21T20:05:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45524"
}
```



---

archive/issue_comments_028219.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nYep, someone needs to fix those doctests :)\n\nCheers,\n\nMichael",
    "created_at": "2008-11-21T20:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28219",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:3'>Comment 3:</a>
Yep, someone needs to fix those doctests :)

Cheers,

Michael



---

archive/issue_comments_028220.json:
```json
{
    "body": "Attachment: **[4572-maxima-float-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket4572/4572-maxima-float-fixes.patch.gz)**",
    "created_at": "2008-11-25T11:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28220",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[4572-maxima-float-fixes.patch.gz](https://github.com/sagemath/sage/files/ticket4572/4572-maxima-float-fixes.patch.gz)**



---

archive/issue_comments_028221.json:
```json
{
    "body": "Attachment: **[4572-maxima-float-fixes-tut.patch.gz](https://github.com/sagemath/sage/files/ticket4572/4572-maxima-float-fixes-tut.patch.gz)**\n\napply to docs repo",
    "created_at": "2008-11-25T11:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28221",
    "user": "https://github.com/robertwb"
}
```

Attachment: **[4572-maxima-float-fixes-tut.patch.gz](https://github.com/sagemath/sage/files/ticket4572/4572-maxima-float-fixes-tut.patch.gz)**

apply to docs repo



---

archive/issue_events_045525.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-25T11:28:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45525"
}
```



---

archive/issue_events_045526.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-25T11:28:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45526"
}
```



---

archive/issue_comments_028222.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nAll doctest failures were due to precision printing differences. Apply all attached patches.",
    "created_at": "2008-11-25T11:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28222",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:4'>Comment 4:</a>
All doctest failures were due to precision printing differences. Apply all attached patches.



---

archive/issue_comments_028223.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nPositive review to the doctest fixes, so a cumulative positive review :)\n\nCheers,\n\nMichae",
    "created_at": "2008-11-25T11:39:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28223",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:5'>Comment 5:</a>
Positive review to the doctest fixes, so a cumulative positive review :)

Cheers,

Michae



---

archive/issue_events_045527.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-25T11:39:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45527"
}
```



---

archive/issue_events_045528.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-25T11:39:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45528"
}
```



---

archive/issue_comments_028224.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nMerged both patches in Sage 3.2.1.alpha1",
    "created_at": "2008-11-25T12:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4572#issuecomment-28224",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:6'>Comment 6:</a>
Merged both patches in Sage 3.2.1.alpha1



---

archive/issue_events_045529.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-25T12:29:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45529"
}
```



---

archive/issue_events_045530.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-25T12:29:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4572",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4572#event-45530"
}
```
