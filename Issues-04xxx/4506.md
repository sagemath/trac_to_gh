# Issue 4506: planarity ignores error code when adding edge

archive/issues_004506.json:
```json
{
    "assignees": [],
    "body": "The planarity code ignores errors when adding edges.  This patch also shortcuts the planarity checking when adding an edge returns the NONPLANAR code.\n\nAssignee: **@rlmill**\n\nCC:  ekirkman bober\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4506_\n\n",
    "closed_at": "2008-11-14T03:30:53Z",
    "created_at": "2008-11-13T01:21:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "planarity ignores error code when adding edge",
    "type": "issue",
    "updated_at": "2008-11-14T03:30:53Z",
    "url": "https://github.com/sagemath/sage/issues/4506",
    "user": "https://github.com/jasongrout"
}
```
The planarity code ignores errors when adding edges.  This patch also shortcuts the planarity checking when adding an edge returns the NONPLANAR code.

Assignee: **@rlmill**

CC:  ekirkman bober

_Issue created by migration from https://trac.sagemath.org/ticket/4506_





---

archive/issue_events_044644.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-11-13T01:21:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "milestone_number": null,
    "milestone_title": "sage-3.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44644"
}
```



---

archive/issue_events_044645.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-11-13T01:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44645"
}
```



---

archive/issue_events_044646.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-11-13T01:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44646"
}
```



---

archive/issue_events_044647.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-11-13T01:21:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44647"
}
```



---

archive/issue_comments_027403.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[planarity-add-edge.patch.gz](https://github.com/sagemath/sage/files/ticket4506/planarity-add-edge.patch.gz)**",
    "created_at": "2008-11-13T01:22:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4506#issuecomment-27403",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[planarity-add-edge.patch.gz](https://github.com/sagemath/sage/files/ticket4506/planarity-add-edge.patch.gz)**



---

archive/issue_events_044648.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2008-11-13T01:22:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44648"
}
```



---

archive/issue_comments_027404.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThe patch here ought to add a doctest :)\n\nCheers,\n\nMichael",
    "created_at": "2008-11-13T03:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4506#issuecomment-27404",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:3'>Comment 3:</a>
The patch here ought to add a doctest :)

Cheers,

Michael



---

archive/issue_comments_027405.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI don't see what to doctest.  I personally didn't come across any errors, I'm just adding the checking as good programming practice.  As for the shortcut in the nonplanar case, I'm just doing exactly what Boyer does in his C program.  The program gave the correct answers before, now it just doesn't worry about finding a kuratowski subgraph if it is not needed.\n\nAgain, I didn't see any errors before, so I can't put in a doctest that didn't work before, but does after the patch.  This is pro-active bugfixing, not reactive bugfixing :).",
    "created_at": "2008-11-13T03:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4506#issuecomment-27405",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'>Comment 4:</a>
I don't see what to doctest.  I personally didn't come across any errors, I'm just adding the checking as good programming practice.  As for the shortcut in the nonplanar case, I'm just doing exactly what Boyer does in his C program.  The program gave the correct answers before, now it just doesn't worry about finding a kuratowski subgraph if it is not needed.

Again, I didn't see any errors before, so I can't put in a doctest that didn't work before, but does after the patch.  This is pro-active bugfixing, not reactive bugfixing :).



---

archive/issue_events_044649.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-13T23:27:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44649"
}
```



---

archive/issue_events_044650.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2008-11-13T23:27:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44650"
}
```



---

archive/issue_comments_027406.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nIt looks good to me. \n\nUnless one knows how to make the C program fail (out of memory?) I don't see what doctest to add. The result is the same, so I think the existing doctests cover it.",
    "created_at": "2008-11-13T23:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4506#issuecomment-27406",
    "user": "https://github.com/robertwb"
}
```

<a id='comment:5'>Comment 5:</a>
It looks good to me. 

Unless one knows how to make the C program fail (out of memory?) I don't see what doctest to add. The result is the same, so I think the existing doctests cover it.



---

archive/issue_comments_027407.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nMerged in Sage 3.2.rc1",
    "created_at": "2008-11-14T03:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4506#issuecomment-27407",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<a id='comment:6'>Comment 6:</a>
Merged in Sage 3.2.rc1



---

archive/issue_events_044651.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-14T03:30:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44651"
}
```



---

archive/issue_events_044652.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-14T03:30:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4506",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4506#event-44652"
}
```
