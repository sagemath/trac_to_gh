# Issue 4249: Inconsistency in number field integral bases

archive/issues_004249.json:
```json
{
    "assignees": [
        "https://github.com/williamstein"
    ],
    "body": "This is unacceptable (in  my opinion):\n\n```\nsage: K.<a>=NumberField(x^2+23)\nsage: K.integral_basis()\n[1, 1/2*a + 1/2]\nsage: K.ring_of_integers().basis()\n[1/2*a + 1/2, a]\n```\n\nI think these should be the same.  The problem is that K.integral_basis() gets the basis from pari, but when the ring_of_integers is constructed it uses that basis in the constructions but then creates its own, different, basis!\n\nSuggested solution:  make the existing integral_basis() function an internal one used by the ring_of_integers() function only, and have K.integra_basis() return the basis of the ring of integers instead.\n\nCC:  @sagetrac-mtaranes\n\nComponent: **number theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4249_\n\n",
    "closed_at": "2008-11-15T10:27:49Z",
    "created_at": "2008-10-07T11:21:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20number%20fields"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-3.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Inconsistency in number field integral bases",
    "type": "issue",
    "updated_at": "2023-01-14T14:33:38Z",
    "url": "https://github.com/sagemath/sage/issues/4249",
    "user": "https://github.com/JohnCremona"
}
```
This is unacceptable (in  my opinion):

```
sage: K.<a>=NumberField(x^2+23)
sage: K.integral_basis()
[1, 1/2*a + 1/2]
sage: K.ring_of_integers().basis()
[1/2*a + 1/2, a]
```

I think these should be the same.  The problem is that K.integral_basis() gets the basis from pari, but when the ring_of_integers is constructed it uses that basis in the constructions but then creates its own, different, basis!

Suggested solution:  make the existing integral_basis() function an internal one used by the ring_of_integers() function only, and have K.integra_basis() return the basis of the ring of integers instead.

CC:  @sagetrac-mtaranes

Component: **number theory**

_Issue created by migration from https://trac.sagemath.org/ticket/4249_





---

archive/issue_events_047265.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-10-07T11:21:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "milestone_number": null,
    "milestone_title": "sage-3.2.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47265"
}
```



---

archive/issue_events_047266.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-10-07T11:21:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47266"
}
```



---

archive/issue_events_047267.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-10-07T11:21:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47267"
}
```



---

archive/issue_events_047268.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-10-07T11:21:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47268"
}
```



---

archive/issue_events_047269.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-10-07T11:21:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20fields",
    "label_color": "0000ff",
    "label_name": "c: number fields",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47269"
}
```



---

archive/issue_events_047270.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-10-07T11:21:35Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "subject": "https://github.com/JohnCremona",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47270"
}
```



---

archive/issue_comments_024210.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI strongly agree with John Cremona's suggested fix.",
    "created_at": "2008-10-08T04:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24210",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:2" align="right">comment:2</div>

I strongly agree with John Cremona's suggested fix.



---

archive/issue_comments_024211.json:
```json
{
    "body": "Attachment: **[sage-4249.patch.gz](https://github.com/sagemath/sage/files/ticket4249/sage-4249.patch.gz)**",
    "created_at": "2008-10-14T20:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24211",
    "user": "https://github.com/JohnCremona"
}
```

Attachment: **[sage-4249.patch.gz](https://github.com/sagemath/sage/files/ticket4249/sage-4249.patch.gz)**



---

archive/issue_comments_024212.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe attached patch (which applies to 3.1.3) does what was proposed.  All doctests in sage/rings/number_fields/ pass *except* for a couple in totallyreal_rel.py where one of the totally real quadratic extensions of Q(sqrt(5)) is now missing.  I do not know why but suggest that there might be a bug in that file, so will ask John Voight to look into it.",
    "created_at": "2008-10-14T20:47:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24212",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:3" align="right">comment:3</div>

The attached patch (which applies to 3.1.3) does what was proposed.  All doctests in sage/rings/number_fields/ pass *except* for a couple in totallyreal_rel.py where one of the totally real quadratic extensions of Q(sqrt(5)) is now missing.  I do not know why but suggest that there might be a bug in that file, so will ask John Voight to look into it.



---

archive/issue_comments_024213.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI can't test this yet because I can't apply the patch to 3.1.2, and the upgrade is apparently not yet working.  I'm worried about all of the changes to reduced_basis which resulted from the change, but will have a look ASAP.  JV",
    "created_at": "2008-10-14T22:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24213",
    "user": "https://github.com/jvoight"
}
```

<div id="comment:4" align="right">comment:4</div>

I can't test this yet because I can't apply the patch to 3.1.2, and the upgrade is apparently not yet working.  I'm worried about all of the changes to reduced_basis which resulted from the change, but will have a look ASAP.  JV



---

archive/issue_comments_024214.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks John.  I put \"not ready for review\" since we don't yet know exactly what is going on.  John",
    "created_at": "2008-10-15T06:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24214",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks John.  I put "not ready for review" since we don't yet know exactly what is going on.  John



---

archive/issue_events_047271.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-10-15T06:01:19Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "title_is": "[not ready for review] Inconsistency in number field integral bases",
    "title_was": "Inconsistency in number field integral bases",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47271"
}
```



---

archive/issue_comments_024215.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHm.  John, what bug exactly were you getting?  I just applied your sage-4249.patch to a clean build of sage-3.1.3 and it indeed gives me 21 totally real quadratic extensions of Q(sqrt(5)) with discriminant <= 10^4.  In particular, for this example the output of F.reduced_basis() does not seem to change after the patch, and so I would not expect anything to change.\n\nJV",
    "created_at": "2008-10-16T00:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24215",
    "user": "https://github.com/jvoight"
}
```

<div id="comment:6" align="right">comment:6</div>

Hm.  John, what bug exactly were you getting?  I just applied your sage-4249.patch to a clean build of sage-3.1.3 and it indeed gives me 21 totally real quadratic extensions of Q(sqrt(5)) with discriminant <= 10^4.  In particular, for this example the output of F.reduced_basis() does not seem to change after the patch, and so I would not expect anything to change.

JV



---

archive/issue_comments_024216.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWhen I apply my patch to 3.1.3 I get this (testing all files in number_field):\n\n```\n******************************\nFile \"/home/john/sage-3.1.3/tmp/totallyreal_rel.py\", line 658:\n    sage: [ f[0] for f in ls ]\nExpected:\n    [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525, 5125, 5225, 5725, 6125, 7225, 7600, 7625, 8000, 8525, 8725, 9225]\nGot:\n    [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525, 5125, 5225, 5725, 6125, 7600, 7625, 8000, 8525, 8725, 9225]\n**********************************************************************\nFile \"/home/john/sage-3.1.3/tmp/totallyreal_rel.py\", line 661:\n    sage: [NumberField(ZZx(x[1]), 't').is_galois() for x in ls]\nExpected:\n    [False, True, True, True, False, False, True, True, False, False, False, False, False, True, True, False, False, True, False, False, False]\nGot:\n    [False, True, True, True, False, False, True, True, False, False, False, False, False, True, False, False, True, False, False, False]\n**********************************************************************\n1 items had failures:\n   2 of  12 in __main__.example_6\n***Test Failed*** 2 failures.\nFor whitespace errors, see the file /home/john/sage-3.1.3/tmp/.doctest_totallyreal_rel.py\n```",
    "created_at": "2008-10-16T05:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24216",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:7" align="right">comment:7</div>

When I apply my patch to 3.1.3 I get this (testing all files in number_field):

```
******************************
File "/home/john/sage-3.1.3/tmp/totallyreal_rel.py", line 658:
    sage: [ f[0] for f in ls ]
Expected:
    [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525, 5125, 5225, 5725, 6125, 7225, 7600, 7625, 8000, 8525, 8725, 9225]
Got:
    [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525, 5125, 5225, 5725, 6125, 7600, 7625, 8000, 8525, 8725, 9225]
**********************************************************************
File "/home/john/sage-3.1.3/tmp/totallyreal_rel.py", line 661:
    sage: [NumberField(ZZx(x[1]), 't').is_galois() for x in ls]
Expected:
    [False, True, True, True, False, False, True, True, False, False, False, False, False, True, True, False, False, True, False, False, False]
Got:
    [False, True, True, True, False, False, True, True, False, False, False, False, False, True, False, False, True, False, False, False]
**********************************************************************
1 items had failures:
   2 of  12 in __main__.example_6
***Test Failed*** 2 failures.
For whitespace errors, see the file /home/john/sage-3.1.3/tmp/.doctest_totallyreal_rel.py
```



---

archive/issue_comments_024217.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHuh.  Applying the patch on sage.math (on 3.1.3) gives:\n\n ```\n sage: F.<t> = NumberField(x^2-5)\n sage: enumerate_totallyreal_fields_rel?\n sage: ls = enumerate_totallyreal_fields_rel(F, 2, 10^4)\n sage: enumerate_totallyreal_fields_rel?\n sage: [ f[0] for f in ls ]\n [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525,\n 5125, 5225, 5725, 6125, 7225, 7600, 7625, 8000, 8525, 8725,\n 9225]\n   ```\nNot really sure what could be causing this, unless it's an ugly platform-dependent precision issue or something.",
    "created_at": "2008-10-16T23:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24217",
    "user": "https://github.com/jvoight"
}
```

<div id="comment:8" align="right">comment:8</div>

Huh.  Applying the patch on sage.math (on 3.1.3) gives:

 ```
 sage: F.<t> = NumberField(x^2-5)
 sage: enumerate_totallyreal_fields_rel?
 sage: ls = enumerate_totallyreal_fields_rel(F, 2, 10^4)
 sage: enumerate_totallyreal_fields_rel?
 sage: [ f[0] for f in ls ]
 [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525,
 5125, 5225, 5725, 6125, 7225, 7600, 7625, 8000, 8525, 8725,
 9225]
   ```
Not really sure what could be causing this, unless it's an ugly platform-dependent precision issue or something.



---

archive/issue_comments_024218.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI agree, it is likely to be a precision issue.  My laptop is 32-bit while sage.math is 64.",
    "created_at": "2008-10-17T06:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24218",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:9" align="right">comment:9</div>

I agree, it is likely to be a precision issue.  My laptop is 32-bit while sage.math is 64.



---

archive/issue_comments_024219.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI downloaded a clean 3.1.3 and installed it on a 32-bit Ubuntu and it again worked fine.  I'm not sure what's going on.  JV",
    "created_at": "2008-10-20T00:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24219",
    "user": "https://github.com/jvoight"
}
```

<div id="comment:10" align="right">comment:10</div>

I downloaded a clean 3.1.3 and installed it on a 32-bit Ubuntu and it again worked fine.  I'm not sure what's going on.  JV



---

archive/issue_events_047272.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-10-20T11:41:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "title_is": "Inconsistency in number field integral bases",
    "title_was": "[not ready for review] Inconsistency in number field integral bases",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47272"
}
```



---

archive/issue_comments_024220.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jvoight](#comment:10):\n> I downloaded a clean 3.1.3 and installed it on a 32-bit Ubuntu and it again worked fine.  I'm not sure what's going on.  JV\n\nNor me.  I just tried again on a fresh 3.1.4 and got the same problem as before.\n\nI think we need to ask someone else to help with this!  JEC",
    "created_at": "2008-10-20T11:41:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24220",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jvoight](#comment:10):
> I downloaded a clean 3.1.3 and installed it on a 32-bit Ubuntu and it again worked fine.  I'm not sure what's going on.  JV

Nor me.  I just tried again on a fresh 3.1.4 and got the same problem as before.

I think we need to ask someone else to help with this!  JEC



---

archive/issue_comments_024221.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nHi John,\n\nI'm hoping to tackle this at Sage Days 11, or at least find someone willing to help.  What system are you using?  Maybe I can find someone with the same system so as to reproduce the bug...\n\nJV",
    "created_at": "2008-11-06T15:23:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24221",
    "user": "https://github.com/jvoight"
}
```

<div id="comment:12" align="right">comment:12</div>

Hi John,

I'm hoping to tackle this at Sage Days 11, or at least find someone willing to help.  What system are you using?  Maybe I can find someone with the same system so as to reproduce the bug...

JV



---

archive/issue_comments_024222.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jvoight](#comment:12):\n> Hi John,\n> \n> I'm hoping to tackle this at Sage Days 11, or at least find someone willing to help.  What system are you using?  Maybe I can find someone with the same system so as to reproduce the bug...\n> \n> JV\n\nIt was probably my laptop (ubuntu linux 8.04 etc).  As I have just built 3.2.alpha3 on a couple of other machines, I'll test my patch on those and see what happens.  Watch this space...",
    "created_at": "2008-11-06T15:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24222",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jvoight](#comment:12):
> Hi John,
> 
> I'm hoping to tackle this at Sage Days 11, or at least find someone willing to help.  What system are you using?  Maybe I can find someone with the same system so as to reproduce the bug...
> 
> JV

It was probably my laptop (ubuntu linux 8.04 etc).  As I have just built 3.2.alpha3 on a couple of other machines, I'll test my patch on those and see what happens.  Watch this space...



---

archive/issue_comments_024223.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI applied my patch to 3.2.alpha3 on two machines, a 32-bit Suse linux and a 64-bit ubuntu.\nOn both machines two files failed doctests:\n\n1.  sage -t  devel/sage-intpts/sage/rings/number_field/number_field.py\n2.  sage -t  devel/sage-intpts/sage/rings/number_field/totallyreal_rel.py\n\nIn totallrel_rel.py we get this:\n\n```\nsage -t  devel/sage-intpts/sage/rings/number_field/totallyreal_rel.py**********************************************************************\nFile \"/home/jec/sage-3.2.alpha3/tmp/totallyreal_rel.py\", line 658:\n    sage: [ f[0] for f in ls ]\nExpected:\n    [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525, 5125, 5225, 5725, 6125, 7225, 7600, 7625, 8000, 8525, 8725, 9225]\nGot:\n    [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525, 5125, 5225, 5725, 6125, 7600, 7625, 8000, 8525, 8725, 9225]\n**********************************************************************\nFile \"/home/jec/sage-3.2.alpha3/tmp/totallyreal_rel.py\", line 661:\n    sage: [NumberField(ZZx(x[1]), 't').is_galois() for x in ls]\nExpected:\n    [False, True, True, True, False, False, True, True, False, False, False, False, False, True, True, False, False, True, False, False, False]\nGot:\n    [False, True, True, True, False, False, True, True, False, False, False, False, False, True, False, False, True, False, False, False]\n**********************************************************************\n```\nwhich looks like what I got before.  In number_field.py we get this:\n\n```\nsage -t  local/sage-3.2.alpha3/devel/sage-intbasis/sage/rings/number_field//number_field.py**********************************************************************\nFile \"/local/jec/sage-3.2.alpha3/tmp/number_field.py\", line 2742:\n    sage: F.reduced_gram_matrix(prec=128)\nExpected:\n    [   4.0000000000000000000000000000000000000   0.00000000000000000000000000000000000000    1.9999999999999999999999999999999999037 -1.0684680000000000000000000000000000000e6]\n    [  0.00000000000000000000000000000000000000    46721.539331563218381658483353092335550    11488.910026551724275122749703614966768 -1.1228558200864828963821803781091898982e7]\n    [   1.9999999999999999999999999999999999037    11488.910026551724275122749703614966768  5.5658915310500611768713076521847709187e8  8.0619179090987317435751641503958312826e9]\n    [-1.0684680000000000000000000000000000000e6 -1.1228558200864828963821803781091898982e7  8.0619179090987317435751641503958312826e9 5.8711879006497804783677635022079228656e12]\nGot:\n    [   4.0000000000000000000000000000000000000   0.00000000000000000000000000000000000000 -2.1369320000000000000000000000000000000e6 -3.3122478000000000000000000000000000000e7]\n    [  0.00000000000000000000000000000000000000    46721.539331563218381658483353092335550 -2.2467769057394530109094755223395819322e7 -3.4807276041138450473611629088647496430e8]\n    [-2.1369320000000000000000000000000000000e6 -2.2467769057394530109094755223395819322e7 7.0704243186034907491782135494859351061e12 1.1256636615786237006027526953641297995e14]\n    [-3.3122478000000000000000000000000000000e7 -3.4807276041138450473611629088647496430e8 1.1256636615786237006027526953641297995e14 1.7923838231014970520503146603069479547e15]\n\n```\nwhich is new.  I find it slightly encouraging that my 32- and 64-bit tests both give exactly the same above (as each other).  I guess that this second discrepancy will be fixed by just changing the Expected doctest output, but the first one really is a bug since a field which should be returned is not.",
    "created_at": "2008-11-06T15:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24223",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:14" align="right">comment:14</div>

I applied my patch to 3.2.alpha3 on two machines, a 32-bit Suse linux and a 64-bit ubuntu.
On both machines two files failed doctests:

1.  sage -t  devel/sage-intpts/sage/rings/number_field/number_field.py
2.  sage -t  devel/sage-intpts/sage/rings/number_field/totallyreal_rel.py

In totallrel_rel.py we get this:

```
sage -t  devel/sage-intpts/sage/rings/number_field/totallyreal_rel.py**********************************************************************
File "/home/jec/sage-3.2.alpha3/tmp/totallyreal_rel.py", line 658:
    sage: [ f[0] for f in ls ]
Expected:
    [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525, 5125, 5225, 5725, 6125, 7225, 7600, 7625, 8000, 8525, 8725, 9225]
Got:
    [725, 1125, 1600, 2000, 2225, 2525, 3600, 4225, 4400, 4525, 5125, 5225, 5725, 6125, 7600, 7625, 8000, 8525, 8725, 9225]
**********************************************************************
File "/home/jec/sage-3.2.alpha3/tmp/totallyreal_rel.py", line 661:
    sage: [NumberField(ZZx(x[1]), 't').is_galois() for x in ls]
Expected:
    [False, True, True, True, False, False, True, True, False, False, False, False, False, True, True, False, False, True, False, False, False]
Got:
    [False, True, True, True, False, False, True, True, False, False, False, False, False, True, False, False, True, False, False, False]
**********************************************************************
```
which looks like what I got before.  In number_field.py we get this:

```
sage -t  local/sage-3.2.alpha3/devel/sage-intbasis/sage/rings/number_field//number_field.py**********************************************************************
File "/local/jec/sage-3.2.alpha3/tmp/number_field.py", line 2742:
    sage: F.reduced_gram_matrix(prec=128)
Expected:
    [   4.0000000000000000000000000000000000000   0.00000000000000000000000000000000000000    1.9999999999999999999999999999999999037 -1.0684680000000000000000000000000000000e6]
    [  0.00000000000000000000000000000000000000    46721.539331563218381658483353092335550    11488.910026551724275122749703614966768 -1.1228558200864828963821803781091898982e7]
    [   1.9999999999999999999999999999999999037    11488.910026551724275122749703614966768  5.5658915310500611768713076521847709187e8  8.0619179090987317435751641503958312826e9]
    [-1.0684680000000000000000000000000000000e6 -1.1228558200864828963821803781091898982e7  8.0619179090987317435751641503958312826e9 5.8711879006497804783677635022079228656e12]
Got:
    [   4.0000000000000000000000000000000000000   0.00000000000000000000000000000000000000 -2.1369320000000000000000000000000000000e6 -3.3122478000000000000000000000000000000e7]
    [  0.00000000000000000000000000000000000000    46721.539331563218381658483353092335550 -2.2467769057394530109094755223395819322e7 -3.4807276041138450473611629088647496430e8]
    [-2.1369320000000000000000000000000000000e6 -2.2467769057394530109094755223395819322e7 7.0704243186034907491782135494859351061e12 1.1256636615786237006027526953641297995e14]
    [-3.3122478000000000000000000000000000000e7 -3.4807276041138450473611629088647496430e8 1.1256636615786237006027526953641297995e14 1.7923838231014970520503146603069479547e15]

```
which is new.  I find it slightly encouraging that my 32- and 64-bit tests both give exactly the same above (as each other).  I guess that this second discrepancy will be fixed by just changing the Expected doctest output, but the first one really is a bug since a field which should be returned is not.



---

archive/issue_comments_024224.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nArgh!  Tried the patch on sage.math on 3.2.alpha3, still can't reproduce the error!  \n\n{{{jvoight@sage:~/sage-3.2.alpha3$ ./sage -t ./devel/sage/sage/rings/number_field/totallyreal_rel.py\nsage -t  devel/sage/sage/rings/number_field/totallyreal_rel.py\n         [4.5 s]\n\n---\nAll tests passed!\nTotal time for all tests: 4.5 seconds}}}\n\nI'll see if I can find someone here in Austin.  (I have some ideas about what may be going on, but I can't check any of them!)  JV",
    "created_at": "2008-11-09T00:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24224",
    "user": "https://github.com/jvoight"
}
```

<div id="comment:15" align="right">comment:15</div>

Argh!  Tried the patch on sage.math on 3.2.alpha3, still can't reproduce the error!  

{{{jvoight@sage:~/sage-3.2.alpha3$ ./sage -t ./devel/sage/sage/rings/number_field/totallyreal_rel.py
sage -t  devel/sage/sage/rings/number_field/totallyreal_rel.py
         [4.5 s]

---
All tests passed!
Total time for all tests: 4.5 seconds}}}

I'll see if I can find someone here in Austin.  (I have some ideas about what may be going on, but I can't check any of them!)  JV



---

archive/issue_events_047273.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2008-11-09T02:35:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47273"
}
```



---

archive/issue_comments_024225.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAttached patch fixes the issue. It turns out that John Cremona's fix actually exposed a small bug in `integral_elements_with_trace`, which has been fixed and renamed. \n\nThis was written with John Voight.",
    "created_at": "2008-11-09T02:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24225",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:16" align="right">comment:16</div>

Attached patch fixes the issue. It turns out that John Cremona's fix actually exposed a small bug in `integral_elements_with_trace`, which has been fixed and renamed. 

This was written with John Voight.



---

archive/issue_comments_024226.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nWhoops. Forgot that we had to look at John's original patch, too. :)",
    "created_at": "2008-11-09T03:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24226",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:17" align="right">comment:17</div>

Whoops. Forgot that we had to look at John's original patch, too. :)



---

archive/issue_comments_024227.json:
```json
{
    "body": "Attachment: **[trac-4249-1a.patch.gz](https://github.com/sagemath/sage/files/ticket4249/trac-4249-1a.patch.gz)**",
    "created_at": "2008-11-14T09:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24227",
    "user": "https://github.com/craigcitro"
}
```

Attachment: **[trac-4249-1a.patch.gz](https://github.com/sagemath/sage/files/ticket4249/trac-4249-1a.patch.gz)**



---

archive/issue_comments_024228.json:
```json
{
    "body": "Attachment: **[trac-4249-pt2a.patch.gz](https://github.com/sagemath/sage/files/ticket4249/trac-4249-pt2a.patch.gz)**",
    "created_at": "2008-11-14T09:19:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24228",
    "user": "https://github.com/craigcitro"
}
```

Attachment: **[trac-4249-pt2a.patch.gz](https://github.com/sagemath/sage/files/ticket4249/trac-4249-pt2a.patch.gz)**



---

archive/issue_comments_024229.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis looks good! \n\nThe only complaints I had were one or two naming issues; in particular, I didn't see why `integral_basis_internal` should be visible when you tab complete. (The `internal` in the name really makes it seem weird.) So I've just corrected a few naming issues, and made a new patch. Then I rebased the patch John Voight and I wrote on top of this. So you should apply:\n\n```\nsage-4249.patch\ntrac-4249-1a.patch\ntrac-4249-pt2a.patch\n```\n\nin order. (I've deleted the old pt2 patch, just to help avoid confusion.)",
    "created_at": "2008-11-14T09:22:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24229",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:18" align="right">comment:18</div>

This looks good! 

The only complaints I had were one or two naming issues; in particular, I didn't see why `integral_basis_internal` should be visible when you tab complete. (The `internal` in the name really makes it seem weird.) So I've just corrected a few naming issues, and made a new patch. Then I rebased the patch John Voight and I wrote on top of this. So you should apply:

```
sage-4249.patch
trac-4249-1a.patch
trac-4249-pt2a.patch
```

in order. (I've deleted the old pt2 patch, just to help avoid confusion.)



---

archive/issue_comments_024230.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI strongly approve of the two new patches, which fix the bug which caused the totally_real_rel failure and also improve on my code design.  I tested them against 3.2.alpha3 and all was well (testing all in number_field/).\n\nSo I hope there's enough mutual positive reviewing here for these to be merged.\n\nIt would be even better if John V agreed!",
    "created_at": "2008-11-14T09:58:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24230",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:19" align="right">comment:19</div>

I strongly approve of the two new patches, which fix the bug which caused the totally_real_rel failure and also improve on my code design.  I tested them against 3.2.alpha3 and all was well (testing all in number_field/).

So I hope there's enough mutual positive reviewing here for these to be merged.

It would be even better if John V agreed!



---

archive/issue_comments_024231.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nYes, definitely I agree.  Positive review.  JV",
    "created_at": "2008-11-14T14:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24231",
    "user": "https://github.com/jvoight"
}
```

<div id="comment:20" align="right">comment:20</div>

Yes, definitely I agree.  Positive review.  JV



---

archive/issue_events_047274.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-14T20:05:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "title_is": "[needs doctest fixes] Inconsistency in number field integral bases",
    "title_was": "Inconsistency in number field integral bases",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47274"
}
```



---

archive/issue_comments_024232.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThere are some slight doctest failures to fix:\n\n```\nsage -t -long devel/sage/sage/rings/number_field/number_field.py\n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.2.rc1/devel/sage/sage/rings/number_field/number_field.py\", line 2653:\n    sage: F.reduced_basis(prec=96)\nExpected:\n    [1, alpha, alpha^2 - 15*alpha, alpha^3 - 16*alpha^2 + 469*alpha + 267109] \nGot:\n    [1, alpha, alpha^3 - 2*alpha^2 + 15*alpha, 16*alpha^3 - 31*alpha^2 + 469*alpha + 267109]\n\n**********************************************************************\n1 items had failures:\n   1 of   9 in __main__.example_73\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mabshoff/release-cycle/sage-3.2.rc1/tmp/.doctest_number_field.py\n  ***   Warning: large Minkowski bound: certification will be VERY long.\n  ***   Warning: large Minkowski bound: certification will be VERY long.\n\n\t [29.4 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t -long devel/sage/sage/rings/number_field/number_field.py\nTotal time for all tests: 29.4 seconds\nsage -t -long devel/doc/tut/tut.tex                         \n**********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.2.rc1/devel/doc/tut/tut.tex\", line 2179:\n    : K.integral_basis()\nExpected:\n    [1, a, 1/2*a^2 + 1/2*a]\nGot:\n    [1, 1/2*a^2 + 1/2*a, a^2]\n**********************************************************************\n1 items had failures:\n   1 of  11 in __main__.example_99\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mabshoff/release-cycle/sage-3.2.rc1/tmp/.doctest_tut.py\n\t [25.2 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t -long devel/doc/tut/tut.tex\nTotal time for all tests: 25.2 seconds\nsage -t -long devel/doc/const/const.tex                     **********************************************************************\nFile \"/scratch/mabshoff/release-cycle/sage-3.2.rc1/devel/doc/const/const.tex\", line 3450:\n    : K.integral_basis()\nExpected:\n    [1, a, 1/2*a^2 + 1/2*a]\nGot:\n    [1, 1/2*a^2 + 1/2*a, a^2]\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_123\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /scratch/mabshoff/release-cycle/sage-3.2.rc1/tmp/.doctest_const.py\n\t [31.0 s]\nexit code: 1024\n \n----------------------------------------------------------------------\nThe following tests failed:\n\n\n\tsage -t -long devel/doc/const/const.tex\nTotal time for all tests: 31.0 seconds\n```",
    "created_at": "2008-11-14T20:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24232",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:21" align="right">comment:21</div>

There are some slight doctest failures to fix:

```
sage -t -long devel/sage/sage/rings/number_field/number_field.py
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.2.rc1/devel/sage/sage/rings/number_field/number_field.py", line 2653:
    sage: F.reduced_basis(prec=96)
Expected:
    [1, alpha, alpha^2 - 15*alpha, alpha^3 - 16*alpha^2 + 469*alpha + 267109] 
Got:
    [1, alpha, alpha^3 - 2*alpha^2 + 15*alpha, 16*alpha^3 - 31*alpha^2 + 469*alpha + 267109]

**********************************************************************
1 items had failures:
   1 of   9 in __main__.example_73
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mabshoff/release-cycle/sage-3.2.rc1/tmp/.doctest_number_field.py
  ***   Warning: large Minkowski bound: certification will be VERY long.
  ***   Warning: large Minkowski bound: certification will be VERY long.

	 [29.4 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


	sage -t -long devel/sage/sage/rings/number_field/number_field.py
Total time for all tests: 29.4 seconds
sage -t -long devel/doc/tut/tut.tex                         
**********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.2.rc1/devel/doc/tut/tut.tex", line 2179:
    : K.integral_basis()
Expected:
    [1, a, 1/2*a^2 + 1/2*a]
Got:
    [1, 1/2*a^2 + 1/2*a, a^2]
**********************************************************************
1 items had failures:
   1 of  11 in __main__.example_99
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mabshoff/release-cycle/sage-3.2.rc1/tmp/.doctest_tut.py
	 [25.2 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


	sage -t -long devel/doc/tut/tut.tex
Total time for all tests: 25.2 seconds
sage -t -long devel/doc/const/const.tex                     **********************************************************************
File "/scratch/mabshoff/release-cycle/sage-3.2.rc1/devel/doc/const/const.tex", line 3450:
    : K.integral_basis()
Expected:
    [1, a, 1/2*a^2 + 1/2*a]
Got:
    [1, 1/2*a^2 + 1/2*a, a^2]
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_123
***Test Failed*** 1 failures.
For whitespace errors, see the file /scratch/mabshoff/release-cycle/sage-3.2.rc1/tmp/.doctest_const.py
	 [31.0 s]
exit code: 1024
 
----------------------------------------------------------------------
The following tests failed:


	sage -t -long devel/doc/const/const.tex
Total time for all tests: 31.0 seconds
```



---

archive/issue_comments_024233.json:
```json
{
    "body": "Attachment: **[trac-4249-3.patch.gz](https://github.com/sagemath/sage/files/ticket4249/trac-4249-3.patch.gz)**\n\nAttachment: **[trac-4249-doc.patch.gz](https://github.com/sagemath/sage/files/ticket4249/trac-4249-doc.patch.gz)**",
    "created_at": "2008-11-14T20:47:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24233",
    "user": "https://github.com/JohnCremona"
}
```

Attachment: **[trac-4249-3.patch.gz](https://github.com/sagemath/sage/files/ticket4249/trac-4249-3.patch.gz)**

Attachment: **[trac-4249-doc.patch.gz](https://github.com/sagemath/sage/files/ticket4249/trac-4249-doc.patch.gz)**



---

archive/issue_comments_024234.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nStrange about that first one -- it was one where I had had different output on 32- and 64-bit machines, but now they are the same.  Fixed in trac-4249-3.patch.\n\nThe doc ones are in a separate patch  trac-4249-doc.patch which I hope can be dealt with: I did \"hg ci\" and then \"hg export tip\" from devel/doc.  For some reason the patch also affects patchlevel.tex.",
    "created_at": "2008-11-14T20:48:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24234",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:22" align="right">comment:22</div>

Strange about that first one -- it was one where I had had different output on 32- and 64-bit machines, but now they are the same.  Fixed in trac-4249-3.patch.

The doc ones are in a separate patch  trac-4249-doc.patch which I hope can be dealt with: I did "hg ci" and then "hg export tip" from devel/doc.  For some reason the patch also affects patchlevel.tex.



---

archive/issue_events_047275.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2008-11-14T20:48:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "title_is": "[needs review of final doctest fixes] Inconsistency in number field integral bases",
    "title_was": "[needs doctest fixes] Inconsistency in number field integral bases",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47275"
}
```



---

archive/issue_comments_024235.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nYep, last patches look good.",
    "created_at": "2008-11-15T09:31:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24235",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:23" align="right">comment:23</div>

Yep, last patches look good.



---

archive/issue_events_047276.json:
```json
{
    "actor": "https://github.com/craigcitro",
    "created_at": "2008-11-15T09:31:23Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "title_is": "Inconsistency in number field integral bases",
    "title_was": "[needs review of final doctest fixes] Inconsistency in number field integral bases",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47276"
}
```



---

archive/issue_comments_024236.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWhat is the credit situation, i.e. authorship here: John Cremona, John Voight? Review Craig Citro?\n\nWhat about Aranes Maite?\n\nCheers,\n\nMichael",
    "created_at": "2008-11-15T09:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24236",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:24" align="right">comment:24</div>

What is the credit situation, i.e. authorship here: John Cremona, John Voight? Review Craig Citro?

What about Aranes Maite?

Cheers,

Michael



---

archive/issue_comments_024237.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI think John C wrote sage-4249.patch, I wrote trac-4249-1a.patch as part of the review, John Voight and I each wrote half of trac-4249-pt2a.patch and reviewed the other, and John Cremona also reviewed this patch. Then John Cremona wrote pt3 and the doc patch.\n\nEither that, or it was Col. Mustard in the study, with the candlestick. (I would be completely in favor of that actually appearing in the release notes.)\n\nI'm not sure if the original patch was written with Aranes Maite.",
    "created_at": "2008-11-15T09:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24237",
    "user": "https://github.com/craigcitro"
}
```

<div id="comment:25" align="right">comment:25</div>

I think John C wrote sage-4249.patch, I wrote trac-4249-1a.patch as part of the review, John Voight and I each wrote half of trac-4249-pt2a.patch and reviewed the other, and John Cremona also reviewed this patch. Then John Cremona wrote pt3 and the doc patch.

Either that, or it was Col. Mustard in the study, with the candlestick. (I would be completely in favor of that actually appearing in the release notes.)

I'm not sure if the original patch was written with Aranes Maite.



---

archive/issue_comments_024238.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@craigcitro](#comment:25):\n> I think John C wrote sage-4249.patch, I wrote trac-4249-1a.patch as part of the review, John Voight and I each wrote half of trac-4249-pt2a.patch and reviewed the other, and John Cremona also reviewed this patch. Then John Cremona wrote pt3 and the doc patch.\n> \n\nThat is accurate as far as I am concerned.\n\n> Either that, or it was Col. Mustard in the study, with the candlestick. (I would be completely in favor of that actually appearing in the release notes.)\n> \n> I'm not sure if the original patch was written with Aranes Maite.\n\nNo, but she (my student) was the one who alerted me to the problem in the first place.",
    "created_at": "2008-11-15T10:03:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24238",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@craigcitro](#comment:25):
> I think John C wrote sage-4249.patch, I wrote trac-4249-1a.patch as part of the review, John Voight and I each wrote half of trac-4249-pt2a.patch and reviewed the other, and John Cremona also reviewed this patch. Then John Cremona wrote pt3 and the doc patch.
> 

That is accurate as far as I am concerned.

> Either that, or it was Col. Mustard in the study, with the candlestick. (I would be completely in favor of that actually appearing in the release notes.)
> 
> I'm not sure if the original patch was written with Aranes Maite.

No, but she (my student) was the one who alerted me to the problem in the first place.



---

archive/issue_events_047277.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-15T10:27:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47277"
}
```



---

archive/issue_events_047278.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-15T10:27:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47278"
}
```



---

archive/issue_comments_024239.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nMerged all five patches in Sage 3.2.rc1",
    "created_at": "2008-11-15T10:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4249#issuecomment-24239",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:27" align="right">comment:27</div>

Merged all five patches in Sage 3.2.rc1



---

archive/issue_events_047279.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-19T21:48:29Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "milestone_number": null,
    "milestone_title": "sage-3.2.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47279"
}
```



---

archive/issue_events_047280.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-19T21:48:29Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4249",
    "milestone_number": null,
    "milestone_title": "sage-3.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4249#event-47280"
}
```
