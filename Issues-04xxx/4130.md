# Issue 4130: [with patch, positive review] #4125 does not work on OS X 10.4

archive/issues_004130.json:
```json
{
    "body": "It looks like OS X 10.4.11's version of `which` doesn't behave very well...\n\n```\nhamptonio: nomad66-214:~ mh$ echo $PORTS_PATH\n[1:03pm] hamptonio: no port in /Volumes/D/sage-3.0.2 /Library/Frameworks/Python.framework/Versions/Current/bin /bin /sbin /usr/bin /usr/sbin /usr/local/bin /usr/local/teTeX/bin/i386-apple-darwin-current\n[1:03pm] hamptonio: nomad66-214:~ mh$ echo $FINK_PATH\n[1:03pm] hamptonio: no fink in /Volumes/D/sage-3.0.2 /Library/Frameworks/Python.framework/Versions/Current/bin /bin /sbin /usr/bin /usr/sbin /usr/local/bin /usr/local/teTeX/bin/i386-apple-darwin-current\n[1:03pm] hamptonio: nomad66-214:~ mh$ if [ \"$PORTS_PATH\" -o \"$FINK_PATH\" ]; then echo \"*\"; fi\n[1:03pm] hamptonio: *\n```\n\nAssignee: mabshoff\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/4130\n\n",
    "closed_at": "2008-09-16T03:47:09Z",
    "created_at": "2008-09-15T20:11:56Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-3.1.2",
    "title": "[with patch, positive review] #4125 does not work on OS X 10.4",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/4130",
    "user": "https://github.com/rlmill"
}
```
It looks like OS X 10.4.11's version of `which` doesn't behave very well...

```
hamptonio: nomad66-214:~ mh$ echo $PORTS_PATH
[1:03pm] hamptonio: no port in /Volumes/D/sage-3.0.2 /Library/Frameworks/Python.framework/Versions/Current/bin /bin /sbin /usr/bin /usr/sbin /usr/local/bin /usr/local/teTeX/bin/i386-apple-darwin-current
[1:03pm] hamptonio: nomad66-214:~ mh$ echo $FINK_PATH
[1:03pm] hamptonio: no fink in /Volumes/D/sage-3.0.2 /Library/Frameworks/Python.framework/Versions/Current/bin /bin /sbin /usr/bin /usr/sbin /usr/local/bin /usr/local/teTeX/bin/i386-apple-darwin-current
[1:03pm] hamptonio: nomad66-214:~ mh$ if [ "$PORTS_PATH" -o "$FINK_PATH" ]; then echo "*"; fi
[1:03pm] hamptonio: *
```

Assignee: mabshoff

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/4130





---

archive/issue_comments_032407.json:
```json
{
    "body": "Attachment [trac_4130.patch](tarball://root/attachments/some-uuid/ticket4130/trac_4130.patch) by mabshoff created at 2008-09-16 03:31:25",
    "created_at": "2008-09-16T03:31:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4130#issuecomment-32407",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Attachment [trac_4130.patch](tarball://root/attachments/some-uuid/ticket4130/trac_4130.patch) by mabshoff created at 2008-09-16 03:31:25



---

archive/issue_comments_032408.json:
```json
{
    "body": "<a id='comment:1'></a>The attached patch has been tested on OSX 10.4 and 10.5, with and without Fink and/or MacPorts. The patch also contains a fix to sage-env that was not yet in the spkg/base repo (since -sdist copies sage-env over without committing it to the repo).\n\nCheers,\n\nMichael",
    "created_at": "2008-09-16T03:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4130#issuecomment-32408",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:1'></a>The attached patch has been tested on OSX 10.4 and 10.5, with and without Fink and/or MacPorts. The patch also contains a fix to sage-env that was not yet in the spkg/base repo (since -sdist copies sage-env over without committing it to the repo).

Cheers,

Michael



---

archive/issue_comments_032409.json:
```json
{
    "body": "Changing status from new to assigned.",
    "created_at": "2008-09-16T03:32:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4130#issuecomment-32409",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Changing status from new to assigned.



---

archive/issue_comments_032410.json:
```json
{
    "body": "<a id='comment:3'></a>Merged in Sage 3.1.2.rc5",
    "created_at": "2008-09-16T03:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4130#issuecomment-32410",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:3'></a>Merged in Sage 3.1.2.rc5



---

archive/issue_events_009410.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mabshoff",
    "created_at": "2008-09-16T03:47:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/4130",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/4130#event-9410"
}
```



---

archive/issue_comments_032411.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2008-09-16T03:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4130#issuecomment-32411",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

Resolution: fixed



---

archive/issue_comments_032412.json:
```json
{
    "body": "<a id='comment:4'></a>hmmm... this is still not foolproof.  If you type 'make', the first time, it dies with the proper message.  But despite not                 setting any environment vairable, the second time you run 'make', there is no error, no warning, nothing.\n\n\nI assume that the prereq script doesn't get called every time make is run?  Maybe the fink/ports detection should go at the start.",
    "created_at": "2008-09-17T05:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4130#issuecomment-32412",
    "user": "https://trac.sagemath.org/admin/accounts/users/dphilp"
}
```

<a id='comment:4'></a>hmmm... this is still not foolproof.  If you type 'make', the first time, it dies with the proper message.  But despite not                 setting any environment vairable, the second time you run 'make', there is no error, no warning, nothing.


I assume that the prereq script doesn't get called every time make is run?  Maybe the fink/ports detection should go at the start.



---

archive/issue_comments_032413.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 dphilp]:\n> hmmm... this is still not foolproof.  If you type 'make', the first time, it dies with the proper message.  But despite not                 setting any environment vairable, the second time you run 'make', there is no error, no warning, nothing.\n> \n> \n> I assume that the prereq script doesn't get called every time make is run?  Maybe the fink/ports detection should go at the start.\n\n\nThat issue is pretty much covered by #3140. This ticket was about fixing the OSX 10.4 issues, so closing it is valid. But thanks for being persistent :)\n\nCheers,\n\nMichael",
    "created_at": "2008-09-17T11:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/4130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/4130#issuecomment-32413",
    "user": "https://trac.sagemath.org/admin/accounts/users/mabshoff"
}
```

<a id='comment:5'></a>Replying to [comment:4 dphilp]:
> hmmm... this is still not foolproof.  If you type 'make', the first time, it dies with the proper message.  But despite not                 setting any environment vairable, the second time you run 'make', there is no error, no warning, nothing.
> 
> 
> I assume that the prereq script doesn't get called every time make is run?  Maybe the fink/ports detection should go at the start.


That issue is pretty much covered by #3140. This ticket was about fixing the OSX 10.4 issues, so closing it is valid. But thanks for being persistent :)

Cheers,

Michael
