# Issue 4120: New code for binary quadratic forms

archive/issues_004120.json:
```json
{
    "assignees": [
        "https://github.com/RalphieBoy"
    ],
    "body": "The code supporting binary quadratic forms, in quadratic_forms/binary_qf.py, is missing some functionality.  The patch in this ticket provides the following changes:\n- better support for indefinite forms\n- tests for equivalence, positive and negative definite, indefinite, primitive forms\n- action of matrix on a form\n- find content\n- is_reduced() is rewritten\n- polynomial() now uses an instance variable (poly)\n- some general cleaning up\n\nDoctests are in place for the new code, so the file remains at 100% coverage.\n\n\nCC:  @RalphieBoy @jonhanke @tornaria\n\nComponent: **quadratic forms**\n\nAuthor: **Justin Walker, Jonathan Hanke, Gonzalo Tornar\u00eda, John Cremona**\n\nBranch: **[`748d390`](https://github.com/sagemath/sagetrac-mirror/commit/748d3908d0fb0deaa683202f521a006020c3da08)**\n\nReviewer: **John Cremona, Peter Bruin, Simon Brandhorst**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/4120_\n\n",
    "closed_at": "2018-06-14T07:41:15Z",
    "created_at": "2008-09-14T19:31:00Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20quadratic%20forms",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "New code for binary quadratic forms",
    "type": "issue",
    "updated_at": "2023-01-14T13:59:22Z",
    "url": "https://github.com/sagemath/sage/issues/4120",
    "user": "https://github.com/RalphieBoy"
}
```
The code supporting binary quadratic forms, in quadratic_forms/binary_qf.py, is missing some functionality.  The patch in this ticket provides the following changes:
- better support for indefinite forms
- tests for equivalence, positive and negative definite, indefinite, primitive forms
- action of matrix on a form
- find content
- is_reduced() is rewritten
- polynomial() now uses an instance variable (poly)
- some general cleaning up

Doctests are in place for the new code, so the file remains at 100% coverage.


CC:  @RalphieBoy @jonhanke @tornaria

Component: **quadratic forms**

Author: **Justin Walker, Jonathan Hanke, Gonzalo Tornar√≠a, John Cremona**

Branch: **[`748d390`](https://github.com/sagemath/sagetrac-mirror/commit/748d3908d0fb0deaa683202f521a006020c3da08)**

Reviewer: **John Cremona, Peter Bruin, Simon Brandhorst**

_Issue created by migration from https://trac.sagemath.org/ticket/4120_





---

archive/issue_events_045690.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2008-09-14T19:31:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45690"
}
```



---

archive/issue_events_045691.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2008-09-14T19:31:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45691"
}
```



---

archive/issue_events_045692.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2008-09-14T19:31:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45692"
}
```



---

archive/issue_events_045693.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2008-09-14T19:31:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45693"
}
```



---

archive/issue_comments_023331.json:
```json
{
    "body": "Attachment: **[diff.gz](https://github.com/sagemath/sage/files/ticket4120/diff.gz)**\n\nContext diff of new, old versions of quadratic_forms/binary_qf.py",
    "created_at": "2008-09-14T19:32:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23331",
    "user": "https://github.com/RalphieBoy"
}
```

Attachment: **[diff.gz](https://github.com/sagemath/sage/files/ticket4120/diff.gz)**

Context diff of new, old versions of quadratic_forms/binary_qf.py



---

archive/issue_events_045694.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-09-14T19:48:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-3.1.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45694"
}
```



---

archive/issue_comments_023332.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nJustin,\n\nthe diff is inverse and you should also add an extension patch to the file.\n\nCheers,\n\nMichael",
    "created_at": "2008-09-14T19:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23332",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:2" align="right">comment:2</div>

Justin,

the diff is inverse and you should also add an extension patch to the file.

Cheers,

Michael



---

archive/issue_comments_023333.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAttachment: **[sage-4120.patch.gz](https://github.com/sagemath/sage/files/ticket4120/sage-4120.patch.gz)**\n\nUpdated patch, works with 3.1.1 and 3.1.2.  Needs review.  And maybe testing :-}  Also incorporated performance changes from Holdsworth's changes.",
    "created_at": "2008-09-24T02:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23333",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:3" align="right">comment:3</div>

Attachment: **[sage-4120.patch.gz](https://github.com/sagemath/sage/files/ticket4120/sage-4120.patch.gz)**

Updated patch, works with 3.1.1 and 3.1.2.  Needs review.  And maybe testing :-}  Also incorporated performance changes from Holdsworth's changes.



---

archive/issue_events_045695.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2008-09-24T04:42:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45695"
}
```



---

archive/issue_events_045696.json:
```json
{
    "actor": "https://github.com/aghitza",
    "created_at": "2008-09-24T04:42:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45696"
}
```



---

archive/issue_comments_023334.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI am planning to review this, which looks pretty good.  First, some preliminary questions/comments:\n* I see that we now have some, but not all, support for indefinite forms.  (e.g. no equivalence testing, no class number).  Why not use pari interface for those, at least until we do our own?  (I would have thought that pari was pretty efficient for these things).\n* Your action of 2x2 matrices is a left action.  Do we want to allow users to use a right action (say, by having RMul and LMul with Mul an alias for one of them)?\n* Your action includes multiplication by det(A).  Now there are lots of application for this code, some will like that and some will want something else.  So why don't we have another parameter for Mul() which is the power of the determinant to be used.  Personally I would set the default to 0 but if you wanted it to be 1 (as in your code) I could live with that.\n* I still think that quite a lot of the functionality could be factored out into a more general binary form class, but that can be done later by someone (e.g. me) who uses higher degree forms.",
    "created_at": "2008-09-24T13:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23334",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:5" align="right">comment:5</div>

I am planning to review this, which looks pretty good.  First, some preliminary questions/comments:
* I see that we now have some, but not all, support for indefinite forms.  (e.g. no equivalence testing, no class number).  Why not use pari interface for those, at least until we do our own?  (I would have thought that pari was pretty efficient for these things).
* Your action of 2x2 matrices is a left action.  Do we want to allow users to use a right action (say, by having RMul and LMul with Mul an alias for one of them)?
* Your action includes multiplication by det(A).  Now there are lots of application for this code, some will like that and some will want something else.  So why don't we have another parameter for Mul() which is the power of the determinant to be used.  Personally I would set the default to 0 but if you wanted it to be 1 (as in your code) I could live with that.
* I still think that quite a lot of the functionality could be factored out into a more general binary form class, but that can be done later by someone (e.g. me) who uses higher degree forms.



---

archive/issue_comments_023335.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe patch also works with 3.1.3.alpha1.  Doctests succeed.",
    "created_at": "2008-09-24T21:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23335",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:6" align="right">comment:6</div>

The patch also works with 3.1.3.alpha1.  Doctests succeed.



---

archive/issue_comments_023336.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHere's a second patch, to be applied on top of sage-4120.patch.\n\nThis one fixes some bugs and typos in the first, cleans up some code, and adds more support for indefinite forms (equivalence checking, in particular).  Probably adds a few bugs as well, but that's just a by-product.",
    "created_at": "2008-10-03T06:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23336",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:7" align="right">comment:7</div>

Here's a second patch, to be applied on top of sage-4120.patch.

This one fixes some bugs and typos in the first, cleans up some code, and adds more support for indefinite forms (equivalence checking, in particular).  Probably adds a few bugs as well, but that's just a by-product.



---

archive/issue_comments_023337.json:
```json
{
    "body": "Attachment: **[sage-4120-2.patch.gz](https://github.com/sagemath/sage/files/ticket4120/sage-4120-2.patch.gz)**\n\nTo be applied on top of sage-4120.patch",
    "created_at": "2008-10-03T06:06:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23337",
    "user": "https://github.com/RalphieBoy"
}
```

Attachment: **[sage-4120-2.patch.gz](https://github.com/sagemath/sage/files/ticket4120/sage-4120-2.patch.gz)**

To be applied on top of sage-4120.patch



---

archive/issue_comments_023338.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis is a third patch, applied on sage-4120-2.patch.\n\nThis one extends support for indefinite forms and fixes a few bugs (both in code and in the Buchmann/Vollmer algorithms).\n\nOne change in particular deserves discussion: I have changed the normalization and reduction procedures to return both the form in question and the transformation matrix used to derive that form.  This makes things a bit more awkward in the code, so there are two questions: is this really useful, and if yes, is there a better way to do it?\n\nAlso, I assigned this to me :-}.",
    "created_at": "2008-10-07T04:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23338",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:8" align="right">comment:8</div>

This is a third patch, applied on sage-4120-2.patch.

This one extends support for indefinite forms and fixes a few bugs (both in code and in the Buchmann/Vollmer algorithms).

One change in particular deserves discussion: I have changed the normalization and reduction procedures to return both the form in question and the transformation matrix used to derive that form.  This makes things a bit more awkward in the code, so there are two questions: is this really useful, and if yes, is there a better way to do it?

Also, I assigned this to me :-}.



---

archive/issue_events_045697.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2008-10-07T04:22:34Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "subject": "https://github.com/RalphieBoy",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45697"
}
```



---

archive/issue_comments_023339.json:
```json
{
    "body": "To be applied on top of sage-4120-2.patch",
    "created_at": "2008-10-07T04:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23339",
    "user": "https://github.com/RalphieBoy"
}
```

To be applied on top of sage-4120-2.patch



---

archive/issue_comments_023340.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAttachment: **[sage-4120-3.patch.gz](https://github.com/sagemath/sage/files/ticket4120/sage-4120-3.patch.gz)**\n\nApplied all three patches against 3.1.3.rc0, one at a time, running the doctests each time.  All doctests succeeded.  No problems noted.",
    "created_at": "2008-10-14T04:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23340",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:9" align="right">comment:9</div>

Attachment: **[sage-4120-3.patch.gz](https://github.com/sagemath/sage/files/ticket4120/sage-4120-3.patch.gz)**

Applied all three patches against 3.1.3.rc0, one at a time, running the doctests each time.  All doctests succeeded.  No problems noted.



---

archive/issue_comments_023341.json:
```json
{
    "body": "REPLACES earlier patches",
    "created_at": "2008-10-28T20:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23341",
    "user": "https://github.com/JohnCremona"
}
```

REPLACES earlier patches



---

archive/issue_comments_023342.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAttachment: **[sage-trac4120.new.patch.gz](https://github.com/sagemath/sage/files/ticket4120/sage-trac4120.new.patch.gz)**\n\nMy patch sage-trac4120new.patch combines the three earlier ones and adds the following:\n* Fixing various bugs and typos\n* Sorting out a lot of formatting issues in doctests\n* Adds some new functions\n* Renames Mul to `__mul__` so one can say Q*M to apply matrix M to form Q\n\nRegarding the latter I relented and removed the scale parameter;  since the det is either +1 or -1 I am happy with multiplying (or dividing) by the determinant.\n\nIssues do remain:\n* The various transform function which return a new form Q and a transform T really must satisfy self.T==Q, but they don't.  Hence the commented out assertions.\n* We must decide whether we are talking about weak or strict equivalence (GL or SL(2,ZZ)).  At the moment it is hard to tell which.\n* For indefinite forms there are several different notions of \"reduced\".  OK to to stick to one, but we should make this explicit.\n* The class number function looks inefficient to me, it should be replaced by the fast code by Skoruppa to list reduced forms (in the definite case at least).\n\nThat's all I can remember, but this will need more work before it can go in.",
    "created_at": "2008-10-28T20:53:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23342",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:10" align="right">comment:10</div>

Attachment: **[sage-trac4120.new.patch.gz](https://github.com/sagemath/sage/files/ticket4120/sage-trac4120.new.patch.gz)**

My patch sage-trac4120new.patch combines the three earlier ones and adds the following:
* Fixing various bugs and typos
* Sorting out a lot of formatting issues in doctests
* Adds some new functions
* Renames Mul to `__mul__` so one can say Q*M to apply matrix M to form Q

Regarding the latter I relented and removed the scale parameter;  since the det is either +1 or -1 I am happy with multiplying (or dividing) by the determinant.

Issues do remain:
* The various transform function which return a new form Q and a transform T really must satisfy self.T==Q, but they don't.  Hence the commented out assertions.
* We must decide whether we are talking about weak or strict equivalence (GL or SL(2,ZZ)).  At the moment it is hard to tell which.
* For indefinite forms there are several different notions of "reduced".  OK to to stick to one, but we should make this explicit.
* The class number function looks inefficient to me, it should be replaced by the fast code by Skoruppa to list reduced forms (in the definite case at least).

That's all I can remember, but this will need more work before it can go in.



---

archive/issue_comments_023343.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSee also #4470 for Jon Hanke's work on quadratic forms.\n\nCheers,\n\nMichael",
    "created_at": "2008-11-08T21:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23343",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:11" align="right">comment:11</div>

See also #4470 for Jon Hanke's work on quadratic forms.

Cheers,

Michael



---

archive/issue_events_045698.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-08T21:32:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45698"
}
```



---

archive/issue_events_045699.json:
```json
{
    "actor": "https://github.com/sagetrac-mabshoff",
    "created_at": "2008-11-08T21:32:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20quadratic%20forms",
    "label_color": "0000ff",
    "label_name": "c: quadratic forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45699"
}
```



---

archive/issue_events_045700.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-11-28T21:52:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45700"
}
```



---

archive/issue_events_045701.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2008-11-28T21:52:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45701"
}
```



---

archive/issue_comments_023344.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nTo comment on the relationship with #4470:\n\n```\nAFAIK the binary quadratic forms are untouched by Jon's work. We\nshould rename the file to bring it more in line with what is coming\nfrom Jon, i.e. all I have left to do to post a patch is to rename\nvarious files to qf_ from quadratic_forms_, fix the imports and rebase\nthe extensions to module_list.py. All trivial, it just needs to be\ndone :p\n```\n\nCheers,\n\nMichael",
    "created_at": "2008-11-28T22:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23344",
    "user": "https://github.com/sagetrac-mabshoff"
}
```

<div id="comment:15" align="right">comment:15</div>

To comment on the relationship with #4470:

```
AFAIK the binary quadratic forms are untouched by Jon's work. We
should rename the file to bring it more in line with what is coming
from Jon, i.e. all I have left to do to post a patch is to rename
various files to qf_ from quadratic_forms_, fix the imports and rebase
the extensions to module_list.py. All trivial, it just needs to be
done :p
```

Cheers,

Michael



---

archive/issue_comments_023345.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI've reviewed the code from the last patch as submitted by John Cremona (sage-trac4120.new.patch). It applies cleanly on 3.3 and also on top of the first two patches in #4470.\n\nBelow are some comments about the code in `binary_qf.py`. I didn't make a difference between old code and code in the patch, since most of the code is in the patch, anyway.\n\n- Constructor:\n  - BinaryQF([1,2,3], 4, 5) should raise an error\n  - I would like to suggest an additional constructor:\n\n     ```\n        sage: BinaryQF(2, 1, disc = -23)\n        2*x^2 + x*y + 3*y^2\n    ```\n    this is handy when the discriminant is fixed and one knows the first two coefficients\n    of a form\n\n- `__repr__`:\n   \n  I don't like the fact that a quadratic form is represented by a polynomial, may lead\n  to potential confusion. What about something like:\n  \"`Binary quadratic form over Integer Ring with coefficients [a, b, c]`\"\n  ?\n\n- polynomial:\n  - the variables for the polynomial are hardcoded... 'x' and 'y'... not very important (I rather not have a \"polynomial\" function... I'd replace it by a `__call__` function which works for elements in any ring, then one can call e.g. `Q(x,y)` where x and y are in `ZZ['x,y']`, etc.\n\n- action by matrices:\n  - Q * M is a left action --> more natural to be right action!!\n    I.e. right now\n\n     ```\n        sage: Q = BinaryQF(4,-4,15)\n        sage: M = matrix(ZZ, 2, [1, 1, 0, 1])\n        sage: M1 = matrix(ZZ, 2, [1, 0, 1, 1])\n        sage: Q * M * M1 == Q * (M * M1)\n        False\n        sage: Q * M * M1 == Q * (M1 * M)\n        True\n    ```\n  - I like the notation `Q(M)` for the action of matrices -- this is consitent with the\n    notation for general quadratic forms and representation by vectors or sublattices (#4470)\n     \n\n    Maybe * should be reserved for composition?\n\n- is_normal: he doctest doesn't explain what it is\n\n- is_equivalent\n  - IMO should return True or False\n  - have extra parameter to request transformation matrix\n  - needs more doctests (in particular indefinite, etc)\n  - sage: Q * Q.is_equivalent(Q1)[1].transpose() == Q1 /// should be True\n   this is just an issue with the action of matrices being left action\n  - for indefinite: should not compute the cycle for every form!!\n   instead, compute `self * other^(-1)`  (in the class group), and check if it is in the\n   principal cycle, which should of course be cached once for each discriminant. This is\n   helpful since one will probably use many forms of the same discriminant together.\n    \n\n   Not sure about how to do memory management though: it'd be nice if every indefinite\n   form of discriminant D holds a reference to the principal cycle of discriminant D, so\n   the cycle is deleted when the last indefinite form of discriminant D is deleted ???\n    \n\n   ALSO: IMO the caching of the cycle should be done by the function Cycle() itself, not by\n   is_equivalent.\n    \n\n   Moreover, the cycle needs to cache the transformation matrix as well, so we can\n   actually figure out the correct transformation matrix.\n\n- matrix: should be the Hessian for consistency with the rest of the code ???\n  the advantage is that it makes the matrix over ZZ (with even diagonal)\n\n- is_zero: should not need a gcd to decide if it is 0\n\n- s and ss: internal, should be prepended with `__` ???\n\n- class number computation should use pari\n\n- implement conversions between pari <--> sage   for BinaryQF and Qfb\n  maybe try to wrap around pari functionality as much as possible, for speed ??? (both\n  runtime and development!!) E.g. composition, etc.",
    "created_at": "2009-02-24T02:36:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23345",
    "user": "https://github.com/tornaria"
}
```

<div id="comment:16" align="right">comment:16</div>

I've reviewed the code from the last patch as submitted by John Cremona (sage-trac4120.new.patch). It applies cleanly on 3.3 and also on top of the first two patches in #4470.

Below are some comments about the code in `binary_qf.py`. I didn't make a difference between old code and code in the patch, since most of the code is in the patch, anyway.

- Constructor:
  - BinaryQF([1,2,3], 4, 5) should raise an error
  - I would like to suggest an additional constructor:

     ```
        sage: BinaryQF(2, 1, disc = -23)
        2*x^2 + x*y + 3*y^2
    ```
    this is handy when the discriminant is fixed and one knows the first two coefficients
    of a form

- `__repr__`:
   
  I don't like the fact that a quadratic form is represented by a polynomial, may lead
  to potential confusion. What about something like:
  "`Binary quadratic form over Integer Ring with coefficients [a, b, c]`"
  ?

- polynomial:
  - the variables for the polynomial are hardcoded... 'x' and 'y'... not very important (I rather not have a "polynomial" function... I'd replace it by a `__call__` function which works for elements in any ring, then one can call e.g. `Q(x,y)` where x and y are in `ZZ['x,y']`, etc.

- action by matrices:
  - Q * M is a left action --> more natural to be right action!!
    I.e. right now

     ```
        sage: Q = BinaryQF(4,-4,15)
        sage: M = matrix(ZZ, 2, [1, 1, 0, 1])
        sage: M1 = matrix(ZZ, 2, [1, 0, 1, 1])
        sage: Q * M * M1 == Q * (M * M1)
        False
        sage: Q * M * M1 == Q * (M1 * M)
        True
    ```
  - I like the notation `Q(M)` for the action of matrices -- this is consitent with the
    notation for general quadratic forms and representation by vectors or sublattices (#4470)
     

    Maybe * should be reserved for composition?

- is_normal: he doctest doesn't explain what it is

- is_equivalent
  - IMO should return True or False
  - have extra parameter to request transformation matrix
  - needs more doctests (in particular indefinite, etc)
  - sage: Q * Q.is_equivalent(Q1)[1].transpose() == Q1 /// should be True
   this is just an issue with the action of matrices being left action
  - for indefinite: should not compute the cycle for every form!!
   instead, compute `self * other^(-1)`  (in the class group), and check if it is in the
   principal cycle, which should of course be cached once for each discriminant. This is
   helpful since one will probably use many forms of the same discriminant together.
    

   Not sure about how to do memory management though: it'd be nice if every indefinite
   form of discriminant D holds a reference to the principal cycle of discriminant D, so
   the cycle is deleted when the last indefinite form of discriminant D is deleted ???
    

   ALSO: IMO the caching of the cycle should be done by the function Cycle() itself, not by
   is_equivalent.
    

   Moreover, the cycle needs to cache the transformation matrix as well, so we can
   actually figure out the correct transformation matrix.

- matrix: should be the Hessian for consistency with the rest of the code ???
  the advantage is that it makes the matrix over ZZ (with even diagonal)

- is_zero: should not need a gcd to decide if it is 0

- s and ss: internal, should be prepended with `__` ???

- class number computation should use pari

- implement conversions between pari <--> sage   for BinaryQF and Qfb
  maybe try to wrap around pari functionality as much as possible, for speed ??? (both
  runtime and development!!) E.g. composition, etc.



---

archive/issue_comments_023346.json:
```json
{
    "body": "New patch; replaces previous patches.",
    "created_at": "2011-03-24T22:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23346",
    "user": "https://github.com/RalphieBoy"
}
```

New patch; replaces previous patches.



---

archive/issue_comments_023347.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAttachment: **[4120-110324.patch.gz](https://github.com/sagemath/sage/files/ticket4120/4120-110324.patch.gz)**\n\nNew patch.  Primary content is support for indefinite binary forms.",
    "created_at": "2011-03-24T22:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23347",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:17" align="right">comment:17</div>

Attachment: **[4120-110324.patch.gz](https://github.com/sagemath/sage/files/ticket4120/4120-110324.patch.gz)**

New patch.  Primary content is support for indefinite binary forms.



---

archive/issue_events_045702.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2011-03-24T22:57:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45702"
}
```



---

archive/issue_events_045703.json:
```json
{
    "actor": "https://github.com/RalphieBoy",
    "created_at": "2011-03-24T22:57:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45703"
}
```



---

archive/issue_comments_023348.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nForgot to make this explicit: Previous patches include a lot more changes than are in the new one, but to simplify the review process (and my life), I've decided to break it up into smaller chunks.  More changes will be forthcoming (new trac tickets).",
    "created_at": "2011-03-24T23:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23348",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:20" align="right">comment:20</div>

Forgot to make this explicit: Previous patches include a lot more changes than are in the new one, but to simplify the review process (and my life), I've decided to break it up into smaller chunks.  More changes will be forthcoming (new trac tickets).



---

archive/issue_comments_023349.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nNOTE: And another thing: this patch should be applied against Sage 4.7.alpha2 or later (the release with the patch from #10741).",
    "created_at": "2011-03-24T23:21:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23349",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:21" align="right">comment:21</div>

NOTE: And another thing: this patch should be applied against Sage 4.7.alpha2 or later (the release with the patch from #10741).



---

archive/issue_comments_023350.json:
```json
{
    "body": "Author: **Justin Walker, Jon Hanke, Gonzalo Tornaria, John Cremona**",
    "created_at": "2011-03-25T19:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23350",
    "user": "https://github.com/JohnCremona"
}
```

Author: **Justin Walker, Jon Hanke, Gonzalo Tornaria, John Cremona**



---

archive/issue_comments_023351.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nPatch applies and tests pass.\n\nMy only suggestion is that for invalid input you should raise an appropriate error (ValueError) rather than printing something and returning [].  And all integers =0,1(mod 4) should be allowed, even squares?  The docstring should specify exactly what valid inputs are, in any case.",
    "created_at": "2011-03-25T19:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23351",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:22" align="right">comment:22</div>

Patch applies and tests pass.

My only suggestion is that for invalid input you should raise an appropriate error (ValueError) rather than printing something and returning [].  And all integers =0,1(mod 4) should be allowed, even squares?  The docstring should specify exactly what valid inputs are, in any case.



---

archive/issue_comments_023352.json:
```json
{
    "body": "Reviewer: **John Cremona**",
    "created_at": "2011-03-25T19:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23352",
    "user": "https://github.com/JohnCremona"
}
```

Reviewer: **John Cremona**



---

archive/issue_events_045704.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-25T19:24:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45704"
}
```



---

archive/issue_events_045705.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-03-25T19:24:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45705"
}
```



---

archive/issue_comments_023353.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI will make the changes to raise errors rather than return unexpected values; that makes sense.\n\nThere may be cases where restrictions on discriminants make sense.  For example, I don't think that reduction for a degenerate form makes sense, and there are cases where we don't have an implementation for for a specific class of forms (indefinite, say).  Thoughts?",
    "created_at": "2011-03-25T20:35:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23353",
    "user": "https://github.com/RalphieBoy"
}
```

<div id="comment:23" align="right">comment:23</div>

I will make the changes to raise errors rather than return unexpected values; that makes sense.

There may be cases where restrictions on discriminants make sense.  For example, I don't think that reduction for a degenerate form makes sense, and there are cases where we don't have an implementation for for a specific class of forms (indefinite, say).  Thoughts?



---

archive/issue_comments_023354.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@RalphieBoy](#comment%3A23):\n> I will make the changes to raise errors rather than return unexpected values; that makes sense.\n\nGood!  Thanks.\n\n> \n> There may be cases where restrictions on discriminants make sense.  For example, I don't think that reduction for a degenerate form makes sense, and there are cases where we don't have an implementation for for a specific class of forms (indefinite, say).  Thoughts?\n\nOK by me to restrict to B which are 0 or 1 mod 4 and not squares.",
    "created_at": "2011-03-25T21:59:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23354",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@RalphieBoy](#comment%3A23):
> I will make the changes to raise errors rather than return unexpected values; that makes sense.

Good!  Thanks.

> 
> There may be cases where restrictions on discriminants make sense.  For example, I don't think that reduction for a degenerate form makes sense, and there are cases where we don't have an implementation for for a specific class of forms (indefinite, say).  Thoughts?

OK by me to restrict to B which are 0 or 1 mod 4 and not squares.



---

archive/issue_events_045706.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45706"
}
```



---

archive/issue_events_045707.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45707"
}
```



---

archive/issue_events_045708.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45708"
}
```



---

archive/issue_events_045709.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45709"
}
```



---

archive/issue_comments_023355.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI tried to do some computations with binary quadratic forms of positive discriminant, discovered that a lot of functionality was missing, and then found this ticket, which has been inactive for 3 years...  Is anyone planning to work on it?\n\nSee also #6106.",
    "created_at": "2014-02-26T17:32:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23355",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:27" align="right">comment:27</div>

I tried to do some computations with binary quadratic forms of positive discriminant, discovered that a lot of functionality was missing, and then found this ticket, which has been inactive for 3 years...  Is anyone planning to work on it?

See also #6106.



---

archive/issue_comments_023356.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nConverted the patch to a Git branch; small fixes to make everything compile and pass tests.\n\nStill `needs_work` in view of [comment:22](#comment%3A22).",
    "created_at": "2014-02-26T21:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23356",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:28" align="right">comment:28</div>

Converted the patch to a Git branch; small fixes to make everything compile and pass tests.

Still `needs_work` in view of [comment:22](#comment%3A22).



---

archive/issue_comments_023357.json:
```json
{
    "body": "Commit: **[`b7337f3`](https://github.com/sagemath/sagetrac-mirror/commit/b7337f3a218585648a07a1268ba8e65a1887c1a2)**",
    "created_at": "2014-02-26T21:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23357",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[`b7337f3`](https://github.com/sagemath/sagetrac-mirror/commit/b7337f3a218585648a07a1268ba8e65a1887c1a2)**



---

archive/issue_comments_023358.json:
```json
{
    "body": "Branch: **[u/pbruin/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/4120-binary_quadratic_forms)**",
    "created_at": "2014-02-26T21:13:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23358",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/4120-binary_quadratic_forms)**



---

archive/issue_comments_023359.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96c1a86e063e7a7512978c574ec40c84641b66d4\"><code>96c1a86</code></a></td><td><code>binary_qf.py: clean up code and documentation</code></td></tr></table>\n",
    "created_at": "2014-02-26T23:18:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23359",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96c1a86e063e7a7512978c574ec40c84641b66d4"><code>96c1a86</code></a></td><td><code>binary_qf.py: clean up code and documentation</code></td></tr></table>




---

archive/issue_comments_023360.json:
```json
{
    "body": "Changed commit from **[`b7337f3`](https://github.com/sagemath/sagetrac-mirror/commit/b7337f3a218585648a07a1268ba8e65a1887c1a2)** to **[`96c1a86`](https://github.com/sagemath/sagetrac-mirror/commit/96c1a86e063e7a7512978c574ec40c84641b66d4)**",
    "created_at": "2014-02-26T23:18:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23360",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b7337f3`](https://github.com/sagemath/sagetrac-mirror/commit/b7337f3a218585648a07a1268ba8e65a1887c1a2)** to **[`96c1a86`](https://github.com/sagemath/sagetrac-mirror/commit/96c1a86e063e7a7512978c574ec40c84641b66d4)**



---

archive/issue_comments_023361.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,12 +1,11 @@\n-The code supporting binary quadratic forms, in quadratic_forms/binary_qf.py, is missing some functionality, and relies on Magma and Pari.  The patch in this ticket provides the following changes:\n-- tests for equivalence, normal, positive and negative definite, indefinite, primitive forms\n-- normalize a form\n+The code supporting binary quadratic forms, in quadratic_forms/binary_qf.py, is missing some functionality.  The patch in this ticket provides the following changes:\n+- better support for indefinite forms\n+- tests for equivalence, positive and negative definite, indefinite, primitive forms\n - action of matrix on a form\n-- find content; factor indefinite forms\n-In addition: \n-- reduce() no longer calls Pari\n-- some cleanup: is_reduced() is rewritten; polynomial() replaced with an instance variable (poly)\n+- find content\n+- is_reduced() is rewritten\n+- polynomial() now uses an instance variable (poly)\n+- some general cleaning up\n \n Doctests are in place for the new code, so the file remains at 100% coverage.\n \n-\n``````\n",
    "created_at": "2014-02-26T23:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23361",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,12 +1,11 @@
-The code supporting binary quadratic forms, in quadratic_forms/binary_qf.py, is missing some functionality, and relies on Magma and Pari.  The patch in this ticket provides the following changes:
-- tests for equivalence, normal, positive and negative definite, indefinite, primitive forms
-- normalize a form
+The code supporting binary quadratic forms, in quadratic_forms/binary_qf.py, is missing some functionality.  The patch in this ticket provides the following changes:
+- better support for indefinite forms
+- tests for equivalence, positive and negative definite, indefinite, primitive forms
 - action of matrix on a form
-- find content; factor indefinite forms
-In addition: 
-- reduce() no longer calls Pari
-- some cleanup: is_reduced() is rewritten; polynomial() replaced with an instance variable (poly)
+- find content
+- is_reduced() is rewritten
+- polynomial() now uses an instance variable (poly)
+- some general cleaning up
 
 Doctests are in place for the new code, so the file remains at 100% coverage.
 
-
``````




---

archive/issue_comments_023362.json:
```json
{
    "body": "Work Issues: **more tests for is_reduced, doc of primitive_only**",
    "created_at": "2014-02-26T23:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23362",
    "user": "https://github.com/pjbruin"
}
```

Work Issues: **more tests for is_reduced, doc of primitive_only**



---

archive/issue_comments_023363.json:
```json
{
    "body": "Changed commit from **[`96c1a86`](https://github.com/sagemath/sagetrac-mirror/commit/96c1a86e063e7a7512978c574ec40c84641b66d4)** to **[`ece1df7`](https://github.com/sagemath/sagetrac-mirror/commit/ece1df7ed9ebb0d5d1f462edcf78024af24d547d)**",
    "created_at": "2014-02-27T14:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23363",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`96c1a86`](https://github.com/sagemath/sagetrac-mirror/commit/96c1a86e063e7a7512978c574ec40c84641b66d4)** to **[`ece1df7`](https://github.com/sagemath/sagetrac-mirror/commit/ece1df7ed9ebb0d5d1f462edcf78024af24d547d)**



---

archive/issue_comments_023364.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ece1df7ed9ebb0d5d1f462edcf78024af24d547d\"><code>ece1df7</code></a></td><td><code>binary_qf.py: more doctests, add \"implementation\" parameter for reduction</code></td></tr></table>\n",
    "created_at": "2014-02-27T14:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23364",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ece1df7ed9ebb0d5d1f462edcf78024af24d547d"><code>ece1df7</code></a></td><td><code>binary_qf.py: more doctests, add "implementation" parameter for reduction</code></td></tr></table>




---

archive/issue_comments_023365.json:
```json
{
    "body": "Changed work issues from **more tests for is_reduced, doc of primitive_only** to none",
    "created_at": "2014-02-27T14:29:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23365",
    "user": "https://github.com/pjbruin"
}
```

Changed work issues from **more tests for is_reduced, doc of primitive_only** to none



---

archive/issue_events_045710.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-02-27T14:29:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45710"
}
```



---

archive/issue_events_045711.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-02-27T14:29:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45711"
}
```



---

archive/issue_comments_023366.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcf854dcfeef37a4b50999a9948b05bf4c629901\"><code>dcf854d</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr></table>\n",
    "created_at": "2014-04-25T00:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23366",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcf854dcfeef37a4b50999a9948b05bf4c629901"><code>dcf854d</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr></table>




---

archive/issue_comments_023367.json:
```json
{
    "body": "Changed commit from **[`ece1df7`](https://github.com/sagemath/sagetrac-mirror/commit/ece1df7ed9ebb0d5d1f462edcf78024af24d547d)** to **[`dcf854d`](https://github.com/sagemath/sagetrac-mirror/commit/dcf854dcfeef37a4b50999a9948b05bf4c629901)**",
    "created_at": "2014-04-25T00:02:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23367",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ece1df7`](https://github.com/sagemath/sagetrac-mirror/commit/ece1df7ed9ebb0d5d1f462edcf78024af24d547d)** to **[`dcf854d`](https://github.com/sagemath/sagetrac-mirror/commit/dcf854dcfeef37a4b50999a9948b05bf4c629901)**



---

archive/issue_events_045712.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45712"
}
```



---

archive/issue_events_045713.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45713"
}
```



---

archive/issue_events_045714.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45714"
}
```



---

archive/issue_events_045715.json:
```json
{
    "actor": "https://github.com/sagetrac-vbraun-spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45715"
}
```



---

archive/issue_comments_023368.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/215cb8a6a67461471df0c4c43d70d555fae2d33b\"><code>215cb8a</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr></table>\n",
    "created_at": "2014-11-27T23:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23368",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/215cb8a6a67461471df0c4c43d70d555fae2d33b"><code>215cb8a</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr></table>




---

archive/issue_comments_023369.json:
```json
{
    "body": "Changed commit from **[`dcf854d`](https://github.com/sagemath/sagetrac-mirror/commit/dcf854dcfeef37a4b50999a9948b05bf4c629901)** to **[`215cb8a`](https://github.com/sagemath/sagetrac-mirror/commit/215cb8a6a67461471df0c4c43d70d555fae2d33b)**",
    "created_at": "2014-11-27T23:32:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23369",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dcf854d`](https://github.com/sagemath/sagetrac-mirror/commit/dcf854dcfeef37a4b50999a9948b05bf4c629901)** to **[`215cb8a`](https://github.com/sagemath/sagetrac-mirror/commit/215cb8a6a67461471df0c4c43d70d555fae2d33b)**



---

archive/issue_comments_023370.json:
```json
{
    "body": "Changed reviewer from **John Cremona** to **John Cremona, Peter Bruin**",
    "created_at": "2014-11-27T23:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23370",
    "user": "https://github.com/pjbruin"
}
```

Changed reviewer from **John Cremona** to **John Cremona, Peter Bruin**



---

archive/issue_comments_023371.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI guess my commits can count as reviewer patches.  However, I haven't reviewed all the new code in detail, so the branch should probably still be reviewed as a whole.",
    "created_at": "2014-11-27T23:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23371",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:37" align="right">comment:37</div>

I guess my commits can count as reviewer patches.  However, I haven't reviewed all the new code in detail, so the branch should probably still be reviewed as a whole.



---

archive/issue_events_045716.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-27T08:18:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45716"
}
```



---

archive/issue_events_045717.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2015-03-27T08:18:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45717"
}
```



---

archive/issue_comments_023372.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThis ticket currently confuses the patchbot. Temporarily putting to **needs info** to stop the bot loop-testing it.",
    "created_at": "2015-03-27T08:18:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23372",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:38" align="right">comment:38</div>

This ticket currently confuses the patchbot. Temporarily putting to **needs info** to stop the bot loop-testing it.



---

archive/issue_events_045718.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-06-04T11:12:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45718"
}
```



---

archive/issue_events_045719.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2015-06-04T11:12:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45719"
}
```



---

archive/issue_comments_023373.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@fchapoton](#comment%3A38):\n> This ticket currently confuses the patchbot. Temporarily putting to **needs info** to stop the bot loop-testing it.\n\nIt seems that at least the patchbot \"eddy\" is testing this ticket without adverse effects.  Let's see what happens if I set it back to \"needs_review\".  (There was a failure in the last patchbot run, but it seems to be unrelated to this ticket.)",
    "created_at": "2015-06-04T11:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23373",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@fchapoton](#comment%3A38):
> This ticket currently confuses the patchbot. Temporarily putting to **needs info** to stop the bot loop-testing it.

It seems that at least the patchbot "eddy" is testing this ticket without adverse effects.  Let's see what happens if I set it back to "needs_review".  (There was a failure in the last patchbot run, but it seems to be unrelated to this ticket.)



---

archive/issue_comments_023374.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5657f282979e1cb3c9bf7e49c62bbc606f00c108\"><code>5657f28</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr></table>\n",
    "created_at": "2016-01-22T20:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23374",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5657f282979e1cb3c9bf7e49c62bbc606f00c108"><code>5657f28</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr></table>




---

archive/issue_comments_023375.json:
```json
{
    "body": "Changed commit from **[`215cb8a`](https://github.com/sagemath/sagetrac-mirror/commit/215cb8a6a67461471df0c4c43d70d555fae2d33b)** to **[`5657f28`](https://github.com/sagemath/sagetrac-mirror/commit/5657f282979e1cb3c9bf7e49c62bbc606f00c108)**",
    "created_at": "2016-01-22T20:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23375",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`215cb8a`](https://github.com/sagemath/sagetrac-mirror/commit/215cb8a6a67461471df0c4c43d70d555fae2d33b)** to **[`5657f28`](https://github.com/sagemath/sagetrac-mirror/commit/5657f282979e1cb3c9bf7e49c62bbc606f00c108)**



---

archive/issue_events_045720.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-14T20:43:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45720"
}
```



---

archive/issue_events_045721.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-14T20:43:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45721"
}
```



---

archive/issue_comments_023376.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\n[qfbcompraw](http://doc.sagemath.org/html/en/reference/libs/sage/libs/pari/gen.html#sage.libs.pari.gen.gen_auto.qfbcompraw) is now wrapped, so calling pari directly to use it is no longer necessary, and should be fixed.\n\ncf. the patch part:\n\n```\n+            # There could be more elegant ways, but qfbcompraw isn't\n+            # wrapped yet in the PARI C library.  We may as well settle\n+            # for the below, until somebody simply implements composition\n+            # from scratch in Cython.\n+            v = list(pari('qfbcompraw(%s,%s)'%(self._pari_init_(),\n+                                            right._pari_init_())))\n```",
    "created_at": "2016-11-21T10:41:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23376",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">comment:42</div>

[qfbcompraw](http://doc.sagemath.org/html/en/reference/libs/sage/libs/pari/gen.html#sage.libs.pari.gen.gen_auto.qfbcompraw) is now wrapped, so calling pari directly to use it is no longer necessary, and should be fixed.

cf. the patch part:

```
+            # There could be more elegant ways, but qfbcompraw isn't
+            # wrapped yet in the PARI C library.  We may as well settle
+            # for the below, until somebody simply implements composition
+            # from scratch in Cython.
+            v = list(pari('qfbcompraw(%s,%s)'%(self._pari_init_(),
+                                            right._pari_init_())))
```



---

archive/issue_events_045722.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-11-21T11:30:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45722"
}
```



---

archive/issue_events_045723.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-11-21T11:30:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45723"
}
```



---

archive/issue_comments_023377.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nand the same for `qfbred`, which is now also wrapped.",
    "created_at": "2016-11-21T11:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23377",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

and the same for `qfbred`, which is now also wrapped.



---

archive/issue_comments_023378.json:
```json
{
    "body": "Changed commit from **[`5657f28`](https://github.com/sagemath/sagetrac-mirror/commit/5657f282979e1cb3c9bf7e49c62bbc606f00c108)** to **[`00a4307`](https://github.com/sagemath/sagetrac-mirror/commit/00a4307ffecf6638466fbac3d41f8ca33f43c829)**",
    "created_at": "2016-11-21T13:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23378",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5657f28`](https://github.com/sagemath/sagetrac-mirror/commit/5657f282979e1cb3c9bf7e49c62bbc606f00c108)** to **[`00a4307`](https://github.com/sagemath/sagetrac-mirror/commit/00a4307ffecf6638466fbac3d41f8ca33f43c829)**



---

archive/issue_comments_023379.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/301a109b729f3b949e9e5fa4eaa39c8c4aec6e71\"><code>301a109</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00a4307ffecf6638466fbac3d41f8ca33f43c829\"><code>00a4307</code></a></td><td><code>Trac 4120: allow construction of BinaryQF from PARI, and use PARI library interface</code></td></tr></table>\n",
    "created_at": "2016-11-21T13:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23379",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/301a109b729f3b949e9e5fa4eaa39c8c4aec6e71"><code>301a109</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00a4307ffecf6638466fbac3d41f8ca33f43c829"><code>00a4307</code></a></td><td><code>Trac 4120: allow construction of BinaryQF from PARI, and use PARI library interface</code></td></tr></table>




---

archive/issue_comments_023380.json:
```json
{
    "body": "Changed commit from **[`00a4307`](https://github.com/sagemath/sagetrac-mirror/commit/00a4307ffecf6638466fbac3d41f8ca33f43c829)** to **[`959fbab`](https://github.com/sagemath/sagetrac-mirror/commit/959fbab69cbe7118cc2f5691fcfe5b64f80c966c)**",
    "created_at": "2017-09-08T05:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23380",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`00a4307`](https://github.com/sagemath/sagetrac-mirror/commit/00a4307ffecf6638466fbac3d41f8ca33f43c829)** to **[`959fbab`](https://github.com/sagemath/sagetrac-mirror/commit/959fbab69cbe7118cc2f5691fcfe5b64f80c966c)**



---

archive/issue_comments_023381.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f20033f89a1711186c71eced4d55b57f560c0fb\"><code>1f20033</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/959fbab69cbe7118cc2f5691fcfe5b64f80c966c\"><code>959fbab</code></a></td><td><code>Trac 4120: replace _pari_() by __pari__()</code></td></tr></table>\n",
    "created_at": "2017-09-08T05:42:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23381",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f20033f89a1711186c71eced4d55b57f560c0fb"><code>1f20033</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/959fbab69cbe7118cc2f5691fcfe5b64f80c966c"><code>959fbab</code></a></td><td><code>Trac 4120: replace _pari_() by __pari__()</code></td></tr></table>




---

archive/issue_comments_023382.json:
```json
{
    "body": "Changed author from **Justin Walker, Jon Hanke, Gonzalo Tornaria, John Cremona** to **Justin Walker, Jon Hanke, Gonzalo Tornar\u00eda, John Cremona**",
    "created_at": "2017-09-13T15:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23382",
    "user": "https://github.com/pjbruin"
}
```

Changed author from **Justin Walker, Jon Hanke, Gonzalo Tornaria, John Cremona** to **Justin Walker, Jon Hanke, Gonzalo Tornar√≠a, John Cremona**



---

archive/issue_comments_023383.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\n(added the accent to Gonzalo Tornar\u00eda's name; maybe this will also convince the patchbot to test this ticket)",
    "created_at": "2017-09-13T15:52:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23383",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:46" align="right">comment:46</div>

(added the accent to Gonzalo Tornar√≠a's name; maybe this will also convince the patchbot to test this ticket)



---

archive/issue_events_045724.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-09-13T16:17:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45724"
}
```



---

archive/issue_events_045725.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-09-13T16:17:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45725"
}
```



---

archive/issue_comments_023384.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f580cb6d0a13eb66d84b996113d8880b5748a3c\"><code>2f580cb</code></a></td><td><code>Trac 4120: EXAMPLE -> EXAMPLES, TEST -> TESTS</code></td></tr></table>\n",
    "created_at": "2017-09-19T05:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23384",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f580cb6d0a13eb66d84b996113d8880b5748a3c"><code>2f580cb</code></a></td><td><code>Trac 4120: EXAMPLE -> EXAMPLES, TEST -> TESTS</code></td></tr></table>




---

archive/issue_comments_023385.json:
```json
{
    "body": "Changed commit from **[`959fbab`](https://github.com/sagemath/sagetrac-mirror/commit/959fbab69cbe7118cc2f5691fcfe5b64f80c966c)** to **[`2f580cb`](https://github.com/sagemath/sagetrac-mirror/commit/2f580cb6d0a13eb66d84b996113d8880b5748a3c)**",
    "created_at": "2017-09-19T05:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23385",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`959fbab`](https://github.com/sagemath/sagetrac-mirror/commit/959fbab69cbe7118cc2f5691fcfe5b64f80c966c)** to **[`2f580cb`](https://github.com/sagemath/sagetrac-mirror/commit/2f580cb6d0a13eb66d84b996113d8880b5748a3c)**



---

archive/issue_events_045726.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-15T07:34:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45726"
}
```



---

archive/issue_events_045727.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-15T07:34:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45727"
}
```



---

archive/issue_comments_023386.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nbranch does not apply, needs rebase",
    "created_at": "2018-05-15T07:34:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23386",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:49" align="right">comment:49</div>

branch does not apply, needs rebase



---

archive/issue_comments_023387.json:
```json
{
    "body": "Changed commit from **[`2f580cb`](https://github.com/sagemath/sagetrac-mirror/commit/2f580cb6d0a13eb66d84b996113d8880b5748a3c)** to **[`cc8a94d`](https://github.com/sagemath/sagetrac-mirror/commit/cc8a94dce0bec479a459b19f1a40ce9b29a6f136)**",
    "created_at": "2018-05-21T12:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23387",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2f580cb`](https://github.com/sagemath/sagetrac-mirror/commit/2f580cb6d0a13eb66d84b996113d8880b5748a3c)** to **[`cc8a94d`](https://github.com/sagemath/sagetrac-mirror/commit/cc8a94dce0bec479a459b19f1a40ce9b29a6f136)**



---

archive/issue_comments_023388.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc8a94dce0bec479a459b19f1a40ce9b29a6f136\"><code>cc8a94d</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr></table>\n",
    "created_at": "2018-05-21T12:16:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23388",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc8a94dce0bec479a459b19f1a40ce9b29a6f136"><code>cc8a94d</code></a></td><td><code>Merge branch 'develop' into ticket/4120-binary_quadratic_forms</code></td></tr></table>




---

archive/issue_events_045728.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2018-05-21T12:17:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45728"
}
```



---

archive/issue_events_045729.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2018-05-21T12:17:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45729"
}
```



---

archive/issue_comments_023389.json:
```json
{
    "body": "Changed branch from **[u/pbruin/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/4120-binary_quadratic_forms)** to **[u/sbrandhorst/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/sbrandhorst/4120-binary_quadratic_forms)**",
    "created_at": "2018-06-03T17:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23389",
    "user": "https://github.com/simonbrandhorst"
}
```

Changed branch from **[u/pbruin/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/4120-binary_quadratic_forms)** to **[u/sbrandhorst/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/sbrandhorst/4120-binary_quadratic_forms)**



---

archive/issue_comments_023390.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3b838eb154e15c1d45e5a5546d0c049711c5c83\"><code>e3b838e</code></a></td><td><code>Small docfix</code></td></tr></table>\n",
    "created_at": "2018-06-03T17:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23390",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3b838eb154e15c1d45e5a5546d0c049711c5c83"><code>e3b838e</code></a></td><td><code>Small docfix</code></td></tr></table>




---

archive/issue_comments_023391.json:
```json
{
    "body": "Changed commit from **[`cc8a94d`](https://github.com/sagemath/sagetrac-mirror/commit/cc8a94dce0bec479a459b19f1a40ce9b29a6f136)** to **[`e3b838e`](https://github.com/sagemath/sagetrac-mirror/commit/e3b838eb154e15c1d45e5a5546d0c049711c5c83)**",
    "created_at": "2018-06-03T17:12:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23391",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cc8a94d`](https://github.com/sagemath/sagetrac-mirror/commit/cc8a94dce0bec479a459b19f1a40ce9b29a6f136)** to **[`e3b838e`](https://github.com/sagemath/sagetrac-mirror/commit/e3b838eb154e15c1d45e5a5546d0c049711c5c83)**



---

archive/issue_comments_023392.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nSome changes I made:\n- removed `@cached_method` in `polynomial` as we already cache in `_poly`\n- `reduced_form(self, matrix=False, implementation=None):` `matrix` seems missleading to me. \n  changed the keywords to `transformation` and `algorithm` to stay consistent with other \n  parts of sage (for example .`hermite_form`)   \n- used long names for methods like `is_indef` but keep the short alias\n- ``_RhoTau(self, proper=False)``\n  removed the `proper` keyword as it is not used.\n- use a better bound for `a` in BinaryQF_reduced_representatives from the Buchmann/Vollmer book\n- added a keyword proper for is_equivalent as for indefinite forms we only test improper \n  equivalence, we check if the form is in the cycle of the other form but that cycle is improper\n\nQuestion:\n- This requires a deprecation - do we really want to change it? This ticket changes so much   \n  already I would vote against it:\n\n  ```\n  -def BinaryQF_reduced_representatives(D, primitive_only=False):\n  +def BinaryQF_reduced_representatives(D, primitive_only=True):\n  ```",
    "created_at": "2018-06-03T17:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23392",
    "user": "https://github.com/simonbrandhorst"
}
```

<div id="comment:54" align="right">comment:54</div>

Some changes I made:
- removed `@cached_method` in `polynomial` as we already cache in `_poly`
- `reduced_form(self, matrix=False, implementation=None):` `matrix` seems missleading to me. 
  changed the keywords to `transformation` and `algorithm` to stay consistent with other 
  parts of sage (for example .`hermite_form`)   
- used long names for methods like `is_indef` but keep the short alias
- ``_RhoTau(self, proper=False)``
  removed the `proper` keyword as it is not used.
- use a better bound for `a` in BinaryQF_reduced_representatives from the Buchmann/Vollmer book
- added a keyword proper for is_equivalent as for indefinite forms we only test improper 
  equivalence, we check if the form is in the cycle of the other form but that cycle is improper

Question:
- This requires a deprecation - do we really want to change it? This ticket changes so much   
  already I would vote against it:

  ```
  -def BinaryQF_reduced_representatives(D, primitive_only=False):
  +def BinaryQF_reduced_representatives(D, primitive_only=True):
  ```



---

archive/issue_comments_023393.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nThe ticket is not perfect but I think it is okay.\nAs the perfect is the enemy of the good - positive review on my part if you are happy with my changes and resolve the issue with the primitive_only keyword.",
    "created_at": "2018-06-03T17:22:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23393",
    "user": "https://github.com/simonbrandhorst"
}
```

<div id="comment:55" align="right">comment:55</div>

The ticket is not perfect but I think it is okay.
As the perfect is the enemy of the good - positive review on my part if you are happy with my changes and resolve the issue with the primitive_only keyword.



---

archive/issue_comments_023394.json:
```json
{
    "body": "Changed reviewer from **John Cremona, Peter Bruin** to **John Cremona, Peter Bruin, Simon Brandhorst**",
    "created_at": "2018-06-03T17:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23394",
    "user": "https://github.com/simonbrandhorst"
}
```

Changed reviewer from **John Cremona, Peter Bruin** to **John Cremona, Peter Bruin, Simon Brandhorst**



---

archive/issue_comments_023395.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nNote on my machine tests pass, doc builds and looks reasonable.",
    "created_at": "2018-06-03T17:23:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23395",
    "user": "https://github.com/simonbrandhorst"
}
```

<div id="comment:57" align="right">comment:57</div>

Note on my machine tests pass, doc builds and looks reasonable.



---

archive/issue_comments_023396.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nI agree with the decision not to change the default for the primitive-only parameter.",
    "created_at": "2018-06-04T21:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23396",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:58" align="right">comment:58</div>

I agree with the decision not to change the default for the primitive-only parameter.



---

archive/issue_comments_023397.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI agree too.",
    "created_at": "2018-06-04T21:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23397",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:59" align="right">comment:59</div>

I agree too.



---

archive/issue_comments_023398.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f7ea8360268f1f60128a612ad791d13568ef2d0\"><code>3f7ea83</code></a></td><td><code>revert to primitive_only=False</code></td></tr></table>\n",
    "created_at": "2018-06-05T06:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23398",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f7ea8360268f1f60128a612ad791d13568ef2d0"><code>3f7ea83</code></a></td><td><code>revert to primitive_only=False</code></td></tr></table>




---

archive/issue_comments_023399.json:
```json
{
    "body": "Changed commit from **[`e3b838e`](https://github.com/sagemath/sagetrac-mirror/commit/e3b838eb154e15c1d45e5a5546d0c049711c5c83)** to **[`3f7ea83`](https://github.com/sagemath/sagetrac-mirror/commit/3f7ea8360268f1f60128a612ad791d13568ef2d0)**",
    "created_at": "2018-06-05T06:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23399",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e3b838e`](https://github.com/sagemath/sagetrac-mirror/commit/e3b838eb154e15c1d45e5a5546d0c049711c5c83)** to **[`3f7ea83`](https://github.com/sagemath/sagetrac-mirror/commit/3f7ea8360268f1f60128a612ad791d13568ef2d0)**



---

archive/issue_comments_023400.json:
```json
{
    "body": "Changed commit from **[`3f7ea83`](https://github.com/sagemath/sagetrac-mirror/commit/3f7ea8360268f1f60128a612ad791d13568ef2d0)** to **[`0a08de0`](https://github.com/sagemath/sagetrac-mirror/commit/0a08de0d6d63b969e536f3f57a0c998872b2cb1f)**",
    "created_at": "2018-06-05T06:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23400",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3f7ea83`](https://github.com/sagemath/sagetrac-mirror/commit/3f7ea8360268f1f60128a612ad791d13568ef2d0)** to **[`0a08de0`](https://github.com/sagemath/sagetrac-mirror/commit/0a08de0d6d63b969e536f3f57a0c998872b2cb1f)**



---

archive/issue_comments_023401.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a08de0d6d63b969e536f3f57a0c998872b2cb1f\"><code>0a08de0</code></a></td><td><code>docfix</code></td></tr></table>\n",
    "created_at": "2018-06-05T06:54:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23401",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a08de0d6d63b969e536f3f57a0c998872b2cb1f"><code>0a08de0</code></a></td><td><code>docfix</code></td></tr></table>




---

archive/issue_comments_023402.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nThen let us finally get this reviewed :)",
    "created_at": "2018-06-05T06:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23402",
    "user": "https://github.com/simonbrandhorst"
}
```

<div id="comment:62" align="right">comment:62</div>

Then let us finally get this reviewed :)



---

archive/issue_comments_023403.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nFixed a SEEALSO block (causing docbuild to fail) and two pyflakes complaints.  Let's get this ticket in before its 10-year anniversary.",
    "created_at": "2018-06-12T05:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23403",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:63" align="right">comment:63</div>

Fixed a SEEALSO block (causing docbuild to fail) and two pyflakes complaints.  Let's get this ticket in before its 10-year anniversary.



---

archive/issue_events_045730.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2018-06-12T05:43:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45730"
}
```



---

archive/issue_events_045731.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2018-06-12T05:43:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45731"
}
```



---

archive/issue_comments_023404.json:
```json
{
    "body": "Changed commit from **[`0a08de0`](https://github.com/sagemath/sagetrac-mirror/commit/0a08de0d6d63b969e536f3f57a0c998872b2cb1f)** to **[`748d390`](https://github.com/sagemath/sagetrac-mirror/commit/748d3908d0fb0deaa683202f521a006020c3da08)**",
    "created_at": "2018-06-12T05:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23404",
    "user": "https://github.com/pjbruin"
}
```

Changed commit from **[`0a08de0`](https://github.com/sagemath/sagetrac-mirror/commit/0a08de0d6d63b969e536f3f57a0c998872b2cb1f)** to **[`748d390`](https://github.com/sagemath/sagetrac-mirror/commit/748d3908d0fb0deaa683202f521a006020c3da08)**



---

archive/issue_comments_023405.json:
```json
{
    "body": "Changed branch from **[u/sbrandhorst/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/sbrandhorst/4120-binary_quadratic_forms)** to **[u/pbruin/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/4120-binary_quadratic_forms)**",
    "created_at": "2018-06-12T05:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23405",
    "user": "https://github.com/pjbruin"
}
```

Changed branch from **[u/sbrandhorst/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/sbrandhorst/4120-binary_quadratic_forms)** to **[u/pbruin/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/4120-binary_quadratic_forms)**



---

archive/issue_events_045732.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-12T20:10:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45732"
}
```



---

archive/issue_events_045733.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-12T20:10:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45733"
}
```



---

archive/issue_events_045734.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-14T07:41:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45734"
}
```



---

archive/issue_events_045735.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "718a7472898fd38120c09666d846a8be302721ff",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-06-14T07:41:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/4120#event-45735"
}
```



---

archive/issue_comments_023406.json:
```json
{
    "body": "Changed branch from **[u/pbruin/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/4120-binary_quadratic_forms)** to **[`748d390`](https://github.com/sagemath/sagetrac-mirror/commit/748d3908d0fb0deaa683202f521a006020c3da08)**",
    "created_at": "2018-06-14T07:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23406",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/pbruin/4120-binary_quadratic_forms](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/4120-binary_quadratic_forms)** to **[`748d390`](https://github.com/sagemath/sagetrac-mirror/commit/748d3908d0fb0deaa683202f521a006020c3da08)**



---

archive/issue_comments_023407.json:
```json
{
    "body": "Changed author from **Justin Walker, Jon Hanke, Gonzalo Tornar\u00eda, John Cremona** to **Justin Walker, Jonathan Hanke, Gonzalo Tornar\u00eda, John Cremona**",
    "created_at": "2018-09-06T13:54:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23407",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Justin Walker, Jon Hanke, Gonzalo Tornar√≠a, John Cremona** to **Justin Walker, Jonathan Hanke, Gonzalo Tornar√≠a, John Cremona**



---

archive/issue_comments_023408.json:
```json
{
    "body": "Changed commit from **[`748d390`](https://github.com/sagemath/sagetrac-mirror/commit/748d3908d0fb0deaa683202f521a006020c3da08)** to none",
    "created_at": "2018-09-06T13:54:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/4120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/4120#issuecomment-23408",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`748d390`](https://github.com/sagemath/sagetrac-mirror/commit/748d3908d0fb0deaa683202f521a006020c3da08)** to none
