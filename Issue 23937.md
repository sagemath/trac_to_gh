# Issue 23937: Upgrade giac to 1.4.9-19

archive/issues_023937.json:
```json
{
    "body": "This is simple upgrade of `giac`. It removes the needs for 2 patches\n* linking to png16. Version of png are now tested in order in configure from png16 to png.\n* fix for pari 2.8 and over\n\nWhat's more the patch for the pari result was dependent on the compiler used (gcc vs clang). Upstream now give the same result for both gcc and glang (at least on linux).\n\nIssue created by migration from https://trac.sagemath.org/ticket/24174\n\n",
    "created_at": "2017-11-07T21:31:14Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Upgrade giac to 1.4.9-19",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23937",
    "user": "@kiwifb"
}
```
This is simple upgrade of `giac`. It removes the needs for 2 patches
* linking to png16. Version of png are now tested in order in configure from png16 to png.
* fix for pari 2.8 and over

What's more the patch for the pari result was dependent on the compiler used (gcc vs clang). Upstream now give the same result for both gcc and glang (at least on linux).

Issue created by migration from https://trac.sagemath.org/ticket/24174





---

archive/issue_comments_335425.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-11-07T21:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335425",
    "user": "@kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_335426.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-11-07T21:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335426",
    "user": "@kiwifb"
}
```

New commits:



---

archive/issue_comments_335427.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-07T23:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335427",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_335428.json:
```json
{
    "body": "Off to the buildbots.",
    "created_at": "2017-11-07T23:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335428",
    "user": "@tscrim"
}
```

Off to the buildbots.



---

archive/issue_comments_335429.json:
```json
{
    "body": "Thanks, I hope I have the right syntax for tarball downloads in the ticket, that often gets in the way of patchbot in my experience.",
    "created_at": "2017-11-07T23:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335429",
    "user": "@kiwifb"
}
```

Thanks, I hope I have the right syntax for tarball downloads in the ticket, that often gets in the way of patchbot in my experience.



---

archive/issue_comments_335430.json:
```json
{
    "body": "I've never known patchbots to pull the tarballs, and I just always assumed Volker does the tarballs manually.",
    "created_at": "2017-11-07T23:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335430",
    "user": "@tscrim"
}
```

I've never known patchbots to pull the tarballs, and I just always assumed Volker does the tarballs manually.



---

archive/issue_comments_335431.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-12-09T12:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335431",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_335432.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2017-12-09T12:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335432",
    "user": "@vbraun"
}
```

Merge conflict



---

archive/issue_comments_335433.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-11T20:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335433",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_335434.json:
```json
{
    "body": "Merged #24214 to solve the merge conflict. Updated to the latest version of `giac`.",
    "created_at": "2017-12-11T20:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335434",
    "user": "@kiwifb"
}
```

Merged #24214 to solve the merge conflict. Updated to the latest version of `giac`.



---

archive/issue_comments_335435.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-12-11T20:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335435",
    "user": "@kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_335436.json:
```json
{
    "body": "Ooops not #24214, I meant #24025.",
    "created_at": "2017-12-11T21:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335436",
    "user": "@kiwifb"
}
```

Ooops not #24214, I meant #24025.



---

archive/issue_comments_335437.json:
```json
{
    "body": "I will have to wait until beta1. I thought I had merged #24025 properly but I only got the tip of it somehow.",
    "created_at": "2017-12-11T21:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335437",
    "user": "@kiwifb"
}
```

I will have to wait until beta1. I thought I had merged #24025 properly but I only got the tip of it somehow.



---

archive/issue_comments_335438.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-11T21:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335438",
    "user": "@kiwifb"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_335439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-12-14T21:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335439",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_335440.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-12-14T21:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335440",
    "user": "@kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_335441.json:
```json
{
    "body": "Ok, now it is ready to review again.",
    "created_at": "2017-12-14T21:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335441",
    "user": "@kiwifb"
}
```

Ok, now it is ready to review again.



---

archive/issue_comments_335442.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-01T22:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335442",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_335443.json:
```json
{
    "body": "looks good to me.",
    "created_at": "2018-01-01T22:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335443",
    "user": "@dimpase"
}
```

looks good to me.



---

archive/issue_comments_335444.json:
```json
{
    "body": "Something is wrong with the checkum\n\n```\n$ md5sum upstream/giac-1.4.9.39.tar.bz2\n894477a31d72c3c0df466fb8df7c61f8  upstream/giac-1.4.9.39.tar.bz2\n```\n",
    "created_at": "2018-01-04T18:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335444",
    "user": "@vbraun"
}
```

Something is wrong with the checkum

```
$ md5sum upstream/giac-1.4.9.39.tar.bz2
894477a31d72c3c0df466fb8df7c61f8  upstream/giac-1.4.9.39.tar.bz2
```




---

archive/issue_comments_335445.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-01-04T18:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335445",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_335446.json:
```json
{
    "body": "OK that's very strange\n\n```\nfbissey@moonloop ~/sandbox/git-fork/sage $ cat build/pkgs/giac/checksums.ini \ntarball=giac-VERSION.tar.bz2\nsha1=7ba617ef29dde72bb927a0e92541e8a30325a7a4\nmd5=45dfd01ee167cc0221d07e54db0c28e2\ncksum=1393477559\nfbissey@moonloop ~/sandbox/git-fork/sage $ md5sum upstream/giac-1.4.9.39.tar.bz2\n45dfd01ee167cc0221d07e54db0c28e2  upstream/giac-1.4.9.39.tar.bz2\n```\n\nand \n\n```\nfbissey@moonloop ~/sandbox/git-fork/sage $ ./sage --package fix-checksum giac\nChecksum of giac-1.4.9.39.tar.bz2 unchanged\n```\n\ndifferences for md5 is puzzling and concerning. Unless the tarball I linked to is corrupted - checking.",
    "created_at": "2018-01-04T19:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335446",
    "user": "@kiwifb"
}
```

OK that's very strange

```
fbissey@moonloop ~/sandbox/git-fork/sage $ cat build/pkgs/giac/checksums.ini 
tarball=giac-VERSION.tar.bz2
sha1=7ba617ef29dde72bb927a0e92541e8a30325a7a4
md5=45dfd01ee167cc0221d07e54db0c28e2
cksum=1393477559
fbissey@moonloop ~/sandbox/git-fork/sage $ md5sum upstream/giac-1.4.9.39.tar.bz2
45dfd01ee167cc0221d07e54db0c28e2  upstream/giac-1.4.9.39.tar.bz2
```

and 

```
fbissey@moonloop ~/sandbox/git-fork/sage $ ./sage --package fix-checksum giac
Checksum of giac-1.4.9.39.tar.bz2 unchanged
```

differences for md5 is puzzling and concerning. Unless the tarball I linked to is corrupted - checking.



---

archive/issue_comments_335447.json:
```json
{
    "body": "Nope. The tarball I download from the link I provided has the same checksum.",
    "created_at": "2018-01-04T19:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335447",
    "user": "@kiwifb"
}
```

Nope. The tarball I download from the link I provided has the same checksum.



---

archive/issue_comments_335448.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-01-23T01:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335448",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_335449.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-23T01:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335449",
    "user": "@kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_335450.json:
```json
{
    "body": "OK updated to latest available. I am not sure how Volker got a wrong checksum. Back to need review.",
    "created_at": "2018-01-23T01:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335450",
    "user": "@kiwifb"
}
```

OK updated to latest available. I am not sure how Volker got a wrong checksum. Back to need review.



---

archive/issue_comments_335451.json:
```json
{
    "body": "Buildbots, come forth.",
    "created_at": "2018-01-23T13:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335451",
    "user": "@tscrim"
}
```

Buildbots, come forth.



---

archive/issue_comments_335452.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-23T13:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335452",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_335453.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-27T15:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335453",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_335454.json:
```json
{
    "body": "I don't think this is a new problem, but giac is not installing its documentation. See #25616.",
    "created_at": "2018-06-19T23:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23937#issuecomment-335454",
    "user": "@jhpalmieri"
}
```

I don't think this is a new problem, but giac is not installing its documentation. See #25616.
