# Issue 30015: Make TensorProducts of finite-dimensional modules / vector spaces finite-dimensional

archive/issues_030015.json:
```json
{
    "body": "CC:  @tscrim @louisng114\n\n(from #30169)\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30252\n\n",
    "created_at": "2020-07-30T03:09:45Z",
    "labels": [
        "categories",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Make TensorProducts of finite-dimensional modules / vector spaces finite-dimensional",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30015",
    "user": "@mkoeppe"
}
```
CC:  @tscrim @louisng114

(from #30169)



Issue created by migration from https://trac.sagemath.org/ticket/30252





---

archive/issue_comments_426679.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-30T05:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426679",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-30T05:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426680",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426681.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-30T05:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426681",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426682.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-30T06:09:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426682",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426683.json:
```json
{
    "body": "This seems to work, but I guess I am left wondering whether the same cannot be achieved with less cut&paste - perhaps using `SubcategoryMethods` or something like this?",
    "created_at": "2020-07-30T06:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426683",
    "user": "@mkoeppe"
}
```

This seems to work, but I guess I am left wondering whether the same cannot be achieved with less cut&paste - perhaps using `SubcategoryMethods` or something like this?



---

archive/issue_comments_426684.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-30T06:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426684",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426685.json:
```json
{
    "body": "The problem is that you might have a subcategory `C` of modules whose tensor products are not also an object in `C`. Probably the better way to do this is subclass `TensorProductsCategory` since this is such a common thing. You can either do that here or postpone that to a later ticket.\n\nOne doctest to fix:\n\n```\nFile \"src/sage/tensor/modules/tensor_free_module.py\", line 128, in sage.tensor.modules.tensor_free_module.TensorFreeModule\nFailed example:\n    T.category()\nExpected:\n    Category of tensor products of finite dimensional modules over Integer Ring\nGot:\n    Category of finite dimensional modules over Integer Ring\n```\n\nOne done, you can set a positive review on my behalf.",
    "created_at": "2020-07-30T23:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426685",
    "user": "@tscrim"
}
```

The problem is that you might have a subcategory `C` of modules whose tensor products are not also an object in `C`. Probably the better way to do this is subclass `TensorProductsCategory` since this is such a common thing. You can either do that here or postpone that to a later ticket.

One doctest to fix:

```
File "src/sage/tensor/modules/tensor_free_module.py", line 128, in sage.tensor.modules.tensor_free_module.TensorFreeModule
Failed example:
    T.category()
Expected:
    Category of tensor products of finite dimensional modules over Integer Ring
Got:
    Category of finite dimensional modules over Integer Ring
```

One done, you can set a positive review on my behalf.



---

archive/issue_comments_426686.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> Probably the better way to do this is subclass `TensorProductsCategory` since this is such a common thing. \n\n... like `FiniteDimensionalTensorProductsCategory`, or what do you have in mind there?",
    "created_at": "2020-07-31T00:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426686",
    "user": "@mkoeppe"
}
```

Replying to [comment:8 tscrim]:
> Probably the better way to do this is subclass `TensorProductsCategory` since this is such a common thing. 

... like `FiniteDimensionalTensorProductsCategory`, or what do you have in mind there?



---

archive/issue_comments_426687.json:
```json
{
    "body": "Replying to [comment:9 mkoeppe]:\n> Replying to [comment:8 tscrim]:\n> > Probably the better way to do this is subclass `TensorProductsCategory` since this is such a common thing. \n> \n> ... like `FiniteDimensionalTensorProductsCategory`, or what do you have in mind there?\n\nMore like `TensorProductsAsBaseCategory` or `TensorProductsCategoryWithBaseCategory`, which has the base category as part of its `default_super_categories`. Or perhaps something like this as a functorial construction category inbetween the covariant and covariant regressive?",
    "created_at": "2020-07-31T09:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426687",
    "user": "@tscrim"
}
```

Replying to [comment:9 mkoeppe]:
> Replying to [comment:8 tscrim]:
> > Probably the better way to do this is subclass `TensorProductsCategory` since this is such a common thing. 
> 
> ... like `FiniteDimensionalTensorProductsCategory`, or what do you have in mind there?

More like `TensorProductsAsBaseCategory` or `TensorProductsCategoryWithBaseCategory`, which has the base category as part of its `default_super_categories`. Or perhaps something like this as a functorial construction category inbetween the covariant and covariant regressive?



---

archive/issue_comments_426688.json:
```json
{
    "body": "Ah I see, let me think about it.",
    "created_at": "2020-07-31T13:04:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426688",
    "user": "@mkoeppe"
}
```

Ah I see, let me think about it.



---

archive/issue_comments_426689.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-15T22:07:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426689",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_426690.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426690",
    "user": "@mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_426691.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426691",
    "user": "@mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_426692.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-02-17T19:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426692",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426693.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-17T19:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426693",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426694.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-02-17T19:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426694",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_426695.json:
```json
{
    "body": "I am slightly worried with the fact the category could be used for an infinite tensor product (something that quite often occurs in my area of mathematics). However, this is a slight abuse (read: hidden assumption) that we do in other parts of Sage, I will give this a positive review. At some point, we might have to revisit this with a more specific solution (i.e., in CFM and other specific tensor product implementations), but I don't think right now this causes any issues.",
    "created_at": "2022-02-18T00:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426695",
    "user": "@tscrim"
}
```

I am slightly worried with the fact the category could be used for an infinite tensor product (something that quite often occurs in my area of mathematics). However, this is a slight abuse (read: hidden assumption) that we do in other parts of Sage, I will give this a positive review. At some point, we might have to revisit this with a more specific solution (i.e., in CFM and other specific tensor product implementations), but I don't think right now this causes any issues.



---

archive/issue_comments_426696.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-18T00:26:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426696",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426697.json:
```json
{
    "body": "Thank you!\n\nGreat point about the infinite tensor products, but certainly the implementation of `CovariantFunctorialConstruction` only works in the finitary case.",
    "created_at": "2022-02-18T00:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426697",
    "user": "@mkoeppe"
}
```

Thank you!

Great point about the infinite tensor products, but certainly the implementation of `CovariantFunctorialConstruction` only works in the finitary case.



---

archive/issue_comments_426698.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-21T21:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30015#issuecomment-426698",
    "user": "@vbraun"
}
```

Resolution: fixed
