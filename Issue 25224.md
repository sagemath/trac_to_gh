# Issue 25224: make sage --python launch either py2 or py3

archive/issues_025224.json:
```json
{
    "body": "CC:  @embray @jdemeyer @kiwifb\n\nThis will make jupyter notebook work with sage+python3 kernel\n\ncurrently, seems to look for the sage kernel in the python2 library\n\n```\nPlease wait while the Sage Jupyter Notebook server starts...\n[I 18:01:46.779 NotebookApp] Using MathJax: nbextensions/mathjax/MathJax.js\n[I 18:01:47.654 NotebookApp] Writing notebook server cookie secret to /run/user/1000/jupyter/notebook_cookie_secret\n[I 18:01:51.631 NotebookApp] Serving notebooks from local directory: /home/chapoton/sage3\n[I 18:01:51.631 NotebookApp] 0 active kernels\n[I 18:01:51.631 NotebookApp] The Jupyter Notebook is running at:\n[I 18:01:51.631 NotebookApp] http://localhost:8888/?token=2657309e7c2e2642eb6\n[I 18:01:51.631 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[C 18:01:51.633 NotebookApp] \n    \n    Copy/paste this URL into your browser when you connect for the first time,\n    to login with a token:\n        http://localhost:8888/?token=2657309e7c2e2642e\n[I 18:01:52.037 NotebookApp] Accepting one-time-token-authenticated connection from 127.0.0.1\n[27947:27986:0529/180152.040060:ERROR:browser_gpu_channel_host_factory.cc(108)] Failed to launch GPU process.\nNouvelle fen\u00eatre ouverte dans la session du navigateur\n[I 18:01:55.527 NotebookApp] Kernel started: 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7\n[I 18:01:56.260 NotebookApp] Adapting to protocol v5.1 for kernel 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7\n[I 18:02:02.473 NotebookApp] Starting buffering for 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7:D6B434490D6949288DA1FB847DD8F1F2\n[I 18:02:02.877 NotebookApp] Kernel shutdown: 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7\n[I 18:02:02.942 NotebookApp] Kernel started: d3b6e143-f148-4208-8bab-51c6268171a3\n/home/chapoton/sage3/local/bin/python: No module named sage.repl\n[I 18:02:05.941 NotebookApp] KernelRestarter: restarting kernel (1/5), new random ports\n/home/chapoton/sage3/local/bin/python: No module named sage.repl\n[I 18:02:08.948 NotebookApp] KernelRestarter: restarting kernel (2/5), new random ports\n/home/chapoton/sage3/local/bin/python: No module named sage.repl\n[I 18:02:11.962 NotebookApp] KernelRestarter: restarting kernel (3/5), new random ports\n/home/chapoton/sage3/local/bin/python: No module named sage.repl\n[W 18:02:12.953 NotebookApp] Timeout waiting for kernel_info reply from d3b6e143-f148-4208-8bab-51c6268171a3\n[I 18:02:14.975 NotebookApp] KernelRestarter: restarting kernel (4/5), new random ports\nWARNING:root:kernel d3b6e143-f148-4208-8bab-51c6268171a3 restarted\n/home/chapoton/sage3/local/bin/python: No module named sage.repl\n[W 18:02:17.990 NotebookApp] KernelRestarter: restart failed\n[W 18:02:17.991 NotebookApp] Kernel d3b6e143-f148-4208-8bab-51c6268171a3 died, removing from map.\nERROR:root:kernel d3b6e143-f148-4208-8bab-51c6268171a3 restarted failed!\n[W 18:02:18.010 NotebookApp] 410 DELETE /api/sessions/24ba9c09-ea8d-49bf-93ae-8bf84340afea (127.0.0.1): Kernel deleted before session\n[W 18:02:18.010 NotebookApp] Kernel deleted before session\n[W 18:02:18.010 NotebookApp] 410 DELETE /api/sessions/24ba9c09-ea8d-49bf-93ae-8bf84340afea (127.0.0.1) 1.40ms referer=http://localhost:8888/notebooks/Untitled1.ipynb\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/25461\n\n",
    "closed_at": "2018-06-01T15:42:03Z",
    "created_at": "2018-05-29T16:02:50Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "make sage --python launch either py2 or py3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25224",
    "user": "https://github.com/fchapoton"
}
```
CC:  @embray @jdemeyer @kiwifb

This will make jupyter notebook work with sage+python3 kernel

currently, seems to look for the sage kernel in the python2 library

```
Please wait while the Sage Jupyter Notebook server starts...
[I 18:01:46.779 NotebookApp] Using MathJax: nbextensions/mathjax/MathJax.js
[I 18:01:47.654 NotebookApp] Writing notebook server cookie secret to /run/user/1000/jupyter/notebook_cookie_secret
[I 18:01:51.631 NotebookApp] Serving notebooks from local directory: /home/chapoton/sage3
[I 18:01:51.631 NotebookApp] 0 active kernels
[I 18:01:51.631 NotebookApp] The Jupyter Notebook is running at:
[I 18:01:51.631 NotebookApp] http://localhost:8888/?token=2657309e7c2e2642eb6
[I 18:01:51.631 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 18:01:51.633 NotebookApp] 
    
    Copy/paste this URL into your browser when you connect for the first time,
    to login with a token:
        http://localhost:8888/?token=2657309e7c2e2642e
[I 18:01:52.037 NotebookApp] Accepting one-time-token-authenticated connection from 127.0.0.1
[27947:27986:0529/180152.040060:ERROR:browser_gpu_channel_host_factory.cc(108)] Failed to launch GPU process.
Nouvelle fenÃªtre ouverte dans la session du navigateur
[I 18:01:55.527 NotebookApp] Kernel started: 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7
[I 18:01:56.260 NotebookApp] Adapting to protocol v5.1 for kernel 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7
[I 18:02:02.473 NotebookApp] Starting buffering for 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7:D6B434490D6949288DA1FB847DD8F1F2
[I 18:02:02.877 NotebookApp] Kernel shutdown: 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7
[I 18:02:02.942 NotebookApp] Kernel started: d3b6e143-f148-4208-8bab-51c6268171a3
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[I 18:02:05.941 NotebookApp] KernelRestarter: restarting kernel (1/5), new random ports
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[I 18:02:08.948 NotebookApp] KernelRestarter: restarting kernel (2/5), new random ports
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[I 18:02:11.962 NotebookApp] KernelRestarter: restarting kernel (3/5), new random ports
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[W 18:02:12.953 NotebookApp] Timeout waiting for kernel_info reply from d3b6e143-f148-4208-8bab-51c6268171a3
[I 18:02:14.975 NotebookApp] KernelRestarter: restarting kernel (4/5), new random ports
WARNING:root:kernel d3b6e143-f148-4208-8bab-51c6268171a3 restarted
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[W 18:02:17.990 NotebookApp] KernelRestarter: restart failed
[W 18:02:17.991 NotebookApp] Kernel d3b6e143-f148-4208-8bab-51c6268171a3 died, removing from map.
ERROR:root:kernel d3b6e143-f148-4208-8bab-51c6268171a3 restarted failed!
[W 18:02:18.010 NotebookApp] 410 DELETE /api/sessions/24ba9c09-ea8d-49bf-93ae-8bf84340afea (127.0.0.1): Kernel deleted before session
[W 18:02:18.010 NotebookApp] Kernel deleted before session
[W 18:02:18.010 NotebookApp] 410 DELETE /api/sessions/24ba9c09-ea8d-49bf-93ae-8bf84340afea (127.0.0.1) 1.40ms referer=http://localhost:8888/notebooks/Untitled1.ipynb
```

Issue created by migration from https://trac.sagemath.org/ticket/25461





---

archive/issue_comments_354886.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to notebook.",
    "created_at": "2018-05-29T20:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354886",
    "user": "https://github.com/fchapoton"
}
```

Changing component from PLEASE CHANGE to notebook.



---

archive/issue_comments_354887.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2018-05-29T20:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354887",
    "user": "https://github.com/fchapoton"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_354888.json:
```json
{
    "body": "src/sage/repl/ipython_kernel/install\n\nis the file to look in; particularly the function `_kernel_cmd`.",
    "created_at": "2018-05-29T21:02:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354888",
    "user": "https://github.com/nbruin"
}
```

src/sage/repl/ipython_kernel/install

is the file to look in; particularly the function `_kernel_cmd`.



---

archive/issue_comments_354889.json:
```json
{
    "body": "yes, changing `-python` there to `-python3` make it work.\n\nmaybe we should instead make so that `sage -python` launches the correct python.",
    "created_at": "2018-05-30T06:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354889",
    "user": "https://github.com/fchapoton"
}
```

yes, changing `-python` there to `-python3` make it work.

maybe we should instead make so that `sage -python` launches the correct python.



---

archive/issue_comments_354890.json:
```json
{
    "body": "Replying to [comment:4 chapoton]:\n> yes, changing `-python` there to `-python3` make it work.\n> \n> maybe we should instead make so that `sage -python` launches the correct python.\n\n\nI'd rather agree with that.",
    "created_at": "2018-05-30T07:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354890",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:4 chapoton]:
> yes, changing `-python` there to `-python3` make it work.
> 
> maybe we should instead make so that `sage -python` launches the correct python.


I'd rather agree with that.



---

archive/issue_comments_354891.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-05-30T12:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354891",
    "user": "https://github.com/fchapoton"
}
```

New commits:



---

archive/issue_comments_354892.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-30T12:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_354893.json:
```json
{
    "body": "Changing component from notebook to python3.",
    "created_at": "2018-05-31T05:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354893",
    "user": "https://github.com/fchapoton"
}
```

Changing component from notebook to python3.



---

archive/issue_comments_354894.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-31T05:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354894",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_354895.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-05-31T09:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354895",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_354896.json:
```json
{
    "body": "I haven't tested it, but assuming you have LGTM.",
    "created_at": "2018-05-31T09:44:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354896",
    "user": "https://github.com/embray"
}
```

I haven't tested it, but assuming you have LGTM.



---

archive/issue_events_063891.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-01T15:42:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/25224#event-63891"
}
```



---

archive/issue_comments_354897.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-06-01T15:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25224#issuecomment-354897",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
