# Issue 25224: make jupyter notebook work with sage+python3 kernel

Issue created by migration from https://trac.sagemath.org/ticket/25461

Original creator: chapoton

Original creation time: 2018-05-29 16:02:50

CC:  embray jdemeyer fbissey

currently, seems to look for the sage kernel in the python2 library

```
Please wait while the Sage Jupyter Notebook server starts...
[I 18:01:46.779 NotebookApp] Using MathJax: nbextensions/mathjax/MathJax.js
[I 18:01:47.654 NotebookApp] Writing notebook server cookie secret to /run/user/1000/jupyter/notebook_cookie_secret
[I 18:01:51.631 NotebookApp] Serving notebooks from local directory: /home/chapoton/sage3
[I 18:01:51.631 NotebookApp] 0 active kernels
[I 18:01:51.631 NotebookApp] The Jupyter Notebook is running at:
[I 18:01:51.631 NotebookApp] http://localhost:8888/?token=2657309e7c2e2642eb6a0d9ac2d1566d7bcfbf925f8da0b4
[I 18:01:51.631 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 18:01:51.633 NotebookApp] 
    
    Copy/paste this URL into your browser when you connect for the first time,
    to login with a token:
        http://localhost:8888/?token=2657309e7c2e2642eb6a0d9ac2d1566d7bcfbf925f8da0b4
[I 18:01:52.037 NotebookApp] Accepting one-time-token-authenticated connection from 127.0.0.1
[27947:27986:0529/180152.040060:ERROR:browser_gpu_channel_host_factory.cc(108)] Failed to launch GPU process.
Nouvelle fenÃªtre ouverte dans la session du navigateur
[I 18:01:55.527 NotebookApp] Kernel started: 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7
[I 18:01:56.260 NotebookApp] Adapting to protocol v5.1 for kernel 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7
[I 18:02:02.473 NotebookApp] Starting buffering for 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7:D6B434490D6949288DA1FB847DD8F1F2
[I 18:02:02.877 NotebookApp] Kernel shutdown: 7fbfcf39-962d-4d16-9cd6-d874c9aa0bf7
[I 18:02:02.942 NotebookApp] Kernel started: d3b6e143-f148-4208-8bab-51c6268171a3
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[I 18:02:05.941 NotebookApp] KernelRestarter: restarting kernel (1/5), new random ports
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[I 18:02:08.948 NotebookApp] KernelRestarter: restarting kernel (2/5), new random ports
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[I 18:02:11.962 NotebookApp] KernelRestarter: restarting kernel (3/5), new random ports
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[W 18:02:12.953 NotebookApp] Timeout waiting for kernel_info reply from d3b6e143-f148-4208-8bab-51c6268171a3
[I 18:02:14.975 NotebookApp] KernelRestarter: restarting kernel (4/5), new random ports
WARNING:root:kernel d3b6e143-f148-4208-8bab-51c6268171a3 restarted
/home/chapoton/sage3/local/bin/python: No module named sage.repl
[W 18:02:17.990 NotebookApp] KernelRestarter: restart failed
[W 18:02:17.991 NotebookApp] Kernel d3b6e143-f148-4208-8bab-51c6268171a3 died, removing from map.
ERROR:root:kernel d3b6e143-f148-4208-8bab-51c6268171a3 restarted failed!
[W 18:02:18.010 NotebookApp] 410 DELETE /api/sessions/24ba9c09-ea8d-49bf-93ae-8bf84340afea (127.0.0.1): Kernel deleted before session
[W 18:02:18.010 NotebookApp] Kernel deleted before session
[W 18:02:18.010 NotebookApp] 410 DELETE /api/sessions/24ba9c09-ea8d-49bf-93ae-8bf84340afea (127.0.0.1) 1.40ms referer=http://localhost:8888/notebooks/Untitled1.ipynb
```



---

Comment by chapoton created at 2018-05-29 20:10:11

Changing component from PLEASE CHANGE to notebook.


---

Comment by chapoton created at 2018-05-29 20:10:11

Changing type from PLEASE CHANGE to enhancement.


---

Comment by nbruin created at 2018-05-29 21:02:02

src/sage/repl/ipython_kernel/install

is the file to look in; particularly the function `_kernel_cmd`.


---

Comment by chapoton created at 2018-05-30 06:19:56

yes, changing `-python` there to `-python3` make it work.

maybe we should instead make so that `sage -python` launches the correct python.


---

Comment by fbissey created at 2018-05-30 07:30:54

Replying to [comment:4 chapoton]:
> yes, changing `-python` there to `-python3` make it work.
> 
> maybe we should instead make so that `sage -python` launches the correct python.

I'd rather agree with that.


---

Comment by chapoton created at 2018-05-30 12:33:27

New commits:


---

Comment by git created at 2018-05-30 12:39:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-05-31 05:51:09

Changing component from notebook to python3.


---

Comment by chapoton created at 2018-05-31 05:51:09

Changing status from new to needs_review.


---

Comment by embray created at 2018-05-31 09:44:39

Changing status from needs_review to positive_review.


---

Comment by embray created at 2018-05-31 09:44:39

I haven't tested it, but assuming you have LGTM.


---

Comment by vbraun created at 2018-06-01 15:42:03

Resolution: fixed
