# Issue 22496: Bug with first call to ex.series()

Issue created by migration from https://trac.sagemath.org/ticket/22733

Original creator: rws

Original creation time: 2017-04-01 06:05:00

In a fresh Sage:

```
sage: var('a b c c0 c1 c2 c3 c4 c5 c6 d i j m n p r k u x y z')
(a, b, c, c0, c1, c2, c3, c4, c5, c6, d, i, j, m, n, p, r, k, u, x, y, z)
sage: a.series(x)
1*x + Order(x^20)
sage: b.series(x)
(b)

sage: var('z0 z')
(z0, z)
sage: z0.series(x)
1*x + Order(x^20)
sage: z.series(x)
(z)

sage: var('z0 z')
(z0, z)
sage: z.series(x)
1*x + Order(x^20)
sage: z0.series(x)
(z0)
```

It seems to always affect the first call to series.


---

Comment by rws created at 2017-05-25 08:39:09

See also #23072


---

Comment by tscrim created at 2017-06-03 14:43:39

Just add a doctest, and I will set a positive review.


---

Comment by rws created at 2017-06-04 06:50:23

Note: The failure is dependent on memory content and changes with every change of the comment part of the code. So, while this is fixed and the test always passes the test might not fail in versions that have the bug reintroduced.
----
New commits:


---

Comment by rws created at 2017-06-04 06:50:23

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-06-04 06:54:08

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-06-04 06:54:08

It's hard to have tests that are guaranteed to fail if a bug was (re)introduced, so we will just have to do the best we can.


---

Comment by vbraun created at 2017-06-22 07:24:40

Resolution: fixed
