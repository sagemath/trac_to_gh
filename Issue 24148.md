# Issue 24148: relabelled DynkinDiagram can has weird index set

Issue created by migration from Trac.

Original creator: vittucek

Original creation time: 2017-12-16 10:22:00

Usually relabeling works nice but when one wants to relabel with symbolic variables the index set is in wrong order. The index set of the associated CartanType is however correct.

```
D = DynkinDiagram("A3")
print(D)
print(D.index_set())
var('a', 'b', 'c')
rsD = D.relabel({1:'a', 2:'b', 3:'c'})
print(rsD)
print(rsD.index_set())
rD = D.relabel({1:a, 2:b, 3:c})
print(rD)
print(rD.index_set())
print(rD.cartan_type().index_set())
```




---

Comment by tscrim created at 2017-12-16 12:55:42

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-12-16 12:55:42

This is not a bug as the ordering of the index set (which the ordering does not matter because it is a set) is determined by the vertices of the Dynkin diagram.


---

Comment by vittucek created at 2017-12-16 13:27:13

I guess my problem stems from the fact that index__set_ returns a _tuple_ which is implicitly ordered. I think either it should return a set as its name suggest or the ordering should be consistent.


---

Comment by tscrim created at 2017-12-16 22:46:32

One needs an implicit ordering for the Cartan matrix. Also, anyone who does stuff with Lie/Coxeter types that I know would want this to be called `index_set`. Also, working with (frozen)sets is slower (and can be more difficult to work with) for common operations with the index set such as iteration. 

There is no loss of generality for fixing an order, but why should one order be preferred over another? You are also getting different relabelings because the types are different too, so there is not really an inconsistency.


---

Comment by vittucek created at 2018-02-20 09:58:03

If you view Dynkin diagram as a directed graph then there are basically two orderings, right? But the thing is that there is a fixed ordering hidden in `DynkinDiagram._cartan_type._index_set` (or in `DynkinDiagram.cartan_type().index_set()`. So I think the question is if we want to admit it explicitly and just return this for `DynkinDiagram.index_set()`. I was actually bitten by this fact that `DynkinDiagram.index_set()` is NOT the index set of the Cartan type the Dynkin diagram encodes. If there is a good reason to keep it in this current form and (imho misleadingly) return just a tuple of vertices of the underlying directed graph, then I am fine with that. Otherwise I don't see any harm in making this simple change.
