# Issue 12035: Typing "sage -cython" doesn't work due to bug in wrapper script

Issue created by migration from Trac.

Original creator: was

Original creation time: 2011-12-20 22:41:45

Assignee: leif

We should get a usage message but don't:

```
wstein`@`ubuntu:s$ ./sage -cython
Traceback (most recent call last):
  File "/home/wstein/sage/sage-4.8.alpha5/local/bin/sage-cython", line 7, in <module>
    pyx_file = os.path.abspath(args[-1])
IndexError: list index out of range
```


This is because of a bug in "local/bin/sage-cython".



---

Attachment

apply to scripts repo (SAGE_ROOT/local/bin/)


---

Comment by was created at 2011-12-20 22:47:19

Changing status from new to needs_review.


---

Comment by vbraun created at 2011-12-20 22:50:07

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2011-12-20 22:50:07

Looks good


---

Comment by jdemeyer created at 2011-12-20 23:28:16

It would be really nice to add a test in `sage/tests/cmdline.py` to check that

```
sage --cython
```

works.


---

Comment by was created at 2011-12-21 04:35:26

Replying to [comment:3 jdemeyer]:
> It would be really nice to add a test in `sage/tests/cmdline.py` to check that
> {{{
> sage --cython
> }}}
> works.

One amusing things is that for "sage --cython" to correctly work, it *should* return an error:


```
$ sage --cython
... usage message ...
$ echo $?
1
```

Before my patch "sage --cython" also returned an error code of 1 (for a different reason).   Maybe something like this would be useful:

```
sage: 'http://cython.org' in os.popen3('sage -cython')[2].read()
True
```


If you agree, we can add a patch with that in it.


---

Comment by jdemeyer created at 2011-12-21 12:36:06

Changing status from positive_review to needs_work.


---

Attachment


---

Comment by jdemeyer created at 2011-12-21 12:36:12

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2011-12-21 13:30:05

Looks good!


---

Comment by vbraun created at 2011-12-21 13:30:05

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-12-24 01:05:19

Resolution: fixed
