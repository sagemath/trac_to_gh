# Issue 30975: fix submonoid method when the generating set include the identity

archive/issues_030975.json:
```json
{
    "body": "CC:  zabrocki aschilling\n\nKeywords: submonoid, monoid, semigroups\n\nFix the `submonoid` method so that we don't get two copies of the identity element when the generating set already includes the identity element.\n\n```\nsage: R = IntegerModRing(15)\nsage: R.submonoid([R.one()]).list()         # this should be [1]\n[1, 1]\n\nsage: S = SymmetricGroup(4)\nsage: S.submonoid([S.one()]).list()         # this should be [()]\n[(), ()]\n\nsage: S = SymmetricGroup(4)\nsage: S.submonoid(list(S)).cardinality()    # this should be 24\n25\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31212\n\n",
    "created_at": "2021-01-08T19:56:03Z",
    "labels": [
        "algebra",
        "major",
        "bug"
    ],
    "title": "fix submonoid method when the generating set include the identity",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30975",
    "user": "saliola"
}
```
CC:  zabrocki aschilling

Keywords: submonoid, monoid, semigroups

Fix the `submonoid` method so that we don't get two copies of the identity element when the generating set already includes the identity element.

```
sage: R = IntegerModRing(15)
sage: R.submonoid([R.one()]).list()         # this should be [1]
[1, 1]

sage: S = SymmetricGroup(4)
sage: S.submonoid([S.one()]).list()         # this should be [()]
[(), ()]

sage: S = SymmetricGroup(4)
sage: S.submonoid(list(S)).cardinality()    # this should be 24
25
```


Issue created by migration from https://trac.sagemath.org/ticket/31212





---

archive/issue_comments_442371.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-09T19:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30975#issuecomment-442371",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_442372.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-01-09T19:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30975#issuecomment-442372",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_442373.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-09T20:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30975#issuecomment-442373",
    "user": "saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_442374.json:
```json
{
    "body": "Salut Fr\u00e9d\u00e9ric! Thanks so much for this quick fix and the other improvements to the surrounding code.",
    "created_at": "2021-01-09T20:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30975#issuecomment-442374",
    "user": "saliola"
}
```

Salut Frédéric! Thanks so much for this quick fix and the other improvements to the surrounding code.



---

archive/issue_comments_442375.json:
```json
{
    "body": "Does this also fix duplicate generators?\n\n```\nsage: S = SymmetricGroup(4)\nsage: M = S.submonoid([S[3], S[3]])\nsage: M\nA subgroup of (Symmetric group of order 4! as a permutation group)\nwith 2 generators\nsage: M.list()\n[(), (1,2)(3,4), (1,2)(3,4)]\n```\n\n\nUsing `OrderedDict`, or just `dict` once we drop Python 3.6 support,\ncould help. See:\n\n- [Stack Overflow question 12897374: Get unique values from a list in Python](https://stackoverflow.com/questions/12897374)",
    "created_at": "2021-01-09T22:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30975#issuecomment-442375",
    "user": "slelievre"
}
```

Does this also fix duplicate generators?

```
sage: S = SymmetricGroup(4)
sage: M = S.submonoid([S[3], S[3]])
sage: M
A subgroup of (Symmetric group of order 4! as a permutation group)
with 2 generators
sage: M.list()
[(), (1,2)(3,4), (1,2)(3,4)]
```


Using `OrderedDict`, or just `dict` once we drop Python 3.6 support,
could help. See:

- [Stack Overflow question 12897374: Get unique values from a list in Python](https://stackoverflow.com/questions/12897374)



---

archive/issue_comments_442376.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-24T10:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30975",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30975#issuecomment-442376",
    "user": "vbraun"
}
```

Resolution: fixed
