# Issue 15470: coercion of power series with zero bigoh to polynomials

Issue created by migration from https://trac.sagemath.org/ticket/15707

Original creator: rws

Original creation time: 2014-01-22 11:34:31


```
sage: R.<x> = PowerSeriesRing(ZZ)
sage: P.<x> = ZZ[]
sage: r=R([1,1,1,1])
sage: r
1 + x + x^2 + x^3
sage: P(r)
TypeError: unable to coerce <type 'sage.rings.power_series_poly.PowerSeries_poly'> to an integer
```


Sage power series can have zero bigoh term, and such series are identical to polynomials, so coercion should be no problem.

If we should allow zero bigoh in power series is another matter.



---

Comment by rws created at 2014-01-22 16:25:14

Set assignee to rws.


---

Comment by pbruin created at 2014-01-22 17:16:02

This should be fixed, probably also for series with finite precision, i.e. that do have an O(x<sup>n</sup>) term.  There is already the method `r.polynomial()` which returns exactly the desired result; we just have to tell `P(r)` to use this.


---

Comment by rws created at 2014-01-22 18:18:07

Changing component from algebra to coercion.


---

Comment by nbruin created at 2014-01-22 19:00:55

Note that this is a conversion problem, not a coercion problem. There should be no coercion from `PowerSeriesRing` to `PolynomialRing` at all.
In fact, it may even be acceptable to let _conversion_ from PowerSeries` to `Polynomials` simply be truncation: conversion is allowed to just be best effort (this is all completely compatible with Peter's comment above).


---

Comment by rws created at 2014-01-23 07:19:18

Changing component from coercion to algebra.


---

Comment by rws created at 2014-01-23 07:20:01

Agree, after sleeping over it and rereading the documentation.


---

Comment by git created at 2014-01-23 09:15:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2014-01-23 09:16:34

Changing status from new to needs_review.


---

Comment by tscrim created at 2014-01-23 16:07:44

I agree with this as well (and it's coherent with what we do with real fields to `QQ`), but could you add an doctest showing this is fixed?

Thanks,

Travis


---

Comment by git created at 2014-01-24 07:31:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-01-25 18:34:38

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2014-01-25 18:34:38

LGTM


---

Comment by vbraun created at 2014-02-03 22:58:28

Resolution: fixed
