# Issue 17940: Warning to Matrix.random()

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2015-04-13 07:10:25

CC:  â€‹rbeezer

`Matrix.random()` do not give uniform distribution. What's worse, for GF matrices it does not even generate them all. Until this is fixed at least warning is needed in documentation.



---

Comment by jmantysalo created at 2015-04-13 07:58:44

New commits:


---

Comment by jmantysalo created at 2015-04-13 07:58:44

Changing status from new to needs_review.


---

Comment by ncohen created at 2015-04-13 12:59:41

Looks good. A naive request: if there is an example of small order for which you are sure that a given matrix `M` is never returned, could you add a doctest/example to this warning to illustrate it?

Something like `all(a_random_matrix() != m for i in range(100))`?

Nathann


---

Comment by jmantysalo created at 2015-04-13 13:24:54

Replying to [comment:3 ncohen]:
> Looks good. A naive request: if there is an example of small order for which you are sure that a given matrix `M` is never returned, could you add a doctest/example to this warning to illustrate it?
> 
> Something like `all(a_random_matrix() != m for i in range(100))`?

Hmm... For unimodular `3x3` matrices over `GF(3)` there seems to be `3^5` different matrix that are never returned. But for `2x2` over `GF(2)` there are only 3 of those. Easiest example is `M=Matrix([[0,2],[2,0]])`. But is this information useful to user?


---

Comment by ncohen created at 2015-04-13 13:34:21

> Hmm... For unimodular `3x3` matrices over `GF(3)` there seems to be `3^5` different matrix that are never returned. But for `2x2` over `GF(2)` there are only 3 of those. Easiest example is `M=Matrix([[0,2],[2,0]])`. But is this information useful to user?

Well, it would just be a 'proof' of what we say. But `M=Matrix([[0,2],[2,0]])` does not seem to be a very good example of a matrix over `GF(2)` `^^;`

Nathann


---

Comment by jmantysalo created at 2015-04-13 13:36:51

Replying to [comment:5 ncohen]:

> Well, it would just be a 'proof' of what we say. But `M=Matrix([[0,2],[2,0]])` does not seem to be a very good example of a matrix over `GF(2)` `^^;`

Sorry, I meant `2x2` over `GF(3)`. But the question still remains: is this useful for user?


---

Comment by ncohen created at 2015-04-13 13:41:00

It answers some questions that one could ask, like: "Okayy, it says that it does not always work but perhaps it will work for me because I deal with very small matrices over very small fields?". And the answer is 'no'. It is not very important, I was just thinking that it would be cool to say "not all matrices appear, for example: <sage code>".

If you think that it is too much trouble, no problem.


---

Comment by jmantysalo created at 2015-04-13 19:51:59

Replying to [comment:7 ncohen]:
> It answers some questions that one could ask, like: "Okayy, it says that it does not always work but perhaps it will work for me because I deal with very small matrices over very small fields?". And the answer is 'no'. It is not very important, I was just thinking that it would be cool to say "not all matrices appear, for example: <sage code>".

OK, I'll modify this tomorrow.


---

Comment by jmantysalo created at 2015-04-13 19:51:59

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-04-14 06:25:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2015-04-14 06:26:21

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2015-04-14 11:30:58

THaaaaaaaaaaaanks ! Good to go `:-)`

Nathann


---

Comment by ncohen created at 2015-04-14 11:30:58

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-04-15 13:04:08

Resolution: fixed
