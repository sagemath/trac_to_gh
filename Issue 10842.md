# Issue 10842: Addition of function ``is_uniform(k)`` for WordMorphism class

Issue created by migration from Trac.

Original creator: abmasse

Original creation time: 2011-03-11 23:08:17

Assignee: abmasse

CC:  slabbe tmonteil

The purpose of this small ticket is to add the function ``is_uniform(k)`` to the WordMorphism class. A morphism `m` is called `k`-uniform if for every letter `a`, we have `|m(a)| = k`.

For instance, the Thue-Morse morphism `a->ab,b->ba` is 2-uniform while the Fibonacci morphism `a->ab,b->a` is not uniform. 


---

Comment by abmasse created at 2011-03-12 03:02:53

Apply on sage-4.6.2


---

Attachment

I juste uploaded a patch implementing the `ìs_uniform`` function. Needs review.


---

Comment by abmasse created at 2011-03-12 03:03:42

Changing status from new to needs_review.


---

Comment by slabbe created at 2011-03-16 18:50:12

With `trac_10919-uniform_morphism-abm.patch` :


```
sage: m = WordMorphism(dict(((i,[i]*i) for i in range(30))))     
sage: %timeit m.is_uniform()                                     
625 loops, best of 3: 25.5 µs per loop                           
sage: %timeit m.is_uniform(4)                                    
625 loops, best of 3: 40.6 µs per loop                           
```


With `trac_10919-uniform_morphism-abm.patch` and `trac_10919_review-sl.patch`:


```
sage: m = WordMorphism(dict(((i,[i]*i) for i in range(30))))   
sage: %timeit m.is_uniform()                                   
625 loops, best of 3: 18 µs per loop                           
sage: %timeit m.is_uniform(4)                                  
625 loops, best of 3: 5.72 µs per loop                                             
```



---

Attachment

Applies over the precedent patch


---

Comment by slabbe created at 2011-03-16 18:59:26

I just uploaded a review patch which, I believe, improves the code.

Other than that, documentation builds fine, all test pass, the new function is OK. If you agree with my small fixes, you can change the status of this ticket to positive review.


---

Comment by abmasse created at 2011-03-16 19:36:02

Changing status from needs_review to positive_review.


---

Comment by abmasse created at 2011-03-16 19:36:02

Replying to [comment:3 slabbe]:
> I just uploaded a review patch which, I believe, improves the code.
> 
> Other than that, documentation builds fine, all test pass, the new function is OK. If you agree with my small fixes, you can change the status of this ticket to positive review. 

Hi, Sébastien !

Thank you for the review. Once again, you improved the efficiency of my algorithm (I definitely need to be more careful about these small optimisations).

I applied your patch over mine applied over sage-4.6.2 and all tests passed, and the documentation built fine too. Of course, I agree with them, so that I'm ready to set this ticket to positive review.


---

Comment by jdemeyer created at 2011-03-25 12:30:42

Resolution: fixed
