# Issue 31931: Fix conversion between spaces of modular forms

Issue created by migration from https://trac.sagemath.org/ticket/32168

Original creator: @DavidAyotte

Original creation time: 2021-07-09 14:59:41

CC:  vdelecroix

Keywords: modular forms coercion gsoc2021

Currently we have the following:


```
sage: M0 = ModularForms(Gamma0(8), 10)
sage: M1 = ModularForms(Gamma1(8), 10)
sage: M1.has_coerce_map_from(M0)
True
sage: f = M0.0; g = M1.0
sage: f + g
Traceback (most recent call last):
...
TypeError: unsupported operand parent(s) for +: 'Modular Forms space of dimension 11 for Congruence Subgroup Gamma0(8) of weight 10 over Rational Field' and 'Modular Forms space of dimension 21 for Congruence Subgroup Gamma1(8) of weight 10 over Rational Field'
```


Moreover:


```
sage: M1(f)
Traceback (most recent call last):
...
TypeError: entries must be a list of length 21
```


The goal of this ticket is to fix this issue.


---

Comment by git created at 2021-07-09 15:06:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @DavidAyotte created at 2021-07-09 15:09:04

Changing status from new to needs_review.


---

Comment by git created at 2021-07-09 20:58:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2021-07-12 13:44:10

You forgot to set the "Author" field of the ticket description.


---

Comment by vdelecroix created at 2021-07-12 13:45:51

In `_element_constructor_`, you can safely remove the test

```
if x.parent() is self:
    return x
```

The above is taken care of by `Parent.__call__` (which delegates the call to `_element_constructor_` when it is needed).


---

Comment by vdelecroix created at 2021-07-12 15:18:26

One these two things are fixed, we can set to positive review.


---

Comment by git created at 2021-07-12 15:20:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2021-07-14 09:02:58

I can not reproduce the patchbot failures that seems unrelated.


---

Comment by vdelecroix created at 2021-07-14 09:02:58

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-07-24 15:28:00

Resolution: fixed
