# Issue 13998: Workaround potential absence of time command on Cygwin

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2013-02-27 22:18:49

Assignee: tbd

CC:  kcrisman dimpase

Keywords: cygwin time optional

We have a bash time builtin but no "real" time unless the time package is installed.
So in this case if time is not the first command youll get a "command not found".

This is problematic in sage/interfaces/qsieve.py

See http://trac.sagemath.org/sage_trac/ticket/14184#comment:16, http://trac.sagemath.org/sage_trac/ticket/9164#comment:3, https://groups.google.com/d/topic/sage-devel/WtvaNKHdnts/discussion and http://comments.gmane.org/gmane.os.cygwin/106331


---

Comment by dimpase created at 2013-03-06 14:20:08

Cygwin has `/usr/bin/time`, it just needs to be installed. Thus, I propose making the presence of `time` a Cygwin prereq.


---

Comment by jdemeyer created at 2013-03-06 14:26:07

This ticket has absolutely nothing to do with Cygwin.

Regardless, making `time` a prereq is not needed, it would be easy to fix the `qsieve` code not to rely on a time command.


---

Comment by jdemeyer created at 2013-03-06 14:26:07

Changing keywords from "cygwin time optional" to "time optional".


---

Comment by jpflori created at 2013-03-06 15:11:59

Replying to [comment:3 jdemeyer]:
> This ticket has absolutely nothing to do with Cygwin.
> 
> Regardless, making `time` a prereq is not needed, it would be easy to fix the `qsieve` code not to rely on a time command.
I agree with that, and would really not like to add new prereqs on any platform.


---

Comment by kcrisman created at 2013-03-08 16:50:39

Changing component from cygwin to interfaces.


---

Comment by kcrisman created at 2013-03-08 16:50:39

Changing assignee from tbd to was.


---

Comment by kcrisman created at 2013-03-08 16:50:39

Changing keywords from "time optional" to "time optional sieve".


---

Comment by kcrisman created at 2013-03-08 16:50:39

I'm changing the summary.  This is really a bug, if it's a bug, in the way interface/qsieve.py is written. Could we use whatever does `time` or `timeit` in Sage?


---

Comment by jdemeyer created at 2013-03-08 19:56:02

Replying to [comment:5 kcrisman]:
> I'm changing the summary.  This is really a bug, if it's a bug, in the way interface/qsieve.py is written. Could we use whatever does `time` or `timeit` in Sage?

Try this:

```
sage: ?walltime
Type:       function
String Form:<function walltime at 0xb9d488>
File:       /usr/local/src/sage-5.7.beta1/local/lib/python2.7/site-packages/sage/misc/misc.py
Definition: walltime(t=0)
Docstring:
   Return the wall time in second, or with optional argument t, return
   the wall time since time t. "Wall time" means the time on a wall
   clock, i.e., the actual time.

   INPUT:

   * "t" - (optional) float, time in CPU seconds

   OUTPUT:

   * "float" - time in seconds

   EXAMPLES:

      sage: w = walltime()
      sage: F = factor(2^199-1)
      sage: walltime(w)   # somewhat random
      0.8823847770690918
```



---

Comment by jdemeyer created at 2015-06-23 13:51:29

Changing component from interfaces to interfaces: optional.
