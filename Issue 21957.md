# Issue 21957: Multiplying elements from polynomial rings with lots of variables exceeds recursion depth

archive/issues_021957.json:
```json
{
    "body": "Keywords: PolynomialRing, multivariate, singular, recursion depth\n\nThis gives a \"RuntimeError: maximum recursion depth exceeded\".\n\n\n```\nR1 = ZZ['x0','x1']\nx = R1(1)\nR2 = ZZ[tuple('x'+str(i) for i in range(967))]\ny = R2('x0')\nx*y\n```\n\n\nDecreasing the number 967 results in the correct answer (it's slow though).\n\nI'm going to guess that \"coercion\" is the right component.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22194\n\n",
    "created_at": "2017-01-17T04:17:17Z",
    "labels": [
        "coercion",
        "major",
        "bug"
    ],
    "title": "Multiplying elements from polynomial rings with lots of variables exceeds recursion depth",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21957",
    "user": "Stefan"
}
```
Keywords: PolynomialRing, multivariate, singular, recursion depth

This gives a "RuntimeError: maximum recursion depth exceeded".


```
R1 = ZZ['x0','x1']
x = R1(1)
R2 = ZZ[tuple('x'+str(i) for i in range(967))]
y = R2('x0')
x*y
```


Decreasing the number 967 results in the correct answer (it's slow though).

I'm going to guess that "coercion" is the right component.

Issue created by migration from https://trac.sagemath.org/ticket/22194





---

archive/issue_comments_305309.json:
```json
{
    "body": "Yep, something is going wrong with either the coercion or in `_element_constructor_` as these are almost instantaneous:\n\n```\nsage: phi = R2.coerce_map_from(R1)\nsage: R2._element_constructor_??\nsage: phi(x)\n1\nsage: phi(x) * y\nx0\nsage: R2(x) * y\nx0\n```\n",
    "created_at": "2017-01-17T17:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21957#issuecomment-305309",
    "user": "tscrim"
}
```

Yep, something is going wrong with either the coercion or in `_element_constructor_` as these are almost instantaneous:

```
sage: phi = R2.coerce_map_from(R1)
sage: R2._element_constructor_??
sage: phi(x)
1
sage: phi(x) * y
x0
sage: R2(x) * y
x0
```




---

archive/issue_comments_305310.json:
```json
{
    "body": "My guess is probably in the `_element_constructor_`.",
    "created_at": "2017-01-17T17:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21957#issuecomment-305310",
    "user": "tscrim"
}
```

My guess is probably in the `_element_constructor_`.



---

archive/issue_comments_305311.json:
```json
{
    "body": "Duplicate of #23906.",
    "created_at": "2018-03-08T10:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21957#issuecomment-305311",
    "user": "jdemeyer"
}
```

Duplicate of #23906.



---

archive/issue_comments_305312.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2018-03-08T10:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21957#issuecomment-305312",
    "user": "jdemeyer"
}
```

Resolution: duplicate
