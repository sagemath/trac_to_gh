# Issue 11151: allow floats to be taken to complex powers

archive/issues_011151.json:
```json
{
    "body": "Assignee: AlexGhitza\n\nCC:  slelievre tmonteil\n\nKeywords: plot li Li pow\n\nIn `sage.rings.complex_number.ComplexNumber.__pow__??`\n\n```\n\ndef __pow__(self, right, modulus):\n\n    try:\n        return (self.log()*right).exp()\n    except TypeError:\n        pass\n```\n\nmakes it so that \n\n```\nfloat(5)^(0.5+14.1347251*i)\n```\n\ndoesn't work.  \n\nThis means plotting even `mpmath.li` for complex values with a lambda function won't work nicely.  \n\nIssue created by migration from https://trac.sagemath.org/ticket/11323\n\n",
    "created_at": "2011-05-10T20:48:16Z",
    "labels": [
        "basic arithmetic",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "allow floats to be taken to complex powers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11151",
    "user": "kcrisman"
}
```
Assignee: AlexGhitza

CC:  slelievre tmonteil

Keywords: plot li Li pow

In `sage.rings.complex_number.ComplexNumber.__pow__??`

```

def __pow__(self, right, modulus):

    try:
        return (self.log()*right).exp()
    except TypeError:
        pass
```

makes it so that 

```
float(5)^(0.5+14.1347251*i)
```

doesn't work.  

This means plotting even `mpmath.li` for complex values with a lambda function won't work nicely.  

Issue created by migration from https://trac.sagemath.org/ticket/11323





---

archive/issue_comments_122195.json:
```json
{
    "body": "Please `@`kcrisman can you provide the plotting example you had in mind?\n\nPlease `@`tmonteil can you test on 32-bit?\n----\nNew commits:",
    "created_at": "2021-04-30T10:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122195",
    "user": "slelievre"
}
```

Please `@`kcrisman can you provide the plotting example you had in mind?

Please `@`tmonteil can you test on 32-bit?
----
New commits:



---

archive/issue_comments_122196.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-30T10:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122196",
    "user": "slelievre"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_122197.json:
```json
{
    "body": "> Please `@`kcrisman can you provide the plotting example you had in mind?\n\nFrom a decade ago?\n\nI am not sure.  I *think* I had attempted something like this directly, rather than parametrically.\n\n```\nimport mpmath\nparametric_plot((lambda t: mpmath.ei(log(20)*(0.5+i*RR(t))).real, lambda t: mpmath.ei(log(20)*(0.5+i*RR(t))).imag), (0,14.1), rgbcolor=hue(0.7), plot_points=300) + point((mpmath.ei(log(20)*(0.5+i*14.1)).real, mpmath.ei(log(20)*(0.5+i*14.1)).imag), color='red',size=20)\n```\n\nwhere I used that on this domain the log integral is the exp integral of the log and somehow that avoided the problem.\n\nBut I can't remember what exactly I tried that failed, because presumably I discarded it.  Sorry!",
    "created_at": "2021-04-30T11:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122197",
    "user": "kcrisman"
}
```

> Please `@`kcrisman can you provide the plotting example you had in mind?

From a decade ago?

I am not sure.  I *think* I had attempted something like this directly, rather than parametrically.

```
import mpmath
parametric_plot((lambda t: mpmath.ei(log(20)*(0.5+i*RR(t))).real, lambda t: mpmath.ei(log(20)*(0.5+i*RR(t))).imag), (0,14.1), rgbcolor=hue(0.7), plot_points=300) + point((mpmath.ei(log(20)*(0.5+i*14.1)).real, mpmath.ei(log(20)*(0.5+i*14.1)).imag), color='red',size=20)
```

where I used that on this domain the log integral is the exp integral of the log and somehow that avoided the problem.

But I can't remember what exactly I tried that failed, because presumably I discarded it.  Sorry!



---

archive/issue_comments_122198.json:
```json
{
    "body": "Moving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122198",
    "user": "mkoeppe"
}
```

Moving to 9.4, as 9.3 has been released.



---

archive/issue_comments_122199.json:
```json
{
    "body": "Should line 1695 `isinstance(right, (int, long, Integer))` be changed to `isinstance(right, (int, Integer))`, for python 3, or should it be left as is for backwards compatibility?",
    "created_at": "2021-06-02T16:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122199",
    "user": "tkarn"
}
```

Should line 1695 `isinstance(right, (int, long, Integer))` be changed to `isinstance(right, (int, Integer))`, for python 3, or should it be left as is for backwards compatibility?



---

archive/issue_comments_122200.json:
```json
{
    "body": "It's not hurting anything by being there, so I would say leave it since it is not related to this ticket. It might also matter for 16-bit machines since this is Cython code (I'm not 100% sure of this however).\n\nLGTM.",
    "created_at": "2021-06-02T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122200",
    "user": "tscrim"
}
```

It's not hurting anything by being there, so I would say leave it since it is not related to this ticket. It might also matter for 16-bit machines since this is Cython code (I'm not 100% sure of this however).

LGTM.



---

archive/issue_comments_122201.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-02T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122201",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_122202.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-06-02T23:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122202",
    "user": "slelievre"
}
```

Thanks!



---

archive/issue_comments_122203.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-07T21:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11151",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11151#issuecomment-122203",
    "user": "vbraun"
}
```

Resolution: fixed
