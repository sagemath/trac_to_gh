# Issue 11151: allow floats to be taken to complex powers

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2011-05-10 20:48:16

Assignee: AlexGhitza

CC:  slelievre tmonteil

Keywords: plot li Li pow

In `sage.rings.complex_number.ComplexNumber.__pow__??`

```

def __pow__(self, right, modulus):

    try:
        return (self.log()*right).exp()
    except TypeError:
        pass
```

makes it so that 

```
float(5)^(0.5+14.1347251*i)
```

doesn't work.  

This means plotting even `mpmath.li` for complex values with a lambda function won't work nicely.  


---

Comment by slelievre created at 2021-04-30 10:42:44

Please `@`kcrisman can you provide the plotting example you had in mind?

Please `@`tmonteil can you test on 32-bit?
----
New commits:


---

Comment by slelievre created at 2021-04-30 10:42:44

Changing status from new to needs_review.


---

Comment by kcrisman created at 2021-04-30 11:43:07

> Please `@`kcrisman can you provide the plotting example you had in mind?

From a decade ago?

I am not sure.  I _think_ I had attempted something like this directly, rather than parametrically.

```
import mpmath
parametric_plot((lambda t: mpmath.ei(log(20)*(0.5+i*RR(t))).real, lambda t: mpmath.ei(log(20)*(0.5+i*RR(t))).imag), (0,14.1), rgbcolor=hue(0.7), plot_points=300) + point((mpmath.ei(log(20)*(0.5+i*14.1)).real, mpmath.ei(log(20)*(0.5+i*14.1)).imag), color='red',size=20)
```

where I used that on this domain the log integral is the exp integral of the log and somehow that avoided the problem.

But I can't remember what exactly I tried that failed, because presumably I discarded it.  Sorry!


---

Comment by mkoeppe created at 2021-05-10 17:42:09

Moving to 9.4, as 9.3 has been released.


---

Comment by tkarn created at 2021-06-02 16:31:22

Should line 1695 `isinstance(right, (int, long, Integer))` be changed to `isinstance(right, (int, Integer))`, for python 3, or should it be left as is for backwards compatibility?


---

Comment by tscrim created at 2021-06-02 21:59:02

It's not hurting anything by being there, so I would say leave it since it is not related to this ticket. It might also matter for 16-bit machines since this is Cython code (I'm not 100% sure of this however).

LGTM.


---

Comment by tscrim created at 2021-06-02 21:59:02

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2021-06-02 23:58:39

Thanks!


---

Comment by vbraun created at 2021-06-07 21:40:28

Resolution: fixed
