# Issue 24380: Infinite process recursion with Solaris make

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2018-01-30 16:16:55

CC:  dimpase embray

For some reason, Solaris `make` forks an unbounded number of processes with the Sage top-level `Makefile`. This is worse than simply breaking, so we add some protection.


---

Comment by jdemeyer created at 2018-01-30 16:28:41

New commits:


---

Comment by jdemeyer created at 2018-01-30 16:28:41

Changing status from new to needs_review.


---

Comment by dimpase created at 2018-01-30 16:41:51

shouldn't it rather be left to ./configure to check? E.g. use
https://www.gnu.org/software/autoconf-archive/ax_check_gnu_make.html


---

Comment by jdemeyer created at 2018-01-30 18:31:56

Replying to [comment:3 dimpase]:
> shouldn't it rather be left to ./configure to check?

The problem is that we have historically always allowed just `make` to configure and build Sage. So whatever is done in `./configure` is too late since you may already be running `make`.


---

Comment by dimpase created at 2018-01-30 19:02:04

Well, but it is not what we want, right? One can recognise that ./configure has not been run, and halt (or launch ./configure ?).


---

Comment by jdemeyer created at 2018-01-30 19:14:52

Replying to [comment:5 dimpase]:
> Well, but it is not what we want, right?

What is not what we want?

> One can recognise that ./configure has not been run, and halt (or launch ./configure ?).

There is already logic in the top-level `Makefile` to do exactly that (running `./configure`). But that's not relevant to this ticket, which is about running `make` _before_ `./configure`.


---

Comment by dimpase created at 2018-01-30 23:13:26

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2018-01-30 23:13:26

OK, it makes sense. I didn't understand the context.


---

Comment by vbraun created at 2018-02-02 12:05:34

Resolution: fixed
