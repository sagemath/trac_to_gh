# Issue 14781: add recover_formula and prefix_to_infix functions to logicparser.py

Issue created by migration from https://trac.sagemath.org/ticket/15018

Original creator: pmscurek

Original creation time: 2013-08-07 00:08:31

Assignee: Paul Scurek

Keywords: logic, logicparser, prefix, infix

In the patch for this ticket, the functions recover_formula and prefix_to_infix are added to logicparser.py in the logic module.  The function recover_formula allows for the recovery of a boolean formula from its parse tree.  The function prefix_to_infix converts a parse tree from prefix form to infix form. Here are some examples.


```python
sage: import sage.logic.logicparser as logicparser
sage: t = ['->', ['~', 'a'], ['|', 'c', ['~', 'd']]]
sage: logicparser.recover_formula(t)
'~a->(c|~d)'
```



```python
sage: import sage.logic.logicparser as logicparser
sage: t = ['->', ['~', 'a'], ['|', 'c', ['~', 'd']]]
sage: logicparser.prefix_to_infix(t)
[['~', 'a'], '->', ['c', '|', ['~', 'd']]]
```



---

Comment by pmscurek created at 2013-08-07 00:10:24

Changing type from PLEASE CHANGE to enhancement.


---

Attachment

apply first


---

Attachment

apply second


---

Comment by pmscurek created at 2013-08-07 00:29:27

apply third


---

Attachment

Referee:

 * trivial typo: "argrument" (in multiple places!)
 
 * delete parens here: "prefix_to_infix() takes a parse tree as input"
 
 * Someday somebody should change this... `type(tree[1]) is ListType` to `isinstance(tree[1], list)`.


That's it.


---

Comment by pmscurek created at 2013-08-15 22:21:19

Apply this last. This is the patch for this ticket, but depends on the previous 3.


---

Attachment

This file is the same as trac_15018_recover_formula.2.patch.


---

Attachment

I forgot to check the box for replacing the file with the same name.  That is why there are attachments called trac_15018_recover_formula.patch and trac_15018_recover_formula.2.patch.  They are exactly the same, so only apply one of them when testing the patch.  I would get right of one of them, but I don't see an option for removing attachments.


---

Comment by pmscurek created at 2013-08-15 22:32:11

Changing status from new to needs_review.


---

Comment by pmscurek created at 2013-08-20 17:13:53

The last patch listed in the attachments, trac_15018_recover_formula.patch, is the only patch that should be integrated into sage for this ticket.  The first three patches are the patches from the dependencies for this ticket that were placed here for the convenience of the reviewer.  The patch, trac_15018_recover_formula.2.patch is identical to trac_15018_recover_formula.patch.


---

Comment by vbraun created at 2013-12-21 18:54:29

Changing status from needs_review to needs_work.


---

Comment by vbraun created at 2013-12-21 18:54:29

First patch of the series does not apply any more, please fix.


---

Comment by tscrim created at 2014-01-30 18:34:15

I've rebased this and made some minor doc changes. If everything is good, then positive review.
----
New commits:


---

Comment by tscrim created at 2014-01-30 18:34:15

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2014-04-18 20:14:14

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-05-10 17:18:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-05-10 17:18:32

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-05-11 09:58:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-05-11 10:02:14

looks good to me, positive review.


---

Comment by chapoton created at 2014-05-11 10:02:14

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2014-05-11 15:22:47

Thanks Frederic.


---

Comment by vbraun created at 2014-05-12 11:34:45

Resolution: fixed
