# Issue 14233: rsolve fails with initial conditions

archive/issues_014233.json:
```json
{
    "body": "Assignee: @burcin\n\nConsider the following:\n\n```\n----------------------------------------------------------------------\n----------------------------------------------------------------------\nsage: from sympy import Function, Symbol\nsage: u = Function('u')\nsage: n = Symbol('n', integer=True)\nsage: from sympy import rsolve\nsage: f = u(n+2) - u(n+1) + u(n)/4\nsage: rsolve(f,u(n))\n2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)\n```\n\nSince Sage does not know about `RisingFactorial`, this answer is not very useful...\n| Sage Version 5.8, Release Date: 2013-03-15                         |\n| Type \"notebook()\" for the browser-based notebook interface.        |\n| Type \"help()\" for help.                                            |\nMoreover:\n\n```\nsage: rsolve(f,u(n),{u(0):0,u(1):1})\nsage:\n```\n\nThe solution is (computed by Maple 15) `1/4*(8*n+8)*(1/2)<sup>n-2*(1/2)</sup>n`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14437\n\n",
    "created_at": "2013-04-11T06:44:16Z",
    "labels": [
        "calculus",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "rsolve fails with initial conditions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14233",
    "user": "@zimmermann6"
}
```
Assignee: @burcin

Consider the following:

```
----------------------------------------------------------------------
----------------------------------------------------------------------
sage: from sympy import Function, Symbol
sage: u = Function('u')
sage: n = Symbol('n', integer=True)
sage: from sympy import rsolve
sage: f = u(n+2) - u(n+1) + u(n)/4
sage: rsolve(f,u(n))
2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)
```

Since Sage does not know about `RisingFactorial`, this answer is not very useful...
| Sage Version 5.8, Release Date: 2013-03-15                         |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
Moreover:

```
sage: rsolve(f,u(n),{u(0):0,u(1):1})
sage:
```

The solution is (computed by Maple 15) `1/4*(8*n+8)*(1/2)<sup>n-2*(1/2)</sup>n`.

Issue created by migration from https://trac.sagemath.org/ticket/14437





---

archive/issue_comments_179095.json:
```json
{
    "body": "This is a pure Sympy question.\n\n```\n\nIn [1]: import sympy\n\nIn [3]: u = sympy.Function('u')\n\nIn [5]: n = sympy.Symbol('n',integer=True)\n\nIn [6]: f = u(n+2) - u(n+1) + u(n)/4\n\nIn [7]: sympy.rsolve(f,u(n))\nOut[7]: 2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)\n\nIn [8]: sympy.rsolve(f,u(n),{u(0):0,u(1):1})\nIn [9]:\n```\n\nI guess you could report it [upstream](http://code.google.com/p/sympy/issues/list) and we could verify a fix here eventually.\n\nSecond, the object you did is a Sympy object, so you would want to translate it to Sage first.\n\n```\nsage: sage: rsolve(f,u(n))\n2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)\nsage: _._sage_()\nAttributeError: 'RisingFactorial' object has no attribute '_sage_'\n```\n\nBut separately, it would be nice, true, to have a good translation of RisingFactorial.  I suggest you split this up into two different tickets, if that's okay, as the issues are quite different.",
    "created_at": "2013-04-11T14:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179095",
    "user": "@kcrisman"
}
```

This is a pure Sympy question.

```

In [1]: import sympy

In [3]: u = sympy.Function('u')

In [5]: n = sympy.Symbol('n',integer=True)

In [6]: f = u(n+2) - u(n+1) + u(n)/4

In [7]: sympy.rsolve(f,u(n))
Out[7]: 2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)

In [8]: sympy.rsolve(f,u(n),{u(0):0,u(1):1})
In [9]:
```

I guess you could report it [upstream](http://code.google.com/p/sympy/issues/list) and we could verify a fix here eventually.

Second, the object you did is a Sympy object, so you would want to translate it to Sage first.

```
sage: sage: rsolve(f,u(n))
2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)
sage: _._sage_()
AttributeError: 'RisingFactorial' object has no attribute '_sage_'
```

But separately, it would be nice, true, to have a good translation of RisingFactorial.  I suggest you split this up into two different tickets, if that's okay, as the issues are quite different.



---

archive/issue_comments_179096.json:
```json
{
    "body": "I have created a new ticket (#14446) for having a Sage equivalent of `RisingFactorial`.\n\nLet's keep this ticket to keep track of the SymPy issue (I have no google account, and don't want to have one, thus it seems I cannot report the problem to the SymPy developers...)\n\nPaul",
    "created_at": "2013-04-11T19:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179096",
    "user": "@zimmermann6"
}
```

I have created a new ticket (#14446) for having a Sage equivalent of `RisingFactorial`.

Let's keep this ticket to keep track of the SymPy issue (I have no google account, and don't want to have one, thus it seems I cannot report the problem to the SymPy developers...)

Paul



---

archive/issue_comments_179097.json:
```json
{
    "body": "This is now [Sympy bug 3745](http://code.google.com/p/sympy/issues/detail?id=3745).",
    "created_at": "2013-04-11T20:22:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179097",
    "user": "@kcrisman"
}
```

This is now [Sympy bug 3745](http://code.google.com/p/sympy/issues/detail?id=3745).



---

archive/issue_comments_179098.json:
```json
{
    "body": "thank you Karl-Dieter!\n\nPaul",
    "created_at": "2013-04-11T20:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179098",
    "user": "@zimmermann6"
}
```

thank you Karl-Dieter!

Paul



---

archive/issue_comments_179099.json:
```json
{
    "body": "Apparently fixed in [this upstream pull](https://github.com/sympy/sympy/pull/2311).",
    "created_at": "2013-07-24T07:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179099",
    "user": "@kcrisman"
}
```

Apparently fixed in [this upstream pull](https://github.com/sympy/sympy/pull/2311).



---

archive/issue_comments_179100.json:
```json
{
    "body": "\"Migrated to http://github.com/sympy/sympy/issues/6844\"",
    "created_at": "2014-04-06T16:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179100",
    "user": "@kcrisman"
}
```

"Migrated to http://github.com/sympy/sympy/issues/6844"



---

archive/issue_comments_179101.json:
```json
{
    "body": "This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.\n\n```\nsage: rsolve(f,u(n),{u(0):0,u(1):1})\n2*2**(-n)*n\n```\n\nJust needs a doctest!",
    "created_at": "2014-06-17T12:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179101",
    "user": "@kcrisman"
}
```

This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.

```
sage: rsolve(f,u(n),{u(0):0,u(1):1})
2*2**(-n)*n
```

Just needs a doctest!



---

archive/issue_comments_179102.json:
```json
{
    "body": "Replying to [comment:10 kcrisman]:\n> This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.\n> {{{\n> sage: rsolve(f,u(n),{u(0):0,u(1):1})\n> 2*2**(-n)*n\n> }}}\n> Just needs a doctest!\nWhy would we want a Sage doctest for functionality that is completely inside Sympy?",
    "created_at": "2014-12-17T10:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179102",
    "user": "@rwst"
}
```

Replying to [comment:10 kcrisman]:
> This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.
> {{{
> sage: rsolve(f,u(n),{u(0):0,u(1):1})
> 2*2**(-n)*n
> }}}
> Just needs a doctest!
Why would we want a Sage doctest for functionality that is completely inside Sympy?



---

archive/issue_comments_179103.json:
```json
{
    "body": "> > This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.\n> > Just needs a doctest!\n> Why would we want a Sage doctest for functionality that is completely inside Sympy?\nShort answer: we do this for other systems (e.g. Maxima, Pari) on occasion.  \n\nLong answer: One of the nice things about Sage is that you can use those in Sage and it 'just works'.  For instance, one might have a computation that can really only be done inside Maxima or R (perhaps because we haven't wrapped functionality x or y), but then the final result is usable in Sage.  It's good to indicate this.  Also, often our doctests are slightly different or tested on different kinds of platforms.  It's not a bad thing to duplicate *some* of this - I agree that it's not reasonable to completely redo doctests, though of course `SAGE_CHECK` can provide some of that functionality.\n\nThat doesn't provide a 100% compelling argument, I agree - maybe 85% compelling, to me.  But it isn't really a big problem - if you prefer not to take the time to do that, which I totally understand (notice I haven't either!) then just leave it for someone who is practicing and learning how to develop  for Sage - marking as 'beginner'.",
    "created_at": "2014-12-17T13:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179103",
    "user": "@kcrisman"
}
```

> > This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.
> > Just needs a doctest!
> Why would we want a Sage doctest for functionality that is completely inside Sympy?
Short answer: we do this for other systems (e.g. Maxima, Pari) on occasion.  

Long answer: One of the nice things about Sage is that you can use those in Sage and it 'just works'.  For instance, one might have a computation that can really only be done inside Maxima or R (perhaps because we haven't wrapped functionality x or y), but then the final result is usable in Sage.  It's good to indicate this.  Also, often our doctests are slightly different or tested on different kinds of platforms.  It's not a bad thing to duplicate *some* of this - I agree that it's not reasonable to completely redo doctests, though of course `SAGE_CHECK` can provide some of that functionality.

That doesn't provide a 100% compelling argument, I agree - maybe 85% compelling, to me.  But it isn't really a big problem - if you prefer not to take the time to do that, which I totally understand (notice I haven't either!) then just leave it for someone who is practicing and learning how to develop  for Sage - marking as 'beginner'.



---

archive/issue_comments_179104.json:
```json
{
    "body": "Changing keywords from \"\" to \"beginner\".",
    "created_at": "2014-12-17T13:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179104",
    "user": "@kcrisman"
}
```

Changing keywords from "" to "beginner".



---

archive/issue_comments_179105.json:
```json
{
    "body": "another reason is that sometimes the developers of a Sage component decide to change a functionality, and this breaks Sage. It is good to be alerted as soon as possible.",
    "created_at": "2014-12-17T15:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179105",
    "user": "@zimmermann6"
}
```

another reason is that sometimes the developers of a Sage component decide to change a functionality, and this breaks Sage. It is good to be alerted as soon as possible.



---

archive/issue_comments_179106.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-12-31T10:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179106",
    "user": "@rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_179107.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-31T10:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179107",
    "user": "@rwst"
}
```

New commits:



---

archive/issue_comments_179108.json:
```json
{
    "body": "This commit is not correctly formatted: it misses a `::`, and the indentation is wrong.\n\nNathann",
    "created_at": "2015-01-15T11:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179108",
    "user": "@nathanncohen"
}
```

This commit is not correctly formatted: it misses a `::`, and the indentation is wrong.

Nathann



---

archive/issue_comments_179109.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-01-15T11:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179109",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_179110.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-01-15T17:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179110",
    "user": "@rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_179111.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-01-15T17:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179111",
    "user": "@rwst"
}
```

New commits:



---

archive/issue_comments_179112.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-16T04:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179112",
    "user": "@nathanncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_179113.json:
```json
{
    "body": "Thanks,\n\nNathann",
    "created_at": "2015-01-16T04:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179113",
    "user": "@nathanncohen"
}
```

Thanks,

Nathann



---

archive/issue_comments_179114.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-24T13:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14233#issuecomment-179114",
    "user": "@vbraun"
}
```

Resolution: fixed
