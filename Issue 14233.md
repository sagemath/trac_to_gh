# Issue 14233: rsolve fails with initial conditions

Issue created by migration from Trac.

Original creator: zimmerma

Original creation time: 2013-04-11 06:44:16

Assignee: burcin

Consider the following:

```
----------------------------------------------------------------------
----------------------------------------------------------------------
sage: from sympy import Function, Symbol
sage: u = Function('u')
sage: n = Symbol('n', integer=True)
sage: from sympy import rsolve
sage: f = u(n+2) - u(n+1) + u(n)/4
sage: rsolve(f,u(n))
2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)
```

Since Sage does not know about `RisingFactorial`, this answer is not very useful...
| Sage Version 5.8, Release Date: 2013-03-15                         |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
Moreover:

```
sage: rsolve(f,u(n),{u(0):0,u(1):1})
sage:
```

The solution is (computed by Maple 15) `1/4*(8*n+8)*(1/2)<sup>n-2*(1/2)</sup>n`.


---

Comment by kcrisman created at 2013-04-11 14:58:11

This is a pure Sympy question.

```

In [1]: import sympy

In [3]: u = sympy.Function('u')

In [5]: n = sympy.Symbol('n',integer=True)

In [6]: f = u(n+2) - u(n+1) + u(n)/4

In [7]: sympy.rsolve(f,u(n))
Out[7]: 2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)

In [8]: sympy.rsolve(f,u(n),{u(0):0,u(1):1})
In [9]:
```

I guess you could report it [upstream](http://code.google.com/p/sympy/issues/list) and we could verify a fix here eventually.

Second, the object you did is a Sympy object, so you would want to translate it to Sage first.

```
sage: sage: rsolve(f,u(n))
2**(-n)*C0*RisingFactorial(C0/C1 + 1, n)/RisingFactorial(C0/C1, n)
sage: _._sage_()
AttributeError: 'RisingFactorial' object has no attribute '_sage_'
```

But separately, it would be nice, true, to have a good translation of RisingFactorial.  I suggest you split this up into two different tickets, if that's okay, as the issues are quite different.


---

Comment by zimmerma created at 2013-04-11 19:50:17

I have created a new ticket (#14446) for having a Sage equivalent of `RisingFactorial`.

Let's keep this ticket to keep track of the SymPy issue (I have no google account, and don't want to have one, thus it seems I cannot report the problem to the SymPy developers...)

Paul


---

Comment by kcrisman created at 2013-04-11 20:22:24

This is now [Sympy bug 3745](http://code.google.com/p/sympy/issues/detail?id=3745).


---

Comment by zimmerma created at 2013-04-11 20:26:32

thank you Karl-Dieter!

Paul


---

Comment by kcrisman created at 2013-07-24 07:56:50

Apparently fixed in [this upstream pull](https://github.com/sympy/sympy/pull/2311).


---

Comment by kcrisman created at 2014-04-06 16:46:44

"Migrated to http://github.com/sympy/sympy/issues/6844"


---

Comment by kcrisman created at 2014-06-17 12:42:03

This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.

```
sage: rsolve(f,u(n),{u(0):0,u(1):1})
2*2**(-n)*n
```

Just needs a doctest!


---

Comment by rws created at 2014-12-17 10:57:13

Replying to [comment:10 kcrisman]:
> This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.
> {{{
> sage: rsolve(f,u(n),{u(0):0,u(1):1})
> 2*2**(-n)*n
> }}}
> Just needs a doctest!
Why would we want a Sage doctest for functionality that is completely inside Sympy?


---

Comment by kcrisman created at 2014-12-17 13:33:49

> > This is now apparently in Sympy-in-Sage, and nicer than the Maple answer.
> > Just needs a doctest!
> Why would we want a Sage doctest for functionality that is completely inside Sympy?
Short answer: we do this for other systems (e.g. Maxima, Pari) on occasion.  

Long answer: One of the nice things about Sage is that you can use those in Sage and it 'just works'.  For instance, one might have a computation that can really only be done inside Maxima or R (perhaps because we haven't wrapped functionality x or y), but then the final result is usable in Sage.  It's good to indicate this.  Also, often our doctests are slightly different or tested on different kinds of platforms.  It's not a bad thing to duplicate _some_ of this - I agree that it's not reasonable to completely redo doctests, though of course `SAGE_CHECK` can provide some of that functionality.

That doesn't provide a 100% compelling argument, I agree - maybe 85% compelling, to me.  But it isn't really a big problem - if you prefer not to take the time to do that, which I totally understand (notice I haven't either!) then just leave it for someone who is practicing and learning how to develop  for Sage - marking as 'beginner'.


---

Comment by kcrisman created at 2014-12-17 13:33:49

Changing keywords from "" to "beginner".


---

Comment by zimmerma created at 2014-12-17 15:38:23

another reason is that sometimes the developers of a Sage component decide to change a functionality, and this breaks Sage. It is good to be alerted as soon as possible.


---

Comment by rws created at 2014-12-31 10:23:57

Changing status from new to needs_review.


---

Comment by rws created at 2014-12-31 10:23:57

New commits:


---

Comment by ncohen created at 2015-01-15 11:03:16

This commit is not correctly formatted: it misses a `::`, and the indentation is wrong.

Nathann


---

Comment by ncohen created at 2015-01-15 11:03:16

Changing status from needs_review to needs_work.


---

Comment by rws created at 2015-01-15 17:09:39

Changing status from needs_work to needs_review.


---

Comment by rws created at 2015-01-15 17:09:39

New commits:


---

Comment by ncohen created at 2015-01-16 04:15:16

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2015-01-16 04:15:16

Thanks,

Nathann


---

Comment by vbraun created at 2015-01-24 13:18:39

Resolution: fixed
