# Issue 25107: Upgrade cddlib to 0.94j (once it's released)

archive/issues_025107.json:
```json
{
    "body": "CC:  fbissey vbraun @timokau\n\nMostly this is about using `cddexec` instead of `cdd_both_reps`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/25344\n\n",
    "created_at": "2018-05-11T15:25:02Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Upgrade cddlib to 0.94j (once it's released)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25107",
    "user": "saraedum"
}
```
CC:  fbissey vbraun @timokau

Mostly this is about using `cddexec` instead of `cdd_both_reps`.

Issue created by migration from https://trac.sagemath.org/ticket/25344





---

archive/issue_comments_353230.json:
```json
{
    "body": "Why wait? If we have the tarball we can do it now, and it will be uploaded to Sage's mirrors.",
    "created_at": "2018-05-14T16:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353230",
    "user": "embray"
}
```

Why wait? If we have the tarball we can do it now, and it will be uploaded to Sage's mirrors.



---

archive/issue_comments_353231.json:
```json
{
    "body": "Because I would still like to get your cygwin fixes into upstream.",
    "created_at": "2018-05-15T10:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353231",
    "user": "saraedum"
}
```

Because I would still like to get your cygwin fixes into upstream.



---

archive/issue_comments_353232.json:
```json
{
    "body": "Ah, ok.",
    "created_at": "2018-05-16T15:26:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353232",
    "user": "embray"
}
```

Ah, ok.



---

archive/issue_comments_353233.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-13T23:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353233",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353234.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-13T23:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353234",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353235.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-06-13T23:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353235",
    "user": "saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_353236.json:
```json
{
    "body": "I am running --long doctests for all of Sage currently; everything in `geometry/` passes.",
    "created_at": "2018-06-13T23:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353236",
    "user": "saraedum"
}
```

I am running --long doctests for all of Sage currently; everything in `geometry/` passes.



---

archive/issue_comments_353237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-14T10:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353237",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353238.json:
```json
{
    "body": "ccing people who previously touched the cddlib integration code.",
    "created_at": "2018-06-14T10:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353238",
    "user": "saraedum"
}
```

ccing people who previously touched the cddlib integration code.



---

archive/issue_comments_353239.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-06-21T10:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353239",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_353240.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-21T14:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353240",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353241.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-06-21T14:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353241",
    "user": "saraedum"
}
```

New commits:



---

archive/issue_comments_353242.json:
```json
{
    "body": "I assume this has the Cygwin fixes in it now?",
    "created_at": "2018-06-22T14:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353242",
    "user": "embray"
}
```

I assume this has the Cygwin fixes in it now?



---

archive/issue_comments_353243.json:
```json
{
    "body": "Yes.",
    "created_at": "2018-07-03T15:55:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353243",
    "user": "saraedum"
}
```

Yes.



---

archive/issue_comments_353244.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-03T15:56:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353244",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_353245.json:
```json
{
    "body": "All tests pass.",
    "created_at": "2018-07-03T17:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353245",
    "user": "saraedum"
}
```

All tests pass.



---

archive/issue_comments_353246.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-07-10T13:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353246",
    "user": "embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_353247.json:
```json
{
    "body": "Is the [GitHub](GitHub) (https://github.com/cddlib/cddlib) repo considered the official upstream (with approval of the original author) now or is that a fork?",
    "created_at": "2018-07-11T20:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353247",
    "user": "@timokau"
}
```

Is the [GitHub](GitHub) (https://github.com/cddlib/cddlib) repo considered the official upstream (with approval of the original author) now or is that a fork?



---

archive/issue_comments_353248.json:
```json
{
    "body": "https://www.inf.ethz.ch/personal/fukudak/cdd_home/index.html still points to 0.94i.",
    "created_at": "2018-07-11T21:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353248",
    "user": "@timokau"
}
```

https://www.inf.ethz.ch/personal/fukudak/cdd_home/index.html still points to 0.94i.



---

archive/issue_comments_353249.json:
```json
{
    "body": "It has the author's approval. However, the author is considering to abandon it if the recent acquisiton of github turns the platform the wrong way.",
    "created_at": "2018-07-11T21:22:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353249",
    "user": "saraedum"
}
```

It has the author's approval. However, the author is considering to abandon it if the recent acquisiton of github turns the platform the wrong way.



---

archive/issue_comments_353250.json:
```json
{
    "body": "In any case I think we would prefer to have a link to an official tarball rather than an attachment - especially for distros (well me in Gentoo in particular).",
    "created_at": "2018-07-11T21:24:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353250",
    "user": "fbissey"
}
```

In any case I think we would prefer to have a link to an official tarball rather than an attachment - especially for distros (well me in Gentoo in particular).



---

archive/issue_comments_353251.json:
```json
{
    "body": "Thanks for your work, that greatly simplifies packaging :) Every patch replaced by something upstream supported is a win.\n\nCould you maybe ask them to make a note on the cddlib homepage? That would help people that stumble there and also make it seem a bit more legit.",
    "created_at": "2018-07-11T21:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353251",
    "user": "@timokau"
}
```

Thanks for your work, that greatly simplifies packaging :) Every patch replaced by something upstream supported is a win.

Could you maybe ask them to make a note on the cddlib homepage? That would help people that stumble there and also make it seem a bit more legit.



---

archive/issue_comments_353252.json:
```json
{
    "body": "Sorry, I wasn't aware of the details of the SPKG upgrade process. Actually, the checksums are for the tarball on github.",
    "created_at": "2018-07-11T21:30:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353252",
    "user": "saraedum"
}
```

Sorry, I wasn't aware of the details of the SPKG upgrade process. Actually, the checksums are for the tarball on github.



---

archive/issue_comments_353253.json:
```json
{
    "body": "The latest cddlib release",
    "created_at": "2018-07-11T21:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353253",
    "user": "saraedum"
}
```

The latest cddlib release



---

archive/issue_comments_353254.json:
```json
{
    "body": "Attachment [cddlib-0.94j.tar.gz](tarball://root/attachments/some-uuid/ticket25344/cddlib-0.94j.tar.gz) by saraedum created at 2018-07-11 21:36:08\n\nReplying to [comment:30 gh-timokau]:\n> Thanks for your work, that greatly simplifies packaging :) Every patch replaced by something upstream supported is a win.\n> \n> Could you maybe ask them to make a note on the cddlib homepage? That would help people that stumble there and also make it seem a bit more legit.\nThis is now https://github.com/cddlib/cddlib/issues/18.",
    "created_at": "2018-07-11T21:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353254",
    "user": "saraedum"
}
```

Attachment [cddlib-0.94j.tar.gz](tarball://root/attachments/some-uuid/ticket25344/cddlib-0.94j.tar.gz) by saraedum created at 2018-07-11 21:36:08

Replying to [comment:30 gh-timokau]:
> Thanks for your work, that greatly simplifies packaging :) Every patch replaced by something upstream supported is a win.
> 
> Could you maybe ask them to make a note on the cddlib homepage? That would help people that stumble there and also make it seem a bit more legit.
This is now https://github.com/cddlib/cddlib/issues/18.



---

archive/issue_comments_353255.json:
```json
{
    "body": "A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.",
    "created_at": "2018-07-11T22:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353255",
    "user": "fbissey"
}
```

A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.



---

archive/issue_comments_353256.json:
```json
{
    "body": "Replying to [comment:33 fbissey]:\n> A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.\n\nThe tarball came out of `make distcheck`. I don't understand the question about the intermediate autotools files.",
    "created_at": "2018-07-12T09:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353256",
    "user": "saraedum"
}
```

Replying to [comment:33 fbissey]:
> A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.

The tarball came out of `make distcheck`. I don't understand the question about the intermediate autotools files.



---

archive/issue_comments_353257.json:
```json
{
    "body": "Replying to [comment:34 saraedum]:\n> Replying to [comment:33 fbissey]:\n> > A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.\n> \n> The tarball came out of `make distcheck`. I don't understand the question about the intermediate autotools files.\n\nGood enough I guess, although I never used that target. The question about intermediate autotools files is related to `spkg-src`, I looked at what it is supposed to do. `spkg-src` is usually to take upstream and then produce a new tarball for distribution in sage for whatever reasons. That particular `spkg-src` mostly does cleaning. But if we use the tarball produced by `make distcheck` we don't need it at all and can remove it.",
    "created_at": "2018-07-12T09:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353257",
    "user": "fbissey"
}
```

Replying to [comment:34 saraedum]:
> Replying to [comment:33 fbissey]:
> > A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.
> 
> The tarball came out of `make distcheck`. I don't understand the question about the intermediate autotools files.

Good enough I guess, although I never used that target. The question about intermediate autotools files is related to `spkg-src`, I looked at what it is supposed to do. `spkg-src` is usually to take upstream and then produce a new tarball for distribution in sage for whatever reasons. That particular `spkg-src` mostly does cleaning. But if we use the tarball produced by `make distcheck` we don't need it at all and can remove it.



---

archive/issue_comments_353258.json:
```json
{
    "body": "update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353258",
    "user": "vdelecroix"
}
```

update milestone 8.3 -> 8.4



---

archive/issue_comments_353259.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-08-04T21:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353259",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_353260.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2018-08-04T21:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353260",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_353261.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-05T03:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353261",
    "user": "saraedum"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_353262.json:
```json
{
    "body": "trivial merge",
    "created_at": "2018-08-05T03:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353262",
    "user": "saraedum"
}
```

trivial merge



---

archive/issue_comments_353263.json:
```json
{
    "body": "Don't modify positively reviewed tickets unless you have a reason. There was no merge conflict, so no need to do anything. I'll ignore the superfluous merge.",
    "created_at": "2018-08-05T08:39:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353263",
    "user": "vbraun"
}
```

Don't modify positively reviewed tickets unless you have a reason. There was no merge conflict, so no need to do anything. I'll ignore the superfluous merge.



---

archive/issue_comments_353264.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-08-05T08:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353264",
    "user": "vbraun"
}
```

New commits:



---

archive/issue_comments_353265.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-05T08:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353265",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_353266.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-08-05T08:42:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353266",
    "user": "vbraun"
}
```

New commits:



---

archive/issue_comments_353267.json:
```json
{
    "body": "The trac plugin automatically updates the commit field to the branch head, even though this is not the version that was merged (=c4b0f10c614c7bfa5efaa8ab3908ccb687e992e4).",
    "created_at": "2018-08-05T08:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353267",
    "user": "vbraun"
}
```

The trac plugin automatically updates the commit field to the branch head, even though this is not the version that was merged (=c4b0f10c614c7bfa5efaa8ab3908ccb687e992e4).



---

archive/issue_comments_353268.json:
```json
{
    "body": "I needed a clean patch against 8.3 for Debian and Conda distribution so I decided to push the merge so that I can say in the packaging scripts that this is actually the patch exactly as it is going into upstream.\n\nI am sorry if this caused some trouble for you. I didn't see the harm of merging in develop. What is the problem other than some noise here on the ticket?",
    "created_at": "2018-08-05T12:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353268",
    "user": "saraedum"
}
```

I needed a clean patch against 8.3 for Debian and Conda distribution so I decided to push the merge so that I can say in the packaging scripts that this is actually the patch exactly as it is going into upstream.

I am sorry if this caused some trouble for you. I didn't see the harm of merging in develop. What is the problem other than some noise here on the ticket?



---

archive/issue_comments_353269.json:
```json
{
    "body": "The problem is that I find that the branch has changed after running the buildbot, when I'm about to close the ticket....",
    "created_at": "2018-08-05T17:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353269",
    "user": "vbraun"
}
```

The problem is that I find that the branch has changed after running the buildbot, when I'm about to close the ticket....



---

archive/issue_comments_353270.json:
```json
{
    "body": "I see. Sorry for that then.",
    "created_at": "2018-08-05T18:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25107",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25107#issuecomment-353270",
    "user": "saraedum"
}
```

I see. Sorry for that then.
