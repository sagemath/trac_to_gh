# Issue 25107: Upgrade cddlib to 0.94j (once it's released)

Issue created by migration from https://trac.sagemath.org/ticket/25344

Original creator: saraedum

Original creation time: 2018-05-11 15:25:02

CC:  fbissey vbraun @timokau

Mostly this is about using `cddexec` instead of `cdd_both_reps`.


---

Comment by embray created at 2018-05-14 16:20:36

Why wait? If we have the tarball we can do it now, and it will be uploaded to Sage's mirrors.


---

Comment by saraedum created at 2018-05-15 10:22:03

Because I would still like to get your cygwin fixes into upstream.


---

Comment by embray created at 2018-05-16 15:26:52

Ah, ok.


---

Comment by git created at 2018-06-13 23:39:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-06-13 23:44:12

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by saraedum created at 2018-06-13 23:44:34

Changing status from new to needs_review.


---

Comment by saraedum created at 2018-06-13 23:44:34

I am running --long doctests for all of Sage currently; everything in `geometry/` passes.


---

Comment by git created at 2018-06-14 10:01:26

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-06-14 10:08:50

ccing people who previously touched the cddlib integration code.


---

Comment by git created at 2018-06-21 10:14:19

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-06-21 14:30:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-06-21 14:30:08

New commits:


---

Comment by embray created at 2018-06-22 14:24:33

I assume this has the Cygwin fixes in it now?


---

Comment by saraedum created at 2018-07-03 15:55:28

Yes.


---

Comment by git created at 2018-07-03 15:56:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2018-07-03 17:31:38

All tests pass.


---

Comment by embray created at 2018-07-10 13:53:03

Changing status from needs_review to positive_review.


---

Comment by @timokau created at 2018-07-11 20:59:08

Is the [GitHub](GitHub) (https://github.com/cddlib/cddlib) repo considered the official upstream (with approval of the original author) now or is that a fork?


---

Comment by @timokau created at 2018-07-11 21:03:57

https://www.inf.ethz.ch/personal/fukudak/cdd_home/index.html still points to 0.94i.


---

Comment by saraedum created at 2018-07-11 21:22:47

It has the author's approval. However, the author is considering to abandon it if the recent acquisiton of github turns the platform the wrong way.


---

Comment by fbissey created at 2018-07-11 21:24:59

In any case I think we would prefer to have a link to an official tarball rather than an attachment - especially for distros (well me in Gentoo in particular).


---

Comment by @timokau created at 2018-07-11 21:29:09

Thanks for your work, that greatly simplifies packaging :) Every patch replaced by something upstream supported is a win.

Could you maybe ask them to make a note on the cddlib homepage? That would help people that stumble there and also make it seem a bit more legit.


---

Comment by saraedum created at 2018-07-11 21:30:17

Sorry, I wasn't aware of the details of the SPKG upgrade process. Actually, the checksums are for the tarball on github.


---

Comment by saraedum created at 2018-07-11 21:31:12

The latest cddlib release


---

Attachment

Replying to [comment:30 gh-timokau]:
> Thanks for your work, that greatly simplifies packaging :) Every patch replaced by something upstream supported is a win.
> 
> Could you maybe ask them to make a note on the cddlib homepage? That would help people that stumble there and also make it seem a bit more legit.
This is now https://github.com/cddlib/cddlib/issues/18.


---

Comment by fbissey created at 2018-07-11 22:31:51

A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.


---

Comment by saraedum created at 2018-07-12 09:07:58

Replying to [comment:33 fbissey]:
> A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.

The tarball came out of `make distcheck`. I don't understand the question about the intermediate autotools files.


---

Comment by fbissey created at 2018-07-12 09:14:08

Replying to [comment:34 saraedum]:
> Replying to [comment:33 fbissey]:
> > A link is enough. If we are going to use the tarball  https://github.com/cddlib/cddlib/releases/download/0.94j/cddlib-0.94j.tar.gz then spkg-src is not needed. As it been prepared with `make sdist` (and then why not `sdist-bzip2` or whatever the option is)? If so there shouldn't be any intermediate autotools files to clean.
> 
> The tarball came out of `make distcheck`. I don't understand the question about the intermediate autotools files.

Good enough I guess, although I never used that target. The question about intermediate autotools files is related to `spkg-src`, I looked at what it is supposed to do. `spkg-src` is usually to take upstream and then produce a new tarball for distribution in sage for whatever reasons. That particular `spkg-src` mostly does cleaning. But if we use the tarball produced by `make distcheck` we don't need it at all and can remove it.


---

Comment by vdelecroix created at 2018-08-03 19:20:18

update milestone 8.3 -> 8.4


---

Comment by git created at 2018-08-04 21:37:17

Changing status from positive_review to needs_review.


---

Comment by git created at 2018-08-04 21:37:17

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by saraedum created at 2018-08-05 03:41:49

Changing status from needs_review to positive_review.


---

Comment by saraedum created at 2018-08-05 03:41:49

trivial merge


---

Comment by vbraun created at 2018-08-05 08:39:44

Don't modify positively reviewed tickets unless you have a reason. There was no merge conflict, so no need to do anything. I'll ignore the superfluous merge.


---

Comment by vbraun created at 2018-08-05 08:40:59

New commits:


---

Comment by vbraun created at 2018-08-05 08:41:58

Resolution: fixed


---

Comment by vbraun created at 2018-08-05 08:42:18

New commits:


---

Comment by vbraun created at 2018-08-05 08:43:48

The trac plugin automatically updates the commit field to the branch head, even though this is not the version that was merged (=c4b0f10c614c7bfa5efaa8ab3908ccb687e992e4).


---

Comment by saraedum created at 2018-08-05 12:02:17

I needed a clean patch against 8.3 for Debian and Conda distribution so I decided to push the merge so that I can say in the packaging scripts that this is actually the patch exactly as it is going into upstream.

I am sorry if this caused some trouble for you. I didn't see the harm of merging in develop. What is the problem other than some noise here on the ticket?


---

Comment by vbraun created at 2018-08-05 17:45:38

The problem is that I find that the branch has changed after running the buildbot, when I'm about to close the ticket....


---

Comment by saraedum created at 2018-08-05 18:00:25

I see. Sorry for that then.
