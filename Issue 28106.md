# Issue 28106: Three.js: Support basic mesh plots

archive/issues_028106.json:
```json
{
    "body": "CC:  @egourgoulhon\n\nKeywords: threejs\n\nThis enhancement allows display of a black mesh grid on any surface by supplying the keyword `mesh=True`. To avoid z-fighting with the surface, the mesh is drawn twice, slightly above and slightly below the surface.\n\nIf the mesh alone is desired, it would be simple to hide the surface. The currently supported Boolean keyword does not allow this behavior, so some input would be needed as to best additional keyword practices. We could also allow setting the color and opacity of the grid separate from the material, but again input on appropriate keywords would be needed.\n\nThis ticket includes standardization of `Line` geometries in the Three.js template as well as additional cleanup and consistency. None of that should change existing behavior.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28343\n\n",
    "created_at": "2019-08-11T22:42:30Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Three.js: Support basic mesh plots",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28106",
    "user": "https://github.com/paulmasson"
}
```
CC:  @egourgoulhon

Keywords: threejs

This enhancement allows display of a black mesh grid on any surface by supplying the keyword `mesh=True`. To avoid z-fighting with the surface, the mesh is drawn twice, slightly above and slightly below the surface.

If the mesh alone is desired, it would be simple to hide the surface. The currently supported Boolean keyword does not allow this behavior, so some input would be needed as to best additional keyword practices. We could also allow setting the color and opacity of the grid separate from the material, but again input on appropriate keywords would be needed.

This ticket includes standardization of `Line` geometries in the Three.js template as well as additional cleanup and consistency. None of that should change existing behavior.

Issue created by migration from https://trac.sagemath.org/ticket/28343





---

archive/issue_comments_396647.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-08-11T22:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396647",
    "user": "https://github.com/paulmasson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_396648.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-08-11T22:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396648",
    "user": "https://github.com/paulmasson"
}
```

New commits:



---

archive/issue_comments_396649.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-08-14T20:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396649",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_396650.json:
```json
{
    "body": "Thanks for this improvement!\nI've tested it on the examples with `mesh=True` of the *3D Graphics* section of the reference manual. It looks nice!\n\nThere is one failing doctest:\n\n```\nsage -t --long --warn-long 78.5 src/sage/plot/plot3d/index_face_set.pyx\n**********************************************************************\nFile \"src/sage/plot/plot3d/index_face_set.pyx\", line 1198, in sage.plot.plot3d.index_face_set.IndexFaceSet.json_repr\nFailed example:\n    S.json_repr(S.default_render_params())\nExpected:\n    ['{\"vertices\":[{\"x\":2,\"y\":0,\"z\":0},..., \"face_colors\":[\"#ff0000\",\"#ff9900\",\"#cbff00\",\"#33ff00\"], \"opacity\":1.0}']\nGot:\n    ['{\"vertices\":[{\"x\":2,\"y\":0,\"z\":0},{\"x\":0,\"y\":2,\"z\":0},{\"x\":0,\"y\":0,\"z\":2},{\"x\":0,\"y\":1,\"z\":1},{\"x\":1,\"y\":0,\"z\":1},{\"x\":1,\"y\":1,\"z\":0}], \"faces\":[[0,4,5],[3,4,5],[2,3,4],[1,3,5]], \"faceColors\":[\"#ff0000\",\"#ff9900\",\"#cbff00\",\"#33ff00\"], \"opacity\":1.0}']\n**********************************************************************\n1 item had failures:\n   1 of  11 in sage.plot.plot3d.index_face_set.IndexFaceSet.json_repr\n    [152 tests, 1 failure, 10.12 s]\n```\n",
    "created_at": "2019-08-14T20:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396650",
    "user": "https://github.com/egourgoulhon"
}
```

Thanks for this improvement!
I've tested it on the examples with `mesh=True` of the *3D Graphics* section of the reference manual. It looks nice!

There is one failing doctest:

```
sage -t --long --warn-long 78.5 src/sage/plot/plot3d/index_face_set.pyx
**********************************************************************
File "src/sage/plot/plot3d/index_face_set.pyx", line 1198, in sage.plot.plot3d.index_face_set.IndexFaceSet.json_repr
Failed example:
    S.json_repr(S.default_render_params())
Expected:
    ['{"vertices":[{"x":2,"y":0,"z":0},..., "face_colors":["#ff0000","#ff9900","#cbff00","#33ff00"], "opacity":1.0}']
Got:
    ['{"vertices":[{"x":2,"y":0,"z":0},{"x":0,"y":2,"z":0},{"x":0,"y":0,"z":2},{"x":0,"y":1,"z":1},{"x":1,"y":0,"z":1},{"x":1,"y":1,"z":0}], "faces":[[0,4,5],[3,4,5],[2,3,4],[1,3,5]], "faceColors":["#ff0000","#ff9900","#cbff00","#33ff00"], "opacity":1.0}']
**********************************************************************
1 item had failures:
   1 of  11 in sage.plot.plot3d.index_face_set.IndexFaceSet.json_repr
    [152 tests, 1 failure, 10.12 s]
```




---

archive/issue_comments_396651.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-18T21:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_396652.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-08-18T21:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396652",
    "user": "https://github.com/paulmasson"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_396653.json:
```json
{
    "body": "Doctest fixed. Let's try to get this into 8.9.",
    "created_at": "2019-08-18T21:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396653",
    "user": "https://github.com/paulmasson"
}
```

Doctest fixed. Let's try to get this into 8.9.



---

archive/issue_comments_396654.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-19T07:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396654",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_396655.json:
```json
{
    "body": "Thanks!",
    "created_at": "2019-08-19T07:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396655",
    "user": "https://github.com/egourgoulhon"
}
```

Thanks!



---

archive/issue_events_070783.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-20T22:28:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28106#event-70783"
}
```



---

archive/issue_comments_396656.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-20T22:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28106",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28106#issuecomment-396656",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
