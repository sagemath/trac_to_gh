# Issue 28106: Three.js: Support basic mesh plots

Issue created by migration from https://trac.sagemath.org/ticket/28343

Original creator: paulmasson

Original creation time: 2019-08-11 22:42:30

CC:  egourgoulhon

Keywords: threejs

This enhancement allows display of a black mesh grid on any surface by supplying the keyword `mesh=True`. To avoid z-fighting with the surface, the mesh is drawn twice, slightly above and slightly below the surface.

If the mesh alone is desired, it would be simple to hide the surface. The currently supported Boolean keyword does not allow this behavior, so some input would be needed as to best additional keyword practices. We could also allow setting the color and opacity of the grid separate from the material, but again input on appropriate keywords would be needed.

This ticket includes standardization of `Line` geometries in the Three.js template as well as additional cleanup and consistency. None of that should change existing behavior.


---

Comment by paulmasson created at 2019-08-11 22:44:49

Changing status from new to needs_review.


---

Comment by paulmasson created at 2019-08-11 22:44:49

New commits:


---

Comment by egourgoulhon created at 2019-08-14 20:19:50

Changing status from needs_review to needs_work.


---

Comment by egourgoulhon created at 2019-08-14 20:19:50

Thanks for this improvement!
I've tested it on the examples with `mesh=True` of the _3D Graphics_ section of the reference manual. It looks nice!

There is one failing doctest:

```
sage -t --long --warn-long 78.5 src/sage/plot/plot3d/index_face_set.pyx
**********************************************************************
File "src/sage/plot/plot3d/index_face_set.pyx", line 1198, in sage.plot.plot3d.index_face_set.IndexFaceSet.json_repr
Failed example:
    S.json_repr(S.default_render_params())
Expected:
    ['{"vertices":[{"x":2,"y":0,"z":0},..., "face_colors":["#ff0000","#ff9900","#cbff00","#33ff00"], "opacity":1.0}']
Got:
    ['{"vertices":[{"x":2,"y":0,"z":0},{"x":0,"y":2,"z":0},{"x":0,"y":0,"z":2},{"x":0,"y":1,"z":1},{"x":1,"y":0,"z":1},{"x":1,"y":1,"z":0}], "faces":[[0,4,5],[3,4,5],[2,3,4],[1,3,5]], "faceColors":["#ff0000","#ff9900","#cbff00","#33ff00"], "opacity":1.0}']
**********************************************************************
1 item had failures:
   1 of  11 in sage.plot.plot3d.index_face_set.IndexFaceSet.json_repr
    [152 tests, 1 failure, 10.12 s]
```



---

Comment by git created at 2019-08-18 21:02:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by paulmasson created at 2019-08-18 21:04:34

Changing status from needs_work to needs_review.


---

Comment by paulmasson created at 2019-08-18 21:04:34

Doctest fixed. Let's try to get this into 8.9.


---

Comment by egourgoulhon created at 2019-08-19 07:03:57

Changing status from needs_review to positive_review.


---

Comment by egourgoulhon created at 2019-08-19 07:03:57

Thanks!


---

Comment by vbraun created at 2019-08-20 22:28:38

Resolution: fixed
