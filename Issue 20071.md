# Issue 20071: Generic zeta function method for schemes

Issue created by migration from https://trac.sagemath.org/ticket/20308

Original creator: kedlaya

Original creation time: 2016-03-27 20:18:32

Keywords: zeta function, scheme, finite field

Currently there is a generic method zeta_series for schemes over a finite field, but not zeta_function. It would be useful to have the latter so that zeta_series could invoke it when it is implemented (which hopefully will happen for hyperelliptic curves soon).


---

Comment by chapoton created at 2017-07-17 07:52:36

Here is a tentative
----
New commits:


---

Comment by roed created at 2017-07-17 17:41:30

Changing keywords from "zeta function, scheme, finite field" to "zeta function, scheme, finite field, sd87".


---

Comment by bhutz created at 2017-07-20 21:48:10

Changing status from new to needs_info.


---

Comment by bhutz created at 2017-07-20 21:48:10

It's not clear to me what the goal here is. The initial code seems to be using the zeta_function call to try and compute the zeta series as opposed to trying to compute zeta functions for generic schemes. So, are we improving zeta series or trying to make a generic .zeta_function()?? The later seems daunting...

I've improved the zeta_series code to allow for non-prime base fields.


---

Comment by bhutz created at 2017-07-20 21:48:32

New commits:


---

Comment by kedlaya created at 2017-07-20 21:53:07

Sorry, am on vacation this week and hence unable to participate in sd87, but I can still clarify what I had in mind here!

What I had in mind is that the generic .zeta_function() returns a NotImplementedError. Then the generic .zeta_series() method would check for the existence of a .zeta_function() method, and if present would call it and convert the rational function into a power series instead of falling back to manually counting points.


---

Comment by kedlaya created at 2017-07-20 21:55:21

Replying to [comment:3 bhutz]:
> It's not clear to me what the goal here is. The initial code seems to be using the zeta_function call to try and compute the zeta series as opposed to trying to compute zeta functions for generic schemes. So, are we improving zeta series or trying to make a generic .zeta_function()?? The later seems daunting...
> 
> I've improved the zeta_series code to allow for non-prime base fields.

That is an important improvement, but it is actually separate from the issue I had in mind. Maybe we should create a new ticket and put this patch there instead?


---

Comment by git created at 2017-07-20 22:11:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bhutz created at 2017-07-20 22:14:05

Changing status from needs_info to needs_review.


---

Comment by bhutz created at 2017-07-20 22:14:05

ok, that is certainly reasonable to do. I've added the generic function and put my doc test is the right place.

My zeta_series improvement is such a minor change and related to the original functionality, I'm fine with leaving it as part of this ticket. Perhaps we should make a slight change to the ticket description to include improving zeta_series in the generic case?


---

Comment by bhutz created at 2017-07-20 22:14:05

Changing priority from major to minor.


---

Comment by git created at 2017-07-20 22:14:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by kedlaya created at 2017-07-20 22:20:55

Replying to [comment:8 bhutz]:
> ok, that is certainly reasonable to do. I've added the generic function and put my doc test is the right place.
> 
> My zeta_series improvement is such a minor change and related to the original functionality, I'm fine with leaving it as part of this ticket. Perhaps we should make a slight change to the ticket description to include improving zeta_series in the generic case?

Changed the description accordingly. Unfortunately I won't be able to review this before the end of the week, but all the better if someone else can do it...


---

Comment by davidayotte created at 2017-07-21 18:01:52

Everything seems right. I ran the doctest and all test passed. For some reason I had difficulty generating the reference manual, but the problem doesn't seems to come from this ticket. I got this error :


```
Error building the documentation.
Traceback (most recent call last):
  File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-david.ayotte/SageMath/local/lib/python2.7/runpy.py", line 174, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-david.ayotte/SageMath/local/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-david.ayotte/SageMath/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-david.ayotte/SageMath/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1642, in main
    builder()
  File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-david.ayotte/SageMath/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 720, in _wrapper
    getattr(DocBuilder, build_type)(self, *args, **kwds)
  File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-david.ayotte/SageMath/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 104, in f
    runsphinx()
  File "/projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-david.ayotte/SageMath/local/lib/python2.7/site-packages/sage_setup/docbuild/sphinxbuild.py", line 215, in runsphinx
    raise exception
OSError: [schemes  ] /projects/da1818ed-996d-4de6-acc6-361415b7725d/Src/sage-david.ayotte/SageMath/local/lib/python2.7/site-packages/sage/schemes/affine/affine_space.py:docstring
of sage.schemes.affine.affine_space.AffineSpace_field.points_of_bounded_height:4: WARNING: citation not found: Doyle-Krumm
```



---

Comment by git created at 2017-07-21 18:39:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bhutz created at 2017-07-21 18:40:48


```
make doc-clean
make doc
```


is able to build all docs.


---

Comment by davidayotte created at 2017-07-21 18:42:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-07-30 14:17:51

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-07-30 14:17:51

Reviewer name...


---

Comment by bhutz created at 2017-07-31 13:52:49

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2017-08-01 22:24:59

Resolution: fixed
