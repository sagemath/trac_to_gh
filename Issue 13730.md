# Issue 13730: add hg-git extension to mercurial

Issue created by migration from https://trac.sagemath.org/ticket/13934

Original creator: tkluck

Original creation time: 2013-01-09 13:52:21

Assignee: tbd

Moving to git in the near future, it may be useful to have hg-git packaged for Sage. This mercurial extension allows a local mercurial repository to push and pull to a (local or remote) git repository.

It depends on the python package dulwich. Since the latter got a huge performance improvement in its master branch, I decided to package that one instead of the latest stable version.

I don't know how to specify the fact that the latter depends on the former. The way to do that probably also depends on whether we make these standard or optional packages.

We need to enable the extension by putting

```
[extensions]
hggit =
```

in the files `.hg/hgrc`.

For Ubuntu / Debian users: if you have already installed the package `mercurial-git`, you will probably have the line

```
[extensions]
hgext.git =
```

in your `~/.hgrc`. Unfortunately, the Debian package is incompatible with the upstream install, and we'll have to live with the warning 

```
*** failed to import extension hgext.git: No module named git
```

when using `sage -hg`. See https://github.com/schacon/hg-git/issues/204



---

Attachment


---

Comment by tkluck created at 2013-01-09 14:21:39

Changing status from new to needs_review.


---

Attachment


---

Comment by kini created at 2013-02-01 06:45:59

>It depends on the python package dulwich. Since the latter got a huge performance improvement in its master branch, I decided to package that one instead of the latest stable version. 

I'm glad to hear that. hg-git was incredibly slow the last time I checked. Also, the repos dulwich created from the Sage library were incredibly wasteful (literally 20 times their optimal size). Hopefully this is fixed as well.

To make one spkg depend on another you need to edit `$SAGE_ROOT/spkg/standard/deps` (which is actually a makefile). These will not become standard SPKGs, at least not immediately, since new SPKGs are supposed to start out as optional and then be changed to standard after a formal vote on sage-devel, or something.

Anyway, I am not convinced that these are useful SPKGs since our plan for #13015 does not involve ever having Mercurial and Git repos in Sage simultaneously, so users should have no need for this...


---

Comment by vbraun created at 2013-11-23 15:34:59

Changing status from needs_review to needs_info.


---

Comment by vbraun created at 2013-11-23 15:34:59

Should these be experimental spkgs?


---

Comment by chapoton created at 2014-03-14 19:35:44

Changing status from needs_info to needs_review.


---

Comment by chapoton created at 2014-03-14 19:35:44

We have switched to git, so maybe this can be closed ?


---

Comment by pbruin created at 2014-04-07 00:24:13

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-07 17:32:55

Resolution: wontfix
