# Issue 25787: Fix test in quantum_group_gap.py when gap_packages but not dot2tex installed

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2018-08-08 02:58:39

With `gap_packages` installed, but not `dot2tex`, we get:

```
**********************************************************************
File "src/sage/algebras/quantum_groups/quantum_group_gap.py", line 1550, in sage.algebras.quantum_groups.quantum_group_gap.QuantumGroupModule._latex_
Failed example:
    latex(S)  # optional - gap_packages
Expected:
    \begin{tikzpicture}...
    %%
    ...
    %
    \end{tikzpicture}
Got:
    <BLANKLINE>
    Warning: `tkz-graph.sty` is not part of this computer's TeX installation.
    This package is required to render graphs in LaTeX.
    Visit 'http://altermundus.com/pages/tkz/'.
    <BLANKLINE>
    <BLANKLINE>
    Warning: `tkz-berge.sty` is not part of this computer's TeX installation.
    This package is required to render graphs in LaTeX.
    Visit 'http://altermundus.com/pages/tkz/'.
    <BLANKLINE>
    \begin{tikzpicture}
    \definecolor{cv0}{rgb}{0.0,0.0,0.0}
    \definecolor{cfv0}{rgb}{1.0,1.0,1.0}
    \definecolor{clv0}{rgb}{0.0,0.0,0.0}
    \definecolor{cv1}{rgb}{0.0,0.0,0.0}
    \definecolor{cfv1}{rgb}{1.0,1.0,1.0}
    \definecolor{clv1}{rgb}{0.0,0.0,0.0}
    \definecolor{cv2}{rgb}{0.0,0.0,0.0}
    \definecolor{cfv2}{rgb}{1.0,1.0,1.0}
    \definecolor{clv2}{rgb}{0.0,0.0,0.0}
    \definecolor{cv3}{rgb}{0.0,0.0,0.0}
    \definecolor{cfv3}{rgb}{1.0,1.0,1.0}
    \definecolor{clv3}{rgb}{0.0,0.0,0.0}
    \definecolor{cv4}{rgb}{0.0,0.0,0.0}
    \definecolor{cfv4}{rgb}{1.0,1.0,1.0}
    \definecolor{clv4}{rgb}{0.0,0.0,0.0}
    \definecolor{cv5}{rgb}{0.0,0.0,0.0}
    \definecolor{cfv5}{rgb}{1.0,1.0,1.0}
    \definecolor{clv5}{rgb}{0.0,0.0,0.0}
    \definecolor{cv0v1}{rgb}{0.0,0.0,0.0}
    \definecolor{cv1v2}{rgb}{0.0,0.0,0.0}
    \definecolor{cv1v3}{rgb}{0.0,0.0,0.0}
    \definecolor{cv2v4}{rgb}{0.0,0.0,0.0}
    \definecolor{cv3v4}{rgb}{0.0,0.0,0.0}
    \definecolor{cv4v5}{rgb}{0.0,0.0,0.0}
    %
    \Vertex[style={minimum size=1.0cm,draw=cv0,fill=cfv0,text=clv0,shape=circle},LabelOut=false,L=\hbox{$\langle 1 {(1 v_0 \otimes 1 v_0)} \rangle$},x=2.6619cm,y=0.0cm]{v0}
    \Vertex[style={minimum size=1.0cm,draw=cv1,fill=cfv1,text=clv1,shape=circle},LabelOut=false,L=\hbox{$\langle 1 {(1 v_0 \otimes F[a1] v_0)} + q^{-1} {(F[a1] v_0 \otimes 1 v_0)} \rangle$},x=2.6597cm,y=1.4477cm]{v1}
    \Vertex[style={minimum size=1.0cm,draw=cv2,fill=cfv2,text=clv2,shape=circle},LabelOut=false,L=\hbox{$\langle 1 {(F[a1] v_0 \otimes F[a1] v_0)} \rangle$},x=0.0cm,y=2.5323cm]{v2}
    \Vertex[style={minimum size=1.0cm,draw=cv3,fill=cfv3,text=clv3,shape=circle},LabelOut=false,L=\hbox{$\langle 1 {(1 v_0 \otimes F[a1+a2] v_0)} + q^{-1} {(F[a1+a2] v_0 \otimes 1 v_0)} \rangle$},x=5.0cm,y=2.5969cm]{v3}
    \Vertex[style={minimum size=1.0cm,draw=cv4,fill=cfv4,text=clv4,shape=circle},LabelOut=false,L=\hbox{$\langle 1 {(F[a1] v_0 \otimes F[a1+a2] v_0)} + q^{-1} {(F[a1+a2] v_0 \otimes F[a1] v_0)} \rangle$},x=2.4317cm,y=3.6569cm]{v4}
    \Vertex[style={minimum size=1.0cm,draw=cv5,fill=cfv5,text=clv5,shape=circle},LabelOut=false,L=\hbox{$\langle 1 {(F[a1+a2] v_0 \otimes F[a1+a2] v_0)} \rangle$},x=2.5097cm,y=5.0cm]{v5}
    %
    \Edge[lw=0.1cm,style={post, bend right,color=cv0v1,},](v0)(v1)
    \Edge[lw=0.1cm,style={post, bend right,color=cv1v2,},](v1)(v2)
    \Edge[lw=0.1cm,style={post, bend right,color=cv1v3,},](v1)(v3)
    \Edge[lw=0.1cm,style={post, bend right,color=cv2v4,},](v2)(v4)
    \Edge[lw=0.1cm,style={post, bend right,color=cv3v4,},](v3)(v4)
    \Edge[lw=0.1cm,style={post, bend right,color=cv4v5,},](v4)(v5)
    %
    \end{tikzpicture}
```

This goes away with `dot2tex` (due to different output). (It is not run without `gap_packages)`. Easiest way to fix this is just to mark the test as `# random`.


---

Comment by tscrim created at 2018-08-08 03:02:31

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-08-08 03:02:31

Tests now pass on a machine with and without `dot2tex`.
----
New commits:


---

Comment by jdemeyer created at 2018-08-08 08:00:48

Changing status from needs_review to needs_info.


---

Comment by jdemeyer created at 2018-08-08 08:00:48

I am a bit confused here. The warning messages seem to be about tikz packages, are those related to dot2tex?

And if it's really dot2tex that matters, you should use `# optional - gap_packages dot2tex`


---

Comment by tscrim created at 2018-08-08 09:05:20

The softest has different output when run with dot2tex and without (unfortunately in an incompatible way with using `...`). However, it should still work without dot2tex.


---

Comment by jdemeyer created at 2018-08-08 09:09:14

OK, could you just make that explicit and write

```
# random (depends on dot2tex)
```

or something like that.


---

Comment by git created at 2018-08-08 09:45:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2018-08-08 09:45:43

Changing status from needs_info to needs_review.


---

Comment by tscrim created at 2018-08-08 09:45:43

Done.


---

Comment by tscrim created at 2018-08-10 09:53:32

ping?


---

Comment by chapoton created at 2018-08-10 11:34:16

ok


---

Comment by chapoton created at 2018-08-10 11:34:16

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-08-10 11:41:18

Thank you.

Jeroen contributed too I believe. `<sup>_</sup>`


---

Comment by vbraun created at 2018-08-17 21:14:26

Resolution: fixed
