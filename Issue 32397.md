# Issue 32397: sage.misc.latex, sage.repl.display.fancy_repr: Make imports more local

Issue created by migration from https://trac.sagemath.org/ticket/32634

Original creator: mkoeppe

Original creation time: 2021-10-05 16:43:52

CC:  @mwageringel klee

(cherry-picked from #32432)


---

Comment by mkoeppe created at 2021-10-05 16:46:21

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-10-05 16:46:21

New commits:


---

Comment by klee created at 2021-10-06 00:47:48

What is the rationale of moving module-level import of `have_program` to function level?


---

Comment by mkoeppe created at 2021-10-06 01:54:07

Most modules that import from `sage.misc.latex` only import the `latex` function, which does not actually need to run any program; so removing this module-level import removes the indirect dependency on `sage.misc.ostools` (and hence on CPython- and Unix-specific code).


---

Comment by klee created at 2021-10-06 04:05:20

Changing status from needs_review to positive_review.


---

Comment by klee created at 2021-10-06 04:05:20

Replying to [comment:5 mkoeppe]:
> Most modules that import from `sage.misc.latex` only import the `latex` function, which does not actually need to run any program; so removing this module-level import removes the indirect dependency on `sage.misc.ostools` (and hence on CPython- and Unix-specific code). 

If we need to care of these dependency issues because of the modularization effort, it might be useful to have a patchbot plugin to watch out increase of dependency among sage modules.


---

Comment by mkoeppe created at 2021-10-06 04:15:25

Thanks for the review.

Yes, testing infrastructure for this is in the works - see #32432


---

Comment by vbraun created at 2021-10-19 20:32:01

Resolution: fixed
