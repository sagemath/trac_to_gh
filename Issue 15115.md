# Issue 15115: Declare various sig_ macros as nogil

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2013-11-04 13:19:41

CC:  robertwb ohanar pbruin

One consequence is to allow Cython's OpenMP facilities, see #12690.


---

Comment by jdemeyer created at 2013-11-04 21:16:53

Changing status from new to needs_review.


---

Attachment


---

Comment by pbruin created at 2013-12-14 13:38:02

Looks good and all tests pass.


---

Comment by pbruin created at 2013-12-14 13:38:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-12-18 12:20:28

Conflicts with the new developer manual, please resolve...


---

Comment by jdemeyer created at 2013-12-18 12:37:03

What was the point of introducing changes like

```diff
-When writing Cython code for Sage, special care must be taken to ensure
-the code can be interrupted with ``CTRL-C``.
-Since Cython optimizes for speed,
-Cython normally does not check for interrupts.
+When writing Cython code for Sage, special care must be taken to
+ensure the code can be interrupted with ``CTRL-C``.  Since Cython
+optimizes for speed, Cython normally does not check for interrupts.
```


Seriously, that's just asking for merge conflicts...


---

Comment by jdemeyer created at 2013-12-18 12:39:45

This is even worse:

```diff
-A common mistake is to put ``sig_off()`` towards the end of a
+A common mqistake is to put ``sig_off()`` towards the end of a
```

(from 67a76032fda3ee140c3bc52422020ef722cbee52)


---

Comment by jdemeyer created at 2013-12-18 12:43:17

Wow, this bad: commit 67a76032fda3ee140c3bc52422020ef722cbee52 _reverts_ all changes to `coding_in_cython.rst` done by #13311. How did that happen?

```diff
-    sage: alarm(0.5); factor(10^1000 + 3)
-    Traceback (most recent call last):
-    ...
-    AlarmInterrupt
+    sage: import sage.tests.interrupt
+    sage: try:
+    ...     sage.tests.interrupt.interrupt_after_delay()
+    ...     factor(10^1000 + 3)
+    ... except KeyboardInterrupt:
+    ...     print "ok!"
+    ok!
+
```



---

Comment by jdemeyer created at 2013-12-18 12:59:30

Volker, apologies for my bad mood. I could easily revert the changes from 67a76032fda3ee140c3bc52422020ef722cbee52 which conflict with this patch, but I guess you should tell me whether that's a good idea.


---

Comment by jdemeyer created at 2013-12-18 13:07:16

I moved the documentation part to #15543. The git branch contains all changes from the Mercurial patch except for the documentation.


---

Comment by jdemeyer created at 2013-12-18 13:08:27

I moved the documentation part to #15543. The git branch contains all changes from the Mercurial patch except for the documentation.
----
New commits:


---

Comment by vbraun created at 2013-12-18 14:03:14

The changes to the developer guide were lost because I had forked that off to rewrite it, sorry. I think the changes from #13311 were the only ones affected.


---

Comment by vbraun created at 2013-12-19 19:45:27

Resolution: fixed
