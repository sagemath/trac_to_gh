# Issue 16125: Polar Graph

Issue created by migration from https://trac.sagemath.org/ticket/16362

Original creator: ncohen

Original creation time: 2014-05-16 15:41:23

CC:  dimpase

Polar Graphs ! Brand new `O^+(m,q)`, `O^-(m,q)` and `O(m,q)` strongly regular graphs from Brouwer's website ! `:-P`

Nathann


---

Comment by ncohen created at 2014-05-16 17:42:34

Changing status from new to needs_review.


---

Comment by git created at 2014-05-16 17:43:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-05-16 20:01:11

not a review, just done a little work to turn code in pep8 standard
----
New commits:


---

Comment by dimpase created at 2014-05-17 20:05:57

There is no canonical way to define GF(q). You somehow should synchronise the GF(q) used in your construction with the GF(q) used by GAP in your call to get the quadratic form. IIRC if you use the parameter `conway=True` in Sage then it will be in sync with GAP, which uses Conway polynomials to construct GF(q). Or you can pass the GF(q) to GAP (or the other way around).


---

Comment by dimpase created at 2014-05-17 20:05:57

Changing status from needs_review to needs_work.


---

Comment by dimpase created at 2014-05-17 20:39:48

I'd also like to point out that the way `F(x,y)` in the code is computed is rather weird and hard to read. A much more straightforward implementation would just be 

`F=lambda x,y: vector(x)*M*vector(y)` 

for `M` the matrix of the form; i.e. do not convert `M` into a dictionary.

(ADDED): you never call `F(x,y)` with x not equal to y, why do you need two arguments?!


---

Comment by dimpase created at 2014-05-17 20:53:23

The name of the function has to be changed. Classically, polar graphs (i.e. the collineartity graphs of polar spaces) are these ones, the symplectic ones, and the unitary ones. You have a Hermitean, or symplectic (or quadratic) form F, and the vertices of the graphs are the isotropic (resp. singular)) w.r.t to F.

We already have the symplectic case, this ticket covers the quadratic (a.k.a. orthogonal) case, it remains to cover the Hermitean case (called U(n,q) in Brouwer's tables).

Let us call the graphs here `OrthogonalPolarGraphs` or something like this, to distinguish them from the rest.


---

Comment by ncohen created at 2014-05-17 21:51:40

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2014-05-17 21:51:40

What about this ? `:-)`

Nathann


---

Comment by git created at 2014-05-17 21:51:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-05-17 21:58:40

Oh, and about the multiplication : I was no able to make it work, because of error message I do not understand. 


```
   2247     def F(x):
-> 2248         return x*M*x
   2249 
   2250     def FF(x,y):

/home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/structure/element.so in sage.structure.element.Vector.__mul__ (sage/structure/element.c:19059)()

/home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/structure/coerce.so in sage.structure.coerce.CoercionModel_cache_maps.bin_op (sage/structure/coerce.c:8274)()

TypeError: 'sage.modules.vector_modn_dense.Vector_modn_dense' object cannot be interpreted as an index
```


Or even


```
/home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/graphs/generators/families.pyc in F(x)
   2246 
   2247     def F(x):
-> 2248         return x*M*x.column()
   2249 
   2250     def FF(x,y):

/home/ncohen/.Sage/local/lib/python2.7/site-packages/sage/schemes/generic/morphism.pyc in __mul__(self, right)
    378         """
    379         if not isinstance(right, SchemeMorphism):
--> 380             raise TypeError, "right (=%s) must be a SchemeMorphism to multiply it by %s"%(right, self)
    381         if right.codomain() != self.domain():
    382             raise TypeError, "self (=%s) domain must equal right (=%s) codomain"%(self, right)

TypeError: right (=[((0, 1), 1), ((2, 2), 1), ((4, 4), 1), ((5, 5), 1), ((3, 3), 1)]) must be a SchemeMorphism to multiply it by (0 : 0 : 0 : 0 : 0 : 1)
```


And I am tired to fight with the category bugs that have been left unfixed for years.

If you can make it work I don't mind, otherwise I will chose a good night's sleep over this debugging hell `:-P`

Nathann


---

Comment by git created at 2014-05-17 22:01:42

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2014-05-17 22:01:56

Okay, fixed `:-P`

Nathann


---

Comment by dimpase created at 2014-05-17 22:03:20

Replying to [comment:7 ncohen]:
> What about this ? `:-)`

you don't believe in linear algebra, do you? :p

How about 

```
def F(x):
   return x*M*x
```

after replacing `M = Matrix(M).dict().items()` with `M = Matrix(M)` ?

And I would also added some tests for `Fq` being of order 2^k

with k>1. This case behaves differently from the odd characteristic case...
----
New commits:


---

Comment by ncohen created at 2014-05-17 22:05:52

> you don't believe in linear algebra, do you? :p

I don't believe in anything that is implemented in Sage and involves Parents, Elements, or categories.

> And I would also added some tests for `Fq` being of order 2^k
> 
> with k>1. This case behaves differently from the odd characteristic case...

Could you add a commit for that, please ?

Nathann

P.S. : If you feel like reviewing stuff, #14631 is 1 year old `:-P`


---

Comment by dimpase created at 2014-05-17 22:11:55

Replying to [comment:13 ncohen]:
> > you don't believe in linear algebra, do you? :p
> 
> I don't believe in anything that is implemented in Sage and involves Parents, Elements, or categories.
> 
> > And I would also added some tests for `Fq` being of order 2^k
> > 
> > with k>1. This case behaves differently from the odd characteristic case...
> 
> Could you add a commit for that, please ?
> 
> Nathann
> 
> P.S. : If you feel like reviewing stuff, #14631 is 1 year old `:-P`

#14631 does use `x*M*x`. Please be consistent in your coding... :P


---

Comment by ncohen created at 2014-05-17 22:15:07

> #14631 does use `x*M*x`. Please be consistent in your coding... :P

Come on Dima. You know how much I hate consistency.

Nathann


---

Comment by rws created at 2014-05-18 15:45:23


```
Error building the documentation.
Traceback (most recent call last):
  File "/home/ralf/sage/src/doc/common/builder.py", line 1477, in <module>
    getattr(get_builder(name), type)()
  File "/home/ralf/sage/src/doc/common/builder.py", line 276, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/home/ralf/sage/src/doc/common/builder.py", line 487, in _wrapper
    x.get(99999)
  File "/home/ralf/sage/local/lib/python/multiprocessing/pool.py", line 554, in get
    raise self._value
OSError: [graphs   ] /home/ralf/sage/local/lib/python2.7/site-packages/sage/graphs/graph_generators.py:docstring of sage.graphs.graph_generators.GraphGenerators.OrthogonalPolarGraph:10: WARNING: Inline literal start-string without end-string.
```



---

Comment by rws created at 2014-05-18 15:45:23

Changing status from needs_review to needs_work.


---

Comment by git created at 2014-05-18 16:10:16

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-05-18 16:10:26

Fixed !


---

Comment by ncohen created at 2014-05-18 16:10:26

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-05-18 21:27:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2014-05-19 09:52:54

I'd like to `libGAPify` this and #14631. That `gap("....` stuff sucks. Patches coming.


---

Comment by dimpase created at 2014-05-19 12:46:59

if you're happy with my changes then please set it to positive review...
----
New commits:


---

Comment by ncohen created at 2014-05-19 12:48:59

> if you're happy with my changes then please set it to positive review...

Well, not really... Now you have in the branch of #16362 some commits that belong to #14631, while #14631 depends on #16362 ....

Nathann


---

Comment by ncohen created at 2014-05-19 13:04:14

Come on Dima, do a clean job please !

Nathann


---

Comment by dimpase created at 2014-05-19 13:06:57

Obviously, I only meant to add `â€‹bcdbf21: libGAPisation and some cleanup`, not the whole slew of things. If you know how to untangle this mess please advise.


---

Comment by ncohen created at 2014-05-19 13:09:07

No Dima, this ticket does NOT depend on the other, it is the other way around.

You worked on the wrong branch. So now what you should do is checkout the original version of this branch, i.e. u/ncohen/16362, and cherry-pick (git sland for copy) the commits that you added on the wrong branch into where you are.

When this is done, push this new branch (with a -f, because you will be rewriting history) on u/dimpase/16362.

Nathann


---

Comment by dimpase created at 2014-05-19 13:29:51

New commits:


---

Comment by dimpase created at 2014-05-19 13:32:19

like this?


---

Comment by ncohen created at 2014-05-19 13:47:18

Yes.

But now, there is this problem :

My branch:

```
sage: %time G=graphs.OrthogonalPolarGraph(6,3,"+"); G
CPU times: user 2.04 s, sys: 32 ms, total: 2.07 s
Wall time: 2.25 s
```


Yours:

```
sage: %time G=graphs.OrthogonalPolarGraph(6,3,"+"); G
CPU times: user 8.98 s, sys: 88 ms, total: 9.06 s
Wall time: 9.09 s
```


Nathann


---

Comment by dimpase created at 2014-05-19 13:58:19

No, it's not a problem. This is just initialisation that takes longer due to lazy import of libgap. If I repeat tests on my branch I get


```
sage: %time G=graphs.OrthogonalPolarGraph(6,3,"+"); G
CPU times: user 3.58 s, sys: 61 ms, total: 3.64 s
Wall time: 3.65 s
sage: %time G=graphs.OrthogonalPolarGraph(6,3,"+"); G
CPU times: user 735 ms, sys: 12 ms, total: 747 ms
Wall time: 728 ms
sage: %time G=graphs.OrthogonalPolarGraph(6,3,"+"); G
CPU times: user 757 ms, sys: 6 ms, total: 763 ms
Wall time: 757 ms
```


and on your branch I get 

```
sage: %time G=graphs.OrthogonalPolarGraph(6,3,"+"); G
CPU times: user 795 ms, sys: 17 ms, total: 812 ms
Wall time: 948 ms
sage: %time G=graphs.OrthogonalPolarGraph(6,3,"+"); G
CPU times: user 744 ms, sys: 2 ms, total: 746 ms
Wall time: 755 ms
sage: %time G=graphs.OrthogonalPolarGraph(6,3,"+"); G
CPU times: user 761 ms, sys: 4 ms, total: 765 ms
Wall time: 777 ms
```



---

Comment by ncohen created at 2014-05-19 14:00:42

> No, it's not a problem.

If a code goes from 2s to 9s, it is a problem.

> This is just initialisation that takes longer due to lazy import of libgap. If I repeat tests on my branch I get

Okay. Give me one reason to use libgap then.

Nathann


---

Comment by dimpase created at 2014-05-19 14:41:29

Replying to [comment:33 ncohen]:
> > No, it's not a problem.
> 
> If a code goes from 2s to 9s, it is a problem.

if you lazify gap import, you'll see the same picture...

> 
> > This is just initialisation that takes longer due to lazy import of libgap. If I repeat tests on my branch I get
> 
> Okay. Give me one reason to use libgap then.

here it's just the code that is cleaner. In general, it speeds up things quite a bit.


---

Comment by ncohen created at 2014-05-19 15:47:53

Okay. Now, here, it is clearly slower the first time, and totally equivalent afterwards.

Please remove this part of your commit.

Nathann


---

Comment by dimpase created at 2014-05-19 15:50:26

Replying to [comment:35 ncohen]:
> Okay. Now, here, it is clearly slower the first time, and totally equivalent afterwards.
> 
> Please remove this part of your commit.
What part?

Besides, it's the same design as in #14631 which you happily approved...


---

Comment by ncohen created at 2014-05-19 15:51:17

> What part?

Well, the call to libgap obviously.

> Besides, it's the same design as in #14631 which you happily approved...

Well, I had not noticed that your improvements made the code slower. Please remove it from there too.

Nathann


---

Comment by dimpase created at 2014-05-19 16:00:31

No. This is not called "slower". If a call to libGAP happens before, it will not be slower.
Besides, the pexpect interface (the one your code uses) is known to be very flaky, and is known to randomly stall or get extremely slow on certain Linux kernels (e.g. it was the case with Debian a while ago). LibGAP is much more robust in this respect.

As well, at some point libGAP will become the main interface to GAP, and all of a sudden the code using the old interface will get slower.


---

Comment by ncohen created at 2014-05-19 16:02:47

Dima, it takes +15 seconds to test the families.py file for absolutely NOTHING.

Nathann


---

Comment by dimpase created at 2014-05-19 16:03:47

Replying to [comment:39 ncohen]:
> Dima, it takes +15 seconds to test the families.py file for absolutely NOTHING.

Robustness of the code is worth 15 seconds.
Get a life!


---

Comment by ncohen created at 2014-05-19 16:06:37

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-05-19 16:06:37

> Robustness of the code is worth 15 seconds.
> Get a life!

Same to you.

Okay, now positive review to this patch because nobody but you will ever review it otherwise (which is why I am stuck), and I will remove this "thing" in another branch.

Thank you for your help,

Nathann


---

Comment by dimpase created at 2014-05-19 16:11:12

I don't understand your position. If you want to sneak your worse code through the back door, I will protest.


---

Comment by ncohen created at 2014-05-19 16:13:41

> I don't understand your position. If you want to sneak your worse code through the back door, I will protest.

It is very simple : I work with this code, I need it to be fast. If a small change makes it go faster, I do it.

You would be surprised to see how many people also think that it makes sense.

Nathann


---

Comment by dimpase created at 2014-05-19 18:49:36

Replying to [comment:43 ncohen]:
> > I don't understand your position. If you want to sneak your worse code through the back door, I will protest.
> 
> It is very simple : I work with this code, I need it to be fast. If a small change makes it go faster, I do it.

The code is as fast in my version as it is in yours. Your measurements are not correctly done.
Do I need to explain why, again? Or do I need to raise it up on sage-develop? We can do the latter, sure.

 The disadvantage of your code is that it is entirely possible that the pexpect interface gets (half)broken yet again.
Do I need to explain this? Or you just won't listen, because you think you know better?
As well, let me point out that I find your suggestion that you will get rid of my changes in some way that I won't notice very, very worrying. This is not the way things are meant to be done.

And, finally, the design of the these tickets is very suboptimal, anyway, as they should be done with a backend that can take advantage of rich symmetries of the objects. I think I explained this on more than one occasion.
GAP's GRAPE package can easily deal with graphs from this family with 10 times as many vertices as your code here.
That's why I find your worry about a couple of more seconds on startup just funny...

> 
> You would be surprised to see how many people also think that it makes sense.

You might be surprised to find how many people find your outburst like this one very immature.


---

Comment by ncohen created at 2014-05-20 06:44:56

> The code is as fast in my version as it is in yours.

Of course not. Your code has a penalty on first run, mine does not.

(just for the joke: do you also profile cached functions with %timeit ?)

>  The disadvantage of your code is that it is entirely possible that the pexpect interface gets (half)broken yet again.

1) It is not broken (nor even deprecated), until proven otherwise

2) A LOT of code in Sage uses it. If you consider this a bug, write a ticket to address that.

> As well, let me point out that I find your suggestion that you will get rid of my changes in some way that I won't notice very, very worrying. This is not the way things are meant to be done.

You see it wrong again.

Right now, you are trying to force a commit (libgapify) into Sage even though I do not agree with  it (me, the reviewer of your changes). This, indeed, is not the way things are meant to be done. Since when do people add stuff in Sage without getting the agreement of somebody else ? This is precisely what the review process is.

As you refuse discussion on the subject, I can either give up the code of a useful ticket or give in to your blackmail (your libgapify commit Vs my graph constructor) and say that I give your code a positive review.

Admittedly, I prefer this version of the code to no constructor at all.

Secondly, it is fortunate that mistakes in Sage can be fixed, and if another reviewer thinks that it is stupid to lose time for no gain then this will be undone. The review process.

Note how I will have to get the reviewer's agreement while you are just imposing your own view here, when I repeatedly asked to you to remove it and without anybody else's agreement for your commit.

This, clearly, is abnormal.

> And, finally, the design of the these tickets is very suboptimal, anyway, as they should be done with a backend that can take advantage of rich symmetries of the objects. I think I explained this on more than one occasion.

I agree with you, but this backend does not exist in Sage. Did you miss this detail ?

I don't even know how to code such a thing. So if this is a problem for you, stop raving and implement it. I would be glad to have it too.

> You might be surprised to find how many people find your outburst like this one very immature.

The number of people who think that I am immature has no bounds. I definitely remember that I used to care, a long time ago. Fortunately, with time I figured out that they were all crazy, which simplified a lot of things.

Nathann


---

Comment by ncohen created at 2014-05-20 06:47:20

https://www.youtube.com/watch?v=2EHXH0hYkuU


---

Comment by dimpase created at 2014-05-20 08:21:47

Replying to [comment:45 ncohen]:
> > The code is as fast in my version as it is in yours.
> 
> Of course not. Your code has a penalty on first run, mine does not.

No, you are simply misled by %time here. Your startup times only *look* faster, for purely historical reasons, as an instance of GAP on pexpect interface gets loaded and GAP spawned prior to the 1st function call, and %time does not show this extra overhead, but an instance of libGAP gets loaded at the 1st function call.

Anyhow, thanks for rising the point startup time of libGAP. Hopefully it can be improved even if it is still lazily imported.

> 
> >  The disadvantage of your code is that it is entirely possible that the pexpect interface gets (half)broken yet again.
> 
> 1) It is not broken (nor even deprecated), until proven otherwise

Let me assure you that you do not want to know the details, really; 
pexpect is known to be flaky, abandoned code which might break with on newer Linux (or other OSes) again, just as it did in the past, as was extensively discussed, worked around (Linux kernel patches were necessary). Using libraries instead of it is a clear way out of this flakiness.

> 
> 2) A LOT of code in Sage uses it. If you consider this a bug, write a ticket to address that.
> 
> > As well, let me point out that I find your suggestion that you will get rid of my changes in some way that I won't notice very, very worrying. This is not the way things are meant to be done.
> 
> You see it wrong again.
> 
> Right now, you are trying to force a commit (libgapify) into Sage even though I do not agree with  it (me, the reviewer of your changes). 

I am not forcing anything. Certainly, you can convince me to change it, or change it yourself. I gave you a number of arguments (readability of the code, robustness) why there is an advantage to use libGAP. You dismissed them all without any reasons, except that "slowdown".

I may give you one more argument: my code makes sure that the finite fields used by GAP and by Sage are the same (mathematically). Your code does not really address this. Your code relies on an assumption, that currently appears to be true (well, at least I think so) that GAP and Sage use the same algorithm, based on Conway polynomials.


>This, indeed, is not the way things are meant to be done. Since when do people add stuff in Sage without getting the agreement of somebody else ? This is precisely what the review process is.

What you appear to have suggested that you accept my code only to change it later, in another branch, with another reviewer. And I found this very worrying, as this undermines the way Sage reviews work.


> 
> As you refuse discussion on the subject, I can either give up the code of a useful ticket or give in to your blackmail (your libgapify commit Vs my graph constructor) and say that I give your code a positive review.
> 
> Admittedly, I prefer this version of the code to no constructor at all.
> 
> Secondly, it is fortunate that mistakes in Sage can be fixed, and if another reviewer thinks that it is stupid to lose time for no gain then this will be undone. The review process.
> 
> Note how I will have to get the reviewer's agreement while you are just imposing your own view here, when I repeatedly asked to you to remove it and without anybody else's agreement for your commit.

You did not ask me to remove my commit. You asked me to change a part of the code that relies on libGAP, didn't you?
Without listening to any of the arguments I gave you in its favour. 

> 
> This, clearly, is abnormal.

Indeed, what is happening on this ticket is very abnormal, and you might force me to draw attention to it on sage-devel.

> 
> > And, finally, the design of the these tickets is very suboptimal, anyway, as they should be done with a backend that can take advantage of rich symmetries of the objects. I think I explained this on more than one occasion.
> 
> I agree with you, but this backend does not exist in Sage. Did you miss this detail ?
> 
> I don't even know how to code such a thing. So if this is a problem for you, stop raving and implement it. I would be glad to have it too.


I merely mentioned this to draw your attention to the fact that arguing about the startup speed of something which is at best a prototype implementation is silly.

> 
> > You might be surprised to find how many people find your outburst like this one very immature.
> 
> The number of people who think that I am immature has no bounds. I definitely remember that I used to care, a long time ago. Fortunately, with time I figured out that they were all crazy, which simplified a lot of things.

Well, craziness is relative, FYI. Craziness is often an just a socially unacceptable form of behaviour. Think about it :-)

Should we set the status of this ticket back to `needs_review`, as you apparently admit yourself that you do not act in good faith when you switched it to `positive_review`?


---

Comment by ncohen created at 2014-05-20 08:33:56

Yooooooooo !!

> No, you are simply misled by %time here. 

And by `sage -t` too.

> I am not forcing anything. Certainly, you can convince me to change it, or change it yourself. I gave you a number of arguments (readability of the code, robustness) why there is an advantage to use libGAP. You dismissed them all without any reasons, except that "slowdown".

Well, yes. This is a reason that is reminded to me every time I start Sage and create those strongly regular graphs. It is a down side for me, a user of that code.

> I may give you one more argument: my code makes sure that the finite fields used by GAP and by Sage are the same (mathematically). Your code does not really address this. Your code relies on an assumption, that currently appears to be true (well, at least I think so) that GAP and Sage use the same algorithm, based on Conway polynomials.

You did not mention this before. Do you think that a lot of code  in Sage is based on this assumption ?

> What you appear to have suggested that you accept my code only to change it later, in another branch, with another reviewer. And I found this very worrying, as this undermines the way Sage reviews work.

Indeed. Be worried of what may happen with the Graph code in Sage, it is clearly unsafe when I am around.

> You did not ask me to remove my commit. You asked me to change a part of the code that relies on libGAP, didn't you?

Indeed, I asked you to remove that part. Do you really believe that all this discussion is about the typos that you fixed ?

> Indeed, what is happening on this ticket is very abnormal, and you might force me to draw attention to it on sage-devel.

You keep mentionning this as if you thought that it might be a problem for me. If you have something to bring up on sage-devel send an email. I am not doing anything secret here that I would not want to be known.

When I rape and commit murder, I usually don't mention it on public tickets.

I mean. There were exceptions, of course...

> I merely mentioned this to draw your attention to the fact that arguing about the startup speed of something which is at best a prototype implementation is silly.

In what world do you live ? I *do not know* how to implement this, and if I did it would still be a massive amouont of work that I have no reason to do, because it is totally useless to me. Telling me to use a nonexistent backend that I don't know how to write does not lead anywhere. Implement it, and of course this code will use it.

> Should we set the status of this ticket back to `needs_review`, as you apparently admit yourself that you do not act in good faith when you switched it to `positive_review`?

Well, I think that this ticket is a good addition, even though you made the function slower on the first run for bad reasons. Not a sufficient reason to hold it back, even  though it is a pity, of course.

Nathann


---

Comment by ncohen created at 2014-05-20 08:37:35

By the way : the correct procedure to settle this is the following :

1) Implement this code with the current gap interface, because it is faster and not deprecated, and because 2) and 3) may take forever.

2) Improve libgap

3) Deprecate other calls to gap (which means updating this code too)

Nathann


---

Comment by dimpase created at 2014-05-20 08:48:18

Replying to [comment:49 ncohen]:

> 2) Improve libgap

let me see how far 2) can be pushed. If this is indeed a hard one, I promise I will switch this code back to classical GAP interface, say, by November this year (please feel free to remind me then).


---

Comment by ncohen created at 2014-05-20 08:51:16

SIX MONTHS ?

Change this to two months and it is a deal. I don't put much faith in people telling me "I will do it later". I have #14019 and Florent's "done by next month" 16 months ago.

If you honestly believe that you will do it, you can also accept to use the classical GAP interface and work on 2). When it is done, I see no problem with updating this code.

See ? It's clearly better this way.

Nathann


---

Comment by dimpase created at 2014-05-20 09:00:33

Replying to [comment:48 ncohen]:
> Yooooooooo !!
> 
> > No, you are simply misled by %time here. 
> 
> And by `sage -t` too.
> 
> > I am not forcing anything. Certainly, you can convince me to change it, or change it yourself. I gave you a number of arguments (readability of the code, robustness) why there is an advantage to use libGAP. You dismissed them all without any reasons, except that "slowdown".
> 
> Well, yes. This is a reason that is reminded to me every time I start Sage and create those strongly regular graphs. It is a down side for me, a user of that code.
> 
> > I may give you one more argument: my code makes sure that the finite fields used by GAP and by Sage are the same (mathematically). Your code does not really address this. Your code relies on an assumption, that currently appears to be true (well, at least I think so) that GAP and Sage use the same algorithm, based on Conway polynomials.
> 
> You did not mention this before. 
I did mention this in comment 4 above.

> Do you think that a lot of code  in Sage is based on this assumption ?
I am not sure. There are ways to make sure that the same field is used in GAP and in Sage with the classical interface. E.g. get the GAP's defining polynomial:

```
sage: gap.GF(4).DefiningPolynomial()
x_1^2+x_1+Z(2)^0
```

 and use it to create Sage's field.
> 
> > What you appear to have suggested that you accept my code only to change it later, in another branch, with another reviewer. And I found this very worrying, as this undermines the way Sage reviews work.
> 
> Indeed. Be worried of what may happen with the Graph code in Sage, it is clearly unsafe when I am around.
> 
> > You did not ask me to remove my commit. You asked me to change a part of the code that relies on libGAP, didn't you?
> 
> Indeed, I asked you to remove that part. Do you really believe that all this discussion is about the typos that you fixed ?
> 
> > Indeed, what is happening on this ticket is very abnormal, and you might force me to draw attention to it on sage-devel.
> 
> You keep mentionning this as if you thought that it might be a problem for me. If you have something to bring up on sage-devel send an email. I am not doing anything secret here that I would not want to be known.
> 
> When I rape and commit murder, I usually don't mention it on public tickets.
> 
> I mean. There were exceptions, of course...
This discussion DID cost me a couple of hours of sleep, FYI :-)

> 
> > I merely mentioned this to draw your attention to the fact that arguing about the startup speed of something which is at best a prototype implementation is silly.
> 
> In what world do you live ? I *do not know* how to implement this, and if I did it would still be a massive amount of work that I have no reason to do, because it is totally useless to me. 

Useless? You would hate to be able to work with polar graphs on 10000 vertices?


---

Comment by dimpase created at 2014-05-20 09:01:25

Replying to [comment:51 ncohen]:
> SIX MONTHS ?
> 
> Change this to two months and it is a deal. 
OK, make it two.


---

Comment by ncohen created at 2014-05-20 09:04:24

> I did mention this in comment 4 above.

You told me in this comment to add ``conway=True``, which I did. And now you tell me that this may not be correct either.

> This discussion DID cost me a couple of hours of sleep, FYI :-)

Same here, but I cannot blame you for giving your point of view.

> Useless? You would hate to be able to work with polar graphs on 10000 vertices?

I don't need it. Do you ? If you do, write a patch. Don't try to make me implement it for you. Again, I don't even know how to do that anyway.

Nathann


---

Comment by ncohen created at 2014-05-20 09:07:35

> OK, make it two.

Deal. Today is the 20 of may. On the 20 of July I will send you an email :

1) Either you have a ticket that makes both code equivalent (no startup cost) in `needs_review` and it is a very nice outcome

2) Otherwise, you have in `needs_review` (that I will review) to undo those changes.

Also : don't tell me two months later that you were on holidays in July. You know it now, you know what to expect.

Nathann


---

Comment by ncohen created at 2014-05-20 09:08:25

By the way the 20 of July is a sunday. Lucky you.

Nathann


---

Comment by ncohen created at 2014-05-20 09:10:10

> Useless? You would hate to be able to work with polar graphs on 10000 vertices?

By the way : I solve domination problems on those graphs. When their size is above 500, I give up.

Nathann


---

Comment by dimpase created at 2014-05-20 09:27:10

Replying to [comment:57 ncohen]:
> > Useless? You would hate to be able to work with polar graphs on 10000 vertices?
> 
> By the way : I solve domination problems on those graphs. 
Are the best known solutions independent sets? There are bounds on the latter I should know a lot about...


---

Comment by ncohen created at 2014-05-20 09:38:56

> Are the best known solutions independent sets? There are bounds on the latter I should know a lot about...

No, sorry. Well, it is not exactly domination problems but identifying codes (which are sometimes required to be dominating too). My colleague tells me that some identifying code are sometimes independent, but that it is very far from the actual bounds usually `^^;`

Thanks, though !

Nathann


---

Comment by vbraun created at 2014-05-21 15:33:37

Resolution: fixed
