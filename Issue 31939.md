# Issue 31939: Support building Sage with the Flang Fortran compiler

Issue created by migration from https://trac.sagemath.org/ticket/32176

Original creator: slelievre

Original creation time: 2021-07-11 04:56:54

CC:  dimpase mkoeppe slelievre




---

Comment by slelievre created at 2021-07-11 04:59:02

From a discussion at ticket:30835#comment:11.

Please confirm we are talking about this Flang:

- http://flang.llvm.org/docs/

rather than this one:

- https://github.com/flang-compiler/flang


---

Comment by slelievre created at 2021-07-11 04:59:02

Changing keywords from "" to "fortran, flang".


---

Comment by dimpase created at 2021-07-11 06:51:04

The former is not yet a real compiler.


---

Comment by was created at 2021-09-24 05:27:42

Replying to [comment:2 dimpase]:
> The former is not yet a real compiler.

Can you elaborate?


---

Comment by dimpase created at 2021-09-24 11:46:52

Replying to [comment:5 was]:
> Replying to [comment:2 dimpase]:
> > The former is not yet a real compiler.
> 
> Can you elaborate? 
https://releases.llvm.org/11.0.0/tools/flang/docs/ReleaseNotes.html says that it needs an "external Fortran compiler", defaulted to `gfortran`, to operate

```
Using Flang

Usage: flang hello.f90 -o hello.bin

By default, Flang will parse the Fortran file hello.f90 then unparse it to a canonical Fortran source file. 
Flang will then invoke an external Fortran compiler to compile this source file and link it, placing the resulting executable in hello.bin.

To specify the external Fortran compiler, set the F18_FC environment variable to the name of the compiler binary and ensure that it is on your PATH. 
The default value for F18_FC is gfortran.
```

