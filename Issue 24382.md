# Issue 24382: giac fails to build on SunOS

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2018-01-31 06:29:02

CC:  frederichan


```
libtool: compile:  g++ -DHAVE_CONFIG_H -I. -I.. -DIN_GIAC -I. -I.. -I. -I.. -I/var/export/home/jeroen/sage/local/include -g -O2 -m64 -O2 -g -D_XPG6 -fno-strict-aliasing -DGIAC_GENERIC_CONSTANTS -MT input_lexer.lo -MD -MP -MF .deps/input_lexer.Tpo -c input_lexer.cc  -fPIC -DPIC -o .libs/input_lexer.o
In file included from giacPCH.h:45:0,
                 from input_lexer.ll:48:
rpn.h:171:41: error: macro "_ABS" passed 2 arguments, but takes just 1
   gen _ABS(const gen & args,GIAC_CONTEXT);
                                         ^
make[5]: *** [Makefile:759: input_lexer.lo] Error 1
```



---

Comment by git created at 2018-01-31 09:55:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by frederichan created at 2018-01-31 10:36:44

I am reporting this upstream:

http://xcas.e.ujf-grenoble.fr/XCAS/viewtopic.php?f=4&t=1998


---

Comment by jdemeyer created at 2018-01-31 10:42:06

Note that this patch here is untested. I'll let you know whether it works.


---

Comment by jdemeyer created at 2018-02-01 05:55:49

The patch is needed but not sufficient. There are other build issues.


---

Comment by git created at 2018-02-01 12:05:18

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-02-01 12:08:26

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2018-02-01 18:45:19

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-02-01 19:43:14

This patch fixes issues 1 and 2.


---

Comment by git created at 2018-02-01 20:56:23

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2018-02-01 20:58:49

For issue 3, I simply disabled part of the help functionality on systems not supporting `DT_DIR`.


---

Comment by dimpase created at 2018-02-01 22:10:33

let me see if with this I get a complete build - it's the last package that fails in my build, as far as I see (I have done a fix for R).


---

Comment by dimpase created at 2018-02-02 08:31:55

Changing status from new to needs_review.


---

Comment by dimpase created at 2018-02-02 08:31:55

needs review?


---

Comment by jdemeyer created at 2018-02-02 10:08:10

Yes. Needs review.


---

Comment by dimpase created at 2018-02-02 10:11:35

This works on Sun for me too. Send it to the bots!


---

Comment by dimpase created at 2018-02-02 10:11:35

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2018-02-02 11:28:52

Replying to [comment:17 dimpase]:
> let me see if with this I get a complete build - it's the last package that fails in my build, as far as I see

Do you have a fix for fplll? If so, please put it on #24618.


---

Comment by dimpase created at 2018-02-02 12:01:34

It did build for me without any patches, perhaps it is gcc 7.2 vs 5.4 here?


---

Comment by vbraun created at 2018-02-03 17:50:03

Resolution: fixed


---

Comment by dimpase created at 2021-02-18 10:18:52

still not quite fixed, see https://xcas.univ-grenoble-alpes.fr/forum/viewtopic.php?f=4&t=1998&p=12030#p12030
