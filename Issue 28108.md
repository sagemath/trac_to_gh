# Issue 28108: Bug with NumberField.abs_val

Issue created by migration from https://trac.sagemath.org/ticket/28345

Original creator: mercatp

Original creation time: 2019-08-12 13:09:37

CC:  slelievre cremona roed jhpalmieri

The following code fail:


```
sage: K.<xi> = NumberField(x^3-3)
sage: v_fin = tuple(K.primes_above(3))[0]
sage: abs_val(K, v_fin, K(0))
```


It should return 0.
See also ticket #28241


---

Comment by mercatp created at 2019-08-12 13:42:29

New commits:


---

Comment by alexjbest created at 2019-09-05 12:07:47

Changing status from new to needs_review.


---

Comment by alexjbest created at 2019-09-05 12:07:47

I set this to needs review as it seems it is done, so the patchbots can check it.

The other way to do this would be to ensure that `p^(-Infinity)` returns 0 in some way, but I don't suppose that really matters.


---

Comment by @mwageringel created at 2019-12-01 19:03:18

Returning `0` gives an `int` which is of the wrong type, so please change it to `return R.zero()` instead. Moreover, a blank line is needed after `TESTS::` and please remove the trailing whitespace in the line above that. Also enter your full name in the authors field.

I am not too familiar with the theory, so it would be good if someone can confirm this is mathematically correct.


---

Comment by @mwageringel created at 2019-12-01 19:04:56

Changing status from needs_review to needs_work.


---

Comment by embray created at 2020-01-06 14:10:03

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-05-01 04:28:42

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by chapoton created at 2021-08-01 07:41:45

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2021-08-01 07:41:45

here is a brand new branch, please review
----
New commits:


---

Comment by chapoton created at 2021-08-01 12:44:34

green bot, please review this very simple ticket


---

Comment by slelievre created at 2021-08-01 13:17:13

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-08-29 09:37:55

Resolution: fixed
