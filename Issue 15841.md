# Issue 15841: Python 3 preparation: reduce() is no more a builtin function

Issue created by migration from Trac.

Original creator: wluebbe

Original creation time: 2014-04-07 09:00:54

Keywords: python3

The Py2 builtin function `reduce()` is available in Py3 as `functools.reduce()`.

The tool 2to3 adds `from functools import reduce`.


But the code has to depend on the Python version!

There are 24 effected modules. 

This ticket is tracked as a dependency of meta-ticket ticket:16052.


---

Comment by aapitzsch created at 2014-05-18 14:06:29

Changing status from new to needs_review.


---

Comment by aapitzsch created at 2014-05-18 14:06:29

`functools.reduce()` was made available in python 2.6 (see https://docs.python.org/2/library/functools.html#functools.reduce)
----
New commits:


---

Comment by wluebbe created at 2014-05-20 15:12:48

I didn't realize that `from functools import reduce` is already possible since Python 2.6 (see the changed description).

All test passed `./sage -tp 4 --all --long >logs/sage-tp4-all-long-16078.log`.

But I think it would be better (see also PEP8) to do the imports only once at the top of teach module. For 24 modules this could be generated by `2to3` - the 3 `.pyx` and the 1 doctest case go extra.


---

Comment by aapitzsch created at 2014-05-21 22:31:21

Moved imports to the top of each module.
----
New commits:


---

Comment by wluebbe created at 2014-05-22 06:55:00

Changing status from needs_review to positive_review.


---

Comment by wluebbe created at 2014-05-22 06:55:00

All tests `./sage -b;./sage -tp 4 --all --long >logs/sage-tp4-all-long-16078_2.log` pass and the changes look good. It's a positive review for me.


---

Comment by vbraun created at 2014-05-22 21:28:53

Conflicts, probably needs to have the next beta merged in.


---

Comment by vbraun created at 2014-05-22 21:28:53

Changing status from positive_review to needs_work.


---

Comment by git created at 2014-05-25 19:59:39

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aapitzsch created at 2014-05-25 21:34:34

Changing status from needs_work to needs_review.


---

Comment by aapitzsch created at 2014-05-25 21:34:34

Rebased.


---

Comment by wluebbe created at 2014-05-26 05:34:32

Changing status from needs_review to positive_review.


---

Comment by wluebbe created at 2014-05-26 05:34:32

Check and tested again after merge.


---

Comment by vbraun created at 2014-05-29 11:07:35

Resolution: fixed
