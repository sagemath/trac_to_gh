# Issue 22969: partition_algebra.py: use normal functions instead of functools.partial

Issue created by migration from https://trac.sagemath.org/ticket/23206

Original creator: jdemeyer

Original creation time: 2017-06-10 08:04:44

Various functions from `src/sage/combinat/partition_algebra.py` are implemented as `functools.partial` for no obvious reason. Then a `__doc__` attribute is assigned, which will break with the doctest framework changes in #23196.


---

Comment by tscrim created at 2017-06-10 12:30:20

I can take care of this Jeroen.


---

Comment by tscrim created at 2017-06-10 12:32:47

There is a reason why this was done: to remove the boilerplate code of checking integer or `n.5` and to delegate to the correct class. However, this is not a very good approach.


---

Comment by tscrim created at 2017-06-10 12:55:19

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-06-10 12:55:19

Here is a version with as minimal boilerplate code as I could manage. I also did some trivial cleanup of the doc of these functions.
----
New commits:


---

Comment by jdemeyer created at 2017-06-12 10:27:37

For some reason, `combinat` developers really like to write docstrings in strange ways...


---

Comment by jdemeyer created at 2017-06-12 10:27:37

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-06-12 20:27:18

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2017-06-12 20:27:18

doctests...


---

Comment by git created at 2017-06-12 22:35:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-06-12 22:37:11

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-06-12 22:37:11

So we no longer have anything in Sage that uses that idiom, so I made a new file in `tests` specifically for that. I didn't copy the test over from `misc/sageinspect.py` because I didn't want to duplicate it and moving it felt unnatural.


---

Comment by jdemeyer created at 2017-06-13 18:48:25

I think it would have been fine to just remove that test.

But now that you changed the doctest, let's keep it.


---

Comment by tscrim created at 2017-06-13 23:07:35

I thought about that, but I didn't want to remove doctest coverage for a feature we had a trac ticket explicitly for.

The patchbot comes back essentially green, and so I'm taking your comments as a positive review.


---

Comment by tscrim created at 2017-06-13 23:07:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-06-15 16:45:26

Resolution: fixed
