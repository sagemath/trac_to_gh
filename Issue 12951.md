# Issue 12951: Move SAGE_DATA to SAGE_LOCAL/share/sage/data

archive/issues_012951.json:
```json
{
    "body": "Assignee: tdb\n\nCC:  @kini @jdemeyer @robertwb @burcin\n\nThis is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`\n\nIssue created by migration from https://trac.sagemath.org/ticket/13123\n\n",
    "created_at": "2012-06-16T08:53:14Z",
    "labels": [
        "component: relocation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Move SAGE_DATA to SAGE_LOCAL/share/sage/data",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12951",
    "user": "https://github.com/ohanar"
}
```
Assignee: tdb

CC:  @kini @jdemeyer @robertwb @burcin

This is in preparation for the transition to git. `SAGE_EXTCODE` will be moved to `SAGE_ROOT/devel/ext`

Issue created by migration from https://trac.sagemath.org/ticket/13123





---

archive/issue_comments_155914.json:
```json
{
    "body": "Ok, everything should work now.",
    "created_at": "2012-06-19T04:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155914",
    "user": "https://github.com/ohanar"
}
```

Ok, everything should work now.



---

archive/issue_comments_155915.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-19T04:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155915",
    "user": "https://github.com/ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_155916.json:
```json
{
    "body": "That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term. I cannot comment on trac13123_extcode.patch and trac13123_scripts.patch as I don't know the code in there all that well. But for the rest:\n* I will need to check the spkg individually for correctness but I assume it will be OK it is the easy part.\n* trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.",
    "created_at": "2012-06-19T11:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155916",
    "user": "https://github.com/kiwifb"
}
```

That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term. I cannot comment on trac13123_extcode.patch and trac13123_scripts.patch as I don't know the code in there all that well. But for the rest:
* I will need to check the spkg individually for correctness but I assume it will be OK it is the easy part.
* trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.



---

archive/issue_comments_155917.json:
```json
{
    "body": "Please make it clear in the ticket description which patches have to be applied where.",
    "created_at": "2012-06-19T11:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155917",
    "user": "https://github.com/jdemeyer"
}
```

Please make it clear in the ticket description which patches have to be applied where.



---

archive/issue_comments_155918.json:
```json
{
    "body": "You should use `cp -R` instead of `cp -r` (like it was before).\n\nYou should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.",
    "created_at": "2012-06-19T11:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155918",
    "user": "https://github.com/jdemeyer"
}
```

You should use `cp -R` instead of `cp -r` (like it was before).

You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.



---

archive/issue_comments_155919.json:
```json
{
    "body": "Why don't you\n\n```\nmkdir -p \"$SAGE_DATA\"\n```\n\nin `spkg/install`?  That's easier than doing it in the various packages.",
    "created_at": "2012-06-19T11:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155919",
    "user": "https://github.com/jdemeyer"
}
```

Why don't you

```
mkdir -p "$SAGE_DATA"
```

in `spkg/install`?  That's easier than doing it in the various packages.



---

archive/issue_comments_155920.json:
```json
{
    "body": "Replying to [comment:7 fbissey]:\n> * trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.\nSee #5155.",
    "created_at": "2012-06-19T11:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155920",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:7 fbissey]:
> * trac13123_library.patch : I am spotting something that I should have reported as a bug a long time ago. In sage/interfaces/gap.py GAP_STAMP is created in $SAGE_LOCAL/bin. This is a no-no if sage is installed globally and accessible by many users. That means all users would need to be able to write to $SAGE_LOCAL/bin to use gap from sage. There is no reason why GAP_STAMP has to be stored there. It should be moved to $DOT_SAGE or possibly even $GAP_DIR. There is a similar problem with qepcad but your patch doesn't touch that particular bit.
See #5155.



---

archive/issue_comments_155921.json:
```json
{
    "body": "Replying to [comment:10 jdemeyer]:\n> Why don't you\n> {{{\n> mkdir -p \"$SAGE_DATA\"\n> }}}\n> in `spkg/install`?  That's easier than doing it in the various packages.\n\nMaybe easier, but since I was bumping the versions of these spkgs anyways for upgrading purposes, I figured I would have them take care of their own installation, rather than relying upon the build scripts.",
    "created_at": "2012-06-19T19:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155921",
    "user": "https://github.com/ohanar"
}
```

Replying to [comment:10 jdemeyer]:
> Why don't you
> {{{
> mkdir -p "$SAGE_DATA"
> }}}
> in `spkg/install`?  That's easier than doing it in the various packages.

Maybe easier, but since I was bumping the versions of these spkgs anyways for upgrading purposes, I figured I would have them take care of their own installation, rather than relying upon the build scripts.



---

archive/issue_comments_155922.json:
```json
{
    "body": "Replying to [comment:7 fbissey]:\n> That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term.\n\nYou should expect to see a number of these types of changes from me over the next few months. It should definitely simply things for you as the environment variables `SAGE_DATA` and `SAGE_EXTCODE` will now be globally respected in Sage.",
    "created_at": "2012-06-19T19:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155922",
    "user": "https://github.com/ohanar"
}
```

Replying to [comment:7 fbissey]:
> That will cause me a lot of work in sage-on-gentoo but overall that will make my life easier in the long term.

You should expect to see a number of these types of changes from me over the next few months. It should definitely simply things for you as the environment variables `SAGE_DATA` and `SAGE_EXTCODE` will now be globally respected in Sage.



---

archive/issue_comments_155923.json:
```json
{
    "body": "Replying to [comment:9 jdemeyer]:\n> You should use `cp -R` instead of `cp -r` (like it was before).\n> \n> You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.\n\nDone and done.",
    "created_at": "2012-06-19T19:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155923",
    "user": "https://github.com/ohanar"
}
```

Replying to [comment:9 jdemeyer]:
> You should use `cp -R` instead of `cp -r` (like it was before).
> 
> You should deal with upgrading (probably in the new extcode installer): if `SAGE_ROOT/data` exists, then move `SAGE_ROOT/data/extcode` to `SAGE_ROOT/devel/ext-main` and delete the whole directory `SAGE_ROOT/data`.

Done and done.



---

archive/issue_comments_155924.json:
```json
{
    "body": "Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?",
    "created_at": "2012-06-19T22:19:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155924",
    "user": "https://github.com/kiwifb"
}
```

Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?



---

archive/issue_comments_155925.json:
```json
{
    "body": "Replying to [comment:16 fbissey]:\n> Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?\n\nSince I'm already touching that line, I may as well do it here. If you do end up finishing #5155 in time for 5.1, I'll have to rebase anyway :). (This is under the assumption that this ticket doesn't make it into 5.1, which I feel like is a pretty safe assumption.)",
    "created_at": "2012-06-19T22:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155925",
    "user": "https://github.com/ohanar"
}
```

Replying to [comment:16 fbissey]:
> Should we deal with gap_stamp in this ticket or should I add it to #5155 and try to push its review for 5.1?

Since I'm already touching that line, I may as well do it here. If you do end up finishing #5155 in time for 5.1, I'll have to rebase anyway :). (This is under the assumption that this ticket doesn't make it into 5.1, which I feel like is a pretty safe assumption.)



---

archive/issue_comments_155926.json:
```json
{
    "body": "Thanks. Yes considering that Jeroen wants beta5 to be the last beta before rc our target for both tickets becomes 5.2. I think gap_stamp should go in DOT_SAGE, GAP_DIR seems to be reserved for some gap workspace and it may unwise to put it in there.",
    "created_at": "2012-06-19T22:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155926",
    "user": "https://github.com/kiwifb"
}
```

Thanks. Yes considering that Jeroen wants beta5 to be the last beta before rc our target for both tickets becomes 5.2. I think gap_stamp should go in DOT_SAGE, GAP_DIR seems to be reserved for some gap workspace and it may unwise to put it in there.



---

archive/issue_comments_155927.json:
```json
{
    "body": "Actually `GAP_DIR/workspace-*/` are the gap workspaces, so it should be fine to place in `GAP_DIR`.",
    "created_at": "2012-06-19T22:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155927",
    "user": "https://github.com/ohanar"
}
```

Actually `GAP_DIR/workspace-*/` are the gap workspaces, so it should be fine to place in `GAP_DIR`.



---

archive/issue_comments_155928.json:
```json
{
    "body": "You are right, I missed a line or two in the original file. Looks good to me.",
    "created_at": "2012-06-19T23:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155928",
    "user": "https://github.com/kiwifb"
}
```

You are right, I missed a line or two in the original file. Looks good to me.



---

archive/issue_comments_155929.json:
```json
{
    "body": "Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?",
    "created_at": "2012-06-28T22:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155929",
    "user": "https://github.com/kiwifb"
}
```

Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?



---

archive/issue_comments_155930.json:
```json
{
    "body": "Replying to [comment:21 fbissey]:\n> Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?\n\nI would have it imported from `sage.misc.misc` (well actually I would move it to `sage.misc.env`, but that currently doesn't exist). I think that I only left one instance of `os.environ` between `SAGE_DATA` and `SAGE_EXTCODE` with this patch (I haven't touched the other `SAGE_*` with this patch).",
    "created_at": "2012-06-29T05:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155930",
    "user": "https://github.com/ohanar"
}
```

Replying to [comment:21 fbissey]:
> Question, why do we sometimes get the SAGE_* variables from os.environ and sometimes from sage.misc.misc? Should we try to be uniform and do it one way only?

I would have it imported from `sage.misc.misc` (well actually I would move it to `sage.misc.env`, but that currently doesn't exist). I think that I only left one instance of `os.environ` between `SAGE_DATA` and `SAGE_EXTCODE` with this patch (I haven't touched the other `SAGE_*` with this patch).



---

archive/issue_comments_155931.json:
```json
{
    "body": "FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.",
    "created_at": "2012-06-30T20:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155931",
    "user": "https://github.com/ohanar"
}
```

FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.



---

archive/issue_comments_155932.json:
```json
{
    "body": "Replying to [comment:23 ohanar]:\n> FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.\n\nPutting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially. If you are concerned about multiple sage session running in parallel that's would still be a problem wherever you put it. I am not sure how the file is used but we don't remove it or anything. The real question is: is it actively used by gap? If gap just check for it's presence then it is OK. If it is used then it may have to be unique for each sage session and be cleaned on exit.",
    "created_at": "2012-07-01T22:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155932",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:23 ohanar]:
> FYI, looking at the code there might be an issue with using a `GAP_STAMP` shared by multiple copies of Sage (I'm not positive, I don't really know the code). For right now I'm using the `SAGE_EXTCODE` directory as the `GAP_STAMP`.

Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially. If you are concerned about multiple sage session running in parallel that's would still be a problem wherever you put it. I am not sure how the file is used but we don't remove it or anything. The real question is: is it actively used by gap? If gap just check for it's presence then it is OK. If it is used then it may have to be unique for each sage session and be cleaned on exit.



---

archive/issue_comments_155933.json:
```json
{
    "body": "Replying to [comment:24 fbissey]:\n> Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially.\nNot really, since it removes yet another instance of sage trying to write to someplace it shouldn't be at runtime.\n\nThe purpose of `GAP_STAMP` seems to be a check on whether it needs to refresh the workspaces. Really, this will all become a moot point if/when libgap is finished.",
    "created_at": "2012-07-02T04:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155933",
    "user": "https://github.com/ohanar"
}
```

Replying to [comment:24 fbissey]:
> Putting it in SAGE_EXTCODE is about as bad as putting it in SAGE_LOCAL/bin as it was initially.
Not really, since it removes yet another instance of sage trying to write to someplace it shouldn't be at runtime.

The purpose of `GAP_STAMP` seems to be a check on whether it needs to refresh the workspaces. Really, this will all become a moot point if/when libgap is finished.



---

archive/issue_comments_155934.json:
```json
{
    "body": "As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime. On a system wide installation that would be a folder that a user is not supposed to own. If a sys-admin install sage under /usr/local/sage-xxx for example, it would resolve to /usr/local/sage-xxx/local/share/sage/ext and as a sys-admin I object that my users have to write something there. Their home folder, tmp and any scratch space set for them is where it should go.\n\nThat's my perspective.",
    "created_at": "2012-07-02T04:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155934",
    "user": "https://github.com/kiwifb"
}
```

As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime. On a system wide installation that would be a folder that a user is not supposed to own. If a sys-admin install sage under /usr/local/sage-xxx for example, it would resolve to /usr/local/sage-xxx/local/share/sage/ext and as a sys-admin I object that my users have to write something there. Their home folder, tmp and any scratch space set for them is where it should go.

That's my perspective.



---

archive/issue_comments_155935.json:
```json
{
    "body": "Replying to [comment:26 fbissey]:\n> As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime.\nI don't write to `SAGE_EXTCODE`, I just use its creation for the timestamp that gap wants. It used to be that when you first started sage, it would touch `SAGE_LOCAL/bin/gap_stamp` and then use the timestamp of that.\n\nI agree, nothing should try to write to `SAGE_LOCAL` or its subdirectories in the long run.",
    "created_at": "2012-07-02T05:11:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155935",
    "user": "https://github.com/ohanar"
}
```

Replying to [comment:26 fbissey]:
> As far as I am concerned SAGE_EXTCODE is a place sage shouldn't write at runtime.
I don't write to `SAGE_EXTCODE`, I just use its creation for the timestamp that gap wants. It used to be that when you first started sage, it would touch `SAGE_LOCAL/bin/gap_stamp` and then use the timestamp of that.

I agree, nothing should try to write to `SAGE_LOCAL` or its subdirectories in the long run.



---

archive/issue_comments_155936.json:
```json
{
    "body": "OK. If we just want a GAP_STAMP file for everyone and in SAGE_EXTCODE it should really be created by the extcode spkg. Is it a file we really need?",
    "created_at": "2012-07-03T02:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155936",
    "user": "https://github.com/kiwifb"
}
```

OK. If we just want a GAP_STAMP file for everyone and in SAGE_EXTCODE it should really be created by the extcode spkg. Is it a file we really need?



---

archive/issue_comments_155937.json:
```json
{
    "body": "`@`fbissey\n\nDo you think you are capable of finishing your review of this? (No pressure, just want to know if you can, so that I can find someone else to review it if you aren't able to.)",
    "created_at": "2012-09-09T23:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155937",
    "user": "https://github.com/ohanar"
}
```

`@`fbissey

Do you think you are capable of finishing your review of this? (No pressure, just want to know if you can, so that I can find someone else to review it if you aren't able to.)



---

archive/issue_comments_155938.json:
```json
{
    "body": "Yes, I will hopefully tomorrow. I was a bit down today - but this is important and we should move this.",
    "created_at": "2012-09-10T08:46:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155938",
    "user": "https://github.com/kiwifb"
}
```

Yes, I will hopefully tomorrow. I was a bit down today - but this is important and we should move this.



---

archive/issue_comments_155939.json:
```json
{
    "body": "Why `local/share/sage/data` and not `local/share/sage` or even `local/share`?",
    "created_at": "2012-09-10T08:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155939",
    "user": "https://github.com/jdemeyer"
}
```

Why `local/share/sage/data` and not `local/share/sage` or even `local/share`?



---

archive/issue_comments_155940.json:
```json
{
    "body": "I would argue for `local/share` because the stuff in `SAGE_DATA` (apart from extcode) isn't part of Sage.  It's part of external packages/databases.  So I think it's wrong to use a `sage` subdirectory.\n\nInstalling databases in `local/share/sage/data` is like installing all binaries in `local/bin/sage/binaries` and we don't do that either.\n\nFor extcode, `local/share/sage` makes sense.",
    "created_at": "2012-09-10T08:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155940",
    "user": "https://github.com/jdemeyer"
}
```

I would argue for `local/share` because the stuff in `SAGE_DATA` (apart from extcode) isn't part of Sage.  It's part of external packages/databases.  So I think it's wrong to use a `sage` subdirectory.

Installing databases in `local/share/sage/data` is like installing all binaries in `local/bin/sage/binaries` and we don't do that either.

For extcode, `local/share/sage` makes sense.



---

archive/issue_comments_155941.json:
```json
{
    "body": "As far as I can tell, this ticket will break upgrading because an upgraded Sage will still have the `SAGE_ROOT/data` directory.  This could be simply ignored and therefore harmless, but then it needs to be kept inside `.hgignore`.  Alternatively, you could move `SAGE_ROOT/data` or even delete it.\n\nAlso, the database packages should depend on `SAGE_ROOT_REPO`, otherwise they won't see the new `sage-env` when upgrading.",
    "created_at": "2012-09-10T09:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155941",
    "user": "https://github.com/jdemeyer"
}
```

As far as I can tell, this ticket will break upgrading because an upgraded Sage will still have the `SAGE_ROOT/data` directory.  This could be simply ignored and therefore harmless, but then it needs to be kept inside `.hgignore`.  Alternatively, you could move `SAGE_ROOT/data` or even delete it.

Also, the database packages should depend on `SAGE_ROOT_REPO`, otherwise they won't see the new `sage-env` when upgrading.



---

archive/issue_comments_155942.json:
```json
{
    "body": "I can agree with the SAGE_DATA location argument of Jeroen. The only argument against is that for most of them sage is the only application I can think of that make use of it. The splitting of the data is purely a convenience because it ease maintenance. In that case local/share/sage would be most appropriate.",
    "created_at": "2012-09-10T09:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155942",
    "user": "https://github.com/kiwifb"
}
```

I can agree with the SAGE_DATA location argument of Jeroen. The only argument against is that for most of them sage is the only application I can think of that make use of it. The splitting of the data is purely a convenience because it ease maintenance. In that case local/share/sage would be most appropriate.



---

archive/issue_comments_155943.json:
```json
{
    "body": "Sure, my main thing is just removing SAGE_ROOT/data and moving the databases that were there to some place in SAGE_LOCAL.",
    "created_at": "2012-09-10T21:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155943",
    "user": "https://github.com/ohanar"
}
```

Sure, my main thing is just removing SAGE_ROOT/data and moving the databases that were there to some place in SAGE_LOCAL.



---

archive/issue_comments_155944.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-11T06:30:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155944",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155945.json:
```json
{
    "body": "Attachment [elliptic_curves.diff](tarball://root/attachments/some-uuid/ticket13123/elliptic_curves.diff) by @ohanar created at 2012-09-11 07:49:41\n\nfor review purposes",
    "created_at": "2012-09-11T07:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155945",
    "user": "https://github.com/ohanar"
}
```

Attachment [elliptic_curves.diff](tarball://root/attachments/some-uuid/ticket13123/elliptic_curves.diff) by @ohanar created at 2012-09-11 07:49:41

for review purposes



---

archive/issue_comments_155946.json:
```json
{
    "body": "Attachment [polytopes_db.diff](tarball://root/attachments/some-uuid/ticket13123/polytopes_db.diff) by @ohanar created at 2012-09-11 07:53:41\n\nfor review purpose",
    "created_at": "2012-09-11T07:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155946",
    "user": "https://github.com/ohanar"
}
```

Attachment [polytopes_db.diff](tarball://root/attachments/some-uuid/ticket13123/polytopes_db.diff) by @ohanar created at 2012-09-11 07:53:41

for review purpose



---

archive/issue_comments_155947.json:
```json
{
    "body": "for review purposes",
    "created_at": "2012-09-11T07:55:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155947",
    "user": "https://github.com/ohanar"
}
```

for review purposes



---

archive/issue_comments_155948.json:
```json
{
    "body": "Attachment [conway_polynomials.diff](tarball://root/attachments/some-uuid/ticket13123/conway_polynomials.diff) by @ohanar created at 2012-09-11 07:58:47\n\nfor review purposes",
    "created_at": "2012-09-11T07:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155948",
    "user": "https://github.com/ohanar"
}
```

Attachment [conway_polynomials.diff](tarball://root/attachments/some-uuid/ticket13123/conway_polynomials.diff) by @ohanar created at 2012-09-11 07:58:47

for review purposes



---

archive/issue_comments_155949.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-11T08:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155949",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155950.json:
```json
{
    "body": "Attachment [graphs.diff](tarball://root/attachments/some-uuid/ticket13123/graphs.diff) by @ohanar created at 2012-09-11 08:02:09\n\nOk, moved everything to `SAGE_LOCAL/share` (added `SAGE_SHARE` for convenience), and removed the `SAGE_DATA` environment variable.\n\nI also added a bit to `SAGE_ROOT/spkg/install` to handle upgrading.",
    "created_at": "2012-09-11T08:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155950",
    "user": "https://github.com/ohanar"
}
```

Attachment [graphs.diff](tarball://root/attachments/some-uuid/ticket13123/graphs.diff) by @ohanar created at 2012-09-11 08:02:09

Ok, moved everything to `SAGE_LOCAL/share` (added `SAGE_SHARE` for convenience), and removed the `SAGE_DATA` environment variable.

I also added a bit to `SAGE_ROOT/spkg/install` to handle upgrading.



---

archive/issue_comments_155951.json:
```json
{
    "body": "Some optional/experimental packages use `SAGE_DATA`:\n1. cunningham_tables-1.0\n2. p_group_cohomology-2.1.2\n3. database_stein_watkins_mini.p0\n4. sage-mode-0.7\n5. database_cremona_ellcurve-20120827\n6. database_sloane_oeis-2005-12\n7. database_jones_numfield-v4\n8. soya-0.11.2.p0\n\nSome optional packages use `$SAGE_ROOT/data':\n1. database_odlyzko_zeta\n2. database_symbolic_data-20070206\n3. database_kohel-20060803\n\nFor these reasons, I would keep `SAGE_DATA` as synonym of `SAGE_SHARE` and also make a symlink\n\n```\n$SAGE_ROOT/data -> local/share\n```\n",
    "created_at": "2012-09-11T09:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155951",
    "user": "https://github.com/jdemeyer"
}
```

Some optional/experimental packages use `SAGE_DATA`:
1. cunningham_tables-1.0
2. p_group_cohomology-2.1.2
3. database_stein_watkins_mini.p0
4. sage-mode-0.7
5. database_cremona_ellcurve-20120827
6. database_sloane_oeis-2005-12
7. database_jones_numfield-v4
8. soya-0.11.2.p0

Some optional packages use `$SAGE_ROOT/data':
1. database_odlyzko_zeta
2. database_symbolic_data-20070206
3. database_kohel-20060803

For these reasons, I would keep `SAGE_DATA` as synonym of `SAGE_SHARE` and also make a symlink

```
$SAGE_ROOT/data -> local/share
```




---

archive/issue_comments_155952.json:
```json
{
    "body": "Keeping SAGE_DATA for a little while as a symlink definitely sound like a good idea. I don't remember  explain_picklejar to be removed in trac13123_library.patch before nor do I understand the rational for the removal. Care to shade some light on that?",
    "created_at": "2012-09-11T10:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155952",
    "user": "https://github.com/kiwifb"
}
```

Keeping SAGE_DATA for a little while as a symlink definitely sound like a good idea. I don't remember  explain_picklejar to be removed in trac13123_library.patch before nor do I understand the rational for the removal. Care to shade some light on that?



---

archive/issue_comments_155953.json:
```json
{
    "body": "In the extcode patch, this comment is clearly wrong:\n\n```\ncp -pR * \"$SAGE_ROOT/devel/ext-main/\" # Creates new sagenb-main dir\n```\n",
    "created_at": "2012-09-11T10:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155953",
    "user": "https://github.com/jdemeyer"
}
```

In the extcode patch, this comment is clearly wrong:

```
cp -pR * "$SAGE_ROOT/devel/ext-main/" # Creates new sagenb-main dir
```




---

archive/issue_comments_155954.json:
```json
{
    "body": "Why change the logic in `sage/databases/cremona.py`?",
    "created_at": "2012-09-11T10:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155954",
    "user": "https://github.com/jdemeyer"
}
```

Why change the logic in `sage/databases/cremona.py`?



---

archive/issue_comments_155955.json:
```json
{
    "body": "In extcode `spkg-install`, why do\n\n```\nif [ -d .hg ]\n```\n\n\nYou *know* that `.hg` exists (if not, that would be a bug).",
    "created_at": "2012-09-11T15:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155955",
    "user": "https://github.com/jdemeyer"
}
```

In extcode `spkg-install`, why do

```
if [ -d .hg ]
```


You *know* that `.hg` exists (if not, that would be a bug).



---

archive/issue_comments_155956.json:
```json
{
    "body": "`spkg/install`: indentation should be 4 spaces.",
    "created_at": "2012-09-11T15:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155956",
    "user": "https://github.com/jdemeyer"
}
```

`spkg/install`: indentation should be 4 spaces.



---

archive/issue_comments_155957.json:
```json
{
    "body": "I changed the logic in `sage.databases.cremona` since I wrote it, and it when replacing everything, it annoyed me that it wasn't factored appropriately.\n\nI'll see about fixing the extcode `spkg-install` (most of the code there comes from a recent version of the sagenb `spkg-install`) and`spkg/install`, as well as adding a symlink for `SAGE_DATA`.",
    "created_at": "2012-09-11T20:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155957",
    "user": "https://github.com/ohanar"
}
```

I changed the logic in `sage.databases.cremona` since I wrote it, and it when replacing everything, it annoyed me that it wasn't factored appropriately.

I'll see about fixing the extcode `spkg-install` (most of the code there comes from a recent version of the sagenb `spkg-install`) and`spkg/install`, as well as adding a symlink for `SAGE_DATA`.



---

archive/issue_comments_155958.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-11T20:08:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155958",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155959.json:
```json
{
    "body": "apply to extcode repo",
    "created_at": "2012-09-11T20:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155959",
    "user": "https://github.com/ohanar"
}
```

apply to extcode repo



---

archive/issue_comments_155960.json:
```json
{
    "body": "Attachment [trac13123_scripts.patch](tarball://root/attachments/some-uuid/ticket13123/trac13123_scripts.patch) by @ohanar created at 2012-09-11 20:27:29\n\napply to scripts repo",
    "created_at": "2012-09-11T20:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155960",
    "user": "https://github.com/ohanar"
}
```

Attachment [trac13123_scripts.patch](tarball://root/attachments/some-uuid/ticket13123/trac13123_scripts.patch) by @ohanar created at 2012-09-11 20:27:29

apply to scripts repo



---

archive/issue_comments_155961.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-11T20:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155961",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155962.json:
```json
{
    "body": "I also fixed the commit message for the patches for the sage repos (I had already fixed the commit messages for the spkgs).",
    "created_at": "2012-09-11T20:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155962",
    "user": "https://github.com/ohanar"
}
```

I also fixed the commit message for the patches for the sage repos (I had already fixed the commit messages for the spkgs).



---

archive/issue_comments_155963.json:
```json
{
    "body": "I would really prefer to separate the refactoring of the Cremona database code from this ticket (and then have either this ticket depend on that or the other way around).",
    "created_at": "2012-09-12T08:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155963",
    "user": "https://github.com/jdemeyer"
}
```

I would really prefer to separate the refactoring of the Cremona database code from this ticket (and then have either this ticket depend on that or the other way around).



---

archive/issue_comments_155964.json:
```json
{
    "body": "`sage/interfaces/gap.py`: why change `hash(SAGE_ROOT)` to `hash(SAGE_LOCAL)`?  I don't understand why you made that change, nor the implications of that change.",
    "created_at": "2012-09-12T08:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155964",
    "user": "https://github.com/jdemeyer"
}
```

`sage/interfaces/gap.py`: why change `hash(SAGE_ROOT)` to `hash(SAGE_LOCAL)`?  I don't understand why you made that change, nor the implications of that change.



---

archive/issue_comments_155965.json:
```json
{
    "body": "Based on purely reading the patches: **positive review** modulo my reviewer patches and the Cremona and GAP changes that I mentioned.\n\nIn any case, this still needs massive amounts of testing.",
    "created_at": "2012-09-12T09:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155965",
    "user": "https://github.com/jdemeyer"
}
```

Based on purely reading the patches: **positive review** modulo my reviewer patches and the Cremona and GAP changes that I mentioned.

In any case, this still needs massive amounts of testing.



---

archive/issue_comments_155966.json:
```json
{
    "body": "Sorry but I still don't understand the changes in sage/misc/explain_pickle.py and how they are related to the rest of the ticket. It may just be due to a lack of understanding on my part on the working of the pickle jar but the change seems unrelated to the rest of the ticket. Could someone offer me an explanation?",
    "created_at": "2012-09-12T09:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155966",
    "user": "https://github.com/kiwifb"
}
```

Sorry but I still don't understand the changes in sage/misc/explain_pickle.py and how they are related to the rest of the ticket. It may just be due to a lack of understanding on my part on the working of the pickle jar but the change seems unrelated to the rest of the ticket. Could someone offer me an explanation?



---

archive/issue_comments_155967.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-12T14:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155967",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155968.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-12T20:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155968",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155969.json:
```json
{
    "body": "Attachment [13123_extcode_review.patch](tarball://root/attachments/some-uuid/ticket13123/13123_extcode_review.patch) by @jdemeyer created at 2012-09-12 20:07:53",
    "created_at": "2012-09-12T20:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155969",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [13123_extcode_review.patch](tarball://root/attachments/some-uuid/ticket13123/13123_extcode_review.patch) by @jdemeyer created at 2012-09-12 20:07:53



---

archive/issue_comments_155970.json:
```json
{
    "body": "This should be fixed:\n\n```\nsage -t --optional --long \"devel/sage/sage/databases/symbolic_data.py\"\n**********************************************************************\nFile \"/release/sage-5.4.beta2-try13123/devel/sage/sage/databases/symbolic_data.py\", line 37:\n    sage: sd = SymbolicData(); sd # optional - database_symbolic_data\nException raised:\n    Traceback (most recent call last):\n      File \"/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/release/sage-5.4.beta2-try13123/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_0[2]>\", line 1, in <module>\n        sd = SymbolicData(); sd # optional - database_symbolic_data###line 37:\n    sage: sd = SymbolicData(); sd # optional - database_symbolic_data\n      File \"/release/sage-5.4.beta2-try13123/local/lib/python/site-packages/sage/databases/symbolic_data.py\", line 78, in __init__\n        path=os.path.join(sage.misc.misc.SAGE_SHARE, 'symbolic_data')\n    NameError: global name 'sage' is not defined\n**********************************************************************\n```\n",
    "created_at": "2012-09-12T21:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155970",
    "user": "https://github.com/jdemeyer"
}
```

This should be fixed:

```
sage -t --optional --long "devel/sage/sage/databases/symbolic_data.py"
**********************************************************************
File "/release/sage-5.4.beta2-try13123/devel/sage/sage/databases/symbolic_data.py", line 37:
    sage: sd = SymbolicData(); sd # optional - database_symbolic_data
Exception raised:
    Traceback (most recent call last):
      File "/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/release/sage-5.4.beta2-try13123/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/release/sage-5.4.beta2-try13123/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_0[2]>", line 1, in <module>
        sd = SymbolicData(); sd # optional - database_symbolic_data###line 37:
    sage: sd = SymbolicData(); sd # optional - database_symbolic_data
      File "/release/sage-5.4.beta2-try13123/local/lib/python/site-packages/sage/databases/symbolic_data.py", line 78, in __init__
        path=os.path.join(sage.misc.misc.SAGE_SHARE, 'symbolic_data')
    NameError: global name 'sage' is not defined
**********************************************************************
```




---

archive/issue_comments_155971.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-12T21:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155971",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155972.json:
```json
{
    "body": "Also, I can't get the `sloane_database` optional doctests to work in `sage/databases/sloane.py`, but I don't think it's because of this ticket.",
    "created_at": "2012-09-12T21:10:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155972",
    "user": "https://github.com/jdemeyer"
}
```

Also, I can't get the `sloane_database` optional doctests to work in `sage/databases/sloane.py`, but I don't think it's because of this ticket.



---

archive/issue_comments_155973.json:
```json
{
    "body": "apply to sage library",
    "created_at": "2012-09-12T21:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155973",
    "user": "https://github.com/ohanar"
}
```

apply to sage library



---

archive/issue_comments_155974.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-12T21:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155974",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155975.json:
```json
{
    "body": "Attachment [trac13123_library.patch](tarball://root/attachments/some-uuid/ticket13123/trac13123_library.patch) by @ohanar created at 2012-09-12 21:33:17\n\n`@`fbissey\n\nBecause the commented out code references `SAGE_DATA/extcode` and hasn't been used in a long long time (see #6233).\n\nOk, updated. Changes:\n\n* Removed refactoring of `sage.databases.cremona`\n* Reverted change of `SAGE_ROOT -> SAGE_LOCAL` in `sage.interfaces.gap` (better done in #13432)\n* fixed `sage.databases.symbolic_data`",
    "created_at": "2012-09-12T21:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155975",
    "user": "https://github.com/ohanar"
}
```

Attachment [trac13123_library.patch](tarball://root/attachments/some-uuid/ticket13123/trac13123_library.patch) by @ohanar created at 2012-09-12 21:33:17

`@`fbissey

Because the commented out code references `SAGE_DATA/extcode` and hasn't been used in a long long time (see #6233).

Ok, updated. Changes:

* Removed refactoring of `sage.databases.cremona`
* Reverted change of `SAGE_ROOT -> SAGE_LOCAL` in `sage.interfaces.gap` (better done in #13432)
* fixed `sage.databases.symbolic_data`



---

archive/issue_comments_155976.json:
```json
{
    "body": "`sage --bdist` doesn't copy `devel/ext`, leading to non-working binary builds.",
    "created_at": "2012-09-13T06:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155976",
    "user": "https://github.com/jdemeyer"
}
```

`sage --bdist` doesn't copy `devel/ext`, leading to non-working binary builds.



---

archive/issue_comments_155977.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-13T06:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155977",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155978.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-13T06:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155978",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155979.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-13T09:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155979",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155980.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-13T11:51:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155980",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155981.json:
```json
{
    "body": "Attachment [13123_bdist.patch](tarball://root/attachments/some-uuid/ticket13123/13123_bdist.patch) by @jdemeyer created at 2012-09-14 06:58:05",
    "created_at": "2012-09-14T06:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155981",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [13123_bdist.patch](tarball://root/attachments/some-uuid/ticket13123/13123_bdist.patch) by @jdemeyer created at 2012-09-14 06:58:05



---

archive/issue_comments_155982.json:
```json
{
    "body": "Tested building from scratch, sdist, bdist, works fine.  Positive review to everything not authored by me.\n\nI agree with the deleting of the commented-out code in `sage/misc/explain_pickle.py`.  If people really want to do something with that code, it's still in the Mercurial history.\n\nMy reviewer patches still need review.",
    "created_at": "2012-09-16T17:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155982",
    "user": "https://github.com/jdemeyer"
}
```

Tested building from scratch, sdist, bdist, works fine.  Positive review to everything not authored by me.

I agree with the deleting of the commented-out code in `sage/misc/explain_pickle.py`.  If people really want to do something with that code, it's still in the Mercurial history.

My reviewer patches still need review.



---

archive/issue_comments_155983.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-09-16T20:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155983",
    "user": "https://github.com/ohanar"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_155984.json:
```json
{
    "body": "Mercurial should no longer be marked as a dependency for the extcode spkg (it is no longer used in the spkg-install).",
    "created_at": "2012-09-16T20:57:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155984",
    "user": "https://github.com/ohanar"
}
```

Mercurial should no longer be marked as a dependency for the extcode spkg (it is no longer used in the spkg-install).



---

archive/issue_comments_155985.json:
```json
{
    "body": "Attachment [13123_root_review.patch](tarball://root/attachments/some-uuid/ticket13123/13123_root_review.patch) by @jdemeyer created at 2012-09-16 21:45:01",
    "created_at": "2012-09-16T21:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155985",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [13123_root_review.patch](tarball://root/attachments/some-uuid/ticket13123/13123_root_review.patch) by @jdemeyer created at 2012-09-16 21:45:01



---

archive/issue_comments_155986.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-09-16T21:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155986",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_155987.json:
```json
{
    "body": "Looks all clear to me. I didn't really notice that the explain_pickle code was commented out last week, probably because of other stuff going on locally. But still happy that this is related to the rest of the ticket and not a freebie done at the same time.\n\nAs far as I can see it is ready to go.",
    "created_at": "2012-09-17T00:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155987",
    "user": "https://github.com/kiwifb"
}
```

Looks all clear to me. I didn't really notice that the explain_pickle code was commented out last week, probably because of other stuff going on locally. But still happy that this is related to the rest of the ticket and not a freebie done at the same time.

As far as I can see it is ready to go.



---

archive/issue_comments_155988.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-09-17T00:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155988",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_036135.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-09-18T06:41:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12951#event-36135"
}
```



---

archive/issue_comments_155989.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-18T06:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155989",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_155990.json:
```json
{
    "body": "apply to root repo",
    "created_at": "2012-09-19T06:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155990",
    "user": "https://github.com/jdemeyer"
}
```

apply to root repo



---

archive/issue_comments_155991.json:
```json
{
    "body": "Attachment [trac13123_root.patch](tarball://root/attachments/some-uuid/ticket13123/trac13123_root.patch) by @jdemeyer created at 2012-09-19 06:38:29\n\nRebased [attachment:trac13123_root.patch] because of fuzz.",
    "created_at": "2012-09-19T06:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155991",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [trac13123_root.patch](tarball://root/attachments/some-uuid/ticket13123/trac13123_root.patch) by @jdemeyer created at 2012-09-19 06:38:29

Rebased [attachment:trac13123_root.patch] because of fuzz.



---

archive/issue_comments_155992.json:
```json
{
    "body": "Why was `GAP_STAMP` changed from\n\n```\nGAP_STAMP = '%s/local/bin/gap_stamp'%SAGE_ROOT\n```\n\nto\n\n```\nGAP_STAMP = SAGE_EXTCODE\n```\n\n\nThis seems a mistake and might be the cause of #13963.",
    "created_at": "2013-01-17T11:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12951",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12951#issuecomment-155992",
    "user": "https://github.com/jdemeyer"
}
```

Why was `GAP_STAMP` changed from

```
GAP_STAMP = '%s/local/bin/gap_stamp'%SAGE_ROOT
```

to

```
GAP_STAMP = SAGE_EXTCODE
```


This seems a mistake and might be the cause of #13963.
