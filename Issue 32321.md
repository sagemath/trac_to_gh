# Issue 32321: Fix building python using system python with new setuptools installed

Issue created by migration from https://trac.sagemath.org/ticket/32558

Original creator: isuruf

Original creation time: 2021-09-25 05:11:55

CC:  mkoeppe

Otherwise it fails with


```
  [python3-3.9.6] error installing, exit status 1. End of log file:
  [python3-3.9.6]     File "/sage/local/var/tmp/sage/build/python3-3.9.6/src/./setup.py", line 33, in <module>
  [python3-3.9.6]       from distutils import log
  [python3-3.9.6]     File "/opt/conda/lib/python3.9/site-packages/_distutils_hack/__init__.py", line 88, in create_module
  [python3-3.9.6]       return importlib.import_module('setuptools._distutils')
  [python3-3.9.6]     File "/opt/conda/lib/python3.9/importlib/__init__.py", line 127, in import_module
  [python3-3.9.6]       return _bootstrap._gcd_import(name[level:], package, level)
  [python3-3.9.6]     File "/opt/conda/lib/python3.9/site-packages/setuptools/__init__.py", line 16, in <module>
  [python3-3.9.6]       import setuptools.version
  [python3-3.9.6]     File "/opt/conda/lib/python3.9/site-packages/setuptools/version.py", line 1, in <module>
  [python3-3.9.6]       import pkg_resources
  [python3-3.9.6]     File "/opt/conda/lib/python3.9/site-packages/pkg_resources/__init__.py", line 23, in <module>
  [python3-3.9.6]       import zipfile
  [python3-3.9.6]     File "/opt/conda/lib/python3.9/zipfile.py", line 6, in <module>
  [python3-3.9.6]       import binascii
  [python3-3.9.6]   ModuleNotFoundError: No module named 'binascii'
```


See https://github.com/isuruf/sage/runs/3704134042?check_suite_focus=true


---

Comment by isuruf created at 2021-09-25 05:12:02

Changing status from new to needs_review.


---

Comment by git created at 2021-09-25 05:22:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2021-09-25 17:09:03

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-09-25 17:09:03

OK, this fix makes sense


---

Comment by mkoeppe created at 2021-09-25 17:09:21

Changing priority from major to critical.


---

Comment by vbraun created at 2021-10-09 11:10:36

Resolution: fixed
