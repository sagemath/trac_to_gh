# Issue 25958: Tate algebras

archive/issues_025958.json:
```json
{
    "body": "CC:  tristanvaccon @thibautverron @xcaruso @roed314\n\nWe propose to implement Tate algebras over complete discrete valuation rings/fields.\n\nIssue created by migration from https://trac.sagemath.org/ticket/26195\n\n",
    "created_at": "2018-09-05T11:22:51Z",
    "labels": [
        "padics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Tate algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25958",
    "user": "@xcaruso"
}
```
CC:  tristanvaccon @thibautverron @xcaruso @roed314

We propose to implement Tate algebras over complete discrete valuation rings/fields.

Issue created by migration from https://trac.sagemath.org/ticket/26195





---

archive/issue_comments_366074.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-06T14:43:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366074",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366075.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-06T15:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366075",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366076.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-06T15:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366076",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366077.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-09-06T16:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366077",
    "user": "@ThibautVerron"
}
```

New commits:



---

archive/issue_comments_366078.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-07T09:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366078",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366079.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-07T09:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366079",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366080.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-07T18:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366080",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366081.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-08T09:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366081",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366082.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-09T00:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366082",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366083.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-10T07:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366083",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366084.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-11T16:08:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366084",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366085.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-12T11:46:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366085",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366086.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-12T13:32:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366086",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366087.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-13T12:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366087",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366088.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-13T19:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366088",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366089.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-14T15:10:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366089",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366090.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-19T15:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366090",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366091.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-20T09:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366091",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366092.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-20T12:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366092",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366093.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-20T21:23:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366093",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366094.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-20T22:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366094",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366095.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-21T06:11:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366095",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366096.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-22T22:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366096",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366097.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-25T12:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366097",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366098.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-25T13:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366098",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366099.json:
```json
{
    "body": "I cc roed because, David, you might know the answer at the following question.\n\nIn this ticket, we have implemented two parents, the first one for the Tate algebra itself and the second one for the monoid of terms of the Tate Algebra. Here is a basic example:\n\n\n```\nsage: A.<x,y> = TateAlgebra(Zp(2)); A\nTate Algebra in x (val >= 0), y (val >= 0) over 2-adic Field with capped relative precision 20\nsage: T = A.monoid_of_terms(); T\nMonoid of terms in x (val >= 0), y (val >= 0) over 2-adic Field with capped relative precision 20\n```\n\n\nWe now want to add a method for recovering `A` (the Tate algebra) from `T` (the monoid of terms). However a method `algebra` already exists: it is inherited from `sage.categories.sets_cat.Sets` and provides a very general construction of an algebra over an arbitrary set.\nWe believe that this general construction is not very relevant in our setting and that `T.algebra()` should instead output `A`. So our question is: is it allowed/appropriate to override the method `algebra` (keeping in mind that it comes from the category machinery)? \n\nIn any case, we will create a method `tate_algebra` but we think that having `algebra` at the same time (with a different behavior) could be confusing.",
    "created_at": "2018-09-26T09:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366099",
    "user": "@xcaruso"
}
```

I cc roed because, David, you might know the answer at the following question.

In this ticket, we have implemented two parents, the first one for the Tate algebra itself and the second one for the monoid of terms of the Tate Algebra. Here is a basic example:


```
sage: A.<x,y> = TateAlgebra(Zp(2)); A
Tate Algebra in x (val >= 0), y (val >= 0) over 2-adic Field with capped relative precision 20
sage: T = A.monoid_of_terms(); T
Monoid of terms in x (val >= 0), y (val >= 0) over 2-adic Field with capped relative precision 20
```


We now want to add a method for recovering `A` (the Tate algebra) from `T` (the monoid of terms). However a method `algebra` already exists: it is inherited from `sage.categories.sets_cat.Sets` and provides a very general construction of an algebra over an arbitrary set.
We believe that this general construction is not very relevant in our setting and that `T.algebra()` should instead output `A`. So our question is: is it allowed/appropriate to override the method `algebra` (keeping in mind that it comes from the category machinery)? 

In any case, we will create a method `tate_algebra` but we think that having `algebra` at the same time (with a different behavior) could be confusing.



---

archive/issue_comments_366100.json:
```json
{
    "body": "Yes, you are allowed (maybe even encouraged) to override `algebra`, and in this case, you should because you have a specialized implementation of the algebra.\n\nAlso, I want to just point out a common idiom that we've used is to define the monoid of monomials, then use `CombinatorialFreeModule` and the category of `AlgebrasWithBasis` to construct the corresponding algebra by implementing `product_on_basis`. Although this has been known to have some issues with overhead due to the number of indirections (which can be mitigated by directly implementing the multiplication in the element class), and this might not work for what you need.",
    "created_at": "2018-09-26T09:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366100",
    "user": "@tscrim"
}
```

Yes, you are allowed (maybe even encouraged) to override `algebra`, and in this case, you should because you have a specialized implementation of the algebra.

Also, I want to just point out a common idiom that we've used is to define the monoid of monomials, then use `CombinatorialFreeModule` and the category of `AlgebrasWithBasis` to construct the corresponding algebra by implementing `product_on_basis`. Although this has been known to have some issues with overhead due to the number of indirections (which can be mitigated by directly implementing the multiplication in the element class), and this might not work for what you need.



---

archive/issue_comments_366101.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-26T13:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366101",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366102.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-26T14:17:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366102",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366103.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-27T08:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366103",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366104.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-30T00:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366104",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366105.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-30T15:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366105",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366106.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-09-30T15:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366106",
    "user": "@xcaruso"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_366107.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-30T15:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366107",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366108.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-09-30T15:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366108",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366109.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-01T06:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366109",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366110.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-15T21:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366110",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366111.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-16T08:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366111",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366112.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-16T13:02:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366112",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366113.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-16T14:30:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366113",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366114.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-17T05:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366114",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366115.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-17T08:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366115",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366116.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-17T11:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366116",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366117.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-17T11:46:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366117",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366118.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-19T08:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366118",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366119.json:
```json
{
    "body": "I wanted to point out a couple of points:\n\n- for the methods `log` and `exp`, I essentially copy the code in `sage.rings.padics.padic_element_generic`; so I wonder if it would be a good idea to factorize this code. One solution would be to split the current class `pAdicElementGeneric` into two parts (e.g `pAdicElementGeneric` and `pAdicNumberGeneric`), the second one inheriting from the first one, and let Tate series derive from the most general one.\n\n- in the method `lift_to_precision`, I defined a nested function `lift_without_error` but I think it would be better to add a keyword argument `no_error` (or something like that) to `lift_to_precision` (for p-adic number); what's your opinion?",
    "created_at": "2018-10-19T08:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366119",
    "user": "@xcaruso"
}
```

I wanted to point out a couple of points:

- for the methods `log` and `exp`, I essentially copy the code in `sage.rings.padics.padic_element_generic`; so I wonder if it would be a good idea to factorize this code. One solution would be to split the current class `pAdicElementGeneric` into two parts (e.g `pAdicElementGeneric` and `pAdicNumberGeneric`), the second one inheriting from the first one, and let Tate series derive from the most general one.

- in the method `lift_to_precision`, I defined a nested function `lift_without_error` but I think it would be better to add a keyword argument `no_error` (or something like that) to `lift_to_precision` (for p-adic number); what's your opinion?



---

archive/issue_comments_366120.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-19T11:58:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366120",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366121.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-10-20T09:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366121",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366122.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-01T22:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366122",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366123.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-01T22:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366123",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_366124.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-02T17:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366124",
    "user": "@roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_366125.json:
```json
{
    "body": "Looks good!",
    "created_at": "2018-11-02T17:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366125",
    "user": "@roed314"
}
```

Looks good!



---

archive/issue_comments_366126.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-11-07T11:28:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366126",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_366127.json:
```json
{
    "body": "Tate algebras elements are now among the 10 files having the most failures with python3. See #26212.\n\nEDIT:\nAnd this is also bad:\n\n```\nsage -t --long src/sage/rings/tate_algebra_ideal.pyx  # 29 doctests failed\n```\n\n\nOne example of failure: bad use of range:\n\n```\nFile \"sage/rings/tate_algebra_ideal.pyx\", line 83, in sage.rings.tate_algebra_ideal._groebner_basis_buchberger (build/cythonized/sage/rings/tate_algebra_ideal.c:3488)\n        indices = range(l)\n    TypeError: Expected list, got range\n```\n\n\nOther failure: change dict while iterating over this dict:\n\n```\n      File \"sage/rings/tate_algebra_element.pyx\", line 1151, in sage.rings.tate_algebra_element.TateAlgebraElement._normalize (build/cythonized/sage/rings/tate_algebra_element.c:12421)\n        for (e,c) in self._poly.__repn.items():\n    RuntimeError: dictionary changed size during iteration\n```\n",
    "created_at": "2018-11-12T20:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366127",
    "user": "@fchapoton"
}
```

Tate algebras elements are now among the 10 files having the most failures with python3. See #26212.

EDIT:
And this is also bad:

```
sage -t --long src/sage/rings/tate_algebra_ideal.pyx  # 29 doctests failed
```


One example of failure: bad use of range:

```
File "sage/rings/tate_algebra_ideal.pyx", line 83, in sage.rings.tate_algebra_ideal._groebner_basis_buchberger (build/cythonized/sage/rings/tate_algebra_ideal.c:3488)
        indices = range(l)
    TypeError: Expected list, got range
```


Other failure: change dict while iterating over this dict:

```
      File "sage/rings/tate_algebra_element.pyx", line 1151, in sage.rings.tate_algebra_element.TateAlgebraElement._normalize (build/cythonized/sage/rings/tate_algebra_element.c:12421)
        for (e,c) in self._poly.__repn.items():
    RuntimeError: dictionary changed size during iteration
```




---

archive/issue_comments_366128.json:
```json
{
    "body": "python3 problems are fixed in #26692, please review",
    "created_at": "2018-11-13T12:49:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366128",
    "user": "@fchapoton"
}
```

python3 problems are fixed in #26692, please review



---

archive/issue_comments_366129.json:
```json
{
    "body": "Sorry about that!  I didn't see any py3 failures on the patchbot, so I thought it was okay.  I've got a py3 build, so I'll try to check big tickets there from now on.",
    "created_at": "2018-11-13T19:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366129",
    "user": "@roed314"
}
```

Sorry about that!  I didn't see any py3 failures on the patchbot, so I thought it was okay.  I've got a py3 build, so I'll try to check big tickets there from now on.



---

archive/issue_comments_366130.json:
```json
{
    "body": "This should be fixed:\n\n```\n[288/306] Cythonizing sage/rings/tate_algebra_element.pyx\nwarning: sage/rings/tate_algebra_element.pyx:301:10: Compatible but non-identical C method '_mul_' not redeclared in definition part of extension type 'TateAlgebraTerm'.  This may cause incorrect vtables to be generated.\nwarning: sage/structure/element.pxd:188:15: Previous declaration is here\n```\n",
    "created_at": "2018-12-01T11:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366130",
    "user": "@jdemeyer"
}
```

This should be fixed:

```
[288/306] Cythonizing sage/rings/tate_algebra_element.pyx
warning: sage/rings/tate_algebra_element.pyx:301:10: Compatible but non-identical C method '_mul_' not redeclared in definition part of extension type 'TateAlgebraTerm'.  This may cause incorrect vtables to be generated.
warning: sage/structure/element.pxd:188:15: Previous declaration is here
```




---

archive/issue_comments_366131.json:
```json
{
    "body": "Essentially, you're missing a declaration for `cpdef _mul_` in `tate_algebra_element.pxd`",
    "created_at": "2018-12-01T11:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366131",
    "user": "@jdemeyer"
}
```

Essentially, you're missing a declaration for `cpdef _mul_` in `tate_algebra_element.pxd`



---

archive/issue_comments_366132.json:
```json
{
    "body": "There are also some thing I consider bad style, for example\n\n```\n    @coerce_binop\n    def __floordiv__(self, other):\n```\n\nWhy not use `_floordiv_` from the coercion model?\n\nThere is also the inefficient\n\n```\nfrom sage.structure.richcmp import op_EQ, op_NE, op_LT, op_GT, op_LE, op_GE\n```\n\nwhich should be\n\n```\nfrom cpython.object cimport Py_LT, Py_LE, Py_EQ, Py_NE, Py_GT, Py_GE\n```\n",
    "created_at": "2018-12-01T11:47:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366132",
    "user": "@jdemeyer"
}
```

There are also some thing I consider bad style, for example

```
    @coerce_binop
    def __floordiv__(self, other):
```

Why not use `_floordiv_` from the coercion model?

There is also the inefficient

```
from sage.structure.richcmp import op_EQ, op_NE, op_LT, op_GT, op_LE, op_GE
```

which should be

```
from cpython.object cimport Py_LT, Py_LE, Py_EQ, Py_NE, Py_GT, Py_GE
```




---

archive/issue_comments_366133.json:
```json
{
    "body": "And isn't `_pushout_family()` really just `coercion_model.common_parent()`?",
    "created_at": "2018-12-01T11:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366133",
    "user": "@jdemeyer"
}
```

And isn't `_pushout_family()` really just `coercion_model.common_parent()`?



---

archive/issue_comments_366134.json:
```json
{
    "body": "This is reinventing `sage.structure.richcmp.rich_to_bool`:\n\n```\n        if op == op_LT:\n            return c < 0\n        if op == op_LE:\n            return c <= 0\n        if op == op_GT:\n            return c > 0\n        if op == op_GE:\n            return c >= 0\n```\n",
    "created_at": "2018-12-01T11:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366134",
    "user": "@jdemeyer"
}
```

This is reinventing `sage.structure.richcmp.rich_to_bool`:

```
        if op == op_LT:
            return c < 0
        if op == op_LE:
            return c <= 0
        if op == op_GT:
            return c > 0
        if op == op_GE:
            return c >= 0
```




---

archive/issue_comments_366135.json:
```json
{
    "body": "Thanks Jeroen for your useful comments!\n\nI addressed all of them except this one:\n> And isn't `_pushout_family()` really just `coercion_model.common_parent()`?\nbecause I'm not sure that `_pushout_family()` and `coercion_model.common_parent()` do the same job. At least if I replace the code of `_pushout_family()` by:\n\n```\n    elements = [initial] + list(elements)\n    return coercion_model.common_parent(*elements)\n```\n\nI get many doctest failures.",
    "created_at": "2018-12-03T20:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366135",
    "user": "@xcaruso"
}
```

Thanks Jeroen for your useful comments!

I addressed all of them except this one:
> And isn't `_pushout_family()` really just `coercion_model.common_parent()`?
because I'm not sure that `_pushout_family()` and `coercion_model.common_parent()` do the same job. At least if I replace the code of `_pushout_family()` by:

```
    elements = [initial] + list(elements)
    return coercion_model.common_parent(*elements)
```

I get many doctest failures.



---

archive/issue_comments_366136.json:
```json
{
    "body": "cf ticket #26807",
    "created_at": "2018-12-03T20:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25958",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25958#issuecomment-366136",
    "user": "@xcaruso"
}
```

cf ticket #26807
