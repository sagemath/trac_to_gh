# Issue 33232: %matplotlib widget does not work in the scope of %display latex

archive/issues_033232.json:
```json
{
    "body": "CC:  @kwankyu\n\nThe magic `%matplotlib widget`, which provides interactive Matplotlib display via the package [ipympl](https://github.com/matplotlib/ipympl) introduced in #32069, is inoperative in the scope of `%display latex`: \nin a Jupyter notebook the cell\n\n```\n%display latex\n%matplotlib widget\nimport matplotlib.pyplot as plt\nplt.plot([1, 2, 3, 4])\nplt.ylabel('some numbers')\nplt.show()\n```\n\nresults in the raw output\n\n```\n\ud835\ude72\ud835\ude8a\ud835\ude97\ud835\ude9f\ud835\ude8a\ud835\ude9c(\ud835\ude9d\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude8b\ud835\ude8a\ud835\ude9b=\ud835\ude83\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude8b\ud835\ude8a\ud835\ude9b(\ud835\ude9d\ud835\ude98\ud835\ude98\ud835\ude95\ud835\ude92\ud835\ude9d\ud835\ude8e\ud835\ude96\ud835\ude9c=[('\ud835\ude77\ud835\ude98\ud835\ude96\ud835\ude8e', '\ud835\ude81\ud835\ude8e\ud835\ude9c\ud835\ude8e\ud835\ude9d \ud835\ude98\ud835\ude9b\ud835\ude92\ud835\ude90\ud835\ude92\ud835\ude97\ud835\ude8a\ud835\ude95 \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude91\ud835\ude98\ud835\ude96\ud835\ude8e', '\ud835\ude91\ud835\ude98\ud835\ude96\ud835\ude8e'), ('\ud835\ude71\ud835\ude8a\ud835\ude8c\ud835\ude94', '\ud835\ude71\ud835\ude8a\ud835\ude8c\ud835\ude94 \ud835\ude9d\ud835\ude98 \ud835\ude99\ud835\ude9b\ud835\ude8e\ud835\ude9f\ud835\ude92\ud835\ude98\ud835\ude9e\ud835\ude9c \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\u23af\ud835\ude95\ud835\ude8e\ud835\ude8f\ud835\ude9d', '\ud835\ude8b\ud835\ude8a\ud835\ude8c\ud835\ude94'), ('\ud835\ude75\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d', '\ud835\ude75\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d \ud835\ude9d\ud835\ude98 \ud835\ude97\ud835\ude8e\ud835\udea1\ud835\ude9d \ud835\ude9f\ud835\ude92\ud835\ude8e\ud835\udea0', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\u23af\ud835\ude9b\ud835\ude92\ud835\ude90\ud835\ude91\ud835\ude9d', '\ud835\ude8f\ud835\ude98\ud835\ude9b\ud835\udea0\ud835\ude8a\ud835\ude9b\ud835\ude8d'), ('\ud835\ude7f\ud835\ude8a\ud835\ude97', '\ud835\ude7b\ud835\ude8e\ud835\ude8f\ud835\ude9d \ud835\ude8b\ud835\ude9e\ud835\ude9d\ud835\ude9d\ud835\ude98\ud835\ude97 \ud835\ude99\ud835\ude8a\ud835\ude97\ud835\ude9c, \ud835\ude81\ud835\ude92\ud835\ude90\ud835\ude91\ud835\ude9d \ud835\ude8b\ud835\ude9e\ud835\ude9d\ud835\ude9d\ud835\ude98\ud835\ude97 \ud835\udea3\ud835\ude98\ud835\ude98\ud835\ude96\ud835\ude9c\\\ud835\ude97\ud835\udea1/\ud835\udea2 \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\udea1\ud835\ude92\ud835\ude9c, \ud835\ude72\ud835\ude83\ud835\ude81\ud835\ude7b \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\ude9c\ud835\ude99\ud835\ude8e\ud835\ude8c\ud835\ude9d', '\ud835\ude8a\ud835\ude9b\ud835\ude9b\ud835\ude98\ud835\udea0\ud835\ude9c', '\ud835\ude99\ud835\ude8a\ud835\ude97'), ('\ud835\ude89\ud835\ude98\ud835\ude98\ud835\ude96', '\ud835\ude89\ud835\ude98\ud835\ude98\ud835\ude96 \ud835\ude9d\ud835\ude98 \ud835\ude9b\ud835\ude8e\ud835\ude8c\ud835\ude9d\ud835\ude8a\ud835\ude97\ud835\ude90\ud835\ude95\ud835\ude8e\\\ud835\ude97\ud835\udea1/\ud835\udea2 \ud835\ude8f\ud835\ude92\ud835\udea1\ud835\ude8e\ud835\ude9c \ud835\ude8a\ud835\udea1\ud835\ude92\ud835\ude9c', '\ud835\ude9c\ud835\ude9a\ud835\ude9e\ud835\ude8a\ud835\ude9b\ud835\ude8e\u23af\ud835\ude98', '\ud835\udea3\ud835\ude98\ud835\ude98\ud835\ude96'), ('\ud835\ude73\ud835\ude98\ud835\udea0\ud835\ude97\ud835\ude95\ud835\ude98\ud835\ude8a\ud835\ude8d', '\ud835\ude73\ud835\ude98\ud835\udea0\ud835\ude97\ud835\ude95\ud835\ude98\ud835\ude8a\ud835\ude8d \ud835\ude99\ud835\ude95\ud835\ude98\ud835\ude9d', '\ud835\ude8f\ud835\ude95\ud835\ude98\ud835\ude99\ud835\ude99\ud835\udea2\u23af\ud835\ude98', '\ud835\ude9c\ud835\ude8a\ud835\ude9f\ud835\ude8e\u23af\ud835\ude8f\ud835\ude92\ud835\ude90\ud835\ude9e\ud835\ude9b\ud835\ude8e')]))\n```\n\ninstead of the interactive Matplotlib window\nSee also this [test notebook](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb?flush). \n\nThis is problematic for Jupyterlab, where the magic `%matplotlib notebook` is not supported and must be replaced by `%matplotlib widget`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33469\n\n",
    "created_at": "2022-03-06T10:31:53Z",
    "labels": [
        "component: notebook",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "%matplotlib widget does not work in the scope of %display latex",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33232",
    "user": "https://github.com/egourgoulhon"
}
```
CC:  @kwankyu

The magic `%matplotlib widget`, which provides interactive Matplotlib display via the package [ipympl](https://github.com/matplotlib/ipympl) introduced in #32069, is inoperative in the scope of `%display latex`: 
in a Jupyter notebook the cell

```
%display latex
%matplotlib widget
import matplotlib.pyplot as plt
plt.plot([1, 2, 3, 4])
plt.ylabel('some numbers')
plt.show()
```

results in the raw output

```
ð™²ðšŠðš—ðšŸðšŠðšœ(ðšðš˜ðš˜ðš•ðš‹ðšŠðš›=ðšƒðš˜ðš˜ðš•ðš‹ðšŠðš›(ðšðš˜ðš˜ðš•ðš’ðšðšŽðš–ðšœ=[('ð™·ðš˜ðš–ðšŽ', 'ðšðšŽðšœðšŽðš ðš˜ðš›ðš’ðšðš’ðš—ðšŠðš• ðšŸðš’ðšŽðš ', 'ðš‘ðš˜ðš–ðšŽ', 'ðš‘ðš˜ðš–ðšŽ'), ('ð™±ðšŠðšŒðš”', 'ð™±ðšŠðšŒðš” ðšðš˜ ðš™ðš›ðšŽðšŸðš’ðš˜ðšžðšœ ðšŸðš’ðšŽðš ', 'ðšŠðš›ðš›ðš˜ðš âŽ¯ðš•ðšŽðšðš', 'ðš‹ðšŠðšŒðš”'), ('ð™µðš˜ðš›ðš ðšŠðš›ðš', 'ð™µðš˜ðš›ðš ðšŠðš›ðš ðšðš˜ ðš—ðšŽðš¡ðš ðšŸðš’ðšŽðš ', 'ðšŠðš›ðš›ðš˜ðš âŽ¯ðš›ðš’ðšðš‘ðš', 'ðšðš˜ðš›ðš ðšŠðš›ðš'), ('ð™¿ðšŠðš—', 'ð™»ðšŽðšðš ðš‹ðšžðšðšðš˜ðš— ðš™ðšŠðš—ðšœ, ðšðš’ðšðš‘ðš ðš‹ðšžðšðšðš˜ðš— ðš£ðš˜ðš˜ðš–ðšœ\ðš—ðš¡/ðš¢ ðšðš’ðš¡ðšŽðšœ ðšŠðš¡ðš’ðšœ, ð™²ðšƒðšð™» ðšðš’ðš¡ðšŽðšœ ðšŠðšœðš™ðšŽðšŒðš', 'ðšŠðš›ðš›ðš˜ðš ðšœ', 'ðš™ðšŠðš—'), ('ðš‰ðš˜ðš˜ðš–', 'ðš‰ðš˜ðš˜ðš– ðšðš˜ ðš›ðšŽðšŒðšðšŠðš—ðšðš•ðšŽ\ðš—ðš¡/ðš¢ ðšðš’ðš¡ðšŽðšœ ðšŠðš¡ðš’ðšœ', 'ðšœðššðšžðšŠðš›ðšŽâŽ¯ðš˜', 'ðš£ðš˜ðš˜ðš–'), ('ð™³ðš˜ðš ðš—ðš•ðš˜ðšŠðš', 'ð™³ðš˜ðš ðš—ðš•ðš˜ðšŠðš ðš™ðš•ðš˜ðš', 'ðšðš•ðš˜ðš™ðš™ðš¢âŽ¯ðš˜', 'ðšœðšŠðšŸðšŽâŽ¯ðšðš’ðšðšžðš›ðšŽ')]))
```

instead of the interactive Matplotlib window
See also this [test notebook](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb?flush). 

This is problematic for Jupyterlab, where the magic `%matplotlib notebook` is not supported and must be replaced by `%matplotlib widget`.

Issue created by migration from https://trac.sagemath.org/ticket/33469





---

archive/issue_comments_472682.json:
```json
{
    "body": "Changing keywords from \"\" to \"jupyterlab, matplotlib widget\".",
    "created_at": "2022-03-06T10:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472682",
    "user": "https://github.com/egourgoulhon"
}
```

Changing keywords from "" to "jupyterlab, matplotlib widget".



---

archive/issue_comments_472683.json:
```json
{
    "body": "I hit presumably the same problem this morning in class with\nstudents that wanted to build widgets in Sage.\n\n# How to reproduce\n\n\n```\n%display latex\nimport ipywidgets\nipywidgets.IntSlider()\n```\n\noutputs a string representation instead of the slider:\n\n```\n\ud835\ude78\ud835\ude97\ud835\ude9d\ud835\ude82\ud835\ude95\ud835\ude92\ud835\ude8d\ud835\ude8e\ud835\ude9b(\ud835\ude9f\ud835\ude8a\ud835\ude95\ud835\ude9e\ud835\ude8e=\ud835\udff6)\n```\n\n\n# Proposed fix\n\nSage's formatter has a list of \"Python native types\"\nthat should be left alone during display. This list contains\n`interactive`, the type of objects produced by ``@`interact`. This\ncould be generalized to any jupyter widget (type `ipywigets.Widget`),\nwhich should include the widgets produced by ipyml.\n\n# Temporary workaround\n\nApply the proposed fix by monkey patching:\n\n\n```\nsage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipywidgets.Widget,)\n```\n",
    "created_at": "2022-03-09T11:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472683",
    "user": "https://github.com/nthiery"
}
```

I hit presumably the same problem this morning in class with
students that wanted to build widgets in Sage.

# How to reproduce


```
%display latex
import ipywidgets
ipywidgets.IntSlider()
```

outputs a string representation instead of the slider:

```
ð™¸ðš—ðšðš‚ðš•ðš’ðšðšŽðš›(ðšŸðšŠðš•ðšžðšŽ=ðŸ¶)
```


# Proposed fix

Sage's formatter has a list of "Python native types"
that should be left alone during display. This list contains
`interactive`, the type of objects produced by ``@`interact`. This
could be generalized to any jupyter widget (type `ipywigets.Widget`),
which should include the widgets produced by ipyml.

# Temporary workaround

Apply the proposed fix by monkey patching:


```
sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipywidgets.Widget,)
```




---

archive/issue_comments_472684.json:
```json
{
    "body": "Eric: does the workaround work for ipyml?\n\nCheers,",
    "created_at": "2022-03-09T11:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472684",
    "user": "https://github.com/nthiery"
}
```

Eric: does the workaround work for ipyml?

Cheers,



---

archive/issue_comments_472685.json:
```json
{
    "body": "Replying to [comment:4 nthiery]:\n> Eric: does the workaround work for ipyml?\n>\nYes, absolutely:\n\n```\nimport ipympl\nsage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipympl.backend_nbagg.Canvas,)\n```\n\nfixes the issue. Thank you Nicolas!",
    "created_at": "2022-03-09T17:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472685",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:4 nthiery]:
> Eric: does the workaround work for ipyml?
>
Yes, absolutely:

```
import ipympl
sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipympl.backend_nbagg.Canvas,)
```

fixes the issue. Thank you Nicolas!



---

archive/issue_comments_472686.json:
```json
{
    "body": "Replying to [comment:5 egourgoulhon]:\n> Replying to [comment:4 nthiery]:\n> > Eric: does the workaround work for ipyml?\n> >\n> Yes, absolutely:\n> {{{\n> import ipympl\n> sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipympl.backend_nbagg.Canvas,)\n> }}}\n> fixes the issue. Thank you Nicolas!\n\nActually, this specific addition is not even necessary: as you pointed out\n\n```\nimport ipywidgets\nsage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipywidgets.Widget,)\n```\n\nis more generic and suffices to fix the issue with `ipympl`.",
    "created_at": "2022-03-09T17:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472686",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:5 egourgoulhon]:
> Replying to [comment:4 nthiery]:
> > Eric: does the workaround work for ipyml?
> >
> Yes, absolutely:
> {{{
> import ipympl
> sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipympl.backend_nbagg.Canvas,)
> }}}
> fixes the issue. Thank you Nicolas!

Actually, this specific addition is not even necessary: as you pointed out

```
import ipywidgets
sage.repl.display.formatter.IPYTHON_NATIVE_TYPES += (ipywidgets.Widget,)
```

is more generic and suffices to fix the issue with `ipympl`.



---

archive/issue_comments_472687.json:
```json
{
    "body": "Great. So the next step is to implement the fix directly in Sage.\n\nI might not be able to do it in the next days, so anyone feel free\nto take the lead :-)",
    "created_at": "2022-03-09T17:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472687",
    "user": "https://github.com/nthiery"
}
```

Great. So the next step is to implement the fix directly in Sage.

I might not be able to do it in the next days, so anyone feel free
to take the lead :-)



---

archive/issue_comments_472688.json:
```json
{
    "body": "Miracle: upgrading my sage was quick, and git trac still functional on my laptop.\nFirst submission in a loooong time ...\n----\nNew commits:",
    "created_at": "2022-03-09T18:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472688",
    "user": "https://github.com/nthiery"
}
```

Miracle: upgrading my sage was quick, and git trac still functional on my laptop.
First submission in a loooong time ...
----
New commits:



---

archive/issue_comments_472689.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-03-09T19:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_472690.json:
```json
{
    "body": "Well, needs review I guess.\n\nI tried adding a test, but actually the test pass even before the patch.\nIdeas anyone for a better test?",
    "created_at": "2022-03-09T19:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472690",
    "user": "https://github.com/nthiery"
}
```

Well, needs review I guess.

I tried adding a test, but actually the test pass even before the patch.
Ideas anyone for a better test?



---

archive/issue_comments_472691.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-03-09T19:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472691",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_472692.json:
```json
{
    "body": "Replying to [comment:11 nthiery]:\n> I tried adding a test, but actually the test pass even before the patch.\n> Ideas anyone for a better test?\n\nI have no idea, either. But if the test does not test the patch, then I think it is of no use.\n\nOn the other hand, any change in the output system may cause unexpected side effects which are detected only by human eyes. It seems that the best we can do is to check a good many examples with the patch. There is another ticket #11362 that needs the same scrutiny.",
    "created_at": "2022-03-10T05:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472692",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:11 nthiery]:
> I tried adding a test, but actually the test pass even before the patch.
> Ideas anyone for a better test?

I have no idea, either. But if the test does not test the patch, then I think it is of no use.

On the other hand, any change in the output system may cause unexpected side effects which are detected only by human eyes. It seems that the best we can do is to check a good many examples with the patch. There is another ticket #11362 that needs the same scrutiny.



---

archive/issue_comments_472693.json:
```json
{
    "body": "Replying to [comment:12 klee]:\n> Replying to [comment:11 nthiery]:\n> It seems that the best we can do is to check a good many examples with the patch. \n\n`@`Eric. I suggest making a \"standard proof sheet\" from the notebooks here\n\nhttps://trac.sagemath.org/ticket/32208#comment:13",
    "created_at": "2022-03-10T06:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472693",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:12 klee]:
> Replying to [comment:11 nthiery]:
> It seems that the best we can do is to check a good many examples with the patch. 

`@`Eric. I suggest making a "standard proof sheet" from the notebooks here

https://trac.sagemath.org/ticket/32208#comment:13



---

archive/issue_comments_472694.json:
```json
{
    "body": "> But if the test does not test the patch, then I think it is of no use.\n\nAgreed. I only included it to be precise about what I tried, in the\nhope someone would find something better. This commit should indeed\nbe reverted / popped before merging.",
    "created_at": "2022-03-10T07:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472694",
    "user": "https://github.com/nthiery"
}
```

> But if the test does not test the patch, then I think it is of no use.

Agreed. I only included it to be precise about what I tried, in the
hope someone would find something better. This commit should indeed
be reverted / popped before merging.



---

archive/issue_comments_472695.json:
```json
{
    "body": "Replying to [comment:13 klee]:\n> \n> `@`Eric. I suggest making a \"standard proof sheet\" from the notebooks here\n> \n> #32208#comment:13\n\nI've already updated [test_display_latex.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb), but I'll prepare a better one soon, including threejs animations and so on...",
    "created_at": "2022-03-10T09:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472695",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:13 klee]:
> 
> `@`Eric. I suggest making a "standard proof sheet" from the notebooks here
> 
> #32208#comment:13

I've already updated [test_display_latex.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb), but I'll prepare a better one soon, including threejs animations and so on...



---

archive/issue_comments_472696.json:
```json
{
    "body": "Replying to [comment:14 nthiery]:\n> > But if the test does not test the patch, then I think it is of no use.\n> \n> Agreed. I only included it to be precise about what I tried, in the\n> hope someone would find something better. This commit should indeed\n> be reverted / popped before merging.\nI don't see any simple doctest either, so yes, maybe the best is to revert this.",
    "created_at": "2022-03-10T09:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472696",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:14 nthiery]:
> > But if the test does not test the patch, then I think it is of no use.
> 
> Agreed. I only included it to be precise about what I tried, in the
> hope someone would find something better. This commit should indeed
> be reverted / popped before merging.
I don't see any simple doctest either, so yes, maybe the best is to revert this.



---

archive/issue_comments_472697.json:
```json
{
    "body": "Replying to [comment:15 egourgoulhon]:\n> Replying to [comment:13 klee]:\n> > \n> > `@`Eric. I suggest making a \"standard proof sheet\" from the notebooks here\n> > \n> > #32208#comment:13\n> \n> I've already updated [test_display_latex.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb), but I'll prepare a better one soon, including threejs animations and so on...\n\nHere it is : [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb).\nNote that it lies in a git repository, so feel free to amend it by sending a pull request to [SageMathTest](https://github.com/egourgoulhon/SageMathTest). \n\nIt would be nice to have this ticket merged in Sage 9.6. IMHO, it is ready to go. Simply maybe the test mentioned in comment:11 could be removed, given that the actual test is the \"human-eyes\" one, e.g. via the above notebook.",
    "created_at": "2022-03-23T10:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472697",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:15 egourgoulhon]:
> Replying to [comment:13 klee]:
> > 
> > `@`Eric. I suggest making a "standard proof sheet" from the notebooks here
> > 
> > #32208#comment:13
> 
> I've already updated [test_display_latex.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display_latex.ipynb), but I'll prepare a better one soon, including threejs animations and so on...

Here it is : [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb).
Note that it lies in a git repository, so feel free to amend it by sending a pull request to [SageMathTest](https://github.com/egourgoulhon/SageMathTest). 

It would be nice to have this ticket merged in Sage 9.6. IMHO, it is ready to go. Simply maybe the test mentioned in comment:11 could be removed, given that the actual test is the "human-eyes" one, e.g. via the above notebook.



---

archive/issue_comments_472698.json:
```json
{
    "body": "Replying to [comment:17 egourgoulhon]:\n\n> It would be nice to have this ticket merged in Sage 9.6. IMHO, it is ready to go. Simply maybe the test mentioned in comment:11 could be removed, given that the actual test is the \"human-eyes\" one, e.g. via the above notebook.\n\n+1 for positive review.",
    "created_at": "2022-03-23T12:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472698",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:17 egourgoulhon]:

> It would be nice to have this ticket merged in Sage 9.6. IMHO, it is ready to go. Simply maybe the test mentioned in comment:11 could be removed, given that the actual test is the "human-eyes" one, e.g. via the above notebook.

+1 for positive review.



---

archive/issue_comments_472699.json:
```json
{
    "body": "Replying to [comment:17 egourgoulhon]:\n> Here it is : [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb)...\n\nThank you!",
    "created_at": "2022-03-23T12:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472699",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:17 egourgoulhon]:
> Here it is : [test_display.ipynb](https://nbviewer.org/github/egourgoulhon/SageMathTest/blob/master/Notebooks/test_display.ipynb)...

Thank you!



---

archive/issue_comments_472700.json:
```json
{
    "body": "OK, let's move on. Thank you Nicolas for the fix!",
    "created_at": "2022-03-25T09:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472700",
    "user": "https://github.com/egourgoulhon"
}
```

OK, let's move on. Thank you Nicolas for the fix!



---

archive/issue_comments_472701.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-25T09:46:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472701",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_030046.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2022-03-30T22:33:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/33232#event-30046"
}
```



---

archive/issue_comments_472702.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-03-30T22:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33232#issuecomment-472702",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
