# Issue 15204: Clean up ecl SIGCHLD configuration

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2013-11-21 02:10:12

CC:  snark jdemeyer fbissey

Switch from patching ecl to using `ecl_set_option(ECL_OPT_TRAP_SIGCHLD, 0)`.

This ticket was originally a part of #14636.


---

Comment by vbraun created at 2013-11-21 02:12:07

New commits:


---

Comment by vbraun created at 2013-11-21 02:12:07

Changing status from new to needs_review.


---

Comment by vbraun created at 2013-11-21 02:15:21

I suspected that this is related to the observed test failure on eno/skynet (#15440) but it is actually not. But its better than what we have so we should ship it.


---

Comment by fbissey created at 2013-11-21 02:20:37

Haven't been active in sage for a bit. I needed to back off a little bit. I have to agree that looks much nicer and you added a nice looking doctest.


---

Comment by Snark created at 2013-11-21 13:48:19

The patch to use ecl_set_option looks good, but the doctest patch looks very wrong : it doesn't check that ECL-in-sage doesn't use SIGCHLD, but rather that SIGCHLD isn't used at all!


---

Comment by Snark created at 2013-11-21 13:48:19

Changing status from needs_review to needs_work.


---

Comment by vbraun created at 2013-11-21 15:23:57

I don't understand what you are trying to say. It tests both that neither Sage nor ECL set a SIGCHLD handler, i.e. that it remains NULL.


---

Comment by git created at 2013-11-21 15:30:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2013-11-21 15:31:22

Is this clearer?


---

Comment by vbraun created at 2013-11-21 15:31:22

Changing status from needs_work to needs_review.


---

Comment by jpflori created at 2013-12-25 15:48:14

Changing keywords from "" to "ecl signal handling sigchld".


---

Comment by jpflori created at 2013-12-25 15:48:14

Looks fine to me.
Note I did not run the testsuite, but let's leave that to the patchbot.
And hopefully we'll also update ECL at some point, the sage-on-gentoo folk did that though it was not painless.


---

Comment by jpflori created at 2013-12-25 15:48:14

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-01-05 00:32:14

Resolution: fixed
