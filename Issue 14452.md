# Issue 14452: slight QA with flint definition

Issue created by migration from Trac.

Original creator: fbissey

Original creation time: 2013-05-29 02:21:40

Assignee: tbd

CC:  strogdon

When building sage in sage-on-gentoo we get the following QA report

```
 * QA Notice: Package triggers severe warnings which indicate that it
 *            may exhibit random runtime failures.
 * build/cythonized/sage/libs/flint/flint.c:664:3: warning: implicit declaration of function '_fmpz_cleanup_mpz_content' [-Wimplicit-function-declaration]
```

Which is quite correct as _fmpz_cleanup* functions are defined in flint/fmpz.h while the pxd file only includes flint/flint.h. It is possible that this file is included somehow, but it is cleaner just to add it.


---

Comment by fbissey created at 2013-05-29 02:23:44

add a declaration for flint functions


---

Comment by fbissey created at 2013-05-29 02:26:11

Changing status from new to needs_review.


---

Attachment

With patch for review.


---

Comment by jdemeyer created at 2013-05-30 13:37:55

Please make the ticket title more more descriptive and fill in your name as author


---

Comment by jdemeyer created at 2013-05-30 13:37:55

Changing component from PLEASE CHANGE to cython.


---

Comment by jdemeyer created at 2013-05-31 13:26:02

Changing status from needs_review to needs_info.


---

Comment by fbissey created at 2013-05-31 21:00:42

Changing status from needs_info to needs_review.


---

Comment by fbissey created at 2013-05-31 21:00:42

I should also note that a similar warning existed with flint 1.x and we had a similar patch in sage-on-gentoo from sage-4.4.2 onwards. The QA at the time suggested that it could cause memory leaks.


---

Comment by fbissey created at 2013-06-01 11:08:12

Would you like to review this Steve?


---

Comment by strogdon created at 2013-06-01 19:29:10

Changing status from needs_review to positive_review.


---

Comment by strogdon created at 2013-06-01 19:29:10

Yes, this is the thing to do. It's easy to see this from the sage-on-gentoo side. However, from vanilla Sage without the patch and with warnings turned on one gets

```
build/cythonized/sage/libs/flint/flint.c: In function ‘__pyx_pf_4sage_4libs_5flint_5flint_free_flint_stack’:
build/cythonized/sage/libs/flint/flint.c:664:3: warning: implicit declaration of function ‘_fmpz_cleanup_mpz_content’ [-Wimplicit-function-declaration]
```

which goes away after the patch is applied.


---

Comment by jdemeyer created at 2013-06-06 12:33:52

Resolution: fixed
