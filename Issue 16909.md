# Issue 16909: Random failure in doctest/test.py

archive/issues_016909.json:
```json
{
    "body": "Keywords: random_fail\n\nThis one seems to be associated with high cpu load, looks like some race condition in the doctest framework:\n\n```\nsage -t --long src/sage/doctest/test.py\n**********************************************************************\nFile \"src/sage/doctest/test.py\", line 180, in sage.doctest.test\nFailed example:\n    subprocess.call([\"sage\", \"-t\",  \"--warn-long\", \"0\", \"interrupt.rst\"], **kwds)  # long time\nExpected:\n    Running doctests...\n    Doctesting 1 file.\n    sage -t --warn-long 0.0 interrupt.rst\n    Killing test interrupt.rst\n    ----------------------------------------------------------------------\n    Doctests interrupted: 0/1 files tested\n    ----------------------------------------------------------------------\n    ...\n    128\nGot:\n    Running doctests with ID 2014-10-13-20-15-10-008c21c4.\n    Doctesting 1 file.\n    sage -t --warn-long 0.0 interrupt.rst\n    Killing test interrupt.rst\n    **********************************************************************\n    File \"interrupt.rst\", line 6, in sage.doctest.tests.interrupt\n    Failed example:\n        time.sleep(10)\n    Exception raised:\n        Traceback (most recent call last):\n          File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 488, in _run\n            self.compile_and_execute(example, compiler, test.globs)\n          File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 853, in compile_and_execute\n            timer.stop().annotate(example)\n          File \"/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/util.py\", line 133, in stop\n            self.cputime = cputime(self.cputime)\n        AttributeError: Timer instance has no attribute 'cputime'\n    ----------------------------------------------------------------------\n    Doctests interrupted: 0/1 files tested\n    ----------------------------------------------------------------------\n    Total time for all tests: 0.0 seconds\n        cpu time: 0.0 seconds\n        cumulative wall time: 0.0 seconds\n    128\n**********************************************************************\n1 item had failures:\n   1 of  45 in sage.doctest.test\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17146\n\n",
    "created_at": "2014-10-13T20:34:54Z",
    "labels": [
        "component: doctest framework",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Random failure in doctest/test.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16909",
    "user": "https://github.com/vbraun"
}
```
Keywords: random_fail

This one seems to be associated with high cpu load, looks like some race condition in the doctest framework:

```
sage -t --long src/sage/doctest/test.py
**********************************************************************
File "src/sage/doctest/test.py", line 180, in sage.doctest.test
Failed example:
    subprocess.call(["sage", "-t",  "--warn-long", "0", "interrupt.rst"], **kwds)  # long time
Expected:
    Running doctests...
    Doctesting 1 file.
    sage -t --warn-long 0.0 interrupt.rst
    Killing test interrupt.rst
    ----------------------------------------------------------------------
    Doctests interrupted: 0/1 files tested
    ----------------------------------------------------------------------
    ...
    128
Got:
    Running doctests with ID 2014-10-13-20-15-10-008c21c4.
    Doctesting 1 file.
    sage -t --warn-long 0.0 interrupt.rst
    Killing test interrupt.rst
    **********************************************************************
    File "interrupt.rst", line 6, in sage.doctest.tests.interrupt
    Failed example:
        time.sleep(10)
    Exception raised:
        Traceback (most recent call last):
          File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 488, in _run
            self.compile_and_execute(example, compiler, test.globs)
          File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 853, in compile_and_execute
            timer.stop().annotate(example)
          File "/home/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/util.py", line 133, in stop
            self.cputime = cputime(self.cputime)
        AttributeError: Timer instance has no attribute 'cputime'
    ----------------------------------------------------------------------
    Doctests interrupted: 0/1 files tested
    ----------------------------------------------------------------------
    Total time for all tests: 0.0 seconds
        cpu time: 0.0 seconds
        cumulative wall time: 0.0 seconds
    128
**********************************************************************
1 item had failures:
   1 of  45 in sage.doctest.test
```


Issue created by migration from https://trac.sagemath.org/ticket/17146





---

archive/issue_comments_223679.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-22T22:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16909#issuecomment-223679",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_223680.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-11-22T22:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16909#issuecomment-223680",
    "user": "https://github.com/vbraun"
}
```

New commits:



---

archive/issue_comments_223681.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-12-06T15:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16909#issuecomment-223681",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_223682.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-12-12T12:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16909",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16909#issuecomment-223682",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_049749.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-12-12T12:29:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16909",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16909#event-49749"
}
```
