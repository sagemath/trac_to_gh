# Issue 15008: Pfaffian of a skew-symmetric matrix

archive/issues_015008.json:
```json
{
    "body": "CC:  sage-combinat spancratz tmonteil\n\nKeywords: matrix, sage-combinat, pfaffian\n\nI couldn't believe my eyes when I saw we don't have the Pfaffian implemented in Sage.\n\nAttached is an implementation that computes it over any ring in the combinatorial way using perfect matchings. This is probably not an optimal algorithm (and I feel like a lot could already be gained by improving up the PerfectMatchings(n) iterator without even changing the algorithm) but it's enough for my combinatorial needs.\n\nOther than this, the patch makes perfect matchings iterable (no, they weren't) and improves some docstrings related to rook polynomials. The #14117 dependency is because both patches edit matrix2.py and would probably cause some fuzz.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15245\n\n",
    "created_at": "2013-10-01T04:12:07Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.13",
    "title": "Pfaffian of a skew-symmetric matrix",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15008",
    "user": "https://github.com/darijgr"
}
```
CC:  sage-combinat spancratz tmonteil

Keywords: matrix, sage-combinat, pfaffian

I couldn't believe my eyes when I saw we don't have the Pfaffian implemented in Sage.

Attached is an implementation that computes it over any ring in the combinatorial way using perfect matchings. This is probably not an optimal algorithm (and I feel like a lot could already be gained by improving up the PerfectMatchings(n) iterator without even changing the algorithm) but it's enough for my combinatorial needs.

Other than this, the patch makes perfect matchings iterable (no, they weren't) and improves some docstrings related to rook polynomials. The #14117 dependency is because both patches edit matrix2.py and would probably cause some fuzz.

Issue created by migration from https://trac.sagemath.org/ticket/15245





---

archive/issue_comments_191562.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-10-01T04:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191562",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_191563.json:
```json
{
    "body": "Hey Darij,\n\nA few things I'd like to see changed:\n\n- Could you call `self.is_skew_symmetric()` instead of implementing your own test?\n- Instead of doing things such as `3x3` in the examples block, could you put it in full latex ``3 \\times 3``?\n- For the `algorithm` input, I'd rather see something like\n\n```\n- ``algorithm`` -- string, the algorithm to use; currently the following\n  algorithms have been implemented:\n\n  * ``'definition'`` - using the definition given by perfect matchings\n```\n\n  or a variant with a better name for the algorithm.\n\nAlso since this file is so big and often subject to changes, it would be better to not include as many whitespace changes.\n\nThanks,\n\nTravis",
    "created_at": "2013-10-02T15:33:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191563",
    "user": "https://github.com/tscrim"
}
```

Hey Darij,

A few things I'd like to see changed:

- Could you call `self.is_skew_symmetric()` instead of implementing your own test?
- Instead of doing things such as `3x3` in the examples block, could you put it in full latex ``3 \times 3``?
- For the `algorithm` input, I'd rather see something like

```
- ``algorithm`` -- string, the algorithm to use; currently the following
  algorithms have been implemented:

  * ``'definition'`` - using the definition given by perfect matchings
```

  or a variant with a better name for the algorithm.

Also since this file is so big and often subject to changes, it would be better to not include as many whitespace changes.

Thanks,

Travis



---

archive/issue_comments_191564.json:
```json
{
    "body": "Hi Travis,\n\nthanks once again for the reviews! I fixed all of your issues apart from not using `is_skew_symmetric()` because that method doesn't check diagonal entries to be 0 (it only checks them to satisfy x = -x, which is not the same in characteristic 2):\n\n```\nsage: M = Matrix(Zmod(2), [[0,1],[1,1]])\nsage: M.is_skew_symmetric()\nTrue\n```\n\nIf you ask me, this is a bug, but I don't want to grasp into yet another hornet's nest. But thanks for having me look at my check code again; it contained an ugly indentation error...\n\nI was pretty sure that matrix algorithms are the least busy part of the code, given how long #14117 took to be reviewed. In hindsight I shouldn't have done unrelated docstring fixes, but the rook stuff was just pretty close and caught my eyes.\n\nBest regards,\\\\\nDarij",
    "created_at": "2013-10-02T17:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191564",
    "user": "https://github.com/darijgr"
}
```

Hi Travis,

thanks once again for the reviews! I fixed all of your issues apart from not using `is_skew_symmetric()` because that method doesn't check diagonal entries to be 0 (it only checks them to satisfy x = -x, which is not the same in characteristic 2):

```
sage: M = Matrix(Zmod(2), [[0,1],[1,1]])
sage: M.is_skew_symmetric()
True
```

If you ask me, this is a bug, but I don't want to grasp into yet another hornet's nest. But thanks for having me look at my check code again; it contained an ugly indentation error...

I was pretty sure that matrix algorithms are the least busy part of the code, given how long #14117 took to be reviewed. In hindsight I shouldn't have done unrelated docstring fixes, but the rook stuff was just pretty close and caught my eyes.

Best regards,\\
Darij



---

archive/issue_comments_191565.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-02T17:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191565",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_191566.json:
```json
{
    "body": "for the patchbot:\n\napply trac_15245-pfaffian-dg.patch\u200b",
    "created_at": "2013-10-02T17:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191566",
    "user": "https://github.com/darijgr"
}
```

for the patchbot:

apply trac_15245-pfaffian-dg.patchâ€‹



---

archive/issue_comments_191567.json:
```json
{
    "body": "Replying to [comment:4 darij]:\n> thanks once again for the reviews! I fixed all of your issues apart from not using `is_skew_symmetric()` because that method doesn't check diagonal entries to be 0 (it only checks them to satisfy x = -x, which is not the same in characteristic 2):\n\nI think that's the definition of skew symmetric/antisymmetric: that A<sup>T</sup>=-A. It just happens to be the case that the concepts \"symmetric\" and \"antisymmetric\" coincide in characteristic 2.\n\nIn other words: skew symmetric matrices don't have to have 0 on their diagonal. Note that the terminology comes from bilinear forms, where alternating means (v,v)=0, antisymmetric means (v,w)=-(w,v) and symmetric means (v,w)=(w,v). \"alternating\" is not \"antisymmetric\" in characteristic 2.",
    "created_at": "2013-10-02T18:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191567",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:4 darij]:
> thanks once again for the reviews! I fixed all of your issues apart from not using `is_skew_symmetric()` because that method doesn't check diagonal entries to be 0 (it only checks them to satisfy x = -x, which is not the same in characteristic 2):

I think that's the definition of skew symmetric/antisymmetric: that A<sup>T</sup>=-A. It just happens to be the case that the concepts "symmetric" and "antisymmetric" coincide in characteristic 2.

In other words: skew symmetric matrices don't have to have 0 on their diagonal. Note that the terminology comes from bilinear forms, where alternating means (v,v)=0, antisymmetric means (v,w)=-(w,v) and symmetric means (v,w)=(w,v). "alternating" is not "antisymmetric" in characteristic 2.



---

archive/issue_comments_191568.json:
```json
{
    "body": "That's the hornet's nest I was talking about. With the definition you give, the Pfaffian lacks many of its nice properties like squaring to the determinant. It is the definition used on http://en.wikipedia.org/wiki/Skew-symmetric_matrix but not the definition used on http://en.wikipedia.org/wiki/Pfaffian . Since mathematicians can't agree, I figured it is easier to check for the kind of skew-symmetry needed in the definition of the Pfaffian rather than push that definition into the rest of the code. Is there a better solution?",
    "created_at": "2013-10-02T18:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191568",
    "user": "https://github.com/darijgr"
}
```

That's the hornet's nest I was talking about. With the definition you give, the Pfaffian lacks many of its nice properties like squaring to the determinant. It is the definition used on http://en.wikipedia.org/wiki/Skew-symmetric_matrix but not the definition used on http://en.wikipedia.org/wiki/Pfaffian . Since mathematicians can't agree, I figured it is easier to check for the kind of skew-symmetry needed in the definition of the Pfaffian rather than push that definition into the rest of the code. Is there a better solution?



---

archive/issue_comments_191569.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-10-06T09:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191569",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_191570.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-10-06T09:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191570",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_191571.json:
```json
{
    "body": "darij: it looks like you reviewed your own patch. I'd say this still needs a \"formal\" review.",
    "created_at": "2013-10-06T09:43:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191571",
    "user": "https://github.com/jdemeyer"
}
```

darij: it looks like you reviewed your own patch. I'd say this still needs a "formal" review.



---

archive/issue_comments_191572.json:
```json
{
    "body": "Oops -- I just realized what Travis gave were comments, not a review. Sorry!",
    "created_at": "2013-10-06T13:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191572",
    "user": "https://github.com/darijgr"
}
```

Oops -- I just realized what Travis gave were comments, not a review. Sorry!



---

archive/issue_comments_191573.json:
```json
{
    "body": "Hey Darij,\n\nSorry for letting this slip away.\n\nFor the skew-symmetric, how about instead calling `is_skew_symmetric()` and then checking that the diagonal entries are 0 with\n\n```\nall(d == 0 for d in self.diagonal())\n```\n\nOne more minor thing: the `AUTHORS:` block shouldn't be indented.\n\nBest,\n\nTravis",
    "created_at": "2013-10-06T15:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191573",
    "user": "https://github.com/tscrim"
}
```

Hey Darij,

Sorry for letting this slip away.

For the skew-symmetric, how about instead calling `is_skew_symmetric()` and then checking that the diagonal entries are 0 with

```
all(d == 0 for d in self.diagonal())
```

One more minor thing: the `AUTHORS:` block shouldn't be indented.

Best,

Travis



---

archive/issue_comments_191574.json:
```json
{
    "body": "I've given the `is_skew_symmetric` method an additional keyword variable now. All the rest is OK?",
    "created_at": "2013-10-06T16:58:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191574",
    "user": "https://github.com/darijgr"
}
```

I've given the `is_skew_symmetric` method an additional keyword variable now. All the rest is OK?



---

archive/issue_comments_191575.json:
```json
{
    "body": "Replying to [comment:13 darij]:\n> I've given the `is_skew_symmetric` method an additional keyword variable now. All the rest is OK?\nThat keyword should really be `is_alternating`, so the more appropriate thing would be to supply a method `is_alternating`.\n\nIf pfaffians need alternating rather than skew-symmetric (I haven't checked) then the confusion in terminology just comes from the fact that people looking at pfaffians haven't considered characteristic 2. That kind of thing happens all the time, and it's the kind of thing that computer algebra systems need to be a little more pedantic about than math literature, since you don't get to say \"in this paper, with <THIS> we mean <SOMETHING ELSE>\".\n\nIt may well be that pfaffians are simply not all that useful in characteristic 2, so that people didn't bother with them (Cayley certainly wouldn't have).",
    "created_at": "2013-10-06T17:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191575",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:13 darij]:
> I've given the `is_skew_symmetric` method an additional keyword variable now. All the rest is OK?
That keyword should really be `is_alternating`, so the more appropriate thing would be to supply a method `is_alternating`.

If pfaffians need alternating rather than skew-symmetric (I haven't checked) then the confusion in terminology just comes from the fact that people looking at pfaffians haven't considered characteristic 2. That kind of thing happens all the time, and it's the kind of thing that computer algebra systems need to be a little more pedantic about than math literature, since you don't get to say "in this paper, with <THIS> we mean <SOMETHING ELSE>".

It may well be that pfaffians are simply not all that useful in characteristic 2, so that people didn't bother with them (Cayley certainly wouldn't have).



---

archive/issue_comments_191576.json:
```json
{
    "body": "new version, separating skew-symmetry from alternatingness systematically",
    "created_at": "2013-10-06T22:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191576",
    "user": "https://github.com/darijgr"
}
```

new version, separating skew-symmetry from alternatingness systematically



---

archive/issue_comments_191577.json:
```json
{
    "body": "Attachment [trac_15245-pfaffian-dg.patch](tarball://root/attachments/some-uuid/ticket15245/trac_15245-pfaffian-dg.patch) by @darijgr created at 2013-10-06 22:14:39\n\nDone. A number of people seem to be lax about characteristic 2, among them Knuth from whom I had expected this the least.",
    "created_at": "2013-10-06T22:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191577",
    "user": "https://github.com/darijgr"
}
```

Attachment [trac_15245-pfaffian-dg.patch](tarball://root/attachments/some-uuid/ticket15245/trac_15245-pfaffian-dg.patch) by @darijgr created at 2013-10-06 22:14:39

Done. A number of people seem to be lax about characteristic 2, among them Knuth from whom I had expected this the least.



---

archive/issue_comments_191578.json:
```json
{
    "body": "I'm happy with it (having an `is_alternating()` method). Nils?",
    "created_at": "2013-10-07T16:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191578",
    "user": "https://github.com/tscrim"
}
```

I'm happy with it (having an `is_alternating()` method). Nils?



---

archive/issue_comments_191579.json:
```json
{
    "body": "Replying to [comment:16 tscrim]:\n> I'm happy with it (having an `is_alternating()` method). Nils?\nYep. It's a pedantic difference, but since this gets exposed in our official matrix API I think it's worth being precise.",
    "created_at": "2013-10-07T22:41:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191579",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:16 tscrim]:
> I'm happy with it (having an `is_alternating()` method). Nils?
Yep. It's a pedantic difference, but since this gets exposed in our official matrix API I think it's worth being precise.



---

archive/issue_comments_191580.json:
```json
{
    "body": "Then it's a positive review.",
    "created_at": "2013-10-08T14:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191580",
    "user": "https://github.com/tscrim"
}
```

Then it's a positive review.



---

archive/issue_comments_191581.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-10-08T14:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191581",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_191582.json:
```json
{
    "body": "Oh, a comment that may be worthwhile for future work:\n\nThe generic implementations of is_skewsymmetric and is_alternating are probably horribly slow compared to what one can do on specific classes (see, e.g. #15104). Since the difference between is_alternating and is_skewsymmetric only is apparent in characteristic 2, we'd probably get better performance if one of the two calls the other if required. If the specific implementation only applies to characteristic not equal to 2, it only needs to implement one fast method and the generic other one will call it.\n\nProbably `is_skewsymmetric` is the better choice for being the \"main\" method, because it's the more widely used term. We'd get something like:\n\n```\n    def is_alternating(self):\n        if self.base_ring().characteristic() !=2:\n            return self.is_skewsymmetric()\n        <rest of code>\n```\n",
    "created_at": "2013-10-08T15:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191582",
    "user": "https://github.com/nbruin"
}
```

Oh, a comment that may be worthwhile for future work:

The generic implementations of is_skewsymmetric and is_alternating are probably horribly slow compared to what one can do on specific classes (see, e.g. #15104). Since the difference between is_alternating and is_skewsymmetric only is apparent in characteristic 2, we'd probably get better performance if one of the two calls the other if required. If the specific implementation only applies to characteristic not equal to 2, it only needs to implement one fast method and the generic other one will call it.

Probably `is_skewsymmetric` is the better choice for being the "main" method, because it's the more widely used term. We'd get something like:

```
    def is_alternating(self):
        if self.base_ring().characteristic() !=2:
            return self.is_skewsymmetric()
        <rest of code>
```




---

archive/issue_comments_191583.json:
```json
{
    "body": "Not sure about it. `is_skewsymmetric` should be a tad slower than `is_alternating` (not seriously so -- it just calls diagonal elements twice rather than once). And I never understood what a characteristic of a ring is; chances are this is another thing not consistently understood in Sage. What we probably cannot do is ask whether the characteristic is not 2; if anything, we should ask for 2 to be invertible. But even then, I fear that excepting the `NotImplementedError` errors will ruin the speed benefits we get from unifying the code.\n\nThanks, Travis and Nils, for the review and the helpful comments!",
    "created_at": "2013-10-08T16:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191583",
    "user": "https://github.com/darijgr"
}
```

Not sure about it. `is_skewsymmetric` should be a tad slower than `is_alternating` (not seriously so -- it just calls diagonal elements twice rather than once). And I never understood what a characteristic of a ring is; chances are this is another thing not consistently understood in Sage. What we probably cannot do is ask whether the characteristic is not 2; if anything, we should ask for 2 to be invertible. But even then, I fear that excepting the `NotImplementedError` errors will ruin the speed benefits we get from unifying the code.

Thanks, Travis and Nils, for the review and the helpful comments!



---

archive/issue_comments_191584.json:
```json
{
    "body": "Replying to [comment:20 darij]:\n> Not sure about it. `is_skewsymmetric` should be a tad slower than `is_alternating` (not seriously so -- it just calls diagonal elements twice rather than once).\n\nIf that matters people can always implement both. \n\n> What we probably cannot do is ask whether the characteristic is not 2;\n\nuh ...\n\n```\nsage: GF(2).characteristic() !=2\nFalse\nsage: ZZ.characteristic() != 2\nTrue\n```\n\n\n> if anything, we should ask for 2 to be invertible.\n\nNo, that's not the correct check. In ZZ and (ZZ/6ZZ), 2 is not invertible and yet skew symmetric is the same as alternating.\n\nYou could check whether 1+1==0, but that's more expensive.",
    "created_at": "2013-10-08T16:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191584",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:20 darij]:
> Not sure about it. `is_skewsymmetric` should be a tad slower than `is_alternating` (not seriously so -- it just calls diagonal elements twice rather than once).

If that matters people can always implement both. 

> What we probably cannot do is ask whether the characteristic is not 2;

uh ...

```
sage: GF(2).characteristic() !=2
False
sage: ZZ.characteristic() != 2
True
```


> if anything, we should ask for 2 to be invertible.

No, that's not the correct check. In ZZ and (ZZ/6ZZ), 2 is not invertible and yet skew symmetric is the same as alternating.

You could check whether 1+1==0, but that's more expensive.



---

archive/issue_comments_191585.json:
```json
{
    "body": "I think what we really should be checking is if it has positive even characteristic (see the ZZ/4 example in the patch). For example doing something like\n\n```python\ndef is_alternating(self):\n    if not self.is_skew_symmetric():\n        return False\n    c = self.base_ring().characteristic()\n    return c != 0 or c % 2 != 0 \\ # If past here, we have pos. even char.\n        or all(self.get_unsafe(i,i) == 0 for i in range(self._ncols))\n```\n\nI do agree that `is_skew_symmetric()` should be the \"main\" method, also because it is a larger class of matrices in positive even characteristic. However, I don't see a way to speed up `is_skew_symmetric()` for the mod case, so I'm happy with the two ([more] optimized) implementations.",
    "created_at": "2013-10-08T18:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191585",
    "user": "https://github.com/tscrim"
}
```

I think what we really should be checking is if it has positive even characteristic (see the ZZ/4 example in the patch). For example doing something like

```python
def is_alternating(self):
    if not self.is_skew_symmetric():
        return False
    c = self.base_ring().characteristic()
    return c != 0 or c % 2 != 0 \ # If past here, we have pos. even char.
        or all(self.get_unsafe(i,i) == 0 for i in range(self._ncols))
```

I do agree that `is_skew_symmetric()` should be the "main" method, also because it is a larger class of matrices in positive even characteristic. However, I don't see a way to speed up `is_skew_symmetric()` for the mod case, so I'm happy with the two ([more] optimized) implementations.



---

archive/issue_comments_191586.json:
```json
{
    "body": "Skew symmetric is NOT the same as alternating in ZZ/(6 ZZ); think of a 3 on the main diagonal. Just having 1 + 1 != 0 is not enough. Infinite characteristic in the sense of \"ZZ embeds into the ring\" is not enough since we can have things like ZZ[X] / (2X).",
    "created_at": "2013-10-08T18:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191586",
    "user": "https://github.com/darijgr"
}
```

Skew symmetric is NOT the same as alternating in ZZ/(6 ZZ); think of a 3 on the main diagonal. Just having 1 + 1 != 0 is not enough. Infinite characteristic in the sense of "ZZ embeds into the ring" is not enough since we can have things like ZZ[X] / (2X).



---

archive/issue_comments_191587.json:
```json
{
    "body": "Replying to [comment:23 darij]:\n> Skew symmetric is NOT the same as alternating in ZZ/(6 ZZ); think of a 3 on the main diagonal. Just having 1 + 1 != 0 is not enough. Infinite characteristic in the sense of \"ZZ embeds into the ring\" is not enough since we can have things like ZZ[X] / (2X).\n\nOops, sorry. I should use non-integral domains a little more. I withdraw my proposal then. Deciding whether alternating is the same as skew symmetric is not so easy after all, so we should just have two separate methods and if people want the tests to be quicker they will have to implement both themselves.",
    "created_at": "2013-10-08T19:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191587",
    "user": "https://github.com/nbruin"
}
```

Replying to [comment:23 darij]:
> Skew symmetric is NOT the same as alternating in ZZ/(6 ZZ); think of a 3 on the main diagonal. Just having 1 + 1 != 0 is not enough. Infinite characteristic in the sense of "ZZ embeds into the ring" is not enough since we can have things like ZZ[X] / (2X).

Oops, sorry. I should use non-integral domains a little more. I withdraw my proposal then. Deciding whether alternating is the same as skew symmetric is not so easy after all, so we should just have two separate methods and if people want the tests to be quicker they will have to implement both themselves.



---

archive/issue_comments_191588.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-10-12T09:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15008#issuecomment-191588",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_044102.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-10-12T09:47:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/15008",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/15008#event-44102"
}
```
