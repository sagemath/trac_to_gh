# Issue 21482: improve test for #20693

archive/issues_021482.json:
```json
{
    "body": "CC:  ehlen @nbruin\n\nthe test\n\n```\nsage: K.<zeta22> = CyclotomicField(22)\nsage: x = polygen(K)\nsage: f = x^9 + (zeta22^9 - zeta22^6 + zeta22^4 + 1)*x^8 + (2*zeta22^8 + 4*zeta22^7 - 6*zeta22^5 - 205*zeta22^4 - 6*zeta22^3 + 4*zeta22 + 2)*x^7 + (181*zeta22^9 - 354*zeta22^8 + 145*zeta22^7 - 253*zeta22^6 + 145*zeta22^5 - 354*zeta22^4 + 181*zeta22^3 + 189*zeta22 - 189)*x^6 + (902*zeta22^9 + 13116*zeta22^8 + 902*zeta22^7 - 500*zeta22^5 - 322*zeta22^4 - 176*zeta22^3 + 176*zeta22^2 + 322*zeta22 + 500)*x^5 + (13196*zeta22^9 + 548*zeta22^8 + 9176*zeta22^7 - 17964*zeta22^6 + 8512*zeta22^5 - 8512*zeta22^4 + 17964*zeta22^3 - 9176*zeta22^2 - 548*zeta22 - 13196)*x^4 + (17104*zeta22^9 + 23456*zeta22^8 + 8496*zeta22^7 - 8496*zeta22^6 - 23456*zeta22^5 - 17104*zeta22^4 + 39680*zeta22^2 + 283184*zeta22 + 39680)*x^3 + (118736*zeta22^9 - 118736*zeta22^8 - 93520*zeta22^6 + 225600*zeta22^5 + 66496*zeta22^4 + 373744*zeta22^3 + 66496*zeta22^2 + 225600*zeta22 - 93520)*x^2 + (342176*zeta22^9 + 388928*zeta22^8 + 4800*zeta22^7 - 234464*zeta22^6 - 1601152*zeta22^5 - 234464*zeta22^4 + 4800*zeta22^3 + 388928*zeta22^2 + 342176*zeta22)*x + 431552*zeta22^9 - 1830400*zeta22^8 - 1196800*zeta22^7 - 1830400*zeta22^6 + 431552*zeta22^5 + 1196096*zeta22^3 - 12672*zeta22^2 + 12672*zeta22 - 1196096\nsage: L.<a> = K.extension(f)\n\nsage: alpha = (a^8 + (zeta22^9 - zeta22^6 + 2*zeta22^4 + 33)*a^7)/(10**2555) #long time - nicht mehr long time!\nsage: beta = ~alpha # long time (about 1:45min on a 2014 MacBook Pro, this used to cause a crash in Sage 7.2)\n```\n \nfor _invert_ in `number_field_element.pyx` takes way too much time on a 32 Bit machine, see\nhttps://groups.google.com/forum/#!topic/sage-devel/eqfB-Z3v_SQ\n\n\nIf its purpose is to fire a `NTLError` exception, this is done already with (on 32 Bit machine, on 64 bit NTLError is not fired)\n\n```\nalpha = (a^8 + (zeta22^9 - zeta22^6 + 2*zeta22^4 + 33)*a^7)/(10**2555)\n```\n\nand testing\n\n```\nbeta = ~alpha # very long on 32 bit machine\n```\n\nseems not necessary.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21719\n\n",
    "created_at": "2016-10-17T20:29:45Z",
    "labels": [
        "component: number fields",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "improve test for #20693",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21482",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```
CC:  ehlen @nbruin

the test

```
sage: K.<zeta22> = CyclotomicField(22)
sage: x = polygen(K)
sage: f = x^9 + (zeta22^9 - zeta22^6 + zeta22^4 + 1)*x^8 + (2*zeta22^8 + 4*zeta22^7 - 6*zeta22^5 - 205*zeta22^4 - 6*zeta22^3 + 4*zeta22 + 2)*x^7 + (181*zeta22^9 - 354*zeta22^8 + 145*zeta22^7 - 253*zeta22^6 + 145*zeta22^5 - 354*zeta22^4 + 181*zeta22^3 + 189*zeta22 - 189)*x^6 + (902*zeta22^9 + 13116*zeta22^8 + 902*zeta22^7 - 500*zeta22^5 - 322*zeta22^4 - 176*zeta22^3 + 176*zeta22^2 + 322*zeta22 + 500)*x^5 + (13196*zeta22^9 + 548*zeta22^8 + 9176*zeta22^7 - 17964*zeta22^6 + 8512*zeta22^5 - 8512*zeta22^4 + 17964*zeta22^3 - 9176*zeta22^2 - 548*zeta22 - 13196)*x^4 + (17104*zeta22^9 + 23456*zeta22^8 + 8496*zeta22^7 - 8496*zeta22^6 - 23456*zeta22^5 - 17104*zeta22^4 + 39680*zeta22^2 + 283184*zeta22 + 39680)*x^3 + (118736*zeta22^9 - 118736*zeta22^8 - 93520*zeta22^6 + 225600*zeta22^5 + 66496*zeta22^4 + 373744*zeta22^3 + 66496*zeta22^2 + 225600*zeta22 - 93520)*x^2 + (342176*zeta22^9 + 388928*zeta22^8 + 4800*zeta22^7 - 234464*zeta22^6 - 1601152*zeta22^5 - 234464*zeta22^4 + 4800*zeta22^3 + 388928*zeta22^2 + 342176*zeta22)*x + 431552*zeta22^9 - 1830400*zeta22^8 - 1196800*zeta22^7 - 1830400*zeta22^6 + 431552*zeta22^5 + 1196096*zeta22^3 - 12672*zeta22^2 + 12672*zeta22 - 1196096
sage: L.<a> = K.extension(f)

sage: alpha = (a^8 + (zeta22^9 - zeta22^6 + 2*zeta22^4 + 33)*a^7)/(10**2555) #long time - nicht mehr long time!
sage: beta = ~alpha # long time (about 1:45min on a 2014 MacBook Pro, this used to cause a crash in Sage 7.2)
```
 
for _invert_ in `number_field_element.pyx` takes way too much time on a 32 Bit machine, see
https://groups.google.com/forum/#!topic/sage-devel/eqfB-Z3v_SQ


If its purpose is to fire a `NTLError` exception, this is done already with (on 32 Bit machine, on 64 bit NTLError is not fired)

```
alpha = (a^8 + (zeta22^9 - zeta22^6 + 2*zeta22^4 + 33)*a^7)/(10**2555)
```

and testing

```
beta = ~alpha # very long on 32 bit machine
```

seems not necessary.

Issue created by migration from https://trac.sagemath.org/ticket/21719





---

archive/issue_comments_297836.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-10-17T20:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21482#issuecomment-297836",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

New commits:



---

archive/issue_comments_297837.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-17T20:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21482#issuecomment-297837",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_297838.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-18T17:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21482#issuecomment-297838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_297839.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-07-02T10:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21482#issuecomment-297839",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_297840.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-08-01T22:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21482",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21482#issuecomment-297840",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_020308.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2017-08-01T22:24:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21482",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21482#event-20308"
}
```
