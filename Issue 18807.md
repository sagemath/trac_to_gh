# Issue 18807: Span of trivial cones

Issue created by migration from https://trac.sagemath.org/ticket/19044

Original creator: mjo

Original creation time: 2015-08-16 22:19:01

CC:  novoselt

The following has been annoying me in my doctests. We can take the span of most cones:


```
sage: K = Cone([(1,)])
sage: span(K)
Free module of degree 1 and rank 1 over Integer Ring
Echelon basis matrix:
[1]
sage: span(K, K.lattice().base_ring())
Sublattice <N(1)>
```


But `span()` tries to deduce the base ring itself, and that doesn't work for the trivial cone:


```
sage: K = Cone([], ToricLattice(0))
sage: span(K)
...
AttributeError: 'Objects_with_category' object has no attribute 'base_ring'
```


I've worked around it by implementing `span` as a method on `IntegralRayCollection`:


```
def span(self):
    return span(self, self.lattice().base_ring())
```


Does this approach sound good, or should it be fixed with a special case inside `span()`?



---

Comment by novoselt created at 2015-08-16 22:23:58

I think it is definitely better to fix cone things in cone modules. Let's just make sure that optional arguments to `span` work in the same way, so it is also possible to do `span(K, QQ)` etc.


---

Comment by mjo created at 2015-08-20 20:24:17

I went with the lattice `span` method rather than the global function. Seems a bit cleaner to me and makes no difference for what I'm doing.
----
Last 10 new commits:


---

Comment by mjo created at 2015-08-20 20:24:17

Changing status from new to needs_review.


---

Comment by novoselt created at 2015-08-22 21:29:44

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-08-23 23:31:11

Resolution: fixed
