# Issue 18807: Span of trivial cones

archive/issues_018807.json:
```json
{
    "body": "CC:  novoselt\n\nThe following has been annoying me in my doctests. We can take the span of most cones:\n\n\n```\nsage: K = Cone([(1,)])\nsage: span(K)\nFree module of degree 1 and rank 1 over Integer Ring\nEchelon basis matrix:\n[1]\nsage: span(K, K.lattice().base_ring())\nSublattice <N(1)>\n```\n\n\nBut `span()` tries to deduce the base ring itself, and that doesn't work for the trivial cone:\n\n\n```\nsage: K = Cone([], ToricLattice(0))\nsage: span(K)\n...\nAttributeError: 'Objects_with_category' object has no attribute 'base_ring'\n```\n\n\nI've worked around it by implementing `span` as a method on `IntegralRayCollection`:\n\n\n```\ndef span(self):\n    return span(self, self.lattice().base_ring())\n```\n\n\nDoes this approach sound good, or should it be fixed with a special case inside `span()`?\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19044\n\n",
    "created_at": "2015-08-16T22:19:01Z",
    "labels": [
        "geometry",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "Span of trivial cones",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18807",
    "user": "mjo"
}
```
CC:  novoselt

The following has been annoying me in my doctests. We can take the span of most cones:


```
sage: K = Cone([(1,)])
sage: span(K)
Free module of degree 1 and rank 1 over Integer Ring
Echelon basis matrix:
[1]
sage: span(K, K.lattice().base_ring())
Sublattice <N(1)>
```


But `span()` tries to deduce the base ring itself, and that doesn't work for the trivial cone:


```
sage: K = Cone([], ToricLattice(0))
sage: span(K)
...
AttributeError: 'Objects_with_category' object has no attribute 'base_ring'
```


I've worked around it by implementing `span` as a method on `IntegralRayCollection`:


```
def span(self):
    return span(self, self.lattice().base_ring())
```


Does this approach sound good, or should it be fixed with a special case inside `span()`?


Issue created by migration from https://trac.sagemath.org/ticket/19044





---

archive/issue_comments_257235.json:
```json
{
    "body": "I think it is definitely better to fix cone things in cone modules. Let's just make sure that optional arguments to `span` work in the same way, so it is also possible to do `span(K, QQ)` etc.",
    "created_at": "2015-08-16T22:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18807#issuecomment-257235",
    "user": "novoselt"
}
```

I think it is definitely better to fix cone things in cone modules. Let's just make sure that optional arguments to `span` work in the same way, so it is also possible to do `span(K, QQ)` etc.



---

archive/issue_comments_257236.json:
```json
{
    "body": "I went with the lattice `span` method rather than the global function. Seems a bit cleaner to me and makes no difference for what I'm doing.\n----\nLast 10 new commits:",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18807#issuecomment-257236",
    "user": "mjo"
}
```

I went with the lattice `span` method rather than the global function. Seems a bit cleaner to me and makes no difference for what I'm doing.
----
Last 10 new commits:



---

archive/issue_comments_257237.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-20T20:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18807#issuecomment-257237",
    "user": "mjo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_257238.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-08-22T21:29:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18807#issuecomment-257238",
    "user": "novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_257239.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-08-23T23:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18807",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18807#issuecomment-257239",
    "user": "vbraun"
}
```

Resolution: fixed
