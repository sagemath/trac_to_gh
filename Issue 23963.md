# Issue 23963: py3: handle some unbound methods __func__

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-11-11 19:00:49

CC:  tscrim jdemeyer jhpalmieri aapitzsch fbissey




---

Comment by chapoton created at 2017-11-11 19:01:26

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-11-11 19:01:26

New commits:


---

Comment by fbissey created at 2017-11-11 19:45:53

Looks good to me, it allows to progress further in starting sage with python3.6.


---

Comment by fbissey created at 2017-11-11 19:45:53

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-11-11 21:04:51

merci !


---

Comment by fbissey created at 2017-11-11 21:59:38

Do you already have something for the next "stop"

```
/usr/lib64/python3.6/site-packages/sage/rings/real_mpfr.pyx in init sage.rings.real_mpfr()
   2033 
   2034             sage: [RR(s).hex() for s in ['+inf', '-inf', 'nan']]
   2035             ['inf', '-inf', 'nan']
   2036         """
   2037         cdef char *s
   2038         cdef int r
   2039         sig_on()
   2040         r = mpfr_asprintf(&s, "%Ra", self.value)
   2041         sig_off()
   2042         if r < 0:  # MPFR free()s its buffer itself in this case
   2043             raise RuntimeError("unable to convert an mpfr number to a string")
   2044         t = str(s)
   2045         mpfr_free_str(s)
   2046         return t
   2047 
-> 2048     hex = __hex__
        global hex = undefined
        global __hex__ = undefined
   2049 
   2050     def __copy__(self):
   2051         """
   2052         Return copy of ``self`` - since ``self`` is immutable, we just return
   2053         ``self`` again.
   2054 
   2055         EXAMPLES::
   2056 
   2057             sage: a = 3.5
   2058             sage: copy(a) is  a
   2059             True
   2060         """
   2061         return self    # since object is immutable.
   2062 
   2063     def _integer_(self, Z=None):

NameError: name '__hex__' is not defined
```

?


---

Comment by chapoton created at 2017-11-12 07:37:39

no ticket yet for the hex problem

in the experimental branch (https://git.sagemath.org/sage.git/log/?h=public/python3-experiment-8.1.rc0) that permit to start sage:

https://git.sagemath.org/sage.git/commit/?h=public/python3-experiment-8.1.rc0&id=2ffe4e29422d4e331c65d16d7590fd9fb0bbd9b3

I just remove the alias. This is probably not a good solution.


---

Comment by chapoton created at 2017-11-12 09:15:07

See #24201 for the hex problem (experts help is needed)


---

Comment by embray created at 2017-11-15 09:51:48

Instead of the `try/except` and whatnot we could use `six.get_unbound_method()` for this.  The name is a bit long but can be rebound to something shorter in the import statement.


---

Comment by vbraun created at 2017-12-11 01:02:46

Resolution: fixed
