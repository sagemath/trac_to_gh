# Issue 18171: List of packages in the documentation of sage.misc.package

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2015-05-12 16:07:56

CC:  vdelecroix leif

It seems that we do not have an up-to-date list of Sage's packages in our documentation.

This branch solves the problem, by adding the list of packages in our reference manual (in `sage.misc.package`, where all functions dealing with packages are defined). This list is *generated* from python lists, so that they are:
- Easy to read (in a nice sorted table)
- Checked by a doctest, so that we get a warning if they are not up to date anymore

Nathann


---

Comment by ncohen created at 2015-05-12 16:08:29

Changing status from new to needs_review.


---

Comment by git created at 2015-05-12 16:08:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-05-12 16:28:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by leif created at 2015-05-12 19:04:47

As mentioned, those package lists refer to Sage versions < 6.0.


---

Comment by jdemeyer created at 2015-05-12 21:10:02

Changing status from needs_review to needs_info.


---

Comment by jdemeyer created at 2015-05-12 21:10:02

What's up with this?

```
singular-3-1
```

(there are many more optional packages like this)


---

Comment by jdemeyer created at 2015-05-12 21:13:03

Some packages from `build/pkgs` don't appear in your list (`arb` is the first, but there are more).


---

Comment by jdemeyer created at 2015-05-12 21:13:03

Changing status from needs_info to needs_work.


---

Comment by jdemeyer created at 2015-05-12 21:13:37

And `extcode`, seriously? That's no longer a package...


---

Comment by jdemeyer created at 2015-05-12 21:17:39

`gcc` appears in _every_ list :-)


---

Comment by git created at 2015-05-13 06:55:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-05-13 07:01:09

> Some packages from `build/pkgs` don't appear in your list (`arb` is the first, but there are more).
> And extcode, seriously? That's no longer a package...
> gcc appears in every list :-)

Jeroen, please do not ask me to rewrite everything at once. I am no magician. As you can see from the source code, the list of packages is generated from the output of `sage -standard`, `sage -optional` and `sage -experimental`. And yes, all three contain gcc. And `extcode`. The point of this branch is that we see the list somewhere, and apparently it also helps us notice other bugs. Please do not force me to rewrite everything here.

Nathann


---

Comment by ncohen created at 2015-05-13 07:12:41

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-05-13 15:14:28

Replying to [comment:10 ncohen]:
> Jeroen, please do not ask me to rewrite everything at once. I am no magician. As you can see from the source code, the list of packages is generated from the output of `sage -standard`, `sage -optional` and `sage -experimental`. And yes, all three contain gcc. And `extcode`. The point of this branch is that we see the list somewhere, and apparently it also helps us notice other bugs. Please do not force me to rewrite everything here.

Well, the logical thing to do would be to first fix `sage --standard`, `sage --optional` and `sage --experimental` and _then_ add the lists to the documentation.

I really do not see the point of adding wrong and outdated lists to the documentation.

And in any case, this is wrong: `singular-3-1`


---

Comment by jdemeyer created at 2015-05-13 15:14:28

Changing status from needs_review to needs_work.


---

Comment by ncohen created at 2015-05-13 15:19:22

Why is singular wrong? It displays singular, and only singular?..


---

Comment by leif created at 2015-05-13 15:20:06

FWIW, I'm currently working on categorizing the packages (obsolete, removed, renamed, replaced, newly added...)

If we fix `sage-list-packages` w.r.t. this, Nathann's work still makes sense (without modifying his code, just regenerating the "hardcoded" lists, I think).


---

Comment by jdemeyer created at 2015-05-13 15:21:00

Sorry, I didn't realize that you changed the `singular` thing. Never mind...


---

Comment by jdemeyer created at 2015-05-13 15:21:44

Replying to [comment:14 leif]:
> If we fix `sage-list-packages` w.r.t. this, Nathann's work still makes sense (without modifying his code, just regenerating the "hardcoded" lists, I think).

Of course Nathann's work makes sense, but obviously this ticket should depend on fixing the lists.


---

Comment by ncohen created at 2015-05-13 15:22:54

> If we fix `sage-list-packages` w.r.t. this, Nathann's work still makes sense (without modifying his code, just regenerating the "hardcoded" lists, I think).

Indeed. Plus my goal is also to add a list more exhaustive than the one our doc currently contains:

http://www.sagemath.org/doc/installation/introduction.html

I am rewriting the doc of that manual currently, and moving a lot of things around. See #18405

Nathann


---

Comment by ncohen created at 2015-05-13 15:25:49

> Of course Nathann's work makes sense, but obviously this ticket should depend on fixing the lists.

Why should it *depend* on it? The list currenty generated by `sage -standard` is wrong at the moment (not caused by this patch) and what this patch does will still work when that will be fixed.

In the meantime we will have a "more correct" list of packages, I will be able to remove the list of Sage packages from the 'installation' document (and instead link to that list). There is no gain in blocking this ticket until the other problem is fixed.

Nathann


---

Comment by leif created at 2015-05-13 15:26:09

Replying to [comment:16 jdemeyer]:
> obviously this ticket should depend on fixing the lists.

Well, it's just as borked as `sage-list-packages` and our package repositories, so I wouldn't even mind merging it as is... ;-)


---

Comment by jdemeyer created at 2015-05-13 15:26:17

Remove this:

```
pname = re.sub("(\.|-)p[0-9]+$","",pname) # strip .p0
```


(version numbers are always separated by a `-`, the `.p0` is added _in addition_ to a version number)


---

Comment by jdemeyer created at 2015-05-13 15:28:23

Replying to [comment:18 ncohen]:
> In the meantime we will have a "more correct" list of packages
The lists in this ticket are far from correct.

> There is no gain in blocking this ticket until the other problem is fixed.
Yes, there is gain: Sage will have less wrong documentation.

I think wrong documentation is worse than no documentation.


---

Comment by leif created at 2015-05-13 15:28:55

Replying to [comment:20 jdemeyer]:
> Remove this:
> {{{
> pname = re.sub("(\.|-)p[0-9]+$","",pname) # strip .p0
> }}}
> 
> (version numbers are always separated by a `-`, the `.p0` is added _in addition_ to a version number)

Nope, we do have packages with a patchlevel but no version.


---

Comment by ncohen created at 2015-05-13 15:29:34

> (version numbers are always separated by a `-`, the `.p0` is added _in addition_ to a version number)

That's what I also believed at first


```
~$ sage -experimental | grep -- "-p"
pynifti-p0 ............................. not installed
```



---

Comment by jdemeyer created at 2015-05-13 15:38:40

That's `-p0`, not `.p0`


---

Comment by leif created at 2015-05-13 15:40:36

Replying to [comment:22 leif]:
> Replying to [comment:20 jdemeyer]:
> > (version numbers are always separated by a `-`, the `.p0` is added _in addition_ to a version number)
> 
> Nope, we do have packages with a patchlevel but no version.

Such as `database_stein_watkins_mini.p0.spkg` for example.


---

Comment by jdemeyer created at 2015-05-13 16:05:04

Replying to [comment:25 leif]:
> Such as `database_stein_watkins_mini.p0.spkg` for example.
1. The name of that package actually is `database_stein_watkins_mini.p0` (of course, that's a wrong name).
2. That package no longer exists anyway (the wrong name was fixed).


---

Comment by ncohen created at 2015-05-13 16:05:36

Let's see it this way Jeroen: if you have reasons to believe that the list from `sage -standard` (which I believe is the same as what you see there [1]) is wrong then why don't you report it so that we update it (and my code will match it)?

My question at [2] was about whether we have some (any) reliable source containing our packages, for each category. It seems that we have none, so here is the deal: if you see something wrong in the list (i.e. the online one, or `sage -standard`) then let us fix that. Otherwise you are telling me that "the list is wrong" without telling me how exactly.

On the other hand, you cannot block this patch until the "problematic way in which the packages are handled in Sage" is fixed. All I want to do here is clear our doc, and  make it more reliable *than it is*.

Nathann

[1] http://www.sagemath.org/packages/standard/
[2] https://groups.google.com/forum/#!topic/sage-devel/aEmUmFOwJYQ


---

Comment by leif created at 2015-05-13 16:33:37

So, here it is.

----

As of Sage 6.7.beta4, we have:

__Obsolete__ packages (since Sage 6.0), `*.spkg`:

 * extcode
 * sage (also used to be versioned)
 * sage_root
 * sage_scripts

__Renamed__ packages:

 * libm4ri -> m4ri
 * libm4rie -> m4rie
 * database_stein_watkins_mini.p0 -> database_stein_watkins_mini (optional)
 * TOPCOM -> topcom (optional; "new-style" is lowercase)

 * gd -> libgd ? (probably _replaced_, see below)

__Removed__ (standard) packages:

 * genus2reduction (now part of the Sage library IIRC)
 * mercurial (in principle replaced by git, but no "drop-in" replacement)
 * sqlalchemy

__Replaced__ (standard) packages:

 * pil -> Pillow
 * gd, gdmodule -> libgd (I think)

__Newly added__ (standard) packages:

 * backports_ssl_match_hostname (WTF?)
 * certifi
 * combinatorial_designs
 * configure (see below)
 * csage (see below)
 * dateutil
 * git (used to be optional, so there's still an old one, too)
 * jsonschema
 * libgd (presumably the replacement of gd, gdmodule; see above)
 * markupsafe
 * mathjax
 * mistune
 * pari_galdata
 * pari_seadata_small
 * pip
 * pkgconf
 * pkgconfig
 * prereq (see below)
 * pyparsing
 * pyzmq
 * six
 * tornado
 * zeromq


Then we have some weirdness with the following "packages":

 * in `build/pkgs/`, but not (listed as) installed:
   * configure

 * (listed as) installed, but not in `build/pkgs/`, and without version:
    * csage
    * sage ("conflicts" with the previous, versioned spkg in Sage 5.x)
    * prereq

And then we have new "new-style" packages (just in the git repo) which have
no legacy (`*.spkg`) counterpart, hence currently not listed by `sage-list-packages`:

 * arb (optional)
 * ...

... besides that so far only some optional packages have been converted to
"new-style"; the versions in the git repo might meanwhile be newer than their
legacy counterparts.  (Similar for packages that used to be optional but
are standard now, cf. "newly added packages" above.)


---

Comment by jdemeyer created at 2015-05-13 16:46:38

Replying to [comment:27 ncohen]:
> All I want to do here is clear our doc, and  make it more reliable *than it is*.
Again, please tell me why adding _wrong documentation_ is making it more reliable.


---

Comment by ncohen created at 2015-05-13 16:49:04

> Again, please tell me why adding _wrong documentation_ is making it more reliable.

Well, because that new page will match the most reliable information we have (i.e. `sage -standard`) in the future, and because by having this new page I will be able to remove the other pages whose information is even older, and redirect them toward that page.

Nathann


---

Comment by jdemeyer created at 2015-05-13 16:49:52

`gdmodule` has genuinly been removed. And `gd` was renamed to `libgd`.


---

Comment by ncohen created at 2015-05-13 16:50:15

You seem really bothered by the information I am adding, and not bothered at all by the wrong information which stays available for as long as we do nothing.


---

Comment by ncohen created at 2015-05-13 16:51:48

> `gdmodule` has genuinly be removed. And `gd` was renamed to `libgd`.

I just generated the list from our build/install file:

http://www.steinertriples.fr/ncohen/tmp/std

I was about to write to sage-devel to ask <whoever can> to put it online, but in the meantime I noticed that the official list has been removed:
http://www.sagemath.org/packages/standard/list

So something is apparently happening.

Nathann


---

Comment by leif created at 2015-05-13 17:01:44

Replying to [comment:33 ncohen]:
> I was about to write to sage-devel to ask <whoever can> to put it online, but in the meantime I noticed that the official list has been removed:
> http://www.sagemath.org/packages/standard/list

The site is currently moving, while `packages/` is obsolete anyway, since it is incompatible with the mirrors.  Take `spkg/standard/list` from some mirror instead.


---

Comment by ncohen created at 2015-05-13 17:03:42

Well I do not want to take that list, I want to replace it with the list I just generated from the latest beta `:-P`


---

Comment by ncohen created at 2015-05-13 17:11:18

Even the reference manual was removed `O_o`


---

Comment by leif created at 2015-05-13 17:13:24

Replying to [comment:35 ncohen]:
> Well I do not want to take that list, I want to replace it with the list I just generated from the latest beta `:-P`

That doesn't make much sense, since

 * the `list` files are generated from the directory contents,
 * the site is moving, as I said. 

We'll have to wait with such at least until the infrastructure is stable again (hopefully in a few days).


---

Comment by git created at 2015-05-20 16:18:33

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by ncohen created at 2015-05-20 19:40:45

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-06-04 06:47:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-06-04 07:11:52

(small problems with git history)


---

Comment by ncohen created at 2015-06-04 07:11:52

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-06-04 07:19:29

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2015-06-04 07:19:59

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-06-07 09:06:36

Replying to [comment:32 ncohen]:
> You seem really bothered by the information I am adding, and not bothered at all by the wrong information which stays available for as long as we do nothing.

I am bothered by both. The fact that one thing is wrong is not an excuse to add a second wrong thing.

This patch should not be merged as long as stuff like `extcode` is listed.


---

Comment by jdemeyer created at 2015-06-07 09:06:36

Changing status from needs_review to needs_work.


---

Comment by ncohen created at 2015-06-07 09:08:05

> This patch should not be merged as long as stuff like `extcode` is listed.

What is wrong with extcode?


---

Comment by jdemeyer created at 2015-06-08 17:11:33

It seems that updating the online packages is harder than I thought. And I also feel slightly guilty for "forcing" #18581 against your will. So I will stop complaining about this ticket.


---

Comment by jdemeyer created at 2015-06-08 17:11:33

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2015-06-08 17:19:13

Thanks. And I hope that they will end up updating the lists at some point `:-/`


---

Comment by git created at 2015-07-03 11:24:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-07-03 11:24:21

The lists have been updated. And so, this patch too!

Nathann


---

Comment by jdemeyer created at 2015-07-07 13:02:40

These are no longer standard:

```
gd...................................... 2.0.35.p7 (not_installed)
gdmodule................................ 0.56.p8 (not_installed)
genus2reduction......................... 0.3.p8 (not_installed)
mercurial............................... 2.2.2.p0 (not_installed)
pil..................................... 1.1.6.p4 (not_installed)
python.................................. 2.7.5.p1 (not_installed)
sage.................................... 5.13 (not_installed)
sage_root............................... 5.13 (not_installed)
sage_scripts............................ 5.13 (not_installed)
sqlalchemy.............................. 0.5.8 (not_installed)
```



---

Comment by jdemeyer created at 2015-07-07 13:03:43

Concerning Python, I do find it very confusing that `./sage -i python` installs the old `python-2.7.5.p1.spkg` (the new-style package is called `python2`)


---

Comment by ncohen created at 2015-07-07 13:09:31

> These are no longer standard:

This conversation again? Didn't you say in [comment:47] that you would give it up?

These packages appear there:
http://mirror.switch.ch/mirror/sagemath/spkg/standard/

If you do not agree with the list, please write to Harald. I already did it once, you were in Cc.


---

Comment by jdemeyer created at 2015-07-08 11:23:52

Replying to [comment:53 ncohen]:
> This conversation again? Didn't you say in [comment:47] that you would give it up?
I'm not complaining, just informing...


---

Comment by ncohen created at 2015-07-08 11:38:29

> I'm not complaining, just informing...

I see...

Nathann


---

Comment by ncohen created at 2015-09-07 20:17:22

Pom Pom Pom ...


---

Comment by git created at 2016-02-11 19:56:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhonrubia6 created at 2016-02-11 20:03:11

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-02-11 23:26:37

Resolution: fixed
