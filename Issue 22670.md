# Issue 22670: py3: phase out lexico cmp in real_mpfi

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2017-04-30 09:36:33

CC:  tscrim jdemeyer aapitzsch dkrenn cheuberg behackl

Currently cmp(a,b) for two real-interval field elements performs a lexicographic comparison. And rich comparison has a different semantic.

We rename `_cmp_` to `lexico_cmp` to put it outside the comparison framework. This means that `cmp` will not work anymore. The documentation is modified accordingly, to warn users not to use `cmp` at all on these objects.

Helpful for the major ticket #22297


---

Comment by chapoton created at 2017-04-30 09:38:31

Changing status from new to needs_review.


---

Comment by dkrenn created at 2017-04-30 12:53:40

Replying to [ticket:22907 chapoton]:
> Currently cmp(a,b) for two real-interval field elements performs a lexicographic comparison. And rich comparison has a different semantic.
> 
> We rename `_cmp_` to `lexico_cmp` to put it outside the comparison framework. This means that `cmp` will not work anymore. The documentation is modified accordingly, to warn users not to use `cmp` at all on these objects.

Do we need `lexico_cmp` at all or could we simply delete it?


---

Comment by chapoton created at 2017-04-30 12:59:36

well, lexico_cmp is useful to check that pickling works. And if somebody did use cmp, it could serve as a replacement


---

Comment by dkrenn created at 2017-04-30 13:02:12

Replying to [comment:3 chapoton]:
> well, lexico_cmp is useful to check that pickling works. And if somebody did use cmp, it could serve as a replacement

Ok, fine for me.


---

Comment by dkrenn created at 2017-04-30 13:06:16

Replying to [comment:4 dkrenn]:
> Replying to [comment:3 chapoton]:
> > well, lexico_cmp is useful to check that pickling works. And if somebody did use cmp, it could serve as a replacement

As `cmp` is removed, do we need a deprecation warning for this?


---

Comment by dkrenn created at 2017-04-30 13:06:53

Apart from the question above and modulo a successful run of a patchbot, this patch looks good.


---

Comment by chapoton created at 2017-04-30 16:47:23

Hmm, trying to introduce a deprecation seems to uncover some problems with QQbar. Investigating, maybe in relation with #18303


---

Comment by chapoton created at 2017-04-30 20:03:20

en experimental branch with deprecation is available as "u/chapoton/experiment-22907"


---

Comment by chapoton created at 2017-05-01 15:26:26

Changing status from needs_review to needs_work.


---

Comment by dkrenn created at 2017-05-02 15:16:48

Replying to [comment:9 chapoton]:
> en experimental branch with deprecation is available as "u/chapoton/experiment-22907"

This looks fine for me.


---

Comment by chapoton created at 2017-05-03 15:08:49

let us wait for #18303 and then check than nothing else is broken by deprecation
----
New commits:


---

Comment by chapoton created at 2017-05-14 06:42:32

looks good, bot is morally green


---

Comment by chapoton created at 2017-05-14 11:36:12

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-05-14 11:36:12

back to needs review, please double check


---

Comment by dkrenn created at 2017-05-14 12:36:39

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-05-16 22:22:03

Resolution: fixed
