# Issue 18485: Fix weight of Nakajima monomials

archive/issues_018485.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat bsalisbury1 aschilling\n\nKeywords: crystals, nakajima monomials\n\nWith #18453, all weights are computed as the difference of the highest weight to what should be the weight. In particular, any highest weight element has weight 0.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18722\n\n",
    "created_at": "2015-06-17T20:10:24Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "Fix weight of Nakajima monomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18485",
    "user": "tscrim"
}
```
Assignee: sage-combinat

CC:  sage-combinat bsalisbury1 aschilling

Keywords: crystals, nakajima monomials

With #18453, all weights are computed as the difference of the highest weight to what should be the weight. In particular, any highest weight element has weight 0.

Issue created by migration from https://trac.sagemath.org/ticket/18722





---

archive/issue_comments_251269.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18485#issuecomment-251269",
    "user": "tscrim"
}
```

Last 10 new commits:



---

archive/issue_comments_251270.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18485#issuecomment-251270",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_251271.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2015-06-17T20:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18485#issuecomment-251271",
    "user": "tscrim"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_251272.json:
```json
{
    "body": "The following example failed with the original commit:\n\n```\nsage: M = crystals.NakajimaMonomials(['A',2,1], RootSystem(['A',2,1]).weight_lattice(extended=True).fundamental_weight(0))\nsage: m = M.module_generators[0]\nsage: m.weight()\nLambda[0]\n```\n\nA conditional was added to `__classcall_private__` of `CrystalsOfNakajimaMonomials` to ensure the weight lattice being used is the extended weight lattice with the underlying Cartan type is affine.\n\nSome doctests needed to be updated so that the input used the extended weight lattice in affine examples.\n\nDoctests passed on my machine, so if you agree with these changes, then you may set the ticket to positive review on my behalf.",
    "created_at": "2015-06-17T20:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18485#issuecomment-251272",
    "user": "bsalisbury1"
}
```

The following example failed with the original commit:

```
sage: M = crystals.NakajimaMonomials(['A',2,1], RootSystem(['A',2,1]).weight_lattice(extended=True).fundamental_weight(0))
sage: m = M.module_generators[0]
sage: m.weight()
Lambda[0]
```

A conditional was added to `__classcall_private__` of `CrystalsOfNakajimaMonomials` to ensure the weight lattice being used is the extended weight lattice with the underlying Cartan type is affine.

Some doctests needed to be updated so that the input used the extended weight lattice in affine examples.

Doctests passed on my machine, so if you agree with these changes, then you may set the ticket to positive review on my behalf.



---

archive/issue_comments_251273.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-17T20:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18485#issuecomment-251273",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251274.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-17T20:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18485#issuecomment-251274",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_251275.json:
```json
{
    "body": "Works for me. Thanks!",
    "created_at": "2015-06-17T20:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18485#issuecomment-251275",
    "user": "tscrim"
}
```

Works for me. Thanks!



---

archive/issue_comments_251276.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-06-19T08:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18485",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18485#issuecomment-251276",
    "user": "vbraun"
}
```

Resolution: fixed
