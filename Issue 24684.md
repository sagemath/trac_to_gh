# Issue 24684: Add optional package "ninja" (build system for polymake)

Issue created by migration from https://trac.sagemath.org/ticket/24921

Original creator: mkoeppe

Original creation time: 2018-03-06 18:30:19

polymake 3.2r2 requires ninja

https://ninja-build.org/


---

Comment by jdemeyer created at 2018-04-05 19:29:37

Replying to [ticket:24921 mkoeppe]:
> {{{
> (cd upstream && wget https://github.com/ninja-build/ninja/archive/v1.8.2.tar.gz -O ninja_build-1.8.2.tar.gz)
> }}}

They don't have official release tarballs? Not sure whether the release manager will accept this.
----
New commits:


---

Comment by mkoeppe created at 2018-04-05 19:31:48

Doesn't look like they do, but it doesn't stop Debian or other distributions to package it.


---

Comment by jdemeyer created at 2018-04-05 19:34:34

Use `sage-python23` to run Python scripts.


---

Comment by jdemeyer created at 2018-04-05 19:35:59

And this should probably depend on `$(PYTHON)`.


---

Comment by jdemeyer created at 2018-04-05 19:37:47

There is some filename mismatch between `ninja-1.8.2.tar.gz` and `ninja_build-1.8.2.tar.gz`


---

Comment by jdemeyer created at 2018-04-05 19:40:57

Can you please use the `./configure --verbose` option? Otherwise you get meaningless logs like

```
[ninja_build-1.8.2] [1/26] INLINE build/browse_py.h
[ninja_build-1.8.2] [2/26] CXX build/debug_flags.o
[ninja_build-1.8.2] [3/26] CXX build/edit_distance.o
[ninja_build-1.8.2] [4/26] CXX build/depfile_parser.o
[ninja_build-1.8.2] [5/26] CXX build/version.o
[ninja_build-1.8.2] [6/26] CXX build/browse.o
[ninja_build-1.8.2] [7/26] CXX build/string_piece_util.o
[ninja_build-1.8.2] [8/26] CXX build/metrics.o
[ninja_build-1.8.2] [9/26] CXX build/line_printer.o
[ninja_build-1.8.2] [10/26] CXX build/clparser.o
[ninja_build-1.8.2] [11/26] CXX build/graphviz.o
[ninja_build-1.8.2] [12/26] CXX build/util.o
[ninja_build-1.8.2] [13/26] CXX build/disk_interface.o
[ninja_build-1.8.2] [14/26] CXX build/subprocess-posix.o
[ninja_build-1.8.2] [15/26] CXX build/lexer.o
[ninja_build-1.8.2] [16/26] CXX build/deps_log.o
[ninja_build-1.8.2] [17/26] CXX build/build_log.o
[ninja_build-1.8.2] [18/26] CXX build/clean.o
[ninja_build-1.8.2] [19/26] CXX build/eval_env.o
[ninja_build-1.8.2] [20/26] CXX build/graph.o
[ninja_build-1.8.2] [21/26] CXX build/manifest_parser.o
[ninja_build-1.8.2] [22/26] CXX build/state.o
[ninja_build-1.8.2] [23/26] CXX build/ninja.o
[ninja_build-1.8.2] [24/26] CXX build/build.o
[ninja_build-1.8.2] [25/26] AR build/libninja.a
[ninja_build-1.8.2] [26/26] LINK ninja
```



---

Comment by jhpalmieri created at 2018-04-05 19:45:57

Replying to [comment:3 jdemeyer]:
> Replying to [ticket:24921 mkoeppe]:
> > {{{
> > (cd upstream && wget https://github.com/ninja-build/ninja/archive/v1.8.2.tar.gz -O ninja_build-1.8.2.tar.gz)
> > }}}
> 
> They don't have official release tarballs?

The page https://github.com/ninja-build/ninja/releases has a source code link (the same one mkoeppe posted. I guess that is the official release.


---

Comment by git created at 2018-04-05 19:50:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2018-04-05 21:30:00

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2018-04-05 21:32:50

Changing keywords from "" to "IMA-PolyGeom".


---

Comment by git created at 2018-04-05 22:03:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2018-04-06 10:39:01

Seems to work fine. However, Python seems to be used only for build system, so Python should be an order-only dependency (after the `|` symbol).

Positive review if you make that change.


---

Comment by jdemeyer created at 2018-04-06 12:37:10

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-04-06 16:29:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2018-04-06 16:30:12

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2018-04-07 08:33:05

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-05-09 09:49:34

Resolution: fixed
