# Issue 15245: Say very loud that LP variables are positive by default

Issue created by migration from https://trac.sagemath.org/ticket/15482

Original creator: ncohen

Original creation time: 2013-12-04 08:53:51

CC:  kcrisman

As the title says. It has been reported once again. We make this assumption because ALL lp solvers that we use make the same, but it does not mean everybody knows it `T_T`

Nathann


---

Comment by ncohen created at 2013-12-04 08:54:20

Changing status from new to needs_review.


---

Comment by git created at 2013-12-04 08:54:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ppurka created at 2013-12-04 14:58:45

The changes and cleanups (thanks!) look good to me.

Can you also put the warning in one additional place - the docstring for the class `MixedIntegerLinearProgram`? Since this is only documentation changes, I think with the additional change, it is good to go.


---

Comment by ncohen created at 2013-12-04 15:10:41

What do you think ? I added a warning and removed some lines which (I believe) did not help much and make the doc easier to read.

Nathann


---

Comment by git created at 2013-12-04 15:12:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ppurka created at 2013-12-04 15:24:39

Changing status from needs_review to positive_review.


---

Comment by ppurka created at 2013-12-04 15:24:39

Ok. Looks good to me now. Enough shouting. :)


---

Comment by kcrisman created at 2013-12-04 16:13:52

Changing status from positive_review to needs_work.


---

Comment by kcrisman created at 2013-12-04 16:13:52

Great and fast work.  But...  sorry, not loud enough.  

If you look at [the LP tutorial](http://www.sagemath.org/doc/thematic_tutorials/linear_programming.html), there is no indication of this (other than a parenthetical "for instance when you want some variables to be negative") - and that is where people will end with current SEO results.  [This doc](http://www.sagemath.org/doc/reference/numerical/sage/numerical/mip.html) does have it in the opening example, but even there it is not as visible as possible.  I think that for positive review here, we really need to have a `:warning` or something like that in a few places.  Remember, this is for people coming to LP who are not in all likelihood crazy graaaaaph theorists or in operations research, and who (like me, though I am not a complete novice to using LPs) will not at all suspect this problem.

And we all know that students only look for worked examples in order to do their homework, so why should it be any different with working people in the mathematical sciences?  :-)


---

Comment by ppurka created at 2013-12-04 16:27:23

You are right - but should there  be a "warning" in a tutorial? I think it should be a usual statement.

The MIP mentions it in the introductory part and then Nathann has already fixed it for the MILP part. Is there anywhere else in MIP that you have in mind?


---

Comment by ncohen created at 2013-12-04 19:06:47

Hmmmmmm... Right for the thematic tutorial, I am doing this right now. Right for the first example of the MIP module, though I did it in the first version of the patch I submitted to finally remove it, as adding a warning or actually a bold text more or less "broke" the flow of this explanation.

Hmmm.. I'll give it another try and add a commit to this ticket.

Nathann


---

Comment by git created at 2013-12-04 20:01:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2013-12-04 20:02:11

Changing status from needs_work to needs_review.


---

Comment by kcrisman created at 2013-12-05 00:50:43

I'm happy with the content of this as respects my earlier comment - thanks.  I don't know what it looks like, and a little of the details have changed (what happened to `dim`?)   I won't speak for the formatting but I'm sure ppurka will look at that carefully.  Do note that the lines seem to be longer than usual, more than 80 characters, perhaps?


---

Comment by ncohen created at 2013-12-05 08:36:07

Oh, well I removed this "dim" thing and I should deprecate it anyway. I'll send a patch for that today. I wrote this "dim" thing when I had no idea that `a[1,2]` was a valid key for a dictionary, and what I wrote is not only ugly and heavy but even slower. I'm pretty sure nobody but me uses that (and I stopped using them years ago), and it really isn't a good thing to put in the tutorial anyay.

As per the lines, they should be 80 characters long if Emacs did its job `O_o`

Nathann


---

Comment by ncohen created at 2013-12-06 12:27:21

(just created #15489 for this `dim` problem)

Nathann


---

Comment by ppurka created at 2013-12-06 13:06:59

Ok. Looks good to me.

One paragraph (line 135...) has 80-87 characters long lines. Not a big deal for me. I think your emacs setting has 85 chars not 80. You can update the ticket if you want with reflowed lines.


---

Comment by ppurka created at 2013-12-06 13:06:59

Changing status from needs_review to positive_review.


---

Comment by git created at 2013-12-06 13:37:16

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2013-12-06 13:37:16

Changing status from positive_review to needs_review.


---

Comment by ncohen created at 2013-12-06 13:38:05

Ahahaha. Okay okay, done. I love git commmits `:-P`

Nathann


---

Comment by ncohen created at 2013-12-06 13:38:11

Changing status from needs_review to positive_review.


---

Comment by tmonteil created at 2013-12-07 12:53:01

In http://git.sagemath.org/sage.git/commit/?id=1f6c156 (sorry i didn't move to the git workflow yet), in the sentence "By default, all variables of a LP are assumed to be positive", shouldn't it be "non-negative" instead of "positive" (classical french mistake :p) ?


---

Comment by tmonteil created at 2013-12-07 12:53:01

Changing status from positive_review to needs_info.


---

Comment by git created at 2013-12-07 14:45:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2013-12-07 14:45:49

Changing status from needs_info to positive_review.


---

Comment by ncohen created at 2013-12-07 14:45:49

Done.


---

Comment by tmonteil created at 2013-12-10 16:37:38

non-negative review :P


---

Comment by kcrisman created at 2013-12-10 22:00:45

> non-negative review :P
LOL


---

Comment by git created at 2013-12-16 14:17:15

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2013-12-16 14:17:15

Changing status from positive_review to needs_review.


---

Comment by ncohen created at 2013-12-16 14:18:47

Sorryyyyyyy guys, there was a broken doctest in graph.py because of the change to MixedIntegerLinearProgra.solve which removed an old argument. SOoooooo this thing is waiting for a review again `^^;`

Nathann


---

Comment by git created at 2013-12-16 14:59:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ppurka created at 2013-12-21 13:33:07

What is up with the hundreds of failing doctests? `o_O`


---

Comment by ncohen created at 2013-12-21 14:22:12

`T_T`

I knew something was weird. The doctests passed on my computer, and I was wondering if there was something new with the deprecation warnings, like they are "only shown once" in the first doctests of each file and never again. It all passed.

I guess it was a bug and all functions need to be fixed, which seems natural. I am recompiling the commit over beta1 and I will check it again. Hoping that the doctests fail on my computer, this time `:-P`

Nathann


---

Comment by ncohen created at 2013-12-21 14:55:25

Oh. Well. All tests pass in both the graph/ and numerical/ folder `O_o`

Soooooooo where are your broken doctests, actually ? `O_o`

Nathann


---

Comment by ncohen created at 2013-12-21 14:57:04

(sorry about my previous comment by the way. I was thinking of a different patch)


---

Comment by git created at 2014-02-06 10:59:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2014-02-13 07:11:45

Is this supposed to work on Sage-6.0? I get 70 doctests fails.


---

Comment by git created at 2014-02-13 10:15:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-02-13 10:18:29

70 fails ? Where ? `O_o`

I just rebased it on 6.2.beta1 (which should change nothing at all), and well...


```
~/sage$ sage -b && sage -tp 4 -l graphs/ numerical/
...
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```


Nathann


---

Comment by ppurka created at 2014-02-14 09:01:27

I got one doctest failure:

```
Running doctests with ID 2014-02-14-16-32-46-c7933957.
Doctesting 1 file.
sage -t --long src/doc/en/thematic_tutorials/linear_programming.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/linear_programming.rst", line 181, in doc.en.thematic_tutorials.linear_programming
Failed example:
    p.add_constraint(y[3,2] + x[5] == 6)
Exception raised:
    Traceback (most recent call last):
      File "/home/basu/Installations/sage-6.1.beta2.server/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/basu/Installations/sage-6.1.beta2.server/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest doc.en.thematic_tutorials.linear_programming[12]>", line 1, in <module>
        p.add_constraint(y[Integer(3),Integer(2)] + x[Integer(5)] == Integer(6))
    TypeError: 'sage.numerical.linear_functions.LinearFunction' object has no attribute '__getitem__'
**********************************************************************
1 item had failures:
   1 of  48 in doc.en.thematic_tutorials.linear_programming
    [44 tests, 1 failure, 0.10 s]
----------------------------------------------------------------------
sage -t --long src/doc/en/thematic_tutorials/linear_programming.rst  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 0.2 seconds
    cpu time: 0.1 seconds
    cumulative wall time: 0.1 seconds
```



---

Comment by ncohen created at 2014-02-14 10:52:05

Oh. I fixed it already somewhere else, I am pretty sure. Anyway, some later patch will conflict `:-D`

Anyway, fixed again !

Nathann


---

Comment by git created at 2014-02-14 10:52:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ppurka created at 2014-02-14 10:56:24

Looks good. This process took inordinately long just for documentation changes. :(


---

Comment by ppurka created at 2014-02-14 10:56:24

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-02-14 10:58:06

Thaaaaaaaaanks !!! I will now rebase #15489, its branch name is red for some reason `O_o`

Nathann


---

Comment by rws created at 2014-02-14 10:59:44

OK, confirm all tests passed, too. I'm slowly coming to grips with the system.


---

Comment by vbraun created at 2014-02-21 20:07:58

Resolution: fixed
