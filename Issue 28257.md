# Issue 28257: upgrade rpy2 to 3.1.0

Issue created by migration from https://trac.sagemath.org/ticket/28494

Original creator: isuruf

Original creation time: 2019-09-14 16:59:04

CC:  slelievre charpent @timokau arojas chapoton

conda is already in 3.1.0


---

Comment by isuruf created at 2019-09-14 17:03:08

Looks like rpy2 has dropped python2 support in recent versions


---

Comment by fbissey created at 2019-09-14 19:17:39

I have 2.8.6 as the latest python2 supported version in sage-on-gentoo.


---

Comment by slelievre created at 2019-09-16 03:27:09

Changing keywords from "" to "upgrade, rpy2".


---

Comment by slelievre created at 2019-09-16 03:27:09

We can either make this ticket "Upgrade to rpy2 3.x" and make it depend on the removal of py2 support (#28000),
or make the ticket "Upgrade to rpy2 2.8.6" which is the latest py2-compatible (2.9 and following are not).


---

Comment by charpent created at 2019-09-18 13:24:48

Replying to [comment:3 slelievre]:
> We can either make this ticket "Upgrade to rpy2 3.x" and make it depend on the removal of py2 support (#28000),
> or make the ticket "Upgrade to rpy2 2.8.6" which is the latest py2-compatible (2.9 and following are not).

So the question is: when #28000 will be applied ?

Subidiary question : shouldn't this be a dependency of #28000 ?


---

Comment by charpent created at 2019-09-23 10:41:41

I am of two minds about whether waiting for #28000:

* ISTR that 2.8.6 is the last version supporting Python 2. However, [Pipy](https://pypi.org/project/rpy2/#history) mentions releases version 2.9.0 to 2.9.6b0, the latter being marked as a pre-release for the 3.0.0 bersion released the day after 2.9.6b0 release...

* What is the increment in functionality that upgrading 2.8.2 --> 2.8.6 gives us ?
* How expensive (in terms of workload) it is ?

In other words, given our limited resources, isn't it better to wait for a Python-3 based Sagemath and go directly to `rpy2 3.1` ?


---

Comment by @timokau created at 2019-11-18 21:41:15

Antonio already has a patch ready for 3.x: https://aur.archlinux.org/cgit/aur.git/tree/sagemath-rpy-3.patch?h=5649a97db5486f48139b0bd07831a4912a672720


---

Comment by arojas created at 2020-01-11 08:29:02

My patch is now up for review at #28988, modified to keep 2.x compatibility so it can be merged independently of the rpy update.


---

Comment by mkoeppe created at 2020-07-03 18:54:40

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-07-03 18:54:40

dup of #29441, please close


---

Comment by slelievre created at 2020-08-19 21:17:21

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2020-08-19 21:17:21

Changing component from build to packages: standard.


---

Comment by slelievre created at 2020-08-19 21:17:21

Done at #29441.


---

Comment by chapoton created at 2020-08-20 07:06:46

Resolution: duplicate
