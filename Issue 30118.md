# Issue 30118: Graphs: simple bipartite double method added to undirected graphs

archive/issues_030118.json:
```json
{
    "body": "CC:  @dimpase\n\nThe bipartite double of a graph is its tensor product with the graph K_2.\nA simple method `bipartite_double(extended=False)` is added to the undirected graph class in order to compute the bipartite double and the extended bipartite double of a graph.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30355\n\n",
    "created_at": "2020-08-14T13:31:21Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Graphs: simple bipartite double method added to undirected graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30118",
    "user": "@Ivo-Maffei"
}
```
CC:  @dimpase

The bipartite double of a graph is its tensor product with the graph K_2.
A simple method `bipartite_double(extended=False)` is added to the undirected graph class in order to compute the bipartite double and the extended bipartite double of a graph.

Issue created by migration from https://trac.sagemath.org/ticket/30355





---

archive/issue_comments_428370.json:
```json
{
    "body": "The dependency on #30240 is only needed to avoid a merge conflict in the master bibliography",
    "created_at": "2020-08-14T13:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428370",
    "user": "@Ivo-Maffei"
}
```

The dependency on #30240 is only needed to avoid a merge conflict in the master bibliography



---

archive/issue_comments_428371.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-14T13:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428371",
    "user": "@Ivo-Maffei"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_428372.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2020-08-14T13:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428372",
    "user": "@Ivo-Maffei"
}
```

Last 10 new commits:



---

archive/issue_comments_428373.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-14T14:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428373",
    "user": "@dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_428374.json:
```json
{
    "body": "Several comments:\n- no need to add dependency on #30240 here\n\n- small changes\n\n```diff\n-        The bipartite double of a graph `G` has vertices\n-        `\\{ (v,0), (v,1) : v \\in G\\}` and for any edge `(u, v)` in `G`\n-        we have edges `((u,0),(v,1))` and `((u,1),(v,0))`.\n-        Note that this is the tensor product of `G` with `K_2`.\n-        See :\n+        The bipartite double of a graph `G` has vertex set\n+        `\\{ (v,0), (v,1) : v \\in G\\}` and for any edge `(u, v)` in `G`\n+        it has edges `((u,0),(v,1))` and `((u,1),(v,0))`.\n+        Note that this is the tensor product of `G` with `K_2`.\n```\n\n\n- input\n\n```diff\n-        - ``extended`` -- boolean (optional); if ``True`` return the extended\n-          bipartite double, else the bipartite double. Default: ``False``.\n+        - ``extended`` -- boolean (default: ``False``); Whether to return the extended\n+          bipartite double, or only the bipartite double (default)\n```\n\n\n- it is not important to mention and test that the input graph is untouched. You return a new graph, no?\n\n- instead of a `REFERENCES:` block, use a `.. SEEALSO::` block (check other methods)\n\n- `TETS` -> `TESTS`\n\n- no need to import the complete graph generator, simply use `Graph([(0, 1)])`\n\n- simpler code\n\n```diff\n-        if extended:\n-            for v in self:\n-                v1 = (v, 0)\n-                v2 = (v, 1)\n-\n-                G.add_edge((v1, v2))\n+        if extended:\n+            G.add_edges(((v, 0), (v, 1)) for v in self)\n```\n\n\n- What if self is the empty graph ? a 1 vertex graph ? a disconnected graph ?\n\n- instead of testing for equality (`sage: H == G.tensor_product(graphs.CompleteGraph(2))`), it might be better to check if the graphs are isomorphismic.",
    "created_at": "2020-08-14T14:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428374",
    "user": "@dcoudert"
}
```

Several comments:
- no need to add dependency on #30240 here

- small changes

```diff
-        The bipartite double of a graph `G` has vertices
-        `\{ (v,0), (v,1) : v \in G\}` and for any edge `(u, v)` in `G`
-        we have edges `((u,0),(v,1))` and `((u,1),(v,0))`.
-        Note that this is the tensor product of `G` with `K_2`.
-        See :
+        The bipartite double of a graph `G` has vertex set
+        `\{ (v,0), (v,1) : v \in G\}` and for any edge `(u, v)` in `G`
+        it has edges `((u,0),(v,1))` and `((u,1),(v,0))`.
+        Note that this is the tensor product of `G` with `K_2`.
```


- input

```diff
-        - ``extended`` -- boolean (optional); if ``True`` return the extended
-          bipartite double, else the bipartite double. Default: ``False``.
+        - ``extended`` -- boolean (default: ``False``); Whether to return the extended
+          bipartite double, or only the bipartite double (default)
```


- it is not important to mention and test that the input graph is untouched. You return a new graph, no?

- instead of a `REFERENCES:` block, use a `.. SEEALSO::` block (check other methods)

- `TETS` -> `TESTS`

- no need to import the complete graph generator, simply use `Graph([(0, 1)])`

- simpler code

```diff
-        if extended:
-            for v in self:
-                v1 = (v, 0)
-                v2 = (v, 1)
-
-                G.add_edge((v1, v2))
+        if extended:
+            G.add_edges(((v, 0), (v, 1)) for v in self)
```


- What if self is the empty graph ? a 1 vertex graph ? a disconnected graph ?

- instead of testing for equality (`sage: H == G.tensor_product(graphs.CompleteGraph(2))`), it might be better to check if the graphs are isomorphismic.



---

archive/issue_comments_428375.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-14T17:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428375",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428376.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-14T17:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428376",
    "user": "@Ivo-Maffei"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_428377.json:
```json
{
    "body": "Replying to [comment:3 dcoudert]:\n> - no need to add dependency on #30240 here\nI based this branch on #30240 because otherwise the reference [VDKT2016] would not work.\nI could add it to the master bibliography again, but I think this will cause a merge conflict with #30240.\n\n> - it is not important to mention and test that the input graph is untouched. You return a new graph, no?\nI mentioned it in the `OUTPUT` section. I could stress it in a `.. NOTE::` block, if you wish.\n\n> - What if self is the empty graph ? a 1 vertex graph ? a disconnected graph ?\nI added this cases in the `TESTS` and `EXAMPLES` sections. Should I also discuss them somewhere else?",
    "created_at": "2020-08-14T17:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428377",
    "user": "@Ivo-Maffei"
}
```

Replying to [comment:3 dcoudert]:
> - no need to add dependency on #30240 here
I based this branch on #30240 because otherwise the reference [VDKT2016] would not work.
I could add it to the master bibliography again, but I think this will cause a merge conflict with #30240.

> - it is not important to mention and test that the input graph is untouched. You return a new graph, no?
I mentioned it in the `OUTPUT` section. I could stress it in a `.. NOTE::` block, if you wish.

> - What if self is the empty graph ? a 1 vertex graph ? a disconnected graph ?
I added this cases in the `TESTS` and `EXAMPLES` sections. Should I also discuss them somewhere else?



---

archive/issue_comments_428378.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-15T07:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428378",
    "user": "@dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_428379.json:
```json
{
    "body": "LGTM.",
    "created_at": "2020-08-15T07:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428379",
    "user": "@dcoudert"
}
```

LGTM.



---

archive/issue_comments_428380.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-23T17:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30118",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30118#issuecomment-428380",
    "user": "@vbraun"
}
```

Resolution: fixed
