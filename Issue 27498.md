# Issue 27498: Support matrix input in @interact

Issue created by migration from https://trac.sagemath.org/ticket/27735

Original creator: jdemeyer

Original creation time: 2019-04-27 07:22:50

CC:  slelievre was zerline

This should work as expected:

```
@interact
def f(A = matrix([[1,1],[-1,1]])):
    print(A)
    print(type(A))
```



---

Comment by kcrisman created at 2019-04-27 18:49:27

I feel like this _used_ to work, at least in sagenb ... interesting.  It does work [in Sage cell](https://sagecell.sagemath.org/?z=eJxzyMwrSS1KTC7h5UpJTVNI03BUsFXITSwpyqzQiI421DGM1YnWBVGxmppWvFwKQFBQBNSj4aiJzCupLEgFCmkCAJITFfI=&lang=sage&interacts=eJyLjgUAARUAuQ==).

----

For anyone coming to this - see [this sage-support discussion](https://groups.google.com/d/topic/sage-support/UmTrw7ynt9U/discussion) for an example of background.


---

Comment by jdemeyer created at 2019-04-27 19:18:56

Replying to [comment:1 kcrisman]:
> I feel like this _used_ to work, at least in sagenb ...

I should have mentioned: this is about Jupyter.


---

Comment by kcrisman created at 2019-04-27 22:42:06

This is why we really need to get the interact documentation OUT of (or copied elsewhere) the sagenb docs.  Nobody even knows how t use interact any more.  Do you think it might fit in one of the files you modified here?
----
New commits:


---

Comment by git created at 2019-04-29 12:14:53

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2019-04-29 12:17:12

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2019-04-29 12:49:41

See #27747 for docs.


---

Comment by vklein created at 2019-04-30 08:41:54

Currently using the widget may generate `SyntaxError` when you modifiy an input field.
Let's say you have value `1` in one of your input fields and you want to input `-23` instead, you get one syntax error when delelting `1` on a second when you type `-`.

```
  File "<string>", line 1
    -
    ^
SyntaxError: unexpected EOF while parsing
```


Maybe there is a way of filtering these cases or evaluating the input only after the focus leave the input field instead of evaluating after each modification/keystroke.


---

Comment by jdemeyer created at 2019-04-30 09:34:17

Vincent, you may be right but that's certainly outside the scope of this ticket.


---

Comment by vklein created at 2019-04-30 09:47:58

I would not say "certainly" the ticket description say 
> This should work as expected ...
and one can expect not generating `SyntaxError` when modifying an input field value as it is the reason of using interact.


---

Comment by jdemeyer created at 2019-04-30 09:51:33

But that's an issue with interacts in general, not specific with `matrix`.


---

Comment by vklein created at 2019-04-30 09:51:49

I wanted just to make sure that you are aware of that behaviour, and indeed this ticket fix a defect as it is.


---

Comment by vklein created at 2019-04-30 09:52:12

Replying to [comment:12 jdemeyer]:
> But that's an issue with interacts in general, not specific with `matrix`.

Ok


---

Comment by vklein created at 2019-04-30 10:03:11

Changing status from needs_review to positive_review.


---

Comment by vklein created at 2019-04-30 10:03:11

The python3 patchbot plugin says "from .widgets_sagenb import input_grid" is incompatible with python3 which isn't true.

Looks good to me.


---

Comment by kcrisman created at 2019-04-30 11:45:22

Changing status from positive_review to needs_info.


---

Comment by kcrisman created at 2019-04-30 11:45:22

> > But that's an issue with interacts in general, not specific with `matrix`.
> 
> Ok

On the Sage cell server, there is a "submit" button with matrices, which is why it isn't an issue.  In sagenb there is no submit button, but this focus issue does not arise; until one presses enter, one can modify an input entry to heart's content. So I would indeed call this a bug.  

The question is whether it is unique to this new matrix input functionality in Jupyter (in which case it should be fixed here), or whether all Jupyter input grids etc. suffer from this (in which case a new ticket is needed, and it's yet another place where sagenb still is better than Jupyter).  What happens with `input_grid` currently in Jupyter?


---

Comment by jdemeyer created at 2019-04-30 11:58:00

Please open a new ticket for that.


---

Comment by jdemeyer created at 2019-04-30 11:58:00

Changing status from needs_info to positive_review.


---

Comment by kcrisman created at 2019-04-30 12:57:51

> Please open a new ticket for that.

Since I haven't observed it, I don't know if it is limited to `input_grid` or not, and I don't have time to fire up a Jupyter right now and do testing.  `@`vklein, since you originally observed this, can you test what does/doesn't work in Jupyter and open a new ticket?  Thank you!


---

Comment by jdemeyer created at 2019-04-30 13:02:01

It's a general "problem" (arguable, since one could call it a feature) with all interacts that have some kind of textual input which is evaluated.


---

Comment by kcrisman created at 2019-04-30 13:10:41

On Jupyter only, then?  See #27752.


---

Comment by slelievre created at 2019-05-05 21:40:36

Changing keywords from "" to "interact, grid widget, jupyter".


---

Comment by vbraun created at 2019-05-06 11:56:19

Resolution: fixed
