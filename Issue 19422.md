# Issue 19422: Poset: inverse function of ordinal_sum()

archive/issues_019422.json:
```json
{
    "body": "CC:  @nathanncohen @fchapoton\n\nKeywords: poset\n\nI suggest adding a function that decomposes a poset \"vertically\", i.e. has same relationship to `ordinal_sum()` as `connected_components()` has to `disjoint_union()`.\n\nI am not sure about the name. Work name is `ordinal_decomposition`. Maybe it could be `ordinal_components` or `vertical_components`.\n\nHere is the code to add to `hasse_diagram.py`. I suppose not to have time to make this a patch file for few days. Feel free to comment.\n\n```\ndef ordinal_decomposition(self):\n    r\"\"\"\n    Return the ordinal decomposition of the poset.\n    \n    This function is kind of inverse to ordinal_sum(). Ordinal\n    decomposition of a poset `P` is the list of posets\n    `P_1, \\ldots, P_n` so that `P` is ordinal decomposition of them.\n\n    OUTPUT:\n        \n    List of numbers `e_1, \\ldots, e_n`\n    so that `P_1` is subposet containing `0, \\ldots, e_1`,\n    `P_2` is subposet containing `e_1+1, \\ldots, e_2` and so on.\n   \n    ALGORITHM::\n        \n        Suppose that poset `P` is the ordinal sum of posets `L` and\n        `U`. Then `P` contains maximal antichains `l` and `u` such that\n        every element of `u` covers exactly every element of `l` and\n        every element of `l` is covered by exactly every element of `u`; they\n        correspond to maximal elements of `L` and minimal elements\n        of `U`.\n\n        We know that the Hasse diagram is a topologically sorted DAG,\n        starting numbering from zero. Hence, if `L` has `n` elements, \n        then `l` contains element `n-1` and `u` contains element\n        `n`.\n\n        We keep track of the maximal elements of subposet induced\n        by elements 0..e and minimal elements of subposet induced\n        by elements e+1..n, incrementing e one by one. Then we just\n        check if they can be `l` and `u` in previous description.\n\n    EXAMPLES::\n\n        sage: from sage.combinat.posets.hasse_diagram import HasseDiagram\n        sage: H = HasseDiagram({0:[2], 1:[2, 3], 2:[4, 5, 6], 3:[4, 5, 6],\n        ....: 4:[7], 5:[7], 6:[7], 7:[8]})\n        sage: H.ordinal_decomposition()\n        [3, 6, 7, 8]\n\n    TESTS::\n        \n        sage: from sage.misc.prandom import randint\n        sage: n = randint(1, 10)\n        sage: P = Posets.RandomPoset(n, 0.1)\n        sage: H = P.ordinal_sum(P)._hasse_diagram\n        sage: m = H.ordinal_decomposition()\n        sage: n in m\n        True\n    \"\"\"\n    cut_points = []\n    n = self.order()\n    in_degrees = [len(self.neighbors_in(e)) for e in range(n)]\n    lower = set([])\n    upper = set(self.sources())\n\n    for e in range(n):\n        lower.add(e)\n        for lc in self.neighbors_in(e):\n            lower.discard(lc)\n        upper.discard(e)\n        up_covers = self.neighbors_out(e)\n        for uc in up_covers:\n            in_degrees[uc] -= 1\n            if in_degrees[uc] == 0:\n                upper.add(uc)\n        if e+1 in up_covers:\n            for l in lower:\n                if set(self.neighbors_out(l)) != upper:\n                    break\n            else:\n                cut_points.append(e)\n    cut_points.append(n-1)\n    return cut_points\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/19659\n\n",
    "created_at": "2015-12-02T09:15:56Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Poset: inverse function of ordinal_sum()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19422",
    "user": "https://github.com/jm58660"
}
```
CC:  @nathanncohen @fchapoton

Keywords: poset

I suggest adding a function that decomposes a poset "vertically", i.e. has same relationship to `ordinal_sum()` as `connected_components()` has to `disjoint_union()`.

I am not sure about the name. Work name is `ordinal_decomposition`. Maybe it could be `ordinal_components` or `vertical_components`.

Here is the code to add to `hasse_diagram.py`. I suppose not to have time to make this a patch file for few days. Feel free to comment.

```
def ordinal_decomposition(self):
    r"""
    Return the ordinal decomposition of the poset.
    
    This function is kind of inverse to ordinal_sum(). Ordinal
    decomposition of a poset `P` is the list of posets
    `P_1, \ldots, P_n` so that `P` is ordinal decomposition of them.

    OUTPUT:
        
    List of numbers `e_1, \ldots, e_n`
    so that `P_1` is subposet containing `0, \ldots, e_1`,
    `P_2` is subposet containing `e_1+1, \ldots, e_2` and so on.
   
    ALGORITHM::
        
        Suppose that poset `P` is the ordinal sum of posets `L` and
        `U`. Then `P` contains maximal antichains `l` and `u` such that
        every element of `u` covers exactly every element of `l` and
        every element of `l` is covered by exactly every element of `u`; they
        correspond to maximal elements of `L` and minimal elements
        of `U`.

        We know that the Hasse diagram is a topologically sorted DAG,
        starting numbering from zero. Hence, if `L` has `n` elements, 
        then `l` contains element `n-1` and `u` contains element
        `n`.

        We keep track of the maximal elements of subposet induced
        by elements 0..e and minimal elements of subposet induced
        by elements e+1..n, incrementing e one by one. Then we just
        check if they can be `l` and `u` in previous description.

    EXAMPLES::

        sage: from sage.combinat.posets.hasse_diagram import HasseDiagram
        sage: H = HasseDiagram({0:[2], 1:[2, 3], 2:[4, 5, 6], 3:[4, 5, 6],
        ....: 4:[7], 5:[7], 6:[7], 7:[8]})
        sage: H.ordinal_decomposition()
        [3, 6, 7, 8]

    TESTS::
        
        sage: from sage.misc.prandom import randint
        sage: n = randint(1, 10)
        sage: P = Posets.RandomPoset(n, 0.1)
        sage: H = P.ordinal_sum(P)._hasse_diagram
        sage: m = H.ordinal_decomposition()
        sage: n in m
        True
    """
    cut_points = []
    n = self.order()
    in_degrees = [len(self.neighbors_in(e)) for e in range(n)]
    lower = set([])
    upper = set(self.sources())

    for e in range(n):
        lower.add(e)
        for lc in self.neighbors_in(e):
            lower.discard(lc)
        upper.discard(e)
        up_covers = self.neighbors_out(e)
        for uc in up_covers:
            in_degrees[uc] -= 1
            if in_degrees[uc] == 0:
                upper.add(uc)
        if e+1 in up_covers:
            for l in lower:
                if set(self.neighbors_out(l)) != upper:
                    break
            else:
                cut_points.append(e)
    cut_points.append(n-1)
    return cut_points
```

Issue created by migration from https://trac.sagemath.org/ticket/19659





---

archive/issue_comments_266673.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-04T18:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266673",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_266674.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-12-04T18:51:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266674",
    "user": "https://github.com/jm58660"
}
```

New commits:



---

archive/issue_comments_266675.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-16T13:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_053996.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2015-12-18T10:24:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "milestone": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19422#event-53996"
}
```



---

archive/issue_comments_266676.json:
```json
{
    "body": "Dime, do you got a spare time for quite easy(?) review?",
    "created_at": "2015-12-18T10:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266676",
    "user": "https://github.com/jm58660"
}
```

Dime, do you got a spare time for quite easy(?) review?



---

archive/issue_comments_266677.json:
```json
{
    "body": "it's the 1st time I see \"ordinal sum\". So it's not going to be quick for me here...",
    "created_at": "2015-12-18T15:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266677",
    "user": "https://github.com/dimpase"
}
```

it's the 1st time I see "ordinal sum". So it's not going to be quick for me here...



---

archive/issue_comments_266678.json:
```json
{
    "body": "Replying to [comment:5 dimpase]:\n> it's the 1st time I see \"ordinal sum\". So it's not going to be quick for me here...\n\n\nOK. Ordinal sum is actually *very* simple thing: Just put one poset below another. (Defined in Enumerative Combinatorics section 3.2 paragraph 1.)",
    "created_at": "2015-12-18T15:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266678",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:5 dimpase]:
> it's the 1st time I see "ordinal sum". So it's not going to be quick for me here...


OK. Ordinal sum is actually *very* simple thing: Just put one poset below another. (Defined in Enumerative Combinatorics section 3.2 paragraph 1.)



---

archive/issue_comments_266679.json:
```json
{
    "body": "Nathann, can you check this? This is quite similar to vertical decomposition code in lattices.\n\nI think that this could be useful in it's own, hence \"frontend\" in `posets.py`. But this is also one way to get series-parallel decomposition. (Which is one way to get faster count of linear extensions.)",
    "created_at": "2016-01-17T07:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266679",
    "user": "https://github.com/jm58660"
}
```

Nathann, can you check this? This is quite similar to vertical decomposition code in lattices.

I think that this could be useful in it's own, hence "frontend" in `posets.py`. But this is also one way to get series-parallel decomposition. (Which is one way to get faster count of linear extensions.)



---

archive/issue_comments_266680.json:
```json
{
    "body": "Why do you think it should belong to the `HasseDiagram` class?",
    "created_at": "2016-01-17T08:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266680",
    "user": "https://github.com/nathanncohen"
}
```

Why do you think it should belong to the `HasseDiagram` class?



---

archive/issue_comments_266681.json:
```json
{
    "body": "Replying to [comment:8 ncohen]:\n> Why do you think it should belong to the `HasseDiagram` class?\n\n\nOther possibility would be `posets.py`. But then recursive `ordinal_decomposition`-`connected_components` would unnecessarily create intermediate posets instead of `HasseDiagram`s. It is slower.\n\nAnd series-parallel decomposition is nothing more than just trying \"ordinal and parallel decomposition\" until there is nothing that can be done.",
    "created_at": "2016-01-17T08:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266681",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:8 ncohen]:
> Why do you think it should belong to the `HasseDiagram` class?


Other possibility would be `posets.py`. But then recursive `ordinal_decomposition`-`connected_components` would unnecessarily create intermediate posets instead of `HasseDiagram`s. It is slower.

And series-parallel decomposition is nothing more than just trying "ordinal and parallel decomposition" until there is nothing that can be done.



---

archive/issue_comments_266682.json:
```json
{
    "body": "> Other possibility would be `posets.py`. But then recursive `ordinal_decomposition`-`connected_components` would unnecessarily create intermediate posets instead of `HasseDiagram`s. It is slower.\n\n\nI don't see why. Can't you access `_hasse_diagram` directly?\n\nNathann",
    "created_at": "2016-01-17T09:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266682",
    "user": "https://github.com/nathanncohen"
}
```

> Other possibility would be `posets.py`. But then recursive `ordinal_decomposition`-`connected_components` would unnecessarily create intermediate posets instead of `HasseDiagram`s. It is slower.


I don't see why. Can't you access `_hasse_diagram` directly?

Nathann



---

archive/issue_comments_266683.json:
```json
{
    "body": "Replying to [comment:10 ncohen]:\n\n> I don't see why. Can't you access `_hasse_diagram` directly?\n\n\nWithout copying code? Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.",
    "created_at": "2016-01-17T09:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266683",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:10 ncohen]:

> I don't see why. Can't you access `_hasse_diagram` directly?


Without copying code? Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.



---

archive/issue_comments_266684.json:
```json
{
    "body": "> Without copying code?\n\n\nI do not understand this sentence.\n\nWhat I meant is that your method could be a Poset method, which would access `self._hasse_diagram` directly.\n\n> Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.\n\n\nWhy do you insist on having it return a Hasse Diagram? If you want the decomposition feature without having to build posets, then you could have a 'as_posets=True` optional argument in the Poset method, which would either return a list of posets or return a partition of the elements.\n\nNathann",
    "created_at": "2016-01-17T09:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266684",
    "user": "https://github.com/nathanncohen"
}
```

> Without copying code?


I do not understand this sentence.

What I meant is that your method could be a Poset method, which would access `self._hasse_diagram` directly.

> Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.


Why do you insist on having it return a Hasse Diagram? If you want the decomposition feature without having to build posets, then you could have a 'as_posets=True` optional argument in the Poset method, which would either return a list of posets or return a partition of the elements.

Nathann



---

archive/issue_comments_266685.json:
```json
{
    "body": "Replying to [comment:12 ncohen]:\n> > Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.\n\n> \n> Why do you insist on having it return a Hasse Diagram? If you want the decomposition feature without having to build posets, then you could have a 'as_posets=True` optional argument in the Poset method, which would either return a list of posets or return a partition of the elements.\n\n\nThis is true. But then, what's wrong with having functions at `hasse_diagram.py`?\n\n(In general it makes possible to do a little optimization for advanced users. There is not always need to build poset object, if some filtering can be done in Hasse diagrams.)",
    "created_at": "2016-01-17T09:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266685",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:12 ncohen]:
> > Then ordinal decomposition function in `posets.py` should return `HasseDiagram`, which sounds odd.

> 
> Why do you insist on having it return a Hasse Diagram? If you want the decomposition feature without having to build posets, then you could have a 'as_posets=True` optional argument in the Poset method, which would either return a list of posets or return a partition of the elements.


This is true. But then, what's wrong with having functions at `hasse_diagram.py`?

(In general it makes possible to do a little optimization for advanced users. There is not always need to build poset object, if some filtering can be done in Hasse diagrams.)



---

archive/issue_comments_266686.json:
```json
{
    "body": "> This is true. But then, what's wrong with having functions at `hasse_diagram.py`?\n\n\nI don't believe that a designs that requires you to implement two functions every time you need one is a good thing.. Additionally, the docstring of the HasseDiagram function that currently appears in this branch starts with `Return the ordinal decomposition of the poset`. This method screams that it does not belong there.\n\n> (In general it makes possible to do a little optimization for advanced users. There is not always need to build poset object, if some filtering can be done in Hasse diagrams.)\n\n\nYou do not need to build posets even though you are a Poset method. Because you can access `_hasse_diagram` directly, and because there is no constraint whastoever on the type of what you should return. You can have optional arguments to return the result as whatever you want: posets, digraphs, partitions...\n\nAnd if the Poset constructor was even remotely sensible you would have no reason to *fear* the time loss in the poset constructor.\n\nNathann",
    "created_at": "2016-01-17T09:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266686",
    "user": "https://github.com/nathanncohen"
}
```

> This is true. But then, what's wrong with having functions at `hasse_diagram.py`?


I don't believe that a designs that requires you to implement two functions every time you need one is a good thing.. Additionally, the docstring of the HasseDiagram function that currently appears in this branch starts with `Return the ordinal decomposition of the poset`. This method screams that it does not belong there.

> (In general it makes possible to do a little optimization for advanced users. There is not always need to build poset object, if some filtering can be done in Hasse diagrams.)


You do not need to build posets even though you are a Poset method. Because you can access `_hasse_diagram` directly, and because there is no constraint whastoever on the type of what you should return. You can have optional arguments to return the result as whatever you want: posets, digraphs, partitions...

And if the Poset constructor was even remotely sensible you would have no reason to *fear* the time loss in the poset constructor.

Nathann



---

archive/issue_comments_266687.json:
```json
{
    "body": "Replying to [comment:14 ncohen]:\n> > This is true. But then, what's wrong with having functions at `hasse_diagram.py`?\n\n> \n> I don't believe that a designs that requires you to implement two functions every time you need one is a good thing.. Additionally, the docstring of the HasseDiagram function that currently appears in this branch starts with `Return the ordinal decomposition of the poset`. This method screams that it does not belong there.\n\n\nHasse diagram is a poset with some constraints... I can change that docstring.\n\nBut the question remains: What is the meaning of `hasse_diagram.py`? Whole poset class could be implemented with just a digraph as one member variable. But then I guess we would have more internal functions starting with `_`. Or more functions returning something actually only useful for internal use.\n\nAn example: check (broken!) parameter `partial` at `maximal_chains`. It is needed for `order_complex`. I think that the whole concept of \"partial maximal chain\" is odd and should be removed. It could have placed in `hasse_diagrams.py`, which is meant for internal implementation. (Btw, see #18944 - my suggestion to drop `partial`-option was rejected.)\n\nI think that I can generate something like all posets of size 7 in the same time as all Hasse diagrams of size 8. So it really loses some cpu time to make posets.",
    "created_at": "2016-01-17T10:03:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266687",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:14 ncohen]:
> > This is true. But then, what's wrong with having functions at `hasse_diagram.py`?

> 
> I don't believe that a designs that requires you to implement two functions every time you need one is a good thing.. Additionally, the docstring of the HasseDiagram function that currently appears in this branch starts with `Return the ordinal decomposition of the poset`. This method screams that it does not belong there.


Hasse diagram is a poset with some constraints... I can change that docstring.

But the question remains: What is the meaning of `hasse_diagram.py`? Whole poset class could be implemented with just a digraph as one member variable. But then I guess we would have more internal functions starting with `_`. Or more functions returning something actually only useful for internal use.

An example: check (broken!) parameter `partial` at `maximal_chains`. It is needed for `order_complex`. I think that the whole concept of "partial maximal chain" is odd and should be removed. It could have placed in `hasse_diagrams.py`, which is meant for internal implementation. (Btw, see #18944 - my suggestion to drop `partial`-option was rejected.)

I think that I can generate something like all posets of size 7 in the same time as all Hasse diagrams of size 8. So it really loses some cpu time to make posets.



---

archive/issue_comments_266688.json:
```json
{
    "body": "> But the question remains: What is the meaning of `hasse_diagram.py`? Whole poset class could be implemented with just a digraph as one member variable. But then I guess we would have more internal functions starting with `_`. Or more functions returning something actually only useful for internal use.\n\n\nWhat we have now is Poset.X *and* HassDiagram.X.\n\n> An example: check (broken!) parameter `partial` at `maximal_chains`. It is needed for `order_complex`. I think that the whole concept of \"partial maximal chain\" is odd and should be removed. It could have placed in `hasse_diagrams.py`, which is meant for internal implementation. (Btw, see #18944 - my suggestion to drop `partial`-option was rejected.)\n\n\nThe combinat guys have ther own view of the code. Perhaps something like \"whatever was once useful to one must be a public method\". In the case of very very specific functions, sometimes hard to document properly, I do not believe that it is a good choice.\n\n> I think that I can generate something like all posets of size 7 in the same time as all Hasse diagrams of size 8. So it really loses some cpu time to make posets.\n\n\nI am tired to find ways to not call the constructor because it does things you never asked it to do.\n\nNathann",
    "created_at": "2016-01-17T10:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266688",
    "user": "https://github.com/nathanncohen"
}
```

> But the question remains: What is the meaning of `hasse_diagram.py`? Whole poset class could be implemented with just a digraph as one member variable. But then I guess we would have more internal functions starting with `_`. Or more functions returning something actually only useful for internal use.


What we have now is Poset.X *and* HassDiagram.X.

> An example: check (broken!) parameter `partial` at `maximal_chains`. It is needed for `order_complex`. I think that the whole concept of "partial maximal chain" is odd and should be removed. It could have placed in `hasse_diagrams.py`, which is meant for internal implementation. (Btw, see #18944 - my suggestion to drop `partial`-option was rejected.)


The combinat guys have ther own view of the code. Perhaps something like "whatever was once useful to one must be a public method". In the case of very very specific functions, sometimes hard to document properly, I do not believe that it is a good choice.

> I think that I can generate something like all posets of size 7 in the same time as all Hasse diagrams of size 8. So it really loses some cpu time to make posets.


I am tired to find ways to not call the constructor because it does things you never asked it to do.

Nathann



---

archive/issue_comments_266689.json:
```json
{
    "body": "About the algorithm: I don't know if it makes a big difference and if could help with your applications, but there may be something to gain by checking the *degree* of the minimum elements before doing some operations on the sets of neighbors themselves. Just before \n\n```diff\n+for l in lower:\n+    if self.degree_out(l) != len(upper)\n+        break\nfor l in lower:\n    if set(self.neighbors_out(l)) != upper:\n        break\n```",
    "created_at": "2016-01-17T11:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266689",
    "user": "https://github.com/nathanncohen"
}
```

About the algorithm: I don't know if it makes a big difference and if could help with your applications, but there may be something to gain by checking the *degree* of the minimum elements before doing some operations on the sets of neighbors themselves. Just before 

```diff
+for l in lower:
+    if self.degree_out(l) != len(upper)
+        break
for l in lower:
    if set(self.neighbors_out(l)) != upper:
        break
```



---

archive/issue_comments_266690.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-18T05:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266691.json:
```json
{
    "body": "Replying to [comment:17 ncohen]:\n> - - there may be something to gain by checking the *degree* of the minimum elements before doing some operations on the sets of neighbors themselves. - -\n\n\nOf course. Done.",
    "created_at": "2016-01-18T06:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266691",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:17 ncohen]:
> - - there may be something to gain by checking the *degree* of the minimum elements before doing some operations on the sets of neighbors themselves. - -


Of course. Done.



---

archive/issue_comments_266692.json:
```json
{
    "body": "Oh right, I had not noticed this 'for/else' problem. If you prefer, you can also do something like:\n\n```python\nif (all(self.degree_out(l) == len(upper) for l in lower) and\n    all(set(self.neighbors_out(l)) != upper for l in lower):\n    cut_points.append(e)\n```\n\nNathann",
    "created_at": "2016-01-18T09:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266692",
    "user": "https://github.com/nathanncohen"
}
```

Oh right, I had not noticed this 'for/else' problem. If you prefer, you can also do something like:

```python
if (all(self.degree_out(l) == len(upper) for l in lower) and
    all(set(self.neighbors_out(l)) != upper for l in lower):
    cut_points.append(e)
```

Nathann



---

archive/issue_comments_266693.json:
```json
{
    "body": "Replying to [comment:20 ncohen]:\n> Oh right, I had not noticed this 'for/else' problem. If you prefer, you can also do something like:\n> \n> \n> ```\n> #!python\n> if (all(self.degree_out(l) == len(upper) for l in lower) and\n>     all(set(self.neighbors_out(l)) != upper for l in lower):\n>     cut_points.append(e)\n> ```\n\n\nIs this any more clear? I think that if the code needs clarification, first step would be adding comments. But at least the basic idea is quite clearly said in docstring.\n\nIf I do\n\n```\nall(self.degree_out(l) == len(upper) for l in lower)\n```\n\nthen `len(upper)` will be called many times.",
    "created_at": "2016-01-18T10:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266693",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:20 ncohen]:
> Oh right, I had not noticed this 'for/else' problem. If you prefer, you can also do something like:
> 
> 
> ```
> #!python
> if (all(self.degree_out(l) == len(upper) for l in lower) and
>     all(set(self.neighbors_out(l)) != upper for l in lower):
>     cut_points.append(e)
> ```


Is this any more clear? I think that if the code needs clarification, first step would be adding comments. But at least the basic idea is quite clearly said in docstring.

If I do

```
all(self.degree_out(l) == len(upper) for l in lower)
```

then `len(upper)` will be called many times.



---

archive/issue_comments_266694.json:
```json
{
    "body": "> Is this any more clear?\n\n\nTo me it is, but I won't be surprised if it is a matter of taste. It also avoids the 'for/else' trick that I never met anywhere except in Python.\n\n> If I do\n> \n> \n> ```\n> all(self.degree_out(l) == len(upper) for l in lower)\n> ```\n> \n> then `len(upper)` will be called many times.\n\n\nI see that you cached it in your code, and there is of course nothing wrong with that.\n\nNathann",
    "created_at": "2016-01-18T13:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266694",
    "user": "https://github.com/nathanncohen"
}
```

> Is this any more clear?


To me it is, but I won't be surprised if it is a matter of taste. It also avoids the 'for/else' trick that I never met anywhere except in Python.

> If I do
> 
> 
> ```
> all(self.degree_out(l) == len(upper) for l in lower)
> ```
> 
> then `len(upper)` will be called many times.


I see that you cached it in your code, and there is of course nothing wrong with that.

Nathann



---

archive/issue_comments_266695.json:
```json
{
    "body": "Replying to [comment:22 ncohen]:\n> > Is this any more clear?\n\n> \n> To me it is, but I won't be surprised if it is a matter of taste. It also avoids the 'for/else' trick that I never met anywhere except in Python.\n\n\nI can change that, if you want. But actually the code at one function level can always be optimized later. Real question is how to arrange this code. I think that it is fruitless to think about `posets.py` vs. `hasse_diagram.py` in context of one specific function. If we want to change it, then we would need to think those files (and `lattices.py`) as a whole.\n\nSo actually I want an answer to two questions: 1) Is Sage better with or without this patch? 2) Is there some trivial things that would make this patch better? Those two are my criteria for giving a positive review.\n\n`break-else` is really a python special feature. Quite nice sometimes with this kind on mathematical code.",
    "created_at": "2016-01-18T13:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266695",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:22 ncohen]:
> > Is this any more clear?

> 
> To me it is, but I won't be surprised if it is a matter of taste. It also avoids the 'for/else' trick that I never met anywhere except in Python.


I can change that, if you want. But actually the code at one function level can always be optimized later. Real question is how to arrange this code. I think that it is fruitless to think about `posets.py` vs. `hasse_diagram.py` in context of one specific function. If we want to change it, then we would need to think those files (and `lattices.py`) as a whole.

So actually I want an answer to two questions: 1) Is Sage better with or without this patch? 2) Is there some trivial things that would make this patch better? Those two are my criteria for giving a positive review.

`break-else` is really a python special feature. Quite nice sometimes with this kind on mathematical code.



---

archive/issue_comments_266696.json:
```json
{
    "body": "> I can change that, if you want.\n\n\nI was just suggesting it. If you don't like it, then it's fine.\n\n> So actually I want an answer to two questions: 1) Is Sage better with or without this patch? 2) Is there some trivial things that would make this patch better? Those two are my criteria for giving a positive review.\n\n\nThen it is likely that you would give your patch a positive review.\n\n> `break-else` is really a python special feature. Quite nice sometimes with this kind on mathematical code.\n\n\nAnd it was not a problem at all with how it was used before you added the 'degree check'. Nesting two looks a bit unpleasant to me, which is why I suggested this 'all( ... )' thing but I can understand that it only matters to me.\n\nWhat you need however, is a Poset class with a less wasteful constructor. You seem to use `HasseDiagram` to this end.\n\nNathann",
    "created_at": "2016-01-18T14:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266696",
    "user": "https://github.com/nathanncohen"
}
```

> I can change that, if you want.


I was just suggesting it. If you don't like it, then it's fine.

> So actually I want an answer to two questions: 1) Is Sage better with or without this patch? 2) Is there some trivial things that would make this patch better? Those two are my criteria for giving a positive review.


Then it is likely that you would give your patch a positive review.

> `break-else` is really a python special feature. Quite nice sometimes with this kind on mathematical code.


And it was not a problem at all with how it was used before you added the 'degree check'. Nesting two looks a bit unpleasant to me, which is why I suggested this 'all( ... )' thing but I can understand that it only matters to me.

What you need however, is a Poset class with a less wasteful constructor. You seem to use `HasseDiagram` to this end.

Nathann



---

archive/issue_comments_266697.json:
```json
{
    "body": "P.S.: From my point of view, there is a 'trivial' change that would make the code better, i.e. have everything inside the poset class. I consider that having it in nother class is only a workaround for the slow constructor.",
    "created_at": "2016-01-18T14:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266697",
    "user": "https://github.com/nathanncohen"
}
```

P.S.: From my point of view, there is a 'trivial' change that would make the code better, i.e. have everything inside the poset class. I consider that having it in nother class is only a workaround for the slow constructor.



---

archive/issue_comments_266698.json:
```json
{
    "body": "Of course I could change that, and for the \"interface\" for this function there would be no change.\n\nBut I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?\n\n(Dima dropped from cc.)",
    "created_at": "2016-01-18T18:05:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266698",
    "user": "https://github.com/jm58660"
}
```

Of course I could change that, and for the "interface" for this function there would be no change.

But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?

(Dima dropped from cc.)



---

archive/issue_comments_266699.json:
```json
{
    "body": "> But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?\n\n\nI thought about it for a moment, and I don't even think that I can give you the name of a method that would be specific to the Hasse Diagram and not to the poset. Do you have one in mind?\n\nNathann",
    "created_at": "2016-01-18T18:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266699",
    "user": "https://github.com/nathanncohen"
}
```

> But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?


I thought about it for a moment, and I don't even think that I can give you the name of a method that would be specific to the Hasse Diagram and not to the poset. Do you have one in mind?

Nathann



---

archive/issue_comments_266700.json:
```json
{
    "body": "Replying to [comment:27 ncohen]:\n> > But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?\n\n> \n> I thought about it for a moment, and I don't even think that I can give you the name of a method that would be specific to the Hasse Diagram and not to the poset. Do you have one in mind?\n\n\nThat is why this specific ticket should not be rejected for doing what other similar code already does.\n\nI think that actually almost all code could be at `hasse_diagram.py`! Hence posets and lattices would be mostly a lightweight (in a code, not in memory footprint...) wrapper handling element labels and checking input. And in longer future there could be cythonized internal implementation, something directly coded like your static sparse graphs backend has.\n\nBut I must admit that I have not been straight on this. See for example #19884.",
    "created_at": "2016-01-18T19:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266700",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:27 ncohen]:
> > But I ask a reverse question: What should be in `hasse_diagram.py`? What is the big picture of code structure in your vision?

> 
> I thought about it for a moment, and I don't even think that I can give you the name of a method that would be specific to the Hasse Diagram and not to the poset. Do you have one in mind?


That is why this specific ticket should not be rejected for doing what other similar code already does.

I think that actually almost all code could be at `hasse_diagram.py`! Hence posets and lattices would be mostly a lightweight (in a code, not in memory footprint...) wrapper handling element labels and checking input. And in longer future there could be cythonized internal implementation, something directly coded like your static sparse graphs backend has.

But I must admit that I have not been straight on this. See for example #19884.



---

archive/issue_comments_266701.json:
```json
{
    "body": "> That is why this specific ticket should not be rejected for doing what other similar code already does.\n\n\nI only click on `positive_review` when I am personally satsfied with the code.\n\n> I think that actually almost all code could be at `hasse_diagram.py`!\n\n\nIf Poset inherits from HasseDiagram then that wouldn't be a problem for me. Otherwise I do not see why you would insist on having two functions every time, one of which calls the other.\n\nNathann",
    "created_at": "2016-01-18T19:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266701",
    "user": "https://github.com/nathanncohen"
}
```

> That is why this specific ticket should not be rejected for doing what other similar code already does.


I only click on `positive_review` when I am personally satsfied with the code.

> I think that actually almost all code could be at `hasse_diagram.py`!


If Poset inherits from HasseDiagram then that wouldn't be a problem for me. Otherwise I do not see why you would insist on having two functions every time, one of which calls the other.

Nathann



---

archive/issue_comments_266702.json:
```json
{
    "body": "Actually, could you answer this very central question: why do you believe we should implement every function twice, once in Poset and once in HasseDiagram? Is it only because of the cost of the Poset constructor?",
    "created_at": "2016-01-18T19:39:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266702",
    "user": "https://github.com/nathanncohen"
}
```

Actually, could you answer this very central question: why do you believe we should implement every function twice, once in Poset and once in HasseDiagram? Is it only because of the cost of the Poset constructor?



---

archive/issue_comments_266703.json:
```json
{
    "body": "Replying to [comment:30 ncohen]:\n> Actually, could you answer this very central question: why do you believe we should implement every function twice, once in Poset and once in HasseDiagram? Is it only because of the cost of the Poset constructor?\n\n\nNot only that. Earlier in this ticket you said\n\n>> Perhaps something like \"whatever was once useful to one must be a public method\". In the case of very very specific functions, sometimes hard to document properly, I do not believe that it is a good choice.\n\n\nI think that \"visible\" poset functions, i.e. those not starting with `_`, should give meaningful set of operations to do with posets. It does not always directly correspond with good structure for internal functions. So should I add a `_`-function to `posets.py` or add a strange option for `ordinal_decomposition` to be used just for series-parallel decomposition? Both options sounds strange, as the already have \"internal\" class.\n\n> I only click on `positive_review` when I am personally satsfied with the code.\n\n\nI know. It's hard to get a `positive_review` from you, but easy to get performance tips etc. in the process. `:=)`",
    "created_at": "2016-01-18T19:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266703",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:30 ncohen]:
> Actually, could you answer this very central question: why do you believe we should implement every function twice, once in Poset and once in HasseDiagram? Is it only because of the cost of the Poset constructor?


Not only that. Earlier in this ticket you said

>> Perhaps something like "whatever was once useful to one must be a public method". In the case of very very specific functions, sometimes hard to document properly, I do not believe that it is a good choice.


I think that "visible" poset functions, i.e. those not starting with `_`, should give meaningful set of operations to do with posets. It does not always directly correspond with good structure for internal functions. So should I add a `_`-function to `posets.py` or add a strange option for `ordinal_decomposition` to be used just for series-parallel decomposition? Both options sounds strange, as the already have "internal" class.

> I only click on `positive_review` when I am personally satsfied with the code.


I know. It's hard to get a `positive_review` from you, but easy to get performance tips etc. in the process. `:=)`



---

archive/issue_comments_266704.json:
```json
{
    "body": "Yooooooo,\n\n> I think that \"visible\" poset functions, i.e. those not starting with `_`, should give meaningful set of operations to do with posets. It does not always directly correspond with good structure for internal functions. So should I add a `_`-function to `posets.py` or add a strange option for `ordinal_decomposition` to be used just for series-parallel decomposition? Both options sounds strange, as the already have \"internal\" class.\n\n\nYou seem to say that implementing this function would have you implement a helper function, which you do not think would be user-friendly enough to deserve being public. Could you tell me what this function would do? I do not see what you have in mind. Surely you are not talking of the `ordinal_sum_decomposition` itself, as you made it publicly available in this branch?\n\nNathann",
    "created_at": "2016-01-18T19:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266704",
    "user": "https://github.com/nathanncohen"
}
```

Yooooooo,

> I think that "visible" poset functions, i.e. those not starting with `_`, should give meaningful set of operations to do with posets. It does not always directly correspond with good structure for internal functions. So should I add a `_`-function to `posets.py` or add a strange option for `ordinal_decomposition` to be used just for series-parallel decomposition? Both options sounds strange, as the already have "internal" class.


You seem to say that implementing this function would have you implement a helper function, which you do not think would be user-friendly enough to deserve being public. Could you tell me what this function would do? I do not see what you have in mind. Surely you are not talking of the `ordinal_sum_decomposition` itself, as you made it publicly available in this branch?

Nathann



---

archive/issue_comments_266705.json:
```json
{
    "body": "Replying to [comment:32 ncohen]:\n \n> You seem to say that implementing this function would have you implement a helper function, which you do not think would be user-friendly enough to deserve being public. Could you tell me what this function would do? I do not see what you have in mind. Surely you are not talking of the `ordinal_sum_decomposition` itself, as you made it publicly available in this branch?\n\n\nIt is \"public\", but in \"private\" class. Doc for Hasse diagram says \"This should not be called directly, use Poset instead - -\". (It should say it more clearly, but that's another thing.)",
    "created_at": "2016-01-19T07:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266705",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:32 ncohen]:
 
> You seem to say that implementing this function would have you implement a helper function, which you do not think would be user-friendly enough to deserve being public. Could you tell me what this function would do? I do not see what you have in mind. Surely you are not talking of the `ordinal_sum_decomposition` itself, as you made it publicly available in this branch?


It is "public", but in "private" class. Doc for Hasse diagram says "This should not be called directly, use Poset instead - -". (It should say it more clearly, but that's another thing.)



---

archive/issue_comments_266706.json:
```json
{
    "body": "> It is \"public\", but in \"private\" class.\n\nSorry, I was talking of `Poset.ordinal_components`.",
    "created_at": "2016-01-19T07:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266706",
    "user": "https://github.com/nathanncohen"
}
```

> It is "public", but in "private" class.

Sorry, I was talking of `Poset.ordinal_components`.



---

archive/issue_comments_266707.json:
```json
{
    "body": "Replying to [comment:34 ncohen]:\n> > It is \"public\", but in \"private\" class.\n\n\n> Sorry, I was talking of `Poset.ordinal_components`.\n\n\nYes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.",
    "created_at": "2016-01-19T07:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266707",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:34 ncohen]:
> > It is "public", but in "private" class.


> Sorry, I was talking of `Poset.ordinal_components`.


Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.



---

archive/issue_comments_266708.json:
```json
{
    "body": "> Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.\n\n\nIn [comment:12] I suggested a `as_posets=True` (or any other name you might prefer) to get a different output, i.e. as a partition of vertices for instance. Wouldn't that solve your problem ?",
    "created_at": "2016-01-19T07:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266708",
    "user": "https://github.com/nathanncohen"
}
```

> Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.


In [comment:12] I suggested a `as_posets=True` (or any other name you might prefer) to get a different output, i.e. as a partition of vertices for instance. Wouldn't that solve your problem ?



---

archive/issue_comments_266709.json:
```json
{
    "body": "Replying to [comment:36 ncohen]:\n> > Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.\n\n> \n> In [comment:12] I suggested a `as_posets=True` (or any other name you might prefer) to get a different output, i.e. as a partition of vertices for instance. Wouldn't that solve your problem ?\n\n\nThen series-parallel decomposition would call that, and then... create a poset of them? So no luck.\n\nWith implementation at `HasseDiagram` we (read: I) can make a function to make a series-parallel decomposition that does not create `Poset`s recursively.",
    "created_at": "2016-01-19T07:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266709",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:36 ncohen]:
> > Yes, and it will give you subposets. Implementation is `HasseDiagram` returns just a list of numbers. And that is what I don't want to make public.

> 
> In [comment:12] I suggested a `as_posets=True` (or any other name you might prefer) to get a different output, i.e. as a partition of vertices for instance. Wouldn't that solve your problem ?


Then series-parallel decomposition would call that, and then... create a poset of them? So no luck.

With implementation at `HasseDiagram` we (read: I) can make a function to make a series-parallel decomposition that does not create `Poset`s recursively.



---

archive/issue_comments_266710.json:
```json
{
    "body": "Example:\n\n```\nN = Poset({0:[2,3], 1:[3]})\nP = N.ordinal_product(N)\n```\n\nHow to make a series-parallel decomposition of `P` for counting linear extension, or to check if it has one?",
    "created_at": "2016-01-19T07:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266710",
    "user": "https://github.com/jm58660"
}
```

Example:

```
N = Poset({0:[2,3], 1:[3]})
P = N.ordinal_product(N)
```

How to make a series-parallel decomposition of `P` for counting linear extension, or to check if it has one?



---

archive/issue_comments_266711.json:
```json
{
    "body": "> Then series-parallel decomposition would call that, and then... create a poset of them? So no luck.\n> \n> With implementation at `HasseDiagram` we (read: I) can make a function to make a series-parallel decomposition that does not create `Poset`s recursively.\n\n\nI do not understand a word of what you are saying. Please, I try to make each of my sentences accurate to be sure that I do not get misunderstood, and as it is I can't get a straight answer. I assure you that I spend *minutes* over each of my comments.\n\nI am trying to understand, as I asked in [comment:30], if you need HasseDiagram only because of the slow Poset constructor or if there is another reason. You told me in [comment:35] that you wanted to be able to return something which is *not* a poset, and I said in [comment:36] that you could do so with Poset only. Now the two sentences to which I am replying right now say again that what you want to avoid is the Poset constructor.\n\nCould you confirm that the cost of the Poset constructor is the only thing that bothers you, or else tell me what exactly is the problem? At the moment, I am convinced that the only reason for which you implement everything twice is because you want to avoid building posets. Tell me if I am wrong.\n\nNathann",
    "created_at": "2016-01-19T07:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266711",
    "user": "https://github.com/nathanncohen"
}
```

> Then series-parallel decomposition would call that, and then... create a poset of them? So no luck.
> 
> With implementation at `HasseDiagram` we (read: I) can make a function to make a series-parallel decomposition that does not create `Poset`s recursively.


I do not understand a word of what you are saying. Please, I try to make each of my sentences accurate to be sure that I do not get misunderstood, and as it is I can't get a straight answer. I assure you that I spend *minutes* over each of my comments.

I am trying to understand, as I asked in [comment:30], if you need HasseDiagram only because of the slow Poset constructor or if there is another reason. You told me in [comment:35] that you wanted to be able to return something which is *not* a poset, and I said in [comment:36] that you could do so with Poset only. Now the two sentences to which I am replying right now say again that what you want to avoid is the Poset constructor.

Could you confirm that the cost of the Poset constructor is the only thing that bothers you, or else tell me what exactly is the problem? At the moment, I am convinced that the only reason for which you implement everything twice is because you want to avoid building posets. Tell me if I am wrong.

Nathann



---

archive/issue_comments_266712.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-19T13:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266713.json:
```json
{
    "body": "OK, too hard to explain. I give up. Here is a version with only one function.",
    "created_at": "2016-01-19T13:36:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266713",
    "user": "https://github.com/jm58660"
}
```

OK, too hard to explain. I give up. Here is a version with only one function.



---

archive/issue_comments_266714.json:
```json
{
    "body": "> OK, too hard to explain.\n\n\nThen I guess we will have the same conversation again on the next ticket?...\n\nI just went through your code and made small modifications, some to the code some to the doc. Most of the time by removing/shortening things. You are of course welcome to discuss any character of it. Also, you sometimes forget articles 'a/an': I am no expert in english but sometimes they really are necessary to the sentence.\n\nMy modifications have been pushed to public/19659.\n\nCould you point me toward a book/paper that uses this \"ordinal components\" terminology?\n\nThanks,\n\nNathann",
    "created_at": "2016-01-19T14:33:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266714",
    "user": "https://github.com/nathanncohen"
}
```

> OK, too hard to explain.


Then I guess we will have the same conversation again on the next ticket?...

I just went through your code and made small modifications, some to the code some to the doc. Most of the time by removing/shortening things. You are of course welcome to discuss any character of it. Also, you sometimes forget articles 'a/an': I am no expert in english but sometimes they really are necessary to the sentence.

My modifications have been pushed to public/19659.

Could you point me toward a book/paper that uses this "ordinal components" terminology?

Thanks,

Nathann



---

archive/issue_comments_266715.json:
```json
{
    "body": "(the branch has been rebased, and its history simplified)",
    "created_at": "2016-01-19T14:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266715",
    "user": "https://github.com/nathanncohen"
}
```

(the branch has been rebased, and its history simplified)



---

archive/issue_comments_266716.json:
```json
{
    "body": "Replying to [comment:42 ncohen]:\n\n> Could you point me toward a book/paper that uses this \"ordinal components\" terminology?\n\n\nAs I write in the description: I am not sure about the name.\n\n\"On the number of distributive lattices\" by Marcel Ern\u00e9, Jobst Heitzig and J\u00fcrgen Reinhold (http://www.kurims.kyoto-u.ac.jp/EMIS/journals/EJC/Volume_9/PDF/v9i1r24.pdf) uses \"vertical decomposition\". I choose the name to be parallel to `connected_components()`.",
    "created_at": "2016-01-19T15:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266716",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:42 ncohen]:

> Could you point me toward a book/paper that uses this "ordinal components" terminology?


As I write in the description: I am not sure about the name.

"On the number of distributive lattices" by Marcel Ern, Jobst Heitzig and Jrgen Reinhold (http://www.kurims.kyoto-u.ac.jp/EMIS/journals/EJC/Volume_9/PDF/v9i1r24.pdf) uses "vertical decomposition". I choose the name to be parallel to `connected_components()`.



---

archive/issue_comments_266717.json:
```json
{
    "body": "> As I write in the description: I am not sure about the name.\n\n\nOkay okay. I don't trust myself when it comes to Posets, so let's ask.\n\nFr\u00e9d\u00e9ric? Jori implemented here a function that decomposes a poset P into components P1,...,P_k such that P is the ordinal sum of the Pi. We are not sure which name should be picked for it, and right now the branch uses the name `ordinal_components`. What do you think of it? Should it be changed to something different, or is it what people would expect? If you are not sure and know somebody who would, could you add him in Cc?\n\nThanks,\n\nNathann",
    "created_at": "2016-01-19T16:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266717",
    "user": "https://github.com/nathanncohen"
}
```

> As I write in the description: I am not sure about the name.


Okay okay. I don't trust myself when it comes to Posets, so let's ask.

Frdric? Jori implemented here a function that decomposes a poset P into components P1,...,P_k such that P is the ordinal sum of the Pi. We are not sure which name should be picked for it, and right now the branch uses the name `ordinal_components`. What do you think of it? Should it be changed to something different, or is it what people would expect? If you are not sure and know somebody who would, could you add him in Cc?

Thanks,

Nathann



---

archive/issue_comments_266718.json:
```json
{
    "body": "I would suggest 'is_ordinal_sum', with boolean output, with a certificate option to see\na decomposition.\n\nAnother possibility would be 'ordinal_sum_decomposition'.\n\n'ordinal_components' is ambiguous because there exists also 'ordinal product' (not yet in sage maybe), besides ordinal sum.\n\nEDIT: maybe 'ordinal_summands' would be ok",
    "created_at": "2016-01-19T17:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266718",
    "user": "https://github.com/fchapoton"
}
```

I would suggest 'is_ordinal_sum', with boolean output, with a certificate option to see
a decomposition.

Another possibility would be 'ordinal_sum_decomposition'.

'ordinal_components' is ambiguous because there exists also 'ordinal product' (not yet in sage maybe), besides ordinal sum.

EDIT: maybe 'ordinal_summands' would be ok



---

archive/issue_comments_266719.json:
```json
{
    "body": "Some thoughts, not a clear opinion yet:\n\nWe do have `ordinal_product` already. An \"inverse function\" of if would be `ordinal_factors`, I think. Compare to \"factoring (undirected) graphs\" (done be Nathann IIRC).\n\n`certificate=True` sounds natural to for example `dimension`: there is not **the** set of realizers, just bunch of minimal sets and one of them is returned. For this function we do have exact \"components\", \"parts\" or something like that.\n\nThere is now `is_connected` and `conneced_components`. It would be orthogonal design to have two functions for this one also.",
    "created_at": "2016-01-19T18:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266719",
    "user": "https://github.com/jm58660"
}
```

Some thoughts, not a clear opinion yet:

We do have `ordinal_product` already. An "inverse function" of if would be `ordinal_factors`, I think. Compare to "factoring (undirected) graphs" (done be Nathann IIRC).

`certificate=True` sounds natural to for example `dimension`: there is not **the** set of realizers, just bunch of minimal sets and one of them is returned. For this function we do have exact "components", "parts" or something like that.

There is now `is_connected` and `conneced_components`. It would be orthogonal design to have two functions for this one also.



---

archive/issue_comments_266720.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-20T06:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266720",
    "user": "https://github.com/jm58660"
}
```

New commits:



---

archive/issue_comments_266721.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-01-20T08:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266722.json:
```json
{
    "body": "Replying to [comment:42 ncohen]:\n\n> Then I guess we will have the same conversation again on the next ticket?...\n\n\nThis should really be discussed on sage-devel. Someone has originally implemented this, and I guess he/she have had a reason for this.\n\n> I just went through your code and made small modifications, some to the code some to the doc. Most of the time by removing/shortening things. You are of course welcome to discuss any character of it. Also, you sometimes forget articles 'a/an': I am no expert in english but sometimes they really are necessary to the sentence.\n\n\nI am sure that you know \"a\"/\"an\"/\"the\" better than I do; my native language belongs to Uralic languages family. I just added commas to math blocks so that they are uniform.\n\nYour code is, as usual, better than mine.\n\nIf I am right, now we just needs to decide the name.",
    "created_at": "2016-01-20T08:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266722",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:42 ncohen]:

> Then I guess we will have the same conversation again on the next ticket?...


This should really be discussed on sage-devel. Someone has originally implemented this, and I guess he/she have had a reason for this.

> I just went through your code and made small modifications, some to the code some to the doc. Most of the time by removing/shortening things. You are of course welcome to discuss any character of it. Also, you sometimes forget articles 'a/an': I am no expert in english but sometimes they really are necessary to the sentence.


I am sure that you know "a"/"an"/"the" better than I do; my native language belongs to Uralic languages family. I just added commas to math blocks so that they are uniform.

Your code is, as usual, better than mine.

If I am right, now we just needs to decide the name.



---

archive/issue_comments_266723.json:
```json
{
    "body": "Hello,\n\n> This should really be discussed on sage-devel. Someone has originally implemented this, and I guess he/she have had a reason for this.\n\n\nTrue, but it would be a mistake to value a reason that we do not know more than those we figured out ourselves. Maybe something smart may come from sage-devel indeed, though. I hope that we will hear something different from the frequent refusal to change things 'on principle'.\n\n> If I am right, now we just needs to decide the name.\n\n\nYep. I concur with Fr\u00e9d\u00e9ric's proposal of a `is_ordinal_sum` with an optional certificate. The same is done differently for `is_connected/connected_components`, but there at least there is no doubt on which terminology should be used. Perhaps it's worth asking on sage-devel too if you prefer.\n\nNathann",
    "created_at": "2016-01-20T16:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266723",
    "user": "https://github.com/nathanncohen"
}
```

Hello,

> This should really be discussed on sage-devel. Someone has originally implemented this, and I guess he/she have had a reason for this.


True, but it would be a mistake to value a reason that we do not know more than those we figured out ourselves. Maybe something smart may come from sage-devel indeed, though. I hope that we will hear something different from the frequent refusal to change things 'on principle'.

> If I am right, now we just needs to decide the name.


Yep. I concur with Frdric's proposal of a `is_ordinal_sum` with an optional certificate. The same is done differently for `is_connected/connected_components`, but there at least there is no doubt on which terminology should be used. Perhaps it's worth asking on sage-devel too if you prefer.

Nathann



---

archive/issue_comments_266724.json:
```json
{
    "body": "Replying to [comment:51 ncohen]:\n\n> > If I am right, now we just needs to decide the name.\n\n> \n> Yep. I concur with Fr\u00e9d\u00e9ric's proposal of a `is_ordinal_sum` with an optional certificate.\n\n\nOK. Then, what should be the name of parameter (somehow `certificate` sounds odd to me)? And should it return the decomposition as a list of elements or as a list of subposets?",
    "created_at": "2016-01-20T21:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266724",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:51 ncohen]:

> > If I am right, now we just needs to decide the name.

> 
> Yep. I concur with Frdric's proposal of a `is_ordinal_sum` with an optional certificate.


OK. Then, what should be the name of parameter (somehow `certificate` sounds odd to me)? And should it return the decomposition as a list of elements or as a list of subposets?



---

archive/issue_comments_266725.json:
```json
{
    "body": "> OK. Then, what should be the name of parameter (somehow `certificate` sounds odd to me)? \n\n\n'certificate' is a generic term that is used in some places already (mostly because of me I expect), but it is not a 'standard' at all. Is there another term you would prefer?\n\n> And should it return the decomposition as a list of elements or as a list of subposets?\n\n\nDepends on what *you* plan to use it for. `.is_ordinal_sum(as_posets=True)` or `.is_ordinal_sum(as_partition=True)` would work for me, and either return an empty list (when it is not) or return a list of whatever is requested.\n\nIf you have a better idea, of course, just name it.\n\nNathann",
    "created_at": "2016-01-20T21:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266725",
    "user": "https://github.com/nathanncohen"
}
```

> OK. Then, what should be the name of parameter (somehow `certificate` sounds odd to me)? 


'certificate' is a generic term that is used in some places already (mostly because of me I expect), but it is not a 'standard' at all. Is there another term you would prefer?

> And should it return the decomposition as a list of elements or as a list of subposets?


Depends on what *you* plan to use it for. `.is_ordinal_sum(as_posets=True)` or `.is_ordinal_sum(as_partition=True)` would work for me, and either return an empty list (when it is not) or return a list of whatever is requested.

If you have a better idea, of course, just name it.

Nathann



---

archive/issue_comments_266726.json:
```json
{
    "body": "As I am not sure about this, I think that no Boolean-valued option is good. So it should be `return_value='boolean'` with options `'poset'` and `'elements'` or `'lists'`. But is there something similar in other parts of Sage? I would like to re-use existing parameter name if possible.",
    "created_at": "2016-01-21T05:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266726",
    "user": "https://github.com/jm58660"
}
```

As I am not sure about this, I think that no Boolean-valued option is good. So it should be `return_value='boolean'` with options `'poset'` and `'elements'` or `'lists'`. But is there something similar in other parts of Sage? I would like to re-use existing parameter name if possible.



---

archive/issue_comments_266727.json:
```json
{
    "body": "Hello,\n\nI slowly used more and more booleans for these things as it reduces the risk of typoes. Any typo in the argument's name raises an automatic exception (that's Python), and the same goes for !True/False (if you make a typo, that's an undefined variable). The code is also simpler as you don't have to do `if x==A/elif x==B/else ValueError`.\n\nYou will find many boolean functions with such a boolean argument: IncidenceStructure.is_t_design, Graph.is_strongly_regular, Graph.automorphism_group, Graph.is_isomorphic.\n\nThe use of a string argument is, in the graph library at least, more often used to select an algorithm/method to perform the requested computation (e.g. Graph.maximum_clique).\n\nNathann",
    "created_at": "2016-01-21T06:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266727",
    "user": "https://github.com/nathanncohen"
}
```

Hello,

I slowly used more and more booleans for these things as it reduces the risk of typoes. Any typo in the argument's name raises an automatic exception (that's Python), and the same goes for !True/False (if you make a typo, that's an undefined variable). The code is also simpler as you don't have to do `if x==A/elif x==B/else ValueError`.

You will find many boolean functions with such a boolean argument: IncidenceStructure.is_t_design, Graph.is_strongly_regular, Graph.automorphism_group, Graph.is_isomorphic.

The use of a string argument is, in the graph library at least, more often used to select an algorithm/method to perform the requested computation (e.g. Graph.maximum_clique).

Nathann



---

archive/issue_comments_266728.json:
```json
{
    "body": "Still about the naming... Compare to #19123. These are kind of same thing, but for lattices it is more natural to think about making the top element of lattice 1 and the bottom element of lattice 2 to one common element.\n\nA suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.",
    "created_at": "2016-01-27T07:26:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266728",
    "user": "https://github.com/jm58660"
}
```

Still about the naming... Compare to #19123. These are kind of same thing, but for lattices it is more natural to think about making the top element of lattice 1 and the bottom element of lattice 2 to one common element.

A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.



---

archive/issue_comments_266729.json:
```json
{
    "body": "> Still about the naming... Compare to #19123. These are kind of same thing, but for lattices it is more natural to think about making the top element of lattice 1 and the bottom element of lattice 2 to one common element.\n\n\nWhat do you want us to compare in the naming of this function and the content of #19123?\n\n> A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.\n\n\nThen that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.\n\nNathann",
    "created_at": "2016-01-27T18:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266729",
    "user": "https://github.com/nathanncohen"
}
```

> Still about the naming... Compare to #19123. These are kind of same thing, but for lattices it is more natural to think about making the top element of lattice 1 and the bottom element of lattice 2 to one common element.


What do you want us to compare in the naming of this function and the content of #19123?

> A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.


Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.

Nathann



---

archive/issue_comments_266730.json:
```json
{
    "body": "Replying to [comment:57 ncohen]:\n\n> What do you want us to compare in the naming of this function and the content of #19123?\n\n\nThese two functions do exactly same thing when they return a Boolean value. So should they have same name? OTOH when returning non-boolean values it is somewhat strange to return posets that are actually semilattices from decomposition of lattice.\n\n> > A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.\n\n> \n> Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.\n\n\nIt could be a building block for series-parallel decomposition.",
    "created_at": "2016-02-03T06:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266730",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:57 ncohen]:

> What do you want us to compare in the naming of this function and the content of #19123?


These two functions do exactly same thing when they return a Boolean value. So should they have same name? OTOH when returning non-boolean values it is somewhat strange to return posets that are actually semilattices from decomposition of lattice.

> > A suggestion: What if I only make a function whose name starts with `_`? Then we could use the code to build more functions, and think later about the name.

> 
> Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.


It could be a building block for series-parallel decomposition.



---

archive/issue_comments_266731.json:
```json
{
    "body": "> > Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.\n\n> \n> It could be a building block for series-parallel decomposition.\n\n\nIf you need a function to do that, keep it on your own computer. Patching Sage makes sense to *share* functions with others: if you want to have them hidden from the users and if Sage does not need them in any way, it can easily wait till you find a use for it.\n\nNathann",
    "created_at": "2016-02-03T09:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266731",
    "user": "https://github.com/nathanncohen"
}
```

> > Then that means that the function will not appear to the users, and that we will not even use it ourselves at the moment. I don't see the point.

> 
> It could be a building block for series-parallel decomposition.


If you need a function to do that, keep it on your own computer. Patching Sage makes sense to *share* functions with others: if you want to have them hidden from the users and if Sage does not need them in any way, it can easily wait till you find a use for it.

Nathann



---

archive/issue_comments_266732.json:
```json
{
    "body": "I would be happy if you just change the name to `ordinal_summands`.",
    "created_at": "2016-02-03T20:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266732",
    "user": "https://github.com/fchapoton"
}
```

I would be happy if you just change the name to `ordinal_summands`.



---

archive/issue_comments_266733.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-09T09:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266734.json:
```json
{
    "body": "Replying to [comment:59 ncohen]:\n\n> > It could be a building block for series-parallel decomposition.\n\n> \n> If you need a function to do that, keep it on your own computer.\n\n\nI mean that I want to make `series_parallel_decomposition` to be a part of Sage.",
    "created_at": "2016-02-09T09:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266734",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:59 ncohen]:

> > It could be a building block for series-parallel decomposition.

> 
> If you need a function to do that, keep it on your own computer.


I mean that I want to make `series_parallel_decomposition` to be a part of Sage.



---

archive/issue_comments_266735.json:
```json
{
    "body": "Replying to [comment:60 chapoton]:\n> I would be happy if you just change the name to `ordinal_summands`.\n\n\nDone this.",
    "created_at": "2016-02-09T09:23:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266735",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:60 chapoton]:
> I would be happy if you just change the name to `ordinal_summands`.


Done this.



---

archive/issue_comments_266736.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-09T09:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266736",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_266737.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-09T14:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266737",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_266738.json:
```json
{
    "body": "ok, looks good. Patchbot failures seems not related.",
    "created_at": "2016-02-09T14:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266738",
    "user": "https://github.com/fchapoton"
}
```

ok, looks good. Patchbot failures seems not related.



---

archive/issue_events_053997.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-09T14:57:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "milestone": "sage-7.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19422#event-53997"
}
```



---

archive/issue_events_053998.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-02-09T14:57:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "milestone": "sage-7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19422#event-53998"
}
```



---

archive/issue_events_053999.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-02-10T08:20:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/19422#event-53999"
}
```



---

archive/issue_comments_266739.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-10T08:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19422",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19422#issuecomment-266739",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
