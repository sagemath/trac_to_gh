# Issue 12876: __floordiv__ does not work when dividing polynomials over QQbar by a constant

Issue created by migration from https://trac.sagemath.org/ticket/13048

Original creator: saraedum

Original creation time: 2012-05-28 15:13:50

Assignee: AlexGhitza

Keywords: sd40.5

There is a problem with `//` division for polynomials over QQbar:


```
sage: R.<x> = QQbar[]
sage: x//1
AttributeError: 'Polynomial_generic_dense_field' object has no attribute '_new_c'
sage: x/1
x
```



---

Comment by saraedum created at 2012-05-28 15:48:03

Changing status from new to needs_review.


---

Attachment

fixes division without remainder for polynomials over QQbar


---

Comment by saraedum created at 2012-05-28 16:16:29

Added #12404 as a dependency, so the patch applies with no fuzz when applying both.


---

Comment by dsm created at 2012-05-28 17:03:12

Could you add some doctests to confirm that the floor division works as you would expect it would by analogy with the integers, i.e. `(x//y)*y + (x % y) == x?` [Possible typo there, haven't finished this coffee.]  It seems to:


```
sage: R.<x> = QQbar[]
sage: left = x*3+4
sage: y = x
sage: (left//y)*y + (left % y) == left
True
sage: y = 17
sage: (left//y)*y + (left % y) == left
True
sage: y = (2*x+7)
sage: (left//y)*y + (left % y) == left
True

```


If floor division wasn't working then there must not have been anything testing stuff like this.


---

Comment by saraedum created at 2012-05-28 17:34:06

Replying to [comment:3 dsm]:
> If floor division wasn't working then there must not have been anything testing stuff like this.

That's true. The doctests at the `__floordiv__` method did actually not test that method but a more specialized method for polynomials over `QQ`. I changed that so the tests are run for polynomials over `QQbar`. So now there are actually a few tests. Should we add more?


---

Comment by jdemeyer created at 2012-07-27 20:39:57

Please fill in your real name as Author.


---

Comment by mmezzarobba created at 2014-03-14 12:30:29

New commits:


---

Comment by mmezzarobba created at 2014-03-14 12:30:29

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-03-15 16:22:35

Resolution: fixed
