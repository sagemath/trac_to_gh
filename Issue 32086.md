# Issue 32086: Add GNU info as an optional package

archive/issues_032086.json:
```json
{
    "body": "CC:  mjo slelievre vbraun @mwageringel\n\n(Split out from #32242.)\n\nThis makes `singular_console` (or standalone use of the `singular` executable for those who use the Sage distribution as an installer for Singular) mildly more functional.\n\nIn the default configuration on macOS, Singular's help commands such as `?ring;` use the \"browser method\" `mac-www`, which is the rather unhelpful:\n\n```\n// ** Displaying help in browser 'mac-www'.\n// ** Use 'system(\"--browser\", <browser>);' to change browser,\n// ** where <browser> can be: \"mac-www\", \"safari-www\", \"builtin\", \"dummy\", \"emacs\".\nrunning `open https://www.singular.uni-kl.de/Manual/4-2-0/ &`\n```\n\n\nSingular has a built-in info browser that gives a simple pager:\n\n```\n> system(\"browsers\");\nAvailable HelpBrowsers: mac-www, safari-www, builtin, dummy, emacs, \nCurrent HelpBrowser: mac-www \n> system(\"--browser\", \"builtin\");\n> ?ring\n. ;\nHELP >>ring>>\n\nFile: singular.hlp,  Node: Examples of ring declarations,  Next: General syntax of a ring declaration,  Prev: Rings and orderings,  Up: Rings and orderings\n\n3.3.1 Examples of ring declarations\n-----------------------------------\n\nThe exact syntax of a ring declaration is given in the next two\n...\n Press <RETURN> to continue or x to exit help.\n```\n\n\nMaking the `info` program available may give a better user experience in the terminal. However, on macOS (where `/usr/bin/info` is \"info (GNU texinfo) 4.8\"; newer versions available through homebrew), it becomes apparent that our current installation of Singular (spkg) is incomplete:\n\n```\n> system(\"--browser\", \"info\");\n// ** Could not get 'IdxFile'.\n// ** Either set environment variable 'SINGULAR_IDX_FILE' to 'IdxFile',\n// ** or make sure that 'IdxFile' is at \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/bin/../share/singular/singular.idx\"\n// ** resource `x` not found\n// ** Help browser stays at 'builtin'.\n```\n\nThis needs to be rectified by the next Singular upgrade (#32001).\n\nIssue created by migration from https://trac.sagemath.org/ticket/32323\n\n",
    "created_at": "2021-08-01T21:06:54Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "title": "Add GNU info as an optional package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32086",
    "user": "mkoeppe"
}
```
CC:  mjo slelievre vbraun @mwageringel

(Split out from #32242.)

This makes `singular_console` (or standalone use of the `singular` executable for those who use the Sage distribution as an installer for Singular) mildly more functional.

In the default configuration on macOS, Singular's help commands such as `?ring;` use the "browser method" `mac-www`, which is the rather unhelpful:

```
// ** Displaying help in browser 'mac-www'.
// ** Use 'system("--browser", <browser>);' to change browser,
// ** where <browser> can be: "mac-www", "safari-www", "builtin", "dummy", "emacs".
running `open https://www.singular.uni-kl.de/Manual/4-2-0/ &`
```


Singular has a built-in info browser that gives a simple pager:

```
> system("browsers");
Available HelpBrowsers: mac-www, safari-www, builtin, dummy, emacs, 
Current HelpBrowser: mac-www 
> system("--browser", "builtin");
> ?ring
. ;
HELP >>ring>>

File: singular.hlp,  Node: Examples of ring declarations,  Next: General syntax of a ring declaration,  Prev: Rings and orderings,  Up: Rings and orderings

3.3.1 Examples of ring declarations
-----------------------------------

The exact syntax of a ring declaration is given in the next two
...
 Press <RETURN> to continue or x to exit help.
```


Making the `info` program available may give a better user experience in the terminal. However, on macOS (where `/usr/bin/info` is "info (GNU texinfo) 4.8"; newer versions available through homebrew), it becomes apparent that our current installation of Singular (spkg) is incomplete:

```
> system("--browser", "info");
// ** Could not get 'IdxFile'.
// ** Either set environment variable 'SINGULAR_IDX_FILE' to 'IdxFile',
// ** or make sure that 'IdxFile' is at "/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/bin/../share/singular/singular.idx"
// ** resource `x` not found
// ** Help browser stays at 'builtin'.
```

This needs to be rectified by the next Singular upgrade (#32001).

Issue created by migration from https://trac.sagemath.org/ticket/32323





---

archive/issue_comments_458159.json:
```json
{
    "body": "Keeping the dependency on the Singular upgrade #32001 because either way we would have to bump the version number of the Singular spkg.",
    "created_at": "2021-08-01T22:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458159",
    "user": "mkoeppe"
}
```

Keeping the dependency on the Singular upgrade #32001 because either way we would have to bump the version number of the Singular spkg.



---

archive/issue_comments_458160.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-01T22:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458160",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_458161.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-01T22:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458161",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458162.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-01T22:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458162",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_458163.json:
```json
{
    "body": "Changing component from packages: optional to packages: standard.",
    "created_at": "2021-08-01T22:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458163",
    "user": "mkoeppe"
}
```

Changing component from packages: optional to packages: standard.



---

archive/issue_comments_458164.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-01T22:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458164",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458165.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-08-03T18:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458165",
    "user": "mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_458166.json:
```json
{
    "body": "Given that the singular help system status is a regression from Sage 9.2, it may make sense to get this fix (and dependencies) into the Sage 9.4 release.",
    "created_at": "2021-08-03T18:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458166",
    "user": "mkoeppe"
}
```

Given that the singular help system status is a regression from Sage 9.2, it may make sense to get this fix (and dependencies) into the Sage 9.4 release.



---

archive/issue_comments_458167.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-14T14:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458167",
    "user": "dimpase"
}
```

New commits:



---

archive/issue_comments_458168.json:
```json
{
    "body": "rebased and fixed format of SPKG file (to allow docs to build)",
    "created_at": "2021-08-14T14:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458168",
    "user": "dimpase"
}
```

rebased and fixed format of SPKG file (to allow docs to build)



---

archive/issue_comments_458169.json:
```json
{
    "body": "lgtm",
    "created_at": "2021-08-14T17:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458169",
    "user": "dimpase"
}
```

lgtm



---

archive/issue_comments_458170.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-14T17:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458170",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_458171.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-08-14T17:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458171",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_458172.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-09-02T22:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458172",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_458173.json:
```json
{
    "body": "\n```\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/usr/lib64/python3.9/runpy.py\", line 197, in _run_module_as_main\n[dochtml]     return _run_code(code, main_globals, None,\n[dochtml]   File \"/usr/lib64/python3.9/runpy.py\", line 87, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__init__.py\", line 1814, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__init__.py\", line 822, in _wrapper\n[dochtml]     getattr(DocBuilder, build_type)(self, *args, **kwds)\n[dochtml]   File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__init__.py\", line 133, in f\n[dochtml]     runsphinx()\n[dochtml]   File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 323, in runsphinx\n[dochtml]     sys.stderr.raise_errors()\n[dochtml]   File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 258, in raise_errors\n[dochtml]     raise OSError(self._error)\n[dochtml] OSError: /home/release/Sage/src/doc/en/reference/spkg/info.rst:23: WARNING: Inline emphasis start-string without end-string.\n[dochtml] \n[dochtml]     Note: incremental documentation builds sometimes cause spurious\n[dochtml]     error messages. To be certain that these are real errors, run\n[dochtml]     \"make doc-clean\" first and try again.\n[dochtml] make[5]: *** [Makefile:20: doc-inventory--reference-spkg] Error 1\n[dochtml] make[5]: *** Waiting for unfinished jobs....\n```\n\n----\nNew commits:",
    "created_at": "2021-09-02T22:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458173",
    "user": "vbraun"
}
```


```
[dochtml] Traceback (most recent call last):
[dochtml]   File "/usr/lib64/python3.9/runpy.py", line 197, in _run_module_as_main
[dochtml]     return _run_code(code, main_globals, None,
[dochtml]   File "/usr/lib64/python3.9/runpy.py", line 87, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__init__.py", line 1814, in main
[dochtml]     builder()
[dochtml]   File "/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__init__.py", line 822, in _wrapper
[dochtml]     getattr(DocBuilder, build_type)(self, *args, **kwds)
[dochtml]   File "/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__init__.py", line 133, in f
[dochtml]     runsphinx()
[dochtml]   File "/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 323, in runsphinx
[dochtml]     sys.stderr.raise_errors()
[dochtml]   File "/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 258, in raise_errors
[dochtml]     raise OSError(self._error)
[dochtml] OSError: /home/release/Sage/src/doc/en/reference/spkg/info.rst:23: WARNING: Inline emphasis start-string without end-string.
[dochtml] 
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
[dochtml] make[5]: *** [Makefile:20: doc-inventory--reference-spkg] Error 1
[dochtml] make[5]: *** Waiting for unfinished jobs....
```

----
New commits:



---

archive/issue_comments_458174.json:
```json
{
    "body": "you forgot to pick the commit changing SPKG.rst from my branch that I added.",
    "created_at": "2021-09-02T22:49:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458174",
    "user": "dimpase"
}
```

you forgot to pick the commit changing SPKG.rst from my branch that I added.



---

archive/issue_comments_458175.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-03T00:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458175",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458176.json:
```json
{
    "body": "I keep making this mistake...",
    "created_at": "2021-09-03T00:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458176",
    "user": "mkoeppe"
}
```

I keep making this mistake...



---

archive/issue_comments_458177.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-09-03T00:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458177",
    "user": "mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_458178.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-09-05T22:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458178",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_458179.json:
```json
{
    "body": "pdf docs don't build",
    "created_at": "2021-09-05T22:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458179",
    "user": "vbraun"
}
```

pdf docs don't build



---

archive/issue_comments_458180.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-05T23:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458180",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458181.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-09-05T23:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458181",
    "user": "mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_458182.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-13T22:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32086#issuecomment-458182",
    "user": "vbraun"
}
```

Resolution: fixed
