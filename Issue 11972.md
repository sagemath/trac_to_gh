# Issue 11972: better document a technical confusing points in the Hidden Markov Model code

archive/issues_011972.json:
```json
{
    "body": "Assignee: amhou\n\nI was reading the Continuous Hidden Markov Model code and trying to understand how probabilities are defined in a certain context, and got confused.   So I added some comments to de-confuse me.  Hence this patch.  \n\nThere is also a 1-line very tiny change in the code itself, where I had checked for \"0\" instead of checking for smaller than eps in one line.   This changes a few low order bits in a doctest.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12144\n\n",
    "created_at": "2011-12-11T22:17:43Z",
    "labels": [
        "statistics",
        "minor",
        "enhancement"
    ],
    "title": "better document a technical confusing points in the Hidden Markov Model code",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11972",
    "user": "was"
}
```
Assignee: amhou

I was reading the Continuous Hidden Markov Model code and trying to understand how probabilities are defined in a certain context, and got confused.   So I added some comments to de-confuse me.  Hence this patch.  

There is also a 1-line very tiny change in the code itself, where I had checked for "0" instead of checking for smaller than eps in one line.   This changes a few low order bits in a doctest.

Issue created by migration from https://trac.sagemath.org/ticket/12144





---

archive/issue_comments_137774.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-11T22:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137774",
    "user": "was"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_137775.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-12-12T06:00:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137775",
    "user": "was"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_137776.json:
```json
{
    "body": "Attachment [trac_12144.patch](tarball://root/attachments/some-uuid/ticket12144/trac_12144.patch) by was created at 2011-12-12 06:30:45\n\nshould apply to any sage since about sage-4.0",
    "created_at": "2011-12-12T06:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137776",
    "user": "was"
}
```

Attachment [trac_12144.patch](tarball://root/attachments/some-uuid/ticket12144/trac_12144.patch) by was created at 2011-12-12 06:30:45

should apply to any sage since about sage-4.0



---

archive/issue_comments_137777.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-12-12T06:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137777",
    "user": "was"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_137778.json:
```json
{
    "body": "Thanks for the doc clarifications, and the math changes make sense, though I'm certainly not a HMM expert, so I don't know how to judge the idea that the changes are more useful.  However, it does apply and passes tests, so if this \"review\" is enough, set this to positive review.",
    "created_at": "2011-12-13T16:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137778",
    "user": "jason"
}
```

Thanks for the doc clarifications, and the math changes make sense, though I'm certainly not a HMM expert, so I don't know how to judge the idea that the changes are more useful.  However, it does apply and passes tests, so if this "review" is enough, set this to positive review.



---

archive/issue_comments_137779.json:
```json
{
    "body": "No one else has looked at this, so I guess my review will stand.  Positive review, and thanks for the work!",
    "created_at": "2012-01-17T23:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137779",
    "user": "jason"
}
```

No one else has looked at this, so I guess my review will stand.  Positive review, and thanks for the work!



---

archive/issue_comments_137780.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-17T23:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137780",
    "user": "jason"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_137781.json:
```json
{
    "body": "I get a numerical noise doctest error against sage-5.0.beta1.  I lost the exact doctest error, but it's something trivial.",
    "created_at": "2012-01-22T21:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137781",
    "user": "jdemeyer"
}
```

I get a numerical noise doctest error against sage-5.0.beta1.  I lost the exact doctest error, but it's something trivial.



---

archive/issue_comments_137782.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-01-22T21:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137782",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_137783.json:
```json
{
    "body": "Attachment [trac_12144.2.patch](tarball://root/attachments/some-uuid/ticket12144/trac_12144.2.patch) by was created at 2012-01-24 06:37:52\n\napply only this; fixes the noise issue (I hope)",
    "created_at": "2012-01-24T06:37:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137783",
    "user": "was"
}
```

Attachment [trac_12144.2.patch](tarball://root/attachments/some-uuid/ticket12144/trac_12144.2.patch) by was created at 2012-01-24 06:37:52

apply only this; fixes the noise issue (I hope)



---

archive/issue_comments_137784.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-24T06:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137784",
    "user": "was"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_137785.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-29T23:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137785",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_137786.json:
```json
{
    "body": "There is still numerical noise on 32-bit systems:\n\n```\nsage -t  --long -force_lib devel/sage/sage/stats/hmm/chmm.pyx\n**********************************************************************\nFile \"/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta2/devel/sage-main/sage/stats/hmm/chmm.pyx\", line 1354:\n    sage: m.baum_welch(v, min_sd=1)\nExpected:\n    (-12.617885761692419, 1000)\nGot:\n    (-12.617885761692417, 1000)\n**********************************************************************\n```\n",
    "created_at": "2012-02-01T10:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137786",
    "user": "jdemeyer"
}
```

There is still numerical noise on 32-bit systems:

```
sage -t  --long -force_lib devel/sage/sage/stats/hmm/chmm.pyx
**********************************************************************
File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta2/devel/sage-main/sage/stats/hmm/chmm.pyx", line 1354:
    sage: m.baum_welch(v, min_sd=1)
Expected:
    (-12.617885761692419, 1000)
Got:
    (-12.617885761692417, 1000)
**********************************************************************
```




---

archive/issue_comments_137787.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-02-01T10:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137787",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_137788.json:
```json
{
    "body": "Attachment [trac_12144.3.patch](tarball://root/attachments/some-uuid/ticket12144/trac_12144.3.patch) by was created at 2012-02-02 13:57:03\n\napply only this; fixes final numerical noise issue ?",
    "created_at": "2012-02-02T13:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137788",
    "user": "was"
}
```

Attachment [trac_12144.3.patch](tarball://root/attachments/some-uuid/ticket12144/trac_12144.3.patch) by was created at 2012-02-02 13:57:03

apply only this; fixes final numerical noise issue ?



---

archive/issue_comments_137789.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-02T13:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137789",
    "user": "was"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_137790.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-02-02T14:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137790",
    "user": "jason"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_137791.json:
```json
{
    "body": "All tests in the file still pass for me; positive review.  I see that the doctest above is fixed as well so it should pass.",
    "created_at": "2012-02-02T14:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137791",
    "user": "jason"
}
```

All tests in the file still pass for me; positive review.  I see that the doctest above is fixed as well so it should pass.



---

archive/issue_comments_137792.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-06T21:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11972#issuecomment-137792",
    "user": "jdemeyer"
}
```

Resolution: fixed
