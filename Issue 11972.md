# Issue 11972: better document a technical confusing points in the Hidden Markov Model code

Issue created by migration from Trac.

Original creator: was

Original creation time: 2011-12-11 22:17:43

Assignee: amhou

I was reading the Continuous Hidden Markov Model code and trying to understand how probabilities are defined in a certain context, and got confused.   So I added some comments to de-confuse me.  Hence this patch.  

There is also a 1-line very tiny change in the code itself, where I had checked for "0" instead of checking for smaller than eps in one line.   This changes a few low order bits in a doctest.


---

Comment by was created at 2011-12-11 22:19:27

Changing status from new to needs_review.


---

Comment by was created at 2011-12-12 06:00:11

Changing status from needs_review to needs_work.


---

Attachment

should apply to any sage since about sage-4.0


---

Comment by was created at 2011-12-12 06:32:05

Changing status from needs_work to needs_review.


---

Comment by jason created at 2011-12-13 16:27:26

Thanks for the doc clarifications, and the math changes make sense, though I'm certainly not a HMM expert, so I don't know how to judge the idea that the changes are more useful.  However, it does apply and passes tests, so if this "review" is enough, set this to positive review.


---

Comment by jason created at 2012-01-17 23:30:57

No one else has looked at this, so I guess my review will stand.  Positive review, and thanks for the work!


---

Comment by jason created at 2012-01-17 23:30:57

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-01-22 21:22:21

I get a numerical noise doctest error against sage-5.0.beta1.  I lost the exact doctest error, but it's something trivial.


---

Comment by jdemeyer created at 2012-01-22 21:22:21

Changing status from positive_review to needs_work.


---

Attachment

apply only this; fixes the noise issue (I hope)


---

Comment by was created at 2012-01-24 06:38:03

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2012-01-29 23:35:15

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-02-01 10:04:45

There is still numerical noise on 32-bit systems:

```
sage -t  --long -force_lib devel/sage/sage/stats/hmm/chmm.pyx
**********************************************************************
File "/Users/buildbot/build/sage/moufang-1/moufang_full/build/sage-5.0.beta2/devel/sage-main/sage/stats/hmm/chmm.pyx", line 1354:
    sage: m.baum_welch(v, min_sd=1)
Expected:
    (-12.617885761692419, 1000)
Got:
    (-12.617885761692417, 1000)
**********************************************************************
```



---

Comment by jdemeyer created at 2012-02-01 10:04:45

Changing status from positive_review to needs_work.


---

Attachment

apply only this; fixes final numerical noise issue ?


---

Comment by was created at 2012-02-02 13:57:13

Changing status from needs_work to needs_review.


---

Comment by jason created at 2012-02-02 14:04:16

Changing status from needs_review to positive_review.


---

Comment by jason created at 2012-02-02 14:04:16

All tests in the file still pass for me; positive review.  I see that the doctest above is fixed as well so it should pass.


---

Comment by jdemeyer created at 2012-02-06 21:25:40

Resolution: fixed
