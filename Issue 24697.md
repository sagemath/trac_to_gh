# Issue 24697: Orders are not unique parents

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2018-03-09 12:49:26

CC:  jdemeyer




---

Comment by saraedum created at 2018-03-09 13:02:56

Maximal orders are not handled correctly by my code:

```
sage: K.<i> = QuadraticField(-1)
sage: O = K.order(i)
sage: O
Order in Number Field in i with defining polynomial x^2 + 1
sage: K.maximal_order()
Order in Number Field in i with defining polynomial x^2 + 1
sage: O.is_maximal()
True
sage: K.maximal_order()
Gaussian Integers in Number Field in i with defining polynomial x^2 + 1
```



---

Comment by git created at 2018-03-09 13:04:20

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2018-03-09 14:41:20

IMO, you should subclass `UniqueRepresentation` rather than make a `UniqueFactory` as it makes the layout easier (no separate factory object or class that handles the uniqueness). While sometimes there are good reasons to not do this, usually I find the code easier to understand and maintain by using `UniqueRepresentation`.
----
New commits:


---

Comment by saraedum created at 2018-03-09 23:41:30

I think that's a matter of taste. I prefer factories.


---

Comment by tscrim created at 2018-03-10 00:15:55

I have always found it harder to do maintenance on `UniqueFactory` objects than `UniqueRepresentation` objects due to the increased code complexity and non-locality. Plus `UniqueRepresentation` has slightly better behavior (see `structure/factory.pyx` and `structure/unique_representation.py` docs).

In addition, for `UniqueFactory`, the documentation either has to be duplicated with the factory and the actual class or you have to pick-and-choose which one gets what documentation. So it makes it hard to work with the interactive documentation.

So in my mind, it is a technical debt taken on to use `UniqueFactory` when not necessary and not simply a matter of taste.


---

Comment by tscrim created at 2018-03-10 00:22:58

However, I should also clarify that this is only a suggestion, and I would not revert a positive review if you continue to use `UniqueFactory`.


---

Comment by saraedum created at 2018-03-10 00:44:16

Ok. Thanks for the input. I think I will stick with the factory approach.


---

Comment by git created at 2018-04-05 14:42:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-04-23 10:26:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by roed created at 2018-07-22 20:08:54

New commits:


---

Comment by roed created at 2018-07-22 20:08:54

Changing keywords from "" to "padicIMA".


---

Comment by chapoton created at 2018-07-24 15:19:59

do not use `it.next` but `next(it)` for python3 compatibility, please


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
