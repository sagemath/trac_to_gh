# Issue 21538: make distclean: Don't delete the install hierarchy (SAGE_LOCAL)

Issue created by migration from https://trac.sagemath.org/ticket/21775

Original creator: mkoeppe

Original creation time: 2016-10-27 15:39:21

CC:  jdemeyer dimpase vbraun jhpalmieri

#21501, #21479 turn SAGE_LOCAL into a configurable install hierarchy.
Consequently, it should not be deleted by `make distclean`.


---

Comment by jdemeyer created at 2016-10-27 16:32:30

I would argue that `$SAGE_LOCAL` _should not_ be deleted by `make distclean` but that `$SAGE_ROOT/local` _should_ be deleted by `make distclean`.


---

Comment by mkoeppe created at 2016-10-27 21:59:02

That's certainly a defendable position.

What if the user explicitly used `--prefix=$SAGE_ROOT/local`
or to another subdirectory of `$SAGE_ROOT`?


---

Comment by embray created at 2018-03-26 11:32:49

I would lean toward `make distclean` removes any `$SAGE_LOCAL` that's a subdirectory of `$SAGE_ROOT`.  That's the point of `make distclean`.  There's not much use for a custom `--prefix` outside installing Sage outside of `$SAGE_ROOT`.


---

Comment by mkoeppe created at 2020-05-01 18:16:15

Moving some tickets to 9.2. This is not a promise that I will be working on them.


---

Comment by mkoeppe created at 2020-11-01 16:18:02

I think it's time to clean up the various `-clean` targets in the top-level Makefile so that they match autotools behavior


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
