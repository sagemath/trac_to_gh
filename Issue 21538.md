# Issue 21538: make distclean: Don't delete the install hierarchy (SAGE_LOCAL)

archive/issues_021538.json:
```json
{
    "body": "CC:  jdemeyer dimpase vbraun jhpalmieri\n\n#21501, #21479 turn SAGE_LOCAL into a configurable install hierarchy.\nConsequently, it should not be deleted by `make distclean`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21775\n\n",
    "created_at": "2016-10-27T15:39:21Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "title": "make distclean: Don't delete the install hierarchy (SAGE_LOCAL)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21538",
    "user": "mkoeppe"
}
```
CC:  jdemeyer dimpase vbraun jhpalmieri

#21501, #21479 turn SAGE_LOCAL into a configurable install hierarchy.
Consequently, it should not be deleted by `make distclean`.

Issue created by migration from https://trac.sagemath.org/ticket/21775





---

archive/issue_comments_298971.json:
```json
{
    "body": "I would argue that `$SAGE_LOCAL` *should not* be deleted by `make distclean` but that `$SAGE_ROOT/local` *should* be deleted by `make distclean`.",
    "created_at": "2016-10-27T16:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21538#issuecomment-298971",
    "user": "jdemeyer"
}
```

I would argue that `$SAGE_LOCAL` *should not* be deleted by `make distclean` but that `$SAGE_ROOT/local` *should* be deleted by `make distclean`.



---

archive/issue_comments_298972.json:
```json
{
    "body": "That's certainly a defendable position.\n\nWhat if the user explicitly used `--prefix=$SAGE_ROOT/local`\nor to another subdirectory of `$SAGE_ROOT`?",
    "created_at": "2016-10-27T21:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21538#issuecomment-298972",
    "user": "mkoeppe"
}
```

That's certainly a defendable position.

What if the user explicitly used `--prefix=$SAGE_ROOT/local`
or to another subdirectory of `$SAGE_ROOT`?



---

archive/issue_comments_298973.json:
```json
{
    "body": "I would lean toward `make distclean` removes any `$SAGE_LOCAL` that's a subdirectory of `$SAGE_ROOT`.  That's the point of `make distclean`.  There's not much use for a custom `--prefix` outside installing Sage outside of `$SAGE_ROOT`.",
    "created_at": "2018-03-26T11:32:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21538#issuecomment-298973",
    "user": "embray"
}
```

I would lean toward `make distclean` removes any `$SAGE_LOCAL` that's a subdirectory of `$SAGE_ROOT`.  That's the point of `make distclean`.  There's not much use for a custom `--prefix` outside installing Sage outside of `$SAGE_ROOT`.



---

archive/issue_comments_298974.json:
```json
{
    "body": "Moving some tickets to 9.2. This is not a promise that I will be working on them.",
    "created_at": "2020-05-01T18:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21538#issuecomment-298974",
    "user": "mkoeppe"
}
```

Moving some tickets to 9.2. This is not a promise that I will be working on them.



---

archive/issue_comments_298975.json:
```json
{
    "body": "I think it's time to clean up the various `-clean` targets in the top-level Makefile so that they match autotools behavior",
    "created_at": "2020-11-01T16:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21538#issuecomment-298975",
    "user": "mkoeppe"
}
```

I think it's time to clean up the various `-clean` targets in the top-level Makefile so that they match autotools behavior



---

archive/issue_comments_298976.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21538#issuecomment-298976",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.
