# Issue 21387: Better debug mode for singular 4

archive/issues_021387.json:
```json
{
    "body": "CC:  @embray\n\nThis is a follow up to #17254 which upgraded to singular 4:\n*debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)\n*failing test in debug mode\n\nIssue created by migration from https://trac.sagemath.org/ticket/21624\n\n",
    "created_at": "2016-10-03T10:03:45Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Better debug mode for singular 4",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21387",
    "user": "jpflori"
}
```
CC:  @embray

This is a follow up to #17254 which upgraded to singular 4:
*debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)
*failing test in debug mode

Issue created by migration from https://trac.sagemath.org/ticket/21624





---

archive/issue_comments_296929.json:
```json
{
    "body": "\n```\n24524sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed\n24525sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed\n24526sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed\n24527sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed\n24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n```\n",
    "created_at": "2016-10-21T07:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296929",
    "user": "@vbraun"
}
```


```
24524sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed
24525sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed
24526sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed
24527sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed
24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
```




---

archive/issue_comments_296930.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2016-10-21T09:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296930",
    "user": "@jdemeyer"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_296931.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2016-10-21T09:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296931",
    "user": "@jdemeyer"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_296932.json:
```json
{
    "body": "All of these errors look like:\n\n```\n    // ***dPolyReportError: NULL coef \n     occurred at\n     occurred for poly: o*x*y*x_1*y_1*x_2\n    // ***dPolyReportError: NULL coef \n     occurred at\n     occurred for poly: o*y*x_1*y_1*x_2\n    // ***dError: S_2_R[2]=1 != T[1].i_r=0\n    -y*z*x - y*z*y - y*z*z\n```\n\nexcept for the last one:\n\n```\n\nFile \"src/sage/schemes/curves/constructor.py\", line 108, in sage.schemes.curves.constructor.Curve\nFailed example:\n    C.genus()\nExpected:\n    13\nGot:\n    // ** no minpoly allowed if there are local objects belonging to the basering: \n    number((a2+a+1))\n    // ** killing a local object due to minpoly change: p\n    // ** no minpoly allowed if there are local objects belonging to the basering: \n    number((a2-a+1))\n    // ** killing a local object due to minpoly change: p\n    13\n```\n\n> 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n> 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n> 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n> }}}",
    "created_at": "2016-10-28T12:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296932",
    "user": "jpflori"
}
```

All of these errors look like:

```
    // ***dPolyReportError: NULL coef 
     occurred at
     occurred for poly: o*x*y*x_1*y_1*x_2
    // ***dPolyReportError: NULL coef 
     occurred at
     occurred for poly: o*y*x_1*y_1*x_2
    // ***dError: S_2_R[2]=1 != T[1].i_r=0
    -y*z*x - y*z*y - y*z*z
```

except for the last one:

```

File "src/sage/schemes/curves/constructor.py", line 108, in sage.schemes.curves.constructor.Curve
Failed example:
    C.genus()
Expected:
    13
Got:
    // ** no minpoly allowed if there are local objects belonging to the basering: 
    number((a2+a+1))
    // ** killing a local object due to minpoly change: p
    // ** no minpoly allowed if there are local objects belonging to the basering: 
    number((a2-a+1))
    // ** killing a local object due to minpoly change: p
    13
```

> 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
> 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
> 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
> }}}



---

archive/issue_comments_296933.json:
```json
{
    "body": "Thread about first issue here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/TPZNlvZXei0",
    "created_at": "2016-10-28T14:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296933",
    "user": "jpflori"
}
```

Thread about first issue here:
* https://groups.google.com/forum/#!topic/libsingular-devel/TPZNlvZXei0



---

archive/issue_comments_296934.json:
```json
{
    "body": "And the second one here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/tYuWlGOZdWo",
    "created_at": "2016-10-31T13:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296934",
    "user": "jpflori"
}
```

And the second one here:
* https://groups.google.com/forum/#!topic/libsingular-devel/tYuWlGOZdWo



---

archive/issue_comments_296935.json:
```json
{
    "body": "With #21631 there are now also many\n\n```\n // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n```\n\nwarnings, though no crashes.",
    "created_at": "2016-11-02T19:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296935",
    "user": "@vbraun"
}
```

With #21631 there are now also many

```
 // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
```

warnings, though no crashes.



---

archive/issue_comments_296936.json:
```json
{
    "body": "Can you tell in which file it is?",
    "created_at": "2016-11-03T11:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296936",
    "user": "jpflori"
}
```

Can you tell in which file it is?



---

archive/issue_comments_296937.json:
```json
{
    "body": "Ok, got it.",
    "created_at": "2016-11-03T12:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296937",
    "user": "jpflori"
}
```

Ok, got it.



---

archive/issue_comments_296938.json:
```json
{
    "body": "See ##21865 for new errors occurring only in debug mode in:\n* sage/rings/cfinite_sequence.py\n* sage/matrix/matrix_modn_dense_template.pxi",
    "created_at": "2016-12-21T13:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296938",
    "user": "jpflori"
}
```

See ##21865 for new errors occurring only in debug mode in:
* sage/rings/cfinite_sequence.py
* sage/matrix/matrix_modn_dense_template.pxi



---

archive/issue_comments_296939.json:
```json
{
    "body": "the last issue ( \"no minpoly allowed..\") can be fixed with\n\nhttps://github.com/Singular/Sources/pull/814\n(avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n\nDid you get answers from Hans for the other issues?\nOr, could you track them down?\n\n\nReplying to [comment:4 jpflori]:\n> All of these errors look like:\n> {{{\n>     // ***dPolyReportError: NULL coef \n>      occurred at\n>      occurred for poly: o*x*y*x_1*y_1*x_2\n>     // ***dPolyReportError: NULL coef \n>      occurred at\n>      occurred for poly: o*y*x_1*y_1*x_2\n>     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n>     -y*z*x - y*z*y - y*z*z\n> }}}\n> except for the last one:\n> {{{\n> \n> File \"src/sage/schemes/curves/constructor.py\", line 108, in sage.schemes.curves.constructor.Curve\n> Failed example:\n>     C.genus()\n> Expected:\n>     13\n> Got:\n>     // ** no minpoly allowed if there are local objects belonging to the basering: \n>     number((a2+a+1))\n>     // ** killing a local object due to minpoly change: p\n>     // ** no minpoly allowed if there are local objects belonging to the basering: \n>     number((a2-a+1))\n>     // ** killing a local object due to minpoly change: p\n>     13\n> }}}\n> > 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n> > 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n> > 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n> > }}}",
    "created_at": "2017-01-31T21:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296939",
    "user": "jakobkroeker"
}
```

the last issue ( "no minpoly allowed..") can be fixed with

https://github.com/Singular/Sources/pull/814
(avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')

Did you get answers from Hans for the other issues?
Or, could you track them down?


Replying to [comment:4 jpflori]:
> All of these errors look like:
> {{{
>     // ***dPolyReportError: NULL coef 
>      occurred at
>      occurred for poly: o*x*y*x_1*y_1*x_2
>     // ***dPolyReportError: NULL coef 
>      occurred at
>      occurred for poly: o*y*x_1*y_1*x_2
>     // ***dError: S_2_R[2]=1 != T[1].i_r=0
>     -y*z*x - y*z*y - y*z*z
> }}}
> except for the last one:
> {{{
> 
> File "src/sage/schemes/curves/constructor.py", line 108, in sage.schemes.curves.constructor.Curve
> Failed example:
>     C.genus()
> Expected:
>     13
> Got:
>     // ** no minpoly allowed if there are local objects belonging to the basering: 
>     number((a2+a+1))
>     // ** killing a local object due to minpoly change: p
>     // ** no minpoly allowed if there are local objects belonging to the basering: 
>     number((a2-a+1))
>     // ** killing a local object due to minpoly change: p
>     13
> }}}
> > 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
> > 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
> > 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
> > }}}



---

archive/issue_comments_296940.json:
```json
{
    "body": "Replying to [comment:7 vbraun]:\n> With #21631 there are now also many\n> {{{\n>  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n> }}}\n> warnings, though no crashes.\n\nso changes in #21631 introduced a new issue?\nCould someone track it down?",
    "created_at": "2017-01-31T21:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296940",
    "user": "jakobkroeker"
}
```

Replying to [comment:7 vbraun]:
> With #21631 there are now also many
> {{{
>  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
> }}}
> warnings, though no crashes.

so changes in #21631 introduced a new issue?
Could someone track it down?



---

archive/issue_comments_296941.json:
```json
{
    "body": "Replying to [comment:12 jakobkroeker]:\n> Replying to [comment:7 vbraun]:\n> > With #21631 there are now also many\n> > {{{\n> >  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n> > }}}\n> > warnings, though no crashes.\n> \n> so changes in #21631 introduced a new issue?\n> Could someone track it down?\nThis has been fixed in Singular git version.",
    "created_at": "2017-02-01T13:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296941",
    "user": "jpflori"
}
```

Replying to [comment:12 jakobkroeker]:
> Replying to [comment:7 vbraun]:
> > With #21631 there are now also many
> > {{{
> >  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
> > }}}
> > warnings, though no crashes.
> 
> so changes in #21631 introduced a new issue?
> Could someone track it down?
This has been fixed in Singular git version.



---

archive/issue_comments_296942.json:
```json
{
    "body": "Replying to [comment:11 jakobkroeker]:\n> the last issue ( \"no minpoly allowed..\") can be fixed with\n> \n> https://github.com/Singular/Sources/pull/814\n> (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> \nGood! It's even in Singular's git version now.\n\n> Did you get answers from Hans for the other issues?\n> Or, could you track them down?\n> \n> \n> Replying to [comment:4 jpflori]:\n> > All of these errors look like:\n> > {{{\n> >      occurred at\n> >      occurred for poly: o*y*x_1*y_1*x_2\n> >     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n> >     -y*z*x - y*z*y - y*z*z\n> > }}}\nThose like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:\n* https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\nNo feedback from Hans and I had no time to look at it.",
    "created_at": "2017-02-01T13:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296942",
    "user": "jpflori"
}
```

Replying to [comment:11 jakobkroeker]:
> the last issue ( "no minpoly allowed..") can be fixed with
> 
> https://github.com/Singular/Sources/pull/814
> (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> 
Good! It's even in Singular's git version now.

> Did you get answers from Hans for the other issues?
> Or, could you track them down?
> 
> 
> Replying to [comment:4 jpflori]:
> > All of these errors look like:
> > {{{
> >      occurred at
> >      occurred for poly: o*y*x_1*y_1*x_2
> >     // ***dError: S_2_R[2]=1 != T[1].i_r=0
> >     -y*z*x - y*z*y - y*z*z
> > }}}
Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:
* https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ
No feedback from Hans and I had no time to look at it.



---

archive/issue_comments_296943.json:
```json
{
    "body": "I just reminded Hans kindly to look at that issue since it is\na blocker ticket for sage.\n\nhttps://groups.google.com/forum/#!msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\n\nLet's see if something happens.\n\n\n\nReplying to [comment:14 jpflori]:\n> Replying to [comment:11 jakobkroeker]:\n> > the last issue ( \"no minpoly allowed..\") can be fixed with\n> > \n> > https://github.com/Singular/Sources/pull/814\n> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> > \n> Good! It's even in Singular's git version now.\n> \n> > Did you get answers from Hans for the other issues?\n> > Or, could you track them down?\n> > \n> > \n> > Replying to [comment:4 jpflori]:\n> > > All of these errors look like:\n> > > {{{\n> > >      occurred at\n> > >      occurred for poly: o*y*x_1*y_1*x_2\n> > >     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n> > >     -y*z*x - y*z*y - y*z*z\n> > > }}}\n> Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:\n> * https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\n> No feedback from Hans and I had no time to look at it.",
    "created_at": "2017-02-01T17:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296943",
    "user": "jakobkroeker"
}
```

I just reminded Hans kindly to look at that issue since it is
a blocker ticket for sage.

https://groups.google.com/forum/#!msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ

Let's see if something happens.



Replying to [comment:14 jpflori]:
> Replying to [comment:11 jakobkroeker]:
> > the last issue ( "no minpoly allowed..") can be fixed with
> > 
> > https://github.com/Singular/Sources/pull/814
> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> > 
> Good! It's even in Singular's git version now.
> 
> > Did you get answers from Hans for the other issues?
> > Or, could you track them down?
> > 
> > 
> > Replying to [comment:4 jpflori]:
> > > All of these errors look like:
> > > {{{
> > >      occurred at
> > >      occurred for poly: o*y*x_1*y_1*x_2
> > >     // ***dError: S_2_R[2]=1 != T[1].i_r=0
> > >     -y*z*x - y*z*y - y*z*z
> > > }}}
> Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:
> * https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ
> No feedback from Hans and I had no time to look at it.



---

archive/issue_comments_296944.json:
```json
{
    "body": "With the latest tarball for 4-1-0p2, debug mode should be clean:\n* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/",
    "created_at": "2017-02-21T10:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296944",
    "user": "jpflori"
}
```

With the latest tarball for 4-1-0p2, debug mode should be clean:
* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/



---

archive/issue_comments_296945.json:
```json
{
    "body": "Replying to [comment:16 jpflori]:\n> With the latest tarball for 4-1-0p2, debug mode should be clean:\n> * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/\n\nrelated singular commit is \nhttps://github.com/Singular/Sources/commit/54c80cb81ed58f166a023fc060f541e24ebd5892",
    "created_at": "2017-03-08T00:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296945",
    "user": "jakobkroeker"
}
```

Replying to [comment:16 jpflori]:
> With the latest tarball for 4-1-0p2, debug mode should be clean:
> * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/

related singular commit is 
https://github.com/Singular/Sources/commit/54c80cb81ed58f166a023fc060f541e24ebd5892



---

archive/issue_comments_296946.json:
```json
{
    "body": "Replying to [comment:14 jpflori]:\n> Replying to [comment:11 jakobkroeker]:\n> > the last issue ( \"no minpoly allowed..\") can be fixed with\n> > \n> > https://github.com/Singular/Sources/pull/814\n> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> > \n> Good! It's even in Singular's git version now.\n\nThere are much more issues in Singular LIBs where the minpoly is not immediately defined (and lead to debug output) which are probably not hit by current sage tests, but in the long term they have all to be fixed:\nhttps://github.com/jakobkroeker/test_singular/issues/243",
    "created_at": "2017-03-08T01:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296946",
    "user": "jakobkroeker"
}
```

Replying to [comment:14 jpflori]:
> Replying to [comment:11 jakobkroeker]:
> > the last issue ( "no minpoly allowed..") can be fixed with
> > 
> > https://github.com/Singular/Sources/pull/814
> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> > 
> Good! It's even in Singular's git version now.

There are much more issues in Singular LIBs where the minpoly is not immediately defined (and lead to debug output) which are probably not hit by current sage tests, but in the long term they have all to be fixed:
https://github.com/jakobkroeker/test_singular/issues/243



---

archive/issue_comments_296947.json:
```json
{
    "body": "Changing priority from blocker to major.",
    "created_at": "2017-03-23T12:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296947",
    "user": "@embray"
}
```

Changing priority from blocker to major.



---

archive/issue_comments_296948.json:
```json
{
    "body": "I think I'm seeing this too.  I almost always compile with `SAGE_DEBUG=yes` on Cygwin since I have to debug things so often, and I'm seeing lots of failures like this since the switch to Singular 4.  Going to recompile Singular in non-debug mode to confirm that it goes away.\n\n(Also obviously this isn't a *blocker* or it'd be fixed by now :)",
    "created_at": "2017-03-23T12:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296948",
    "user": "@embray"
}
```

I think I'm seeing this too.  I almost always compile with `SAGE_DEBUG=yes` on Cygwin since I have to debug things so often, and I'm seeing lots of failures like this since the switch to Singular 4.  Going to recompile Singular in non-debug mode to confirm that it goes away.

(Also obviously this isn't a *blocker* or it'd be fixed by now :)



---

archive/issue_comments_296949.json:
```json
{
    "body": "Confirmed that rebuilding Singular and its dependents with `SAGE_DEBUG=no` fixed these failures for me.",
    "created_at": "2017-03-23T14:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296949",
    "user": "@embray"
}
```

Confirmed that rebuilding Singular and its dependents with `SAGE_DEBUG=no` fixed these failures for me.



---

archive/issue_comments_296950.json:
```json
{
    "body": "`@`eric: does #22425 fixed the errors you saw?\nI think we can close this one now #22425 is merged.",
    "created_at": "2017-04-03T11:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296950",
    "user": "jpflori"
}
```

`@`eric: does #22425 fixed the errors you saw?
I think we can close this one now #22425 is merged.



---

archive/issue_comments_296951.json:
```json
{
    "body": "I don't think I've tried yet.  I'll test it and see.  Are you saying it should be fixed even with `SAGE_DEBUG=yes`?",
    "created_at": "2017-04-03T12:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296951",
    "user": "@embray"
}
```

I don't think I've tried yet.  I'll test it and see.  Are you saying it should be fixed even with `SAGE_DEBUG=yes`?



---

archive/issue_comments_296952.json:
```json
{
    "body": "All error messages specific to singular built in debug mode should not appear anymore.",
    "created_at": "2017-04-03T12:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296952",
    "user": "jpflori"
}
```

All error messages specific to singular built in debug mode should not appear anymore.



---

archive/issue_comments_296953.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-25T11:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296953",
    "user": "jpflori"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_296954.json:
```json
{
    "body": "Should be ok since the latest singular upgrade.",
    "created_at": "2017-04-25T11:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296954",
    "user": "jpflori"
}
```

Should be ok since the latest singular upgrade.



---

archive/issue_comments_296955.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-25T17:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296955",
    "user": "@vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_296956.json:
```json
{
    "body": "I'm still getting this one\n\n```\nsage -t --long src/sage/interfaces/singular.py\n**********************************************************************\nFile \"src/sage/interfaces/singular.py\", line 1523, in sage.interfaces.singular.SingularElement.sage_global_ring\nFailed example:\n    singular.eval('ring r5 = (complex,15,j),(a,b,c),dp')\nExpected:\n    ''\nGot:\n    '\\n// ***dError: assume violation at numbers.cc:434 condition: n->cfCoeffName!=ndCoeffName'\n**********************************************************************\n1 item had failures:\n   1 of  22 in sage.interfaces.singular.SingularElement.sage_global_ring\n    [390 tests, 1 failure, 10.81 s]\n```\n",
    "created_at": "2017-04-25T17:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296956",
    "user": "@vbraun"
}
```

I'm still getting this one

```
sage -t --long src/sage/interfaces/singular.py
**********************************************************************
File "src/sage/interfaces/singular.py", line 1523, in sage.interfaces.singular.SingularElement.sage_global_ring
Failed example:
    singular.eval('ring r5 = (complex,15,j),(a,b,c),dp')
Expected:
    ''
Got:
    '\n// ***dError: assume violation at numbers.cc:434 condition: n->cfCoeffName!=ndCoeffName'
**********************************************************************
1 item had failures:
   1 of  22 in sage.interfaces.singular.SingularElement.sage_global_ring
    [390 tests, 1 failure, 10.81 s]
```




---

archive/issue_comments_296957.json:
```json
{
    "body": "Maybe #22868.\nDid not check debug mode there.",
    "created_at": "2017-04-25T17:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296957",
    "user": "jpflori"
}
```

Maybe #22868.
Did not check debug mode there.



---

archive/issue_comments_296958.json:
```json
{
    "body": "Unfortunately the failing test it is still here with 4.1.0p3.",
    "created_at": "2017-04-26T08:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296958",
    "user": "jpflori"
}
```

Unfortunately the failing test it is still here with 4.1.0p3.



---

archive/issue_comments_296959.json:
```json
{
    "body": "Should be fixed in git version:\n* https://github.com/Singular/Sources/commit/6af76a7a09a49e7e08065cdf078b2461e16af2eb\n\n`@`volker: do you see any other failures?",
    "created_at": "2017-04-27T10:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296959",
    "user": "jpflori"
}
```

Should be fixed in git version:
* https://github.com/Singular/Sources/commit/6af76a7a09a49e7e08065cdf078b2461e16af2eb

`@`volker: do you see any other failures?



---

archive/issue_comments_296960.json:
```json
{
    "body": "These look a bit like they might be from Singular, haven't investigated further:\n\n```\nsage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_ideal.py\", line 1761, in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis\nFailed example:\n    Ideal(P(0)).interreduced_basis()\nExpected:\n    [0]\nGot:\n    wrong mod p number 140727535500960 at modulop.cc,158\n    [0]\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis\n    [722 tests, 1 failure, 75.81 s]\nsage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_sequence.py\", line 1022, in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced\nFailed example:\n    Sequence([P(0)]).reduced()\nExpected:\n    [0]\nGot:\n    wrong mod p number 140727535505680 at modulop.cc,158\n    [0]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced\n    [235 tests, 1 failure, 14.47 s]\n```\n",
    "created_at": "2017-04-29T23:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296960",
    "user": "@vbraun"
}
```

These look a bit like they might be from Singular, haven't investigated further:

```
sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_ideal.py", line 1761, in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis
Failed example:
    Ideal(P(0)).interreduced_basis()
Expected:
    [0]
Got:
    wrong mod p number 140727535500960 at modulop.cc,158
    [0]
**********************************************************************
1 item had failures:
   1 of  13 in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis
    [722 tests, 1 failure, 75.81 s]
sage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_sequence.py", line 1022, in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced
Failed example:
    Sequence([P(0)]).reduced()
Expected:
    [0]
Got:
    wrong mod p number 140727535505680 at modulop.cc,158
    [0]
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced
    [235 tests, 1 failure, 14.47 s]
```




---

archive/issue_comments_296961.json:
```json
{
    "body": "Error messages definitely from Singular, though it might be from bad input on Sage's side.",
    "created_at": "2017-05-02T09:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21387",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21387#issuecomment-296961",
    "user": "jpflori"
}
```

Error messages definitely from Singular, though it might be from bad input on Sage's side.
