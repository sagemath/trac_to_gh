# Issue 33704: implement an inverse to FiniteField.fetch_int()

archive/issues_033704.json:
```json
{
    "body": "CC:  @davewittemorris @slel\n\nFinite fields have `.fetch_int()` to decode integers into finite-field elements by reinterpreting the base-`p` representation as a polynomial:\n\n```sage\nsage: F.<t> = GF(7^10)\nsage: el = F.fetch_int(2424); el\nt^4 + 3*t + 2\n```\n\n\nHowever, the inverse operation is a bit cumbersome:\n\n```sage\nsage: el.polynomial().change_ring(ZZ)(el.parent().characteristic())\n2424\n```\n\n\nIn this patch, we add an inverse to `.fetch_int()`, named `.to_integer()` in resemblance with the Python method `int.to_bytes()`. Also, some code cleanup and optimization while we're at it.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33941\n\n",
    "created_at": "2022-06-01T03:50:24Z",
    "labels": [
        "component: finite rings"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "implement an inverse to FiniteField.fetch_int()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33704",
    "user": "https://github.com/yyyyx4"
}
```
CC:  @davewittemorris @slel

Finite fields have `.fetch_int()` to decode integers into finite-field elements by reinterpreting the base-`p` representation as a polynomial:

```sage
sage: F.<t> = GF(7^10)
sage: el = F.fetch_int(2424); el
t^4 + 3*t + 2
```


However, the inverse operation is a bit cumbersome:

```sage
sage: el.polynomial().change_ring(ZZ)(el.parent().characteristic())
2424
```


In this patch, we add an inverse to `.fetch_int()`, named `.to_integer()` in resemblance with the Python method `int.to_bytes()`. Also, some code cleanup and optimization while we're at it.

Issue created by migration from https://trac.sagemath.org/ticket/33941





---

archive/issue_comments_478913.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-06-01T03:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478913",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478914.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-06-01T04:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478914",
    "user": "https://github.com/yyyyx4"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_478915.json:
```json
{
    "body": "I just found out that #31605 already tracks this issue and that binary finite fields have `.integer_representation()`.\n\nThis leaves us with three options for naming these methods:\n1. `.fetch_int()` / `.integer_representation()`    [backwards compatible]\n2. `.from_integer()` / `.integer_representation()` [one deprecation]\n3. `.from_integer()` / `.to_integer()`             [two deprecations]\n\nPersonally I'm still in favor of (3) because the others lack symmetry. Opinions?",
    "created_at": "2022-06-01T05:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478915",
    "user": "https://github.com/yyyyx4"
}
```

I just found out that #31605 already tracks this issue and that binary finite fields have `.integer_representation()`.

This leaves us with three options for naming these methods:
1. `.fetch_int()` / `.integer_representation()`    [backwards compatible]
2. `.from_integer()` / `.integer_representation()` [one deprecation]
3. `.from_integer()` / `.to_integer()`             [two deprecations]

Personally I'm still in favor of (3) because the others lack symmetry. Opinions?



---

archive/issue_comments_478916.json:
```json
{
    "body": "Replying to [comment:3 lorenz]:\n> I just found out that #31605 already tracks this issue and that binary finite fields have `.integer_representation()`.\n> \n> This leaves us with three options for naming these methods:\n> 1. `.fetch_int()` / `.integer_representation()`    [backwards compatible]\n> 2. `.from_integer()` / `.integer_representation()` [one deprecation]\n> 3. `.from_integer()` / `.to_integer()`             [two deprecations]\n> \n> Personally I'm still in favor of (3) because the others lack symmetry. Opinions?\n\n+1 to option 3",
    "created_at": "2022-08-13T10:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478916",
    "user": "https://github.com/videlec"
}
```

Replying to [comment:3 lorenz]:
> I just found out that #31605 already tracks this issue and that binary finite fields have `.integer_representation()`.
> 
> This leaves us with three options for naming these methods:
> 1. `.fetch_int()` / `.integer_representation()`    [backwards compatible]
> 2. `.from_integer()` / `.integer_representation()` [one deprecation]
> 3. `.from_integer()` / `.to_integer()`             [two deprecations]
> 
> Personally I'm still in favor of (3) because the others lack symmetry. Opinions?

+1 to option 3



---

archive/issue_comments_478917.json:
```json
{
    "body": "Also +1 for (3) for the sake of symmetry and consistency.",
    "created_at": "2022-08-13T15:29:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478917",
    "user": "https://github.com/slel"
}
```

Also +1 for (3) for the sake of symmetry and consistency.



---

archive/issue_comments_478918.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-13T15:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478919.json:
```json
{
    "body": "Thanks for the responses! It seems the only remaining question is whether we want to deprecate `.integer_representation()` or not.",
    "created_at": "2022-08-13T15:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478919",
    "user": "https://github.com/yyyyx4"
}
```

Thanks for the responses! It seems the only remaining question is whether we want to deprecate `.integer_representation()` or not.



---

archive/issue_comments_478920.json:
```json
{
    "body": "Replying to [comment:8 lorenz]:\n> [...] whether [...] to deprecate `.integer_representation()` or not.\n\nThe only reason I would see not to would be consistency\nwith other software.\n\nDo Magma, Maple, Mathematica have similar functions,\nand if so how they are named?",
    "created_at": "2022-08-15T03:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478920",
    "user": "https://github.com/slel"
}
```

Replying to [comment:8 lorenz]:
> [...] whether [...] to deprecate `.integer_representation()` or not.

The only reason I would see not to would be consistency
with other software.

Do Magma, Maple, Mathematica have similar functions,
and if so how they are named?



---

archive/issue_comments_478921.json:
```json
{
    "body": "I don't know. Some quick online searches didn't find anything.",
    "created_at": "2022-08-16T03:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478921",
    "user": "https://github.com/yyyyx4"
}
```

I don't know. Some quick online searches didn't find anything.



---

archive/issue_comments_478922.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-10-17T15:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478923.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-08T16:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478924.json:
```json
{
    "body": "Replying to [comment:9 Samuel Leli\u00e8vre]:\n> Do Magma, Maple, Mathematica have similar functions,\n> and if so how they are named?\n\nI could not find one for Magma and Maple. Mathematica has `ToElementCode` and `FromElementCode`\n\nI think Sage is the leading software in this regard. No worry for consistency.\n\n+1 to option 3.",
    "created_at": "2022-11-25T01:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478924",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:9 Samuel Lelièvre]:
> Do Magma, Maple, Mathematica have similar functions,
> and if so how they are named?

I could not find one for Magma and Maple. Mathematica has `ToElementCode` and `FromElementCode`

I think Sage is the leading software in this regard. No worry for consistency.

+1 to option 3.



---

archive/issue_comments_478925.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-25T10:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478926.json:
```json
{
    "body": "Thanks.\n\nOne more thing. I think the hyphen in `finite-field element` is legitimate but not really necessary. The hyphen is there to mean \"(finite field) element\" not \"finite (field element)\". But sage is mathematics software and there is zero risk that one reads it as \"finite (field element)\". \"finite field\", \"elliptic curve\", \"cyclic group\", etc are all mathematical terms, and rarely written in two forms (hyphened and not hyphened). For consistency, let us stick to one form. Please reconsider.",
    "created_at": "2022-11-25T10:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478926",
    "user": "https://github.com/kwankyu"
}
```

Thanks.

One more thing. I think the hyphen in `finite-field element` is legitimate but not really necessary. The hyphen is there to mean "(finite field) element" not "finite (field element)". But sage is mathematics software and there is zero risk that one reads it as "finite (field element)". "finite field", "elliptic curve", "cyclic group", etc are all mathematical terms, and rarely written in two forms (hyphened and not hyphened). For consistency, let us stick to one form. Please reconsider.



---

archive/issue_comments_478927.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-25T15:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478927",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478928.json:
```json
{
    "body": "Done.\u2002(IMHO the hyphens improve readability even when they are not strictly *needed* to disambiguate, but it's obviously a matter of personal preference.)",
    "created_at": "2022-11-25T15:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478928",
    "user": "https://github.com/yyyyx4"
}
```

Done. (IMHO the hyphens improve readability even when they are not strictly *needed* to disambiguate, but it's obviously a matter of personal preference.)



---

archive/issue_comments_478929.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-26T01:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478930.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-11-26T01:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_478931.json:
```json
{
    "body": "Replying to [comment:18 Lorenz Panny]:\n> Done.\u2002(IMHO the hyphens improve readability even when they are not strictly *needed* to disambiguate, but it's obviously a matter of personal preference.)\n\nThanks! The boundary of consistency and personal preference is blurred and unfortunately is a source of perpetual debates.\n\nI made minor edits on spaces. Otherwise, the branch looks good to me. Set it positive review once tests pass.",
    "created_at": "2022-11-26T02:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478931",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:18 Lorenz Panny]:
> Done. (IMHO the hyphens improve readability even when they are not strictly *needed* to disambiguate, but it's obviously a matter of personal preference.)

Thanks! The boundary of consistency and personal preference is blurred and unfortunately is a source of perpetual debates.

I made minor edits on spaces. Otherwise, the branch looks good to me. Set it positive review once tests pass.



---

archive/issue_comments_478932.json:
```json
{
    "body": "Bot looks green. Thank you!",
    "created_at": "2022-11-26T08:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478932",
    "user": "https://github.com/yyyyx4"
}
```

Bot looks green. Thank you!



---

archive/issue_comments_478933.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-11-26T08:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478933",
    "user": "https://github.com/yyyyx4"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_478934.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-12-11T11:11:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33704#issuecomment-478934",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
