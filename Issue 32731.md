# Issue 32731: Update sphinx to 4.3

archive/issues_032731.json:
```json
{
    "body": "CC:  @kiwifb @antonio-rojas\n\nIn Debian with sphinx 4.3.1 I am getting these errors when building the documentation:\n\nExtension error (sage.docs.conf):\nHandler <function find_sage_dangling_links at 0x7fe31e14bf70> for event 'missing-reference' threw an exception (exception: No such config value: intersphinx_disabled_reftypes)\n\nintersphinx_disabled_reftypes was introduced in sphinx 4.3.0 so I think we need to change something for compatibility.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32968\n\n",
    "created_at": "2021-12-04T09:24:05Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Update sphinx to 4.3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32731",
    "user": "https://github.com/tobihan"
}
```
CC:  @kiwifb @antonio-rojas

In Debian with sphinx 4.3.1 I am getting these errors when building the documentation:

Extension error (sage.docs.conf):
Handler <function find_sage_dangling_links at 0x7fe31e14bf70> for event 'missing-reference' threw an exception (exception: No such config value: intersphinx_disabled_reftypes)

intersphinx_disabled_reftypes was introduced in sphinx 4.3.0 so I think we need to change something for compatibility.

Issue created by migration from https://trac.sagemath.org/ticket/32968





---

archive/issue_comments_466313.json:
```json
{
    "body": "Attachment [u1-version-sphinx-4.3.patch](tarball://root/attachments/some-uuid/ticket32968/u1-version-sphinx-4.3.patch) by @tobihan created at 2021-12-07 22:38:24",
    "created_at": "2021-12-07T22:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466313",
    "user": "https://github.com/tobihan"
}
```

Attachment [u1-version-sphinx-4.3.patch](tarball://root/attachments/some-uuid/ticket32968/u1-version-sphinx-4.3.patch) by @tobihan created at 2021-12-07 22:38:24



---

archive/issue_comments_466314.json:
```json
{
    "body": "The problem is fixed with the attached patch.",
    "created_at": "2021-12-07T22:38:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466314",
    "user": "https://github.com/tobihan"
}
```

The problem is fixed with the attached patch.



---

archive/issue_comments_466315.json:
```json
{
    "body": "Patch works for me in sage-on-gentoo with sphinx 4.3.1. I think we should make it into a proper branch.\n\nDo you have something different or a previous ticket `@`arojas?",
    "created_at": "2021-12-12T21:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466315",
    "user": "https://github.com/kiwifb"
}
```

Patch works for me in sage-on-gentoo with sphinx 4.3.1. I think we should make it into a proper branch.

Do you have something different or a previous ticket `@`arojas?



---

archive/issue_comments_466316.json:
```json
{
    "body": "I generally only build docs for stable releases, so I haven't tested sphinx 4.3 yet.",
    "created_at": "2021-12-12T21:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466316",
    "user": "https://github.com/antonio-rojas"
}
```

I generally only build docs for stable releases, so I haven't tested sphinx 4.3 yet.



---

archive/issue_comments_466317.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-12T22:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466317",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_466318.json:
```json
{
    "body": "OK, this is ready for inspection.\n----\nNew commits:",
    "created_at": "2021-12-12T22:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466318",
    "user": "https://github.com/kiwifb"
}
```

OK, this is ready for inspection.
----
New commits:



---

archive/issue_comments_466319.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-19T05:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466319",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_466320.json:
```json
{
    "body": "Thanks :)",
    "created_at": "2021-12-19T07:14:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466320",
    "user": "https://github.com/kiwifb"
}
```

Thanks :)



---

archive/issue_comments_466321.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-12-24T00:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466321",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_466322.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-12-24T00:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466322",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_466323.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-24T00:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466323",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_466324.json:
```json
{
    "body": "Trivially rebased on new beta. Back to positive review.",
    "created_at": "2021-12-24T00:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466324",
    "user": "https://github.com/kiwifb"
}
```

Trivially rebased on new beta. Back to positive review.



---

archive/issue_comments_466325.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-01-31T23:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32731#issuecomment-466325",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
