# Issue 29287: bug with rational input in IntegerVectors

archive/issues_029287.json:
```json
{
    "body": "As reported on [ask](https://ask.sagemath.org/question/50814/error-with-rational-input-in-integervectors/), we have the following unexpected behavior of IntegerVectors:\n\n```\nsage: IntegerVectors(2,3).list()\n[[2, 0, 0], [1, 1, 0], [1, 0, 1], [0, 2, 0], [0, 1, 1], [0, 0, 2]]\nsage: IntegerVectors(2,3/1).list()\n[[2, 0, 0], [1, 1, 0]]\n```\n\nThe relevant code block in the implementation of IntegerVectors seems to be the following:\n\n```\n    try:\n        return IntegerVectors_nnondescents(n, tuple(k))\n    except TypeError:\n        pass\n\n    return IntegerVectors_nk(n, k)\n```\n\nFor k=3/1 one has that tuple(k) does not give a TypeError (as opposed to tuple(3)) and thus the code never tries to interpret k as an integer.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29524\n\n",
    "created_at": "2020-04-17T19:29:14Z",
    "labels": [
        "combinatorics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "bug with rational input in IntegerVectors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29287",
    "user": "vdelecroix"
}
```
As reported on [ask](https://ask.sagemath.org/question/50814/error-with-rational-input-in-integervectors/), we have the following unexpected behavior of IntegerVectors:

```
sage: IntegerVectors(2,3).list()
[[2, 0, 0], [1, 1, 0], [1, 0, 1], [0, 2, 0], [0, 1, 1], [0, 0, 2]]
sage: IntegerVectors(2,3/1).list()
[[2, 0, 0], [1, 1, 0]]
```

The relevant code block in the implementation of IntegerVectors seems to be the following:

```
    try:
        return IntegerVectors_nnondescents(n, tuple(k))
    except TypeError:
        pass

    return IntegerVectors_nk(n, k)
```

For k=3/1 one has that tuple(k) does not give a TypeError (as opposed to tuple(3)) and thus the code never tries to interpret k as an integer.

Issue created by migration from https://trac.sagemath.org/ticket/29524





---

archive/issue_comments_415154.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-04-17T19:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415154",
    "user": "vdelecroix"
}
```

New commits:



---

archive/issue_comments_415155.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-17T19:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415155",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_415156.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-18T11:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415156",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_415157.json:
```json
{
    "body": "what is this \"numbers\" module ? why is this better than \"k in ZZ\" ?",
    "created_at": "2020-04-18T16:21:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415157",
    "user": "chapoton"
}
```

what is this "numbers" module ? why is this better than "k in ZZ" ?



---

archive/issue_comments_415158.json:
```json
{
    "body": "Replying to [comment:4 chapoton]:\n> what is this \"numbers\" module ?\n\nThis is standard Python [PEP 3141](https://www.python.org/dev/peps/pep-3141/) see also [the documentation here](https://docs.python.org/3/library/numbers.html).\n\n> why is this better than \"k in ZZ\" ?\n\nI never said it was better. But it is certainly more Pythonic.",
    "created_at": "2020-04-18T16:50:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415158",
    "user": "vdelecroix"
}
```

Replying to [comment:4 chapoton]:
> what is this "numbers" module ?

This is standard Python [PEP 3141](https://www.python.org/dev/peps/pep-3141/) see also [the documentation here](https://docs.python.org/3/library/numbers.html).

> why is this better than "k in ZZ" ?

I never said it was better. But it is certainly more Pythonic.



---

archive/issue_comments_415159.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-19T10:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415159",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_415160.json:
```json
{
    "body": "ok, then",
    "created_at": "2020-04-19T10:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415160",
    "user": "chapoton"
}
```

ok, then



---

archive/issue_comments_415161.json:
```json
{
    "body": "Merci.",
    "created_at": "2020-04-19T10:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415161",
    "user": "vdelecroix"
}
```

Merci.



---

archive/issue_comments_415162.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-22T20:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29287",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29287#issuecomment-415162",
    "user": "vbraun"
}
```

Resolution: fixed
