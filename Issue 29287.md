# Issue 29287: bug with rational input in IntegerVectors

Issue created by migration from https://trac.sagemath.org/ticket/29524

Original creator: vdelecroix

Original creation time: 2020-04-17 19:29:14

As reported on [ask](https://ask.sagemath.org/question/50814/error-with-rational-input-in-integervectors/), we have the following unexpected behavior of IntegerVectors:

```
sage: IntegerVectors(2,3).list()
[[2, 0, 0], [1, 1, 0], [1, 0, 1], [0, 2, 0], [0, 1, 1], [0, 0, 2]]
sage: IntegerVectors(2,3/1).list()
[[2, 0, 0], [1, 1, 0]]
```

The relevant code block in the implementation of IntegerVectors seems to be the following:

```
    try:
        return IntegerVectors_nnondescents(n, tuple(k))
    except TypeError:
        pass

    return IntegerVectors_nk(n, k)
```

For k=3/1 one has that tuple(k) does not give a TypeError (as opposed to tuple(3)) and thus the code never tries to interpret k as an integer.


---

Comment by vdelecroix created at 2020-04-17 19:59:47

New commits:


---

Comment by vdelecroix created at 2020-04-17 19:59:47

Changing status from new to needs_review.


---

Comment by git created at 2020-04-18 11:34:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2020-04-18 16:21:40

what is this "numbers" module ? why is this better than "k in ZZ" ?


---

Comment by vdelecroix created at 2020-04-18 16:50:32

Replying to [comment:4 chapoton]:
> what is this "numbers" module ?

This is standard Python [PEP 3141](https://www.python.org/dev/peps/pep-3141/) see also [the documentation here](https://docs.python.org/3/library/numbers.html).

> why is this better than "k in ZZ" ?

I never said it was better. But it is certainly more Pythonic.


---

Comment by chapoton created at 2020-04-19 10:08:55

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-04-19 10:08:55

ok, then


---

Comment by vdelecroix created at 2020-04-19 10:09:50

Merci.


---

Comment by vbraun created at 2020-04-22 20:52:28

Resolution: fixed
