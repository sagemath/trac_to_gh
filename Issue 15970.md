# Issue 15970: FiniteStateMachine._latex_: more options, better documentation

Issue created by migration from https://trac.sagemath.org/ticket/16207

Original creator: cheuberg

Original creation time: 2014-04-22 15:01:08

CC:  dkrenn skropf

Keywords: finite_state_machine

Improved `FiniteStateMachine._latex_`:
* use state iterators instead of lists
* move code format_transition_label
* collect tikz options in array
* typeset final_word_out, introduce relevant options: if a final state has an attribute  final_word_out, this is typeset as a leaving edge. This is in preparation for #16191
* new method `latex_options`: Provide a new convenience function collecting all options for LaTeX output. While all of its functionality can also be achieved by directly setting attributes of `FiniteStateMachine`, `FSMState` and `FSMTransition`, this function also (somewhat) checks its input and serves to collect documentation on all these options.
* Added a section in the introduction to the module explaining how to latex a FiniteStateMachine and pointing to this method for details.
* Similarly, expanded explanations in `setup_latex_preamble`.
* Use `latex_options` in other doctest instead of direct attribute assignment
* new method `default_format_transition_label`: Previously, when no custorm `FiniteStateMachine.format_transition_label` was provided by the user, words have simply typeset by calling latex. As words are always lists, parentheses [ ] have always been printed.
  This new default method typesets words by juxtaposition of their letters, the letters are piped through `format_letter` first. The latter now defaults to latex.
    
  Finally, `format_transition_label` is by default set to `default_format_transition_label` in the hope of providing a sensible default value.
* Convenience Formatting functions for digit problems: When using negative digits, it is quite customary to write e.g. `\overline{1`} instead of `-1` in LaTeX. Introduce `FiniteStateMachine.format_letter_negative` for this purpose.
    
  Furthermore, In digit expansions, digits are frequently processed from the least significant to the most significant position, but it is customary to write the least significant digit at the right-most position. Therefore, the labels have to be reversed. Provide a method `FiniteStateMachine.format_transition_label_reversed` for this purpose.



---

Comment by git created at 2014-04-22 15:20:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cheuberg created at 2014-04-22 15:21:11

Changing status from new to needs_review.


---

Comment by git created at 2014-04-22 15:26:39

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by cheuberg created at 2014-04-22 15:29:32

Merged #16132, otherwise, this will not merge (commit [53a700c](http://git.sagemath.org/sage.git/commit/?id=53a700c61f5f05d3193b712483dbca169055e25a) introduced a new module local variable at the same position where #16132 did the same).


---

Comment by cheuberg created at 2014-04-23 03:13:43

trac's automerge fails. Patch is based on 6.2.beta8, it merges cleanly with 6.2.rc0.


---

Comment by git created at 2014-04-24 13:31:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-04-24 13:50:10

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by cheuberg created at 2014-04-24 13:51:42

merged #16145 in order to avoid a merge conflict and listed #16145 as a dependency.


---

Comment by dkrenn created at 2014-05-02 08:29:13

Changing status from needs_review to positive_review.


---

Comment by dkrenn created at 2014-05-02 08:29:13

finished my review; everything is fine; corrected one PEP8-spacing.
----
New commits:


---

Comment by vbraun created at 2014-05-07 08:30:51

Resolution: fixed
