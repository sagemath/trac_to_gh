# Issue 32503: 2 glucose doctests failing in sage/sat/solvers/dimacs.py

Issue created by migration from https://trac.sagemath.org/ticket/32740

Original creator: slabbe

Original creation time: 2021-10-22 13:17:34

On Ubuntu 18.04 + 9.5.beta4, the command


```
$ sage -t --long --optional=sage,glucose src/sage/sat/solvers/dimacs.py
```


gives


```
Using --optional=glucose,sage
Doctesting 1 file.
sage -t --long --random-seed=96943854363576266601069286152199203424 src/sage/sat/solvers/dimacs.py
**********************************************************************
File "src/sage/sat/solvers/dimacs.py", line 520, in sage.sat.solvers.dimacs.Glucose.__call__
Failed example:
    solve_sat(F, solver=sage.sat.solvers.Glucose)  # optional - glucose
Expected:
    [{k003: 1,
      k002: 1,
      k001: 0,
      k000: 1,
      s003: 1,
      s002: 0,
      s001: 1,
      s000: 0,
      w103: 1,
      w102: 1,
      w101: 1,
      w100: 1,
      x103: 0,
      x102: 0,
      x101: 0,
      x100: 1,
      k103: 1,
      k102: 0,
      k101: 1,
      k100: 1}]
Got:
    [{k003: 0,
      k002: 1,
      k001: 0,
      k000: 1,
      s003: 0,
      s002: 0,
      s001: 1,
      s000: 1,
      w103: 0,
      w102: 0,
      w101: 0,
      w100: 1,
      x103: 1,
      x102: 1,
      x101: 1,
      x100: 1,
      k103: 0,
      k102: 1,
      k101: 1,
      k100: 1}]
**********************************************************************
File "src/sage/sat/solvers/dimacs.py", line 607, in sage.sat.solvers.dimacs.GlucoseSyrup.__call__
Failed example:
    solve_sat(F, solver=sage.sat.solvers.GlucoseSyrup)  # optional - glucose
Expected:
    [{k003: 1,
    k002: 1,
    k001: 0,
    k000: 1,
    s003: 1,
    s002: 0,
    s001: 1,
    s000: 0,
    w103: 1,
    w102: 1,
    w101: 1,
    w100: 1,
    x103: 0,
    x102: 0,
    x101: 0,
    x100: 1,
    k103: 1,
    k102: 0,
    k101: 1,
    k100: 1}]
Got:
    [{k003: 0,
      k002: 0,
      k001: 0,
      k000: 1,
      s003: 1,
      s002: 1,
      s001: 1,
      s000: 1,
      w103: 0,
      w102: 1,
      w101: 0,
      w100: 1,
      x103: 0,
      x102: 0,
      x101: 1,
      x100: 1,
      k103: 0,
      k102: 0,
      k101: 0,
      k100: 1}]
**********************************************************************
2 items had failures:
   1 of  13 in sage.sat.solvers.dimacs.Glucose.__call__
   1 of  13 in sage.sat.solvers.dimacs.GlucoseSyrup.__call__
    [90 tests, 2 failures, 2.60 s]
----------------------------------------------------------------------
sage -t --long --random-seed=96943854363576266601069286152199203424 src/sage/sat/solvers/dimacs.py  # 2 doctests failed
----------------------------------------------------------------------
```



---

Comment by slabbe created at 2021-12-01 20:07:47

New commits:


---

Comment by slabbe created at 2021-12-01 20:07:47

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-12-02 07:26:46

ok, looks good. If you tested it, you can set to positive review


---

Comment by slabbe created at 2021-12-02 09:10:32

Merci Frédéric!


---

Comment by slabbe created at 2021-12-02 09:10:32

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-12-19 11:47:36

Resolution: fixed
