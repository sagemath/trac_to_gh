# Issue 24386: Euclidean spaces and vector calculus

archive/issues_024386.json:
```json
{
    "body": "CC:  tmonteil\n\nKeywords: Euclidean space, vector calculus, gradient, divergence, curl, Laplacian\n\nThis ticket implements Euclidean spaces as Riemannian manifolds diffeomorphic to **R**<sup>n</sup> and equipped with a flat metric. Using the operators introduced in #24622, it provides the standard operators of vector calculus: dot product, norm, cross product, gradient, divergence, curl and Laplacian, along with the standard coordinate systems (Cartesian, spherical, cylindrical, etc.).\n\nIssue created by migration from https://trac.sagemath.org/ticket/24623\n\n",
    "created_at": "2018-01-31T10:08:34Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Euclidean spaces and vector calculus",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24386",
    "user": "https://github.com/egourgoulhon"
}
```
CC:  tmonteil

Keywords: Euclidean space, vector calculus, gradient, divergence, curl, Laplacian

This ticket implements Euclidean spaces as Riemannian manifolds diffeomorphic to **R**<sup>n</sup> and equipped with a flat metric. Using the operators introduced in #24622, it provides the standard operators of vector calculus: dot product, norm, cross product, gradient, divergence, curl and Laplacian, along with the standard coordinate systems (Cartesian, spherical, cylindrical, etc.).

Issue created by migration from https://trac.sagemath.org/ticket/24623





---

archive/issue_comments_341220.json:
```json
{
    "body": "This is a first sketch (not ready yet).\n----\nLast 10 new commits:",
    "created_at": "2018-02-16T17:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341220",
    "user": "https://github.com/egourgoulhon"
}
```

This is a first sketch (not ready yet).
----
Last 10 new commits:



---

archive/issue_comments_341221.json:
```json
{
    "body": "#24792 introduces more flexibility in naming the elements of vector frames, for instance using `(e_x, e_y, e_z)` for a coordinate frame instead of `(d/dx, d/dy, d/dz)`. The current ticket will therefore be build on it for a better user interface.",
    "created_at": "2018-02-20T15:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341221",
    "user": "https://github.com/egourgoulhon"
}
```

#24792 introduces more flexibility in naming the elements of vector frames, for instance using `(e_x, e_y, e_z)` for a coordinate frame instead of `(d/dx, d/dy, d/dz)`. The current ticket will therefore be build on it for a better user interface.



---

archive/issue_comments_341222.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-20T16:02:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341223.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-21T16:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341223",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341224.json:
```json
{
    "body": "I wonder whether some of this (in terms of the div/grad/curl) could be exposed in the symbolic calculus places, at least with some well-placed and well-formed examples that would be understandable to someone teaching Calc III to engineers (in the US framework) who may not be a differential geometer.",
    "created_at": "2018-02-21T22:01:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341224",
    "user": "https://github.com/kcrisman"
}
```

I wonder whether some of this (in terms of the div/grad/curl) could be exposed in the symbolic calculus places, at least with some well-placed and well-formed examples that would be understandable to someone teaching Calc III to engineers (in the US framework) who may not be a differential geometer.



---

archive/issue_comments_341225.json:
```json
{
    "body": "Replying to [comment:8 kcrisman]:\n> I wonder whether some of this (in terms of the div/grad/curl) could be exposed in the symbolic calculus places, at least with some well-placed and well-formed examples that would be understandable to someone teaching Calc III to engineers (in the US framework) who may not be a differential geometer.\n\nIndeed, the aim here is to provide some interface which does not require any knowledge of differential geometry on manifolds. The class `EuclideanSpaceGeneric` does inherit from `PseudoRiemannianManifold`, but the end user has not to know it if he is not interested by this aspect and prefers to focus on vector calculus. Regarding examples, I plan to prepare some Jupyter notebooks and will expose them here, when the ticket is ready for review. Already, you can have a glimpse of the div/grad/curl capabilities introduced in the dependency #24622 in [this notebook](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/vector_calculus.ipynb).",
    "created_at": "2018-02-21T23:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341225",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:8 kcrisman]:
> I wonder whether some of this (in terms of the div/grad/curl) could be exposed in the symbolic calculus places, at least with some well-placed and well-formed examples that would be understandable to someone teaching Calc III to engineers (in the US framework) who may not be a differential geometer.

Indeed, the aim here is to provide some interface which does not require any knowledge of differential geometry on manifolds. The class `EuclideanSpaceGeneric` does inherit from `PseudoRiemannianManifold`, but the end user has not to know it if he is not interested by this aspect and prefers to focus on vector calculus. Regarding examples, I plan to prepare some Jupyter notebooks and will expose them here, when the ticket is ready for review. Already, you can have a glimpse of the div/grad/curl capabilities introduced in the dependency #24622 in [this notebook](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/vector_calculus.ipynb).



---

archive/issue_comments_341226.json:
```json
{
    "body": "That's great!  The reason I brought it up is because folders like `sage/calculus` and `sage/symbolic` might benefit from some good examples that are easy to find.\n\nIs there a way to use something like (say) `vector([x<sup>2+y,y</sup>2+z,z^2+x])` as  \"vector field\" immediately, without much (or any) of the formalism necessary in that notebook?  I think that is how most end users I've talked to about this issue would want it.  See e.g. https://ask.sagemath.org/question/10104/gradient-divergence-curl-and-vector-products/ and ticket:3021 for one version already in Sage - maybe these should be combined somehow, if possible.",
    "created_at": "2018-02-22T12:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341226",
    "user": "https://github.com/kcrisman"
}
```

That's great!  The reason I brought it up is because folders like `sage/calculus` and `sage/symbolic` might benefit from some good examples that are easy to find.

Is there a way to use something like (say) `vector([x<sup>2+y,y</sup>2+z,z^2+x])` as  "vector field" immediately, without much (or any) of the formalism necessary in that notebook?  I think that is how most end users I've talked to about this issue would want it.  See e.g. https://ask.sagemath.org/question/10104/gradient-divergence-curl-and-vector-products/ and ticket:3021 for one version already in Sage - maybe these should be combined somehow, if possible.



---

archive/issue_comments_341227.json:
```json
{
    "body": "Replying to [comment:10 kcrisman]:\n> \n> Is there a way to use something like (say) `vector([x<sup>2+y,y</sup>2+z,z^2+x])` as  \"vector field\" immediately, without much (or any) of the formalism necessary in that notebook?  \n\nYes, this is precisely the aim of the current ticket. The above notebook is still at the level of semi-Riemannian manifolds (i.e. it illustrates only ticket #24622), while the user interface of the current ticket will be much simpler. It should also provide an easy way to change from Cartesian coordinates to e.g. polar or cylindrical ones. \n\n\n>See e.g. https://ask.sagemath.org/question/10104/gradient-divergence-curl-and-vector-products/ and ticket:3021 for one version already in Sage - maybe these should be combined somehow, if possible.\n\nThanks for pointing this version; I was not aware of it.",
    "created_at": "2018-02-22T22:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341227",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:10 kcrisman]:
> 
> Is there a way to use something like (say) `vector([x<sup>2+y,y</sup>2+z,z^2+x])` as  "vector field" immediately, without much (or any) of the formalism necessary in that notebook?  

Yes, this is precisely the aim of the current ticket. The above notebook is still at the level of semi-Riemannian manifolds (i.e. it illustrates only ticket #24622), while the user interface of the current ticket will be much simpler. It should also provide an easy way to change from Cartesian coordinates to e.g. polar or cylindrical ones. 


>See e.g. https://ask.sagemath.org/question/10104/gradient-divergence-curl-and-vector-products/ and ticket:3021 for one version already in Sage - maybe these should be combined somehow, if possible.

Thanks for pointing this version; I was not aware of it.



---

archive/issue_comments_341228.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-02-27T21:09:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341229.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-02T17:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341230.json:
```json
{
    "body": "Here is some status update: functionalities regarding the 2-dimensional case are almost complete, as you can see in this [demo worksheet](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/Euclidean_plane.ipynb) (any feedback is of course appreciated). The 3-dimensional case is under preparation. The generic n-dimensional case, with n=1 or n>=4 is ready, since only Cartesian coordinates will be introduced (by default) in this case. \n\nRegarding a question raised in comment:10, it is now possible to construct a vector field on an Euclidean space from a `vector` of symbolic expressions like this:\n\n```\nv = E.vector_field(vector([-y,x]))\n```\n\nwhere `E` is the underlying Euclidean space.",
    "created_at": "2018-03-02T17:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341230",
    "user": "https://github.com/egourgoulhon"
}
```

Here is some status update: functionalities regarding the 2-dimensional case are almost complete, as you can see in this [demo worksheet](http://nbviewer.jupyter.org/github/egourgoulhon/SageMathTest/blob/master/Worksheets/Euclidean_plane.ipynb) (any feedback is of course appreciated). The 3-dimensional case is under preparation. The generic n-dimensional case, with n=1 or n>=4 is ready, since only Cartesian coordinates will be introduced (by default) in this case. 

Regarding a question raised in comment:10, it is now possible to construct a vector field on an Euclidean space from a `vector` of symbolic expressions like this:

```
v = E.vector_field(vector([-y,x]))
```

where `E` is the underlying Euclidean space.



---

archive/issue_comments_341231.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-06T17:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341232.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-07T16:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341233.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-08T17:31:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341233",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341234.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-09T15:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341234",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341235.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-11T23:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341235",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341236.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-13T15:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-13T16:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341238.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-03-13T23:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341239.json:
```json
{
    "body": "The documentation has been completed in the above commits and new Jupyter notebook examples have been added. This is now ready for review.",
    "created_at": "2018-03-14T09:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341239",
    "user": "https://github.com/egourgoulhon"
}
```

The documentation has been completed in the above commits and new Jupyter notebook examples have been added. This is now ready for review.



---

archive/issue_comments_341240.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-03-14T09:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341240",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_341241.json:
```json
{
    "body": "Replying to [comment:8 kcrisman]:\n> I wonder whether some of this (in terms of the div/grad/curl) could be exposed in the symbolic calculus places, at least with some well-placed and well-formed examples that would be understandable to someone teaching Calc III to engineers (in the US framework) who may not be a differential geometer.\n\nI have added an entry \"Vector Calculus\" to `src/doc/en/reference/calculus/index.rst`. I have also added some `SEEALSO` sections in the definitions of `curl` and `div` in `src/sage/modules/free_module_element.pyx`, as well as in the definition of `gradient` in `src/sage/symbolic/expression.pyx`.",
    "created_at": "2018-03-14T10:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341241",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:8 kcrisman]:
> I wonder whether some of this (in terms of the div/grad/curl) could be exposed in the symbolic calculus places, at least with some well-placed and well-formed examples that would be understandable to someone teaching Calc III to engineers (in the US framework) who may not be a differential geometer.

I have added an entry "Vector Calculus" to `src/doc/en/reference/calculus/index.rst`. I have also added some `SEEALSO` sections in the definitions of `curl` and `div` in `src/sage/modules/free_module_element.pyx`, as well as in the definition of `gradient` in `src/sage/symbolic/expression.pyx`.



---

archive/issue_comments_341242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-27T05:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341243.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-27T05:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341243",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_341244.json:
```json
{
    "body": "Okay, I have made my way through the code. Overall, it looks good.\n\nI remove the function `EuclideanSpace` and just used the `__classcall_private__` mechanism (provided by `UniqueRepresentation`) to make the class `EuclideanSpace` (formerly `EuclideanSpaceGeneric`) the main entry point.\n\nThere is something very subtle happening as *some* of the doctest output for display names of `arctan2(y, x)` needed to be `arctan(y/x)`. I do not understand why nor could I see what was causing this. It is not a blocker issue, but it is an indication that something might not be working properly.\n\nThe rest of my changes were mostly cosmetic.",
    "created_at": "2018-04-27T05:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341244",
    "user": "https://github.com/tscrim"
}
```

Okay, I have made my way through the code. Overall, it looks good.

I remove the function `EuclideanSpace` and just used the `__classcall_private__` mechanism (provided by `UniqueRepresentation`) to make the class `EuclideanSpace` (formerly `EuclideanSpaceGeneric`) the main entry point.

There is something very subtle happening as *some* of the doctest output for display names of `arctan2(y, x)` needed to be `arctan(y/x)`. I do not understand why nor could I see what was causing this. It is not a blocker issue, but it is an indication that something might not be working properly.

The rest of my changes were mostly cosmetic.



---

archive/issue_comments_341245.json:
```json
{
    "body": "Replying to [comment:31 tscrim]:\n> Okay, I have made my way through the code. Overall, it looks good.\n\nThanks a lot for looking into this.\n> \n> I remove the function `EuclideanSpace` and just used the `__classcall_private__` mechanism (provided by `UniqueRepresentation`) to make the class `EuclideanSpace` (formerly `EuclideanSpaceGeneric`) the main entry point.\n\nThis is a nice improvement, thanks!\n> \n> There is something very subtle happening as *some* of the doctest output for display names of `arctan2(y, x)` needed to be `arctan(y/x)`. I do not understand why nor could I see what was causing this. It is not a blocker issue, but it is an indication that something might not be working properly.\n>\n\nIndeed; I will look into this...\n \n> The rest of my changes were mostly cosmetic.\n\nThanks for all of them.",
    "created_at": "2018-04-28T08:58:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341245",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:31 tscrim]:
> Okay, I have made my way through the code. Overall, it looks good.

Thanks a lot for looking into this.
> 
> I remove the function `EuclideanSpace` and just used the `__classcall_private__` mechanism (provided by `UniqueRepresentation`) to make the class `EuclideanSpace` (formerly `EuclideanSpaceGeneric`) the main entry point.

This is a nice improvement, thanks!
> 
> There is something very subtle happening as *some* of the doctest output for display names of `arctan2(y, x)` needed to be `arctan(y/x)`. I do not understand why nor could I see what was causing this. It is not a blocker issue, but it is an indication that something might not be working properly.
>

Indeed; I will look into this...
 
> The rest of my changes were mostly cosmetic.

Thanks for all of them.



---

archive/issue_comments_341246.json:
```json
{
    "body": "I should also say that if you approve of my changes, then you can set a positive review.\n\n(Unfortunately, a number of the doctests are just slow because of feeding calls off to Maxima and the simplifications. Although I don't think there is anything we can do about that.)",
    "created_at": "2018-04-28T09:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341246",
    "user": "https://github.com/tscrim"
}
```

I should also say that if you approve of my changes, then you can set a positive review.

(Unfortunately, a number of the doctests are just slow because of feeding calls off to Maxima and the simplifications. Although I don't think there is anything we can do about that.)



---

archive/issue_comments_341247.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-30T16:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341248.json:
```json
{
    "body": "The above commit fixes the `arctan` issue mentioned in comment:31: it was due to the declaration \n\n```\nsage: E3.<x,t,p> = EuclideanSpace(coordinates='spherical')\n```\n\nin line 591 of `euclidean.py`, which had the side effect of adding `x>0` to Sage's assumptions. Then subsequent doctests involving `arctan2(y, x)` automatically replaced it by `arctan(y/x)`. I changed the variable `x` to `r` in the declaration of `E3` (which btw fits better with standard notation for spherical coordinates) and everything was OK, i.e. all `arctan2(y, x)` could be restored. \n\nMoreover, since it is now possible to skip the dimension as first argument of `EuclideanSpace` in constructions of the type `E.<x,y> = EuclideanSpace()` (thank you for this improvement!), I systematically removed the dimension argument and added a sentence in the documentation about this. \n\nI also took the opportunity of this commit to add a [single-line fix](https://git.sagemath.org/sage.git/diff/src/sage/manifolds/differentiable/vectorfield_module.py?id=220726c07bc00ba69b12a5cc7dc9499d930f1e8c) of a (small) bug in `src/sage/manifolds/differentiable/vectorfield_module.py` revealed after the dependency ticket #24792 was merged. I hope you do not mind.",
    "created_at": "2018-04-30T16:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341248",
    "user": "https://github.com/egourgoulhon"
}
```

The above commit fixes the `arctan` issue mentioned in comment:31: it was due to the declaration 

```
sage: E3.<x,t,p> = EuclideanSpace(coordinates='spherical')
```

in line 591 of `euclidean.py`, which had the side effect of adding `x>0` to Sage's assumptions. Then subsequent doctests involving `arctan2(y, x)` automatically replaced it by `arctan(y/x)`. I changed the variable `x` to `r` in the declaration of `E3` (which btw fits better with standard notation for spherical coordinates) and everything was OK, i.e. all `arctan2(y, x)` could be restored. 

Moreover, since it is now possible to skip the dimension as first argument of `EuclideanSpace` in constructions of the type `E.<x,y> = EuclideanSpace()` (thank you for this improvement!), I systematically removed the dimension argument and added a sentence in the documentation about this. 

I also took the opportunity of this commit to add a [single-line fix](https://git.sagemath.org/sage.git/diff/src/sage/manifolds/differentiable/vectorfield_module.py?id=220726c07bc00ba69b12a5cc7dc9499d930f1e8c) of a (small) bug in `src/sage/manifolds/differentiable/vectorfield_module.py` revealed after the dependency ticket #24792 was merged. I hope you do not mind.



---

archive/issue_comments_341249.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-04-30T22:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341249",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_341250.json:
```json
{
    "body": "Yep, LGTM. Thank you for tracking that down.",
    "created_at": "2018-04-30T22:54:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341250",
    "user": "https://github.com/tscrim"
}
```

Yep, LGTM. Thank you for tracking that down.



---

archive/issue_comments_341251.json:
```json
{
    "body": "Replying to [comment:36 tscrim]:\n> Yep, LGTM. Thank you for tracking that down.\n\nThank you very much for the review, and the associated improvements in the code!",
    "created_at": "2018-05-01T10:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341251",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:36 tscrim]:
> Yep, LGTM. Thank you for tracking that down.

Thank you very much for the review, and the associated improvements in the code!



---

archive/issue_events_062029.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-08T17:26:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24386#event-62029"
}
```



---

archive/issue_comments_341252.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-05-08T17:26:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341252",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_062030.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-05-12T21:47:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24386#event-62030"
}
```



---

archive/issue_comments_341253.json:
```json
{
    "body": "Merged in Sage 8.3.beta0.",
    "created_at": "2018-05-12T21:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24386",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24386#issuecomment-341253",
    "user": "https://github.com/slel"
}
```

Merged in Sage 8.3.beta0.
