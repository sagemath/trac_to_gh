# Issue 12778: update to Pynac 0.2.4

archive/issues_012778.json:
```json
{
    "body": "Assignee: burcin\n\nCC:  titusn benjaminfjones kcrisman jpflori\n\nKeywords: pynac\n\nThere is a new Pynac release which contains fixes to:\n\n* #11155: `abs(pi+I) -> pi + I` (upstream from Alexei Sheplyakov)\n* #11423: `atan2(0,0)` should be undefined (by Volker Braun)\n* #11919: pickling of user defined symbolic functions without custom methods\n* #12303: beta should remain symbolic for exact input\n* a fix to use Python for comparing Python objects wrapped in numerics (by Jean-Pierre Flori\n* complete rewrite of code handling various types of infinity (by Volker Braun)\n\nFollowing the comments [in this thread on sage-devel](https://groups.google.com/d/topic/sage-devel/WCSK5rRn8h8/discussion), the release is available as a tarball:\n\nhttp://sage.math.washington.edu/home/burcin/pynac/pynac-0.2.4.tar.bz2\n\nPatches attached to this ticket need to be applied to the Sage library to update the Pynac interface.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12950\n\n",
    "created_at": "2012-05-15T14:44:13Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "update to Pynac 0.2.4",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12778",
    "user": "burcin"
}
```
Assignee: burcin

CC:  titusn benjaminfjones kcrisman jpflori

Keywords: pynac

There is a new Pynac release which contains fixes to:

* #11155: `abs(pi+I) -> pi + I` (upstream from Alexei Sheplyakov)
* #11423: `atan2(0,0)` should be undefined (by Volker Braun)
* #11919: pickling of user defined symbolic functions without custom methods
* #12303: beta should remain symbolic for exact input
* a fix to use Python for comparing Python objects wrapped in numerics (by Jean-Pierre Flori
* complete rewrite of code handling various types of infinity (by Volker Braun)

Following the comments [in this thread on sage-devel](https://groups.google.com/d/topic/sage-devel/WCSK5rRn8h8/discussion), the release is available as a tarball:

http://sage.math.washington.edu/home/burcin/pynac/pynac-0.2.4.tar.bz2

Patches attached to this ticket need to be applied to the Sage library to update the Pynac interface.

Issue created by migration from https://trac.sagemath.org/ticket/12950





---

archive/issue_comments_153270.json:
```json
{
    "body": "Attachment [trac_12950-pickle_symbolic_function.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pickle_symbolic_function.patch) by burcin created at 2012-05-15 14:47:10",
    "created_at": "2012-05-15T14:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153270",
    "user": "burcin"
}
```

Attachment [trac_12950-pickle_symbolic_function.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pickle_symbolic_function.patch) by burcin created at 2012-05-15 14:47:10



---

archive/issue_comments_153271.json:
```json
{
    "body": "Attachment [trac_11423-atan_error.patch](tarball://root/attachments/some-uuid/ticket12950/trac_11423-atan_error.patch) by burcin created at 2012-05-15 14:48:31",
    "created_at": "2012-05-15T14:48:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153271",
    "user": "burcin"
}
```

Attachment [trac_11423-atan_error.patch](tarball://root/attachments/some-uuid/ticket12950/trac_11423-atan_error.patch) by burcin created at 2012-05-15 14:48:31



---

archive/issue_comments_153272.json:
```json
{
    "body": "Attachment [trac_12950-numeric_comparison_doctest_fixes.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-numeric_comparison_doctest_fixes.patch) by burcin created at 2012-05-15 14:50:55",
    "created_at": "2012-05-15T14:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153272",
    "user": "burcin"
}
```

Attachment [trac_12950-numeric_comparison_doctest_fixes.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-numeric_comparison_doctest_fixes.patch) by burcin created at 2012-05-15 14:50:55



---

archive/issue_comments_153273.json:
```json
{
    "body": "Attachment [trac_12950-symbolic_beta.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-symbolic_beta.patch) by burcin created at 2012-05-15 14:53:14",
    "created_at": "2012-05-15T14:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153273",
    "user": "burcin"
}
```

Attachment [trac_12950-symbolic_beta.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-symbolic_beta.patch) by burcin created at 2012-05-15 14:53:14



---

archive/issue_comments_153274.json:
```json
{
    "body": "Attachment [trac_12950-pynac_infinities.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pynac_infinities.patch) by burcin created at 2012-05-15 14:54:26",
    "created_at": "2012-05-15T14:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153274",
    "user": "burcin"
}
```

Attachment [trac_12950-pynac_infinities.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pynac_infinities.patch) by burcin created at 2012-05-15 14:54:26



---

archive/issue_comments_153275.json:
```json
{
    "body": "Attachment [trac_12950-pynac_infinities_doctest_fixes.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pynac_infinities_doctest_fixes.patch) by burcin created at 2012-05-15 15:06:45",
    "created_at": "2012-05-15T15:06:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153275",
    "user": "burcin"
}
```

Attachment [trac_12950-pynac_infinities_doctest_fixes.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pynac_infinities_doctest_fixes.patch) by burcin created at 2012-05-15 15:06:45



---

archive/issue_comments_153276.json:
```json
{
    "body": "Attachment [trac_12950-psi_evalf.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-psi_evalf.patch) by burcin created at 2012-05-15 15:08:57",
    "created_at": "2012-05-15T15:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153276",
    "user": "burcin"
}
```

Attachment [trac_12950-psi_evalf.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-psi_evalf.patch) by burcin created at 2012-05-15 15:08:57



---

archive/issue_comments_153277.json:
```json
{
    "body": "This also fixes #9547 and includes a doctest. That ticket should be closed once this is merged.",
    "created_at": "2012-05-15T22:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153277",
    "user": "burcin"
}
```

This also fixes #9547 and includes a doctest. That ticket should be closed once this is merged.



---

archive/issue_comments_153278.json:
```json
{
    "body": "I've made a tentative spkg available at http://perso.telecom-paristech.fr/~flori/sage/pynac-0.2.4.spkg  which adds an .hgignore file to exclude the src directory from tracking.\n\nI've had a quick look at the patches which look good overall.\nI'll post a patch fixing some (mainly very minor) typos asap.",
    "created_at": "2012-05-23T16:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153278",
    "user": "jpflori"
}
```

I've made a tentative spkg available at http://perso.telecom-paristech.fr/~flori/sage/pynac-0.2.4.spkg  which adds an .hgignore file to exclude the src directory from tracking.

I've had a quick look at the patches which look good overall.
I'll post a patch fixing some (mainly very minor) typos asap.



---

archive/issue_comments_153279.json:
```json
{
    "body": "I'm currently running \"make ptest\" (on sage-5.0 on an ubuntu 12.04 amd64) and there are at least some new problems in revolutio_plot3d (or something like that) because atan2(0,0) now raises an error.",
    "created_at": "2012-05-23T16:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153279",
    "user": "jpflori"
}
```

I'm currently running "make ptest" (on sage-5.0 on an ubuntu 12.04 amd64) and there are at least some new problems in revolutio_plot3d (or something like that) because atan2(0,0) now raises an error.



---

archive/issue_comments_153280.json:
```json
{
    "body": "I also got two failures in sage/stats/basic_stats due to the new ordering of numerics (I guess).",
    "created_at": "2012-05-23T16:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153280",
    "user": "jpflori"
}
```

I also got two failures in sage/stats/basic_stats due to the new ordering of numerics (I guess).



---

archive/issue_comments_153281.json:
```json
{
    "body": "Oh, so now I'm a little lost.\nSome patches are included here and other on the original tickets...\nIt's surely logical, but I just discovered that.\n\nAnyway, the dependencies between the tickets should be clearly stated and written into the corresponding trac field.\nFor example, do we really want to merge #11919 now? cos I don't think reviewing this ticket will take ages...\nOr, this ticket can not be merged without fixing the atan2 stuff causing failures in revolution_plot3d which is in fact also mentioned in the comments of #11423 .\nOr, do we really want the three lines patch of #11155 there with #12950 as a dependency rather than here?",
    "created_at": "2012-05-23T16:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153281",
    "user": "jpflori"
}
```

Oh, so now I'm a little lost.
Some patches are included here and other on the original tickets...
It's surely logical, but I just discovered that.

Anyway, the dependencies between the tickets should be clearly stated and written into the corresponding trac field.
For example, do we really want to merge #11919 now? cos I don't think reviewing this ticket will take ages...
Or, this ticket can not be merged without fixing the atan2 stuff causing failures in revolution_plot3d which is in fact also mentioned in the comments of #11423 .
Or, do we really want the three lines patch of #11155 there with #12950 as a dependency rather than here?



---

archive/issue_comments_153282.json:
```json
{
    "body": "Fix for revolution_plot3d",
    "created_at": "2012-05-23T17:32:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153282",
    "user": "jpflori"
}
```

Fix for revolution_plot3d



---

archive/issue_comments_153283.json:
```json
{
    "body": "Attachment [trac_12950-revolution_plot3d.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-revolution_plot3d.patch) by burcin created at 2012-05-23 17:35:12\n\nThanks for looking into this!\n\nReplying to [comment:9 jpflori]:\n> Oh, so now I'm a little lost.\n> Some patches are included here and other on the original tickets...\n> It's surely logical, but I just discovered that.\n\nI tried to put all the patches required to make the new version work with Sage on this ticket. If I didn't screw up, the rest should be nonessential, doctests, etc. It used to be a major hassle to create patches for each ticket separately, upload them, then make a ticket with an spkg etc. I think this way is easier for everyone.\n\n> Anyway, the dependencies between the tickets should be clearly stated and written into the corresponding trac field.\n> For example, do we really want to merge #11919 now? cos I don't think reviewing this ticket will take ages...\n\nI don't think the patch attached to #11919 is necessary. But I'm reluctant to make changes to that ticket while this is being reviewed.\n\n> Or, this ticket can not be merged without fixing the atan2 stuff causing failures in revolution_plot3d which is in fact also mentioned in the comments of #11423 .\n\nThis should depend on the yet to be opened ticket mentioned in comment:6:ticket:11423. But, changing the plot3d stuff to handle errors in the numerical evaluation phase is a big change (AFAIK, Titus actually had a go at it.), and it is very much independent of a Pynac release, apart from the minor issue that one of the doctests there happened to call `atan2()`.\n\n> Or, do we really want the three lines patch of #11155 there with #12950 as a dependency rather than here?\n\nThe doctests on #11155 are minor, so we left that patch out of this ticket. Just now, I made that ticket depend on this one and gave it a positive review.",
    "created_at": "2012-05-23T17:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153283",
    "user": "burcin"
}
```

Attachment [trac_12950-revolution_plot3d.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-revolution_plot3d.patch) by burcin created at 2012-05-23 17:35:12

Thanks for looking into this!

Replying to [comment:9 jpflori]:
> Oh, so now I'm a little lost.
> Some patches are included here and other on the original tickets...
> It's surely logical, but I just discovered that.

I tried to put all the patches required to make the new version work with Sage on this ticket. If I didn't screw up, the rest should be nonessential, doctests, etc. It used to be a major hassle to create patches for each ticket separately, upload them, then make a ticket with an spkg etc. I think this way is easier for everyone.

> Anyway, the dependencies between the tickets should be clearly stated and written into the corresponding trac field.
> For example, do we really want to merge #11919 now? cos I don't think reviewing this ticket will take ages...

I don't think the patch attached to #11919 is necessary. But I'm reluctant to make changes to that ticket while this is being reviewed.

> Or, this ticket can not be merged without fixing the atan2 stuff causing failures in revolution_plot3d which is in fact also mentioned in the comments of #11423 .

This should depend on the yet to be opened ticket mentioned in comment:6:ticket:11423. But, changing the plot3d stuff to handle errors in the numerical evaluation phase is a big change (AFAIK, Titus actually had a go at it.), and it is very much independent of a Pynac release, apart from the minor issue that one of the doctests there happened to call `atan2()`.

> Or, do we really want the three lines patch of #11155 there with #12950 as a dependency rather than here?

The doctests on #11155 are minor, so we left that patch out of this ticket. Just now, I made that ticket depend on this one and gave it a positive review.



---

archive/issue_comments_153284.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-05-23T17:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153284",
    "user": "burcin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_153285.json:
```json
{
    "body": "I've just uploaded a fix for the revolution_plot3d problem.\n\nWhen the revolution axis goes through (0,0,0), the previous behaviour was correct although obtained through the general formula which in fact should not have made sense.\nIn fact the (0,0,0) case is the simplest one, no \"complicated\" formula for the to be drawn surface has to be deduced from the curve formula.\n \nThe proposed fix is to treat the special case (0,0,0) separately as far as the phase calculation is concerned.\n\n(PS: We posted more or less at the same time, so this post might seem strange)",
    "created_at": "2012-05-23T17:39:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153285",
    "user": "jpflori"
}
```

I've just uploaded a fix for the revolution_plot3d problem.

When the revolution axis goes through (0,0,0), the previous behaviour was correct although obtained through the general formula which in fact should not have made sense.
In fact the (0,0,0) case is the simplest one, no "complicated" formula for the to be drawn surface has to be deduced from the curve formula.
 
The proposed fix is to treat the special case (0,0,0) separately as far as the phase calculation is concerned.

(PS: We posted more or less at the same time, so this post might seem strange)



---

archive/issue_comments_153286.json:
```json
{
    "body": "A little concern about the effect of the new numeric ordering, if I understand correctly what happens (not really sure about the initialization of the complex I).\nNow the complex I is compared at the Python level.\nThere it is a root of x2+1, and Sage always returns 1 when you compare whatever*I and whatever_different*I, that is : 5*I > 3*I is true, but so is I > 3*I.\n\nThis explains the changes in some doctest output, but I'm concerned that this will surely lead to problems in the pynac internal ordering...",
    "created_at": "2012-05-24T07:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153286",
    "user": "jpflori"
}
```

A little concern about the effect of the new numeric ordering, if I understand correctly what happens (not really sure about the initialization of the complex I).
Now the complex I is compared at the Python level.
There it is a root of x2+1, and Sage always returns 1 when you compare whatever*I and whatever_different*I, that is : 5*I > 3*I is true, but so is I > 3*I.

This explains the changes in some doctest output, but I'm concerned that this will surely lead to problems in the pynac internal ordering...



---

archive/issue_comments_153287.json:
```json
{
    "body": "Further rants: in fact in (quadratic) number fields at least we always have whatever > whatever else true and whatever < whatever else false.\nIndeed, the _cmp_ functions test for equality, that is completely understandable because there's no reason to decide that a root of a polynomial is \"positive\" or \"negative\" without chosing an embedding somewhere...\n\nBut I is defined with embedding=CC.gen(), i.e. the usual definition, and so we have CC(I) considered as \"positive\" (no surprise here...).",
    "created_at": "2012-05-24T07:50:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153287",
    "user": "jpflori"
}
```

Further rants: in fact in (quadratic) number fields at least we always have whatever > whatever else true and whatever < whatever else false.
Indeed, the _cmp_ functions test for equality, that is completely understandable because there's no reason to decide that a root of a polynomial is "positive" or "negative" without chosing an embedding somewhere...

But I is defined with embedding=CC.gen(), i.e. the usual definition, and so we have CC(I) considered as "positive" (no surprise here...).



---

archive/issue_comments_153288.json:
```json
{
    "body": "I think that the above could or even should be handled in a separate ticket (#9880 for example...).\n\nIn a few minutes, I'll upload a reviewer patch fixing one or two very minor typos and another patch fixing the two other doctests modified by the complex I ordering changes.\n\nI'll also upload new versions of all the other patches so that the commit messages include the trac ticket number.",
    "created_at": "2012-05-24T08:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153288",
    "user": "jpflori"
}
```

I think that the above could or even should be handled in a separate ticket (#9880 for example...).

In a few minutes, I'll upload a reviewer patch fixing one or two very minor typos and another patch fixing the two other doctests modified by the complex I ordering changes.

I'll also upload new versions of all the other patches so that the commit messages include the trac ticket number.



---

archive/issue_comments_153289.json:
```json
{
    "body": "Attachment [trac_11423-atan_error-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_11423-atan_error-trac.patch) by jpflori created at 2012-05-24 08:31:16\n\nFurther doctests fixes.",
    "created_at": "2012-05-24T08:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153289",
    "user": "jpflori"
}
```

Attachment [trac_11423-atan_error-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_11423-atan_error-trac.patch) by jpflori created at 2012-05-24 08:31:16

Further doctests fixes.



---

archive/issue_comments_153290.json:
```json
{
    "body": "Attachment [trac_12950-pickle_symbolic_function-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pickle_symbolic_function-trac.patch) by jpflori created at 2012-05-24 08:31:27",
    "created_at": "2012-05-24T08:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153290",
    "user": "jpflori"
}
```

Attachment [trac_12950-pickle_symbolic_function-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pickle_symbolic_function-trac.patch) by jpflori created at 2012-05-24 08:31:27



---

archive/issue_comments_153291.json:
```json
{
    "body": "Attachment [trac_12950-psi_evalf-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-psi_evalf-trac.patch) by jpflori created at 2012-05-24 08:31:38",
    "created_at": "2012-05-24T08:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153291",
    "user": "jpflori"
}
```

Attachment [trac_12950-psi_evalf-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-psi_evalf-trac.patch) by jpflori created at 2012-05-24 08:31:38



---

archive/issue_comments_153292.json:
```json
{
    "body": "Attachment [trac_12950-pynac_infinities_doctest_fixes-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pynac_infinities_doctest_fixes-trac.patch) by jpflori created at 2012-05-24 08:31:54",
    "created_at": "2012-05-24T08:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153292",
    "user": "jpflori"
}
```

Attachment [trac_12950-pynac_infinities_doctest_fixes-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pynac_infinities_doctest_fixes-trac.patch) by jpflori created at 2012-05-24 08:31:54



---

archive/issue_comments_153293.json:
```json
{
    "body": "Attachment [trac_12950-pynac_infinities-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pynac_infinities-trac.patch) by jpflori created at 2012-05-24 08:32:02",
    "created_at": "2012-05-24T08:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153293",
    "user": "jpflori"
}
```

Attachment [trac_12950-pynac_infinities-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-pynac_infinities-trac.patch) by jpflori created at 2012-05-24 08:32:02



---

archive/issue_comments_153294.json:
```json
{
    "body": "Attachment [trac_12950-symbolic_beta-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-symbolic_beta-trac.patch) by jpflori created at 2012-05-24 08:32:37\n\nReviewer patch; minor typos",
    "created_at": "2012-05-24T08:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153294",
    "user": "jpflori"
}
```

Attachment [trac_12950-symbolic_beta-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-symbolic_beta-trac.patch) by jpflori created at 2012-05-24 08:32:37

Reviewer patch; minor typos



---

archive/issue_comments_153295.json:
```json
{
    "body": "Attachment [trac_12950-reviewer.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-reviewer.patch) by jpflori created at 2012-05-24 08:36:58",
    "created_at": "2012-05-24T08:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153295",
    "user": "jpflori"
}
```

Attachment [trac_12950-reviewer.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-reviewer.patch) by jpflori created at 2012-05-24 08:36:58



---

archive/issue_comments_153296.json:
```json
{
    "body": "Attachment [trac_12950-numeric_comparison_doctest_fixes-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-numeric_comparison_doctest_fixes-trac.patch) by jpflori created at 2012-05-24 08:37:53",
    "created_at": "2012-05-24T08:37:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153296",
    "user": "jpflori"
}
```

Attachment [trac_12950-numeric_comparison_doctest_fixes-trac.patch](tarball://root/attachments/some-uuid/ticket12950/trac_12950-numeric_comparison_doctest_fixes-trac.patch) by jpflori created at 2012-05-24 08:37:53



---

archive/issue_comments_153297.json:
```json
{
    "body": "I think my work here is done.\nI positively review Burcin and others' patches.\n\nSo if one is ok with the packaging I made and the few other patches I uploaded, this can get positive review.",
    "created_at": "2012-05-24T08:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153297",
    "user": "jpflori"
}
```

I think my work here is done.
I positively review Burcin and others' patches.

So if one is ok with the packaging I made and the few other patches I uploaded, this can get positive review.



---

archive/issue_comments_153298.json:
```json
{
    "body": "Replying to [comment:14 jpflori]:\n> I think that the above could or even should be handled in a separate ticket (#9880 for example...).\n\nThis is actually #7160. It causes a lot of other problems in Pynac as well.\n\n\nI give a positive review to Jean-Pierre's patches. The spkg still needs to be reviewed. Any volunteers?",
    "created_at": "2012-05-24T09:33:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153298",
    "user": "burcin"
}
```

Replying to [comment:14 jpflori]:
> I think that the above could or even should be handled in a separate ticket (#9880 for example...).

This is actually #7160. It causes a lot of other problems in Pynac as well.


I give a positive review to Jean-Pierre's patches. The spkg still needs to be reviewed. Any volunteers?



---

archive/issue_comments_153299.json:
```json
{
    "body": "Started reviewing the spkg. The package itself looks good, installs successfully, and with the attached patches applied, sage passes a subset of tests:\n\n\n```\n   passes: ../../sage -t sage/symbolic/*.py\n   passes: ../../sage -t sage/symbolic/*.pyx\n   passes: ../../sage -t sage/functions/*.py\n```\n\n\nI'm running all tests now, will report when complete.",
    "created_at": "2012-05-25T05:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153299",
    "user": "benjaminfjones"
}
```

Started reviewing the spkg. The package itself looks good, installs successfully, and with the attached patches applied, sage passes a subset of tests:


```
   passes: ../../sage -t sage/symbolic/*.py
   passes: ../../sage -t sage/symbolic/*.pyx
   passes: ../../sage -t sage/functions/*.py
```


I'm running all tests now, will report when complete.



---

archive/issue_comments_153300.json:
```json
{
    "body": "Changing keywords from \"pynac\" to \"pynac sd40.5\".",
    "created_at": "2012-05-25T05:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153300",
    "user": "benjaminfjones"
}
```

Changing keywords from "pynac" to "pynac sd40.5".



---

archive/issue_comments_153301.json:
```json
{
    "body": "All tests pass, I checked the hg log and indeed, all relevant changes appear to come from upstream. The spkg unpacks fine, and I can successfully recreate it using the `sage-pkg` script. \n\nEverything looks good, so I'll give the spkg a positive review.",
    "created_at": "2012-05-25T05:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153301",
    "user": "benjaminfjones"
}
```

All tests pass, I checked the hg log and indeed, all relevant changes appear to come from upstream. The spkg unpacks fine, and I can successfully recreate it using the `sage-pkg` script. 

Everything looks good, so I'll give the spkg a positive review.



---

archive/issue_comments_153302.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-05-25T05:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153302",
    "user": "benjaminfjones"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_153303.json:
```json
{
    "body": "While updating #11143 I ran into the following issue which occurs when the patches here and the new pynac spkg are installed:\n\n\n```\nsage: integral(e^(-x)*log(x+1), x, 0, oo)\n...\nValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before integral evaluation *may* help (example of legal syntax is 'as\nsume(Infinity>0)', see `assume?` for more details)\nIs  Infinity  positive, negative, or zero?\n```\n\n\nIt looks like there is something going on with the conversion of `oo` to `inf` in maxima.\n\n----\n\nAnother comment: why are the instances of `Infinity` in the doctest patches here changed to `infinity`. Isn't the upper case `Infinity` the \"canonical\" Sage infinity?",
    "created_at": "2012-05-25T16:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153303",
    "user": "benjaminfjones"
}
```

While updating #11143 I ran into the following issue which occurs when the patches here and the new pynac spkg are installed:


```
sage: integral(e^(-x)*log(x+1), x, 0, oo)
...
ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before integral evaluation *may* help (example of legal syntax is 'as
sume(Infinity>0)', see `assume?` for more details)
Is  Infinity  positive, negative, or zero?
```


It looks like there is something going on with the conversion of `oo` to `inf` in maxima.

----

Another comment: why are the instances of `Infinity` in the doctest patches here changed to `infinity`. Isn't the upper case `Infinity` the "canonical" Sage infinity?



---

archive/issue_comments_153304.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-06-02T12:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153304",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_153305.json:
```json
{
    "body": "Replying to [comment:20 benjaminfjones]:\n> While updating #11143 I ran into the following issue which occurs when the patches here and the new pynac spkg are installed:\n> \n> {{{\n> sage: integral(e^(-x)*log(x+1), x, 0, oo)\n> ...\n> ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before integral evaluation *may* help (example of legal syntax is 'as\n> sume(Infinity>0)', see `assume?` for more details)\n> Is  Infinity  positive, negative, or zero?\n> }}}\n> \n> It looks like there is something going on with the conversion of `oo` to `inf` in maxima.\n> \n> ----\n> \n> Another comment: why are the instances of `Infinity` in the doctest patches here changed to `infinity`. Isn't the upper case `Infinity` the \"canonical\" Sage infinity? \n\nDid you want to open a ticket about these, or was this just a point of clarification?\n\n----\n\nOn an unrelated note, I'm a little confused as to why all the patches ended up here.  I understand that this is convenient, but what happens then is that a whole bunch of tickets are closed as \"sage-invalid/dup\" and really they weren't dups at all, they just happened to be fixed by this spkg.  \n\nAt any rate, I recommend making sure that such tickets (like #11423, #9547, #12303) are given a normal milestone - even though the fix is here, that didn't make the ticket and its authors/reviewers less valid somehow.",
    "created_at": "2012-06-29T12:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153305",
    "user": "kcrisman"
}
```

Replying to [comment:20 benjaminfjones]:
> While updating #11143 I ran into the following issue which occurs when the patches here and the new pynac spkg are installed:
> 
> {{{
> sage: integral(e^(-x)*log(x+1), x, 0, oo)
> ...
> ValueError: Computation failed since Maxima requested additional constraints; using the 'assume' command before integral evaluation *may* help (example of legal syntax is 'as
> sume(Infinity>0)', see `assume?` for more details)
> Is  Infinity  positive, negative, or zero?
> }}}
> 
> It looks like there is something going on with the conversion of `oo` to `inf` in maxima.
> 
> ----
> 
> Another comment: why are the instances of `Infinity` in the doctest patches here changed to `infinity`. Isn't the upper case `Infinity` the "canonical" Sage infinity? 

Did you want to open a ticket about these, or was this just a point of clarification?

----

On an unrelated note, I'm a little confused as to why all the patches ended up here.  I understand that this is convenient, but what happens then is that a whole bunch of tickets are closed as "sage-invalid/dup" and really they weren't dups at all, they just happened to be fixed by this spkg.  

At any rate, I recommend making sure that such tickets (like #11423, #9547, #12303) are given a normal milestone - even though the fix is here, that didn't make the ticket and its authors/reviewers less valid somehow.



---

archive/issue_comments_153306.json:
```json
{
    "body": "Replying to [comment:24 kcrisman]:\n> On an unrelated note, I'm a little confused as to why all the patches ended up here.  I understand that this is convenient, but what happens then is that a whole bunch of tickets are closed as \"sage-invalid/dup\" and really they weren't dups at all, they just happened to be fixed by this spkg.  \n> \n> At any rate, I recommend making sure that such tickets (like #11423, #9547, #12303) are given a normal milestone - even though the fix is here, that didn't make the ticket and its authors/reviewers less valid somehow.\n\nFeel free to change them back to a different milestone. I also hesitated before changing to duplicate/invalid/wontfix. I just needed a way to indicate to Jeroen that these are tickets that can be closed without any work. I also tried to make the authors of those tickets were acknowledged here.",
    "created_at": "2012-06-29T13:07:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153306",
    "user": "burcin"
}
```

Replying to [comment:24 kcrisman]:
> On an unrelated note, I'm a little confused as to why all the patches ended up here.  I understand that this is convenient, but what happens then is that a whole bunch of tickets are closed as "sage-invalid/dup" and really they weren't dups at all, they just happened to be fixed by this spkg.  
> 
> At any rate, I recommend making sure that such tickets (like #11423, #9547, #12303) are given a normal milestone - even though the fix is here, that didn't make the ticket and its authors/reviewers less valid somehow.

Feel free to change them back to a different milestone. I also hesitated before changing to duplicate/invalid/wontfix. I just needed a way to indicate to Jeroen that these are tickets that can be closed without any work. I also tried to make the authors of those tickets were acknowledged here.



---

archive/issue_comments_153307.json:
```json
{
    "body": "> > On an unrelated note, I'm a little confused as to why all the patches ended up here.  I understand that this is convenient, but what happens then is that a whole bunch of tickets are closed as \"sage-invalid/dup\" and really they weren't dups at all, they just happened to be fixed by this spkg.  \n> > \n> > At any rate, I recommend making sure that such tickets (like #11423, #9547, #12303) are given a normal milestone - even though the fix is here, that didn't make the ticket and its authors/reviewers less valid somehow.\n> \n> Feel free to change them back to a different milestone. I also hesitated before changing to duplicate/invalid/wontfix. I just needed a way to indicate to Jeroen that these are tickets that can be closed without any work. I also tried to make the authors of those tickets were acknowledged here.\n\nI sort of figured that was the situation - there is no perfect workflow for all needs, by Arrow's Theorem, and it's not like you don't have enough to do!  I'll check if any changes would be required.",
    "created_at": "2012-06-29T13:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12778#issuecomment-153307",
    "user": "kcrisman"
}
```

> > On an unrelated note, I'm a little confused as to why all the patches ended up here.  I understand that this is convenient, but what happens then is that a whole bunch of tickets are closed as "sage-invalid/dup" and really they weren't dups at all, they just happened to be fixed by this spkg.  
> > 
> > At any rate, I recommend making sure that such tickets (like #11423, #9547, #12303) are given a normal milestone - even though the fix is here, that didn't make the ticket and its authors/reviewers less valid somehow.
> 
> Feel free to change them back to a different milestone. I also hesitated before changing to duplicate/invalid/wontfix. I just needed a way to indicate to Jeroen that these are tickets that can be closed without any work. I also tried to make the authors of those tickets were acknowledged here.

I sort of figured that was the situation - there is no perfect workflow for all needs, by Arrow's Theorem, and it's not like you don't have enough to do!  I'll check if any changes would be required.
