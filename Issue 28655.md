# Issue 28655: Drop packages backports_ssl_match_hostname and certifi

Issue created by migration from https://trac.sagemath.org/ticket/28892

Original creator: mjo

Original creation time: 2019-12-16 20:17:47

CC:  dimpase @jcamp0x2a

These two packages are dependencies of tornado:


```
~/src/sage.git/build/pkgs $ grep -rl backports_ssl_match_hostname
tornado/dependencies
backports_ssl_match_hostname/SPKG.txt
backports_ssl_match_hostname/checksums.ini

~/src/sage.git/build/pkgs $ grep -rl 'certifi[^ce]'
certifi/checksums.ini
certifi/spkg-install
tornado/dependencies
```


However, they are no longer necessary. The setup.py file shipped with tornado-4.5.2 indicates this:


```
if sys.version_info < (2, 7, 9):
    install_requires.append('backports.ssl_match_hostname')
if sys.version_info < (3, 4):
    install_requires.append('singledispatch')
    # Certifi is also optional on 2.7.9+, although making our dependencies
    # conditional on micro version numbers seems like a bad idea
    # until we have more declarative metadata.
    install_requires.append('certifi')
```


So, backports_ssl_match_hostname can go immediately, because our versions of python are new enough. And certifi should be dead weight too, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,


```
-    install_requires.append('certifi')
+    # install_requires.append('certifi')
```


There's also a new bugfix version 4.5.3 of tornado that I guess we should update to at the same time. There are newer major releases, but they likely require more work.


---

Comment by embray created at 2020-01-06 14:10:03

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by mkoeppe created at 2020-08-13 17:19:42

`backports_ssl_match_hostname` was removed in #29754, so I have narrowed the ticket to `certifi`.

`tornado` is updated in #26919.
It should be checked what the situation with `certifi` is in the new version.


---

Comment by mkoeppe created at 2020-08-14 20:51:54

Also matplotlib 3.3.1 (#30358) wants `certifi`.


---

Comment by mkoeppe created at 2020-08-14 20:51:54

Changing status from new to needs_review.


---

Comment by mjo created at 2020-08-14 21:28:12

It looks like we could comment out the dependency in matplotlib, too, but I'm not volunteering to do it so I rescind the suggestion.


---

Comment by mjo created at 2020-08-14 21:28:12

Changing status from needs_review to positive_review.


---

Comment by embray created at 2020-08-31 15:31:48

Resolution: wontfix
