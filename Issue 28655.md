# Issue 28655: Drop packages backports_ssl_match_hostname and certifi

archive/issues_028655.json:
```json
{
    "body": "CC:  @dimpase @jcamp0x2a\n\nThese two packages are dependencies of tornado:\n\n\n```\n~/src/sage.git/build/pkgs $ grep -rl backports_ssl_match_hostname\ntornado/dependencies\nbackports_ssl_match_hostname/SPKG.txt\nbackports_ssl_match_hostname/checksums.ini\n\n~/src/sage.git/build/pkgs $ grep -rl 'certifi[^ce]'\ncertifi/checksums.ini\ncertifi/spkg-install\ntornado/dependencies\n```\n\n\nHowever, they are no longer necessary. The setup.py file shipped with tornado-4.5.2 indicates this:\n\n\n```\nif sys.version_info < (2, 7, 9):\n    install_requires.append('backports.ssl_match_hostname')\nif sys.version_info < (3, 4):\n    install_requires.append('singledispatch')\n    # Certifi is also optional on 2.7.9+, although making our dependencies\n    # conditional on micro version numbers seems like a bad idea\n    # until we have more declarative metadata.\n    install_requires.append('certifi')\n```\n\n\nSo, backports_ssl_match_hostname can go immediately, because our versions of python are new enough. And certifi should be dead weight too, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,\n\n\n```\n-    install_requires.append('certifi')\n+    # install_requires.append('certifi')\n```\n\n\nThere's also a new bugfix version 4.5.3 of tornado that I guess we should update to at the same time. There are newer major releases, but they likely require more work.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28892\n\n",
    "created_at": "2019-12-16T20:17:47Z",
    "labels": [
        "packages: standard",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Drop packages backports_ssl_match_hostname and certifi",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28655",
    "user": "@orlitzky"
}
```
CC:  @dimpase @jcamp0x2a

These two packages are dependencies of tornado:


```
~/src/sage.git/build/pkgs $ grep -rl backports_ssl_match_hostname
tornado/dependencies
backports_ssl_match_hostname/SPKG.txt
backports_ssl_match_hostname/checksums.ini

~/src/sage.git/build/pkgs $ grep -rl 'certifi[^ce]'
certifi/checksums.ini
certifi/spkg-install
tornado/dependencies
```


However, they are no longer necessary. The setup.py file shipped with tornado-4.5.2 indicates this:


```
if sys.version_info < (2, 7, 9):
    install_requires.append('backports.ssl_match_hostname')
if sys.version_info < (3, 4):
    install_requires.append('singledispatch')
    # Certifi is also optional on 2.7.9+, although making our dependencies
    # conditional on micro version numbers seems like a bad idea
    # until we have more declarative metadata.
    install_requires.append('certifi')
```


So, backports_ssl_match_hostname can go immediately, because our versions of python are new enough. And certifi should be dead weight too, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,


```
-    install_requires.append('certifi')
+    # install_requires.append('certifi')
```


There's also a new bugfix version 4.5.3 of tornado that I guess we should update to at the same time. There are newer major releases, but they likely require more work.

Issue created by migration from https://trac.sagemath.org/ticket/28892





---

archive/issue_comments_404722.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28655#issuecomment-404722",
    "user": "@embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_404723.json:
```json
{
    "body": "Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28655#issuecomment-404723",
    "user": "@mkoeppe"
}
```

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_404724.json:
```json
{
    "body": "`backports_ssl_match_hostname` was removed in #29754, so I have narrowed the ticket to `certifi`.\n\n`tornado` is updated in #26919.\nIt should be checked what the situation with `certifi` is in the new version.",
    "created_at": "2020-08-13T17:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28655#issuecomment-404724",
    "user": "@mkoeppe"
}
```

`backports_ssl_match_hostname` was removed in #29754, so I have narrowed the ticket to `certifi`.

`tornado` is updated in #26919.
It should be checked what the situation with `certifi` is in the new version.



---

archive/issue_comments_404725.json:
```json
{
    "body": "Also matplotlib 3.3.1 (#30358) wants `certifi`.",
    "created_at": "2020-08-14T20:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28655#issuecomment-404725",
    "user": "@mkoeppe"
}
```

Also matplotlib 3.3.1 (#30358) wants `certifi`.



---

archive/issue_comments_404726.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-14T20:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28655#issuecomment-404726",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_404727.json:
```json
{
    "body": "It looks like we could comment out the dependency in matplotlib, too, but I'm not volunteering to do it so I rescind the suggestion.",
    "created_at": "2020-08-14T21:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28655#issuecomment-404727",
    "user": "@orlitzky"
}
```

It looks like we could comment out the dependency in matplotlib, too, but I'm not volunteering to do it so I rescind the suggestion.



---

archive/issue_comments_404728.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-14T21:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28655#issuecomment-404728",
    "user": "@orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_404729.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2020-08-31T15:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28655",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28655#issuecomment-404729",
    "user": "@embray"
}
```

Resolution: wontfix
