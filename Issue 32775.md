# Issue 32775: But in bitset_copy_flex

Issue created by migration from https://trac.sagemath.org/ticket/33012

Original creator: @kliem

Original creation time: 2021-12-12 07:14:51

CC:  tscrim

`bitset_copy_flex` doesn't work at all, due to a sign error.

The following gives a segmentation fault:


```
sage: polytopes.hypercube(8).combinatorial_polyhedron().pyramid()
```


The problem is that we are trying to copy a bitset with 256 bits to a bitset with 257 bits. This bitset is guaranteed to have more limbs and the bug shows.


---

Comment by @kliem created at 2021-12-12 07:17:48

New commits:


---

Comment by @kliem created at 2021-12-12 07:17:48

Changing status from new to needs_review.


---

Comment by @kliem created at 2021-12-12 07:18:57

Unfortunatly, this seems not to be issue causing #32827.


---

Comment by tscrim created at 2021-12-13 01:15:22

Still is a good fix. LGTM.


---

Comment by tscrim created at 2021-12-13 01:15:22

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2021-12-13 07:42:32

Thanks. Definitely good to fix it. Just wanted to remark that we shouldn't hope that this fixes #32827.


---

Comment by vbraun created at 2021-12-21 23:16:42

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2021-12-21 23:16:42

On 32-bit: 

```
sage -t --long --random-seed=156231420724284516434849771117684755838 src/sage/data_structures/bitset_base.pxd  # Timed out
```



---

Comment by git created at 2021-12-22 07:46:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2021-12-22 07:47:50

The bug seems unrelated and might just be #32827 showing off again.

I simplified the doctest.


---

Comment by @kliem created at 2021-12-22 07:47:50

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2021-12-22 09:23:01

LGTM.


---

Comment by tscrim created at 2021-12-22 09:23:01

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-12-22 18:05:44

I've added #32827 as a dependency


---

Comment by vbraun created at 2021-12-23 20:09:59

That was with #32827 applied...


---

Comment by vbraun created at 2021-12-28 21:15:40

Resolution: fixed
