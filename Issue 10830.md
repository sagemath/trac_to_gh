# Issue 10830: missing terms in factorization of multivariate polynomials

archive/issues_010830.json:
```json
{
    "body": "Assignee: @malb\n\nCC:  @malb simonking\n\n\n```\nsage: R.<x,y> = GF(2)[]\nsage: p = x^3*y^7 + x^2*y^6 + x^2*y^3\nsage: q = x^3*y^5\nsage: f = p*q\nsage: p.factor(proof=False)*q.factor(proof=False)\nx^5 * y^8 * (x*y^4 + y^3 + 1)\nsage: f.factor(proof=False)\nx^5 * y^6 * (x*y^4 + y^3 + 1)\nsage: f\nx^6*y^12 + x^5*y^11 + x^5*y^8\n```\n\nIt seems a factor `y^2` has been lost in the factorization of\n`f` (in addition to the fact that the factorization of `f`\nmight be incomplete).\n\nI mark this as critical since we should have at least the following\nequality:\n\n```\nsage: f.factor(proof=False).expand() == f\nFalse\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10902\n\n",
    "created_at": "2011-03-10T09:04:47Z",
    "labels": [
        "commutative algebra",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.1",
    "title": "missing terms in factorization of multivariate polynomials",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10830",
    "user": "@zimmermann6"
}
```
Assignee: @malb

CC:  @malb simonking


```
sage: R.<x,y> = GF(2)[]
sage: p = x^3*y^7 + x^2*y^6 + x^2*y^3
sage: q = x^3*y^5
sage: f = p*q
sage: p.factor(proof=False)*q.factor(proof=False)
x^5 * y^8 * (x*y^4 + y^3 + 1)
sage: f.factor(proof=False)
x^5 * y^6 * (x*y^4 + y^3 + 1)
sage: f
x^6*y^12 + x^5*y^11 + x^5*y^8
```

It seems a factor `y^2` has been lost in the factorization of
`f` (in addition to the fact that the factorization of `f`
might be incomplete).

I mark this as critical since we should have at least the following
equality:

```
sage: f.factor(proof=False).expand() == f
False
```


Issue created by migration from https://trac.sagemath.org/ticket/10902





---

archive/issue_comments_114687.json:
```json
{
    "body": "I reported this upstream: http://www.singular.uni-kl.de:8002/trac/ticket/320",
    "created_at": "2011-03-10T10:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114687",
    "user": "@malb"
}
```

I reported this upstream: http://www.singular.uni-kl.de:8002/trac/ticket/320



---

archive/issue_comments_114688.json:
```json
{
    "body": "Dear Martin,\n\nReplying to [comment:1 malb]:\n> I reported this upstream: http://www.singular.uni-kl.de:8002/trac/ticket/320\n\nthis ticket is empty on my browser (firefox). Also, is there a workaround to factor bivariate\npolynomials over a prime field from within Sage, in particular over GF(2)?\n\nPaul",
    "created_at": "2011-03-10T10:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114688",
    "user": "@zimmermann6"
}
```

Dear Martin,

Replying to [comment:1 malb]:
> I reported this upstream: http://www.singular.uni-kl.de:8002/trac/ticket/320

this ticket is empty on my browser (firefox). Also, is there a workaround to factor bivariate
polynomials over a prime field from within Sage, in particular over GF(2)?

Paul



---

archive/issue_comments_114689.json:
```json
{
    "body": "Paul, the Singular developers replied on that ticket and state that this bug is fixed in Singular 3-1-2. Updating to 3-1-2 is now #10903.\n\nAs for a workaround, I cannot immediately think of any. It's a pretty grim situation, but at least now there is a Singular developer working on factoring.",
    "created_at": "2011-03-10T10:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114689",
    "user": "@malb"
}
```

Paul, the Singular developers replied on that ticket and state that this bug is fixed in Singular 3-1-2. Updating to 3-1-2 is now #10903.

As for a workaround, I cannot immediately think of any. It's a pretty grim situation, but at least now there is a Singular developer working on factoring.



---

archive/issue_comments_114690.json:
```json
{
    "body": "Replying to [comment:3 malb]:\n> Paul, the Singular developers replied on that ticket and state that this bug is fixed in Singular 3-1-2. Updating to 3-1-2 is now #10903.\n> \n> As for a workaround, I cannot immediately think of any. It's a pretty grim situation, but at least now there is a Singular developer working on factoring.\n\nthanks Martin. Once Singular is updated to 3-1-2, I will try to find examples where the factorization returned by Singular is incomplete. It would help to have concrete examples\nin the documentation.\n\nPaul",
    "created_at": "2011-03-10T10:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114690",
    "user": "@zimmermann6"
}
```

Replying to [comment:3 malb]:
> Paul, the Singular developers replied on that ticket and state that this bug is fixed in Singular 3-1-2. Updating to 3-1-2 is now #10903.
> 
> As for a workaround, I cannot immediately think of any. It's a pretty grim situation, but at least now there is a Singular developer working on factoring.

thanks Martin. Once Singular is updated to 3-1-2, I will try to find examples where the factorization returned by Singular is incomplete. It would help to have concrete examples
in the documentation.

Paul



---

archive/issue_comments_114691.json:
```json
{
    "body": "3-1-2 should also improve this, but there are some issues that are only resolved in whatever is the next version of Singular, cf. http://www.singular.uni-kl.de:8002/trac/ticket/291#comment:4",
    "created_at": "2011-03-10T11:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114691",
    "user": "@malb"
}
```

3-1-2 should also improve this, but there are some issues that are only resolved in whatever is the next version of Singular, cf. http://www.singular.uni-kl.de:8002/trac/ticket/291#comment:4



---

archive/issue_comments_114692.json:
```json
{
    "body": "Is this really so bad?\n\n\n```\ndef check(f0, f1):\n    CP = CartesianProduct(*[f0.base_ring()]*len(f0.variables()))\n    for xvec in CP:\n        f0_val = f0.subs(dict((v, xv) for v, xv in zip(f0.variables(), xvec)))\n        f1_val = f1.subs(dict((v, xv) for v, xv in zip(f0.variables(), xvec)))\n        print xvec, f0_val, f1_val, f0_val == f1_val\n\nsage: f0 = x^5 * y^8 * (x*y^4 + y^3 + 1)\nsage: f1 = x^5 * y^6 * (x*y^4 + y^3 + 1)\nsage: check(f0, f1)\n[0, 0] 0 0 True\n[0, 1] 0 0 True\n[1, 0] 0 0 True\n[1, 1] 1 1 True\n```\n\n\nThe factor of `y^2` has no effect, so aren't the two polynomials equivalent in GF(2)?  This happens pretty frequently:\n\n\n```\nsage: f0 = x**8+y**8+1\nsage: f1 = f0.factor(proof=False)\nsage: f1\n(x + y + 1)^6\nsage: f1.expand()\nx^6 + x^4*y^2 + x^2*y^4 + y^6 + x^4 + y^4 + x^2 + y^2 + 1\nsage: check(f0, f1.expand())\n[0, 0] 1 1 True\n[0, 1] 0 0 True\n[1, 0] 0 0 True\n[1, 1] 1 1 True\n```\n\n\nIs there a case where the two expressions aren't equivalent as functions?  Or am I missing something obvious like usual?",
    "created_at": "2011-03-10T11:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114692",
    "user": "dsm"
}
```

Is this really so bad?


```
def check(f0, f1):
    CP = CartesianProduct(*[f0.base_ring()]*len(f0.variables()))
    for xvec in CP:
        f0_val = f0.subs(dict((v, xv) for v, xv in zip(f0.variables(), xvec)))
        f1_val = f1.subs(dict((v, xv) for v, xv in zip(f0.variables(), xvec)))
        print xvec, f0_val, f1_val, f0_val == f1_val

sage: f0 = x^5 * y^8 * (x*y^4 + y^3 + 1)
sage: f1 = x^5 * y^6 * (x*y^4 + y^3 + 1)
sage: check(f0, f1)
[0, 0] 0 0 True
[0, 1] 0 0 True
[1, 0] 0 0 True
[1, 1] 1 1 True
```


The factor of `y^2` has no effect, so aren't the two polynomials equivalent in GF(2)?  This happens pretty frequently:


```
sage: f0 = x**8+y**8+1
sage: f1 = f0.factor(proof=False)
sage: f1
(x + y + 1)^6
sage: f1.expand()
x^6 + x^4*y^2 + x^2*y^4 + y^6 + x^4 + y^4 + x^2 + y^2 + 1
sage: check(f0, f1.expand())
[0, 0] 1 1 True
[0, 1] 0 0 True
[1, 0] 0 0 True
[1, 1] 1 1 True
```


Is there a case where the two expressions aren't equivalent as functions?  Or am I missing something obvious like usual?



---

archive/issue_comments_114693.json:
```json
{
    "body": "Replying to [comment:6 dsm]:\n> Is there a case where the two expressions aren't equivalent as functions?  Or am I missing something obvious like usual?\n\nBut polynomials over GF(2) are not merely boolean functions. There's a one-to-one mapping between square-free polynomials over GF(2) and boolean functions, but polynomials are more than that. So I'd say it is very bad.",
    "created_at": "2011-03-10T11:40:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114693",
    "user": "@malb"
}
```

Replying to [comment:6 dsm]:
> Is there a case where the two expressions aren't equivalent as functions?  Or am I missing something obvious like usual?

But polynomials over GF(2) are not merely boolean functions. There's a one-to-one mapping between square-free polynomials over GF(2) and boolean functions, but polynomials are more than that. So I'd say it is very bad.



---

archive/issue_comments_114694.json:
```json
{
    "body": "here is another example over GF(2):\n\n```\nsage: R.<x,y> = GF(2)[]\nsage: p=x^8 + y^8; q=x^2*y^4 + x; f=p*q\nsage: lf = f.factor(proof=False)\nsage: f-lf\nx^10*y^4 + x^2*y^12 + x^8*y^4 + x^6*y^6 + x^4*y^8 + x^2*y^10 + x^9 + x*y^8 + x^7 + x^5*y^2 + x^3*y^4 + x*y^6\n```\n\nAn example over GF(3):\n\n```\nsage: R.<x,y> = GF(3)[]\nsage: p = -x*y^9 + x\nsage: q = -x^8*y^2\nsage: f = p*q\nsage: f\nx^9*y^11 - x^9*y^2\nsage: f.factor(proof=False)\ny^2 * (y - 1)^6 * x^6\n```\n",
    "created_at": "2011-09-23T08:38:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114694",
    "user": "@zimmermann6"
}
```

here is another example over GF(2):

```
sage: R.<x,y> = GF(2)[]
sage: p=x^8 + y^8; q=x^2*y^4 + x; f=p*q
sage: lf = f.factor(proof=False)
sage: f-lf
x^10*y^4 + x^2*y^12 + x^8*y^4 + x^6*y^6 + x^4*y^8 + x^2*y^10 + x^9 + x*y^8 + x^7 + x^5*y^2 + x^3*y^4 + x*y^6
```

An example over GF(3):

```
sage: R.<x,y> = GF(3)[]
sage: p = -x*y^9 + x
sage: q = -x^8*y^2
sage: f = p*q
sage: f
x^9*y^11 - x^9*y^2
sage: f.factor(proof=False)
y^2 * (y - 1)^6 * x^6
```




---

archive/issue_comments_114695.json:
```json
{
    "body": "and an example over GF(5):\n\n```\nsage: R.<x,y> = GF(5)[]\nsage: p=x^27*y^9 + x^32*y^3 + 2*x^20*y^10 - x^4*y^24 - 2*x^17*y\nsage: q=-2*x^10*y^24 + x^9*y^24 - 2*x^3*y^30\nsage: f=p*q; f-f.factor(proof=False)\n-2*x^37*y^33 - 2*x^42*y^27 + x^36*y^33 - 2*x^30*y^39 + x^41*y^27 - 2*x^35*y^33 + x^30*y^34 + 2*x^29*y^34 + x^23*y^40 + 2*x^14*y^48 - x^13*y^48 + 2*x^7*y^54 + 2*x^37*y^18 + 2*x^42*y^12 - x^36*y^18 + 2*x^30*y^24 - x^41*y^12 + 2*x^35*y^18 - x^27*y^25 - 2*x^26*y^25 - x^20*y^31 - x^30*y^19 - 2*x^29*y^19 - x^23*y^25 - 2*x^14*y^33 + x^13*y^33 - 2*x^7*y^39 + x^27*y^10 + 2*x^26*y^10 + x^20*y^16\n```\n\nand one over GF(7):\n\n```\nsage: R.<x,y> = GF(7)[]\nsage: p=-3*x^47*y^24\nsage: q=-3*x^47*y^37 - 3*x^24*y^49 + 2*x^56*y^8 + 3*x^29*y^15 - x^2*y^33\nsage: f=p*q\nsage: f-f.factor(proof=False)\n2*x^94*y^61 + 2*x^71*y^73 + x^103*y^32 - 2*x^59*y^61 - 2*x^76*y^39 - 2*x^36*y^73 + 3*x^49*y^57 - x^68*y^32 + 2*x^41*y^39 - 3*x^14*y^57\n```\n\nExamples can be constructed at will with the following code (change GF(7) by whatever you want):\n\n```\nR.<x,y> = GF(7)[]\nnterms=2\nfor d in range(1,10^6):\n   print d\n   sys.stdout.flush()\n   p = R.random_element(degree=d,terms=nterms)\n   while p.degree()<=0:\n      p = R.random_element(degree=d,terms=nterms)\n   q = R.random_element(degree=d,terms=nterms)\n   while q.degree()<=0:\n      q = R.random_element(degree=d,terms=nterms)\n   f = p*q\n   lp = p.factor(proof=False)\n   lq = q.factor(proof=False)\n   lf = f.factor(proof=False)\n   if lp*lq <> lf:\n      print p, q\n      raise ValueError\n```\n",
    "created_at": "2011-09-23T09:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114695",
    "user": "@zimmermann6"
}
```

and an example over GF(5):

```
sage: R.<x,y> = GF(5)[]
sage: p=x^27*y^9 + x^32*y^3 + 2*x^20*y^10 - x^4*y^24 - 2*x^17*y
sage: q=-2*x^10*y^24 + x^9*y^24 - 2*x^3*y^30
sage: f=p*q; f-f.factor(proof=False)
-2*x^37*y^33 - 2*x^42*y^27 + x^36*y^33 - 2*x^30*y^39 + x^41*y^27 - 2*x^35*y^33 + x^30*y^34 + 2*x^29*y^34 + x^23*y^40 + 2*x^14*y^48 - x^13*y^48 + 2*x^7*y^54 + 2*x^37*y^18 + 2*x^42*y^12 - x^36*y^18 + 2*x^30*y^24 - x^41*y^12 + 2*x^35*y^18 - x^27*y^25 - 2*x^26*y^25 - x^20*y^31 - x^30*y^19 - 2*x^29*y^19 - x^23*y^25 - 2*x^14*y^33 + x^13*y^33 - 2*x^7*y^39 + x^27*y^10 + 2*x^26*y^10 + x^20*y^16
```

and one over GF(7):

```
sage: R.<x,y> = GF(7)[]
sage: p=-3*x^47*y^24
sage: q=-3*x^47*y^37 - 3*x^24*y^49 + 2*x^56*y^8 + 3*x^29*y^15 - x^2*y^33
sage: f=p*q
sage: f-f.factor(proof=False)
2*x^94*y^61 + 2*x^71*y^73 + x^103*y^32 - 2*x^59*y^61 - 2*x^76*y^39 - 2*x^36*y^73 + 3*x^49*y^57 - x^68*y^32 + 2*x^41*y^39 - 3*x^14*y^57
```

Examples can be constructed at will with the following code (change GF(7) by whatever you want):

```
R.<x,y> = GF(7)[]
nterms=2
for d in range(1,10^6):
   print d
   sys.stdout.flush()
   p = R.random_element(degree=d,terms=nterms)
   while p.degree()<=0:
      p = R.random_element(degree=d,terms=nterms)
   q = R.random_element(degree=d,terms=nterms)
   while q.degree()<=0:
      q = R.random_element(degree=d,terms=nterms)
   f = p*q
   lp = p.factor(proof=False)
   lq = q.factor(proof=False)
   lf = f.factor(proof=False)
   if lp*lq <> lf:
      print p, q
      raise ValueError
```




---

archive/issue_comments_114696.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd34\".",
    "created_at": "2011-09-23T09:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114696",
    "user": "@zimmermann6"
}
```

Changing keywords from "" to "sd34".



---

archive/issue_comments_114697.json:
```json
{
    "body": "I just tried all examples of this ticket with #10903 applied and they seem to return correct answers. I suggest we make this ticket dependent on #10903 and add Paul's examples as tests in this ticket.",
    "created_at": "2011-09-26T18:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114697",
    "user": "@malb"
}
```

I just tried all examples of this ticket with #10903 applied and they seem to return correct answers. I suggest we make this ticket dependent on #10903 and add Paul's examples as tests in this ticket.



---

archive/issue_comments_114698.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-09-29T14:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114698",
    "user": "@malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_114699.json:
```json
{
    "body": "The attached patch removes all proof=False from multivariate polynomial factor() calls (being bold!) and adds examples from this ticket as doctests. Paul, can you install #11339, #10903 and this patch and try to break it?",
    "created_at": "2011-09-29T14:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114699",
    "user": "@malb"
}
```

The attached patch removes all proof=False from multivariate polynomial factor() calls (being bold!) and adds examples from this ticket as doctests. Paul, can you install #11339, #10903 and this patch and try to break it?



---

archive/issue_comments_114700.json:
```json
{
    "body": "Replying to [comment:13 malb]:\n> The attached patch removes all proof=False from multivariate polynomial factor() calls (being bold!) and adds examples from this ticket as doctests. Paul, can you install #11339, #10903 and this patch and try to break it?\n\nthe 2nd patch from #11339 fails to apply on 4.7.1:\n\n```\nsage: hg_sage.import_patch(\"/tmp/trac_11339_refcount_singular_polynomials.patch\")\ncd \"/localdisk/tmp/install/sage/devel/sage\" && hg status\ncd \"/localdisk/tmp/install/sage/devel/sage\" && hg status\ncd \"/localdisk/tmp/install/sage/devel/sage\" && hg import   \"/tmp/trac_11339_refcount_singular_polynomials.patch\"\napplying /tmp/trac_11339_refcount_singular_polynomials.patch\npatching file sage/rings/polynomial/multi_polynomial_libsingular.pyx\nHunk #12 FAILED at 765\nHunk #13 FAILED at 783\nHunk #15 FAILED at 820\nHunk #16 FAILED at 862\nHunk #17 FAILED at 883\nHunk #18 succeeded at 832 with fuzz 2 (offset -72 lines).\n5 out of 103 hunks FAILED -- saving rejects to file sage/rings/polynomial/multi_polynomial_libsingular.pyx.rej\nabort: patch failed to apply\n```\n\nI could try 4.7.2.alpha, where can I download it?\n\nPaul",
    "created_at": "2011-09-29T14:57:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114700",
    "user": "@zimmermann6"
}
```

Replying to [comment:13 malb]:
> The attached patch removes all proof=False from multivariate polynomial factor() calls (being bold!) and adds examples from this ticket as doctests. Paul, can you install #11339, #10903 and this patch and try to break it?

the 2nd patch from #11339 fails to apply on 4.7.1:

```
sage: hg_sage.import_patch("/tmp/trac_11339_refcount_singular_polynomials.patch")
cd "/localdisk/tmp/install/sage/devel/sage" && hg status
cd "/localdisk/tmp/install/sage/devel/sage" && hg status
cd "/localdisk/tmp/install/sage/devel/sage" && hg import   "/tmp/trac_11339_refcount_singular_polynomials.patch"
applying /tmp/trac_11339_refcount_singular_polynomials.patch
patching file sage/rings/polynomial/multi_polynomial_libsingular.pyx
Hunk #12 FAILED at 765
Hunk #13 FAILED at 783
Hunk #15 FAILED at 820
Hunk #16 FAILED at 862
Hunk #17 FAILED at 883
Hunk #18 succeeded at 832 with fuzz 2 (offset -72 lines).
5 out of 103 hunks FAILED -- saving rejects to file sage/rings/polynomial/multi_polynomial_libsingular.pyx.rej
abort: patch failed to apply
```

I could try 4.7.2.alpha, where can I download it?

Paul



---

archive/issue_comments_114701.json:
```json
{
    "body": "Yes, you'll need 4.7.2.alpha3:\n\n   http://boxen.math.washington.edu/home/release/sage-4.7.2.alpha3/sage-4.7.2.alpha3.tar",
    "created_at": "2011-09-29T15:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114701",
    "user": "@malb"
}
```

Yes, you'll need 4.7.2.alpha3:

   http://boxen.math.washington.edu/home/release/sage-4.7.2.alpha3/sage-4.7.2.alpha3.tar



---

archive/issue_comments_114702.json:
```json
{
    "body": "Martin, with 4.7.2.alpha3 the two patches from #11339 apply ok, but the new skpg fails to compile\n(on a 64-bit Core2 under Ubuntu):\n\n```\n...\nmake install in Singular\nmake[2]: Entering directory `/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers/src/Singular'\nsvnversion >svnver\nsvnversion: relocation error: /usr/lib/libldap_r-2.4.so.2: symbol gnutls_certificate_get_x509_cas, version GNUTLS_1_4 not defined in file libgnutls.so.26 with link time reference\nmake[2]: *** [svnver] Error 127\nmake[2]: Leaving directory `/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers/src/Singular'\nmake[1]: *** [install] Error 1\nmake[1]: Leaving directory `/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers/src'\nmake: *** [/localdisk/tmp/install/sage/local/bin/Singular-3-1-3] Error 2\nUnable to build Singular.\n\nreal    5m33.608s\nuser    4m24.880s\nsys     0m15.360s\nsage: An error occurred while installing singular-3-1-3.svn-algnumbers\nPlease email sage-devel http://groups.google.com/group/sage-devel\nexplaining the problem and send the relevant part of\nof /localdisk/tmp/install/sage/install.log.  Describe your computer, operating system, etc.\nIf you want to try to fix the problem yourself, *don't* just cd to\n/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers and type 'make check' or whatever is appropriate.\nInstead, the following commands setup all environment variables\ncorrectly and load a subshell for you to debug the error:\n(cd '/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers' && '/localdisk/tmp/install/sage/sage' -sh)\nWhen you are done debugging, you can type \"exit\" to leave the\nsubshell.\n```\n\nAny clue?\n\nPaul",
    "created_at": "2011-09-29T18:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114702",
    "user": "@zimmermann6"
}
```

Martin, with 4.7.2.alpha3 the two patches from #11339 apply ok, but the new skpg fails to compile
(on a 64-bit Core2 under Ubuntu):

```
...
make install in Singular
make[2]: Entering directory `/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers/src/Singular'
svnversion >svnver
svnversion: relocation error: /usr/lib/libldap_r-2.4.so.2: symbol gnutls_certificate_get_x509_cas, version GNUTLS_1_4 not defined in file libgnutls.so.26 with link time reference
make[2]: *** [svnver] Error 127
make[2]: Leaving directory `/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers/src/Singular'
make[1]: *** [install] Error 1
make[1]: Leaving directory `/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers/src'
make: *** [/localdisk/tmp/install/sage/local/bin/Singular-3-1-3] Error 2
Unable to build Singular.

real    5m33.608s
user    4m24.880s
sys     0m15.360s
sage: An error occurred while installing singular-3-1-3.svn-algnumbers
Please email sage-devel http://groups.google.com/group/sage-devel
explaining the problem and send the relevant part of
of /localdisk/tmp/install/sage/install.log.  Describe your computer, operating system, etc.
If you want to try to fix the problem yourself, *don't* just cd to
/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers and type 'make check' or whatever is appropriate.
Instead, the following commands setup all environment variables
correctly and load a subshell for you to debug the error:
(cd '/localdisk/tmp/install/sage/spkg/build/singular-3-1-3.svn-algnumbers' && '/localdisk/tmp/install/sage/sage' -sh)
When you are done debugging, you can type "exit" to leave the
subshell.
```

Any clue?

Paul



---

archive/issue_comments_114703.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-09-29T18:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114703",
    "user": "@zimmermann6"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_114704.json:
```json
{
    "body": "The new SPKG should fix this issue.\n\n  http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-3-3.spkg",
    "created_at": "2011-09-29T21:06:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114704",
    "user": "@malb"
}
```

The new SPKG should fix this issue.

  http://sage.math.washington.edu/home/malb/spkgs/singular-3-1-3-3.spkg



---

archive/issue_comments_114705.json:
```json
{
    "body": "I finally managed to apply the 4 patches, I ran `sage -b`, then installed the spkg, then ran\n`sage -b` again.\n\nHowever `Proof=...` seems to be still present somewhere:\n\n```\nsage: R.<x,y> = GF(2)[]\nsage: p=x^8 + y^8; q=x^2*y^4 + x; f=p*q\nsage: f.factor(proof=False)\nx * (x + y)^8 * (x*y^4 + 1)\nsage: f.factor()\n...\nNotImplementedError: proof = True factorization not implemented.  Call factor with proof=False.\n```\n\nPaul",
    "created_at": "2011-09-30T09:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114705",
    "user": "@zimmermann6"
}
```

I finally managed to apply the 4 patches, I ran `sage -b`, then installed the spkg, then ran
`sage -b` again.

However `Proof=...` seems to be still present somewhere:

```
sage: R.<x,y> = GF(2)[]
sage: p=x^8 + y^8; q=x^2*y^4 + x; f=p*q
sage: f.factor(proof=False)
x * (x + y)^8 * (x*y^4 + 1)
sage: f.factor()
...
NotImplementedError: proof = True factorization not implemented.  Call factor with proof=False.
```

Paul



---

archive/issue_comments_114706.json:
```json
{
    "body": "for the proof thingy you'll also need to apply the patch from this ticket, i.e.,[attachment:trac_10902_factor_fixed.patch]",
    "created_at": "2011-09-30T09:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114706",
    "user": "@malb"
}
```

for the proof thingy you'll also need to apply the patch from this ticket, i.e.,[attachment:trac_10902_factor_fixed.patch]



---

archive/issue_comments_114707.json:
```json
{
    "body": "it seems to work much better (no bug found so far) but some factorizations are very slow (or hang),\nfor example:\n\n```\nsage: K=GF(4,'a')\nsage: a=K.gens()[0]\nsage: R.<x,y> = K[]\nsage: f=(a + 1)*x^145*y^84 + (a + 1)*x^205*y^17 + x^32*y^112 + x^92*y^45 \nsage: f.factor()\n```\n",
    "created_at": "2011-09-30T15:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114707",
    "user": "@zimmermann6"
}
```

it seems to work much better (no bug found so far) but some factorizations are very slow (or hang),
for example:

```
sage: K=GF(4,'a')
sage: a=K.gens()[0]
sage: R.<x,y> = K[]
sage: f=(a + 1)*x^145*y^84 + (a + 1)*x^205*y^17 + x^32*y^112 + x^92*y^45 
sage: f.factor()
```




---

archive/issue_comments_114708.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-13T16:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114708",
    "user": "@malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_114709.json:
```json
{
    "body": "I've rebased the patch to 5.0.beta13 and made sure that sig_on/sig_off are always called, so that one can interrupt the factorisation if it hangs.",
    "created_at": "2012-04-13T16:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114709",
    "user": "@malb"
}
```

I've rebased the patch to 5.0.beta13 and made sure that sig_on/sig_off are always called, so that one can interrupt the factorisation if it hangs.



---

archive/issue_comments_114710.json:
```json
{
    "body": "Sage 5.0.beta13 fails to build on my computer, thus I'll have to wait for beta14 to review that ticket...\n\nPaul",
    "created_at": "2012-04-16T07:14:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114710",
    "user": "@zimmermann6"
}
```

Sage 5.0.beta13 fails to build on my computer, thus I'll have to wait for beta14 to review that ticket...

Paul



---

archive/issue_comments_114711.json:
```json
{
    "body": "thanks to Jeroen, I've managed to build Sage 5.0.beta13. However the issue reported in comment\n[comment:20] is still present, whereas it took about one second in Sage 4.8:\n\n```\nsage: K=GF(4,'a')                                                          \nsage: a=K.gens()[0]\nsage: R.<x,y> = K[]\nsage: f=(a + 1)*x^145*y^84 + (a + 1)*x^205*y^17 + x^32*y^112 + x^92*y^45\nsage: time r=f.factor(proof=False)\nTime: CPU 1.08 s, Wall: 1.23 s\nsage: r\ny^17 * x^32 * (y^67 + x^60) * ((a + 1)*x^113 + y^28)\n```\n\nI'll be happy when this will be reported in another ticket.\n\nPaul",
    "created_at": "2012-04-16T14:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114711",
    "user": "@zimmermann6"
}
```

thanks to Jeroen, I've managed to build Sage 5.0.beta13. However the issue reported in comment
[comment:20] is still present, whereas it took about one second in Sage 4.8:

```
sage: K=GF(4,'a')                                                          
sage: a=K.gens()[0]
sage: R.<x,y> = K[]
sage: f=(a + 1)*x^145*y^84 + (a + 1)*x^205*y^17 + x^32*y^112 + x^92*y^45
sage: time r=f.factor(proof=False)
Time: CPU 1.08 s, Wall: 1.23 s
sage: r
y^17 * x^32 * (y^67 + x^60) * ((a + 1)*x^113 + y^28)
```

I'll be happy when this will be reported in another ticket.

Paul



---

archive/issue_comments_114712.json:
```json
{
    "body": "I've created http://trac.sagemath.org/sage_trac/ticket/12846",
    "created_at": "2012-04-16T15:11:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114712",
    "user": "@malb"
}
```

I've created http://trac.sagemath.org/sage_trac/ticket/12846



---

archive/issue_comments_114713.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-04-17T06:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114713",
    "user": "@zimmermann6"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_114714.json:
```json
{
    "body": "one doctest fails with sage-5.0.beta13:\n\n```\ntarte% ../../../sage -t devel/sage-10902/sage/categories/quotient_fields.py\n...\n\nExpected:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError: proof = True factorization not implemented.  Call factor with proof=False.\nGot:\n    (x + y)^-1 * y * x\n```\n\nPaul",
    "created_at": "2012-04-17T06:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114714",
    "user": "@zimmermann6"
}
```

one doctest fails with sage-5.0.beta13:

```
tarte% ../../../sage -t devel/sage-10902/sage/categories/quotient_fields.py
...

Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError: proof = True factorization not implemented.  Call factor with proof=False.
Got:
    (x + y)^-1 * y * x
```

Paul



---

archive/issue_comments_114715.json:
```json
{
    "body": "Attachment [trac_10902_factor.patch](tarball://root/attachments/some-uuid/ticket10902/trac_10902_factor.patch) by @malb created at 2012-04-18 10:21:47",
    "created_at": "2012-04-18T10:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114715",
    "user": "@malb"
}
```

Attachment [trac_10902_factor.patch](tarball://root/attachments/some-uuid/ticket10902/trac_10902_factor.patch) by @malb created at 2012-04-18 10:21:47



---

archive/issue_comments_114716.json:
```json
{
    "body": "I've updated the patch.",
    "created_at": "2012-04-18T10:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114716",
    "user": "@malb"
}
```

I've updated the patch.



---

archive/issue_comments_114717.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-04-18T10:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114717",
    "user": "@malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_114718.json:
```json
{
    "body": "Changing keywords from \"sd34\" to \"\".",
    "created_at": "2012-04-18T10:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114718",
    "user": "@malb"
}
```

Changing keywords from "sd34" to "".



---

archive/issue_comments_114719.json:
```json
{
    "body": "Martin, why did you remove the sd34 keyword? I had put it since I worked on this ticket during SD34.\n\nPaul",
    "created_at": "2012-04-18T13:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114719",
    "user": "@zimmermann6"
}
```

Martin, why did you remove the sd34 keyword? I had put it since I worked on this ticket during SD34.

Paul



---

archive/issue_comments_114720.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd34\".",
    "created_at": "2012-04-18T13:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114720",
    "user": "@malb"
}
```

Changing keywords from "" to "sd34".



---

archive/issue_comments_114721.json:
```json
{
    "body": "Oh, I figured I should remove it since it wasn't resolved at SD34. I added it back.",
    "created_at": "2012-04-18T13:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114721",
    "user": "@malb"
}
```

Oh, I figured I should remove it since it wasn't resolved at SD34. I added it back.



---

archive/issue_comments_114722.json:
```json
{
    "body": "good work, thanks Martin!\n\nPaul\n\nPS: I removed my name as author since the patch is entirely from you.",
    "created_at": "2012-04-18T16:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114722",
    "user": "@zimmermann6"
}
```

good work, thanks Martin!

Paul

PS: I removed my name as author since the patch is entirely from you.



---

archive/issue_comments_114723.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-18T16:04:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114723",
    "user": "@zimmermann6"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_114724.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-05-06T12:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10830",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10830#issuecomment-114724",
    "user": "@jdemeyer"
}
```

Resolution: fixed
