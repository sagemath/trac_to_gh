# Issue 15721: Bug in Partition Algebras

Issue created by migration from https://trac.sagemath.org/ticket/15958

Original creator: Bruce

Original creation time: 2014-03-17 10:42:04

CC:  tscrim sage-combinat

There is a bug in the implementation of the product in partition algebras.


```
sage: A = PartitionAlgebra(1,17)
sage: g = SetPartitionsAk(1).list()
sage: a = A[g[1]]
sage: a
P[{{-1}, {1}}]
sage: a*a
P[{{-1}, {1}}]
```


This should return


```
17*P[{{-1}, {1}}]
```



---

Comment by Bruce created at 2014-03-17 11:41:47

Changing type from PLEASE CHANGE to defect.


---

Comment by Bruce created at 2014-03-17 11:43:18

Changing component from PLEASE CHANGE to combinatorics.


---

Comment by git created at 2014-03-19 15:58:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by Bruce created at 2014-03-19 15:59:47

Changing status from new to needs_review.


---

Comment by darij created at 2014-03-19 19:16:50

----
New commits:


---

Comment by darij created at 2014-03-19 19:19:41

Good catch! I've improved it a bit. First of all, bugs fixed should be doctested to ensure that they don't reappear when someone later copies bad code (or for other reasons). Second, there is no good reason to check for `len(part_list) > 0` after a call to `part_list[0]`; that test should have been removed rather than corrected. (By the way, this was already inside an `if len(part_list) > 0` clause...) Finally, the code is (for some reason) duplicated in `partition_algebra.py`; I don't have the time to track down the reasons of this duplication, but I've fixed the bug over there as well.

Bad news is that someone else will have to review this ticket now. :)


---

Comment by Chwas created at 2014-03-28 22:15:47

Set assignee to Chwas.


---

Comment by Chwas created at 2014-03-28 22:17:33

I think you are right about the bug, and I will try to review it.


---

Comment by darij created at 2014-04-23 01:48:01

Any progress? Hello?


---

Comment by Chwas created at 2014-04-28 11:52:23

Remove assignee Chwas.


---

Comment by Chwas created at 2014-04-28 11:53:45

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2014-04-28 14:39:03

Set assignee to Bruce.


---

Comment by tscrim created at 2014-04-28 14:39:03

Chwas, please add your real name to the reviewers.


---

Comment by vbraun created at 2014-04-29 12:03:16

Resolution: fixed
