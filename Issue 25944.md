# Issue 25944: py3: cleanup of the Cusps class

Issue created by migration from https://trac.sagemath.org/ticket/26181

Original creator: chapoton

Original creation time: 2018-09-02 19:54:16




---

Comment by chapoton created at 2018-09-02 19:54:40

Changing status from new to needs_review.


---

Comment by git created at 2018-09-02 19:54:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-09-03 02:45:23

What about making `Cusps_class` a subclass of `sage.misc.fast_methods.Singleton`?


---

Comment by chapoton created at 2018-09-03 06:00:30

What would be the benefit ?

EDIT: should I just replace `UniqueRepresentation` by `Singleton` ?


---

Comment by tscrim created at 2018-09-03 09:31:34

`Singleton` is faster (which probably means we can remove `Cusps` nailed in memory) and IMO makes the design more clear as it conveys some more semantics.


---

Comment by chapoton created at 2018-09-03 10:01:31

Replacing UniqueRepresentation by Singleton does not work (conflict with Parent ?)


---

Comment by tscrim created at 2018-09-03 10:08:17

Replying to [comment:7 chapoton]:
> Replacing UniqueRepresentation by Singleton does not work (conflict with Parent ?)

What goes wrong? It shouldn't conflict with `Parent`, but it does have to come first because it needs to be at the bottom of the MRO (so there also cannot be any subclasses).


---

Comment by git created at 2018-09-03 11:36:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-09-03 11:37:53

ok, thanks. I did put it in second position.


---

Comment by tscrim created at 2018-09-03 11:53:30

Thanks.

It probably should also use the `Cusps.element_class` instead of `Cusp`, but there is not any benefit right now (as nothing is really gained from the category). So that can wait for a followup if you want to just set a positive review now.


---

Comment by chapoton created at 2018-09-03 15:22:12

failing doctests


---

Comment by chapoton created at 2018-09-03 15:22:12

Changing status from needs_review to needs_work.


---

Comment by git created at 2018-09-03 15:57:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-09-03 15:58:05

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-09-03 15:58:05

should be better now..


---

Comment by tscrim created at 2018-09-03 20:30:23

LGTM. Thanks.


---

Comment by tscrim created at 2018-09-03 20:30:23

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-09-05 16:43:40

Resolution: fixed
