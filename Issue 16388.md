# Issue 16388: Schlegel doesn't work for all polytopes

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2014-07-08 13:27:57

CC:  dimpase vbraun novoselt

In comments for [this ask.sagemath question](http://ask.sagemath.org/question/23223/projection_direction-broken-for-polytopes/), we see that 

```
sage: P8 = polytopes.n_cube(4) 
sage: P8.schlegel([2,5,11,17])
AttributeError: 'Polyhedra_ZZ_ppl_with_category.element_class' object has no attribute 'schlegel'
```

while for polytopes defined over `QQ` this isn't a problem.  The documentation for polytope plotting doesn't seem to indicate this, other than a mysterious and ill-placed [todo in the tikz method](http://www.sagemath.org/doc/reference/geometry/sage/geometry/polyhedron/plot.html#sage.geometry.polyhedron.plot.Projection.tikz), which might not even be related.

----

On a related note, from the same question, the two following should be different, but aren't.  This is a different bug; apparently it used to work.

```
poly = polytopes.twenty_four_cell()
poly.show()

poly.show(projection_direction=[2,5,11,17])
```



---

Comment by kcrisman created at 2014-07-08 13:38:12

Even `P8prime = P8.base_extend(QQ)` doesn't seem to have the `schlegel` method, which is even more perplexing.


---

Comment by vbraun created at 2014-07-08 16:26:42

Polyhedra have a `schlegel_projection` method, and not a `schlegel` method. The internally used `Projection` class has a `schlegel` method.


---

Comment by kcrisman created at 2014-07-08 16:33:39

> Polyhedra have a `schlegel_projection` method, and not a `schlegel` method. The internally used `Projection` class has a `schlegel` method.
Yes, there was some confusion in my mind earlier...

As to your comment on the ask.sagemath question, unfortunately the following is still in [the documentation](http://www.sagemath.org/doc/reference/geometry/sage/geometry/polyhedron/plot.html#sage.geometry.polyhedron.plot.render_4d).

```
sage: poly = polytopes.twenty_four_cell()
sage: poly
A 4-dimensional polyhedron in QQ^4 defined as the convex hull of 24 vertices
sage: poly.show()
sage: poly.show(projection_direction=[2,5,11,17])
```

So if that is not supposed to be used in that way, it was missed whenever those methods changed.  There is also no deprecation information given.


---

Comment by vbraun created at 2014-07-09 04:05:15

New commits:


---

Comment by vbraun created at 2014-07-09 04:05:15

Changing status from new to needs_review.


---

Comment by kcrisman created at 2014-07-09 13:15:55

Wow, that is a **lot** more than need to fix this :-)  It's gone beyond what I can comfortably review in a few minutes, but overall the structure, deprecations, and doc look like a big improvement.


---

Comment by git created at 2014-07-09 15:53:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-07-09 16:15:06

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-07-16 14:52:34

anybody feels like reviewing this?


---

Comment by novoselt created at 2014-07-16 18:21:41

Working on it.


---

Comment by novoselt created at 2014-07-16 23:08:48

Changing status from needs_review to positive_review.


---

Comment by novoselt created at 2014-07-16 23:08:48

lgtm and works fine!
----
New commits:


---

Comment by vbraun created at 2014-07-17 13:57:34

Resolution: fixed


---

Comment by kcrisman created at 2014-11-04 16:50:00

Just FYI, there was no doctesting of

```
+    def show(self, *args, **kwds):
+        from sage.misc.superseded import deprecation
+        deprecation(16625, 'use Projection.plot instead')
+        return self.plot(*args, **kwds)
```

followup will be part of #17247.
