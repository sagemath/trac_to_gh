# Issue 27015: Giac fails to build

Issue created by migration from https://trac.sagemath.org/ticket/27252

Original creator: vbraun

Original creation time: 2019-02-10 17:27:49

CC:  frederichan parisse slelievre

Seems like the C++11 switch broke giac on Debian 8 and Ubuntu 14:

```
[giac-1.5.0.37] libtool: compile:  g++ -std=gnu++11 -DHAVE_CONFIG_H -I. -I.. -DIN_GIAC -I. -I.. -I. -I.. -I/home/buildbot/slave/sage_git/build/local/include -g -O2 -fno-strict-aliasing -DGIAC_GENERIC_CONSTANTS -MT global.lo -MD -MP -MF .deps/global.Tpo -c global.cc  -fPIC -DPIC -o .libs/global.o
[giac-1.5.0.37] global.cc: In function 'bool giac::my_isnan(double)':
[giac-1.5.0.37] global.cc:4145:19: error: call of overloaded 'isnan(double&)' is ambiguous
[giac-1.5.0.37]      return isnan(d);
[giac-1.5.0.37]                    ^
[giac-1.5.0.37] global.cc:4145:19: note: candidates are:
[giac-1.5.0.37] In file included from /usr/include/features.h:374:0,
[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/os_defines.h:39,
[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/c++config.h:430,
[giac-1.5.0.37]                  from /usr/include/c++/4.9/cstddef:44,
[giac-1.5.0.37]                  from first.h:347,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/i386-linux-gnu/bits/mathcalls.h:234:1: note: int isnan(double)
[giac-1.5.0.37]  __MATHDECL_1 (int,isnan,, (_Mdouble_ __value)) __attribute__ ((__const__));
[giac-1.5.0.37]  ^
[giac-1.5.0.37] In file included from first.h:498:0,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:626:3: note: constexpr bool std::isnan(long double)
[giac-1.5.0.37]    isnan(long double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:622:3: note: constexpr bool std::isnan(double)
[giac-1.5.0.37]    isnan(double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:618:3: note: constexpr bool std::isnan(float)
[giac-1.5.0.37]    isnan(float __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] global.cc: In function 'bool giac::my_isinf(double)':
[giac-1.5.0.37] global.cc:4158:19: error: call of overloaded 'isinf(double&)' is ambiguous
[giac-1.5.0.37]      return isinf(d);
[giac-1.5.0.37]                    ^
[giac-1.5.0.37] global.cc:4158:19: note: candidates are:
[giac-1.5.0.37] In file included from /usr/include/features.h:374:0,
[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/os_defines.h:39,
[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/c++config.h:430,
[giac-1.5.0.37]                  from /usr/include/c++/4.9/cstddef:44,
[giac-1.5.0.37]                  from first.h:347,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/i386-linux-gnu/bits/mathcalls.h:201:1: note: int isinf(double)
[giac-1.5.0.37]  __MATHDECL_1 (int,isinf,, (_Mdouble_ __value)) __attribute__ ((__const__));
[giac-1.5.0.37]  ^
[giac-1.5.0.37] In file included from first.h:498:0,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:608:3: note: constexpr bool std::isinf(long double)
[giac-1.5.0.37]    isinf(long double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:604:3: note: constexpr bool std::isinf(double)
[giac-1.5.0.37]    isinf(double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:600:3: note: constexpr bool std::isinf(float)
[giac-1.5.0.37]    isinf(float __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] Makefile:786: recipe for target 'global.lo' failed
[giac-1.5.0.37] make[6]: *** [global.lo] Error 1
```



---

Comment by fbissey created at 2019-02-10 19:55:48

So g++-4.9 by the look of things. I guess C++11 support may not have been complete with that compiler. We may need to up the version of gcc at which we trigger a build.


---

Comment by slelievre created at 2019-02-10 22:08:01

Changing keywords from "" to "giac".


---

Comment by jdemeyer created at 2019-02-12 16:03:10

Duplicate of #27263.


---

Comment by jdemeyer created at 2019-02-12 16:03:10

Resolution: duplicate


---

Comment by embray created at 2019-02-12 17:05:11

Oops, well, apparently the duplicate is mine.  I did attach a workaround but it's not ideal.  Maybe it would be better to not force `-std=c++11` on giac...


---

Comment by fbissey created at 2019-02-12 17:59:55

That would defeat the purpose of #26787 but I then in that ticket I probably should have blacklisted compiler with experimental support of c++11 (gcc<5).
