# Issue 27015: Giac fails to build

archive/issues_027015.json:
```json
{
    "body": "CC:  @frederichan-IMJPRG parisse @slel\n\nSeems like the C++11 switch broke giac on Debian 8 and Ubuntu 14:\n\n```\n[giac-1.5.0.37] libtool: compile:  g++ -std=gnu++11 -DHAVE_CONFIG_H -I. -I.. -DIN_GIAC -I. -I.. -I. -I.. -I/home/buildbot/slave/sage_git/build/local/include -g -O2 -fno-strict-aliasing -DGIAC_GENERIC_CONSTANTS -MT global.lo -MD -MP -MF .deps/global.Tpo -c global.cc  -fPIC -DPIC -o .libs/global.o\n[giac-1.5.0.37] global.cc: In function 'bool giac::my_isnan(double)':\n[giac-1.5.0.37] global.cc:4145:19: error: call of overloaded 'isnan(double&)' is ambiguous\n[giac-1.5.0.37]      return isnan(d);\n[giac-1.5.0.37]                    ^\n[giac-1.5.0.37] global.cc:4145:19: note: candidates are:\n[giac-1.5.0.37] In file included from /usr/include/features.h:374:0,\n[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/os_defines.h:39,\n[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/c++config.h:430,\n[giac-1.5.0.37]                  from /usr/include/c++/4.9/cstddef:44,\n[giac-1.5.0.37]                  from first.h:347,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/i386-linux-gnu/bits/mathcalls.h:234:1: note: int isnan(double)\n[giac-1.5.0.37]  __MATHDECL_1 (int,isnan,, (_Mdouble_ __value)) __attribute__ ((__const__));\n[giac-1.5.0.37]  ^\n[giac-1.5.0.37] In file included from first.h:498:0,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/c++/4.9/cmath:626:3: note: constexpr bool std::isnan(long double)\n[giac-1.5.0.37]    isnan(long double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.9/cmath:622:3: note: constexpr bool std::isnan(double)\n[giac-1.5.0.37]    isnan(double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.9/cmath:618:3: note: constexpr bool std::isnan(float)\n[giac-1.5.0.37]    isnan(float __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] global.cc: In function 'bool giac::my_isinf(double)':\n[giac-1.5.0.37] global.cc:4158:19: error: call of overloaded 'isinf(double&)' is ambiguous\n[giac-1.5.0.37]      return isinf(d);\n[giac-1.5.0.37]                    ^\n[giac-1.5.0.37] global.cc:4158:19: note: candidates are:\n[giac-1.5.0.37] In file included from /usr/include/features.h:374:0,\n[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/os_defines.h:39,\n[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/c++config.h:430,\n[giac-1.5.0.37]                  from /usr/include/c++/4.9/cstddef:44,\n[giac-1.5.0.37]                  from first.h:347,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/i386-linux-gnu/bits/mathcalls.h:201:1: note: int isinf(double)\n[giac-1.5.0.37]  __MATHDECL_1 (int,isinf,, (_Mdouble_ __value)) __attribute__ ((__const__));\n[giac-1.5.0.37]  ^\n[giac-1.5.0.37] In file included from first.h:498:0,\n[giac-1.5.0.37]                  from giacPCH.h:7,\n[giac-1.5.0.37]                  from global.cc:3:\n[giac-1.5.0.37] /usr/include/c++/4.9/cmath:608:3: note: constexpr bool std::isinf(long double)\n[giac-1.5.0.37]    isinf(long double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.9/cmath:604:3: note: constexpr bool std::isinf(double)\n[giac-1.5.0.37]    isinf(double __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] /usr/include/c++/4.9/cmath:600:3: note: constexpr bool std::isinf(float)\n[giac-1.5.0.37]    isinf(float __x)\n[giac-1.5.0.37]    ^\n[giac-1.5.0.37] Makefile:786: recipe for target 'global.lo' failed\n[giac-1.5.0.37] make[6]: *** [global.lo] Error 1\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27252\n\n",
    "created_at": "2019-02-10T17:27:49Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Giac fails to build",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27015",
    "user": "https://github.com/vbraun"
}
```
CC:  @frederichan-IMJPRG parisse @slel

Seems like the C++11 switch broke giac on Debian 8 and Ubuntu 14:

```
[giac-1.5.0.37] libtool: compile:  g++ -std=gnu++11 -DHAVE_CONFIG_H -I. -I.. -DIN_GIAC -I. -I.. -I. -I.. -I/home/buildbot/slave/sage_git/build/local/include -g -O2 -fno-strict-aliasing -DGIAC_GENERIC_CONSTANTS -MT global.lo -MD -MP -MF .deps/global.Tpo -c global.cc  -fPIC -DPIC -o .libs/global.o
[giac-1.5.0.37] global.cc: In function 'bool giac::my_isnan(double)':
[giac-1.5.0.37] global.cc:4145:19: error: call of overloaded 'isnan(double&)' is ambiguous
[giac-1.5.0.37]      return isnan(d);
[giac-1.5.0.37]                    ^
[giac-1.5.0.37] global.cc:4145:19: note: candidates are:
[giac-1.5.0.37] In file included from /usr/include/features.h:374:0,
[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/os_defines.h:39,
[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/c++config.h:430,
[giac-1.5.0.37]                  from /usr/include/c++/4.9/cstddef:44,
[giac-1.5.0.37]                  from first.h:347,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/i386-linux-gnu/bits/mathcalls.h:234:1: note: int isnan(double)
[giac-1.5.0.37]  __MATHDECL_1 (int,isnan,, (_Mdouble_ __value)) __attribute__ ((__const__));
[giac-1.5.0.37]  ^
[giac-1.5.0.37] In file included from first.h:498:0,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:626:3: note: constexpr bool std::isnan(long double)
[giac-1.5.0.37]    isnan(long double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:622:3: note: constexpr bool std::isnan(double)
[giac-1.5.0.37]    isnan(double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:618:3: note: constexpr bool std::isnan(float)
[giac-1.5.0.37]    isnan(float __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] global.cc: In function 'bool giac::my_isinf(double)':
[giac-1.5.0.37] global.cc:4158:19: error: call of overloaded 'isinf(double&)' is ambiguous
[giac-1.5.0.37]      return isinf(d);
[giac-1.5.0.37]                    ^
[giac-1.5.0.37] global.cc:4158:19: note: candidates are:
[giac-1.5.0.37] In file included from /usr/include/features.h:374:0,
[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/os_defines.h:39,
[giac-1.5.0.37]                  from /usr/include/i386-linux-gnu/c++/4.9/bits/c++config.h:430,
[giac-1.5.0.37]                  from /usr/include/c++/4.9/cstddef:44,
[giac-1.5.0.37]                  from first.h:347,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/i386-linux-gnu/bits/mathcalls.h:201:1: note: int isinf(double)
[giac-1.5.0.37]  __MATHDECL_1 (int,isinf,, (_Mdouble_ __value)) __attribute__ ((__const__));
[giac-1.5.0.37]  ^
[giac-1.5.0.37] In file included from first.h:498:0,
[giac-1.5.0.37]                  from giacPCH.h:7,
[giac-1.5.0.37]                  from global.cc:3:
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:608:3: note: constexpr bool std::isinf(long double)
[giac-1.5.0.37]    isinf(long double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:604:3: note: constexpr bool std::isinf(double)
[giac-1.5.0.37]    isinf(double __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] /usr/include/c++/4.9/cmath:600:3: note: constexpr bool std::isinf(float)
[giac-1.5.0.37]    isinf(float __x)
[giac-1.5.0.37]    ^
[giac-1.5.0.37] Makefile:786: recipe for target 'global.lo' failed
[giac-1.5.0.37] make[6]: *** [global.lo] Error 1
```


Issue created by migration from https://trac.sagemath.org/ticket/27252





---

archive/issue_comments_379869.json:
```json
{
    "body": "So g++-4.9 by the look of things. I guess C++11 support may not have been complete with that compiler. We may need to up the version of gcc at which we trigger a build.",
    "created_at": "2019-02-10T19:55:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27015#issuecomment-379869",
    "user": "https://github.com/kiwifb"
}
```

So g++-4.9 by the look of things. I guess C++11 support may not have been complete with that compiler. We may need to up the version of gcc at which we trigger a build.



---

archive/issue_comments_379870.json:
```json
{
    "body": "Changing keywords from \"\" to \"giac\".",
    "created_at": "2019-02-10T22:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27015#issuecomment-379870",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "giac".



---

archive/issue_comments_379871.json:
```json
{
    "body": "Duplicate of #27263.",
    "created_at": "2019-02-12T16:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27015#issuecomment-379871",
    "user": "https://github.com/jdemeyer"
}
```

Duplicate of #27263.



---

archive/issue_events_025082.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-12T16:03:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27015",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27015#event-25082"
}
```



---

archive/issue_comments_379872.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2019-02-12T16:03:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27015#issuecomment-379872",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate



---

archive/issue_comments_379873.json:
```json
{
    "body": "Oops, well, apparently the duplicate is mine.  I did attach a workaround but it's not ideal.  Maybe it would be better to not force `-std=c++11` on giac...",
    "created_at": "2019-02-12T17:05:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27015#issuecomment-379873",
    "user": "https://github.com/embray"
}
```

Oops, well, apparently the duplicate is mine.  I did attach a workaround but it's not ideal.  Maybe it would be better to not force `-std=c++11` on giac...



---

archive/issue_comments_379874.json:
```json
{
    "body": "That would defeat the purpose of #26787 but I then in that ticket I probably should have blacklisted compiler with experimental support of c++11 (gcc<5).",
    "created_at": "2019-02-12T17:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27015#issuecomment-379874",
    "user": "https://github.com/kiwifb"
}
```

That would defeat the purpose of #26787 but I then in that ticket I probably should have blacklisted compiler with experimental support of c++11 (gcc<5).
