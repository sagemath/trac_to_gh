# Issue 16981: Minimal bindings for acb's in the optional arb package

Issue created by migration from https://trac.sagemath.org/ticket/17218

Original creator: cheuberg

Original creation time: 2014-10-25 08:18:00

CC:  alina fredrik.johansson ktkohl skropf jdemeyer mmezzarobba

Keywords: arb, Acb, complex intervals

As a follow-up to #17194, where the `arb` type of the Arb library has been wrapped, this wraps the `acb` type for complex balls.

As in #17194, the bindings are very minimal, just to have the type and conversions. Again, the precision is stored in `Acb` directly as this does not yet live in sage's coercion world and therefore having a parent seems to be overkill for now.


---

Comment by cheuberg created at 2014-10-25 08:19:33

Changing status from new to needs_review.


---

Comment by cheuberg created at 2014-10-25 08:19:33

Last 10 new commits:


---

Comment by git created at 2014-10-25 14:55:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cheuberg created at 2015-02-06 09:32:48

Changing status from needs_review to needs_work.


---

Comment by cheuberg created at 2015-02-06 09:32:48

The modifications made in #17194 will have to be made here, too, once #17194 is in final form.


---

Comment by git created at 2015-02-20 18:28:52

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by cheuberg created at 2015-02-20 18:30:10

Replying to [comment:3 cheuberg]:
> The modifications made in #17194 will have to be made here, too, once #17194 is in final form.
Done.


---

Comment by cheuberg created at 2015-02-20 18:30:10

Changing status from needs_work to needs_review.


---

Comment by git created at 2015-02-24 18:21:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-02-28 08:12:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-14 07:05:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-03-14 07:19:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-17 06:10:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-05-07 04:37:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2015-05-12 08:30:59

Changing status from needs_review to needs_info.


---

Comment by vdelecroix created at 2015-05-12 08:30:59

Hello,

1. In the constructor

```
super(ComplexBall, self).__init__(parent)
```

  is much slower than

```
Element.__init__(self, parent)
```


2. Do you really need to make a subtraction to check if two complex balls are different?!

3. Why did you changed the convention for equality? We have

```
sage: a = RIF(1,2)
sage: a == a
False
```


Vincent


---

Comment by mmezzarobba created at 2015-05-12 14:51:51

Hi Vincent,

Replying to [comment:14 vdelecroix]:
> 3. Why did you changed the convention for equality? We have
> {{{
> sage: a = RIF(1,2)
> sage: a == a
> False
> }}}

See #17194 (and #17186) for the rationale.

As for this ticket, I'd like to suggest marking the whole module as experimental (cf. `sage.misc.deprecated`) until the bindings are a bit less minimal, in order to be able to make backward-incompatible changes without deprecation while extending them. Of course, the experimental warning would be removed after a while even if nothing changes.  (I've been planning to review this ticket and work on a counterpart of #17186 for weeks, but I didn't find time yet.) What do you think?


---

Comment by vdelecroix created at 2015-05-13 06:47:30

Hi Marc,

Replying to [comment:15 mmezzarobba]:
> Replying to [comment:14 vdelecroix]:
> > 3. Why did you changed the convention for equality? We have
> > {{{
> > sage: a = RIF(1,2)
> > sage: a == a
> > False
> > }}}
> 
> See #17194 (and #17186) for the rationale.

I am fine with the rationale to be changed but I just want them to be the same for interval field and ball field.

Vincent


---

Comment by git created at 2015-05-18 17:23:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cheuberg created at 2015-05-18 17:31:06

Hi Vincent, Hi Marc,

thank you for your comments.

Replying to [comment:14 vdelecroix]:
> Hello,
> 
> 1. In the constructor
> {{{
> super(ComplexBall, self).__init__(parent)
> }}}
>   is much slower than
> {{{
> Element.__init__(self, parent)
> }}}
>

thank you, fixed. I guess that this should also be changed in `RealBall`?
 
> 2. Do you really need to make a subtraction to check if two complex balls are different?!

thanks for pointing this out, `!=` is now the negation of `overlaps`.

Replying to [comment:15 mmezzarobba]:
> As for this ticket, I'd like to suggest marking the whole module as experimental

good point, done.

Replying to [comment:16 vdelecroix]:
> I am fine with the rationale to be changed but I just want them to be the same for interval field and ball field.

I'd also prefer to have the interval field with this behaviour (`a is b => a == b`) but how should that be done?
Won't it need a deprecation and possibly break lots of code?

The current status is that `RealIntervalField` and `RealBallField` (intentionally) differ in their behaviour.

IMHO changing RIF is outside the scope of this ticket.


---

Comment by cheuberg created at 2015-05-18 17:31:06

Changing status from needs_info to needs_review.


---

Comment by mmezzarobba created at 2015-05-23 13:19:04

Looks good to me! Sorry for taking so long to review this ticket.


---

Comment by mmezzarobba created at 2015-05-23 13:19:04

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-23 22:59:57

Resolution: fixed


---

Comment by jdemeyer created at 2018-02-12 14:06:47

Replying to [comment:15 mmezzarobba]:
> See #17194 (and #17186) for the rationale.

Linking to a ticket with 82 comments isn't very helpful. I am asking because #24627 wants to change this.


---

Comment by mmezzarobba created at 2018-02-12 14:23:19

Replying to [comment:21 jdemeyer]:
> Replying to [comment:15 mmezzarobba]:
> > See #17194 (and #17186) for the rationale.
> 
> Linking to a ticket with 82 comments isn't very helpful. I am asking because #24627 wants to change this.

I did my best to sum up the situation in #24627. If you want more detail, I don't really have anything better to suggest than to read the whole discussion.
