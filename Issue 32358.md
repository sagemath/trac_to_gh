# Issue 32358: nose 1.3.7 does not pass self-tests

Issue created by migration from https://trac.sagemath.org/ticket/32595

Original creator: tmonteil

Original creation time: 2021-09-30 10:25:49

CC:  isuruf

Keywords: sdl

nose 1.3.7 does not pass self-tests, see the attached logs, from two different computers.




---

Comment by tmonteil created at 2021-09-30 10:28:12

1_nose-1.3.7.log


---

Attachment

2_nose-1.3.7.log


---

Attachment

Actually, unpacking the tarball and running `grep -R print` seems to show that this version of nose uses Python2 language.

So, we should either remove `nose` (and ensure that everything that depends on it can rely on some alternative), or move to `nose2`.


---

Comment by tmonteil created at 2021-09-30 14:29:53

See also [this proposal for removal](https://groups.google.com/g/sage-devel/c/80SaGKOa2Pk)


---

Comment by tmonteil created at 2021-09-30 14:59:44

The following branch assumes that there is a consensus to remove `nose` from Sage. Note that after #32597 and #32598, Sage does not rely on `nose` anymore.


---

Comment by dimpase created at 2021-09-30 15:17:12

New commits:


---

Comment by tmonteil created at 2021-09-30 15:18:12

To avoid rebasing, this branch will be updated once for all once #32597 and #32598 are merged.


---

Comment by dimpase created at 2021-09-30 15:18:42

looks good, I'm all for removal


---

Comment by git created at 2021-09-30 22:45:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-09-30 22:45:46

I've redone the merge with the latest versions of #32597, #32598; and removed nose from some other scripts.

Still need to adjust `build/pkgs/symengine_py`


---

Comment by isuruf created at 2021-09-30 22:51:05

For `symengine_py`, we only have to change the command from `nosetests` to `pytest`.


---

Comment by mkoeppe created at 2021-10-01 01:14:30

see #32603


---

Comment by git created at 2021-10-02 18:59:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-10-02 19:04:05

Changing status from new to needs_review.


---

Comment by isuruf created at 2021-10-04 19:52:08

Does this need a vote in sage-devel? If so, I suggest starting one vote to remove nose and replace that with pytest as a standard package.


---

Comment by mkoeppe created at 2021-10-04 19:54:36

I don't think there's strictly a need to make `pytest` standard -- we have conditionalized it on SAGE_CHECK. But let's do this anyway. A vote on `pytest` is a good idea. 

No need to vote on `nose` - we remove stuff that is not needed any more all the time.


---

Comment by isuruf created at 2021-10-04 19:57:40

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-10-13 22:50:14

Resolution: fixed
