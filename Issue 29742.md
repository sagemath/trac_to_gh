# Issue 29742: Make rings doctests ready for random seeds

archive/issues_029742.json:
```json
{
    "body": "This ticket makes\n\n```\nsage -t --long --random-seed=n src/sage/rings/\n```\n\npass for different values `n` than just `0`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29979\n\n",
    "created_at": "2020-06-24T21:36:02Z",
    "labels": [
        "doctest framework",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Make rings doctests ready for random seeds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29742",
    "user": "@kliem"
}
```
This ticket makes

```
sage -t --long --random-seed=n src/sage/rings/
```

pass for different values `n` than just `0`.

Issue created by migration from https://trac.sagemath.org/ticket/29979





---

archive/issue_comments_422522.json:
```json
{
    "body": "I have a partial fix. After that at least the following need fixes:\n\n```\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/complex_double.pyx  # 3 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/complex_field.py  # 4 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/complex_interval_field.py  # 3 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/element_givaro.pyx  # 2 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/element_ntl_gf2e.pyx  # 2 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/finite_field_base.pyx  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/finite_field_givaro.py  # 2 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/finite_field_ntl_gf2e.py  # 2 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/integer_mod_ring.py  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/integer_ring.pyx  # 10 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/number_field/order.py  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/padics/generic_nodes.py  # 3 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/padics/padic_extension_generic.py  # 4 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/padics/tests.py  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/pari_ring.py  # 3 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/cyclotomic.pyx  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/multi_polynomial_element.py  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/multi_polynomial_ideal.py  # 5 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/multi_polynomial_ring_base.pyx  # 13 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/pbori.pyx  # 27 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_element.pyx  # 4 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_quotient_ring.py  # 1 doctest failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_ring.py  # 7 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/skew_polynomial_element.pyx  # 15 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/rational_field.py  # 6 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/real_double.pyx  # 2 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/real_mpfi.pyx  # 5 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/real_mpfr.pyx  # 12 doctests failed\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/ring.pyx  # 1 doctest failed\n```\n",
    "created_at": "2020-06-24T21:37:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422522",
    "user": "@kliem"
}
```

I have a partial fix. After that at least the following need fixes:

```
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/complex_double.pyx  # 3 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/complex_field.py  # 4 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/complex_interval_field.py  # 3 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/element_givaro.pyx  # 2 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/element_ntl_gf2e.pyx  # 2 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/finite_field_base.pyx  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/finite_field_givaro.py  # 2 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/finite_field_ntl_gf2e.py  # 2 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/finite_rings/integer_mod_ring.py  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/integer_ring.pyx  # 10 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/number_field/order.py  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/padics/generic_nodes.py  # 3 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/padics/padic_extension_generic.py  # 4 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/padics/tests.py  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/pari_ring.py  # 3 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/cyclotomic.pyx  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/multi_polynomial_element.py  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/multi_polynomial_ideal.py  # 5 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/multi_polynomial_ring_base.pyx  # 13 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/pbori.pyx  # 27 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_element.pyx  # 4 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_quotient_ring.py  # 1 doctest failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_ring.py  # 7 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/skew_polynomial_element.pyx  # 15 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/rational_field.py  # 6 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/real_double.pyx  # 2 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/real_mpfi.pyx  # 5 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/real_mpfr.pyx  # 12 doctests failed
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/ring.pyx  # 1 doctest failed
```




---

archive/issue_comments_422523.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-06-24T21:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422523",
    "user": "@kliem"
}
```

New commits:



---

archive/issue_comments_422524.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422524",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_422525.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-06-29T21:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422525",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_422526.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-29T21:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422526",
    "user": "@kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_422527.json:
```json
{
    "body": "If a reviewer feels like we should split this into several tickets, then this is also fine with me (e.g. start with some submodules).",
    "created_at": "2021-06-29T21:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422527",
    "user": "@kliem"
}
```

If a reviewer feels like we should split this into several tickets, then this is also fine with me (e.g. start with some submodules).



---

archive/issue_comments_422528.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-29T21:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422528",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422529.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-03T06:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422529",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422530.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-03T07:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422530",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422531.json:
```json
{
    "body": "There are a few more tests that fail (some of these might be duplicates):\n\n```\nsage -t --long --warn-long 62.5 --random-seed=3000 src/sage/rings/tate_algebra_element.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3000 src/sage/rings/tests.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3002 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3002 src/sage/rings/padics/padic_generic_element.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3003 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3004 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3007 src/sage/rings/polynomial/ore_function_field.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3009 src/sage/rings/polynomial/ore_polynomial_element.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3009 src/sage/rings/tests.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3011 src/sage/rings/polynomial/ore_function_element.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3012 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3013 src/sage/rings/continued_fraction.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3014 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3017 src/sage/rings/invariants/invariant_theory.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3019 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3023 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3028 src/sage/rings/padics/padic_generic_element.pyx  # 2 doctests failed\nsage -t --long --warn-long 62.5 --random-seed=3030 src/sage/rings/tests.py  # 7 doctests failed\nsage -t --long --warn-long 62.5 --random-seed=3031 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3035 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3037 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3040 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3042 src/sage/rings/padics/padic_generic_element.pyx  # 2 doctests failed\nsage -t --long --warn-long 62.5 --random-seed=3043 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3043 src/sage/rings/invariants/invariant_theory.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3043 src/sage/rings/polynomial/ore_function_element.py  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3049 src/sage/rings/tate_algebra_element.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3050 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed\nsage -t --long --warn-long 62.5 --random-seed=3050 src/sage/rings/padics/padic_generic_element.pyx  # 1 doctest failed\n```\n",
    "created_at": "2021-07-03T09:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422531",
    "user": "@mwageringel"
}
```

There are a few more tests that fail (some of these might be duplicates):

```
sage -t --long --warn-long 62.5 --random-seed=3000 src/sage/rings/tate_algebra_element.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3000 src/sage/rings/tests.py  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3002 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3002 src/sage/rings/padics/padic_generic_element.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3003 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3004 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3007 src/sage/rings/polynomial/ore_function_field.py  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3009 src/sage/rings/polynomial/ore_polynomial_element.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3009 src/sage/rings/tests.py  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3011 src/sage/rings/polynomial/ore_function_element.py  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3012 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3013 src/sage/rings/continued_fraction.py  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3014 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3017 src/sage/rings/invariants/invariant_theory.py  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3019 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3023 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3028 src/sage/rings/padics/padic_generic_element.pyx  # 2 doctests failed
sage -t --long --warn-long 62.5 --random-seed=3030 src/sage/rings/tests.py  # 7 doctests failed
sage -t --long --warn-long 62.5 --random-seed=3031 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3035 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3037 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3040 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3042 src/sage/rings/padics/padic_generic_element.pyx  # 2 doctests failed
sage -t --long --warn-long 62.5 --random-seed=3043 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3043 src/sage/rings/invariants/invariant_theory.py  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3043 src/sage/rings/polynomial/ore_function_element.py  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3049 src/sage/rings/tate_algebra_element.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3050 src/sage/rings/finite_rings/integer_mod.pyx  # 1 doctest failed
sage -t --long --warn-long 62.5 --random-seed=3050 src/sage/rings/padics/padic_generic_element.pyx  # 1 doctest failed
```




---

archive/issue_comments_422532.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-03T09:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422532",
    "user": "@mwageringel"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_422533.json:
```json
{
    "body": "Thanks for catching those. It's really hard to catch all those one in a thousand failures in all of sage...",
    "created_at": "2021-07-03T09:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422533",
    "user": "@kliem"
}
```

Thanks for catching those. It's really hard to catch all those one in a thousand failures in all of sage...



---

archive/issue_comments_422534.json:
```json
{
    "body": "And some of the errors are really something.\n\nIn `src/sage/rings/tests.py` we are trying to construct a relative number field by only checking that the polynomial is irreducible over `ZZ`...",
    "created_at": "2021-07-03T18:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422534",
    "user": "@kliem"
}
```

And some of the errors are really something.

In `src/sage/rings/tests.py` we are trying to construct a relative number field by only checking that the polynomial is irreducible over `ZZ`...



---

archive/issue_comments_422535.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2021-07-03T21:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422535",
    "user": "@kliem"
}
```

Last 10 new commits:



---

archive/issue_comments_422536.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-03T21:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422536",
    "user": "@kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_422537.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-04T12:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422537",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422538.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-04T15:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422538",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422539.json:
```json
{
    "body": "Replying to [comment:17 gh-kliem]:\n> It's really hard to catch all those one in a thousand failures in all of sage...\n\nI agree and I appreciate all the work you put into this a lot. In the last commit, I have just added a few small fixes for some other test failures I found.",
    "created_at": "2021-07-04T15:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422539",
    "user": "@mwageringel"
}
```

Replying to [comment:17 gh-kliem]:
> It's really hard to catch all those one in a thousand failures in all of sage...

I agree and I appreciate all the work you put into this a lot. In the last commit, I have just added a few small fixes for some other test failures I found.



---

archive/issue_comments_422540.json:
```json
{
    "body": "The `continue_fraction_gosper.py` doctest sometimes fails for negative period as well. I'm not sure if this is a bug or just the doctest being incorrect::\n\n\n```\nsage: def foo(a, b, c, d): \n....:      from sage.rings.continued_fraction_gosper import gosper_iterator \n....:      x = continued_fraction(([1,2],[3,4])); i = iter(gosper_iterator(a,b,c,d,x)) \n....:      l = list(i) \n....:      preperiod_length = i.output_preperiod_length \n....:      preperiod = l[:preperiod_length] \n....:      period = [abs(w) for w in l[preperiod_length:]] \n....:      c == d == 0 or continued_fraction((preperiod, period), x.value()) == continued_fraction((a*x.value()+b)/(c*x.value()+d)) \nsage: for i in range(-10, 11): \n....:     for j in range(-10, 11): \n....:         try: \n....:             foo(0,0,i,j) \n....:         except: \n....:             print(\"foo(0, 0, %s, %s)\" % (i, j)) \n....:              \n....:                                                                                                                                 \nfoo(0, 0, -9, 10)\nfoo(0, 0, -8, 9)\nfoo(0, 0, -8, 10)\nfoo(0, 0, -7, 8)\nfoo(0, 0, -7, 9)\nfoo(0, 0, -7, 10)\nfoo(0, 0, -6, 7)\nfoo(0, 0, -6, 8)\nfoo(0, 0, -6, 9)\nfoo(0, 0, -5, 6)\nfoo(0, 0, -5, 7)\nfoo(0, 0, -4, 5)\nfoo(0, 0, -4, 6)\nfoo(0, 0, -3, 4)\nfoo(0, 0, -2, 3)\nfoo(0, 0, 2, -3)\nfoo(0, 0, 3, -4)\nfoo(0, 0, 4, -6)\nfoo(0, 0, 4, -5)\nfoo(0, 0, 5, -7)\nfoo(0, 0, 5, -6)\nfoo(0, 0, 6, -9)\nfoo(0, 0, 6, -8)\nfoo(0, 0, 6, -7)\nfoo(0, 0, 7, -10)\nfoo(0, 0, 7, -9)\nfoo(0, 0, 7, -8)\nfoo(0, 0, 8, -10)\nfoo(0, 0, 8, -9)\nfoo(0, 0, 9, -10)\n```\n",
    "created_at": "2021-07-05T09:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422540",
    "user": "@kliem"
}
```

The `continue_fraction_gosper.py` doctest sometimes fails for negative period as well. I'm not sure if this is a bug or just the doctest being incorrect::


```
sage: def foo(a, b, c, d): 
....:      from sage.rings.continued_fraction_gosper import gosper_iterator 
....:      x = continued_fraction(([1,2],[3,4])); i = iter(gosper_iterator(a,b,c,d,x)) 
....:      l = list(i) 
....:      preperiod_length = i.output_preperiod_length 
....:      preperiod = l[:preperiod_length] 
....:      period = [abs(w) for w in l[preperiod_length:]] 
....:      c == d == 0 or continued_fraction((preperiod, period), x.value()) == continued_fraction((a*x.value()+b)/(c*x.value()+d)) 
sage: for i in range(-10, 11): 
....:     for j in range(-10, 11): 
....:         try: 
....:             foo(0,0,i,j) 
....:         except: 
....:             print("foo(0, 0, %s, %s)" % (i, j)) 
....:              
....:                                                                                                                                 
foo(0, 0, -9, 10)
foo(0, 0, -8, 9)
foo(0, 0, -8, 10)
foo(0, 0, -7, 8)
foo(0, 0, -7, 9)
foo(0, 0, -7, 10)
foo(0, 0, -6, 7)
foo(0, 0, -6, 8)
foo(0, 0, -6, 9)
foo(0, 0, -5, 6)
foo(0, 0, -5, 7)
foo(0, 0, -4, 5)
foo(0, 0, -4, 6)
foo(0, 0, -3, 4)
foo(0, 0, -2, 3)
foo(0, 0, 2, -3)
foo(0, 0, 3, -4)
foo(0, 0, 4, -6)
foo(0, 0, 4, -5)
foo(0, 0, 5, -7)
foo(0, 0, 5, -6)
foo(0, 0, 6, -9)
foo(0, 0, 6, -8)
foo(0, 0, 6, -7)
foo(0, 0, 7, -10)
foo(0, 0, 7, -9)
foo(0, 0, 7, -8)
foo(0, 0, 8, -10)
foo(0, 0, 8, -9)
foo(0, 0, 9, -10)
```




---

archive/issue_comments_422541.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-05T18:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422541",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422542.json:
```json
{
    "body": "Replying to [comment:27 gh-kliem]:\n> The `continue_fraction_gosper.py` doctest sometimes fails for negative period as well. I'm not sure if this is a bug or just the doctest being incorrect::\n\nI am not sure either. I have opened #32127 for this problem and have now marked this test as well as the other tests for which I opened tickets yesterday as `not tested`.",
    "created_at": "2021-07-05T18:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422542",
    "user": "@mwageringel"
}
```

Replying to [comment:27 gh-kliem]:
> The `continue_fraction_gosper.py` doctest sometimes fails for negative period as well. I'm not sure if this is a bug or just the doctest being incorrect::

I am not sure either. I have opened #32127 for this problem and have now marked this test as well as the other tests for which I opened tickets yesterday as `not tested`.



---

archive/issue_comments_422543.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-05T20:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422543",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422544.json:
```json
{
    "body": "I have now reviewed your code and made a few small adjustments. The line I removed in `multi_polynomial_ring_base` seems redundant since `R` is the base ring of `S`, but I think the test might have failed if `f` happened to be zero.\n\nDo you agree with my changes? It is inevitable that there are still sporadic failures, but to me the current branch seems robust enough for now. Nice work.",
    "created_at": "2021-07-05T20:24:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422544",
    "user": "@mwageringel"
}
```

I have now reviewed your code and made a few small adjustments. The line I removed in `multi_polynomial_ring_base` seems redundant since `R` is the base ring of `S`, but I think the test might have failed if `f` happened to be zero.

Do you agree with my changes? It is inevitable that there are still sporadic failures, but to me the current branch seems robust enough for now. Nice work.



---

archive/issue_comments_422545.json:
```json
{
    "body": "Thanks for the improvements.",
    "created_at": "2021-07-06T07:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422545",
    "user": "@kliem"
}
```

Thanks for the improvements.



---

archive/issue_comments_422546.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-06T19:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422546",
    "user": "@mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_422547.json:
```json
{
    "body": "So we can set this ticket to positive then.",
    "created_at": "2021-07-06T19:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422547",
    "user": "@mwageringel"
}
```

So we can set this ticket to positive then.



---

archive/issue_comments_422548.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-07-06T19:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422548",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_422549.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-07-06T19:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422549",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_422550.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-06T19:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422550",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_422551.json:
```json
{
    "body": "Thank you.",
    "created_at": "2021-07-06T19:27:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422551",
    "user": "@kliem"
}
```

Thank you.



---

archive/issue_comments_422552.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2021-07-23T22:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422552",
    "user": "vbraun"
}
```

Merge conflict



---

archive/issue_comments_422553.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-23T22:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422553",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_422554.json:
```json
{
    "body": "Rebased.\n----\nNew commits:",
    "created_at": "2021-08-09T11:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422554",
    "user": "@kliem"
}
```

Rebased.
----
New commits:



---

archive/issue_comments_422555.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2021-08-09T11:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422555",
    "user": "@kliem"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_422556.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-08-29T09:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29742",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29742#issuecomment-422556",
    "user": "vbraun"
}
```

Resolution: fixed
