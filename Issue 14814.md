# Issue 14814: "vector is immutable" in polyhedron.integral_points()

archive/issues_014814.json:
```json
{
    "body": "CC:  novoselt\n\nIf the more sophisticated point counting algorithm is used then one gets the following error\n\n```\nsage: poly=Polyhedron(vertices=[(1, 0, 0, 0), (1, 2, 0, 0), (1, 0, 2, 0), (1, 0, 2, 6), (-11, -4, -6, -12), (-11, -4, -6, -6), (13, 6, 8, 12)])\nsage: poly.integral_points()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-8-4f101e993c5f> in <module>()\n----> 1 poly.integral_points()\n\n/home/vbraun/Code/sage.git/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in integral_points(self, threshold)\n   3866         for simplex in triangulation:\n   3867             triang_vertices = [ self.Vrepresentation(i) for i in simplex ]\n-> 3868             new_points = simplex_points(triang_vertices)\n   3869             for p in new_points:\n   3870                 p.set_immutable()\n\n/home/vbraun/Code/sage.git/local/lib/python2.7/site-packages/sage/geometry/integral_points.so in sage.geometry.integral_points.simplex_points (sage/geometry/integral_points.c:2884)()\n\n/home/vbraun/Code/sage.git/local/lib/python2.7/site-packages/sage/geometry/integral_points.so in sage.geometry.integral_points.translate_points (sage/geometry/integral_points.c:3370)()\n\n/home/vbraun/Code/sage.git/local/lib/python2.7/site-packages/sage/modules/vector_integer_dense.so in sage.modules.vector_integer_dense.Vector_integer_dense.__setitem__ (sage/modules/vector_integer_dense.c:3624)()\n\nValueError: vector is immutable; please change a copy instead (use copy())\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/15051\n\n",
    "created_at": "2013-08-16T12:36:31Z",
    "labels": [
        "geometry",
        "major",
        "bug"
    ],
    "title": "\"vector is immutable\" in polyhedron.integral_points()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14814",
    "user": "vbraun"
}
```
CC:  novoselt

If the more sophisticated point counting algorithm is used then one gets the following error

```
sage: poly=Polyhedron(vertices=[(1, 0, 0, 0), (1, 2, 0, 0), (1, 0, 2, 0), (1, 0, 2, 6), (-11, -4, -6, -12), (-11, -4, -6, -6), (13, 6, 8, 12)])
sage: poly.integral_points()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-8-4f101e993c5f> in <module>()
----> 1 poly.integral_points()

/home/vbraun/Code/sage.git/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in integral_points(self, threshold)
   3866         for simplex in triangulation:
   3867             triang_vertices = [ self.Vrepresentation(i) for i in simplex ]
-> 3868             new_points = simplex_points(triang_vertices)
   3869             for p in new_points:
   3870                 p.set_immutable()

/home/vbraun/Code/sage.git/local/lib/python2.7/site-packages/sage/geometry/integral_points.so in sage.geometry.integral_points.simplex_points (sage/geometry/integral_points.c:2884)()

/home/vbraun/Code/sage.git/local/lib/python2.7/site-packages/sage/geometry/integral_points.so in sage.geometry.integral_points.translate_points (sage/geometry/integral_points.c:3370)()

/home/vbraun/Code/sage.git/local/lib/python2.7/site-packages/sage/modules/vector_integer_dense.so in sage.modules.vector_integer_dense.Vector_integer_dense.__setitem__ (sage/modules/vector_integer_dense.c:3624)()

ValueError: vector is immutable; please change a copy instead (use copy())
```


Issue created by migration from https://trac.sagemath.org/ticket/15051





---

archive/issue_comments_188995.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-16T13:43:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14814#issuecomment-188995",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_188996.json:
```json
{
    "body": "Would be nice to add a comment on what is tested and mention the ticket!",
    "created_at": "2013-08-16T16:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14814#issuecomment-188996",
    "user": "novoselt"
}
```

Would be nice to add a comment on what is tested and mention the ticket!



---

archive/issue_comments_188997.json:
```json
{
    "body": "I think its pretty clear what the doctests is for, even if there is no link to this ticket: We test the function on immutable input. Commenting the obvious is bad style.",
    "created_at": "2013-08-16T16:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14814#issuecomment-188997",
    "user": "vbraun"
}
```

I think its pretty clear what the doctests is for, even if there is no link to this ticket: We test the function on immutable input. Commenting the obvious is bad style.



---

archive/issue_comments_188998.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-16T17:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14814#issuecomment-188998",
    "user": "novoselt"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_188999.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-12-20T22:52:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14814#issuecomment-188999",
    "user": "vbraun"
}
```

Resolution: fixed
