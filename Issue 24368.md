# Issue 24368: Upgrading from older Python versions doesn't work

Issue created by migration from https://trac.sagemath.org/ticket/24605

Original creator: jdemeyer

Original creation time: 2018-01-29 08:52:26

CC:  embray

This has been reported several time on sage-devel but now I finally managed to reproduce it.


---

Comment by jdemeyer created at 2018-01-29 09:34:33

New commits:


---

Comment by jdemeyer created at 2018-01-29 09:34:33

Changing status from new to needs_review.


---

Comment by embray created at 2018-01-30 12:32:05

I don't like the idea of removing the existing libs before building.  Let me think about this a bit.


---

Comment by jdemeyer created at 2018-01-30 12:58:01

OK, I'll let you think a bit. But if you cannot come up with a better solution, please accept this one which works.


---

Comment by embray created at 2018-01-30 14:50:02

It is annoying that, in this sense, Python's build process is basically incompatible with setting a custom rpath.  I wonder if this has been discussed anywhere else.


---

Comment by jdemeyer created at 2018-01-30 14:53:17

The unusual thing about Python is that it actually runs itself as part of the build process...


---

Comment by jdemeyer created at 2018-02-09 18:40:23

Just wanted to point out that we should fix this before the next Python upgrade. But as there isn't even a plan for 2.7.15 at the moment, that doesn't look urgent.


---

Comment by jdemeyer created at 2018-04-06 08:11:51

Python 2.7.15 is planned for the end of this month.


---

Comment by embray created at 2018-04-06 13:49:54

Changing status from needs_review to positive_review.


---

Comment by embray created at 2018-04-06 13:49:54

I'm okay with it as a temporary solution. I think a better solution is needed in the long term, but that could come more or less automatically with #22510 (which would simplify completely uninstalling a package before upgrading it).  I'm working on updating that work again so that we can start using it soon, hopefully.


---

Comment by jhpalmieri created at 2018-04-18 20:26:10

I feel like I'm missing something: the ticket description deals with Python 2 but the branch only deals with Python 3. What's going on?


---

Comment by jdemeyer created at 2018-04-19 07:30:25

There is a symlink from the Python 2 build scripts to the Python 3 build scripts.


---

Comment by git created at 2018-04-19 12:42:53

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:


---

Comment by git created at 2018-04-19 12:42:53

Changing status from positive_review to needs_review.


---

Comment by jdemeyer created at 2018-04-19 12:43:40

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2018-04-19 12:43:40

Rebased to 8.2.rc3


---

Comment by vbraun created at 2018-05-08 17:27:52

Resolution: fixed
