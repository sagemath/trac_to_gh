# Issue 22979: Matrix of a module morphism who domain is 0 is always 0x0

Issue created by migration from https://trac.sagemath.org/ticket/23216

Original creator: tscrim

Original creation time: 2017-06-11 13:01:16

CC:  sage-combinat nthiery darij


```
sage: X = CombinatorialFreeModule(QQ, [])
sage: Y = CombinatorialFreeModule(QQ, [1,2,3])
sage: Hom(X,Y).zero().matrix()
[]
sage: Hom(X,Y).zero().matrix().parent()
Full MatrixSpace of 0 by 0 dense matrices over Rational Field
```

The result should be a 0x3 matrix. We need to explicitly compute the dimension of the codomain and pass that to the matrix constructor.


---

Comment by tscrim created at 2017-06-11 13:04:22

New commits:


---

Comment by tscrim created at 2017-06-11 13:04:22

Changing status from new to needs_review.


---

Comment by git created at 2017-06-11 13:05:56

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-06-11 13:14:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by darij created at 2017-06-11 13:15:05

Good catch! But seeing that [the `matrix` constructor](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/matrix/constructor.pyx) does a ton of input normalization but no coercing-to-the-base-ring, wouldn't it be better to sidestep it and just call `MatrixSpace(base_ring, len(basis_keys), self.codomain().dimension(), sparse=False)([on_basis(x)._vector_() for x in basis_keys])` ?


---

Comment by git created at 2017-06-11 13:31:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-06-11 13:32:08

Good point, done (the default is for the matrix space to be dense).


---

Comment by darij created at 2017-06-11 14:05:14

LGTM! If the tests pass, set this to p_r.


---

Comment by tscrim created at 2017-06-11 14:08:41

Thank you.


---

Comment by tscrim created at 2017-06-11 14:08:41

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-06-12 18:01:36

Resolution: fixed
