# Issue 8678: Improvements for morphisms of ModulesWithBasis

archive/issues_008678.json:
```json
{
    "body": "Assignee: nthiery\n\nCC:  sage-combinat\n\nKeywords: homsest\n\nThe upcoming patch in the Sage-Combinat queue will implement:\n- inverses for morphisms of finite dimensional vector spaces\n- tensor products of morphisms\n\nAt this occasion, it will start a bit of cleanup in the category framework for homsets\n\nIssue created by migration from https://trac.sagemath.org/ticket/8678\n\n",
    "created_at": "2010-04-12T21:20:15Z",
    "labels": [
        "categories",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "Improvements for morphisms of ModulesWithBasis",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/8678",
    "user": "nthiery"
}
```
Assignee: nthiery

CC:  sage-combinat

Keywords: homsest

The upcoming patch in the Sage-Combinat queue will implement:
- inverses for morphisms of finite dimensional vector spaces
- tensor products of morphisms

At this occasion, it will start a bit of cleanup in the category framework for homsets

Issue created by migration from https://trac.sagemath.org/ticket/8678





---

archive/issue_comments_078986.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2010-07-13T19:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78986",
    "user": "nthiery"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_078987.json:
```json
{
    "body": "Changing keywords from \"homsest\" to \"homsets, module morphisms\".",
    "created_at": "2010-07-13T19:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78987",
    "user": "nthiery"
}
```

Changing keywords from "homsest" to "homsets, module morphisms".



---

archive/issue_comments_078988.json:
```json
{
    "body": "This is is a very old ticket. Anyway, can I find the patch that fixes `_test_category` somewhere? This also fails for #15154. Or should I just disable these tests?",
    "created_at": "2013-09-11T12:39:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78988",
    "user": "saraedum"
}
```

This is is a very old ticket. Anyway, can I find the patch that fixes `_test_category` somewhere? This also fails for #15154. Or should I just disable these tests?



---

archive/issue_comments_078989.json:
```json
{
    "body": "Replying to [comment:3 saraedum]:\n> This is is a very old ticket. Anyway, can I find the patch that fixes `_test_category` somewhere? This also fails for #15154. Or should I just disable these tests?\n\nSince there is no reply here, I created a partial fix at #15232.",
    "created_at": "2013-09-26T23:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78989",
    "user": "saraedum"
}
```

Replying to [comment:3 saraedum]:
> This is is a very old ticket. Anyway, can I find the patch that fixes `_test_category` somewhere? This also fails for #15154. Or should I just disable these tests?

Since there is no reply here, I created a partial fix at #15232.



---

archive/issue_comments_078990.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-29T05:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78990",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078991.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-06-29T05:37:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78991",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078992.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-01T22:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78992",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078993.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-03T01:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78993",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078994.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-11T11:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78994",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078995.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-11T12:00:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78995",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078996.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-11T12:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78996",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078997.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-11T12:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78997",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078998.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-11T13:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78998",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_078999.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-11T14:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-78999",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079000.json:
```json
{
    "body": "Now mosts tests pass. The remaining failing ones are because of some finite dimensional algebras over a finite field become finite, hence finite semigroups. And currently finite semigroups are automatically made into enumerated sets using their generators; however those generators are not always available.",
    "created_at": "2014-07-11T14:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79000",
    "user": "nthiery"
}
```

Now mosts tests pass. The remaining failing ones are because of some finite dimensional algebras over a finite field become finite, hence finite semigroups. And currently finite semigroups are automatically made into enumerated sets using their generators; however those generators are not always available.



---

archive/issue_comments_079001.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-11T14:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79001",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079002.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-15T10:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79002",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079003.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-18T09:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79003",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079004.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-18T09:33:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79004",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079005.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-20T04:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79005",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079006.json:
```json
{
    "body": "From the diff, you've accidentally removed the `i += 1`, so it should run forever (provided the 0th component is non-trivial). Ah what I wouldn't give for a python builtin `do-while` loop...",
    "created_at": "2014-08-20T05:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79006",
    "user": "tscrim"
}
```

From the diff, you've accidentally removed the `i += 1`, so it should run forever (provided the 0th component is non-trivial). Ah what I wouldn't give for a python builtin `do-while` loop...



---

archive/issue_comments_079007.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-08-28T20:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79007",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079008.json:
```json
{
    "body": "Humph, so two points:\n\n1- The last push correct a bug in TriangularModuleMorphism with on_basis.\n\n2- I did not know that my push would have change the branch (but I should as it is a 'private' one) and do not know how to replace back the right branch, which is *u/nthiery/categories/module-morphisms-8678*. Sorry for the noise :s\n\nAt least, if my correction is wrong it should be very easy to reset :)\n----\nNew commits:",
    "created_at": "2014-09-01T17:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79008",
    "user": "virmaux"
}
```

Humph, so two points:

1- The last push correct a bug in TriangularModuleMorphism with on_basis.

2- I did not know that my push would have change the branch (but I should as it is a 'private' one) and do not know how to replace back the right branch, which is *u/nthiery/categories/module-morphisms-8678*. Sorry for the noise :s

At least, if my correction is wrong it should be very easy to reset :)
----
New commits:



---

archive/issue_comments_079009.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2014-10-15T15:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79009",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_079010.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2014-10-15T15:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79010",
    "user": "SimonKing"
}
```

Last 10 new commits:



---

archive/issue_comments_079011.json:
```json
{
    "body": "#17160 I am working on now should fix the failing tests.",
    "created_at": "2014-10-15T15:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79011",
    "user": "nthiery"
}
```

#17160 I am working on now should fix the failing tests.



---

archive/issue_comments_079012.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-05T18:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79012",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079013.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-06T22:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79013",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079014.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-07T08:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79014",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079015.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-10T13:13:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79015",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079016.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-10T14:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79016",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079017.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-10T20:56:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79017",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079018.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-10T22:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79018",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079019.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-10T22:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79019",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079020.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-10T22:55:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79020",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079021.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-10T23:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79021",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079022.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-11T09:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79022",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079023.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-11T09:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79023",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079024.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-14T02:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79024",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079025.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-14T05:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79025",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079026.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-14T05:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79026",
    "user": "nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_079027.json:
```json
{
    "body": "Hi Franco,\n\nI believe I have taken care of everything we discussed on Monday. So back to needs review!\nThere remains to little points to be discussed in Davis:\n\n- Should the user documentation about triangular morphisms\n  be in the class or in module_morphism?\n\n- triangular=True led to triangular=\"lower\" while the\n  default value for triangular is \"upper\"\n\nCheers from warm Davis!\n                                                    Nicolas",
    "created_at": "2015-03-14T05:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79027",
    "user": "nthiery"
}
```

Hi Franco,

I believe I have taken care of everything we discussed on Monday. So back to needs review!
There remains to little points to be discussed in Davis:

- Should the user documentation about triangular morphisms
  be in the class or in module_morphism?

- triangular=True led to triangular="lower" while the
  default value for triangular is "upper"

Cheers from warm Davis!
                                                    Nicolas



---

archive/issue_comments_079028.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-14T14:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79028",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079029.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-14T14:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79029",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079030.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-14T15:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79030",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079031.json:
```json
{
    "body": "Needs review, but depends on a blue ticket, and work issues listed?",
    "created_at": "2015-03-14T15:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79031",
    "user": "darij"
}
```

Needs review, but depends on a blue ticket, and work issues listed?



---

archive/issue_comments_079032.json:
```json
{
    "body": "Just a tip: given the many modifications here and there, and the new classes, it's might be simpler to review directly the whole new file src/sage/modules/module_with_basis_morphism.py rather than looking at its diff. Otherwise, I took care of the moving of the code from modules_with_basis.py in a separate commit, so that you can diff from there.",
    "created_at": "2015-03-14T15:05:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79032",
    "user": "nthiery"
}
```

Just a tip: given the many modifications here and there, and the new classes, it's might be simpler to review directly the whole new file src/sage/modules/module_with_basis_morphism.py rather than looking at its diff. Otherwise, I took care of the moving of the code from modules_with_basis.py in a separate commit, so that you can diff from there.



---

archive/issue_comments_079033.json:
```json
{
    "body": "I had forgotten to clear the issue. #17160 is just waiting for feedback on the sage mailing list to be finalized. In any cases both tickets are rather independent, so the review of the code of this one can start right away. Of course it will be necessary to rerun the tests once the failures coming from #17160 will be fixed",
    "created_at": "2015-03-14T15:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79033",
    "user": "nthiery"
}
```

I had forgotten to clear the issue. #17160 is just waiting for feedback on the sage mailing list to be finalized. In any cases both tickets are rather independent, so the review of the code of this one can start right away. Of course it will be necessary to rerun the tests once the failures coming from #17160 will be fixed



---

archive/issue_comments_079034.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-15T05:31:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79034",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079035.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-17T06:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79035",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079036.json:
```json
{
    "body": "Changing keywords from \"homsets, module morphisms\" to \"homsets, module morphisms, days64\".",
    "created_at": "2015-03-18T22:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79036",
    "user": "saliola"
}
```

Changing keywords from "homsets, module morphisms" to "homsets, module morphisms, days64".



---

archive/issue_comments_079037.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-03-18T22:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79037",
    "user": "saliola"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_079038.json:
```json
{
    "body": "Here is my review. I pushed some typo fixes, improved some of the documentation and added a few doctests. Here are a few issues and questions:\n\n- I don't understand the comment in ``src/sage/categories/finitely_generated_semigroups.py``:\n\n```\n# TODO: update transitive ideal\n```\n\n\n- a couple of doctests include the following line:\n\n```\nsage: import __main__; __main__.f = f  \n```\n\ncan you explain why this is necessary?\n\n- line 1015 of ``src/sage/modules/module_with_basis_morphism.py``: the doc says this should work over an ring, so perhaps the following is not a valid assumption?\n\n```\nc = c / s[j]  # the base ring is a field\n```\n\n\n- the doctests don't pass, but this seems to be related to #17160\n----\nNew commits:",
    "created_at": "2015-03-18T22:24:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79038",
    "user": "saliola"
}
```

Here is my review. I pushed some typo fixes, improved some of the documentation and added a few doctests. Here are a few issues and questions:

- I don't understand the comment in ``src/sage/categories/finitely_generated_semigroups.py``:

```
# TODO: update transitive ideal
```


- a couple of doctests include the following line:

```
sage: import __main__; __main__.f = f  
```

can you explain why this is necessary?

- line 1015 of ``src/sage/modules/module_with_basis_morphism.py``: the doc says this should work over an ring, so perhaps the following is not a valid assumption?

```
c = c / s[j]  # the base ring is a field
```


- the doctests don't pass, but this seems to be related to #17160
----
New commits:



---

archive/issue_comments_079039.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T08:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79039",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079040.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T08:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79040",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079041.json:
```json
{
    "body": "Hi Franco!\n\nReplying to [comment:60 saliola]:\n\n> Here is my review.  I pushed some typo fixes, improved some of the\n> documentation and added a few doctests.\n\nThanks! I double checked your changes and am happy with them. This\nprompted a second pass of little things here and there to make the doc\nmore uniform. I also implemented the two we had discussed.\n\n> Here are a few issues and questions:\n> \n> - I don't understand the comment in ``src/sage/categories/finitely_generated_semigroups.py``:\n> {{{\n> # TODO: update transitive ideal\n> }}}\n\nThe code uses TransitiveIdeal which is being deprecated in favor of\nRecursivelyEnumeratedSet. I have added this as comment on #17160.\n\n> - a couple of doctests include the following line:\n> {{{\n> sage: import __main__; __main__.f = f  \n> }}}\n> can you explain why this is necessary?\n\nA function defined interactively is not picklable, which prevents us\nfrom using it to test the pickling of objects built upon them. This\nclassical trick fakes f being defined in a Python module.\n\n> - line 1015 of ``src/sage/modules/module_with_basis_morphism.py``: the doc says this should work over an ring, so perhaps the following is not a valid assumption?\n> {{{\n> c = c / s[j]  # the base ring is a field\n> }}}\n\nThe documentation mentions:\n\n```\n        - ``self`` -- a triangular morphism over a field, or a\n          unitriangular morphism over a ring\n```\n\nwhich is tested a couple lines above:\n\n```\n        if G.base_ring() not in Fields and not self._unitriangular:\n            raise NotImplementedError, \"coreduce for a triangular but not unitriangular morphism over a ring\"\n```\n\n\n> - the doctests don't pass, but this seems to be related to #17160\n\nYup. Next step is to cleanup #17160. And then we will know better if\nthere are a couple trivial doctests that need to be updated here.\n\nCheers,\n                                Nicolas",
    "created_at": "2015-03-19T08:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79041",
    "user": "nthiery"
}
```

Hi Franco!

Replying to [comment:60 saliola]:

> Here is my review.  I pushed some typo fixes, improved some of the
> documentation and added a few doctests.

Thanks! I double checked your changes and am happy with them. This
prompted a second pass of little things here and there to make the doc
more uniform. I also implemented the two we had discussed.

> Here are a few issues and questions:
> 
> - I don't understand the comment in ``src/sage/categories/finitely_generated_semigroups.py``:
> {{{
> # TODO: update transitive ideal
> }}}

The code uses TransitiveIdeal which is being deprecated in favor of
RecursivelyEnumeratedSet. I have added this as comment on #17160.

> - a couple of doctests include the following line:
> {{{
> sage: import __main__; __main__.f = f  
> }}}
> can you explain why this is necessary?

A function defined interactively is not picklable, which prevents us
from using it to test the pickling of objects built upon them. This
classical trick fakes f being defined in a Python module.

> - line 1015 of ``src/sage/modules/module_with_basis_morphism.py``: the doc says this should work over an ring, so perhaps the following is not a valid assumption?
> {{{
> c = c / s[j]  # the base ring is a field
> }}}

The documentation mentions:

```
        - ``self`` -- a triangular morphism over a field, or a
          unitriangular morphism over a ring
```

which is tested a couple lines above:

```
        if G.base_ring() not in Fields and not self._unitriangular:
            raise NotImplementedError, "coreduce for a triangular but not unitriangular morphism over a ring"
```


> - the doctests don't pass, but this seems to be related to #17160

Yup. Next step is to cleanup #17160. And then we will know better if
there are a couple trivial doctests that need to be updated here.

Cheers,
                                Nicolas



---

archive/issue_comments_079042.json:
```json
{
    "body": "The latest branch causes some problems:\n\n```\n> git trac pull\n> sage -br\n**********************************************************************\n\nOops, Sage crashed. We do our best to make it stable, but...\n```\n\n\nThe error message in the crash report is:\n\n```\nImportError: No module named modules_with_basis.morphism\n```\n",
    "created_at": "2015-03-19T15:13:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79042",
    "user": "saliola"
}
```

The latest branch causes some problems:

```
> git trac pull
> sage -br
**********************************************************************

Oops, Sage crashed. We do our best to make it stable, but...
```


The error message in the crash report is:

```
ImportError: No module named modules_with_basis.morphism
```




---

archive/issue_comments_079043.json:
```json
{
    "body": "I wanted to make the following change:\n\n```\n+            sage: ult = lambda i: sum(  y[j] for j in range(i,4)  ) # uni-upper\n+            sage: phi = X.module_morphism(ult, triangular=\"lower\", codomain=Y)\n```\n\nThe comment `# uni-upper` should be uni-lower.",
    "created_at": "2015-03-19T15:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79043",
    "user": "saliola"
}
```

I wanted to make the following change:

```
+            sage: ult = lambda i: sum(  y[j] for j in range(i,4)  ) # uni-upper
+            sage: phi = X.module_morphism(ult, triangular="lower", codomain=Y)
```

The comment `# uni-upper` should be uni-lower.



---

archive/issue_comments_079044.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T15:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79044",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079045.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-19T15:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79045",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079046.json:
```json
{
    "body": "Hello Nicolas. Thanks for the answers and the fixes. This looks good to me now. I'm ready to set this to positive review once #17160 is finalized (i.e., once all doctests here pass).",
    "created_at": "2015-03-19T21:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79046",
    "user": "saliola"
}
```

Hello Nicolas. Thanks for the answers and the fixes. This looks good to me now. I'm ready to set this to positive review once #17160 is finalized (i.e., once all doctests here pass).



---

archive/issue_comments_079047.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-20T04:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79047",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079048.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-20T08:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79048",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079049.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-20T20:46:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79049",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079050.json:
```json
{
    "body": "I've looked over all the recent changes, too. Positive review, once all doctests pass (which they appear to do here).",
    "created_at": "2015-03-20T20:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79050",
    "user": "saliola"
}
```

I've looked over all the recent changes, too. Positive review, once all doctests pass (which they appear to do here).



---

archive/issue_comments_079051.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-21T07:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79051",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_079052.json:
```json
{
    "body": "FYI - #17160 is finalized.",
    "created_at": "2015-03-21T17:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79052",
    "user": "tscrim"
}
```

FYI - #17160 is finalized.



---

archive/issue_comments_079053.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2015-03-23T21:46:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79053",
    "user": "nthiery"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_079054.json:
```json
{
    "body": "On {{{Linux sagange 3.2.0-4-amd64 #1 SMP Debian 3.2.63-2+deb7u1 x86_64\nGNU/Linux}}}, and after merging in 6.6.rc0, I am getting only those\nerrors with `make ptestlong`:\n\n```\nsage -t --long src/sage/doctest/control.py  # 1 doctest failed\nsage -t --long src/sage/calculus/calculus.py  # 1 doctest failed\nsage -t --long src/sage/misc/trace.py  # 2 doctests failed\nsage -t --long src/sage/modular/arithgroup/arithgroup_perm.py  # Timed out\nsage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed\n```\n\n\nSounds like they are all maxima related, and I doubt there is any\nrelation to this ticket; rc0 fails similarly. Hence I am setting\nthis to positive review on behalf of Franco.",
    "created_at": "2015-03-23T21:46:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79054",
    "user": "nthiery"
}
```

On {{{Linux sagange 3.2.0-4-amd64 #1 SMP Debian 3.2.63-2+deb7u1 x86_64
GNU/Linux}}}, and after merging in 6.6.rc0, I am getting only those
errors with `make ptestlong`:

```
sage -t --long src/sage/doctest/control.py  # 1 doctest failed
sage -t --long src/sage/calculus/calculus.py  # 1 doctest failed
sage -t --long src/sage/misc/trace.py  # 2 doctests failed
sage -t --long src/sage/modular/arithgroup/arithgroup_perm.py  # Timed out
sage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed
```


Sounds like they are all maxima related, and I doubt there is any
relation to this ticket; rc0 fails similarly. Hence I am setting
this to positive review on behalf of Franco.



---

archive/issue_comments_079055.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2015-03-24T00:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79055",
    "user": "nthiery"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_079056.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-04-14T19:43:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/8678",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/8678#issuecomment-79056",
    "user": "vbraun"
}
```

Resolution: fixed
