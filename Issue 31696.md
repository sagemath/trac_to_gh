# Issue 31696: Initial support for BTerms

archive/issues_031696.json:
```json
{
    "body": "CC:  @cheuberg @behackl\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31933\n\n",
    "created_at": "2021-06-08T13:03:08Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Initial support for BTerms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31696",
    "user": "@thhagelmayer"
}
```
CC:  @cheuberg @behackl



Issue created by migration from https://trac.sagemath.org/ticket/31933





---

archive/issue_comments_452833.json:
```json
{
    "body": "Changing keywords from \"\" to \"gsoc21, asymptotics\".",
    "created_at": "2021-06-08T13:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452833",
    "user": "@thhagelmayer"
}
```

Changing keywords from "" to "gsoc21, asymptotics".



---

archive/issue_comments_452834.json:
```json
{
    "body": "Set assignee to @thhagelmayer.",
    "created_at": "2021-06-08T13:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452834",
    "user": "@thhagelmayer"
}
```

Set assignee to @thhagelmayer.



---

archive/issue_comments_452835.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2021-06-08T13:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452835",
    "user": "@thhagelmayer"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_452836.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to asymptotic expansions.",
    "created_at": "2021-06-08T13:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452836",
    "user": "@thhagelmayer"
}
```

Changing component from PLEASE CHANGE to asymptotic expansions.



---

archive/issue_comments_452837.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-06-12T14:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452837",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_452838.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-12T14:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452838",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452839.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-06-14T13:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452839",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_452840.json:
```json
{
    "body": "Just some comments that got to me when scrolling through the current code (well being aware that it is work in progress):\n\n1. Consider passing `**kwds` instead of `valid_form` in\n\n```\n+    def _element_constructor_(self, data, coefficient=None, valid_from=None):\n```\n\n\n2. When I got it correct what the code does, a more Pythonic way of writing\n\n```\n+        valid_from_string = ''\n+        for key in self.valid_from:\n+            if key is list(self.valid_from)[-1]:\n+                valid_from_string += f'{key} >= {self.valid_from[key]}'\n+            else:\n+                valid_from_string += f'{key} >= {self.valid_from[key]} and '\n```\n\nwould be something like\n\n```\nvalid_from_string = ' and '.join(f'{key} >= {value}' for key, value in self.valid_from.items())\n```\n\nMaybe even use more describing names than `key` and `value` (not checked what is used in the code elsewhere)\n\n3. Remove empty line in `_create_element_` before the `return`.\n\n4. More like a question, why was the `+` moved up in\n\n```\n-        return (self._log_coefficient_(base=base, locals=locals)\n-                + self._log_growth_(base=base, locals=locals))\n+        return (self._log_coefficient_(base=base, locals=locals) +\n+                self._log_growth_(base=base, locals=locals))\n```\n \n?",
    "created_at": "2021-06-15T11:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452840",
    "user": "@dkrenn"
}
```

Just some comments that got to me when scrolling through the current code (well being aware that it is work in progress):

1. Consider passing `**kwds` instead of `valid_form` in

```
+    def _element_constructor_(self, data, coefficient=None, valid_from=None):
```


2. When I got it correct what the code does, a more Pythonic way of writing

```
+        valid_from_string = ''
+        for key in self.valid_from:
+            if key is list(self.valid_from)[-1]:
+                valid_from_string += f'{key} >= {self.valid_from[key]}'
+            else:
+                valid_from_string += f'{key} >= {self.valid_from[key]} and '
```

would be something like

```
valid_from_string = ' and '.join(f'{key} >= {value}' for key, value in self.valid_from.items())
```

Maybe even use more describing names than `key` and `value` (not checked what is used in the code elsewhere)

3. Remove empty line in `_create_element_` before the `return`.

4. More like a question, why was the `+` moved up in

```
-        return (self._log_coefficient_(base=base, locals=locals)
-                + self._log_growth_(base=base, locals=locals))
+        return (self._log_coefficient_(base=base, locals=locals) +
+                self._log_growth_(base=base, locals=locals))
```
 
?



---

archive/issue_comments_452841.json:
```json
{
    "body": "Replying to [comment:6 dkrenn]:\n\nThank you for your suggestions!\n\n> 4. More like a question, why was the `+` moved up\nI must have accidentally touched that line. This was not intended. I will move it back down.",
    "created_at": "2021-06-16T14:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452841",
    "user": "@thhagelmayer"
}
```

Replying to [comment:6 dkrenn]:

Thank you for your suggestions!

> 4. More like a question, why was the `+` moved up
I must have accidentally touched that line. This was not intended. I will move it back down.



---

archive/issue_comments_452842.json:
```json
{
    "body": "Just some comments from my side at this point:\n\n5. `BTerm.__init__`: Please add tests for all possible exceptions which may be raised in this method\n\n6. `./sage --docbuild --include-tests-blocks --underscore reference/asymptotic html` gave a warning: `local/lib/python3.9/site-packages/sage/rings/asymptotic/term_monoid.py:docstring of sage.rings.asymptotic.term_monoid.BTerm._absorb_:9: WARNING: Literal block expected; none found.` The cause seems to be a missing indentation of the content of the `EXAMPLES` block.\n\n7. `TermMonoidFactory.create_key_and_extra_args`: I would prefer to write \"has to be either 'exact', 'O', 'B' or an instance\" in the `ValueError` (commas instead of repeated \"or\").\n\n8. example for `valid_from`\n\n9. `BTerm.__init__`: description of the parameter `valid_from`: \"vriable\" -> \"variable\", \"the bound by this term\" -> \"The bound implied by this term\".\n\n10. `BTerm._repr_`, `BTermMonoid._repr_`: I suggest to replace the `\\` and `+ \\` at the ends of the lines by parentheses, see https://docs.python.org/3/reference/lexical_analysis.html#string-literal-concatenation\n\n21. The developer guide (https://doc.sagemath.org/html/en/developer/coding_basics.html) does not include closing punctuation in INPUT/OUTPUT blocks, so please remove these in new code (e.g. `BTerm.can_absorb`, `BTerm._absorb_`)\n\n32. `BTerm._repr_`, last example: I think that `BT_QQ(x, 3, {'x': 20, 'm': 5})` should raise an error because `m` is not a valid variable understood by the growth group `G`.\n\n43. `BTerm.can_absorb`, docstring: \"An BTerm can absorb\" -> \"A BTerm can absorb\"\n\n54. `BTerm.can_absorb`, docstring: \"with weaker or equal growth\", change the code accordingly, and add examples for absorption of BTerms of different growths.\n\n65. `BTerm.can_absorb`: I think that we should discuss whether `t2.can_absorb(t1)` should be `True` or `False`; more specifically, whether it is allowable to change `valid_from` during absorption. It should also be discussed whether we want to use different parents for different values in `valid_from`.\n\n76. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere).\n\n87. `BTerm._absorb_`: I think that neither the example nor the code are correct. Dividing by `self.valid_from[str(self.growth)]` is only valid for situations where the exponents of `x` differ by exactly one. And for other growth groups, this needs more attention (I think that computing the correct factor could be moved to a method of the growth elements).\n\n98. `BTerm._create_element_`: Empty `INPUT`, `TESTS` sections, missing `OUTPUT` section.\n\n109. `TermMonoidFactory` docstring: replace `.` by `,` after `ExactTermMonoid`.\n\n20. `TermMonoidFactory` docstring: I think that \"(capital letter `B`)\" can be removed, there is no danger of confusion here (in contrast to `O`-Terms where the capital letter `O` might be confused with the digit `0`).\n\n21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.",
    "created_at": "2021-06-21T16:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452842",
    "user": "@cheuberg"
}
```

Just some comments from my side at this point:

5. `BTerm.__init__`: Please add tests for all possible exceptions which may be raised in this method

6. `./sage --docbuild --include-tests-blocks --underscore reference/asymptotic html` gave a warning: `local/lib/python3.9/site-packages/sage/rings/asymptotic/term_monoid.py:docstring of sage.rings.asymptotic.term_monoid.BTerm._absorb_:9: WARNING: Literal block expected; none found.` The cause seems to be a missing indentation of the content of the `EXAMPLES` block.

7. `TermMonoidFactory.create_key_and_extra_args`: I would prefer to write "has to be either 'exact', 'O', 'B' or an instance" in the `ValueError` (commas instead of repeated "or").

8. example for `valid_from`

9. `BTerm.__init__`: description of the parameter `valid_from`: "vriable" -> "variable", "the bound by this term" -> "The bound implied by this term".

10. `BTerm._repr_`, `BTermMonoid._repr_`: I suggest to replace the `\` and `+ \` at the ends of the lines by parentheses, see https://docs.python.org/3/reference/lexical_analysis.html#string-literal-concatenation

21. The developer guide (https://doc.sagemath.org/html/en/developer/coding_basics.html) does not include closing punctuation in INPUT/OUTPUT blocks, so please remove these in new code (e.g. `BTerm.can_absorb`, `BTerm._absorb_`)

32. `BTerm._repr_`, last example: I think that `BT_QQ(x, 3, {'x': 20, 'm': 5})` should raise an error because `m` is not a valid variable understood by the growth group `G`.

43. `BTerm.can_absorb`, docstring: "An BTerm can absorb" -> "A BTerm can absorb"

54. `BTerm.can_absorb`, docstring: "with weaker or equal growth", change the code accordingly, and add examples for absorption of BTerms of different growths.

65. `BTerm.can_absorb`: I think that we should discuss whether `t2.can_absorb(t1)` should be `True` or `False`; more specifically, whether it is allowable to change `valid_from` during absorption. It should also be discussed whether we want to use different parents for different values in `valid_from`.

76. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere).

87. `BTerm._absorb_`: I think that neither the example nor the code are correct. Dividing by `self.valid_from[str(self.growth)]` is only valid for situations where the exponents of `x` differ by exactly one. And for other growth groups, this needs more attention (I think that computing the correct factor could be moved to a method of the growth elements).

98. `BTerm._create_element_`: Empty `INPUT`, `TESTS` sections, missing `OUTPUT` section.

109. `TermMonoidFactory` docstring: replace `.` by `,` after `ExactTermMonoid`.

20. `TermMonoidFactory` docstring: I think that "(capital letter `B`)" can be removed, there is no danger of confusion here (in contrast to `O`-Terms where the capital letter `O` might be confused with the digit `0`).

21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.



---

archive/issue_comments_452843.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-06-26T15:31:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452843",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_452844.json:
```json
{
    "body": "I had a look on the current version (4060b6c). If I am not mistaken, then items\n\n8.\n\n14.\n\n15.\n\n16.\n\n18.\n\n19.\n\n20.\n\n21.\n\nfrom above are still open at this time.\n\nI have a few other comments:\n\n22. Missing empty line after `WARNING::` leads to non-proper formatting of the warning.\n\n23. The link to `sage.misc.superseded.experimental` is not formatted properly.\n\n24. Follow-up to 12: I think that the keys of `valid_from` should //at least// contain the variables of the actual growth element and //at most// contain the variables of the growth group. The new check introduced in 0eeb50da71 means that the keys of `valid_from` are enforced to //at most// contain the variables of the actual growth element.\n\n25. `BTerm._absorb_` should not inspect `self.growth.exponent` or `other.growth.exponent`: This only works for `MonomialGrowthElement`. Instead, `self.growth` should be compared to `other.growth` (comparison of growth elements is implemented in the growth group which will know what to do).\n\n26. `._element_constructor_`: There is now an `try`/`except`/`else` construct where the `else` branch could be moved outside the construct (as it was the case before this ticket; introducing the `**kwds` parameter should not really change the structure here).\n\n27. `BTerm._repr_` is now untested (since 0eeb50da71) in the case of several entries of `values_from`\n\n28. `BTerm._absorb_`: Computation of `valid_from_new` will always yield a one-key dictionary even if the original dictionaries have more than one key. I think that a loop over the union of the keys of the two original dictionaries should be done; if a key is in both dictionaries, then take the maximum (as is the case now), otherwise take the unique entry.\n\n29. `can_absorb`: Missing empty line after `TESTS::` leads to unproper formatting of tests (when using ` ./sage --docbuild --include-tests-blocks`)\n\n30. `can_absorb`: I think that absorption should only happen if `self.growth >= other.growth`. In particular, `B(x^3)` can absorb `B(x^2)` (because it is larger), but `B(x^2)` should not absorb `B(x^3)`.\n\n31. `GenericGrowthElement._find_minimum_`: please add docstring.\n\n32. `GenericGrowthElement._find_minimum_` and `MonomialGrowthElement._find_minimum_`: I think that it would be simpler not to have `other` in the signature of this method. If B(g) absorbs B(h) for some g >= h, then `absorb` could first compute q = g/h (which is something the growth elements should be able to compute out of the box) and then call `q._find_minimum_`.\n\n33. `MonomialGrowthElement._find_minimum_`: Currently, this is symmetric in `self` and `other`. That should not be the case: `self` must be at least `other` in order to allow for absorption. After 32., this should simply be a check whether `self` is at least `1`. (see 30)\n\n34. `MonomialGrowthElement._find_minimum_`: I think that the signature should be the same as for `GenericGrowthElement._find_minimum_`: the last parameter should be `valid_from` instead of `valid_from_bound`. I think that it should be the growth element's task to extract the correct variable.\n\n35. `MonomialGrowthElement._find_minimum_`: I suggest the following one-sentence description: \"Find the minimum of this growth element over the range implied by `valid_from`\"\n\n36. `BTerm._absorb_`: I think that `t2` should not absorb `t1` (related to 30 and 33).",
    "created_at": "2021-06-28T15:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452844",
    "user": "@cheuberg"
}
```

I had a look on the current version (4060b6c). If I am not mistaken, then items

8.

14.

15.

16.

18.

19.

20.

21.

from above are still open at this time.

I have a few other comments:

22. Missing empty line after `WARNING::` leads to non-proper formatting of the warning.

23. The link to `sage.misc.superseded.experimental` is not formatted properly.

24. Follow-up to 12: I think that the keys of `valid_from` should //at least// contain the variables of the actual growth element and //at most// contain the variables of the growth group. The new check introduced in 0eeb50da71 means that the keys of `valid_from` are enforced to //at most// contain the variables of the actual growth element.

25. `BTerm._absorb_` should not inspect `self.growth.exponent` or `other.growth.exponent`: This only works for `MonomialGrowthElement`. Instead, `self.growth` should be compared to `other.growth` (comparison of growth elements is implemented in the growth group which will know what to do).

26. `._element_constructor_`: There is now an `try`/`except`/`else` construct where the `else` branch could be moved outside the construct (as it was the case before this ticket; introducing the `**kwds` parameter should not really change the structure here).

27. `BTerm._repr_` is now untested (since 0eeb50da71) in the case of several entries of `values_from`

28. `BTerm._absorb_`: Computation of `valid_from_new` will always yield a one-key dictionary even if the original dictionaries have more than one key. I think that a loop over the union of the keys of the two original dictionaries should be done; if a key is in both dictionaries, then take the maximum (as is the case now), otherwise take the unique entry.

29. `can_absorb`: Missing empty line after `TESTS::` leads to unproper formatting of tests (when using ` ./sage --docbuild --include-tests-blocks`)

30. `can_absorb`: I think that absorption should only happen if `self.growth >= other.growth`. In particular, `B(x^3)` can absorb `B(x^2)` (because it is larger), but `B(x^2)` should not absorb `B(x^3)`.

31. `GenericGrowthElement._find_minimum_`: please add docstring.

32. `GenericGrowthElement._find_minimum_` and `MonomialGrowthElement._find_minimum_`: I think that it would be simpler not to have `other` in the signature of this method. If B(g) absorbs B(h) for some g >= h, then `absorb` could first compute q = g/h (which is something the growth elements should be able to compute out of the box) and then call `q._find_minimum_`.

33. `MonomialGrowthElement._find_minimum_`: Currently, this is symmetric in `self` and `other`. That should not be the case: `self` must be at least `other` in order to allow for absorption. After 32., this should simply be a check whether `self` is at least `1`. (see 30)

34. `MonomialGrowthElement._find_minimum_`: I think that the signature should be the same as for `GenericGrowthElement._find_minimum_`: the last parameter should be `valid_from` instead of `valid_from_bound`. I think that it should be the growth element's task to extract the correct variable.

35. `MonomialGrowthElement._find_minimum_`: I suggest the following one-sentence description: "Find the minimum of this growth element over the range implied by `valid_from`"

36. `BTerm._absorb_`: I think that `t2` should not absorb `t1` (related to 30 and 33).



---

archive/issue_comments_452845.json:
```json
{
    "body": "Please send a short message or reply to the raised items once your branch is ready to be reviewed again. I agree with the points raised by Clemens; in particular when it comes to the comments concerning `_find_minimum_` (31 \u2013\u00a035).\n\nRegarding 25, and `BTerm._repr_` in general: this output will have to be adapted once `BTerm`s are made available for the asymptotic ring so that they can be represented by shorter notation that is suitable for representation in a sum together with other terms in an `AsymptoticExpansion` (the expansions use the `repr` methods of the terms). I think it would be fine to delay ironing out this representation to the future ticket integrating `BTerm`s with `AsymptoticRing`, but that also means I wouldn't put too much effort into polishing doctests using the current representation.\n\nSome further minor comments:\n\n37. In the spirit of #32032, please replace the lines \n\n```\nsage: from sage.rings.asymptotic.term_monoid import TermMonoidFactory\nsage: TermMonoid = TermMonoidFactory('__main__.TermMonoid')\n```\n\n  in the doctests you are adding here with\n\n```\nsage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\n```\n\n\n38. The one-sentence description for `MonomialGrowthElement._find_minimum_` suggested by Clemens above also works for `GenericGrowthElement._find_minimum_`.\n\n39. `BTerm.can_absorb`: In the NOTE block of the docstring, the second occurrence of `BTerm` should also be a reference. Also, make sure to add a newline after `TESTS::`.",
    "created_at": "2021-06-28T18:36:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452845",
    "user": "@behackl"
}
```

Please send a short message or reply to the raised items once your branch is ready to be reviewed again. I agree with the points raised by Clemens; in particular when it comes to the comments concerning `_find_minimum_` (31 – 35).

Regarding 25, and `BTerm._repr_` in general: this output will have to be adapted once `BTerm`s are made available for the asymptotic ring so that they can be represented by shorter notation that is suitable for representation in a sum together with other terms in an `AsymptoticExpansion` (the expansions use the `repr` methods of the terms). I think it would be fine to delay ironing out this representation to the future ticket integrating `BTerm`s with `AsymptoticRing`, but that also means I wouldn't put too much effort into polishing doctests using the current representation.

Some further minor comments:

37. In the spirit of #32032, please replace the lines 

```
sage: from sage.rings.asymptotic.term_monoid import TermMonoidFactory
sage: TermMonoid = TermMonoidFactory('__main__.TermMonoid')
```

  in the doctests you are adding here with

```
sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
```


38. The one-sentence description for `MonomialGrowthElement._find_minimum_` suggested by Clemens above also works for `GenericGrowthElement._find_minimum_`.

39. `BTerm.can_absorb`: In the NOTE block of the docstring, the second occurrence of `BTerm` should also be a reference. Also, make sure to add a newline after `TESTS::`.



---

archive/issue_comments_452846.json:
```json
{
    "body": "40. Maybe, in\n\n```\n-            return self._create_element_(data, coefficient)\n+            else:\n+                return self._create_element_(data, coefficient, **kwds)\n```\n\nremove the `else` block of the `try` and simply return as before. The `else` block of a `try` is useful if there is a `finally` block because it is executed before this `finally` block. \n\nAlso, all other code in the asymptotic package does not use it, so I suggest to be consistent. One reason for this choice is, that there is a clear, non-indented ending (the `return` above) of an indented block.",
    "created_at": "2021-06-29T06:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452846",
    "user": "@dkrenn"
}
```

40. Maybe, in

```
-            return self._create_element_(data, coefficient)
+            else:
+                return self._create_element_(data, coefficient, **kwds)
```

remove the `else` block of the `try` and simply return as before. The `else` block of a `try` is useful if there is a `finally` block because it is executed before this `finally` block. 

Also, all other code in the asymptotic package does not use it, so I suggest to be consistent. One reason for this choice is, that there is a clear, non-indented ending (the `return` above) of an indented block.



---

archive/issue_comments_452847.json:
```json
{
    "body": "Replying to [comment:12 dkrenn]:\n> 40. Maybe, in\n> {{{\n> -            return self._create_element_(data, coefficient)\n> +            else:\n> +                return self._create_element_(data, coefficient, **kwds)\n> }}}\n> remove the `else` block of the `try` and simply return as before. The `else` block of a `try` is useful if there is a `finally` block because it is executed before this `finally` block. \n> \n> Also, all other code in the asymptotic package does not use it, so I suggest to be consistent. One reason for this choice is, that there is a clear, non-indented ending (the `return` above) of an indented block.\n\nI think this is 26 (but with more explanations). :-)",
    "created_at": "2021-06-29T07:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452847",
    "user": "@behackl"
}
```

Replying to [comment:12 dkrenn]:
> 40. Maybe, in
> {{{
> -            return self._create_element_(data, coefficient)
> +            else:
> +                return self._create_element_(data, coefficient, **kwds)
> }}}
> remove the `else` block of the `try` and simply return as before. The `else` block of a `try` is useful if there is a `finally` block because it is executed before this `finally` block. 
> 
> Also, all other code in the asymptotic package does not use it, so I suggest to be consistent. One reason for this choice is, that there is a clear, non-indented ending (the `return` above) of an indented block.

I think this is 26 (but with more explanations). :-)



---

archive/issue_comments_452848.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-02T13:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452848",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452849.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-02T13:59:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452849",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452850.json:
```json
{
    "body": "Items worked on and considered done by the latest commits: 14, 15, 19, 20, 22, 26, 29, 36, 39, 40.\n\nCommit https://git.sagemath.org/sage.git/commit/?id=9fffc5a1de1b0b89208b34de3866b5034ad444a3 contains items 14 and 15 aswell. I forgot to make a seperate commit for those two items. I will be more cautious from now on.\n\nI have a question about number \n\n```\n23 The link to sage.misc.superseded.experimental is not formatted properly.\n```\n\nWhat is the problem with the format? I have built the docs and can't see any issue.",
    "created_at": "2021-07-02T14:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452850",
    "user": "@thhagelmayer"
}
```

Items worked on and considered done by the latest commits: 14, 15, 19, 20, 22, 26, 29, 36, 39, 40.

Commit https://git.sagemath.org/sage.git/commit/?id=9fffc5a1de1b0b89208b34de3866b5034ad444a3 contains items 14 and 15 aswell. I forgot to make a seperate commit for those two items. I will be more cautious from now on.

I have a question about number 

```
23 The link to sage.misc.superseded.experimental is not formatted properly.
```

What is the problem with the format? I have built the docs and can't see any issue.



---

archive/issue_comments_452851.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-02T14:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452851",
    "user": "@thhagelmayer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_452852.json:
```json
{
    "body": "Replying to [comment:16 gh-thhagelmayer]:\n> Items worked on and considered done by the latest commits: 14, 15, 19, 20, 22, 26, 29, 36, 39, 40.\n> \n\nI do not fully agree with 14: the code has been fixed as proposed in 14, but the doc string does not yet reflect this.\n\n\n> I have a question about number \n> {{{\n> 23 The link to sage.misc.superseded.experimental is not formatted properly.\n> }}}\n> What is the problem with the format? I have built the docs and can't see any issue.\n\nFor me, it looks as follows:\n![](https://seafile.aau.at/f/7f466538ce624d15b842/?dl=1)\nIn other words, it is not a link.\n\nAs far as I am aware, the following items are open from previous rounds:\n\n8. example for `valid_from`\n\n14. `BTerm.can_absorb`, docstring: \"with weaker or equal growth\" (rest of the former 14 is done)\n\n26. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere).\n\n38. `BTerm._create_element_`: Empty `INPUT`, `TESTS` sections, missing `OUTPUT` section.\n\n21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.\n\n23. The link to `sage.misc.superseded.experimental` is not formatted properly.\n\n24. Follow-up to 12: I think that the keys of `valid_from` should //at least// contain the variables of the actual growth element and //at most// contain the variables of the growth group. The new check introduced in 0eeb50da71 means that the keys of `valid_from` are enforced to //at most// contain the variables of the actual growth element.\n\n25. `BTerm._absorb_` should not inspect `self.growth.exponent` or `other.growth.exponent`: This only works for `MonomialGrowthElement`. Instead, `self.growth` should be compared to `other.growth` (comparison of growth elements is implemented in the growth group which will know what to do).\n\n27. `BTerm._repr_` is now untested (since 0eeb50da71) in the case of several entries of `values_from`\n\n28. `BTerm._absorb_`: Computation of `valid_from_new` will always yield a one-key dictionary even if the original dictionaries have more than one key. I think that a loop over the union of the keys of the two original dictionaries should be done; if a key is in both dictionaries, then take the maximum (as is the case now), otherwise take the unique entry.\n\n31. `GenericGrowthElement._find_minimum_`: please add docstring.\n\n32. `GenericGrowthElement._find_minimum_` and `MonomialGrowthElement._find_minimum_`: I think that it would be simpler not to have `other` in the signature of this method. If B(g) absorbs B(h) for some g >= h, then `absorb` could first compute q = g/h (which is something the growth elements should be able to compute out of the box) and then call `q._find_minimum_`.\n\n33. `MonomialGrowthElement._find_minimum_`: Currently, this is symmetric in `self` and `other`. That should not be the case: `self` must be at least `other` in order to allow for absorption. After 32., this should simply be a check whether `self` is at least `1`. (see 30)\n\n34. `MonomialGrowthElement._find_minimum_`: I think that the signature should be the same as for `GenericGrowthElement._find_minimum_`: the last parameter should be `valid_from` instead of `valid_from_bound`. I think that it should be the growth element's task to extract the correct variable.\n\n35. `MonomialGrowthElement._find_minimum_`: I suggest the following one-sentence description: \"Find the minimum of this growth element over the range implied by `valid_from`\"\n\n38. The one-sentence description for `MonomialGrowthElement._find_minimum_` suggested by Clemens above also works for `GenericGrowthElement._find_minimum_`.\n\nA few new items (some of them not related to the changes, but new findings in previously pushed code, sorry):\n\n41. `BTerm.can_absorb`, docstring, one-sentence description: replace ``BTerm`` by ```BTerm```\n\n42. `BTerm.can_absorb`: The code\n    {{{\n    #!python\n    if self.growth >= other.growth:\n        return True\n    else:\n        return False\n    }}}\n    could be simplified to `return self.growth >= other.growth`.\n\n43. `BTerm.can_absorb`: I fear I forgot to mention the following in the last round: I do not think that the restriction `if key in other.valid_from.keys()` is appropriate: we intend to fix `valid_from` during absorption; as long as all BTerms involved are well defined (according to 24) there should not be any problem.\n\n44. `BTerm.__init__`: missing empty line after `TESTS::`.",
    "created_at": "2021-07-04T16:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452852",
    "user": "@cheuberg"
}
```

Replying to [comment:16 gh-thhagelmayer]:
> Items worked on and considered done by the latest commits: 14, 15, 19, 20, 22, 26, 29, 36, 39, 40.
> 

I do not fully agree with 14: the code has been fixed as proposed in 14, but the doc string does not yet reflect this.


> I have a question about number 
> {{{
> 23 The link to sage.misc.superseded.experimental is not formatted properly.
> }}}
> What is the problem with the format? I have built the docs and can't see any issue.

For me, it looks as follows:
![](https://seafile.aau.at/f/7f466538ce624d15b842/?dl=1)
In other words, it is not a link.

As far as I am aware, the following items are open from previous rounds:

8. example for `valid_from`

14. `BTerm.can_absorb`, docstring: "with weaker or equal growth" (rest of the former 14 is done)

26. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere).

38. `BTerm._create_element_`: Empty `INPUT`, `TESTS` sections, missing `OUTPUT` section.

21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.

23. The link to `sage.misc.superseded.experimental` is not formatted properly.

24. Follow-up to 12: I think that the keys of `valid_from` should //at least// contain the variables of the actual growth element and //at most// contain the variables of the growth group. The new check introduced in 0eeb50da71 means that the keys of `valid_from` are enforced to //at most// contain the variables of the actual growth element.

25. `BTerm._absorb_` should not inspect `self.growth.exponent` or `other.growth.exponent`: This only works for `MonomialGrowthElement`. Instead, `self.growth` should be compared to `other.growth` (comparison of growth elements is implemented in the growth group which will know what to do).

27. `BTerm._repr_` is now untested (since 0eeb50da71) in the case of several entries of `values_from`

28. `BTerm._absorb_`: Computation of `valid_from_new` will always yield a one-key dictionary even if the original dictionaries have more than one key. I think that a loop over the union of the keys of the two original dictionaries should be done; if a key is in both dictionaries, then take the maximum (as is the case now), otherwise take the unique entry.

31. `GenericGrowthElement._find_minimum_`: please add docstring.

32. `GenericGrowthElement._find_minimum_` and `MonomialGrowthElement._find_minimum_`: I think that it would be simpler not to have `other` in the signature of this method. If B(g) absorbs B(h) for some g >= h, then `absorb` could first compute q = g/h (which is something the growth elements should be able to compute out of the box) and then call `q._find_minimum_`.

33. `MonomialGrowthElement._find_minimum_`: Currently, this is symmetric in `self` and `other`. That should not be the case: `self` must be at least `other` in order to allow for absorption. After 32., this should simply be a check whether `self` is at least `1`. (see 30)

34. `MonomialGrowthElement._find_minimum_`: I think that the signature should be the same as for `GenericGrowthElement._find_minimum_`: the last parameter should be `valid_from` instead of `valid_from_bound`. I think that it should be the growth element's task to extract the correct variable.

35. `MonomialGrowthElement._find_minimum_`: I suggest the following one-sentence description: "Find the minimum of this growth element over the range implied by `valid_from`"

38. The one-sentence description for `MonomialGrowthElement._find_minimum_` suggested by Clemens above also works for `GenericGrowthElement._find_minimum_`.

A few new items (some of them not related to the changes, but new findings in previously pushed code, sorry):

41. `BTerm.can_absorb`, docstring, one-sentence description: replace ``BTerm`` by ```BTerm```

42. `BTerm.can_absorb`: The code
    {{{
    #!python
    if self.growth >= other.growth:
        return True
    else:
        return False
    }}}
    could be simplified to `return self.growth >= other.growth`.

43. `BTerm.can_absorb`: I fear I forgot to mention the following in the last round: I do not think that the restriction `if key in other.valid_from.keys()` is appropriate: we intend to fix `valid_from` during absorption; as long as all BTerms involved are well defined (according to 24) there should not be any problem.

44. `BTerm.__init__`: missing empty line after `TESTS::`.



---

archive/issue_comments_452853.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-04T16:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452853",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_452854.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-07T15:25:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452854",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452855.json:
```json
{
    "body": "45. The test you have added in 218d166 should assign x and y as the variables of the growth group `B`, like\n    {{{ \n    sage: x, y = B('x'), B('y')\n    }}}\n    as the `NameError` currently thrown has nothing to do with the implementation.\n\n46. (18. cont.) In `BTerm._create_element_`, the description of `**kwds` should just say that these are additional keyword arguments. I think you could even replace `**kwds` by the explicit keyword you are expecting there, namely `valid_from`. The general form, `**kwds` is mainly important for the generic `_element_constructor_`; after that we know which arguments we can expect.\n\nFrom my point of view, points 14, 18, 41, 44 are resolved (or replaced by a follow-up). 23 also looks good to me, but I didn't look at the built documentation.",
    "created_at": "2021-07-07T16:59:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452855",
    "user": "@behackl"
}
```

45. The test you have added in 218d166 should assign x and y as the variables of the growth group `B`, like
    {{{ 
    sage: x, y = B('x'), B('y')
    }}}
    as the `NameError` currently thrown has nothing to do with the implementation.

46. (18. cont.) In `BTerm._create_element_`, the description of `**kwds` should just say that these are additional keyword arguments. I think you could even replace `**kwds` by the explicit keyword you are expecting there, namely `valid_from`. The general form, `**kwds` is mainly important for the generic `_element_constructor_`; after that we know which arguments we can expect.

From my point of view, points 14, 18, 41, 44 are resolved (or replaced by a follow-up). 23 also looks good to me, but I didn't look at the built documentation.



---

archive/issue_comments_452856.json:
```json
{
    "body": "23: This does not yet render properly: \n\n![](https://seafile.aau.at/f/64b6704350b540d9838d/?dl=1)\n\n\nAs far as I am aware, the following items are open from previous rounds:\n\n8. example for `valid_from`: It would be great to have an example where the parameter`valid_from` is explained within this concrete situation.\n\n16. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere).\n\n21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.\n\n23. The link to `sage.misc.superseded.experimental` is not formatted properly.\n\n24. Follow-up to 12: I think that the keys of `valid_from` should //at least// contain the variables of the actual growth element and //at most// contain the variables of the growth group. The new check introduced in 0eeb50da71 means that the keys of `valid_from` are enforced to //at most// contain the variables of the actual growth element.\n\n25. `BTerm._absorb_` should not inspect `self.growth.exponent` or `other.growth.exponent`: This only works for `MonomialGrowthElement`. Instead, `self.growth` should be compared to `other.growth` (comparison of growth elements is implemented in the growth group which will know what to do).\n\n27. `BTerm._repr_` is now untested (since 0eeb50da71) in the case of several entries of `values_from`\n\n28. `BTerm._absorb_`: Computation of `valid_from_new` will always yield a one-key dictionary even if the original dictionaries have more than one key. I think that a loop over the union of the keys of the two original dictionaries should be done; if a key is in both dictionaries, then take the maximum (as is the case now), otherwise take the unique entry.\n\n31. `GenericGrowthElement._find_minimum_`: please add docstring.\n\n32. `GenericGrowthElement._find_minimum_` and `MonomialGrowthElement._find_minimum_`: I think that it would be simpler not to have `other` in the signature of this method. If B(g) absorbs B(h) for some g >= h, then `absorb` could first compute q = g/h (which is something the growth elements should be able to compute out of the box) and then call `q._find_minimum_`.\n\n33. `MonomialGrowthElement._find_minimum_`: Currently, this is symmetric in `self` and `other`. That should not be the case: `self` must be at least `other` in order to allow for absorption. After 32., this should simply be a check whether `self` is at least `1`. (see 30)\n\n34. `MonomialGrowthElement._find_minimum_`: I think that the signature should be the same as for `GenericGrowthElement._find_minimum_`: the last parameter should be `valid_from` instead of `valid_from_bound`. I think that it should be the growth element's task to extract the correct variable.\n\n35. `MonomialGrowthElement._find_minimum_`: I suggest the following one-sentence description: \"Find the minimum of this growth element over the range implied by `valid_from`\"\n\n38. The one-sentence description for `MonomialGrowthElement._find_minimum_` suggested by Clemens above also works for `GenericGrowthElement._find_minimum_`.\n\n42. `BTerm.can_absorb`: The code\n    {{{\n    #!python\n    if self.growth >= other.growth:\n        return True\n    else:\n        return False\n    }}}\n    could be simplified to `return self.growth >= other.growth`.\n\n43. `BTerm.can_absorb`: I fear I forgot to mention the following in the last round: I do not think that the restriction `if key in other.valid_from.keys()` is appropriate: we intend to fix `valid_from` during absorption; as long as all BTerms involved are well defined (according to 24) there should not be any problem.\n\n45. The test you have added in 218d166 should assign `x` and `y` as the variables of the growth group `B`, like\n    {{{ \n    sage: x, y = B('x'), B('y')\n    }}}\n    as the `NameError` currently thrown has nothing to do with the implementation.\n\n46. (18. cont.) In `BTerm._create_element_`, the description of `**kwds` should just say that these are additional keyword arguments. I think you could even replace `**kwds` by the explicit keyword you are expecting there, namely `valid_from`. The general form, `**kwds` is mainly important for the generic `_element_constructor_`; after that we know which arguments we can expect.\n\nNew items:\n\n47. `BTermMonoid` description of input variable `coefficient_ring`: Remove trailing full stop.\n\n48. `BTermMonoid._create_element_`: Replace `TESTS:` by `TESTS::`.",
    "created_at": "2021-07-08T16:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452856",
    "user": "@cheuberg"
}
```

23: This does not yet render properly: 

![](https://seafile.aau.at/f/64b6704350b540d9838d/?dl=1)


As far as I am aware, the following items are open from previous rounds:

8. example for `valid_from`: It would be great to have an example where the parameter`valid_from` is explained within this concrete situation.

16. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere).

21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.

23. The link to `sage.misc.superseded.experimental` is not formatted properly.

24. Follow-up to 12: I think that the keys of `valid_from` should //at least// contain the variables of the actual growth element and //at most// contain the variables of the growth group. The new check introduced in 0eeb50da71 means that the keys of `valid_from` are enforced to //at most// contain the variables of the actual growth element.

25. `BTerm._absorb_` should not inspect `self.growth.exponent` or `other.growth.exponent`: This only works for `MonomialGrowthElement`. Instead, `self.growth` should be compared to `other.growth` (comparison of growth elements is implemented in the growth group which will know what to do).

27. `BTerm._repr_` is now untested (since 0eeb50da71) in the case of several entries of `values_from`

28. `BTerm._absorb_`: Computation of `valid_from_new` will always yield a one-key dictionary even if the original dictionaries have more than one key. I think that a loop over the union of the keys of the two original dictionaries should be done; if a key is in both dictionaries, then take the maximum (as is the case now), otherwise take the unique entry.

31. `GenericGrowthElement._find_minimum_`: please add docstring.

32. `GenericGrowthElement._find_minimum_` and `MonomialGrowthElement._find_minimum_`: I think that it would be simpler not to have `other` in the signature of this method. If B(g) absorbs B(h) for some g >= h, then `absorb` could first compute q = g/h (which is something the growth elements should be able to compute out of the box) and then call `q._find_minimum_`.

33. `MonomialGrowthElement._find_minimum_`: Currently, this is symmetric in `self` and `other`. That should not be the case: `self` must be at least `other` in order to allow for absorption. After 32., this should simply be a check whether `self` is at least `1`. (see 30)

34. `MonomialGrowthElement._find_minimum_`: I think that the signature should be the same as for `GenericGrowthElement._find_minimum_`: the last parameter should be `valid_from` instead of `valid_from_bound`. I think that it should be the growth element's task to extract the correct variable.

35. `MonomialGrowthElement._find_minimum_`: I suggest the following one-sentence description: "Find the minimum of this growth element over the range implied by `valid_from`"

38. The one-sentence description for `MonomialGrowthElement._find_minimum_` suggested by Clemens above also works for `GenericGrowthElement._find_minimum_`.

42. `BTerm.can_absorb`: The code
    {{{
    #!python
    if self.growth >= other.growth:
        return True
    else:
        return False
    }}}
    could be simplified to `return self.growth >= other.growth`.

43. `BTerm.can_absorb`: I fear I forgot to mention the following in the last round: I do not think that the restriction `if key in other.valid_from.keys()` is appropriate: we intend to fix `valid_from` during absorption; as long as all BTerms involved are well defined (according to 24) there should not be any problem.

45. The test you have added in 218d166 should assign `x` and `y` as the variables of the growth group `B`, like
    {{{ 
    sage: x, y = B('x'), B('y')
    }}}
    as the `NameError` currently thrown has nothing to do with the implementation.

46. (18. cont.) In `BTerm._create_element_`, the description of `**kwds` should just say that these are additional keyword arguments. I think you could even replace `**kwds` by the explicit keyword you are expecting there, namely `valid_from`. The general form, `**kwds` is mainly important for the generic `_element_constructor_`; after that we know which arguments we can expect.

New items:

47. `BTermMonoid` description of input variable `coefficient_ring`: Remove trailing full stop.

48. `BTermMonoid._create_element_`: Replace `TESTS:` by `TESTS::`.



---

archive/issue_comments_452857.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-08T17:43:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452857",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452858.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-08T17:47:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452858",
    "user": "@thhagelmayer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452859.json:
```json
{
    "body": "With the latest commit I consider following items to be open:\n\n8. example for `valid_from`\n\n16. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere). \n\n21. `BTerm.can_absorb`: I think that BTerms should be able to absorb exact terms. \n\n33. `MonomialGrowthElement._find_minimum_`: Currently, this is symmetric in self and other. That should not be the case: self must be at least other in order to allow for absorption. After 32., this should simply be a check whether self is at least 1. (see 30)",
    "created_at": "2021-07-08T17:47:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452859",
    "user": "@thhagelmayer"
}
```

With the latest commit I consider following items to be open:

8. example for `valid_from`

16. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere). 

21. `BTerm.can_absorb`: I think that BTerms should be able to absorb exact terms. 

33. `MonomialGrowthElement._find_minimum_`: Currently, this is symmetric in self and other. That should not be the case: self must be at least other in order to allow for absorption. After 32., this should simply be a check whether self is at least 1. (see 30)



---

archive/issue_comments_452860.json:
```json
{
    "body": "-   Concerning 24: Assume we have\n    {{{\n    #!python\n    sage: B = GrowthGroup('x^ZZ * y^ZZ');\n    sage: x, y = B('x'), B('y')\n    sage: BT_ZZ = BTermMonoid(TermMonoid, B, ZZ)\n    }}}\n\n    Then\n    {{{\n    #!python\n    sage: BT_ZZ(x^3, 42, valid_from={'x': 10})\n    sage: BT_ZZ(x^3, 42, valid_from={'x': 10, 'y': 20})\n    }}}\n    should be valid (because the term only contains `x`, but the corresponding growth\n    group contains `x` and `y`),\n    {{{\n    #!python\n    sage: BT_ZZ(x<sup>3*y</sup>2, 42, valid_from={'x': 10})\n    }}}\n    should be invalid because the term contains `x` and `y`, but `y` is missing in\n    `valid_from` and finally\n    {{{\n    #!python\n    sage: BT_ZZ(x^3, 42, valid_from={'x': 10, 'z': 20})\n    }}}\n    should be forbidden (because the variable `z` is not one of the variables of the growth group).\n\n    I do not think that this is the case now (and if it is, then please add the tests above), so I consider 24 to be still open.\n\n-   I consider 27 to be still open: I think that there should be a successful multivariate test which actually tests `_repr_` instead of a test which fails much earlier. See one of the examples mentioned above for 24 for possible candidates for tests.\n\n-   I consider 43 to be still open: the lines\n    {{{\n    #!python\n    for variable in self.variable_names():\n        if variable in self.valid_from.keys():\n    }}}\n    should not be there because it is not the task of `can_absorb` to deal with `valid_from` at all.\n\n-   Items 23, 47, 48 are not mentioned in your commits and I think that they are still open.\n\nThus as far as I am concerned, the following items are open from previous rounds:\n\n8. example for `valid_from`: It would be great to have an example where the parameter`valid_from` is explained within this concrete situation.\n\n16. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere).\n\n21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.\n\n23. The link to `sage.misc.superseded.experimental` is not formatted properly.\n\n24. Follow-up to 12: I think that the keys of `valid_from` should //at least// contain the variables of the actual growth element and //at most// contain the variables of the growth group. The new check introduced in 0eeb50da71 means that the keys of `valid_from` are enforced to //at most// contain the variables of the actual growth element.\n\n27. `BTerm._repr_` is now untested (since 0eeb50da71) in the case of several entries of `values_from`\n\n43. `BTerm.can_absorb`: I fear I forgot to mention the following in the last round: I do not think that the restriction `if key in other.valid_from.keys()` is appropriate: we intend to fix `valid_from` during absorption; as long as all BTerms involved are well defined (according to 24) there should not be any problem.\n\n47. `BTermMonoid` description of input variable `coefficient_ring`: Remove trailing full stop.\n\n48. `BTermMonoid._create_element_`: Replace `TESTS:` by `TESTS::`.\n\nNew items:\n\n49. `GenericGrowthElement._find_minimum_`: replace `\"\"\"\"` by `\"\"\"` at the beginning of the docstring\n\n50. `GenericGrowthElement._find_minimum_`, `MonomialGrowthElement._find_minimum_`: I suggest to change the description of `valid_from` to \"a dictionary describing the range of the minimization: the keys are names of variables and the range is the intersection over the ranges where the absolute value of the variable designated by the key is at least the corresponding value\"\n\n51. `GenericGrowthElement._find_minimum_`: remove trailing full stop from output section.\n\n52. `GenericGrowthElement._find_minimum_`, `MonomialGrowthElement._find_minimum_`: Add full stop to one-sentence description.\n\n53. `MonomialGrowthElement._find_minimum_`: replace `next(iter(valid_from.values()))` by something resembling to `valid_from[self.variable_names()[0]]` (with some extra care when `variable_names()` is the empty tuple).\n\n54. (33. ctd) `MonomialGrowthElement._find_minimum_`: if `self._is_lt_one_()`, then an exception (perhaps `DecreasingGrowthElementError` derived from `ValueError`) should be raised.\n\n55. `BTerm.absorb`: I suggest to replace `self.growth._lt_(other.growth)` by `self.growth < other.growth`: the operator `<` is overloaded in terms of the `_lt_` method, so it ultimately boils down to the same code, but using `<` makes it more pythonic and more readable.\n\n56. `BTerm.absorb`: I suggest to replace `growth_new = max(self.growth, other.growth)` by `growth_new = self.growth` (because this is ensured anyway) or to remove the variable `growth_new` completely.\n\n57. `BTerm.absorb`: I think that the variable names `coeff_max` and `coeff_min` are not very clear; so I proposed to remove them completely, they can be replaced by `self.coefficient` and `other.coefficient`, respectively.\n\n58. `GenericGrowthElement._find_minimum_`, `MonomialGrowthElement._find_minimum_`: add at least one test (all functions in [SageMath](SageMath) must be tested)",
    "created_at": "2021-07-09T07:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452860",
    "user": "@cheuberg"
}
```

-   Concerning 24: Assume we have
    {{{
    #!python
    sage: B = GrowthGroup('x^ZZ * y^ZZ');
    sage: x, y = B('x'), B('y')
    sage: BT_ZZ = BTermMonoid(TermMonoid, B, ZZ)
    }}}

    Then
    {{{
    #!python
    sage: BT_ZZ(x^3, 42, valid_from={'x': 10})
    sage: BT_ZZ(x^3, 42, valid_from={'x': 10, 'y': 20})
    }}}
    should be valid (because the term only contains `x`, but the corresponding growth
    group contains `x` and `y`),
    {{{
    #!python
    sage: BT_ZZ(x<sup>3*y</sup>2, 42, valid_from={'x': 10})
    }}}
    should be invalid because the term contains `x` and `y`, but `y` is missing in
    `valid_from` and finally
    {{{
    #!python
    sage: BT_ZZ(x^3, 42, valid_from={'x': 10, 'z': 20})
    }}}
    should be forbidden (because the variable `z` is not one of the variables of the growth group).

    I do not think that this is the case now (and if it is, then please add the tests above), so I consider 24 to be still open.

-   I consider 27 to be still open: I think that there should be a successful multivariate test which actually tests `_repr_` instead of a test which fails much earlier. See one of the examples mentioned above for 24 for possible candidates for tests.

-   I consider 43 to be still open: the lines
    {{{
    #!python
    for variable in self.variable_names():
        if variable in self.valid_from.keys():
    }}}
    should not be there because it is not the task of `can_absorb` to deal with `valid_from` at all.

-   Items 23, 47, 48 are not mentioned in your commits and I think that they are still open.

Thus as far as I am concerned, the following items are open from previous rounds:

8. example for `valid_from`: It would be great to have an example where the parameter`valid_from` is explained within this concrete situation.

16. `BTerm.can_absorb`: The `NotImplementedError` seems to be unnecessary because the following code should mostly work for arbitrary number of variables (but the keys of `valid_from` must agree, which should be checked somewhere).

21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.

23. The link to `sage.misc.superseded.experimental` is not formatted properly.

24. Follow-up to 12: I think that the keys of `valid_from` should //at least// contain the variables of the actual growth element and //at most// contain the variables of the growth group. The new check introduced in 0eeb50da71 means that the keys of `valid_from` are enforced to //at most// contain the variables of the actual growth element.

27. `BTerm._repr_` is now untested (since 0eeb50da71) in the case of several entries of `values_from`

43. `BTerm.can_absorb`: I fear I forgot to mention the following in the last round: I do not think that the restriction `if key in other.valid_from.keys()` is appropriate: we intend to fix `valid_from` during absorption; as long as all BTerms involved are well defined (according to 24) there should not be any problem.

47. `BTermMonoid` description of input variable `coefficient_ring`: Remove trailing full stop.

48. `BTermMonoid._create_element_`: Replace `TESTS:` by `TESTS::`.

New items:

49. `GenericGrowthElement._find_minimum_`: replace `""""` by `"""` at the beginning of the docstring

50. `GenericGrowthElement._find_minimum_`, `MonomialGrowthElement._find_minimum_`: I suggest to change the description of `valid_from` to "a dictionary describing the range of the minimization: the keys are names of variables and the range is the intersection over the ranges where the absolute value of the variable designated by the key is at least the corresponding value"

51. `GenericGrowthElement._find_minimum_`: remove trailing full stop from output section.

52. `GenericGrowthElement._find_minimum_`, `MonomialGrowthElement._find_minimum_`: Add full stop to one-sentence description.

53. `MonomialGrowthElement._find_minimum_`: replace `next(iter(valid_from.values()))` by something resembling to `valid_from[self.variable_names()[0]]` (with some extra care when `variable_names()` is the empty tuple).

54. (33. ctd) `MonomialGrowthElement._find_minimum_`: if `self._is_lt_one_()`, then an exception (perhaps `DecreasingGrowthElementError` derived from `ValueError`) should be raised.

55. `BTerm.absorb`: I suggest to replace `self.growth._lt_(other.growth)` by `self.growth < other.growth`: the operator `<` is overloaded in terms of the `_lt_` method, so it ultimately boils down to the same code, but using `<` makes it more pythonic and more readable.

56. `BTerm.absorb`: I suggest to replace `growth_new = max(self.growth, other.growth)` by `growth_new = self.growth` (because this is ensured anyway) or to remove the variable `growth_new` completely.

57. `BTerm.absorb`: I think that the variable names `coeff_max` and `coeff_min` are not very clear; so I proposed to remove them completely, they can be replaced by `self.coefficient` and `other.coefficient`, respectively.

58. `GenericGrowthElement._find_minimum_`, `MonomialGrowthElement._find_minimum_`: add at least one test (all functions in [SageMath](SageMath) must be tested)



---

archive/issue_comments_452861.json:
```json
{
    "body": "I will have a look at code of this ticket once the items above are processed; no comments at the moment to these items.",
    "created_at": "2021-07-09T13:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452861",
    "user": "@dkrenn"
}
```

I will have a look at code of this ticket once the items above are processed; no comments at the moment to these items.



---

archive/issue_comments_452862.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-07-13T14:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452862",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_452863.json:
```json
{
    "body": "I addressed items: `8, 21, 24, 27, 43, 47, 48, 49, 50, 51, 52, 53, 54 (33 ctd.), 55, 56, 57, 58`.\n\nI have implemented a basic version of `BTermMonoid._coerce_map_from_` to allow absorbtion of exact terms. This does not work yet. So items `16` and `21` are still open.",
    "created_at": "2021-07-13T14:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452863",
    "user": "@thhagelmayer"
}
```

I addressed items: `8, 21, 24, 27, 43, 47, 48, 49, 50, 51, 52, 53, 54 (33 ctd.), 55, 56, 57, 58`.

I have implemented a basic version of `BTermMonoid._coerce_map_from_` to allow absorbtion of exact terms. This does not work yet. So items `16` and `21` are still open.



---

archive/issue_comments_452864.json:
```json
{
    "body": "Thank you. Some remarks on previous items and a list of 5 items, most of which should be easily fixable.\n\n-   Concerning 21 and the coercion framework: I'd appreciate Benjamin's and/or Daniel's input on that.\n\n-   Concerning 8: I cannot remember having seen a method `.explanation` before, so I am unsure whether users will actually find it. I previously had thought of simply adding some text into a rather visible example (e.g. in the class docstring of `BTerm`). So I would appreciate other opinions on how to proceed. In the meantime, I keep 8 open in order to track this.\n\n-   Concerning 16: I think that this item simply disappeared in one of the iterations; in any case there is clearly no `NotImplementedError` in `BTerm.can_absorb` anymore. And handling keys of `valid_from` is now done in `BTerm._absorb_`. So I consider 16 to be closed.\n\n\nThus as far as I am concerned, the following items are open from previous rounds:\n\n8. example for `valid_from`: It would be great to have an example where the parameter`valid_from` is explained within this concrete situation.\n\n21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.\n\nNew items:\n\n59. `BTerm._coerce_map_from_`: I think that the coefficient ring of `S` should also coerce into the coefficient ring of `self` (This is not mentioned in the Note box, but I think this is mentioned in some of the other term monoids.)\n\n60. `DecreasingGrowthElementError`: docstring: I think that `MonomialGrowthElement` should be replaced by `GenericGrowthElement` (at some stage, we will also raise this error in other situations than `MonomialGrowthElement` and I assume that we will then not be aware of the fact that this docstring needs corrections.)\n\n61. `MonomialGrowthElement._find_minimum_`: typo \"less then one\" -> \"less than one\"\n\n62. `MonomialGrowthElement._find_minimum_`: I think that `if not len(self.variable_names()):` could be stated as an `assert self.variable_names(), f'{self.variable_names()} is empty'` because at this point, we have no idea how this should ever false, so an assertion seems to be more adequate. And it seems to be more pythonic to test for truthiness of the tuple `self.variable_names()` instead of computing the length first.\n\n63. `BTerm.explanation`: Replace `\"\"\"\"` by `\"\"\"`.",
    "created_at": "2021-07-13T18:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452864",
    "user": "@cheuberg"
}
```

Thank you. Some remarks on previous items and a list of 5 items, most of which should be easily fixable.

-   Concerning 21 and the coercion framework: I'd appreciate Benjamin's and/or Daniel's input on that.

-   Concerning 8: I cannot remember having seen a method `.explanation` before, so I am unsure whether users will actually find it. I previously had thought of simply adding some text into a rather visible example (e.g. in the class docstring of `BTerm`). So I would appreciate other opinions on how to proceed. In the meantime, I keep 8 open in order to track this.

-   Concerning 16: I think that this item simply disappeared in one of the iterations; in any case there is clearly no `NotImplementedError` in `BTerm.can_absorb` anymore. And handling keys of `valid_from` is now done in `BTerm._absorb_`. So I consider 16 to be closed.


Thus as far as I am concerned, the following items are open from previous rounds:

8. example for `valid_from`: It would be great to have an example where the parameter`valid_from` is explained within this concrete situation.

21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms.

New items:

59. `BTerm._coerce_map_from_`: I think that the coefficient ring of `S` should also coerce into the coefficient ring of `self` (This is not mentioned in the Note box, but I think this is mentioned in some of the other term monoids.)

60. `DecreasingGrowthElementError`: docstring: I think that `MonomialGrowthElement` should be replaced by `GenericGrowthElement` (at some stage, we will also raise this error in other situations than `MonomialGrowthElement` and I assume that we will then not be aware of the fact that this docstring needs corrections.)

61. `MonomialGrowthElement._find_minimum_`: typo "less then one" -> "less than one"

62. `MonomialGrowthElement._find_minimum_`: I think that `if not len(self.variable_names()):` could be stated as an `assert self.variable_names(), f'{self.variable_names()} is empty'` because at this point, we have no idea how this should ever false, so an assertion seems to be more adequate. And it seems to be more pythonic to test for truthiness of the tuple `self.variable_names()` instead of computing the length first.

63. `BTerm.explanation`: Replace `""""` by `"""`.



---

archive/issue_comments_452865.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-13T18:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452865",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_452866.json:
```json
{
    "body": "Replying to [comment:28 cheuberg]:\n> -   Concerning 21 and the coercion framework: I'd appreciate Benjamin's and/or Daniel's input on that.\n\nIt is the conversion (not coercion) that is already failing. There seem to be two issues. First, there needs to be place during construction of an element, where it is said how to convert an exact term to an `B`-term. This was much easier with `O`-terms and done a bit implicitly (somewhere). Second (but related wrt to the code), there is a issue with passing on parameters (the `valid_from` keyword). I will think about these issues and how to fix them, inparticular the second, tomorrow.",
    "created_at": "2021-07-13T19:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452866",
    "user": "@dkrenn"
}
```

Replying to [comment:28 cheuberg]:
> -   Concerning 21 and the coercion framework: I'd appreciate Benjamin's and/or Daniel's input on that.

It is the conversion (not coercion) that is already failing. There seem to be two issues. First, there needs to be place during construction of an element, where it is said how to convert an exact term to an `B`-term. This was much easier with `O`-terms and done a bit implicitly (somewhere). Second (but related wrt to the code), there is a issue with passing on parameters (the `valid_from` keyword). I will think about these issues and how to fix them, inparticular the second, tomorrow.



---

archive/issue_comments_452867.json:
```json
{
    "body": "FWIW, I just had a look at the problem with conversion. There are two questions that need to be answered:\n\nWhat should be the result of\n\n```\nsage: from sage.rings.asymptotic.growth_group import GrowthGroup\nsage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\nsage: G = GrowthGroup('x^ZZ')\nsage: BT = TermMonoid('B', G, QQ)\nsage: ET = TermMonoid('exact', G, QQ)\nsage: t = ET(x^2, 5); t\n5*x^2\nsage: BT(t)  # converting an exact term to a BTerm\n???\n```\n\nMy suggestion would be `B(5*x^2, x>=0)` or something similar.\n\nAs for how this should be implemented: The conversion happens in `GenericTermMonoid._element_constructor_`, and currently fails because when calling `BT(t)`, the passed `data` is an `ExactTerm`, which thus branches into the `elif` on line 1809 in which `self._create_element_(data.growth, data.coefficient)` is returned -- but as `self` references `BT`, a `BTermMonoid` here, `BTermMonoid._create_element_` is called which has `valid_from` as a non-optional keyword.\n\nNow this is the point where we have several options how to fix this (this is more or less the second question), here are two possible ones:\n\na. Make `valid_from` an optional keyword argument in `BTermMonoid._create_element_` with default value `None`, and add something along the lines of\n   {{{\n   if valid_from is None:\n       valid_from = dict((var_name, self.coefficient_ring.zero()) for var_name in growth.variable_names())\n   }}}\n   to the method. However, note that this would also mean that something like `BT(x^2, 5)` wouldn't error out although `valid_from` was not specified; it would default to creating a `BTerm` which is assumed to be valid for all x >= 0.\n\nb. Adapt `GenericTermMonoid._element_constructor_` and explicitly ask in the elif-branch starting on line 1809 whether `self` is an instance of `BTermMonoid` \u2013 and if so, construct the corresponding `valid_from` dictionary just like in the first case, then call `self._create_element_` just like intended.\n\n(a) brings an implicit assumption with it that could theoretically cause problems, but I think it is the more flexible and interface-friendlier variant. I don't like checking for a concrete class in `GenericTermMonoid._element_constructor_` as much because it *could* take away some of the flexibility the framework currently offers (one *could* want to implement a different `BTerm` class; the term factory supports that in principle \u2013 but there are of course workarounds) as suggested in (b). A more flexible variant of (b) would be the implementation of `BTermMonoid._element_constructor_`, but that also comes with some degree of code duplication / the need to refactor.\n\nLet's discuss this further in our upcoming meeting.",
    "created_at": "2021-07-13T23:20:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452867",
    "user": "@behackl"
}
```

FWIW, I just had a look at the problem with conversion. There are two questions that need to be answered:

What should be the result of

```
sage: from sage.rings.asymptotic.growth_group import GrowthGroup
sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
sage: G = GrowthGroup('x^ZZ')
sage: BT = TermMonoid('B', G, QQ)
sage: ET = TermMonoid('exact', G, QQ)
sage: t = ET(x^2, 5); t
5*x^2
sage: BT(t)  # converting an exact term to a BTerm
???
```

My suggestion would be `B(5*x^2, x>=0)` or something similar.

As for how this should be implemented: The conversion happens in `GenericTermMonoid._element_constructor_`, and currently fails because when calling `BT(t)`, the passed `data` is an `ExactTerm`, which thus branches into the `elif` on line 1809 in which `self._create_element_(data.growth, data.coefficient)` is returned -- but as `self` references `BT`, a `BTermMonoid` here, `BTermMonoid._create_element_` is called which has `valid_from` as a non-optional keyword.

Now this is the point where we have several options how to fix this (this is more or less the second question), here are two possible ones:

a. Make `valid_from` an optional keyword argument in `BTermMonoid._create_element_` with default value `None`, and add something along the lines of
   {{{
   if valid_from is None:
       valid_from = dict((var_name, self.coefficient_ring.zero()) for var_name in growth.variable_names())
   }}}
   to the method. However, note that this would also mean that something like `BT(x^2, 5)` wouldn't error out although `valid_from` was not specified; it would default to creating a `BTerm` which is assumed to be valid for all x >= 0.

b. Adapt `GenericTermMonoid._element_constructor_` and explicitly ask in the elif-branch starting on line 1809 whether `self` is an instance of `BTermMonoid` – and if so, construct the corresponding `valid_from` dictionary just like in the first case, then call `self._create_element_` just like intended.

(a) brings an implicit assumption with it that could theoretically cause problems, but I think it is the more flexible and interface-friendlier variant. I don't like checking for a concrete class in `GenericTermMonoid._element_constructor_` as much because it *could* take away some of the flexibility the framework currently offers (one *could* want to implement a different `BTerm` class; the term factory supports that in principle – but there are of course workarounds) as suggested in (b). A more flexible variant of (b) would be the implementation of `BTermMonoid._element_constructor_`, but that also comes with some degree of code duplication / the need to refactor.

Let's discuss this further in our upcoming meeting.



---

archive/issue_comments_452868.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T12:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452868",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452869.json:
```json
{
    "body": "I have addressed items `8, 59, 60, 61 and 62.`",
    "created_at": "2021-07-16T12:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452869",
    "user": "@thhagelmayer"
}
```

I have addressed items `8, 59, 60, 61 and 62.`



---

archive/issue_comments_452870.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-16T12:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452870",
    "user": "@thhagelmayer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452871.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-18T14:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452871",
    "user": "@dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_452872.json:
```json
{
    "body": "Thanks you for this code; it looks quite good already; I have a couple of minor comments:\n\n64. Use the same description of `valid_from` everywhere, e.g. the one of `BTerm`:\n\n```\n+    - ``valid_from`` -- dictionary mapping variable names to lower bounds\n+      for the corresponding variable. The bound implied by this term is valid when\n+      all variables are at least their corresponding lower bound\n```\n\n  It is not used e.g. in `.growth_group`\n\n65. \"Examples\" at top of docstring of `BTerm`. Is there a particular reason for putting the examples at this unsusual position? If not, I suggest to move them to the EXAMPLES-section; then it can also be checked that they work properly.\n\n66. I suggest to put the ``@`experimental`-decorator to the monoid.\n\n67. Consider putting the experimental-warning in the docstring at the top of the file; maybe in the Various-section. This `FutureWarning` will otherwise be somewhere in the middle due to #32229.\n\n68. In `__init__`, the code\n\n```\n        try:\n            coefficient = parent.coefficient_ring(coefficient)\n\t...\n```\n\n  seems to be unneccessary. This is done in the super-class. I think, the line\n\n```\n        super().__init__(parent=parent, growth=growth, coefficient=coefficient)\n```\n\n  should be the first statement in this `__init__` to deal with this issue.\n\n  Also the check for a zero coefficient can be removed as done in the super-class init.\n\n  Moreover, just seen that in `TermWithCoefficient.__init__` the `super` should (for consistency) be moved to the top.\n\n69. The code\n\n```\nself.valid_from = valid_from\n```\n\n  should only be done after everything is checked, not before.\n\n70. In `_absorb_`, the doctest\n\n```\n            sage: t1.absorb(t4)\n```\n\n  fails because conversion is not implemented yet (#32229). I think, the wrong output should be removed and the test marked as by \"# not tested, see #32229\" (or similar) to avoid confusion.\n\n71. In `_absorb_`, the line\n\n```\n        if self.growth < other.growth:\n```\n\n  should rather be\n\n```\n        if not (self.growth >= other.growth):\n```\n\n  right?\n\n72. In `_absorb_`, I think instead of\n\n```\n        union = {**self.valid_from, **other.valid_from}\n        for variable_name in union:\n```\n\n  the code\n\n```\n\tfor variable_name in set().union(self.valid_from.keys(), other.valid_from.keys()):\n```\n\n  would be clearer.\n\n73. In `_create_element_`, is the idea of the test\n\n```\n    sage: BT(x^3, 4, 10)\n```\n\n  to make sure, that there is no positional third argument? If yes, this will be impossible anyways after #32215. If not, what is its purpose?\n\n----\nNew commits:",
    "created_at": "2021-07-18T14:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452872",
    "user": "@dkrenn"
}
```

Thanks you for this code; it looks quite good already; I have a couple of minor comments:

64. Use the same description of `valid_from` everywhere, e.g. the one of `BTerm`:

```
+    - ``valid_from`` -- dictionary mapping variable names to lower bounds
+      for the corresponding variable. The bound implied by this term is valid when
+      all variables are at least their corresponding lower bound
```

  It is not used e.g. in `.growth_group`

65. "Examples" at top of docstring of `BTerm`. Is there a particular reason for putting the examples at this unsusual position? If not, I suggest to move them to the EXAMPLES-section; then it can also be checked that they work properly.

66. I suggest to put the ``@`experimental`-decorator to the monoid.

67. Consider putting the experimental-warning in the docstring at the top of the file; maybe in the Various-section. This `FutureWarning` will otherwise be somewhere in the middle due to #32229.

68. In `__init__`, the code

```
        try:
            coefficient = parent.coefficient_ring(coefficient)
	...
```

  seems to be unneccessary. This is done in the super-class. I think, the line

```
        super().__init__(parent=parent, growth=growth, coefficient=coefficient)
```

  should be the first statement in this `__init__` to deal with this issue.

  Also the check for a zero coefficient can be removed as done in the super-class init.

  Moreover, just seen that in `TermWithCoefficient.__init__` the `super` should (for consistency) be moved to the top.

69. The code

```
self.valid_from = valid_from
```

  should only be done after everything is checked, not before.

70. In `_absorb_`, the doctest

```
            sage: t1.absorb(t4)
```

  fails because conversion is not implemented yet (#32229). I think, the wrong output should be removed and the test marked as by "# not tested, see #32229" (or similar) to avoid confusion.

71. In `_absorb_`, the line

```
        if self.growth < other.growth:
```

  should rather be

```
        if not (self.growth >= other.growth):
```

  right?

72. In `_absorb_`, I think instead of

```
        union = {**self.valid_from, **other.valid_from}
        for variable_name in union:
```

  the code

```
	for variable_name in set().union(self.valid_from.keys(), other.valid_from.keys()):
```

  would be clearer.

73. In `_create_element_`, is the idea of the test

```
    sage: BT(x^3, 4, 10)
```

  to make sure, that there is no positional third argument? If yes, this will be impossible anyways after #32215. If not, what is its purpose?

----
New commits:



---

archive/issue_comments_452873.json:
```json
{
    "body": "Replying to [comment:34 dkrenn]:\n> Thanks you for this code; it looks quite good already; I have a couple of minor comments:\n> ----\n> New commits:\n> ||[3498449](https://git.sagemath.org/sage.git/commit?id=3498449102a89f07c2bfa0d757e2cb2fce383249)||`Trac #31933 review: unify spelling B-term`||\n> ||[1933586](https://git.sagemath.org/sage.git/commit?id=1933586595d8bd7730a41e5e13c2dae8d3d53710)||`Trac #31933 review: simplfy doctests by using factory`||\n> ||[77717e4](https://git.sagemath.org/sage.git/commit?id=77717e4d71091ad09810b0fdc08133b84c17b046)||`Trac #31933 review: minor changes to docstrings etc`||\n\nI've added a couple of very minor reviewer commits (seemed easier than writing these up; please have a look).",
    "created_at": "2021-07-18T14:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452873",
    "user": "@dkrenn"
}
```

Replying to [comment:34 dkrenn]:
> Thanks you for this code; it looks quite good already; I have a couple of minor comments:
> ----
> New commits:
> ||[3498449](https://git.sagemath.org/sage.git/commit?id=3498449102a89f07c2bfa0d757e2cb2fce383249)||`Trac #31933 review: unify spelling B-term`||
> ||[1933586](https://git.sagemath.org/sage.git/commit?id=1933586595d8bd7730a41e5e13c2dae8d3d53710)||`Trac #31933 review: simplfy doctests by using factory`||
> ||[77717e4](https://git.sagemath.org/sage.git/commit?id=77717e4d71091ad09810b0fdc08133b84c17b046)||`Trac #31933 review: minor changes to docstrings etc`||

I've added a couple of very minor reviewer commits (seemed easier than writing these up; please have a look).



---

archive/issue_comments_452874.json:
```json
{
    "body": "Replying to [comment:30 behackl]:\n> FWIW, I just had a look at the problem with conversion. \n\nConversion is now handled in #32229.",
    "created_at": "2021-07-18T14:07:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452874",
    "user": "@dkrenn"
}
```

Replying to [comment:30 behackl]:
> FWIW, I just had a look at the problem with conversion. 

Conversion is now handled in #32229.



---

archive/issue_comments_452875.json:
```json
{
    "body": "I did not check what from <= 63 is still open and what not.",
    "created_at": "2021-07-18T14:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452875",
    "user": "@dkrenn"
}
```

I did not check what from <= 63 is still open and what not.



---

archive/issue_comments_452876.json:
```json
{
    "body": "Replying to [comment:35 dkrenn]:\n\nThank you for looking at the code and for the minor commits. It looks good to me.\nI will work on the points you mentioned.\n\n> Replying to [comment:34 dkrenn]:\n> > Thanks you for this code; it looks quite good already; I have a couple of minor comments:\n> > ----\n> > New commits:\n> > ||[3498449](https://git.sagemath.org/sage.git/commit?id=3498449102a89f07c2bfa0d757e2cb2fce383249)||`Trac #31933 review: unify spelling B-term`||\n> > ||[1933586](https://git.sagemath.org/sage.git/commit?id=1933586595d8bd7730a41e5e13c2dae8d3d53710)||`Trac #31933 review: simplfy doctests by using factory`||\n> > ||[77717e4](https://git.sagemath.org/sage.git/commit?id=77717e4d71091ad09810b0fdc08133b84c17b046)||`Trac #31933 review: minor changes to docstrings etc`||\n> \n> I've added a couple of very minor reviewer commits (seemed easier than writing these up; please have a look).",
    "created_at": "2021-07-19T14:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452876",
    "user": "@thhagelmayer"
}
```

Replying to [comment:35 dkrenn]:

Thank you for looking at the code and for the minor commits. It looks good to me.
I will work on the points you mentioned.

> Replying to [comment:34 dkrenn]:
> > Thanks you for this code; it looks quite good already; I have a couple of minor comments:
> > ----
> > New commits:
> > ||[3498449](https://git.sagemath.org/sage.git/commit?id=3498449102a89f07c2bfa0d757e2cb2fce383249)||`Trac #31933 review: unify spelling B-term`||
> > ||[1933586](https://git.sagemath.org/sage.git/commit?id=1933586595d8bd7730a41e5e13c2dae8d3d53710)||`Trac #31933 review: simplfy doctests by using factory`||
> > ||[77717e4](https://git.sagemath.org/sage.git/commit?id=77717e4d71091ad09810b0fdc08133b84c17b046)||`Trac #31933 review: minor changes to docstrings etc`||
> 
> I've added a couple of very minor reviewer commits (seemed easier than writing these up; please have a look).



---

archive/issue_comments_452877.json:
```json
{
    "body": "Replying to [comment:34 dkrenn]:\n\n> 73. In `_create_element_`, is the idea of the test\n> {{{\n>     sage: BT(x^3, 4, 10)\n> }}}\n>   to make sure, that there is no positional third argument? If yes, this will be impossible anyways after #32215. If not, what is its purpose?\n\nYes, that is the idea. Should the test be removed then?",
    "created_at": "2021-07-19T14:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452877",
    "user": "@thhagelmayer"
}
```

Replying to [comment:34 dkrenn]:

> 73. In `_create_element_`, is the idea of the test
> {{{
>     sage: BT(x^3, 4, 10)
> }}}
>   to make sure, that there is no positional third argument? If yes, this will be impossible anyways after #32215. If not, what is its purpose?

Yes, that is the idea. Should the test be removed then?



---

archive/issue_comments_452878.json:
```json
{
    "body": "Replying to [comment:34 dkrenn]:\n\n> 65. \"Examples\" at top of docstring of `BTerm`. Is there a particular reason for putting the examples at this unsusual position? If not, I suggest to move them to the EXAMPLES-section; then it can also be checked that they work properly.\n\nI have put this Examples section at the top for better visibility. The main purpose of this block is to explain what `valid_from` actually means for a B-term.",
    "created_at": "2021-07-19T14:37:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452878",
    "user": "@thhagelmayer"
}
```

Replying to [comment:34 dkrenn]:

> 65. "Examples" at top of docstring of `BTerm`. Is there a particular reason for putting the examples at this unsusual position? If not, I suggest to move them to the EXAMPLES-section; then it can also be checked that they work properly.

I have put this Examples section at the top for better visibility. The main purpose of this block is to explain what `valid_from` actually means for a B-term.



---

archive/issue_comments_452879.json:
```json
{
    "body": "Replying to [comment:39 gh-thhagelmayer]:\n> Replying to [comment:34 dkrenn]:\n> \n> > 73. In `_create_element_`, is the idea of the test\n> > {{{\n> >     sage: BT(x^3, 4, 10)\n> > }}}\n> >   to make sure, that there is no positional third argument? If yes, this will be impossible anyways after #32215. If not, what is its purpose?\n> \n> Yes, that is the idea. Should the test be removed then?\n\nProbably the best, since it would be removed later anyways.",
    "created_at": "2021-07-19T15:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452879",
    "user": "@dkrenn"
}
```

Replying to [comment:39 gh-thhagelmayer]:
> Replying to [comment:34 dkrenn]:
> 
> > 73. In `_create_element_`, is the idea of the test
> > {{{
> >     sage: BT(x^3, 4, 10)
> > }}}
> >   to make sure, that there is no positional third argument? If yes, this will be impossible anyways after #32215. If not, what is its purpose?
> 
> Yes, that is the idea. Should the test be removed then?

Probably the best, since it would be removed later anyways.



---

archive/issue_comments_452880.json:
```json
{
    "body": "Replying to [comment:40 gh-thhagelmayer]:\n> Replying to [comment:34 dkrenn]:\n> \n> > 65. \"Examples\" at top of docstring of `BTerm`. Is there a particular reason for putting the examples at this unsusual position? If not, I suggest to move them to the EXAMPLES-section; then it can also be checked that they work properly.\n> \n> I have put this Examples section at the top for better visibility. The main purpose of this block is to explain what `valid_from` actually means for a B-term.\n\nI see. This seems not quite easy to do, however. If there is code, it should be tested. We can make run the test directly there; this would give something like\n\n```\n    We first explain what B-terms are. With\n    ::\n\n        sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup\n        sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\n        sage: G = MonomialGrowthGroup(ZZ, 'x')\n        sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)\n\n    B-terms are, for example,\n    ::\n\n        sage: T(x^2, coefficient=5, valid_from={'x': 3})\n        B-Term with coefficient 5, growth x^2 and valid for x >= 3\n\n    a term whose absolute value is bounded by `5|x|^2` for `|x| >= 3`,\n    ::\n    \n        sage: T(x^3, coefficient=42, valid_from={'x': 15, 'y': 15})  # not tested\n\n    a term whose absolute value is bounded by `42|x|^3` for `|x| >= 15` and\n    ` |y| >= 15`, or\n    ::\n\n        sage: T(x^3*y^2, coefficient=42, valid_from={'x': 10, 'y': 20})  # not tested\n\n    a term whose absolute value is bounded by `42 |x|^3 |y|^2` for\n    `|x| >= 10` and |y| >= 20`.\n```\n\nWe need the `not tested` as two variables do not work right now (as I understand).\n\nAs an alternative, we could do something like\n\n```\n    A B-term represents all functions which (in absolute value) is bounded\n    by the given ``growth`` and ``coefficient`` for the parameters\n    given by ``valid_from``.\n    For example, we have terms that represent functions\n \n    - bounded by `5|x|^2` for `|x| >= 3` (see below for the actual example),\n\n    - bounded by `42|x|^3` for `|x| >= 15` and ` |y| >= 15`, or\n\n    - bounded by `42 |x|^3 |y|^2` for `|x| >= 10` and |y| >= 20`.\n\n    INPUT:\n\n    ...\n\n    EXAMPLES::\n\n        sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup\n        sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\n        sage: G = MonomialGrowthGroup(ZZ, 'x')\n        sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)\n\n    We revisit the example from the introduction::\n\n        sage: T(x^2, coefficient=5, valid_from={'x': 3})\n        B-Term with coefficient 5, growth x^2 and valid for x >= 3\n```\n\nWhat do you think?",
    "created_at": "2021-07-19T15:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452880",
    "user": "@dkrenn"
}
```

Replying to [comment:40 gh-thhagelmayer]:
> Replying to [comment:34 dkrenn]:
> 
> > 65. "Examples" at top of docstring of `BTerm`. Is there a particular reason for putting the examples at this unsusual position? If not, I suggest to move them to the EXAMPLES-section; then it can also be checked that they work properly.
> 
> I have put this Examples section at the top for better visibility. The main purpose of this block is to explain what `valid_from` actually means for a B-term.

I see. This seems not quite easy to do, however. If there is code, it should be tested. We can make run the test directly there; this would give something like

```
    We first explain what B-terms are. With
    ::

        sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup
        sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
        sage: G = MonomialGrowthGroup(ZZ, 'x')
        sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)

    B-terms are, for example,
    ::

        sage: T(x^2, coefficient=5, valid_from={'x': 3})
        B-Term with coefficient 5, growth x^2 and valid for x >= 3

    a term whose absolute value is bounded by `5|x|^2` for `|x| >= 3`,
    ::
    
        sage: T(x^3, coefficient=42, valid_from={'x': 15, 'y': 15})  # not tested

    a term whose absolute value is bounded by `42|x|^3` for `|x| >= 15` and
    ` |y| >= 15`, or
    ::

        sage: T(x^3*y^2, coefficient=42, valid_from={'x': 10, 'y': 20})  # not tested

    a term whose absolute value is bounded by `42 |x|^3 |y|^2` for
    `|x| >= 10` and |y| >= 20`.
```

We need the `not tested` as two variables do not work right now (as I understand).

As an alternative, we could do something like

```
    A B-term represents all functions which (in absolute value) is bounded
    by the given ``growth`` and ``coefficient`` for the parameters
    given by ``valid_from``.
    For example, we have terms that represent functions
 
    - bounded by `5|x|^2` for `|x| >= 3` (see below for the actual example),

    - bounded by `42|x|^3` for `|x| >= 15` and ` |y| >= 15`, or

    - bounded by `42 |x|^3 |y|^2` for `|x| >= 10` and |y| >= 20`.

    INPUT:

    ...

    EXAMPLES::

        sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup
        sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
        sage: G = MonomialGrowthGroup(ZZ, 'x')
        sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)

    We revisit the example from the introduction::

        sage: T(x^2, coefficient=5, valid_from={'x': 3})
        B-Term with coefficient 5, growth x^2 and valid for x >= 3
```

What do you think?



---

archive/issue_comments_452881.json:
```json
{
    "body": "Replying to [comment:43 dkrenn]:\n> Replying to [comment:40 gh-thhagelmayer]:\n> > Replying to [comment:34 dkrenn]:\n> > \n> > > 65. \"Examples\" at top of docstring of `BTerm`. Is there a particular reason for putting the examples at this unsusual position? If not, I suggest to move them to the EXAMPLES-section; then it can also be checked that they work properly.\n> > \n> > I have put this Examples section at the top for better visibility. The main purpose of this block is to explain what `valid_from` actually means for a B-term.\n> \n> I see. This seems not quite easy to do, however. If there is code, it should be tested. We can make run the test directly there; this would give something like\n> {{{\n>     We first explain what B-terms are. With\n>     ::\n> \n>         sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup\n>         sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\n>         sage: G = MonomialGrowthGroup(ZZ, 'x')\n>         sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)\n> \n>     B-terms are, for example,\n>     ::\n> \n>         sage: T(x^2, coefficient=5, valid_from={'x': 3})\n>         B-Term with coefficient 5, growth x^2 and valid for x >= 3\n> \n>     a term whose absolute value is bounded by `5|x|^2` for `|x| >= 3`,\n>     ::\n>     \n>         sage: T(x^3, coefficient=42, valid_from={'x': 15, 'y': 15})  # not tested\n> \n>     a term whose absolute value is bounded by `42|x|^3` for `|x| >= 15` and\n>     ` |y| >= 15`, or\n>     ::\n> \n>         sage: T(x<sup>3*y</sup>2, coefficient=42, valid_from={'x': 10, 'y': 20})  # not tested\n> \n>     a term whose absolute value is bounded by `42 |x|^3 |y|^2` for\n>     `|x| >= 10` and |y| >= 20`.\n> }}}\n> We need the `not tested` as two variables do not work right now (as I understand).\n> \n> As an alternative, we could do something like\n> {{{\n>     A B-term represents all functions which (in absolute value) is bounded\n>     by the given ``growth`` and ``coefficient`` for the parameters\n>     given by ``valid_from``.\n>     For example, we have terms that represent functions\n>  \n>     - bounded by `5|x|^2` for `|x| >= 3` (see below for the actual example),\n> \n>     - bounded by `42|x|^3` for `|x| >= 15` and ` |y| >= 15`, or\n> \n>     - bounded by `42 |x|^3 |y|^2` for `|x| >= 10` and |y| >= 20`.\n> \n>     INPUT:\n> \n>     ...\n> \n>     EXAMPLES::\n> \n>         sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup\n>         sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\n>         sage: G = MonomialGrowthGroup(ZZ, 'x')\n>         sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)\n> \n>     We revisit the example from the introduction::\n> \n>         sage: T(x^2, coefficient=5, valid_from={'x': 3})\n>         B-Term with coefficient 5, growth x^2 and valid for x >= 3\n> }}}\n> What do you think?\n\nI like the first approach. I will implement it.\n\n> We need the `not tested` as two variables do not work right now (as I understand).\nTwo variables do not work right now. The representation works for two variables though.\n----\nLast 10 new commits:",
    "created_at": "2021-07-20T15:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452881",
    "user": "@thhagelmayer"
}
```

Replying to [comment:43 dkrenn]:
> Replying to [comment:40 gh-thhagelmayer]:
> > Replying to [comment:34 dkrenn]:
> > 
> > > 65. "Examples" at top of docstring of `BTerm`. Is there a particular reason for putting the examples at this unsusual position? If not, I suggest to move them to the EXAMPLES-section; then it can also be checked that they work properly.
> > 
> > I have put this Examples section at the top for better visibility. The main purpose of this block is to explain what `valid_from` actually means for a B-term.
> 
> I see. This seems not quite easy to do, however. If there is code, it should be tested. We can make run the test directly there; this would give something like
> {{{
>     We first explain what B-terms are. With
>     ::
> 
>         sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup
>         sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
>         sage: G = MonomialGrowthGroup(ZZ, 'x')
>         sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)
> 
>     B-terms are, for example,
>     ::
> 
>         sage: T(x^2, coefficient=5, valid_from={'x': 3})
>         B-Term with coefficient 5, growth x^2 and valid for x >= 3
> 
>     a term whose absolute value is bounded by `5|x|^2` for `|x| >= 3`,
>     ::
>     
>         sage: T(x^3, coefficient=42, valid_from={'x': 15, 'y': 15})  # not tested
> 
>     a term whose absolute value is bounded by `42|x|^3` for `|x| >= 15` and
>     ` |y| >= 15`, or
>     ::
> 
>         sage: T(x<sup>3*y</sup>2, coefficient=42, valid_from={'x': 10, 'y': 20})  # not tested
> 
>     a term whose absolute value is bounded by `42 |x|^3 |y|^2` for
>     `|x| >= 10` and |y| >= 20`.
> }}}
> We need the `not tested` as two variables do not work right now (as I understand).
> 
> As an alternative, we could do something like
> {{{
>     A B-term represents all functions which (in absolute value) is bounded
>     by the given ``growth`` and ``coefficient`` for the parameters
>     given by ``valid_from``.
>     For example, we have terms that represent functions
>  
>     - bounded by `5|x|^2` for `|x| >= 3` (see below for the actual example),
> 
>     - bounded by `42|x|^3` for `|x| >= 15` and ` |y| >= 15`, or
> 
>     - bounded by `42 |x|^3 |y|^2` for `|x| >= 10` and |y| >= 20`.
> 
>     INPUT:
> 
>     ...
> 
>     EXAMPLES::
> 
>         sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup
>         sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
>         sage: G = MonomialGrowthGroup(ZZ, 'x')
>         sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)
> 
>     We revisit the example from the introduction::
> 
>         sage: T(x^2, coefficient=5, valid_from={'x': 3})
>         B-Term with coefficient 5, growth x^2 and valid for x >= 3
> }}}
> What do you think?

I like the first approach. I will implement it.

> We need the `not tested` as two variables do not work right now (as I understand).
Two variables do not work right now. The representation works for two variables though.
----
Last 10 new commits:



---

archive/issue_comments_452882.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-20T15:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452882",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452883.json:
```json
{
    "body": "I worked on items `64-73` and merged #32153 into this ticket.\n\nA review would be appreciated.",
    "created_at": "2021-07-20T15:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452883",
    "user": "@thhagelmayer"
}
```

I worked on items `64-73` and merged #32153 into this ticket.

A review would be appreciated.



---

archive/issue_comments_452884.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-20T15:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452884",
    "user": "@thhagelmayer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452885.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-26T13:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452885",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452886.json:
```json
{
    "body": "It seems that there are missing the reviewer commit done on `u/dkrenn/initial_support_for_bterms`:\n\n```\n* 77717e4d71 - Trac #31933 review: minor changes to docstrings etc (9 days ago) [Daniel Krenn]\n* 1933586595 - Trac #31933 review: simplfy doctests by using factory (9 days ago) [Daniel Krenn]\n* 3498449102 - Trac #31933 review: unify spelling B-term (9 days ago) [Daniel Krenn]\n```\n",
    "created_at": "2021-07-27T08:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452886",
    "user": "@dkrenn"
}
```

It seems that there are missing the reviewer commit done on `u/dkrenn/initial_support_for_bterms`:

```
* 77717e4d71 - Trac #31933 review: minor changes to docstrings etc (9 days ago) [Daniel Krenn]
* 1933586595 - Trac #31933 review: simplfy doctests by using factory (9 days ago) [Daniel Krenn]
* 3498449102 - Trac #31933 review: unify spelling B-term (9 days ago) [Daniel Krenn]
```




---

archive/issue_comments_452887.json:
```json
{
    "body": "Replying to [comment:34 dkrenn]:\n> 67. Consider putting the experimental-warning in the docstring at the top of the file; maybe in the Various-section. This `FutureWarning` will otherwise be somewhere in the middle due to #32229.\n\n> ||[091271d](https://git.sagemath.org/sage.git/commit?id=091271dc62c7520c58706d6fd5223829e264ac95)||`Item 67. Moved WARNING-Block to the Various section for better visibility.`||\n\n`Various` and `=======` need to be next to each other, because the `=` mark a heading.\n\nWith my suggestion I meant to also put the actual experimental-warning at the top, so something like:\n\n```\nVarious\n=======\n\n.. WARNING::\n\n    The code for :class:`B-Terms <BTermMonoid>` is experimental, so\n    a warning is thrown when a :class:`BTerm`\n    is created for the first time in a session (see\n    :class:`sage.misc.superseded.experimental`).\n\n    ::\n\n        sage: from sage.rings.asymptotic.growth_group import GrowthGroup\n        sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\n        sage: T = TermMonoid('B', growth_group=GrowthGroup('x^ZZ'), coefficient_ring=QQ)\n        doctest:warning\n        ...\n        FutureWarning: This class/method/function is marked as experimental.\n        It, its functionality or its interface might change without a formal deprecation.\n        See https://trac.sagemath.org/31922 for details.\n```\n\n(not tested, docs not built)",
    "created_at": "2021-07-27T08:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452887",
    "user": "@dkrenn"
}
```

Replying to [comment:34 dkrenn]:
> 67. Consider putting the experimental-warning in the docstring at the top of the file; maybe in the Various-section. This `FutureWarning` will otherwise be somewhere in the middle due to #32229.

> ||[091271d](https://git.sagemath.org/sage.git/commit?id=091271dc62c7520c58706d6fd5223829e264ac95)||`Item 67. Moved WARNING-Block to the Various section for better visibility.`||

`Various` and `=======` need to be next to each other, because the `=` mark a heading.

With my suggestion I meant to also put the actual experimental-warning at the top, so something like:

```
Various
=======

.. WARNING::

    The code for :class:`B-Terms <BTermMonoid>` is experimental, so
    a warning is thrown when a :class:`BTerm`
    is created for the first time in a session (see
    :class:`sage.misc.superseded.experimental`).

    ::

        sage: from sage.rings.asymptotic.growth_group import GrowthGroup
        sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
        sage: T = TermMonoid('B', growth_group=GrowthGroup('x^ZZ'), coefficient_ring=QQ)
        doctest:warning
        ...
        FutureWarning: This class/method/function is marked as experimental.
        It, its functionality or its interface might change without a formal deprecation.
        See https://trac.sagemath.org/31922 for details.
```

(not tested, docs not built)



---

archive/issue_comments_452888.json:
```json
{
    "body": "Replying to [comment:46 git]:\n> ||[b28061e](https://git.sagemath.org/sage.git/commit/?id=b28061ea9a06b1d503babbe8c0b2696e409f239d)||`Trac #31933. Addded latex representation to BTerm._repr_`||\n\n\n```\n+        if latex:\n+            valid_from_string = ''.join(f'{variable} >= {value}, '\n+                                        for variable, value in self.valid_from.items())\n```\n\nI think it should be `', '.join(f'{variable} >= {value}'` to avoid the trailing comma.",
    "created_at": "2021-07-27T08:38:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452888",
    "user": "@dkrenn"
}
```

Replying to [comment:46 git]:
> ||[b28061e](https://git.sagemath.org/sage.git/commit/?id=b28061ea9a06b1d503babbe8c0b2696e409f239d)||`Trac #31933. Addded latex representation to BTerm._repr_`||


```
+        if latex:
+            valid_from_string = ''.join(f'{variable} >= {value}, '
+                                        for variable, value in self.valid_from.items())
```

I think it should be `', '.join(f'{variable} >= {value}'` to avoid the trailing comma.



---

archive/issue_comments_452889.json:
```json
{
    "body": "Replying to [comment:45 gh-thhagelmayer]:\n> > I see. This seems not quite easy to do, however. If there is code, it should be tested. We can make run the test directly there; this would give something like\n> > {{{\n> >     We first explain what B-terms are. With\n> >     ::\n> > \n> >         sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup\n> >         sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\n> >         sage: G = MonomialGrowthGroup(ZZ, 'x')\n> >         sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)\n> > \n> >     B-terms are, for example,\n> >     ::\n> > \n> >         sage: T(x^2, coefficient=5, valid_from={'x': 3})\n> >         B-Term with coefficient 5, growth x^2 and valid for x >= 3\n> > \n> >     a term whose absolute value is bounded by `5|x|^2` for `|x| >= 3`,\n> >     ::\n> >     \n> >         sage: T(x^3, coefficient=42, valid_from={'x': 15, 'y': 15})  # not tested\n> > \n> >     a term whose absolute value is bounded by `42|x|^3` for `|x| >= 15` and\n> >     ` |y| >= 15`, or\n> >     ::\n> > \n> >         sage: T(x<sup>3*y</sup>2, coefficient=42, valid_from={'x': 10, 'y': 20})  # not tested\n> > \n> >     a term whose absolute value is bounded by `42 |x|^3 |y|^2` for\n> >     `|x| >= 10` and |y| >= 20`.\n> > }}}\n> > We need the `not tested` as two variables do not work right now (as I understand).\n> > \n> > As an alternative, we could do something like\n> > {{{\n> >     A B-term represents all functions which (in absolute value) is bounded\n> >     by the given ``growth`` and ``coefficient`` for the parameters\n> >     given by ``valid_from``.\n> >     For example, we have terms that represent functions\n> >  \n> >     - bounded by `5|x|^2` for `|x| >= 3` (see below for the actual example),\n> > \n> >     - bounded by `42|x|^3` for `|x| >= 15` and ` |y| >= 15`, or\n> > \n> >     - bounded by `42 |x|^3 |y|^2` for `|x| >= 10` and |y| >= 20`.\n> > \n> >     INPUT:\n> > \n> >     ...\n> > \n> >     EXAMPLES::\n> > \n> >         sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup\n> >         sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid\n> >         sage: G = MonomialGrowthGroup(ZZ, 'x')\n> >         sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)\n> > \n> >     We revisit the example from the introduction::\n> > \n> >         sage: T(x^2, coefficient=5, valid_from={'x': 3})\n> >         B-Term with coefficient 5, growth x^2 and valid for x >= 3\n> > }}}\n> > What do you think?\n> \n> I like the first approach. I will implement it.\n\nI know that I suggested both approached; I, however, have second thoughts about the first apporach, since it clearly violates the style guidelines of the developer guide, as there is SageMath-code before the input block and the input block is quite late. Maybe we should discuss this once more.",
    "created_at": "2021-07-27T08:42:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452889",
    "user": "@dkrenn"
}
```

Replying to [comment:45 gh-thhagelmayer]:
> > I see. This seems not quite easy to do, however. If there is code, it should be tested. We can make run the test directly there; this would give something like
> > {{{
> >     We first explain what B-terms are. With
> >     ::
> > 
> >         sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup
> >         sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
> >         sage: G = MonomialGrowthGroup(ZZ, 'x')
> >         sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)
> > 
> >     B-terms are, for example,
> >     ::
> > 
> >         sage: T(x^2, coefficient=5, valid_from={'x': 3})
> >         B-Term with coefficient 5, growth x^2 and valid for x >= 3
> > 
> >     a term whose absolute value is bounded by `5|x|^2` for `|x| >= 3`,
> >     ::
> >     
> >         sage: T(x^3, coefficient=42, valid_from={'x': 15, 'y': 15})  # not tested
> > 
> >     a term whose absolute value is bounded by `42|x|^3` for `|x| >= 15` and
> >     ` |y| >= 15`, or
> >     ::
> > 
> >         sage: T(x<sup>3*y</sup>2, coefficient=42, valid_from={'x': 10, 'y': 20})  # not tested
> > 
> >     a term whose absolute value is bounded by `42 |x|^3 |y|^2` for
> >     `|x| >= 10` and |y| >= 20`.
> > }}}
> > We need the `not tested` as two variables do not work right now (as I understand).
> > 
> > As an alternative, we could do something like
> > {{{
> >     A B-term represents all functions which (in absolute value) is bounded
> >     by the given ``growth`` and ``coefficient`` for the parameters
> >     given by ``valid_from``.
> >     For example, we have terms that represent functions
> >  
> >     - bounded by `5|x|^2` for `|x| >= 3` (see below for the actual example),
> > 
> >     - bounded by `42|x|^3` for `|x| >= 15` and ` |y| >= 15`, or
> > 
> >     - bounded by `42 |x|^3 |y|^2` for `|x| >= 10` and |y| >= 20`.
> > 
> >     INPUT:
> > 
> >     ...
> > 
> >     EXAMPLES::
> > 
> >         sage: from sage.rings.asymptotic.growth_group import MonomialGrowthGroup
> >         sage: from sage.rings.asymptotic.term_monoid import DefaultTermMonoidFactory as TermMonoid
> >         sage: G = MonomialGrowthGroup(ZZ, 'x')
> >         sage: T = TermMonoid('B', growth_group=G, coefficient_ring=QQ)
> > 
> >     We revisit the example from the introduction::
> > 
> >         sage: T(x^2, coefficient=5, valid_from={'x': 3})
> >         B-Term with coefficient 5, growth x^2 and valid for x >= 3
> > }}}
> > What do you think?
> 
> I like the first approach. I will implement it.

I know that I suggested both approached; I, however, have second thoughts about the first apporach, since it clearly violates the style guidelines of the developer guide, as there is SageMath-code before the input block and the input block is quite late. Maybe we should discuss this once more.



---

archive/issue_comments_452890.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-27T16:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452890",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452891.json:
```json
{
    "body": "Thank you for your comments. I merged the missing reviewer commits and corrected the small issues.\n----\nNew commits:",
    "created_at": "2021-07-27T16:37:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452891",
    "user": "@thhagelmayer"
}
```

Thank you for your comments. I merged the missing reviewer commits and corrected the small issues.
----
New commits:



---

archive/issue_comments_452892.json:
```json
{
    "body": "Thank you for the changes. I had a look on the commits since my last comments;\nwe are all aware that conversion is postponed to #32229, but I keep\n\n21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms\n\non the list, just for the record.\n\nNew items:\n\n74. (f'up to 8, 65) `BTerm` docstring: \"all functions which (in absolute value) is bounded\" -> \"all functions which (in absolute value) are bounded\".\n\n75. `MonomialGrowthElement._find_minimum_`: I suggest to rewrite the error message introduced in 395fd73951c8f to say \"Minimum of ... is not implemented\" (add \"Minimum of\") such that this is more understandable.\n\n76. (f'up to 64) `site-packages/sage/rings/asymptotic/growth_group.py:docstring of sage.rings.asymptotic.growth_group.GenericGrowthElement._find_minimum_:8: WARNING: Bullet list ends without a blank line; unexpected unindent`; furthermore, I do not think that the docstring fits for `find_minimum` (\"The bound implied by this term is valid\" is good for `BTerm`s, but not for `_find_minimum_`). I suggest to revert the changes made in 1c1ebd41  in `growth_group.py` only.\n\n77. `BTerm` docstring: \"(see below for the actual example),\" should be moved to a position where it does not only concern the first example, but all three examples.\n\n78. `BTerm` docstring: Missing empty line after \"We revisit the example from the introduction::\" leads to destroyed formatting of the examples\n\n79. In the various section: remove \"L-terms\" from the todo box of things that need to be implemented, add your name to authors and acknowledgement.\n\n80. `BTerm._latex_`: Replace `>=` by `\\ge`.\n\n81. `BTerm` docstring: The old example `BT_QQ(x, 3, valid_from={'x': 20})` plus its associated definitions can now be removed because we now have the new examples which are explained in more detail.\n\n82. `BTerm` docstring: I suggest to break the examples block into three blocks and copy the short explanation from the start of the docstring after each of the examples (this is some redundancy, but avoids the need for scrolling, and might make things clearer; in some ways, it combines the advantages of both approaches discussed for the examples).",
    "created_at": "2021-08-02T19:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452892",
    "user": "@cheuberg"
}
```

Thank you for the changes. I had a look on the commits since my last comments;
we are all aware that conversion is postponed to #32229, but I keep

21. `BTerm.can_absorb`: I think that `BTerms` should be able to absorb exact terms

on the list, just for the record.

New items:

74. (f'up to 8, 65) `BTerm` docstring: "all functions which (in absolute value) is bounded" -> "all functions which (in absolute value) are bounded".

75. `MonomialGrowthElement._find_minimum_`: I suggest to rewrite the error message introduced in 395fd73951c8f to say "Minimum of ... is not implemented" (add "Minimum of") such that this is more understandable.

76. (f'up to 64) `site-packages/sage/rings/asymptotic/growth_group.py:docstring of sage.rings.asymptotic.growth_group.GenericGrowthElement._find_minimum_:8: WARNING: Bullet list ends without a blank line; unexpected unindent`; furthermore, I do not think that the docstring fits for `find_minimum` ("The bound implied by this term is valid" is good for `BTerm`s, but not for `_find_minimum_`). I suggest to revert the changes made in 1c1ebd41  in `growth_group.py` only.

77. `BTerm` docstring: "(see below for the actual example)," should be moved to a position where it does not only concern the first example, but all three examples.

78. `BTerm` docstring: Missing empty line after "We revisit the example from the introduction::" leads to destroyed formatting of the examples

79. In the various section: remove "L-terms" from the todo box of things that need to be implemented, add your name to authors and acknowledgement.

80. `BTerm._latex_`: Replace `>=` by `\ge`.

81. `BTerm` docstring: The old example `BT_QQ(x, 3, valid_from={'x': 20})` plus its associated definitions can now be removed because we now have the new examples which are explained in more detail.

82. `BTerm` docstring: I suggest to break the examples block into three blocks and copy the short explanation from the start of the docstring after each of the examples (this is some redundancy, but avoids the need for scrolling, and might make things clearer; in some ways, it combines the advantages of both approaches discussed for the examples).



---

archive/issue_comments_452893.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-02T19:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452893",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_452894.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-03T14:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452894",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452895.json:
```json
{
    "body": "Thank you. I still have a few rather trivial comments.\n\n83. (f'up to 81): `BTerm.__init__` docstring: `MonomialGrowthGroup` is imported, but unused.\n\n84. `BTerm.__init__`: I suggest to replace \"We revisit the example from the introduction:\" by \"We revisit the examples from the introduction:\" because it is more than one example\n\n85. `BTerm.__init__`: Replace `>=` by `\\ge` in all TeX formatted code\n\n86. (f'up to 80) `BTerm._latex_`: I think that `f'{variable} \\ge {value}'` should be `fr'{variable} \\ge {value}'` or `f'{variable} \\\\ge {value}'` to avoid the warning `4162: DeprecationWarning: invalid escape sequence \\g`\n\n87. (f'up to 76): `MonomialGrowthElement._find_minimum_`: please use the same description for the `valid_from` as in `GenericGrowthElement._find_minimum_`.\n\n88. (f'up to 79): I think that in the acknowledgements, there should be consistency between \"supported by the Google Summer of Code\" and \"supported by Google Summer of Code\".",
    "created_at": "2021-08-03T16:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452895",
    "user": "@cheuberg"
}
```

Thank you. I still have a few rather trivial comments.

83. (f'up to 81): `BTerm.__init__` docstring: `MonomialGrowthGroup` is imported, but unused.

84. `BTerm.__init__`: I suggest to replace "We revisit the example from the introduction:" by "We revisit the examples from the introduction:" because it is more than one example

85. `BTerm.__init__`: Replace `>=` by `\ge` in all TeX formatted code

86. (f'up to 80) `BTerm._latex_`: I think that `f'{variable} \ge {value}'` should be `fr'{variable} \ge {value}'` or `f'{variable} \\ge {value}'` to avoid the warning `4162: DeprecationWarning: invalid escape sequence \g`

87. (f'up to 76): `MonomialGrowthElement._find_minimum_`: please use the same description for the `valid_from` as in `GenericGrowthElement._find_minimum_`.

88. (f'up to 79): I think that in the acknowledgements, there should be consistency between "supported by the Google Summer of Code" and "supported by Google Summer of Code".



---

archive/issue_comments_452896.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-04T13:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452896",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452897.json:
```json
{
    "body": "I have worked on items `83, 84, 85, 86, 87, 88`.",
    "created_at": "2021-08-04T13:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452897",
    "user": "@thhagelmayer"
}
```

I have worked on items `83, 84, 85, 86, 87, 88`.



---

archive/issue_comments_452898.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-04T13:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452898",
    "user": "@thhagelmayer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452899.json:
```json
{
    "body": "Thank you. I have no further comments at this point. \n\nLet us keep this ticket open for some more days to give Daniel a chance to have a look at it in its present form (in particular the examples in the docstring of `BTerm.__init__`); the overall release process is now in rc stage, so tickets like this have no chance of getting merged before the first beta releases for 9.5.",
    "created_at": "2021-08-04T16:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452899",
    "user": "@cheuberg"
}
```

Thank you. I have no further comments at this point. 

Let us keep this ticket open for some more days to give Daniel a chance to have a look at it in its present form (in particular the examples in the docstring of `BTerm.__init__`); the overall release process is now in rc stage, so tickets like this have no chance of getting merged before the first beta releases for 9.5.



---

archive/issue_comments_452900.json:
```json
{
    "body": "Replying to [comment:56 git]:\n> ||[c8c8ec4](https://git.sagemath.org/sage.git/commit/?id=c8c8ec486fad105cc65e68b1889ff95575b49c97)||`Trac #31933. Item 76: revert GenericGrowthElement._find_minimum_ Input explanation introduced in 1c1ebd41. Add missing empty line.`||\n\n89. Is there a reason for not adapting the docstring description of the parameter `valid_from` in the term monoid file? If not, then this should also have the same description",
    "created_at": "2021-08-09T09:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452900",
    "user": "@dkrenn"
}
```

Replying to [comment:56 git]:
> ||[c8c8ec4](https://git.sagemath.org/sage.git/commit/?id=c8c8ec486fad105cc65e68b1889ff95575b49c97)||`Trac #31933. Item 76: revert GenericGrowthElement._find_minimum_ Input explanation introduced in 1c1ebd41. Add missing empty line.`||

89. Is there a reason for not adapting the docstring description of the parameter `valid_from` in the term monoid file? If not, then this should also have the same description



---

archive/issue_comments_452901.json:
```json
{
    "body": "Replying to [comment:56 git]:\n> ||[b8e7b86](https://git.sagemath.org/sage.git/commit/?id=b8e7b863bbf53fe4698b6d5131c18614c66c517b)||`Trac #31933. Item 82: Split examples block into three parts to have clearer explanations without scrolling.`||\n\n90. I suggest to replace\n\n```\n+    This is a term bounded by `5|x|^2` for `|x| >= 3`.\n+    ::\n```\n\nby\n\n```\n+    This is a term bounded by `5|x|^2` for `|x| >= 3`::\n```\n\nto have a colon preceding the code to make the reference of the \"This\" clearer. (3 occurrences)",
    "created_at": "2021-08-09T09:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452901",
    "user": "@dkrenn"
}
```

Replying to [comment:56 git]:
> ||[b8e7b86](https://git.sagemath.org/sage.git/commit/?id=b8e7b863bbf53fe4698b6d5131c18614c66c517b)||`Trac #31933. Item 82: Split examples block into three parts to have clearer explanations without scrolling.`||

90. I suggest to replace

```
+    This is a term bounded by `5|x|^2` for `|x| >= 3`.
+    ::
```

by

```
+    This is a term bounded by `5|x|^2` for `|x| >= 3`::
```

to have a colon preceding the code to make the reference of the "This" clearer. (3 occurrences)



---

archive/issue_comments_452902.json:
```json
{
    "body": "Except for the two minor (almost trivial) comments 89 and 90, this ticket is fine for me.",
    "created_at": "2021-08-09T09:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452902",
    "user": "@dkrenn"
}
```

Except for the two minor (almost trivial) comments 89 and 90, this ticket is fine for me.



---

archive/issue_comments_452903.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-09T09:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452903",
    "user": "@dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_452904.json:
```json
{
    "body": "Just had a look at the code because of #32214 and found two more very small things:\n\n91. I think, we should remove \"big\" in the only occurrence\n\n```\n+    Parent for asymptotic big `B`-terms.\n```\n\nto stay consistent.\n\n92. For consistency, we should replace the two\n\n```\n`B`-term\n```\n\nby `B-term`.",
    "created_at": "2021-08-09T13:13:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452904",
    "user": "@dkrenn"
}
```

Just had a look at the code because of #32214 and found two more very small things:

91. I think, we should remove "big" in the only occurrence

```
+    Parent for asymptotic big `B`-terms.
```

to stay consistent.

92. For consistency, we should replace the two

```
`B`-term
```

by `B-term`.



---

archive/issue_comments_452905.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-10T13:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452905",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_452906.json:
```json
{
    "body": "Changing keywords from \"gsoc21, asymptotics\" to \"gsoc2021, asymptotics\".",
    "created_at": "2021-08-12T00:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452906",
    "user": "@tscrim"
}
```

Changing keywords from "gsoc21, asymptotics" to "gsoc2021, asymptotics".



---

archive/issue_comments_452907.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-14T08:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452907",
    "user": "@thhagelmayer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_452908.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-18T16:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452908",
    "user": "@behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_452909.json:
```json
{
    "body": "I've reviewed the changes from when I last looked at this ticket up to now and have no further comments.\n\n89 seems to be unresolved, but I think it is fine that `MonomialGrowthElement._find_minimum_` has a different  description for `valid_from` than the `TermMonoid` \u2013 semantically, the focus is different.\n\nThanks, everyone!",
    "created_at": "2021-08-18T16:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452909",
    "user": "@behackl"
}
```

I've reviewed the changes from when I last looked at this ticket up to now and have no further comments.

89 seems to be unresolved, but I think it is fine that `MonomialGrowthElement._find_minimum_` has a different  description for `valid_from` than the `TermMonoid` – semantically, the focus is different.

Thanks, everyone!



---

archive/issue_comments_452910.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-08-29T09:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31696",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31696#issuecomment-452910",
    "user": "@vbraun"
}
```

Resolution: fixed
