# Issue 32023: Deprecate sage.numerical.optimize functions

archive/issues_032023.json:
```json
{
    "body": "CC:  @dimpase @orlitzky tmonteil @slel\n\n`sage.numerical.optimize` provides the following functions:\n\n- [find_root](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.find_root) \n  - [1] refers to this function and to the `Expression.find_root` method\n  - [2] refers to this function in a short section \"using Sage as a numerical solver\" - which explains `sage_root` and nothing else\n\n- [find_local_minimum](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.find_local_minimum), `find_local_maximum`\n  - does not appear in [1]\n  - does not appear in [2]\n\n- [minimize](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.minimize)\n  - does not appear in [1]\n  - appears in [2] in a section \"Minimizations and Lagrange Multipliers\" (the latter ends in a disappointment)\n\n- [minimize_constrained](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.minimize_constrained)\n  - does not appear in [2]\n\n- [find_fit](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.find_fit)\n  - does not appear in [1]\n  - appears in [2] in a short section titled \"making your own regressions in Sage\"\n\n([linear_program](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.linear_program) is already deprecated; we ignore the function [binpacking](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.binpacking) in this ticket.)\n\n[1] Book [Computational Mathematics with SageMath](http://sagebook.gforge.inria.fr/english.html)\n[2] [Gregory Bard's book](http://gregorybard.com/Sage.html)\n\n\nWithin the Sage library itself, there is only minimal use of this module.\n\n```\n$ git grep sage.numerical.optimize\nsrc/doc/en/reference/numerical/index.rst:   sage/numerical/optimize\nsrc/sage/coding/code_bounds.py:    from sage.numerical.optimize import find_root\nsrc/sage/crypto/lwe.py:from sage.numerical.optimize import find_root\nsrc/sage/numerical/all.py:lazy_import(\"sage.numerical.optimize\",\nsrc/sage/numerical/optimize.py:        sage: from sage.numerical.optimize import binpacking\nsrc/sage/numerical/optimize.py:        sage: from sage.numerical.optimize import binpacking\nsrc/sage/symbolic/expression.pyx:        from sage.numerical.optimize import find_root\nsrc/sage/symbolic/expression.pyx:        Uses :func:`sage.numerical.optimize.find_local_minimum`.\nsrc/sage/symbolic/expression.pyx:        from sage.numerical.optimize import find_local_minimum\n```\n\n\nIn this ticket, we \n- discuss which of these functions provide sufficient added value to users over just using `scipy`; \n- deprecate functions that do not provide sufficient added value;\n- provide documentation that empowers users to use Sage functions with `scipy` (including the `sage.ext.fast_callable` facility) - see #24536 for some new adapters\n\n\n\nSymptoms:\n- `minimize_constrained` https://groups.google.com/g/sage-devel/c/5vp5UTexpxQ/m/DG_lmN9ZAwAJ\n\nIssue created by migration from https://trac.sagemath.org/ticket/32260\n\n",
    "created_at": "2021-07-21T22:29:16Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Deprecate sage.numerical.optimize functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32023",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @orlitzky tmonteil @slel

`sage.numerical.optimize` provides the following functions:

- [find_root](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.find_root) 
  - [1] refers to this function and to the `Expression.find_root` method
  - [2] refers to this function in a short section "using Sage as a numerical solver" - which explains `sage_root` and nothing else

- [find_local_minimum](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.find_local_minimum), `find_local_maximum`
  - does not appear in [1]
  - does not appear in [2]

- [minimize](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.minimize)
  - does not appear in [1]
  - appears in [2] in a section "Minimizations and Lagrange Multipliers" (the latter ends in a disappointment)

- [minimize_constrained](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.minimize_constrained)
  - does not appear in [2]

- [find_fit](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.find_fit)
  - does not appear in [1]
  - appears in [2] in a short section titled "making your own regressions in Sage"

([linear_program](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.linear_program) is already deprecated; we ignore the function [binpacking](https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/optimize.html#sage.numerical.optimize.binpacking) in this ticket.)

[1] Book [Computational Mathematics with SageMath](http://sagebook.gforge.inria.fr/english.html)
[2] [Gregory Bard's book](http://gregorybard.com/Sage.html)


Within the Sage library itself, there is only minimal use of this module.

```
$ git grep sage.numerical.optimize
src/doc/en/reference/numerical/index.rst:   sage/numerical/optimize
src/sage/coding/code_bounds.py:    from sage.numerical.optimize import find_root
src/sage/crypto/lwe.py:from sage.numerical.optimize import find_root
src/sage/numerical/all.py:lazy_import("sage.numerical.optimize",
src/sage/numerical/optimize.py:        sage: from sage.numerical.optimize import binpacking
src/sage/numerical/optimize.py:        sage: from sage.numerical.optimize import binpacking
src/sage/symbolic/expression.pyx:        from sage.numerical.optimize import find_root
src/sage/symbolic/expression.pyx:        Uses :func:`sage.numerical.optimize.find_local_minimum`.
src/sage/symbolic/expression.pyx:        from sage.numerical.optimize import find_local_minimum
```


In this ticket, we 
- discuss which of these functions provide sufficient added value to users over just using `scipy`; 
- deprecate functions that do not provide sufficient added value;
- provide documentation that empowers users to use Sage functions with `scipy` (including the `sage.ext.fast_callable` facility) - see #24536 for some new adapters



Symptoms:
- `minimize_constrained` https://groups.google.com/g/sage-devel/c/5vp5UTexpxQ/m/DG_lmN9ZAwAJ

Issue created by migration from https://trac.sagemath.org/ticket/32260





---

archive/issue_comments_456839.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-09-02T20:51:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32023#issuecomment-456839",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_456840.json:
```json
{
    "body": "I'm not so sure about this one. These functions are minimal(ish) wrappers around scipy that,\n\n* allow you to use sage types as input/output\n* check the results for correctness\n* drop \"verbose\" return values\n\nThe essence of sage is wrapping other scientific libraries in a consistent and user-friendly interface. What  `find_root` does (for example) is not rocket surgery,  but I certainly wouldn't want to write it myself every time I have a calc1 problem to double-check.\n\nIn other news, Gregory Bard's book (http://gregorybard.com/Sage.html) also uses a few of these functions.",
    "created_at": "2021-09-03T15:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32023#issuecomment-456840",
    "user": "https://github.com/orlitzky"
}
```

I'm not so sure about this one. These functions are minimal(ish) wrappers around scipy that,

* allow you to use sage types as input/output
* check the results for correctness
* drop "verbose" return values

The essence of sage is wrapping other scientific libraries in a consistent and user-friendly interface. What  `find_root` does (for example) is not rocket surgery,  but I certainly wouldn't want to write it myself every time I have a calc1 problem to double-check.

In other news, Gregory Bard's book (http://gregorybard.com/Sage.html) also uses a few of these functions.



---

archive/issue_comments_456841.json:
```json
{
    "body": "Thanks for the input and the pointer.\n\nI think we need to break this down function by function.",
    "created_at": "2021-09-03T17:11:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32023#issuecomment-456841",
    "user": "https://github.com/mkoeppe"
}
```

Thanks for the input and the pointer.

I think we need to break this down function by function.



---

archive/issue_events_085483.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32023#event-85483"
}
```



---

archive/issue_comments_456842.json:
```json
{
    "body": "> Thanks for the input and the pointer.\n> \n> I think we need to break this down function by function.\n\n\n+1\n\nIdeally these could be pretty light wrappers in general.  But having something top-level for undergraduate instruction is very, very convenient (as evidenced by the two books mentioned in the ticket).",
    "created_at": "2022-02-26T23:02:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32023#issuecomment-456842",
    "user": "https://github.com/kcrisman"
}
```

> Thanks for the input and the pointer.
> 
> I think we need to break this down function by function.


+1

Ideally these could be pretty light wrappers in general.  But having something top-level for undergraduate instruction is very, very convenient (as evidenced by the two books mentioned in the ticket).



---

archive/issue_comments_456843.json:
```json
{
    "body": "Replying to [comment:12 kcrisman]:\n> something top-level for undergraduate instruction is very, very convenient (as evidenced by the two books mentioned in the ticket).\n\n\nWell, I have looked at the sections related to the present ticket in the books and I wouldn't recommend using these parts for instruction at any level.",
    "created_at": "2022-02-27T01:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32023#issuecomment-456843",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:12 kcrisman]:
> something top-level for undergraduate instruction is very, very convenient (as evidenced by the two books mentioned in the ticket).


Well, I have looked at the sections related to the present ticket in the books and I wouldn't recommend using these parts for instruction at any level.



---

archive/issue_comments_456844.json:
```json
{
    "body": "Replying to [comment:12 kcrisman]:\n> \n> Ideally these could be pretty light wrappers in general.  But having something top-level for undergraduate instruction is very, very convenient (as evidenced by the two books mentioned in the ticket).\n\n\nI fully agree. For instance, I would be -1 in removing `find_root` for it is heavily used and very convenient for a basic usage.  For more sophisticated use, of course, the user shall import `scipy` functions.",
    "created_at": "2022-03-01T10:24:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32023#issuecomment-456844",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:12 kcrisman]:
> 
> Ideally these could be pretty light wrappers in general.  But having something top-level for undergraduate instruction is very, very convenient (as evidenced by the two books mentioned in the ticket).


I fully agree. For instance, I would be -1 in removing `find_root` for it is heavily used and very convenient for a basic usage.  For more sophisticated use, of course, the user shall import `scipy` functions.



---

archive/issue_comments_456845.json:
```json
{
    "body": "Yes, `find_root` is not so bad.",
    "created_at": "2022-03-01T17:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32023#issuecomment-456845",
    "user": "https://github.com/mkoeppe"
}
```

Yes, `find_root` is not so bad.



---

archive/issue_events_085484.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32023#event-85484"
}
```



---

archive/issue_events_085485.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32023#event-85485"
}
```



---

archive/issue_events_085486.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32023#event-85486"
}
```



---

archive/issue_events_085487.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/32023",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32023#event-85487"
}
```
