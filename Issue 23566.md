# Issue 23566: Rebuild doc when Sphinx is reinstalled

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2017-09-08 07:48:04

CC:  jhpalmieri

The upgrade to Sphinx-1.6.3 broke docbuilding if `make doc-clean` was not done. We propose to automatically delete documentation in the docbuilder if Sphinx was reinstalled.


---

Comment by jdemeyer created at 2017-09-08 09:35:16

Actually, I'm experimenting with a much simpler change to allow a graceful upgrade to Sphinx-1.6.3: it's a specific pickle which fails to load. Wrapping that in `try`/`except` might work.


---

Comment by jdemeyer created at 2017-09-08 09:52:14

https://github.com/sphinx-doc/sphinx/pull/4048


---

Comment by jdemeyer created at 2017-09-08 10:16:43

Changing component from build to packages: standard.


---

Comment by jdemeyer created at 2017-09-08 10:18:11

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-09-08 10:18:11

New commits:


---

Comment by jhpalmieri created at 2017-09-08 18:37:57

Is it worth printing more information than just

```
[diophanti] loading pickled environment... failed: 'module' object has no attribute 'WarningStream'
```

to let users know that this is indeed harmless?


---

Comment by jdemeyer created at 2017-09-09 08:54:19

I don't really see the point... In any case, I feel that this is something that upstream should decide.


---

Comment by jhpalmieri created at 2017-09-11 16:47:17

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2017-09-11 16:47:17

Replying to [comment:7 jdemeyer]:
> I don't really see the point... 

The point, as I said, is "to let users know that this is indeed harmless". Some people worry when they see messages saying that something "failed".


---

Comment by vbraun created at 2017-09-15 07:47:36

Resolution: fixed
