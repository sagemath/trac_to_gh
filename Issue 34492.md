# Issue 34492: topcom now requires autotools

archive/issues_034492.json:
```json
{
    "body": "CC:  @dimpase @mkoeppe\n\nKeywords: topcom\n\nRegression probably introduced by Trac #31531: Update topcom to 1.1.2, fix cddlib header search\n\n```\n[topcom-1.1.2] config.status: executing depfiles commands\n[topcom-1.1.2] configure: WARNING: unrecognized options: --with-gmp, --with-cdd\n[topcom-1.1.2] CDPATH=\"${ZSH_VERSION+.}:\" && cd . && /bin/bash /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2/src/missing aclocal-1.16 \n[topcom-1.1.2] /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2/src/missing: line 81: aclocal-1.16: command not found\n[topcom-1.1.2] WARNING: 'aclocal-1.16' is missing on your system.\n[topcom-1.1.2]          You should only need it if you modified 'acinclude.m4' or\n[topcom-1.1.2]          'configure.ac' or m4 files included by 'configure.ac'.\n[topcom-1.1.2]          The 'aclocal' program is part of the GNU Automake package:\n[topcom-1.1.2]          <https://www.gnu.org/software/automake>\n[topcom-1.1.2]          It also requires GNU Autoconf, GNU m4 and Perl in order to run:\n[topcom-1.1.2]          <https://www.gnu.org/software/autoconf>\n[topcom-1.1.2]          <https://www.gnu.org/software/m4/>\n[topcom-1.1.2]          <https://www.perl.org/>\n[topcom-1.1.2] Makefile:336: recipe for target 'aclocal.m4' failed\n[topcom-1.1.2] make[3]: *** [aclocal.m4] Error 127\n[topcom-1.1.2] Error building TOPCOM.\n[topcom-1.1.2] \n[topcom-1.1.2] real\t0m5.408s\n[topcom-1.1.2] user\t0m2.672s\n[topcom-1.1.2] sys\t0m0.512s\n[topcom-1.1.2] ************************************************************************\n[topcom-1.1.2] Error installing package topcom-1.1.2\n[topcom-1.1.2] ************************************************************************\n[topcom-1.1.2] Please email sage-devel (http://groups.google.com/group/sage-devel)\n[topcom-1.1.2] explaining the problem and including the log files\n[topcom-1.1.2]   /var/lib/buildbot/slave/sage_git/build/logs/pkgs/topcom-1.1.2.log\n[topcom-1.1.2] and\n[topcom-1.1.2]   /var/lib/buildbot/slave/sage_git/build/config.log\n[topcom-1.1.2] Describe your computer, operating system, etc.\n[topcom-1.1.2] If you want to try to fix the problem yourself, *don't* just cd to\n[topcom-1.1.2] /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2 and type 'make' or whatever is appropriate.\n[topcom-1.1.2] Instead, the following commands setup all environment variables\n[topcom-1.1.2] correctly and load a subshell for you to debug the error:\n[topcom-1.1.2]   (cd '/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2' && '/var/lib/buildbot/slave/sage_git/build/sage' --buildsh)\n[topcom-1.1.2] When you are done debugging, you can type \"exit\" to leave the subshell.\n[topcom-1.1.2] ************************************************************************\nMakefile:3067: recipe for target 'topcom-SAGE_LOCAL-no-deps' failed\nmake[2]: *** [topcom-SAGE_LOCAL-no-deps] Error 1\nMakefile:3067: recipe for target '/var/lib/buildbot/slave/sage_git/build/local/var/lib/sage/installed/topcom-1.1.2' failed\nmake[1]: *** [/var/lib/buildbot/slave/sage_git/build/local/var/lib/sage/installed/topcom-1.1.2] Error 2\nmake[1]: Leaving directory '/var/lib/buildbot/slave/sage_git/build/build/make'\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/34729\n\n",
    "created_at": "2022-11-07T20:24:18Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "topcom now requires autotools",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34492",
    "user": "https://github.com/vbraun"
}
```
CC:  @dimpase @mkoeppe

Keywords: topcom

Regression probably introduced by Trac #31531: Update topcom to 1.1.2, fix cddlib header search

```
[topcom-1.1.2] config.status: executing depfiles commands
[topcom-1.1.2] configure: WARNING: unrecognized options: --with-gmp, --with-cdd
[topcom-1.1.2] CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/bash /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2/src/missing aclocal-1.16 
[topcom-1.1.2] /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2/src/missing: line 81: aclocal-1.16: command not found
[topcom-1.1.2] WARNING: 'aclocal-1.16' is missing on your system.
[topcom-1.1.2]          You should only need it if you modified 'acinclude.m4' or
[topcom-1.1.2]          'configure.ac' or m4 files included by 'configure.ac'.
[topcom-1.1.2]          The 'aclocal' program is part of the GNU Automake package:
[topcom-1.1.2]          <https://www.gnu.org/software/automake>
[topcom-1.1.2]          It also requires GNU Autoconf, GNU m4 and Perl in order to run:
[topcom-1.1.2]          <https://www.gnu.org/software/autoconf>
[topcom-1.1.2]          <https://www.gnu.org/software/m4/>
[topcom-1.1.2]          <https://www.perl.org/>
[topcom-1.1.2] Makefile:336: recipe for target 'aclocal.m4' failed
[topcom-1.1.2] make[3]: *** [aclocal.m4] Error 127
[topcom-1.1.2] Error building TOPCOM.
[topcom-1.1.2] 
[topcom-1.1.2] real	0m5.408s
[topcom-1.1.2] user	0m2.672s
[topcom-1.1.2] sys	0m0.512s
[topcom-1.1.2] ************************************************************************
[topcom-1.1.2] Error installing package topcom-1.1.2
[topcom-1.1.2] ************************************************************************
[topcom-1.1.2] Please email sage-devel (http://groups.google.com/group/sage-devel)
[topcom-1.1.2] explaining the problem and including the log files
[topcom-1.1.2]   /var/lib/buildbot/slave/sage_git/build/logs/pkgs/topcom-1.1.2.log
[topcom-1.1.2] and
[topcom-1.1.2]   /var/lib/buildbot/slave/sage_git/build/config.log
[topcom-1.1.2] Describe your computer, operating system, etc.
[topcom-1.1.2] If you want to try to fix the problem yourself, *don't* just cd to
[topcom-1.1.2] /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2 and type 'make' or whatever is appropriate.
[topcom-1.1.2] Instead, the following commands setup all environment variables
[topcom-1.1.2] correctly and load a subshell for you to debug the error:
[topcom-1.1.2]   (cd '/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2' && '/var/lib/buildbot/slave/sage_git/build/sage' --buildsh)
[topcom-1.1.2] When you are done debugging, you can type "exit" to leave the subshell.
[topcom-1.1.2] ************************************************************************
Makefile:3067: recipe for target 'topcom-SAGE_LOCAL-no-deps' failed
make[2]: *** [topcom-SAGE_LOCAL-no-deps] Error 1
Makefile:3067: recipe for target '/var/lib/buildbot/slave/sage_git/build/local/var/lib/sage/installed/topcom-1.1.2' failed
make[1]: *** [/var/lib/buildbot/slave/sage_git/build/local/var/lib/sage/installed/topcom-1.1.2] Error 2
make[1]: Leaving directory '/var/lib/buildbot/slave/sage_git/build/build/make'
```


Issue created by migration from https://trac.sagemath.org/ticket/34729





---

archive/issue_comments_487795.json:
```json
{
    "body": "Likely a timestamp problem, as the patch patches both autotools input and output.\nCan fix by only patching the output or by touching the output after patching",
    "created_at": "2022-11-07T22:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34492#issuecomment-487795",
    "user": "https://github.com/mkoeppe"
}
```

Likely a timestamp problem, as the patch patches both autotools input and output.
Can fix by only patching the output or by touching the output after patching



---

archive/issue_comments_487796.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-11-12T03:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34492#issuecomment-487796",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_487797.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-11-12T03:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34492#issuecomment-487797",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_487798.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-11-13T23:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34492#issuecomment-487798",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_487799.json:
```json
{
    "body": "lgtm",
    "created_at": "2022-11-13T23:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34492#issuecomment-487799",
    "user": "https://github.com/dimpase"
}
```

lgtm



---

archive/issue_comments_487800.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-11-15T23:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34492",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34492#issuecomment-487800",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
