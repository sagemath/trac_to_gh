# Issue 34492: topcom now requires autotools

Issue created by migration from https://trac.sagemath.org/ticket/34729

Original creator: vbraun

Original creation time: 2022-11-07 20:24:18

CC:  dimpase mkoeppe

Keywords: topcom

Regression probably introduced by Trac #31531: Update topcom to 1.1.2, fix cddlib header search

```
[topcom-1.1.2] config.status: executing depfiles commands
[topcom-1.1.2] configure: WARNING: unrecognized options: --with-gmp, --with-cdd
[topcom-1.1.2] CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/bash /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2/src/missing aclocal-1.16 
[topcom-1.1.2] /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2/src/missing: line 81: aclocal-1.16: command not found
[topcom-1.1.2] WARNING: 'aclocal-1.16' is missing on your system.
[topcom-1.1.2]          You should only need it if you modified 'acinclude.m4' or
[topcom-1.1.2]          'configure.ac' or m4 files included by 'configure.ac'.
[topcom-1.1.2]          The 'aclocal' program is part of the GNU Automake package:
[topcom-1.1.2]          <https://www.gnu.org/software/automake>
[topcom-1.1.2]          It also requires GNU Autoconf, GNU m4 and Perl in order to run:
[topcom-1.1.2]          <https://www.gnu.org/software/autoconf>
[topcom-1.1.2]          <https://www.gnu.org/software/m4/>
[topcom-1.1.2]          <https://www.perl.org/>
[topcom-1.1.2] Makefile:336: recipe for target 'aclocal.m4' failed
[topcom-1.1.2] make[3]: *** [aclocal.m4] Error 127
[topcom-1.1.2] Error building TOPCOM.
[topcom-1.1.2] 
[topcom-1.1.2] real	0m5.408s
[topcom-1.1.2] user	0m2.672s
[topcom-1.1.2] sys	0m0.512s
[topcom-1.1.2] ************************************************************************
[topcom-1.1.2] Error installing package topcom-1.1.2
[topcom-1.1.2] ************************************************************************
[topcom-1.1.2] Please email sage-devel (http://groups.google.com/group/sage-devel)
[topcom-1.1.2] explaining the problem and including the log files
[topcom-1.1.2]   /var/lib/buildbot/slave/sage_git/build/logs/pkgs/topcom-1.1.2.log
[topcom-1.1.2] and
[topcom-1.1.2]   /var/lib/buildbot/slave/sage_git/build/config.log
[topcom-1.1.2] Describe your computer, operating system, etc.
[topcom-1.1.2] If you want to try to fix the problem yourself, *don't* just cd to
[topcom-1.1.2] /var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2 and type 'make' or whatever is appropriate.
[topcom-1.1.2] Instead, the following commands setup all environment variables
[topcom-1.1.2] correctly and load a subshell for you to debug the error:
[topcom-1.1.2]   (cd '/var/lib/buildbot/slave/sage_git/build/local/var/tmp/sage/build/topcom-1.1.2' && '/var/lib/buildbot/slave/sage_git/build/sage' --buildsh)
[topcom-1.1.2] When you are done debugging, you can type "exit" to leave the subshell.
[topcom-1.1.2] ************************************************************************
Makefile:3067: recipe for target 'topcom-SAGE_LOCAL-no-deps' failed
make[2]: *** [topcom-SAGE_LOCAL-no-deps] Error 1
Makefile:3067: recipe for target '/var/lib/buildbot/slave/sage_git/build/local/var/lib/sage/installed/topcom-1.1.2' failed
make[1]: *** [/var/lib/buildbot/slave/sage_git/build/local/var/lib/sage/installed/topcom-1.1.2] Error 2
make[1]: Leaving directory '/var/lib/buildbot/slave/sage_git/build/build/make'
```



---

Comment by mkoeppe created at 2022-11-07 22:05:14

Likely a timestamp problem, as the patch patches both autotools input and output.
Can fix by only patching the output or by touching the output after patching


---

Comment by mkoeppe created at 2022-11-12 03:07:06

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-11-12 03:07:06

New commits:


---

Comment by dimpase created at 2022-11-13 23:55:24

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2022-11-13 23:55:24

lgtm


---

Comment by vbraun created at 2022-11-15 23:43:00

Resolution: fixed
