# Issue 26102: Better normalization for fraction field elements - follow up

archive/issues_026102.json:
```json
{
    "body": "CC:  @tscrim @cheuberg @etn40ff jakobkroeker @bhutz @robertwb @rwst emassop @JohnCremona @mezzarobba @saraedum\n\nThis is a follow-up on #16268 (and #16993), where the following further improvements were suggested:\n\n- clearing denominators in the numerator and denominator instead of making the leading coefficient of the denominator monic when that makes sense (i.e., for printing, and perhaps for computations in nested rational function fields, but making it fast enough requires some work),\n- also normalizing the leading coefficients over non-fields where that makes sense (see also discussion at #16993).\n\nIssue created by migration from https://trac.sagemath.org/ticket/26339\n\n",
    "created_at": "2018-09-22T19:18:01Z",
    "labels": [
        "component: commutative algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Better normalization for fraction field elements - follow up",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26102",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @tscrim @cheuberg @etn40ff jakobkroeker @bhutz @robertwb @rwst emassop @JohnCremona @mezzarobba @saraedum

This is a follow-up on #16268 (and #16993), where the following further improvements were suggested:

- clearing denominators in the numerator and denominator instead of making the leading coefficient of the denominator monic when that makes sense (i.e., for printing, and perhaps for computations in nested rational function fields, but making it fast enough requires some work),
- also normalizing the leading coefficients over non-fields where that makes sense (see also discussion at #16993).

Issue created by migration from https://trac.sagemath.org/ticket/26339





---

archive/issue_comments_367571.json:
```json
{
    "body": "Unexpected (-1) factor in the numerator and denominator of a `sage.rings.fraction_field_element.FractionFieldElement`.\n\nSageMath version 9.1.beta3.\n\n\n```\nsage: P.<a,b,c>=QQ[]\nsage: f = 1/a/(b-a)/(c-a)+1/b/(a-b)/(c-b)+1/c/(a-c)/(b-c); f\n(-1)/(-a*b*c)\nsage: f.numerator()\n-1\nsage: f.denominator()\n-a*b*c\n```\n",
    "created_at": "2020-03-13T14:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26102#issuecomment-367571",
    "user": "https://github.com/yuan-zhou"
}
```

Unexpected (-1) factor in the numerator and denominator of a `sage.rings.fraction_field_element.FractionFieldElement`.

SageMath version 9.1.beta3.


```
sage: P.<a,b,c>=QQ[]
sage: f = 1/a/(b-a)/(c-a)+1/b/(a-b)/(c-b)+1/c/(a-c)/(b-c); f
(-1)/(-a*b*c)
sage: f.numerator()
-1
sage: f.denominator()
-a*b*c
```




---

archive/issue_events_065511.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-29T15:20:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65511"
}
```



---

archive/issue_comments_367572.json:
```json
{
    "body": "pushing these forward to 9.2",
    "created_at": "2020-04-14T06:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26102#issuecomment-367572",
    "user": "https://github.com/mkoeppe"
}
```

pushing these forward to 9.2



---

archive/issue_events_065512.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65512"
}
```



---

archive/issue_events_065513.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65513"
}
```



---

archive/issue_events_065514.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65514"
}
```



---

archive/issue_events_065515.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65515"
}
```



---

archive/issue_comments_367573.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26102#issuecomment-367573",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_065516.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65516"
}
```



---

archive/issue_events_065517.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65517"
}
```



---

archive/issue_events_065518.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65518"
}
```



---

archive/issue_events_065519.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65519"
}
```



---

archive/issue_events_065520.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65520"
}
```



---

archive/issue_events_065521.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65521"
}
```



---

archive/issue_events_065522.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:45:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65522"
}
```



---

archive/issue_events_065523.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:45:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65523"
}
```



---

archive/issue_events_065524.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T16:33:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65524"
}
```



---

archive/issue_events_065525.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T16:33:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/26102",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26102#event-65525"
}
```
