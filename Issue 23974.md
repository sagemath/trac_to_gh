# Issue 23974: Some trivial identities and simplifications missed by Sage (pynac ?)

archive/issues_023974.json:
```json
{
    "body": "On 8.1.rc0. Consider :\n\n```\nsage: import sympy\nsage: [arcsin(t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]\n[0, 1/6*pi, arcsin(1/2*sqrt(2)), arcsin(1/2*sqrt(3)), 1/2*pi]\nsage: [maxima.asin(t).sage() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]\n[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]\nsage: [sympy.asin(t)._sage_() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]\n[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]\nsage: [arctan(t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]\n[0, arctan(1/3*sqrt(3)), 1/4*pi, arctan(sqrt(3))]\nsage: [maxima.atan(t).sage() for t in [0, 1/sqrt(3), 1, sqrt(3)]]\n[0, 1/6*pi, 1/4*pi, 1/3*pi]\nsage: [sympy.atan(t)._sage_() for t in [0, 1/sqrt(3), 1, sqrt(3)]]\n[0, 1/6*pi, 1/4*pi, 1/3*pi]\n```\n\n[ Edit on 2017-11-23 ] In the same vein :\n\n```\nsage: [arccos(t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]\n[1/2*pi, 1/3*pi, arccos(1/2*sqrt(2)), arccos(1/2*sqrt(3)), 0]\nsage: [maxima.arccos(t).sage() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]\n[1/2*pi, 1/3*pi, arccos(1/2*sqrt(2)), arccos(1/2*sqrt(3)), 0]\nsage: [sympy.acos(t)._sage_() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]\n[1/2*pi, 1/3*pi, 1/4*pi, 1/6*pi, 0]\nsage: [arctan(t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]\n[0, arctan(1/3*sqrt(3)), 1/4*pi, arctan(sqrt(3))]\nsage: [maxima.arctan(t).sage() for t in [0, 1/sqrt(3), 1, sqrt(3)]]\n[0, arctan(1/3*sqrt(3)), 1/4*pi, arctan(sqrt(3))]\nsage: [sympy.atan(t)._sage_() for t in [0, 1/sqrt(3), 1, sqrt(3)]]\n[0, 1/6*pi, 1/4*pi, 1/3*pi]\n```\n\nThis is not a bug stricto sensu (the answers are not false), but is certainly a lack of functionality.\n\nThe absence of this problem when using `sympy` or `maxima` fingerpoints to `pynac`.\n\nFurthermore, arctan suffers from some lack of simplification:\n\n```\nsage: assume(-pi/2<x, x<pi/2)  \nsage: arctan(tan(x)).simplify()  # OK\nx\nsage: arctan(sin(x)/cos(x)).simplify()   # should return x as above\narctan(sin(x)/cos(x))\nsage: arctan(sin(x)/cos(x)).simplify_full()\narctan(sin(x)/cos(x))\n```\n\narctan2 has the same issue:\n\n```\nsage: arctan2(sin(x), cos(x)).simplify_full()\narctan2(sin(x), cos(x))\n```\n\nIn those cases, the problem is *not* solved by recourse to `pynac`...\n\nIssue created by migration from https://trac.sagemath.org/ticket/24211\n\n",
    "created_at": "2017-11-13T13:57:35Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "Some trivial identities and simplifications missed by Sage (pynac ?)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23974",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
On 8.1.rc0. Consider :

```
sage: import sympy
sage: [arcsin(t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, 1/6*pi, arcsin(1/2*sqrt(2)), arcsin(1/2*sqrt(3)), 1/2*pi]
sage: [maxima.asin(t).sage() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]
sage: [sympy.asin(t)._sage_() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]
sage: [arctan(t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, arctan(1/3*sqrt(3)), 1/4*pi, arctan(sqrt(3))]
sage: [maxima.atan(t).sage() for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, 1/6*pi, 1/4*pi, 1/3*pi]
sage: [sympy.atan(t)._sage_() for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, 1/6*pi, 1/4*pi, 1/3*pi]
```

[ Edit on 2017-11-23 ] In the same vein :

```
sage: [arccos(t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[1/2*pi, 1/3*pi, arccos(1/2*sqrt(2)), arccos(1/2*sqrt(3)), 0]
sage: [maxima.arccos(t).sage() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[1/2*pi, 1/3*pi, arccos(1/2*sqrt(2)), arccos(1/2*sqrt(3)), 0]
sage: [sympy.acos(t)._sage_() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[1/2*pi, 1/3*pi, 1/4*pi, 1/6*pi, 0]
sage: [arctan(t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, arctan(1/3*sqrt(3)), 1/4*pi, arctan(sqrt(3))]
sage: [maxima.arctan(t).sage() for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, arctan(1/3*sqrt(3)), 1/4*pi, arctan(sqrt(3))]
sage: [sympy.atan(t)._sage_() for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, 1/6*pi, 1/4*pi, 1/3*pi]
```

This is not a bug stricto sensu (the answers are not false), but is certainly a lack of functionality.

The absence of this problem when using `sympy` or `maxima` fingerpoints to `pynac`.

Furthermore, arctan suffers from some lack of simplification:

```
sage: assume(-pi/2<x, x<pi/2)  
sage: arctan(tan(x)).simplify()  # OK
x
sage: arctan(sin(x)/cos(x)).simplify()   # should return x as above
arctan(sin(x)/cos(x))
sage: arctan(sin(x)/cos(x)).simplify_full()
arctan(sin(x)/cos(x))
```

arctan2 has the same issue:

```
sage: arctan2(sin(x), cos(x)).simplify_full()
arctan2(sin(x), cos(x))
```

In those cases, the problem is *not* solved by recourse to `pynac`...

Issue created by migration from https://trac.sagemath.org/ticket/24211





---

archive/issue_comments_335409.json:
```json
{
    "body": "Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?",
    "created_at": "2017-11-13T14:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23974#issuecomment-335409",
    "user": "https://github.com/rwst"
}
```

Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?



---

archive/issue_comments_335410.json:
```json
{
    "body": "Replying to [comment:1 rws]:\n> Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?\n\n\nI would say yes, see e.g.\n\n- http://planetmath.org/complextangentandcotangent\n- https://fr.wikipedia.org/wiki/Trigonom%C3%A9trie_complexe",
    "created_at": "2017-11-13T14:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23974#issuecomment-335410",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:1 rws]:
> Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?


I would say yes, see e.g.

- http://planetmath.org/complextangentandcotangent
- https://fr.wikipedia.org/wiki/Trigonom%C3%A9trie_complexe



---

archive/issue_comments_335411.json:
```json
{
    "body": "Replying to [comment:2 egourgoulhon]:\n> Replying to [comment:1 rws]:\n> > Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?\n\n> \n> I would say yes, see e.g.\n> \n> - http://planetmath.org/complextangentandcotangent\n> - https://fr.wikipedia.org/wiki/Trigonom%C3%A9trie_complexe\n\n\nMoreover, Sage assumes it is the case, without any assumption on `x`:\n\n```\nsage: bool(tan(x) == sin(x)/cos(x))\nTrue\n```",
    "created_at": "2017-11-13T17:49:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23974#issuecomment-335411",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:2 egourgoulhon]:
> Replying to [comment:1 rws]:
> > Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?

> 
> I would say yes, see e.g.
> 
> - http://planetmath.org/complextangentandcotangent
> - https://fr.wikipedia.org/wiki/Trigonom%C3%A9trie_complexe


Moreover, Sage assumes it is the case, without any assumption on `x`:

```
sage: bool(tan(x) == sin(x)/cos(x))
True
```



---

archive/issue_comments_335412.json:
```json
{
    "body": "Replying to [comment:3 egourgoulhon]:\n> Moreover, Sage assumes it is the case, without any assumption on `x`:\n> \n> ```\n> sage: bool(tan(x) == sin(x)/cos(x))\n> True\n> ```\n\n\nThat comes from Maxima which simplifies `tan(x)` to `sin(x)/cos(x)`---but not vice versa, as the `atan` cases show. It may be difficult to find `sin(x)/cos(x)` in all expressions but I haven't looked further into it, and the simple cases should be implemented regardless.",
    "created_at": "2017-11-14T06:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23974#issuecomment-335412",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:3 egourgoulhon]:
> Moreover, Sage assumes it is the case, without any assumption on `x`:
> 
> ```
> sage: bool(tan(x) == sin(x)/cos(x))
> True
> ```


That comes from Maxima which simplifies `tan(x)` to `sin(x)/cos(x)`---but not vice versa, as the `atan` cases show. It may be difficult to find `sin(x)/cos(x)` in all expressions but I haven't looked further into it, and the simple cases should be implemented regardless.



---

archive/issue_events_061347.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-21T15:55:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23974",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23974#event-61347"
}
```



---

archive/issue_comments_335413.json:
```json
{
    "body": "These doctest now work with Pynac master:\n\n```\nsage: [arcsin(t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]\n[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]\nsage: [arcsin(-t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]\n[0, -1/6*pi, -1/4*pi, -1/3*pi, -1/2*pi]\nsage: [arctan(t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]\n[0, 1/6*pi, 1/4*pi, 1/3*pi]\nsage: [arctan(-t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]\n[0, -1/6*pi, -1/4*pi, -1/3*pi]\n```",
    "created_at": "2017-11-21T15:55:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23974#issuecomment-335413",
    "user": "https://github.com/rwst"
}
```

These doctest now work with Pynac master:

```
sage: [arcsin(t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]
sage: [arcsin(-t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, -1/6*pi, -1/4*pi, -1/3*pi, -1/2*pi]
sage: [arctan(t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, 1/6*pi, 1/4*pi, 1/3*pi]
sage: [arctan(-t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, -1/6*pi, -1/4*pi, -1/3*pi]
```



---

archive/issue_comments_335414.json:
```json
{
    "body": "#24262 partially fixes some of these deficiencies. See its initial [review](https://trac.sagemath.org/ticket/24262#comment:4).",
    "created_at": "2017-11-22T22:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23974#issuecomment-335414",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

#24262 partially fixes some of these deficiencies. See its initial [review](https://trac.sagemath.org/ticket/24262#comment:4).



---

archive/issue_comments_335415.json:
```json
{
    "body": "Edit : added similar examples with arccos/arctan.",
    "created_at": "2017-11-23T15:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23974",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23974#issuecomment-335415",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Edit : added similar examples with arccos/arctan.
