# Issue 23974: Sime trivial identities and simplifications missed by Sage (pynac ?)

Issue created by migration from https://trac.sagemath.org/ticket/24211

Original creator: charpent

Original creation time: 2017-11-13 13:57:35

On 8.1.rc0. Consider :


```
sage: import sympy
sage: [arcsin(t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, 1/6*pi, arcsin(1/2*sqrt(2)), arcsin(1/2*sqrt(3)), 1/2*pi]
sage: [maxima.asin(t).sage() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]
sage: [sympy.asin(t)._sage_() for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]
sage: [arctan(t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, arctan(1/3*sqrt(3)), 1/4*pi, arctan(sqrt(3))]
sage: [maxima.atan(t).sage() for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, 1/6*pi, 1/4*pi, 1/3*pi]
sage: [sympy.atan(t)._sage_() for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, 1/6*pi, 1/4*pi, 1/3*pi]
```


This is not a bug stricto sensu (the answers are not false), but is certainly a lack of functionality.

The absence of this problem when using `sympy` or `maxima` fingerpoints to `pynac`.

Furthermore, arctan suffers from some lack of simplification:


```
sage: assume(-pi/2<x, x<pi/2)  
sage: arctan(tan(x)).simplify()  # OK
x
sage: arctan(sin(x)/cos(x)).simplify()   # should return x as above
arctan(sin(x)/cos(x))
sage: arctan(sin(x)/cos(x)).simplify_full()
arctan(sin(x)/cos(x))
```


arctan2 has the same issue:


```
sage: arctan2(sin(x), cos(x)).simplify_full()
arctan2(sin(x), cos(x))
```


In those cases, the problem is *not* solved by recourse to `pynac`...


---

Comment by rws created at 2017-11-13 14:23:27

Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?


---

Comment by egourgoulhon created at 2017-11-13 14:51:03

Replying to [comment:1 rws]:
> Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?

I would say yes, see e.g.

- http://planetmath.org/complextangentandcotangent
- https://fr.wikipedia.org/wiki/Trigonom%C3%A9trie_complexe


---

Comment by egourgoulhon created at 2017-11-13 17:49:31

Replying to [comment:2 egourgoulhon]:
> Replying to [comment:1 rws]:
> > Is `sin(x)/cos(x)` simplifiable for all x to `tan(x)`?
> 
> I would say yes, see e.g.
> 
> - http://planetmath.org/complextangentandcotangent
> - https://fr.wikipedia.org/wiki/Trigonom%C3%A9trie_complexe

Moreover, Sage assumes it is the case, without any assumption on `x`:

```
sage: bool(tan(x) == sin(x)/cos(x))
True
```



---

Comment by rws created at 2017-11-14 06:49:09

Replying to [comment:3 egourgoulhon]:
> Moreover, Sage assumes it is the case, without any assumption on `x`:
> {{{
> sage: bool(tan(x) == sin(x)/cos(x))
> True
> }}}

That comes from Maxima which simplifies `tan(x)` to `sin(x)/cos(x)`---but not vice versa, as the `atan` cases show. It may be difficult to find `sin(x)/cos(x)` in all expressions but I haven't looked further into it, and the simple cases should be implemented regardless.


---

Comment by rws created at 2017-11-21 15:55:53

These doctest now work with Pynac master:

```
sage: [arcsin(t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, 1/6*pi, 1/4*pi, 1/3*pi, 1/2*pi]
sage: [arcsin(-t) for t in [0, 1/2, sqrt(2)/2, sqrt(3)/2, 1]]
[0, -1/6*pi, -1/4*pi, -1/3*pi, -1/2*pi]
sage: [arctan(t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, 1/6*pi, 1/4*pi, 1/3*pi]
sage: [arctan(-t) for t in [0, 1/sqrt(3), 1, sqrt(3)]]
[0, -1/6*pi, -1/4*pi, -1/3*pi]
```



---

Comment by charpent created at 2017-11-22 22:17:57

#24262 partially fixes some of these deficiencies. See its initial [review](https://trac.sagemath.org/ticket/24262#comment:4).


---

Comment by charpent created at 2017-11-23 15:48:05

Edit : added similar examples with arccos/arctan.
