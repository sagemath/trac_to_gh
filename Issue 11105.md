# Issue 11105: Temporarily disable failing SVD doctest

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2011-04-30 16:47:05

Assignee: mvngu

On one particular configuration (Mac, gcc 4.2.1), there is a doctest failure in sage-4.7.alpha5 (See [http://groups.google.com/group/sage-release/msg/d29ce3e4f9da5cda](http://groups.google.com/group/sage-release/msg/d29ce3e4f9da5cda)):

```
sage -t  -long -force_lib "devel/sage/sage/matrix/matrix_double_dense.pyx"
**********************************************************************
File "/Applications/sage-4.7.alpha5/devel/sage/sage/matrix/matrix_double_dense.pyx",
line 1390:
    sage: V.is_unitary()
Expected:
    True
Got:
    False
********************************************************************** 
```


This issue is #11248, but I propose to temporarily disable this doctest to be able to ship sage-4.7 without failing doctests (otherwise, people will complain).


---

Attachment


---

Comment by jdemeyer created at 2011-04-30 16:52:50

Changing status from new to needs_review.


---

Comment by rbeezer created at 2011-04-30 17:25:10

Applies, builds, passes tests.  However, I do not have a configuration where it was failing.

I did test that the test was not executed - by totally breaking it with a non-existent command, so the comment in place ("not tested") is doing its job.

Two comments:

1) This file needs lots more documention help (it is not in the reference manual yet).

2) Once this test is restored, we should really test the SVD, that seems to be where the true bug is.


---

Comment by rbeezer created at 2011-04-30 17:25:10

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-05-01 09:32:44

Resolution: fixed


---

Comment by drkirkby created at 2011-05-01 18:49:18

If the platform is getting an error, why should the test be disabled? That seems to defeat the object of a test to me. 


People might complain about a test failure, but at least we can make them aware of the problem. Instead this is covered up. 

Many methods of testing software have "expected failures" where a test is known to fail. We could really do with something like that in Sage. But I really don't like the idea of disabling a test on every platform, just so all the tests pass on one platform. 

Dave


---

Comment by jdemeyer created at 2011-05-02 07:34:09

Replying to [comment:4 drkirkby]:
> People might complain about a test failure, but at least we can make them aware of the problem. Instead this is covered up.

Given that it has a Trac ticket, it is not really "covered up".  After disabling the test as in this ticket, the SVD bug is no different from most other Sage bugs: known in Trac but doesn't cause doctest failures.

If we want to use your logic, every known Sage bug should have a doctest demonstrating that bug.


---

Comment by rbeezer created at 2011-05-02 12:32:54

Replying to [comment:4 drkirkby]:
> If the platform is getting an error, why should the test be disabled? That seems to defeat the object of a test to me. 

Hi Dave,

The test was meant to document `is_unitary()`.  It seems to work.

The SVD would appear to have been broken for a long time.  The bad output from the SVD was caught by the unitary test.  

If anything, we would add a test to the SVD routine.  But practice has been to add those tests once they are fixed.  There is extensive documentation of the bug at #11248.

Thanks,
Rob
