# Issue 27328: Fix segfault / memory corruption in OpenBLAS

Issue created by migration from https://trac.sagemath.org/ticket/27565

Original creator: embray

Original creation time: 2019-03-29 07:27:27

Keywords: openblas

There is a bug in OpenBLAS [already fixed upstream](https://github.com/xianyi/OpenBLAS/pull/1957) which I am encountering on Cygwin, though it could also affect Linux (in fact the original bug report was for Linux).

For Sage, this bug is causing a segfault on Cygwin when running


```
./sage -t --long src/sage/manifolds/differentiable/vectorfield.py
```


but it could happen arbitrarily anywhere that uses OpenBLAS and that happens to use threads (even without using OpenBLAS threads).

I have already confirmed that the upstream fix resolves the issue for me.


---

Comment by embray created at 2019-03-29 07:45:03

Changing status from new to needs_review.


---

Comment by fbissey created at 2019-03-29 21:33:54

There is no changes to openblas on this branch. Did you forget to commit?


---

Comment by embray created at 2019-04-01 09:35:07

Strange.  It looks like I did.


---

Comment by git created at 2019-04-01 09:37:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2019-04-01 09:38:14

There it is.  I was working on this on the train last week so who knows what could've interrupted me.


---

Comment by fbissey created at 2019-04-01 09:40:48

Including a a patch merged upstream. I think it is safe.


---

Comment by fbissey created at 2019-04-01 09:40:48

Changing status from needs_review to positive_review.


---

Comment by git created at 2019-04-03 09:32:54

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:


---

Comment by git created at 2019-04-03 09:32:54

Changing status from positive_review to needs_review.


---

Comment by embray created at 2019-04-03 09:34:08

Rebased on 8.8.beta0 (not strictly necessary, but I wanted to anyways so that I could test the rest of 8.8.beta0 on Cygwin).


---

Comment by embray created at 2019-04-03 09:34:08

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-04-03 18:41:34

Resolution: fixed


---

Comment by embray created at 2019-04-18 09:50:55

The branch on this didn't get updated for some reason.
