# Issue 25063: singular of ZZ[x] does not work

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2018-05-07 12:15:23

CC:  mmezzarobba

Trying (in sage 8.2)

```
sage: singular(ZZ['x'])
TypeError                                 Traceback (most recent call last)
<ipython-input-52-39cf8be5601b> in <module>()
----> 1 singular(ZZ['x'])

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in __call__(self, x, type)
    787             return self(x.sage())
    788         elif not isinstance(x, ExpectElement) and hasattr(x, '_singular_'):
--> 789             return x._singular_(self)
    790 
    791         # some convenient conversions

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/structure/sage_object.pyx in sage.structure.sage_object.SageObject._singular_ (build/cythonized/sage/structure/sage_object.c:11770)()
    954             import sage.interfaces.singular
    955             G = sage.interfaces.singular.singular
--> 956         return self._interface_(G)
    957 
    958     def _singular_init_(self, have_ring=False):

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/structure/sage_object.pyx in sage.structure.sage_object.SageObject._interface_ (build/cythonized/sage/structure/sage_object.c:6634)()
    728             except Exception:
    729                 raise NotImplementedError("coercion of object %s to %s not implemented:\n%s\n%s" % (repr(self), I))
--> 730         X = I(s)
    731         if c:
    732             try:

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in __call__(self, x, type)
    793             x = str(x)[1:-1]
    794 
--> 795         return SingularElement(self, type, x, False)
    796 
    797     def _coerce_map_from_(self, S):

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in __init__(self, parent, type, value, is_name)
   1284             except SingularError as x:
   1285                 self._session_number = -1
-> 1286                 raise_(TypeError, x, sys.exc_info()[2])
   1287             except BaseException:
   1288                 self._session_number = -1

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in __init__(self, parent, type, value, is_name)
   1279         if not is_name:
   1280             try:
-> 1281                 self._name = parent._create( value, type)
   1282             # Convert SingularError to TypeError for
   1283             # coercion to work properly.

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in _create(self, value, type)
    754         """
    755         name = self._next_var_name()
--> 756         self.set(type, name, value)
    757         return name
    758 

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in set(self, type, name, value)
    697         cmd += '%s %s=%s;'%(type, name, value)
    698         self.__to_clear = []
--> 699         self.eval(cmd)
    700 
    701     def get(self, var):

/home/chapoton/sage/local/lib/python2.7/site-packages/sage/interfaces/singular.pyc in eval(self, x, allow_semicolon, strip, **kwds)
    655 
    656         if s.find("error") != -1 or s.find("Segment fault") != -1:
--> 657             raise SingularError('Singular error:\n%s'%s)
    658 
    659         if get_verbose() > 0:

TypeError: Singular error:
   ? `Univariate` is undefined
   ? error occurred in or before STDIN line 44: `def sage18=Univariate Polynomial Ring in x over Integer Ring;`
```


This seems to come from

```
sage: L=QQ['x']
sage: L._singular_init_()
polynomial ring, over a field, global ordering
// coefficients: QQ
// number of vars : 1
//        block   1 : ordering lp
//                  : names    x
//        block   2 : ordering C
sage: L=ZZ['x']
sage: L._singular_init_()
'Univariate Polynomial Ring in x over Integer Ring'
```



---

Comment by chapoton created at 2018-06-13 13:21:31

New commits:


---

Comment by chapoton created at 2018-06-13 13:21:37

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-06-13 18:49:48

green bot


---

Comment by tscrim created at 2018-06-22 07:47:59

It makes sense to test this for more general cases (in particular, for `ZZ` as per the ticket description). LGTM.


---

Comment by tscrim created at 2018-06-22 07:47:59

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-06-23 19:58:50

Resolution: fixed
