# Issue 33496: allow to use flint for Stirling numbers

archive/issues_033496.json:
```json
{
    "body": "CC:  tscrim slelievre @kliem klee\n\nof both kind\n\nalso get rid of slow usage of maxima pexpect interface\n\nIssue created by migration from https://trac.sagemath.org/ticket/33733\n\n",
    "created_at": "2022-04-19T15:12:57Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "allow to use flint for Stirling numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33496",
    "user": "chapoton"
}
```
CC:  tscrim slelievre @kliem klee

of both kind

also get rid of slow usage of maxima pexpect interface

Issue created by migration from https://trac.sagemath.org/ticket/33733





---

archive/issue_comments_476872.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-04-19T15:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476872",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_476873.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-04-19T15:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476873",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_476874.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-19T15:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476874",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_476875.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-19T15:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476875",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_476876.json:
```json
{
    "body": "green bot, so please review",
    "created_at": "2022-04-21T15:31:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476876",
    "user": "chapoton"
}
```

green bot, so please review



---

archive/issue_comments_476877.json:
```json
{
    "body": "Maybe one should not remove the maxima algorithm, which is not using the pexpect interface in fact ?",
    "created_at": "2022-04-21T15:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476877",
    "user": "chapoton"
}
```

Maybe one should not remove the maxima algorithm, which is not using the pexpect interface in fact ?



---

archive/issue_comments_476878.json:
```json
{
    "body": "I agree that it would be better not to remove the `algorithm=\"maxima\"` option without deprecating it first.\n\nAs far as I understand, the native Sage implementation of the Stirling numbers of the second kind and the Sage implementation were both written by Fredrik. Is the native Sage version better in some way? Do we need to keep it at all?\n\nWould it make sense to change the default implementation for some of the functions?\n\nA minor style point: why do you write\n\n```\ndef stirling_number1(n, k, algorithm=None) -> Integer:\n    ...\n    if algorithm is None:\n        algorithm='gap'\n```\n\nrather than\n\n```\ndef stirling_number1(n, k, algorithm=\"gap\") -> Integer:\n    ...\n```\n\n?",
    "created_at": "2022-04-21T16:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476878",
    "user": "mmezzarobba"
}
```

I agree that it would be better not to remove the `algorithm="maxima"` option without deprecating it first.

As far as I understand, the native Sage implementation of the Stirling numbers of the second kind and the Sage implementation were both written by Fredrik. Is the native Sage version better in some way? Do we need to keep it at all?

Would it make sense to change the default implementation for some of the functions?

A minor style point: why do you write

```
def stirling_number1(n, k, algorithm=None) -> Integer:
    ...
    if algorithm is None:
        algorithm='gap'
```

rather than

```
def stirling_number1(n, k, algorithm="gap") -> Integer:
    ...
```

?



---

archive/issue_comments_476879.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-21T18:17:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476879",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_476880.json:
```json
{
    "body": "voila, j'ai remis l'algorithme \"maxima\" en place",
    "created_at": "2022-04-21T18:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476880",
    "user": "chapoton"
}
```

voila, j'ai remis l'algorithme "maxima" en place



---

archive/issue_comments_476881.json:
```json
{
    "body": "et le patchbot est tout vert",
    "created_at": "2022-04-22T06:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476881",
    "user": "chapoton"
}
```

et le patchbot est tout vert



---

archive/issue_comments_476882.json:
```json
{
    "body": "please review",
    "created_at": "2022-04-29T11:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476882",
    "user": "chapoton"
}
```

please review



---

archive/issue_comments_476883.json:
```json
{
    "body": "What about Marc's other questions in comment:6?",
    "created_at": "2022-04-29T23:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476883",
    "user": "tscrim"
}
```

What about Marc's other questions in comment:6?



---

archive/issue_comments_476884.json:
```json
{
    "body": "> As far as I understand, the native Sage implementation of the Stirling numbers of the second kind and the Sage implementation were both written by Fredrik. Is the native Sage version better in some way? Do we need to keep it at all?\n\n> Would it make sense to change the default implementation for some of the functions?\n\nI have no idea, and do not plan to investigate",
    "created_at": "2022-04-30T06:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476884",
    "user": "chapoton"
}
```

> As far as I understand, the native Sage implementation of the Stirling numbers of the second kind and the Sage implementation were both written by Fredrik. Is the native Sage version better in some way? Do we need to keep it at all?

> Would it make sense to change the default implementation for some of the functions?

I have no idea, and do not plan to investigate



---

archive/issue_comments_476885.json:
```json
{
    "body": "may we please move forward here ?",
    "created_at": "2022-05-20T06:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476885",
    "user": "chapoton"
}
```

may we please move forward here ?



---

archive/issue_comments_476886.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-20T07:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476886",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_476887.json:
```json
{
    "body": "Sorry, I lost track of this. Thank you. LGTM.",
    "created_at": "2022-05-20T07:28:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476887",
    "user": "tscrim"
}
```

Sorry, I lost track of this. Thank you. LGTM.



---

archive/issue_comments_476888.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-22T16:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33496",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33496#issuecomment-476888",
    "user": "vbraun"
}
```

Resolution: fixed
