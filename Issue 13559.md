# Issue 13559: Minkowski subtraction

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2012-11-27 16:49:22

Assignee: mhampton

CC:  dimpase

This patch implements the Minkowski difference and some misc. bugfixes (Did you know that `CartesianProduct` with generators silently gives the wrong answer?)


---

Comment by vbraun created at 2012-11-27 16:50:50

Changing status from new to needs_review.


---

Comment by dimpase created at 2012-11-28 14:57:50

I get 

```
patching file sage/geometry/polyhedron/base.py
Hunk #4 succeeded at 1453 with fuzz 2 (offset -20 lines).
```

any idea why? Seems you might want to rebase it, perhaps adding #13638 as a dependency
(hunk 4 fuzz happens with and without #13638 - although with different offsets.)


---

Comment by vbraun created at 2012-11-28 15:32:29

Patch doesn't commute with #12193, added to the dependencies even though its functionally independent.


---

Comment by vbraun created at 2012-11-28 18:45:19

Updated patch


---

Attachment

While we are at it, I added some code to list all decompositions of a polygon into the Minkowski sum of two smaller polygons.


---

Comment by dimpase created at 2013-01-23 13:08:33


```
sage -t -long "devel/sage-main/sage/geometry/polyhedron/base_ZZ.py"
**********************************************************************
File "/usr/local/src/sage/sage-5.6.beta2/devel/sage-main/sage/geometry/polyhedron/base_ZZ.py", line 402:
    sage: [ len(square.dilation(i).Minkowski_decompositions())
        for i in range(Integer(6)) ]
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage/sage-5.6.beta2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/usr/local/src/sage/sage-5.6.beta2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/usr/local/src/sage/sage-5.6.beta2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_12[7]>", line 2, in <module>
        for i in range(Integer(6)) ]
      File "/usr/local/src/sage/sage-5.6.beta2/local/lib/python/site-packages/sage/geometry/polyhedron/base.py", line 2402, in dilation
        base_ring=self.parent()._coerce_base_ring(scalar.parent()))
    AttributeError: 'int' object has no attribute 'parent'
```

looks like there is `int` somewhere where one should have `ZZ` instead...


---

Comment by dimpase created at 2013-01-23 13:08:33

Changing status from needs_review to needs_work.


---

Attachment

Updated patch


---

Comment by vbraun created at 2013-01-24 13:16:28

Thanks, fixed. It should have just been `_coerce_base_ring(scalar)`, the method is smart enough to deal with `ZZ` and `int`.


---

Comment by dimpase created at 2013-01-25 03:02:38

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2013-01-30 07:34:12

Resolution: fixed
