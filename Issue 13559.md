# Issue 13559: Minkowski subtraction

archive/issues_013559.json:
```json
{
    "body": "Assignee: mhampton\n\nCC:  dimpase\n\nThis patch implements the Minkowski difference and some misc. bugfixes (Did you know that `CartesianProduct` with generators silently gives the wrong answer?)\n\nIssue created by migration from https://trac.sagemath.org/ticket/13763\n\n",
    "created_at": "2012-11-27T16:49:22Z",
    "labels": [
        "geometry",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Minkowski subtraction",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13559",
    "user": "vbraun"
}
```
Assignee: mhampton

CC:  dimpase

This patch implements the Minkowski difference and some misc. bugfixes (Did you know that `CartesianProduct` with generators silently gives the wrong answer?)

Issue created by migration from https://trac.sagemath.org/ticket/13763





---

archive/issue_comments_167657.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-27T16:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167657",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_167658.json:
```json
{
    "body": "I get \n\n```\npatching file sage/geometry/polyhedron/base.py\nHunk #4 succeeded at 1453 with fuzz 2 (offset -20 lines).\n```\n\nany idea why? Seems you might want to rebase it, perhaps adding #13638 as a dependency\n(hunk 4 fuzz happens with and without #13638 - although with different offsets.)",
    "created_at": "2012-11-28T14:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167658",
    "user": "dimpase"
}
```

I get 

```
patching file sage/geometry/polyhedron/base.py
Hunk #4 succeeded at 1453 with fuzz 2 (offset -20 lines).
```

any idea why? Seems you might want to rebase it, perhaps adding #13638 as a dependency
(hunk 4 fuzz happens with and without #13638 - although with different offsets.)



---

archive/issue_comments_167659.json:
```json
{
    "body": "Patch doesn't commute with #12193, added to the dependencies even though its functionally independent.",
    "created_at": "2012-11-28T15:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167659",
    "user": "vbraun"
}
```

Patch doesn't commute with #12193, added to the dependencies even though its functionally independent.



---

archive/issue_comments_167660.json:
```json
{
    "body": "Updated patch",
    "created_at": "2012-11-28T18:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167660",
    "user": "vbraun"
}
```

Updated patch



---

archive/issue_comments_167661.json:
```json
{
    "body": "Attachment [trac_13763_minkowski_difference.patch](tarball://root/attachments/some-uuid/ticket13763/trac_13763_minkowski_difference.patch) by vbraun created at 2012-11-28 18:46:49\n\nWhile we are at it, I added some code to list all decompositions of a polygon into the Minkowski sum of two smaller polygons.",
    "created_at": "2012-11-28T18:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167661",
    "user": "vbraun"
}
```

Attachment [trac_13763_minkowski_difference.patch](tarball://root/attachments/some-uuid/ticket13763/trac_13763_minkowski_difference.patch) by vbraun created at 2012-11-28 18:46:49

While we are at it, I added some code to list all decompositions of a polygon into the Minkowski sum of two smaller polygons.



---

archive/issue_comments_167662.json:
```json
{
    "body": "\n```\nsage -t -long \"devel/sage-main/sage/geometry/polyhedron/base_ZZ.py\"\n**********************************************************************\nFile \"/usr/local/src/sage/sage-5.6.beta2/devel/sage-main/sage/geometry/polyhedron/base_ZZ.py\", line 402:\n    sage: [ len(square.dilation(i).Minkowski_decompositions())\n        for i in range(Integer(6)) ]\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage/sage-5.6.beta2/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/usr/local/src/sage/sage-5.6.beta2/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/usr/local/src/sage/sage-5.6.beta2/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_12[7]>\", line 2, in <module>\n        for i in range(Integer(6)) ]\n      File \"/usr/local/src/sage/sage-5.6.beta2/local/lib/python/site-packages/sage/geometry/polyhedron/base.py\", line 2402, in dilation\n        base_ring=self.parent()._coerce_base_ring(scalar.parent()))\n    AttributeError: 'int' object has no attribute 'parent'\n```\n\nlooks like there is `int` somewhere where one should have `ZZ` instead...",
    "created_at": "2013-01-23T13:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167662",
    "user": "dimpase"
}
```


```
sage -t -long "devel/sage-main/sage/geometry/polyhedron/base_ZZ.py"
**********************************************************************
File "/usr/local/src/sage/sage-5.6.beta2/devel/sage-main/sage/geometry/polyhedron/base_ZZ.py", line 402:
    sage: [ len(square.dilation(i).Minkowski_decompositions())
        for i in range(Integer(6)) ]
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage/sage-5.6.beta2/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/usr/local/src/sage/sage-5.6.beta2/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/usr/local/src/sage/sage-5.6.beta2/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_12[7]>", line 2, in <module>
        for i in range(Integer(6)) ]
      File "/usr/local/src/sage/sage-5.6.beta2/local/lib/python/site-packages/sage/geometry/polyhedron/base.py", line 2402, in dilation
        base_ring=self.parent()._coerce_base_ring(scalar.parent()))
    AttributeError: 'int' object has no attribute 'parent'
```

looks like there is `int` somewhere where one should have `ZZ` instead...



---

archive/issue_comments_167663.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-01-23T13:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167663",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_167664.json:
```json
{
    "body": "Attachment [trac_13763_minkowski_sum_decompositions.patch](tarball://root/attachments/some-uuid/ticket13763/trac_13763_minkowski_sum_decompositions.patch) by vbraun created at 2013-01-24 13:15:00\n\nUpdated patch",
    "created_at": "2013-01-24T13:15:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167664",
    "user": "vbraun"
}
```

Attachment [trac_13763_minkowski_sum_decompositions.patch](tarball://root/attachments/some-uuid/ticket13763/trac_13763_minkowski_sum_decompositions.patch) by vbraun created at 2013-01-24 13:15:00

Updated patch



---

archive/issue_comments_167665.json:
```json
{
    "body": "Thanks, fixed. It should have just been `_coerce_base_ring(scalar)`, the method is smart enough to deal with `ZZ` and `int`.",
    "created_at": "2013-01-24T13:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167665",
    "user": "vbraun"
}
```

Thanks, fixed. It should have just been `_coerce_base_ring(scalar)`, the method is smart enough to deal with `ZZ` and `int`.



---

archive/issue_comments_167666.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-01-25T03:02:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167666",
    "user": "dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_167667.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-30T07:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13559#issuecomment-167667",
    "user": "jdemeyer"
}
```

Resolution: fixed
