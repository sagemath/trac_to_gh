# Issue 27063: Pip package: installation order of pip2 vs. pip3 should depend on SAGE_PYTHON3

Issue created by migration from https://trac.sagemath.org/ticket/27300

Original creator: jhpalmieri

Original creation time: 2019-02-15 21:14:02

CC:  chapoton

The file `spkg-install` for the pip package says

```
# Install pip3 first so pip2 overwrites local/bin/pip
for vers in 3 2; do
    python${vers} -m pip install --verbose --no-index --ignore-installed \
            --no-build-isolation --isolated --root="$SAGE_DESTDIR" . || \
        sdh_die "Error building / installing pip${vers}"
done
```

But really the order should depend on whether `SAGE_PYTHON3` is "YES", because then the Python 3 version should overwrite the Python 2 version. The current situation causes a doctest failure in `misc/package.py`, in particular in the function `pip_installed_packages`.


---

Comment by jhpalmieri created at 2019-02-15 21:17:16

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2019-02-15 21:17:16

New commits:


---

Comment by jhpalmieri created at 2019-02-15 21:17:27

Changing keywords from "" to "python3".


---

Comment by chapoton created at 2019-02-16 08:01:25

related to #27001 ?


---

Comment by jhpalmieri created at 2019-02-16 17:18:26

It's related, but it's solving a different problem. Each could be merged independently, although they both fix the same doctests.


---

Comment by jhpalmieri created at 2019-02-16 17:18:42

Oh, and thanks for pointing out #27001.


---

Comment by jdemeyer created at 2019-02-21 13:01:03

Because of [PEP 394](https://www.python.org/dev/peps/pep-0394/), I disagree with the premise of this ticket.


---

Comment by jhpalmieri created at 2019-02-21 17:25:43

That doesn't refer to pip, but you may have a point. We can close this and focus on #27001 instead.


---

Comment by jhpalmieri created at 2019-02-21 17:25:43

Changing status from needs_review to positive_review.


---

Comment by embray created at 2019-02-26 13:58:00

Resolution: invalid


---

Comment by embray created at 2019-02-26 13:58:00

Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.
