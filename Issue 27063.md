# Issue 27063: Pip package: installation order of pip2 vs. pip3 should depend on SAGE_PYTHON3

archive/issues_027063.json:
```json
{
    "body": "CC:  @fchapoton\n\nThe file `spkg-install` for the pip package says\n\n```\n# Install pip3 first so pip2 overwrites local/bin/pip\nfor vers in 3 2; do\n    python${vers} -m pip install --verbose --no-index --ignore-installed \\\n            --no-build-isolation --isolated --root=\"$SAGE_DESTDIR\" . || \\\n        sdh_die \"Error building / installing pip${vers}\"\ndone\n```\n\nBut really the order should depend on whether `SAGE_PYTHON3` is \"YES\", because then the Python 3 version should overwrite the Python 2 version. The current situation causes a doctest failure in `misc/package.py`, in particular in the function `pip_installed_packages`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27300\n\n",
    "created_at": "2019-02-15T21:14:02Z",
    "labels": [
        "component: python3",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Pip package: installation order of pip2 vs. pip3 should depend on SAGE_PYTHON3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27063",
    "user": "https://github.com/jhpalmieri"
}
```
CC:  @fchapoton

The file `spkg-install` for the pip package says

```
# Install pip3 first so pip2 overwrites local/bin/pip
for vers in 3 2; do
    python${vers} -m pip install --verbose --no-index --ignore-installed \
            --no-build-isolation --isolated --root="$SAGE_DESTDIR" . || \
        sdh_die "Error building / installing pip${vers}"
done
```

But really the order should depend on whether `SAGE_PYTHON3` is "YES", because then the Python 3 version should overwrite the Python 2 version. The current situation causes a doctest failure in `misc/package.py`, in particular in the function `pip_installed_packages`.

Issue created by migration from https://trac.sagemath.org/ticket/27300





---

archive/issue_comments_380820.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-02-15T21:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380820",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_380821.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-02-15T21:17:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380821",
    "user": "https://github.com/jhpalmieri"
}
```

New commits:



---

archive/issue_comments_380822.json:
```json
{
    "body": "Changing keywords from \"\" to \"python3\".",
    "created_at": "2019-02-15T21:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380822",
    "user": "https://github.com/jhpalmieri"
}
```

Changing keywords from "" to "python3".



---

archive/issue_comments_380823.json:
```json
{
    "body": "related to #27001 ?",
    "created_at": "2019-02-16T08:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380823",
    "user": "https://github.com/fchapoton"
}
```

related to #27001 ?



---

archive/issue_comments_380824.json:
```json
{
    "body": "It's related, but it's solving a different problem. Each could be merged independently, although they both fix the same doctests.",
    "created_at": "2019-02-16T17:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380824",
    "user": "https://github.com/jhpalmieri"
}
```

It's related, but it's solving a different problem. Each could be merged independently, although they both fix the same doctests.



---

archive/issue_comments_380825.json:
```json
{
    "body": "Oh, and thanks for pointing out #27001.",
    "created_at": "2019-02-16T17:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380825",
    "user": "https://github.com/jhpalmieri"
}
```

Oh, and thanks for pointing out #27001.



---

archive/issue_comments_380826.json:
```json
{
    "body": "Because of [PEP 394](https://www.python.org/dev/peps/pep-0394/), I disagree with the premise of this ticket.",
    "created_at": "2019-02-21T13:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380826",
    "user": "https://github.com/jdemeyer"
}
```

Because of [PEP 394](https://www.python.org/dev/peps/pep-0394/), I disagree with the premise of this ticket.



---

archive/issue_comments_380827.json:
```json
{
    "body": "That doesn't refer to pip, but you may have a point. We can close this and focus on #27001 instead.",
    "created_at": "2019-02-21T17:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380827",
    "user": "https://github.com/jhpalmieri"
}
```

That doesn't refer to pip, but you may have a point. We can close this and focus on #27001 instead.



---

archive/issue_comments_380828.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-02-21T17:25:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380828",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_380829.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2019-02-26T13:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380829",
    "user": "https://github.com/embray"
}
```

Resolution: invalid



---

archive/issue_comments_380830.json:
```json
{
    "body": "Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.",
    "created_at": "2019-02-26T13:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27063#issuecomment-380830",
    "user": "https://github.com/embray"
}
```

Presuming these are all correctly reviewed as either duplicate, invalid, or wontfix.



---

archive/issue_events_025124.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-02-26T13:58:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27063",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27063#event-25124"
}
```
