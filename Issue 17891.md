# Issue 17891: Add a face truncation method to Polyhedron class

archive/issues_017891.json:
```json
{
    "body": "CC:  @vbraun mhampton @mo271\n\nKeywords: face truncation, polytope\n\nCurrently, it is possible to do a truncation of a polytope via the method \".edge_truncation()\".\n\nSee http://en.wikipedia.org/wiki/Truncation_%28geometry%29\n\nI currently need the notion of edge-truncation, which is achieve by cutting the polytope along a \"well-chosen\" hyperplane whose normal vector lies in the normal cone of the edge. This edge truncation uses only one edge. Not all edges at once.\n\nFurther, one can define a face truncation similarly with the same code. I am implementing a method called \".face_truncation(face, normal_coefficient, cut_frac)\" taking a face of the polytope, and two optional parameters to vary the angle of the cut.\n\nThis new method makes the old method ill-named. It should be recalled simply \"truncation\" or \"complete_vertex_truncation\".\n\nIssue created by migration from https://trac.sagemath.org/ticket/18128\n\n",
    "created_at": "2015-04-06T15:44:41Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Add a face truncation method to Polyhedron class",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17891",
    "user": "https://github.com/jplab"
}
```
CC:  @vbraun mhampton @mo271

Keywords: face truncation, polytope

Currently, it is possible to do a truncation of a polytope via the method ".edge_truncation()".

See http://en.wikipedia.org/wiki/Truncation_%28geometry%29

I currently need the notion of edge-truncation, which is achieve by cutting the polytope along a "well-chosen" hyperplane whose normal vector lies in the normal cone of the edge. This edge truncation uses only one edge. Not all edges at once.

Further, one can define a face truncation similarly with the same code. I am implementing a method called ".face_truncation(face, normal_coefficient, cut_frac)" taking a face of the polytope, and two optional parameters to vary the angle of the cut.

This new method makes the old method ill-named. It should be recalled simply "truncation" or "complete_vertex_truncation".

Issue created by migration from https://trac.sagemath.org/ticket/18128





---

archive/issue_comments_239854.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-07T11:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239854",
    "user": "https://github.com/jplab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_239855.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-04-07T11:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239855",
    "user": "https://github.com/jplab"
}
```

New commits:



---

archive/issue_comments_239856.json:
```json
{
    "body": "All test passed on sage 6.6.b5. The tests do not take more than 0.1 sec more than before on my old laptop.",
    "created_at": "2015-04-07T11:11:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239856",
    "user": "https://github.com/jplab"
}
```

All test passed on sage 6.6.b5. The tests do not take more than 0.1 sec more than before on my old laptop.



---

archive/issue_comments_239857.json:
```json
{
    "body": "Conflicts, can you merge in the latest beta?",
    "created_at": "2015-04-29T10:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239857",
    "user": "https://github.com/vbraun"
}
```

Conflicts, can you merge in the latest beta?



---

archive/issue_comments_239858.json:
```json
{
    "body": "Sure, will do.",
    "created_at": "2015-04-29T12:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239858",
    "user": "https://github.com/jplab"
}
```

Sure, will do.



---

archive/issue_comments_239859.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-29T15:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239859",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239860.json:
```json
{
    "body": "I don't really know why there are two commits for the merge. Perhaps I typed something more by accident(!?)",
    "created_at": "2015-04-29T15:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239860",
    "user": "https://github.com/jplab"
}
```

I don't really know why there are two commits for the merge. Perhaps I typed something more by accident(!?)



---

archive/issue_comments_239861.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-30T00:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239861",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239862.json:
```json
{
    "body": "You checked in a conflict marker (the thing starting with `<<<<<<< HEAD`).",
    "created_at": "2015-04-30T00:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239862",
    "user": "https://github.com/vbraun"
}
```

You checked in a conflict marker (the thing starting with `<<<<<<< HEAD`).



---

archive/issue_comments_239863.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-30T07:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239864.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-30T07:29:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239864",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239865.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-07T12:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239865",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239866.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-08-20T08:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239866",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239867.json:
```json
{
    "body": "two failing doctests (should be easy to fix)",
    "created_at": "2015-08-20T08:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239867",
    "user": "https://github.com/fchapoton"
}
```

two failing doctests (should be easy to fix)



---

archive/issue_comments_239868.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-25T09:17:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239869.json:
```json
{
    "body": "It seems there was a conflict with the latest version. Also, the test seem to pass on 6.10.b2.\n\nLet's see what the bot says.",
    "created_at": "2015-11-25T09:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239869",
    "user": "https://github.com/jplab"
}
```

It seems there was a conflict with the latest version. Also, the test seem to pass on 6.10.b2.

Let's see what the bot says.



---

archive/issue_comments_239870.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-11-25T09:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239870",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239871.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-11-26T09:33:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239872.json:
```json
{
    "body": "CONFLICT (content): Merge conflict in src/sage/geometry/polyhedron/base.py",
    "created_at": "2015-12-02T02:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239872",
    "user": "https://github.com/videlec"
}
```

CONFLICT (content): Merge conflict in src/sage/geometry/polyhedron/base.py



---

archive/issue_comments_239873.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-12-02T02:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239873",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239874.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-06T16:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239874",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239875.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-12-06T16:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239875",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239876.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-12-06T23:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239876",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239877.json:
```json
{
    "body": "Hello,\n\nWhy did you changed the default value of the argument `cut_frac`?\n\nThe following is by far not enough to understand what the method is doing\n\n```\n+        - ``linear_coefficients`` -- tuple of integer. Specify the coefficient\n+          of the normal vector of the cutting hyperplane.\n```\n\nYou should add more description in the docstring. (that would help me to understand what this method is doing)\n\nIn your examples you are only showing how combinatorially the method behave. I guess that the actual added vertices are indeed interesting. (that would help me to understand what this method is doing (bis))\n\nThere is a trailing whitespace after the docstring and many before the `return`.\n\nYou should replace\n\n```\nif False not in map(lambda x: facet.contains(x) and\n        not facet.interior_contains(x), face_vertices):\n```\n\nby\n\n```\nif any(facet.contains(x) and not facet.interior_contains(x) for x in face_vertices):\n```\n\n\nAlso replace\n\n```\nlinear_evaluation.difference(set([B]))\n```\n\nby\n\n```\nlinear_evaluation.difference(B)\n```\n\n\nAnd add an example where the base ring does change.\n\nVincent",
    "created_at": "2015-12-06T23:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239877",
    "user": "https://github.com/videlec"
}
```

Hello,

Why did you changed the default value of the argument `cut_frac`?

The following is by far not enough to understand what the method is doing

```
+        - ``linear_coefficients`` -- tuple of integer. Specify the coefficient
+          of the normal vector of the cutting hyperplane.
```

You should add more description in the docstring. (that would help me to understand what this method is doing)

In your examples you are only showing how combinatorially the method behave. I guess that the actual added vertices are indeed interesting. (that would help me to understand what this method is doing (bis))

There is a trailing whitespace after the docstring and many before the `return`.

You should replace

```
if False not in map(lambda x: facet.contains(x) and
        not facet.interior_contains(x), face_vertices):
```

by

```
if any(facet.contains(x) and not facet.interior_contains(x) for x in face_vertices):
```


Also replace

```
linear_evaluation.difference(set([B]))
```

by

```
linear_evaluation.difference(B)
```


And add an example where the base ring does change.

Vincent



---

archive/issue_comments_239878.json:
```json
{
    "body": "Dear Vincent,\n\nThanks a lot for the detailed review!\n\nI'm on it!",
    "created_at": "2015-12-07T06:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239878",
    "user": "https://github.com/jplab"
}
```

Dear Vincent,

Thanks a lot for the detailed review!

I'm on it!



---

archive/issue_comments_239879.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-15T16:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239879",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239880.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-12-15T16:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239881.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-12-15T16:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239881",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239882.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-12-21T23:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239882",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_239883.json:
```json
{
    "body": "Salut Jean-Philippe,\n\nI am confused with terminology. The `truncation` (= the old `edge_truncation`) is an operation that can be obtained by several applications of your `face_truncation` isn't it? But if I want to do that it would be a nightmare since the coefficient would changed depending on whether or not the face has been touched before...\n\nIf true, wouldn't be possible to join the two methods? For example I might want to truncate all faces of dimension 1 in the cube with the same coefficient. This would be a sort of intermediate between the two currently available methods.\n\nVincent",
    "created_at": "2015-12-21T23:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239883",
    "user": "https://github.com/videlec"
}
```

Salut Jean-Philippe,

I am confused with terminology. The `truncation` (= the old `edge_truncation`) is an operation that can be obtained by several applications of your `face_truncation` isn't it? But if I want to do that it would be a nightmare since the coefficient would changed depending on whether or not the face has been touched before...

If true, wouldn't be possible to join the two methods? For example I might want to truncate all faces of dimension 1 in the cube with the same coefficient. This would be a sort of intermediate between the two currently available methods.

Vincent



---

archive/issue_comments_239884.json:
```json
{
    "body": "Salut Vincent,\n\nI was also confused with the choice `edge_truncation` already. I have no idea why it was named this way. The only reason I can find is if you think of a polytope as a graph only and you cut all the edges simultaneously twice: close to each of their ends. But geometrically, there is much much more happening.\n\nAs I said, this method does the truncations all at the same time, giving a different result than cutting a single face at a time, where you then also have to take care of how deep you cut.\n\nThe previous `edge_truncation` (which is now `truncation` inspired by the wikipedia page above), actually performs face truncations with faces being vertices, again all simultaneously.\n\nI tried to think of how to join the two methods. Doing the `truncation` using the function `face_truncation` one vertex at a time while also recording the old data for where to cut each vertex next seemed like over doing what it was already doing with very simple code.\n\nSo, I don't really see an advantage in joining the functions...",
    "created_at": "2015-12-22T07:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239884",
    "user": "https://github.com/jplab"
}
```

Salut Vincent,

I was also confused with the choice `edge_truncation` already. I have no idea why it was named this way. The only reason I can find is if you think of a polytope as a graph only and you cut all the edges simultaneously twice: close to each of their ends. But geometrically, there is much much more happening.

As I said, this method does the truncations all at the same time, giving a different result than cutting a single face at a time, where you then also have to take care of how deep you cut.

The previous `edge_truncation` (which is now `truncation` inspired by the wikipedia page above), actually performs face truncations with faces being vertices, again all simultaneously.

I tried to think of how to join the two methods. Doing the `truncation` using the function `face_truncation` one vertex at a time while also recording the old data for where to cut each vertex next seemed like over doing what it was already doing with very simple code.

So, I don't really see an advantage in joining the functions...



---

archive/issue_comments_239885.json:
```json
{
    "body": "What I meant is that instead of feeding the function with one face, you might want to feed it with several. In which case the coefficient `cut_frac` would make reference to the original faces. The function `truncation` would just be a shortcut for `p.face_truncation(p.faces(0))`.\n\nVincent",
    "created_at": "2015-12-24T15:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239885",
    "user": "https://github.com/videlec"
}
```

What I meant is that instead of feeding the function with one face, you might want to feed it with several. In which case the coefficient `cut_frac` would make reference to the original faces. The function `truncation` would just be a shortcut for `p.face_truncation(p.faces(0))`.

Vincent



---

archive/issue_comments_239886.json:
```json
{
    "body": "Replying to [comment:27 vdelecroix]:\n> \n> If true, wouldn't be possible to join the two methods? For example I might want to truncate all faces of dimension 1 in the cube with the same coefficient. This would be a sort of intermediate between the two currently available methods.\n\nSo I would say that the answer is No. The truncation method does things simultaneously while face_truncation really needs the current whole polytope in order to truncate a face with the appropriate proportion. This operation does not commute with itself as even the second face may not be a face of the result anymore. So I would leave the function as it currently is...\n\nI'm currently working on the conflict...",
    "created_at": "2016-02-22T12:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239886",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:27 vdelecroix]:
> 
> If true, wouldn't be possible to join the two methods? For example I might want to truncate all faces of dimension 1 in the cube with the same coefficient. This would be a sort of intermediate between the two currently available methods.

So I would say that the answer is No. The truncation method does things simultaneously while face_truncation really needs the current whole polytope in order to truncate a face with the appropriate proportion. This operation does not commute with itself as even the second face may not be a face of the result anymore. So I would leave the function as it currently is...

I'm currently working on the conflict...



---

archive/issue_comments_239887.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-22T12:45:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239888.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-02-22T12:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239888",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_239889.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-22T13:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239890.json:
```json
{
    "body": "I have difficulty decoding what is the test which fails on the bot.",
    "created_at": "2016-02-23T09:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239890",
    "user": "https://github.com/jplab"
}
```

I have difficulty decoding what is the test which fails on the bot.



---

archive/issue_comments_239891.json:
```json
{
    "body": "The patchbot librae currently misbehaves. Look at the other bots instead.",
    "created_at": "2016-02-23T09:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239891",
    "user": "https://github.com/fchapoton"
}
```

The patchbot librae currently misbehaves. Look at the other bots instead.



---

archive/issue_comments_239892.json:
```json
{
    "body": "Okay, so the other bots seems to give a green flag...\n\nNeeds proper review again then!",
    "created_at": "2016-02-28T10:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239892",
    "user": "https://github.com/jplab"
}
```

Okay, so the other bots seems to give a green flag...

Needs proper review again then!



---

archive/issue_comments_239893.json:
```json
{
    "body": "does not apply..",
    "created_at": "2016-03-08T13:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239893",
    "user": "https://github.com/fchapoton"
}
```

does not apply..



---

archive/issue_comments_239894.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-03-08T13:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239894",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_239895.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-06T09:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239896.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-06T10:08:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239896",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_239897.json:
```json
{
    "body": "This is a rebased version on 7.6.b2, solved the conflicts.\n\nAll test passed on the three modified files. Let's see what the bot says.",
    "created_at": "2017-02-06T10:08:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239897",
    "user": "https://github.com/jplab"
}
```

This is a rebased version on 7.6.b2, solved the conflicts.

All test passed on the three modified files. Let's see what the bot says.



---

archive/issue_comments_239898.json:
```json
{
    "body": "Salut,\n\ntwo remarks, otherwise this is good to go:\n\n1) in\n\n```\n+            normal_vector = sum([linear_coefficients[i]*normal_vectors[i] for i\n+                                 in range(len(normal_vectors))])\n```\n\nthere is no need for the [ ] just inside sum()\n\n2) similarly in \n\n```\n+        linear_evaluation = set([-normal_vector * (v.vector()) for v in\n+            self.vertices()])\n```\n\ninside set()\n\nOnce done and checked, you can set a positive review on my behalf.",
    "created_at": "2017-02-08T21:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239898",
    "user": "https://github.com/fchapoton"
}
```

Salut,

two remarks, otherwise this is good to go:

1) in

```
+            normal_vector = sum([linear_coefficients[i]*normal_vectors[i] for i
+                                 in range(len(normal_vectors))])
```

there is no need for the [ ] just inside sum()

2) similarly in 

```
+        linear_evaluation = set([-normal_vector * (v.vector()) for v in
+            self.vertices()])
```

inside set()

Once done and checked, you can set a positive review on my behalf.



---

archive/issue_comments_239899.json:
```json
{
    "body": "Salut!\n\nReplying to [comment:40 chapoton]:\n> Salut,\n> \n> two remarks, otherwise this is good to go:\n> \n> 1) in\n> {{{\n> +            normal_vector = sum([linear_coefficients[i]*normal_vectors[i] for i\n> +                                 in range(len(normal_vectors))])\n> }}}\n> there is no need for the [ ] just inside sum()\n> \n> 2) similarly in \n> {{{\n> +        linear_evaluation = set([-normal_vector * (v.vector()) for v in\n> +            self.vertices()])\n> }}}\n> inside set()\n> \n\nJust for my information, where is this feature coming from? python3, sage?\n\n> Once done and checked, you can set a positive review on my behalf.\n\nGreat! Thanks a lot!",
    "created_at": "2017-02-09T08:32:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239899",
    "user": "https://github.com/jplab"
}
```

Salut!

Replying to [comment:40 chapoton]:
> Salut,
> 
> two remarks, otherwise this is good to go:
> 
> 1) in
> {{{
> +            normal_vector = sum([linear_coefficients[i]*normal_vectors[i] for i
> +                                 in range(len(normal_vectors))])
> }}}
> there is no need for the [ ] just inside sum()
> 
> 2) similarly in 
> {{{
> +        linear_evaluation = set([-normal_vector * (v.vector()) for v in
> +            self.vertices()])
> }}}
> inside set()
> 

Just for my information, where is this feature coming from? python3, sage?

> Once done and checked, you can set a positive review on my behalf.

Great! Thanks a lot!



---

archive/issue_comments_239900.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-09T08:33:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_239901.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-09T08:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239901",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_239902.json:
```json
{
    "body": "> \n> Just for my information, where is this feature coming from? python3, sage?\n> \n\nThis is just python. One can feed them an iterator, this avoids to build the list twice.",
    "created_at": "2017-02-09T08:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239902",
    "user": "https://github.com/fchapoton"
}
```

> 
> Just for my information, where is this feature coming from? python3, sage?
> 

This is just python. One can feed them an iterator, this avoids to build the list twice.



---

archive/issue_comments_239903.json:
```json
{
    "body": "> This is just python. One can feed them an iterator, this avoids to build the list twice.\n\nGood to know! Thanks!",
    "created_at": "2017-02-09T08:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239903",
    "user": "https://github.com/jplab"
}
```

> This is just python. One can feed them an iterator, this avoids to build the list twice.

Good to know! Thanks!



---

archive/issue_comments_239904.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-11T10:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17891#issuecomment-239904",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
