# Issue 12522: Fix four SPKGs with irregular directory structures

Issue created by migration from Trac.

Original creator: kini

Original creation time: 2012-03-19 01:12:27

Assignee: kini

CC:  ohanar malb ekirkman novoselt jason was

Keywords: libm4ri elliptic_curves graphs polytopes_db

The following SPKGs do not have a `src/` directory:


```
sage_scripts
extcode
libm4ri
sage_root
elliptic_curves
graphs
sage
polytopes_db
```


The sage spkgs are obviously supposed to be irregular (I guess) but the other four - `libm4ri`, `elliptic_curves`, `graphs`, and `polytopes_db` should follow the guidelines given in the developers' guide and have a `src/` directory.


---

Comment by kini created at 2012-03-19 01:13:40

Changing priority from major to minor.


---

Comment by kini created at 2012-03-19 01:13:40

Changing type from PLEASE CHANGE to defect.


---

Comment by kini created at 2012-03-19 02:26:20

I have uploaded an spkg.


---

Comment by kini created at 2012-03-19 02:42:34

The above comment was a test of the newly upgraded trac server. Here are two more SPKGs.


---

Comment by kini created at 2012-03-19 02:55:18

And the last one.


---

Comment by kini created at 2012-03-19 02:55:18

Changing status from new to needs_review.


---

Comment by kini created at 2012-03-19 05:38:12

these are not the comments you are looking for


---

Comment by kini created at 2012-03-19 23:12:38

CCing the maintainers of the SPKGs


---

Comment by ohanar created at 2012-03-19 23:17:59

the elliptic_curves spkg still has the ellcurves directory (which should  now be gone), also at the same time you may as well remove the  xreadlines from the spkg-install since the command has be deprecated (in  favor of just using an implicit iterator)


---

Comment by ohanar created at 2012-03-19 23:17:59

Changing status from needs_review to needs_work.


---

Comment by kini created at 2012-03-20 00:17:27

Oops, how did that happen... fixed (I think).


---

Comment by kini created at 2012-03-20 00:17:27

Changing status from needs_work to needs_review.


---

Comment by ohanar created at 2012-03-20 00:20:24

Changing status from needs_review to needs_work.


---

Comment by ohanar created at 2012-03-20 00:20:24


```
$ hg status
? .SPKG.txt.swp
```



---

Comment by kini created at 2012-03-20 00:24:09

You caught me - that's already fixed, download it again :)


---

Comment by ohanar created at 2012-03-20 00:37:55

I also would remove Emily as the maintainer of the graphs spkg, she hasn't been around for years (if I had the source for her db file, I would maintain this package, but alas, I don't, maybe Jason or William does?).


---

Comment by kini created at 2012-03-20 00:42:45

Jason? William?


---

Comment by ohanar created at 2012-03-20 00:47:02

also, in the polytopes_db I would suggest changing the cp to a mv (like you did with the graphs spkg), removes nearly all io assuming you are building and installing on the same disk


---

Comment by jason created at 2012-03-20 00:52:03

Is the graphs spkg my 8-vertex graph properties database?  It's a sqlite database, right?  Probably the easiest thing to do is to dump the sql to a text file and put that in src/.  We could even just distribute that and build the sqlite database on the fly when the spkg is installed.


---

Comment by ohanar created at 2012-03-20 00:57:10

Replying to [comment:15 jason]:
> We could even just distribute that and build the sqlite database on the fly when the spkg is installed.
I would suggest this, it should reduce the size of the spkg, which is always a good thing, and it shouldn't take long to build. Plus, I did a major refactoring of the SQLDatabase object in Sage last summer, and had to put some special cases in for the Graph's database (that could be fixed with this). In any case, I think this belongs in a separate ticket. For now, mark me as the maintainer of the graphs spkg.


---

Comment by kini created at 2012-03-20 01:13:03

Done and done.


---

Comment by kini created at 2012-03-20 01:13:03

Changing status from needs_work to needs_review.


---

Comment by ohanar created at 2012-03-20 02:39:12

ok, looks good now


---

Comment by ohanar created at 2012-03-20 02:39:12

Changing status from needs_review to positive_review.


---

Comment by kini created at 2012-03-20 12:24:00

Changing keywords from "libm4ri elliptic_curves graphs polytopes_db" to "libm4ri elliptic_curves graphs polytopes_db rd2".


---

Comment by kini created at 2012-03-20 12:24:00

Thanks!


---

Comment by jdemeyer created at 2012-03-23 15:23:49

Resolution: fixed
