# Issue 17786: Method to check if a given order of facets is a shelling order. If so, also a method for computing the restricted sets and the h vector. This should coincide with the the usual h-vector.

archive/issues_017786.json:
```json
{
    "body": "CC:  @jhpalmieri\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18023\n\n",
    "created_at": "2015-03-21T00:02:45Z",
    "labels": [
        "combinatorics",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Method to check if a given order of facets is a shelling order. If so, also a method for computing the restricted sets and the h vector. This should coincide with the the usual h-vector.",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17786",
    "user": "fcastillo"
}
```
CC:  @jhpalmieri



Issue created by migration from https://trac.sagemath.org/ticket/18023





---

archive/issue_comments_238276.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-03-21T00:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238276",
    "user": "@tscrim"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_238277.json:
```json
{
    "body": "Changing keywords from \"\" to \"simplicial complex, shellable\".",
    "created_at": "2015-03-21T00:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238277",
    "user": "@tscrim"
}
```

Changing keywords from "" to "simplicial complex, shellable".



---

archive/issue_comments_238278.json:
```json
{
    "body": "Federico, I rewrote your algorithm to reflect the mathematics more closely. I think the next step after this would be to implement a new class `ShellableSimplicialComplex` to take advantage of specialized implementations (such as your `h_vector` code).\n\nJohn, do you think you could do a (second) review of this?\n----\nNew commits:",
    "created_at": "2015-03-23T21:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238278",
    "user": "@tscrim"
}
```

Federico, I rewrote your algorithm to reflect the mathematics more closely. I think the next step after this would be to implement a new class `ShellableSimplicialComplex` to take advantage of specialized implementations (such as your `h_vector` code).

John, do you think you could do a (second) review of this?
----
New commits:



---

archive/issue_comments_238279.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-03-23T21:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238279",
    "user": "@tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_238280.json:
```json
{
    "body": "First, I'm not an expert on shellability; my background is algebraic topology, not combinatorics. The basic code looks fine, but I'm worried that this method for testing for shellability is going to be very slow for even modestly sized simplicial complexes. If I naively do\n\n```\nsage: T = simplicial_complexes.Torus()\nsage: T\nSimplicial complex with vertex set (0, 1, 2, 3, 4, 5, 6) and 14 facets\nsage: T.is_shellable()\n```\n\nI'm going to be in for a long wait. Part of the problem is that `T` isn't shellable, so it tries all 87 billion permutations of the facets to see if any ordering works.\n\nAt least add a warning in the documentation that it is likely to be slow, maybe even mention that it is a brute force method. A \"to do\" pointing to some possible improvements would be a good idea, too. An internet search led me to the page http://mathoverflow.net/questions/121371/testing-simplicial-complexes-for-shellability. Maybe implement some ideas from there? Is it true that if any component of the h-vector is negative, then the complex is not shellable? That would return `False` immediately for the triangulation of the torus in my example. If there are any other quick checks that rule out classes of non-shellable simplicial complexes, you should add them. (You can check whether the homology is concentrated in the top degree, but that won't be nearly as fast as f-vector or h-vector criteria.)",
    "created_at": "2015-03-24T20:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238280",
    "user": "@jhpalmieri"
}
```

First, I'm not an expert on shellability; my background is algebraic topology, not combinatorics. The basic code looks fine, but I'm worried that this method for testing for shellability is going to be very slow for even modestly sized simplicial complexes. If I naively do

```
sage: T = simplicial_complexes.Torus()
sage: T
Simplicial complex with vertex set (0, 1, 2, 3, 4, 5, 6) and 14 facets
sage: T.is_shellable()
```

I'm going to be in for a long wait. Part of the problem is that `T` isn't shellable, so it tries all 87 billion permutations of the facets to see if any ordering works.

At least add a warning in the documentation that it is likely to be slow, maybe even mention that it is a brute force method. A "to do" pointing to some possible improvements would be a good idea, too. An internet search led me to the page http://mathoverflow.net/questions/121371/testing-simplicial-complexes-for-shellability. Maybe implement some ideas from there? Is it true that if any component of the h-vector is negative, then the complex is not shellable? That would return `False` immediately for the triangulation of the torus in my example. If there are any other quick checks that rule out classes of non-shellable simplicial complexes, you should add them. (You can check whether the homology is concentrated in the top degree, but that won't be nearly as fast as f-vector or h-vector criteria.)



---

archive/issue_comments_238281.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-27T16:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238281",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238282.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-27T17:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238282",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238283.json:
```json
{
    "body": "Good points. I've made some minor tweaks so that this works for non-pure complexes as well. I've added the f/h triangles and do shortcuts for shellability testing. I've also rewritten the algorithm for `is_shellable` to do backtracing in following the link you posted. I'll also run some more tests with Federico (next week when I get back to Davis).",
    "created_at": "2015-03-27T17:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238283",
    "user": "@tscrim"
}
```

Good points. I've made some minor tweaks so that this works for non-pure complexes as well. I've added the f/h triangles and do shortcuts for shellability testing. I've also rewritten the algorithm for `is_shellable` to do backtracing in following the link you posted. I'll also run some more tests with Federico (next week when I get back to Davis).



---

archive/issue_comments_238284.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-04-29T18:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238284",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238285.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-30T15:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238285",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238286.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-05-30T15:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238286",
    "user": "jeremy.l.martin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_238287.json:
```json
{
    "body": "The mathematics looks correct to me and the code works.",
    "created_at": "2016-05-30T15:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238287",
    "user": "jeremy.l.martin"
}
```

The mathematics looks correct to me and the code works.



---

archive/issue_comments_238288.json:
```json
{
    "body": "Changing keywords from \"simplicial complex, shellable\" to \"simplicial complex, shellable, days74\".",
    "created_at": "2016-05-30T15:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238288",
    "user": "@tscrim"
}
```

Changing keywords from "simplicial complex, shellable" to "simplicial complex, shellable, days74".



---

archive/issue_comments_238289.json:
```json
{
    "body": "Going to add to the documentation.",
    "created_at": "2016-05-30T15:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238289",
    "user": "jeremy.l.martin"
}
```

Going to add to the documentation.



---

archive/issue_comments_238290.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-05-30T15:37:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238290",
    "user": "jeremy.l.martin"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_238291.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-05-30T15:48:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238291",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_238292.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-05-30T15:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238292",
    "user": "@tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_238293.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-05-31T22:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17786",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17786#issuecomment-238293",
    "user": "@vbraun"
}
```

Resolution: fixed
