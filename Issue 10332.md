# Issue 10332: Add an optional interface for lrcalc

Issue created by migration from https://trac.sagemath.org/ticket/10333

Original creator: mhansen

Original creation time: 2010-11-26 02:15:22

Assignee: sage-combinat

CC:  sage-combinat asbuch saliola

There is an spkg at http://sage.math.washington.edu/home/mhansen/lrcalc-1.1.4.spkg


---

Comment by mhansen created at 2010-11-26 02:31:59

Changing status from new to needs_review.


---

Comment by mhansen created at 2010-11-26 02:33:05

Changing type from PLEASE CHANGE to enhancement.


---

Comment by aschilling created at 2011-05-06 18:16:52

Together with Anders Buch, I went through this patch at Sage Days 30 and checked all functionalities. We added further doctests and also access to fusion coefficients (which was not in the previous version of this patch).

From the mathematical point of view, I give this a positive review. Could someone please do a quick technical review of the patch?

Thanks!

Anne

Apply: trac_10333-lrcalc-final.patch


---

Comment by aschilling created at 2011-05-08 13:01:07

Changing keywords from "" to "spkg package, Schubert calculus, Littlewood-Richardson".


---

Comment by aschilling created at 2011-05-08 13:01:07

I fixed some more typos and omissions on the doctest.

Positive review on the mathematics and features.

Could someone complete the technical review?

Cheers,

Anne


---

Comment by aschilling created at 2011-05-09 01:21:23

Changing keywords from "spkg package, Schubert calculus, Littlewood-Richardson" to "spkg package, Schubert calculus, Littlewood-Richardson, days30".


---

Comment by chapoton created at 2011-06-25 12:21:21

for the bot:

Apply: trac_10333-lrcalc-final.patch


---

Comment by nthiery created at 2011-06-28 09:48:22

Hi,

I used the occasion to do something I had promissed Anders a while ago: namely to add a standard GNU build system (autoconf/automake) to the original lrcalc sources. With this, the SPKG becomes trivial. I'll upload shortly a preversion of it. If Anders agrees with the changes, and once he will have done an official release, I'll upload a final version of the spkg.

Mike: could you review now the three little files: SPKG.txt, spkg-install and spkg-check? Those are unlikely to change.


---

Comment by nthiery created at 2011-06-28 12:57:33

I fixed a couple tiny typos in lrcalc.pyx, and uploaded an updated patch. For me this part is good to go.


---

Comment by nthiery created at 2011-07-01 10:58:51

According to the vote on http://groups.google.com/group/sage-devel/browse_thread/thread/2e7114375f6f88a5/, there is a consensus on making lrcalc a standard package, after a one release probation period in order to follow the official rule. See: #11563


---

Comment by aschilling created at 2011-08-18 18:23:03

Can we now set a positive review on this patch?

Anne


---

Comment by ncohen created at 2011-10-01 15:17:07

Changing status from needs_review to needs_info.


---

Comment by ncohen created at 2011-10-01 15:17:07

(pending an answer, if no one knows whether this ticket should be reviewed...)


---

Comment by aschilling created at 2011-10-01 15:20:10

Replying to [comment:15 ncohen]:
> (pending an answer, if no one knows whether this ticket should be reviewed...)

As far as I know, everything is fine with the ticket except that Nicolas is waiting for confirmation from Anders Buch about the spkg. Nicolas, is everything ok now on this front?

Anne


---

Comment by aschilling created at 2011-10-01 15:20:10

Changing status from needs_info to needs_review.


---

Comment by ncohen created at 2011-10-01 15:27:23

Got it ! Then what about setting it to needs_info in the meantime sothat it does not appear in the list of tickets needing a review ? I am trying to deal with some of them, and it would be nice to sort out the tickets which actually need one, those which are to be forgotten until some external event takes place, and those that are totally abandonned `:-)`

Nathann


---

Comment by nthiery created at 2011-10-03 19:51:19

Changing status from needs_review to needs_info.


---

Comment by nthiery created at 2011-10-03 19:51:19

Done.


---

Comment by nthiery created at 2012-01-09 15:49:14

lrcalc 1.1.6 beta release (for Anders)


---

Comment by nthiery created at 2012-01-09 15:59:46

Changing status from needs_info to needs_review.


---

Attachment

After discussion with Anders, I have rolled a new (beta) release of
lrcalc, based on:

 - lrcalc-1.1.5.tar.gz
 - schmult-1.1.5.tar.gz
 - an autotools build system

which Anders will later polish into an official 1.1.6 release. The
spkg is basically identical to the previous 1.1.5b, except for some
updated files in the lrcalc sources (README/AUTHOR/TODO), and the
header installation configuration. Anders gave his +1 on the changes.
I have installed the spkg together with the patch on sage 4.7.2 and
sage-5.0.prealpha0, and in both cases, all test pass.

The patch is unchanged and has a positive review.

Anne (and others!): could you try out the new spkg? If it works fine
for you, I guess we can set a positive review. Feel free to untar the
spkg, and check the files src/README, src/AUTHORS, src/TODO, src/NEWS.

Cheers,
                         Nicolas


---

Comment by aschilling created at 2012-01-09 17:50:21

Changing status from needs_review to positive_review.


---

Comment by aschilling created at 2012-01-09 17:50:21

I tried out the new package and ran the tests. Everything seemed to work. Positive review.

Anne


---

Comment by jdemeyer created at 2012-01-18 11:20:34

Changing component from combinatorics to optional packages.


---

Comment by jdemeyer created at 2012-01-18 22:41:26

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-01-18 22:41:26

I get a warning building the documentation (this is _without_ the optional spkg installed):

```
/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage/doc/en/reference/sage/libs/lrcalc/lrcalc.rst:7: WARNING: autodoc can't import/find module 'sage.libs.lrcalc.lrcalc', it reported error: "No module named lrcalc", please check your spelling and sys.path
```



---

Comment by nthiery created at 2012-01-20 15:57:12

Replying to [comment:25 jdemeyer]:
> I get a warning building the documentation (this is _without_ the optional spkg installed):
> {{{
> /mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta1/devel/sage/doc/en/reference/sage/libs/lrcalc/lrcalc.rst:7: WARNING: autodoc can't import/find module 'sage.libs.lrcalc.lrcalc', it reported error: "No module named lrcalc", please check your spelling and sys.path
> }}}

Yikes. Is there an idiom to conditionally include a piece of documentation in the reference manual depending on the presence or not of a spkg? (analogue of the is_package_installed in module.list.py).

If not, may we just kill the beast, and make lrcalc right away a standard spkg (#11563)?

Cheers,


---

Comment by jdemeyer created at 2012-01-20 16:29:37

Maybe this should be discussed on sage-devel?  I don't have an opinion either way.


---

Comment by nthiery created at 2012-01-20 18:17:38

Replying to [comment:27 jdemeyer]:
> Maybe this should be discussed on sage-devel?  I don't have an opinion either way.

Ok, I just relaunched the discussion there:

http://groups.google.com/group/sage-devel/msg/9a7b4987ae974b2b


---

Comment by slabbe created at 2012-01-20 19:33:16

> Yikes. Is there an idiom to conditionally include a piece of documentation in the reference manual depending on the presence or not of a spkg? (analogue of the is_package_installed in module.list.py).

If you don't include the documentation in the reference manual (by that, I mean no modification to the file `doc/en/reference/libs.rst` ), does the warning still shows up when building the documentation?

What is the status of the documentation for other optional packages?


---

Comment by nthiery created at 2012-01-20 20:56:42

Salut SÃ©bastien!

Replying to [comment:29 slabbe]:
> > Yikes. Is there an idiom to conditionally include a piece of documentation in the reference manual depending on the presence or not of a spkg? (analogue of the is_package_installed in module.list.py).
> 
> If you don't include the documentation in the reference manual (by that, I mean no modification to the file `doc/en/reference/libs.rst` ), does the warning still shows up when building the documentation?

I guess not, so worst case that will be the way to go. But not having the documentation linked to does not feel good.

> What is the status of the documentation for other optional packages?

I did not find that many, and as far as I could see, the documentation was not linked to ...

Cheers,


---

Comment by nthiery created at 2012-01-20 23:20:42

Changing status from needs_work to positive_review.


---

Comment by nthiery created at 2012-01-20 23:20:42

Oh well, I just stripped the link to the lrcalc from libs.rst. Ugly, but if that's the price to pay to abide to the rules ...

Jeroen: I am allowing myself to put back the positive review to catch your attention. Feel free to unset it if you find it innappropriate.


---

Comment by jdemeyer created at 2012-01-24 09:18:29

One more thing: the spkg should follow the format of [http://sagemath.org/doc/developer/producing_spkgs.html#the-file-spkg-txt](http://sagemath.org/doc/developer/producing_spkgs.html#the-file-spkg-txt).  In particular, the `Changelog` should be formatted differently.


---

Comment by jdemeyer created at 2012-01-24 09:18:29

Changing status from positive_review to needs_work.


---

Comment by nthiery created at 2012-01-24 09:38:42

Final spkg


---

Comment by nthiery created at 2012-01-24 09:39:49

Changing status from needs_work to needs_review.


---

Attachment

Replying to [comment:32 jdemeyer]:
> One more thing: the spkg should follow the format of [http://sagemath.org/doc/developer/producing_spkgs.html#the-file-spkg-txt](http://sagemath.org/doc/developer/producing_spkgs.html#the-file-spkg-txt).  In particular, the `Changelog` should be formatted differently.

Oops. Thanks for spotting this. I updated the spkg accordingly. Do you mind reviewing the new SPKG.txt?


---

Comment by jdemeyer created at 2012-01-24 14:29:21

Actually, the documentation still doesn't work:

```
/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage/doc/en/reference/sage/libs/lrcalc/lrcalc.rst:7: WARNING: autodoc can't import/find module 'sage.libs.lrcalc.lrcalc', it reported error: "No module named lrcalc", please check your spelling and sys.path
/mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/local/lib/python2.7/site-packages/sage/misc/edit_module.py:docstring of sage.misc.edit_module.edit_devel:14: WARNING: Inline interpreted text or phrase reference start-string without end-string.
```



---

Comment by jdemeyer created at 2012-01-24 14:29:21

Changing status from needs_review to needs_work.


---

Comment by nthiery created at 2012-01-24 16:22:37

Replying to [comment:34 jdemeyer]:
> Actually, the documentation still doesn't work:
> {{{
> /mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/devel/sage/doc/en/reference/sage/libs/lrcalc/lrcalc.rst:7: WARNING: autodoc can't import/find module 'sage.libs.lrcalc.lrcalc', it reported error: "No module named lrcalc", please check your spelling and sys.path
> /mnt/usb1/scratch/jdemeyer/merger/sage-5.0.beta2/local/lib/python2.7/site-packages/sage/misc/edit_module.py:docstring of sage.misc.edit_module.edit_devel:14: WARNING: Inline interpreted text or phrase reference start-string without end-string.
> }}}

I don't understand. Why is this lrcalc.rst file generated, whereas no such file is generated for, e.g. the analoguous sage/numerical/backends/coin_backend.pyx?


---

Comment by jhpalmieri created at 2012-01-24 18:07:56

When I click on [attachment:trac_10333-lrcalc-final.patch], it still has a line adding `sage/libs/lrcalc/lrcalc` to `doc/en/reference/libs.rst`.  That's presumably the problem.


---

Comment by aschilling created at 2012-01-24 20:13:24

Replying to [comment:36 jhpalmieri]:
> When I click on [attachment:trac_10333-lrcalc-final.patch], it still has a line adding `sage/libs/lrcalc/lrcalc` to `doc/en/reference/libs.rst`.  That's presumably the problem.

Nicolas, could you please also put the updated patch on the sage-combinat server.

Thanks,

Anne


---

Attachment

Replying to [comment:36 jhpalmieri]:
> When I click on [attachment:trac_10333-lrcalc-final.patch], it still has a line adding `sage/libs/lrcalc/lrcalc` to `doc/en/reference/libs.rst`.  That's presumably the problem.

What's the heck? How did I do this?

Oh well; fixed. Thanks for spotting it!


---

Comment by nthiery created at 2012-01-24 21:45:10

Changing status from needs_work to needs_review.


---

Comment by nthiery created at 2012-01-24 21:45:10

> Nicolas, could you please also put the updated patch on the sage-combinat server.

Done.


---

Comment by nthiery created at 2012-01-24 21:45:45

Jeroen: I let you set back the positive review. Sorry for all the back and forth.


---

Comment by aschilling created at 2012-01-25 18:41:39

Changing status from needs_review to positive_review.


---

Comment by aschilling created at 2012-01-25 18:41:39

Replying to [comment:40 nthiery]:
> Jeroen: I let you set back the positive review. Sorry for all the back and forth.

The line referring to doc/en/reference/libs.rst seems to be gone now, so I set this back to positive review. Hopefully it will work now!

Anne


---

Comment by jdemeyer created at 2012-02-02 12:52:25

Resolution: fixed


---

Comment by nthiery created at 2012-02-02 18:19:50

Yippee :-)

Thanks everyone!
