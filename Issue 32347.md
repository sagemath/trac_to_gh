# Issue 32347: Improve initializiation of `Combinations`

Issue created by migration from https://trac.sagemath.org/ticket/32584

Original creator: @kliem

Original creation time: 2021-09-29 09:26:14

CC:  dcoudert

Before:


```
sage: %timeit _ = Combinations(100, 2)
75.3 µs ± 312 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
sage: %timeit _ = Combinations(1000, 2)
5.12 ms ± 37.6 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
sage: %timeit _ = Combinations(range(100), 2)
75.7 µs ± 119 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
sage: %timeit _ = Combinations([(randint(1, 1000),) for _ in range(100)], 2)
294 µs ± 4.43 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
sage: %timeit _ = Combinations([[randint(1, 1000)] for _ in range(100)], 2)
296 µs ± 2.16 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
sage: %time _ = Combinations(16000, 2)
CPU times: user 1.32 s, sys: 3.9 ms, total: 1.32 s
Wall time: 1.32 s
```


After:


```
sage: %timeit _ = Combinations(100, 2)
15.9 µs ± 243 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit _ = Combinations(1000, 2)
30.8 µs ± 2.38 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
sage: %timeit _ = Combinations(range(100), 2)
16.5 µs ± 1.19 µs per loop (mean ± std. dev. of 7 runs, 100000 loops each)
sage: %timeit _ = Combinations([(randint(1, 1000),) for _ in range(100)], 2)
207 µs ± 9.97 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each)
sage: %timeit _ = Combinations([[randint(1, 1000)] for _ in range(100)], 2)
227 µs ± 2.72 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
sage: %time _ = Combinations(16000, 2)
CPU times: user 1.01 ms, sys: 3.98 ms, total: 4.99 ms
Wall time: 5.76 ms
```



---

Comment by @kliem created at 2021-09-29 09:26:22

Changing status from new to needs_review.


---

Comment by git created at 2021-09-29 09:43:21

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-09-29 14:56:43

rather use the fast arith version of binomial, not the terrible symbolic function...


---

Comment by git created at 2021-09-29 19:23:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2021-10-03 08:33:42

LGTM.


---

Comment by tscrim created at 2021-10-03 08:33:42

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2021-10-03 17:55:34

Thank you.


---

Comment by vbraun created at 2021-10-13 22:50:53

Resolution: fixed
