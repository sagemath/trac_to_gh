# Issue 18494: Failing to download tarball while installing should lead to clear error in log file

Issue created by migration from Trac.

Original creator: jhpalmieri

Original creation time: 2015-06-18 17:58:44

CC:  jdemeyer

If a tar file fails to download during installation, the log file is not formatted correctly, so Sage doesn't report which package failed to build. 

From the end of `logs/pkgs/ccache-3.2.2.log`:

```
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
[Errno 404] Not Found: '//sagepad.org/spkg/upstream/ccache/ccache-3.2.2.tar.bz2'
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file", line 457, in <module>
    tarball.download()
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/src/bin/sage-download-file", line 402, in download
    raise FileNotMirroredError('tarball does not exist on mirror')
__main__.FileNotMirroredError: tarball does not exist on mirror
```

From the end of `logs/install.log`:

```
Error building Sage.

The following package(s) may have failed to build:

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.
```



---

Comment by jdemeyer created at 2015-06-18 18:40:53

Could you please review #16774? If you agree, we can apply essentially the same trick here.


---

Comment by jdemeyer created at 2015-07-06 12:21:31

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-07-06 12:21:31

New commits:


---

Comment by jhpalmieri created at 2015-07-06 18:13:07

Looks good to me.


---

Comment by jhpalmieri created at 2015-07-06 18:13:07

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-07-07 10:28:49

Resolution: fixed
