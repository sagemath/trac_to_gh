# Issue 14734: Better latex for Farey symbols

Issue created by migration from https://trac.sagemath.org/ticket/14971

Original creator: davidloeffler

Original creation time: 2013-07-25 19:18:48

Keywords: sd51

This patch adds a LaTeX rendering for Farey symbols (using the notation from Kurth and Long's paper, http://arxiv.org/abs/0710.1835).


---

Attachment

Patch against 5.11.beta3


---

Comment by davidloeffler created at 2013-07-25 19:21:19

Here's a patch. It also corrects the rendering of the fundamental domain in a certain corner case where we were previously plotting a fundamental domain that was too large.


---

Comment by davidloeffler created at 2013-07-26 11:18:34

Changing status from new to needs_review.


---

Comment by hmonien created at 2013-09-07 11:17:55

Dear David, I have been working on a major overhaul of the Farey symbols including among other major improvements the latex code 
for Farey symbols e.g. 


sage: f=FareySymbol(Gamma0(23))
sage: latex(f)
\xymatrix{& -\infty \ar`@`{-}`@`/_{1pc}/[r]_{1}& 0 \ar`@`{-}`@`/_{1pc}/[r]_{2}& \frac{1}{5} \ar`@`{-}`@`/_{1pc}/[r]_{3}& \frac{1}{4} \ar`@`{-}`@`/_{1pc}/[r]_{5}& \frac{1}{3} \ar`@`{-}`@`/_{1pc}/[r]_{3}& \frac{1}{2} \ar`@`{-}`@`/_{1pc}/[r]_{4}& \frac{2}{3} \ar`@`{-}`@`/_{1pc}/[r]_{2}& \frac{3}{4} \ar`@`{-}`@`/_{1pc}/[r]_{4}& \frac{4}{5} \ar`@`{-}`@`/_{1pc}/[r]_{5}& 1 \ar`@`{-}`@`/_{1pc}/[r]_{1}&\infty}

In my patch which I have to rework because the Farey symbol code in sage has been changed between 5.9 and 5.10 
will include cusp_class and reduce_to_cusp. I have to remove some experimental features which are probably not 
useful for everybody. 

So should I merge your changes into my patch?


---

Comment by davidloeffler created at 2013-09-12 09:01:04

Does that work in the Sage notebook? I don't know if the MathJax viewer for LaTeX formulae supports xypic. 

Anyway, it looks like your patch will supersede this one here (I guess using xypic will give much nicer output than the rather simplistic approach based on `\underbrace` which my patch uses). So if your code is ready before anyone gets round to reviewing this one, we can close this ticket. But let's keep it open for now.


---

Comment by mraum created at 2014-01-10 08:06:59

I turned this into a git branch.  I kept David as the author, even though I took the freedom not to convert the second part of the patch, which is not concerned with latex output).

I can give a positive review to the parts that I converted, but I need somebody to sign off that we do not take over the second part.  First, it doesn't respect the "show_tesselation" option.  Second, it leads to code duplication for the sake of what I think is a very little and insignificant speed up.
----
New commits:


---

Comment by davidloeffler created at 2014-01-11 18:06:48

Hi Martin,

The second part of the patch, which you are proposing to reject, wasn't intended as a speedup: if I remember correctly (this was a while ago) the special-case code was there to correct a wrong output that was being returned in a specific corner case, the unique index 2 subgroup of PSL2Z. Anyway it indeed has nothing to do with latex formatting, so it should probably have been a separate ticket all along.

David


---

Comment by mraum created at 2014-01-14 08:07:17

Hi David:

That's good to hear. May I then propose that you give a positive review to leaving away the second part? I have reviewed and tested the rest of the ticket. (The patchbot doesn't seem to get the merging right. Any idea how to fix that, that is, let the patchbot know it is based on 6.0beta4?)

Please note that the index 2 subgroup is dealt with in Hartmut's updated FareySymbol's. I have made this ticket a dependency of Hartmut's to avoid having a Sage version which only has xymatrix output.

Martin


---

Comment by davidloeffler created at 2014-01-14 09:45:31

Changing status from needs_review to positive_review.


---

Comment by davidloeffler created at 2014-01-14 09:45:31

OK, that sounds like the right way to go. I'm afraid I don't know how to fix the patchbot!


---

Comment by vbraun created at 2014-01-16 05:10:48

Resolution: fixed
