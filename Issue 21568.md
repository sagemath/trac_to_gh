# Issue 21568: Use psutil instead of sage.misc.memory_info

Issue created by migration from https://trac.sagemath.org/ticket/21805

Original creator: jdemeyer

Original creation time: 2016-11-03 14:10:11

Replace uses of `sage.misc.memory_info` by the `psutil` package.


---

Comment by jdemeyer created at 2016-11-14 09:02:19

Changing component from interfaces to misc.


---

Comment by jdemeyer created at 2016-11-16 15:41:27

New commits:


---

Comment by jdemeyer created at 2016-11-16 15:41:27

Changing status from new to needs_review.


---

Comment by jpflori created at 2016-11-17 15:22:49

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2016-11-17 15:22:49

Looks goot to me.


---

Comment by vbraun created at 2016-11-17 23:09:21

on OSX:

``` 
30617Traceback (most recent call last):
30618  File "/Users/buildslave-sage/slave/sage_git/build/src/bin/sage-eval", line 4, in <module>
30619    from sage.all import *
30620  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/all.py", line 92, in <module>
30621    from sage.misc.all       import *         # takes a while
30622  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/misc/all.py", line 89, in <module>
30623    from .functional import (additive_order,
30624  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/misc/functional.py", line 32, in <module>
30625    from sage.rings.complex_double import CDF
30626  File "sage/rings/integer.pxd", line 7, in init sage.rings.complex_double (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/rings/complex_double.c:23953)
30627  File "sage/rings/rational.pxd", line 8, in init sage.rings.integer (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/rings/integer.c:50744)
30628  File "sage/rings/fast_arith.pxd", line 3, in init sage.rings.rational (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/rings/rational.c:38499)
30629  File "sage/libs/cypari2/gen.pxd", line 5, in init sage.rings.fast_arith (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/rings/fast_arith.c:8557)
30630  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/libs/cypari2/__init__.py", line 1, in <module>
30631    from .pari_instance import pari
30632  File "sage/libs/cypari2/pari_instance.pyx", line 453, in init sage.libs.cypari2.pari_instance (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/cypari2/pari_instance.c:17929)
30633  File "sage/libs/cypari2/pari_instance.pyx", line 517, in sage.libs.cypari2.pari_instance.PariInstance.__init__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/cypari2/pari_instance.c:11439)
30634  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/misc/getusage.py", line 74, in virtual_memory_limit
30635    vmax = psutil.Process().rlimit(psutil.RLIMIT_AS)[0]
30636AttributeError: 'Process' object has no attribute 'rlimit'
30637Sage failed to start up.
30638Please email sage-devel (http://groups.google.com/group/sage-devel)
30639explaining the problem and send the log file
30640  /Users/buildslave-sage/slave/sage_git/build/logs/start.log
30641Describe your computer, operating system, etc.
30642make[2]: *** [/Users/buildslave-sage/slave/sage_git/build/local/etc/sage-started.txt] Error 1
30643make[1]: *** [start] Error 2
```



---

Comment by vbraun created at 2016-11-17 23:09:21

Changing status from positive_review to needs_work.


---

Comment by git created at 2016-11-30 18:32:14

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2016-11-30 19:12:54

I reverted this to using `resource.getrlimit` instead of `psutil`.


---

Comment by jdemeyer created at 2016-11-30 19:12:54

Changing status from needs_work to needs_review.


---

Comment by vbraun created at 2016-11-30 19:32:29

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-12-01 22:32:44

Resolution: fixed
