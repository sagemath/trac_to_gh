# Issue 22092: Non-Integral powers of multivariate polynomials

Issue created by migration from Trac.

Original creator: cheuberg

Original creation time: 2017-02-08 12:47:28

CC:  behackl vdelecroix nbruin

In #20086, 

```
sage: R.<x> = ZZ[]
sage: (x**2)**(1/2)
x
sage: R(1)**(1/2)
1
```

was implemented.

However, this does not work in multivariate polynomial rings:

```
sage: R.<x, y> = ZZ[]
sage: (x**2)**(1/2)
Traceback (most recent call last):
...
TypeError: non-integral exponents not supported
sage: R(1)**(1/2)
Traceback (most recent call last):
...
TypeError: non-integral exponents not supported
```

#20666 is the general case (non-uniform behavior of powers for polynomials); this ticket shall handle the multivariate case.


---

Comment by cheuberg created at 2017-02-08 13:30:59

New commits:


---

Comment by cheuberg created at 2017-02-08 13:30:59

Changing status from new to needs_review.


---

Comment by git created at 2017-02-10 11:38:33

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bruno created at 2017-05-13 09:23:18

Changing status from needs_review to needs_work.


---

Comment by bruno created at 2017-05-13 09:23:18

I suggest three changes:

1. You could avoid importing `QQ` and use `Rational` instead (as `Integer` is used rather than `ZZ`).
1. Instead of using `QQ.coerce(exp)`, I would use `QQ(exp)` as it is done for integer exponents. It allows to use `p^.5` instead of `p^(1/2)`. 
1. You may catch the `TypeError` for rational exponents to raise more meaningful exception when the method is applied with some non-rational (nor integral) exponent. For instance, if I do `p^I`, I get `TypeError: Unable to coerce I to a rational` while I would prefer something like `TypeError: Only integral and rational exponents supported` or `TypeError: I is neither an integer nor a rational`.


---

Comment by git created at 2017-10-18 14:24:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cheuberg created at 2017-10-18 14:27:15

Changing status from needs_work to needs_review.


---

Comment by cheuberg created at 2017-10-18 14:27:15

Replying to [comment:4 bruno]:
> I suggest three changes: (...)

Thank you for your comments; I am sorry for not reacting in a timely manner.

Anyhow, all three changes have been carried out.


---

Comment by roed created at 2017-10-18 22:50:33

Changing status from needs_review to positive_review.


---

Comment by roed created at 2017-10-18 22:50:33

Looks good to me.


---

Comment by vbraun created at 2017-10-21 19:01:55

Resolution: fixed
