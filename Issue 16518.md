# Issue 16518: PPL LP solver does not accept rationals

archive/issues_016518.json:
```json
{
    "body": "CC:  @dimpase @vbraun\n\nGiven that PPL natively works with rationals, this should work:\n\n```\nsage: p = MixedIntegerLinearProgram(solver=\"PPL\")\nsage: x = p.new_variable(nonnegative=True)\nsage: p.add_constraint(x[0] + x[1] <= 1/2)\nsage: p.set_objective(x[0])\nsage: p.solve()\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-10-082b726ace8d> in <module>()\n----> 1 p.solve()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/mip.so in sage.numerical.mip.MixedIntegerLinearProgram.solve (build/cythonized/sage/numerical/mip.c:10574)()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/backends/ppl_backend.so in sage.numerical.backends.ppl_backend.PPLBackend.solve (build/cythonized/sage/numerical/backends/ppl_backend.c:5346)()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/backends/ppl_backend.so in sage.numerical.backends.ppl_backend.PPLBackend.init_mip (build/cythonized/sage/numerical/backends/ppl_backend.c:2284)()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl.Linear_Expression.__richcmp__ (build/cythonized/sage/libs/ppl.cpp:17640)()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl._make_Constraint_from_richcmp (build/cythonized/sage/libs/ppl.cpp:23124)()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl.Linear_Expression.__cinit__ (build/cythonized/sage/libs/ppl.cpp:15675)()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/integer.so in sage.rings.integer.Integer.__init__ (build/cythonized/sage/rings/integer.c:7650)()\n\n/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/rational.so in sage.rings.rational.Rational._integer_ (build/cythonized/sage/rings/rational.c:20851)()\n\nTypeError: no conversion of this rational to integer\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16755\n\n",
    "created_at": "2014-08-04T13:01:39Z",
    "labels": [
        "linear programming",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "PPL LP solver does not accept rationals",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16518",
    "user": "@jdemeyer"
}
```
CC:  @dimpase @vbraun

Given that PPL natively works with rationals, this should work:

```
sage: p = MixedIntegerLinearProgram(solver="PPL")
sage: x = p.new_variable(nonnegative=True)
sage: p.add_constraint(x[0] + x[1] <= 1/2)
sage: p.set_objective(x[0])
sage: p.solve()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-10-082b726ace8d> in <module>()
----> 1 p.solve()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/mip.so in sage.numerical.mip.MixedIntegerLinearProgram.solve (build/cythonized/sage/numerical/mip.c:10574)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/backends/ppl_backend.so in sage.numerical.backends.ppl_backend.PPLBackend.solve (build/cythonized/sage/numerical/backends/ppl_backend.c:5346)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/backends/ppl_backend.so in sage.numerical.backends.ppl_backend.PPLBackend.init_mip (build/cythonized/sage/numerical/backends/ppl_backend.c:2284)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl.Linear_Expression.__richcmp__ (build/cythonized/sage/libs/ppl.cpp:17640)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl._make_Constraint_from_richcmp (build/cythonized/sage/libs/ppl.cpp:23124)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl.Linear_Expression.__cinit__ (build/cythonized/sage/libs/ppl.cpp:15675)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/integer.so in sage.rings.integer.Integer.__init__ (build/cythonized/sage/rings/integer.c:7650)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/rational.so in sage.rings.rational.Rational._integer_ (build/cythonized/sage/rings/rational.c:20851)()

TypeError: no conversion of this rational to integer
```


Issue created by migration from https://trac.sagemath.org/ticket/16755





---

archive/issue_comments_217358.json:
```json
{
    "body": "Can't this be taken care of entirely in `PPLBackend.init_mip()` ?",
    "created_at": "2014-08-04T15:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217358",
    "user": "@dimpase"
}
```

Can't this be taken care of entirely in `PPLBackend.init_mip()` ?



---

archive/issue_comments_217359.json:
```json
{
    "body": "Replying to [comment:5 dimpase]:\n> Can't this be taken care of entirely in `PPLBackend.init_mip()` ?\nFor constraints, probably yes. For the objective function not (since you need to scale the optimal solution also).",
    "created_at": "2014-08-04T15:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217359",
    "user": "@jdemeyer"
}
```

Replying to [comment:5 dimpase]:
> Can't this be taken care of entirely in `PPLBackend.init_mip()` ?
For constraints, probably yes. For the objective function not (since you need to scale the optimal solution also).



---

archive/issue_comments_217360.json:
```json
{
    "body": "Working on a patch...",
    "created_at": "2014-08-04T19:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217360",
    "user": "@jdemeyer"
}
```

Working on a patch...



---

archive/issue_comments_217361.json:
```json
{
    "body": "This commit seems to do the job, but I still haven't fully tested it.\n----\nNew commits:",
    "created_at": "2014-08-04T21:00:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217361",
    "user": "@jdemeyer"
}
```

This commit seems to do the job, but I still haven't fully tested it.
----
New commits:



---

archive/issue_comments_217362.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-08-04T22:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217362",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_217363.json:
```json
{
    "body": "Looks good.",
    "created_at": "2014-08-05T07:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217363",
    "user": "@dimpase"
}
```

Looks good.



---

archive/issue_comments_217364.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-08-05T07:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217364",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_217365.json:
```json
{
    "body": "reviewer name",
    "created_at": "2014-08-06T12:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217365",
    "user": "@vbraun"
}
```

reviewer name



---

archive/issue_comments_217366.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-08-06T12:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217366",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_217367.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2014-08-06T12:14:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217367",
    "user": "@dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_217368.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-11T12:07:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16518",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16518#issuecomment-217368",
    "user": "@vbraun"
}
```

Resolution: fixed
