# Issue 16518: PPL LP solver does not accept rationals

Issue created by migration from https://trac.sagemath.org/ticket/16755

Original creator: jdemeyer

Original creation time: 2014-08-04 13:01:39

CC:  dimpase vbraun

Given that PPL natively works with rationals, this should work:

```
sage: p = MixedIntegerLinearProgram(solver="PPL")
sage: x = p.new_variable(nonnegative=True)
sage: p.add_constraint(x[0] + x[1] <= 1/2)
sage: p.set_objective(x[0])
sage: p.solve()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-10-082b726ace8d> in <module>()
----> 1 p.solve()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/mip.so in sage.numerical.mip.MixedIntegerLinearProgram.solve (build/cythonized/sage/numerical/mip.c:10574)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/backends/ppl_backend.so in sage.numerical.backends.ppl_backend.PPLBackend.solve (build/cythonized/sage/numerical/backends/ppl_backend.c:5346)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/numerical/backends/ppl_backend.so in sage.numerical.backends.ppl_backend.PPLBackend.init_mip (build/cythonized/sage/numerical/backends/ppl_backend.c:2284)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl.Linear_Expression.__richcmp__ (build/cythonized/sage/libs/ppl.cpp:17640)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl._make_Constraint_from_richcmp (build/cythonized/sage/libs/ppl.cpp:23124)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/libs/ppl.so in sage.libs.ppl.Linear_Expression.__cinit__ (build/cythonized/sage/libs/ppl.cpp:15675)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/integer.so in sage.rings.integer.Integer.__init__ (build/cythonized/sage/rings/integer.c:7650)()

/usr/local/src/sage-config/local/lib/python2.7/site-packages/sage/rings/rational.so in sage.rings.rational.Rational._integer_ (build/cythonized/sage/rings/rational.c:20851)()

TypeError: no conversion of this rational to integer
```



---

Comment by dimpase created at 2014-08-04 15:30:22

Can't this be taken care of entirely in `PPLBackend.init_mip()` ?


---

Comment by jdemeyer created at 2014-08-04 15:33:12

Replying to [comment:5 dimpase]:
> Can't this be taken care of entirely in `PPLBackend.init_mip()` ?
For constraints, probably yes. For the objective function not (since you need to scale the optimal solution also).


---

Comment by jdemeyer created at 2014-08-04 19:49:53

Working on a patch...


---

Comment by jdemeyer created at 2014-08-04 21:00:58

This commit seems to do the job, but I still haven't fully tested it.
----
New commits:


---

Comment by jdemeyer created at 2014-08-04 22:31:00

Changing status from new to needs_review.


---

Comment by dimpase created at 2014-08-05 07:41:19

Looks good.


---

Comment by dimpase created at 2014-08-05 07:41:19

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-08-06 12:08:50

reviewer name


---

Comment by vbraun created at 2014-08-06 12:08:50

Changing status from positive_review to needs_work.


---

Comment by dimpase created at 2014-08-06 12:14:38

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2014-08-11 12:07:42

Resolution: fixed
