# Issue 19693: A proper class for Hamming codes

Issue created by migration from https://trac.sagemath.org/ticket/19930

Original creator: dlucas

Original creation time: 2016-01-21 09:53:42

CC:  wdj ppurka cpernet

`codes.HammingCode` is not a constructor for a class, but a method which builds a generic linear code.

This ticket proposes a class implementation of Hamming codes, using the API introduced in #18099 which properly sets Hamming codes as a class. It also comes with a new generic encoder for codes built from a parity check matrix.


---

Comment by dlucas created at 2016-01-21 10:00:35

I pushed the patch, this is now open for review.

Alongside with the new classes, I also made the (very small) following changes:

- an `isinstance` test in `codecan/autgroup_can_label.pyx` was based on the old API and thus was only working with instances of class `LinearCode`. I changed it so it works now with any linear code, specific code families included.

- the method `__cmp__` in `AbstractLinearCode` was quite useless (imho), so I removed it.

David 
----
New commits:


---

Comment by dlucas created at 2016-01-21 10:00:35

Changing status from new to needs_review.


---

Comment by git created at 2016-01-21 13:06:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-01-27 15:28:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dlucas created at 2016-01-27 15:30:30

I updated this ticket to latest beta.
I also added a note on `parity_check_matrix` method which points to some references on how to build Hamming codes over anything else than a binary field, as this is definitely non-standard. 

Also note that with this ticket, the implementation of `codes.LinearCodeFromCheckMatrix` can be improved so it does not rely on the dual code but on the encoder introduced here (which saves computation at construction time). See follow-up ticket #19975 for this issue.
----
New commits:


---

Comment by git created at 2016-02-01 10:02:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-02-17 10:34:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dlucas created at 2016-02-17 10:35:27

I updated to latest beta and fixed merge conflicts. This is still open for review.


---

Comment by git created at 2016-02-17 15:38:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-03-01 13:53:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dlucas created at 2016-03-01 13:53:57

I updated to latest beta and fixed merge conflict. This is still open for review.


---

Comment by cpernet created at 2016-03-17 18:33:17

When comparing 2 Hamming codes in docstrings, you replaced the code comparaison by a comparison on the echelon form of their respective generating matrices.

I suggest to avoid calling directly echelon_form method, and rather compare their systematic generator matrices (which is equivalent but seems clearer).

```
C1.generator_matrix_systematic()==C2.generator_matrix_systematic()
```



---

Comment by cpernet created at 2016-03-18 09:17:37

lines 156 to 161 of hamming_code.py: this code seems very odd to me. I do not see what you are trying to do here.
- the two branches of the if then else block are identical.
- The series of swaps being performed result in a cyclic rotation of the first m/2 rows and the last one. Is this really what is intended?

If, as I presume, you're trying to simply flip the order of the rows, then, try something like

```
H = H[::-1,:]
```



---

Comment by cpernet created at 2016-03-18 09:30:27

The rest of the modifications are ok to me. So once these 2 issues have been addressed, I'll be happy to give a positive review.


---

Comment by git created at 2016-03-18 12:53:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dlucas created at 2016-03-18 12:55:01

Hello,

I made the changes.

I also removed a test from `AbstractLinearCode`'s `__eq__` which was comparing the matrices of two codes. As it was not testing `__eq__` for codes at all, I simply deleted it.

David


---

Comment by cpernet created at 2016-03-18 14:08:50

Changing status from needs_review to positive_review.


---

Comment by cpernet created at 2016-03-18 14:08:50

All good. Positive review.


---

Comment by vbraun created at 2016-03-20 23:41:40

Resolution: fixed
