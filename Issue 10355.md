# Issue 10355: bipartite graph doesn't label a vertex when showing it

Issue created by migration from https://trac.sagemath.org/ticket/10356

Original creator: jason

Original creation time: 2010-11-30 23:46:19

Assignee: jason, ncohen, rlm

In Sage 4.6, I see 


```
sage: a=BipartiteGraph(matrix(2,2,[1,0,1,0]))
sage: a.show()
```


gives a graph where vertex "1" is not labeled (see attached picture).


---

Attachment

It looks like there's a bigger problem here:


```
sage: a=BipartiteGraph(matrix(2,2,[1,0,1,0]))
sage: a
Bipartite graph on 3 vertices
sage: a.vertices()
[0, 2, 3]
```


It can't be a coincidence that the missing vertex in a.vertices() is also the vertex missing a label. Of course, this may raise the question of why the fourth vertex is being drawn in the first place; however, I don't know enough about how graphs are drawn to be certain of that.


---

Comment by gbe created at 2011-02-07 20:41:35

The problem seems to be that the reduced adjacency matrix code does the following:


```
else:
    for ii in range(ncols):
        for jj in range(nrows):
            if arg1[jj][ii] != 0:
                self.add_edge((ii, jj + ncols))
```


This is fine if the graph is has no isolated vertices. However, any graphs with isolated vertices will cause the similar problems:


```
sage: n = matrix(4,4,[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0])
[1 1 1 1]
[0 0 0 0]
[0 0 0 0]
[0 0 0 0]
sage: g = BipartiteGraph(n)
sage: g
Bipartite graph on 5 vertices
sage: g.left, g.right
(set([0, 1, 2, 3]), set([4, 5, 6, 7]))
```



---

Attachment

It looks to me like gbe did all the hard work!  Patch attached, which simply makes sure that the vertices are directly added to the graph, instead of relying on the side effect of adding an edge to the vertex.  This fixes the label problem too.


---

Comment by dsm created at 2011-04-16 15:09:01

Changing status from new to needs_review.


---

Comment by ncohen created at 2011-04-30 17:42:32

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2011-04-30 17:42:32

To the point. And good to go ! `:-)`

Nathann


---

Comment by jdemeyer created at 2011-05-03 12:29:33

Resolution: fixed
