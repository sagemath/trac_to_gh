# Issue 28665: speed up StandardPermutations_descents.cardinality

archive/issues_028428.json:
```json
{
    "body": "With this branch we can compute the number of permutations with given descent set for reasonably large permutations.  For example:\n\n```\nsage: n=100; D = [i-1 for i in Subsets(n).random_element()]\nsage: %timeit Permutations(descents=(D, n+1)).cardinality()\n1000 loops, best of 3: 649 \u00b5s per loop\nsage: Permutations(descents=(D, n+1)).cardinality()\n2190852957925671201407364953586593657788568245256175940426479009196287211118092116746671003579082053466234564486668107391756183690\n```\n\n\nBranch/Commit: 42e789db76a80130f7d4e5c372117d06922efe81\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Martin Rubey\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28665\n\n",
    "closed_at": "2019-10-30T23:47:48Z",
    "created_at": "2019-10-28T15:24:48Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "speed up StandardPermutations_descents.cardinality",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28665",
    "user": "https://github.com/mantepse"
}
```
With this branch we can compute the number of permutations with given descent set for reasonably large permutations.  For example:

```
sage: n=100; D = [i-1 for i in Subsets(n).random_element()]
sage: %timeit Permutations(descents=(D, n+1)).cardinality()
1000 loops, best of 3: 649 µs per loop
sage: Permutations(descents=(D, n+1)).cardinality()
2190852957925671201407364953586593657788568245256175940426479009196287211118092116746671003579082053466234564486668107391756183690
```


Branch/Commit: 42e789db76a80130f7d4e5c372117d06922efe81

Reviewer: Frédéric Chapoton

Author: Martin Rubey

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28665





---

archive/issue_comments_556603.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mantepse/speed_up_standardpermutations_descents_cardinality\"",
    "created_at": "2019-10-28T15:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556603",
    "user": "https://github.com/mantepse"
}
```

Changing branch from "" to "u/mantepse/speed_up_standardpermutations_descents_cardinality"



---

archive/issue_comments_556604.json:
```json
{
    "body": "Changing author from \"\" to \"Martin Rubey\"",
    "created_at": "2019-10-28T15:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556604",
    "user": "https://github.com/mantepse"
}
```

Changing author from "" to "Martin Rubey"



---

archive/issue_comments_556605.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-28T15:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556605",
    "user": "https://github.com/mantepse"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_556606.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2019-10-28T15:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556606",
    "user": "https://github.com/mantepse"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_556607.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-10-28T15:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556607",
    "user": "https://github.com/mantepse"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_556608.json:
```json
{
    "body": "Changing commit from \"\" to \"16dc8067386db73a6c0319b74c1cf179b048526c\"",
    "created_at": "2019-10-28T15:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556608",
    "user": "https://github.com/mantepse"
}
```

Changing commit from "" to "16dc8067386db73a6c0319b74c1cf179b048526c"



---

archive/issue_comments_556609.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,10 @@\n+With this branch we can compute the number of permutations with given descent set for reasonably large permutations.  For example:\n \n+```\n+sage: n=100; D = [i-1 for i in Subsets(n).random_element()]\n+sage: %timeit Permutations(descents=(D, n+1)).cardinality()\n+1000 loops, best of 3: 649 \u00b5s per loop\n+sage: Permutations(descents=(D, n+1)).cardinality()\n+2190852957925671201407364953586593657788568245256175940426479009196287211118092116746671003579082053466234564486668107391756183690\n+```\n+\n``````\n",
    "created_at": "2019-10-28T16:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556609",
    "user": "https://github.com/mantepse"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,10 @@
+With this branch we can compute the number of permutations with given descent set for reasonably large permutations.  For example:
 
+```
+sage: n=100; D = [i-1 for i in Subsets(n).random_element()]
+sage: %timeit Permutations(descents=(D, n+1)).cardinality()
+1000 loops, best of 3: 649 µs per loop
+sage: Permutations(descents=(D, n+1)).cardinality()
+2190852957925671201407364953586593657788568245256175940426479009196287211118092116746671003579082053466234564486668107391756183690
+```
+
``````




---

archive/issue_comments_556610.json:
```json
{
    "body": "<a id='comment:4'></a>would you please add a reference for the algorithm ?",
    "created_at": "2019-10-29T08:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556610",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>would you please add a reference for the algorithm ?



---

archive/issue_comments_556611.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-29T09:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_556612.json:
```json
{
    "body": "Changing commit from \"16dc8067386db73a6c0319b74c1cf179b048526c\" to \"42e789db76a80130f7d4e5c372117d06922efe81\"",
    "created_at": "2019-10-29T09:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556612",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "16dc8067386db73a6c0319b74c1cf179b048526c" to "42e789db76a80130f7d4e5c372117d06922efe81"



---

archive/issue_comments_556613.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-29T12:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556613",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_556614.json:
```json
{
    "body": "<a id='comment:6'></a>ok, thanks",
    "created_at": "2019-10-29T12:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556614",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>ok, thanks



---

archive/issue_comments_556615.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-10-29T12:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556615",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_556616.json:
```json
{
    "body": "<a id='comment:8'></a>Cool!  Thank you!",
    "created_at": "2019-10-29T12:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556616",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:8'></a>Cool!  Thank you!



---

archive/issue_comments_556617.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-30T23:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556617",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_072205.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-30T23:47:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28665#event-72205"
}
```



---

archive/issue_comments_556618.json:
```json
{
    "body": "Changing branch from \"u/mantepse/speed_up_standardpermutations_descents_cardinality\" to \"42e789db76a80130f7d4e5c372117d06922efe81\"",
    "created_at": "2019-10-30T23:47:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28665",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28665#issuecomment-556618",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mantepse/speed_up_standardpermutations_descents_cardinality" to "42e789db76a80130f7d4e5c372117d06922efe81"
