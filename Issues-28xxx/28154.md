# Issue 28154: SciPy: patch for missing coding lines in some source files

archive/issues_027917.json:
```json
{
    "body": "As originally reported at https://github.com/scipy/scipy/issues/9606 there are a few .py modules in scipy that contain unicode characters in docstrings without supplying a required \"coding\" line, resulting in a `SyntaxError` when you try to compile them.\n\nNormally this is not a problem, because when you build scipy with its `setup.py` it just compiles all `.pyc` while assuming utf-8 encoding for the source files.  If you already have the `.pyc` file, then, nothing goes wrong because the `SyntaxError` only arises when the Python compiler tries to read the original source file at runtime.\n\nBut if for some reason your files' mtimes get messed up (as apparently happened to me at some point; not sure how) and the .pyc has to be regenerated then you'll get a `SyntaxError` at import time for these modules.\n\nFor now it should suffice to include the following patch:\n\nhttps://github.com/scipy/scipy/commit/4a8a35f2c27be9f209cfc6f347e7a57a4a62e693.patch\n\n**Keywords:** scipy\n\n**Branch/Commit:** [e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a](https://github.com/sagemath/sagetrac-mirror/commit/e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a)\n\n**Reviewer:** Vincent Klein\n\n**Author:** Erik Bray\n\nIssue created by migration from https://trac.sagemath.org/ticket/28154\n\n",
    "closed_at": "2019-09-02T21:40:52Z",
    "created_at": "2019-07-10T10:16:23Z",
    "labels": [
        "component: packages: standard",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "title": "SciPy: patch for missing coding lines in some source files",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/28154",
    "user": "https://github.com/embray"
}
```
As originally reported at https://github.com/scipy/scipy/issues/9606 there are a few .py modules in scipy that contain unicode characters in docstrings without supplying a required "coding" line, resulting in a `SyntaxError` when you try to compile them.

Normally this is not a problem, because when you build scipy with its `setup.py` it just compiles all `.pyc` while assuming utf-8 encoding for the source files.  If you already have the `.pyc` file, then, nothing goes wrong because the `SyntaxError` only arises when the Python compiler tries to read the original source file at runtime.

But if for some reason your files' mtimes get messed up (as apparently happened to me at some point; not sure how) and the .pyc has to be regenerated then you'll get a `SyntaxError` at import time for these modules.

For now it should suffice to include the following patch:

https://github.com/scipy/scipy/commit/4a8a35f2c27be9f209cfc6f347e7a57a4a62e693.patch

**Keywords:** scipy

**Branch/Commit:** [e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a](https://github.com/sagemath/sagetrac-mirror/commit/e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a)

**Reviewer:** Vincent Klein

**Author:** Erik Bray

Issue created by migration from https://trac.sagemath.org/ticket/28154





---

archive/issue_comments_440793.json:
```json
{
    "body": "**Author:** Erik Bray",
    "created_at": "2019-07-10T10:18:12Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440793",
    "user": "https://github.com/embray"
}
```

**Author:** Erik Bray



---

archive/issue_comments_440794.json:
```json
{
    "body": "**Commit:** [e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a](https://github.com/sagemath/sagetrac-mirror/commit/e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a)",
    "created_at": "2019-07-10T10:18:12Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440794",
    "user": "https://github.com/embray"
}
```

**Commit:** [e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a](https://github.com/sagemath/sagetrac-mirror/commit/e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a)



---

archive/issue_events_248603.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-10T10:18:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28154#event-248603"
}
```



---

archive/issue_comments_440795.json:
```json
{
    "body": "**Branch:** [u/embray/ticket-28154](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-28154)",
    "created_at": "2019-07-10T10:18:12Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440795",
    "user": "https://github.com/embray"
}
```

**Branch:** [u/embray/ticket-28154](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-28154)



---

archive/issue_comments_440796.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a\">e6ae4f7</a></td><td><code>Trac #28154: Patch scipy to including missing coding lines on some source files containing unicode.</code></td></tr></table>\n",
    "created_at": "2019-07-10T10:18:12Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440796",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a">e6ae4f7</a></td><td><code>Trac #28154: Patch scipy to including missing coding lines on some source files containing unicode.</code></td></tr></table>




---

archive/issue_comments_440797.json:
```json
{
    "body": "<a id='comment:2'></a>\nI guess a package version update is missing : `1.2.0 => 1.2.0.p0`.",
    "created_at": "2019-07-12T11:55:45Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440797",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:2'></a>
I guess a package version update is missing : `1.2.0 => 1.2.0.p0`.



---

archive/issue_comments_440798.json:
```json
{
    "body": "**Reviewer:** Vincent Klein",
    "created_at": "2019-07-12T12:13:55Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440798",
    "user": "https://github.com/vinklein"
}
```

**Reviewer:** Vincent Klein



---

archive/issue_comments_440799.json:
```json
{
    "body": "<a id='comment:3'></a>\nApart from that the patch is working and fixes the problem.",
    "created_at": "2019-07-12T12:13:55Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440799",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:3'></a>
Apart from that the patch is working and fixes the problem.



---

archive/issue_comments_440800.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis patch is really only relevant if you're installing scipy from scratch in the first place.  If it's already built this affects nothing at runtime so it's not necessary to increase the patch level and force needless reinstalls of scipy.",
    "created_at": "2019-08-29T14:11:21Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440800",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
This patch is really only relevant if you're installing scipy from scratch in the first place.  If it's already built this affects nothing at runtime so it's not necessary to increase the patch level and force needless reinstalls of scipy.



---

archive/issue_events_248604.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-08-29T14:16:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28154#event-248604"
}
```



---

archive/issue_events_248605.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-08-29T14:16:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28154#event-248605"
}
```



---

archive/issue_comments_440801.json:
```json
{
    "body": "<a id='comment:5'></a>\nOk then.",
    "created_at": "2019-08-29T14:16:27Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440801",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:5'></a>
Ok then.



---

archive/issue_events_248606.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-02T21:40:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28154#event-248606"
}
```



---

archive/issue_events_248607.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "dcf58df8b58f70aac05688967ef58711d86fefd8",
    "created_at": "2019-09-02T21:40:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28154#event-248607"
}
```



---

archive/issue_comments_440802.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/ticket-28154](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-28154)\" to \"[e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a](https://github.com/sagemath/sagetrac-mirror/commit/e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a)\".",
    "created_at": "2019-09-02T21:40:52Z",
    "issue": "https://github.com/sagemath/sage/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28154#issuecomment-440802",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/ticket-28154](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-28154)" to "[e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a](https://github.com/sagemath/sagetrac-mirror/commit/e6ae4f7b909b468e23d12f2c40d3aa0ca91d8a2a)".
