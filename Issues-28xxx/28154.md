# Issue 28154: SciPy: patch for missing coding lines in some source files

archive/issues_027917.json:
```json
{
    "body": "Keywords: scipy\n\nAs originally reported at https://github.com/scipy/scipy/issues/9606 there are a few .py modules in scipy that contain unicode characters in docstrings without supplying a required \"coding\" line, resulting in a `SyntaxError` when you try to compile them.\n\nNormally this is not a problem, because when you build scipy with its `setup.py` it just compiles all `.pyc` while assuming utf-8 encoding for the source files.  If you already have the `.pyc` file, then, nothing goes wrong because the `SyntaxError` only arises when the Python compiler tries to read the original source file at runtime.\n\nBut if for some reason your files' mtimes get messed up (as apparently happened to me at some point; not sure how) and the .pyc has to be regenerated then you'll get a `SyntaxError` at import time for these modules.\n\nFor now it should suffice to include the following patch:\n\nhttps://github.com/scipy/scipy/commit/4a8a35f2c27be9f209cfc6f347e7a57a4a62e693.patch\n\nIssue created by migration from https://trac.sagemath.org/ticket/28154\n\n",
    "closed_at": "2019-09-02T21:40:52Z",
    "created_at": "2019-07-10T10:16:23Z",
    "labels": [
        "component: packages: standard",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "SciPy: patch for missing coding lines in some source files",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28154",
    "user": "https://github.com/embray"
}
```
Keywords: scipy

As originally reported at https://github.com/scipy/scipy/issues/9606 there are a few .py modules in scipy that contain unicode characters in docstrings without supplying a required "coding" line, resulting in a `SyntaxError` when you try to compile them.

Normally this is not a problem, because when you build scipy with its `setup.py` it just compiles all `.pyc` while assuming utf-8 encoding for the source files.  If you already have the `.pyc` file, then, nothing goes wrong because the `SyntaxError` only arises when the Python compiler tries to read the original source file at runtime.

But if for some reason your files' mtimes get messed up (as apparently happened to me at some point; not sure how) and the .pyc has to be regenerated then you'll get a `SyntaxError` at import time for these modules.

For now it should suffice to include the following patch:

https://github.com/scipy/scipy/commit/4a8a35f2c27be9f209cfc6f347e7a57a4a62e693.patch

Issue created by migration from https://trac.sagemath.org/ticket/28154





---

archive/issue_comments_393744.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-10T10:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28154#issuecomment-393744",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_393745.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-07-10T10:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28154#issuecomment-393745",
    "user": "https://github.com/embray"
}
```

New commits:



---

archive/issue_comments_393746.json:
```json
{
    "body": "I guess a package version update is missing : `1.2.0 => 1.2.0.p0`.",
    "created_at": "2019-07-12T11:55:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28154#issuecomment-393746",
    "user": "https://github.com/vinklein"
}
```

I guess a package version update is missing : `1.2.0 => 1.2.0.p0`.



---

archive/issue_comments_393747.json:
```json
{
    "body": "Apart from that the patch is working and fixes the problem.",
    "created_at": "2019-07-12T12:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28154#issuecomment-393747",
    "user": "https://github.com/vinklein"
}
```

Apart from that the patch is working and fixes the problem.



---

archive/issue_comments_393748.json:
```json
{
    "body": "This patch is really only relevant if you're installing scipy from scratch in the first place.  If it's already built this affects nothing at runtime so it's not necessary to increase the patch level and force needless reinstalls of scipy.",
    "created_at": "2019-08-29T14:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28154#issuecomment-393748",
    "user": "https://github.com/embray"
}
```

This patch is really only relevant if you're installing scipy from scratch in the first place.  If it's already built this affects nothing at runtime so it's not necessary to increase the patch level and force needless reinstalls of scipy.



---

archive/issue_comments_393749.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-29T14:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28154#issuecomment-393749",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_393750.json:
```json
{
    "body": "Ok then.",
    "created_at": "2019-08-29T14:16:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28154#issuecomment-393750",
    "user": "https://github.com/vinklein"
}
```

Ok then.



---

archive/issue_comments_393751.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-09-02T21:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28154#issuecomment-393751",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069915.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-02T21:40:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28154",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28154#event-69915"
}
```
