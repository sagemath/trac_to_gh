# Issue 28131: latte interface broken with Python 3

archive/issues_027894.json:
```json
{
    "assignees": [],
    "body": "\n```\n**********************************************************************\nFile \"latte.py\", line 52, in sage.interfaces.latte.count\nFailed example:\n    count(P.cdd_Hrepresentation(), cdd=True)   # optional - latte_int\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.latte.count[2]>\", line 1, in <module>\n        count(P.cdd_Hrepresentation(), cdd=True)   # optional - latte_int\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/interfaces/latte.py\", line 153, in count\n        ans, err = latte_proc.communicate(arg)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/subprocess.py\", line 939, in communicate\n        stdout, stderr = self._communicate(input, endtime, timeout)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/subprocess.py\", line 1666, in _communicate\n        input_view = memoryview(self._input)\n    TypeError: memoryview: a bytes-like object is required, not 'str'\n**********************************************************************\n```\n\nCC:  @fchapoton @mkoeppe\n\nKeywords: **py3**\n\nBranch/Commit: **[`579e9ef`](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28131_\n\n",
    "closed_at": "2019-07-11T18:54:00Z",
    "created_at": "2019-07-08T04:20:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "latte interface broken with Python 3",
    "type": "issue",
    "updated_at": "2019-07-11T18:54:00Z",
    "url": "https://github.com/sagemath/sage/issues/28131",
    "user": "https://github.com/videlec"
}
```

```
**********************************************************************
File "latte.py", line 52, in sage.interfaces.latte.count
Failed example:
    count(P.cdd_Hrepresentation(), cdd=True)   # optional - latte_int
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.latte.count[2]>", line 1, in <module>
        count(P.cdd_Hrepresentation(), cdd=True)   # optional - latte_int
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/interfaces/latte.py", line 153, in count
        ans, err = latte_proc.communicate(arg)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/subprocess.py", line 939, in communicate
        stdout, stderr = self._communicate(input, endtime, timeout)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/subprocess.py", line 1666, in _communicate
        input_view = memoryview(self._input)
    TypeError: memoryview: a bytes-like object is required, not 'str'
**********************************************************************
```

CC:  @fchapoton @mkoeppe

Keywords: **py3**

Branch/Commit: **[`579e9ef`](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)**

Reviewer: **Frédéric Chapoton**

Author: **Vincent Delecroix**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/28131_





---

archive/issue_events_385779.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-07-08T04:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385779"
}
```



---

archive/issue_events_385780.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-07-08T04:20:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385780"
}
```



---

archive/issue_events_385781.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-07-08T04:20:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385781"
}
```



---

archive/issue_events_385782.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-07-08T04:20:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385782"
}
```



---

archive/issue_events_385783.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-07-08T04:32:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385783"
}
```



---

archive/issue_comments_437734.json:
```json
{
    "body": "Branch: **[u/vdelecroix/28131](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/28131)**",
    "created_at": "2019-07-08T04:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28131#issuecomment-437734",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/28131](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/28131)**



---

archive/issue_comments_437735.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13b0e3cb46e61ec56c3271a3bce49b76ac6b8b36\"><code>13b0e3c</code></a></td><td><code>Use libgap for direct_product</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6928f6982e7a489d8e4c73c137bf052590cf4267\"><code>6928f69</code></a></td><td><code>Use libgap for character_table</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77513fee45213ebf297b59bbe7d43b4a24a6797c\"><code>77513fe</code></a></td><td><code>Some fixes to make ClassFunction work properly with libgap.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edf2a5d7c595973e87389977b9a2abeaea9454dd\"><code>edf2a5d</code></a></td><td><code>Use libgap for PermutationGroup_generic._regular_subgroup_gap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fbdbd1ae9afa5c5fd1b1caffa2c4b506b14c381\"><code>6fbdbd1</code></a></td><td><code>Use libgap for PermutationGroup_generic.molien_series</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42318a9424b9b5b9d5332610232e113219420b3a\"><code>42318a9</code></a></td><td><code>Fix minor test failure: This will now fail at trying to find a `_libgap_init_` rather than a _gap_init_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c02c2f11a2c2228851419eb1aadd32fde75a2ad4\"><code>c02c2f1</code></a></td><td><code>If the values passed to the ClassFunction constructor are already a libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc6491009070408c9ed5dde6317ee0ac229458ca\"><code>cc64910</code></a></td><td><code>Fixed slightly different output on a few tests due to PRNG differences related</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edebd67e6e2c27e188cca51a05ea091479bcb6db\"><code>edebd67</code></a></td><td><code>Merge branch 'u/embray/prototype/perm-gps-no-pexpect-gap' of trac.sagemath.org:sage into TMP10</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3\"><code>58793be</code></a></td><td><code>28131: fix latte interface for py3</code></td></tr></table>\n",
    "created_at": "2019-07-08T04:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28131#issuecomment-437735",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13b0e3cb46e61ec56c3271a3bce49b76ac6b8b36"><code>13b0e3c</code></a></td><td><code>Use libgap for direct_product</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6928f6982e7a489d8e4c73c137bf052590cf4267"><code>6928f69</code></a></td><td><code>Use libgap for character_table</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77513fee45213ebf297b59bbe7d43b4a24a6797c"><code>77513fe</code></a></td><td><code>Some fixes to make ClassFunction work properly with libgap.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edf2a5d7c595973e87389977b9a2abeaea9454dd"><code>edf2a5d</code></a></td><td><code>Use libgap for PermutationGroup_generic._regular_subgroup_gap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fbdbd1ae9afa5c5fd1b1caffa2c4b506b14c381"><code>6fbdbd1</code></a></td><td><code>Use libgap for PermutationGroup_generic.molien_series</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42318a9424b9b5b9d5332610232e113219420b3a"><code>42318a9</code></a></td><td><code>Fix minor test failure: This will now fail at trying to find a `_libgap_init_` rather than a _gap_init_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c02c2f11a2c2228851419eb1aadd32fde75a2ad4"><code>c02c2f1</code></a></td><td><code>If the values passed to the ClassFunction constructor are already a libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc6491009070408c9ed5dde6317ee0ac229458ca"><code>cc64910</code></a></td><td><code>Fixed slightly different output on a few tests due to PRNG differences related</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edebd67e6e2c27e188cca51a05ea091479bcb6db"><code>edebd67</code></a></td><td><code>Merge branch 'u/embray/prototype/perm-gps-no-pexpect-gap' of trac.sagemath.org:sage into TMP10</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3"><code>58793be</code></a></td><td><code>28131: fix latte interface for py3</code></td></tr></table>




---

archive/issue_comments_437736.json:
```json
{
    "body": "Commit: **[`58793be`](https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3)**",
    "created_at": "2019-07-08T04:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28131#issuecomment-437736",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`58793be`](https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3)**



---

archive/issue_comments_437737.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561\"><code>579e9ef</code></a></td><td><code>28131: fix latte interface for py3</code></td></tr></table>\n",
    "created_at": "2019-07-08T04:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28131#issuecomment-437737",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561"><code>579e9ef</code></a></td><td><code>28131: fix latte interface for py3</code></td></tr></table>




---

archive/issue_comments_437738.json:
```json
{
    "body": "Changed commit from **[`58793be`](https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3)** to **[`579e9ef`](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)**",
    "created_at": "2019-07-08T04:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28131#issuecomment-437738",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`58793be`](https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3)** to **[`579e9ef`](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)**



---

archive/issue_comments_437739.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nok, makes sense",
    "created_at": "2019-07-09T18:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28131#issuecomment-437739",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

ok, makes sense



---

archive/issue_comments_437740.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2019-07-09T18:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28131#issuecomment-437740",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_events_385784.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-09T18:54:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385784"
}
```



---

archive/issue_events_385785.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-07-09T18:54:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385785"
}
```



---

archive/issue_events_385786.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-11T18:54:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385786"
}
```



---

archive/issue_events_385787.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "365987b4c31a61e5033dd1a643d38bd451af5021",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-07-11T18:54:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28131#event-385787"
}
```



---

archive/issue_comments_437741.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/28131](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/28131)** to **[`579e9ef`](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)**",
    "created_at": "2019-07-11T18:54:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28131#issuecomment-437741",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/28131](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/28131)** to **[`579e9ef`](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)**
