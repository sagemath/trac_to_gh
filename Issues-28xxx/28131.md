# Issue 28131: latte interface broken with Python 3

archive/issues_027894.json:
```json
{
    "body": "\n```\n**********************************************************************\nFile \"latte.py\", line 52, in sage.interfaces.latte.count\nFailed example:\n    count(P.cdd_Hrepresentation(), cdd=True)   # optional - latte_int\nException raised:\n    Traceback (most recent call last):\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.latte.count[2]>\", line 1, in <module>\n        count(P.cdd_Hrepresentation(), cdd=True)   # optional - latte_int\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/interfaces/latte.py\", line 153, in count\n        ans, err = latte_proc.communicate(arg)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/subprocess.py\", line 939, in communicate\n        stdout, stderr = self._communicate(input, endtime, timeout)\n      File \"/opt/sage/sage-py3-gcc/local/lib/python3.7/subprocess.py\", line 1666, in _communicate\n        input_view = memoryview(self._input)\n    TypeError: memoryview: a bytes-like object is required, not 'str'\n**********************************************************************\n```\n\n**CC:**  @fchapoton @mkoeppe\n\n**Keywords:** py3\n\n**Branch/Commit:** [579e9ef6c4cc66bfcbbc0fc79d5c68153335a561](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Vincent Delecroix\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28131\n\n",
    "closed_at": "2019-07-11T18:54:00Z",
    "created_at": "2019-07-08T04:20:58Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "latte interface broken with Python 3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28131",
    "user": "https://github.com/videlec"
}
```

```
**********************************************************************
File "latte.py", line 52, in sage.interfaces.latte.count
Failed example:
    count(P.cdd_Hrepresentation(), cdd=True)   # optional - latte_int
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.latte.count[2]>", line 1, in <module>
        count(P.cdd_Hrepresentation(), cdd=True)   # optional - latte_int
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/site-packages/sage/interfaces/latte.py", line 153, in count
        ans, err = latte_proc.communicate(arg)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/subprocess.py", line 939, in communicate
        stdout, stderr = self._communicate(input, endtime, timeout)
      File "/opt/sage/sage-py3-gcc/local/lib/python3.7/subprocess.py", line 1666, in _communicate
        input_view = memoryview(self._input)
    TypeError: memoryview: a bytes-like object is required, not 'str'
**********************************************************************
```

**CC:**  @fchapoton @mkoeppe

**Keywords:** py3

**Branch/Commit:** [579e9ef6c4cc66bfcbbc0fc79d5c68153335a561](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)

**Reviewer:** Frédéric Chapoton

**Author:** Vincent Delecroix

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/28131





---

archive/issue_comments_546308.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-07-08T04:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546308",
    "user": "https://github.com/videlec"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_546309.json:
```json
{
    "body": "**Branch:** [u/vdelecroix/28131](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/28131)",
    "created_at": "2019-07-08T04:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546309",
    "user": "https://github.com/videlec"
}
```

**Branch:** [u/vdelecroix/28131](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/28131)



---

archive/issue_comments_546310.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13b0e3cb46e61ec56c3271a3bce49b76ac6b8b36\">13b0e3c</a></td><td><code>Use libgap for direct_product</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6928f6982e7a489d8e4c73c137bf052590cf4267\">6928f69</a></td><td><code>Use libgap for character_table</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77513fee45213ebf297b59bbe7d43b4a24a6797c\">77513fe</a></td><td><code>Some fixes to make ClassFunction work properly with libgap.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edf2a5d7c595973e87389977b9a2abeaea9454dd\">edf2a5d</a></td><td><code>Use libgap for PermutationGroup_generic._regular_subgroup_gap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fbdbd1ae9afa5c5fd1b1caffa2c4b506b14c381\">6fbdbd1</a></td><td><code>Use libgap for PermutationGroup_generic.molien_series</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42318a9424b9b5b9d5332610232e113219420b3a\">42318a9</a></td><td><code>Fix minor test failure: This will now fail at trying to find a _libgap_init_ rather than a _gap_init_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c02c2f11a2c2228851419eb1aadd32fde75a2ad4\">c02c2f1</a></td><td><code>If the values passed to the ClassFunction constructor are already a libgap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc6491009070408c9ed5dde6317ee0ac229458ca\">cc64910</a></td><td><code>Fixed slightly different output on a few tests due to PRNG differences related</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edebd67e6e2c27e188cca51a05ea091479bcb6db\">edebd67</a></td><td><code>Merge branch 'u/embray/prototype/perm-gps-no-pexpect-gap' of trac.sagemath.org:sage into TMP10</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3\">58793be</a></td><td><code>28131: fix latte interface for py3</code></td></tr></table>\n",
    "created_at": "2019-07-08T04:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546310",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13b0e3cb46e61ec56c3271a3bce49b76ac6b8b36">13b0e3c</a></td><td><code>Use libgap for direct_product</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6928f6982e7a489d8e4c73c137bf052590cf4267">6928f69</a></td><td><code>Use libgap for character_table</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77513fee45213ebf297b59bbe7d43b4a24a6797c">77513fe</a></td><td><code>Some fixes to make ClassFunction work properly with libgap.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edf2a5d7c595973e87389977b9a2abeaea9454dd">edf2a5d</a></td><td><code>Use libgap for PermutationGroup_generic._regular_subgroup_gap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fbdbd1ae9afa5c5fd1b1caffa2c4b506b14c381">6fbdbd1</a></td><td><code>Use libgap for PermutationGroup_generic.molien_series</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42318a9424b9b5b9d5332610232e113219420b3a">42318a9</a></td><td><code>Fix minor test failure: This will now fail at trying to find a _libgap_init_ rather than a _gap_init_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c02c2f11a2c2228851419eb1aadd32fde75a2ad4">c02c2f1</a></td><td><code>If the values passed to the ClassFunction constructor are already a libgap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc6491009070408c9ed5dde6317ee0ac229458ca">cc64910</a></td><td><code>Fixed slightly different output on a few tests due to PRNG differences related</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edebd67e6e2c27e188cca51a05ea091479bcb6db">edebd67</a></td><td><code>Merge branch 'u/embray/prototype/perm-gps-no-pexpect-gap' of trac.sagemath.org:sage into TMP10</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3">58793be</a></td><td><code>28131: fix latte interface for py3</code></td></tr></table>




---

archive/issue_comments_546311.json:
```json
{
    "body": "**Commit:** [58793bead50dc08c46af7101379944c3ade5f7e3](https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3)",
    "created_at": "2019-07-08T04:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546311",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [58793bead50dc08c46af7101379944c3ade5f7e3](https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3)



---

archive/issue_comments_546312.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561\">579e9ef</a></td><td><code>28131: fix latte interface for py3</code></td></tr></table>\n",
    "created_at": "2019-07-08T04:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546312",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561">579e9ef</a></td><td><code>28131: fix latte interface for py3</code></td></tr></table>




---

archive/issue_comments_546313.json:
```json
{
    "body": "**Changing commit** from \"[58793bead50dc08c46af7101379944c3ade5f7e3](https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3)\" to \"[579e9ef6c4cc66bfcbbc0fc79d5c68153335a561](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)\".",
    "created_at": "2019-07-08T04:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546313",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[58793bead50dc08c46af7101379944c3ade5f7e3](https://github.com/sagemath/sagetrac-mirror/commit/58793bead50dc08c46af7101379944c3ade5f7e3)" to "[579e9ef6c4cc66bfcbbc0fc79d5c68153335a561](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)".



---

archive/issue_comments_546314.json:
```json
{
    "body": "<a id='comment:4'></a>\nok, makes sense",
    "created_at": "2019-07-09T18:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546314",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
ok, makes sense



---

archive/issue_comments_546315.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2019-07-09T18:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546315",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_546316.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-07-09T18:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546316",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_079109.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-11T18:54:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28131#event-79109"
}
```



---

archive/issue_comments_546317.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/28131](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/28131)\" to \"[579e9ef6c4cc66bfcbbc0fc79d5c68153335a561](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)\".",
    "created_at": "2019-07-11T18:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546317",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vdelecroix/28131](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/28131)" to "[579e9ef6c4cc66bfcbbc0fc79d5c68153335a561](https://github.com/sagemath/sagetrac-mirror/commit/579e9ef6c4cc66bfcbbc0fc79d5c68153335a561)".



---

archive/issue_comments_546318.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2019-07-11T18:54:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28131",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28131#issuecomment-546318",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
