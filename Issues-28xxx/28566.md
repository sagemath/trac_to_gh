# Issue 28566: improve conversions between Macaulay2 and Sage

archive/issues_028329.json:
```json
{
    "body": "This ticket implements and improves conversions between Macaulay2 and Sage:\n\n\u2022 vectors/free module elements\n\n\u2022 matrices: The function `InterfaceElement._matrix_()` is implemented to allow for this syntax:\n  {{{\n  sage: A = macaulay2('matrix {{1,2},{3,4}}')\n  sage: matrix(QQ, A)\n  [1 2]\n  [3 4]\n  }}}\n  This ticket also fixes an issue where the elements are not promoted to the correct ring:\n  {{{\n  sage: R.<x,y> = QQ[]\n  sage: m = macaulay2(matrix(R, [[1, 2], [3, 4]]))\n  sage: m.ring()  # should be R\n  ZZ\n  }}}\n\n\u2022 finite fields: An issue is fixed where the generator names are not preserved:\n  {{{\n  sage: K = GF(49, 'b')\n  sage: K.gens(), macaulay2(K).gens()  # should be the same\n  ((b,), {a})\n  }}}\n\n\nCC:  @saliola @dimpase @antonleykin\n\nKeywords: macaulay2, IMA Coding Sprint\n\nBranch/Commit: 21025bd8c1b49daacee50d6a892df97dadf0f93f\n\nReviewer: Franco Saliola\n\nAuthor: Markus Wageringel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28566\n\n",
    "closed_at": "2019-10-12T22:12:30Z",
    "created_at": "2019-10-06T17:38:34Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "improve conversions between Macaulay2 and Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28566",
    "user": "https://github.com/mwageringel"
}
```
This ticket implements and improves conversions between Macaulay2 and Sage:

• vectors/free module elements

• matrices: The function `InterfaceElement._matrix_()` is implemented to allow for this syntax:
  {{{
  sage: A = macaulay2('matrix {{1,2},{3,4}}')
  sage: matrix(QQ, A)
  [1 2]
  [3 4]
  }}}
  This ticket also fixes an issue where the elements are not promoted to the correct ring:
  {{{
  sage: R.<x,y> = QQ[]
  sage: m = macaulay2(matrix(R, [[1, 2], [3, 4]]))
  sage: m.ring()  # should be R
  ZZ
  }}}

• finite fields: An issue is fixed where the generator names are not preserved:
  {{{
  sage: K = GF(49, 'b')
  sage: K.gens(), macaulay2(K).gens()  # should be the same
  ((b,), {a})
  }}}


CC:  @saliola @dimpase @antonleykin

Keywords: macaulay2, IMA Coding Sprint

Branch/Commit: 21025bd8c1b49daacee50d6a892df97dadf0f93f

Reviewer: Franco Saliola

Author: Markus Wageringel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28566





---

archive/issue_comments_554358.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2019-10-06T17:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554358",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_554359.json:
```json
{
    "body": "Changing author from \"\" to \"Markus Wageringel\"",
    "created_at": "2019-10-06T17:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554359",
    "user": "https://github.com/mwageringel"
}
```

Changing author from "" to "Markus Wageringel"



---

archive/issue_comments_554360.json:
```json
{
    "body": "Changing commit from \"\" to \"602f6eb2663bb4a3cce1da4d9f69ac5eceda8e05\"",
    "created_at": "2019-10-06T17:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554360",
    "user": "https://github.com/mwageringel"
}
```

Changing commit from "" to "602f6eb2663bb4a3cce1da4d9f69ac5eceda8e05"



---

archive/issue_comments_554361.json:
```json
{
    "body": "Changing branch from \"\" to \"public/interfaces/m2/28566\"",
    "created_at": "2019-10-06T17:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554361",
    "user": "https://github.com/mwageringel"
}
```

Changing branch from "" to "public/interfaces/m2/28566"



---

archive/issue_comments_554362.json:
```json
{
    "body": "Changing keywords from \"macaulay2\" to \"macaulay2, IMA Coding Sprint\".",
    "created_at": "2019-10-06T20:48:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554362",
    "user": "https://github.com/mwageringel"
}
```

Changing keywords from "macaulay2" to "macaulay2, IMA Coding Sprint".



---

archive/issue_comments_554363.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-06T23:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554363",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_554364.json:
```json
{
    "body": "Changing commit from \"602f6eb2663bb4a3cce1da4d9f69ac5eceda8e05\" to \"ce24186223fc5340a15d06b0a708a2f8ddb6e0f8\"",
    "created_at": "2019-10-06T23:35:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554364",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "602f6eb2663bb4a3cce1da4d9f69ac5eceda8e05" to "ce24186223fc5340a15d06b0a708a2f8ddb6e0f8"



---

archive/issue_comments_554365.json:
```json
{
    "body": "<a id='comment:4'></a>I reviewed all the changes up to this point (\u200b[602f6eb](https://git.sagemath.org/sage.git/commit?id=602f6eb2663bb4a3cce1da4d9f69ac5eceda8e05)) and have only a couple of minor suggestions for the presentation of doctests (see [ce24186](https://git.sagemath.org/sage.git/commit/?id=ce24186223fc5340a15d06b0a708a2f8ddb6e0f8)).\n\nAfter discussions, it seems that instead of using `promote` in M2, one should use the `matrix(R,v)` constructor in M2; see [matrix(R,v) documentation for M2](https://faculty.math.illinois.edu/Macaulay2/doc/Macaulay2-1.12/share/doc/Macaulay2/Macaulay2Doc/html/_matrix_lp__Ring_cm__List_rp.html).\n\nThis also applies to constructing vectors: first construct a matrix in M2 over the correct base ring and then apply the vector command `vector(Matrix)`.",
    "created_at": "2019-10-06T23:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554365",
    "user": "https://github.com/saliola"
}
```

<a id='comment:4'></a>I reviewed all the changes up to this point (​[602f6eb](https://git.sagemath.org/sage.git/commit?id=602f6eb2663bb4a3cce1da4d9f69ac5eceda8e05)) and have only a couple of minor suggestions for the presentation of doctests (see [ce24186](https://git.sagemath.org/sage.git/commit/?id=ce24186223fc5340a15d06b0a708a2f8ddb6e0f8)).

After discussions, it seems that instead of using `promote` in M2, one should use the `matrix(R,v)` constructor in M2; see [matrix(R,v) documentation for M2](https://faculty.math.illinois.edu/Macaulay2/doc/Macaulay2-1.12/share/doc/Macaulay2/Macaulay2Doc/html/_matrix_lp__Ring_cm__List_rp.html).

This also applies to constructing vectors: first construct a matrix in M2 over the correct base ring and then apply the vector command `vector(Matrix)`.



---

archive/issue_comments_554366.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-07T17:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554366",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_554367.json:
```json
{
    "body": "Changing commit from \"ce24186223fc5340a15d06b0a708a2f8ddb6e0f8\" to \"21025bd8c1b49daacee50d6a892df97dadf0f93f\"",
    "created_at": "2019-10-07T17:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554367",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ce24186223fc5340a15d06b0a708a2f8ddb6e0f8" to "21025bd8c1b49daacee50d6a892df97dadf0f93f"



---

archive/issue_comments_554368.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [saliola](#comment%3A4):\n> After discussions, it seems that instead of using `promote` in M2, one should use the `matrix(R,v)` constructor in M2; see [matrix(R,v) documentation for M2](https://faculty.math.illinois.edu/Macaulay2/doc/Macaulay2-1.12/share/doc/Macaulay2/Macaulay2Doc/html/_matrix_lp__Ring_cm__List_rp.html).\n> \n> This also applies to constructing vectors: first construct a matrix in M2 over the correct base ring and then apply the vector command `vector(Matrix)`.\n\n\nThanks, I have changed it.",
    "created_at": "2019-10-07T17:25:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554368",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:6'></a>Replying to [saliola](#comment%3A4):
> After discussions, it seems that instead of using `promote` in M2, one should use the `matrix(R,v)` constructor in M2; see [matrix(R,v) documentation for M2](https://faculty.math.illinois.edu/Macaulay2/doc/Macaulay2-1.12/share/doc/Macaulay2/Macaulay2Doc/html/_matrix_lp__Ring_cm__List_rp.html).
> 
> This also applies to constructing vectors: first construct a matrix in M2 over the correct base ring and then apply the vector command `vector(Matrix)`.


Thanks, I have changed it.



---

archive/issue_comments_554369.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-10T19:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554369",
    "user": "https://github.com/saliola"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_554370.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Franco Saliola\"",
    "created_at": "2019-10-10T19:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554370",
    "user": "https://github.com/saliola"
}
```

Changing reviewer from "" to "Franco Saliola"



---

archive/issue_comments_554371.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-10T19:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554371",
    "user": "https://github.com/saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_554372.json:
```json
{
    "body": "Changing branch from \"public/interfaces/m2/28566\" to \"21025bd8c1b49daacee50d6a892df97dadf0f93f\"",
    "created_at": "2019-10-12T22:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554372",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/interfaces/m2/28566" to "21025bd8c1b49daacee50d6a892df97dadf0f93f"



---

archive/issue_comments_554373.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-12T22:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28566#issuecomment-554373",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_071709.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-12T22:12:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28566",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28566#event-71709"
}
```
