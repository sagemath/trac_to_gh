# Issue 28015: Drop lcalc

archive/issues_027778.json:
```json
{
    "body": "Hello,\n\ntrying to package Sage for Guix, I am stumbling over the lcalc package, which needs patches to even compile with a modern C++ compiler and is unmaintained with not even the upstream source available apart from places where it is mirrored. This will need a considerable time to wade through, for probably not much gain.\n\nAs some possible solutions, I would suggest the following (in decreasing order of preference):\n- Drop lcalc and replace it by other libraries. For instance, the analytic rank of elliptic curves is already computed by several other packages. PARI has gained L-function capabilities in version 2.9, with new functionality in version 2.11, so I think it makes sense to rely on the maintained PARI implementation rather than on a defunct package. (Note also bug #24823 for using ARB.)\n- Make the package optional (which may be difficult or impossible, since it is cythonised).\n- Host the source somewhere with all patches applied to make it easily compilable; or even autotoolise it like Dima did with cliquer.\n\nAndreas\n\n\nCC:  @slel @timokau\n\nKeywords: days101, lcalc\n\nReviewer: Dave Morris\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/28015\n\n",
    "closed_at": "2021-08-26T02:08:43Z",
    "created_at": "2019-06-19T07:39:03Z",
    "labels": [
        "component: packages: standard",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Drop lcalc",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28015",
    "user": "https://trac.sagemath.org/admin/accounts/users/enge"
}
```
Hello,

trying to package Sage for Guix, I am stumbling over the lcalc package, which needs patches to even compile with a modern C++ compiler and is unmaintained with not even the upstream source available apart from places where it is mirrored. This will need a considerable time to wade through, for probably not much gain.

As some possible solutions, I would suggest the following (in decreasing order of preference):
- Drop lcalc and replace it by other libraries. For instance, the analytic rank of elliptic curves is already computed by several other packages. PARI has gained L-function capabilities in version 2.9, with new functionality in version 2.11, so I think it makes sense to rely on the maintained PARI implementation rather than on a defunct package. (Note also bug #24823 for using ARB.)
- Make the package optional (which may be difficult or impossible, since it is cythonised).
- Host the source somewhere with all patches applied to make it easily compilable; or even autotoolise it like Dima did with cliquer.

Andreas


CC:  @slel @timokau

Keywords: days101, lcalc

Reviewer: Dave Morris

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/28015





---

archive/issue_comments_536014.json:
```json
{
    "body": "<a id='comment:1'></a>\nHi Andreas,\n\nYour proposal is nothing new. And yes lcalc needs lots of patches and Dima has created a repo somewhere for it already but for some reason that bit was stopped. Replacing lcacl by pari has been proposed before and Jeroen work on it in another ticket. According to him, pari is slower so far. I'll dig the relevant tickets later.",
    "created_at": "2019-06-19T07:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536014",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:1'></a>
Hi Andreas,

Your proposal is nothing new. And yes lcalc needs lots of patches and Dima has created a repo somewhere for it already but for some reason that bit was stopped. Replacing lcacl by pari has been proposed before and Jeroen work on it in another ticket. According to him, pari is slower so far. I'll dig the relevant tickets later.



---

archive/issue_comments_536015.json:
```json
{
    "body": "<a id='comment:2'></a>\nSee #24820 and #24532 although I think there is another branch for replacing lcalc with pari somewhere.",
    "created_at": "2019-06-19T07:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536015",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:2'></a>
See #24820 and #24532 although I think there is another branch for replacing lcalc with pari somewhere.



---

archive/issue_comments_536016.json:
```json
{
    "body": "<a id='comment:3'></a>\nYes, I looked into replacing lcalc by PARI. Unfortunately, PARI doesn't have the functionality to replace lcalc: PARI is optimized for high-precision calculations at small values, while lcalc is optimized for low-precision calculations for large values.",
    "created_at": "2019-06-19T08:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536016",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
Yes, I looked into replacing lcalc by PARI. Unfortunately, PARI doesn't have the functionality to replace lcalc: PARI is optimized for high-precision calculations at small values, while lcalc is optimized for low-precision calculations for large values.



---

archive/issue_comments_536017.json:
```json
{
    "body": "<a id='comment:4'></a>\n> although I think there is another branch for replacing lcalc with pari somewhere.\n\n\nAt least my attempt is on #24532 (when I realized quickly that it wouldn't work). I don't know if anybody else has looked at this.",
    "created_at": "2019-06-19T08:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536017",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
> although I think there is another branch for replacing lcalc with pari somewhere.


At least my attempt is on #24532 (when I realized quickly that it wouldn't work). I don't know if anybody else has looked at this.



---

archive/issue_comments_536018.json:
```json
{
    "body": "<a id='comment:5'></a>\nWe should at least mirror lcalc properly with all the patches already applied. (I guess, a thing that we should do with all the packages where we are upstream\u2026) We talked to Dima and are moving the repository to gitlab into the [SageMath](SageMath) namespace.",
    "created_at": "2019-06-19T10:44:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536018",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>
We should at least mirror lcalc properly with all the patches already applied. (I guess, a thing that we should do with all the packages where we are upstream…) We talked to Dima and are moving the repository to gitlab into the [SageMath](SageMath) namespace.



---

archive/issue_comments_536019.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew home for the lcalc repo:\n\n- https://gitlab.com/sagemath/lcalc",
    "created_at": "2019-06-19T13:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536019",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>
New home for the lcalc repo:

- https://gitlab.com/sagemath/lcalc



---

archive/issue_comments_536020.json:
```json
{
    "body": "<a id='comment:7'></a>\nI still want to apply the patches that we have in [SageMath](SageMath) to it\u2026and then create a release.",
    "created_at": "2019-06-19T14:46:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536020",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>
I still want to apply the patches that we have in [SageMath](SageMath) to it…and then create a release.



---

archive/issue_comments_536021.json:
```json
{
    "body": "<a id='comment:8'></a>\n#26098 is needing review, and aims to allow using pari for L-functions",
    "created_at": "2019-06-19T18:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536021",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
#26098 is needing review, and aims to allow using pari for L-functions



---

archive/issue_comments_536022.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [chapoton](#comment%3A8):\n> #26098 is needing review, and aims to allow using pari for L-functions\n\n\nYes, but not to replace lcalc.",
    "created_at": "2019-06-19T19:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536022",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [chapoton](#comment%3A8):
> #26098 is needing review, and aims to allow using pari for L-functions


Yes, but not to replace lcalc.



---

archive/issue_comments_536023.json:
```json
{
    "body": "Changing keywords from \"\" to \"days101, lcalc\".",
    "created_at": "2019-06-19T21:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536023",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "days101, lcalc".



---

archive/issue_events_086594.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86594"
}
```



---

archive/issue_comments_536024.json:
```json
{
    "body": "<a id='comment:11'></a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536024",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>
Ticket retargeted after milestone closed



---

archive/issue_events_086595.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86595"
}
```



---

archive/issue_events_086596.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86596"
}
```



---

archive/issue_comments_536025.json:
```json
{
    "body": "<a id='comment:13'></a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536025",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_086597.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86597"
}
```



---

archive/issue_events_086598.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86598"
}
```



---

archive/issue_events_086599.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86599"
}
```



---

archive/issue_events_086600.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86600"
}
```



---

archive/issue_comments_536026.json:
```json
{
    "body": "<a id='comment:15'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536026",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_536027.json:
```json
{
    "body": "<a id='comment:16'></a>\nI've just tagged an lcalc-2.0.0 release in the Gitlab repo, with an upgrade ticket at #32037. The code is still a little crazy, but the build system and repo are now in a much better state. It should be easy to package from now on.",
    "created_at": "2021-06-23T03:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536027",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:16'></a>
I've just tagged an lcalc-2.0.0 release in the Gitlab repo, with an upgrade ticket at #32037. The code is still a little crazy, but the build system and repo are now in a much better state. It should be easy to package from now on.



---

archive/issue_comments_536028.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-23T03:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536028",
    "user": "https://github.com/orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_events_086601.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-06-23T03:17:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86601"
}
```



---

archive/issue_events_086602.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-06-23T03:17:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86602"
}
```



---

archive/issue_comments_536029.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-02T01:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536029",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_536030.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dave Morris\"",
    "created_at": "2021-08-02T01:03:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536030",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing reviewer from "" to "Dave Morris"



---

archive/issue_comments_536031.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-08-26T02:08:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28015#issuecomment-536031",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid



---

archive/issue_events_086603.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-26T02:08:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28015",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28015#event-86603"
}
```
