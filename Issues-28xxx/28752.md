# Issue 28752: Meta-ticket: Make sagelib pip-installable in a conda environment

archive/issues_028515.json:
```json
{
    "body": "The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.\n\nIn Sage 9.2, this already works after `./configure`.\n\nTickets merged in Sage 9.2 or earlier:\n\n* #21559: Move sage-the-distribution scripts from src/bin to build/bin\n* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n\nAdditional steps for Sage 9.3:\n\n* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)\n* #30845 GH Actions: Add test for conda without SPKG\n* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional\n* #21707: Meta-ticket: Split `sage-env` into 5 to clean up sage configuration\n\nOptional steps:\n* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)\n* #21573: Make sure src/setup.py respects --install-base and --root\n* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory\n* #21678: Testsuite for `src/setup.py`\n* #22655: Support `package_data`-like of non-Python resource files in Python packages\n* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`\n\n(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)\n\nCC:  @isuruf @saraedum @dimpase @embray @timokau @tscrim\n\nKeywords: conda, sd111\n\nStatus: new\n\nDependencies: #28745\n\nIssue created by migration from https://trac.sagemath.org/ticket/28752\n\n",
    "created_at": "2019-11-17T21:35:40Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Meta-ticket: Make sagelib pip-installable in a conda environment",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28752",
    "user": "https://github.com/mkoeppe"
}
```
The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.

In Sage 9.2, this already works after `./configure`.

Tickets merged in Sage 9.2 or earlier:

* #21559: Move sage-the-distribution scripts from src/bin to build/bin
* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`

Additional steps for Sage 9.3:

* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)
* #30845 GH Actions: Add test for conda without SPKG
* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional
* #21707: Meta-ticket: Split `sage-env` into 5 to clean up sage configuration

Optional steps:
* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)
* #21573: Make sure src/setup.py respects --install-base and --root
* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory
* #21678: Testsuite for `src/setup.py`
* #22655: Support `package_data`-like of non-Python resource files in Python packages
* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`

(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)

CC:  @isuruf @saraedum @dimpase @embray @timokau @tscrim

Keywords: conda, sd111

Status: new

Dependencies: #28745

Issue created by migration from https://trac.sagemath.org/ticket/28752





---

archive/issue_comments_558193.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,7 @@\n * Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is different from `SAGEROOT/environment.yml` introduced in #28745)\n * #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n * #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n+* #25828: Move `OptionalExtension` to `features\n \n Optional steps:\n * #21559: Move sage-the-distribution scripts from src/bin to build/bin\n``````\n",
    "created_at": "2019-11-23T19:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558193",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,7 @@
 * Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is different from `SAGEROOT/environment.yml` introduced in #28745)
 * #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
 * #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`
+* #25828: Move `OptionalExtension` to `features
 
 Optional steps:
 * #21559: Move sage-the-distribution scripts from src/bin to build/bin
``````




---

archive/issue_events_072536.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72536"
}
```



---

archive/issue_comments_558194.json:
```json
{
    "body": "<a id='comment:2'></a>Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558194",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>Ticket retargeted after milestone closed



---

archive/issue_comments_558195.json:
```json
{
    "body": "Changing keywords from \"\" to \"Anaconda\".",
    "created_at": "2020-01-13T18:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558195",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "Anaconda".



---

archive/issue_comments_558196.json:
```json
{
    "body": "Changing keywords from \"Anaconda\" to \"Anaconda, conda\".",
    "created_at": "2020-01-13T18:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558196",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "Anaconda" to "Anaconda, conda".



---

archive/issue_comments_558197.json:
```json
{
    "body": "Changing keywords from \"Anaconda, conda\" to \"conda\".",
    "created_at": "2020-01-13T18:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558197",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "Anaconda, conda" to "conda".



---

archive/issue_events_072537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:08:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72537"
}
```



---

archive/issue_events_072538.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:08:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72538"
}
```



---

archive/issue_comments_558198.json:
```json
{
    "body": "<a id='comment:7'></a>This might work already with the pip-installable tarball generated by `./sage -sh -c build/pkgs/sagelib/spkg-src` in #29950",
    "created_at": "2020-06-28T23:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558198",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>This might work already with the pip-installable tarball generated by `./sage -sh -c build/pkgs/sagelib/spkg-src` in #29950



---

archive/issue_events_072539.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72539"
}
```



---

archive/issue_events_072540.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72540"
}
```



---

archive/issue_comments_558199.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,22 @@\n+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.\n \n+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)\n+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n+* #25828: Move `OptionalExtension` to `features\n+\n+Optional steps:\n+* #21559: Move sage-the-distribution scripts from src/bin to build/bin\n+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)\n+* #21573: Make sure src/setup.py respects --install-base and --root\n+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory\n+* #21678: Testsuite for `src/setup.py`\n+* #21707: Split `sage-env` into `sage-build-env` and `sage-env`\n+* #22655: Support `package_data`-like of non-Python resource files in Python packages\n+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`\n+* #21516: Fix sagelib sdist (src/setup.py sdist)\n+\n+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)\n \n Dependencies: #28745\n \n``````\n",
    "created_at": "2020-10-30T23:24:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558199",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,22 @@
+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.
 
+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)
+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`
+* #25828: Move `OptionalExtension` to `features
+
+Optional steps:
+* #21559: Move sage-the-distribution scripts from src/bin to build/bin
+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)
+* #21573: Make sure src/setup.py respects --install-base and --root
+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory
+* #21678: Testsuite for `src/setup.py`
+* #21707: Split `sage-env` into `sage-build-env` and `sage-env`
+* #22655: Support `package_data`-like of non-Python resource files in Python packages
+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`
+* #21516: Fix sagelib sdist (src/setup.py sdist)
+
+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)
 
 Dependencies: #28745
 
``````




---

archive/issue_comments_558200.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,24 @@\n+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.\n \n+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)\n+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n+* #29850 needs_work enhancement\n+Install sage-env-config as part of sage_conf; make sage-env-config optional\n+\n+Optional steps:\n+* #25828: Move `OptionalExtension` to `features\n+* #21559: Move sage-the-distribution scripts from src/bin to build/bin\n+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)\n+* #21573: Make sure src/setup.py respects --install-base and --root\n+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory\n+* #21678: Testsuite for `src/setup.py`\n+* #21707: Split `sage-env` into `sage-build-env` and `sage-env`\n+* #22655: Support `package_data`-like of non-Python resource files in Python packages\n+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`\n+* #21516: Fix sagelib sdist (src/setup.py sdist)\n+\n+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)\n \n Dependencies: #28745\n \n``````\n",
    "created_at": "2020-10-30T23:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558200",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,24 @@
+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.
 
+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)
+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`
+* #29850 needs_work enhancement
+Install sage-env-config as part of sage_conf; make sage-env-config optional
+
+Optional steps:
+* #25828: Move `OptionalExtension` to `features
+* #21559: Move sage-the-distribution scripts from src/bin to build/bin
+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)
+* #21573: Make sure src/setup.py respects --install-base and --root
+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory
+* #21678: Testsuite for `src/setup.py`
+* #21707: Split `sage-env` into `sage-build-env` and `sage-env`
+* #22655: Support `package_data`-like of non-Python resource files in Python packages
+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`
+* #21516: Fix sagelib sdist (src/setup.py sdist)
+
+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)
 
 Dependencies: #28745
 
``````




---

archive/issue_comments_558201.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.\n \n+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)\n+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional\n+\n+Optional steps:\n+* #25828: Move `OptionalExtension` to `features\n+* #21559: Move sage-the-distribution scripts from src/bin to build/bin\n+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)\n+* #21573: Make sure src/setup.py respects --install-base and --root\n+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory\n+* #21678: Testsuite for `src/setup.py`\n+* #21707: Split `sage-env` into `sage-build-env` and `sage-env`\n+* #22655: Support `package_data`-like of non-Python resource files in Python packages\n+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`\n+* #21516: Fix sagelib sdist (src/setup.py sdist)\n+\n+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)\n \n Dependencies: #28745\n \n``````\n",
    "created_at": "2020-10-30T23:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558201",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,23 @@
+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.
 
+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)
+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`
+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional
+
+Optional steps:
+* #25828: Move `OptionalExtension` to `features
+* #21559: Move sage-the-distribution scripts from src/bin to build/bin
+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)
+* #21573: Make sure src/setup.py respects --install-base and --root
+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory
+* #21678: Testsuite for `src/setup.py`
+* #21707: Split `sage-env` into `sage-build-env` and `sage-env`
+* #22655: Support `package_data`-like of non-Python resource files in Python packages
+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`
+* #21516: Fix sagelib sdist (src/setup.py sdist)
+
+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)
 
 Dependencies: #28745
 
``````




---

archive/issue_comments_558202.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.\n \n+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)\n+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional\n+\n+Optional steps:\n+* #25828: Move `OptionalExtension` to `features\n+* #21559: Move sage-the-distribution scripts from src/bin to build/bin\n+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)\n+* #21573: Make sure src/setup.py respects --install-base and --root\n+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory\n+* #21678: Testsuite for `src/setup.py`\n+* #21707: Split `sage-env` into `sage-build-env` and `sage-env`\n+* #22655: Support `package_data`-like of non-Python resource files in Python packages\n+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`\n+* #21516: Fix sagelib sdist (src/setup.py sdist)\n+\n+(see also earlier meta ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)\n \n Dependencies: #28745\n \n``````\n",
    "created_at": "2020-11-01T16:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558202",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,23 @@
+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.
 
+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)
+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`
+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional
+
+Optional steps:
+* #25828: Move `OptionalExtension` to `features
+* #21559: Move sage-the-distribution scripts from src/bin to build/bin
+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)
+* #21573: Make sure src/setup.py respects --install-base and --root
+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory
+* #21678: Testsuite for `src/setup.py`
+* #21707: Split `sage-env` into `sage-build-env` and `sage-env`
+* #22655: Support `package_data`-like of non-Python resource files in Python packages
+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`
+* #21516: Fix sagelib sdist (src/setup.py sdist)
+
+(see also earlier meta ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)
 
 Dependencies: #28745
 
``````




---

archive/issue_comments_558203.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,29 @@\n+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.\n \n+In Sage 9.2, this already works after `./configure`.\n+\n+Tickets merged in Sage 9.2 or earlier:\n+\n+* #21559: Move sage-the-distribution scripts from src/bin to build/bin\n+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n+\n+Additional steps for Sage 9.3:\n+\n+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)\n+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional\n+* #21707: Meta-ticket: Split `sage-env` into 5 to clean up sage configuration\n+\n+Optional steps:\n+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)\n+* #21573: Make sure src/setup.py respects --install-base and --root\n+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory\n+* #21678: Testsuite for `src/setup.py`\n+* #22655: Support `package_data`-like of non-Python resource files in Python packages\n+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`\n+* #21516: Fix sagelib sdist (src/setup.py sdist)\n+\n+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)\n \n Dependencies: #28745\n \n``````\n",
    "created_at": "2020-11-01T16:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558203",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,29 @@
+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.
 
+In Sage 9.2, this already works after `./configure`.
+
+Tickets merged in Sage 9.2 or earlier:
+
+* #21559: Move sage-the-distribution scripts from src/bin to build/bin
+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`
+
+Additional steps for Sage 9.3:
+
+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)
+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional
+* #21707: Meta-ticket: Split `sage-env` into 5 to clean up sage configuration
+
+Optional steps:
+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)
+* #21573: Make sure src/setup.py respects --install-base and --root
+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory
+* #21678: Testsuite for `src/setup.py`
+* #22655: Support `package_data`-like of non-Python resource files in Python packages
+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`
+* #21516: Fix sagelib sdist (src/setup.py sdist)
+
+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)
 
 Dependencies: #28745
 
``````




---

archive/issue_comments_558204.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,28 @@\n+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.\n \n+In Sage 9.2, this already works after `./configure`.\n+\n+Tickets merged in Sage 9.2 or earlier:\n+\n+* #21559: Move sage-the-distribution scripts from src/bin to build/bin\n+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n+\n+Additional steps for Sage 9.3:\n+\n+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)\n+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional\n+* #21707: Meta-ticket: Split `sage-env` into 5 to clean up sage configuration\n+\n+Optional steps:\n+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)\n+* #21573: Make sure src/setup.py respects --install-base and --root\n+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory\n+* #21678: Testsuite for `src/setup.py`\n+* #22655: Support `package_data`-like of non-Python resource files in Python packages\n+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`\n+\n+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)\n \n Dependencies: #28745\n \n``````\n",
    "created_at": "2020-11-01T16:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558204",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,28 @@
+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.
 
+In Sage 9.2, this already works after `./configure`.
+
+Tickets merged in Sage 9.2 or earlier:
+
+* #21559: Move sage-the-distribution scripts from src/bin to build/bin
+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`
+
+Additional steps for Sage 9.3:
+
+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)
+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional
+* #21707: Meta-ticket: Split `sage-env` into 5 to clean up sage configuration
+
+Optional steps:
+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)
+* #21573: Make sure src/setup.py respects --install-base and --root
+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory
+* #21678: Testsuite for `src/setup.py`
+* #22655: Support `package_data`-like of non-Python resource files in Python packages
+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`
+
+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)
 
 Dependencies: #28745
 
``````




---

archive/issue_comments_558205.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,29 @@\n+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.\n \n+In Sage 9.2, this already works after `./configure`.\n+\n+Tickets merged in Sage 9.2 or earlier:\n+\n+* #21559: Move sage-the-distribution scripts from src/bin to build/bin\n+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)\n+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`\n+\n+Additional steps for Sage 9.3:\n+\n+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)\n+* #30845 GH Actions: Add test for conda without SPKG\n+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional\n+* #21707: Meta-ticket: Split `sage-env` into 5 to clean up sage configuration\n+\n+Optional steps:\n+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)\n+* #21573: Make sure src/setup.py respects --install-base and --root\n+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory\n+* #21678: Testsuite for `src/setup.py`\n+* #22655: Support `package_data`-like of non-Python resource files in Python packages\n+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`\n+\n+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)\n \n Dependencies: #28745\n \n``````\n",
    "created_at": "2020-11-01T18:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558205",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,29 @@
+The goal of this ticket is to make sagelib (i.e., subdirectory `SAGEROOT/src`) pip-installable when all required packages are provided by the conda distribution -- just through `SAGEROOT/src/setup.py` and completely bypassing all sage-the-distribution scripts (top-level `SAGEROOT/Makefile` and `SAGEROOT/build`.
 
+In Sage 9.2, this already works after `./configure`.
+
+Tickets merged in Sage 9.2 or earlier:
+
+* #21559: Move sage-the-distribution scripts from src/bin to build/bin
+* #21569: Install `src/bin/*` scripts via `setup.py` (`scripts`, `console_scripts`)
+* #21785: Installation of `SAGE_SRC/ext/` in `SAGE_LOCAL/share/sage/ext/` should be done by `setup.py`, not `build/make/Makefile`
+
+Additional steps for Sage 9.3:
+
+* #28745: Add `SAGEROOT/src/environment.yml` - describes all conda packages needed for installing sagelib for doing sagelib development (this is a superset of `SAGEROOT/environment.yml`, also introduced in #28745)
+* #30845 GH Actions: Add test for conda without SPKG
+* #29850 Install `sage-env-config` as part of `sage_conf`; make `sage-env-config` optional
+* #21707: Meta-ticket: Split `sage-env` into 5 to clean up sage configuration
+
+Optional steps:
+* #21570: Move non-scripts of `src/bin/` elsewhere (and also move their install location)
+* #21573: Make sure src/setup.py respects --install-base and --root
+* #21654: `src/setup.py`: Disentangle cleaning of stale installed files in build directory and in install directory
+* #21678: Testsuite for `src/setup.py`
+* #22655: Support `package_data`-like of non-Python resource files in Python packages
+* #23747: Rename `SAGE_ROOT/build` to `SAGE_ROOT/sage-distro`, `SAGE_ROOT/src` to `SAGE_ROOT/sagelib`
+
+(see also earlier task ticket #21507: Make sagelib a pip-installable Python source package, listed on PyPI.)
 
 Dependencies: #28745
 
``````




---

archive/issue_comments_558206.json:
```json
{
    "body": "Changing keywords from \"conda\" to \"conda, sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558206",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "conda" to "conda, sd111".



---

archive/issue_comments_558207.json:
```json
{
    "body": "<a id='comment:16'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28752#issuecomment-558207",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_events_072541.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T02:16:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72541"
}
```



---

archive/issue_events_072542.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T02:16:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72542"
}
```



---

archive/issue_events_072543.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72543"
}
```



---

archive/issue_events_072544.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72544"
}
```



---

archive/issue_events_072545.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72545"
}
```



---

archive/issue_events_072546.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-27T01:03:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72546"
}
```



---

archive/issue_events_072547.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72547"
}
```



---

archive/issue_events_072548.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72548"
}
```



---

archive/issue_events_072549.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72549"
}
```



---

archive/issue_events_072550.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28752",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28752#event-72550"
}
```
