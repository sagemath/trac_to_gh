# Issue 28155: Check for formality of GCDA's

archive/issues_027918.json:
```json
{
    "assignees": [],
    "body": "Implement criteria to determine if a graded commutative differential algebra is formal or not.\n\nWhile I was at it, I also added some auxiliary functions that might be useful, forced it to use a more reasonable ordering when listing the basis of a homogenous part, and cleaned the style a little bit.\n\nThe algorithm used is described in https://arxiv.org/abs/1909.07761\n\nCC:  @jhpalmieri @slel @dimpase @tscrim\n\nBranch: **[`e95c78a`](https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48)**\n\nReviewer: **Travis Scrimshaw, John Palmieri**\n\nAuthor: **Miguel Marco, Victor Manero**\n\nComponent: **algebraic topology**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28155_\n\n",
    "closed_at": "2019-10-21T22:43:55Z",
    "created_at": "2019-07-10T12:33:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20topology",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Check for formality of GCDA's",
    "type": "issue",
    "updated_at": "2022-09-24T18:53:56Z",
    "url": "https://github.com/sagemath/sage/issues/28155",
    "user": "https://github.com/miguelmarco"
}
```
Implement criteria to determine if a graded commutative differential algebra is formal or not.

While I was at it, I also added some auxiliary functions that might be useful, forced it to use a more reasonable ordering when listing the basis of a homogenous part, and cleaned the style a little bit.

The algorithm used is described in https://arxiv.org/abs/1909.07761

CC:  @jhpalmieri @slel @dimpase @tscrim

Branch: **[`e95c78a`](https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48)**

Reviewer: **Travis Scrimshaw, John Palmieri**

Author: **Miguel Marco, Victor Manero**

Component: **algebraic topology**

_Issue created by migration from https://trac.sagemath.org/ticket/28155_





---

archive/issue_events_383131.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-07-10T12:33:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383131"
}
```



---

archive/issue_events_383132.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-07-10T12:33:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383132"
}
```



---

archive/issue_comments_438011.json:
```json
{
    "body": "Branch: **[u/mmarco/check_for_formality_of_gcda_s](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/check_for_formality_of_gcda_s)**",
    "created_at": "2019-07-10T12:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438011",
    "user": "https://github.com/miguelmarco"
}
```

Branch: **[u/mmarco/check_for_formality_of_gcda_s](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/check_for_formality_of_gcda_s)**



---

archive/issue_comments_438012.json:
```json
{
    "body": "Commit: **[`77e2d7e`](https://github.com/sagemath/sagetrac-mirror/commit/77e2d7e0d97223271feab1162dc5ea9f5564719a)**",
    "created_at": "2019-07-10T12:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438012",
    "user": "https://github.com/miguelmarco"
}
```

Commit: **[`77e2d7e`](https://github.com/sagemath/sagetrac-mirror/commit/77e2d7e0d97223271feab1162dc5ea9f5564719a)**



---

archive/issue_comments_438013.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+Implement criteria to determine if a graded commutative differential algebra is formal or not.\n \n+While I was at it, I also added some auxiliary functions that might be useful, forced it to use a more reasonable ordering when listing the basis of a homogenous part, and cleaned the style a little bit.\n``````\n",
    "created_at": "2019-07-10T12:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438013",
    "user": "https://github.com/miguelmarco"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+Implement criteria to determine if a graded commutative differential algebra is formal or not.
 
+While I was at it, I also added some auxiliary functions that might be useful, forced it to use a more reasonable ordering when listing the basis of a homogenous part, and cleaned the style a little bit.
``````




---

archive/issue_comments_438014.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d78783301827e7f50a64a78494f331bd4c0dcb9\"><code>3d78783</code></a></td><td><code>Force ordered degrees, and fix lexicographic order in the basis</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfadaf43b365862a013a9ad0ef87033b7d13f075\"><code>cfadaf4</code></a></td><td><code>Fix indentation error in doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a255b3ed79f23b143057824e6da732e9414d68f\"><code>4a255b3</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into formalidad</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01de64159faafc9bab4dd6175d29965b1fc79d23\"><code>01de641</code></a></td><td><code>Implemented numerical invariants and formality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d3f89cf91711d4551e1ec42d30fdee4db0372d0\"><code>4d3f89c</code></a></td><td><code>Auxiliar functions for cohomology class, and style fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77e2d7e0d97223271feab1162dc5ea9f5564719a\"><code>77e2d7e</code></a></td><td><code>Merge branch 'formalidad' into t/28155/check_for_formality_of_gcda_s</code></td></tr></table>\n",
    "created_at": "2019-07-10T12:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438014",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d78783301827e7f50a64a78494f331bd4c0dcb9"><code>3d78783</code></a></td><td><code>Force ordered degrees, and fix lexicographic order in the basis</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfadaf43b365862a013a9ad0ef87033b7d13f075"><code>cfadaf4</code></a></td><td><code>Fix indentation error in doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a255b3ed79f23b143057824e6da732e9414d68f"><code>4a255b3</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into formalidad</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01de64159faafc9bab4dd6175d29965b1fc79d23"><code>01de641</code></a></td><td><code>Implemented numerical invariants and formality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d3f89cf91711d4551e1ec42d30fdee4db0372d0"><code>4d3f89c</code></a></td><td><code>Auxiliar functions for cohomology class, and style fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77e2d7e0d97223271feab1162dc5ea9f5564719a"><code>77e2d7e</code></a></td><td><code>Merge branch 'formalidad' into t/28155/check_for_formality_of_gcda_s</code></td></tr></table>




---

archive/issue_events_383133.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-07-10T12:41:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383133"
}
```



---

archive/issue_events_383134.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-07-10T12:41:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383134"
}
```



---

archive/issue_events_383135.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-07-17T10:55:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383135"
}
```



---

archive/issue_events_383136.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-07-17T10:55:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383136"
}
```



---

archive/issue_comments_438015.json:
```json
{
    "body": "Changed commit from **[`77e2d7e`](https://github.com/sagemath/sagetrac-mirror/commit/77e2d7e0d97223271feab1162dc5ea9f5564719a)** to **[`d16974d`](https://github.com/sagemath/sagetrac-mirror/commit/d16974d85a1e7e8d74b70b2e5ff596dc10dd7d2c)**",
    "created_at": "2019-07-23T12:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438015",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`77e2d7e`](https://github.com/sagemath/sagetrac-mirror/commit/77e2d7e0d97223271feab1162dc5ea9f5564719a)** to **[`d16974d`](https://github.com/sagemath/sagetrac-mirror/commit/d16974d85a1e7e8d74b70b2e5ff596dc10dd7d2c)**



---

archive/issue_comments_438016.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d16974d85a1e7e8d74b70b2e5ff596dc10dd7d2c\"><code>d16974d</code></a></td><td><code>Fix criterion for formality</code></td></tr></table>\n",
    "created_at": "2019-07-23T12:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438016",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d16974d85a1e7e8d74b70b2e5ff596dc10dd7d2c"><code>d16974d</code></a></td><td><code>Fix criterion for formality</code></td></tr></table>




---

archive/issue_comments_438017.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n Implement criteria to determine if a graded commutative differential algebra is formal or not.\n \n While I was at it, I also added some auxiliary functions that might be useful, forced it to use a more reasonable ordering when listing the basis of a homogenous part, and cleaned the style a little bit.\n+\n+The algorithm used is described in https://arxiv.org/abs/1909.07761\n``````\n",
    "created_at": "2019-09-19T09:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438017",
    "user": "https://github.com/miguelmarco"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 Implement criteria to determine if a graded commutative differential algebra is formal or not.
 
 While I was at it, I also added some auxiliary functions that might be useful, forced it to use a more reasonable ordering when listing the basis of a homogenous part, and cleaned the style a little bit.
+
+The algorithm used is described in https://arxiv.org/abs/1909.07761
``````




---

archive/issue_comments_438018.json:
```json
{
    "body": "Changed commit from **[`d16974d`](https://github.com/sagemath/sagetrac-mirror/commit/d16974d85a1e7e8d74b70b2e5ff596dc10dd7d2c)** to **[`87b562c`](https://github.com/sagemath/sagetrac-mirror/commit/87b562c782975d591f48b3b748520878015375c9)**",
    "created_at": "2019-09-19T11:41:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438018",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d16974d`](https://github.com/sagemath/sagetrac-mirror/commit/d16974d85a1e7e8d74b70b2e5ff596dc10dd7d2c)** to **[`87b562c`](https://github.com/sagemath/sagetrac-mirror/commit/87b562c782975d591f48b3b748520878015375c9)**



---

archive/issue_comments_438019.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87b562c782975d591f48b3b748520878015375c9\"><code>87b562c</code></a></td><td><code>Added some documentation and fixed style</code></td></tr></table>\n",
    "created_at": "2019-09-19T11:41:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438019",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87b562c782975d591f48b3b748520878015375c9"><code>87b562c</code></a></td><td><code>Added some documentation and fixed style</code></td></tr></table>




---

archive/issue_events_383137.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-09-19T11:42:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383137"
}
```



---

archive/issue_comments_438020.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87b562c782975d591f48b3b748520878015375c9\"><code>87b562c</code></a></td><td><code>Added some documentation and fixed style</code></td></tr></table>\n",
    "created_at": "2019-09-19T11:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438020",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:7"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87b562c782975d591f48b3b748520878015375c9"><code>87b562c</code></a></td><td><code>Added some documentation and fixed style</code></td></tr></table>




---

archive/issue_comments_438021.json:
```json
{
    "body": "Author: **Miguel Marco**",
    "created_at": "2019-09-19T11:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438021",
    "user": "https://github.com/miguelmarco"
}
```

Author: **Miguel Marco**



---

archive/issue_events_383138.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-09-19T11:42:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "c: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383138"
}
```



---

archive/issue_events_383139.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-09-19T11:42:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20topology",
    "label_color": "0000ff",
    "label_name": "c: algebraic topology",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383139"
}
```



---

archive/issue_events_383140.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-09-19T11:42:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383140"
}
```



---

archive/issue_events_383141.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-09-19T11:42:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383141"
}
```



---

archive/issue_comments_438022.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIt looks good overall. Here are my comments:\n\nYou do not need to create the entire list here:\n\n```diff\n-return sum([a * b for (a, b) in zip(cohomcoefs, C.basis().values())])\n+return sum(a * b for (a, b) in zip(cohomcoefs, C.basis().values()))\n```\nAlso, is that expected to work if `C.basis()` is empty (if that even occurs)?\n\nSimilar here\n\n```diff\n-if any([N1[n] != N2[n] for n in range(1, i + 1)]):\n+if any(N1[n] != N2[n] for n in range(1, i + 1)):\n```\nand here\n\n```diff\n-if all([c.is_coboundary() for c in tocheck]):\n+if all(c.is_coboundary() for c in tocheck):\n```\n\nSage follows python convention of errors starting with lower case:\n\n```\n-raise NotImplementedError(\"The implemented criteria cannot determine formality\")\n+raise NotImplementedError(\"the implemented criteria cannot determine formality\")\n```\n\nOur conventions for `INPUT:` docstrings:\n\n```diff\n-        - ``i`` -- integer; the degree up to which the formality is checked.\n+        - ``i`` -- integer; the degree up to which the formality is checked\n \n         - ``max_iterations`` -- integer (default: `3`); the maximum number of\n-          iterations used in the computation of the minimal model.\n+          iterations used in the computation of the minimal model\n```\n\n```diff\n         - ``max_degree`` -- integer (default: `3`); the degree up to which the\n-          numerical invariants are computed.\n+          numerical invariants are computed\n \n         - ``max_iterations`` -- integer (default: `3`); the maximum number of iterations\n-          used to compute the minimal model, if it is not already cached.\n+          used to compute the minimal model, if it is not already cached\n```\n\nIt is not always a good idea to strictly follow PEP8 when writing code. It leads to things like this:\n\n```\n                                     ['x{}'.format(i)\n                                         for i in range(len(chgens))],\n```\nwhere the break makes it harder to read the code. Not that this will cause me to hold up the ticket once everything else is done, but it might be worthwhile to go through and consider on the changes you made.",
    "created_at": "2019-09-19T12:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438022",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

It looks good overall. Here are my comments:

You do not need to create the entire list here:

```diff
-return sum([a * b for (a, b) in zip(cohomcoefs, C.basis().values())])
+return sum(a * b for (a, b) in zip(cohomcoefs, C.basis().values()))
```
Also, is that expected to work if `C.basis()` is empty (if that even occurs)?

Similar here

```diff
-if any([N1[n] != N2[n] for n in range(1, i + 1)]):
+if any(N1[n] != N2[n] for n in range(1, i + 1)):
```
and here

```diff
-if all([c.is_coboundary() for c in tocheck]):
+if all(c.is_coboundary() for c in tocheck):
```

Sage follows python convention of errors starting with lower case:

```
-raise NotImplementedError("The implemented criteria cannot determine formality")
+raise NotImplementedError("the implemented criteria cannot determine formality")
```

Our conventions for `INPUT:` docstrings:

```diff
-        - ``i`` -- integer; the degree up to which the formality is checked.
+        - ``i`` -- integer; the degree up to which the formality is checked
 
         - ``max_iterations`` -- integer (default: `3`); the maximum number of
-          iterations used in the computation of the minimal model.
+          iterations used in the computation of the minimal model
```

```diff
         - ``max_degree`` -- integer (default: `3`); the degree up to which the
-          numerical invariants are computed.
+          numerical invariants are computed
 
         - ``max_iterations`` -- integer (default: `3`); the maximum number of iterations
-          used to compute the minimal model, if it is not already cached.
+          used to compute the minimal model, if it is not already cached
```

It is not always a good idea to strictly follow PEP8 when writing code. It leads to things like this:

```
                                     ['x{}'.format(i)
                                         for i in range(len(chgens))],
```
where the break makes it harder to read the code. Not that this will cause me to hold up the ticket once everything else is done, but it might be worthwhile to go through and consider on the changes you made.



---

archive/issue_comments_438023.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2019-09-19T12:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438023",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_438024.json:
```json
{
    "body": "Changed commit from **[`87b562c`](https://github.com/sagemath/sagetrac-mirror/commit/87b562c782975d591f48b3b748520878015375c9)** to **[`f886230`](https://github.com/sagemath/sagetrac-mirror/commit/f8862305d98785d6760fc010263711d89a1f4d0e)**",
    "created_at": "2019-09-20T09:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438024",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`87b562c`](https://github.com/sagemath/sagetrac-mirror/commit/87b562c782975d591f48b3b748520878015375c9)** to **[`f886230`](https://github.com/sagemath/sagetrac-mirror/commit/f8862305d98785d6760fc010263711d89a1f4d0e)**



---

archive/issue_comments_438025.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8862305d98785d6760fc010263711d89a1f4d0e\"><code>f886230</code></a></td><td><code>Style fixes</code></td></tr></table>\n",
    "created_at": "2019-09-20T09:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438025",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8862305d98785d6760fc010263711d89a1f4d0e"><code>f886230</code></a></td><td><code>Style fixes</code></td></tr></table>




---

archive/issue_comments_438026.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI made the suggested changes.\n\n\n> Also, is that expected to work if `C.basis()` is empty (if that even occurs)?\n> \n\nIt is expected to return the zero element of a trivial cohomology group. It did return zero as an integer. I have forced a conversion to the corresponding cohomology group, and added a corresponding test.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8862305d98785d6760fc010263711d89a1f4d0e\"><code>f886230</code></a></td><td><code>Style fixes</code></td></tr></table>\n",
    "created_at": "2019-09-20T09:17:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438026",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:10" align="right">comment:10</div>

I made the suggested changes.


> Also, is that expected to work if `C.basis()` is empty (if that even occurs)?
> 

It is expected to return the zero element of a trivial cohomology group. It did return zero as an integer. I have forced a conversion to the corresponding cohomology group, and added a corresponding test.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8862305d98785d6760fc010263711d89a1f4d0e"><code>f886230</code></a></td><td><code>Style fixes</code></td></tr></table>




---

archive/issue_comments_438027.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThank you. One last thing to address is the pyflakes (see the patchbot). For instance, since you do not use the minimal model, you can just do this:\n\n```diff\n-MH = H.minimal_model(i, max_iterations)\n+H.minimal_model(i, max_iterations)\n```",
    "created_at": "2019-09-20T12:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438027",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

Thank you. One last thing to address is the pyflakes (see the patchbot). For instance, since you do not use the minimal model, you can just do this:

```diff
-MH = H.minimal_model(i, max_iterations)
+H.minimal_model(i, max_iterations)
```



---

archive/issue_comments_438028.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c89c9b493705e11c1fed71f0f3384e429f628ef\"><code>0c89c9b</code></a></td><td><code>Fixed pyflakes issues</code></td></tr></table>\n",
    "created_at": "2019-09-20T14:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438028",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c89c9b493705e11c1fed71f0f3384e429f628ef"><code>0c89c9b</code></a></td><td><code>Fixed pyflakes issues</code></td></tr></table>




---

archive/issue_comments_438029.json:
```json
{
    "body": "Changed commit from **[`f886230`](https://github.com/sagemath/sagetrac-mirror/commit/f8862305d98785d6760fc010263711d89a1f4d0e)** to **[`0c89c9b`](https://github.com/sagemath/sagetrac-mirror/commit/0c89c9b493705e11c1fed71f0f3384e429f628ef)**",
    "created_at": "2019-09-20T14:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438029",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f886230`](https://github.com/sagemath/sagetrac-mirror/commit/f8862305d98785d6760fc010263711d89a1f4d0e)** to **[`0c89c9b`](https://github.com/sagemath/sagetrac-mirror/commit/0c89c9b493705e11c1fed71f0f3384e429f628ef)**



---

archive/issue_events_383142.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-09-20T21:17:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383142"
}
```



---

archive/issue_events_383143.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2019-09-20T21:17:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383143"
}
```



---

archive/issue_comments_438030.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThank you.",
    "created_at": "2019-09-20T21:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438030",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Thank you.



---

archive/issue_comments_438031.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nmoving milestone to 9.0 (after release of 8.9)",
    "created_at": "2019-09-30T08:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438031",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

moving milestone to 9.0 (after release of 8.9)



---

archive/issue_events_383144.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-09-30T08:12:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383144"
}
```



---

archive/issue_events_383145.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-09-30T08:12:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383145"
}
```



---

archive/issue_comments_438032.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI'm getting a lot of \n\n```\nFile \"src/sage/algebras/commutative_dga.py\", line 2888, in sage.algebras.commutative_dga.DifferentialGCAlgebra.Element.cohomology_class\nFailed example:\n    a.cohomology_class()\nExpected:\n    B[[e1*e3*e5]] - 3*B[[e2*e3*e5]]\nGot:\n    -3*B[[e2*e3*e5]] + B[[e1*e3*e5]]\n**********************************************************************\n1 item had failures:\n   1 of  11 in sage.algebras.commutative_dga.DifferentialGCAlgebra.Element.cohomology_class\n    [600 tests, 1 failure, 26.78 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/algebras/commutative_dga.py  # 1 doctest failed\n----------------------------------------------------------------------\n\n```",
    "created_at": "2019-10-03T17:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438032",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:15" align="right">comment:15</div>

I'm getting a lot of 

```
File "src/sage/algebras/commutative_dga.py", line 2888, in sage.algebras.commutative_dga.DifferentialGCAlgebra.Element.cohomology_class
Failed example:
    a.cohomology_class()
Expected:
    B[[e1*e3*e5]] - 3*B[[e2*e3*e5]]
Got:
    -3*B[[e2*e3*e5]] + B[[e1*e3*e5]]
**********************************************************************
1 item had failures:
   1 of  11 in sage.algebras.commutative_dga.DifferentialGCAlgebra.Element.cohomology_class
    [600 tests, 1 failure, 26.78 s]
----------------------------------------------------------------------
sage -t --long src/sage/algebras/commutative_dga.py  # 1 doctest failed
----------------------------------------------------------------------

```



---

archive/issue_events_383146.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-03T17:48:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383146"
}
```



---

archive/issue_events_383147.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-03T17:48:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383147"
}
```



---

archive/issue_comments_438033.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOddly enough, I see this intermittently with Python 2 but not at all with Python 3. In a Python 2 Sage session:\n\n```\nsage: A.<e1,e2,e3,e4,e5> = GradedCommutativeAlgebra(QQ)\nsage: B = A.cdg_algebra({e5:e1*e2+e3*e4})\nsage: B.inject_variables()\nDefining e1, e2, e3, e4, e5\nsage: a = e1*e3*e5-3*e2*e3*e5\nsage: a.cohomology_class()\nB[[e1*e3*e5]] - 3*B[[e2*e3*e5]]\nsage: a.cohomology_class()\n-3*B[[e2*e3*e5]] + B[[e1*e3*e5]]}}}",
    "created_at": "2019-10-03T18:31:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438033",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

Oddly enough, I see this intermittently with Python 2 but not at all with Python 3. In a Python 2 Sage session:

```
sage: A.<e1,e2,e3,e4,e5> = GradedCommutativeAlgebra(QQ)
sage: B = A.cdg_algebra({e5:e1*e2+e3*e4})
sage: B.inject_variables()
Defining e1, e2, e3, e4, e5
sage: a = e1*e3*e5-3*e2*e3*e5
sage: a.cohomology_class()
B[[e1*e3*e5]] - 3*B[[e2*e3*e5]]
sage: a.cohomology_class()
-3*B[[e2*e3*e5]] + B[[e1*e3*e5]]}}}



---

archive/issue_comments_438034.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0253ae3f32063ab0ad9b85eed068dd679733f7bc\"><code>0253ae3</code></a></td><td><code>Merge branch 'develop' into t/28155/check_for_formality_of_gcda_s</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc9c7eedf35e6e0f3f5766665518dce5dd153376\"><code>dc9c7ee</code></a></td><td><code>Make CohomologyClass CachedRepresentation</code></td></tr></table>\n",
    "created_at": "2019-10-15T09:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438034",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0253ae3f32063ab0ad9b85eed068dd679733f7bc"><code>0253ae3</code></a></td><td><code>Merge branch 'develop' into t/28155/check_for_formality_of_gcda_s</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc9c7eedf35e6e0f3f5766665518dce5dd153376"><code>dc9c7ee</code></a></td><td><code>Make CohomologyClass CachedRepresentation</code></td></tr></table>




---

archive/issue_comments_438035.json:
```json
{
    "body": "Changed commit from **[`0c89c9b`](https://github.com/sagemath/sagetrac-mirror/commit/0c89c9b493705e11c1fed71f0f3384e429f628ef)** to **[`dc9c7ee`](https://github.com/sagemath/sagetrac-mirror/commit/dc9c7eedf35e6e0f3f5766665518dce5dd153376)**",
    "created_at": "2019-10-15T09:07:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438035",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c89c9b`](https://github.com/sagemath/sagetrac-mirror/commit/0c89c9b493705e11c1fed71f0f3384e429f628ef)** to **[`dc9c7ee`](https://github.com/sagemath/sagetrac-mirror/commit/dc9c7eedf35e6e0f3f5766665518dce5dd153376)**



---

archive/issue_comments_438036.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIt seems to be a problem with `CohomologyClass`. I did it `CachedRepresentation`, which seems to solve the problem of returning different representations in the same session. However, I still get errors every time I run the testsuite.\n\nIs there any flag or environment variable that could affect the order in which the basis of a `CombinatorialFreeModule`are represented depending on the fact that we are in an interactive shell or running the testsuite?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0253ae3f32063ab0ad9b85eed068dd679733f7bc\"><code>0253ae3</code></a></td><td><code>Merge branch 'develop' into t/28155/check_for_formality_of_gcda_s</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc9c7eedf35e6e0f3f5766665518dce5dd153376\"><code>dc9c7ee</code></a></td><td><code>Make CohomologyClass CachedRepresentation</code></td></tr></table>\n",
    "created_at": "2019-10-15T09:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438036",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:18" align="right">comment:18</div>

It seems to be a problem with `CohomologyClass`. I did it `CachedRepresentation`, which seems to solve the problem of returning different representations in the same session. However, I still get errors every time I run the testsuite.

Is there any flag or environment variable that could affect the order in which the basis of a `CombinatorialFreeModule`are represented depending on the fact that we are in an interactive shell or running the testsuite?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0253ae3f32063ab0ad9b85eed068dd679733f7bc"><code>0253ae3</code></a></td><td><code>Merge branch 'develop' into t/28155/check_for_formality_of_gcda_s</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc9c7eedf35e6e0f3f5766665518dce5dd153376"><code>dc9c7ee</code></a></td><td><code>Make CohomologyClass CachedRepresentation</code></td></tr></table>




---

archive/issue_comments_438037.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88f8831fd8a04ce0e64b54e36e67a1f2ed1e6041\"><code>88f8831</code></a></td><td><code>Fix order on for representation of cohomology classes</code></td></tr></table>\n",
    "created_at": "2019-10-15T10:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438037",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88f8831fd8a04ce0e64b54e36e67a1f2ed1e6041"><code>88f8831</code></a></td><td><code>Fix order on for representation of cohomology classes</code></td></tr></table>




---

archive/issue_comments_438038.json:
```json
{
    "body": "Changed commit from **[`dc9c7ee`](https://github.com/sagemath/sagetrac-mirror/commit/dc9c7eedf35e6e0f3f5766665518dce5dd153376)** to **[`88f8831`](https://github.com/sagemath/sagetrac-mirror/commit/88f8831fd8a04ce0e64b54e36e67a1f2ed1e6041)**",
    "created_at": "2019-10-15T10:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438038",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`dc9c7ee`](https://github.com/sagemath/sagetrac-mirror/commit/dc9c7eedf35e6e0f3f5766665518dce5dd153376)** to **[`88f8831`](https://github.com/sagemath/sagetrac-mirror/commit/88f8831fd8a04ce0e64b54e36e67a1f2ed1e6041)**



---

archive/issue_comments_438039.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOk, I think I solved it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88f8831fd8a04ce0e64b54e36e67a1f2ed1e6041\"><code>88f8831</code></a></td><td><code>Fix order on for representation of cohomology classes</code></td></tr></table>\n",
    "created_at": "2019-10-15T10:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438039",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:20" align="right">comment:20</div>

Ok, I think I solved it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88f8831fd8a04ce0e64b54e36e67a1f2ed1e6041"><code>88f8831</code></a></td><td><code>Fix order on for representation of cohomology classes</code></td></tr></table>




---

archive/issue_events_383148.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-10-15T10:17:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383148"
}
```



---

archive/issue_events_383149.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-10-15T10:17:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383149"
}
```



---

archive/issue_comments_438040.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nUsing `CachedRepresentation` should not be necessary, since you're using `sorting_key=...`, and this seems to be borne out in some testing that I did. So I think it should be removed.",
    "created_at": "2019-10-15T17:20:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438040",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

Using `CachedRepresentation` should not be necessary, since you're using `sorting_key=...`, and this seems to be borne out in some testing that I did. So I think it should be removed.



---

archive/issue_comments_438041.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI found that ithout `CachedRepresentation` , each time that the cohomology class of an element is computed, we get a different object. In particular, when we create the cohomology group, it takes as basis the specific instances of the cohomology classes of the generators that were created in that particular call. Hence, when we call it again, we get a different group.\n\n\nThat is, without `CachedRepresentation` we get this:\n\n```\nsage: A.<e1,e2,e3,e4,e5> = GradedCommutativeAlgebra(QQ)\nsage: B = A.cdg_algebra({e5:e1*e2+e3*e4})\nsage: B.inject_variables()\nDefining e1, e2, e3, e4, e5\nsage: a = e1*e3*e5-3*e2*e3*e5\nsage: C = B.cohomology(3)\nsage: a.cohomology_class() in C\nFalse\n```\n\nEven if the parent of `a.cohomology_class()` should be `C` :\n\n```\nsage: C\nFree module generated by {[e1*e2*e5 - e3*e4*e5], [e1*e3*e5], [e2*e3*e5], [e1*e4*e5], [e2*e4*e5]} over Rational Field\nsage: a.cohomology_class().parent()\nFree module generated by {[e1*e2*e5 - e3*e4*e5], [e1*e3*e5], [e2*e3*e5], [e1*e4*e5], [e2*e4*e5]} over Rational Field\n```\n\nThey look the same, but are different objects because they have been created with different  generators.\n\nIndeed:\n\n```\nsage: B.cohomology(3) is B.cohomology(3)\nFalse\nsage: B.cohomology(3) == B.cohomology(3)\nFalse\n```",
    "created_at": "2019-10-15T17:42:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438041",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:22" align="right">comment:22</div>

I found that ithout `CachedRepresentation` , each time that the cohomology class of an element is computed, we get a different object. In particular, when we create the cohomology group, it takes as basis the specific instances of the cohomology classes of the generators that were created in that particular call. Hence, when we call it again, we get a different group.


That is, without `CachedRepresentation` we get this:

```
sage: A.<e1,e2,e3,e4,e5> = GradedCommutativeAlgebra(QQ)
sage: B = A.cdg_algebra({e5:e1*e2+e3*e4})
sage: B.inject_variables()
Defining e1, e2, e3, e4, e5
sage: a = e1*e3*e5-3*e2*e3*e5
sage: C = B.cohomology(3)
sage: a.cohomology_class() in C
False
```

Even if the parent of `a.cohomology_class()` should be `C` :

```
sage: C
Free module generated by {[e1*e2*e5 - e3*e4*e5], [e1*e3*e5], [e2*e3*e5], [e1*e4*e5], [e2*e4*e5]} over Rational Field
sage: a.cohomology_class().parent()
Free module generated by {[e1*e2*e5 - e3*e4*e5], [e1*e3*e5], [e2*e3*e5], [e1*e4*e5], [e2*e4*e5]} over Rational Field
```

They look the same, but are different objects because they have been created with different  generators.

Indeed:

```
sage: B.cohomology(3) is B.cohomology(3)
False
sage: B.cohomology(3) == B.cohomology(3)
False
```



---

archive/issue_comments_438042.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nCan you add some of these as doctests, then?",
    "created_at": "2019-10-15T18:46:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438042",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">comment:23</div>

Can you add some of these as doctests, then?



---

archive/issue_comments_438043.json:
```json
{
    "body": "Changed commit from **[`88f8831`](https://github.com/sagemath/sagetrac-mirror/commit/88f8831fd8a04ce0e64b54e36e67a1f2ed1e6041)** to **[`9da3f2a`](https://github.com/sagemath/sagetrac-mirror/commit/9da3f2ad9b6ef9e06f63a328fe6c015f4c4d63d9)**",
    "created_at": "2019-10-16T09:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438043",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`88f8831`](https://github.com/sagemath/sagetrac-mirror/commit/88f8831fd8a04ce0e64b54e36e67a1f2ed1e6041)** to **[`9da3f2a`](https://github.com/sagemath/sagetrac-mirror/commit/9da3f2ad9b6ef9e06f63a328fe6c015f4c4d63d9)**



---

archive/issue_comments_438044.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9da3f2ad9b6ef9e06f63a328fe6c015f4c4d63d9\"><code>9da3f2a</code></a></td><td><code>Add doctests for consistent cohomology groups</code></td></tr></table>\n",
    "created_at": "2019-10-16T09:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438044",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9da3f2ad9b6ef9e06f63a328fe6c015f4c4d63d9"><code>9da3f2a</code></a></td><td><code>Add doctests for consistent cohomology groups</code></td></tr></table>




---

archive/issue_comments_438045.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nDoctests added.",
    "created_at": "2019-10-16T09:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438045",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:25" align="right">comment:25</div>

Doctests added.



---

archive/issue_comments_438046.json:
```json
{
    "body": "Changed branch from **[u/mmarco/check_for_formality_of_gcda_s](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/check_for_formality_of_gcda_s)** to **[u/jhpalmieri/check_for_formality_of_gcda_s](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/check_for_formality_of_gcda_s)**",
    "created_at": "2019-10-16T17:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438046",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/mmarco/check_for_formality_of_gcda_s](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/check_for_formality_of_gcda_s)** to **[u/jhpalmieri/check_for_formality_of_gcda_s](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/check_for_formality_of_gcda_s)**



---

archive/issue_comments_438047.json:
```json
{
    "body": "Changed commit from **[`9da3f2a`](https://github.com/sagemath/sagetrac-mirror/commit/9da3f2ad9b6ef9e06f63a328fe6c015f4c4d63d9)** to **[`e95c78a`](https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48)**",
    "created_at": "2019-10-16T17:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438047",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`9da3f2a`](https://github.com/sagemath/sagetrac-mirror/commit/9da3f2ad9b6ef9e06f63a328fe6c015f4c4d63d9)** to **[`e95c78a`](https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48)**



---

archive/issue_comments_438048.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThank you. I've made a few small docstring fixes. If you're happy with my changes, please set to positive review on my behalf.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a9a912609d801fbf62634bc765db71617e0147d\"><code>8a9a912</code></a></td><td><code>Implemented numerical invariants and formality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90d6c502faf3f63c5c07b940efa8e3c133707793\"><code>90d6c50</code></a></td><td><code>Auxiliar functions for cohomology class, and style fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ec10cae4b203cdde918b86a809bcde57a0bec1a\"><code>5ec10ca</code></a></td><td><code>Fix criterion for formality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6d9f764e59058a38a5a22830ca068d9464e3d6d\"><code>b6d9f76</code></a></td><td><code>Added some documentation and fixed style</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/274703408f6b019baf3c01d621bc757eef278d6f\"><code>2747034</code></a></td><td><code>Style fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a5d9b763a66c0eed096dca97577d163c0e7d47e\"><code>2a5d9b7</code></a></td><td><code>Fixed pyflakes issues</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d8d8a4062d5e6304c313d4ccff015cdc9dc1c84\"><code>3d8d8a4</code></a></td><td><code>Make CohomologyClass CachedRepresentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d953e3faf47dbfac78109c5ea2de973fc55da233\"><code>d953e3f</code></a></td><td><code>Fix order on for representation of cohomology classes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87b60c7bfdb1da49fd0dd60529c5fd999e1cce46\"><code>87b60c7</code></a></td><td><code>Add doctests for consistent cohomology groups</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48\"><code>e95c78a</code></a></td><td><code>trac 28155: minor docstring fixes</code></td></tr></table>\n",
    "created_at": "2019-10-16T17:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438048",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:27" align="right">comment:27</div>

Thank you. I've made a few small docstring fixes. If you're happy with my changes, please set to positive review on my behalf.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a9a912609d801fbf62634bc765db71617e0147d"><code>8a9a912</code></a></td><td><code>Implemented numerical invariants and formality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90d6c502faf3f63c5c07b940efa8e3c133707793"><code>90d6c50</code></a></td><td><code>Auxiliar functions for cohomology class, and style fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ec10cae4b203cdde918b86a809bcde57a0bec1a"><code>5ec10ca</code></a></td><td><code>Fix criterion for formality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6d9f764e59058a38a5a22830ca068d9464e3d6d"><code>b6d9f76</code></a></td><td><code>Added some documentation and fixed style</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/274703408f6b019baf3c01d621bc757eef278d6f"><code>2747034</code></a></td><td><code>Style fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a5d9b763a66c0eed096dca97577d163c0e7d47e"><code>2a5d9b7</code></a></td><td><code>Fixed pyflakes issues</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d8d8a4062d5e6304c313d4ccff015cdc9dc1c84"><code>3d8d8a4</code></a></td><td><code>Make CohomologyClass CachedRepresentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d953e3faf47dbfac78109c5ea2de973fc55da233"><code>d953e3f</code></a></td><td><code>Fix order on for representation of cohomology classes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87b60c7bfdb1da49fd0dd60529c5fd999e1cce46"><code>87b60c7</code></a></td><td><code>Add doctests for consistent cohomology groups</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48"><code>e95c78a</code></a></td><td><code>trac 28155: minor docstring fixes</code></td></tr></table>




---

archive/issue_comments_438049.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, John Palmieri**",
    "created_at": "2019-10-16T17:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438049",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **Travis Scrimshaw** to **Travis Scrimshaw, John Palmieri**



---

archive/issue_events_383150.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-10-16T17:52:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383150"
}
```



---

archive/issue_events_383151.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2019-10-16T17:52:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383151"
}
```



---

archive/issue_comments_438050.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThank you!",
    "created_at": "2019-10-16T17:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438050",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:28" align="right">comment:28</div>

Thank you!



---

archive/issue_events_383152.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-21T22:43:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383152"
}
```



---

archive/issue_events_383153.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "dafcaac1cbe73aa4ad0d01d9a09067b7c51ac154",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-10-21T22:43:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28155#event-383153"
}
```



---

archive/issue_comments_438051.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/check_for_formality_of_gcda_s](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/check_for_formality_of_gcda_s)** to **[`e95c78a`](https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48)**",
    "created_at": "2019-10-21T22:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438051",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/check_for_formality_of_gcda_s](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/check_for_formality_of_gcda_s)** to **[`e95c78a`](https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48)**



---

archive/issue_comments_438052.json:
```json
{
    "body": "Changed author from **Miguel Marco** to **Miguel Marco, Victor Manero**",
    "created_at": "2019-10-24T07:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438052",
    "user": "https://github.com/miguelmarco"
}
```

Changed author from **Miguel Marco** to **Miguel Marco, Victor Manero**



---

archive/issue_comments_438053.json:
```json
{
    "body": "Changed commit from **[`e95c78a`](https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48)** to none",
    "created_at": "2019-10-24T07:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438053",
    "user": "https://github.com/miguelmarco"
}
```

Changed commit from **[`e95c78a`](https://github.com/sagemath/sagetrac-mirror/commit/e95c78ac7cbaffa8e17444b1dc309c2d1cf37a48)** to none



---

archive/issue_comments_438054.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI am now annoyed at the requirement that generators have to be entered in increasing order of degree. If the code cares that much about the ordering, it should sort itself and save its preferred ordering, but why should a user who has an algebra with a natural ordering of the generators have to manually reorder them to fit the code? This seems backward to me.",
    "created_at": "2022-09-24T17:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438054",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

I am now annoyed at the requirement that generators have to be entered in increasing order of degree. If the code cares that much about the ordering, it should sort itself and save its preferred ordering, but why should a user who has an algebra with a natural ordering of the generators have to manually reorder them to fit the code? This seems backward to me.



---

archive/issue_comments_438055.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nFollowing up in #34582.",
    "created_at": "2022-09-24T18:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28155#issuecomment-438055",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">comment:32</div>

Following up in #34582.
