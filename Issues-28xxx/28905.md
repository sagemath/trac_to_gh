# Issue 28905: spkg-configure for cddlib

archive/issues_028668.json:
```json
{
    "assignees": [],
    "body": "Provide `spkg-configure.m4` to use libcdd/cdd from the system. \n\nThis ticket is limited to systems that install headers into `/usr/include` rather than `/usr/include/cdd` (Debian) or `/usr/include/cddlib` (Fedora).\n\nFollow-up: #29413 (Upgrade cddlib, fix cddlib header search for packages latte_int, gfan, topcom)\n\n\nCC:  @saraedum @orlitzky\n\nBranch/Commit: **[de9fb2e](https://github.com/sagemath/sagetrac-mirror/commit/de9fb2ee41fb6a083addd6a74b6b2da7504dd9b0)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Dima Pasechnik, Michael Orlitzky**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28905_\n\n",
    "closed_at": "2020-04-05T08:30:50Z",
    "created_at": "2019-12-21T02:44:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "spkg-configure for cddlib",
    "type": "issue",
    "updated_at": "2020-04-05T08:30:50Z",
    "url": "https://github.com/sagemath/sage/issues/28905",
    "user": "https://github.com/dimpase"
}
```
Provide `spkg-configure.m4` to use libcdd/cdd from the system. 

This ticket is limited to systems that install headers into `/usr/include` rather than `/usr/include/cdd` (Debian) or `/usr/include/cddlib` (Fedora).

Follow-up: #29413 (Upgrade cddlib, fix cddlib header search for packages latte_int, gfan, topcom)


CC:  @saraedum @orlitzky

Branch/Commit: **[de9fb2e](https://github.com/sagemath/sagetrac-mirror/commit/de9fb2ee41fb6a083addd6a74b6b2da7504dd9b0)**

Reviewer: **Matthias Koeppe**

Author: **Dima Pasechnik, Michael Orlitzky**

_Issue created by migration from https://trac.sagemath.org/ticket/28905_





---

archive/issue_events_378894.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T02:44:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378894"
}
```



---

archive/issue_events_378895.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T02:44:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "component: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378895"
}
```



---

archive/issue_events_378896.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T02:44:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378896"
}
```



---

archive/issue_events_378897.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T02:44:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378897"
}
```



---

archive/issue_events_378898.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T02:46:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "title_is": "spkg-configure for cddlib",
    "title_was": "spkg-configure for libcdd",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378898"
}
```



---

archive/issue_comments_454217.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nSee also https://github.com/cddlib/cddlib/issues/26 \"Consider installing headers in `${prefix}/include/cdd/` instead of `${prefix}/include`\"",
    "created_at": "2019-12-25T15:32:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454217",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">Comment 2</div>

See also https://github.com/cddlib/cddlib/issues/26 "Consider installing headers in `${prefix}/include/cdd/` instead of `${prefix}/include`"



---

archive/issue_comments_454218.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nSorry, I fail to understand the description of this ticket. What are you trying to achieve here exactly? Would be nice if you could elaborate a bit.",
    "created_at": "2019-12-26T13:05:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454218",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:4" align="right">Comment 4</div>

Sorry, I fail to understand the description of this ticket. What are you trying to achieve here exactly? Would be nice if you could elaborate a bit.



---

archive/issue_comments_454219.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n+provide `spkg-configure.m4` to use libcdd/cdd from the system. \n+There should not be a problem with headers, after all we can install links to `$SAGE_LOCAL/include/`.\n+\n Debian has libcdd-dev (library) and libcdd-tools (executables) packages.\n \n The obstacles: installs headers in `usr/include/cdd` (and not in `/usr/include`,\n``````\n",
    "created_at": "2019-12-26T13:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454219",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
+provide `spkg-configure.m4` to use libcdd/cdd from the system. 
+There should not be a problem with headers, after all we can install links to `$SAGE_LOCAL/include/`.
+
 Debian has libcdd-dev (library) and libcdd-tools (executables) packages.
 
 The obstacles: installs headers in `usr/include/cdd` (and not in `/usr/include`,
``````




---

archive/issue_comments_454220.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThe goal is to use libcdd/cdd from the system (as in all tickets from #27330).\nThere should not be a problem with headers, after all we can install links to `$SAGE_LOCAL/include/`. I don't know which cdd executables are used in Sagemath.\nAgain,for these we can install links in `SAGE_LOCAL/bin/`.",
    "created_at": "2019-12-26T13:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454220",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">Comment 5</div>

The goal is to use libcdd/cdd from the system (as in all tickets from #27330).
There should not be a problem with headers, after all we can install links to `$SAGE_LOCAL/include/`. I don't know which cdd executables are used in Sagemath.
Again,for these we can install links in `SAGE_LOCAL/bin/`.



---

archive/issue_events_378899.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-26T13:50:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378899"
}
```



---

archive/issue_events_378900.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-26T13:50:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378900"
}
```



---

archive/issue_comments_454221.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nAm I right that the only parts of cdd(lib) currently used in Sage are executables `cddexec*` ? If so, it would be trivial to provide `spkg-configure.m4`.",
    "created_at": "2019-12-27T12:55:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454221",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">Comment 6</div>

Am I right that the only parts of cdd(lib) currently used in Sage are executables `cddexec*` ? If so, it would be trivial to provide `spkg-configure.m4`.



---

archive/issue_comments_454222.json:
```json
{
    "body": "Commit: **[5b8ca8f](https://github.com/sagemath/sagetrac-mirror/commit/5b8ca8f75540804a6b9ce53f539bb0b86e3173a6)**",
    "created_at": "2019-12-27T13:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454222",
    "user": "https://github.com/dimpase"
}
```

Commit: **[5b8ca8f](https://github.com/sagemath/sagetrac-mirror/commit/5b8ca8f75540804a6b9ce53f539bb0b86e3173a6)**



---

archive/issue_comments_454223.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/cddlibconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/cddlibconfig)**",
    "created_at": "2019-12-27T13:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454223",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/cddlibconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/cddlibconfig)**



---

archive/issue_comments_454224.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2019-12-27T13:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454224",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_454225.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b8ca8f75540804a6b9ce53f539bb0b86e3173a6\">5b8ca8f</a></td><td><code>spkg-configure for cddlib</code></td></tr></table>\n",
    "created_at": "2019-12-27T13:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454225",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b8ca8f75540804a6b9ce53f539bb0b86e3173a6">5b8ca8f</a></td><td><code>spkg-configure for cddlib</code></td></tr></table>




---

archive/issue_comments_454226.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\ncddlib is used as a library in gfan and latte. So one needs a check for headers and libraries.",
    "created_at": "2019-12-28T06:21:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454226",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">Comment 8</div>

cddlib is used as a library in gfan and latte. So one needs a check for headers and libraries.



---

archive/issue_comments_454227.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI did some work on this but the version of cddlib in Gentoo is too old to detect, so now I have to go fix that first.",
    "created_at": "2020-01-12T05:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454227",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:9" align="right">Comment 9</div>

I did some work on this but the version of cddlib in Gentoo is too old to detect, so now I have to go fix that first.



---

archive/issue_comments_454228.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/cddlibconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/cddlibconfig)** to **[u/mjo/ticket/28905](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/28905)**",
    "created_at": "2020-01-12T05:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454228",
    "user": "https://github.com/orlitzky"
}
```

Changed branch from **[u/dimpase/packages/cddlibconfig](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/cddlibconfig)** to **[u/mjo/ticket/28905](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/28905)**



---

archive/issue_comments_454229.json:
```json
{
    "body": "Changed commit from **[5b8ca8f](https://github.com/sagemath/sagetrac-mirror/commit/5b8ca8f75540804a6b9ce53f539bb0b86e3173a6)** to **[61117fd](https://github.com/sagemath/sagetrac-mirror/commit/61117fd8a9fb77f3bd494ca4281dad2b24ab3cd3)**",
    "created_at": "2020-01-12T05:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454229",
    "user": "https://github.com/orlitzky"
}
```

Changed commit from **[5b8ca8f](https://github.com/sagemath/sagetrac-mirror/commit/5b8ca8f75540804a6b9ce53f539bb0b86e3173a6)** to **[61117fd](https://github.com/sagemath/sagetrac-mirror/commit/61117fd8a9fb77f3bd494ca4281dad2b24ab3cd3)**



---

archive/issue_comments_454230.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@orlitzky](#comment%3A9):\n> I did some work on this but the version of cddlib in Gentoo is too old to detect, so now I have to go fix that first.\n\nYes the version from the main tree is too old. I have a newer suitable version in the sage-on-gentoo overlay.",
    "created_at": "2020-01-12T09:16:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454230",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@orlitzky](#comment%3A9):
> I did some work on this but the version of cddlib in Gentoo is too old to detect, so now I have to go fix that first.

Yes the version from the main tree is too old. I have a newer suitable version in the sage-on-gentoo overlay.



---

archive/issue_comments_454231.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nIs there a branch to test?",
    "created_at": "2020-01-18T02:48:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454231",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">Comment 11</div>

Is there a branch to test?



---

archive/issue_comments_454232.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nYeah, the one up there works for me. We did get cddlib upgraded in Gentoo and my branch detects it.",
    "created_at": "2020-01-18T02:51:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454232",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:12" align="right">Comment 12</div>

Yeah, the one up there works for me. We did get cddlib upgraded in Gentoo and my branch detects it.



---

archive/issue_events_378901.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-01-18T02:51:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378901"
}
```



---

archive/issue_comments_454233.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nAre there Dockerfiles or Docker images available that allow testing of the Gentoo Sage distribution?\nOff-topic for this ticket - but I would like to add a continuous integration test for https://github.com/mkoeppe/sage-numerical-backends-coin",
    "created_at": "2020-01-18T02:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454233",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">Comment 13</div>

Are there Dockerfiles or Docker images available that allow testing of the Gentoo Sage distribution?
Off-topic for this ticket - but I would like to add a continuous integration test for https://github.com/mkoeppe/sage-numerical-backends-coin



---

archive/issue_comments_454234.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nReplying to [@mkoeppe](#comment%3A13):\n> Are there Dockerfiles or Docker images available that allow testing of the Gentoo Sage distribution?\n> Off-topic for this ticket - but I would like to add a continuous integration test for https://github.com/mkoeppe/sage-numerical-backends-coin\n\ncoinor is too old in Gentoo. I tried to do an upgrade privately sometime last year. Unfortunately I lost the ebuilds in a mishap (and they weren't on vcs yet when it happened). I couldn't get it to work with sage which was annoying.",
    "created_at": "2020-01-18T02:59:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454234",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">Comment 14</div>

Replying to [@mkoeppe](#comment%3A13):
> Are there Dockerfiles or Docker images available that allow testing of the Gentoo Sage distribution?
> Off-topic for this ticket - but I would like to add a continuous integration test for https://github.com/mkoeppe/sage-numerical-backends-coin

coinor is too old in Gentoo. I tried to do an upgrade privately sometime last year. Unfortunately I lost the ebuilds in a mishap (and they weren't on vcs yet when it happened). I couldn't get it to work with sage which was annoying.



---

archive/issue_comments_454235.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nI primarily want to test with Gentoo's sage, not Gentoo's coinor. I can bring my own coinor from coinbrew.",
    "created_at": "2020-01-18T03:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454235",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">Comment 15</div>

I primarily want to test with Gentoo's sage, not Gentoo's coinor. I can bring my own coinor from coinbrew.



---

archive/issue_comments_454236.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nFYI - https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/tox.ini",
    "created_at": "2020-01-18T03:02:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454236",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">Comment 16</div>

FYI - https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/tox.ini



---

archive/issue_comments_454237.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nWell I don't produce any docker images and I don't know if someone else did. Would be neat.",
    "created_at": "2020-01-18T03:04:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454237",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">Comment 17</div>

Well I don't produce any docker images and I don't know if someone else did. Would be neat.



---

archive/issue_comments_454238.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nThe closest thing to a Docker image we have are the KVM images that the openstack project maintains:\n\n  http://gentoo.osuosl.org/experimental/amd64/openstack/\n\nIn theory you can boot one of those up, configure the sage-on-gentoo overlay,\n\n  https://github.com/cschwan/sage-on-gentoo\n\nand then `emerge sage`. But each of those steps is tricky if you've never done it.\n\nI'm slowly working on moving things from the overlay to the main gentoo repository, so that one day you can \"emerge sage\" without the overlay. (Basically, I'm just taking Francois's work and committing it to the main repository.)\n\nThis goes hand-in-hand with the spkg-configure work because in the past, while sage-on-gentoo provides the most stable and usable sage, it doesn't help me rebuild sage.git for testing tickets. But now whenever a package gets an spkg-configure.m4, adding that package to gentoo both (1) speeds up the sage.git build, and (2) brings the overlay one step closer to the main repository.",
    "created_at": "2020-01-18T03:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454238",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:18" align="right">Comment 18</div>

The closest thing to a Docker image we have are the KVM images that the openstack project maintains:

  http://gentoo.osuosl.org/experimental/amd64/openstack/

In theory you can boot one of those up, configure the sage-on-gentoo overlay,

  https://github.com/cschwan/sage-on-gentoo

and then `emerge sage`. But each of those steps is tricky if you've never done it.

I'm slowly working on moving things from the overlay to the main gentoo repository, so that one day you can "emerge sage" without the overlay. (Basically, I'm just taking Francois's work and committing it to the main repository.)

This goes hand-in-hand with the spkg-configure work because in the past, while sage-on-gentoo provides the most stable and usable sage, it doesn't help me rebuild sage.git for testing tickets. But now whenever a package gets an spkg-configure.m4, adding that package to gentoo both (1) speeds up the sage.git build, and (2) brings the overlay one step closer to the main repository.



---

archive/issue_comments_454239.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nThanks. For now I'm trying to bootstrap gentoo prefix on top of Ubuntu on Docker.",
    "created_at": "2020-01-18T04:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454239",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">Comment 19</div>

Thanks. For now I'm trying to bootstrap gentoo prefix on top of Ubuntu on Docker.



---

archive/issue_comments_454240.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\n@ mjo you do know that the overlay has a \"vbraun\" branch where sgae-9999 checkouts Volker's merging branch do you? Pointing to some other branch is not that hard but I have never tried to test ticket that way. I mostly work on my vbraun branch so I know when something is being merged that causes problems.\n\n@ mkoeppe for info sage-on-gentoo has a tester on prefix on top of ubuntu. So at least we know it works - mostly. There a few unidentified issue in doctesting going on at the moment https://github.com/cschwan/sage-on-gentoo/issues/560",
    "created_at": "2020-01-18T04:19:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454240",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">Comment 20</div>

@ mjo you do know that the overlay has a "vbraun" branch where sgae-9999 checkouts Volker's merging branch do you? Pointing to some other branch is not that hard but I have never tried to test ticket that way. I mostly work on my vbraun branch so I know when something is being merged that causes problems.

@ mkoeppe for info sage-on-gentoo has a tester on prefix on top of ubuntu. So at least we know it works - mostly. There a few unidentified issue in doctesting going on at the moment https://github.com/cschwan/sage-on-gentoo/issues/560



---

archive/issue_comments_454241.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\na tester = a person who tests it?",
    "created_at": "2020-01-18T04:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454241",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">Comment 21</div>

a tester = a person who tests it?



---

archive/issue_comments_454242.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@mkoeppe](#comment%3A21):\n> a tester = a person who tests it?\n\nYes.",
    "created_at": "2020-01-18T04:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454242",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@mkoeppe](#comment%3A21):
> a tester = a person who tests it?

Yes.



---

archive/issue_comments_454243.json:
```json
{
    "body": "Attachment: **[Dockerfile-sage_gentoo.gz](https://github.com/sagemath/sage/files/ticket28905/Dockerfile-sage_gentoo.gz)**",
    "created_at": "2020-01-18T04:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454243",
    "user": "https://github.com/mkoeppe"
}
```

Attachment: **[Dockerfile-sage_gentoo.gz](https://github.com/sagemath/sage/files/ticket28905/Dockerfile-sage_gentoo.gz)**



---

archive/issue_comments_454244.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nAnyway, this is how far I got in case someone would like to take a look.\nSorry for hijacking the ticket.",
    "created_at": "2020-01-18T04:34:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454244",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">Comment 23</div>

Anyway, this is how far I got in case someone would like to take a look.
Sorry for hijacking the ticket.



---

archive/issue_comments_454245.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nthis branch does not go far enough: on Debian the headers are in `/usr/include/cdd/`, and\non Fedora they are in `/usr/include/cddlib/`.\n\nI think Singular is able to use cddlib headers from any of these locations.\n\nI think libcdd* ought to be tested too.",
    "created_at": "2020-01-18T09:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454245",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">Comment 24</div>

this branch does not go far enough: on Debian the headers are in `/usr/include/cdd/`, and
on Fedora they are in `/usr/include/cddlib/`.

I think Singular is able to use cddlib headers from any of these locations.

I think libcdd* ought to be tested too.



---

archive/issue_comments_454246.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nStill hoping for upstream to make a decision on the canonical install location of the headers.",
    "created_at": "2020-01-18T15:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454246",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">Comment 25</div>

Still hoping for upstream to make a decision on the canonical install location of the headers.



---

archive/issue_events_378902.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-20T14:54:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378902"
}
```



---

archive/issue_events_378903.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-20T14:54:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378903"
}
```



---

archive/issue_comments_454247.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@dimpase](#comment%3A24):\n> this branch does not go far enough: on Debian the headers are in `/usr/include/cdd/`, and\n> on Fedora they are in `/usr/include/cddlib/`.\n> \n\nI left a comment about this in the macro before I got sidetracked. It looks to me like the sage lattE and gfan spkgs only look for the cddlib headers in the standard locations, so the system cddlib will only be usable if the headers are in the standard location. Is that wrong?",
    "created_at": "2020-01-20T15:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454247",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@dimpase](#comment%3A24):
> this branch does not go far enough: on Debian the headers are in `/usr/include/cdd/`, and
> on Fedora they are in `/usr/include/cddlib/`.
> 

I left a comment about this in the macro before I got sidetracked. It looks to me like the sage lattE and gfan spkgs only look for the cddlib headers in the standard locations, so the system cddlib will only be usable if the headers are in the standard location. Is that wrong?



---

archive/issue_comments_454248.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\n`spkg-confugure.m4` can figure out the prefix, AC_SUBST it into an env.var., which can be used to modify CFLAGS/CXXFLAGS in spkg-install scripts of lattE etc.",
    "created_at": "2020-01-20T15:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454248",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">Comment 28</div>

`spkg-confugure.m4` can figure out the prefix, AC_SUBST it into an env.var., which can be used to modify CFLAGS/CXXFLAGS in spkg-install scripts of lattE etc.



---

archive/issue_comments_454249.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nReplying to [@dimpase](#comment%3A28):\n> `spkg-confugure.m4` can figure out the prefix, AC_SUBST it into an env.var., which can be used to modify CFLAGS/CXXFLAGS in spkg-install scripts of lattE etc.\n\nWell, sure, but that's a lot more involved. Checking only the standard locations is correct unless we modify those spkgs, right?",
    "created_at": "2020-01-20T15:59:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454249",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:29" align="right">Comment 29</div>

Replying to [@dimpase](#comment%3A28):
> `spkg-confugure.m4` can figure out the prefix, AC_SUBST it into an env.var., which can be used to modify CFLAGS/CXXFLAGS in spkg-install scripts of lattE etc.

Well, sure, but that's a lot more involved. Checking only the standard locations is correct unless we modify those spkgs, right?



---

archive/issue_comments_454250.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nwell, Singular goes out of its way to figure out the header location of cddlib. Indeed,\nfrom the log:\n\n```\nchecking whether to check for gfanlib... yes\nchecking setoper.h usability... yes\nchecking setoper.h presence... yes\nchecking for setoper.h... yes\nchecking cdd/setoper.h usability... no\nchecking cdd/setoper.h presence... no\nchecking for cdd/setoper.h... no\nchecking cddlib/setoper.h usability... no\nchecking cddlib/setoper.h presence... no\nchecking for cddlib/setoper.h... no\nchecking whether libcddgmp is usable... checking for dd_free_global_constants... yes\n```",
    "created_at": "2020-01-20T16:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454250",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">Comment 30</div>

well, Singular goes out of its way to figure out the header location of cddlib. Indeed,
from the log:

```
checking whether to check for gfanlib... yes
checking setoper.h usability... yes
checking setoper.h presence... yes
checking for setoper.h... yes
checking cdd/setoper.h usability... no
checking cdd/setoper.h presence... no
checking for cdd/setoper.h... no
checking cddlib/setoper.h usability... no
checking cddlib/setoper.h presence... no
checking for cddlib/setoper.h... no
checking whether libcddgmp is usable... checking for dd_free_global_constants... yes
```



---

archive/issue_comments_454251.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nI think the best solution is to:\n\n1. Merge this now, since it's correct with respect to the rest of the (current) tree.\n2. Report the fact that the headers can be installed in non-standard locations to lattE/gfan upstream.\n3. (a) If those packages make the header search more robust, great; we upgrade the spkgs and we're done. (b) If they say they won't, then we hack something together as in [#28905 comment:29](https://github.com/sagemath/sage/issues/28905#comment:29).\n4. We update the spkg-configure.m4 for cddlib to look in the non-standard locations as well.\n5. If cddlib upstream ever moves the headers, we can (at our leisure) simplify all of the checks.",
    "created_at": "2020-01-31T16:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454251",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:31" align="right">Comment 31</div>

I think the best solution is to:

1. Merge this now, since it's correct with respect to the rest of the (current) tree.
2. Report the fact that the headers can be installed in non-standard locations to lattE/gfan upstream.
3. (a) If those packages make the header search more robust, great; we upgrade the spkgs and we're done. (b) If they say they won't, then we hack something together as in [#28905 comment:29](https://github.com/sagemath/sage/issues/28905#comment:29).
4. We update the spkg-configure.m4 for cddlib to look in the non-standard locations as well.
5. If cddlib upstream ever moves the headers, we can (at our leisure) simplify all of the checks.



---

archive/issue_comments_454252.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nI am happy to accept a PR at cddlib upstream to install the headers into `cdd/` on [GitHub](../wiki/GitHub) btw.",
    "created_at": "2020-02-06T22:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454252",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:32" align="right">Comment 32</div>

I am happy to accept a PR at cddlib upstream to install the headers into `cdd/` on [GitHub](../wiki/GitHub) btw.



---

archive/issue_comments_454253.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nThe next release of cddlib will use the `cddlib` prefix for its headers. But for now, our latte and gfan packages only look for the bare `cdd.h`, so that's what we need to check for. Can we merge this now, and then update things as they change?",
    "created_at": "2020-03-26T18:18:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454253",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:33" align="right">Comment 33</div>

The next release of cddlib will use the `cddlib` prefix for its headers. But for now, our latte and gfan packages only look for the bare `cdd.h`, so that's what we need to check for. Can we merge this now, and then update things as they change?



---

archive/issue_events_378904.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-26T18:18:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378904"
}
```



---

archive/issue_events_378905.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2020-03-26T18:18:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378905"
}
```



---

archive/issue_comments_454254.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nCould you update the comment in the added file regarding the header file locations?",
    "created_at": "2020-03-26T19:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454254",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">Comment 34</div>

Could you update the comment in the added file regarding the header file locations?



---

archive/issue_comments_454255.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8508639ec8ed26effd1e285791b37cdfc54a9fb1\">8508639</a></td><td><code>spkg-configure for cddlib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba\">27d5c6b</a></td><td><code>Trac #28905: add header/library checks for cddlib.</code></td></tr></table>\n",
    "created_at": "2020-03-26T20:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454255",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35" align="right">Comment 35</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8508639ec8ed26effd1e285791b37cdfc54a9fb1">8508639</a></td><td><code>spkg-configure for cddlib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba">27d5c6b</a></td><td><code>Trac #28905: add header/library checks for cddlib.</code></td></tr></table>




---

archive/issue_comments_454256.json:
```json
{
    "body": "Changed commit from **[61117fd](https://github.com/sagemath/sagetrac-mirror/commit/61117fd8a9fb77f3bd494ca4281dad2b24ab3cd3)** to **[27d5c6b](https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba)**",
    "created_at": "2020-03-26T20:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454256",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[61117fd](https://github.com/sagemath/sagetrac-mirror/commit/61117fd8a9fb77f3bd494ca4281dad2b24ab3cd3)** to **[27d5c6b](https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba)**



---

archive/issue_comments_454257.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nSure, I added a real commit message too.",
    "created_at": "2020-03-26T20:57:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454257",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:36" align="right">Comment 36</div>

Sure, I added a real commit message too.



---

archive/issue_comments_454258.json:
```json
{
    "body": "Changed author from **Dima Pasechnik** to **Dima Pasechnik, Michael Orlitzky**",
    "created_at": "2020-03-26T20:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454258",
    "user": "https://github.com/orlitzky"
}
```

Changed author from **Dima Pasechnik** to **Dima Pasechnik, Michael Orlitzky**



---

archive/issue_comments_454259.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/28905](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/28905)** to **[u/mkoeppe/ticket/28905](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/28905)**",
    "created_at": "2020-03-26T21:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454259",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mjo/ticket/28905](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/28905)** to **[u/mkoeppe/ticket/28905](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/28905)**



---

archive/issue_comments_454260.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nRebased to  9.1.beta8\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/082be67ddfe993b1b115dabf86417972a9c312b3\">082be67</a></td><td><code>spkg-configure for cddlib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16b78ac93c0f5fcd19a3964a27ad5b7842e637e3\">16b78ac</a></td><td><code>Trac #28905: add header/library checks for cddlib.</code></td></tr></table>\n",
    "created_at": "2020-03-26T21:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454260",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">Comment 39</div>

Rebased to  9.1.beta8

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/082be67ddfe993b1b115dabf86417972a9c312b3">082be67</a></td><td><code>spkg-configure for cddlib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16b78ac93c0f5fcd19a3964a27ad5b7842e637e3">16b78ac</a></td><td><code>Trac #28905: add header/library checks for cddlib.</code></td></tr></table>




---

archive/issue_comments_454261.json:
```json
{
    "body": "Changed commit from **[27d5c6b](https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba)** to **[16b78ac](https://github.com/sagemath/sagetrac-mirror/commit/16b78ac93c0f5fcd19a3964a27ad5b7842e637e3)**",
    "created_at": "2020-03-26T21:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454261",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[27d5c6b](https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba)** to **[16b78ac](https://github.com/sagemath/sagetrac-mirror/commit/16b78ac93c0f5fcd19a3964a27ad5b7842e637e3)**



---

archive/issue_comments_454262.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nsorry, I messed this one up",
    "created_at": "2020-03-26T21:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454262",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">Comment 40</div>

sorry, I messed this one up



---

archive/issue_comments_454263.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8508639ec8ed26effd1e285791b37cdfc54a9fb1\">8508639</a></td><td><code>spkg-configure for cddlib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba\">27d5c6b</a></td><td><code>Trac #28905: add header/library checks for cddlib.</code></td></tr></table>\n",
    "created_at": "2020-03-26T21:06:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454263",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41" align="right">Comment 41</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8508639ec8ed26effd1e285791b37cdfc54a9fb1">8508639</a></td><td><code>spkg-configure for cddlib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba">27d5c6b</a></td><td><code>Trac #28905: add header/library checks for cddlib.</code></td></tr></table>




---

archive/issue_comments_454264.json:
```json
{
    "body": "Changed commit from **[16b78ac](https://github.com/sagemath/sagetrac-mirror/commit/16b78ac93c0f5fcd19a3964a27ad5b7842e637e3)** to **[27d5c6b](https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba)**",
    "created_at": "2020-03-26T21:06:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454264",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[16b78ac](https://github.com/sagemath/sagetrac-mirror/commit/16b78ac93c0f5fcd19a3964a27ad5b7842e637e3)** to **[27d5c6b](https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba)**



---

archive/issue_comments_454265.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nSet it back to your commit",
    "created_at": "2020-03-26T21:06:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454265",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">Comment 42</div>

Set it back to your commit



---

archive/issue_comments_454266.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f04c3b5dfa137a3e430f2fd6103ef53ae61b319\">0f04c3b</a></td><td><code>build/pkgs/cddlib/distros/*.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de9fb2ee41fb6a083addd6a74b6b2da7504dd9b0\">de9fb2e</a></td><td><code>build/pkgs/cddlib: Add upstream_url</code></td></tr></table>\n",
    "created_at": "2020-03-26T21:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454266",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43" align="right">Comment 43</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f04c3b5dfa137a3e430f2fd6103ef53ae61b319">0f04c3b</a></td><td><code>build/pkgs/cddlib/distros/*.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de9fb2ee41fb6a083addd6a74b6b2da7504dd9b0">de9fb2e</a></td><td><code>build/pkgs/cddlib: Add upstream_url</code></td></tr></table>




---

archive/issue_comments_454267.json:
```json
{
    "body": "Changed commit from **[27d5c6b](https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba)** to **[de9fb2e](https://github.com/sagemath/sagetrac-mirror/commit/de9fb2ee41fb6a083addd6a74b6b2da7504dd9b0)**",
    "created_at": "2020-03-26T21:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454267",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[27d5c6b](https://github.com/sagemath/sagetrac-mirror/commit/27d5c6b13e79f4ea04126253d3107068bbd5f2ba)** to **[de9fb2e](https://github.com/sagemath/sagetrac-mirror/commit/de9fb2ee41fb6a083addd6a74b6b2da7504dd9b0)**



---

archive/issue_comments_454268.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nTesting at https://github.com/mkoeppe/sage/actions/runs/64126739",
    "created_at": "2020-03-26T21:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454268",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">Comment 44</div>

Testing at https://github.com/mkoeppe/sage/actions/runs/64126739



---

archive/issue_comments_454269.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,5 @@\n \n The obstacles: installs headers in `usr/include/cdd` (and not in `/usr/include`,\n and part of executables into `/usr/lib/cdd-tools/`\n+\n+Follow-up: #29413 (Upgrade cddlib, fix cddlib header search for packages latte_int, gfan, topcom)\n``````\n",
    "created_at": "2020-03-27T12:36:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454269",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,5 @@
 
 The obstacles: installs headers in `usr/include/cdd` (and not in `/usr/include`,
 and part of executables into `/usr/lib/cdd-tools/`
+
+Follow-up: #29413 (Upgrade cddlib, fix cddlib header search for packages latte_int, gfan, topcom)
``````




---

archive/issue_comments_454270.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,6 @@\n-provide `spkg-configure.m4` to use libcdd/cdd from the system. \n-There should not be a problem with headers, after all we can install links to `$SAGE_LOCAL/include/`.\n+Provide `spkg-configure.m4` to use libcdd/cdd from the system. \n \n-Debian has libcdd-dev (library) and libcdd-tools (executables) packages.\n-\n-The obstacles: installs headers in `usr/include/cdd` (and not in `/usr/include`,\n-and part of executables into `/usr/lib/cdd-tools/`\n+This ticket is limited to systems that install headers into `/usr/include` rather than `/usr/include/cdd` (Debian) or `/usr/include/cddlib` (Fedora).\n \n Follow-up: #29413 (Upgrade cddlib, fix cddlib header search for packages latte_int, gfan, topcom)\n+\n``````\n",
    "created_at": "2020-03-27T12:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454270",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,6 @@
-provide `spkg-configure.m4` to use libcdd/cdd from the system. 
-There should not be a problem with headers, after all we can install links to `$SAGE_LOCAL/include/`.
+Provide `spkg-configure.m4` to use libcdd/cdd from the system. 
 
-Debian has libcdd-dev (library) and libcdd-tools (executables) packages.
-
-The obstacles: installs headers in `usr/include/cdd` (and not in `/usr/include`,
-and part of executables into `/usr/lib/cdd-tools/`
+This ticket is limited to systems that install headers into `/usr/include` rather than `/usr/include/cdd` (Debian) or `/usr/include/cddlib` (Fedora).
 
 Follow-up: #29413 (Upgrade cddlib, fix cddlib header search for packages latte_int, gfan, topcom)
+
``````




---

archive/issue_comments_454271.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2020-03-27T12:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454271",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_454272.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nDetects cddlib correctly on `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/537774833).\n\nWe don't have a test for Gentoo (#29105, hint hint), but I assume you have tested it there.\n\nAs expected, not detected on debian and fedora. I have created follow-up ticket #29413 for that and edited the ticket description.",
    "created_at": "2020-03-27T12:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454272",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">Comment 46</div>

Detects cddlib correctly on `archlinux-latest-standard` (https://github.com/mkoeppe/sage/runs/537774833).

We don't have a test for Gentoo (#29105, hint hint), but I assume you have tested it there.

As expected, not detected on debian and fedora. I have created follow-up ticket #29413 for that and edited the ticket description.



---

archive/issue_events_378906.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-27T12:53:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378906"
}
```



---

archive/issue_events_378907.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-27T12:53:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378907"
}
```



---

archive/issue_comments_454273.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/ticket/28905](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/28905)** to **[de9fb2e](https://github.com/sagemath/sagetrac-mirror/commit/de9fb2ee41fb6a083addd6a74b6b2da7504dd9b0)**",
    "created_at": "2020-04-05T08:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28905#issuecomment-454273",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/ticket/28905](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/ticket/28905)** to **[de9fb2e](https://github.com/sagemath/sagetrac-mirror/commit/de9fb2ee41fb6a083addd6a74b6b2da7504dd9b0)**



---

archive/issue_events_378908.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-05T08:30:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378908"
}
```



---

archive/issue_events_378909.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5aa7277403bae129e6854acc5ff983eeb0d1be90",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-04-05T08:30:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28905",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28905#event-378909"
}
```
