# Issue 28720: Method is_diagonalizable() should not raise an error for legitimate inputs

archive/issues_028483.json:
```json
{
    "body": "This\n\n```\nm = matrix(QQ, 3, [1, 1, 1, 0, 3, 3, -2, 1, 2])\nm.is_diagonalizable()\n```\nraises an error rather than giving False. The error message gives an explanation why the matrix is not diagonalizable. But an `is_*()` method should give either True or False, for legitimate inputs.\n\nAs discussed in \n\nhttps://groups.google.com/forum/#!topic/sage-support/OiS-_irTtWA\n\nwe fix this bug. Along the way, a companion method `diagonalization()` is newly added. This method is much faster than `jordan_form(transformation=True)` for diagonalizable matrices.\n\nBranch/Commit: e5b1ca33870046f4ed9bc5a3a4561fec54b54b3b\n\nReviewer: Vincent Delecroix\n\nAuthor: Kwankyu Lee\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28720\n\n",
    "closed_at": "2019-12-01T00:38:45Z",
    "created_at": "2019-11-12T01:24:51Z",
    "labels": [
        "component: linear algebra",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Method is_diagonalizable() should not raise an error for legitimate inputs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28720",
    "user": "https://github.com/kwankyu"
}
```
This

```
m = matrix(QQ, 3, [1, 1, 1, 0, 3, 3, -2, 1, 2])
m.is_diagonalizable()
```
raises an error rather than giving False. The error message gives an explanation why the matrix is not diagonalizable. But an `is_*()` method should give either True or False, for legitimate inputs.

As discussed in 

https://groups.google.com/forum/#!topic/sage-support/OiS-_irTtWA

we fix this bug. Along the way, a companion method `diagonalization()` is newly added. This method is much faster than `jordan_form(transformation=True)` for diagonalizable matrices.

Branch/Commit: e5b1ca33870046f4ed9bc5a3a4561fec54b54b3b

Reviewer: Vincent Delecroix

Author: Kwankyu Lee

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28720





---

archive/issue_comments_550569.json:
```json
{
    "body": "Changing author from \"\" to \"Kwankyu Lee\"",
    "created_at": "2019-11-12T05:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550569",
    "user": "https://github.com/kwankyu"
}
```

Changing author from "" to "Kwankyu Lee"



---

archive/issue_comments_550570.json:
```json
{
    "body": "Changing branch from \"\" to \"u/klee/28720\"",
    "created_at": "2019-11-12T05:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550570",
    "user": "https://github.com/kwankyu"
}
```

Changing branch from "" to "u/klee/28720"



---

archive/issue_comments_550571.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[277fdbd](https://github.com/sagemath/sagetrac-mirror/commit/277fdbdb7b8e0d9e904bd035008c65305503ec7f)|`Fixed is_diagonalizable() and added diagonalization()`|",
    "created_at": "2019-11-12T06:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[277fdbd](https://github.com/sagemath/sagetrac-mirror/commit/277fdbdb7b8e0d9e904bd035008c65305503ec7f)|`Fixed is_diagonalizable() and added diagonalization()`|



---

archive/issue_comments_550572.json:
```json
{
    "body": "Changing commit from \"\" to \"277fdbdb7b8e0d9e904bd035008c65305503ec7f\"",
    "created_at": "2019-11-12T06:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "277fdbdb7b8e0d9e904bd035008c65305503ec7f"



---

archive/issue_comments_550573.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-11-12T06:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550573",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_550574.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,4 +10,4 @@\n \n https://groups.google.com/forum/#!topic/sage-support/OiS-_irTtWA\n \n-we fix this bug. Along the way, a companion method `diagonalization()` is newly added.\n+we fix this bug. Along the way, a companion method `diagonalization()` is newly added. This method is much faster than `jordan_form(transformation=True)` for diagonalizable matrices.\n``````\n",
    "created_at": "2019-11-12T06:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550574",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,4 +10,4 @@
 
 https://groups.google.com/forum/#!topic/sage-support/OiS-_irTtWA
 
-we fix this bug. Along the way, a companion method `diagonalization()` is newly added.
+we fix this bug. Along the way, a companion method `diagonalization()` is newly added. This method is much faster than `jordan_form(transformation=True)` for diagonalizable matrices.
``````




---

archive/issue_comments_550575.json:
```json
{
    "body": "<a id='comment:4'></a>\nI think it is good to move authors at the begining of the file. However, you should just factorize the information. There is no need to have 10 times the same name. (many names are missing on this list as can be seen by doing a `git log`, but this is another story).",
    "created_at": "2019-11-14T03:37:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550575",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
I think it is good to move authors at the begining of the file. However, you should just factorize the information. There is no need to have 10 times the same name. (many names are missing on this list as can be seen by doing a `git log`, but this is another story).



---

archive/issue_comments_550576.json:
```json
{
    "body": "<a id='comment:5'></a>\nYou should add doctest to `diagonalization` when an error is raised.",
    "created_at": "2019-11-14T03:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550576",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>
You should add doctest to `diagonalization` when an error is raised.



---

archive/issue_comments_550577.json:
```json
{
    "body": "<a id='comment:6'></a>\n(If I count correctly there are 6 possible ways it can result in an error)",
    "created_at": "2019-11-14T03:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550577",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
(If I count correctly there are 6 possible ways it can result in an error)



---

archive/issue_comments_550578.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[e5b1ca3](https://github.com/sagemath/sagetrac-mirror/commit/e5b1ca33870046f4ed9bc5a3a4561fec54b54b3b)|`Refactored authors section; added more doctests`|",
    "created_at": "2019-11-14T09:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550578",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[e5b1ca3](https://github.com/sagemath/sagetrac-mirror/commit/e5b1ca33870046f4ed9bc5a3a4561fec54b54b3b)|`Refactored authors section; added more doctests`|



---

archive/issue_comments_550579.json:
```json
{
    "body": "Changing commit from \"277fdbdb7b8e0d9e904bd035008c65305503ec7f\" to \"e5b1ca33870046f4ed9bc5a3a4561fec54b54b3b\"",
    "created_at": "2019-11-14T09:37:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550579",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "277fdbdb7b8e0d9e904bd035008c65305503ec7f" to "e5b1ca33870046f4ed9bc5a3a4561fec54b54b3b"



---

archive/issue_comments_550580.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [vdelecroix](#comment%3A6):\n> (If I count correctly there are 6 possible ways it can result in an error)\n\n\nI added 5 ways. Is there a missing one?",
    "created_at": "2019-11-20T06:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550580",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:8'></a>
Replying to [vdelecroix](#comment%3A6):
> (If I count correctly there are 6 possible ways it can result in an error)


I added 5 ways. Is there a missing one?



---

archive/issue_comments_550581.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2019-11-20T07:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550581",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_550582.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-11-20T07:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550582",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_550583.json:
```json
{
    "body": "<a id='comment:9'></a>\nLooks good.",
    "created_at": "2019-11-20T07:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550583",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'></a>
Looks good.



---

archive/issue_comments_550584.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-12-01T00:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550584",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_089703.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-01T00:38:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28720#event-89703"
}
```



---

archive/issue_comments_550585.json:
```json
{
    "body": "Changing branch from \"u/klee/28720\" to \"e5b1ca33870046f4ed9bc5a3a4561fec54b54b3b\"",
    "created_at": "2019-12-01T00:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28720",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28720#issuecomment-550585",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/klee/28720" to "e5b1ca33870046f4ed9bc5a3a4561fec54b54b3b"
