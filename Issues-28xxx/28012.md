# Issue 28012: py3: import certain things from collections.abc

archive/issues_027775.json:
```json
{
    "assignees": [],
    "body": "Background (read\n[Python 3 documentation for the `collections` module](https://docs.python.org/3.7/library/collections.html)\nfor more detail):\n\n- [Collections Abstract Base Classes](https://docs.python.org/3.7/library/collections.abc.html)\n  (\"CABCs\") moved to the `collections.abc` module in Python 3.3.\n\n- These \"Collections Abstract Base Classes\" are: `AsyncGenerator`,\n  `AsyncIterable`, `AsyncIterator`, `Awaitable`, `Bytestring`,\n  `Callable`, `Collection`, `Container`, `Coroutine`, `Generator`,\n  `Hashable`, `ItemsView`, `Iterable`, `Iterator`, `KeysView`,\n  `Mapping`, `MappingView`, `MutableMapping`, `MutableSequence`,\n  `MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.\n\n- For backwards compatibility, CABCs continue to be visible\n  in the `collections` module through Python 3.8; and can be\n  imported either from `collections` or from `collections.abc`.\n\n- Starting with Python 3.9, CABCs must be imported from `collections.abc`.\n\n- In Python 2 they could only be imported from 'collections',\n  not from 'collections.abc'. So while Sage was keeping\n  Py2 and Py3 compatible it made sense to import from `collections`.\n\n- In Python 3.7 and Python 3.8, importing them from `collections`\n  gives a deprecation warning. This warning was silenced in Sage,\n  see #28002.\n\nIn this ticket we import the classes from `collections.abc`.\n\nWe do not suppress the silencing of the deprecation warning yet.\nSee [comment:23](#comment%3A23) and #30768.\n\n\n**CC:**  @fchapoton @jhpalmieri @slel @videlec @tscrim\n\n**Keywords:** days101, py3, collections.abc\n\n**Branch:** [4f8013611b5c27658e3ba49aea0bf1b4066b4adb](https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb)\n\n**Reviewer:** John Palmieri\n\n**Author:** Samuel Leli\u00e8vre\n\nIssue created by migration from https://trac.sagemath.org/ticket/28012\n\n",
    "closed_at": "2020-09-15T21:58:51Z",
    "created_at": "2019-06-19T00:18:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: import certain things from collections.abc",
    "type": "issue",
    "updated_at": "2020-10-13T22:44:53Z",
    "url": "https://github.com/sagemath/sage/issues/28012",
    "user": "https://github.com/slel"
}
```
Background (read
[Python 3 documentation for the `collections` module](https://docs.python.org/3.7/library/collections.html)
for more detail):

- [Collections Abstract Base Classes](https://docs.python.org/3.7/library/collections.abc.html)
  ("CABCs") moved to the `collections.abc` module in Python 3.3.

- These "Collections Abstract Base Classes" are: `AsyncGenerator`,
  `AsyncIterable`, `AsyncIterator`, `Awaitable`, `Bytestring`,
  `Callable`, `Collection`, `Container`, `Coroutine`, `Generator`,
  `Hashable`, `ItemsView`, `Iterable`, `Iterator`, `KeysView`,
  `Mapping`, `MappingView`, `MutableMapping`, `MutableSequence`,
  `MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.

- For backwards compatibility, CABCs continue to be visible
  in the `collections` module through Python 3.8; and can be
  imported either from `collections` or from `collections.abc`.

- Starting with Python 3.9, CABCs must be imported from `collections.abc`.

- In Python 2 they could only be imported from 'collections',
  not from 'collections.abc'. So while Sage was keeping
  Py2 and Py3 compatible it made sense to import from `collections`.

- In Python 3.7 and Python 3.8, importing them from `collections`
  gives a deprecation warning. This warning was silenced in Sage,
  see #28002.

In this ticket we import the classes from `collections.abc`.

We do not suppress the silencing of the deprecation warning yet.
See [comment:23](#comment%3A23) and #30768.


**CC:**  @fchapoton @jhpalmieri @slel @videlec @tscrim

**Keywords:** days101, py3, collections.abc

**Branch:** [4f8013611b5c27658e3ba49aea0bf1b4066b4adb](https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb)

**Reviewer:** John Palmieri

**Author:** Samuel Leli√®vre

Issue created by migration from https://trac.sagemath.org/ticket/28012





---

archive/issue_events_336079.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-06-19T00:18:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336079"
}
```



---

archive/issue_events_336080.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-06-19T00:18:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "08517b",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336080"
}
```



---

archive/issue_comments_438582.json:
```json
{
    "body": "**Branch:** [u/slelievre/collections.abc](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/collections.abc)",
    "created_at": "2019-06-19T00:19:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438582",
    "user": "https://github.com/slel"
}
```

**Branch:** [u/slelievre/collections.abc](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/collections.abc)



---

archive/issue_comments_438583.json:
```json
{
    "body": "**Commit:** [e04fa482bab365d19cbc5946800728b3fc382345](https://github.com/sagemath/sagetrac-mirror/commit/e04fa482bab365d19cbc5946800728b3fc382345)",
    "created_at": "2019-06-19T00:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438583",
    "user": "https://github.com/slel"
}
```

**Commit:** [e04fa482bab365d19cbc5946800728b3fc382345](https://github.com/sagemath/sagetrac-mirror/commit/e04fa482bab365d19cbc5946800728b3fc382345)



---

archive/issue_comments_438584.json:
```json
{
    "body": "**Changing keywords** from \"days101\" to \"days101, py3\".",
    "created_at": "2019-06-19T00:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438584",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "days101" to "days101, py3".



---

archive/issue_comments_438585.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e04fa482bab365d19cbc5946800728b3fc382345\">e04fa48</a></td><td><code>#28012 import from collections.abc</code></td></tr></table>\n",
    "created_at": "2019-06-19T00:20:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438585",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e04fa482bab365d19cbc5946800728b3fc382345">e04fa48</a></td><td><code>#28012 import from collections.abc</code></td></tr></table>




---

archive/issue_events_336081.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-06-19T00:21:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336081"
}
```



---

archive/issue_comments_438586.json:
```json
{
    "body": "<a id='comment:4'></a>\nNote: to check where such changes were needed I followed advice in a comment at #28002 and did\n\n```\n$ git grep \"from collections import\"\n```",
    "created_at": "2019-06-19T00:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438586",
    "user": "https://github.com/slel"
}
```

<a id='comment:4'></a>
Note: to check where such changes were needed I followed advice in a comment at #28002 and did

```
$ git grep "from collections import"
```



---

archive/issue_events_336082.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-06-19T00:27:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336082"
}
```



---

archive/issue_events_336083.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-06-19T00:27:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336083"
}
```



---

archive/issue_comments_438587.json:
```json
{
    "body": "<a id='comment:5'></a>\nMore changes are needed, as revealed by\n\n```\n$ git grep \"collections\\.\"\n```\nI'll push a commit.",
    "created_at": "2019-06-19T00:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438587",
    "user": "https://github.com/slel"
}
```

<a id='comment:5'></a>
More changes are needed, as revealed by

```
$ git grep "collections\."
```
I'll push a commit.



---

archive/issue_comments_438588.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe relevant lines in the output of `git grep \"collections\\.\"` seem to be:\n\n```\nsrc/sage/arith/misc.py:    if isinstance(ks[0], collections.Iterable):\nsrc/sage/combinat/finite_state_machine.py:                         collections.Iterator):\nsrc/sage/combinat/ranker.py:    from collections.abc import Iterable, Sequence\nsrc/sage/combinat/ranker.py:    tuple (or more generally a :class:`collections.Sequence`), an\nsrc/sage/combinat/ranker.py:    :class:`collections.Iterable`). See :trac:`15919`.\nsrc/sage/combinat/ranker.py:    Lists, tuples, and other :class:`sequences <collections.Sequence>`::\nsrc/sage/combinat/shuffle.py:        assert(isinstance(l1, collections.Iterable) and\nsrc/sage/combinat/shuffle.py:               isinstance(l2, collections.Iterable)\nsrc/sage/combinat/shuffle.py:        assert(all(isinstance(elem, collections.Iterable) for elem in l1))\nsrc/sage/combinat/shuffle.py:        assert(all(isinstance(elem, collections.Iterable) for elem in l2))\nsrc/sage/combinat/shuffle.py:        assert(isinstance(l1, collections.Iterable) and\nsrc/sage/combinat/shuffle.py:               isinstance(l2, collections.Iterable)\nsrc/sage/databases/conway.py:class DictInMapping(collections.Mapping):\nsrc/sage/databases/conway.py:class ConwayPolynomials(collections.Mapping):\nsrc/sage/game_theory/normal_form_game.py:    from collections.abc import MutableMapping\nsrc/sage/geometry/cone.py:                            collections.Hashable,\nsrc/sage/geometry/cone.py:                            collections.Iterable):\nsrc/sage/geometry/cone.py:                                   collections.Container):\nsrc/sage/geometry/fan.py:                            collections.Callable,\nsrc/sage/geometry/fan.py:                            collections.Container):\nsrc/sage/geometry/lattice_polytope.py:class LatticePolytopeClass(SageObject, collections.Hashable):\nsrc/sage/geometry/lattice_polytope.py:                   collections.Hashable):\nsrc/sage/matrix/matrix_integer_sparse.pyx:    from collections.abc import Iterator, Sequence\nsrc/sage/matrix/matrix_modn_sparse.pyx:    from collections.abc import Iterator, Sequence\nsrc/sage/misc/converting_dict.py:            if isinstance(arg, collections.Mapping):\nsrc/sage/modules/with_basis/morphism.py:        if not isinstance(diagonal, collections.Callable):\nsrc/sage/plot/colors.py:class Colormaps(collections.MutableMapping):\nsrc/sage/plot/point.py:    if isinstance(points, collections.Iterator):\nsrc/sage/repl/ipython_kernel/interact.py:    from collections.abc import Iterable, Iterator\nsrc/sage/repl/ipython_kernel/widgets_sagenb.py:    from collections.abc import Iterable, Sequence\n```",
    "created_at": "2019-06-19T00:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438588",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>
The relevant lines in the output of `git grep "collections\."` seem to be:

```
src/sage/arith/misc.py:    if isinstance(ks[0], collections.Iterable):
src/sage/combinat/finite_state_machine.py:                         collections.Iterator):
src/sage/combinat/ranker.py:    from collections.abc import Iterable, Sequence
src/sage/combinat/ranker.py:    tuple (or more generally a :class:`collections.Sequence`), an
src/sage/combinat/ranker.py:    :class:`collections.Iterable`). See :trac:`15919`.
src/sage/combinat/ranker.py:    Lists, tuples, and other :class:`sequences <collections.Sequence>`::
src/sage/combinat/shuffle.py:        assert(isinstance(l1, collections.Iterable) and
src/sage/combinat/shuffle.py:               isinstance(l2, collections.Iterable)
src/sage/combinat/shuffle.py:        assert(all(isinstance(elem, collections.Iterable) for elem in l1))
src/sage/combinat/shuffle.py:        assert(all(isinstance(elem, collections.Iterable) for elem in l2))
src/sage/combinat/shuffle.py:        assert(isinstance(l1, collections.Iterable) and
src/sage/combinat/shuffle.py:               isinstance(l2, collections.Iterable)
src/sage/databases/conway.py:class DictInMapping(collections.Mapping):
src/sage/databases/conway.py:class ConwayPolynomials(collections.Mapping):
src/sage/game_theory/normal_form_game.py:    from collections.abc import MutableMapping
src/sage/geometry/cone.py:                            collections.Hashable,
src/sage/geometry/cone.py:                            collections.Iterable):
src/sage/geometry/cone.py:                                   collections.Container):
src/sage/geometry/fan.py:                            collections.Callable,
src/sage/geometry/fan.py:                            collections.Container):
src/sage/geometry/lattice_polytope.py:class LatticePolytopeClass(SageObject, collections.Hashable):
src/sage/geometry/lattice_polytope.py:                   collections.Hashable):
src/sage/matrix/matrix_integer_sparse.pyx:    from collections.abc import Iterator, Sequence
src/sage/matrix/matrix_modn_sparse.pyx:    from collections.abc import Iterator, Sequence
src/sage/misc/converting_dict.py:            if isinstance(arg, collections.Mapping):
src/sage/modules/with_basis/morphism.py:        if not isinstance(diagonal, collections.Callable):
src/sage/plot/colors.py:class Colormaps(collections.MutableMapping):
src/sage/plot/point.py:    if isinstance(points, collections.Iterator):
src/sage/repl/ipython_kernel/interact.py:    from collections.abc import Iterable, Iterator
src/sage/repl/ipython_kernel/widgets_sagenb.py:    from collections.abc import Iterable, Sequence
```



---

archive/issue_comments_438589.json:
```json
{
    "body": "<a id='comment:7'></a>\nTwo comments: there may be instances of this in other packages, like matplotlib. Also, it's not just warnings silenced in #28002, but an older silencing in `sage/all.py`.",
    "created_at": "2019-06-19T01:24:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438589",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:7'></a>
Two comments: there may be instances of this in other packages, like matplotlib. Also, it's not just warnings silenced in #28002, but an older silencing in `sage/all.py`.



---

archive/issue_comments_438590.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,11 +9,11 @@\n `Mapping`, `MappingView`, `MutableMapping`, `MutableSequence`,\n `MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.\n \n-In Python 3.8 importing them from `collections` will stop working.\n+In Python 3.9 importing them from `collections` will stop working.\n In Python 3.3 to 3.7, they can be imported from `collections` or\n from `collections.abc` (it gives the exact same classes).\n In Python 3.7, importing them from `collections` prints a\n-deprecation warning, since Python 3.8 is getting near.\n+deprecation warning, since Python 3.9 is getting nearer.\n \n In Python 2 they can only be imported from 'collections',\n not from 'collections.abc'.\n``````\n",
    "created_at": "2019-06-19T12:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438590",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,11 +9,11 @@
 `Mapping`, `MappingView`, `MutableMapping`, `MutableSequence`,
 `MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.
 
-In Python 3.8 importing them from `collections` will stop working.
+In Python 3.9 importing them from `collections` will stop working.
 In Python 3.3 to 3.7, they can be imported from `collections` or
 from `collections.abc` (it gives the exact same classes).
 In Python 3.7, importing them from `collections` prints a
-deprecation warning, since Python 3.8 is getting near.
+deprecation warning, since Python 3.9 is getting nearer.
 
 In Python 2 they can only be imported from 'collections',
 not from 'collections.abc'.
``````




---

archive/issue_comments_438591.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,9 +10,9 @@\n `MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.\n \n In Python 3.9 importing them from `collections` will stop working.\n-In Python 3.3 to 3.7, they can be imported from `collections` or\n+In Python 3.3 to 3.8, they can be imported from `collections` or\n from `collections.abc` (it gives the exact same classes).\n-In Python 3.7, importing them from `collections` prints a\n+In Python 3.7 and 3.8, importing them from `collections` prints a\n deprecation warning, since Python 3.9 is getting nearer.\n \n In Python 2 they can only be imported from 'collections',\n``````\n",
    "created_at": "2019-06-19T12:40:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438591",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,9 +10,9 @@
 `MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.
 
 In Python 3.9 importing them from `collections` will stop working.
-In Python 3.3 to 3.7, they can be imported from `collections` or
+In Python 3.3 to 3.8, they can be imported from `collections` or
 from `collections.abc` (it gives the exact same classes).
-In Python 3.7, importing them from `collections` prints a
+In Python 3.7 and 3.8, importing them from `collections` prints a
 deprecation warning, since Python 3.9 is getting nearer.
 
 In Python 2 they can only be imported from 'collections',
``````




---

archive/issue_comments_438592.json:
```json
{
    "body": "<a id='comment:10'></a>\nMoving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).",
    "created_at": "2019-07-03T11:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438592",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
Moving tickets from the Sage 8.8 milestone that have been actively worked on in the last six months to the next release milestone (optimistically).



---

archive/issue_events_336084.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336084"
}
```



---

archive/issue_events_336085.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-03T11:37:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336085"
}
```



---

archive/issue_comments_438593.json:
```json
{
    "body": "<a id='comment:11'></a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438593",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>
Ticket retargeted after milestone closed



---

archive/issue_events_336086.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336086"
}
```



---

archive/issue_events_336087.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336087"
}
```



---

archive/issue_comments_438594.json:
```json
{
    "body": "<a id='comment:12'></a>\nMoving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438594",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_336088.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336088"
}
```



---

archive/issue_events_336089.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336089"
}
```



---

archive/issue_events_336090.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-20T23:11:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336090"
}
```



---

archive/issue_events_336091.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-20T23:11:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336091"
}
```



---

archive/issue_comments_438595.json:
```json
{
    "body": "<a id='comment:14'></a>\nNow that we don't support py2 any more, the try/except approach is not needed any more.",
    "created_at": "2020-08-22T00:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438595",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Now that we don't support py2 any more, the try/except approach is not needed any more.



---

archive/issue_comments_438596.json:
```json
{
    "body": "**Changing keywords** from \"days101, py3\" to \"days101, py3, collections.abc\".",
    "created_at": "2020-08-22T05:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438596",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "days101, py3" to "days101, py3, collections.abc".



---

archive/issue_events_336092.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-08-22T05:56:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336092"
}
```



---

archive/issue_events_336093.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-08-22T05:56:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336093"
}
```



---

archive/issue_comments_438597.json:
```json
{
    "body": "<a id='comment:15'></a>\nSorry for letting over a year pass by. Here is a new branch. Please review.\n\nThe file `finite_state_machine.py` has `import collections`\nand then `collections.defaultdict`, `collections.OrderedDict`,\n`collections.deque`, `collections.namedtuple`, `collections.abc.Iterator`.\n\nWould there be an advantage, or a disadvantage, to doing the following instead:\n\n```\nfrom collections import defaultdict, deque, namedtuple, OrderedDict\nfrom collections.abc import Iterator\n```\nand then using `defaultdict`, `OrderedDict`, `deque`, `namedtuple`, `Iterator`?\n\nI changed to that style in some other files.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3\">2187c31</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>\n",
    "created_at": "2020-08-22T05:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438597",
    "user": "https://github.com/slel"
}
```

<a id='comment:15'></a>
Sorry for letting over a year pass by. Here is a new branch. Please review.

The file `finite_state_machine.py` has `import collections`
and then `collections.defaultdict`, `collections.OrderedDict`,
`collections.deque`, `collections.namedtuple`, `collections.abc.Iterator`.

Would there be an advantage, or a disadvantage, to doing the following instead:

```
from collections import defaultdict, deque, namedtuple, OrderedDict
from collections.abc import Iterator
```
and then using `defaultdict`, `OrderedDict`, `deque`, `namedtuple`, `Iterator`?

I changed to that style in some other files.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3">2187c31</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>




---

archive/issue_comments_438598.json:
```json
{
    "body": "**Changing commit** from \"[e04fa482bab365d19cbc5946800728b3fc382345](https://github.com/sagemath/sagetrac-mirror/commit/e04fa482bab365d19cbc5946800728b3fc382345)\" to \"[2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3](https://github.com/sagemath/sagetrac-mirror/commit/2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3)\".",
    "created_at": "2020-08-22T05:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438598",
    "user": "https://github.com/slel"
}
```

**Changing commit** from "[e04fa482bab365d19cbc5946800728b3fc382345](https://github.com/sagemath/sagetrac-mirror/commit/e04fa482bab365d19cbc5946800728b3fc382345)" to "[2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3](https://github.com/sagemath/sagetrac-mirror/commit/2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3)".



---

archive/issue_comments_438599.json:
```json
{
    "body": "**Changing branch** from \"[u/slelievre/collections.abc](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/collections.abc)\" to \"[public/ticket/28012-collections.abc](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/28012-collections.abc)\".",
    "created_at": "2020-08-22T05:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438599",
    "user": "https://github.com/slel"
}
```

**Changing branch** from "[u/slelievre/collections.abc](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/collections.abc)" to "[public/ticket/28012-collections.abc](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/28012-collections.abc)".



---

archive/issue_comments_438600.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29faddf94c784f0a08e0ad7a106c9f3e3a2c990b\">29faddf</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>\n",
    "created_at": "2020-08-22T06:07:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438600",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29faddf94c784f0a08e0ad7a106c9f3e3a2c990b">29faddf</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>




---

archive/issue_comments_438601.json:
```json
{
    "body": "**Changing commit** from \"[2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3](https://github.com/sagemath/sagetrac-mirror/commit/2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3)\" to \"[29faddf94c784f0a08e0ad7a106c9f3e3a2c990b](https://github.com/sagemath/sagetrac-mirror/commit/29faddf94c784f0a08e0ad7a106c9f3e3a2c990b)\".",
    "created_at": "2020-08-22T06:07:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438601",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3](https://github.com/sagemath/sagetrac-mirror/commit/2187c31c9dac5a4d53cfcf5a8e271ed46d03fac3)" to "[29faddf94c784f0a08e0ad7a106c9f3e3a2c990b](https://github.com/sagemath/sagetrac-mirror/commit/29faddf94c784f0a08e0ad7a106c9f3e3a2c990b)".



---

archive/issue_comments_438602.json:
```json
{
    "body": "<a id='comment:17'></a>\nI had left one file out, I forced push.",
    "created_at": "2020-08-22T06:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438602",
    "user": "https://github.com/slel"
}
```

<a id='comment:17'></a>
I had left one file out, I forced push.



---

archive/issue_comments_438603.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,33 +1,31 @@\n-As the [Python 3 documentation for the `collections` module](https://docs.python.org/3.7/library/collections.html) explains,\n-some [Collections Abstract Base Classes](https://docs.python.org/3.7/library/collections.abc.html#collections-abstract-base-classes)\n-moved to the [`collections.abc`](https://docs.python.org/3.7/library/collections.abc.html#module-collections.abc) module, staying visible in `collections` through Python 3.7.\n+Background (read\n+[Python 3 documentation for the `collections` module](https://docs.python.org/3.7/library/collections.html)\n+for more detail):\n \n-These \"Collections Abstract Base Classes\" currently include\n-`AsyncGenerator`, `AsyncIterable`, `AsyncIterator`, `Awaitable`,\n-`Bytestring`, `Callable`, `Collection`, `Container`, `Coroutine`,\n-`Generator`, `Hashable`, `ItemsView`, `Iterable`, `Iterator`, `KeysView`,\n-`Mapping`, `MappingView`, `MutableMapping`, `MutableSequence`,\n-`MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.\n+- [Collections Abstract Base Classes](https://docs.python.org/3.7/library/collections.abc.html)\n+  (\"CABCs\") moved to the `collections.abc` module in Python 3.3.\n \n-In Python 3.9 importing them from `collections` will stop working.\n-In Python 3.3 to 3.8, they can be imported from `collections` or\n-from `collections.abc` (it gives the exact same classes).\n-In Python 3.7 and 3.8, importing them from `collections` prints a\n-deprecation warning, since Python 3.9 is getting nearer.\n+- These \"Collections Abstract Base Classes\" are: `AsyncGenerator`,\n+  `AsyncIterable`, `AsyncIterator`, `Awaitable`, `Bytestring`,\n+  `Callable`, `Collection`, `Container`, `Coroutine`, `Generator`,\n+  `Hashable`, `ItemsView`, `Iterable`, `Iterator`, `KeysView`,\n+  `Mapping`, `MappingView`, `MutableMapping`, `MutableSequence`,\n+  `MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.\n \n-In Python 2 they can only be imported from 'collections',\n-not from 'collections.abc'.\n+- For backwards compatibility, CABCs continue to be visible\n+  in the `collections` module through Python 3.8; and can be\n+  imported either from `collections` or from `collections.abc`.\n \n-In Sage we have a few such imports:\n-`Iterable`, `Iterator`, `MutableMapping`, `Sequence`.\n+- Starting with Python 3.9, CABCs must be imported from `collections.abc`.\n \n-We deal with this using a try/except block:\n+- In Python 2 they could only be imported from 'collections',\n+  not from 'collections.abc'. So while Sage was keeping\n+  Py2 and Py3 compatible it made sense to import from `collections`.\n \n-```\n-try:  # works in Python >= 3.3\n-    from collections.abc import Sequence\n-except ImportError:  # Python 2, Python <= 3.2\n-    from collections import Sequence\n-```\n+- In Python 3.7 and Python 3.8, importing them from `collections`\n+  gives a deprecation warning. This warning was silenced in Sage,\n+  see #28002.\n \n-We can then revert the silencing of warnings from #28002.\n+In this ticket we import the classes from `collections.abc`\n+and suppress the silencing of the deprecation warning.\n+\n``````\n",
    "created_at": "2020-08-22T06:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438603",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,33 +1,31 @@
-As the [Python 3 documentation for the `collections` module](https://docs.python.org/3.7/library/collections.html) explains,
-some [Collections Abstract Base Classes](https://docs.python.org/3.7/library/collections.abc.html#collections-abstract-base-classes)
-moved to the [`collections.abc`](https://docs.python.org/3.7/library/collections.abc.html#module-collections.abc) module, staying visible in `collections` through Python 3.7.
+Background (read
+[Python 3 documentation for the `collections` module](https://docs.python.org/3.7/library/collections.html)
+for more detail):
 
-These "Collections Abstract Base Classes" currently include
-`AsyncGenerator`, `AsyncIterable`, `AsyncIterator`, `Awaitable`,
-`Bytestring`, `Callable`, `Collection`, `Container`, `Coroutine`,
-`Generator`, `Hashable`, `ItemsView`, `Iterable`, `Iterator`, `KeysView`,
-`Mapping`, `MappingView`, `MutableMapping`, `MutableSequence`,
-`MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.
+- [Collections Abstract Base Classes](https://docs.python.org/3.7/library/collections.abc.html)
+  ("CABCs") moved to the `collections.abc` module in Python 3.3.
 
-In Python 3.9 importing them from `collections` will stop working.
-In Python 3.3 to 3.8, they can be imported from `collections` or
-from `collections.abc` (it gives the exact same classes).
-In Python 3.7 and 3.8, importing them from `collections` prints a
-deprecation warning, since Python 3.9 is getting nearer.
+- These "Collections Abstract Base Classes" are: `AsyncGenerator`,
+  `AsyncIterable`, `AsyncIterator`, `Awaitable`, `Bytestring`,
+  `Callable`, `Collection`, `Container`, `Coroutine`, `Generator`,
+  `Hashable`, `ItemsView`, `Iterable`, `Iterator`, `KeysView`,
+  `Mapping`, `MappingView`, `MutableMapping`, `MutableSequence`,
+  `MutableSet`, `Reversible`, `Sequence`, `Set`, `Sized`, `ValuesView`.
 
-In Python 2 they can only be imported from 'collections',
-not from 'collections.abc'.
+- For backwards compatibility, CABCs continue to be visible
+  in the `collections` module through Python 3.8; and can be
+  imported either from `collections` or from `collections.abc`.
 
-In Sage we have a few such imports:
-`Iterable`, `Iterator`, `MutableMapping`, `Sequence`.
+- Starting with Python 3.9, CABCs must be imported from `collections.abc`.
 
-We deal with this using a try/except block:
+- In Python 2 they could only be imported from 'collections',
+  not from 'collections.abc'. So while Sage was keeping
+  Py2 and Py3 compatible it made sense to import from `collections`.
 
-```
-try:  # works in Python >= 3.3
-    from collections.abc import Sequence
-except ImportError:  # Python 2, Python <= 3.2
-    from collections import Sequence
-```
+- In Python 3.7 and Python 3.8, importing them from `collections`
+  gives a deprecation warning. This warning was silenced in Sage,
+  see #28002.
 
-We can then revert the silencing of warnings from #28002.
+In this ticket we import the classes from `collections.abc`
+and suppress the silencing of the deprecation warning.
+
``````




---

archive/issue_comments_438604.json:
```json
{
    "body": "<a id='comment:19'></a>\nVincent, I now see you already did the work at #28315 a year ago.\n\nSorry for delaying this. Would you like to review?",
    "created_at": "2020-08-22T06:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438604",
    "user": "https://github.com/slel"
}
```

<a id='comment:19'></a>
Vincent, I now see you already did the work at #28315 a year ago.

Sorry for delaying this. Would you like to review?



---

archive/issue_comments_438605.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/489eccff3e15a229539b6086f5b5276dee366888\">489eccf</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>\n",
    "created_at": "2020-09-05T09:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438605",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/489eccff3e15a229539b6086f5b5276dee366888">489eccf</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>




---

archive/issue_comments_438606.json:
```json
{
    "body": "**Changing commit** from \"[29faddf94c784f0a08e0ad7a106c9f3e3a2c990b](https://github.com/sagemath/sagetrac-mirror/commit/29faddf94c784f0a08e0ad7a106c9f3e3a2c990b)\" to \"[489eccff3e15a229539b6086f5b5276dee366888](https://github.com/sagemath/sagetrac-mirror/commit/489eccff3e15a229539b6086f5b5276dee366888)\".",
    "created_at": "2020-09-05T09:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438606",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[29faddf94c784f0a08e0ad7a106c9f3e3a2c990b](https://github.com/sagemath/sagetrac-mirror/commit/29faddf94c784f0a08e0ad7a106c9f3e3a2c990b)" to "[489eccff3e15a229539b6086f5b5276dee366888](https://github.com/sagemath/sagetrac-mirror/commit/489eccff3e15a229539b6086f5b5276dee366888)".



---

archive/issue_comments_438607.json:
```json
{
    "body": "<a id='comment:22'></a>\nRebased on 9.2.beta11\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/489eccff3e15a229539b6086f5b5276dee366888\">489eccf</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>\n",
    "created_at": "2020-09-05T09:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438607",
    "user": "https://github.com/slel"
}
```

<a id='comment:22'></a>
Rebased on 9.2.beta11

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/489eccff3e15a229539b6086f5b5276dee366888">489eccf</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>




---

archive/issue_comments_438608.json:
```json
{
    "body": "<a id='comment:23'></a>\nI'm getting some deprecation warnings. Some can be fixed by this:\n\n```diff\ndiff --git a/src/sage/repl/ipython_kernel/interact.py b/src/sage/repl/ipython_kernel/interact.py\nindex 5fb318a6e4..ac0376ca63 100644\n--- a/src/sage/repl/ipython_kernel/interact.py\n+++ b/src/sage/repl/ipython_kernel/interact.py\n@@ -35,7 +35,8 @@ EXAMPLES::\n \n from ipywidgets.widgets import SelectionSlider, ValueWidget, ToggleButtons\n from ipywidgets.widgets.interaction import interactive, signature\n-from collections import Iterable, Iterator, OrderedDict\n+from collections.abc import Iterable, Iterator\n+from collections import OrderedDict\n from .widgets import EvalText, SageColorPicker\n from .widgets_sagenb import input_grid\n from sage.structure.element import parent\n```\nSome are coming from other Python packages, though. (This is with a Sage build using a system Python 3.7.) For example, one doctest fails because of\n\n```\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta11/local/lib/python3.7/site-packages/babel/localedata.py\", line 17, in <module>\n        from collections import MutableMapping\n```\nanother with\n\n```\n      File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta11/local/lib/python3.7/site-packages/requests/packages/urllib3/util/selectors.py\", line 11, in <module>\n        from collections import namedtuple, Mapping\n```\nMaybe we need to delay the suppression of the silencing of the deprecation warning. ;)",
    "created_at": "2020-09-05T17:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438608",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>
I'm getting some deprecation warnings. Some can be fixed by this:

```diff
diff --git a/src/sage/repl/ipython_kernel/interact.py b/src/sage/repl/ipython_kernel/interact.py
index 5fb318a6e4..ac0376ca63 100644
--- a/src/sage/repl/ipython_kernel/interact.py
+++ b/src/sage/repl/ipython_kernel/interact.py
@@ -35,7 +35,8 @@ EXAMPLES::
 
 from ipywidgets.widgets import SelectionSlider, ValueWidget, ToggleButtons
 from ipywidgets.widgets.interaction import interactive, signature
-from collections import Iterable, Iterator, OrderedDict
+from collections.abc import Iterable, Iterator
+from collections import OrderedDict
 from .widgets import EvalText, SageColorPicker
 from .widgets_sagenb import input_grid
 from sage.structure.element import parent
```
Some are coming from other Python packages, though. (This is with a Sage build using a system Python 3.7.) For example, one doctest fails because of

```
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta11/local/lib/python3.7/site-packages/babel/localedata.py", line 17, in <module>
        from collections import MutableMapping
```
another with

```
      File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-9.2.beta11/local/lib/python3.7/site-packages/requests/packages/urllib3/util/selectors.py", line 11, in <module>
        from collections import namedtuple, Mapping
```
Maybe we need to delay the suppression of the silencing of the deprecation warning. ;)



---

archive/issue_events_336094.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-05T20:10:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336094"
}
```



---

archive/issue_events_336095.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-05T20:10:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336095"
}
```



---

archive/issue_comments_438609.json:
```json
{
    "body": "<a id='comment:24'></a>\nI agree:\n\n- `src/repl_ipython_kernel/interact.py` does need the change you say\n- suppressing the silencing of the warnings does need to be delayed\n\nI will take care of that. Any advice about my question in [comment:15]?",
    "created_at": "2020-09-05T20:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438609",
    "user": "https://github.com/slel"
}
```

<a id='comment:24'></a>
I agree:

- `src/repl_ipython_kernel/interact.py` does need the change you say
- suppressing the silencing of the warnings does need to be delayed

I will take care of that. Any advice about my question in [comment:15]?



---

archive/issue_comments_438610.json:
```json
{
    "body": "<a id='comment:25'></a>\nThe typical (but not universal) Sage style seems to be \"from blah import foo\" and then \"foo(...)\" rather than \"import blah\" and then \"blah.foo(...)\". So that's what I would choose, as you suggested.",
    "created_at": "2020-09-05T20:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438610",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:25'></a>
The typical (but not universal) Sage style seems to be "from blah import foo" and then "foo(...)" rather than "import blah" and then "blah.foo(...)". So that's what I would choose, as you suggested.



---

archive/issue_comments_438611.json:
```json
{
    "body": "**Changing commit** from \"[489eccff3e15a229539b6086f5b5276dee366888](https://github.com/sagemath/sagetrac-mirror/commit/489eccff3e15a229539b6086f5b5276dee366888)\" to \"[1ee0124092f2759a2958905fb19402bca9bcffec](https://github.com/sagemath/sagetrac-mirror/commit/1ee0124092f2759a2958905fb19402bca9bcffec)\".",
    "created_at": "2020-09-07T22:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438611",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[489eccff3e15a229539b6086f5b5276dee366888](https://github.com/sagemath/sagetrac-mirror/commit/489eccff3e15a229539b6086f5b5276dee366888)" to "[1ee0124092f2759a2958905fb19402bca9bcffec](https://github.com/sagemath/sagetrac-mirror/commit/1ee0124092f2759a2958905fb19402bca9bcffec)".



---

archive/issue_comments_438612.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ee0124092f2759a2958905fb19402bca9bcffec\">1ee0124</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>\n",
    "created_at": "2020-09-07T22:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438612",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ee0124092f2759a2958905fb19402bca9bcffec">1ee0124</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>




---

archive/issue_comments_438613.json:
```json
{
    "body": "**Changing commit** from \"[1ee0124092f2759a2958905fb19402bca9bcffec](https://github.com/sagemath/sagetrac-mirror/commit/1ee0124092f2759a2958905fb19402bca9bcffec)\" to \"[0ce9e4043a959f5f2a21ad59f7179a2485c47575](https://github.com/sagemath/sagetrac-mirror/commit/0ce9e4043a959f5f2a21ad59f7179a2485c47575)\".",
    "created_at": "2020-09-07T22:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438613",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[1ee0124092f2759a2958905fb19402bca9bcffec](https://github.com/sagemath/sagetrac-mirror/commit/1ee0124092f2759a2958905fb19402bca9bcffec)" to "[0ce9e4043a959f5f2a21ad59f7179a2485c47575](https://github.com/sagemath/sagetrac-mirror/commit/0ce9e4043a959f5f2a21ad59f7179a2485c47575)".



---

archive/issue_comments_438614.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ce9e4043a959f5f2a21ad59f7179a2485c47575\">0ce9e40</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>\n",
    "created_at": "2020-09-07T22:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438614",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ce9e4043a959f5f2a21ad59f7179a2485c47575">0ce9e40</a></td><td><code>t-28012: Collections Abstract Base Classes</code></td></tr></table>




---

archive/issue_comments_438615.json:
```json
{
    "body": "<a id='comment:28'></a>\nFixed and rebased on 9.2.beta12. Sorry for one more force-push.",
    "created_at": "2020-09-07T22:43:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438615",
    "user": "https://github.com/slel"
}
```

<a id='comment:28'></a>
Fixed and rebased on 9.2.beta12. Sorry for one more force-push.



---

archive/issue_events_336096.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-07T22:43:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336096"
}
```



---

archive/issue_events_336097.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-07T22:43:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336097"
}
```



---

archive/issue_comments_438616.json:
```json
{
    "body": "<a id='comment:29'></a>\nStill needs work. Almost there. Will push shortly.",
    "created_at": "2020-09-08T03:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438616",
    "user": "https://github.com/slel"
}
```

<a id='comment:29'></a>
Still needs work. Almost there. Will push shortly.



---

archive/issue_events_336098.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-08T03:44:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336098"
}
```



---

archive/issue_events_336099.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-08T03:44:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336099"
}
```



---

archive/issue_comments_438617.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb\">4f80136</a></td><td><code>t-28012: collections.abc</code></td></tr></table>\n",
    "created_at": "2020-09-10T17:58:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438617",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb">4f80136</a></td><td><code>t-28012: collections.abc</code></td></tr></table>




---

archive/issue_comments_438618.json:
```json
{
    "body": "**Changing commit** from \"[0ce9e4043a959f5f2a21ad59f7179a2485c47575](https://github.com/sagemath/sagetrac-mirror/commit/0ce9e4043a959f5f2a21ad59f7179a2485c47575)\" to \"[4f8013611b5c27658e3ba49aea0bf1b4066b4adb](https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb)\".",
    "created_at": "2020-09-10T17:58:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438618",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0ce9e4043a959f5f2a21ad59f7179a2485c47575](https://github.com/sagemath/sagetrac-mirror/commit/0ce9e4043a959f5f2a21ad59f7179a2485c47575)" to "[4f8013611b5c27658e3ba49aea0bf1b4066b4adb](https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb)".



---

archive/issue_comments_438619.json:
```json
{
    "body": "<a id='comment:31'></a>\nPlease review.",
    "created_at": "2020-09-10T17:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438619",
    "user": "https://github.com/slel"
}
```

<a id='comment:31'></a>
Please review.



---

archive/issue_events_336100.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-10T17:59:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336100"
}
```



---

archive/issue_events_336101.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-10T17:59:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336101"
}
```



---

archive/issue_events_336102.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-09-10T20:34:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336102"
}
```



---

archive/issue_events_336103.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-09-10T20:34:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336103"
}
```



---

archive/issue_comments_438620.json:
```json
{
    "body": "<a id='comment:32'></a>\nLooks good to me.",
    "created_at": "2020-09-10T20:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438620",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:32'></a>
Looks good to me.



---

archive/issue_comments_438621.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2020-09-10T20:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438621",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_comments_438622.json:
```json
{
    "body": "**Changing branch** from \"[public/ticket/28012-collections.abc](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/28012-collections.abc)\" to \"[4f8013611b5c27658e3ba49aea0bf1b4066b4adb](https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb)\".",
    "created_at": "2020-09-15T21:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438622",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/ticket/28012-collections.abc](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/28012-collections.abc)" to "[4f8013611b5c27658e3ba49aea0bf1b4066b4adb](https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb)".



---

archive/issue_events_336104.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-15T21:58:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336104"
}
```



---

archive/issue_events_336105.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "395be93987973329a427dac243a1dacc92a02308",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-09-15T21:58:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336105"
}
```



---

archive/issue_events_336106.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T22:01:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336106"
}
```



---

archive/issue_events_336107.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T22:01:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28012#event-336107"
}
```



---

archive/issue_comments_438623.json:
```json
{
    "body": "<a id='comment:35'></a>\nFollow-up at #30768 for unsilencing the deprecation warning.",
    "created_at": "2020-10-13T22:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438623",
    "user": "https://github.com/slel"
}
```

<a id='comment:35'></a>
Follow-up at #30768 for unsilencing the deprecation warning.



---

archive/issue_comments_438624.json:
```json
{
    "body": "**Changing commit** from \"[4f8013611b5c27658e3ba49aea0bf1b4066b4adb](https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb)\" to \"\".",
    "created_at": "2020-10-13T22:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438624",
    "user": "https://github.com/slel"
}
```

**Changing commit** from "[4f8013611b5c27658e3ba49aea0bf1b4066b4adb](https://github.com/sagemath/sagetrac-mirror/commit/4f8013611b5c27658e3ba49aea0bf1b4066b4adb)" to "".



---

archive/issue_comments_438625.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,6 +26,8 @@\n   gives a deprecation warning. This warning was silenced in Sage,\n   see #28002.\n \n-In this ticket we import the classes from `collections.abc`\n-and suppress the silencing of the deprecation warning.\n+In this ticket we import the classes from `collections.abc`.\n \n+We do not suppress the silencing of the deprecation warning yet.\n+See [comment:23](#comment%3A23) and #30768.\n+\n``````\n",
    "created_at": "2020-10-13T22:44:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28012#issuecomment-438625",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,6 +26,8 @@
   gives a deprecation warning. This warning was silenced in Sage,
   see #28002.
 
-In this ticket we import the classes from `collections.abc`
-and suppress the silencing of the deprecation warning.
+In this ticket we import the classes from `collections.abc`.
 
+We do not suppress the silencing of the deprecation warning yet.
+See [comment:23](#comment%3A23) and #30768.
+
``````

