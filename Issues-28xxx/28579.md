# Issue 28579: Wedge Product with Scalar Fields

archive/issues_028342.json:
```json
{
    "body": "The wedge product of differential forms was not compatible with scalar fields:\n\n```\nsage: M = Manifold(2, 'M')\nsage: c_cart.<x,y> = M.chart()\nsage: a = M.diff_form(1, [x, y], name='a')\nsage: f = M.scalar_field(x^2, name='f')\nsage: a.wedge(f)\nAttributeError                            Traceback (most recent call last)\n<ipython-input-1-039619b3382c> in <module>()\n      3 a = M.diff_form(Integer(1), [x, y], name='a')\n      4 f = M.scalar_field(x**Integer(2), name='f')\n----> 5 a.wedge(f)\n...\nAttributeError: 'DiffScalarFieldAlgebra_with_category.element_class' object has no attribute '_ambient_domain'\n```\n\nIn this ticket, this gets fixed.\n\nThis ticket is part of the metaticket #28519.\n\nCC:  @tscrim @egourgoulhon\n\nKeywords: manifolds, scalar fields, wedge product\n\nBranch/Commit: 16d849e038486dbb6447ed72ef1b2789fd9513e4\n\nReviewer: Eric Gourgoulhon\n\nAuthor: Michael Jung\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28579\n\n",
    "closed_at": "2019-10-12T22:12:26Z",
    "created_at": "2019-10-08T11:14:34Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Wedge Product with Scalar Fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28579",
    "user": "https://github.com/DeRhamSource"
}
```
The wedge product of differential forms was not compatible with scalar fields:

```
sage: M = Manifold(2, 'M')
sage: c_cart.<x,y> = M.chart()
sage: a = M.diff_form(1, [x, y], name='a')
sage: f = M.scalar_field(x^2, name='f')
sage: a.wedge(f)
AttributeError                            Traceback (most recent call last)
<ipython-input-1-039619b3382c> in <module>()
      3 a = M.diff_form(Integer(1), [x, y], name='a')
      4 f = M.scalar_field(x**Integer(2), name='f')
----> 5 a.wedge(f)
...
AttributeError: 'DiffScalarFieldAlgebra_with_category.element_class' object has no attribute '_ambient_domain'
```

In this ticket, this gets fixed.

This ticket is part of the metaticket #28519.

CC:  @tscrim @egourgoulhon

Keywords: manifolds, scalar fields, wedge product

Branch/Commit: 16d849e038486dbb6447ed72ef1b2789fd9513e4

Reviewer: Eric Gourgoulhon

Author: Michael Jung

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28579





---

archive/issue_comments_426118.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+The wedge product of differential forms was not compatible with scalar fields:\n \n+\\`\\`\\`\n+sage: M = Manifold(2, 'S^2', start_index=1) # the 2-dimensional sphere S^2\n+sage: c_cart.<x,y> = M.chart()\n+sage: a = M.diff_form(1, [x, y], name='a')\n+sage: f = M.scalar_field(x^2, name='f')\n+sage: a.wedge(f)\n+AttributeError                            Traceback (most recent call last)\n+<ipython-input-1-039619b3382c> in <module>()\n+      3 a = M.diff_form(Integer(1), [x, y], name='a')\n+      4 f = M.scalar_field(x**Integer(2), name='f')\n+----> 5 a.wedge(f)\n+...\n+AttributeError: 'DiffScalarFieldAlgebra_with_category.element_class' object has no attribute '_ambient_domain'\n+\\`\\`\\`\n+\n+In this ticket, this gets fixed.\n+\n+This ticket is part of the metaticket #28519.\n \n Comment: 1\n \n```\n",
    "created_at": "2019-10-08T11:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426118",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,23 @@
+The wedge product of differential forms was not compatible with scalar fields:
 
+\`\`\`
+sage: M = Manifold(2, 'S^2', start_index=1) # the 2-dimensional sphere S^2
+sage: c_cart.<x,y> = M.chart()
+sage: a = M.diff_form(1, [x, y], name='a')
+sage: f = M.scalar_field(x^2, name='f')
+sage: a.wedge(f)
+AttributeError                            Traceback (most recent call last)
+<ipython-input-1-039619b3382c> in <module>()
+      3 a = M.diff_form(Integer(1), [x, y], name='a')
+      4 f = M.scalar_field(x**Integer(2), name='f')
+----> 5 a.wedge(f)
+...
+AttributeError: 'DiffScalarFieldAlgebra_with_category.element_class' object has no attribute '_ambient_domain'
+\`\`\`
+
+In this ticket, this gets fixed.
+
+This ticket is part of the metaticket #28519.
 
 Comment: 1
 
```




---

archive/issue_comments_426119.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2019-10-08T11:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426119",
    "user": "https://github.com/DeRhamSource"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_426120.json:
```json
{
    "body": "Changing keywords from \"\" to \"manifolds, scalar fields, wedge product\".",
    "created_at": "2019-10-08T11:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426120",
    "user": "https://github.com/DeRhamSource"
}
```

Changing keywords from "" to "manifolds, scalar fields, wedge product".



---

archive/issue_comments_426121.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-10-08T11:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426121",
    "user": "https://github.com/DeRhamSource"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_426122.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to geometry.",
    "created_at": "2019-10-08T11:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426122",
    "user": "https://github.com/DeRhamSource"
}
```

Changing component from PLEASE CHANGE to geometry.



---

archive/issue_comments_426123.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-08T11:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426123",
    "user": "https://github.com/DeRhamSource"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426124.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,23 @@\n+The wedge product of differential forms was not compatible with scalar fields:\n \n+\\`\\`\\`\n+sage: M = Manifold(2, 'M')\n+sage: c_cart.<x,y> = M.chart()\n+sage: a = M.diff_form(1, [x, y], name='a')\n+sage: f = M.scalar_field(x^2, name='f')\n+sage: a.wedge(f)\n+AttributeError                            Traceback (most recent call last)\n+<ipython-input-1-039619b3382c> in <module>()\n+      3 a = M.diff_form(Integer(1), [x, y], name='a')\n+      4 f = M.scalar_field(x**Integer(2), name='f')\n+----> 5 a.wedge(f)\n+...\n+AttributeError: 'DiffScalarFieldAlgebra_with_category.element_class' object has no attribute '_ambient_domain'\n+\\`\\`\\`\n+\n+In this ticket, this gets fixed.\n+\n+This ticket is part of the metaticket #28519.\n \n Comment: 1\n \n```\n",
    "created_at": "2019-10-08T11:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426124",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,23 @@
+The wedge product of differential forms was not compatible with scalar fields:
 
+\`\`\`
+sage: M = Manifold(2, 'M')
+sage: c_cart.<x,y> = M.chart()
+sage: a = M.diff_form(1, [x, y], name='a')
+sage: f = M.scalar_field(x^2, name='f')
+sage: a.wedge(f)
+AttributeError                            Traceback (most recent call last)
+<ipython-input-1-039619b3382c> in <module>()
+      3 a = M.diff_form(Integer(1), [x, y], name='a')
+      4 f = M.scalar_field(x**Integer(2), name='f')
+----> 5 a.wedge(f)
+...
+AttributeError: 'DiffScalarFieldAlgebra_with_category.element_class' object has no attribute '_ambient_domain'
+\`\`\`
+
+In this ticket, this gets fixed.
+
+This ticket is part of the metaticket #28519.
 
 Comment: 1
 
```




---

archive/issue_comments_426125.json:
```json
{
    "body": "<a id='comment:6'></a>Thanks for fixing this.\n\nA question: why have you made the method `degree()` of scalar fields return `self._tensor_rank` instead of `0`?",
    "created_at": "2019-10-08T21:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426125",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:6'></a>Thanks for fixing this.

A question: why have you made the method `degree()` of scalar fields return `self._tensor_rank` instead of `0`?



---

archive/issue_comments_426126.json:
```json
{
    "body": "<a id='comment:7'></a>Actually, I had no particular reason in mind. :D\nI guess, one reason is, to make clear the connection between the degree and the tensor rank. Moreover, this is more consistent to what is implemented in `diff_form.py`. In the end it felt more \"round\".\n\nDo you want me to change it back?",
    "created_at": "2019-10-08T22:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426126",
    "user": "https://github.com/DeRhamSource"
}
```

<a id='comment:7'></a>Actually, I had no particular reason in mind. :D
I guess, one reason is, to make clear the connection between the degree and the tensor rank. Moreover, this is more consistent to what is implemented in `diff_form.py`. In the end it felt more "round".

Do you want me to change it back?



---

archive/issue_comments_426127.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-09T07:55:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426128.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-09T08:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426128",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426129.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:7 gh-DeRhamSource]:\n> Actually, I had no particular reason in mind. :D\n> I guess, one reason is, to make clear the connection between the degree and the tensor rank. Moreover, this is more consistent to what is implemented in `diff_form.py`. In the end it felt more \"round\".\n> \n> Do you want me to change it back?\n\n\nNo I think it's OK. As you say, it's consistent with the `degree()` method of differential forms. \nThanks.\n\nA general comment: when you create a ticket, do not fill the \"Reviewers\" field; it will be filled by the reviewers themselves when they are actually making the review. If you want to suggest a reviewer for your ticket, simply add its username to the \"Cc\" field.",
    "created_at": "2019-10-09T08:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426129",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:9'></a>Replying to [comment:7 gh-DeRhamSource]:
> Actually, I had no particular reason in mind. :D
> I guess, one reason is, to make clear the connection between the degree and the tensor rank. Moreover, this is more consistent to what is implemented in `diff_form.py`. In the end it felt more "round".
> 
> Do you want me to change it back?


No I think it's OK. As you say, it's consistent with the `degree()` method of differential forms. 
Thanks.

A general comment: when you create a ticket, do not fill the "Reviewers" field; it will be filled by the reviewers themselves when they are actually making the review. If you want to suggest a reviewer for your ticket, simply add its username to the "Cc" field.



---

archive/issue_comments_426130.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-12T22:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28579#issuecomment-426130",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_071778.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-12T22:12:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28579",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28579#event-71778"
}
```
