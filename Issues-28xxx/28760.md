# Issue 28760: py3: internet str vs bytes doctests failures

archive/issues_028523.json:
```json
{
    "body": "```\nsage -t --optional=sage,optional,external src/sage/coding/databases.py\n```\n\ngives\n\n```\n----------------------------------------------------------------------\nsage -t src/sage/coding/databases.py  # 2 doctests failed\n----------------------------------------------------------------------\n```\n\nwith errors of that kind:\n\n```\nsage -t src/sage/coding/databases.py\n**********************************************************************\nFile \"src/sage/coding/databases.py\", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de\nFailed example:\n    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>\", line 1, in <module>\n        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py\", line 174, in best_linear_code_in_codetables_dot_de\n        i = s.find(\"<PRE>\")\n    TypeError: argument should be integer or bytes-like object, not 'str'\n**********************************************************************\n```\n\nBranch/Commit: 1b000e1f3858c3189c2786ffb1e31265114de898\n\nReviewer: S\u00e9bastien Labb\u00e9\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28760\n\n",
    "closed_at": "2019-11-29T23:57:37Z",
    "created_at": "2019-11-19T08:47:20Z",
    "labels": [
        "component: python3",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "py3: internet str vs bytes doctests failures",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28760",
    "user": "https://github.com/seblabbe"
}
```
```
sage -t --optional=sage,optional,external src/sage/coding/databases.py
```

gives

```
----------------------------------------------------------------------
sage -t src/sage/coding/databases.py  # 2 doctests failed
----------------------------------------------------------------------
```

with errors of that kind:

```
sage -t src/sage/coding/databases.py
**********************************************************************
File "src/sage/coding/databases.py", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de
Failed example:
    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>", line 1, in <module>
        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet
      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py", line 174, in best_linear_code_in_codetables_dot_de
        i = s.find("<PRE>")
    TypeError: argument should be integer or bytes-like object, not 'str'
**********************************************************************
```

Branch/Commit: 1b000e1f3858c3189c2786ffb1e31265114de898

Reviewer: Sébastien Labbé

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28760





---

archive/issue_comments_428764.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,16 +1,10 @@\n ```\n-sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py  \n+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/misc/remote_file.py\n ```\n \n gives\n \n ```\n-too many failed tests, not using stored timings\n-Running doctests with ID 2019-11-19-09-45-34-de2336ec.\n-Git branch: develop\n-Using --optional=4ti2,cbc,ccache,cryptominisat,dot2tex,e_antic,external,glucose,latte_int,lidia,lrslib,memlimit,normaliz,notedown,openssl,pandoc_attributes,pycosat,pynormaliz,rst2ipynb,sage,sagenb\n-External software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,scilab\n-Doctesting 3 files.\n sage -t src/sage/coding/databases.py\n **********************************************************************\n File \"src/sage/coding/databases.py\", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de\n@@ -43,7 +37,7 @@\n **********************************************************************\n 1 item had failures:\n    2 of   3 in sage.coding.databases.best_linear_code_in_codetables_dot_de\n-    [7 tests, 2 failures, 1.17 s]\n+    [7 tests, 2 failures, 1.15 s]\n sage -t src/sage/repl/load.py\n **********************************************************************\n File \"src/sage/repl/load.py\", line 157, in sage.repl.load.load\n@@ -65,7 +59,7 @@\n **********************************************************************\n 1 item had failures:\n    1 of  36 in sage.repl.load.load\n-    [44 tests, 1 failure, 1.14 s]\n+    [44 tests, 1 failure, 0.99 s]\n sage -t src/sage/misc/latex.py\n **********************************************************************\n File \"src/sage/misc/latex.py\", line 1085, in sage.misc.latex.Latex.?\n@@ -85,15 +79,85 @@\n **********************************************************************\n 1 item had failures:\n    1 of   3 in sage.misc.latex.Latex.?\n-    [309 tests, 1 failure, 1.20 s]\n+    [309 tests, 1 failure, 1.19 s]\n+sage -t src/sage/misc/persist.pyx\n+**********************************************************************\n+File \"src/sage/misc/persist.pyx\", line 87, in sage.misc.persist.load\n+Failed example:\n+    s = load(u)                                                  # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.persist.load[1]>\", line 1, in <module>\n+        s = load(u)                                                  # optional - internet\n+      File \"sage/misc/persist.pyx\", line 151, in sage.misc.persist.load (build/cythonized/sage/misc/persist.c:2710)\n+        filename = get_remote_file(filename, verbose=verbose)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py\", line 49, in get_remote_file\n+        f.write(content.read())\n+    TypeError: write() argument must be str, not bytes\n+**********************************************************************\n+File \"src/sage/misc/persist.pyx\", line 91, in sage.misc.persist.load\n+Failed example:\n+    s                                                            # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.persist.load[2]>\", line 1, in <module>\n+        s                                                            # optional - internet\n+    NameError: name 's' is not defined\n+**********************************************************************\n+1 item had failures:\n+   2 of  20 in sage.misc.persist.load\n+    [163 tests, 2 failures, 1.01 s]\n+sage -t src/sage/misc/remote_file.py\n+**********************************************************************\n+File \"src/sage/misc/remote_file.py\", line 25, in sage.misc.remote_file.get_remote_file\n+Failed example:\n+    g = get_remote_file(url, verbose=False)      # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.remote_file.get_remote_file[1]>\", line 1, in <module>\n+        g = get_remote_file(url, verbose=False)      # optional - internet\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py\", line 49, in get_remote_file\n+        f.write(content.read())\n+    TypeError: write() argument must be str, not bytes\n+**********************************************************************\n+File \"src/sage/misc/remote_file.py\", line 26, in sage.misc.remote_file.get_remote_file\n+Failed example:\n+    with open(g) as f: print(f.read())           # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.remote_file.get_remote_file[2]>\", line 1, in <module>\n+        with open(g) as f: print(f.read())           # optional - internet\n+    NameError: name 'g' is not defined\n+**********************************************************************\n+1 item had failures:\n+   2 of   4 in sage.misc.remote_file.get_remote_file\n+    [3 tests, 2 failures, 0.08 s]\n ----------------------------------------------------------------------\n sage -t src/sage/coding/databases.py  # 2 doctests failed\n sage -t src/sage/repl/load.py  # 1 doctest failed\n sage -t src/sage/misc/latex.py  # 1 doctest failed\n+sage -t src/sage/misc/persist.pyx  # 2 doctests failed\n+sage -t src/sage/misc/remote_file.py  # 2 doctests failed\n ----------------------------------------------------------------------\n-Total time for all tests: 3.9 seconds\n-    cpu time: 1.3 seconds\n-    cumulative wall time: 3.5 seconds\n+Total time for all tests: 4.9 seconds\n+    cpu time: 1.8 seconds\n+    cumulative wall time: 4.4 seconds\n External software detected for doctesting: imagemagick,internet,latex\n ```\n \n``````\n",
    "created_at": "2019-11-19T08:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428764",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,16 +1,10 @@
 ```
-sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py  
+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/misc/remote_file.py
 ```
 
 gives
 
 ```
-too many failed tests, not using stored timings
-Running doctests with ID 2019-11-19-09-45-34-de2336ec.
-Git branch: develop
-Using --optional=4ti2,cbc,ccache,cryptominisat,dot2tex,e_antic,external,glucose,latte_int,lidia,lrslib,memlimit,normaliz,notedown,openssl,pandoc_attributes,pycosat,pynormaliz,rst2ipynb,sage,sagenb
-External software to be detected: cplex,ffmpeg,graphviz,gurobi,imagemagick,internet,latex,macaulay2,magma,maple,mathematica,matlab,octave,pandoc,scilab
-Doctesting 3 files.
 sage -t src/sage/coding/databases.py
 **********************************************************************
 File "src/sage/coding/databases.py", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de
@@ -43,7 +37,7 @@
 **********************************************************************
 1 item had failures:
    2 of   3 in sage.coding.databases.best_linear_code_in_codetables_dot_de
-    [7 tests, 2 failures, 1.17 s]
+    [7 tests, 2 failures, 1.15 s]
 sage -t src/sage/repl/load.py
 **********************************************************************
 File "src/sage/repl/load.py", line 157, in sage.repl.load.load
@@ -65,7 +59,7 @@
 **********************************************************************
 1 item had failures:
    1 of  36 in sage.repl.load.load
-    [44 tests, 1 failure, 1.14 s]
+    [44 tests, 1 failure, 0.99 s]
 sage -t src/sage/misc/latex.py
 **********************************************************************
 File "src/sage/misc/latex.py", line 1085, in sage.misc.latex.Latex.?
@@ -85,15 +79,85 @@
 **********************************************************************
 1 item had failures:
    1 of   3 in sage.misc.latex.Latex.?
-    [309 tests, 1 failure, 1.20 s]
+    [309 tests, 1 failure, 1.19 s]
+sage -t src/sage/misc/persist.pyx
+**********************************************************************
+File "src/sage/misc/persist.pyx", line 87, in sage.misc.persist.load
+Failed example:
+    s = load(u)                                                  # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.persist.load[1]>", line 1, in <module>
+        s = load(u)                                                  # optional - internet
+      File "sage/misc/persist.pyx", line 151, in sage.misc.persist.load (build/cythonized/sage/misc/persist.c:2710)
+        filename = get_remote_file(filename, verbose=verbose)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py", line 49, in get_remote_file
+        f.write(content.read())
+    TypeError: write() argument must be str, not bytes
+**********************************************************************
+File "src/sage/misc/persist.pyx", line 91, in sage.misc.persist.load
+Failed example:
+    s                                                            # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.persist.load[2]>", line 1, in <module>
+        s                                                            # optional - internet
+    NameError: name 's' is not defined
+**********************************************************************
+1 item had failures:
+   2 of  20 in sage.misc.persist.load
+    [163 tests, 2 failures, 1.01 s]
+sage -t src/sage/misc/remote_file.py
+**********************************************************************
+File "src/sage/misc/remote_file.py", line 25, in sage.misc.remote_file.get_remote_file
+Failed example:
+    g = get_remote_file(url, verbose=False)      # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.remote_file.get_remote_file[1]>", line 1, in <module>
+        g = get_remote_file(url, verbose=False)      # optional - internet
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py", line 49, in get_remote_file
+        f.write(content.read())
+    TypeError: write() argument must be str, not bytes
+**********************************************************************
+File "src/sage/misc/remote_file.py", line 26, in sage.misc.remote_file.get_remote_file
+Failed example:
+    with open(g) as f: print(f.read())           # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.remote_file.get_remote_file[2]>", line 1, in <module>
+        with open(g) as f: print(f.read())           # optional - internet
+    NameError: name 'g' is not defined
+**********************************************************************
+1 item had failures:
+   2 of   4 in sage.misc.remote_file.get_remote_file
+    [3 tests, 2 failures, 0.08 s]
 ----------------------------------------------------------------------
 sage -t src/sage/coding/databases.py  # 2 doctests failed
 sage -t src/sage/repl/load.py  # 1 doctest failed
 sage -t src/sage/misc/latex.py  # 1 doctest failed
+sage -t src/sage/misc/persist.pyx  # 2 doctests failed
+sage -t src/sage/misc/remote_file.py  # 2 doctests failed
 ----------------------------------------------------------------------
-Total time for all tests: 3.9 seconds
-    cpu time: 1.3 seconds
-    cumulative wall time: 3.5 seconds
+Total time for all tests: 4.9 seconds
+    cpu time: 1.8 seconds
+    cumulative wall time: 4.4 seconds
 External software detected for doctesting: imagemagick,internet,latex
 ```
 
``````




---

archive/issue_comments_428765.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,264 @@\n-\n+```\n+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/misc/remote_file.py src/sage/plot/animate.py\n+```\n+\n+gives\n+\n+```\n+sage -t src/sage/coding/databases.py\n+**********************************************************************\n+File \"src/sage/coding/databases.py\", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de\n+Failed example:\n+    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>\", line 1, in <module>\n+        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py\", line 174, in best_linear_code_in_codetables_dot_de\n+        i = s.find(\"<PRE>\")\n+    TypeError: argument should be integer or bytes-like object, not 'str'\n+**********************************************************************\n+File \"src/sage/coding/databases.py\", line 138, in sage.coding.databases.best_linear_code_in_codetables_dot_de\n+Failed example:\n+    print(L)                                                                    # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[1]>\", line 1, in <module>\n+        print(L)                                                                    # optional - internet\n+    NameError: name 'L' is not defined\n+**********************************************************************\n+1 item had failures:\n+   2 of   3 in sage.coding.databases.best_linear_code_in_codetables_dot_de\n+    [7 tests, 2 failures, 1.15 s]\n+sage -t src/sage/repl/load.py\n+**********************************************************************\n+File \"src/sage/repl/load.py\", line 157, in sage.repl.load.load\n+Failed example:\n+    sage.repl.load.load('https://github.com/jasongrout/minimum_rank/raw/minimum_rank_1_0_0/minrank.py', globals())  # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.repl.load.load[16]>\", line 1, in <module>\n+        sage.repl.load.load('https://github.com/jasongrout/minimum_rank/raw/minimum_rank_1_0_0/minrank.py', globals())  # optional - internet\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/repl/load.py\", line 235, in load\n+        filename = get_remote_file(filename, verbose=False)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py\", line 49, in get_remote_file\n+        f.write(content.read())\n+    TypeError: write() argument must be str, not bytes\n+**********************************************************************\n+1 item had failures:\n+   1 of  36 in sage.repl.load.load\n+    [44 tests, 1 failure, 0.99 s]\n+sage -t src/sage/misc/latex.py\n+**********************************************************************\n+File \"src/sage/misc/latex.py\", line 1085, in sage.misc.latex.Latex.?\n+Failed example:\n+    latex.eval(\"\\ThisIsAnInvalidCommand\", {}) # optional -- ImageMagick\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.latex.Latex.?[1]>\", line 1, in <module>\n+        latex.eval(\"\\ThisIsAnInvalidCommand\", {}) # optional -- ImageMagick\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/latex.py\", line 1114, in eval\n+        O.write(str_to_bytes(x, encoding='utf-8'))\n+    TypeError: write() argument must be str, not bytes\n+**********************************************************************\n+1 item had failures:\n+   1 of   3 in sage.misc.latex.Latex.?\n+    [309 tests, 1 failure, 1.19 s]\n+sage -t src/sage/misc/persist.pyx\n+**********************************************************************\n+File \"src/sage/misc/persist.pyx\", line 87, in sage.misc.persist.load\n+Failed example:\n+    s = load(u)                                                  # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.persist.load[1]>\", line 1, in <module>\n+        s = load(u)                                                  # optional - internet\n+      File \"sage/misc/persist.pyx\", line 151, in sage.misc.persist.load (build/cythonized/sage/misc/persist.c:2710)\n+        filename = get_remote_file(filename, verbose=verbose)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py\", line 49, in get_remote_file\n+        f.write(content.read())\n+    TypeError: write() argument must be str, not bytes\n+**********************************************************************\n+File \"src/sage/misc/persist.pyx\", line 91, in sage.misc.persist.load\n+Failed example:\n+    s                                                            # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.persist.load[2]>\", line 1, in <module>\n+        s                                                            # optional - internet\n+    NameError: name 's' is not defined\n+**********************************************************************\n+1 item had failures:\n+   2 of  20 in sage.misc.persist.load\n+    [163 tests, 2 failures, 1.01 s]\n+sage -t src/sage/misc/remote_file.py\n+**********************************************************************\n+File \"src/sage/misc/remote_file.py\", line 25, in sage.misc.remote_file.get_remote_file\n+Failed example:\n+    g = get_remote_file(url, verbose=False)      # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.remote_file.get_remote_file[1]>\", line 1, in <module>\n+        g = get_remote_file(url, verbose=False)      # optional - internet\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py\", line 49, in get_remote_file\n+        f.write(content.read())\n+    TypeError: write() argument must be str, not bytes\n+**********************************************************************\n+File \"src/sage/misc/remote_file.py\", line 26, in sage.misc.remote_file.get_remote_file\n+Failed example:\n+    with open(g) as f: print(f.read())           # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.misc.remote_file.get_remote_file[2]>\", line 1, in <module>\n+        with open(g) as f: print(f.read())           # optional - internet\n+    NameError: name 'g' is not defined\n+**********************************************************************\n+1 item had failures:\n+   2 of   4 in sage.misc.remote_file.get_remote_file\n+    [3 tests, 2 failures, 0.08 s]\n+----------------------------------------------------------------------\n+sage -t src/sage/plot/animate.py\n+**********************************************************************\n+File \"src/sage/plot/animate.py\", line 563, in sage.plot.animate.Animation.?\n+Failed example:\n+    with open(td + 'my_animation.gif', 'rb') as f: print('\\x21\\xf9\\x04\\x08\\x23\\x00' in f.read())  # optional -- ImageMagick\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.plot.animate.Animation.?[3]>\", line 1, in <module>\n+        with open(td + 'my_animation.gif', 'rb') as f: print('\\x21\\xf9\\x04\\x08\\x23\\x00' in f.read())  # optional -- ImageMagick\n+    TypeError: a bytes-like object is required, not 'str'\n+**********************************************************************\n+File \"src/sage/plot/animate.py\", line 1056, in sage.plot.animate.Animation.save\n+Failed example:\n+    with open(td + 'wave.gif', 'rb') as f: print('!\\xf9\\x04\\x08\\x14\\x00' in f.read())  # optional -- ImageMagick\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.plot.animate.Animation.save[8]>\", line 1, in <module>\n+        with open(td + 'wave.gif', 'rb') as f: print('!\\xf9\\x04\\x08\\x14\\x00' in f.read())  # optional -- ImageMagick\n+    TypeError: a bytes-like object is required, not 'str'\n+**********************************************************************\n+File \"src/sage/plot/animate.py\", line 1058, in sage.plot.animate.Animation.save\n+Failed example:\n+    with open(td + 'wave.gif', 'rb') as f: print('!\\xff\\x0bNETSCAPE2.0\\x03\\x01\\x00\\x00\\x00' in f.read())  # optional -- ImageMagick\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.plot.animate.Animation.save[9]>\", line 1, in <module>\n+        with open(td + 'wave.gif', 'rb') as f: print('!\\xff\\x0bNETSCAPE2.0\\x03\\x01\\x00\\x00\\x00' in f.read())  # optional -- ImageMagick\n+    TypeError: a bytes-like object is required, not 'str'\n+**********************************************************************\n+File \"src/sage/plot/animate.py\", line 1061, in sage.plot.animate.Animation.save\n+Failed example:\n+    with open(td + 'wave.gif', 'rb') as f: print('!\\xf9\\x04\\x08\\x14\\x00' in f.read())  # optional -- ImageMagick\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.plot.animate.Animation.save[11]>\", line 1, in <module>\n+        with open(td + 'wave.gif', 'rb') as f: print('!\\xf9\\x04\\x08\\x14\\x00' in f.read())  # optional -- ImageMagick\n+    TypeError: a bytes-like object is required, not 'str'\n+**********************************************************************\n+File \"src/sage/plot/animate.py\", line 1063, in sage.plot.animate.Animation.save\n+Failed example:\n+    with open(td + 'wave.gif', 'rb') as f: print('!\\xf9\\x04\\x08\\x23\\x00' in f.read())  # optional -- ImageMagick\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.plot.animate.Animation.save[12]>\", line 1, in <module>\n+        with open(td + 'wave.gif', 'rb') as f: print('!\\xf9\\x04\\x08\\x23\\x00' in f.read())  # optional -- ImageMagick\n+    TypeError: a bytes-like object is required, not 'str'\n+**********************************************************************\n+File \"src/sage/plot/animate.py\", line 1066, in sage.plot.animate.Animation.save\n+Failed example:\n+    with open(td + 'wave.gif', 'rb') as f: print('!\\xff\\x0bNETSCAPE2.0\\x03\\x01\\x00\\x00\\x00' in f.read())  # optional -- ImageMagick\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.plot.animate.Animation.save[14]>\", line 1, in <module>\n+        with open(td + 'wave.gif', 'rb') as f: print('!\\xff\\x0bNETSCAPE2.0\\x03\\x01\\x00\\x00\\x00' in f.read())  # optional -- ImageMagick\n+    TypeError: a bytes-like object is required, not 'str'\n+**********************************************************************\n+File \"src/sage/plot/animate.py\", line 1068, in sage.plot.animate.Animation.save\n+Failed example:\n+    with open(td + 'wave.gif', 'rb') as f: print('!\\xff\\x0bNETSCAPE2.0\\x03\\x01\\x03\\x00\\x00' in f.read())  # optional -- ImageMagick\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.plot.animate.Animation.save[15]>\", line 1, in <module>\n+        with open(td + 'wave.gif', 'rb') as f: print('!\\xff\\x0bNETSCAPE2.0\\x03\\x01\\x03\\x00\\x00' in f.read())  # optional -- ImageMagick\n+    TypeError: a bytes-like object is required, not 'str'\n+**********************************************************************\n+2 items had failures:\n+   1 of  15 in sage.plot.animate.Animation.?\n+   6 of  17 in sage.plot.animate.Animation.save\n+    [225 tests, 7 failures, 58.39 s]\n+----------------------------------------------------------------------\n+sage -t src/sage/coding/databases.py  # 2 doctests failed\n+sage -t src/sage/repl/load.py  # 1 doctest failed\n+sage -t src/sage/misc/latex.py  # 1 doctest failed\n+sage -t src/sage/misc/persist.pyx  # 2 doctests failed\n+sage -t src/sage/misc/remote_file.py  # 2 doctests failed\n+sage -t src/sage/plot/animate.py  # 7 doctests failed\n+----------------------------------------------------------------------\n+Total time for all tests: 4.9 seconds\n+    cpu time: 1.8 seconds\n+    cumulative wall time: 4.4 seconds\n+External software detected for doctesting: imagemagick,internet,latex\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-11-19T08:53:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428765",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,264 @@
-
+```
+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/misc/remote_file.py src/sage/plot/animate.py
+```
+
+gives
+
+```
+sage -t src/sage/coding/databases.py
+**********************************************************************
+File "src/sage/coding/databases.py", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de
+Failed example:
+    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>", line 1, in <module>
+        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py", line 174, in best_linear_code_in_codetables_dot_de
+        i = s.find("<PRE>")
+    TypeError: argument should be integer or bytes-like object, not 'str'
+**********************************************************************
+File "src/sage/coding/databases.py", line 138, in sage.coding.databases.best_linear_code_in_codetables_dot_de
+Failed example:
+    print(L)                                                                    # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[1]>", line 1, in <module>
+        print(L)                                                                    # optional - internet
+    NameError: name 'L' is not defined
+**********************************************************************
+1 item had failures:
+   2 of   3 in sage.coding.databases.best_linear_code_in_codetables_dot_de
+    [7 tests, 2 failures, 1.15 s]
+sage -t src/sage/repl/load.py
+**********************************************************************
+File "src/sage/repl/load.py", line 157, in sage.repl.load.load
+Failed example:
+    sage.repl.load.load('https://github.com/jasongrout/minimum_rank/raw/minimum_rank_1_0_0/minrank.py', globals())  # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.repl.load.load[16]>", line 1, in <module>
+        sage.repl.load.load('https://github.com/jasongrout/minimum_rank/raw/minimum_rank_1_0_0/minrank.py', globals())  # optional - internet
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/repl/load.py", line 235, in load
+        filename = get_remote_file(filename, verbose=False)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py", line 49, in get_remote_file
+        f.write(content.read())
+    TypeError: write() argument must be str, not bytes
+**********************************************************************
+1 item had failures:
+   1 of  36 in sage.repl.load.load
+    [44 tests, 1 failure, 0.99 s]
+sage -t src/sage/misc/latex.py
+**********************************************************************
+File "src/sage/misc/latex.py", line 1085, in sage.misc.latex.Latex.?
+Failed example:
+    latex.eval("\ThisIsAnInvalidCommand", {}) # optional -- ImageMagick
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.latex.Latex.?[1]>", line 1, in <module>
+        latex.eval("\ThisIsAnInvalidCommand", {}) # optional -- ImageMagick
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/latex.py", line 1114, in eval
+        O.write(str_to_bytes(x, encoding='utf-8'))
+    TypeError: write() argument must be str, not bytes
+**********************************************************************
+1 item had failures:
+   1 of   3 in sage.misc.latex.Latex.?
+    [309 tests, 1 failure, 1.19 s]
+sage -t src/sage/misc/persist.pyx
+**********************************************************************
+File "src/sage/misc/persist.pyx", line 87, in sage.misc.persist.load
+Failed example:
+    s = load(u)                                                  # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.persist.load[1]>", line 1, in <module>
+        s = load(u)                                                  # optional - internet
+      File "sage/misc/persist.pyx", line 151, in sage.misc.persist.load (build/cythonized/sage/misc/persist.c:2710)
+        filename = get_remote_file(filename, verbose=verbose)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py", line 49, in get_remote_file
+        f.write(content.read())
+    TypeError: write() argument must be str, not bytes
+**********************************************************************
+File "src/sage/misc/persist.pyx", line 91, in sage.misc.persist.load
+Failed example:
+    s                                                            # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.persist.load[2]>", line 1, in <module>
+        s                                                            # optional - internet
+    NameError: name 's' is not defined
+**********************************************************************
+1 item had failures:
+   2 of  20 in sage.misc.persist.load
+    [163 tests, 2 failures, 1.01 s]
+sage -t src/sage/misc/remote_file.py
+**********************************************************************
+File "src/sage/misc/remote_file.py", line 25, in sage.misc.remote_file.get_remote_file
+Failed example:
+    g = get_remote_file(url, verbose=False)      # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.remote_file.get_remote_file[1]>", line 1, in <module>
+        g = get_remote_file(url, verbose=False)      # optional - internet
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/misc/remote_file.py", line 49, in get_remote_file
+        f.write(content.read())
+    TypeError: write() argument must be str, not bytes
+**********************************************************************
+File "src/sage/misc/remote_file.py", line 26, in sage.misc.remote_file.get_remote_file
+Failed example:
+    with open(g) as f: print(f.read())           # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.misc.remote_file.get_remote_file[2]>", line 1, in <module>
+        with open(g) as f: print(f.read())           # optional - internet
+    NameError: name 'g' is not defined
+**********************************************************************
+1 item had failures:
+   2 of   4 in sage.misc.remote_file.get_remote_file
+    [3 tests, 2 failures, 0.08 s]
+----------------------------------------------------------------------
+sage -t src/sage/plot/animate.py
+**********************************************************************
+File "src/sage/plot/animate.py", line 563, in sage.plot.animate.Animation.?
+Failed example:
+    with open(td + 'my_animation.gif', 'rb') as f: print('\x21\xf9\x04\x08\x23\x00' in f.read())  # optional -- ImageMagick
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.plot.animate.Animation.?[3]>", line 1, in <module>
+        with open(td + 'my_animation.gif', 'rb') as f: print('\x21\xf9\x04\x08\x23\x00' in f.read())  # optional -- ImageMagick
+    TypeError: a bytes-like object is required, not 'str'
+**********************************************************************
+File "src/sage/plot/animate.py", line 1056, in sage.plot.animate.Animation.save
+Failed example:
+    with open(td + 'wave.gif', 'rb') as f: print('!\xf9\x04\x08\x14\x00' in f.read())  # optional -- ImageMagick
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.plot.animate.Animation.save[8]>", line 1, in <module>
+        with open(td + 'wave.gif', 'rb') as f: print('!\xf9\x04\x08\x14\x00' in f.read())  # optional -- ImageMagick
+    TypeError: a bytes-like object is required, not 'str'
+**********************************************************************
+File "src/sage/plot/animate.py", line 1058, in sage.plot.animate.Animation.save
+Failed example:
+    with open(td + 'wave.gif', 'rb') as f: print('!\xff\x0bNETSCAPE2.0\x03\x01\x00\x00\x00' in f.read())  # optional -- ImageMagick
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.plot.animate.Animation.save[9]>", line 1, in <module>
+        with open(td + 'wave.gif', 'rb') as f: print('!\xff\x0bNETSCAPE2.0\x03\x01\x00\x00\x00' in f.read())  # optional -- ImageMagick
+    TypeError: a bytes-like object is required, not 'str'
+**********************************************************************
+File "src/sage/plot/animate.py", line 1061, in sage.plot.animate.Animation.save
+Failed example:
+    with open(td + 'wave.gif', 'rb') as f: print('!\xf9\x04\x08\x14\x00' in f.read())  # optional -- ImageMagick
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.plot.animate.Animation.save[11]>", line 1, in <module>
+        with open(td + 'wave.gif', 'rb') as f: print('!\xf9\x04\x08\x14\x00' in f.read())  # optional -- ImageMagick
+    TypeError: a bytes-like object is required, not 'str'
+**********************************************************************
+File "src/sage/plot/animate.py", line 1063, in sage.plot.animate.Animation.save
+Failed example:
+    with open(td + 'wave.gif', 'rb') as f: print('!\xf9\x04\x08\x23\x00' in f.read())  # optional -- ImageMagick
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.plot.animate.Animation.save[12]>", line 1, in <module>
+        with open(td + 'wave.gif', 'rb') as f: print('!\xf9\x04\x08\x23\x00' in f.read())  # optional -- ImageMagick
+    TypeError: a bytes-like object is required, not 'str'
+**********************************************************************
+File "src/sage/plot/animate.py", line 1066, in sage.plot.animate.Animation.save
+Failed example:
+    with open(td + 'wave.gif', 'rb') as f: print('!\xff\x0bNETSCAPE2.0\x03\x01\x00\x00\x00' in f.read())  # optional -- ImageMagick
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.plot.animate.Animation.save[14]>", line 1, in <module>
+        with open(td + 'wave.gif', 'rb') as f: print('!\xff\x0bNETSCAPE2.0\x03\x01\x00\x00\x00' in f.read())  # optional -- ImageMagick
+    TypeError: a bytes-like object is required, not 'str'
+**********************************************************************
+File "src/sage/plot/animate.py", line 1068, in sage.plot.animate.Animation.save
+Failed example:
+    with open(td + 'wave.gif', 'rb') as f: print('!\xff\x0bNETSCAPE2.0\x03\x01\x03\x00\x00' in f.read())  # optional -- ImageMagick
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.plot.animate.Animation.save[15]>", line 1, in <module>
+        with open(td + 'wave.gif', 'rb') as f: print('!\xff\x0bNETSCAPE2.0\x03\x01\x03\x00\x00' in f.read())  # optional -- ImageMagick
+    TypeError: a bytes-like object is required, not 'str'
+**********************************************************************
+2 items had failures:
+   1 of  15 in sage.plot.animate.Animation.?
+   6 of  17 in sage.plot.animate.Animation.save
+    [225 tests, 7 failures, 58.39 s]
+----------------------------------------------------------------------
+sage -t src/sage/coding/databases.py  # 2 doctests failed
+sage -t src/sage/repl/load.py  # 1 doctest failed
+sage -t src/sage/misc/latex.py  # 1 doctest failed
+sage -t src/sage/misc/persist.pyx  # 2 doctests failed
+sage -t src/sage/misc/remote_file.py  # 2 doctests failed
+sage -t src/sage/plot/animate.py  # 7 doctests failed
+----------------------------------------------------------------------
+Total time for all tests: 4.9 seconds
+    cpu time: 1.8 seconds
+    cumulative wall time: 4.4 seconds
+External software detected for doctesting: imagemagick,internet,latex
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_428766.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+```\n+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/plot/animate.py\n+```\n \n+gives\n+\n+```\n+----------------------------------------------------------------------\n+sage -t src/sage/coding/databases.py  # 2 doctests failed\n+sage -t src/sage/repl/load.py  # 1 doctest failed\n+sage -t src/sage/misc/latex.py  # 1 doctest failed\n+sage -t src/sage/misc/persist.pyx  # 2 doctests failed\n+sage -t src/sage/misc/remote_file.py  # 2 doctests failed\n+sage -t src/sage/plot/animate.py  # 7 doctests failed\n+----------------------------------------------------------------------\n+External software detected for doctesting: imagemagick,internet,latex\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-11-19T09:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428766",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,20 @@
+```
+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/plot/animate.py
+```
 
+gives
+
+```
+----------------------------------------------------------------------
+sage -t src/sage/coding/databases.py  # 2 doctests failed
+sage -t src/sage/repl/load.py  # 1 doctest failed
+sage -t src/sage/misc/latex.py  # 1 doctest failed
+sage -t src/sage/misc/persist.pyx  # 2 doctests failed
+sage -t src/sage/misc/remote_file.py  # 2 doctests failed
+sage -t src/sage/plot/animate.py  # 7 doctests failed
+----------------------------------------------------------------------
+External software detected for doctesting: imagemagick,internet,latex
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_428767.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,19 @@\n+```\n+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/plot/animate.py\n+```\n \n+gives\n+\n+```\n+----------------------------------------------------------------------\n+sage -t src/sage/coding/databases.py  # 2 doctests failed\n+sage -t src/sage/repl/load.py  # 1 doctest failed\n+sage -t src/sage/misc/latex.py  # 1 doctest failed\n+sage -t src/sage/misc/persist.pyx  # 2 doctests failed\n+sage -t src/sage/plot/animate.py  # 7 doctests failed\n+----------------------------------------------------------------------\n+External software detected for doctesting: imagemagick,internet,latex\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-11-19T09:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428767",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,19 @@
+```
+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/plot/animate.py
+```
 
+gives
+
+```
+----------------------------------------------------------------------
+sage -t src/sage/coding/databases.py  # 2 doctests failed
+sage -t src/sage/repl/load.py  # 1 doctest failed
+sage -t src/sage/misc/latex.py  # 1 doctest failed
+sage -t src/sage/misc/persist.pyx  # 2 doctests failed
+sage -t src/sage/plot/animate.py  # 7 doctests failed
+----------------------------------------------------------------------
+External software detected for doctesting: imagemagick,internet,latex
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_428768.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,41 @@\n+```\n+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/plot/animate.py\n+```\n \n+gives\n+\n+```\n+----------------------------------------------------------------------\n+sage -t src/sage/coding/databases.py  # 2 doctests failed\n+sage -t src/sage/repl/load.py  # 1 doctest failed\n+sage -t src/sage/misc/latex.py  # 1 doctest failed\n+sage -t src/sage/misc/persist.pyx  # 2 doctests failed\n+sage -t src/sage/plot/animate.py  # 7 doctests failed\n+----------------------------------------------------------------------\n+External software detected for doctesting: imagemagick,internet,latex\n+```\n+\n+with errors of that kind:\n+\n+```\n+sage -t src/sage/coding/databases.py\n+**********************************************************************\n+File \"src/sage/coding/databases.py\", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de\n+Failed example:\n+    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>\", line 1, in <module>\n+        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py\", line 174, in best_linear_code_in_codetables_dot_de\n+        i = s.find(\"<PRE>\")\n+    TypeError: argument should be integer or bytes-like object, not 'str'\n+**********************************************************************\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-11-19T09:33:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428768",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,41 @@
+```
+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/misc/persist.pyx  src/sage/plot/animate.py
+```
 
+gives
+
+```
+----------------------------------------------------------------------
+sage -t src/sage/coding/databases.py  # 2 doctests failed
+sage -t src/sage/repl/load.py  # 1 doctest failed
+sage -t src/sage/misc/latex.py  # 1 doctest failed
+sage -t src/sage/misc/persist.pyx  # 2 doctests failed
+sage -t src/sage/plot/animate.py  # 7 doctests failed
+----------------------------------------------------------------------
+External software detected for doctesting: imagemagick,internet,latex
+```
+
+with errors of that kind:
+
+```
+sage -t src/sage/coding/databases.py
+**********************************************************************
+File "src/sage/coding/databases.py", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de
+Failed example:
+    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>", line 1, in <module>
+        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py", line 174, in best_linear_code_in_codetables_dot_de
+        i = s.find("<PRE>")
+    TypeError: argument should be integer or bytes-like object, not 'str'
+**********************************************************************
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_428769.json:
```json
{
    "body": "<a id='comment:6'></a>src/sage/misc/persist.pyx is fixed in #28761",
    "created_at": "2019-11-19T10:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428769",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>src/sage/misc/persist.pyx is fixed in #28761



---

archive/issue_comments_428770.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,40 @@\n+```\n+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/plot/animate.py\n+```\n \n+gives\n+\n+```\n+----------------------------------------------------------------------\n+sage -t src/sage/coding/databases.py  # 2 doctests failed\n+sage -t src/sage/repl/load.py  # 1 doctest failed\n+sage -t src/sage/misc/latex.py  # 1 doctest failed\n+sage -t src/sage/plot/animate.py  # 7 doctests failed\n+----------------------------------------------------------------------\n+External software detected for doctesting: imagemagick,internet,latex\n+```\n+\n+with errors of that kind:\n+\n+```\n+sage -t src/sage/coding/databases.py\n+**********************************************************************\n+File \"src/sage/coding/databases.py\", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de\n+Failed example:\n+    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>\", line 1, in <module>\n+        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py\", line 174, in best_linear_code_in_codetables_dot_de\n+        i = s.find(\"<PRE>\")\n+    TypeError: argument should be integer or bytes-like object, not 'str'\n+**********************************************************************\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-11-19T10:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428770",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,40 @@
+```
+sage -t --optional=sage,optional,external src/sage/coding/databases.py src/sage/repl/load.py src/sage/misc/latex.py src/sage/plot/animate.py
+```
 
+gives
+
+```
+----------------------------------------------------------------------
+sage -t src/sage/coding/databases.py  # 2 doctests failed
+sage -t src/sage/repl/load.py  # 1 doctest failed
+sage -t src/sage/misc/latex.py  # 1 doctest failed
+sage -t src/sage/plot/animate.py  # 7 doctests failed
+----------------------------------------------------------------------
+External software detected for doctesting: imagemagick,internet,latex
+```
+
+with errors of that kind:
+
+```
+sage -t src/sage/coding/databases.py
+**********************************************************************
+File "src/sage/coding/databases.py", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de
+Failed example:
+    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>", line 1, in <module>
+        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py", line 174, in best_linear_code_in_codetables_dot_de
+        i = s.find("<PRE>")
+    TypeError: argument should be integer or bytes-like object, not 'str'
+**********************************************************************
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_428771.json:
```json
{
    "body": "<a id='comment:7'></a>src/sage/repl/load.py is almost fixed by #28761 too",
    "created_at": "2019-11-19T12:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428771",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>src/sage/repl/load.py is almost fixed by #28761 too



---

archive/issue_comments_428772.json:
```json
{
    "body": "<a id='comment:8'></a>Here is a fix for databases\n\n---\nNew commits:",
    "created_at": "2019-11-19T14:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428772",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>Here is a fix for databases

---
New commits:



---

archive/issue_comments_428773.json:
```json
{
    "body": "<a id='comment:9'></a>Spliting this ticket and moving the other issues to #28808",
    "created_at": "2019-11-27T15:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428773",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:9'></a>Spliting this ticket and moving the other issues to #28808



---

archive/issue_comments_428774.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,36 @@\n+```\n+sage -t --optional=sage,optional,external src/sage/coding/databases.py\n+```\n \n+gives\n+\n+```\n+----------------------------------------------------------------------\n+sage -t src/sage/coding/databases.py  # 2 doctests failed\n+----------------------------------------------------------------------\n+```\n+\n+with errors of that kind:\n+\n+```\n+sage -t src/sage/coding/databases.py\n+**********************************************************************\n+File \"src/sage/coding/databases.py\", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de\n+Failed example:\n+    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>\", line 1, in <module>\n+        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet\n+      File \"/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py\", line 174, in best_linear_code_in_codetables_dot_de\n+        i = s.find(\"<PRE>\")\n+    TypeError: argument should be integer or bytes-like object, not 'str'\n+**********************************************************************\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-11-27T15:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428774",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,36 @@
+```
+sage -t --optional=sage,optional,external src/sage/coding/databases.py
+```
 
+gives
+
+```
+----------------------------------------------------------------------
+sage -t src/sage/coding/databases.py  # 2 doctests failed
+----------------------------------------------------------------------
+```
+
+with errors of that kind:
+
+```
+sage -t src/sage/coding/databases.py
+**********************************************************************
+File "src/sage/coding/databases.py", line 137, in sage.coding.databases.best_linear_code_in_codetables_dot_de
+Failed example:
+    L = codes.databases.best_linear_code_in_codetables_dot_de(72, 36, GF(2))    # optional - internet
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.coding.databases.best_linear_code_in_codetables_dot_de[0]>", line 1, in <module>
+        L = codes.databases.best_linear_code_in_codetables_dot_de(Integer(72), Integer(36), GF(Integer(2)))    # optional - internet
+      File "/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage/coding/databases.py", line 174, in best_linear_code_in_codetables_dot_de
+        i = s.find("<PRE>")
+    TypeError: argument should be integer or bytes-like object, not 'str'
+**********************************************************************
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_428775.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-11-27T15:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428775",
    "user": "https://github.com/seblabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_428776.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-11-27T15:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428776",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_428777.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-11-29T23:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28760#issuecomment-428777",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_072579.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-29T23:57:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28760",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28760#event-72579"
}
```
