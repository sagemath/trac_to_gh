# Issue 28463: .neighbors() error in polyhedron.representation

archive/issues_028226.json:
```json
{
    "assignees": [],
    "body": "The following Error happens in Sage8.9.beta8:\n\n```\nsage: s = polytopes.simplex(7)\nsage: f = s.faces(3)[0]\nsage: sf = s.stack(f)\n---------------------------------------------------------------------------\nIndexError                                Traceback (most recent call last)\n<ipython-input-3-fae09a40457d> in <module>()\n----> 1 sf = s.stack(f)\n\n/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py in stack(self, face, position)\n   4135         neighboring_facets = set()\n   4136         for facet in face_star:\n-> 4137             for neighbor_facet in facet.neighbors():\n   4138                 if neighbor_facet not in face_star:\n   4139                     neighboring_facets.add(neighbor_facet)\n\n/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/geometry/polyhedron/representation.py in neighbors(self)\n    463         adjacency_matrix = self.polyhedron().facet_adjacency_matrix()\n    464         for x in self.polyhedron().Hrep_generator():\n--> 465             if adjacency_matrix[self.index(), x.index()] == 1:\n    466                 yield x\n    467 \n\n/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.__getitem__ (build/cythonized/sage/matrix/matrix0.c:7282)()\n    963                     col += ncols\n    964                 if col < 0 or col >= ncols:\n--> 965                     raise IndexError(\"matrix index out of range\")\n    966                 single_col = 1\n    967 \n\nIndexError: matrix index out of range\n```\n\nWe fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets. In case of a non-full-dimensional polyhedron, the method had an index shift and did not return anything valuable (if not an error). The method appears to be used only in `stack`, so we do not set a deprecation warning (even so the method is now returning an error for equalities).\n\nAlso, we do some minor changes to `stack`:\n- fix a bug: the stacked vertex needs to be in the relative interior of the `locus_polyhedron` (not just contained in),\n- errors for non-proper faces,\n- remove a redundant test (all vertices of a polyhedron satisfy all of its inequalities/equalites).\n\nCC:  @LaisRast @kliem\n\nKeywords: **polytopes, stack, representation, neighbors**\n\nBranch/Commit: **[f4c89fe](https://github.com/sagemath/sagetrac-mirror/commit/f4c89fe44a14a833ddc5f153f754d4ab26502f63)**\n\nReviewer: **Jean-Philippe Labb\u00e9**\n\nAuthor: **Jonathan Kliem**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28463_\n\n",
    "closed_at": "2019-10-23T22:58:05Z",
    "created_at": "2019-09-09T07:30:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": ".neighbors() error in polyhedron.representation",
    "type": "issue",
    "updated_at": "2019-10-23T22:58:05Z",
    "url": "https://github.com/sagemath/sage/issues/28463",
    "user": "https://github.com/jplab"
}
```
The following Error happens in Sage8.9.beta8:

```
sage: s = polytopes.simplex(7)
sage: f = s.faces(3)[0]
sage: sf = s.stack(f)
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-3-fae09a40457d> in <module>()
----> 1 sf = s.stack(f)

/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/geometry/polyhedron/base.py in stack(self, face, position)
   4135         neighboring_facets = set()
   4136         for facet in face_star:
-> 4137             for neighbor_facet in facet.neighbors():
   4138                 if neighbor_facet not in face_star:
   4139                     neighboring_facets.add(neighbor_facet)

/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/geometry/polyhedron/representation.py in neighbors(self)
    463         adjacency_matrix = self.polyhedron().facet_adjacency_matrix()
    464         for x in self.polyhedron().Hrep_generator():
--> 465             if adjacency_matrix[self.index(), x.index()] == 1:
    466                 yield x
    467 

/home/jplabbe/sage/local/lib/python3.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.__getitem__ (build/cythonized/sage/matrix/matrix0.c:7282)()
    963                     col += ncols
    964                 if col < 0 or col >= ncols:
--> 965                     raise IndexError("matrix index out of range")
    966                 single_col = 1
    967 

IndexError: matrix index out of range
```

We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets. In case of a non-full-dimensional polyhedron, the method had an index shift and did not return anything valuable (if not an error). The method appears to be used only in `stack`, so we do not set a deprecation warning (even so the method is now returning an error for equalities).

Also, we do some minor changes to `stack`:
- fix a bug: the stacked vertex needs to be in the relative interior of the `locus_polyhedron` (not just contained in),
- errors for non-proper faces,
- remove a redundant test (all vertices of a polyhedron satisfy all of its inequalities/equalites).

CC:  @LaisRast @kliem

Keywords: **polytopes, stack, representation, neighbors**

Branch/Commit: **[f4c89fe](https://github.com/sagemath/sagetrac-mirror/commit/f4c89fe44a14a833ddc5f153f754d4ab26502f63)**

Reviewer: **Jean-Philippe Labbé**

Author: **Jonathan Kliem**

_Issue created by migration from https://trac.sagemath.org/ticket/28463_





---

archive/issue_events_372421.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-09-09T07:30:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372421"
}
```



---

archive/issue_events_372422.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-09-09T07:30:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372422"
}
```



---

archive/issue_events_372423.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-09-09T07:30:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372423"
}
```



---

archive/issue_events_372424.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-09-09T07:30:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372424"
}
```



---

archive/issue_comments_446348.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nThis is actually a serious problem. See\n\n```\nsage: P = polytopes.simplex()\n....: F1 = P.Hrepresentation()[1]\n....: list(F1.neighbors())\n....:\n---------------------------------------------------------------------------\nIndexError                                Traceback (most recent call last)\n<ipython-input-11-3a4d81457d82> in <module>()\n      1 P = polytopes.simplex()\n      2 F = P.Hrepresentation()[Integer(1)]\n----> 3 list(F.neighbors())\n\n/usr/lib/python2.7/site-packages/sage/geometry/polyhedron/representation.pyc in neighbors(self)\n    463         adjacency_matrix = self.polyhedron().facet_adjacency_matrix()\n    464         for x in self.polyhedron().Hrep_generator():\n--> 465             if adjacency_matrix[self.index(), x.index()] == 1:\n    466                 yield x\n    467\n\n/usr/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.__getitem__ (build/cythonized/sage/matrix/matrix0.c:7281)()\n    963                     col += ncols\n    964                 if col < 0 or col >= ncols:\n--> 965                     raise IndexError(\"matrix index out of range\")\n    966                 single_col = 1\n    967\n\nIndexError: matrix index out of range\n```\n\nThe method `neighbors()` says that it iterates over the adjacent inequalities *and equations*. However, its code uses the `facet_adjacency_matrix()` method which returns the adjacency of just the inequalities.\nTo solve this, I think we should introduce `H_adjacency_matrix()`, and use it in the code of `neighbors()`.",
    "created_at": "2019-09-09T11:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446348",
    "user": "https://github.com/LaisRast"
}
```

<div id="comment:1" align="right">Comment 1</div>

This is actually a serious problem. See

```
sage: P = polytopes.simplex()
....: F1 = P.Hrepresentation()[1]
....: list(F1.neighbors())
....:
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-11-3a4d81457d82> in <module>()
      1 P = polytopes.simplex()
      2 F = P.Hrepresentation()[Integer(1)]
----> 3 list(F.neighbors())

/usr/lib/python2.7/site-packages/sage/geometry/polyhedron/representation.pyc in neighbors(self)
    463         adjacency_matrix = self.polyhedron().facet_adjacency_matrix()
    464         for x in self.polyhedron().Hrep_generator():
--> 465             if adjacency_matrix[self.index(), x.index()] == 1:
    466                 yield x
    467

/usr/lib/python2.7/site-packages/sage/matrix/matrix0.pyx in sage.matrix.matrix0.Matrix.__getitem__ (build/cythonized/sage/matrix/matrix0.c:7281)()
    963                     col += ncols
    964                 if col < 0 or col >= ncols:
--> 965                     raise IndexError("matrix index out of range")
    966                 single_col = 1
    967

IndexError: matrix index out of range
```

The method `neighbors()` says that it iterates over the adjacent inequalities *and equations*. However, its code uses the `facet_adjacency_matrix()` method which returns the adjacency of just the inequalities.
To solve this, I think we should introduce `H_adjacency_matrix()`, and use it in the code of `neighbors()`.



---

archive/issue_comments_446349.json:
```json
{
    "body": "Branch: **[public/28463](https://github.com/sagemath/sagetrac-mirror/tree/public/28463)**",
    "created_at": "2019-09-10T22:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446349",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/28463](https://github.com/sagemath/sagetrac-mirror/tree/public/28463)**



---

archive/issue_comments_446350.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,3 +32,7 @@\n \n IndexError: matrix index out of range\n ```\n+\n+We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets.\n+\n+Also, we do some minor changes to `stack`.\n``````\n",
    "created_at": "2019-09-10T22:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446350",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,3 +32,7 @@
 
 IndexError: matrix index out of range
 ```
+
+We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets.
+
+Also, we do some minor changes to `stack`.
``````




---

archive/issue_events_372425.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-09-10T22:53:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "title_is": ".neighbors() error in polyhedron.representation",
    "title_was": ".stack() or .facet_adjacency_matrix() error in Polyhedron",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372425"
}
```



---

archive/issue_comments_446351.json:
```json
{
    "body": "Commit: **[8853122](https://github.com/sagemath/sagetrac-mirror/commit/8853122c90f902a73d8534734563bd6f874a6393)**",
    "created_at": "2019-09-10T22:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446351",
    "user": "https://github.com/kliem"
}
```

Commit: **[8853122](https://github.com/sagemath/sagetrac-mirror/commit/8853122c90f902a73d8534734563bd6f874a6393)**



---

archive/issue_events_372426.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-09-10T22:53:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372426"
}
```



---

archive/issue_comments_446352.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI added a suggested fix.\n\nI changed `neighbors` to only include `facets`/`inequalities`. There is no meaning in checking anything else anyway, is there?\n\nAdditionally I changed a few things, which I noticed about `stacked`.\n\nAs `neighbors` did not work for polyhedra with equalities and is not altered for those with without, I don't think a deprecation error is needed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5095c2e510c92fc08dc2291e4ba28fc9587ccdf2\">5095c2e</a></td><td><code>fix neighbors of Hrepresentatives</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8853122c90f902a73d8534734563bd6f874a6393\">8853122</a></td><td><code>small changes to stacking</code></td></tr></table>\n",
    "created_at": "2019-09-10T22:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446352",
    "user": "https://github.com/kliem"
}
```

<div id="comment:2" align="right">Comment 2</div>

I added a suggested fix.

I changed `neighbors` to only include `facets`/`inequalities`. There is no meaning in checking anything else anyway, is there?

Additionally I changed a few things, which I noticed about `stacked`.

As `neighbors` did not work for polyhedra with equalities and is not altered for those with without, I don't think a deprecation error is needed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5095c2e510c92fc08dc2291e4ba28fc9587ccdf2">5095c2e</a></td><td><code>fix neighbors of Hrepresentatives</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8853122c90f902a73d8534734563bd6f874a6393">8853122</a></td><td><code>small changes to stacking</code></td></tr></table>




---

archive/issue_comments_446353.json:
```json
{
    "body": "Changed keywords from **polytopes, stack** to **polytopes, stack, representation, neighbors**",
    "created_at": "2019-09-10T22:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446353",
    "user": "https://github.com/kliem"
}
```

Changed keywords from **polytopes, stack** to **polytopes, stack, representation, neighbors**



---

archive/issue_comments_446354.json:
```json
{
    "body": "Author: **Jonathan Kliem**",
    "created_at": "2019-09-10T22:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446354",
    "user": "https://github.com/kliem"
}
```

Author: **Jonathan Kliem**



---

archive/issue_comments_446355.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/462db8d5994837b27badf03b679f13af5a60c40d\">462db8d</a></td><td><code>stacking is well defined for rationals (and in case of base ring cdd reals as well)</code></td></tr></table>\n",
    "created_at": "2019-09-11T04:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446355",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/462db8d5994837b27badf03b679f13af5a60c40d">462db8d</a></td><td><code>stacking is well defined for rationals (and in case of base ring cdd reals as well)</code></td></tr></table>




---

archive/issue_comments_446356.json:
```json
{
    "body": "Changed commit from **[8853122](https://github.com/sagemath/sagetrac-mirror/commit/8853122c90f902a73d8534734563bd6f874a6393)** to **[462db8d](https://github.com/sagemath/sagetrac-mirror/commit/462db8d5994837b27badf03b679f13af5a60c40d)**",
    "created_at": "2019-09-11T04:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446356",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8853122](https://github.com/sagemath/sagetrac-mirror/commit/8853122c90f902a73d8534734563bd6f874a6393)** to **[462db8d](https://github.com/sagemath/sagetrac-mirror/commit/462db8d5994837b27badf03b679f13af5a60c40d)**



---

archive/issue_events_372427.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-09-12T06:30:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372427"
}
```



---

archive/issue_events_372428.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-09-12T06:30:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372428"
}
```



---

archive/issue_comments_446357.json:
```json
{
    "body": "Reviewer: **Jean-Philippe Labb\u00e9**",
    "created_at": "2019-09-12T06:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446357",
    "user": "https://github.com/jplab"
}
```

Reviewer: **Jean-Philippe Labbé**



---

archive/issue_comments_446358.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nA few comments:\n\n- You should put \"Checking that :trac:`28463` is fixed::\" in the docstring before the failing test coming from this ticket.\n\n- I would not refer to an internal variable in the TEST block, but try to say it in words.\n\n- It would be good to show the new raised ValueError at the end of the examples to say that you should do this on proper faces only (but really at the end, so that \"working examples\" come first...)\n\n- Careful with 1 empty line after `::` and indentation of code blocks, otherwise documentation won't build.\n\n- You introduced two useless empty lines it seems.\n\n- Please reread what you changed in `representation` it seems contradictory \"Does not work for inequalities::\" and \"AssertionError: must be inequality\" is at best very confusing.\n\n- I don't know what you are talking about with a deprecation: you are changing the behavior of the function, not changing a name or an option. In principle, this change is not wished. That is: we may break a lot of code doing so. That said, the code was broken, so fair enough. But the question remains: is there internal code that breaks due to a weird use of `neighbor()`? Could you check that? Then, I would say it should be a TypeError and not an AssertionError.",
    "created_at": "2019-09-12T06:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446358",
    "user": "https://github.com/jplab"
}
```

<div id="comment:4" align="right">Comment 4</div>

A few comments:

- You should put "Checking that :trac:`28463` is fixed::" in the docstring before the failing test coming from this ticket.

- I would not refer to an internal variable in the TEST block, but try to say it in words.

- It would be good to show the new raised ValueError at the end of the examples to say that you should do this on proper faces only (but really at the end, so that "working examples" come first...)

- Careful with 1 empty line after `::` and indentation of code blocks, otherwise documentation won't build.

- You introduced two useless empty lines it seems.

- Please reread what you changed in `representation` it seems contradictory "Does not work for inequalities::" and "AssertionError: must be inequality" is at best very confusing.

- I don't know what you are talking about with a deprecation: you are changing the behavior of the function, not changing a name or an option. In principle, this change is not wished. That is: we may break a lot of code doing so. That said, the code was broken, so fair enough. But the question remains: is there internal code that breaks due to a weird use of `neighbor()`? Could you check that? Then, I would say it should be a TypeError and not an AssertionError.



---

archive/issue_comments_446359.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nA small remark. The docstring of `neighbors` still says inequalities and *equations*:\n\n```\n    Iterate over the adjacent facets (i.e. inequalities/equations)\n```",
    "created_at": "2019-09-12T09:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446359",
    "user": "https://github.com/LaisRast"
}
```

<div id="comment:5" align="right">Comment 5</div>

A small remark. The docstring of `neighbors` still says inequalities and *equations*:

```
    Iterate over the adjacent facets (i.e. inequalities/equations)
```



---

archive/issue_comments_446360.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5771568fdcd64567a9b2771a9a3abf27f75b46ea\">5771568</a></td><td><code>small changes</code></td></tr></table>\n",
    "created_at": "2019-09-12T21:27:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446360",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5771568fdcd64567a9b2771a9a3abf27f75b46ea">5771568</a></td><td><code>small changes</code></td></tr></table>




---

archive/issue_comments_446361.json:
```json
{
    "body": "Changed commit from **[462db8d](https://github.com/sagemath/sagetrac-mirror/commit/462db8d5994837b27badf03b679f13af5a60c40d)** to **[5771568](https://github.com/sagemath/sagetrac-mirror/commit/5771568fdcd64567a9b2771a9a3abf27f75b46ea)**",
    "created_at": "2019-09-12T21:27:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446361",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[462db8d](https://github.com/sagemath/sagetrac-mirror/commit/462db8d5994837b27badf03b679f13af5a60c40d)** to **[5771568](https://github.com/sagemath/sagetrac-mirror/commit/5771568fdcd64567a9b2771a9a3abf27f75b46ea)**



---

archive/issue_comments_446362.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nReplying to [@jplab](#comment%3A4):\n> A few comments:\n> \n> - You should put \"Checking that :trac:`28463` is fixed::\" in the docstring before the failing test coming from this ticket.\n> \n> - I would not refer to an internal variable in the TEST block, but try to say it in words.\n> \n> - It would be good to show the new raised ValueError at the end of the examples to say that you should do this on proper faces only (but really at the end, so that \"working examples\" come first...)\n> \n> - Careful with 1 empty line after `::` and indentation of code blocks, otherwise documentation won't build.\n> \n> - You introduced two useless empty lines it seems.\n\nMy editor deletes trailing white spaces by default.\n> \n> - Please reread what you changed in `representation` it seems contradictory \"Does not work for inequalities::\" and \"AssertionError: must be inequality\" is at best very confusing.\n> \n> - I don't know what you are talking about with a deprecation: you are changing the behavior of the function, not changing a name or an option. In principle, this change is not wished. That is: we may break a lot of code doing so. That said, the code was broken, so fair enough. But the question remains: is there internal code that breaks due to a weird use of `neighbor()`? Could you check that? Then, I would say it should be a TypeError and not an AssertionError.",
    "created_at": "2019-09-12T21:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446362",
    "user": "https://github.com/kliem"
}
```

<div id="comment:7" align="right">Comment 7</div>

Replying to [@jplab](#comment%3A4):
> A few comments:
> 
> - You should put "Checking that :trac:`28463` is fixed::" in the docstring before the failing test coming from this ticket.
> 
> - I would not refer to an internal variable in the TEST block, but try to say it in words.
> 
> - It would be good to show the new raised ValueError at the end of the examples to say that you should do this on proper faces only (but really at the end, so that "working examples" come first...)
> 
> - Careful with 1 empty line after `::` and indentation of code blocks, otherwise documentation won't build.
> 
> - You introduced two useless empty lines it seems.

My editor deletes trailing white spaces by default.
> 
> - Please reread what you changed in `representation` it seems contradictory "Does not work for inequalities::" and "AssertionError: must be inequality" is at best very confusing.
> 
> - I don't know what you are talking about with a deprecation: you are changing the behavior of the function, not changing a name or an option. In principle, this change is not wished. That is: we may break a lot of code doing so. That said, the code was broken, so fair enough. But the question remains: is there internal code that breaks due to a weird use of `neighbor()`? Could you check that? Then, I would say it should be a TypeError and not an AssertionError.



---

archive/issue_events_372429.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-09-12T21:29:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372429"
}
```



---

archive/issue_events_372430.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-09-12T21:29:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372430"
}
```



---

archive/issue_comments_446363.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\n\n```diff\n-        Checking that stacked point needs to be in the interior of\n-        ``locus_polyhedron``::\n+        The stacked vertex may not satisfy any inequality\n+        defining the original polyhedron::\n```\n\nThis is making it less precise. Why not say:\n\n```diff\n+        Taking the stacking vertex too far with the parameter `XXX` may result in a failure to produce the desired (combinatorial type of) polytope.\n```\n\nYou forgot to indent the sage blocks.\n\nHave you looked at the other places where `.neighbors` is used in the polyhedron folder?",
    "created_at": "2019-09-13T06:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446363",
    "user": "https://github.com/jplab"
}
```

<div id="comment:9" align="right">Comment 9</div>


```diff
-        Checking that stacked point needs to be in the interior of
-        ``locus_polyhedron``::
+        The stacked vertex may not satisfy any inequality
+        defining the original polyhedron::
```

This is making it less precise. Why not say:

```diff
+        Taking the stacking vertex too far with the parameter `XXX` may result in a failure to produce the desired (combinatorial type of) polytope.
```

You forgot to indent the sage blocks.

Have you looked at the other places where `.neighbors` is used in the polyhedron folder?



---

archive/issue_events_372431.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-09-13T06:38:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372431"
}
```



---

archive/issue_events_372432.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-09-13T06:38:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372432"
}
```



---

archive/issue_comments_446364.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@jplab](#comment%3A9):\n> \n> ```diff\n> -        Checking that stacked point needs to be in the interior of\n> -        ``locus_polyhedron``::\n> +        The stacked vertex may not satisfy any inequality\n> +        defining the original polyhedron::\n> ```\n> \n> This is making it less precise. Why not say:\n> \n> ```diff\n> +        Taking the stacking vertex too far with the parameter `XXX` may result in a failure to produce the desired (combinatorial type of) polytope.\n> ```\n\nActually, I did fix a bug in stacked as well. The set of permittable points should be the relative interior of `locus_polyhedron`. This is not the way it was before. Maybe I should really set up another ticket for the fixes in `stack` and describe this in the ticket.\n\n`position=4` is in the boundary of `locus_polyhedron` and before my fix it returned a wrong combinatorial type.\n> \n> You forgot to indent the sage blocks.\n> \n> Have you looked at the other places where `.neighbors` is used in the polyhedron folder?\n\nNot yet. The tests passed and so I figured it's fine. Also `neighbors` returned complete nonsense for non-fulldimensional cases due to index shifting. So if anyone has successfully used it, he or she got really lucky. Nevertheless, I can check.",
    "created_at": "2019-09-13T08:13:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446364",
    "user": "https://github.com/kliem"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@jplab](#comment%3A9):
> 
> ```diff
> -        Checking that stacked point needs to be in the interior of
> -        ``locus_polyhedron``::
> +        The stacked vertex may not satisfy any inequality
> +        defining the original polyhedron::
> ```
> 
> This is making it less precise. Why not say:
> 
> ```diff
> +        Taking the stacking vertex too far with the parameter `XXX` may result in a failure to produce the desired (combinatorial type of) polytope.
> ```

Actually, I did fix a bug in stacked as well. The set of permittable points should be the relative interior of `locus_polyhedron`. This is not the way it was before. Maybe I should really set up another ticket for the fixes in `stack` and describe this in the ticket.

`position=4` is in the boundary of `locus_polyhedron` and before my fix it returned a wrong combinatorial type.
> 
> You forgot to indent the sage blocks.
> 
> Have you looked at the other places where `.neighbors` is used in the polyhedron folder?

Not yet. The tests passed and so I figured it's fine. Also `neighbors` returned complete nonsense for non-fulldimensional cases due to index shifting. So if anyone has successfully used it, he or she got really lucky. Nevertheless, I can check.



---

archive/issue_comments_446365.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@kliem](#comment%3A11):\n> Replying to [@jplab](#comment%3A9):\n> > \n> > ```diff\n> > -        Checking that stacked point needs to be in the interior of\n> > -        ``locus_polyhedron``::\n> > +        The stacked vertex may not satisfy any inequality\n> > +        defining the original polyhedron::\n> > ```\n> > \n> > This is making it less precise. Why not say:\n> > \n> > ```diff\n> > +        Taking the stacking vertex too far with the parameter `XXX` may result in a failure to produce the desired (combinatorial type of) polytope.\n> > ```\n\n> \n> Actually, I did fix a bug in stacked as well. The set of permittable points should be the relative interior of `locus_polyhedron`. This is not the way it was before. Maybe I should really set up another ticket for the fixes in `stack` and describe this in the ticket.\n\nNo, I believe it is fine. This ticket is about the fact that stacking was not working (originally). So I would say that one can fix the bug and adapt the description of the ticket accordingly.\n\n\n> \n> `position=4` is in the boundary of `locus_polyhedron` and before my fix it returned a wrong combinatorial type.\n\nOne more reason to mention this in the documentation before this test (how should I know that this is what is tested???).\n\n> > \n> > You forgot to indent the sage blocks.\n> > \n> > Have you looked at the other places where `.neighbors` is used in the polyhedron folder?\n\n> \n> Not yet. The tests passed and so I figured it's fine. \n\nExactly, that's my point: just checking the tests is not enough. One should do a grep to see where this function is used _internally_.",
    "created_at": "2019-09-13T10:04:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446365",
    "user": "https://github.com/jplab"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@kliem](#comment%3A11):
> Replying to [@jplab](#comment%3A9):
> > 
> > ```diff
> > -        Checking that stacked point needs to be in the interior of
> > -        ``locus_polyhedron``::
> > +        The stacked vertex may not satisfy any inequality
> > +        defining the original polyhedron::
> > ```
> > 
> > This is making it less precise. Why not say:
> > 
> > ```diff
> > +        Taking the stacking vertex too far with the parameter `XXX` may result in a failure to produce the desired (combinatorial type of) polytope.
> > ```

> 
> Actually, I did fix a bug in stacked as well. The set of permittable points should be the relative interior of `locus_polyhedron`. This is not the way it was before. Maybe I should really set up another ticket for the fixes in `stack` and describe this in the ticket.

No, I believe it is fine. This ticket is about the fact that stacking was not working (originally). So I would say that one can fix the bug and adapt the description of the ticket accordingly.


> 
> `position=4` is in the boundary of `locus_polyhedron` and before my fix it returned a wrong combinatorial type.

One more reason to mention this in the documentation before this test (how should I know that this is what is tested???).

> > 
> > You forgot to indent the sage blocks.
> > 
> > Have you looked at the other places where `.neighbors` is used in the polyhedron folder?

> 
> Not yet. The tests passed and so I figured it's fine. 

Exactly, that's my point: just checking the tests is not enough. One should do a grep to see where this function is used _internally_.



---

archive/issue_comments_446366.json:
```json
{
    "body": "Changed commit from **[5771568](https://github.com/sagemath/sagetrac-mirror/commit/5771568fdcd64567a9b2771a9a3abf27f75b46ea)** to **[01c5c19](https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110)**",
    "created_at": "2019-09-13T19:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446366",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5771568](https://github.com/sagemath/sagetrac-mirror/commit/5771568fdcd64567a9b2771a9a3abf27f75b46ea)** to **[01c5c19](https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110)**



---

archive/issue_comments_446367.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110\">01c5c19</a></td><td><code>improved docstring</code></td></tr></table>\n",
    "created_at": "2019-09-13T19:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446367",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110">01c5c19</a></td><td><code>improved docstring</code></td></tr></table>




---

archive/issue_events_372433.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-09-13T19:59:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372433"
}
```



---

archive/issue_events_372434.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-09-13T19:59:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372434"
}
```



---

archive/issue_comments_446368.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110\">01c5c19</a></td><td><code>improved docstring</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110\">01c5c19</a></td><td><code>improved docstring</code></td></tr></table>\n",
    "created_at": "2019-09-13T19:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446368",
    "user": "https://github.com/kliem"
}
```

<div id="comment:14" align="right">Comment 14</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110">01c5c19</a></td><td><code>improved docstring</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110">01c5c19</a></td><td><code>improved docstring</code></td></tr></table>




---

archive/issue_comments_446369.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -33,6 +33,9 @@\n IndexError: matrix index out of range\n ```\n \n-We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets.\n+We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets. In case of a non-full-dimensional polyhedron, the method had an index shift and did not return anything valuable (if not an error). The method appears to be used only in `stack`, so we do not set a deprecation warning (even so the method is now returning an error for equalities).\n \n-Also, we do some minor changes to `stack`.\n+Also, we do some minor changes to `stack`:\n+- fix a bug: the stacked vertex needs to be in the relative interior of the `locus_polyhedron` (not just interior),\n+- errors for non-proper faces,\n+- remove a redundant test (all vertices of a polyhedron satisfy all of its inequalities/equalites).\n``````\n",
    "created_at": "2019-09-13T19:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446369",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -33,6 +33,9 @@
 IndexError: matrix index out of range
 ```
 
-We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets.
+We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets. In case of a non-full-dimensional polyhedron, the method had an index shift and did not return anything valuable (if not an error). The method appears to be used only in `stack`, so we do not set a deprecation warning (even so the method is now returning an error for equalities).
 
-Also, we do some minor changes to `stack`.
+Also, we do some minor changes to `stack`:
+- fix a bug: the stacked vertex needs to be in the relative interior of the `locus_polyhedron` (not just interior),
+- errors for non-proper faces,
+- remove a redundant test (all vertices of a polyhedron satisfy all of its inequalities/equalites).
``````




---

archive/issue_comments_446370.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,6 +36,6 @@\n We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets. In case of a non-full-dimensional polyhedron, the method had an index shift and did not return anything valuable (if not an error). The method appears to be used only in `stack`, so we do not set a deprecation warning (even so the method is now returning an error for equalities).\n \n Also, we do some minor changes to `stack`:\n-- fix a bug: the stacked vertex needs to be in the relative interior of the `locus_polyhedron` (not just interior),\n+- fix a bug: the stacked vertex needs to be in the relative interior of the `locus_polyhedron` (not just contained in),\n - errors for non-proper faces,\n - remove a redundant test (all vertices of a polyhedron satisfy all of its inequalities/equalites).\n``````\n",
    "created_at": "2019-09-14T07:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446370",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,6 +36,6 @@
 We fix `neighbors` of `polyhedron.representation` to only specify inequalities/facets. In case of a non-full-dimensional polyhedron, the method had an index shift and did not return anything valuable (if not an error). The method appears to be used only in `stack`, so we do not set a deprecation warning (even so the method is now returning an error for equalities).
 
 Also, we do some minor changes to `stack`:
-- fix a bug: the stacked vertex needs to be in the relative interior of the `locus_polyhedron` (not just interior),
+- fix a bug: the stacked vertex needs to be in the relative interior of the `locus_polyhedron` (not just contained in),
 - errors for non-proper faces,
 - remove a redundant test (all vertices of a polyhedron satisfy all of its inequalities/equalites).
``````




---

archive/issue_comments_446371.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nTwo minor things:\n\npermittable -> possible, permitted, allowed\n`position` -> ``position``\n\n\nOnce you fix these and the pyflakes error at line 8112, you can set it to positive review on my behalf.\n\nP.S. Welcome back to work!",
    "created_at": "2019-10-14T09:31:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446371",
    "user": "https://github.com/jplab"
}
```

<div id="comment:16" align="right">Comment 16</div>

Two minor things:

permittable -> possible, permitted, allowed
`position` -> ``position``


Once you fix these and the pyflakes error at line 8112, you can set it to positive review on my behalf.

P.S. Welcome back to work!



---

archive/issue_events_372435.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-14T09:31:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372435"
}
```



---

archive/issue_events_372436.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-14T09:31:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372436"
}
```



---

archive/issue_comments_446372.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/901a37ada4795138726d6ebcd22562e6ec580167\">901a37a</a></td><td><code>minor changes in documentation</code></td></tr></table>\n",
    "created_at": "2019-10-14T10:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446372",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17" align="right">Comment 17</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/901a37ada4795138726d6ebcd22562e6ec580167">901a37a</a></td><td><code>minor changes in documentation</code></td></tr></table>




---

archive/issue_comments_446373.json:
```json
{
    "body": "Changed commit from **[01c5c19](https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110)** to **[901a37a](https://github.com/sagemath/sagetrac-mirror/commit/901a37ada4795138726d6ebcd22562e6ec580167)**",
    "created_at": "2019-10-14T10:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446373",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[01c5c19](https://github.com/sagemath/sagetrac-mirror/commit/01c5c190ff7ae068fd201c479df6ba8d5a0b3110)** to **[901a37a](https://github.com/sagemath/sagetrac-mirror/commit/901a37ada4795138726d6ebcd22562e6ec580167)**



---

archive/issue_comments_446374.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@jplab](#comment%3A16):\n> Two minor things:\n> \n> permittable -> possible, permitted, allowed\n> `position` -> ``position``\n> \n> \n> Once you fix these and the pyflakes error at line 8112, you can set it to positive review on my behalf.\n\nI can't even locate that error. I don't know in which line this appears (I don't find a version, where line 8112 could have resulted in this error.)\n> \n> P.S. Welcome back to work!",
    "created_at": "2019-10-14T10:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446374",
    "user": "https://github.com/kliem"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@jplab](#comment%3A16):
> Two minor things:
> 
> permittable -> possible, permitted, allowed
> `position` -> ``position``
> 
> 
> Once you fix these and the pyflakes error at line 8112, you can set it to positive review on my behalf.

I can't even locate that error. I don't know in which line this appears (I don't find a version, where line 8112 could have resulted in this error.)
> 
> P.S. Welcome back to work!



---

archive/issue_events_372437.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-14T10:35:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372437"
}
```



---

archive/issue_events_372438.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-14T10:35:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372438"
}
```



---

archive/issue_comments_446375.json:
```json
{
    "body": "Changed commit from **[901a37a](https://github.com/sagemath/sagetrac-mirror/commit/901a37ada4795138726d6ebcd22562e6ec580167)** to **[f4c89fe](https://github.com/sagemath/sagetrac-mirror/commit/f4c89fe44a14a833ddc5f153f754d4ab26502f63)**",
    "created_at": "2019-10-15T07:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446375",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[901a37a](https://github.com/sagemath/sagetrac-mirror/commit/901a37ada4795138726d6ebcd22562e6ec580167)** to **[f4c89fe](https://github.com/sagemath/sagetrac-mirror/commit/f4c89fe44a14a833ddc5f153f754d4ab26502f63)**



---

archive/issue_comments_446376.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4c89fe44a14a833ddc5f153f754d4ab26502f63\">f4c89fe</a></td><td><code>fixed pyflakes error in affine hull</code></td></tr></table>\n",
    "created_at": "2019-10-15T07:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446376",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4c89fe44a14a833ddc5f153f754d4ab26502f63">f4c89fe</a></td><td><code>fixed pyflakes error in affine hull</code></td></tr></table>




---

archive/issue_comments_446377.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nI guess this is the case now. I'll put in on positive review.\n\nReplying to [@jplab](#comment%3A16):\n> Two minor things:\n> \n> permittable -> possible, permitted, allowed\n> `position` -> ``position``\n> \n> \n> Once you fix these and the pyflakes error at line 8112, you can set it to positive review on my behalf.\n> \n> P.S. Welcome back to work!",
    "created_at": "2019-10-21T13:13:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446377",
    "user": "https://github.com/kliem"
}
```

<div id="comment:21" align="right">Comment 21</div>

I guess this is the case now. I'll put in on positive review.

Replying to [@jplab](#comment%3A16):
> Two minor things:
> 
> permittable -> possible, permitted, allowed
> `position` -> ``position``
> 
> 
> Once you fix these and the pyflakes error at line 8112, you can set it to positive review on my behalf.
> 
> P.S. Welcome back to work!



---

archive/issue_events_372439.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-21T13:13:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372439"
}
```



---

archive/issue_events_372440.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-21T13:13:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372440"
}
```



---

archive/issue_events_372441.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-21T19:00:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372441"
}
```



---

archive/issue_events_372442.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-21T19:00:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372442"
}
```



---

archive/issue_comments_446378.json:
```json
{
    "body": "Changed branch from **[public/28463](https://github.com/sagemath/sagetrac-mirror/tree/public/28463)** to **[f4c89fe](https://github.com/sagemath/sagetrac-mirror/commit/f4c89fe44a14a833ddc5f153f754d4ab26502f63)**",
    "created_at": "2019-10-23T22:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28463#issuecomment-446378",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/28463](https://github.com/sagemath/sagetrac-mirror/tree/public/28463)** to **[f4c89fe](https://github.com/sagemath/sagetrac-mirror/commit/f4c89fe44a14a833ddc5f153f754d4ab26502f63)**



---

archive/issue_events_372443.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-23T22:58:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372443"
}
```



---

archive/issue_events_372444.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ceee1d48ad9a6841670b2ee69f3887cbe397a792",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-10-23T22:58:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28463",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28463#event-372444"
}
```
