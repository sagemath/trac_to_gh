# Issue 28918: Make giacpy_sage a standard package

archive/issues_028681.json:
```json
{
    "assignees": [],
    "body": "This is to make `giacpy_sage` a standard SPKG.\n\nIt provides Cython bindings to Giac and has been\nan optional SPKG for several years, initially as `giacpy`,\nthen since July 2016 as `giacpy_sage`.\n\nMaking it standard would be a step toward replacing\nall `pexpect` calls to `Giac` by `giacpy_sage` calls,\nas suggested in\n\n- \u200b[#28913 comment:3](https://github.com/sagemath/sage/issues/28913#comment:3)\n\nHome:\n\n- https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/\n\nUpstream upgrade needed (2 doctests failure with python3):\n\n- http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.1.tar.gz\n\nNote: this ticket was made obsolete by\n\n- #29171 \"Move giacpy_sage into sage source code\" (merged in Sage 9.2.beta10)\n\nCC:  @frederichan-IMJPRG @mwageringel @slel @videlec\n\nBranch/Commit: **[public/giacpy_sage-0.7](https://github.com/sagemath/sagetrac-mirror/tree/public/giacpy_sage-0.7) @ [`7a4bdb9`](https://github.com/sagemath/sagetrac-mirror/commit/7a4bdb93fbf73c586b4e0cb8ee5235334b284d8b)**\n\nReviewer: **Markus Wageringel**\n\nComponent: **packages: optional**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28918_\n\n",
    "closed_at": "2020-09-03T09:19:10Z",
    "created_at": "2019-12-28T06:29:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make giacpy_sage a standard package",
    "type": "issue",
    "updated_at": "2020-09-03T09:19:10Z",
    "url": "https://github.com/sagemath/sage/issues/28918",
    "user": "https://github.com/slel"
}
```
This is to make `giacpy_sage` a standard SPKG.

It provides Cython bindings to Giac and has been
an optional SPKG for several years, initially as `giacpy`,
then since July 2016 as `giacpy_sage`.

Making it standard would be a step toward replacing
all `pexpect` calls to `Giac` by `giacpy_sage` calls,
as suggested in

- ​[#28913 comment:3](https://github.com/sagemath/sage/issues/28913#comment:3)

Home:

- https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/

Upstream upgrade needed (2 doctests failure with python3):

- http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.1.tar.gz

Note: this ticket was made obsolete by

- #29171 "Move giacpy_sage into sage source code" (merged in Sage 9.2.beta10)

CC:  @frederichan-IMJPRG @mwageringel @slel @videlec

Branch/Commit: **[public/giacpy_sage-0.7](https://github.com/sagemath/sagetrac-mirror/tree/public/giacpy_sage-0.7) @ [`7a4bdb9`](https://github.com/sagemath/sagetrac-mirror/commit/7a4bdb93fbf73c586b4e0cb8ee5235334b284d8b)**

Reviewer: **Markus Wageringel**

Component: **packages: optional**

_Issue created by migration from https://trac.sagemath.org/ticket/28918_





---

archive/issue_events_397305.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-12-28T06:29:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397305"
}
```



---

archive/issue_events_397306.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-12-28T06:29:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397306"
}
```



---

archive/issue_events_397307.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-12-28T06:29:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397307"
}
```



---

archive/issue_events_397308.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-12-28T06:29:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397308"
}
```



---

archive/issue_comments_451582.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,16 @@\n-As suggested in [#28913 comment:3](https://github.com/sagemath/sage/issues/28913#comment:3).\n+This is to make `giacpy_sage` a standard SPKG.\n+\n+It provides Cython bindings to Giac and has been\n+an optional SPKG for several years, initially as `giacpy`,\n+then since July 2016 as `giacpy_sage`.\n+\n+Making it standard would be a step toward replacing\n+all `pexpect` calls to `Giac` by `giacpy_sage` calls,\n+as suggested in\n+\n+- \u200b[#28913 comment:3](https://github.com/sagemath/sage/issues/28913#comment:3)\n+\n+Home:\n+\n+- https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/\n+\n``````\n",
    "created_at": "2019-12-30T02:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451582",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,16 @@
-As suggested in [#28913 comment:3](https://github.com/sagemath/sage/issues/28913#comment:3).
+This is to make `giacpy_sage` a standard SPKG.
+
+It provides Cython bindings to Giac and has been
+an optional SPKG for several years, initially as `giacpy`,
+then since July 2016 as `giacpy_sage`.
+
+Making it standard would be a step toward replacing
+all `pexpect` calls to `Giac` by `giacpy_sage` calls,
+as suggested in
+
+- ​[#28913 comment:3](https://github.com/sagemath/sage/issues/28913#comment:3)
+
+Home:
+
+- https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/
+
``````




---

archive/issue_events_397309.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-12-30T02:03:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397309"
}
```



---

archive/issue_events_397310.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2019-12-30T02:03:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397310"
}
```



---

archive/issue_comments_451583.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhat is required to make this happen?",
    "created_at": "2020-02-03T20:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451583",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:2" align="right">comment:2</div>

What is required to make this happen?



---

archive/issue_comments_451584.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@mwageringel](#comment:2):\n> What is required to make this happen?\n\nUsually a vote on sage-devel. The package has been optional long enough that it should be the only requirement.\n\nFor info, the only case new packages go straight to standard without vote or questions is when they are new dependency of a standard package.",
    "created_at": "2020-02-03T21:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451584",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@mwageringel](#comment:2):
> What is required to make this happen?

Usually a vote on sage-devel. The package has been optional long enough that it should be the only requirement.

For info, the only case new packages go straight to standard without vote or questions is when they are new dependency of a standard package.



---

archive/issue_comments_451585.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nLaunched a poll on sage-devel:\n\n- https://groups.google.com/d/topic/sage-devel/uYXGzG_py28/discussion",
    "created_at": "2020-02-03T22:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451585",
    "user": "https://github.com/slel"
}
```

<div id="comment:4" align="right">comment:4</div>

Launched a poll on sage-devel:

- https://groups.google.com/d/topic/sage-devel/uYXGzG_py28/discussion



---

archive/issue_comments_451586.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThank you for this ticket.\nNB: if the vote is favorable we need to remove all the:\n\n```\noptional - giacpy_sage\n```\nin the comments of the doctests in the following files:\n\n```\nsrc/sage/libs/giac.py\nsrc/sage/rings/polynomial/multi_polynomial_ideal.py\n```\n\nNB: the **random** and **long time** comments should stay. \n\nThere is also a flag in the following\n\n```\nbuild/pkgs/giacpy_sage/type\n```\nbut I don't know if the ticket should change it or let the Release Manager do it himself.",
    "created_at": "2020-02-04T09:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451586",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:5" align="right">comment:5</div>

Thank you for this ticket.
NB: if the vote is favorable we need to remove all the:

```
optional - giacpy_sage
```
in the comments of the doctests in the following files:

```
src/sage/libs/giac.py
src/sage/rings/polynomial/multi_polynomial_ideal.py
```

NB: the **random** and **long time** comments should stay. 

There is also a flag in the following

```
build/pkgs/giacpy_sage/type
```
but I don't know if the ticket should change it or let the Release Manager do it himself.



---

archive/issue_comments_451587.json:
```json
{
    "body": "Commit: **[`85e7801`](https://github.com/sagemath/sagetrac-mirror/commit/85e78011637ab7fc553e3d1dd726311676412ec4)**",
    "created_at": "2020-02-04T14:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451587",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Commit: **[`85e7801`](https://github.com/sagemath/sagetrac-mirror/commit/85e78011637ab7fc553e3d1dd726311676412ec4)**



---

archive/issue_comments_451588.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI have found 2 doctest failure in sage 9.1.beta3 due to python3. So we also need to upgrade the upstream source to giacpy_sage-0.7.0.\n\nI have started a new public branch with this upstream fix. But let all the optional flags in the sage code. If the vote turn out to be positive we will have to remove them.",
    "created_at": "2020-02-04T14:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451588",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:6" align="right">comment:6</div>

I have found 2 doctest failure in sage 9.1.beta3 due to python3. So we also need to upgrade the upstream source to giacpy_sage-0.7.0.

I have started a new public branch with this upstream fix. But let all the optional flags in the sage code. If the vote turn out to be positive we will have to remove them.



---

archive/issue_comments_451589.json:
```json
{
    "body": "Author: **Frederic Han**",
    "created_at": "2020-02-04T14:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451589",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Author: **Frederic Han**



---

archive/issue_comments_451590.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,8 @@\n \n - https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/\n \n+Upstream upgrade needed (2 doctests failure with python3):\n+\n+- http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.0.tar.gz\n+\n+\n``````\n",
    "created_at": "2020-02-04T14:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451590",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,8 @@
 
 - https://gitlab.math.univ-paris-diderot.fr/han/giacpy-sage/
 
+Upstream upgrade needed (2 doctests failure with python3):
+
+- http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.0.tar.gz
+
+
``````




---

archive/issue_comments_451591.json:
```json
{
    "body": "Branch: **[public/giacpy_sage-0.7](https://github.com/sagemath/sagetrac-mirror/tree/public/giacpy_sage-0.7)**",
    "created_at": "2020-02-04T14:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451591",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Branch: **[public/giacpy_sage-0.7](https://github.com/sagemath/sagetrac-mirror/tree/public/giacpy_sage-0.7)**



---

archive/issue_comments_451592.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSomething for upstream, I fail to compile giacpy_sage-0.7.0 with the latest giac (1.5.0.85)\n\n```\nbuilding 'giacpy_sage' extension\ncreating /dev/shm/portage/dev-python/giacpy_sage-0.7.0/work/giacpy_sage-0.7.0-python3_7/temp.linux-x86_64-3.7\nx86_64-pc-linux-gnu-g++ -march=native -O2 -pipe -fPIC -I/usr/lib/python3.7/site-packages/cysignals -I/dev/shm/portage/dev-python/giacpy_sage-0.7.0/work/giacpy_sage-0.7.0 -I/usr/lib/python3.7/site-packages/sage/libs/ntl -I/usr/lib/python3.7/site-packages/sage/cpython -I/usr/include -I/usr/lib/python3.7/site-packages -I/usr/lib/python3.7/site-packages/sage/ext -I/usr/include/python3.7m -I/usr/lib/python3.7/site-packages/numpy/core/include -I/usr/include/python3.7m -c giacpy_sage.cpp -o /dev/shm/portage/dev-python/giacpy_sage-0.7.0/work/giacpy_sage-0.7.0-python3_7/temp.linux-x86_64-3.7/giacpy_sage.o -std=c++11\nIn file included from giacpy_sage.cpp:665:\nmisc.h: In function \u2018void archivegen(std::string, const giac::gen&, const giac::context*)\u2019:\nmisc.h:104:15: error: variable \u2018std::ofstream of\u2019 has initializer but incomplete type\n  104 |   ofstream of(filename.c_str());\n      |               ^~~~~~~~\nmisc.h: In function \u2018giac::gen unarchivegen(std::string, const giac::context*)\u2019:\nmisc.h:110:14: error: variable \u2018std::ifstream f\u2019 has initializer but incomplete type\n  110 |   ifstream f(filename.c_str());\n      |              ^~~~~~~~\n/usr/lib/python3.7/site-packages/Cython/Compiler/Main.py:369: FutureWarning: Cython directive 'language_level' not set, using 2 for now (Py2). This will change in a later release! File: /dev/shm/portage/dev-python/giacpy_sage-0.7.0/work/giacpy_sage-0.7.0/giacpy_sage.pxd\n  tree = Parsing.p_module(s, pxd, full_module_name)\nerror: command 'x86_64-pc-linux-gnu-g++' failed with exit status 1\n```\nAny ideas?",
    "created_at": "2020-02-05T00:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451592",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

Something for upstream, I fail to compile giacpy_sage-0.7.0 with the latest giac (1.5.0.85)

```
building 'giacpy_sage' extension
creating /dev/shm/portage/dev-python/giacpy_sage-0.7.0/work/giacpy_sage-0.7.0-python3_7/temp.linux-x86_64-3.7
x86_64-pc-linux-gnu-g++ -march=native -O2 -pipe -fPIC -I/usr/lib/python3.7/site-packages/cysignals -I/dev/shm/portage/dev-python/giacpy_sage-0.7.0/work/giacpy_sage-0.7.0 -I/usr/lib/python3.7/site-packages/sage/libs/ntl -I/usr/lib/python3.7/site-packages/sage/cpython -I/usr/include -I/usr/lib/python3.7/site-packages -I/usr/lib/python3.7/site-packages/sage/ext -I/usr/include/python3.7m -I/usr/lib/python3.7/site-packages/numpy/core/include -I/usr/include/python3.7m -c giacpy_sage.cpp -o /dev/shm/portage/dev-python/giacpy_sage-0.7.0/work/giacpy_sage-0.7.0-python3_7/temp.linux-x86_64-3.7/giacpy_sage.o -std=c++11
In file included from giacpy_sage.cpp:665:
misc.h: In function ‘void archivegen(std::string, const giac::gen&, const giac::context*)’:
misc.h:104:15: error: variable ‘std::ofstream of’ has initializer but incomplete type
  104 |   ofstream of(filename.c_str());
      |               ^~~~~~~~
misc.h: In function ‘giac::gen unarchivegen(std::string, const giac::context*)’:
misc.h:110:14: error: variable ‘std::ifstream f’ has initializer but incomplete type
  110 |   ifstream f(filename.c_str());
      |              ^~~~~~~~
/usr/lib/python3.7/site-packages/Cython/Compiler/Main.py:369: FutureWarning: Cython directive 'language_level' not set, using 2 for now (Py2). This will change in a later release! File: /dev/shm/portage/dev-python/giacpy_sage-0.7.0/work/giacpy_sage-0.7.0/giacpy_sage.pxd
  tree = Parsing.p_module(s, pxd, full_module_name)
error: command 'x86_64-pc-linux-gnu-g++' failed with exit status 1
```
Any ideas?



---

archive/issue_comments_451593.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI actually have the same issue with giacpy_sage 0.6.8.",
    "created_at": "2020-02-05T01:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451593",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

I actually have the same issue with giacpy_sage 0.6.8.



---

archive/issue_comments_451594.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThank you Fran\u00e7ois, it's a missing include. I will fix it in giacpy.\nIt seems that between giac-1.5.0.63 and 1.5.0.75 fstream was removed in several places:\n\n```\nfred@localhost src]$ grep \"<fstream>\" *.h\nglobal.h://#include <fstream>\nGraph3d.h:#include <fstream>\ngraphe.h:#include <fstream>\nGraph.h:#include <fstream>\nhelp.h://#include <fstream>\nmonomial.h://#include <fstream>\nopengl.h:#include <fstream>\npoly.h://#include <fstream>\n\n[fred@localhost src]$ grep \"<fstream>\" ~/dev/sage/develop/sage/local/include/giac/*.h\n/home/fred/dev/sage/develop/sage/local/include/giac/global.h:#include <fstream>\n/home/fred/dev/sage/develop/sage/local/include/giac/graphe.h:#include <fstream>\n/home/fred/dev/sage/develop/sage/local/include/giac/help.h:#include <fstream>\n/home/fred/dev/sage/develop/sage/local/include/giac/monomial.h:#include <fstream>\n/home/fred/dev/sage/develop/sage/local/include/giac/poly.h:#include <fstream>\n\n```",
    "created_at": "2020-02-05T08:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451594",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:9" align="right">comment:9</div>

Thank you François, it's a missing include. I will fix it in giacpy.
It seems that between giac-1.5.0.63 and 1.5.0.75 fstream was removed in several places:

```
fred@localhost src]$ grep "<fstream>" *.h
global.h://#include <fstream>
Graph3d.h:#include <fstream>
graphe.h:#include <fstream>
Graph.h:#include <fstream>
help.h://#include <fstream>
monomial.h://#include <fstream>
opengl.h:#include <fstream>
poly.h://#include <fstream>

[fred@localhost src]$ grep "<fstream>" ~/dev/sage/develop/sage/local/include/giac/*.h
/home/fred/dev/sage/develop/sage/local/include/giac/global.h:#include <fstream>
/home/fred/dev/sage/develop/sage/local/include/giac/graphe.h:#include <fstream>
/home/fred/dev/sage/develop/sage/local/include/giac/help.h:#include <fstream>
/home/fred/dev/sage/develop/sage/local/include/giac/monomial.h:#include <fstream>
/home/fred/dev/sage/develop/sage/local/include/giac/poly.h:#include <fstream>

```



---

archive/issue_comments_451595.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a4bdb93fbf73c586b4e0cb8ee5235334b284d8b\">7a4bdb9</a></td><td><code>update to giacpy_sage-0.7.1 to fix a missing include with giac >1.5.0.75</code></td></tr></table>\n",
    "created_at": "2020-02-05T11:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451595",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a4bdb93fbf73c586b4e0cb8ee5235334b284d8b">7a4bdb9</a></td><td><code>update to giacpy_sage-0.7.1 to fix a missing include with giac >1.5.0.75</code></td></tr></table>




---

archive/issue_comments_451596.json:
```json
{
    "body": "Changed commit from **[`85e7801`](https://github.com/sagemath/sagetrac-mirror/commit/85e78011637ab7fc553e3d1dd726311676412ec4)** to **[`7a4bdb9`](https://github.com/sagemath/sagetrac-mirror/commit/7a4bdb93fbf73c586b4e0cb8ee5235334b284d8b)**",
    "created_at": "2020-02-05T11:10:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451596",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`85e7801`](https://github.com/sagemath/sagetrac-mirror/commit/85e78011637ab7fc553e3d1dd726311676412ec4)** to **[`7a4bdb9`](https://github.com/sagemath/sagetrac-mirror/commit/7a4bdb93fbf73c586b4e0cb8ee5235334b284d8b)**



---

archive/issue_comments_451597.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nthe missing header with giac >1.5.0.75 reported by francois, should be fixed in giacpy_sage-0.7.1\nI have update the branch accordingly.",
    "created_at": "2020-02-05T11:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451597",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:11" align="right">comment:11</div>

the missing header with giac >1.5.0.75 reported by francois, should be fixed in giacpy_sage-0.7.1
I have update the branch accordingly.



---

archive/issue_comments_451598.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,6 +16,6 @@\n \n Upstream upgrade needed (2 doctests failure with python3):\n \n-- http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.0.tar.gz\n+- http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.1.tar.gz\n \n \n``````\n",
    "created_at": "2020-02-05T11:14:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451598",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,6 +16,6 @@
 
 Upstream upgrade needed (2 doctests failure with python3):
 
-- http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.0.tar.gz
+- http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.1.tar.gz
 
 
``````




---

archive/issue_comments_451599.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@frederichan-IMJPRG](#comment:11):\n> the missing header with giac >1.5.0.75 reported by francois, should be fixed in giacpy_sage-0.7.1\n> I have update the branch accordingly.\n\nWorks now. Thanks!",
    "created_at": "2020-02-06T07:51:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451599",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@frederichan-IMJPRG](#comment:11):
> the missing header with giac >1.5.0.75 reported by francois, should be fixed in giacpy_sage-0.7.1
> I have update the branch accordingly.

Works now. Thanks!



---

archive/issue_events_397311.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397311"
}
```



---

archive/issue_events_397312.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397312"
}
```



---

archive/issue_comments_451600.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451600",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_451601.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nSee also #29552",
    "created_at": "2020-07-13T18:33:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451601",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

See also #29552



---

archive/issue_events_397313.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-10T02:30:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397313"
}
```



---

archive/issue_events_397314.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-10T02:30:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397314"
}
```



---

archive/issue_events_397315.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-10T18:22:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397315"
}
```



---

archive/issue_comments_451602.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI have issues with this going to standard by just flipping the switch. It risks to become a circular dependency madness.\n\nCurrently `giacpy_sage` requires sage at build time to figure out the include directory by importing `sage_include_directory` from `sage.env`. That part is not needed and should probably be simplified. If you are installing via `sage -i` the environment should be set correctly for finding the headers. If you are on a distro they also are in reach. Similarly `library_dirs` doesn't need to be set (in fact the current setup is annoying on systems with lib/lib64 split). But sage is needed when compiling the .pyx files as it imports a fair deal of sage bits.\n\n`sage` is needed at runtime and test time.\n\nIf `sage` needs the package at runtime or to build the documentation you create a scenario where building sage look like:\n\n1. build sagelib\n2. build giacpy_sage\n3. optional: test giacpy_sage\n4. build sagelib documentation\n5. test sagelib\n\nSo `giacpy_sage` is inserting itself in the middle of the traditional build cycle. \n\n`sage_brial` look superficially similar but in its case it can be installed independently of sage so it can go as step 1 (it cannot be tested however). `sage_brial` should in fact be merged into sagelib and I believe merging `giacpy_sage` inside sagelib is the only way to get out what looks like circular dependency in the future.",
    "created_at": "2020-08-11T00:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451602",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:17" align="right">comment:17</div>

I have issues with this going to standard by just flipping the switch. It risks to become a circular dependency madness.

Currently `giacpy_sage` requires sage at build time to figure out the include directory by importing `sage_include_directory` from `sage.env`. That part is not needed and should probably be simplified. If you are installing via `sage -i` the environment should be set correctly for finding the headers. If you are on a distro they also are in reach. Similarly `library_dirs` doesn't need to be set (in fact the current setup is annoying on systems with lib/lib64 split). But sage is needed when compiling the .pyx files as it imports a fair deal of sage bits.

`sage` is needed at runtime and test time.

If `sage` needs the package at runtime or to build the documentation you create a scenario where building sage look like:

1. build sagelib
2. build giacpy_sage
3. optional: test giacpy_sage
4. build sagelib documentation
5. test sagelib

So `giacpy_sage` is inserting itself in the middle of the traditional build cycle. 

`sage_brial` look superficially similar but in its case it can be installed independently of sage so it can go as step 1 (it cannot be tested however). `sage_brial` should in fact be merged into sagelib and I believe merging `giacpy_sage` inside sagelib is the only way to get out what looks like circular dependency in the future.



---

archive/issue_events_397316.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T00:09:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397316"
}
```



---

archive/issue_events_397317.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T00:09:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397317"
}
```



---

archive/issue_events_397318.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T00:09:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397318"
}
```



---

archive/issue_events_397319.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T00:09:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397319"
}
```



---

archive/issue_events_397320.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-11T00:09:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397320"
}
```



---

archive/issue_comments_451603.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nYes, I agree that #29171, merging into sagelib, is the way to go.",
    "created_at": "2020-08-11T00:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451603",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Yes, I agree that #29171, merging into sagelib, is the way to go.



---

archive/issue_comments_451604.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@kiwifb](#comment:17):\n> `sage_brial` look superficially similar but in its case it can be installed independently of sage so it can go as step 1 (it cannot be tested however). `sage_brial` should in fact be merged into sagelib \n\nThis is now #30332",
    "created_at": "2020-08-11T00:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451604",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@kiwifb](#comment:17):
> `sage_brial` look superficially similar but in its case it can be installed independently of sage so it can go as step 1 (it cannot be tested however). `sage_brial` should in fact be merged into sagelib 

This is now #30332



---

archive/issue_comments_451605.json:
```json
{
    "body": "Changed author from **Frederic Han** to none",
    "created_at": "2020-08-13T18:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451605",
    "user": "https://github.com/mwageringel"
}
```

Changed author from **Frederic Han** to none



---

archive/issue_events_397321.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2020-08-13T18:17:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397321"
}
```



---

archive/issue_events_397322.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2020-08-13T18:17:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397322"
}
```



---

archive/issue_comments_451606.json:
```json
{
    "body": "Reviewer: **Markus Wageringel**",
    "created_at": "2020-08-13T18:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451606",
    "user": "https://github.com/mwageringel"
}
```

Reviewer: **Markus Wageringel**



---

archive/issue_comments_451607.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -18,4 +18,6 @@\n \n - http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.1.tar.gz\n \n+Note: this ticket was made obsolete by\n \n+- #29171 \"Move giacpy_sage into sage source code\" (merged in Sage 9.2.beta10)\n``````\n",
    "created_at": "2020-09-03T09:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28918#issuecomment-451607",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -18,4 +18,6 @@
 
 - http://webusers.imj-prg.fr/~frederic.han/xcas/giacpy/sage/giacpy_sage-0.7.1.tar.gz
 
+Note: this ticket was made obsolete by
 
+- #29171 "Move giacpy_sage into sage source code" (merged in Sage 9.2.beta10)
``````




---

archive/issue_events_397323.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-03T09:19:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397323"
}
```



---

archive/issue_events_397324.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-09-03T09:19:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28918",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28918#event-397324"
}
```
