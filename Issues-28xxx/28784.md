# Issue 28784: Adding multiple symmetries and multiple contractions to tensors

archive/issues_028547.json:
```json
{
    "body": "As of sage-9.0.beta6, applying multiple contractions or multiple symmetries to tensors in indices notation raises a NotImplementedError. \n\nThis tickets aims at removing this error by implementing the adequate behavior as well as adding a convention check on the index notation.\n\nThe index notation should allow : \n\\\\*  Multiple contraction \n\\\\*  Multiple symmetries\n\\\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z} and wild card \".\"\n\\\\*  covariant indices first notation as well as contravariant indices first\n\\\\*  Latex notations '{' and '}'\n\\\\*  if indices do not begin by `^` nor `_` then contravariant indices first is assumed \n\\\\The index notation should not allow :\n\\\\*  Repeated indices of the same type\n\\\\*  indices denoted by any other caracter\n\\\\*  nested symmetries\n\\\\*  unbalanced parentheses/brackets\n\n\nNB : Usual index notations allows greek indices but their implementation seems more difficult and is not the goal of the ticket.\n\n\n\nAssignee: @LBrunswic\n\nCC:  @egourgoulhon\n\nKeywords: tensor, contraction, symmetries, manifolds\n\nBranch/Commit: 3013354903be7147e51c9dd7957428a281c801df\n\nReviewer: Eric Gourgoulhon\n\nAuthor: L\u00e9o Brunswic\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28784\n\n",
    "closed_at": "2019-11-30T13:36:10Z",
    "created_at": "2019-11-21T21:01:06Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Adding multiple symmetries and multiple contractions to tensors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28784",
    "user": "https://github.com/LBrunswic"
}
```
As of sage-9.0.beta6, applying multiple contractions or multiple symmetries to tensors in indices notation raises a NotImplementedError. 

This tickets aims at removing this error by implementing the adequate behavior as well as adding a convention check on the index notation.

The index notation should allow : 
\\*  Multiple contraction 
\\*  Multiple symmetries
\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z} and wild card "."
\\*  covariant indices first notation as well as contravariant indices first
\\*  Latex notations '{' and '}'
\\*  if indices do not begin by `^` nor `_` then contravariant indices first is assumed 
\\The index notation should not allow :
\\*  Repeated indices of the same type
\\*  indices denoted by any other caracter
\\*  nested symmetries
\\*  unbalanced parentheses/brackets


NB : Usual index notations allows greek indices but their implementation seems more difficult and is not the goal of the ticket.



Assignee: @LBrunswic

CC:  @egourgoulhon

Keywords: tensor, contraction, symmetries, manifolds

Branch/Commit: 3013354903be7147e51c9dd7957428a281c801df

Reviewer: Eric Gourgoulhon

Author: Léo Brunswic

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28784





---

archive/issue_comments_559957.json:
```json
{
    "body": "Changing keywords from \"\" to \"tensor, contraction, symmetries, manifolds\".",
    "created_at": "2019-11-21T21:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559957",
    "user": "https://github.com/LBrunswic"
}
```

Changing keywords from "" to "tensor, contraction, symmetries, manifolds".



---

archive/issue_comments_559958.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,20 @@\n+As of sage-9.0.beta6, applying multiple contractions or multiple symmetries to tensors in indices notation raises a NotImplementedError. \n \n+This tickets aims at removing this error by implementing the adequate behavior as well as adding a convention check on the index notation.\n+\n+The index notation should allow : \n+\\\\*  Multiple contraction \n+\\\\*  Multiple symmetries\n+\\\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z}\n+\\\\*  covariant indices first notation as well as contravariant indices first\n+\\\\*  Latex notations '{' and '}'\n+\\\\The index notation should not allow :\n+\\\\*  Repeated indices of the same type\n+\\\\*  indices denoted by any other caracter\n+\\\\*  nested symmetries\n+\\\\*  unbalanced parentheses/brackets\n+\n+\n+NB : Usual index notations allows greek indices but their implementation seems more difficult and is not the goal of the ticket.\n+\n+\n``````\n",
    "created_at": "2019-11-21T21:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559958",
    "user": "https://github.com/LBrunswic"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,20 @@
+As of sage-9.0.beta6, applying multiple contractions or multiple symmetries to tensors in indices notation raises a NotImplementedError. 
 
+This tickets aims at removing this error by implementing the adequate behavior as well as adding a convention check on the index notation.
+
+The index notation should allow : 
+\\*  Multiple contraction 
+\\*  Multiple symmetries
+\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z}
+\\*  covariant indices first notation as well as contravariant indices first
+\\*  Latex notations '{' and '}'
+\\The index notation should not allow :
+\\*  Repeated indices of the same type
+\\*  indices denoted by any other caracter
+\\*  nested symmetries
+\\*  unbalanced parentheses/brackets
+
+
+NB : Usual index notations allows greek indices but their implementation seems more difficult and is not the goal of the ticket.
+
+
``````




---

archive/issue_comments_559959.json:
```json
{
    "body": "Changing author from \"\" to \"L\u00e9o Brunswic\"",
    "created_at": "2019-11-21T21:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559959",
    "user": "https://github.com/LBrunswic"
}
```

Changing author from "" to "Léo Brunswic"



---

archive/issue_comments_559960.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-LBrunswic/adding_multiple_symmetries_and_multiple_contractions_to_tensors\"",
    "created_at": "2019-11-21T21:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559960",
    "user": "https://github.com/LBrunswic"
}
```

Changing branch from "" to "u/gh-LBrunswic/adding_multiple_symmetries_and_multiple_contractions_to_tensors"



---

archive/issue_comments_559961.json:
```json
{
    "body": "Changing commit from \"\" to \"1d1e4eaee5ee42864bed95a9ce10f38f2a7a95d3\"",
    "created_at": "2019-11-21T21:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559961",
    "user": "https://github.com/LBrunswic"
}
```

Changing commit from "" to "1d1e4eaee5ee42864bed95a9ce10f38f2a7a95d3"



---

archive/issue_comments_559962.json:
```json
{
    "body": "Set assignee to @LBrunswic.",
    "created_at": "2019-11-21T21:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559962",
    "user": "https://github.com/LBrunswic"
}
```

Set assignee to @LBrunswic.



---

archive/issue_comments_559963.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n The index notation should allow : \n \\\\*  Multiple contraction \n \\\\*  Multiple symmetries\n-\\\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z}\n+\\\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z} and wild card \".\"\n \\\\*  covariant indices first notation as well as contravariant indices first\n \\\\*  Latex notations '{' and '}'\n \\\\The index notation should not allow :\n``````\n",
    "created_at": "2019-11-21T21:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559963",
    "user": "https://github.com/LBrunswic"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 The index notation should allow : 
 \\*  Multiple contraction 
 \\*  Multiple symmetries
-\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z}
+\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z} and wild card "."
 \\*  covariant indices first notation as well as contravariant indices first
 \\*  Latex notations '{' and '}'
 \\The index notation should not allow :
``````




---

archive/issue_comments_559964.json:
```json
{
    "body": "Changing commit from \"1d1e4eaee5ee42864bed95a9ce10f38f2a7a95d3\" to \"59c86e3ed784136ff1b9026a6b89b5625ec14052\"",
    "created_at": "2019-11-21T21:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1d1e4eaee5ee42864bed95a9ce10f38f2a7a95d3" to "59c86e3ed784136ff1b9026a6b89b5625ec14052"



---

archive/issue_comments_559965.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|\n|[59c86e3](https://github.com/sagemath/sagetrac-mirror/commit/59c86e3ed784136ff1b9026a6b89b5625ec14052)|`Adding check to raise exception on repeated indices of same type. Implementation of multiple contractions`|",
    "created_at": "2019-11-21T21:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559965",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|
|[59c86e3](https://github.com/sagemath/sagetrac-mirror/commit/59c86e3ed784136ff1b9026a6b89b5625ec14052)|`Adding check to raise exception on repeated indices of same type. Implementation of multiple contractions`|



---

archive/issue_comments_559966.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-11-21T21:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559966",
    "user": "https://github.com/LBrunswic"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_559967.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-11-22T09:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559967",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_559968.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks for this useful enhancement!\n\nThe patchbot reports some failures:\n\n```\nsage -t --long src/sage/manifolds/differentiable/tensorfield.py  # 2 doctests failed\nsage -t --long src/sage/tensor/modules/free_module_tensor.py  # 19 doctests failed\nsage -t --long src/sage/tensor/modules/tensor_with_indices.py  # 39 doctests failed\n```\nBesides, could you add a few doctests to illustrate the new functionalities?",
    "created_at": "2019-11-22T09:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559968",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:7'></a>
Thanks for this useful enhancement!

The patchbot reports some failures:

```
sage -t --long src/sage/manifolds/differentiable/tensorfield.py  # 2 doctests failed
sage -t --long src/sage/tensor/modules/free_module_tensor.py  # 19 doctests failed
sage -t --long src/sage/tensor/modules/tensor_with_indices.py  # 39 doctests failed
```
Besides, could you add a few doctests to illustrate the new functionalities?



---

archive/issue_comments_559969.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|[4b9a565](https://github.com/sagemath/sagetrac-mirror/commit/4b9a565daccfb8312b00efa9a86a9c47080ffe41)|`The convention without leading '^' for contravariant indices is now accepted as is used to. A regex corrected. doctest added to illustrate new functionalities.`|",
    "created_at": "2019-11-22T11:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
|[4b9a565](https://github.com/sagemath/sagetrac-mirror/commit/4b9a565daccfb8312b00efa9a86a9c47080ffe41)|`The convention without leading '^' for contravariant indices is now accepted as is used to. A regex corrected. doctest added to illustrate new functionalities.`|



---

archive/issue_comments_559970.json:
```json
{
    "body": "Changing commit from \"59c86e3ed784136ff1b9026a6b89b5625ec14052\" to \"4b9a565daccfb8312b00efa9a86a9c47080ffe41\"",
    "created_at": "2019-11-22T11:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "59c86e3ed784136ff1b9026a6b89b5625ec14052" to "4b9a565daccfb8312b00efa9a86a9c47080ffe41"



---

archive/issue_comments_559971.json:
```json
{
    "body": "<a id='comment:9'></a>\n`@`egourgoulhon \n I needed it :)\n \n I'm sorry I forgot to do a doctest :$...I corrected the features that are tested and added new doctest.",
    "created_at": "2019-11-22T11:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559971",
    "user": "https://github.com/LBrunswic"
}
```

<a id='comment:9'></a>
`@`egourgoulhon 
 I needed it :)
 
 I'm sorry I forgot to do a doctest :$...I corrected the features that are tested and added new doctest.



---

archive/issue_comments_559972.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,7 @@\n \\\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z} and wild card \".\"\n \\\\*  covariant indices first notation as well as contravariant indices first\n \\\\*  Latex notations '{' and '}'\n+\\\\*  if indices do not begin by '^' or '_' then contravariant indices first is assumed \n \\\\The index notation should not allow :\n \\\\*  Repeated indices of the same type\n \\\\*  indices denoted by any other caracter\n``````\n",
    "created_at": "2019-11-22T11:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559972",
    "user": "https://github.com/LBrunswic"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,7 @@
 \\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z} and wild card "."
 \\*  covariant indices first notation as well as contravariant indices first
 \\*  Latex notations '{' and '}'
+\\*  if indices do not begin by '^' or '_' then contravariant indices first is assumed 
 \\The index notation should not allow :
 \\*  Repeated indices of the same type
 \\*  indices denoted by any other caracter
``````




---

archive/issue_comments_559973.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-11-22T11:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559973",
    "user": "https://github.com/LBrunswic"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_559974.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n \\\\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z} and wild card \".\"\n \\\\*  covariant indices first notation as well as contravariant indices first\n \\\\*  Latex notations '{' and '}'\n-\\\\*  if indices do not begin by '^' or '_' then contravariant indices first is assumed \n+\\\\*  if indices do not begin by `^` nor `_` then contravariant indices first is assumed \n \\\\The index notation should not allow :\n \\\\*  Repeated indices of the same type\n \\\\*  indices denoted by any other caracter\n``````\n",
    "created_at": "2019-11-22T11:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559974",
    "user": "https://github.com/LBrunswic"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 \\*  indices denoted by a non-accentuated latin caracter  {a,...,z,A,...,Z} and wild card "."
 \\*  covariant indices first notation as well as contravariant indices first
 \\*  Latex notations '{' and '}'
-\\*  if indices do not begin by '^' or '_' then contravariant indices first is assumed 
+\\*  if indices do not begin by `^` nor `_` then contravariant indices first is assumed 
 \\The index notation should not allow :
 \\*  Repeated indices of the same type
 \\*  indices denoted by any other caracter
``````




---

archive/issue_comments_559975.json:
```json
{
    "body": "<a id='comment:12'></a>\nNew commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[0823e29](https://github.com/sagemath/sagetrac-mirror/commit/0823e29c5fa02815c71a23f770f8ee226eec7c76)|`Minor corrections for #28784`|",
    "created_at": "2019-11-23T21:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559975",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:12'></a>
New commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[0823e29](https://github.com/sagemath/sagetrac-mirror/commit/0823e29c5fa02815c71a23f770f8ee226eec7c76)|`Minor corrections for #28784`|



---

archive/issue_comments_559976.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2019-11-23T21:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559976",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_559977.json:
```json
{
    "body": "Changing branch from \"u/gh-LBrunswic/adding_multiple_symmetries_and_multiple_contractions_to_tensors\" to \"public/manifolds/tensor_multiple_symmetries_contractions-28784\"",
    "created_at": "2019-11-23T21:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559977",
    "user": "https://github.com/egourgoulhon"
}
```

Changing branch from "u/gh-LBrunswic/adding_multiple_symmetries_and_multiple_contractions_to_tensors" to "public/manifolds/tensor_multiple_symmetries_contractions-28784"



---

archive/issue_comments_559978.json:
```json
{
    "body": "Changing commit from \"4b9a565daccfb8312b00efa9a86a9c47080ffe41\" to \"0823e29c5fa02815c71a23f770f8ee226eec7c76\"",
    "created_at": "2019-11-23T21:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559978",
    "user": "https://github.com/egourgoulhon"
}
```

Changing commit from "4b9a565daccfb8312b00efa9a86a9c47080ffe41" to "0823e29c5fa02815c71a23f770f8ee226eec7c76"



---

archive/issue_comments_559979.json:
```json
{
    "body": "<a id='comment:13'></a>\nThanks for making all doctest passed.\nI gave a more in-depth look at the code and it looks very good.\nI've just performed some reviewer tweaks, which I pushed in the new branch. You can see the (minor) changes [here](https://github.com/sagemath/sagetrac-mirror/commit/0823e29c5fa02815c71a23f770f8ee226eec7c76).\nIn particular\n- a doctest block has been corrected by adding a missing `::`\n- some PEP 8 enforcement has been performed\n- doctests raising an exception have been rewritten via `Traceback...` instead of a `try` block\n- the header  `# -*- coding: utf-8 -*-` has been added to the file `tensor_with_indices.py`, in order to get rid of the non-ascii error revealed by the patchbot.\n\nDo you agree with the above changes?",
    "created_at": "2019-11-23T21:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559979",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:13'></a>
Thanks for making all doctest passed.
I gave a more in-depth look at the code and it looks very good.
I've just performed some reviewer tweaks, which I pushed in the new branch. You can see the (minor) changes [here](https://github.com/sagemath/sagetrac-mirror/commit/0823e29c5fa02815c71a23f770f8ee226eec7c76).
In particular
- a doctest block has been corrected by adding a missing `::`
- some PEP 8 enforcement has been performed
- doctests raising an exception have been rewritten via `Traceback...` instead of a `try` block
- the header  `# -*- coding: utf-8 -*-` has been added to the file `tensor_with_indices.py`, in order to get rid of the non-ascii error revealed by the patchbot.

Do you agree with the above changes?



---

archive/issue_comments_559980.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[3013354](https://github.com/sagemath/sagetrac-mirror/commit/3013354903be7147e51c9dd7957428a281c801df)|`Marginal modifications`|",
    "created_at": "2019-11-24T00:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559980",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[3013354](https://github.com/sagemath/sagetrac-mirror/commit/3013354903be7147e51c9dd7957428a281c801df)|`Marginal modifications`|



---

archive/issue_comments_559981.json:
```json
{
    "body": "Changing commit from \"0823e29c5fa02815c71a23f770f8ee226eec7c76\" to \"3013354903be7147e51c9dd7957428a281c801df\"",
    "created_at": "2019-11-24T00:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559981",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0823e29c5fa02815c71a23f770f8ee226eec7c76" to "3013354903be7147e51c9dd7957428a281c801df"



---

archive/issue_comments_559982.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks for the PEP8 enforcement and the correction of the doctest. \n\nOf course, I agree with the changes and merged. \nI quickly reviewed them and checked the doctest. \n\nAlso, I corrected a typo and clarified two lines.",
    "created_at": "2019-11-24T00:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559982",
    "user": "https://github.com/LBrunswic"
}
```

<a id='comment:15'></a>
Thanks for the PEP8 enforcement and the correction of the doctest. 

Of course, I agree with the changes and merged. 
I quickly reviewed them and checked the doctest. 

Also, I corrected a typo and clarified two lines.



---

archive/issue_comments_559983.json:
```json
{
    "body": "<a id='comment:16'></a>\nI would give a positive review but since I modified the code (even marginally) I think I shouldn't do it.",
    "created_at": "2019-11-24T19:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559983",
    "user": "https://github.com/LBrunswic"
}
```

<a id='comment:16'></a>
I would give a positive review but since I modified the code (even marginally) I think I shouldn't do it.



---

archive/issue_comments_559984.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-11-24T19:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559984",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_559985.json:
```json
{
    "body": "<a id='comment:17'></a>\nI've just checked your latest changes. Everything is OK. \nThanks for this work.",
    "created_at": "2019-11-24T19:54:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559985",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:17'></a>
I've just checked your latest changes. Everything is OK. 
Thanks for this work.



---

archive/issue_comments_559986.json:
```json
{
    "body": "<a id='comment:18'></a>\nIt would be nice to add this functionality for multiple symmetrizations to the method `symmetrize()` as well because symmetrization is not necessarily done over neighboring indices which cannot be handled by the string syntax. I assume it is more efficient to do all symmetrizations and antisymmetrizations in a single function call, rather than computing several intermediate results.",
    "created_at": "2019-11-27T18:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559986",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:18'></a>
It would be nice to add this functionality for multiple symmetrizations to the method `symmetrize()` as well because symmetrization is not necessarily done over neighboring indices which cannot be handled by the string syntax. I assume it is more efficient to do all symmetrizations and antisymmetrizations in a single function call, rather than computing several intermediate results.



---

archive/issue_comments_559987.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [gh-mwageringel](#comment%3A18):\n> It would be nice to add this functionality for multiple symmetrizations to the method `symmetrize()` as well because symmetrization is not necessarily done over neighboring indices which cannot be handled by the string syntax. I assume it is more efficient to do all symmetrizations and antisymmetrizations in a single function call, rather than computing several intermediate results.\n\n\nHi! \n\n I completely agree! We should open another ticket or a discussion of devel to discuss this (I would at the very least ask Eric Gourgoulhon for validation). \n\n To begin the discussion, I see other issues with the current implementation and methods.\nFor instance, it's not possible to define the symmetries of the riemann tensor. This is related to the fact that (anti)symmetrize ony takes a set of indices as argument and then consider the action of the natural action of the symmetric group this set.\nIt would be appreciable to define the symmetrization via an action of some group on the set indices. Antisymmetrization would need also a 'signature' morphism G-->{1,-1}. More generally, one could consider linear group action symmetries.",
    "created_at": "2019-11-27T19:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559987",
    "user": "https://github.com/LBrunswic"
}
```

<a id='comment:19'></a>
Replying to [gh-mwageringel](#comment%3A18):
> It would be nice to add this functionality for multiple symmetrizations to the method `symmetrize()` as well because symmetrization is not necessarily done over neighboring indices which cannot be handled by the string syntax. I assume it is more efficient to do all symmetrizations and antisymmetrizations in a single function call, rather than computing several intermediate results.


Hi! 

 I completely agree! We should open another ticket or a discussion of devel to discuss this (I would at the very least ask Eric Gourgoulhon for validation). 

 To begin the discussion, I see other issues with the current implementation and methods.
For instance, it's not possible to define the symmetries of the riemann tensor. This is related to the fact that (anti)symmetrize ony takes a set of indices as argument and then consider the action of the natural action of the symmetric group this set.
It would be appreciable to define the symmetrization via an action of some group on the set indices. Antisymmetrization would need also a 'signature' morphism G-->{1,-1}. More generally, one could consider linear group action symmetries.



---

archive/issue_comments_559988.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [gh-LBrunswic](#comment%3A19):\n> Replying to [gh-mwageringel](#comment%3A18):\n> > It would be nice to add this functionality for multiple symmetrizations to the method `symmetrize()` as well because symmetrization is not necessarily done over neighboring indices which cannot be handled by the string syntax. I assume it is more efficient to do all symmetrizations and antisymmetrizations in a single function call, rather than computing several intermediate results.\n\n> \n> Hi! \n> \n>  I completely agree! We should open another ticket or a discussion of devel to discuss this (I would at the very least ask Eric Gourgoulhon for validation). \n> \n\n\nYes please open a ticket for this! (and continue the discussion there).\n \n>  To begin the discussion, I see other issues with the current implementation and methods.\n\n> For instance, it's not possible to define the symmetries of the riemann tensor. This is related to the fact that (anti)symmetrize ony takes a set of indices as argument and then consider the action of the natural action of the symmetric group this set.\n> It would be appreciable to define the symmetrization via an action of some group on the set indices. Antisymmetrization would need also a 'signature' morphism G-->{1,-1}. More generally, one could consider linear group action symmetries.  \n\n\nIndeed, this would be nice.",
    "created_at": "2019-11-28T09:52:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559988",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'></a>
Replying to [gh-LBrunswic](#comment%3A19):
> Replying to [gh-mwageringel](#comment%3A18):
> > It would be nice to add this functionality for multiple symmetrizations to the method `symmetrize()` as well because symmetrization is not necessarily done over neighboring indices which cannot be handled by the string syntax. I assume it is more efficient to do all symmetrizations and antisymmetrizations in a single function call, rather than computing several intermediate results.

> 
> Hi! 
> 
>  I completely agree! We should open another ticket or a discussion of devel to discuss this (I would at the very least ask Eric Gourgoulhon for validation). 
> 


Yes please open a ticket for this! (and continue the discussion there).
 
>  To begin the discussion, I see other issues with the current implementation and methods.

> For instance, it's not possible to define the symmetries of the riemann tensor. This is related to the fact that (anti)symmetrize ony takes a set of indices as argument and then consider the action of the natural action of the symmetric group this set.
> It would be appreciable to define the symmetrization via an action of some group on the set indices. Antisymmetrization would need also a 'signature' morphism G-->{1,-1}. More generally, one could consider linear group action symmetries.  


Indeed, this would be nice.



---

archive/issue_comments_559989.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe new ticket is #28813.",
    "created_at": "2019-11-28T20:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559989",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:21'></a>
The new ticket is #28813.



---

archive/issue_comments_559990.json:
```json
{
    "body": "Changing branch from \"public/manifolds/tensor_multiple_symmetries_contractions-28784\" to \"3013354903be7147e51c9dd7957428a281c801df\"",
    "created_at": "2019-11-30T13:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559990",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/manifolds/tensor_multiple_symmetries_contractions-28784" to "3013354903be7147e51c9dd7957428a281c801df"



---

archive/issue_comments_559991.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-11-30T13:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28784#issuecomment-559991",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_082110.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-30T13:36:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28784",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28784#event-82110"
}
```
