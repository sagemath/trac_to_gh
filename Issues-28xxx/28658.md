# Issue 28658: Three.js: Add popup menu for accessing additional options

archive/issues_028421.json:
```json
{
    "body": "This ticket changes the download as PNG feature to show a menu with that option and a couple others. This will allow access to whatever additional functions are suggested by users in the future.\n\nThe \"Camera Info\" is a temporary feature to address the issue in this [comment](https://trac.sagemath.org/ticket/22408#comment:70)\n\nCC:  @egourgoulhon @jplab\n\nKeywords: threejs\n\nBranch/Commit: e31dfb5b4e23a7ec6571e021787cdf52dabe79b4\n\nReviewer: Eric Gourgoulhon, Jean-Philippe Labb\u00e9\n\nAuthor: Paul Masson\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28658\n\n",
    "closed_at": "2019-10-31T22:40:43Z",
    "created_at": "2019-10-26T23:09:02Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Three.js: Add popup menu for accessing additional options",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28658",
    "user": "https://github.com/paulmasson"
}
```
This ticket changes the download as PNG feature to show a menu with that option and a couple others. This will allow access to whatever additional functions are suggested by users in the future.

The "Camera Info" is a temporary feature to address the issue in this [comment](https://trac.sagemath.org/ticket/22408#comment:70)

CC:  @egourgoulhon @jplab

Keywords: threejs

Branch/Commit: e31dfb5b4e23a7ec6571e021787cdf52dabe79b4

Reviewer: Eric Gourgoulhon, Jean-Philippe Labbé

Author: Paul Masson

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28658





---

archive/issue_comments_427398.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-26T23:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427398",
    "user": "https://github.com/paulmasson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_427399.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2019-10-26T23:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427399",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_427400.json:
```json
{
    "body": "Changing keywords from \"\" to \"threejs\".",
    "created_at": "2019-10-26T23:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427400",
    "user": "https://github.com/paulmasson"
}
```

Changing keywords from "" to "threejs".



---

archive/issue_comments_427401.json:
```json
{
    "body": "<a id='comment:4'></a>This is very nice!\n\nWould it be possible to add a few words about this feature in the documentation? i.e. at\nhttps://doc.sagemath.org/html/en/reference/plot3d/threejs.html",
    "created_at": "2019-10-28T13:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427401",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:4'></a>This is very nice!

Would it be possible to add a few words about this feature in the documentation? i.e. at
https://doc.sagemath.org/html/en/reference/plot3d/threejs.html



---

archive/issue_comments_427402.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-28T19:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427402",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_427403.json:
```json
{
    "body": "<a id='comment:6'></a>The circled i is not rendered in the documentation output; one gets the raw html unicode instead:\n\n\n\"Clicking on the information icon &#x24D8; in the lower right-hand corner...\"\n\nMaybe a solution is to use the `:role:` directive, as indicated in the third answer to this \n[question](https://stackoverflow.com/questions/1862472/symbols-in-restructuredtext).",
    "created_at": "2019-10-28T21:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427403",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:6'></a>The circled i is not rendered in the documentation output; one gets the raw html unicode instead:


"Clicking on the information icon &#x24D8; in the lower right-hand corner..."

Maybe a solution is to use the `:role:` directive, as indicated in the third answer to this 
[question](https://stackoverflow.com/questions/1862472/symbols-in-restructuredtext).



---

archive/issue_comments_427404.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-28T23:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_427405.json:
```json
{
    "body": "<a id='comment:8'></a>Found what appears to be a safer method. Try again, please.",
    "created_at": "2019-10-28T23:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427405",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:8'></a>Found what appears to be a safer method. Try again, please.



---

archive/issue_comments_427406.json:
```json
{
    "body": "<a id='comment:9'></a>This is really fantastic! It works in the jupyter notebook and the command line. The two saving functions also work.\n\nFrom what I can read about the camera info, it seems to encode it by a 4x4 matrix.\nI am wondering if it would be good to either give a reference to interpret the output or explain the relevant information there? What do you think?\n\nI would start looking this up online, as I am interested to know how threejs works internally.",
    "created_at": "2019-10-29T09:27:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427406",
    "user": "https://github.com/jplab"
}
```

<a id='comment:9'></a>This is really fantastic! It works in the jupyter notebook and the command line. The two saving functions also work.

From what I can read about the camera info, it seems to encode it by a 4x4 matrix.
I am wondering if it would be good to either give a reference to interpret the output or explain the relevant information there? What do you think?

I would start looking this up online, as I am interested to know how threejs works internally.



---

archive/issue_comments_427407.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 paulmasson]:\n> Found what appears to be a safer method. Try again, please.\n\nThanks for the new version. It fixes the html documentation but not the pdf one: running\n\n```\nsage -docbuild reference/plot3d pdf\n```\nresults in\n\n```\n! Package inputenc Error: Unicode char \u24d8 (U+24D8)\n(inputenc)                not set up for use with LaTeX.\n\nSee the inputenc package documentation for explanation.\nType  H <return>  for immediate help.\n ...                                              \n                                                  \nl.12470 Clicking on the information icon \u24d8\n                                             in the lower right-hand corner ...\n\n? \n! Emergency stop.\n ...                                              \n                                                  \nl.12470 Clicking on the information icon \u24d8\n                                             in the lower right-hand corner ...\n\n!  ==> Fatal error occurred, no output PDF file produced!\n\n```\nIt could be that the solution of this is outside the scope of this ticket (unicode configuration of Sage's LaTeX...). Then, a quick fix should be to replace  \"information icon |info|\" by \"information icon (circled i)\" in the rst file.",
    "created_at": "2019-10-29T10:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427407",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:10'></a>Replying to [comment:8 paulmasson]:
> Found what appears to be a safer method. Try again, please.

Thanks for the new version. It fixes the html documentation but not the pdf one: running

```
sage -docbuild reference/plot3d pdf
```
results in

```
! Package inputenc Error: Unicode char ⓘ (U+24D8)
(inputenc)                not set up for use with LaTeX.

See the inputenc package documentation for explanation.
Type  H <return>  for immediate help.
 ...                                              
                                                  
l.12470 Clicking on the information icon ⓘ
                                             in the lower right-hand corner ...

? 
! Emergency stop.
 ...                                              
                                                  
l.12470 Clicking on the information icon ⓘ
                                             in the lower right-hand corner ...

!  ==> Fatal error occurred, no output PDF file produced!

```
It could be that the solution of this is outside the scope of this ticket (unicode configuration of Sage's LaTeX...). Then, a quick fix should be to replace  "information icon |info|" by "information icon (circled i)" in the rst file.



---

archive/issue_comments_427408.json:
```json
{
    "body": "<a id='comment:11'></a>Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?",
    "created_at": "2019-10-29T10:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427408",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:11'></a>Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?



---

archive/issue_comments_427409.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-29T20:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_427410.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:10 egourgoulhon]:\n> Replying to [comment:8 paulmasson]:\n> > Found what appears to be a safer method. Try again, please.\n\n> It could be that the solution of this is outside the scope of this ticket (unicode configuration of Sage's LaTeX...). Then, a quick fix should be to replace  \"information icon |info|\" by \"information icon (circled i)\" in the rst file. \nI simply removed the unicode. An information icon is universally understood in the age of mobile phones.",
    "created_at": "2019-10-29T20:31:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427410",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:13'></a>Replying to [comment:10 egourgoulhon]:
> Replying to [comment:8 paulmasson]:
> > Found what appears to be a safer method. Try again, please.

> It could be that the solution of this is outside the scope of this ticket (unicode configuration of Sage's LaTeX...). Then, a quick fix should be to replace  "information icon |info|" by "information icon (circled i)" in the rst file. 
I simply removed the unicode. An information icon is universally understood in the age of mobile phones.



---

archive/issue_comments_427411.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:11 egourgoulhon]:\n> Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?\n\nI was planning to do this just before the release of version 9 to get all the accumulated changes. If you prefer I can do an update now, either on this ticket or a new one.",
    "created_at": "2019-10-29T20:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427411",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:14'></a>Replying to [comment:11 egourgoulhon]:
> Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?

I was planning to do this just before the release of version 9 to get all the accumulated changes. If you prefer I can do an update now, either on this ticket or a new one.



---

archive/issue_comments_427412.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:9 jipilab]:\n> From what I can read about the camera info, it seems to encode it by a 4x4 matrix.\n> I am wondering if it would be good to either give a reference to interpret the output or explain the relevant information there? What do you think?\n\nThis action is meant to be temporary until I understand better how you'll use the information in the future. I was planning to have this action show only what you will actually use, then add an option to the Three.js template to pass that information into the scene. Since it will change in the near future, I won't add any documentation about it until things are settled.\n\nCreated new [ticket](https://trac.sagemath.org/ticket/28672) for the enhancement.",
    "created_at": "2019-10-29T20:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427412",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:15'></a>Replying to [comment:9 jipilab]:
> From what I can read about the camera info, it seems to encode it by a 4x4 matrix.
> I am wondering if it would be good to either give a reference to interpret the output or explain the relevant information there? What do you think?

This action is meant to be temporary until I understand better how you'll use the information in the future. I was planning to have this action show only what you will actually use, then add an option to the Three.js template to pass that information into the scene. Since it will change in the near future, I won't add any documentation about it until things are settled.

Created new [ticket](https://trac.sagemath.org/ticket/28672) for the enhancement.



---

archive/issue_comments_427413.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:13 paulmasson]:\n> I simply removed the unicode. An information icon is universally understood in the age of mobile phones.\n\n\nIndeed! Thanks for the update.\n\nJean-Philippe, do you agree to set the ticket to positive review?",
    "created_at": "2019-10-29T23:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427413",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:16'></a>Replying to [comment:13 paulmasson]:
> I simply removed the unicode. An information icon is universally understood in the age of mobile phones.


Indeed! Thanks for the update.

Jean-Philippe, do you agree to set the ticket to positive review?



---

archive/issue_comments_427414.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 egourgoulhon]:\n> Replying to [comment:13 paulmasson]:\n> > I simply removed the unicode. An information icon is universally understood in the age of mobile phones.\n\n> \n> Indeed! Thanks for the update.\n> \n> Jean-Philippe, do you agree to set the ticket to positive review?\n\n\nYes, [comment:15 the plan in this comment15] sounds good. I had a try yesterday with this code and I can directly use the 4x4 matrix in order to reproduce the same output: Great! It seems like I don't need the full matrix but just the first 3x3 top submatrix, but I'd like to keep as it is now, so that we can understand a bit more as paulmasson suggested.\n\nSo yes, it looks good to go, I agree to the positive review.",
    "created_at": "2019-10-30T17:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427414",
    "user": "https://github.com/jplab"
}
```

<a id='comment:17'></a>Replying to [comment:16 egourgoulhon]:
> Replying to [comment:13 paulmasson]:
> > I simply removed the unicode. An information icon is universally understood in the age of mobile phones.

> 
> Indeed! Thanks for the update.
> 
> Jean-Philippe, do you agree to set the ticket to positive review?


Yes, [comment:15 the plan in this comment15] sounds good. I had a try yesterday with this code and I can directly use the 4x4 matrix in order to reproduce the same output: Great! It seems like I don't need the full matrix but just the first 3x3 top submatrix, but I'd like to keep as it is now, so that we can understand a bit more as paulmasson suggested.

So yes, it looks good to go, I agree to the positive review.



---

archive/issue_comments_427415.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:14 paulmasson]:\n> Replying to [comment:11 egourgoulhon]:\n> > Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?\n\n> I was planning to do this just before the release of version 9 to get all the accumulated changes. \n\nOK, this makes sense.",
    "created_at": "2019-10-30T21:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427415",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:18'></a>Replying to [comment:14 paulmasson]:
> Replying to [comment:11 egourgoulhon]:
> > Another point: shouldn't the files in `src/doc/en/reference/plot3d/threejs_examples` be updated so that the information icon appears when browsing https://doc.sagemath.org/html/en/reference/plot3d/threejs.html ?

> I was planning to do this just before the release of version 9 to get all the accumulated changes. 

OK, this makes sense.



---

archive/issue_comments_427416.json:
```json
{
    "body": "<a id='comment:19'></a>Thanks!",
    "created_at": "2019-10-30T21:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427416",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:19'></a>Thanks!



---

archive/issue_comments_427417.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-30T21:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427417",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_427418.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-31T22:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28658#issuecomment-427418",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_072185.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-31T22:40:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28658",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28658#event-72185"
}
```
