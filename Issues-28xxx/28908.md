# Issue 28908: spkg-configure for cbc

archive/issues_028671.json:
```json
{
    "body": "We add `spkg-configure` for the optional package `cbc`.\n\nBecause `OptionalExtension` does not know about packages found by spkg-configure (see #25828), this is only useful on top of #28175.\n\n\nCC:  @dimpase\n\nBranch/Commit: [2b07cf5ba64c9557c6e6f3f008168886da7e69ad](https://github.com/sagemath/sagetrac-mirror/commit/2b07cf5ba64c9557c6e6f3f008168886da7e69ad)\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #28175, #27870\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28908\n\n",
    "closed_at": "2020-01-18T12:35:52Z",
    "created_at": "2019-12-25T15:39:18Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "spkg-configure for cbc",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28908",
    "user": "https://github.com/mkoeppe"
}
```
We add `spkg-configure` for the optional package `cbc`.

Because `OptionalExtension` does not know about packages found by spkg-configure (see #25828), this is only useful on top of #28175.


CC:  @dimpase

Branch/Commit: [2b07cf5ba64c9557c6e6f3f008168886da7e69ad](https://github.com/sagemath/sagetrac-mirror/commit/2b07cf5ba64c9557c6e6f3f008168886da7e69ad)

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #28175, #27870

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28908





---

archive/issue_comments_562805.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n We add `spkg-configure` for the optional package `cbc`.\n+\n+Because `OptionalExtension` does not know about packages found by spkg-configure (see #25828), this is only useful on top of #28175.\n+\n``````\n",
    "created_at": "2019-12-25T16:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562805",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 We add `spkg-configure` for the optional package `cbc`.
+
+Because `OptionalExtension` does not know about packages found by spkg-configure (see #25828), this is only useful on top of #28175.
+
``````




---

archive/issue_comments_562806.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2019-12-25T16:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562806",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_events_082587.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-12-25T16:21:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28908#event-82587"
}
```



---

archive/issue_comments_562807.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#28175\"",
    "created_at": "2019-12-25T16:21:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562807",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#28175"



---

archive/issue_comments_562808.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/28908_spkg_configure_cbc\"",
    "created_at": "2019-12-25T16:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562808",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/28908_spkg_configure_cbc"



---

archive/issue_comments_562809.json:
```json
{
    "body": "Changing commit from \"\" to \"0e5b5b1d1d557f736baf788f1453b0e83b2b6888\"",
    "created_at": "2019-12-26T02:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562809",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "" to "0e5b5b1d1d557f736baf788f1453b0e83b2b6888"



---

archive/issue_comments_562810.json:
```json
{
    "body": "<a id='comment:3'></a>\nSage's cbc lists quite a few dependencies (readline zlib bzip2 $(BLAS)) , but none are checked by spkg-configure, whereas they are really there, as may be seen on Debian by running\n\n```\nldd /usr/lib/x86_64-linux-gnu/libCbc.so.3\n```\n\nIt seems that cbc.pc file is lacking in this sense (along with its dependencies, it seems they don't bother with anything that is external to , they really should list them - should it be reported to upstream?\n\nAnyhow, we should write these deps out, as it's done in e.g. gsl's ticket #28879\n\n```m4\nSAGE_SPKG_CONFIGURE([cbc], [\n  SAGE_SPKG_DEPCHECK([atlas openblas zlib bzip2], [\n    dnl  checking with pkg-config\n    PKG_CHECK_MODULES([CBC], [cbc >= 2.9.4], [], [sage_spkg_install_cbc=yes])\n  ])\n])\n```\n\nPerhaps we should update the copy of cbc.pc, to include all these deps\n(more precisely, all but altlas) in the `Requires:` field. \n\n\n\n\n\n---\nNew commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[86c7da7](https://github.com/sagemath/sagetrac-mirror/commit/86c7da7834863013ca6db192f0ba606d4e0dd0b3)|`Add packages sage_numerical_backends_*`|\n|[437fec5](https://github.com/sagemath/sagetrac-mirror/commit/437fec50bb78832cd797f263f73732c6993c5719)|`Fixup dependencies`|\n|[846ca9a](https://github.com/sagemath/sagetrac-mirror/commit/846ca9a1520562f5c375db8c2ddf45ef5133956c)|`Replace CoinBackend, CPLEXBackend, GurobiBackend by their versions imported from sage_numerical_backends_*`|\n|[3c557b4](https://github.com/sagemath/sagetrac-mirror/commit/3c557b48cf069ebfb61fe757894808403ba74b1c)|`build/pkgs/sage_numerical_backends_*/spkg-install: Adjust error message`|\n|[84c83f2](https://github.com/sagemath/sagetrac-mirror/commit/84c83f26b23fe2714b9078e63e85bc45525cb896)|`src/doc/en/thematic_tutorials/linear_programming.rst: Update COIN/CPLEX/Gurobi install instructions`|\n|[4828766](https://github.com/sagemath/sagetrac-mirror/commit/48287667e7c3178c6da2cf4e6171d353e2af60d7)|`MixedIntegerLinearProgram: Update docstrings for class and __init__, refer to thematic tutorial,  and reduce copy-paste`|\n|[189d60b](https://github.com/sagemath/sagetrac-mirror/commit/189d60bc565f05a3c72c76da8b2cabc863e08a4f)|`get_solver: Reduce copy-paste in docstring`|\n|[357e966](https://github.com/sagemath/sagetrac-mirror/commit/357e9661e83dcea5f4080821168f05039ad44d67)|`src/doc/en/thematic_tutorials/linear_programming.rst: Update license info, URL for cbc`|\n|[0e5b5b1](https://github.com/sagemath/sagetrac-mirror/commit/0e5b5b1d1d557f736baf788f1453b0e83b2b6888)|`build/pkgs/cbc/spkg-configure.m4: New`|",
    "created_at": "2019-12-26T02:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562810",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>
Sage's cbc lists quite a few dependencies (readline zlib bzip2 $(BLAS)) , but none are checked by spkg-configure, whereas they are really there, as may be seen on Debian by running

```
ldd /usr/lib/x86_64-linux-gnu/libCbc.so.3
```

It seems that cbc.pc file is lacking in this sense (along with its dependencies, it seems they don't bother with anything that is external to , they really should list them - should it be reported to upstream?

Anyhow, we should write these deps out, as it's done in e.g. gsl's ticket #28879

```m4
SAGE_SPKG_CONFIGURE([cbc], [
  SAGE_SPKG_DEPCHECK([atlas openblas zlib bzip2], [
    dnl  checking with pkg-config
    PKG_CHECK_MODULES([CBC], [cbc >= 2.9.4], [], [sage_spkg_install_cbc=yes])
  ])
])
```

Perhaps we should update the copy of cbc.pc, to include all these deps
(more precisely, all but altlas) in the `Requires:` field. 





---
New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[86c7da7](https://github.com/sagemath/sagetrac-mirror/commit/86c7da7834863013ca6db192f0ba606d4e0dd0b3)|`Add packages sage_numerical_backends_*`|
|[437fec5](https://github.com/sagemath/sagetrac-mirror/commit/437fec50bb78832cd797f263f73732c6993c5719)|`Fixup dependencies`|
|[846ca9a](https://github.com/sagemath/sagetrac-mirror/commit/846ca9a1520562f5c375db8c2ddf45ef5133956c)|`Replace CoinBackend, CPLEXBackend, GurobiBackend by their versions imported from sage_numerical_backends_*`|
|[3c557b4](https://github.com/sagemath/sagetrac-mirror/commit/3c557b48cf069ebfb61fe757894808403ba74b1c)|`build/pkgs/sage_numerical_backends_*/spkg-install: Adjust error message`|
|[84c83f2](https://github.com/sagemath/sagetrac-mirror/commit/84c83f26b23fe2714b9078e63e85bc45525cb896)|`src/doc/en/thematic_tutorials/linear_programming.rst: Update COIN/CPLEX/Gurobi install instructions`|
|[4828766](https://github.com/sagemath/sagetrac-mirror/commit/48287667e7c3178c6da2cf4e6171d353e2af60d7)|`MixedIntegerLinearProgram: Update docstrings for class and __init__, refer to thematic tutorial,  and reduce copy-paste`|
|[189d60b](https://github.com/sagemath/sagetrac-mirror/commit/189d60bc565f05a3c72c76da8b2cabc863e08a4f)|`get_solver: Reduce copy-paste in docstring`|
|[357e966](https://github.com/sagemath/sagetrac-mirror/commit/357e9661e83dcea5f4080821168f05039ad44d67)|`src/doc/en/thematic_tutorials/linear_programming.rst: Update license info, URL for cbc`|
|[0e5b5b1](https://github.com/sagemath/sagetrac-mirror/commit/0e5b5b1d1d557f736baf788f1453b0e83b2b6888)|`build/pkgs/cbc/spkg-configure.m4: New`|



---

archive/issue_comments_562811.json:
```json
{
    "body": "Changing dependencies from \"#28175\" to \"#28175, #27870\"",
    "created_at": "2019-12-27T04:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562811",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#28175" to "#28175, #27870"



---

archive/issue_comments_562812.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [dimpase](#comment%3A3):\n> Sage's cbc lists quite a few dependencies (readline zlib bzip2 $(BLAS)) , but none are checked by spkg-configure ...\n> It seems that cbc.pc file is lacking in this sense (along with its dependencies, it seems they don't bother with anything that is external to , they really should list them - should it be reported to upstream?\n\n\nI'm sure they'd like to know, please go ahead.\n\n> Anyhow, we should write these deps out, as it's done in e.g. gsl's ticket #28879\n> \n> \n> ```m4\n> SAGE_SPKG_CONFIGURE([cbc], [\n>   SAGE_SPKG_DEPCHECK([atlas openblas readline zlib bzip2], [\n>     dnl  checking with pkg-config\n>     PKG_CHECK_MODULES([CBC], [cbc >= 2.9.4], [], [sage_spkg_install_cbc=yes])\n>   ])\n> ])\n> ```\n\n\nThanks, I'll wait with that until #27870 to be merged.",
    "created_at": "2019-12-27T04:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562812",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Replying to [dimpase](#comment%3A3):
> Sage's cbc lists quite a few dependencies (readline zlib bzip2 $(BLAS)) , but none are checked by spkg-configure ...
> It seems that cbc.pc file is lacking in this sense (along with its dependencies, it seems they don't bother with anything that is external to , they really should list them - should it be reported to upstream?


I'm sure they'd like to know, please go ahead.

> Anyhow, we should write these deps out, as it's done in e.g. gsl's ticket #28879
> 
> 
> ```m4
> SAGE_SPKG_CONFIGURE([cbc], [
>   SAGE_SPKG_DEPCHECK([atlas openblas readline zlib bzip2], [
>     dnl  checking with pkg-config
>     PKG_CHECK_MODULES([CBC], [cbc >= 2.9.4], [], [sage_spkg_install_cbc=yes])
>   ])
> ])
> ```


Thanks, I'll wait with that until #27870 to be merged.



---

archive/issue_comments_562813.json:
```json
{
    "body": "<a id='comment:5'></a>\nI guess their rationale for dependencies in *.pc files is that they don't assume that \n`blas lapack zlib bzip2` (I scratched `readline` out, it's actually not a dependence)\nhave *.pc files. Which is fair enough.\n\nI've listed this ticket in #27330.\n\nBy the way, to move #27870  forward please review its dependence, #28883",
    "created_at": "2019-12-27T13:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562813",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
I guess their rationale for dependencies in *.pc files is that they don't assume that 
`blas lapack zlib bzip2` (I scratched `readline` out, it's actually not a dependence)
have *.pc files. Which is fair enough.

I've listed this ticket in #27330.

By the way, to move #27870  forward please review its dependence, #28883



---

archive/issue_comments_562814.json:
```json
{
    "body": "Changing commit from \"0e5b5b1d1d557f736baf788f1453b0e83b2b6888\" to \"2b07cf5ba64c9557c6e6f3f008168886da7e69ad\"",
    "created_at": "2020-01-11T04:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562814",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0e5b5b1d1d557f736baf788f1453b0e83b2b6888" to "2b07cf5ba64c9557c6e6f3f008168886da7e69ad"



---

archive/issue_comments_562815.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[cb85af7](https://github.com/sagemath/sagetrac-mirror/commit/cb85af7dd50a847760d865ed55aeb6f2989daa52)|`build/pkgs/cbc/spkg-configure.m4: New`|\n|[2b07cf5](https://github.com/sagemath/sagetrac-mirror/commit/2b07cf5ba64c9557c6e6f3f008168886da7e69ad)|`build/pkgs/cbc/spkg-configure.m4: Add SAGE_SPKG_DEPCHECK`|",
    "created_at": "2020-01-11T04:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562815",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[cb85af7](https://github.com/sagemath/sagetrac-mirror/commit/cb85af7dd50a847760d865ed55aeb6f2989daa52)|`build/pkgs/cbc/spkg-configure.m4: New`|
|[2b07cf5](https://github.com/sagemath/sagetrac-mirror/commit/2b07cf5ba64c9557c6e6f3f008168886da7e69ad)|`build/pkgs/cbc/spkg-configure.m4: Add SAGE_SPKG_DEPCHECK`|



---

archive/issue_comments_562816.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-11T04:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562816",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_562817.json:
```json
{
    "body": "<a id='comment:8'></a>\nlooks good to me",
    "created_at": "2020-01-11T08:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562817",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
looks good to me



---

archive/issue_comments_562818.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-11T08:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562818",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_562819.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2020-01-11T08:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562819",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_562820.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/28908_spkg_configure_cbc\" to \"2b07cf5ba64c9557c6e6f3f008168886da7e69ad\"",
    "created_at": "2020-01-18T12:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562820",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/28908_spkg_configure_cbc" to "2b07cf5ba64c9557c6e6f3f008168886da7e69ad"



---

archive/issue_comments_562821.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-01-18T12:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28908#issuecomment-562821",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_082588.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-18T12:35:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28908",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28908#event-82588"
}
```
