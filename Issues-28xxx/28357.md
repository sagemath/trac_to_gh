# Issue 28357: Segmentation fault in pynac when getting real/imag_part of a complex expression

archive/issues_028120.json:
```json
{
    "assignees": [],
    "body": "From this [ask question](https://ask.sagemath.org/question/47488/asking-real-part-of-a-function-crash-the-kernel) the following crashes pynac with a stack overflow:\n\n```\nsage: n=var('n')\nsage: assume(n, 'integer')\nsage: (I^n).real_part()\n/home/embray/src/sagemath/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x80b5)[0x7f5b6da330b5]\n/home/embray/src/sagemath/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x8158)[0x7f5b6da33158]\n/home/embray/src/sagemath/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x96ad)[0x7f5b6da346ad]\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x10330)[0x7f5b7cf14330]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC7numeric3gcdERKS0_+0x1d)[0x7f594bfdcd7d]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC3gcdERKNS_7numericES2_+0x9)[0x7f594bfe0e29]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3add15integer_contentEv+0xcc)[0x7f594bfcc80c]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3add5powerERKNS_7numericE+0x37)[0x7f594bf09d97]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power4evalEi+0x1933)[0x7f594bff6cf3]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC2ex20construct_from_basicERKNS_5basicE+0x76)[0x7f594bf283a6]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3mul29combine_ex_with_coeff_to_pairERKNS_2exERKNS_7numericE+0xb8)[0x7f594bfbcfb8]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC9expairseq12evalchildrenEi+0xa7)[0x7f594bf31df7]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3mul4evalEi+0x36)[0x7f594bfc2d16]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC2ex20construct_from_basicERKNS_5basicE+0x76)[0x7f594bf283a6]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3add20recombine_pair_to_exERKNS_6expairE+0x5d)[0x7f594bf050bd]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3add4infoEj+0x196)[0x7f594bf05ae6]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power4evalEi+0x460)[0x7f594bff5820]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC2ex20construct_from_basicERKNS_5basicE+0x76)[0x7f594bf283a6]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power4evalEi+0x12e5)[0x7f594bff66a5]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC2ex20construct_from_basicERKNS_5basicE+0x76)[0x7f594bf283a6]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power9real_partEv+0x50f)[0x7f594bfef0af]\n/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power9real_partEv+0x51)[0x7f594bfeebf1]\n...\n```\n\nfollowed by an infinite recursion in `GiNaC::power::real_part()`.  It doesn't crash without `assume(n, 'integer')`, and gives a correct answer:\n\n```\nsage: n=var('n')\nsage: (I^n).real_part()\ncos(1/2*pi*real_part(n))*e^(-1/2*pi*imag_part(n))\n```\n\nso stipulating that `assume(n, 'integer')` should set `imag_part(n) == 0` and `real_part(n) == n` and give the correct answer...\n\nCC:  @rwst\n\nKeywords: **pynac assume**\n\nBranch/Commit: **[`248016b`](https://github.com/sagemath/sagetrac-mirror/commit/248016bd236d7a45e162be16d17504255e2c9293)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Dave Morris**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28357_\n\n",
    "closed_at": "2021-07-18T22:53:42Z",
    "created_at": "2019-08-15T13:34:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Segmentation fault in pynac when getting real/imag_part of a complex expression",
    "type": "issue",
    "updated_at": "2021-07-18T22:53:42Z",
    "url": "https://github.com/sagemath/sage/issues/28357",
    "user": "https://github.com/embray"
}
```
From this [ask question](https://ask.sagemath.org/question/47488/asking-real-part-of-a-function-crash-the-kernel) the following crashes pynac with a stack overflow:

```
sage: n=var('n')
sage: assume(n, 'integer')
sage: (I^n).real_part()
/home/embray/src/sagemath/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x80b5)[0x7f5b6da330b5]
/home/embray/src/sagemath/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x8158)[0x7f5b6da33158]
/home/embray/src/sagemath/sage/local/lib/python2.7/site-packages/cysignals/signals.so(+0x96ad)[0x7f5b6da346ad]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x10330)[0x7f5b7cf14330]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC7numeric3gcdERKS0_+0x1d)[0x7f594bfdcd7d]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC3gcdERKNS_7numericES2_+0x9)[0x7f594bfe0e29]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3add15integer_contentEv+0xcc)[0x7f594bfcc80c]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3add5powerERKNS_7numericE+0x37)[0x7f594bf09d97]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power4evalEi+0x1933)[0x7f594bff6cf3]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC2ex20construct_from_basicERKNS_5basicE+0x76)[0x7f594bf283a6]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3mul29combine_ex_with_coeff_to_pairERKNS_2exERKNS_7numericE+0xb8)[0x7f594bfbcfb8]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC9expairseq12evalchildrenEi+0xa7)[0x7f594bf31df7]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3mul4evalEi+0x36)[0x7f594bfc2d16]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC2ex20construct_from_basicERKNS_5basicE+0x76)[0x7f594bf283a6]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3add20recombine_pair_to_exERKNS_6expairE+0x5d)[0x7f594bf050bd]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC3add4infoEj+0x196)[0x7f594bf05ae6]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power4evalEi+0x460)[0x7f594bff5820]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC2ex20construct_from_basicERKNS_5basicE+0x76)[0x7f594bf283a6]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power4evalEi+0x12e5)[0x7f594bff66a5]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZN5GiNaC2ex20construct_from_basicERKNS_5basicE+0x76)[0x7f594bf283a6]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power9real_partEv+0x50f)[0x7f594bfef0af]
/home/embray/src/sagemath/sage/local/lib/libpynac.so.18(_ZNK5GiNaC5power9real_partEv+0x51)[0x7f594bfeebf1]
...
```

followed by an infinite recursion in `GiNaC::power::real_part()`.  It doesn't crash without `assume(n, 'integer')`, and gives a correct answer:

```
sage: n=var('n')
sage: (I^n).real_part()
cos(1/2*pi*real_part(n))*e^(-1/2*pi*imag_part(n))
```

so stipulating that `assume(n, 'integer')` should set `imag_part(n) == 0` and `real_part(n) == n` and give the correct answer...

CC:  @rwst

Keywords: **pynac assume**

Branch/Commit: **[`248016b`](https://github.com/sagemath/sagetrac-mirror/commit/248016bd236d7a45e162be16d17504255e2c9293)**

Reviewer: **Travis Scrimshaw**

Author: **Dave Morris**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/28357_





---

archive/issue_events_389170.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-08-15T13:34:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389170"
}
```



---

archive/issue_events_389171.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-08-15T13:34:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389171"
}
```



---

archive/issue_events_389172.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-08-15T13:34:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389172"
}
```



---

archive/issue_events_389173.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-08-15T13:34:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389173"
}
```



---

archive/issue_comments_441989.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,4 +29,12 @@\n ...\n ```\n \n-followed by an infinite recursion in `GiNaC::power::real_part()`.  It doesn't crash without `assume(n, 'integer')`.\n+followed by an infinite recursion in `GiNaC::power::real_part()`.  It doesn't crash without `assume(n, 'integer')`, and gives a correct answer:\n+\n+```\n+sage: n=var('n')\n+sage: (I^n).real_part()\n+cos(1/2*pi*real_part(n))*e^(-1/2*pi*imag_part(n))\n+```\n+\n+so stipulating that `assume(n, 'integer')` should set `imag_part(n) == 0` and `real_part(n) == n` and give the correct answer...\n``````\n",
    "created_at": "2019-08-17T17:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441989",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,4 +29,12 @@
 ...
 ```
 
-followed by an infinite recursion in `GiNaC::power::real_part()`.  It doesn't crash without `assume(n, 'integer')`.
+followed by an infinite recursion in `GiNaC::power::real_part()`.  It doesn't crash without `assume(n, 'integer')`, and gives a correct answer:
+
+```
+sage: n=var('n')
+sage: (I^n).real_part()
+cos(1/2*pi*real_part(n))*e^(-1/2*pi*imag_part(n))
+```
+
+so stipulating that `assume(n, 'integer')` should set `imag_part(n) == 0` and `real_part(n) == n` and give the correct answer...
``````




---

archive/issue_comments_441990.json:
```json
{
    "body": "Branch: **[public/28357](https://github.com/sagemath/sagetrac-mirror/tree/public/28357)**",
    "created_at": "2021-06-18T02:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441990",
    "user": "https://github.com/DaveWitteMorris"
}
```

Branch: **[public/28357](https://github.com/sagemath/sagetrac-mirror/tree/public/28357)**



---

archive/issue_comments_441991.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\n**Diagnosis:** Pynac's `power::real_part` method erroneously assumes that if `n` is a positive integer, then `((a + b*I)^n).expand()` will multiply the factors to write the expression as a sum of monomials. But this is not true when `n` is symbolic, rather than being equal to a specific integer. Instead, the expression `(a + b*I)^n` is returned with no change, which leads to an infinite loop. \n\nThis pynac patch should fix the bug (for `real_part` and `imag_part`). \n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb80d0ba7b552b65bca5522f1973b7962b2bd42b\"><code>cb80d0b</code></a></td><td><code>trac 28357 patch power::real_part</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1850eab17a9a80b52cd9a999ec47fb6b2a01123a\"><code>1850eab</code></a></td><td><code>add doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/185acd928e9308c5d0446e06ad0613a93a107482\"><code>185acd9</code></a></td><td><code>increment pynac version</code></td></tr></table>\n",
    "created_at": "2021-06-18T02:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441991",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:4" align="right">comment:4</div>

**Diagnosis:** Pynac's `power::real_part` method erroneously assumes that if `n` is a positive integer, then `((a + b*I)^n).expand()` will multiply the factors to write the expression as a sum of monomials. But this is not true when `n` is symbolic, rather than being equal to a specific integer. Instead, the expression `(a + b*I)^n` is returned with no change, which leads to an infinite loop. 

This pynac patch should fix the bug (for `real_part` and `imag_part`). 

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb80d0ba7b552b65bca5522f1973b7962b2bd42b"><code>cb80d0b</code></a></td><td><code>trac 28357 patch power::real_part</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1850eab17a9a80b52cd9a999ec47fb6b2a01123a"><code>1850eab</code></a></td><td><code>add doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/185acd928e9308c5d0446e06ad0613a93a107482"><code>185acd9</code></a></td><td><code>increment pynac version</code></td></tr></table>




---

archive/issue_events_389174.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-06-18T02:59:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389174"
}
```



---

archive/issue_events_389175.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-06-18T02:59:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389175"
}
```



---

archive/issue_events_389176.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-06-18T02:59:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389176"
}
```



---

archive/issue_comments_441992.json:
```json
{
    "body": "Commit: **[`185acd9`](https://github.com/sagemath/sagetrac-mirror/commit/185acd928e9308c5d0446e06ad0613a93a107482)**",
    "created_at": "2021-06-18T02:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441992",
    "user": "https://github.com/DaveWitteMorris"
}
```

Commit: **[`185acd9`](https://github.com/sagemath/sagetrac-mirror/commit/185acd928e9308c5d0446e06ad0613a93a107482)**



---

archive/issue_comments_441993.json:
```json
{
    "body": "Author: **Dave Morris**",
    "created_at": "2021-06-18T02:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441993",
    "user": "https://github.com/DaveWitteMorris"
}
```

Author: **Dave Morris**



---

archive/issue_comments_441994.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMerge conflict.",
    "created_at": "2021-06-20T23:59:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441994",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:5" align="right">comment:5</div>

Merge conflict.



---

archive/issue_events_389177.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-06-20T23:59:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389177"
}
```



---

archive/issue_events_389178.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-06-20T23:59:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389178"
}
```



---

archive/issue_comments_441995.json:
```json
{
    "body": "Changed branch from **[public/28357](https://github.com/sagemath/sagetrac-mirror/tree/public/28357)** to **[public/28357r1](https://github.com/sagemath/sagetrac-mirror/tree/public/28357r1)**",
    "created_at": "2021-07-02T01:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441995",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changed branch from **[public/28357](https://github.com/sagemath/sagetrac-mirror/tree/public/28357)** to **[public/28357r1](https://github.com/sagemath/sagetrac-mirror/tree/public/28357r1)**



---

archive/issue_comments_441996.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nRebased on 9.4b3\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb4e77fa580a7076fd183046947c55c13fb0b377\"><code>eb4e77f</code></a></td><td><code>trac 28357 patch power::real_part</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d579be95e2d13060eb47a3eeda8755c3ff4451a\"><code>1d579be</code></a></td><td><code>add doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c629c306c1099d2c33c8266d6a42e89b71a54c3c\"><code>c629c30</code></a></td><td><code>increment pynac version</code></td></tr></table>\n",
    "created_at": "2021-07-02T01:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441996",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:7" align="right">comment:7</div>

Rebased on 9.4b3

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb4e77fa580a7076fd183046947c55c13fb0b377"><code>eb4e77f</code></a></td><td><code>trac 28357 patch power::real_part</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d579be95e2d13060eb47a3eeda8755c3ff4451a"><code>1d579be</code></a></td><td><code>add doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c629c306c1099d2c33c8266d6a42e89b71a54c3c"><code>c629c30</code></a></td><td><code>increment pynac version</code></td></tr></table>




---

archive/issue_events_389179.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-07-02T01:46:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389179"
}
```



---

archive/issue_events_389180.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-07-02T01:46:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389180"
}
```



---

archive/issue_comments_441997.json:
```json
{
    "body": "Changed commit from **[`185acd9`](https://github.com/sagemath/sagetrac-mirror/commit/185acd928e9308c5d0446e06ad0613a93a107482)** to **[`c629c30`](https://github.com/sagemath/sagetrac-mirror/commit/c629c306c1099d2c33c8266d6a42e89b71a54c3c)**",
    "created_at": "2021-07-02T01:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441997",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changed commit from **[`185acd9`](https://github.com/sagemath/sagetrac-mirror/commit/185acd928e9308c5d0446e06ad0613a93a107482)** to **[`c629c30`](https://github.com/sagemath/sagetrac-mirror/commit/c629c306c1099d2c33c8266d6a42e89b71a54c3c)**



---

archive/issue_comments_441998.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-07-02T02:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441998",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_389181.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-07-02T02:15:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389181"
}
```



---

archive/issue_events_389182.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-07-02T02:15:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389182"
}
```



---

archive/issue_comments_441999.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nLGTM.\n\nPlease also make a PR upstream: https://github.com/pynac/pynac.",
    "created_at": "2021-07-02T02:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-441999",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

LGTM.

Please also make a PR upstream: https://github.com/pynac/pynac.



---

archive/issue_comments_442000.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks! This is now [pynac PR 380](https://github.com/pynac/pynac/pull/380).",
    "created_at": "2021-07-02T03:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-442000",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks! This is now [pynac PR 380](https://github.com/pynac/pynac/pull/380).



---

archive/issue_comments_442001.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n\n```\n    STDOUT: CONFLICT (content): Merge conflict in build/pkgs/pynac/package-version.txt\n```",
    "created_at": "2021-07-06T21:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-442001",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>


```
    STDOUT: CONFLICT (content): Merge conflict in build/pkgs/pynac/package-version.txt
```



---

archive/issue_events_389183.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-06T21:38:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389183"
}
```



---

archive/issue_events_389184.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-06T21:38:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389184"
}
```



---

archive/issue_comments_442002.json:
```json
{
    "body": "Changed branch from **[public/28357r1](https://github.com/sagemath/sagetrac-mirror/tree/public/28357r1)** to **[public/28357r2](https://github.com/sagemath/sagetrac-mirror/tree/public/28357r2)**",
    "created_at": "2021-07-07T02:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-442002",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changed branch from **[public/28357r1](https://github.com/sagemath/sagetrac-mirror/tree/public/28357r1)** to **[public/28357r2](https://github.com/sagemath/sagetrac-mirror/tree/public/28357r2)**



---

archive/issue_comments_442003.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nRebased on #31694.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e97c1b54c1a9fc8438a33803fa7b45b2a42643b0\"><code>e97c1b5</code></a></td><td><code>update pynac to 0.7.28</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c131f7b368b4b929e8b7cbe97879b4708de11cf\"><code>3c131f7</code></a></td><td><code>wip tarball</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11c80aa3a61496a976558b016c70ef8165218651\"><code>11c80aa</code></a></td><td><code>updated tarball with PRs 377 and 378</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9c50e3d1bb0a6d9ec17ede66a2f47da7cd89b01\"><code>c9c50e3</code></a></td><td><code>build/pkgs/pynac: Upgrade to 0.7.29</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31bbbc131d25c51e5f934b0cb4c4ca8651edbedf\"><code>31bbbc1</code></a></td><td><code>Merge commit 'c9c50e3d1bb0a6d9ec17ede66a2f47da7cd89b01' of git://trac.sagemath.org/sage into 31694upgradepynac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec76ad93fe855ac6fb6c2e8768b9f0a97d6c9e1a\"><code>ec76ad9</code></a></td><td><code>trac 28357 patch power::real_part</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dace50e4a2993a46c89b8fdd9f5c3b145e42e446\"><code>dace50e</code></a></td><td><code>add doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/248016bd236d7a45e162be16d17504255e2c9293\"><code>248016b</code></a></td><td><code>increment pynac version</code></td></tr></table>\n",
    "created_at": "2021-07-07T02:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-442003",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:12" align="right">comment:12</div>

Rebased on #31694.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e97c1b54c1a9fc8438a33803fa7b45b2a42643b0"><code>e97c1b5</code></a></td><td><code>update pynac to 0.7.28</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c131f7b368b4b929e8b7cbe97879b4708de11cf"><code>3c131f7</code></a></td><td><code>wip tarball</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11c80aa3a61496a976558b016c70ef8165218651"><code>11c80aa</code></a></td><td><code>updated tarball with PRs 377 and 378</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9c50e3d1bb0a6d9ec17ede66a2f47da7cd89b01"><code>c9c50e3</code></a></td><td><code>build/pkgs/pynac: Upgrade to 0.7.29</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31bbbc131d25c51e5f934b0cb4c4ca8651edbedf"><code>31bbbc1</code></a></td><td><code>Merge commit 'c9c50e3d1bb0a6d9ec17ede66a2f47da7cd89b01' of git://trac.sagemath.org/sage into 31694upgradepynac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec76ad93fe855ac6fb6c2e8768b9f0a97d6c9e1a"><code>ec76ad9</code></a></td><td><code>trac 28357 patch power::real_part</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dace50e4a2993a46c89b8fdd9f5c3b145e42e446"><code>dace50e</code></a></td><td><code>add doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/248016bd236d7a45e162be16d17504255e2c9293"><code>248016b</code></a></td><td><code>increment pynac version</code></td></tr></table>




---

archive/issue_events_389185.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-07-07T02:05:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389185"
}
```



---

archive/issue_events_389186.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2021-07-07T02:05:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389186"
}
```



---

archive/issue_comments_442004.json:
```json
{
    "body": "Changed commit from **[`c629c30`](https://github.com/sagemath/sagetrac-mirror/commit/c629c306c1099d2c33c8266d6a42e89b71a54c3c)** to **[`248016b`](https://github.com/sagemath/sagetrac-mirror/commit/248016bd236d7a45e162be16d17504255e2c9293)**",
    "created_at": "2021-07-07T02:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-442004",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changed commit from **[`c629c30`](https://github.com/sagemath/sagetrac-mirror/commit/c629c306c1099d2c33c8266d6a42e89b71a54c3c)** to **[`248016b`](https://github.com/sagemath/sagetrac-mirror/commit/248016bd236d7a45e162be16d17504255e2c9293)**



---

archive/issue_events_389187.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-18T22:53:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389187"
}
```



---

archive/issue_events_389188.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "042a6bd4baf18843b5313f21ae667cdbb4eeac84",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-07-18T22:53:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28357#event-389188"
}
```



---

archive/issue_comments_442005.json:
```json
{
    "body": "Changed branch from **[public/28357r2](https://github.com/sagemath/sagetrac-mirror/tree/public/28357r2)** to **[`248016b`](https://github.com/sagemath/sagetrac-mirror/commit/248016bd236d7a45e162be16d17504255e2c9293)**",
    "created_at": "2021-07-18T22:53:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28357",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28357#issuecomment-442005",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/28357r2](https://github.com/sagemath/sagetrac-mirror/tree/public/28357r2)** to **[`248016b`](https://github.com/sagemath/sagetrac-mirror/commit/248016bd236d7a45e162be16d17504255e2c9293)**
