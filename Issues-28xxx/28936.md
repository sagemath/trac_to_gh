# Issue 28936: Meta-ticket: Adopt mainstream Python testing/linting infrastructure: tox, pytest, ..., describe in Developer's Guide

archive/issues_028699.json:
```json
{
    "body": "This metaticket proposes to use mainstream Python testing and linting infrastructure for Sage -- by adding configuration files and documentation.\n\n**tox**:\n- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n- #30467 `src/tox.ini`: Check patchbot plugin patterns\n- #30410 (Command \"sage -tox\")\n- #30416 (Make tox a standard package)\n- #30453 Document \"sage -tox\"\n- #30411 (src/tox.ini: Add environment pyright)\n- #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)\n\n\n**pytest**:\n- #31003 Add minimal pytest configuration\n- #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n- #30362 Add symplectic structures\n- #32975 Improve doctest interaction with pytest\n- #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest\n- #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern\n- #33572 `sage -pytest`\n- #33560 pytest: ignore cython files\n- #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest\n- #33550 Preparse sage files before passing them to pytest\n- #31123 Document pytest\n- #33521 doctesting with pytest fails on system install of sage\n- #33531 pytest in sage is broken, please make it really optional\n- #31110 Make `pytest` a standard package\n- #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)\n- #30738 Replace custom Sage unit test discovery by pytest\n- #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`\n\nOther tickets:\n\n- #30452 (\"sage -startuptime\" should accept file names too)\n\n- #30361 (Add pyright config and linting documentation; dup: #17992)\n\n- #33232 (`sage -t`: Write report in JUnitXML format)\n\n- #30415 (Remove pyflakes?)\n\n\nDocumentation tickets:\n\n- #29784 Update section \"Sage Development Process\" in Developer's Guide\n\n\n- #29520: Mention .lgtm.yml in the Developer's Guide\n\nInfrastructure tickets:\n\n- #30363 Replace patchbot by github actions (part of https://trac.sagemath.org/ticket/)\n\n- Use pre-commit https://pre-commit.com/\n\n- Use pipenv in place of venv https://pipenv.pypa.io/en/latest/#\n\n\nSee also:\n\n- Meta-ticket #29060: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n\n- Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods\n\n- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n\n- Extensive description of different linters: https://github.com/vintasoftware/python-linters-and-code-analysis\n\n\n\n**CC:**  @jdemeyer @dimpase @embray @videlec @fchapoton @tscrim @jm58660 @tobiasdiez @kliem @nthiery @tornaria\n\n**Status:** new\n\nIssue created by migration from https://trac.sagemath.org/ticket/28936\n\n",
    "created_at": "2020-01-01T18:58:02Z",
    "labels": [
        "component: doctest framework"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Meta-ticket: Adopt mainstream Python testing/linting infrastructure: tox, pytest, ..., describe in Developer's Guide",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28936",
    "user": "https://github.com/mkoeppe"
}
```
This metaticket proposes to use mainstream Python testing and linting infrastructure for Sage -- by adding configuration files and documentation.

**tox**:
- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
- #30467 `src/tox.ini`: Check patchbot plugin patterns
- #30410 (Command "sage -tox")
- #30416 (Make tox a standard package)
- #30453 Document "sage -tox"
- #30411 (src/tox.ini: Add environment pyright)
- #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)


**pytest**:
- #31003 Add minimal pytest configuration
- #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
- #30362 Add symplectic structures
- #32975 Improve doctest interaction with pytest
- #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest
- #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern
- #33572 `sage -pytest`
- #33560 pytest: ignore cython files
- #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest
- #33550 Preparse sage files before passing them to pytest
- #31123 Document pytest
- #33521 doctesting with pytest fails on system install of sage
- #33531 pytest in sage is broken, please make it really optional
- #31110 Make `pytest` a standard package
- #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)
- #30738 Replace custom Sage unit test discovery by pytest
- #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`

Other tickets:

- #30452 ("sage -startuptime" should accept file names too)

- #30361 (Add pyright config and linting documentation; dup: #17992)

- #33232 (`sage -t`: Write report in JUnitXML format)

- #30415 (Remove pyflakes?)


Documentation tickets:

- #29784 Update section "Sage Development Process" in Developer's Guide


- #29520: Mention .lgtm.yml in the Developer's Guide

Infrastructure tickets:

- #30363 Replace patchbot by github actions (part of https://trac.sagemath.org/ticket/)

- Use pre-commit https://pre-commit.com/

- Use pipenv in place of venv https://pipenv.pypa.io/en/latest/#


See also:

- Meta-ticket #29060: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages

- Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods

- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.

- Extensive description of different linters: https://github.com/vintasoftware/python-linters-and-code-analysis



**CC:**  @jdemeyer @dimpase @embray @videlec @fchapoton @tscrim @jm58660 @tobiasdiez @kliem @nthiery @tornaria

**Status:** new

Issue created by migration from https://trac.sagemath.org/ticket/28936





---

archive/issue_events_082710.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-04T04:39:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82710"
}
```




---

archive/issue_events_082711.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "rename": {
        "from": "Create tox plugin for running the sage doctester",
        "to": "Create tox / pytest plugins for running the sage doctester"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82711"
}
```




---

archive/issue_comments_563432.json:
```json
{
    "body": "Replying to [ticket:28936 mkoeppe]:\n> `tox` seems to be the preferred interface for running tests - see for example https://github.com/pypa/setuptools/issues/931 (deprecation of `setup.py test`).\n\n\nI don't know what you mean by \"preferred interface\" here.  There isn't really any such thing as a preferred interface.  It's just being proposed here as a recommendation over `setup.py test`.  Sage doesn't use `setup.py test` anyways so there's nothing that needs to be \"replaced\" with a different interface if/when `setup.py` goes away.\n\nThe main advantage to tox is the ability to run a package's tests across multiple runtime environments (esp. different Python versions).  This isn't really possible currently with Sage; it would actually be very difficult to use tox in any sensible manner with Sage.\n\nIf someone wants to do this anyways I don't see the harm really, but I'm not sure what problem it would be solving.",
    "created_at": "2020-01-06T14:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563432",
    "user": "https://github.com/embray"
}
```


Replying to [ticket:28936 mkoeppe]:
> `tox` seems to be the preferred interface for running tests - see for example https://github.com/pypa/setuptools/issues/931 (deprecation of `setup.py test`).


I don't know what you mean by "preferred interface" here.  There isn't really any such thing as a preferred interface.  It's just being proposed here as a recommendation over `setup.py test`.  Sage doesn't use `setup.py test` anyways so there's nothing that needs to be "replaced" with a different interface if/when `setup.py` goes away.

The main advantage to tox is the ability to run a package's tests across multiple runtime environments (esp. different Python versions).  This isn't really possible currently with Sage; it would actually be very difficult to use tox in any sensible manner with Sage.

If someone wants to do this anyways I don't see the harm really, but I'm not sure what problem it would be solving.



---

archive/issue_comments_563433.json:
```json
{
    "body": "<a id='comment:4'></a>\nA first step:  #28987",
    "created_at": "2020-01-11T05:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563433",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:4'></a>
A first step:  #28987



---

archive/issue_comments_563434.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [embray](#comment%3A3):\n> Replying to [ticket:28936 mkoeppe]:\n> The main advantage to tox is the ability to run a package's tests across multiple runtime environments (esp. different Python versions).  This isn't really possible currently with Sage; it would actually be very difficult to use tox in any sensible manner with Sage.\n\n\nFWIW, I managed to use `tox` on top of the sage installation, see https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/tox.ini: The trick is to run `tox` with `sitepackages = true` and an `install_command` that installs into the user scheme. With this trick, after all, no new plugin for `tox` is needed to handle the sage environment.",
    "created_at": "2020-01-13T01:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563434",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:5'></a>
Replying to [embray](#comment%3A3):
> Replying to [ticket:28936 mkoeppe]:
> The main advantage to tox is the ability to run a package's tests across multiple runtime environments (esp. different Python versions).  This isn't really possible currently with Sage; it would actually be very difficult to use tox in any sensible manner with Sage.


FWIW, I managed to use `tox` on top of the sage installation, see https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/tox.ini: The trick is to run `tox` with `sitepackages = true` and an `install_command` that installs into the user scheme. With this trick, after all, no new plugin for `tox` is needed to handle the sage environment.



---

archive/issue_events_082712.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "rename": {
        "from": "Create tox / pytest plugins for running the sage doctester",
        "to": "Meta-ticket: Adopt mainstream Python testing/linting infrastructure"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82712"
}
```




---

archive/issue_comments_563435.json:
```json
{
    "body": "<a id='comment:6'></a>\nI have broadened the ticket description.",
    "created_at": "2020-01-13T02:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563435",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:6'></a>
I have broadened the ticket description.



---

archive/issue_comments_563436.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,18 @@\n-`tox` seems to be the preferred interface for running tests - see for example https://github.com/pypa/setuptools/issues/931 (deprecation of `setup.py test`).\n+`tox` is a popular package for advertising the testing/linting infrastructure of a Python project by listing them in one configuration file `tox.ini`; it supports running tests in isolated virtual environments.\n \n-We should create a `tox` plugin (https://tox.readthedocs.io/en/latest/plugins.html)\n-- for testing `sagelib` (as an alternative to `sage -t`)\n-- for users' packages that depend on sage. \n+A typical example of `tox.ini`: https://opendev.org/openstack/neutron/raw/branch/master/tox.ini\n \n+This metaticket proposes to use `tox` and other mainstream Python testing and linting infrastructure for Sage.\n+\n+Tickets:\n+\n+- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n+\n+- Add linters equivalent to those reported by patchbot: https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py:\n+\n+  So that users can check style locally instead of going through endless cycles with the patchbot on trac.\n+\n+- Use pre-commit https://pre-commit.com/\n+\n+- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n+\n``````\n",
    "created_at": "2020-01-13T02:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563436",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,18 @@
-`tox` seems to be the preferred interface for running tests - see for example https://github.com/pypa/setuptools/issues/931 (deprecation of `setup.py test`).
+`tox` is a popular package for advertising the testing/linting infrastructure of a Python project by listing them in one configuration file `tox.ini`; it supports running tests in isolated virtual environments.
 
-We should create a `tox` plugin (https://tox.readthedocs.io/en/latest/plugins.html)
-- for testing `sagelib` (as an alternative to `sage -t`)
-- for users' packages that depend on sage. 
+A typical example of `tox.ini`: https://opendev.org/openstack/neutron/raw/branch/master/tox.ini
 
+This metaticket proposes to use `tox` and other mainstream Python testing and linting infrastructure for Sage.
+
+Tickets:
+
+- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
+
+- Add linters equivalent to those reported by patchbot: https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py:
+
+  So that users can check style locally instead of going through endless cycles with the patchbot on trac.
+
+- Use pre-commit https://pre-commit.com/
+
+- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
+
``````




---

archive/issue_comments_563437.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,6 +5,8 @@\n This metaticket proposes to use `tox` and other mainstream Python testing and linting infrastructure for Sage.\n \n Tickets:\n+\n+- #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`\n \n - #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n \n``````\n",
    "created_at": "2020-02-02T02:10:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563437",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -5,6 +5,8 @@
 This metaticket proposes to use `tox` and other mainstream Python testing and linting infrastructure for Sage.
 
 Tickets:
+
+- #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`
 
 - #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
 
``````




---

archive/issue_comments_563438.json:
```json
{
    "body": "<a id='comment:8'></a>\npushing these forward to 9.2",
    "created_at": "2020-04-14T06:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563438",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:8'></a>
pushing these forward to 9.2



---

archive/issue_events_082713.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82713"
}
```




---

archive/issue_events_082714.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T06:38:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82714"
}
```




---

archive/issue_comments_563439.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,6 +7,8 @@\n Tickets:\n \n - #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`\n+\n+- #29520: Mention .lgtm.yml in the Developer's Guide\n \n - #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n \n``````\n",
    "created_at": "2020-04-16T17:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563439",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -7,6 +7,8 @@
 Tickets:
 
 - #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`
+
+- #29520: Mention .lgtm.yml in the Developer's Guide
 
 - #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
 
``````




---

archive/issue_events_082715.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "rename": {
        "from": "Meta-ticket: Adopt mainstream Python testing/linting infrastructure",
        "to": "Meta-ticket: Adopt mainstream Python testing/linting infrastructure, describe in Developer's Guide"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82715"
}
```




---

archive/issue_comments_563440.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n Tickets:\n \n-- #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`\n+- #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`; see also meta-tickets #29146, #29060. \n \n - #29520: Mention .lgtm.yml in the Developer's Guide\n \n``````\n",
    "created_at": "2020-04-26T19:54:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563440",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 Tickets:
 
-- #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`
+- #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`; see also meta-tickets #29146, #29060. 
 
 - #29520: Mention .lgtm.yml in the Developer's Guide
 
``````




---

archive/issue_comments_563441.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,3 +20,4 @@\n \n - #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n \n+- Document pyrightconfig.json ... as added by #29775\n``````\n",
    "created_at": "2020-06-04T17:19:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563441",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -20,3 +20,4 @@
 
 - #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
 
+- Document pyrightconfig.json ... as added by #29775
``````




---

archive/issue_comments_563442.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,3 +21,5 @@\n - #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n \n - Document pyrightconfig.json ... as added by #29775\n+\n+- Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods\n``````\n",
    "created_at": "2020-06-10T19:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563442",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -21,3 +21,5 @@
 - #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
 
 - Document pyrightconfig.json ... as added by #29775
+
+- Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods
``````




---

archive/issue_comments_563443.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,6 +20,6 @@\n \n - #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n \n-- Document pyrightconfig.json ... as added by #29775\n+- Document pyrightconfig.json ... as added by #30361\n \n - Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods\n``````\n",
    "created_at": "2020-08-14T20:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563443",
    "user": "https://github.com/tobiasdiez"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -20,6 +20,6 @@
 
 - #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
 
-- Document pyrightconfig.json ... as added by #29775
+- Document pyrightconfig.json ... as added by #30361
 
 - Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods
``````




---

archive/issue_comments_563444.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,3 +23,5 @@\n - Document pyrightconfig.json ... as added by #30361\n \n - Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods\n+\n+- Replace patchbot by github actions (part of #30363)\n``````\n",
    "created_at": "2020-08-17T16:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563444",
    "user": "https://github.com/tobiasdiez"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -23,3 +23,5 @@
 - Document pyrightconfig.json ... as added by #30361
 
 - Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods
+
+- Replace patchbot by github actions (part of #30363)
``````




---

archive/issue_comments_563445.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,6 +12,8 @@\n \n - #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n \n+- #29784 Update section \"Sage Development Process\" in Developer's Guide\n+\n - Add linters equivalent to those reported by patchbot: https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py:\n \n   So that users can check style locally instead of going through endless cycles with the patchbot on trac.\n``````\n",
    "created_at": "2020-08-18T18:04:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563445",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -12,6 +12,8 @@
 
 - #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
 
+- #29784 Update section "Sage Development Process" in Developer's Guide
+
 - Add linters equivalent to those reported by patchbot: https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py:
 
   So that users can check style locally instead of going through endless cycles with the patchbot on trac.
``````




---

archive/issue_comments_563446.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,4 @@\n-`tox` is a popular package for advertising the testing/linting infrastructure of a Python project by listing them in one configuration file `tox.ini`; it supports running tests in isolated virtual environments.\n-\n-A typical example of `tox.ini`: https://opendev.org/openstack/neutron/raw/branch/master/tox.ini\n-\n-This metaticket proposes to use `tox` and other mainstream Python testing and linting infrastructure for Sage.\n+This metaticket proposes to use mainstream Python testing and linting infrastructure for Sage -- by adding configuration files and documentation.\n \n Tickets:\n \n``````\n",
    "created_at": "2020-08-18T18:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563446",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,4 @@
-`tox` is a popular package for advertising the testing/linting infrastructure of a Python project by listing them in one configuration file `tox.ini`; it supports running tests in isolated virtual environments.
-
-A typical example of `tox.ini`: https://opendev.org/openstack/neutron/raw/branch/master/tox.ini
-
-This metaticket proposes to use `tox` and other mainstream Python testing and linting infrastructure for Sage.
+This metaticket proposes to use mainstream Python testing and linting infrastructure for Sage -- by adding configuration files and documentation.
 
 Tickets:
 
``````




---

archive/issue_comments_563447.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,24 +2,41 @@\n \n Tickets:\n \n-- #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`; see also meta-tickets #29146, #29060. \n+- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n+\n+- #30467 `src/tox.ini`: Check patchbot plugin patterns\n+\n+- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n+\n+- #30410 (Command \"sage -tox\")\n+\n+- #30452 (\"sage -startuptime\" should accept file names too)\n+\n+- #30361 (Add pyright config and linting documentation)\n+\n+- #30411 (src/tox.ini: Add environment pyright)\n+\n+- #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)\n+\n+- #30415 (Remove pyflakes?)\n+\n+Documentation tickets:\n+\n+- #29784 Update section \"Sage Development Process\" in Developer's Guide\n \n - #29520: Mention .lgtm.yml in the Developer's Guide\n \n-- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n+Infrastructure tickets:\n \n-- #29784 Update section \"Sage Development Process\" in Developer's Guide\n-\n-- Add linters equivalent to those reported by patchbot: https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py:\n-\n-  So that users can check style locally instead of going through endless cycles with the patchbot on trac.\n+- #30363 Replace patchbot by github actions (part of https://trac.sagemath.org/ticket/)\n \n - Use pre-commit https://pre-commit.com/\n \n-- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n \n-- Document pyrightconfig.json ... as added by #30361\n+See also:\n+\n+- Meta-ticket #29060: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n \n - Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods\n \n-- Replace patchbot by github actions (part of #30363)\n+\n``````\n",
    "created_at": "2020-08-30T02:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563447",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -2,24 +2,41 @@
 
 Tickets:
 
-- #29053: Add debian/fedora/arch/conda package information to build/pkgs, generate Dockerfiles and installation help; add `SAGE_ROOT/tox.ini`; see also meta-tickets #29146, #29060. 
+- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
+
+- #30467 `src/tox.ini`: Check patchbot plugin patterns
+
+- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
+
+- #30410 (Command "sage -tox")
+
+- #30452 ("sage -startuptime" should accept file names too)
+
+- #30361 (Add pyright config and linting documentation)
+
+- #30411 (src/tox.ini: Add environment pyright)
+
+- #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)
+
+- #30415 (Remove pyflakes?)
+
+Documentation tickets:
+
+- #29784 Update section "Sage Development Process" in Developer's Guide
 
 - #29520: Mention .lgtm.yml in the Developer's Guide
 
-- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
+Infrastructure tickets:
 
-- #29784 Update section "Sage Development Process" in Developer's Guide
-
-- Add linters equivalent to those reported by patchbot: https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/plugins.py:
-
-  So that users can check style locally instead of going through endless cycles with the patchbot on trac.
+- #30363 Replace patchbot by github actions (part of https://trac.sagemath.org/ticket/)
 
 - Use pre-commit https://pre-commit.com/
 
-- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
 
-- Document pyrightconfig.json ... as added by #30361
+See also:
+
+- Meta-ticket #29060: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
 
 - Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods
 
-- Replace patchbot by github actions (part of #30363)
+
``````




---

archive/issue_comments_563448.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,13 +6,13 @@\n \n - #30467 `src/tox.ini`: Check patchbot plugin patterns\n \n-- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n-\n - #30410 (Command \"sage -tox\")\n \n - #30452 (\"sage -startuptime\" should accept file names too)\n \n - #30361 (Add pyright config and linting documentation)\n+\n+- #30416 (Make tox a standard package)\n \n - #30411 (src/tox.ini: Add environment pyright)\n \n@@ -23,6 +23,8 @@\n Documentation tickets:\n \n - #29784 Update section \"Sage Development Process\" in Developer's Guide\n+\n+- #30453 Document \"sage -tox\"\n \n - #29520: Mention .lgtm.yml in the Developer's Guide\n \n@@ -39,4 +41,7 @@\n \n - Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods\n \n+- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n \n+\n+\n``````\n",
    "created_at": "2020-08-30T02:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563448",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -6,13 +6,13 @@
 
 - #30467 `src/tox.ini`: Check patchbot plugin patterns
 
-- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
-
 - #30410 (Command "sage -tox")
 
 - #30452 ("sage -startuptime" should accept file names too)
 
 - #30361 (Add pyright config and linting documentation)
+
+- #30416 (Make tox a standard package)
 
 - #30411 (src/tox.ini: Add environment pyright)
 
@@ -23,6 +23,8 @@
 Documentation tickets:
 
 - #29784 Update section "Sage Development Process" in Developer's Guide
+
+- #30453 Document "sage -tox"
 
 - #29520: Mention .lgtm.yml in the Developer's Guide
 
@@ -39,4 +41,7 @@
 
 - Generalize `sage.numerical.backends.logging_backend.LoggingBackend` to help generate `_test` methods
 
+- #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
 
+
+
``````




---

archive/issue_comments_563449.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -43,5 +43,6 @@\n \n - #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.\n \n+- Extensive description of different linters: https://github.com/vintasoftware/python-linters-and-code-analysis\n \n \n``````\n",
    "created_at": "2020-08-31T09:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563449",
    "user": "https://github.com/tobiasdiez"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -43,5 +43,6 @@
 
 - #28998: Add script-type check_dependencies package that installs tox, mock, pytest etc.
 
+- Extensive description of different linters: https://github.com/vintasoftware/python-linters-and-code-analysis
 
 
``````




---

archive/issue_comments_563450.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -34,6 +34,7 @@\n \n - Use pre-commit https://pre-commit.com/\n \n+- Use pipenv in place of venv https://pipenv.pypa.io/en/latest/#\n \n See also:\n \n``````\n",
    "created_at": "2020-09-04T13:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563450",
    "user": "https://github.com/tobiasdiez"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -34,6 +34,7 @@
 
 - Use pre-commit https://pre-commit.com/
 
+- Use pipenv in place of venv https://pipenv.pypa.io/en/latest/#
 
 See also:
 
``````




---

archive/issue_comments_563451.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n - #30452 (\"sage -startuptime\" should accept file names too)\n \n-- #30361 (Add pyright config and linting documentation)\n+- #30361 (Add pyright config and linting documentation; dup: #17992)\n \n - #30416 (Make tox a standard package)\n \n``````\n",
    "created_at": "2020-09-16T19:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563451",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 - #30452 ("sage -startuptime" should accept file names too)
 
-- #30361 (Add pyright config and linting documentation)
+- #30361 (Add pyright config and linting documentation; dup: #17992)
 
 - #30416 (Make tox a standard package)
 
``````




---

archive/issue_comments_563452.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -36,6 +36,8 @@\n \n - Use pipenv in place of venv https://pipenv.pypa.io/en/latest/#\n \n+- Use pytest in place of unittest\n+\n See also:\n \n - Meta-ticket #29060: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages\n``````\n",
    "created_at": "2020-09-28T19:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563452",
    "user": "https://github.com/tobiasdiez"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -36,6 +36,8 @@
 
 - Use pipenv in place of venv https://pipenv.pypa.io/en/latest/#
 
+- Use pytest in place of unittest
+
 See also:
 
 - Meta-ticket #29060: Add Dockerfiles and CI scripts for integration testing of source and binary distributions and of downstream packages
``````




---

archive/issue_comments_563453.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,6 +19,8 @@\n - #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)\n \n - #30415 (Remove pyflakes?)\n+\n+- #30738 (Use pytest instead of custom test discovery using `TestSuit`)\n \n Documentation tickets:\n \n``````\n",
    "created_at": "2020-10-07T18:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563453",
    "user": "https://github.com/tobiasdiez"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -19,6 +19,8 @@
 - #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)
 
 - #30415 (Remove pyflakes?)
+
+- #30738 (Use pytest instead of custom test discovery using `TestSuit`)
 
 Documentation tickets:
 
``````




---

archive/issue_events_082716.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82716"
}
```




---

archive/issue_events_082717.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82717"
}
```




---

archive/issue_comments_563454.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,32 +1,35 @@\n This metaticket proposes to use mainstream Python testing and linting infrastructure for Sage -- by adding configuration files and documentation.\n \n-Tickets:\n+**tox**:\n+- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n+- #30467 `src/tox.ini`: Check patchbot plugin patterns\n+- #30416 (Make tox a standard package)\n+- #30410 (Command \"sage -tox\")\n+- #30453 Document \"sage -tox\"\n+- #30411 (src/tox.ini: Add environment pyright)\n+- #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)\n \n-- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n \n-- #30467 `src/tox.ini`: Check patchbot plugin patterns\n+**pytest**:\n+- #31003 Add minimal pytest configuration\n+- #30738 (Use pytest instead of custom test discovery using `TestSuite`)\n+- #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n \n-- #30410 (Command \"sage -tox\")\n+Other tickets:\n \n - #30452 (\"sage -startuptime\" should accept file names too)\n \n - #30361 (Add pyright config and linting documentation; dup: #17992)\n \n-- #30416 (Make tox a standard package)\n \n-- #30411 (src/tox.ini: Add environment pyright)\n-\n-- #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)\n \n - #30415 (Remove pyflakes?)\n \n-- #30738 (Use pytest instead of custom test discovery using `TestSuit`)\n \n Documentation tickets:\n \n - #29784 Update section \"Sage Development Process\" in Developer's Guide\n \n-- #30453 Document \"sage -tox\"\n \n - #29520: Mention .lgtm.yml in the Developer's Guide\n \n@@ -38,7 +41,6 @@\n \n - Use pipenv in place of venv https://pipenv.pypa.io/en/latest/#\n \n-- Use pytest in place of unittest\n \n See also:\n \n``````\n",
    "created_at": "2020-12-24T20:43:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563454",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1,32 +1,35 @@
 This metaticket proposes to use mainstream Python testing and linting infrastructure for Sage -- by adding configuration files and documentation.
 
-Tickets:
+**tox**:
+- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
+- #30467 `src/tox.ini`: Check patchbot plugin patterns
+- #30416 (Make tox a standard package)
+- #30410 (Command "sage -tox")
+- #30453 Document "sage -tox"
+- #30411 (src/tox.ini: Add environment pyright)
+- #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)
 
-- #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
 
-- #30467 `src/tox.ini`: Check patchbot plugin patterns
+**pytest**:
+- #31003 Add minimal pytest configuration
+- #30738 (Use pytest instead of custom test discovery using `TestSuite`)
+- #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
 
-- #30410 (Command "sage -tox")
+Other tickets:
 
 - #30452 ("sage -startuptime" should accept file names too)
 
 - #30361 (Add pyright config and linting documentation; dup: #17992)
 
-- #30416 (Make tox a standard package)
 
-- #30411 (src/tox.ini: Add environment pyright)
-
-- #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)
 
 - #30415 (Remove pyflakes?)
 
-- #30738 (Use pytest instead of custom test discovery using `TestSuit`)
 
 Documentation tickets:
 
 - #29784 Update section "Sage Development Process" in Developer's Guide
 
-- #30453 Document "sage -tox"
 
 - #29520: Mention .lgtm.yml in the Developer's Guide
 
@@ -38,7 +41,6 @@
 
 - Use pipenv in place of venv https://pipenv.pypa.io/en/latest/#
 
-- Use pytest in place of unittest
 
 See also:
 
``````




---

archive/issue_comments_563455.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,6 +14,7 @@\n - #31003 Add minimal pytest configuration\n - #30738 (Use pytest instead of custom test discovery using `TestSuite`)\n - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n+- #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`\n \n Other tickets:\n \n``````\n",
    "created_at": "2020-12-24T21:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563455",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -14,6 +14,7 @@
 - #31003 Add minimal pytest configuration
 - #30738 (Use pytest instead of custom test discovery using `TestSuite`)
 - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
+- #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`
 
 Other tickets:
 
``````




---

archive/issue_events_082718.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "rename": {
        "from": "Meta-ticket: Adopt mainstream Python testing/linting infrastructure, describe in Developer's Guide",
        "to": "Meta-ticket: Adopt mainstream Python testing/linting infrastructure: tox, pytest, ..., describe in Developer's Guide"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82718"
}
```




---

archive/issue_comments_563456.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,6 +12,7 @@\n \n **pytest**:\n - #31003 Add minimal pytest configuration\n+- #31123 Improve pytest integration\n - #30738 (Use pytest instead of custom test discovery using `TestSuite`)\n - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`\n``````\n",
    "created_at": "2020-12-28T18:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563456",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -12,6 +12,7 @@
 
 **pytest**:
 - #31003 Add minimal pytest configuration
+- #31123 Improve pytest integration
 - #30738 (Use pytest instead of custom test discovery using `TestSuite`)
 - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
 - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`
``````




---

archive/issue_comments_563457.json:
```json
{
    "body": "<a id='comment:29'></a>\nMoving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563457",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:29'></a>
Moving to 9.4, as 9.3 has been released.



---

archive/issue_events_082719.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82719"
}
```




---

archive/issue_events_082720.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82720"
}
```




---

archive/issue_comments_563458.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,8 +3,8 @@\n **tox**:\n - #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.\n - #30467 `src/tox.ini`: Check patchbot plugin patterns\n+- #30410 (Command \"sage -tox\")\n - #30416 (Make tox a standard package)\n-- #30410 (Command \"sage -tox\")\n - #30453 Document \"sage -tox\"\n - #30411 (src/tox.ini: Add environment pyright)\n - #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)\n@@ -12,9 +12,10 @@\n \n **pytest**:\n - #31003 Add minimal pytest configuration\n+- #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n+- #31110 Make `pytest` a standard package\n - #31123 Improve pytest integration\n - #30738 (Use pytest instead of custom test discovery using `TestSuite`)\n-- #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`\n \n Other tickets:\n``````\n",
    "created_at": "2021-05-27T20:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563458",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -3,8 +3,8 @@
 **tox**:
 - #28987 Add `src/tox.ini`: As an alternative interface to running the sage doctester.
 - #30467 `src/tox.ini`: Check patchbot plugin patterns
+- #30410 (Command "sage -tox")
 - #30416 (Make tox a standard package)
-- #30410 (Command "sage -tox")
 - #30453 Document "sage -tox"
 - #30411 (src/tox.ini: Add environment pyright)
 - #30448 (src/tox.ini: Add validation of rst files and docstrings via a quick docbuild)
@@ -12,9 +12,10 @@
 
 **pytest**:
 - #31003 Add minimal pytest configuration
+- #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
+- #31110 Make `pytest` a standard package
 - #31123 Improve pytest integration
 - #30738 (Use pytest instead of custom test discovery using `TestSuite`)
-- #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
 - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`
 
 Other tickets:
``````




---

archive/issue_comments_563459.json:
```json
{
    "body": "<a id='comment:31'></a>\nWhat do you think about using [pytest-cov](https://pypi.org/project/pytest-cov/) for generating the test coverage report? The results can then be uploded to [codecov](https://about.codecov.io/) as part of the build process (github action). This gives a nice overview of the actual test coverage (i.e. code covered by tests) and could replace the sage-coverage scripts in the future.",
    "created_at": "2021-05-27T21:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563459",
    "user": "https://github.com/tobiasdiez"
}
```


<a id='comment:31'></a>
What do you think about using [pytest-cov](https://pypi.org/project/pytest-cov/) for generating the test coverage report? The results can then be uploded to [codecov](https://about.codecov.io/) as part of the build process (github action). This gives a nice overview of the actual test coverage (i.e. code covered by tests) and could replace the sage-coverage scripts in the future.



---

archive/issue_comments_563460.json:
```json
{
    "body": "<a id='comment:32'></a>\n+1 on investigating this. Myself I have no experience with the available tools (including the `sage-coverage` scripts even though I have fixed them up at least once). As usual, it's best to build a prototype and then demonstrate to the sage-devel community that it is useful.",
    "created_at": "2021-05-28T00:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563460",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:32'></a>
+1 on investigating this. Myself I have no experience with the available tools (including the `sage-coverage` scripts even though I have fixed them up at least once). As usual, it's best to build a prototype and then demonstrate to the sage-devel community that it is useful.



---

archive/issue_events_082721.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82721"
}
```




---

archive/issue_events_082722.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82722"
}
```




---

archive/issue_events_082723.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82723"
}
```




---

archive/issue_events_082724.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82724"
}
```




---

archive/issue_comments_563461.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,6 +13,10 @@\n **pytest**:\n - #31003 Add minimal pytest configuration\n - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n+- #32975 Improve doctest interaction with pytest\n+- #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern\n+- #33521 doctesting with pytest fails on system install of sage\n+- #33531 pytest in sage is broken, please make it really optional\n - #31110 Make `pytest` a standard package\n - #31123 Improve pytest integration\n - #30738 (Use pytest instead of custom test discovery using `TestSuite`)\n``````\n",
    "created_at": "2022-03-21T23:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563461",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -13,6 +13,10 @@
 **pytest**:
 - #31003 Add minimal pytest configuration
 - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
+- #32975 Improve doctest interaction with pytest
+- #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern
+- #33521 doctesting with pytest fails on system install of sage
+- #33531 pytest in sage is broken, please make it really optional
 - #31110 Make `pytest` a standard package
 - #31123 Improve pytest integration
 - #30738 (Use pytest instead of custom test discovery using `TestSuite`)
``````




---

archive/issue_comments_563462.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,7 +19,8 @@\n - #33531 pytest in sage is broken, please make it really optional\n - #31110 Make `pytest` a standard package\n - #31123 Improve pytest integration\n-- #30738 (Use pytest instead of custom test discovery using `TestSuite`)\n+- #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)\n+- #30738 Replace custom Sage unit test discovery by pytest\n - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`\n \n Other tickets:\n``````\n",
    "created_at": "2022-03-22T00:00:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563462",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -19,7 +19,8 @@
 - #33531 pytest in sage is broken, please make it really optional
 - #31110 Make `pytest` a standard package
 - #31123 Improve pytest integration
-- #30738 (Use pytest instead of custom test discovery using `TestSuite`)
+- #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)
+- #30738 Replace custom Sage unit test discovery by pytest
 - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`
 
 Other tickets:
``````




---

archive/issue_comments_563463.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -29,7 +29,7 @@\n \n - #30361 (Add pyright config and linting documentation; dup: #17992)\n \n-\n+- #33232 (`sage -t`: Write report in JUnitXML format)\n \n - #30415 (Remove pyflakes?)\n \n``````\n",
    "created_at": "2022-03-22T00:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563463",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -29,7 +29,7 @@
 
 - #30361 (Add pyright config and linting documentation; dup: #17992)
 
-
+- #33232 (`sage -t`: Write report in JUnitXML format)
 
 - #30415 (Remove pyflakes?)
 
``````




---

archive/issue_comments_563464.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,6 +19,7 @@\n - #33531 pytest in sage is broken, please make it really optional\n - #31110 Make `pytest` a standard package\n - #31123 Improve pytest integration\n+- #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest\n - #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)\n - #30738 Replace custom Sage unit test discovery by pytest\n - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`\n``````\n",
    "created_at": "2022-03-22T18:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563464",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -19,6 +19,7 @@
 - #33531 pytest in sage is broken, please make it really optional
 - #31110 Make `pytest` a standard package
 - #31123 Improve pytest integration
+- #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest
 - #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)
 - #30738 Replace custom Sage unit test discovery by pytest
 - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`
``````




---

archive/issue_comments_563465.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,13 +13,17 @@\n **pytest**:\n - #31003 Add minimal pytest configuration\n - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n+- #30362 Add symplectic structures\n+- #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest\n+- #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern\n+- #33560 pytest: ignore cython files\n+- #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest\n+- #31123 Improve pytest integration\n - #32975 Improve doctest interaction with pytest\n-- #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern\n - #33521 doctesting with pytest fails on system install of sage\n - #33531 pytest in sage is broken, please make it really optional\n - #31110 Make `pytest` a standard package\n - #31123 Improve pytest integration\n-- #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest\n - #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)\n - #30738 Replace custom Sage unit test discovery by pytest\n - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`\n``````\n",
    "created_at": "2022-03-25T18:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563465",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -13,13 +13,17 @@
 **pytest**:
 - #31003 Add minimal pytest configuration
 - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
+- #30362 Add symplectic structures
+- #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest
+- #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern
+- #33560 pytest: ignore cython files
+- #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest
+- #31123 Improve pytest integration
 - #32975 Improve doctest interaction with pytest
-- #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern
 - #33521 doctesting with pytest fails on system install of sage
 - #33531 pytest in sage is broken, please make it really optional
 - #31110 Make `pytest` a standard package
 - #31123 Improve pytest integration
-- #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest
 - #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)
 - #30738 Replace custom Sage unit test discovery by pytest
 - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`
``````




---

archive/issue_comments_563466.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,12 +14,12 @@\n - #31003 Add minimal pytest configuration\n - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`\n - #30362 Add symplectic structures\n+- #32975 Improve doctest interaction with pytest\n - #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest\n - #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern\n - #33560 pytest: ignore cython files\n - #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest\n - #31123 Improve pytest integration\n-- #32975 Improve doctest interaction with pytest\n - #33521 doctesting with pytest fails on system install of sage\n - #33531 pytest in sage is broken, please make it really optional\n - #31110 Make `pytest` a standard package\n``````\n",
    "created_at": "2022-03-25T18:27:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563466",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -14,12 +14,12 @@
 - #31003 Add minimal pytest configuration
 - #31103 `sage.numerical.backends`: Replace use of `TestSuite` by `pytest`
 - #30362 Add symplectic structures
+- #32975 Improve doctest interaction with pytest
 - #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest
 - #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern
 - #33560 pytest: ignore cython files
 - #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest
 - #31123 Improve pytest integration
-- #32975 Improve doctest interaction with pytest
 - #33521 doctesting with pytest fails on system install of sage
 - #33531 pytest in sage is broken, please make it really optional
 - #31110 Make `pytest` a standard package
``````




---

archive/issue_comments_563467.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,11 +19,10 @@\n - #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern\n - #33560 pytest: ignore cython files\n - #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest\n-- #31123 Improve pytest integration\n+- #31123 Document pytest\n - #33521 doctesting with pytest fails on system install of sage\n - #33531 pytest in sage is broken, please make it really optional\n - #31110 Make `pytest` a standard package\n-- #31123 Improve pytest integration\n - #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)\n - #30738 Replace custom Sage unit test discovery by pytest\n - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`\n``````\n",
    "created_at": "2022-03-25T18:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563467",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -19,11 +19,10 @@
 - #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern
 - #33560 pytest: ignore cython files
 - #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest
-- #31123 Improve pytest integration
+- #31123 Document pytest
 - #33521 doctesting with pytest fails on system install of sage
 - #33531 pytest in sage is broken, please make it really optional
 - #31110 Make `pytest` a standard package
-- #31123 Improve pytest integration
 - #33546 Replace custom Sage doctest discovery by pytest (using pytest_collect_file)
 - #30738 Replace custom Sage unit test discovery by pytest
 - #31104 `sage.geometry.polyhedron`: Replace use of `TestSuite` by `pytest`
``````




---

archive/issue_comments_563468.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,6 +19,7 @@\n - #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern\n - #33560 pytest: ignore cython files\n - #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest\n+- #33550 Preparse sage files before passing them to pytest\n - #31123 Document pytest\n - #33521 doctesting with pytest fails on system install of sage\n - #33531 pytest in sage is broken, please make it really optional\n``````\n",
    "created_at": "2022-03-26T18:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563468",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -19,6 +19,7 @@
 - #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern
 - #33560 pytest: ignore cython files
 - #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest
+- #33550 Preparse sage files before passing them to pytest
 - #31123 Document pytest
 - #33521 doctesting with pytest fails on system install of sage
 - #33531 pytest in sage is broken, please make it really optional
``````




---

archive/issue_comments_563469.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,6 +17,7 @@\n - #32975 Improve doctest interaction with pytest\n - #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest\n - #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern\n+- #33572 `sage -pytest`\n - #33560 pytest: ignore cython files\n - #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest\n - #33550 Preparse sage files before passing them to pytest\n``````\n",
    "created_at": "2022-03-26T19:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28936#issuecomment-563469",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -17,6 +17,7 @@
 - #32975 Improve doctest interaction with pytest
 - #33549 Rename `test_...` functions to avoid the naming scheme reserved by pytest
 - #31924 `sage -t`: Do not run pytest on individual Python files unless they match the pytest file pattern
+- #33572 `sage -pytest`
 - #33560 pytest: ignore cython files
 - #33561 Rename `test_...` classes to avoid the naming scheme reserved by pytest
 - #33550 Preparse sage files before passing them to pytest
``````




---

archive/issue_events_082725.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82725"
}
```




---

archive/issue_events_082726.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82726"
}
```




---

archive/issue_events_082727.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T16:33:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82727"
}
```




---

archive/issue_events_082728.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T16:33:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28936",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28936#event-82728"
}
```

