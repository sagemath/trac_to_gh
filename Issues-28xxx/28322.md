# Issue 28322: zn_poly build failure with python3

archive/issues_028085.json:
```json
{
    "assignees": [],
    "body": "After `make distclean` and then python3-configuration,\n\nI still get (with 8.9.b5) the `zn_poly` build failure coming from patches already reported in #27476 five months ago.\n\nI managed to build by monkey-removing this patch, as before.\n\nCC:  @tscrim @jdemeyer @embray\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28322_\n\n",
    "closed_at": "2020-01-06T15:16:02Z",
    "created_at": "2019-08-04T14:38:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20build",
        "https://github.com/sagemath/sage/labels/invalid",
        "https://github.com/sagemath/sage/labels/worksforme"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "zn_poly build failure with python3",
    "type": "issue",
    "updated_at": "2020-01-06T15:16:02Z",
    "url": "https://github.com/sagemath/sage/issues/28322",
    "user": "https://github.com/fchapoton"
}
```
After `make distclean` and then python3-configuration,

I still get (with 8.9.b5) the `zn_poly` build failure coming from patches already reported in #27476 five months ago.

I managed to build by monkey-removing this patch, as before.

CC:  @tscrim @jdemeyer @embray

_Issue created by migration from https://trac.sagemath.org/ticket/28322_





---

archive/issue_events_370453.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-04T14:38:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370453"
}
```



---

archive/issue_events_370454.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-04T14:38:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build",
    "label_color": "000080",
    "label_name": "component: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370454"
}
```



---

archive/issue_events_370455.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-04T14:38:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370455"
}
```



---

archive/issue_events_370456.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-04T14:38:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370456"
}
```



---

archive/issue_comments_444301.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nI still don't see this problem, and the order of applying the patches doesn't have anything to do with what Python you're using for Sage.\n\nI started my rework of the zn_poly build system like, way back in March, and almost finished it.  I just got stuck on one thing and got side-tracked and never got back to finishing it.  It's definitely something I'd like the take care of though.\n\nMaybe, if worse comes to worse, I'll try a simpler rewrite that just uses autoconf, but not automake.  The hard part was that zn_poly has some strange source code layout that does not really fit well with some of automake's assumptions, so really it needs even more refactoring.  But I think, last I tried, I almost had it.",
    "created_at": "2019-08-12T12:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28322#issuecomment-444301",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'>Comment 1:</a>
I still don't see this problem, and the order of applying the patches doesn't have anything to do with what Python you're using for Sage.

I started my rework of the zn_poly build system like, way back in March, and almost finished it.  I just got stuck on one thing and got side-tracked and never got back to finishing it.  It's definitely something I'd like the take care of though.

Maybe, if worse comes to worse, I'll try a simpler rewrite that just uses autoconf, but not automake.  The hard part was that zn_poly has some strange source code layout that does not really fit well with some of automake's assumptions, so really it needs even more refactoring.  But I think, last I tried, I almost had it.



---

archive/issue_comments_444302.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28322#issuecomment-444302",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'>Comment 2:</a>
Ticket retargeted after milestone closed



---

archive/issue_events_370457.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370457"
}
```



---

archive/issue_events_370458.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370458"
}
```



---

archive/issue_comments_444303.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nstill the exact same issue with 9.0.rc1 (and every time I try to build zn_poly on this machine)\n\nso I \"git rm\" the patch, build zn_poly, and then \"git stash\" to restore the patch",
    "created_at": "2020-01-01T12:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28322#issuecomment-444303",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'>Comment 3:</a>
still the exact same issue with 9.0.rc1 (and every time I try to build zn_poly on this machine)

so I "git rm" the patch, build zn_poly, and then "git stash" to restore the patch



---

archive/issue_comments_444304.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nStill can't reproduce.  Something is weird on your system in how it's ordering files.",
    "created_at": "2020-01-06T15:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28322#issuecomment-444304",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'>Comment 4:</a>
Still can't reproduce.  Something is weird on your system in how it's ordering files.



---

archive/issue_events_370459.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T15:16:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370459"
}
```



---

archive/issue_events_370460.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T15:16:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "a6a6a6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370460"
}
```



---

archive/issue_events_370461.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T15:16:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370461"
}
```



---

archive/issue_events_370462.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T15:16:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370462"
}
```



---

archive/issue_comments_444305.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThis should be obviated by #28959.",
    "created_at": "2020-01-06T15:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28322#issuecomment-444305",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'>Comment 5:</a>
This should be obviated by #28959.



---

archive/issue_events_370463.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T15:16:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28322",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28322#event-370463"
}
```
