# Issue 28776: Coercion between algebraic polyhedra fails

archive/issues_028539.json:
```json
{
    "body": "CC:  @jplab @laisrast @videlec\n\nKeywords: algebraic polyhedra, quadratic fields\n\nFor the following polyhedra all things involving coercion fail.\n\n```\nsage: P = polytopes.icosahedron(); P\nA 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^3 defined as the convex hull of 12 vertices\nsage: P1 = polytopes.small_rhombicuboctahedron(); P1\nA 3-dimensional polyhedron in (Number Field in sqrt2 with defining polynomial x^2 - 2 with sqrt2 = 1.414213562373095?)^3 defined as the convex hull of 24 vertices\n\n```\n\nIt seems to boil down to two issues:\n- `P.base_extend(P1.base_ring())` doesn't do anything, see #28770,\n- number fields can mostly not coerced by design.\n\nDo we want to change that design for polyhedra? I think it is reasonable to coerce polyhedra over number fields by default. At least when there is exactly one composite field.\n\nIssue created by migration from https://trac.sagemath.org/ticket/28776\n\n",
    "created_at": "2019-11-20T09:06:40Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Coercion between algebraic polyhedra fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28776",
    "user": "https://github.com/kliem"
}
```
CC:  @jplab @laisrast @videlec

Keywords: algebraic polyhedra, quadratic fields

For the following polyhedra all things involving coercion fail.

```
sage: P = polytopes.icosahedron(); P
A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^3 defined as the convex hull of 12 vertices
sage: P1 = polytopes.small_rhombicuboctahedron(); P1
A 3-dimensional polyhedron in (Number Field in sqrt2 with defining polynomial x^2 - 2 with sqrt2 = 1.414213562373095?)^3 defined as the convex hull of 24 vertices

```

It seems to boil down to two issues:
- `P.base_extend(P1.base_ring())` doesn't do anything, see #28770,
- number fields can mostly not coerced by design.

Do we want to change that design for polyhedra? I think it is reasonable to coerce polyhedra over number fields by default. At least when there is exactly one composite field.

Issue created by migration from https://trac.sagemath.org/ticket/28776





---

archive/issue_comments_402479.json:
```json
{
    "body": "As was pointed out to me, it is not desirable to coerce number fields to the smallest field in general. As it is not canonical, fragile and expensive.\n\nHowever, it seems to be desirable for polyhedra, isn't it? Would it make sense to implement that somewhat as a standard behavior, e.g. that a polyhedron over QQ[sqrt(2)] and one over QQ[sqrt(3)] are coerced to one over QQ[sqrt(2) + sqrt(3)]?",
    "created_at": "2019-11-20T15:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28776#issuecomment-402479",
    "user": "https://github.com/kliem"
}
```

As was pointed out to me, it is not desirable to coerce number fields to the smallest field in general. As it is not canonical, fragile and expensive.

However, it seems to be desirable for polyhedra, isn't it? Would it make sense to implement that somewhat as a standard behavior, e.g. that a polyhedron over QQ[sqrt(2)] and one over QQ[sqrt(3)] are coerced to one over QQ[sqrt(2) + sqrt(3)]?



---

archive/issue_comments_402480.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2019-12-05T14:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28776#issuecomment-402480",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_info.



---

archive/issue_events_072648.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72648"
}
```



---

archive/issue_comments_402481.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28776#issuecomment-402481",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_402482.json:
```json
{
    "body": "Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28776#issuecomment-402482",
    "user": "https://github.com/mkoeppe"
}
```

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_072649.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72649"
}
```



---

archive/issue_events_072650.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72650"
}
```



---

archive/issue_events_072651.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72651"
}
```



---

archive/issue_events_072652.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72652"
}
```



---

archive/issue_events_072653.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-02T20:21:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72653"
}
```



---

archive/issue_events_072654.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-02T20:21:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72654"
}
```



---

archive/issue_comments_402483.json:
```json
{
    "body": "Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage",
    "created_at": "2021-04-02T20:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28776#issuecomment-402483",
    "user": "https://github.com/mkoeppe"
}
```

Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage



---

archive/issue_comments_402484.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28776#issuecomment-402484",
    "user": "https://github.com/mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_072655.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72655"
}
```



---

archive/issue_events_072656.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72656"
}
```



---

archive/issue_comments_402485.json:
```json
{
    "body": "Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28776#issuecomment-402485",
    "user": "https://github.com/mkoeppe"
}
```

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_072657.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72657"
}
```



---

archive/issue_events_072658.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72658"
}
```



---

archive/issue_events_072659.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72659"
}
```



---

archive/issue_events_072660.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72660"
}
```



---

archive/issue_events_072661.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72661"
}
```



---

archive/issue_events_072662.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28776",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28776#event-72662"
}
```
