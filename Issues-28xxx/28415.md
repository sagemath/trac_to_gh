# Issue 28415: Step by step integration for educational use

archive/issues_028178.json:
```json
{
    "body": "This branch implements a system to compute symbolic integrals step by step, trying to follow the rules that are taught to students to compute integrals by hand.\n\nTo compute the appropriate rules, it uses the sympy module `manualintegrate`.\n\nIt is exposed to the user through a `ManualIntegral` class, that can either be iterated to get hints on steps to follow:\n\n\n```\nsage: from sage.symbolic.integration.manual import ManualIntegral\nsage: M = ManualIntegral(exp(x)*sin(x), x)\nsage: M.hint()\n(u == sin(x),\n dv == e^x,\n du == cos(x),\n v == integrate(e^x, x),\n integrate(e^x*sin(x), x) == v*sin(x) - integrate(v*cos(x), x))\nsage: M.hint()\n(integrate(e^x, x) == e^x,)\nsage: M.hint()\n(u == cos(x),\n dv == e^x,\n du == -sin(x),\n v == integrate(e^x, x),\n integrate(cos(x)*e^x, x) == v*cos(x) - integrate(-v*sin(x), x))\nsage: M.hint()\n(integrate(e^x, x) == e^x,)\nsage: M.hint()\n(integrate(e^x*sin(x), x) == -cos(x)*e^x + e^x*sin(x) - integrate(e^x*sin(x), x),\n 2*integrate(e^x*sin(x), x) == -cos(x)*e^x + e^x*sin(x))\n```\n\n\nAlso, all hints can be listed at once:\n\n\n```\nsage: M.all_hints()\n[(u == sin(x),\n  dv == e^x,\n  du == cos(x),\n  v == integrate(e^x, x),\n  integrate(e^x*sin(x), x) == v*sin(x) - integrate(v*cos(x), x)),\n (integrate(e^x, x) == e^x,),\n (u == cos(x),\n  dv == e^x,\n  du == -sin(x),\n  v == integrate(e^x, x),\n  integrate(cos(x)*e^x, x) == v*cos(x) - integrate(-v*sin(x), x)),\n (integrate(e^x, x) == e^x,),\n (integrate(e^x*sin(x), x) == -cos(x)*e^x + e^x*sin(x) - integrate(e^x*sin(x), x),\n  2*integrate(e^x*sin(x), x) == -cos(x)*e^x + e^x*sin(x))]\n```\n\n\nCC:  @nthiery @kcrisman @slel\n\nKeywords: integration, education, sd110\n\nAuthor: Miguel Marco\n\nBranch: u/mmarco/manualintegrate\n\nStatus: needs_review\n\nCommit: ff07f9ad8e3ae9f668cfd99ac75026a913915f23\n\nIssue created by migration from https://trac.sagemath.org/ticket/28415\n\n",
    "created_at": "2019-08-28T08:57:01Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Step by step integration for educational use",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28415",
    "user": "https://github.com/miguelmarco"
}
```
This branch implements a system to compute symbolic integrals step by step, trying to follow the rules that are taught to students to compute integrals by hand.

To compute the appropriate rules, it uses the sympy module `manualintegrate`.

It is exposed to the user through a `ManualIntegral` class, that can either be iterated to get hints on steps to follow:


```
sage: from sage.symbolic.integration.manual import ManualIntegral
sage: M = ManualIntegral(exp(x)*sin(x), x)
sage: M.hint()
(u == sin(x),
 dv == e^x,
 du == cos(x),
 v == integrate(e^x, x),
 integrate(e^x*sin(x), x) == v*sin(x) - integrate(v*cos(x), x))
sage: M.hint()
(integrate(e^x, x) == e^x,)
sage: M.hint()
(u == cos(x),
 dv == e^x,
 du == -sin(x),
 v == integrate(e^x, x),
 integrate(cos(x)*e^x, x) == v*cos(x) - integrate(-v*sin(x), x))
sage: M.hint()
(integrate(e^x, x) == e^x,)
sage: M.hint()
(integrate(e^x*sin(x), x) == -cos(x)*e^x + e^x*sin(x) - integrate(e^x*sin(x), x),
 2*integrate(e^x*sin(x), x) == -cos(x)*e^x + e^x*sin(x))
```


Also, all hints can be listed at once:


```
sage: M.all_hints()
[(u == sin(x),
  dv == e^x,
  du == cos(x),
  v == integrate(e^x, x),
  integrate(e^x*sin(x), x) == v*sin(x) - integrate(v*cos(x), x)),
 (integrate(e^x, x) == e^x,),
 (u == cos(x),
  dv == e^x,
  du == -sin(x),
  v == integrate(e^x, x),
  integrate(cos(x)*e^x, x) == v*cos(x) - integrate(-v*sin(x), x)),
 (integrate(e^x, x) == e^x,),
 (integrate(e^x*sin(x), x) == -cos(x)*e^x + e^x*sin(x) - integrate(e^x*sin(x), x),
  2*integrate(e^x*sin(x), x) == -cos(x)*e^x + e^x*sin(x))]
```


CC:  @nthiery @kcrisman @slel

Keywords: integration, education, sd110

Author: Miguel Marco

Branch: u/mmarco/manualintegrate

Status: needs_review

Commit: ff07f9ad8e3ae9f668cfd99ac75026a913915f23

Issue created by migration from https://trac.sagemath.org/ticket/28415





---

archive/issue_comments_397522.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-08-28T09:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397522",
    "user": "https://github.com/miguelmarco"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_397523.json:
```json
{
    "body": "<a id='comment:2'></a>The user interface is maybe not very natural, but I couldn't figure out anything that was clearly better (right now the hints are just tuples of symbolic equations, I considered creating specific classes for this, but I am not sure it is a better solution).\n\nAlso, I am also not sure if the ManualIntegral class should be imported by default (the name space is already bloated, but mostly, I am not sure if this is the kind of thing that you want to offer by default to students, or if it is preferable to offer it as some kind of 'optional' feature).\n\nI would appreciate any comments obout these questions.\n\n---\nNew commits:",
    "created_at": "2019-08-28T09:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397523",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:2'></a>The user interface is maybe not very natural, but I couldn't figure out anything that was clearly better (right now the hints are just tuples of symbolic equations, I considered creating specific classes for this, but I am not sure it is a better solution).

Also, I am also not sure if the ManualIntegral class should be imported by default (the name space is already bloated, but mostly, I am not sure if this is the kind of thing that you want to offer by default to students, or if it is preferable to offer it as some kind of 'optional' feature).

I would appreciate any comments obout these questions.

---
New commits:



---

archive/issue_comments_397524.json:
```json
{
    "body": "Changing keywords from \"\" to \"integration, education\".",
    "created_at": "2019-08-28T09:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397524",
    "user": "https://github.com/miguelmarco"
}
```

Changing keywords from "" to "integration, education".



---

archive/issue_comments_397525.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to symbolics.",
    "created_at": "2019-08-28T09:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397525",
    "user": "https://github.com/miguelmarco"
}
```

Changing component from PLEASE CHANGE to symbolics.



---

archive/issue_comments_397526.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-08-28T10:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397526",
    "user": "https://github.com/miguelmarco"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_397527.json:
```json
{
    "body": "<a id='comment:5'></a>Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397527",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>Ticket retargeted after milestone closed



---

archive/issue_events_071030.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71030"
}
```



---

archive/issue_comments_397528.json:
```json
{
    "body": "<a id='comment:6'></a>I dont think this should be a default, because after all Sagemath should be like an aid to your calculations, and I dont think that giving the steps right away would help anyone learn. Moreover  I think the modifications which can be made to this, of course at the higher levels can be stages of the steps, meaning that different stages reveal different levels of step, which eases the burden of understanding the exact calculation. \n\nMoreover, I think instead of explicit details being given, we can reveal the steps to be of the format \n1. integrate sinx\n2. take the solution and judge its value in different equations\n3 ....",
    "created_at": "2020-03-21T20:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397528",
    "user": "https://github.com/Shlokatadistance"
}
```

<a id='comment:6'></a>I dont think this should be a default, because after all Sagemath should be like an aid to your calculations, and I dont think that giving the steps right away would help anyone learn. Moreover  I think the modifications which can be made to this, of course at the higher levels can be stages of the steps, meaning that different stages reveal different levels of step, which eases the burden of understanding the exact calculation. 

Moreover, I think instead of explicit details being given, we can reveal the steps to be of the format 
1. integrate sinx
2. take the solution and judge its value in different equations
3 ....



---

archive/issue_comments_397529.json:
```json
{
    "body": "<a id='comment:7'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397529",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_071031.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71031"
}
```



---

archive/issue_events_071032.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71032"
}
```



---

archive/issue_events_071033.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71033"
}
```



---

archive/issue_events_071034.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71034"
}
```



---

archive/issue_comments_397530.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-10T15:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_397531.json:
```json
{
    "body": "Changing keywords from \"integration, education\" to \"integration, education, sd110\".",
    "created_at": "2020-10-28T17:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397531",
    "user": "https://github.com/miguelmarco"
}
```

Changing keywords from "integration, education" to "integration, education, sd110".



---

archive/issue_comments_397532.json:
```json
{
    "body": "<a id='comment:13'></a>Hi - I was able to watch your your demo in full at https://bbb.imo.universite-paris-saclay.fr/playback/presentation/2.0/playback.html?meetingId=13f0752852b2cf7dc1e08f807f73590c9a3f650d-1604079987388\n\nand have some thoughts that I don't recall othes expressed. The simplest and to me most immediate reaction after looking at the list of namedtuple output from `sympy.integrals.manualintegrate` is to just give the *names* of the steps, \n\n* integration by parts, \n* variable substitution, \n* integration under the integral (or Leibniz integration which was a favorite of R. Feynman). \n\nAs for your the question of how much to show, that might be handled by some sort of expanded or colapsed view or expanded view that typically exists for (HTML) lists. \n\nBut overall it feels like doing this is going to be a lot of work, and it is not clear to me which side this should go on. Probably a bit on the sympy side if it is not there. \n\nLet me give some examples. I see that some of the namedtuples are \n\n* Reciprocal Rule\n* Urule\n* Piecewise Rule\n* Arccoth Rule\n\nand so on. Somewhere there should be a way to get longer verbose descriptions of exactly what there rules mean. Just providing URL link to where the information could be found would be sufficient. Does such a thing currently exist? \n\nAs you point out, based on what the rule is there might be further operations or \"hints\" as you put it that might guide a student. I think the example you gave was substituion by parts and using the system's ability to do factorization to figure out all of the parts which could be tried. Factorization makes sense for only *some* rules, not all of them. And for other rules other kinds of things to focus on make sense. \n\nSo if you want to go down the route of providing only a first step hint and making the student explore from there, it seems like you'd need a mapping from namedtuple name to the kinds of ways to provide hints. And probably this should be done in sympy rather than sage.",
    "created_at": "2020-10-31T03:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397532",
    "user": "https://github.com/rocky"
}
```

<a id='comment:13'></a>Hi - I was able to watch your your demo in full at https://bbb.imo.universite-paris-saclay.fr/playback/presentation/2.0/playback.html?meetingId=13f0752852b2cf7dc1e08f807f73590c9a3f650d-1604079987388

and have some thoughts that I don't recall othes expressed. The simplest and to me most immediate reaction after looking at the list of namedtuple output from `sympy.integrals.manualintegrate` is to just give the *names* of the steps, 

* integration by parts, 
* variable substitution, 
* integration under the integral (or Leibniz integration which was a favorite of R. Feynman). 

As for your the question of how much to show, that might be handled by some sort of expanded or colapsed view or expanded view that typically exists for (HTML) lists. 

But overall it feels like doing this is going to be a lot of work, and it is not clear to me which side this should go on. Probably a bit on the sympy side if it is not there. 

Let me give some examples. I see that some of the namedtuples are 

* Reciprocal Rule
* Urule
* Piecewise Rule
* Arccoth Rule

and so on. Somewhere there should be a way to get longer verbose descriptions of exactly what there rules mean. Just providing URL link to where the information could be found would be sufficient. Does such a thing currently exist? 

As you point out, based on what the rule is there might be further operations or "hints" as you put it that might guide a student. I think the example you gave was substituion by parts and using the system's ability to do factorization to figure out all of the parts which could be tried. Factorization makes sense for only *some* rules, not all of them. And for other rules other kinds of things to focus on make sense. 

So if you want to go down the route of providing only a first step hint and making the student explore from there, it seems like you'd need a mapping from namedtuple name to the kinds of ways to provide hints. And probably this should be done in sympy rather than sage.



---

archive/issue_comments_397533.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-13T00:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_397534.json:
```json
{
    "body": "<a id='comment:15'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397534",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_071035.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71035"
}
```



---

archive/issue_events_071036.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71036"
}
```



---

archive/issue_events_071037.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71037"
}
```



---

archive/issue_events_071038.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71038"
}
```



---

archive/issue_comments_397535.json:
```json
{
    "body": "<a id='comment:16'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397535",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_071039.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71039"
}
```



---

archive/issue_events_071040.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71040"
}
```



---

archive/issue_comments_397536.json:
```json
{
    "body": "<a id='comment:17'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28415#issuecomment-397536",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_071041.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71041"
}
```



---

archive/issue_events_071042.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71042"
}
```



---

archive/issue_events_071043.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71043"
}
```



---

archive/issue_events_071044.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28415",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28415#event-71044"
}
```
