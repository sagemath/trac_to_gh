# Issue 28591: convert chain complexes from Macaulay2 to Sage

archive/issues_028354.json:
```json
{
    "body": "This ticket implements conversion of chain complexes from Macaulay2 to Sage, for example:\n\n```\n            sage: R = ZZ['a,b,c']\n            sage: C = macaulay2(ideal(R.gens())).resolution()\n            sage: unicode_art(C.sage())\n                                   \u239b-b  0 -c\u239e     \u239b c\u239e\n                                   \u239c a -c  0\u239f     \u239c a\u239f\n                       (a b c)     \u239d 0  b  a\u23a0     \u239d-b\u23a0\n             0 \u27f5\u2500\u2500 C_0 \u27f5\u2500\u2500\u2500\u2500\u2500\u2500 C_1 \u27f5\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 C_2 \u27f5\u2500\u2500\u2500 C_3 \u27f5\u2500\u2500 0\n```\n\nThis ticket also fixes an issue where matrices of size 0\u00d7n failed to convert correctly.\n\nCC:  @saliola @dimpase @antonleykin\n\nKeywords: macaulay2, IMA Coding Sprint\n\nBranch/Commit: adb0a1af7896cc69b1c35fcaf5cdccd300c221ef\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton, Dima Pasechnik\n\nAuthor: Markus Wageringel\n\nDependencies: #28566\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28591\n\n",
    "closed_at": "2019-10-28T23:51:25Z",
    "created_at": "2019-10-11T00:08:58Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "convert chain complexes from Macaulay2 to Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28591",
    "user": "https://github.com/mwageringel"
}
```
This ticket implements conversion of chain complexes from Macaulay2 to Sage, for example:

```
            sage: R = ZZ['a,b,c']
            sage: C = macaulay2(ideal(R.gens())).resolution()
            sage: unicode_art(C.sage())
                                   ⎛-b  0 -c⎞     ⎛ c⎞
                                   ⎜ a -c  0⎟     ⎜ a⎟
                       (a b c)     ⎝ 0  b  a⎠     ⎝-b⎠
             0 ⟵── C_0 ⟵────── C_1 ⟵───────── C_2 ⟵─── C_3 ⟵── 0
```

This ticket also fixes an issue where matrices of size 0×n failed to convert correctly.

CC:  @saliola @dimpase @antonleykin

Keywords: macaulay2, IMA Coding Sprint

Branch/Commit: adb0a1af7896cc69b1c35fcaf5cdccd300c221ef

Reviewer: Frédéric Chapoton, Dima Pasechnik

Author: Markus Wageringel

Dependencies: #28566

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28591





---

archive/issue_comments_426247.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to interfaces: optional.",
    "created_at": "2019-10-11T00:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426247",
    "user": "https://github.com/mwageringel"
}
```

Changing component from PLEASE CHANGE to interfaces: optional.



---

archive/issue_comments_426248.json:
```json
{
    "body": "<a id='comment:1'></a>With this, we could add a method `resolution(algorithm=macaulay2)` to ideals.\n\n---\nNew commits:",
    "created_at": "2019-10-11T00:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426248",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>With this, we could add a method `resolution(algorithm=macaulay2)` to ideals.

---
New commits:



---

archive/issue_comments_426249.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-11T00:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426249",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426250.json:
```json
{
    "body": "<a id='comment:2'></a>you need to add the standard utf8 encoding line at the top of\n\nsrc/sage/interfaces/macaulay2.py\n\nnamely\n\n```\n# -*- coding: utf-8 -*-\n```",
    "created_at": "2019-10-11T19:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426250",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>you need to add the standard utf8 encoding line at the top of

src/sage/interfaces/macaulay2.py

namely

```
# -*- coding: utf-8 -*-
```



---

archive/issue_comments_426251.json:
```json
{
    "body": "<a id='comment:3'></a>and an optional tag is missing here:\n\n```\nsrc/sage/interfaces/macaulay2.py\", line 1554\n```",
    "created_at": "2019-10-14T14:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426251",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>and an optional tag is missing here:

```
src/sage/interfaces/macaulay2.py", line 1554
```



---

archive/issue_comments_426252.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-10-15T01:38:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426252",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_426253.json:
```json
{
    "body": "<a id='comment:5'></a>Thank you for catching that. It should be fixed now.",
    "created_at": "2019-10-15T01:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426253",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:5'></a>Thank you for catching that. It should be fixed now.



---

archive/issue_comments_426254.json:
```json
{
    "body": "<a id='comment:6'></a>ok, let it be",
    "created_at": "2019-10-15T19:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426254",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>ok, let it be



---

archive/issue_comments_426255.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-15T19:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426255",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426256.json:
```json
{
    "body": "<a id='comment:7'></a>Merge conflict",
    "created_at": "2019-10-15T22:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426256",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>Merge conflict



---

archive/issue_comments_426257.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-15T22:46:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426257",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_426258.json:
```json
{
    "body": "<a id='comment:8'></a>I guess this got to wait till next beta.",
    "created_at": "2019-10-15T23:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426258",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>I guess this got to wait till next beta.



---

archive/issue_comments_426259.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-22T08:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426259",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_426260.json:
```json
{
    "body": "<a id='comment:9'></a>rebased - it was conflicting with M2 Graphs interface\n\n---\nNew commits:",
    "created_at": "2019-10-22T08:25:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426260",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>rebased - it was conflicting with M2 Graphs interface

---
New commits:



---

archive/issue_comments_426261.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-22T17:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426261",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426262.json:
```json
{
    "body": "<a id='comment:11'></a>back to the bots",
    "created_at": "2019-10-22T17:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426262",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>back to the bots



---

archive/issue_comments_426263.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-22T17:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426263",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426264.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-26T22:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426264",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_426265.json:
```json
{
    "body": "<a id='comment:12'></a>The pdf docs don't build\n\n```\n[docpdf] ! Package inputenc Error: Unicode character \u27f5 (U+27F5)\n[docpdf] (inputenc)                not set up for use with LaTeX.\n[docpdf] \n[docpdf] See the inputenc package documentation for explanation.\n[docpdf] Type  H <return>  for immediate help.\n[docpdf]  ...                                              \n[docpdf]                                                   \n[docpdf] l.8925 ...}2 \u27f5\u2500\u2500\u2500 C\\PYGZus{}3 \u27f5\u2500\u2500 0}\n[docpdf]                                                   \n[docpdf] ? \n[docpdf] ! Emergency stop.\n```",
    "created_at": "2019-10-26T22:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426265",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>The pdf docs don't build

```
[docpdf] ! Package inputenc Error: Unicode character ⟵ (U+27F5)
[docpdf] (inputenc)                not set up for use with LaTeX.
[docpdf] 
[docpdf] See the inputenc package documentation for explanation.
[docpdf] Type  H <return>  for immediate help.
[docpdf]  ...                                              
[docpdf]                                                   
[docpdf] l.8925 ...}2 ⟵─── C\PYGZus{}3 ⟵── 0}
[docpdf]                                                   
[docpdf] ? 
[docpdf] ! Emergency stop.
```



---

archive/issue_comments_426266.json:
```json
{
    "body": "<a id='comment:13'></a>maybe use ascii_art instead for the moment ?",
    "created_at": "2019-10-27T07:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426266",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>maybe use ascii_art instead for the moment ?



---

archive/issue_comments_426267.json:
```json
{
    "body": "<a id='comment:14'></a>this looks like wrong `_` symbol...",
    "created_at": "2019-10-27T08:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426267",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>this looks like wrong `_` symbol...



---

archive/issue_comments_426268.json:
```json
{
    "body": "<a id='comment:15'></a>no, sorry, that's fine. Why not just add convesrion of U+27F5 the way it's done for several other UTF characters? (There is a place where these translations are set, but I can't recall where...)",
    "created_at": "2019-10-27T08:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426268",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>no, sorry, that's fine. Why not just add convesrion of U+27F5 the way it's done for several other UTF characters? (There is a place where these translations are set, but I can't recall where...)



---

archive/issue_comments_426269.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-27T18:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426269",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426270.json:
```json
{
    "body": "<a id='comment:17'></a>The correct place for that seems to be `src/sage/docs/conf.py`, but I am not sure what the correct latex code would be to make the arrows line up correctly. I switched to using `ascii_art` instead, as the use of unicode is not essential here. Now, both the pdf and html docs build, on my end.",
    "created_at": "2019-10-27T18:13:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426270",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:17'></a>The correct place for that seems to be `src/sage/docs/conf.py`, but I am not sure what the correct latex code would be to make the arrows line up correctly. I switched to using `ascii_art` instead, as the use of unicode is not essential here. Now, both the pdf and html docs build, on my end.



---

archive/issue_comments_426271.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-27T18:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426271",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_426272.json:
```json
{
    "body": "<a id='comment:19'></a>OK, this works (in  pdf docs too).",
    "created_at": "2019-10-27T21:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426272",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>OK, this works (in  pdf docs too).



---

archive/issue_comments_426273.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-27T21:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426273",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426274.json:
```json
{
    "body": "<a id='comment:20'></a>Thank you.",
    "created_at": "2019-10-27T21:37:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426274",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:20'></a>Thank you.



---

archive/issue_events_071860.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-28T23:51:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28591#event-71860"
}
```



---

archive/issue_comments_426275.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-28T23:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28591#issuecomment-426275",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
