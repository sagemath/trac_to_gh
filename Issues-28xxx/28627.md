# Issue 28627: Lazy OEIS sequences

archive/issues_028390.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nWe make the `OEISSequences` be (uniquely) defined as long as their ID (A-number) is known, and connect to the internet as late as possible.\n\n\nCC:  @fchapoton @mo271 @videlec @seblabbe\n\nComponent: **combinatorics**\n\nAuthor: **Thierry Monteil**\n\nBranch/Commit: **[`ecd06dd`](https://github.com/sagemath/sagetrac-mirror/commit/ecd06dd657ce0f97145af394fb2724565751f0fc)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28627_\n\n",
    "closed_at": "2019-11-30T13:36:34Z",
    "created_at": "2019-10-18T10:45:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Lazy OEIS sequences",
    "type": "issue",
    "updated_at": "2019-11-30T13:36:34Z",
    "url": "https://github.com/sagemath/sage/issues/28627",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
<div id="comment:0"></div>

We make the `OEISSequences` be (uniquely) defined as long as their ID (A-number) is known, and connect to the internet as late as possible.


CC:  @fchapoton @mo271 @videlec @seblabbe

Component: **combinatorics**

Author: **Thierry Monteil**

Branch/Commit: **[`ecd06dd`](https://github.com/sagemath/sagetrac-mirror/commit/ecd06dd657ce0f97145af394fb2724565751f0fc)**

Reviewer: **Sébastien Labbé**

_Issue created by migration from https://trac.sagemath.org/ticket/28627_





---

archive/issue_events_390190.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T10:45:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390190"
}
```



---

archive/issue_events_390191.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T10:45:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390191"
}
```



---

archive/issue_events_390192.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T10:45:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390192"
}
```



---

archive/issue_events_390193.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T10:45:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390193"
}
```



---

archive/issue_comments_446395.json:
```json
{
    "body": "Branch: **[u/tmonteil/lazy_oeis_sequences](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/lazy_oeis_sequences)**",
    "created_at": "2019-10-18T15:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446395",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Branch: **[u/tmonteil/lazy_oeis_sequences](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/lazy_oeis_sequences)**



---

archive/issue_events_390194.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T15:07:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390194"
}
```



---

archive/issue_comments_446396.json:
```json
{
    "body": "Commit: **[`446af98`](https://github.com/sagemath/sagetrac-mirror/commit/446af9801c51e8b9d20cd5176bad6d9d494e57ce)**",
    "created_at": "2019-10-18T15:07:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446396",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Commit: **[`446af98`](https://github.com/sagemath/sagetrac-mirror/commit/446af9801c51e8b9d20cd5176bad6d9d494e57ce)**



---

archive/issue_comments_446397.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13bc675cc70daea7c12054961295a05a77477ffc\"><code>13bc675</code></a></td><td><code>#28627 : lazy creation of OEIS sequences based only on their A-number</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/203f63ecc8ff52e2c0e45cd8fd76c27f8d2de19c\"><code>203f63e</code></a></td><td><code>#28627 : different imaginary sequences must have different A-numbers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ce1c0bdfa641e7e50c9689396f6eca7f4bb1d41\"><code>0ce1c0b</code></a></td><td><code>#28627 : dedicated handling of dead sequences</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afa283355917d1e09cc0d60663aa32d8f352928f\"><code>afa2833</code></a></td><td><code>#28627 : replace obsolete warning with a note</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/446af9801c51e8b9d20cd5176bad6d9d494e57ce\"><code>446af98</code></a></td><td><code>#28627 : examples are intended for humans</code></td></tr></table>\n",
    "created_at": "2019-10-18T15:07:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446397",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13bc675cc70daea7c12054961295a05a77477ffc"><code>13bc675</code></a></td><td><code>#28627 : lazy creation of OEIS sequences based only on their A-number</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/203f63ecc8ff52e2c0e45cd8fd76c27f8d2de19c"><code>203f63e</code></a></td><td><code>#28627 : different imaginary sequences must have different A-numbers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ce1c0bdfa641e7e50c9689396f6eca7f4bb1d41"><code>0ce1c0b</code></a></td><td><code>#28627 : dedicated handling of dead sequences</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afa283355917d1e09cc0d60663aa32d8f352928f"><code>afa2833</code></a></td><td><code>#28627 : replace obsolete warning with a note</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/446af9801c51e8b9d20cd5176bad6d9d494e57ce"><code>446af98</code></a></td><td><code>#28627 : examples are intended for humans</code></td></tr></table>




---

archive/issue_comments_446398.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI tried to cut the changes into meaningful commits, however the block\n\n```\n+        TESTS::\n+\n+        sage: s = oeis._imaginary_sequence(ident='A004238')\n+        sage: s\n+        A004238: The characteristic sequence of 42 plus one, starting from 38.\n+        sage: s.online_update()                         # optional -- internet\n+        sage: s                                         # optional -- internet\n+        A004238: a(n) = 100*log(n) rounded to nearest integer.\n```\n\nshould appear in the second commit, not the first, since at this stage `ident` parameter is not defined for imaginary sequences.\n\nYou should test the whole branch, the commits are made to ease human review.",
    "created_at": "2019-10-18T15:19:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446398",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:3" align="right">comment:3</div>

I tried to cut the changes into meaningful commits, however the block

```
+        TESTS::
+
+        sage: s = oeis._imaginary_sequence(ident='A004238')
+        sage: s
+        A004238: The characteristic sequence of 42 plus one, starting from 38.
+        sage: s.online_update()                         # optional -- internet
+        sage: s                                         # optional -- internet
+        A004238: a(n) = 100*log(n) rounded to nearest integer.
```

should appear in the second commit, not the first, since at this stage `ident` parameter is not defined for imaginary sequences.

You should test the whole branch, the commits are made to ease human review.



---

archive/issue_comments_446399.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nPatchbot complains about doctest coverage regression.",
    "created_at": "2019-10-18T17:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446399",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:4" align="right">comment:4</div>

Patchbot complains about doctest coverage regression.



---

archive/issue_events_390195.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T17:08:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390195"
}
```



---

archive/issue_events_390196.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T17:08:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390196"
}
```



---

archive/issue_comments_446400.json:
```json
{
    "body": "Changed commit from **[`446af98`](https://github.com/sagemath/sagetrac-mirror/commit/446af9801c51e8b9d20cd5176bad6d9d494e57ce)** to **[`ecd06dd`](https://github.com/sagemath/sagetrac-mirror/commit/ecd06dd657ce0f97145af394fb2724565751f0fc)**",
    "created_at": "2019-10-18T17:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446400",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`446af98`](https://github.com/sagemath/sagetrac-mirror/commit/446af9801c51e8b9d20cd5176bad6d9d494e57ce)** to **[`ecd06dd`](https://github.com/sagemath/sagetrac-mirror/commit/ecd06dd657ce0f97145af394fb2724565751f0fc)**



---

archive/issue_comments_446401.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecd06dd657ce0f97145af394fb2724565751f0fc\"><code>ecd06dd</code></a></td><td><code>#28627 : fix coverage regression</code></td></tr></table>\n",
    "created_at": "2019-10-18T17:33:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446401",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecd06dd657ce0f97145af394fb2724565751f0fc"><code>ecd06dd</code></a></td><td><code>#28627 : fix coverage regression</code></td></tr></table>




---

archive/issue_events_390197.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T17:34:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390197"
}
```



---

archive/issue_events_390198.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2019-10-18T17:34:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390198"
}
```



---

archive/issue_comments_446402.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIf some of the people who already handled oeis code could have a look, it will allow to move forward.",
    "created_at": "2019-11-24T12:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446402",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:7" align="right">comment:7</div>

If some of the people who already handled oeis code could have a look, it will allow to move forward.



---

archive/issue_events_390199.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2019-11-27T15:37:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390199"
}
```



---

archive/issue_events_390200.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2019-11-27T15:37:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390200"
}
```



---

archive/issue_comments_446403.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWorks for me. All tests passed related to oeis.",
    "created_at": "2019-11-27T15:37:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446403",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:8" align="right">comment:8</div>

Works for me. All tests passed related to oeis.



---

archive/issue_comments_446404.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2019-11-27T15:37:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446404",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_446405.json:
```json
{
    "body": "Changed branch from **[u/tmonteil/lazy_oeis_sequences](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/lazy_oeis_sequences)** to **[`ecd06dd`](https://github.com/sagemath/sagetrac-mirror/commit/ecd06dd657ce0f97145af394fb2724565751f0fc)**",
    "created_at": "2019-11-30T13:36:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28627#issuecomment-446405",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tmonteil/lazy_oeis_sequences](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/lazy_oeis_sequences)** to **[`ecd06dd`](https://github.com/sagemath/sagetrac-mirror/commit/ecd06dd657ce0f97145af394fb2724565751f0fc)**



---

archive/issue_events_390201.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-30T13:36:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390201"
}
```



---

archive/issue_events_390202.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9ba0c1affb8405caff2055970dbb6ce2ad1ac129",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-11-30T13:36:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28627",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28627#event-390202"
}
```
