# Issue 28883: update pkgconfig to version 1.5.1

archive/issues_028646.json:
```json
{
    "assignees": [],
    "body": "the current version is buggy, as we found out on #27870\n\nalso, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really \"orig\") tarball on\n\nhttp://deb.debian.org/debian/pool/main/p/python-pkgconfig/\n\nCf. https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master\n\nThe pypi tarball has setup.py, so we can just use it.\ntarball: https://files.pythonhosted.org/packages/6e/a9/ff67ef67217dfdf2aca847685fe789f82b931a6957a3deac861297585db6/pkgconfig-1.5.1.tar.gz\n\n\n\nCC:  @kiwifb @embray @tobihan @infinity0 @isuruf @mkoeppe\n\nBranch: **[fb8f4e5](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)**\n\nReviewer: **Isuru Fernando, Erik Bray, Matthias Koeppe**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28883_\n\n",
    "closed_at": "2020-01-05T15:47:35Z",
    "created_at": "2019-12-14T02:26:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update pkgconfig to version 1.5.1",
    "type": "issue",
    "updated_at": "2020-06-12T09:03:16Z",
    "url": "https://github.com/sagemath/sage/issues/28883",
    "user": "https://github.com/dimpase"
}
```
the current version is buggy, as we found out on #27870

also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really "orig") tarball on

http://deb.debian.org/debian/pool/main/p/python-pkgconfig/

Cf. https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master

The pypi tarball has setup.py, so we can just use it.
tarball: https://files.pythonhosted.org/packages/6e/a9/ff67ef67217dfdf2aca847685fe789f82b931a6957a3deac861297585db6/pkgconfig-1.5.1.tar.gz



CC:  @kiwifb @embray @tobihan @infinity0 @isuruf @mkoeppe

Branch: **[fb8f4e5](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)**

Reviewer: **Isuru Fernando, Erik Bray, Matthias Koeppe**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/28883_





---

archive/issue_events_378539.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T02:26:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378539"
}
```



---

archive/issue_events_378540.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T02:26:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378540"
}
```



---

archive/issue_events_378541.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T02:26:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378541"
}
```



---

archive/issue_events_378542.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T02:26:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378542"
}
```



---

archive/issue_comments_453704.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n the current version is buggy, as we found out on #27870\n+\n+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we need poetry installed too.\n``````\n",
    "created_at": "2019-12-14T08:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453704",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 the current version is buggy, as we found out on #27870
+
+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we need poetry installed too.
``````




---

archive/issue_comments_453705.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI found adding `setup.py` into the \"orig\" tarball rather than into debian/patches rather unusual.",
    "created_at": "2019-12-14T09:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453705",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">Comment 2</div>

I found adding `setup.py` into the "orig" tarball rather than into debian/patches rather unusual.



---

archive/issue_comments_453706.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n the current version is buggy, as we found out on #27870\n \n-also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we need poetry installed too.\n+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really \"orig\") tarball:\n+\n+http://deb.debian.org/debian/pool/main/p/python-pkgconfig/python-pkgconfig_1.5.1.orig.tar.gz\n+\n+as can be seen on https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master\n``````\n",
    "created_at": "2019-12-14T09:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453706",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 the current version is buggy, as we found out on #27870
 
-also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we need poetry installed too.
+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really "orig") tarball:
+
+http://deb.debian.org/debian/pool/main/p/python-pkgconfig/python-pkgconfig_1.5.1.orig.tar.gz
+
+as can be seen on https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master
``````




---

archive/issue_comments_453707.json:
```json
{
    "body": "Commit: **[e5c91db](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)**",
    "created_at": "2019-12-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453707",
    "user": "https://github.com/dimpase"
}
```

Commit: **[e5c91db](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)**



---

archive/issue_comments_453708.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2019-12-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453708",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_453709.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)**",
    "created_at": "2019-12-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453709",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)**



---

archive/issue_comments_453710.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,12 @@\n the current version is buggy, as we found out on #27870\n \n-also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really \"orig\") tarball:\n+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really \"orig\") tarball on\n \n-http://deb.debian.org/debian/pool/main/p/python-pkgconfig/python-pkgconfig_1.5.1.orig.tar.gz\n+http://deb.debian.org/debian/pool/main/p/python-pkgconfig/\n \n-as can be seen on https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master\n+Cf. https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master\n+\n+The pypi tarball has setup.py, so we can just use it.\n+tarball: https://files.pythonhosted.org/packages/6e/a9/ff67ef67217dfdf2aca847685fe789f82b931a6957a3deac861297585db6/pkgconfig-1.5.1.tar.gz\n+\n+\n``````\n",
    "created_at": "2019-12-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453710",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,12 @@
 the current version is buggy, as we found out on #27870
 
-also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really "orig") tarball:
+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really "orig") tarball on
 
-http://deb.debian.org/debian/pool/main/p/python-pkgconfig/python-pkgconfig_1.5.1.orig.tar.gz
+http://deb.debian.org/debian/pool/main/p/python-pkgconfig/
 
-as can be seen on https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master
+Cf. https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master
+
+The pypi tarball has setup.py, so we can just use it.
+tarball: https://files.pythonhosted.org/packages/6e/a9/ff67ef67217dfdf2aca847685fe789f82b931a6957a3deac861297585db6/pkgconfig-1.5.1.tar.gz
+
+
``````




---

archive/issue_comments_453711.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nThat `poetry` stuff is really a replacement for `pip`. And from where I see it, it can only fully replace superficially simple `setup.py` files. And it probably can generate such simple `setup.py` file, although I cannot see that in the Readme. And to be able to do what it does, it must be able to process complicated `setup.py` just fine, since it will install stuff that was never prepared for poetry if I am not mistaken.\n\nAnyway that's outside of the scope of the ticket. But one more of this things to potentially deal with :(",
    "created_at": "2019-12-14T09:56:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453711",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">Comment 4</div>

That `poetry` stuff is really a replacement for `pip`. And from where I see it, it can only fully replace superficially simple `setup.py` files. And it probably can generate such simple `setup.py` file, although I cannot see that in the Readme. And to be able to do what it does, it must be able to process complicated `setup.py` just fine, since it will install stuff that was never prepared for poetry if I am not mistaken.

Anyway that's outside of the scope of the ticket. But one more of this things to potentially deal with :(



---

archive/issue_events_378543.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T10:59:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378543"
}
```



---

archive/issue_comments_453712.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nI guess poetry generates setup.py files as a part of its pypi deployment feature.",
    "created_at": "2019-12-14T10:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453712",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">Comment 5</div>

I guess poetry generates setup.py files as a part of its pypi deployment feature.



---

archive/issue_comments_453713.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\n[ A stupidity. Sorry for the noise ... ]",
    "created_at": "2019-12-14T16:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453713",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:6" align="right">Comment 6</div>

[ A stupidity. Sorry for the noise ... ]



---

archive/issue_comments_453714.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A6):\n> [ A stupidity. Sorry for the noise ... ]\n\n[ After re-checking the setup... ] This doesn't seem to be effective. I still get the systemwide pkg-config:\n\n```\ncharpent@zen-book-flip:/usr/local/sage-9$ git status\nSur la branche t/28883/packages/pkgconfig151\nVotre branche est \u00e0 jour avec 'trac/u/dimpase/packages/pkgconfig151'.\n\nrien \u00e0 valider, la copie de travail est propre\ncharpent@zen-book-flip:/usr/local/sage-9$ ./sage -sh\n\nStarting subshell with Sage environment variables set.  Don't forget\nto exit when you are done.  Beware:\n * Do not do anything with other copies of Sage on your system.\n * Do not use this for installing Sage packages using \"sage -i\" or for\n   running \"make\" at Sage's root directory.  These should be done\n   outside the Sage shell.\n\nBypassing shell configuration files...\n\nNote: SAGE_ROOT=/usr/local/sage-9\n(sage-sh) charpent@zen-book-flip:sage-9$ command -v pkg-config\n/usr/bin/pkg-config\n(sage-sh) charpent@zen-book-flip:sage-9$ pkg-config --version\n0.29\n(sage-sh) charpent@zen-book-flip:sage-9$ exit\nexit\nExited Sage subshell.\n```",
    "created_at": "2019-12-14T16:27:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453714",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:7" align="right">Comment 7</div>

Replying to [@EmmanuelCharpentier](#comment%3A6):
> [ A stupidity. Sorry for the noise ... ]

[ After re-checking the setup... ] This doesn't seem to be effective. I still get the systemwide pkg-config:

```
charpent@zen-book-flip:/usr/local/sage-9$ git status
Sur la branche t/28883/packages/pkgconfig151
Votre branche est à jour avec 'trac/u/dimpase/packages/pkgconfig151'.

rien à valider, la copie de travail est propre
charpent@zen-book-flip:/usr/local/sage-9$ ./sage -sh

Starting subshell with Sage environment variables set.  Don't forget
to exit when you are done.  Beware:
 * Do not do anything with other copies of Sage on your system.
 * Do not use this for installing Sage packages using "sage -i" or for
   running "make" at Sage's root directory.  These should be done
   outside the Sage shell.

Bypassing shell configuration files...

Note: SAGE_ROOT=/usr/local/sage-9
(sage-sh) charpent@zen-book-flip:sage-9$ command -v pkg-config
/usr/bin/pkg-config
(sage-sh) charpent@zen-book-flip:sage-9$ pkg-config --version
0.29
(sage-sh) charpent@zen-book-flip:sage-9$ exit
exit
Exited Sage subshell.
```



---

archive/issue_comments_453715.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nthis is a Python interface to pkg-config.\nSo you need to `import pkgconfig` in Sage's Python to see it in action.",
    "created_at": "2019-12-14T16:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453715",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">Comment 8</div>

this is a Python interface to pkg-config.
So you need to `import pkgconfig` in Sage's Python to see it in action.



---

archive/issue_events_378544.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-15T01:18:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378544"
}
```



---

archive/issue_events_378545.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-15T01:18:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378545"
}
```



---

archive/issue_comments_453716.json:
```json
{
    "body": "Reviewer: **Isuru Fernando**",
    "created_at": "2019-12-15T01:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453716",
    "user": "https://github.com/isuruf"
}
```

Reviewer: **Isuru Fernando**



---

archive/issue_events_378546.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-15T11:45:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378546"
}
```



---

archive/issue_events_378547.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-15T11:45:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378547"
}
```



---

archive/issue_comments_453717.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)** to **[e5c91db](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)**",
    "created_at": "2019-12-17T22:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453717",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)** to **[e5c91db](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)**



---

archive/issue_events_378548.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-17T22:46:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378548"
}
```



---

archive/issue_events_378549.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-17T22:46:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378549"
}
```



---

archive/issue_comments_453718.json:
```json
{
    "body": "Changed commit from **[e5c91db](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)** to none",
    "created_at": "2019-12-21T11:56:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453718",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[e5c91db](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)** to none



---

archive/issue_comments_453719.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThis breaks on OSX:\n\n```\n[sagelib-9.0.beta9] Traceback (most recent call last):\n[sagelib-9.0.beta9]   File \"setup.py\", line 72, in <module>\n[sagelib-9.0.beta9]     from module_list import ext_modules, library_order\n[sagelib-9.0.beta9]   File \"/Users/buildbot-sage/slave/sage_git/build/src/module_list.py\", line 42, in <module>\n[sagelib-9.0.beta9]     zlib_pc = pkgconfig.parse('zlib')\n[sagelib-9.0.beta9]   File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py\", line 248, in parse\n[sagelib-9.0.beta9]     _raise_if_not_exists(package)\n[sagelib-9.0.beta9]   File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py\", line 103, in _raise_if_not_exists\n[sagelib-9.0.beta9]     raise PackageNotFoundError(package)\n[sagelib-9.0.beta9] pkgconfig.pkgconfig.PackageNotFoundError: zlib not found\n[sagelib-9.0.beta9] ************************************************************************\n[sagelib-9.0.beta9] Error building the Sage library\n[sagelib-9.0.beta9] ************************************************************************\n```",
    "created_at": "2019-12-21T11:56:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453719",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:13" align="right">Comment 13</div>

This breaks on OSX:

```
[sagelib-9.0.beta9] Traceback (most recent call last):
[sagelib-9.0.beta9]   File "setup.py", line 72, in <module>
[sagelib-9.0.beta9]     from module_list import ext_modules, library_order
[sagelib-9.0.beta9]   File "/Users/buildbot-sage/slave/sage_git/build/src/module_list.py", line 42, in <module>
[sagelib-9.0.beta9]     zlib_pc = pkgconfig.parse('zlib')
[sagelib-9.0.beta9]   File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py", line 248, in parse
[sagelib-9.0.beta9]     _raise_if_not_exists(package)
[sagelib-9.0.beta9]   File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py", line 103, in _raise_if_not_exists
[sagelib-9.0.beta9]     raise PackageNotFoundError(package)
[sagelib-9.0.beta9] pkgconfig.pkgconfig.PackageNotFoundError: zlib not found
[sagelib-9.0.beta9] ************************************************************************
[sagelib-9.0.beta9] Error building the Sage library
[sagelib-9.0.beta9] ************************************************************************
```



---

archive/issue_comments_453720.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nprobably buildbot had a workaround for the buggy package?",
    "created_at": "2019-12-21T13:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453720",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">Comment 14</div>

probably buildbot had a workaround for the buggy package?



---

archive/issue_comments_453721.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nisn't the !Sage/Python environment of that buildbot broken?\nOne should have\n\n```\nsage: import pkgconfig\nsage: pkgconfig.parse('zlib')\ndefaultdict(<class 'list'>, {'libraries': ['z']})\n```",
    "created_at": "2019-12-21T13:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453721",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">Comment 15</div>

isn't the !Sage/Python environment of that buildbot broken?
One should have

```
sage: import pkgconfig
sage: pkgconfig.parse('zlib')
defaultdict(<class 'list'>, {'libraries': ['z']})
```



---

archive/issue_comments_453722.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nIt works for me on OS X 10.15.2.",
    "created_at": "2019-12-21T20:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453722",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">Comment 16</div>

It works for me on OS X 10.15.2.



---

archive/issue_comments_453723.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nTurns out #27870 is the culprit...",
    "created_at": "2019-12-22T15:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453723",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">Comment 17</div>

Turns out #27870 is the culprit...



---

archive/issue_events_378550.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:17:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378550"
}
```



---

archive/issue_events_378551.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:17:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378551"
}
```



---

archive/issue_events_378552.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:17:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378552"
}
```



---

archive/issue_events_378553.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:18:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378553"
}
```



---

archive/issue_events_378554.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:18:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378554"
}
```



---

archive/issue_comments_453724.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nOh just noticed that this ticket is merged into #27870",
    "created_at": "2019-12-22T15:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453724",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">Comment 19</div>

Oh just noticed that this ticket is merged into #27870



---

archive/issue_comments_453725.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nTo me, it looks like a Python with broken zlib module. Nothing to do with pkgconfig.\n\nYes, it could also be that local/lib/pkgconfig/ contents are somehow broken and thus\nbreak Python's pkgconfig.\n\nWas it a build from scratch? If not, stale things in local/lib/pkgconfig/  may break stuff.",
    "created_at": "2019-12-22T15:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453725",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">Comment 20</div>

To me, it looks like a Python with broken zlib module. Nothing to do with pkgconfig.

Yes, it could also be that local/lib/pkgconfig/ contents are somehow broken and thus
break Python's pkgconfig.

Was it a build from scratch? If not, stale things in local/lib/pkgconfig/  may break stuff.



---

archive/issue_comments_453726.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nOn Catalina, there is no zlib in /usr/lib/pkgconfig and we don't build our own zlib with #27870.\n\n```\nbuildbot-sage@osx build % ./sage -sh -c 'pkgconf --cflags zlib'\n\nPackage zlib was not found in the pkg-config search path.\nPerhaps you should add the directory containing `zlib.pc'\nto the PKG_CONFIG_PATH environment variable\nPackage 'zlib', required by 'world', not found\n```\nAll builds from scratch.",
    "created_at": "2019-12-22T15:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453726",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">Comment 21</div>

On Catalina, there is no zlib in /usr/lib/pkgconfig and we don't build our own zlib with #27870.

```
buildbot-sage@osx build % ./sage -sh -c 'pkgconf --cflags zlib'

Package zlib was not found in the pkg-config search path.
Perhaps you should add the directory containing `zlib.pc'
to the PKG_CONFIG_PATH environment variable
Package 'zlib', required by 'world', not found
```
All builds from scratch.



---

archive/issue_comments_453727.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nThe version bump here should be ok, its #27870 that is borked",
    "created_at": "2019-12-22T15:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453727",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:22" align="right">Comment 22</div>

The version bump here should be ok, its #27870 that is borked



---

archive/issue_events_378555.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:39:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378555"
}
```



---

archive/issue_events_378556.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:39:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378556"
}
```



---

archive/issue_comments_453728.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nNo, #27870 is fine.\n\nwhat's \"borked\" is that the new pkgconfig v1.5.1 throws an error if there is no `.pc` file. E.g. on this branch one sees\n\n```\nsage: import pkgconfig\nsage: pkgconfig.parse(\"uhohoh\")\n---------------------------------------------------------------------------\nPackageNotFoundError                      Traceback (most recent call last)\n<ipython-input-2-d927c49e8798> in <module>()\n----> 1 pkgconfig.parse(\"uhohoh\")\n\n/home/dimpase/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py in parse(packages, static)\n    246     \"\"\"\n    247     for package in packages.split():\n--> 248         _raise_if_not_exists(package)\n    249 \n    250     out = _query(packages, *_build_options('--cflags --libs', static=static))\n\n/home/dimpase/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py in _raise_if_not_exists(package)\n    101 def _raise_if_not_exists(package):\n    102     if not exists(package):\n--> 103         raise PackageNotFoundError(package)\n    104 \n    105 \n\nPackageNotFoundError: uhohoh not found\nsage: \n```\n\nbut the previous version merrily returns some stuff:\n\n```\nsage: pkgconfig.parse(\"uhohoh\")\ndefaultdict(<type 'list'>, {'define_macros': []})\n```\n\nAll the systems this was tested apparently had `zlib.pc` somewhere, and so it worked.\nYour box does not have it, and so an error is thrown.\n\nOK, would it be easier if this is fixed (trivially) on a followup ticket rather than here?",
    "created_at": "2019-12-22T15:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453728",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">Comment 23</div>

No, #27870 is fine.

what's "borked" is that the new pkgconfig v1.5.1 throws an error if there is no `.pc` file. E.g. on this branch one sees

```
sage: import pkgconfig
sage: pkgconfig.parse("uhohoh")
---------------------------------------------------------------------------
PackageNotFoundError                      Traceback (most recent call last)
<ipython-input-2-d927c49e8798> in <module>()
----> 1 pkgconfig.parse("uhohoh")

/home/dimpase/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py in parse(packages, static)
    246     """
    247     for package in packages.split():
--> 248         _raise_if_not_exists(package)
    249 
    250     out = _query(packages, *_build_options('--cflags --libs', static=static))

/home/dimpase/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py in _raise_if_not_exists(package)
    101 def _raise_if_not_exists(package):
    102     if not exists(package):
--> 103         raise PackageNotFoundError(package)
    104 
    105 

PackageNotFoundError: uhohoh not found
sage: 
```

but the previous version merrily returns some stuff:

```
sage: pkgconfig.parse("uhohoh")
defaultdict(<type 'list'>, {'define_macros': []})
```

All the systems this was tested apparently had `zlib.pc` somewhere, and so it worked.
Your box does not have it, and so an error is thrown.

OK, would it be easier if this is fixed (trivially) on a followup ticket rather than here?



---

archive/issue_comments_453729.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nFeel free to fix it here since there are already a number of tickets that depend on this one that can't be merged until the issue is resolved",
    "created_at": "2019-12-22T16:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453729",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:24" align="right">Comment 24</div>

Feel free to fix it here since there are already a number of tickets that depend on this one that can't be merged until the issue is resolved



---

archive/issue_events_378557.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T16:00:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378557"
}
```



---

archive/issue_events_378558.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T16:00:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378558"
}
```



---

archive/issue_comments_453730.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nimho the zlib spkg-configure.m4 should just ensure that a zlib.pc file can be found (i.e. use PKG_CHECK_MODULES)",
    "created_at": "2019-12-22T16:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453730",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:25" align="right">Comment 25</div>

imho the zlib spkg-configure.m4 should just ensure that a zlib.pc file can be found (i.e. use PKG_CHECK_MODULES)



---

archive/issue_comments_453731.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nThe whole thing about assuming that `zlib.pc` exists was iffy since #26286 - that's basically where the bug has slipped in. \n\nIt \"worked\" as the absense of `zlib.pc` was ignored by old Python's `pkgconfig`. \n\nThere is no actual need to insist on `zlib.pc` present, as Apple's implementation of zlib is good enough to be used.",
    "created_at": "2019-12-22T16:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453731",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">Comment 26</div>

The whole thing about assuming that `zlib.pc` exists was iffy since #26286 - that's basically where the bug has slipped in. 

It "worked" as the absense of `zlib.pc` was ignored by old Python's `pkgconfig`. 

There is no actual need to insist on `zlib.pc` present, as Apple's implementation of zlib is good enough to be used.



---

archive/issue_comments_453732.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nIndeed its never actually necessary to have .pc files you can always kludge it by hand and fudge cflags/libs on all supported platforms. Its just not a sane/maintainable/scalable system of working with shared libraries.\n\nIf you want to save OSX users from having to build zlib then we should just provide an appropriate zlib.pc on that particular snowflake of a platform.",
    "created_at": "2019-12-22T16:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453732",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:27" align="right">Comment 27</div>

Indeed its never actually necessary to have .pc files you can always kludge it by hand and fudge cflags/libs on all supported platforms. Its just not a sane/maintainable/scalable system of working with shared libraries.

If you want to save OSX users from having to build zlib then we should just provide an appropriate zlib.pc on that particular snowflake of a platform.



---

archive/issue_comments_453733.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nI'll provide workaround here, and properly deal with generation on `zlib.pc` on #28906.\n\nFor the problem at hand it'd suffice just to avoid an expection, and fake the output of\n`pkgconfig.parse()` if need be.",
    "created_at": "2019-12-22T16:53:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453733",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">Comment 28</div>

I'll provide workaround here, and properly deal with generation on `zlib.pc` on #28906.

For the problem at hand it'd suffice just to avoid an expection, and fake the output of
`pkgconfig.parse()` if need be.



---

archive/issue_events_378559.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-22T17:09:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378559"
}
```



---

archive/issue_events_378560.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-22T17:09:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378560"
}
```



---

archive/issue_comments_453734.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nThis should fix the OSX issue, IMHO (can't test on OSX, though)",
    "created_at": "2019-12-22T17:09:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453734",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">Comment 29</div>

This should fix the OSX issue, IMHO (can't test on OSX, though)



---

archive/issue_comments_453735.json:
```json
{
    "body": "Changed branch from **[e5c91db](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)** to none",
    "created_at": "2019-12-22T17:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453735",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[e5c91db](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)** to none



---

archive/issue_comments_453736.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nOh blast, need to rename this branch...",
    "created_at": "2019-12-22T17:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453736",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">Comment 30</div>

Oh blast, need to rename this branch...



---

archive/issue_comments_453737.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d\">e5c91db</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8\">9d33b71</a></td><td><code>allow absent zlib.pc</code></td></tr></table>\n",
    "created_at": "2019-12-22T17:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453737",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">Comment 31</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d">e5c91db</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8">9d33b71</a></td><td><code>allow absent zlib.pc</code></td></tr></table>




---

archive/issue_comments_453738.json:
```json
{
    "body": "Commit: **[9d33b71](https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8)**",
    "created_at": "2019-12-22T17:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453738",
    "user": "https://github.com/dimpase"
}
```

Commit: **[9d33b71](https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8)**



---

archive/issue_comments_453739.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)**",
    "created_at": "2019-12-22T17:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453739",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)**



---

archive/issue_comments_453740.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\npotentially, there could also be a problem with libpng.pc, for which ./configure does not check for/does not insist on its presense. But it comes before zlib.pc is tested, so that's apparently not blocking. I'll change #28906 to deal with these too.",
    "created_at": "2019-12-23T04:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453740",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">Comment 32</div>

potentially, there could also be a problem with libpng.pc, for which ./configure does not check for/does not insist on its presense. But it comes before zlib.pc is tested, so that's apparently not blocking. I'll change #28906 to deal with these too.



---

archive/issue_events_378561.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-23T11:39:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378561"
}
```



---

archive/issue_events_378562.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-23T11:39:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378562"
}
```



---

archive/issue_comments_453741.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nThat should be `pkgconfig.PackageNotFoundError`, otherwise you'll just get a `NameError` raised during exception handling.  Please fix that and rebase to squash the fix.",
    "created_at": "2019-12-23T11:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453741",
    "user": "https://github.com/embray"
}
```

<div id="comment:33" align="right">Comment 33</div>

That should be `pkgconfig.PackageNotFoundError`, otherwise you'll just get a `NameError` raised during exception handling.  Please fix that and rebase to squash the fix.



---

archive/issue_comments_453742.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nI'm a little confused here. On OS X, when I run the command in [comment:21](#comment%3A21) (`./sage -sh -c 'pkgconf --cflags zlib'`), I get the same output as given there, but the build succeeds for me. Why does it fail on some OS X systems and succeed on others? (It worked for me with the current branch but also the earlier one.)",
    "created_at": "2019-12-23T19:10:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453742",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">Comment 34</div>

I'm a little confused here. On OS X, when I run the command in [comment:21](#comment%3A21) (`./sage -sh -c 'pkgconf --cflags zlib'`), I get the same output as given there, but the build succeeds for me. Why does it fail on some OS X systems and succeed on others? (It worked for me with the current branch but also the earlier one.)



---

archive/issue_comments_453743.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nReplying to [@jhpalmieri](#comment%3A34):\n> I'm a little confused here. On OS X, when I run the command in [comment:21](#comment%3A21) (`./sage -sh -c 'pkgconf --cflags zlib'`), I get the same output as given there, but the build succeeds for me. Why does it fail on some OS X systems and succeed on others? (It worked for me with the current branch but also the earlier one.)\n\nHow about the commands in [comment:15](#comment%3A15) ?\n\n```\nsage: import pkgconfig\nsage: pkgconfig.parse('zlib')\n```",
    "created_at": "2019-12-24T02:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453743",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">Comment 35</div>

Replying to [@jhpalmieri](#comment%3A34):
> I'm a little confused here. On OS X, when I run the command in [comment:21](#comment%3A21) (`./sage -sh -c 'pkgconf --cflags zlib'`), I get the same output as given there, but the build succeeds for me. Why does it fail on some OS X systems and succeed on others? (It worked for me with the current branch but also the earlier one.)

How about the commands in [comment:15](#comment%3A15) ?

```
sage: import pkgconfig
sage: pkgconfig.parse('zlib')
```



---

archive/issue_comments_453744.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nWith the current branch:\n\n```\nsage:  import pkgconfig\nsage: pkgconfig.parse('zlib')\ndefaultdict(<class 'list'>, {'libraries': ['z']})\n```",
    "created_at": "2019-12-24T02:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453744",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">Comment 36</div>

With the current branch:

```
sage:  import pkgconfig
sage: pkgconfig.parse('zlib')
defaultdict(<class 'list'>, {'libraries': ['z']})
```



---

archive/issue_comments_453745.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nFrom reading https://github.com/matze/pkgconfig/blob/master/pkgconfig/pkgconfig.py\nit could happen that you have environment variable PKG_CONFIG defined, and its value will be used instead of `pkg-config` in your PATH.\n\nhttps://github.com/matze/pkgconfig/blob/a7108a65625a529dc1cf1b4779d23e5701f202dc/pkgconfig/pkgconfig.py#L108",
    "created_at": "2019-12-24T02:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453745",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">Comment 37</div>

From reading https://github.com/matze/pkgconfig/blob/master/pkgconfig/pkgconfig.py
it could happen that you have environment variable PKG_CONFIG defined, and its value will be used instead of `pkg-config` in your PATH.

https://github.com/matze/pkgconfig/blob/a7108a65625a529dc1cf1b4779d23e5701f202dc/pkgconfig/pkgconfig.py#L108



---

archive/issue_comments_453746.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nWhen I run Sage, it defines the environment variable\n\n```\nPKG_CONFIG_PATH=.../path/to/SAGE_ROOT/local/lib/pkgconfig\n```\nbut I don't have anything similar set myself. `export | grep PKG` returns nothing.",
    "created_at": "2019-12-24T03:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453746",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:38" align="right">Comment 38</div>

When I run Sage, it defines the environment variable

```
PKG_CONFIG_PATH=.../path/to/SAGE_ROOT/local/lib/pkgconfig
```
but I don't have anything similar set myself. `export | grep PKG` returns nothing.



---

archive/issue_comments_453747.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nIs the output of \n\n```\nsage: import os\nsage: os.system(\"which pkg-config\")\n```\nthe same as of `which pkg-config` at `./sage -sh` prompt?\n\nAs well, please compare the value of env. var. `PKG_CONFIG_PATH` at the latter prompt with the output of \n\n```\nsage: os.environ.get('PKG_CONFIG_PATH', None)\n```",
    "created_at": "2019-12-24T03:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453747",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">Comment 39</div>

Is the output of 

```
sage: import os
sage: os.system("which pkg-config")
```
the same as of `which pkg-config` at `./sage -sh` prompt?

As well, please compare the value of env. var. `PKG_CONFIG_PATH` at the latter prompt with the output of 

```
sage: os.environ.get('PKG_CONFIG_PATH', None)
```



---

archive/issue_comments_453748.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\n`which pkg-config` points to the homebrew installation, `/usr/local/bin/pkg-config` in both invocations.\n\n```\nsage: os.environ.get('PKG_CONFIG_PATH', None)\n'/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/pkgconfig'\nsage: sage.env.var('PKG_CONFIG_PATH')\nsage:\n```\nand after running `sage --sh`:\n\n```\n$ echo $PKG_CONFIG_PATH\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/pkgconfig\n```\n('/Users/palmieri/Desktop/Sage_stuff/git/sage/` is SAGE_ROOT.)",
    "created_at": "2019-12-24T04:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453748",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:40" align="right">Comment 40</div>

`which pkg-config` points to the homebrew installation, `/usr/local/bin/pkg-config` in both invocations.

```
sage: os.environ.get('PKG_CONFIG_PATH', None)
'/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/pkgconfig'
sage: sage.env.var('PKG_CONFIG_PATH')
sage:
```
and after running `sage --sh`:

```
$ echo $PKG_CONFIG_PATH
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/pkgconfig
```
('/Users/palmieri/Desktop/Sage_stuff/git/sage/` is SAGE_ROOT.)



---

archive/issue_comments_453749.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nSo maybe it's the presence of the homebrew `pkg-config` that makes this system behave differently from Volker's buildbot.",
    "created_at": "2019-12-24T04:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453749",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">Comment 41</div>

So maybe it's the presence of the homebrew `pkg-config` that makes this system behave differently from Volker's buildbot.



---

archive/issue_comments_453750.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nYou probably have zlib installed from homebrew.\n\nWhat do you get with `pkg-config zlib --variable pcfiledir` ?",
    "created_at": "2019-12-24T04:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453750",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:42" align="right">Comment 42</div>

You probably have zlib installed from homebrew.

What do you get with `pkg-config zlib --variable pcfiledir` ?



---

archive/issue_comments_453751.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nSage's Python has to dig up `zlib.pc` to read by `pkgconfig.parse()`, from somewhere.\n\nBy the way, I don't understand  `pkgconf` in `./sage -sh -c 'pkgconf --cflags zlib` ???\n\nit should be `pkg-config` \n\nI guess `pkgconf` is some \"unofficial\" name for `pkg-config`, used by Sage's `pkgconf` package, which installs `pkg-config`.",
    "created_at": "2019-12-24T04:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453751",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">Comment 43</div>

Sage's Python has to dig up `zlib.pc` to read by `pkgconfig.parse()`, from somewhere.

By the way, I don't understand  `pkgconf` in `./sage -sh -c 'pkgconf --cflags zlib` ???

it should be `pkg-config` 

I guess `pkgconf` is some "unofficial" name for `pkg-config`, used by Sage's `pkgconf` package, which installs `pkg-config`.



---

archive/issue_comments_453752.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\n`pkgconf` and `pkg-config` are two different programs both of which does the same thing. `pkgconf` has a `pkg-config` symlink as well. (Think of `pkgconf` as MPIR built with GMP compat and `pkg-config` as GMP.)",
    "created_at": "2019-12-24T04:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453752",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:44" align="right">Comment 44</div>

`pkgconf` and `pkg-config` are two different programs both of which does the same thing. `pkgconf` has a `pkg-config` symlink as well. (Think of `pkgconf` as MPIR built with GMP compat and `pkg-config` as GMP.)



---

archive/issue_comments_453753.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nSo you were confused by Volker's `pkgconf` invocation --- sorry, I should have noticed it earlier. I bet `./sage -sh -c 'pkg-config --libs zlib` has meaningful output with `-lz` in it.",
    "created_at": "2019-12-24T04:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453753",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">Comment 45</div>

So you were confused by Volker's `pkgconf` invocation --- sorry, I should have noticed it earlier. I bet `./sage -sh -c 'pkg-config --libs zlib` has meaningful output with `-lz` in it.



---

archive/issue_comments_453754.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nReplying to [@isuruf](#comment%3A42):\n> You probably have zlib installed from homebrew.\n> \n> What do you get with `pkg-config zlib --variable pcfiledir` ?\n\n`/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/10.15`. Also\n\n```\n$ ./sage -sh -c 'pkg-config --libs zlib'\n-lz\n```",
    "created_at": "2019-12-24T04:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453754",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:46" align="right">Comment 46</div>

Replying to [@isuruf](#comment%3A42):
> You probably have zlib installed from homebrew.
> 
> What do you get with `pkg-config zlib --variable pcfiledir` ?

`/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/10.15`. Also

```
$ ./sage -sh -c 'pkg-config --libs zlib'
-lz
```



---

archive/issue_comments_453755.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nWhat does `pkg-config zlib --variable libdir` give you?",
    "created_at": "2019-12-24T04:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453755",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:47" align="right">Comment 47</div>

What does `pkg-config zlib --variable libdir` give you?



---

archive/issue_comments_453756.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nReplying to [@jhpalmieri](#comment%3A46):\n> Replying to [@isuruf](#comment%3A42):\n> > You probably have zlib installed from homebrew.\n> > \n> > What do you get with `pkg-config zlib --variable pcfiledir` ?\n\n> \n> `/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/10.15`. Also\n> \n> ```\n> $ ./sage -sh -c 'pkg-config --libs zlib'\n> -lz\n> ```\n\nso it appears that you use zlib provided by Homebrew, which does supply zlib.pc, so everything works as it should. (I don't know whether they install a real zlib, or just provide zlib.pc pointing to the MacOS native one, probably the former)",
    "created_at": "2019-12-24T04:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453756",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">Comment 48</div>

Replying to [@jhpalmieri](#comment%3A46):
> Replying to [@isuruf](#comment%3A42):
> > You probably have zlib installed from homebrew.
> > 
> > What do you get with `pkg-config zlib --variable pcfiledir` ?

> 
> `/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/10.15`. Also
> 
> ```
> $ ./sage -sh -c 'pkg-config --libs zlib'
> -lz
> ```

so it appears that you use zlib provided by Homebrew, which does supply zlib.pc, so everything works as it should. (I don't know whether they install a real zlib, or just provide zlib.pc pointing to the MacOS native one, probably the former)



---

archive/issue_comments_453757.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nReplying to [@isuruf](#comment%3A47):\n> What does `pkg-config zlib --variable libdir` give you?\n\n`/usr/lib`",
    "created_at": "2019-12-24T05:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453757",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:49" align="right">Comment 49</div>

Replying to [@isuruf](#comment%3A47):
> What does `pkg-config zlib --variable libdir` give you?

`/usr/lib`



---

archive/issue_comments_453758.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nFor information on PEP517 and the whole `poetry` business of packaging https://blogs.gentoo.org/mgorny/2019/12/24/handling-pep-517-pyproject-toml-packages-in-gentoo/",
    "created_at": "2019-12-25T20:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453758",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:50" align="right">Comment 50</div>

For information on PEP517 and the whole `poetry` business of packaging https://blogs.gentoo.org/mgorny/2019/12/24/handling-pep-517-pyproject-toml-packages-in-gentoo/



---

archive/issue_comments_453759.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea\">809abd9</a></td><td><code>added missing module name</code></td></tr></table>\n",
    "created_at": "2019-12-27T02:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453759",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51" align="right">Comment 51</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea">809abd9</a></td><td><code>added missing module name</code></td></tr></table>




---

archive/issue_comments_453760.json:
```json
{
    "body": "Changed commit from **[9d33b71](https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8)** to **[809abd9](https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea)**",
    "created_at": "2019-12-27T02:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453760",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9d33b71](https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8)** to **[809abd9](https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea)**



---

archive/issue_comments_453761.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f74f5545d2a931f37247185de292689dd9800d35\">f74f554</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e\">fb8f4e5</a></td><td><code>allow absent zlib.pc</code></td></tr></table>\n",
    "created_at": "2019-12-27T02:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453761",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52" align="right">Comment 52</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f74f5545d2a931f37247185de292689dd9800d35">f74f554</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e">fb8f4e5</a></td><td><code>allow absent zlib.pc</code></td></tr></table>




---

archive/issue_comments_453762.json:
```json
{
    "body": "Changed commit from **[809abd9](https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea)** to **[fb8f4e5](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)**",
    "created_at": "2019-12-27T02:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453762",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[809abd9](https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea)** to **[fb8f4e5](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)**



---

archive/issue_comments_453763.json:
```json
{
    "body": "Changed reviewer from **Isuru Fernando** to **Isuru Fernando, Erik Bray**",
    "created_at": "2019-12-27T02:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453763",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Isuru Fernando** to **Isuru Fernando, Erik Bray**



---

archive/issue_events_378563.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-27T02:41:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378563"
}
```



---

archive/issue_events_378564.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-27T02:41:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378564"
}
```



---

archive/issue_comments_453764.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nI've tried #28906 but it is ugly as hell, so not sure whether it should be getting in. So this is the minimal (rebased) fix.",
    "created_at": "2019-12-27T02:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453764",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:53" align="right">Comment 53</div>

I've tried #28906 but it is ugly as hell, so not sure whether it should be getting in. So this is the minimal (rebased) fix.



---

archive/issue_comments_453765.json:
```json
{
    "body": "Changed reviewer from **Isuru Fernando, Erik Bray** to **Isuru Fernando, Erik Bray, Matthias Koeppe**",
    "created_at": "2019-12-28T03:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453765",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Isuru Fernando, Erik Bray** to **Isuru Fernando, Erik Bray, Matthias Koeppe**



---

archive/issue_comments_453766.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nLooks good and works well on macOS Catalina - after fixing #28676.",
    "created_at": "2019-12-28T03:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453766",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">Comment 54</div>

Looks good and works well on macOS Catalina - after fixing #28676.



---

archive/issue_events_378565.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-12-28T03:32:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378565"
}
```



---

archive/issue_events_378566.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-12-28T03:32:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378566"
}
```



---

archive/issue_events_378567.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-01T14:36:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378567"
}
```



---

archive/issue_events_378568.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-01T14:36:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378568"
}
```



---

archive/issue_events_378569.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-05T15:47:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378569"
}
```



---

archive/issue_events_378570.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3914a955ab82936fc8b42dc90f082cadb442cb5c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-01-05T15:47:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-378570"
}
```



---

archive/issue_comments_453767.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)** to **[fb8f4e5](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)**",
    "created_at": "2020-01-05T15:47:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453767",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)** to **[fb8f4e5](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)**



---

archive/issue_comments_453768.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nFollow-up on the poetry issue at #29810",
    "created_at": "2020-06-05T22:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453768",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">Comment 57</div>

Follow-up on the poetry issue at #29810



---

archive/issue_comments_453769.json:
```json
{
    "body": "Changed commit from **[fb8f4e5](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)** to none",
    "created_at": "2020-06-05T22:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453769",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[fb8f4e5](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)** to none



---

archive/issue_comments_453770.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\n\"...and other forms of boredom advertised as poetry.\"",
    "created_at": "2020-06-12T09:03:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453770",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:58" align="right">Comment 58</div>

"...and other forms of boredom advertised as poetry."
