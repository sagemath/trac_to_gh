# Issue 28883: update pkgconfig to version 1.5.1

archive/issues_028646.json:
```json
{
    "assignees": [],
    "body": "the current version is buggy, as we found out on #27870\n\nalso, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really \"orig\") tarball on\n\nhttp://deb.debian.org/debian/pool/main/p/python-pkgconfig/\n\nCf. https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master\n\nThe pypi tarball has setup.py, so we can just use it.\ntarball: https://files.pythonhosted.org/packages/6e/a9/ff67ef67217dfdf2aca847685fe789f82b931a6957a3deac861297585db6/pkgconfig-1.5.1.tar.gz\n\n\n\n**CC:**  @kiwifb @embray @tobihan @infinity0 @isuruf @mkoeppe\n\n**Branch:** [fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)\n\n**Reviewer:** Isuru Fernando, Erik Bray, Matthias Koeppe\n\n**Author:** Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/28883\n\n",
    "closed_at": "2020-01-05T15:47:35Z",
    "created_at": "2019-12-14T02:26:26Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update pkgconfig to version 1.5.1",
    "type": "issue",
    "updated_at": "2020-06-12T09:03:16Z",
    "url": "https://github.com/sagemath/sage/issues/28883",
    "user": "https://github.com/dimpase"
}
```
the current version is buggy, as we found out on #27870

also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really "orig") tarball on

http://deb.debian.org/debian/pool/main/p/python-pkgconfig/

Cf. https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master

The pypi tarball has setup.py, so we can just use it.
tarball: https://files.pythonhosted.org/packages/6e/a9/ff67ef67217dfdf2aca847685fe789f82b931a6957a3deac861297585db6/pkgconfig-1.5.1.tar.gz



**CC:**  @kiwifb @embray @tobihan @infinity0 @isuruf @mkoeppe

**Branch:** [fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)

**Reviewer:** Isuru Fernando, Erik Bray, Matthias Koeppe

**Author:** Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/28883





---

archive/issue_events_347814.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T02:26:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347814"
}
```



---

archive/issue_events_347815.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T02:26:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347815"
}
```



---

archive/issue_events_347816.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T02:26:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "008080",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347816"
}
```



---

archive/issue_comments_453524.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n the current version is buggy, as we found out on #27870\n+\n+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we need poetry installed too.\n``````\n",
    "created_at": "2019-12-14T08:18:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453524",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 the current version is buggy, as we found out on #27870
+
+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we need poetry installed too.
``````




---

archive/issue_comments_453525.json:
```json
{
    "body": "<a id='comment:2'></a>\nI found adding `setup.py` into the \"orig\" tarball rather than into debian/patches rather unusual.",
    "created_at": "2019-12-14T09:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453525",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
I found adding `setup.py` into the "orig" tarball rather than into debian/patches rather unusual.



---

archive/issue_comments_453526.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n the current version is buggy, as we found out on #27870\n \n-also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we need poetry installed too.\n+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really \"orig\") tarball:\n+\n+http://deb.debian.org/debian/pool/main/p/python-pkgconfig/python-pkgconfig_1.5.1.orig.tar.gz\n+\n+as can be seen on https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master\n``````\n",
    "created_at": "2019-12-14T09:22:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453526",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
 the current version is buggy, as we found out on #27870
 
-also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we need poetry installed too.
+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really "orig") tarball:
+
+http://deb.debian.org/debian/pool/main/p/python-pkgconfig/python-pkgconfig_1.5.1.orig.tar.gz
+
+as can be seen on https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master
``````




---

archive/issue_comments_453527.json:
```json
{
    "body": "**Commit:** [e5c91dbb4d313d43f05cf3d33fc1758ac089613d](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)",
    "created_at": "2019-12-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453527",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [e5c91dbb4d313d43f05cf3d33fc1758ac089613d](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)



---

archive/issue_comments_453528.json:
```json
{
    "body": "**Author:** Dima Pasechnik",
    "created_at": "2019-12-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453528",
    "user": "https://github.com/dimpase"
}
```

**Author:** Dima Pasechnik



---

archive/issue_comments_453529.json:
```json
{
    "body": "**Branch:** [u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)",
    "created_at": "2019-12-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453529",
    "user": "https://github.com/dimpase"
}
```

**Branch:** [u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)



---

archive/issue_comments_453530.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,7 +1,12 @@\n the current version is buggy, as we found out on #27870\n \n-also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really \"orig\") tarball:\n+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really \"orig\") tarball on\n \n-http://deb.debian.org/debian/pool/main/p/python-pkgconfig/python-pkgconfig_1.5.1.orig.tar.gz\n+http://deb.debian.org/debian/pool/main/p/python-pkgconfig/\n \n-as can be seen on https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master\n+Cf. https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master\n+\n+The pypi tarball has setup.py, so we can just use it.\n+tarball: https://files.pythonhosted.org/packages/6e/a9/ff67ef67217dfdf2aca847685fe789f82b931a6957a3deac861297585db6/pkgconfig-1.5.1.tar.gz\n+\n+\n``````\n",
    "created_at": "2019-12-14T09:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453530",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,7 +1,12 @@
 the current version is buggy, as we found out on #27870
 
-also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really "orig") tarball:
+also, pkgconfig switched to https://python-poetry.org/ from setuptools, so we either get poetry installed too (which is a big task), or go Debian way and provide `setup.py`. That's what they do in their (not really "orig") tarball on
 
-http://deb.debian.org/debian/pool/main/p/python-pkgconfig/python-pkgconfig_1.5.1.orig.tar.gz
+http://deb.debian.org/debian/pool/main/p/python-pkgconfig/
 
-as can be seen on https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master
+Cf. https://salsa.debian.org/python-team/modules/python-pkgconfig/tree/master
+
+The pypi tarball has setup.py, so we can just use it.
+tarball: https://files.pythonhosted.org/packages/6e/a9/ff67ef67217dfdf2aca847685fe789f82b931a6957a3deac861297585db6/pkgconfig-1.5.1.tar.gz
+
+
``````




---

archive/issue_comments_453531.json:
```json
{
    "body": "<a id='comment:4'></a>\nThat `poetry` stuff is really a replacement for `pip`. And from where I see it, it can only fully replace superficially simple `setup.py` files. And it probably can generate such simple `setup.py` file, although I cannot see that in the Readme. And to be able to do what it does, it must be able to process complicated `setup.py` just fine, since it will install stuff that was never prepared for poetry if I am not mistaken.\n\nAnyway that's outside of the scope of the ticket. But one more of this things to potentially deal with :(",
    "created_at": "2019-12-14T09:56:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453531",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>
That `poetry` stuff is really a replacement for `pip`. And from where I see it, it can only fully replace superficially simple `setup.py` files. And it probably can generate such simple `setup.py` file, although I cannot see that in the Readme. And to be able to do what it does, it must be able to process complicated `setup.py` just fine, since it will install stuff that was never prepared for poetry if I am not mistaken.

Anyway that's outside of the scope of the ticket. But one more of this things to potentially deal with :(



---

archive/issue_events_347817.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T10:59:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347817"
}
```



---

archive/issue_comments_453532.json:
```json
{
    "body": "<a id='comment:5'></a>\nI guess poetry generates setup.py files as a part of its pypi deployment feature.",
    "created_at": "2019-12-14T10:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453532",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
I guess poetry generates setup.py files as a part of its pypi deployment feature.



---

archive/issue_comments_453533.json:
```json
{
    "body": "<a id='comment:6'></a>\n[ A stupidity. Sorry for the noise ... ]",
    "created_at": "2019-12-14T16:20:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453533",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:6'></a>
[ A stupidity. Sorry for the noise ... ]



---

archive/issue_comments_453534.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@EmmanuelCharpentier](#comment%3A6):\n> [ A stupidity. Sorry for the noise ... ]\n\n[ After re-checking the setup... ] This doesn't seem to be effective. I still get the systemwide pkg-config:\n\n```\ncharpent@zen-book-flip:/usr/local/sage-9$ git status\nSur la branche t/28883/packages/pkgconfig151\nVotre branche est \u00e0 jour avec 'trac/u/dimpase/packages/pkgconfig151'.\n\nrien \u00e0 valider, la copie de travail est propre\ncharpent@zen-book-flip:/usr/local/sage-9$ ./sage -sh\n\nStarting subshell with Sage environment variables set.  Don't forget\nto exit when you are done.  Beware:\n * Do not do anything with other copies of Sage on your system.\n * Do not use this for installing Sage packages using \"sage -i\" or for\n   running \"make\" at Sage's root directory.  These should be done\n   outside the Sage shell.\n\nBypassing shell configuration files...\n\nNote: SAGE_ROOT=/usr/local/sage-9\n(sage-sh) charpent@zen-book-flip:sage-9$ command -v pkg-config\n/usr/bin/pkg-config\n(sage-sh) charpent@zen-book-flip:sage-9$ pkg-config --version\n0.29\n(sage-sh) charpent@zen-book-flip:sage-9$ exit\nexit\nExited Sage subshell.\n```",
    "created_at": "2019-12-14T16:27:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453534",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:7'></a>
Replying to [@EmmanuelCharpentier](#comment%3A6):
> [ A stupidity. Sorry for the noise ... ]

[ After re-checking the setup... ] This doesn't seem to be effective. I still get the systemwide pkg-config:

```
charpent@zen-book-flip:/usr/local/sage-9$ git status
Sur la branche t/28883/packages/pkgconfig151
Votre branche est à jour avec 'trac/u/dimpase/packages/pkgconfig151'.

rien à valider, la copie de travail est propre
charpent@zen-book-flip:/usr/local/sage-9$ ./sage -sh

Starting subshell with Sage environment variables set.  Don't forget
to exit when you are done.  Beware:
 * Do not do anything with other copies of Sage on your system.
 * Do not use this for installing Sage packages using "sage -i" or for
   running "make" at Sage's root directory.  These should be done
   outside the Sage shell.

Bypassing shell configuration files...

Note: SAGE_ROOT=/usr/local/sage-9
(sage-sh) charpent@zen-book-flip:sage-9$ command -v pkg-config
/usr/bin/pkg-config
(sage-sh) charpent@zen-book-flip:sage-9$ pkg-config --version
0.29
(sage-sh) charpent@zen-book-flip:sage-9$ exit
exit
Exited Sage subshell.
```



---

archive/issue_comments_453535.json:
```json
{
    "body": "<a id='comment:8'></a>\nthis is a Python interface to pkg-config.\nSo you need to `import pkgconfig` in Sage's Python to see it in action.",
    "created_at": "2019-12-14T16:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453535",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
this is a Python interface to pkg-config.
So you need to `import pkgconfig` in Sage's Python to see it in action.



---

archive/issue_events_347818.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-15T01:18:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347818"
}
```



---

archive/issue_events_347819.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-15T01:18:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347819"
}
```



---

archive/issue_comments_453536.json:
```json
{
    "body": "**Reviewer:** Isuru Fernando",
    "created_at": "2019-12-15T01:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453536",
    "user": "https://github.com/isuruf"
}
```

**Reviewer:** Isuru Fernando



---

archive/issue_events_347820.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-15T11:45:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347820"
}
```



---

archive/issue_events_347821.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-15T11:45:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347821"
}
```



---

archive/issue_comments_453537.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)\" to \"[e5c91dbb4d313d43f05cf3d33fc1758ac089613d](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)\".",
    "created_at": "2019-12-17T22:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453537",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)" to "[e5c91dbb4d313d43f05cf3d33fc1758ac089613d](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)".



---

archive/issue_events_347822.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-17T22:46:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347822"
}
```



---

archive/issue_events_347823.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-17T22:46:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347823"
}
```



---

archive/issue_comments_453538.json:
```json
{
    "body": "**Changing commit** from \"[e5c91dbb4d313d43f05cf3d33fc1758ac089613d](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)\" to \"\".",
    "created_at": "2019-12-21T11:56:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453538",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[e5c91dbb4d313d43f05cf3d33fc1758ac089613d](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)" to "".



---

archive/issue_comments_453539.json:
```json
{
    "body": "<a id='comment:13'></a>\nThis breaks on OSX:\n\n```\n[sagelib-9.0.beta9] Traceback (most recent call last):\n[sagelib-9.0.beta9]   File \"setup.py\", line 72, in <module>\n[sagelib-9.0.beta9]     from module_list import ext_modules, library_order\n[sagelib-9.0.beta9]   File \"/Users/buildbot-sage/slave/sage_git/build/src/module_list.py\", line 42, in <module>\n[sagelib-9.0.beta9]     zlib_pc = pkgconfig.parse('zlib')\n[sagelib-9.0.beta9]   File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py\", line 248, in parse\n[sagelib-9.0.beta9]     _raise_if_not_exists(package)\n[sagelib-9.0.beta9]   File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py\", line 103, in _raise_if_not_exists\n[sagelib-9.0.beta9]     raise PackageNotFoundError(package)\n[sagelib-9.0.beta9] pkgconfig.pkgconfig.PackageNotFoundError: zlib not found\n[sagelib-9.0.beta9] ************************************************************************\n[sagelib-9.0.beta9] Error building the Sage library\n[sagelib-9.0.beta9] ************************************************************************\n```",
    "created_at": "2019-12-21T11:56:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453539",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:13'></a>
This breaks on OSX:

```
[sagelib-9.0.beta9] Traceback (most recent call last):
[sagelib-9.0.beta9]   File "setup.py", line 72, in <module>
[sagelib-9.0.beta9]     from module_list import ext_modules, library_order
[sagelib-9.0.beta9]   File "/Users/buildbot-sage/slave/sage_git/build/src/module_list.py", line 42, in <module>
[sagelib-9.0.beta9]     zlib_pc = pkgconfig.parse('zlib')
[sagelib-9.0.beta9]   File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py", line 248, in parse
[sagelib-9.0.beta9]     _raise_if_not_exists(package)
[sagelib-9.0.beta9]   File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py", line 103, in _raise_if_not_exists
[sagelib-9.0.beta9]     raise PackageNotFoundError(package)
[sagelib-9.0.beta9] pkgconfig.pkgconfig.PackageNotFoundError: zlib not found
[sagelib-9.0.beta9] ************************************************************************
[sagelib-9.0.beta9] Error building the Sage library
[sagelib-9.0.beta9] ************************************************************************
```



---

archive/issue_comments_453540.json:
```json
{
    "body": "<a id='comment:14'></a>\nprobably buildbot had a workaround for the buggy package?",
    "created_at": "2019-12-21T13:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453540",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>
probably buildbot had a workaround for the buggy package?



---

archive/issue_comments_453541.json:
```json
{
    "body": "<a id='comment:15'></a>\nisn't the !Sage/Python environment of that buildbot broken?\nOne should have\n\n```\nsage: import pkgconfig\nsage: pkgconfig.parse('zlib')\ndefaultdict(<class 'list'>, {'libraries': ['z']})\n```",
    "created_at": "2019-12-21T13:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453541",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
isn't the !Sage/Python environment of that buildbot broken?
One should have

```
sage: import pkgconfig
sage: pkgconfig.parse('zlib')
defaultdict(<class 'list'>, {'libraries': ['z']})
```



---

archive/issue_comments_453542.json:
```json
{
    "body": "<a id='comment:16'></a>\nIt works for me on OS X 10.15.2.",
    "created_at": "2019-12-21T20:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453542",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:16'></a>
It works for me on OS X 10.15.2.



---

archive/issue_comments_453543.json:
```json
{
    "body": "<a id='comment:17'></a>\nTurns out #27870 is the culprit...",
    "created_at": "2019-12-22T15:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453543",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Turns out #27870 is the culprit...



---

archive/issue_events_347824.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:17:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347824"
}
```



---

archive/issue_events_347825.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:17:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347825"
}
```



---

archive/issue_events_347826.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:17:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347826"
}
```



---

archive/issue_events_347827.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:18:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347827"
}
```



---

archive/issue_events_347828.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:18:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347828"
}
```



---

archive/issue_comments_453544.json:
```json
{
    "body": "<a id='comment:19'></a>\nOh just noticed that this ticket is merged into #27870",
    "created_at": "2019-12-22T15:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453544",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:19'></a>
Oh just noticed that this ticket is merged into #27870



---

archive/issue_comments_453545.json:
```json
{
    "body": "<a id='comment:20'></a>\nTo me, it looks like a Python with broken zlib module. Nothing to do with pkgconfig.\n\nYes, it could also be that local/lib/pkgconfig/ contents are somehow broken and thus\nbreak Python's pkgconfig.\n\nWas it a build from scratch? If not, stale things in local/lib/pkgconfig/  may break stuff.",
    "created_at": "2019-12-22T15:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453545",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>
To me, it looks like a Python with broken zlib module. Nothing to do with pkgconfig.

Yes, it could also be that local/lib/pkgconfig/ contents are somehow broken and thus
break Python's pkgconfig.

Was it a build from scratch? If not, stale things in local/lib/pkgconfig/  may break stuff.



---

archive/issue_comments_453546.json:
```json
{
    "body": "<a id='comment:21'></a>\nOn Catalina, there is no zlib in /usr/lib/pkgconfig and we don't build our own zlib with #27870.\n\n```\nbuildbot-sage@osx build % ./sage -sh -c 'pkgconf --cflags zlib'\n\nPackage zlib was not found in the pkg-config search path.\nPerhaps you should add the directory containing `zlib.pc'\nto the PKG_CONFIG_PATH environment variable\nPackage 'zlib', required by 'world', not found\n```\nAll builds from scratch.",
    "created_at": "2019-12-22T15:37:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453546",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>
On Catalina, there is no zlib in /usr/lib/pkgconfig and we don't build our own zlib with #27870.

```
buildbot-sage@osx build % ./sage -sh -c 'pkgconf --cflags zlib'

Package zlib was not found in the pkg-config search path.
Perhaps you should add the directory containing `zlib.pc'
to the PKG_CONFIG_PATH environment variable
Package 'zlib', required by 'world', not found
```
All builds from scratch.



---

archive/issue_comments_453547.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe version bump here should be ok, its #27870 that is borked",
    "created_at": "2019-12-22T15:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453547",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:22'></a>
The version bump here should be ok, its #27870 that is borked



---

archive/issue_events_347829.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:39:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347829"
}
```



---

archive/issue_events_347830.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T15:39:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347830"
}
```



---

archive/issue_comments_453548.json:
```json
{
    "body": "<a id='comment:23'></a>\nNo, #27870 is fine.\n\nwhat's \"borked\" is that the new pkgconfig v1.5.1 throws an error if there is no `.pc` file. E.g. on this branch one sees\n\n```\nsage: import pkgconfig\nsage: pkgconfig.parse(\"uhohoh\")\n---------------------------------------------------------------------------\nPackageNotFoundError                      Traceback (most recent call last)\n<ipython-input-2-d927c49e8798> in <module>()\n----> 1 pkgconfig.parse(\"uhohoh\")\n\n/home/dimpase/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py in parse(packages, static)\n    246     \"\"\"\n    247     for package in packages.split():\n--> 248         _raise_if_not_exists(package)\n    249 \n    250     out = _query(packages, *_build_options('--cflags --libs', static=static))\n\n/home/dimpase/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py in _raise_if_not_exists(package)\n    101 def _raise_if_not_exists(package):\n    102     if not exists(package):\n--> 103         raise PackageNotFoundError(package)\n    104 \n    105 \n\nPackageNotFoundError: uhohoh not found\nsage: \n```\n\nbut the previous version merrily returns some stuff:\n\n```\nsage: pkgconfig.parse(\"uhohoh\")\ndefaultdict(<type 'list'>, {'define_macros': []})\n```\n\nAll the systems this was tested apparently had `zlib.pc` somewhere, and so it worked.\nYour box does not have it, and so an error is thrown.\n\nOK, would it be easier if this is fixed (trivially) on a followup ticket rather than here?",
    "created_at": "2019-12-22T15:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453548",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
No, #27870 is fine.

what's "borked" is that the new pkgconfig v1.5.1 throws an error if there is no `.pc` file. E.g. on this branch one sees

```
sage: import pkgconfig
sage: pkgconfig.parse("uhohoh")
---------------------------------------------------------------------------
PackageNotFoundError                      Traceback (most recent call last)
<ipython-input-2-d927c49e8798> in <module>()
----> 1 pkgconfig.parse("uhohoh")

/home/dimpase/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py in parse(packages, static)
    246     """
    247     for package in packages.split():
--> 248         _raise_if_not_exists(package)
    249 
    250     out = _query(packages, *_build_options('--cflags --libs', static=static))

/home/dimpase/sage/local/lib/python3.7/site-packages/pkgconfig/pkgconfig.py in _raise_if_not_exists(package)
    101 def _raise_if_not_exists(package):
    102     if not exists(package):
--> 103         raise PackageNotFoundError(package)
    104 
    105 

PackageNotFoundError: uhohoh not found
sage: 
```

but the previous version merrily returns some stuff:

```
sage: pkgconfig.parse("uhohoh")
defaultdict(<type 'list'>, {'define_macros': []})
```

All the systems this was tested apparently had `zlib.pc` somewhere, and so it worked.
Your box does not have it, and so an error is thrown.

OK, would it be easier if this is fixed (trivially) on a followup ticket rather than here?



---

archive/issue_comments_453549.json:
```json
{
    "body": "<a id='comment:24'></a>\nFeel free to fix it here since there are already a number of tickets that depend on this one that can't be merged until the issue is resolved",
    "created_at": "2019-12-22T16:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453549",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:24'></a>
Feel free to fix it here since there are already a number of tickets that depend on this one that can't be merged until the issue is resolved



---

archive/issue_events_347831.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T16:00:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347831"
}
```



---

archive/issue_events_347832.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-22T16:00:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347832"
}
```



---

archive/issue_comments_453550.json:
```json
{
    "body": "<a id='comment:25'></a>\nimho the zlib spkg-configure.m4 should just ensure that a zlib.pc file can be found (i.e. use PKG_CHECK_MODULES)",
    "created_at": "2019-12-22T16:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453550",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
imho the zlib spkg-configure.m4 should just ensure that a zlib.pc file can be found (i.e. use PKG_CHECK_MODULES)



---

archive/issue_comments_453551.json:
```json
{
    "body": "<a id='comment:26'></a>\nThe whole thing about assuming that `zlib.pc` exists was iffy since #26286 - that's basically where the bug has slipped in. \n\nIt \"worked\" as the absense of `zlib.pc` was ignored by old Python's `pkgconfig`. \n\nThere is no actual need to insist on `zlib.pc` present, as Apple's implementation of zlib is good enough to be used.",
    "created_at": "2019-12-22T16:18:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453551",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>
The whole thing about assuming that `zlib.pc` exists was iffy since #26286 - that's basically where the bug has slipped in. 

It "worked" as the absense of `zlib.pc` was ignored by old Python's `pkgconfig`. 

There is no actual need to insist on `zlib.pc` present, as Apple's implementation of zlib is good enough to be used.



---

archive/issue_comments_453552.json:
```json
{
    "body": "<a id='comment:27'></a>\nIndeed its never actually necessary to have .pc files you can always kludge it by hand and fudge cflags/libs on all supported platforms. Its just not a sane/maintainable/scalable system of working with shared libraries.\n\nIf you want to save OSX users from having to build zlib then we should just provide an appropriate zlib.pc on that particular snowflake of a platform.",
    "created_at": "2019-12-22T16:32:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453552",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>
Indeed its never actually necessary to have .pc files you can always kludge it by hand and fudge cflags/libs on all supported platforms. Its just not a sane/maintainable/scalable system of working with shared libraries.

If you want to save OSX users from having to build zlib then we should just provide an appropriate zlib.pc on that particular snowflake of a platform.



---

archive/issue_comments_453553.json:
```json
{
    "body": "<a id='comment:28'></a>\nI'll provide workaround here, and properly deal with generation on `zlib.pc` on #28906.\n\nFor the problem at hand it'd suffice just to avoid an expection, and fake the output of\n`pkgconfig.parse()` if need be.",
    "created_at": "2019-12-22T16:53:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453553",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>
I'll provide workaround here, and properly deal with generation on `zlib.pc` on #28906.

For the problem at hand it'd suffice just to avoid an expection, and fake the output of
`pkgconfig.parse()` if need be.



---

archive/issue_events_347833.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-22T17:09:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347833"
}
```



---

archive/issue_events_347834.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-22T17:09:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347834"
}
```



---

archive/issue_comments_453554.json:
```json
{
    "body": "<a id='comment:29'></a>\nThis should fix the OSX issue, IMHO (can't test on OSX, though)",
    "created_at": "2019-12-22T17:09:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453554",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>
This should fix the OSX issue, IMHO (can't test on OSX, though)



---

archive/issue_comments_453555.json:
```json
{
    "body": "**Changing branch** from \"[e5c91dbb4d313d43f05cf3d33fc1758ac089613d](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)\" to \"\".",
    "created_at": "2019-12-22T17:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453555",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[e5c91dbb4d313d43f05cf3d33fc1758ac089613d](https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d)" to "".



---

archive/issue_comments_453556.json:
```json
{
    "body": "<a id='comment:30'></a>\nOh blast, need to rename this branch...",
    "created_at": "2019-12-22T17:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453556",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'></a>
Oh blast, need to rename this branch...



---

archive/issue_comments_453557.json:
```json
{
    "body": "<a id='comment:31'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d\">e5c91db</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8\">9d33b71</a></td><td><code>allow absent zlib.pc</code></td></tr></table>\n",
    "created_at": "2019-12-22T17:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453557",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d">e5c91db</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8">9d33b71</a></td><td><code>allow absent zlib.pc</code></td></tr></table>




---

archive/issue_comments_453558.json:
```json
{
    "body": "**Commit:** [9d33b7160485f78af7a0b8d99b413a948c2a77e8](https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8)",
    "created_at": "2019-12-22T17:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453558",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [9d33b7160485f78af7a0b8d99b413a948c2a77e8](https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8)



---

archive/issue_comments_453559.json:
```json
{
    "body": "**Branch:** [u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)",
    "created_at": "2019-12-22T17:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453559",
    "user": "https://github.com/dimpase"
}
```

**Branch:** [u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)



---

archive/issue_comments_453560.json:
```json
{
    "body": "<a id='comment:32'></a>\npotentially, there could also be a problem with libpng.pc, for which ./configure does not check for/does not insist on its presense. But it comes before zlib.pc is tested, so that's apparently not blocking. I'll change #28906 to deal with these too.",
    "created_at": "2019-12-23T04:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453560",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>
potentially, there could also be a problem with libpng.pc, for which ./configure does not check for/does not insist on its presense. But it comes before zlib.pc is tested, so that's apparently not blocking. I'll change #28906 to deal with these too.



---

archive/issue_events_347835.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-23T11:39:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347835"
}
```



---

archive/issue_events_347836.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-23T11:39:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347836"
}
```



---

archive/issue_comments_453561.json:
```json
{
    "body": "<a id='comment:33'></a>\nThat should be `pkgconfig.PackageNotFoundError`, otherwise you'll just get a `NameError` raised during exception handling.  Please fix that and rebase to squash the fix.",
    "created_at": "2019-12-23T11:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453561",
    "user": "https://github.com/embray"
}
```

<a id='comment:33'></a>
That should be `pkgconfig.PackageNotFoundError`, otherwise you'll just get a `NameError` raised during exception handling.  Please fix that and rebase to squash the fix.



---

archive/issue_comments_453562.json:
```json
{
    "body": "<a id='comment:34'></a>\nI'm a little confused here. On OS X, when I run the command in [comment:21](#comment%3A21) (`./sage -sh -c 'pkgconf --cflags zlib'`), I get the same output as given there, but the build succeeds for me. Why does it fail on some OS X systems and succeed on others? (It worked for me with the current branch but also the earlier one.)",
    "created_at": "2019-12-23T19:10:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453562",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:34'></a>
I'm a little confused here. On OS X, when I run the command in [comment:21](#comment%3A21) (`./sage -sh -c 'pkgconf --cflags zlib'`), I get the same output as given there, but the build succeeds for me. Why does it fail on some OS X systems and succeed on others? (It worked for me with the current branch but also the earlier one.)



---

archive/issue_comments_453563.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [@jhpalmieri](#comment%3A34):\n> I'm a little confused here. On OS X, when I run the command in [comment:21](#comment%3A21) (`./sage -sh -c 'pkgconf --cflags zlib'`), I get the same output as given there, but the build succeeds for me. Why does it fail on some OS X systems and succeed on others? (It worked for me with the current branch but also the earlier one.)\n\nHow about the commands in [comment:15](#comment%3A15) ?\n\n```\nsage: import pkgconfig\nsage: pkgconfig.parse('zlib')\n```",
    "created_at": "2019-12-24T02:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453563",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>
Replying to [@jhpalmieri](#comment%3A34):
> I'm a little confused here. On OS X, when I run the command in [comment:21](#comment%3A21) (`./sage -sh -c 'pkgconf --cflags zlib'`), I get the same output as given there, but the build succeeds for me. Why does it fail on some OS X systems and succeed on others? (It worked for me with the current branch but also the earlier one.)

How about the commands in [comment:15](#comment%3A15) ?

```
sage: import pkgconfig
sage: pkgconfig.parse('zlib')
```



---

archive/issue_comments_453564.json:
```json
{
    "body": "<a id='comment:36'></a>\nWith the current branch:\n\n```\nsage:  import pkgconfig\nsage: pkgconfig.parse('zlib')\ndefaultdict(<class 'list'>, {'libraries': ['z']})\n```",
    "created_at": "2019-12-24T02:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453564",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:36'></a>
With the current branch:

```
sage:  import pkgconfig
sage: pkgconfig.parse('zlib')
defaultdict(<class 'list'>, {'libraries': ['z']})
```



---

archive/issue_comments_453565.json:
```json
{
    "body": "<a id='comment:37'></a>\nFrom reading https://github.com/matze/pkgconfig/blob/master/pkgconfig/pkgconfig.py\nit could happen that you have environment variable PKG_CONFIG defined, and its value will be used instead of `pkg-config` in your PATH.\n\nhttps://github.com/matze/pkgconfig/blob/a7108a65625a529dc1cf1b4779d23e5701f202dc/pkgconfig/pkgconfig.py#L108",
    "created_at": "2019-12-24T02:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453565",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
From reading https://github.com/matze/pkgconfig/blob/master/pkgconfig/pkgconfig.py
it could happen that you have environment variable PKG_CONFIG defined, and its value will be used instead of `pkg-config` in your PATH.

https://github.com/matze/pkgconfig/blob/a7108a65625a529dc1cf1b4779d23e5701f202dc/pkgconfig/pkgconfig.py#L108



---

archive/issue_comments_453566.json:
```json
{
    "body": "<a id='comment:38'></a>\nWhen I run Sage, it defines the environment variable\n\n```\nPKG_CONFIG_PATH=.../path/to/SAGE_ROOT/local/lib/pkgconfig\n```\nbut I don't have anything similar set myself. `export | grep PKG` returns nothing.",
    "created_at": "2019-12-24T03:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453566",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:38'></a>
When I run Sage, it defines the environment variable

```
PKG_CONFIG_PATH=.../path/to/SAGE_ROOT/local/lib/pkgconfig
```
but I don't have anything similar set myself. `export | grep PKG` returns nothing.



---

archive/issue_comments_453567.json:
```json
{
    "body": "<a id='comment:39'></a>\nIs the output of \n\n```\nsage: import os\nsage: os.system(\"which pkg-config\")\n```\nthe same as of `which pkg-config` at `./sage -sh` prompt?\n\nAs well, please compare the value of env. var. `PKG_CONFIG_PATH` at the latter prompt with the output of \n\n```\nsage: os.environ.get('PKG_CONFIG_PATH', None)\n```",
    "created_at": "2019-12-24T03:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453567",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>
Is the output of 

```
sage: import os
sage: os.system("which pkg-config")
```
the same as of `which pkg-config` at `./sage -sh` prompt?

As well, please compare the value of env. var. `PKG_CONFIG_PATH` at the latter prompt with the output of 

```
sage: os.environ.get('PKG_CONFIG_PATH', None)
```



---

archive/issue_comments_453568.json:
```json
{
    "body": "<a id='comment:40'></a>\n`which pkg-config` points to the homebrew installation, `/usr/local/bin/pkg-config` in both invocations.\n\n```\nsage: os.environ.get('PKG_CONFIG_PATH', None)\n'/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/pkgconfig'\nsage: sage.env.var('PKG_CONFIG_PATH')\nsage:\n```\nand after running `sage --sh`:\n\n```\n$ echo $PKG_CONFIG_PATH\n/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/pkgconfig\n```\n('/Users/palmieri/Desktop/Sage_stuff/git/sage/` is SAGE_ROOT.)",
    "created_at": "2019-12-24T04:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453568",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:40'></a>
`which pkg-config` points to the homebrew installation, `/usr/local/bin/pkg-config` in both invocations.

```
sage: os.environ.get('PKG_CONFIG_PATH', None)
'/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/pkgconfig'
sage: sage.env.var('PKG_CONFIG_PATH')
sage:
```
and after running `sage --sh`:

```
$ echo $PKG_CONFIG_PATH
/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/pkgconfig
```
('/Users/palmieri/Desktop/Sage_stuff/git/sage/` is SAGE_ROOT.)



---

archive/issue_comments_453569.json:
```json
{
    "body": "<a id='comment:41'></a>\nSo maybe it's the presence of the homebrew `pkg-config` that makes this system behave differently from Volker's buildbot.",
    "created_at": "2019-12-24T04:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453569",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:41'></a>
So maybe it's the presence of the homebrew `pkg-config` that makes this system behave differently from Volker's buildbot.



---

archive/issue_comments_453570.json:
```json
{
    "body": "<a id='comment:42'></a>\nYou probably have zlib installed from homebrew.\n\nWhat do you get with `pkg-config zlib --variable pcfiledir` ?",
    "created_at": "2019-12-24T04:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453570",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:42'></a>
You probably have zlib installed from homebrew.

What do you get with `pkg-config zlib --variable pcfiledir` ?



---

archive/issue_comments_453571.json:
```json
{
    "body": "<a id='comment:43'></a>\nSage's Python has to dig up `zlib.pc` to read by `pkgconfig.parse()`, from somewhere.\n\nBy the way, I don't understand  `pkgconf` in `./sage -sh -c 'pkgconf --cflags zlib` ???\n\nit should be `pkg-config` \n\nI guess `pkgconf` is some \"unofficial\" name for `pkg-config`, used by Sage's `pkgconf` package, which installs `pkg-config`.",
    "created_at": "2019-12-24T04:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453571",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>
Sage's Python has to dig up `zlib.pc` to read by `pkgconfig.parse()`, from somewhere.

By the way, I don't understand  `pkgconf` in `./sage -sh -c 'pkgconf --cflags zlib` ???

it should be `pkg-config` 

I guess `pkgconf` is some "unofficial" name for `pkg-config`, used by Sage's `pkgconf` package, which installs `pkg-config`.



---

archive/issue_comments_453572.json:
```json
{
    "body": "<a id='comment:44'></a>\n`pkgconf` and `pkg-config` are two different programs both of which does the same thing. `pkgconf` has a `pkg-config` symlink as well. (Think of `pkgconf` as MPIR built with GMP compat and `pkg-config` as GMP.)",
    "created_at": "2019-12-24T04:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453572",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:44'></a>
`pkgconf` and `pkg-config` are two different programs both of which does the same thing. `pkgconf` has a `pkg-config` symlink as well. (Think of `pkgconf` as MPIR built with GMP compat and `pkg-config` as GMP.)



---

archive/issue_comments_453573.json:
```json
{
    "body": "<a id='comment:45'></a>\nSo you were confused by Volker's `pkgconf` invocation --- sorry, I should have noticed it earlier. I bet `./sage -sh -c 'pkg-config --libs zlib` has meaningful output with `-lz` in it.",
    "created_at": "2019-12-24T04:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453573",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>
So you were confused by Volker's `pkgconf` invocation --- sorry, I should have noticed it earlier. I bet `./sage -sh -c 'pkg-config --libs zlib` has meaningful output with `-lz` in it.



---

archive/issue_comments_453574.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [@isuruf](#comment%3A42):\n> You probably have zlib installed from homebrew.\n> \n> What do you get with `pkg-config zlib --variable pcfiledir` ?\n\n`/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/10.15`. Also\n\n```\n$ ./sage -sh -c 'pkg-config --libs zlib'\n-lz\n```",
    "created_at": "2019-12-24T04:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453574",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:46'></a>
Replying to [@isuruf](#comment%3A42):
> You probably have zlib installed from homebrew.
> 
> What do you get with `pkg-config zlib --variable pcfiledir` ?

`/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/10.15`. Also

```
$ ./sage -sh -c 'pkg-config --libs zlib'
-lz
```



---

archive/issue_comments_453575.json:
```json
{
    "body": "<a id='comment:47'></a>\nWhat does `pkg-config zlib --variable libdir` give you?",
    "created_at": "2019-12-24T04:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453575",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:47'></a>
What does `pkg-config zlib --variable libdir` give you?



---

archive/issue_comments_453576.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [@jhpalmieri](#comment%3A46):\n> Replying to [@isuruf](#comment%3A42):\n> > You probably have zlib installed from homebrew.\n> > \n> > What do you get with `pkg-config zlib --variable pcfiledir` ?\n\n> \n> `/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/10.15`. Also\n> \n> ```\n> $ ./sage -sh -c 'pkg-config --libs zlib'\n> -lz\n> ```\n\nso it appears that you use zlib provided by Homebrew, which does supply zlib.pc, so everything works as it should. (I don't know whether they install a real zlib, or just provide zlib.pc pointing to the MacOS native one, probably the former)",
    "created_at": "2019-12-24T04:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453576",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>
Replying to [@jhpalmieri](#comment%3A46):
> Replying to [@isuruf](#comment%3A42):
> > You probably have zlib installed from homebrew.
> > 
> > What do you get with `pkg-config zlib --variable pcfiledir` ?

> 
> `/usr/local/Homebrew/Library/Homebrew/os/mac/pkgconfig/10.15`. Also
> 
> ```
> $ ./sage -sh -c 'pkg-config --libs zlib'
> -lz
> ```

so it appears that you use zlib provided by Homebrew, which does supply zlib.pc, so everything works as it should. (I don't know whether they install a real zlib, or just provide zlib.pc pointing to the MacOS native one, probably the former)



---

archive/issue_comments_453577.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [@isuruf](#comment%3A47):\n> What does `pkg-config zlib --variable libdir` give you?\n\n`/usr/lib`",
    "created_at": "2019-12-24T05:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453577",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:49'></a>
Replying to [@isuruf](#comment%3A47):
> What does `pkg-config zlib --variable libdir` give you?

`/usr/lib`



---

archive/issue_comments_453578.json:
```json
{
    "body": "<a id='comment:50'></a>\nFor information on PEP517 and the whole `poetry` business of packaging https://blogs.gentoo.org/mgorny/2019/12/24/handling-pep-517-pyproject-toml-packages-in-gentoo/",
    "created_at": "2019-12-25T20:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453578",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:50'></a>
For information on PEP517 and the whole `poetry` business of packaging https://blogs.gentoo.org/mgorny/2019/12/24/handling-pep-517-pyproject-toml-packages-in-gentoo/



---

archive/issue_comments_453579.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea\">809abd9</a></td><td><code>added missing module name</code></td></tr></table>\n",
    "created_at": "2019-12-27T02:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453579",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea">809abd9</a></td><td><code>added missing module name</code></td></tr></table>




---

archive/issue_comments_453580.json:
```json
{
    "body": "**Changing commit** from \"[9d33b7160485f78af7a0b8d99b413a948c2a77e8](https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8)\" to \"[809abd91a81beddb3f89a514ddccc904cc1713ea](https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea)\".",
    "created_at": "2019-12-27T02:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453580",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9d33b7160485f78af7a0b8d99b413a948c2a77e8](https://github.com/sagemath/sagetrac-mirror/commit/9d33b7160485f78af7a0b8d99b413a948c2a77e8)" to "[809abd91a81beddb3f89a514ddccc904cc1713ea](https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea)".



---

archive/issue_comments_453581.json:
```json
{
    "body": "<a id='comment:52'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f74f5545d2a931f37247185de292689dd9800d35\">f74f554</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e\">fb8f4e5</a></td><td><code>allow absent zlib.pc</code></td></tr></table>\n",
    "created_at": "2019-12-27T02:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453581",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:52'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f74f5545d2a931f37247185de292689dd9800d35">f74f554</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e">fb8f4e5</a></td><td><code>allow absent zlib.pc</code></td></tr></table>




---

archive/issue_comments_453582.json:
```json
{
    "body": "**Changing commit** from \"[809abd91a81beddb3f89a514ddccc904cc1713ea](https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea)\" to \"[fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)\".",
    "created_at": "2019-12-27T02:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453582",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[809abd91a81beddb3f89a514ddccc904cc1713ea](https://github.com/sagemath/sagetrac-mirror/commit/809abd91a81beddb3f89a514ddccc904cc1713ea)" to "[fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)".



---

archive/issue_comments_453583.json:
```json
{
    "body": "**Changing reviewer** from \"Isuru Fernando\" to \"Isuru Fernando, Erik Bray\".",
    "created_at": "2019-12-27T02:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453583",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "Isuru Fernando" to "Isuru Fernando, Erik Bray".



---

archive/issue_events_347837.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-27T02:41:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347837"
}
```



---

archive/issue_events_347838.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-27T02:41:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347838"
}
```



---

archive/issue_comments_453584.json:
```json
{
    "body": "<a id='comment:53'></a>\nI've tried #28906 but it is ugly as hell, so not sure whether it should be getting in. So this is the minimal (rebased) fix.",
    "created_at": "2019-12-27T02:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453584",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:53'></a>
I've tried #28906 but it is ugly as hell, so not sure whether it should be getting in. So this is the minimal (rebased) fix.



---

archive/issue_comments_453585.json:
```json
{
    "body": "**Changing reviewer** from \"Isuru Fernando, Erik Bray\" to \"Isuru Fernando, Erik Bray, Matthias Koeppe\".",
    "created_at": "2019-12-28T03:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453585",
    "user": "https://github.com/mkoeppe"
}
```

**Changing reviewer** from "Isuru Fernando, Erik Bray" to "Isuru Fernando, Erik Bray, Matthias Koeppe".



---

archive/issue_comments_453586.json:
```json
{
    "body": "<a id='comment:54'></a>\nLooks good and works well on macOS Catalina - after fixing #28676.",
    "created_at": "2019-12-28T03:32:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453586",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>
Looks good and works well on macOS Catalina - after fixing #28676.



---

archive/issue_events_347839.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-12-28T03:32:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347839"
}
```



---

archive/issue_events_347840.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-12-28T03:32:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347840"
}
```



---

archive/issue_events_347841.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-01T14:36:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347841"
}
```



---

archive/issue_events_347842.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-01T14:36:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347842"
}
```



---

archive/issue_events_347843.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-05T15:47:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347843"
}
```



---

archive/issue_events_347844.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3914a955ab82936fc8b42dc90f082cadb442cb5c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-01-05T15:47:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28883#event-347844"
}
```



---

archive/issue_comments_453587.json:
```json
{
    "body": "**Changing branch** from \"[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)\" to \"[fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)\".",
    "created_at": "2020-01-05T15:47:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453587",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dimpase/packages/pkgconfig151](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/pkgconfig151)" to "[fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)".



---

archive/issue_comments_453588.json:
```json
{
    "body": "<a id='comment:57'></a>\nFollow-up on the poetry issue at #29810",
    "created_at": "2020-06-05T22:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453588",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>
Follow-up on the poetry issue at #29810



---

archive/issue_comments_453589.json:
```json
{
    "body": "**Changing commit** from \"[fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)\" to \"\".",
    "created_at": "2020-06-05T22:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453589",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e](https://github.com/sagemath/sagetrac-mirror/commit/fb8f4e51d258ce6cfa8e4b221ff67c94cf80467e)" to "".



---

archive/issue_comments_453590.json:
```json
{
    "body": "<a id='comment:58'></a>\n\"...and other forms of boredom advertised as poetry.\"",
    "created_at": "2020-06-12T09:03:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28883#issuecomment-453590",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:58'></a>
"...and other forms of boredom advertised as poetry."
