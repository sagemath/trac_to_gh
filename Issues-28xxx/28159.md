# Issue 28159: Vector Bundles

archive/issues_027922.json:
```json
{
    "assignees": [],
    "body": "Implementation of topological and differentiable vector bundles over manifolds.\n\n**Features:**\n\n- abstract vector bundles on topological manifolds\n- trivializations\n- local frames\n- simple sections\n- vector bundle fibers\n- differentiable vector bundles and tensor bundles\n\n**Improvements in the preexisting code**\n\n- restriction of vectorframes depended on some strange order: fixed!\n- ~~`SR` enforcement for automorphism field inversion removed (due to ticket #28189)~~\n- `is_unit()` method superficially implemented for scalar fields to ensure division free matrix inversion for changes of frames (may be removed when #28629 is solved) \n\n**Planned in the farther future**\n\n- sections of general tensor products and automorphism fields on vector bundles\n- tensor products and Whitney sums of vector bundles\n- better zero treatment as in #28562\n- `TensorField` inherits from `Section`, `VectorFrame` inherits from `LocalFrame`\n- total space comes with induced charts\n\nDepends on #28189\n\nCC:  @tscrim @egourgoulhon\n\nKeywords: **vector bundles**\n\nBranch/Commit: **[`4ae4ca3`](https://github.com/sagemath/sagetrac-mirror/commit/4ae4ca37508374ef9074cdbf9c650bb0d6ae8211)**\n\nReviewer: **Eric Gourgoulhon, Travis Scrimshaw**\n\nAuthor: **Michael Jung**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28159_\n\n",
    "closed_at": "2019-10-23T22:58:08Z",
    "created_at": "2019-07-10T15:46:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20manifolds"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Vector Bundles",
    "type": "issue",
    "updated_at": "2019-10-23T22:58:08Z",
    "url": "https://github.com/sagemath/sage/issues/28159",
    "user": "https://github.com/DeRhamSource"
}
```
Implementation of topological and differentiable vector bundles over manifolds.

**Features:**

- abstract vector bundles on topological manifolds
- trivializations
- local frames
- simple sections
- vector bundle fibers
- differentiable vector bundles and tensor bundles

**Improvements in the preexisting code**

- restriction of vectorframes depended on some strange order: fixed!
- ~~`SR` enforcement for automorphism field inversion removed (due to ticket #28189)~~
- `is_unit()` method superficially implemented for scalar fields to ensure division free matrix inversion for changes of frames (may be removed when #28629 is solved) 

**Planned in the farther future**

- sections of general tensor products and automorphism fields on vector bundles
- tensor products and Whitney sums of vector bundles
- better zero treatment as in #28562
- `TensorField` inherits from `Section`, `VectorFrame` inherits from `LocalFrame`
- total space comes with induced charts

Depends on #28189

CC:  @tscrim @egourgoulhon

Keywords: **vector bundles**

Branch/Commit: **[`4ae4ca3`](https://github.com/sagemath/sagetrac-mirror/commit/4ae4ca37508374ef9074cdbf9c650bb0d6ae8211)**

Reviewer: **Eric Gourgoulhon, Travis Scrimshaw**

Author: **Michael Jung**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/28159_





---

archive/issue_events_383191.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-07-10T15:46:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383191"
}
```



---

archive/issue_events_383192.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-07-10T15:46:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383192"
}
```



---

archive/issue_events_383193.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-07-10T15:53:03Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "title_is": "Vector Bundles",
    "title_was": "vector_bundles",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383193"
}
```



---

archive/issue_comments_438061.json:
```json
{
    "body": "Author: **Michael Jung**",
    "created_at": "2019-07-10T15:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438061",
    "user": "https://github.com/DeRhamSource"
}
```

Author: **Michael Jung**



---

archive/issue_comments_438062.json:
```json
{
    "body": "Changed keywords from none to **vector bundles**",
    "created_at": "2019-07-10T15:53:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438062",
    "user": "https://github.com/DeRhamSource"
}
```

Changed keywords from none to **vector bundles**



---

archive/issue_events_383194.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-07-10T15:53:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
    "label_color": "0000ff",
    "label_name": "c: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383194"
}
```



---

archive/issue_events_383195.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-07-10T15:53:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383195"
}
```



---

archive/issue_events_383196.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-07-10T16:13:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383196"
}
```



---

archive/issue_comments_438063.json:
```json
{
    "body": "Branch: **[u/gh-DeRhamSource/vector_bundles](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/vector_bundles)**",
    "created_at": "2019-07-10T16:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438063",
    "user": "https://github.com/DeRhamSource"
}
```

Branch: **[u/gh-DeRhamSource/vector_bundles](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/vector_bundles)**



---

archive/issue_comments_438064.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nPlease take a short look and give me a short feedback. I want to know whether I'm on the right way or not.\n\nFurthermore, I appreciate tricks and advices. Thanks in advance! :) \n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d5520d19abace16d1eced2d67a28e2f1fbaa9fb\"><code>5d5520d</code></a></td><td><code>Basic structure</code></td></tr></table>\n",
    "created_at": "2019-07-10T16:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438064",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:4" align="right">comment:4</div>

Please take a short look and give me a short feedback. I want to know whether I'm on the right way or not.

Furthermore, I appreciate tricks and advices. Thanks in advance! :) 

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d5520d19abace16d1eced2d67a28e2f1fbaa9fb"><code>5d5520d</code></a></td><td><code>Basic structure</code></td></tr></table>




---

archive/issue_comments_438065.json:
```json
{
    "body": "Commit: **[`5d5520d`](https://github.com/sagemath/sagetrac-mirror/commit/5d5520d19abace16d1eced2d67a28e2f1fbaa9fb)**",
    "created_at": "2019-07-10T16:59:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438065",
    "user": "https://github.com/DeRhamSource"
}
```

Commit: **[`5d5520d`](https://github.com/sagemath/sagetrac-mirror/commit/5d5520d19abace16d1eced2d67a28e2f1fbaa9fb)**



---

archive/issue_comments_438066.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Implementation of topological and differentiable vector bundles over manifolds.\n``````\n",
    "created_at": "2019-07-10T17:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438066",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Implementation of topological and differentiable vector bundles over manifolds.
``````




---

archive/issue_comments_438067.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@DeRhamSource](#comment%3A4):\n> Please take a short look and give me a short feedback. I want to know whether I'm on the right way or not.\n> \n> Furthermore, I appreciate tricks and advices. Thanks in advance! :) \n\n\nThanks for this endeavor. I gave a look: it looks very nice! Please go on.\n\nA minor comment: for class names, full names are preferable, so `TopolVectorBundle` could be replaced by `TopologicalVectorBundle`. Also maybe, in the context of vector bundles, `TransitionMap` is more appropriate than `CoordChange`.",
    "created_at": "2019-07-11T08:44:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438067",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@DeRhamSource](#comment%3A4):
> Please take a short look and give me a short feedback. I want to know whether I'm on the right way or not.
> 
> Furthermore, I appreciate tricks and advices. Thanks in advance! :) 


Thanks for this endeavor. I gave a look: it looks very nice! Please go on.

A minor comment: for class names, full names are preferable, so `TopolVectorBundle` could be replaced by `TopologicalVectorBundle`. Also maybe, in the context of vector bundles, `TransitionMap` is more appropriate than `CoordChange`.



---

archive/issue_comments_438068.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThanks!",
    "created_at": "2019-07-11T13:51:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438068",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:7" align="right">comment:7</div>

Thanks!



---

archive/issue_comments_438069.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed60a5d8c5c03acf2627265bae19c8139376b126\"><code>ed60a5d</code></a></td><td><code>Trivializations almost finished</code></td></tr></table>\n",
    "created_at": "2019-07-13T20:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438069",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed60a5d8c5c03acf2627265bae19c8139376b126"><code>ed60a5d</code></a></td><td><code>Trivializations almost finished</code></td></tr></table>




---

archive/issue_comments_438070.json:
```json
{
    "body": "Changed commit from **[`5d5520d`](https://github.com/sagemath/sagetrac-mirror/commit/5d5520d19abace16d1eced2d67a28e2f1fbaa9fb)** to **[`ed60a5d`](https://github.com/sagemath/sagetrac-mirror/commit/ed60a5d8c5c03acf2627265bae19c8139376b126)**",
    "created_at": "2019-07-13T20:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438070",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5d5520d`](https://github.com/sagemath/sagetrac-mirror/commit/5d5520d19abace16d1eced2d67a28e2f1fbaa9fb)** to **[`ed60a5d`](https://github.com/sagemath/sagetrac-mirror/commit/ed60a5d8c5c03acf2627265bae19c8139376b126)**



---

archive/issue_comments_438071.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a2bbb4c5dbbf3ca18ed73c0b33358b7e82f8e5d\"><code>2a2bbb4</code></a></td><td><code>28189: matrices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0919d504d4bcfa1d08b8b4f66bb6735ed4deaa7e\"><code>0919d50</code></a></td><td><code>Merge branch 't/28189/28189' into t/28159/vector_bundles</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b23b6768f4ea50f7f9aedaa117ec13ca6a84d576\"><code>b23b676</code></a></td><td><code>Matrix inversion adapted to ticket #28189</code></td></tr></table>\n",
    "created_at": "2019-07-13T21:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438071",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a2bbb4c5dbbf3ca18ed73c0b33358b7e82f8e5d"><code>2a2bbb4</code></a></td><td><code>28189: matrices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0919d504d4bcfa1d08b8b4f66bb6735ed4deaa7e"><code>0919d50</code></a></td><td><code>Merge branch 't/28189/28189' into t/28159/vector_bundles</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b23b6768f4ea50f7f9aedaa117ec13ca6a84d576"><code>b23b676</code></a></td><td><code>Matrix inversion adapted to ticket #28189</code></td></tr></table>




---

archive/issue_comments_438072.json:
```json
{
    "body": "Changed commit from **[`ed60a5d`](https://github.com/sagemath/sagetrac-mirror/commit/ed60a5d8c5c03acf2627265bae19c8139376b126)** to **[`b23b676`](https://github.com/sagemath/sagetrac-mirror/commit/b23b6768f4ea50f7f9aedaa117ec13ca6a84d576)**",
    "created_at": "2019-07-13T21:28:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438072",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed60a5d`](https://github.com/sagemath/sagetrac-mirror/commit/ed60a5d8c5c03acf2627265bae19c8139376b126)** to **[`b23b676`](https://github.com/sagemath/sagetrac-mirror/commit/b23b6768f4ea50f7f9aedaa117ec13ca6a84d576)**



---

archive/issue_comments_438073.json:
```json
{
    "body": "Dependencies: **#28189**",
    "created_at": "2019-07-13T21:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438073",
    "user": "https://github.com/DeRhamSource"
}
```

Dependencies: **#28189**



---

archive/issue_comments_438074.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc1fac17d30a5f60f61e33a4e54aec2d216d64de\"><code>bc1fac1</code></a></td><td><code>Fibers and vectors of fibers implemented</code></td></tr></table>\n",
    "created_at": "2019-07-14T17:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438074",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc1fac17d30a5f60f61e33a4e54aec2d216d64de"><code>bc1fac1</code></a></td><td><code>Fibers and vectors of fibers implemented</code></td></tr></table>




---

archive/issue_comments_438075.json:
```json
{
    "body": "Changed commit from **[`b23b676`](https://github.com/sagemath/sagetrac-mirror/commit/b23b6768f4ea50f7f9aedaa117ec13ca6a84d576)** to **[`bc1fac1`](https://github.com/sagemath/sagetrac-mirror/commit/bc1fac17d30a5f60f61e33a4e54aec2d216d64de)**",
    "created_at": "2019-07-14T17:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438075",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b23b676`](https://github.com/sagemath/sagetrac-mirror/commit/b23b6768f4ea50f7f9aedaa117ec13ca6a84d576)** to **[`bc1fac1`](https://github.com/sagemath/sagetrac-mirror/commit/bc1fac17d30a5f60f61e33a4e54aec2d216d64de)**



---

archive/issue_comments_438076.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWhat about synergy and compatibility with the old code? I mean, tangent bundles and vector fields are just special cases of vector bundles and sections. So, it'd be nice when we don't have two different implementations for the very same thing. How would you like to handle that? Any suggestions?",
    "created_at": "2019-07-15T12:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438076",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:12" align="right">comment:12</div>

What about synergy and compatibility with the old code? I mean, tangent bundles and vector fields are just special cases of vector bundles and sections. So, it'd be nice when we don't have two different implementations for the very same thing. How would you like to handle that? Any suggestions?



---

archive/issue_comments_438077.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAlso, it could be a good idea to generalize tensor fields and vector fields\nto tensor product sections and treat tensor fields as a special case then.\nBut that's a huge step with pretty much effort (because I'm not that much\ninto your complete manifold code and the synergies between your files),\nwhere I'd appreciate some help -- if you agree of course. \n\nMy first approach in mind is to implement just simple sections and program tensor products of bundles aswell.",
    "created_at": "2019-07-15T14:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438077",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:13" align="right">comment:13</div>

Also, it could be a good idea to generalize tensor fields and vector fields
to tensor product sections and treat tensor fields as a special case then.
But that's a huge step with pretty much effort (because I'm not that much
into your complete manifold code and the synergies between your files),
where I'd appreciate some help -- if you agree of course. 

My first approach in mind is to implement just simple sections and program tensor products of bundles aswell.



---

archive/issue_comments_438078.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@DeRhamSource](#comment%3A12):\n> What about synergy and compatibility with the old code? I mean, tangent bundles and vector fields are just special cases of vector bundles and sections. So, it'd be nice when we don't have two different implementations for the very same thing. How would you like to handle that? Any suggestions? \n\nSorry for the delay in replying. \nIMHO, you should introduce a subclass of `TopologicalVectorBundle` for the tangent bundle (or more generally for tensor bundles) and simply have the method `section` of this subclass return a vector field on the manifold, as defined by the \"old\" code. Maybe it is sufficient to have a single subclass for all tensor bundles, including the tangent and cotangent bundles, i.e. something like\n\n```\nclass TensorBundle(TopologicalVectorBundle):\n\n    def __init__(self, manifold, k, l):\n        rank = manifold.dim()**(k+l)\n        if (k, l) == (1, 0):\n            name = \"T{}\".format(manifold._name)\n        elif (k, l) == (0, 1):\n            name = \"T*{}\".format(manifold._name)\n        else:\n            name = \"T^({}{}){}\".format(k, l, manifold._name)\n        # similar code for latex_name\n        TopologicalVectorBundle.__init__(self, rank, name, manifold, \n                                         field=manifold.base_field(),\n                                         latex_name=latex_name)\n        self._tensor_type = (k, l)\n\n    def section(self, *args, **kwargs):\n        if self.tensor_type == (1, 0):\n            return self._base_space.vector_field(*args, **kwargs)\n        return self._base_space.tensor_field(*(self._tensor_type + args), **kwargs)\n```\nIn the code for differentiable manifolds, you could then add\n\n```\nclass DifferentiableManifold(TopologicalManifold):\n\n    ...\n\n    def tangent_bundle(self):\n        return TensorBundle(self, 1, 0)\n\n    def cotangent_bundle(self):\n        return TensorBundle(self, 0, 1)\n\n    def tensor_bundle(self, k, l)\n        return TensorBundle(self, k, l)\n\n```",
    "created_at": "2019-07-21T14:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438078",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@DeRhamSource](#comment%3A12):
> What about synergy and compatibility with the old code? I mean, tangent bundles and vector fields are just special cases of vector bundles and sections. So, it'd be nice when we don't have two different implementations for the very same thing. How would you like to handle that? Any suggestions? 

Sorry for the delay in replying. 
IMHO, you should introduce a subclass of `TopologicalVectorBundle` for the tangent bundle (or more generally for tensor bundles) and simply have the method `section` of this subclass return a vector field on the manifold, as defined by the "old" code. Maybe it is sufficient to have a single subclass for all tensor bundles, including the tangent and cotangent bundles, i.e. something like

```
class TensorBundle(TopologicalVectorBundle):

    def __init__(self, manifold, k, l):
        rank = manifold.dim()**(k+l)
        if (k, l) == (1, 0):
            name = "T{}".format(manifold._name)
        elif (k, l) == (0, 1):
            name = "T*{}".format(manifold._name)
        else:
            name = "T^({}{}){}".format(k, l, manifold._name)
        # similar code for latex_name
        TopologicalVectorBundle.__init__(self, rank, name, manifold, 
                                         field=manifold.base_field(),
                                         latex_name=latex_name)
        self._tensor_type = (k, l)

    def section(self, *args, **kwargs):
        if self.tensor_type == (1, 0):
            return self._base_space.vector_field(*args, **kwargs)
        return self._base_space.tensor_field(*(self._tensor_type + args), **kwargs)
```
In the code for differentiable manifolds, you could then add

```
class DifferentiableManifold(TopologicalManifold):

    ...

    def tangent_bundle(self):
        return TensorBundle(self, 1, 0)

    def cotangent_bundle(self):
        return TensorBundle(self, 0, 1)

    def tensor_bundle(self, k, l)
        return TensorBundle(self, k, l)

```



---

archive/issue_comments_438079.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAlso, I don't know if this is useful at this stage, but you could introduce an intermediate class, `DifferentiableVectorBundle` say, and let `TensorBundle` inherits from it. Besides, since (the total spaces of) differentiable vector bundles are differentiable manifolds, this intermediate class could inherit from `DifferentiableManifold` as well:\n\n```\nclass DifferentiableVectorBundle(TopologicalVectorBundle, DifferentiableManifold):\n\n    def __init__(self, rank, name, base_space, diff_degree=infinity,\n                 latex_name=None, category=None)\n        field = base_space.base_field()\n        TopologicalVectorBundle.__init__(self, rank, name, base_space, field=field,\n                                         latex_name=latex_name, category=category)\n        dim = base_space.dim() * rank\n        if isinstance(field, RealField_class):\n            structure = RealDifferentialStructure()\n        else:\n            structure = DifferentialStructure()\n        DifferentiableManifold.__init__(self, dim, name, field, structure,\n                                        diff_degree=diff_degree, \n                                        latex_name=latex_name, \n                                        start_index=base_space.start_index())\n\nclass TensorBundle(DifferentiableVectorBundle):\n    ...\n```",
    "created_at": "2019-07-21T16:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438079",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:15" align="right">comment:15</div>

Also, I don't know if this is useful at this stage, but you could introduce an intermediate class, `DifferentiableVectorBundle` say, and let `TensorBundle` inherits from it. Besides, since (the total spaces of) differentiable vector bundles are differentiable manifolds, this intermediate class could inherit from `DifferentiableManifold` as well:

```
class DifferentiableVectorBundle(TopologicalVectorBundle, DifferentiableManifold):

    def __init__(self, rank, name, base_space, diff_degree=infinity,
                 latex_name=None, category=None)
        field = base_space.base_field()
        TopologicalVectorBundle.__init__(self, rank, name, base_space, field=field,
                                         latex_name=latex_name, category=category)
        dim = base_space.dim() * rank
        if isinstance(field, RealField_class):
            structure = RealDifferentialStructure()
        else:
            structure = DifferentialStructure()
        DifferentiableManifold.__init__(self, dim, name, field, structure,
                                        diff_degree=diff_degree, 
                                        latex_name=latex_name, 
                                        start_index=base_space.start_index())

class TensorBundle(DifferentiableVectorBundle):
    ...
```



---

archive/issue_comments_438080.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIn addition, to make the link with preexisting code, one could redefine the method `fiber()` of `TensorBundle` to return the tangent space at the given point if `(k,l)==(1,0)` or the corresponding tensor product for other values of `(k,l)`:\n\n```\nclass TensorBundle(DifferentiableVectorBundle):\n\n    def __init__(self, manifold, k, l):\n        rank = manifold.dim()**(k+l)\n        if (k, l) == (1, 0):\n            name = \"T{}\".format(manifold._name)\n        elif (k, l) == (0, 1):\n            name = \"T*{}\".format(manifold._name)\n        else:\n            name = \"T^({}{}){}\".format(k, l, manifold._name)\n        # similar code for latex_name\n        DifferentiableVectorBundle.__init__(self, rank, name, manifold, \n                                            diff_degree=manifold.diff_degree(),\n                                            latex_name=latex_name)\n        self._tensor_type = (k, l)\n\n    def section(self, *args, **kwargs):\n        if self.tensor_type == (1, 0):\n            return self._base_space.vector_field(*args, **kwargs)\n        return self._base_space.tensor_field(*(self._tensor_type + args), **kwargs)\n  \n    def fiber(self, point):\n        return self._base_space.tangent_space(point).tensor_module(*self._tensor_type)\n\n```",
    "created_at": "2019-07-21T19:50:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438080",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:16" align="right">comment:16</div>

In addition, to make the link with preexisting code, one could redefine the method `fiber()` of `TensorBundle` to return the tangent space at the given point if `(k,l)==(1,0)` or the corresponding tensor product for other values of `(k,l)`:

```
class TensorBundle(DifferentiableVectorBundle):

    def __init__(self, manifold, k, l):
        rank = manifold.dim()**(k+l)
        if (k, l) == (1, 0):
            name = "T{}".format(manifold._name)
        elif (k, l) == (0, 1):
            name = "T*{}".format(manifold._name)
        else:
            name = "T^({}{}){}".format(k, l, manifold._name)
        # similar code for latex_name
        DifferentiableVectorBundle.__init__(self, rank, name, manifold, 
                                            diff_degree=manifold.diff_degree(),
                                            latex_name=latex_name)
        self._tensor_type = (k, l)

    def section(self, *args, **kwargs):
        if self.tensor_type == (1, 0):
            return self._base_space.vector_field(*args, **kwargs)
        return self._base_space.tensor_field(*(self._tensor_type + args), **kwargs)
  
    def fiber(self, point):
        return self._base_space.tangent_space(point).tensor_module(*self._tensor_type)

```



---

archive/issue_comments_438081.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSounds like a very good compromise to me. I'll see what I can do. Thanks for your input!\n\nBut I feel not comfortable with inheriting from `DifferentiableManifold`. There are too many conflicts (`frame()`, `atlas()`, etc.). Maybe, having a `total_space()` method returning the corresponding manifold would be a better idea. What do you think?",
    "created_at": "2019-07-21T22:30:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438081",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:17" align="right">comment:17</div>

Sounds like a very good compromise to me. I'll see what I can do. Thanks for your input!

But I feel not comfortable with inheriting from `DifferentiableManifold`. There are too many conflicts (`frame()`, `atlas()`, etc.). Maybe, having a `total_space()` method returning the corresponding manifold would be a better idea. What do you think?



---

archive/issue_comments_438082.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@DeRhamSource](#comment%3A17):\n> Sounds like a very good compromise to me. I'll see what I can do. Thanks for your input!\n> \n> But I feel not comfortable with inheriting from `DifferentiableManifold`. There are too many conflicts (`frame()`, `atlas()`, etc.). Maybe, having a `total_space()` method returning the corresponding manifold would be a better idea. What do you think?\n\nThis seems indeed a good idea. Also sounds closer to the mathematical definition of a vector bundle as a tuple `(E, M, pi)`, which distinguishes the bundle from its base space `E`.",
    "created_at": "2019-07-22T08:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438082",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@DeRhamSource](#comment%3A17):
> Sounds like a very good compromise to me. I'll see what I can do. Thanks for your input!
> 
> But I feel not comfortable with inheriting from `DifferentiableManifold`. There are too many conflicts (`frame()`, `atlas()`, etc.). Maybe, having a `total_space()` method returning the corresponding manifold would be a better idea. What do you think?

This seems indeed a good idea. Also sounds closer to the mathematical definition of a vector bundle as a tuple `(E, M, pi)`, which distinguishes the bundle from its base space `E`.



---

archive/issue_comments_438083.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI need some help, again. I'm now trying to program local frames and sections and looked up how you managed it for vector fields. Maybe you can shortly explain how you did it? The code is pretty huge and spreaded. Especially, I'm interested in changes from one (coordinate) frame into another for different domains and the restriction process and display for tensor fields. Thanks! :)",
    "created_at": "2019-07-23T15:52:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438083",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:19" align="right">comment:19</div>

I need some help, again. I'm now trying to program local frames and sections and looked up how you managed it for vector fields. Maybe you can shortly explain how you did it? The code is pretty huge and spreaded. Especially, I'm interested in changes from one (coordinate) frame into another for different domains and the restriction process and display for tensor fields. Thanks! :)



---

archive/issue_comments_438084.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@DeRhamSource](#comment%3A19):\n> I need some help, again. I'm now trying to program local frames and sections and looked up how you managed it for vector fields. Maybe you can shortly explain how you did it? The code is pretty huge and spreaded. Especially, I'm interested in changes from one (coordinate) frame into another for different domains and the restriction process and display for tensor fields. Thanks! :)\n\nYou can find some details of the implementation in [this article](http://ccirm.cedram.org/cedram-bin/article/CCIRM_2018__6_1_A1_0.pdf). Please tell me if this does not cover what you are looking for.",
    "created_at": "2019-07-23T21:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438084",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@DeRhamSource](#comment%3A19):
> I need some help, again. I'm now trying to program local frames and sections and looked up how you managed it for vector fields. Maybe you can shortly explain how you did it? The code is pretty huge and spreaded. Especially, I'm interested in changes from one (coordinate) frame into another for different domains and the restriction process and display for tensor fields. Thanks! :)

You can find some details of the implementation in [this article](http://ccirm.cedram.org/cedram-bin/article/CCIRM_2018__6_1_A1_0.pdf). Please tell me if this does not cover what you are looking for.



---

archive/issue_comments_438085.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThanks, that was very helpful.\n\nI think, one should do the following: Implement arbitrary tensor product sections on one particular vector bundle and apply and adapt the construction as it is done for tensor fields, and then derive tensor fields from this more general construction. Or even better: Implement tensor product sections of mixed vector bundles over the same base space (e.g. `\\Gamma(E \\otimes E^* \\otimes \\Lambda^k F)`).\n\nUnfortunately, I'm running out of time. Moreover, for this endeavour, you need to understand the whole code around tensor fields quite perfectly. I would implement just simple sections for now and apply the compromise we agreed on above. Maybe I can try this generalization after my thesis or one of you is willing to take the effort.\n\nHowever, simple sections seem enough for the beginning because it is possible to construct aforementioned sections by constructing the corresponding bundles and then defining simple sections on them. Still, imao, the way above is the most flexible and overall convenient.\n\nWhat do you think?",
    "created_at": "2019-07-26T15:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438085",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:21" align="right">comment:21</div>

Thanks, that was very helpful.

I think, one should do the following: Implement arbitrary tensor product sections on one particular vector bundle and apply and adapt the construction as it is done for tensor fields, and then derive tensor fields from this more general construction. Or even better: Implement tensor product sections of mixed vector bundles over the same base space (e.g. `\Gamma(E \otimes E^* \otimes \Lambda^k F)`).

Unfortunately, I'm running out of time. Moreover, for this endeavour, you need to understand the whole code around tensor fields quite perfectly. I would implement just simple sections for now and apply the compromise we agreed on above. Maybe I can try this generalization after my thesis or one of you is willing to take the effort.

However, simple sections seem enough for the beginning because it is possible to construct aforementioned sections by constructing the corresponding bundles and then defining simple sections on them. Still, imao, the way above is the most flexible and overall convenient.

What do you think?



---

archive/issue_comments_438086.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@DeRhamSource](#comment%3A21):\n> I would implement just simple sections for now and apply the compromise we agreed on above. Maybe I can try this generalization after my thesis or one of you is willing to take the effort.\n> \n> However, simple sections seem enough for the beginning because it is possible to construct aforementioned sections by constructing the corresponding bundles and then defining simple sections on them. Still, imao, the way above is the most flexible and overall convenient.\n> \n> What do you think?\n\nSorry for the delay in replying. \nYes, implementing simple sections as a first stage seems the thing to do at the moment.",
    "created_at": "2019-07-31T08:24:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438086",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@DeRhamSource](#comment%3A21):
> I would implement just simple sections for now and apply the compromise we agreed on above. Maybe I can try this generalization after my thesis or one of you is willing to take the effort.
> 
> However, simple sections seem enough for the beginning because it is possible to construct aforementioned sections by constructing the corresponding bundles and then defining simple sections on them. Still, imao, the way above is the most flexible and overall convenient.
> 
> What do you think?

Sorry for the delay in replying. 
Yes, implementing simple sections as a first stage seems the thing to do at the moment.



---

archive/issue_comments_438087.json:
```json
{
    "body": "Changed commit from **[`bc1fac1`](https://github.com/sagemath/sagetrac-mirror/commit/bc1fac17d30a5f60f61e33a4e54aec2d216d64de)** to **[`94cdc74`](https://github.com/sagemath/sagetrac-mirror/commit/94cdc74abfac7f4f3d03a43121eebbabe95cc8a9)**",
    "created_at": "2019-08-02T15:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438087",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc1fac1`](https://github.com/sagemath/sagetrac-mirror/commit/bc1fac17d30a5f60f61e33a4e54aec2d216d64de)** to **[`94cdc74`](https://github.com/sagemath/sagetrac-mirror/commit/94cdc74abfac7f4f3d03a43121eebbabe95cc8a9)**



---

archive/issue_comments_438088.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c539562cec3d4f1a04ffae11e64eac452a036c9f\"><code>c539562</code></a></td><td><code>intermediate step</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2cd7497d6c5a7e54ecdc905e451d4c1ee0d167f\"><code>a2cd749</code></a></td><td><code>Intermediate step 2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/157c3a0b35ee87d6c2d0e6134cb6d1c389495ca5\"><code>157c3a0</code></a></td><td><code>Intermediate step 3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7d4115d4c7855fc8d2f4fe412f29476d23a73ae\"><code>d7d4115</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/28159/vector_bundles</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94cdc74abfac7f4f3d03a43121eebbabe95cc8a9\"><code>94cdc74</code></a></td><td><code>Introducing local frames</code></td></tr></table>\n",
    "created_at": "2019-08-02T15:02:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438088",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c539562cec3d4f1a04ffae11e64eac452a036c9f"><code>c539562</code></a></td><td><code>intermediate step</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2cd7497d6c5a7e54ecdc905e451d4c1ee0d167f"><code>a2cd749</code></a></td><td><code>Intermediate step 2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/157c3a0b35ee87d6c2d0e6134cb6d1c389495ca5"><code>157c3a0</code></a></td><td><code>Intermediate step 3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7d4115d4c7855fc8d2f4fe412f29476d23a73ae"><code>d7d4115</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/28159/vector_bundles</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94cdc74abfac7f4f3d03a43121eebbabe95cc8a9"><code>94cdc74</code></a></td><td><code>Introducing local frames</code></td></tr></table>




---

archive/issue_comments_438089.json:
```json
{
    "body": "Changed commit from **[`94cdc74`](https://github.com/sagemath/sagetrac-mirror/commit/94cdc74abfac7f4f3d03a43121eebbabe95cc8a9)** to **[`c59f443`](https://github.com/sagemath/sagetrac-mirror/commit/c59f443dd7259aca2214639ab0e2f6e1dc4f4151)**",
    "created_at": "2019-08-02T17:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438089",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`94cdc74`](https://github.com/sagemath/sagetrac-mirror/commit/94cdc74abfac7f4f3d03a43121eebbabe95cc8a9)** to **[`c59f443`](https://github.com/sagemath/sagetrac-mirror/commit/c59f443dd7259aca2214639ab0e2f6e1dc4f4151)**



---

archive/issue_comments_438090.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c59f443dd7259aca2214639ab0e2f6e1dc4f4151\"><code>c59f443</code></a></td><td><code>Minor issues</code></td></tr></table>\n",
    "created_at": "2019-08-02T17:04:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438090",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c59f443dd7259aca2214639ab0e2f6e1dc4f4151"><code>c59f443</code></a></td><td><code>Minor issues</code></td></tr></table>




---

archive/issue_comments_438091.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46e081c4d120f36c5ca9d036cab4e52054df5a84\"><code>46e081c</code></a></td><td><code>Main parts finished</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12bfb7937bc3e978d8bec410929633889b1e487a\"><code>12bfb79</code></a></td><td><code>Framework and doctests mostly finished. Please check!</code></td></tr></table>\n",
    "created_at": "2019-08-23T13:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438091",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46e081c4d120f36c5ca9d036cab4e52054df5a84"><code>46e081c</code></a></td><td><code>Main parts finished</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12bfb7937bc3e978d8bec410929633889b1e487a"><code>12bfb79</code></a></td><td><code>Framework and doctests mostly finished. Please check!</code></td></tr></table>




---

archive/issue_comments_438092.json:
```json
{
    "body": "Changed commit from **[`c59f443`](https://github.com/sagemath/sagetrac-mirror/commit/c59f443dd7259aca2214639ab0e2f6e1dc4f4151)** to **[`12bfb79`](https://github.com/sagemath/sagetrac-mirror/commit/12bfb7937bc3e978d8bec410929633889b1e487a)**",
    "created_at": "2019-08-23T13:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438092",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c59f443`](https://github.com/sagemath/sagetrac-mirror/commit/c59f443dd7259aca2214639ab0e2f6e1dc4f4151)** to **[`12bfb79`](https://github.com/sagemath/sagetrac-mirror/commit/12bfb7937bc3e978d8bec410929633889b1e487a)**



---

archive/issue_comments_438093.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThe doctests take pretty much effort (especially for the section file). Maybe, I will not finish them on time. But for now, the code is mostly finished. Some things are still to do, but sections seem to work. Please take a look and write me if something is missing or should be done better.\n\nBest regards,\nMichael",
    "created_at": "2019-08-23T14:01:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438093",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:26" align="right">comment:26</div>

The doctests take pretty much effort (especially for the section file). Maybe, I will not finish them on time. But for now, the code is mostly finished. Some things are still to do, but sections seem to work. Please take a look and write me if something is missing or should be done better.

Best regards,
Michael



---

archive/issue_comments_438094.json:
```json
{
    "body": "Changed dependencies from **#28189** to none",
    "created_at": "2019-08-25T12:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438094",
    "user": "https://github.com/DeRhamSource"
}
```

Changed dependencies from **#28189** to none



---

archive/issue_comments_438095.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@DeRhamSource](#comment%3A26):\n> The doctests take pretty much effort (especially for the section file). Maybe, I will not finish them on time. But for now, the code is mostly finished. Some things are still to do, but sections seem to work. Please take a look and write me if something is missing or should be done better.\n> \n\nSorry for the delay in replying. I gave a look and it looks very good! Please go on.\n\nA few comments/questions:\n- you've deleted the dependency to #28189 while some source files modified in this ticket (those in `src/sage/matrix` and `src/sage/sets`) pertain to #28189\n- vector bundles have not been added to the reference manual yet; I guess you have to edit/add some files in `src/doc/en/reference/manifolds` and check that the documentation builds correcty with\n\n```\nsage -docbuild reference/manifolds html\n```\n- notice that the doctests that output a dictionary, like\n\n```\nsage: E.changes_of_frame()\n```\n  in line 105 of `trivialization.py`, must be marked `# random`\n- there is a typo in line 38 of `trivialization.py`:\n\n```\n    `(p, v) \\mapsto \\pi^{-1}(p)` is a linear isomorphism.  \n```\n  must be replaced by something like\n\n```\n    `(p, v) \\mapsto v` is a linear isomorphism from `\\pi^{-1}(p)` to `K^n`.\n```\n- another typo, in line 8 of `vector_bundle.py`: \n\n```\n- the set `E_p=\\pi^{-1}(x)` has the vector space structure of `K^n`,\n```\n  `x` has to be replaced by `p`.\n- the function `TopologicalVectorBundle.atlas()` returns a shallow copy of `self._atlas`; why does it not return directly `self._atlas` ?\n- shouldn't the method `TopologicalVectorBundle.total_space()` be cached? (possibly using the decorator `@cached_method`)",
    "created_at": "2019-09-01T09:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438095",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@DeRhamSource](#comment%3A26):
> The doctests take pretty much effort (especially for the section file). Maybe, I will not finish them on time. But for now, the code is mostly finished. Some things are still to do, but sections seem to work. Please take a look and write me if something is missing or should be done better.
> 

Sorry for the delay in replying. I gave a look and it looks very good! Please go on.

A few comments/questions:
- you've deleted the dependency to #28189 while some source files modified in this ticket (those in `src/sage/matrix` and `src/sage/sets`) pertain to #28189
- vector bundles have not been added to the reference manual yet; I guess you have to edit/add some files in `src/doc/en/reference/manifolds` and check that the documentation builds correcty with

```
sage -docbuild reference/manifolds html
```
- notice that the doctests that output a dictionary, like

```
sage: E.changes_of_frame()
```
  in line 105 of `trivialization.py`, must be marked `# random`
- there is a typo in line 38 of `trivialization.py`:

```
    `(p, v) \mapsto \pi^{-1}(p)` is a linear isomorphism.  
```
  must be replaced by something like

```
    `(p, v) \mapsto v` is a linear isomorphism from `\pi^{-1}(p)` to `K^n`.
```
- another typo, in line 8 of `vector_bundle.py`: 

```
- the set `E_p=\pi^{-1}(x)` has the vector space structure of `K^n`,
```
  `x` has to be replaced by `p`.
- the function `TopologicalVectorBundle.atlas()` returns a shallow copy of `self._atlas`; why does it not return directly `self._atlas` ?
- shouldn't the method `TopologicalVectorBundle.total_space()` be cached? (possibly using the decorator `@cached_method`)



---

archive/issue_comments_438096.json:
```json
{
    "body": "Dependencies: **#28189**",
    "created_at": "2019-09-07T12:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438096",
    "user": "https://github.com/DeRhamSource"
}
```

Dependencies: **#28189**



---

archive/issue_comments_438097.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n> \n> Sorry for the delay in replying. I gave a look and it looks very good! Please go on.\n\n>\n\n\\\\\nDon't worry. :)\n\\\\\\\\\n\n\n> A few comments/questions:\n> - you've deleted the dependency to #28189 while some source files modified in this ticket (those in `src/sage/matrix` and `src/sage/sets`) pertain to #28189\n\n\\\\\nAdded again.\n\\\\\\\\\n\n> - vector bundles have not been added to the reference manual yet; I guess you have to edit/add some files in `src/doc/en/reference/manifolds` and check that the documentation builds correcty with\n> \n> ```\n> sage -docbuild reference/manifolds html\n> ```\n\n\\\\\nComes later, when all the doc is finished. :)\n\\\\\\\\\n> - notice that the doctests that output a dictionary, like\n> \n> ```\n> sage: E.changes_of_frame()\n> ```\n>   in line 105 of `trivialization.py`, must be marked `# random`\n\n\\\\\nWhat do you mean?\n\\\\\\\\\n> - there is a typo in line 38 of `trivialization.py`:\n> \n> ```\n>     `(p, v) \\mapsto \\pi^{-1}(p)` is a linear isomorphism.  \n> ```\n>   must be replaced by something like\n> \n> ```\n>     `(p, v) \\mapsto v` is a linear isomorphism from `\\pi^{-1}(p)` to `K^n`.\n> ```\n> - another typo, in line 8 of `vector_bundle.py`: \n> \n> ```\n> - the set `E_p=\\pi^{-1}(x)` has the vector space structure of `K^n`,\n> ```\n>   `x` has to be replaced by `p`.\n\n\\\\\nCorrected. The projection compatibility was missing, too.\n\\\\\\\\\n\n> - the function `TopologicalVectorBundle.atlas()` returns a shallow copy of `self._atlas`; why does it not return directly `self._atlas` ?\n\n\\\\\nI just borrowed the same code lines from manifold.py. I guess, this is for convenience: One should not allow to alter the list when getting the atlas through this method.\n\\\\\\\\\n> - shouldn't the method `TopologicalVectorBundle.total_space()` be cached? (possibly using the decorator `@cached_method`)\n\n\\\\\nFor now, yes. But later on, when the computation of the atlas is implemented, one should update the manifold's atlas, maybe using this method.\n\\\\\\\\\nBest, Michael",
    "created_at": "2019-09-07T13:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438097",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:30" align="right">comment:30</div>

> 
> Sorry for the delay in replying. I gave a look and it looks very good! Please go on.

>

\\
Don't worry. :)
\\\\


> A few comments/questions:
> - you've deleted the dependency to #28189 while some source files modified in this ticket (those in `src/sage/matrix` and `src/sage/sets`) pertain to #28189

\\
Added again.
\\\\

> - vector bundles have not been added to the reference manual yet; I guess you have to edit/add some files in `src/doc/en/reference/manifolds` and check that the documentation builds correcty with
> 
> ```
> sage -docbuild reference/manifolds html
> ```

\\
Comes later, when all the doc is finished. :)
\\\\
> - notice that the doctests that output a dictionary, like
> 
> ```
> sage: E.changes_of_frame()
> ```
>   in line 105 of `trivialization.py`, must be marked `# random`

\\
What do you mean?
\\\\
> - there is a typo in line 38 of `trivialization.py`:
> 
> ```
>     `(p, v) \mapsto \pi^{-1}(p)` is a linear isomorphism.  
> ```
>   must be replaced by something like
> 
> ```
>     `(p, v) \mapsto v` is a linear isomorphism from `\pi^{-1}(p)` to `K^n`.
> ```
> - another typo, in line 8 of `vector_bundle.py`: 
> 
> ```
> - the set `E_p=\pi^{-1}(x)` has the vector space structure of `K^n`,
> ```
>   `x` has to be replaced by `p`.

\\
Corrected. The projection compatibility was missing, too.
\\\\

> - the function `TopologicalVectorBundle.atlas()` returns a shallow copy of `self._atlas`; why does it not return directly `self._atlas` ?

\\
I just borrowed the same code lines from manifold.py. I guess, this is for convenience: One should not allow to alter the list when getting the atlas through this method.
\\\\
> - shouldn't the method `TopologicalVectorBundle.total_space()` be cached? (possibly using the decorator `@cached_method`)

\\
For now, yes. But later on, when the computation of the atlas is implemented, one should update the manifold's atlas, maybe using this method.
\\\\
Best, Michael



---

archive/issue_comments_438098.json:
```json
{
    "body": "Changed commit from **[`12bfb79`](https://github.com/sagemath/sagetrac-mirror/commit/12bfb7937bc3e978d8bec410929633889b1e487a)** to **[`901df65`](https://github.com/sagemath/sagetrac-mirror/commit/901df657fef7850b041b7a98714fccb2e9b7b669)**",
    "created_at": "2019-09-08T09:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438098",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`12bfb79`](https://github.com/sagemath/sagetrac-mirror/commit/12bfb7937bc3e978d8bec410929633889b1e487a)** to **[`901df65`](https://github.com/sagemath/sagetrac-mirror/commit/901df657fef7850b041b7a98714fccb2e9b7b669)**



---

archive/issue_comments_438099.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/959e152b7b87c72e1d2a43899c009c3a31e74e20\"><code>959e152</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/901df657fef7850b041b7a98714fccb2e9b7b669\"><code>901df65</code></a></td><td><code>Doctest and minor changes</code></td></tr></table>\n",
    "created_at": "2019-09-08T09:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438099",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/959e152b7b87c72e1d2a43899c009c3a31e74e20"><code>959e152</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/901df657fef7850b041b7a98714fccb2e9b7b669"><code>901df65</code></a></td><td><code>Doctest and minor changes</code></td></tr></table>




---

archive/issue_comments_438100.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@DeRhamSource](#comment%3A30):\n> \n> Comes later, when all the doc is finished. :)\n\nI will ;-)\n\n>\n> > - notice that the doctests that output a dictionary, like\n> > {{{\n> > sage: E.changes_of_frame()\n> > }}}\n> >   in line 105 of `trivialization.py`, must be marked `# random`\n> \\\\\n> What do you mean?\n\nWhen printing a dictionary, the order of elements is random. For instance it depends on the computer. So a doctest that involves a directory output may fail on a different computer. The marker `# random` ensures that the doctest is skipped (see http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests).\n\n\n\n> > - the function `TopologicalVectorBundle.atlas()` returns a shallow copy of `self._atlas`; why does it not return directly `self._atlas` ?\n\n> \\\\\n> I just borrowed the same code lines from manifold.py. \n\nAh yes, you are right: that's already there for manifolds. \n\n>I guess, this is for convenience: One should not allow to alter the list when getting the atlas through this method.\n\nYes this could be the reason. Travis, do remember why such a choice was made? \nOn the other side, things are not very consistent here, since `frames()` returns directly `self._frames` and we have the same for many other manifold methods. \n\n> > - shouldn't the method `TopologicalVectorBundle.total_space()` be cached? (possibly using the decorator `@cached_method`)\n\n> \\\\\n> For now, yes. But later on, when the computation of the atlas is implemented, one should update the manifold's atlas, maybe using this method.\n\nOK, I see.",
    "created_at": "2019-09-08T20:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438100",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@DeRhamSource](#comment%3A30):
> 
> Comes later, when all the doc is finished. :)

I will ;-)

>
> > - notice that the doctests that output a dictionary, like
> > {{{
> > sage: E.changes_of_frame()
> > }}}
> >   in line 105 of `trivialization.py`, must be marked `# random`
> \\
> What do you mean?

When printing a dictionary, the order of elements is random. For instance it depends on the computer. So a doctest that involves a directory output may fail on a different computer. The marker `# random` ensures that the doctest is skipped (see http://doc.sagemath.org/html/en/developer/coding_basics.html#special-markup-to-influence-doctests).



> > - the function `TopologicalVectorBundle.atlas()` returns a shallow copy of `self._atlas`; why does it not return directly `self._atlas` ?

> \\
> I just borrowed the same code lines from manifold.py. 

Ah yes, you are right: that's already there for manifolds. 

>I guess, this is for convenience: One should not allow to alter the list when getting the atlas through this method.

Yes this could be the reason. Travis, do remember why such a choice was made? 
On the other side, things are not very consistent here, since `frames()` returns directly `self._frames` and we have the same for many other manifold methods. 

> > - shouldn't the method `TopologicalVectorBundle.total_space()` be cached? (possibly using the decorator `@cached_method`)

> \\
> For now, yes. But later on, when the computation of the atlas is implemented, one should update the manifold's atlas, maybe using this method.

OK, I see.



---

archive/issue_comments_438101.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@egourgoulhon](#comment%3A32):\n> Replying to [@DeRhamSource](#comment%3A30):\n> > > - the function `TopologicalVectorBundle.atlas()` returns a shallow copy of `self._atlas`; why does it not return directly `self._atlas` ?\n\n> > \\\\\n> > I just borrowed the same code lines from manifold.py. \n\n> \n> Ah yes, you are right: that's already there for manifolds. \n> \n> >I guess, this is for convenience: One should not allow to alter the list when getting the atlas through this method.\n\n> \n> Yes this could be the reason. Travis, do remember why such a choice was made? \n> On the other side, things are not very consistent here, since `frames()` returns directly `self._frames` and we have the same for many other manifold methods. \n\nProbably all of them should return copies of the lists because it better protects the data. It is really easy to access stuff and then unintentionally change it, which could then throw your entire system out of balance. Most likely I/we just didn't notice or think about it when doing the initial code.",
    "created_at": "2019-09-08T22:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438101",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@egourgoulhon](#comment%3A32):
> Replying to [@DeRhamSource](#comment%3A30):
> > > - the function `TopologicalVectorBundle.atlas()` returns a shallow copy of `self._atlas`; why does it not return directly `self._atlas` ?

> > \\
> > I just borrowed the same code lines from manifold.py. 

> 
> Ah yes, you are right: that's already there for manifolds. 
> 
> >I guess, this is for convenience: One should not allow to alter the list when getting the atlas through this method.

> 
> Yes this could be the reason. Travis, do remember why such a choice was made? 
> On the other side, things are not very consistent here, since `frames()` returns directly `self._frames` and we have the same for many other manifold methods. 

Probably all of them should return copies of the lists because it better protects the data. It is really easy to access stuff and then unintentionally change it, which could then throw your entire system out of balance. Most likely I/we just didn't notice or think about it when doing the initial code.



---

archive/issue_comments_438102.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@tscrim](#comment%3A33):\n> \n> Probably all of them should return copies of the lists because it better protects the data. It is really easy to access stuff and then unintentionally change it, which could then throw your entire system out of balance. Most likely I/we just didn't notice or think about it when doing the initial code.\n\nMy concern here would be about efficiency. We might have quite often loops like \n\n```\nfor chart in M.atlas():\n    ...\n```\nThis implies that a list is created each time such a loop occurs. But maybe the CPU cost is negligible...",
    "created_at": "2019-09-09T20:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438102",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@tscrim](#comment%3A33):
> 
> Probably all of them should return copies of the lists because it better protects the data. It is really easy to access stuff and then unintentionally change it, which could then throw your entire system out of balance. Most likely I/we just didn't notice or think about it when doing the initial code.

My concern here would be about efficiency. We might have quite often loops like 

```
for chart in M.atlas():
    ...
```
This implies that a list is created each time such a loop occurs. But maybe the CPU cost is negligible...



---

archive/issue_comments_438103.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@egourgoulhon](#comment%3A34):\n> Replying to [@tscrim](#comment%3A33):\n> > \n> > Probably all of them should return copies of the lists because it better protects the data. It is really easy to access stuff and then unintentionally change it, which could then throw your entire system out of balance. Most likely I/we just didn't notice or think about it when doing the initial code.\n\n> \n> My concern here would be about efficiency. We might have quite often loops like \n> \n> ```\n> for chart in M.atlas():\n>     ...\n> ```\n> This implies that a list is created each time such a loop occurs. But maybe the CPU cost is negligible...\n\nThat would be my guess since so much time is spent in doing the computations of the manifold itself. (Python heavily optimizes list manipulations I think too.) Plus, since it is internal, it is much more okay to break encapsulation and just directly call the attribute when you know it is safe (or add a `copy` flag to the accessor methods).",
    "created_at": "2019-09-09T21:27:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438103",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@egourgoulhon](#comment%3A34):
> Replying to [@tscrim](#comment%3A33):
> > 
> > Probably all of them should return copies of the lists because it better protects the data. It is really easy to access stuff and then unintentionally change it, which could then throw your entire system out of balance. Most likely I/we just didn't notice or think about it when doing the initial code.

> 
> My concern here would be about efficiency. We might have quite often loops like 
> 
> ```
> for chart in M.atlas():
>     ...
> ```
> This implies that a list is created each time such a loop occurs. But maybe the CPU cost is negligible...

That would be my guess since so much time is spent in doing the computations of the manifold itself. (Python heavily optimizes list manipulations I think too.) Plus, since it is internal, it is much more okay to break encapsulation and just directly call the attribute when you know it is safe (or add a `copy` flag to the accessor methods).



---

archive/issue_comments_438104.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9011e3d645f9ccbe8df35cfa8883f128312d2d9d\"><code>9011e3d</code></a></td><td><code>Copy lists and frame restriction</code></td></tr></table>\n",
    "created_at": "2019-09-16T12:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438104",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9011e3d645f9ccbe8df35cfa8883f128312d2d9d"><code>9011e3d</code></a></td><td><code>Copy lists and frame restriction</code></td></tr></table>




---

archive/issue_comments_438105.json:
```json
{
    "body": "Changed commit from **[`901df65`](https://github.com/sagemath/sagetrac-mirror/commit/901df657fef7850b041b7a98714fccb2e9b7b669)** to **[`9011e3d`](https://github.com/sagemath/sagetrac-mirror/commit/9011e3d645f9ccbe8df35cfa8883f128312d2d9d)**",
    "created_at": "2019-09-16T12:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438105",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`901df65`](https://github.com/sagemath/sagetrac-mirror/commit/901df657fef7850b041b7a98714fccb2e9b7b669)** to **[`9011e3d`](https://github.com/sagemath/sagetrac-mirror/commit/9011e3d645f9ccbe8df35cfa8883f128312d2d9d)**



---

archive/issue_comments_438106.json:
```json
{
    "body": "There was an issue with the restrictions of (vector) frames. Namely, the list of sub- and superframes was not complete and depended on some strange random order. Here is an example:\n\n```\nsage: M = Manifold(2, 'M')\nsage: U = M.open_subset('U'); V = M.open_subset('V'); W = U.intersection(V, name='W')\nsage: e = M.vector_frame('e')\nsage: eV = e.restrict(V); eU = e.restrict(U); eW = e.restrict(W)\nsage: eW._superframes\n{Vector frame (W, (e_0,e_1)),\n Vector frame (M, (e_0,e_1)),\n Vector frame (V, (e_0,e_1))}\nsage: eU._subframes\n{Vector frame (U, (e_0,e_1))}\nsage: eV._subframes\n{Vector frame (W, (e_0,e_1)), Vector frame (V, (e_0,e_1))}\n```\n\nI fixed it by avoiding any recursion and expanding the tree of subframes (and superframes) starting from the reference frame. Please check.",
    "created_at": "2019-09-16T13:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438106",
    "user": "https://github.com/DeRhamSource"
}
```

There was an issue with the restrictions of (vector) frames. Namely, the list of sub- and superframes was not complete and depended on some strange random order. Here is an example:

```
sage: M = Manifold(2, 'M')
sage: U = M.open_subset('U'); V = M.open_subset('V'); W = U.intersection(V, name='W')
sage: e = M.vector_frame('e')
sage: eV = e.restrict(V); eU = e.restrict(U); eW = e.restrict(W)
sage: eW._superframes
{Vector frame (W, (e_0,e_1)),
 Vector frame (M, (e_0,e_1)),
 Vector frame (V, (e_0,e_1))}
sage: eU._subframes
{Vector frame (U, (e_0,e_1))}
sage: eV._subframes
{Vector frame (W, (e_0,e_1)), Vector frame (V, (e_0,e_1))}
```

I fixed it by avoiding any recursion and expanding the tree of subframes (and superframes) starting from the reference frame. Please check.



---

archive/issue_comments_438107.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@DeRhamSource](#comment%3A37):\n> There was an issue with the restrictions of (vector) frames. Namely, the list of sub- and superframes was not complete and depended on some strange random order. \n\n>\n> I fixed it by avoiding any recursion and expanding the tree of subframes (and superframes) starting from the reference frame. Please check.\n\nLooks good to me. Thanks for the fix!",
    "created_at": "2019-09-18T20:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438107",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@DeRhamSource](#comment%3A37):
> There was an issue with the restrictions of (vector) frames. Namely, the list of sub- and superframes was not complete and depended on some strange random order. 

>
> I fixed it by avoiding any recursion and expanding the tree of subframes (and superframes) starting from the reference frame. Please check.

Looks good to me. Thanks for the fix!



---

archive/issue_comments_438108.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17657eccfc25e229a69649e4b0c38cf1c603bf09\"><code>17657ec</code></a></td><td><code>Doctest added</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef03c38335577ba176ea07cb03f9400d78e6b2d6\"><code>ef03c38</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b0c7a7f8894a881b51158472ef3d3600dae63d0\"><code>3b0c7a7</code></a></td><td><code>minor doctest changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9600762f72d9a49e408b18aeda17a14ecfad1327\"><code>9600762</code></a></td><td><code>inverses of automorphisms without SR inforcement</code></td></tr></table>\n",
    "created_at": "2019-09-24T13:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438108",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17657eccfc25e229a69649e4b0c38cf1c603bf09"><code>17657ec</code></a></td><td><code>Doctest added</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef03c38335577ba176ea07cb03f9400d78e6b2d6"><code>ef03c38</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b0c7a7f8894a881b51158472ef3d3600dae63d0"><code>3b0c7a7</code></a></td><td><code>minor doctest changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9600762f72d9a49e408b18aeda17a14ecfad1327"><code>9600762</code></a></td><td><code>inverses of automorphisms without SR inforcement</code></td></tr></table>




---

archive/issue_comments_438109.json:
```json
{
    "body": "Changed commit from **[`9011e3d`](https://github.com/sagemath/sagetrac-mirror/commit/9011e3d645f9ccbe8df35cfa8883f128312d2d9d)** to **[`9600762`](https://github.com/sagemath/sagetrac-mirror/commit/9600762f72d9a49e408b18aeda17a14ecfad1327)**",
    "created_at": "2019-09-24T13:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438109",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9011e3d`](https://github.com/sagemath/sagetrac-mirror/commit/9011e3d645f9ccbe8df35cfa8883f128312d2d9d)** to **[`9600762`](https://github.com/sagemath/sagetrac-mirror/commit/9600762f72d9a49e408b18aeda17a14ecfad1327)**



---

archive/issue_comments_438110.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI declared `ScalarFieldAlgebra` as a field so that matrix computations like inverses and determinants make no problems. When ticket #28189 is merged (hopefully in 9b0), this can be undone. But for now, this ticket does not depend on #28189 anymore.\n\nSince this solves some problems in the preexisting code, I removed the SR enforcement in `differentiable/automorphismfield.py` for more compatibility.\n\nDo you agree?",
    "created_at": "2019-09-24T13:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438110",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:40" align="right">comment:40</div>

I declared `ScalarFieldAlgebra` as a field so that matrix computations like inverses and determinants make no problems. When ticket #28189 is merged (hopefully in 9b0), this can be undone. But for now, this ticket does not depend on #28189 anymore.

Since this solves some problems in the preexisting code, I removed the SR enforcement in `differentiable/automorphismfield.py` for more compatibility.

Do you agree?



---

archive/issue_comments_438111.json:
```json
{
    "body": "Changed dependencies from **#28189** to none",
    "created_at": "2019-09-24T13:38:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438111",
    "user": "https://github.com/DeRhamSource"
}
```

Changed dependencies from **#28189** to none



---

archive/issue_comments_438112.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e38d4721c7addcb8ba3acc03fbcc17cb7d8b3cc\"><code>2e38d47</code></a></td><td><code>inverses of automorphisms without SR enforcement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7363b9f2be8d829e97069e996868335a7cf923ad\"><code>7363b9f</code></a></td><td><code>28189: prefer R in Fields() rather than R.is_field()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/033960f3e3bc2f46cea69ce5ae4e5044718bdc9c\"><code>033960f</code></a></td><td><code>28189: fix doctest in judson-abstract-algebra book</code></td></tr></table>\n",
    "created_at": "2019-09-24T19:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438112",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e38d4721c7addcb8ba3acc03fbcc17cb7d8b3cc"><code>2e38d47</code></a></td><td><code>inverses of automorphisms without SR enforcement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7363b9f2be8d829e97069e996868335a7cf923ad"><code>7363b9f</code></a></td><td><code>28189: prefer R in Fields() rather than R.is_field()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/033960f3e3bc2f46cea69ce5ae4e5044718bdc9c"><code>033960f</code></a></td><td><code>28189: fix doctest in judson-abstract-algebra book</code></td></tr></table>




---

archive/issue_comments_438113.json:
```json
{
    "body": "Changed commit from **[`9600762`](https://github.com/sagemath/sagetrac-mirror/commit/9600762f72d9a49e408b18aeda17a14ecfad1327)** to **[`033960f`](https://github.com/sagemath/sagetrac-mirror/commit/033960f3e3bc2f46cea69ce5ae4e5044718bdc9c)**",
    "created_at": "2019-09-24T19:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438113",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9600762`](https://github.com/sagemath/sagetrac-mirror/commit/9600762f72d9a49e408b18aeda17a14ecfad1327)** to **[`033960f`](https://github.com/sagemath/sagetrac-mirror/commit/033960f3e3bc2f46cea69ce5ae4e5044718bdc9c)**



---

archive/issue_comments_438114.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nA merge of #28189 for 9b0 seems imminent. Since this ticket will be merged earliest in 9b0, I added the dependencies again. Imao, it makes things easier and less complicated, especially for characteristic classes.\n\nI am sorry for potential inconveniences.",
    "created_at": "2019-09-24T19:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438114",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:43" align="right">comment:43</div>

A merge of #28189 for 9b0 seems imminent. Since this ticket will be merged earliest in 9b0, I added the dependencies again. Imao, it makes things easier and less complicated, especially for characteristic classes.

I am sorry for potential inconveniences.



---

archive/issue_comments_438115.json:
```json
{
    "body": "Dependencies: **#28189**",
    "created_at": "2019-09-24T19:39:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438115",
    "user": "https://github.com/DeRhamSource"
}
```

Dependencies: **#28189**



---

archive/issue_comments_438116.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,26 @@\n Implementation of topological and differentiable vector bundles over manifolds.\n+\n+**Features:**\n+\n+- abstract vector bundles on topological manifolds\n+- trivializations\n+- local frames\n+- simple sections\n+- vector bundle fibers\n+\n+**Improvements in the preexisting code**\n+\n+- restriction of vectorframes depended on some strange order: fixed!\n+- 'SR' enforcement for automorphism field inversion removed (due to ticket #28189)\n+- \n+\n+**Planned soon**\n+\n+- inheriting `VectorFrames from `LocalFrames`\n+- consistent use of preexisting vector frames in tensor bundles\n+- inheriting tangent spaces from vector bundle fibers?\n+\n+**Planned in the farther future**\n+\n+- sections of general tensor products\n+- tensor products and Whitney sums of vector bundles\n``````\n",
    "created_at": "2019-09-25T08:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438116",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,26 @@
 Implementation of topological and differentiable vector bundles over manifolds.
+
+**Features:**
+
+- abstract vector bundles on topological manifolds
+- trivializations
+- local frames
+- simple sections
+- vector bundle fibers
+
+**Improvements in the preexisting code**
+
+- restriction of vectorframes depended on some strange order: fixed!
+- 'SR' enforcement for automorphism field inversion removed (due to ticket #28189)
+- 
+
+**Planned soon**
+
+- inheriting `VectorFrames from `LocalFrames`
+- consistent use of preexisting vector frames in tensor bundles
+- inheriting tangent spaces from vector bundle fibers?
+
+**Planned in the farther future**
+
+- sections of general tensor products
+- tensor products and Whitney sums of vector bundles
``````




---

archive/issue_comments_438117.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,7 +12,7 @@\n \n - restriction of vectorframes depended on some strange order: fixed!\n - 'SR' enforcement for automorphism field inversion removed (due to ticket #28189)\n-- \n+- `is_unit()` method implemented for scalar fields (to check whether a matrix with entries in the scalar field algebra is invertible)\n \n **Planned soon**\n \n``````\n",
    "created_at": "2019-09-25T08:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438117",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,7 +12,7 @@
 
 - restriction of vectorframes depended on some strange order: fixed!
 - 'SR' enforcement for automorphism field inversion removed (due to ticket #28189)
-- 
+- `is_unit()` method implemented for scalar fields (to check whether a matrix with entries in the scalar field algebra is invertible)
 
 **Planned soon**
 
``````




---

archive/issue_comments_438118.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,7 +16,7 @@\n \n **Planned soon**\n \n-- inheriting `VectorFrames from `LocalFrames`\n+- inheriting `VectorFrames` from `LocalFrames`\n - consistent use of preexisting vector frames in tensor bundles\n - inheriting tangent spaces from vector bundle fibers?\n \n``````\n",
    "created_at": "2019-09-25T08:58:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438118",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,7 +16,7 @@
 
 **Planned soon**
 
-- inheriting `VectorFrames from `LocalFrames`
+- inheriting `VectorFrames` from `LocalFrames`
 - consistent use of preexisting vector frames in tensor bundles
 - inheriting tangent spaces from vector bundle fibers?
 
``````




---

archive/issue_events_383197.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-09-25T09:04:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383197"
}
```



---

archive/issue_events_383198.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-09-25T09:04:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383198"
}
```



---

archive/issue_comments_438119.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,13 +11,13 @@\n **Improvements in the preexisting code**\n \n - restriction of vectorframes depended on some strange order: fixed!\n-- 'SR' enforcement for automorphism field inversion removed (due to ticket #28189)\n+- `SR` enforcement for automorphism field inversion removed (due to ticket #28189)\n - `is_unit()` method implemented for scalar fields (to check whether a matrix with entries in the scalar field algebra is invertible)\n \n **Planned soon**\n \n - inheriting `VectorFrames` from `LocalFrames`\n-- consistent use of preexisting vector frames in tensor bundles\n+- derived from there: consistent use of preexisting vector frame implementation in tensor bundles as vector bundles\n - inheriting tangent spaces from vector bundle fibers?\n \n **Planned in the farther future**\n``````\n",
    "created_at": "2019-09-25T09:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438119",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,13 +11,13 @@
 **Improvements in the preexisting code**
 
 - restriction of vectorframes depended on some strange order: fixed!
-- 'SR' enforcement for automorphism field inversion removed (due to ticket #28189)
+- `SR` enforcement for automorphism field inversion removed (due to ticket #28189)
 - `is_unit()` method implemented for scalar fields (to check whether a matrix with entries in the scalar field algebra is invertible)
 
 **Planned soon**
 
 - inheriting `VectorFrames` from `LocalFrames`
-- consistent use of preexisting vector frames in tensor bundles
+- derived from there: consistent use of preexisting vector frame implementation in tensor bundles as vector bundles
 - inheriting tangent spaces from vector bundle fibers?
 
 **Planned in the farther future**
``````




---

archive/issue_comments_438120.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,3 +24,4 @@\n \n - sections of general tensor products\n - tensor products and Whitney sums of vector bundles\n+- return the total space with charts\n``````\n",
    "created_at": "2019-09-25T09:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438120",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,3 +24,4 @@
 
 - sections of general tensor products
 - tensor products and Whitney sums of vector bundles
+- return the total space with charts
``````




---

archive/issue_comments_438121.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d92db33c5cc890b5bb1d81a7da83f99fa48445c\"><code>5d92db3</code></a></td><td><code>28189: prefer R in Fields() rather than R.is_field()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7767b304009dea856ebf67460ca3f7d0440da51f\"><code>7767b30</code></a></td><td><code>28189: fix doctest in judson-abstract-algebra book</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4981d44dbb084eb91be19d9acd2662cffaed1d4f\"><code>4981d44</code></a></td><td><code>fix accidental merge with #28402</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc181832f325b1dce39837b83c70914db1895900\"><code>fc18183</code></a></td><td><code>Merge new commit of branch 't/28189/28189' into t/28159/vector_bundles</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69d05dad4177d25333b85de782ebecea1615baa4\"><code>69d05da</code></a></td><td><code>Doctests for section methods finished</code></td></tr></table>\n",
    "created_at": "2019-09-25T14:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438121",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d92db33c5cc890b5bb1d81a7da83f99fa48445c"><code>5d92db3</code></a></td><td><code>28189: prefer R in Fields() rather than R.is_field()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7767b304009dea856ebf67460ca3f7d0440da51f"><code>7767b30</code></a></td><td><code>28189: fix doctest in judson-abstract-algebra book</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4981d44dbb084eb91be19d9acd2662cffaed1d4f"><code>4981d44</code></a></td><td><code>fix accidental merge with #28402</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc181832f325b1dce39837b83c70914db1895900"><code>fc18183</code></a></td><td><code>Merge new commit of branch 't/28189/28189' into t/28159/vector_bundles</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69d05dad4177d25333b85de782ebecea1615baa4"><code>69d05da</code></a></td><td><code>Doctests for section methods finished</code></td></tr></table>




---

archive/issue_comments_438122.json:
```json
{
    "body": "Changed commit from **[`033960f`](https://github.com/sagemath/sagetrac-mirror/commit/033960f3e3bc2f46cea69ce5ae4e5044718bdc9c)** to **[`69d05da`](https://github.com/sagemath/sagetrac-mirror/commit/69d05dad4177d25333b85de782ebecea1615baa4)**",
    "created_at": "2019-09-25T14:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438122",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`033960f`](https://github.com/sagemath/sagetrac-mirror/commit/033960f3e3bc2f46cea69ce5ae4e5044718bdc9c)** to **[`69d05da`](https://github.com/sagemath/sagetrac-mirror/commit/69d05dad4177d25333b85de782ebecea1615baa4)**



---

archive/issue_comments_438123.json:
```json
{
    "body": "Changed commit from **[`69d05da`](https://github.com/sagemath/sagetrac-mirror/commit/69d05dad4177d25333b85de782ebecea1615baa4)** to **[`a737240`](https://github.com/sagemath/sagetrac-mirror/commit/a737240ae5f5b6c07bf969e220062135e8955675)**",
    "created_at": "2019-10-04T14:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438123",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69d05da`](https://github.com/sagemath/sagetrac-mirror/commit/69d05dad4177d25333b85de782ebecea1615baa4)** to **[`a737240`](https://github.com/sagemath/sagetrac-mirror/commit/a737240ae5f5b6c07bf969e220062135e8955675)**



---

archive/issue_comments_438124.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a737240ae5f5b6c07bf969e220062135e8955675\"><code>a737240</code></a></td><td><code>Doctests finished + default frame + typos</code></td></tr></table>\n",
    "created_at": "2019-10-04T14:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438124",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a737240ae5f5b6c07bf969e220062135e8955675"><code>a737240</code></a></td><td><code>Doctests finished + default frame + typos</code></td></tr></table>




---

archive/issue_comments_438125.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nSo, I guess, all pieces of the puzzles are fit together now. Please take a look, give me a feedback and tell me what is missing.\n\nI have some difficulties to interpret the docbuild errors. Can someone help? Is there a documentation?\n\nIt seems, we are almost done. :)",
    "created_at": "2019-10-04T14:42:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438125",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:52" align="right">comment:52</div>

So, I guess, all pieces of the puzzles are fit together now. Please take a look, give me a feedback and tell me what is missing.

I have some difficulties to interpret the docbuild errors. Can someone help? Is there a documentation?

It seems, we are almost done. :)



---

archive/issue_comments_438126.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nBy the way: How should the authorship be handled? I copied most of the files and just adapted them. So, the other authors should be mentioned.",
    "created_at": "2019-10-04T14:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438126",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:53" align="right">comment:53</div>

By the way: How should the authorship be handled? I copied most of the files and just adapted them. So, the other authors should be mentioned.



---

archive/issue_comments_438127.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,6 +7,7 @@\n - local frames\n - simple sections\n - vector bundle fibers\n+- differentiable vector bundles and tensor bundles\n \n **Improvements in the preexisting code**\n \n@@ -14,12 +15,6 @@\n - `SR` enforcement for automorphism field inversion removed (due to ticket #28189)\n - `is_unit()` method implemented for scalar fields (to check whether a matrix with entries in the scalar field algebra is invertible)\n \n-**Planned soon**\n-\n-- inheriting `VectorFrames` from `LocalFrames`\n-- derived from there: consistent use of preexisting vector frame implementation in tensor bundles as vector bundles\n-- inheriting tangent spaces from vector bundle fibers?\n-\n **Planned in the farther future**\n \n - sections of general tensor products\n``````\n",
    "created_at": "2019-10-04T15:16:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438127",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,6 +7,7 @@
 - local frames
 - simple sections
 - vector bundle fibers
+- differentiable vector bundles and tensor bundles
 
 **Improvements in the preexisting code**
 
@@ -14,12 +15,6 @@
 - `SR` enforcement for automorphism field inversion removed (due to ticket #28189)
 - `is_unit()` method implemented for scalar fields (to check whether a matrix with entries in the scalar field algebra is invertible)
 
-**Planned soon**
-
-- inheriting `VectorFrames` from `LocalFrames`
-- derived from there: consistent use of preexisting vector frame implementation in tensor bundles as vector bundles
-- inheriting tangent spaces from vector bundle fibers?
-
 **Planned in the farther future**
 
 - sections of general tensor products
``````




---

archive/issue_comments_438128.json:
```json
{
    "body": "Changed commit from **[`a737240`](https://github.com/sagemath/sagetrac-mirror/commit/a737240ae5f5b6c07bf969e220062135e8955675)** to **[`f4ef538`](https://github.com/sagemath/sagetrac-mirror/commit/f4ef538c162039ea301de1626791405a33bbb65c)**",
    "created_at": "2019-10-04T15:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438128",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a737240`](https://github.com/sagemath/sagetrac-mirror/commit/a737240ae5f5b6c07bf969e220062135e8955675)** to **[`f4ef538`](https://github.com/sagemath/sagetrac-mirror/commit/f4ef538c162039ea301de1626791405a33bbb65c)**



---

archive/issue_comments_438129.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/356147c312df05ddfe3c7444c9a336293ed43184\"><code>356147c</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4ef538c162039ea301de1626791405a33bbb65c\"><code>f4ef538</code></a></td><td><code>Differentiability of total space</code></td></tr></table>\n",
    "created_at": "2019-10-04T15:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438129",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/356147c312df05ddfe3c7444c9a336293ed43184"><code>356147c</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4ef538c162039ea301de1626791405a33bbb65c"><code>f4ef538</code></a></td><td><code>Differentiability of total space</code></td></tr></table>




---

archive/issue_events_383199.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-04T18:53:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383199"
}
```



---

archive/issue_comments_438130.json:
```json
{
    "body": "Reviewer: **Eric Gourgoulhon, Travis Scrimshaw**",
    "created_at": "2019-10-04T18:53:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438130",
    "user": "https://github.com/DeRhamSource"
}
```

Reviewer: **Eric Gourgoulhon, Travis Scrimshaw**



---

archive/issue_comments_438131.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nDocbuild errors are notoriously quite difficult. Unfortunately it usually just means going over the file carefully with some general hint from the error message about what you should be looking for. I can also go through it if you haven't been able to find what is going wrong.\n\nAs for authorship, I would say just listing yourself as the author because you did write the code, even if it is adapted from others. I don't think they should (or need to) have a copyright. Although it doesn't hurt to say it was based off another file, but I don't have a stake in this. Eric is best to comment on this.\n\nAre there things you can put as methods in the category of vector bundles? At least I think there should be an abstract method for the base space, and maybe also the projection map (i.e., things in this category should have a common way to give the defining properties).\n\nThis code doesn't do anything:\n\n```\n        if update_atlas:\n            # TODO: if self._atlas not empty, introduce charts\n            pass\n```\n\nI would change `Moebius` to `M\u00f6bius` in the documentation (also make sure to add the utf8 encoding `# -*- coding: utf-8 -*-` to the first line of such files).\n\n```diff\n-        desc = \"Module \"\n-        desc += self._name + \" \"\n-        desc += \"of sections \"\n-        desc += \"on the {} \".format(self._domain)\n-        desc += \"with values in the \" + self._vbundle.base_field_type() + \" \"\n-        desc += \"vector bundle \" + self._vbundle._name + \" \"\n-        desc += \"of rank {}\".format(self._vbundle.rank())\n+        desc = \"Module {} of sections on the {} with values in the {} vector bundle of rank {}\"\n+        desc = desc.format(self._name, self._domain, self._vbundle.base_field_type(), self._vbundle.rank())\n```\n\n```diff\n-Sets the default local frame on ``self``.\n+Set the default local frame on ``self``.\n```\n\nI will probably have more changes, but I don't have time right now to look in full detail.",
    "created_at": "2019-10-04T22:39:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438131",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:57" align="right">comment:57</div>

Docbuild errors are notoriously quite difficult. Unfortunately it usually just means going over the file carefully with some general hint from the error message about what you should be looking for. I can also go through it if you haven't been able to find what is going wrong.

As for authorship, I would say just listing yourself as the author because you did write the code, even if it is adapted from others. I don't think they should (or need to) have a copyright. Although it doesn't hurt to say it was based off another file, but I don't have a stake in this. Eric is best to comment on this.

Are there things you can put as methods in the category of vector bundles? At least I think there should be an abstract method for the base space, and maybe also the projection map (i.e., things in this category should have a common way to give the defining properties).

This code doesn't do anything:

```
        if update_atlas:
            # TODO: if self._atlas not empty, introduce charts
            pass
```

I would change `Moebius` to `Mbius` in the documentation (also make sure to add the utf8 encoding `# -*- coding: utf-8 -*-` to the first line of such files).

```diff
-        desc = "Module "
-        desc += self._name + " "
-        desc += "of sections "
-        desc += "on the {} ".format(self._domain)
-        desc += "with values in the " + self._vbundle.base_field_type() + " "
-        desc += "vector bundle " + self._vbundle._name + " "
-        desc += "of rank {}".format(self._vbundle.rank())
+        desc = "Module {} of sections on the {} with values in the {} vector bundle of rank {}"
+        desc = desc.format(self._name, self._domain, self._vbundle.base_field_type(), self._vbundle.rank())
```

```diff
-Sets the default local frame on ``self``.
+Set the default local frame on ``self``.
```

I will probably have more changes, but I don't have time right now to look in full detail.



---

archive/issue_comments_438132.json:
```json
{
    "body": "Changed commit from **[`f4ef538`](https://github.com/sagemath/sagetrac-mirror/commit/f4ef538c162039ea301de1626791405a33bbb65c)** to **[`f484b77`](https://github.com/sagemath/sagetrac-mirror/commit/f484b7702cac56ad495c22735e15876b8232f8bf)**",
    "created_at": "2019-10-05T09:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438132",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f4ef538`](https://github.com/sagemath/sagetrac-mirror/commit/f4ef538c162039ea301de1626791405a33bbb65c)** to **[`f484b77`](https://github.com/sagemath/sagetrac-mirror/commit/f484b7702cac56ad495c22735e15876b8232f8bf)**



---

archive/issue_comments_438133.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f484b7702cac56ad495c22735e15876b8232f8bf\"><code>f484b77</code></a></td><td><code>Docbuild errors fixed + Minor fixes</code></td></tr></table>\n",
    "created_at": "2019-10-05T09:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438133",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f484b7702cac56ad495c22735e15876b8232f8bf"><code>f484b77</code></a></td><td><code>Docbuild errors fixed + Minor fixes</code></td></tr></table>




---

archive/issue_comments_438134.json:
```json
{
    "body": "Changed commit from **[`f484b77`](https://github.com/sagemath/sagetrac-mirror/commit/f484b7702cac56ad495c22735e15876b8232f8bf)** to **[`1735541`](https://github.com/sagemath/sagetrac-mirror/commit/1735541337db3f446641782dc6ce719bd417e3b5)**",
    "created_at": "2019-10-05T09:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438134",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f484b77`](https://github.com/sagemath/sagetrac-mirror/commit/f484b7702cac56ad495c22735e15876b8232f8bf)** to **[`1735541`](https://github.com/sagemath/sagetrac-mirror/commit/1735541337db3f446641782dc6ce719bd417e3b5)**



---

archive/issue_comments_438135.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1735541337db3f446641782dc6ce719bd417e3b5\"><code>1735541</code></a></td><td><code>Very small fix</code></td></tr></table>\n",
    "created_at": "2019-10-05T09:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438135",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1735541337db3f446641782dc6ce719bd417e3b5"><code>1735541</code></a></td><td><code>Very small fix</code></td></tr></table>




---

archive/issue_comments_438136.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nThanks for your feedback!\n\nReplying to [@tscrim](#comment%3A57):\n> Docbuild errors are notoriously quite difficult. Unfortunately it usually just means going over the file carefully with some general hint from the error message about what you should be looking for. I can also go through it if you haven't been able to find what is going wrong.\n\nI guess, I have eliminated all doctest errors caused by these files. Please overlook this.\n\n> As for authorship, I would say just listing yourself as the author because you did write the code, even if it is adapted from others. I don't think they should (or need to) have a copyright. Although it doesn't hurt to say it was based off another file, but I don't have a stake in this. Eric is best to comment on this.\n\nDone. I kept Eric in the copyrights. Is that appropriate?\n\n> This code doesn't do anything:\n> \n> ```\n>         if update_atlas:\n>             # TODO: if self._atlas not empty, introduce charts\n>             pass\n> ```\n> \n> I would change `Moebius` to `M\u00f6bius` in the documentation (also make sure to add the utf8 encoding `# -*- coding: utf-8 -*-` to the first line of such files).\n> \n> ```diff\n> -        desc = \"Module \"\n> -        desc += self._name + \" \"\n> -        desc += \"of sections \"\n> -        desc += \"on the {} \".format(self._domain)\n> -        desc += \"with values in the \" + self._vbundle.base_field_type() + \" \"\n> -        desc += \"vector bundle \" + self._vbundle._name + \" \"\n> -        desc += \"of rank {}\".format(self._vbundle.rank())\n> +        desc = \"Module {} of sections on the {} with values in the {} vector bundle of rank {}\"\n> +        desc = desc.format(self._name, self._domain, self._vbundle.base_field_type(), self._vbundle.rank())\n> ```\n> \n> ```diff\n> -Sets the default local frame on ``self``.\n> +Set the default local frame on ``self``.\n> ```\n\nDone!\n\n> Are there things you can put as methods in the category of vector bundles? At least I think there should be an abstract method for the base space, and maybe also the projection map (i.e., things in this category should have a common way to give the defining properties).\n\nWhat do you mean? :/",
    "created_at": "2019-10-05T09:33:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438136",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:60" align="right">comment:60</div>

Thanks for your feedback!

Replying to [@tscrim](#comment%3A57):
> Docbuild errors are notoriously quite difficult. Unfortunately it usually just means going over the file carefully with some general hint from the error message about what you should be looking for. I can also go through it if you haven't been able to find what is going wrong.

I guess, I have eliminated all doctest errors caused by these files. Please overlook this.

> As for authorship, I would say just listing yourself as the author because you did write the code, even if it is adapted from others. I don't think they should (or need to) have a copyright. Although it doesn't hurt to say it was based off another file, but I don't have a stake in this. Eric is best to comment on this.

Done. I kept Eric in the copyrights. Is that appropriate?

> This code doesn't do anything:
> 
> ```
>         if update_atlas:
>             # TODO: if self._atlas not empty, introduce charts
>             pass
> ```
> 
> I would change `Moebius` to `Mbius` in the documentation (also make sure to add the utf8 encoding `# -*- coding: utf-8 -*-` to the first line of such files).
> 
> ```diff
> -        desc = "Module "
> -        desc += self._name + " "
> -        desc += "of sections "
> -        desc += "on the {} ".format(self._domain)
> -        desc += "with values in the " + self._vbundle.base_field_type() + " "
> -        desc += "vector bundle " + self._vbundle._name + " "
> -        desc += "of rank {}".format(self._vbundle.rank())
> +        desc = "Module {} of sections on the {} with values in the {} vector bundle of rank {}"
> +        desc = desc.format(self._name, self._domain, self._vbundle.base_field_type(), self._vbundle.rank())
> ```
> 
> ```diff
> -Sets the default local frame on ``self``.
> +Set the default local frame on ``self``.
> ```

Done!

> Are there things you can put as methods in the category of vector bundles? At least I think there should be an abstract method for the base space, and maybe also the projection map (i.e., things in this category should have a common way to give the defining properties).

What do you mean? :/



---

archive/issue_comments_438137.json:
```json
{
    "body": "Changed commit from **[`1735541`](https://github.com/sagemath/sagetrac-mirror/commit/1735541337db3f446641782dc6ce719bd417e3b5)** to **[`54237ef`](https://github.com/sagemath/sagetrac-mirror/commit/54237ef4815198c80a0f95e949a8debaa7aafd2f)**",
    "created_at": "2019-10-05T10:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438137",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1735541`](https://github.com/sagemath/sagetrac-mirror/commit/1735541337db3f446641782dc6ce719bd417e3b5)** to **[`54237ef`](https://github.com/sagemath/sagetrac-mirror/commit/54237ef4815198c80a0f95e949a8debaa7aafd2f)**



---

archive/issue_comments_438138.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54237ef4815198c80a0f95e949a8debaa7aafd2f\"><code>54237ef</code></a></td><td><code>Pyflakes and Coverage</code></td></tr></table>\n",
    "created_at": "2019-10-05T10:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438138",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54237ef4815198c80a0f95e949a8debaa7aafd2f"><code>54237ef</code></a></td><td><code>Pyflakes and Coverage</code></td></tr></table>




---

archive/issue_comments_438139.json:
```json
{
    "body": "Changed commit from **[`54237ef`](https://github.com/sagemath/sagetrac-mirror/commit/54237ef4815198c80a0f95e949a8debaa7aafd2f)** to **[`67cf8df`](https://github.com/sagemath/sagetrac-mirror/commit/67cf8df97fe082f277fb54b1d3a0626f9617ac7f)**",
    "created_at": "2019-10-05T10:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438139",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`54237ef`](https://github.com/sagemath/sagetrac-mirror/commit/54237ef4815198c80a0f95e949a8debaa7aafd2f)** to **[`67cf8df`](https://github.com/sagemath/sagetrac-mirror/commit/67cf8df97fe082f277fb54b1d3a0626f9617ac7f)**



---

archive/issue_comments_438140.json:
```json
{
    "body": "<div id=\"comment:62\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67cf8df97fe082f277fb54b1d3a0626f9617ac7f\"><code>67cf8df</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr></table>\n",
    "created_at": "2019-10-05T10:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438140",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:62"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67cf8df97fe082f277fb54b1d3a0626f9617ac7f"><code>67cf8df</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr></table>




---

archive/issue_comments_438141.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@DeRhamSource](#comment%3A60):\n> \n> Replying to [@tscrim](#comment%3A57):\n> > Docbuild errors are notoriously quite difficult. Unfortunately it usually just means going over the file carefully with some general hint from the error message about what you should be looking for. I can also go through it if you haven't been able to find what is going wrong.\n\n> \n> I guess, I have eliminated all doctest errors caused by these files. Please overlook this.\n> \n\nThanks for this painful work. It is true that sphinx messages are not very informative. In particular the line numbers do not refer to the start of the file but to the start of the docstring. For this reason, one should not hesitate to build the doc often, possibly after each modification of a doctring. For this, do not run `make doc`, which takes ages (*), use instead `sage -docbuild reference/manifolds html`.\n\n(*) hopefully there is a ticket about this (I don't remember which one at the moment).\n> > As for authorship, I would say just listing yourself as the author because you did write the code, even if it is adapted from others. I don't think they should (or need to) have a copyright. Although it doesn't hurt to say it was based off another file, but I don't have a stake in this. Eric is best to comment on this.\n\n> \n> Done. I kept Eric in the copyrights. Is that appropriate?\n\nI think you can remove my name from the copyright, leaving just yours. \n\nI'll have a look at the code soon.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54237ef4815198c80a0f95e949a8debaa7aafd2f\"><code>54237ef</code></a></td><td><code>Pyflakes and Coverage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67cf8df97fe082f277fb54b1d3a0626f9617ac7f\"><code>67cf8df</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr></table>\n",
    "created_at": "2019-10-05T10:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438141",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@DeRhamSource](#comment%3A60):
> 
> Replying to [@tscrim](#comment%3A57):
> > Docbuild errors are notoriously quite difficult. Unfortunately it usually just means going over the file carefully with some general hint from the error message about what you should be looking for. I can also go through it if you haven't been able to find what is going wrong.

> 
> I guess, I have eliminated all doctest errors caused by these files. Please overlook this.
> 

Thanks for this painful work. It is true that sphinx messages are not very informative. In particular the line numbers do not refer to the start of the file but to the start of the docstring. For this reason, one should not hesitate to build the doc often, possibly after each modification of a doctring. For this, do not run `make doc`, which takes ages (*), use instead `sage -docbuild reference/manifolds html`.

(*) hopefully there is a ticket about this (I don't remember which one at the moment).
> > As for authorship, I would say just listing yourself as the author because you did write the code, even if it is adapted from others. I don't think they should (or need to) have a copyright. Although it doesn't hurt to say it was based off another file, but I don't have a stake in this. Eric is best to comment on this.

> 
> Done. I kept Eric in the copyrights. Is that appropriate?

I think you can remove my name from the copyright, leaving just yours. 

I'll have a look at the code soon.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54237ef4815198c80a0f95e949a8debaa7aafd2f"><code>54237ef</code></a></td><td><code>Pyflakes and Coverage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67cf8df97fe082f277fb54b1d3a0626f9617ac7f"><code>67cf8df</code></a></td><td><code>Merge branch 'develop' into t/28159/vector_bundles</code></td></tr></table>




---

archive/issue_comments_438142.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThank you! I fixed pyflakes and coverage errors. I'm looking forward to your review! :)",
    "created_at": "2019-10-05T10:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438142",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:64" align="right">comment:64</div>

Thank you! I fixed pyflakes and coverage errors. I'm looking forward to your review! :)



---

archive/issue_comments_438143.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9832d02285f25bdb95a11efcb6e705938a36c3f5\"><code>9832d02</code></a></td><td><code>Pyflakes and Coverage</code></td></tr></table>\n",
    "created_at": "2019-10-06T08:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438143",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9832d02285f25bdb95a11efcb6e705938a36c3f5"><code>9832d02</code></a></td><td><code>Pyflakes and Coverage</code></td></tr></table>




---

archive/issue_comments_438144.json:
```json
{
    "body": "Changed commit from **[`67cf8df`](https://github.com/sagemath/sagetrac-mirror/commit/67cf8df97fe082f277fb54b1d3a0626f9617ac7f)** to **[`9832d02`](https://github.com/sagemath/sagetrac-mirror/commit/9832d02285f25bdb95a11efcb6e705938a36c3f5)**",
    "created_at": "2019-10-06T08:05:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438144",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`67cf8df`](https://github.com/sagemath/sagetrac-mirror/commit/67cf8df97fe082f277fb54b1d3a0626f9617ac7f)** to **[`9832d02`](https://github.com/sagemath/sagetrac-mirror/commit/9832d02285f25bdb95a11efcb6e705938a36c3f5)**



---

archive/issue_comments_438145.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nThanks for completing the documentation. \n\nWith python3 Sage 9.0.beta0, I've got the following errors:\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 53.2 src/sage/categories/vector_bundles.py  # 2 doctests failed\nsage -t --long --warn-long 53.2 src/sage/manifolds/section.py  # 2 doctests failed\nsage -t --long --warn-long 53.2 src/sage/manifolds/chart_func.py  # 1 doctest failed\nsage -t --long --warn-long 53.2 src/sage/manifolds/section_module.py  # 10 doctests failed\nsage -t --long --warn-long 53.2 src/sage/manifolds/vector_bundle.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nThey appear on the patchbot report too.\n\nBesides, there is a warning when building the documentation:\n\n```\n[manifolds] <unknown>:1956: DeprecationWarning: invalid escape sequence \\c\n```",
    "created_at": "2019-10-07T13:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438145",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:66" align="right">comment:66</div>

Thanks for completing the documentation. 

With python3 Sage 9.0.beta0, I've got the following errors:

```
----------------------------------------------------------------------
sage -t --long --warn-long 53.2 src/sage/categories/vector_bundles.py  # 2 doctests failed
sage -t --long --warn-long 53.2 src/sage/manifolds/section.py  # 2 doctests failed
sage -t --long --warn-long 53.2 src/sage/manifolds/chart_func.py  # 1 doctest failed
sage -t --long --warn-long 53.2 src/sage/manifolds/section_module.py  # 10 doctests failed
sage -t --long --warn-long 53.2 src/sage/manifolds/vector_bundle.py  # 1 doctest failed
----------------------------------------------------------------------
```
They appear on the patchbot report too.

Besides, there is a warning when building the documentation:

```
[manifolds] <unknown>:1956: DeprecationWarning: invalid escape sequence \c
```



---

archive/issue_events_383200.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-07T13:32:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383200"
}
```



---

archive/issue_events_383201.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-07T13:32:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383201"
}
```



---

archive/issue_comments_438146.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThere is also some wrong indentation in the docstring of class `TopologicalVectorBundle`, starting from line 85 of `src/sage/manifolds/vector_bundle.py`. This alters the output of the html documentation.",
    "created_at": "2019-10-07T14:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438146",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:67" align="right">comment:67</div>

There is also some wrong indentation in the docstring of class `TopologicalVectorBundle`, starting from line 85 of `src/sage/manifolds/vector_bundle.py`. This alters the output of the html documentation.



---

archive/issue_comments_438147.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73e103efc0857f4b37b95ccc13c2edf9ce93f551\"><code>73e103e</code></a></td><td><code>Doctest errors fixed</code></td></tr></table>\n",
    "created_at": "2019-10-07T14:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438147",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73e103efc0857f4b37b95ccc13c2edf9ce93f551"><code>73e103e</code></a></td><td><code>Doctest errors fixed</code></td></tr></table>




---

archive/issue_comments_438148.json:
```json
{
    "body": "Changed commit from **[`9832d02`](https://github.com/sagemath/sagetrac-mirror/commit/9832d02285f25bdb95a11efcb6e705938a36c3f5)** to **[`73e103e`](https://github.com/sagemath/sagetrac-mirror/commit/73e103efc0857f4b37b95ccc13c2edf9ce93f551)**",
    "created_at": "2019-10-07T14:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438148",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9832d02`](https://github.com/sagemath/sagetrac-mirror/commit/9832d02285f25bdb95a11efcb6e705938a36c3f5)** to **[`73e103e`](https://github.com/sagemath/sagetrac-mirror/commit/73e103efc0857f4b37b95ccc13c2edf9ce93f551)**



---

archive/issue_comments_438149.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nThis should be fixed now.",
    "created_at": "2019-10-07T14:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438149",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:69" align="right">comment:69</div>

This should be fixed now.



---

archive/issue_events_383202.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-07T14:36:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383202"
}
```



---

archive/issue_events_383203.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-07T14:36:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383203"
}
```



---

archive/issue_comments_438150.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nThe error in `src/sage/manifolds/chart_func.py` should not belong to this ticket. I fixed it anyway.",
    "created_at": "2019-10-07T14:37:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438150",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:71" align="right">comment:71</div>

The error in `src/sage/manifolds/chart_func.py` should not belong to this ticket. I fixed it anyway.



---

archive/issue_comments_438151.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@DeRhamSource](#comment%3A71):\n> The error in `src/sage/manifolds/chart_func.py` should not belong to this ticket.\n\nYes it does: there is no such error in Sage 9.0.beta0. \nAnyway, thanks for the fixes.",
    "created_at": "2019-10-07T14:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438151",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@DeRhamSource](#comment%3A71):
> The error in `src/sage/manifolds/chart_func.py` should not belong to this ticket.

Yes it does: there is no such error in Sage 9.0.beta0. 
Anyway, thanks for the fixes.



---

archive/issue_comments_438152.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nI still get some errors:\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 54.2 src/sage/manifolds/section.py  # 1 doctest failed\nsage -t --long --warn-long 54.2 src/sage/manifolds/chart_func.py  # 2 doctests failed\nsage -t --long --warn-long 54.2 src/sage/manifolds/vector_bundle.py  # 1 doctest failed\nsage -t --long --warn-long 54.2 src/sage/manifolds/section_module.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2019-10-09T08:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438152",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:73" align="right">comment:73</div>

I still get some errors:

```
----------------------------------------------------------------------
sage -t --long --warn-long 54.2 src/sage/manifolds/section.py  # 1 doctest failed
sage -t --long --warn-long 54.2 src/sage/manifolds/chart_func.py  # 2 doctests failed
sage -t --long --warn-long 54.2 src/sage/manifolds/vector_bundle.py  # 1 doctest failed
sage -t --long --warn-long 54.2 src/sage/manifolds/section_module.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_events_383204.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-09T08:50:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383204"
}
```



---

archive/issue_events_383205.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-09T08:50:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383205"
}
```



---

archive/issue_comments_438153.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nThat's pretty strange:\n- For `section.py` I get no errors. What is your error message?\n- The two `chart_func.py` errors are not related to this ticket. However, it seems a `#random` mark is needed here.\n\nThe other issues get fixed soon. I'll change the status.",
    "created_at": "2019-10-09T09:29:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438153",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:74" align="right">comment:74</div>

That's pretty strange:
- For `section.py` I get no errors. What is your error message?
- The two `chart_func.py` errors are not related to this ticket. However, it seems a `#random` mark is needed here.

The other issues get fixed soon. I'll change the status.



---

archive/issue_comments_438154.json:
```json
{
    "body": "Changed commit from **[`73e103e`](https://github.com/sagemath/sagetrac-mirror/commit/73e103efc0857f4b37b95ccc13c2edf9ce93f551)** to **[`15ca7ea`](https://github.com/sagemath/sagetrac-mirror/commit/15ca7ea8d2bf9f20461fedf21a9ce1c27afc1eef)**",
    "created_at": "2019-10-09T09:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438154",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`73e103e`](https://github.com/sagemath/sagetrac-mirror/commit/73e103efc0857f4b37b95ccc13c2edf9ce93f551)** to **[`15ca7ea`](https://github.com/sagemath/sagetrac-mirror/commit/15ca7ea8d2bf9f20461fedf21a9ce1c27afc1eef)**



---

archive/issue_comments_438155.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15ca7ea8d2bf9f20461fedf21a9ce1c27afc1eef\"><code>15ca7ea</code></a></td><td><code>SectionModule representation + doctest fixes</code></td></tr></table>\n",
    "created_at": "2019-10-09T09:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438155",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15ca7ea8d2bf9f20461fedf21a9ce1c27afc1eef"><code>15ca7ea</code></a></td><td><code>SectionModule representation + doctest fixes</code></td></tr></table>




---

archive/issue_events_383206.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-09T09:55:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383206"
}
```



---

archive/issue_events_383207.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-09T09:55:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383207"
}
```



---

archive/issue_comments_438156.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [@DeRhamSource](#comment%3A74):\n> That's pretty strange:\n> - For `section.py` I get no errors. What is your error message?\n\nHere it is:\n\n```\nsage -t --long src/sage/manifolds/section.py\n**********************************************************************\nFile \"src/sage/manifolds/section.py\", line 305, in sage.manifolds.section.Section._latex_\nFailed example:\n    omega = E.section(name='\\omega')\nExpected nothing\nGot:\n    doctest:warning\n...\n    DeprecationWarning: invalid escape sequence \\o\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.manifolds.section.Section._latex_\n    [735 tests, 1 failure, 29.78 s]\n```\nThis is because the raw string marker `r` is missing in front of `'\\omega'`: the line 305 should read\n\n```\n   sage: omega = E.section(name=r'\\omega')\n```\nProbably the reason why you don't get this error is that you are using Python 2 version of Sage, which is less strict in this respect (however, this is still an error, since the LaTeX output will not be correct). On general ground, I would advise you to use Python 3 version of Sage for development, since Sage 9.0 will be Python 3 based. Installing Python 3 Sage is pretty easy:\n\n```\ngit clone https://github.com/sagemath/sage.git\ncd sage\ngit checkout develop\ngit pull\nmake configure\n./configure --with-python=3\nMAKE=\"make -j8\" make\n```",
    "created_at": "2019-10-09T12:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438156",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [@DeRhamSource](#comment%3A74):
> That's pretty strange:
> - For `section.py` I get no errors. What is your error message?

Here it is:

```
sage -t --long src/sage/manifolds/section.py
**********************************************************************
File "src/sage/manifolds/section.py", line 305, in sage.manifolds.section.Section._latex_
Failed example:
    omega = E.section(name='\omega')
Expected nothing
Got:
    doctest:warning
...
    DeprecationWarning: invalid escape sequence \o
**********************************************************************
1 item had failures:
   1 of   6 in sage.manifolds.section.Section._latex_
    [735 tests, 1 failure, 29.78 s]
```
This is because the raw string marker `r` is missing in front of `'\omega'`: the line 305 should read

```
   sage: omega = E.section(name=r'\omega')
```
Probably the reason why you don't get this error is that you are using Python 2 version of Sage, which is less strict in this respect (however, this is still an error, since the LaTeX output will not be correct). On general ground, I would advise you to use Python 3 version of Sage for development, since Sage 9.0 will be Python 3 based. Installing Python 3 Sage is pretty easy:

```
git clone https://github.com/sagemath/sage.git
cd sage
git checkout develop
git pull
make configure
./configure --with-python=3
MAKE="make -j8" make
```



---

archive/issue_comments_438157.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nOh yeah, thank you! :) I am going to try a new test run after the python3 compilation. Till then, I keep this ticket on *needs_work*.",
    "created_at": "2019-10-09T12:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438157",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:78" align="right">comment:78</div>

Oh yeah, thank you! :) I am going to try a new test run after the python3 compilation. Till then, I keep this ticket on *needs_work*.



---

archive/issue_events_383208.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-09T12:37:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383208"
}
```



---

archive/issue_events_383209.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-09T12:37:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383209"
}
```



---

archive/issue_comments_438158.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@DeRhamSource](#comment%3A78):\n> Oh yeah, thank you! :) I am going to try a new test run after the python3 compilation. Till then, I keep this ticket on *needs_work*.\n\nOK. On my (Python 3) side, the doctest error in `section.py` is the last remaining one. However, there are various errors in the html output of the documentation. For instance, in the section \"Trivializations\", some links are wrong (class names not clickable or expressions as <code>:class:\\`sage.manifolds.chart_func.ChartFunction</code> appearing in the output) and some `::` are missing before doctest blocs. Could you please fix those?",
    "created_at": "2019-10-09T12:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438158",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@DeRhamSource](#comment%3A78):
> Oh yeah, thank you! :) I am going to try a new test run after the python3 compilation. Till then, I keep this ticket on *needs_work*.

OK. On my (Python 3) side, the doctest error in `section.py` is the last remaining one. However, there are various errors in the html output of the documentation. For instance, in the section "Trivializations", some links are wrong (class names not clickable or expressions as <code>:class:\`sage.manifolds.chart_func.ChartFunction</code> appearing in the output) and some `::` are missing before doctest blocs. Could you please fix those?



---

archive/issue_comments_438159.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a7d29be713fa75cd3be0f5a14789db12635b879\"><code>3a7d29b</code></a></td><td><code>Minor doctest fixes</code></td></tr></table>\n",
    "created_at": "2019-10-09T19:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438159",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a7d29be713fa75cd3be0f5a14789db12635b879"><code>3a7d29b</code></a></td><td><code>Minor doctest fixes</code></td></tr></table>




---

archive/issue_comments_438160.json:
```json
{
    "body": "Changed commit from **[`15ca7ea`](https://github.com/sagemath/sagetrac-mirror/commit/15ca7ea8d2bf9f20461fedf21a9ce1c27afc1eef)** to **[`3a7d29b`](https://github.com/sagemath/sagetrac-mirror/commit/3a7d29be713fa75cd3be0f5a14789db12635b879)**",
    "created_at": "2019-10-09T19:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438160",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`15ca7ea`](https://github.com/sagemath/sagetrac-mirror/commit/15ca7ea8d2bf9f20461fedf21a9ce1c27afc1eef)** to **[`3a7d29b`](https://github.com/sagemath/sagetrac-mirror/commit/3a7d29be713fa75cd3be0f5a14789db12635b879)**



---

archive/issue_comments_438161.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nChanged. Can you please check the docbuild for me?",
    "created_at": "2019-10-10T11:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438161",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:81" align="right">comment:81</div>

Changed. Can you please check the docbuild for me?



---

archive/issue_events_383210.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-10T11:54:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383210"
}
```



---

archive/issue_events_383211.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-10T11:54:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383211"
}
```



---

archive/issue_comments_438162.json:
```json
{
    "body": "<div id=\"comment:82\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/116cbfa97a3acf0f53d252e1cea5dfa4f085f4b3\"><code>116cbfa</code></a></td><td><code>SectionMOdule added to documentation</code></td></tr></table>\n",
    "created_at": "2019-10-10T15:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438162",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:82"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/116cbfa97a3acf0f53d252e1cea5dfa4f085f4b3"><code>116cbfa</code></a></td><td><code>SectionMOdule added to documentation</code></td></tr></table>




---

archive/issue_comments_438163.json:
```json
{
    "body": "Changed commit from **[`3a7d29b`](https://github.com/sagemath/sagetrac-mirror/commit/3a7d29be713fa75cd3be0f5a14789db12635b879)** to **[`116cbfa`](https://github.com/sagemath/sagetrac-mirror/commit/116cbfa97a3acf0f53d252e1cea5dfa4f085f4b3)**",
    "created_at": "2019-10-10T15:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438163",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a7d29b`](https://github.com/sagemath/sagetrac-mirror/commit/3a7d29be713fa75cd3be0f5a14789db12635b879)** to **[`116cbfa`](https://github.com/sagemath/sagetrac-mirror/commit/116cbfa97a3acf0f53d252e1cea5dfa4f085f4b3)**



---

archive/issue_comments_438164.json:
```json
{
    "body": "Changed commit from **[`116cbfa`](https://github.com/sagemath/sagetrac-mirror/commit/116cbfa97a3acf0f53d252e1cea5dfa4f085f4b3)** to **[`078b13f`](https://github.com/sagemath/sagetrac-mirror/commit/078b13fd1729eed24521b4561947d8de4a92f2b9)**",
    "created_at": "2019-10-10T15:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438164",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`116cbfa`](https://github.com/sagemath/sagetrac-mirror/commit/116cbfa97a3acf0f53d252e1cea5dfa4f085f4b3)** to **[`078b13f`](https://github.com/sagemath/sagetrac-mirror/commit/078b13fd1729eed24521b4561947d8de4a92f2b9)**



---

archive/issue_comments_438165.json:
```json
{
    "body": "<div id=\"comment:83\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/078b13fd1729eed24521b4561947d8de4a92f2b9\"><code>078b13f</code></a></td><td><code>Section modules added to documentation</code></td></tr></table>\n",
    "created_at": "2019-10-10T15:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438165",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:83"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/078b13fd1729eed24521b4561947d8de4a92f2b9"><code>078b13f</code></a></td><td><code>Section modules added to documentation</code></td></tr></table>




---

archive/issue_comments_438166.json:
```json
{
    "body": "Changed commit from **[`078b13f`](https://github.com/sagemath/sagetrac-mirror/commit/078b13fd1729eed24521b4561947d8de4a92f2b9)** to **[`12a86a4`](https://github.com/sagemath/sagetrac-mirror/commit/12a86a4feef85048f97383363fd004f8d1961c44)**",
    "created_at": "2019-10-12T21:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438166",
    "user": "https://github.com/egourgoulhon"
}
```

Changed commit from **[`078b13f`](https://github.com/sagemath/sagetrac-mirror/commit/078b13fd1729eed24521b4561947d8de4a92f2b9)** to **[`12a86a4`](https://github.com/sagemath/sagetrac-mirror/commit/12a86a4feef85048f97383363fd004f8d1961c44)**



---

archive/issue_comments_438167.json:
```json
{
    "body": "<div id=\"comment:84\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12a86a4feef85048f97383363fd004f8d1961c44\"><code>12a86a4</code></a></td><td><code>Some fixes in the documentation of vector bundles</code></td></tr></table>\n",
    "created_at": "2019-10-12T21:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438167",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:84"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12a86a4feef85048f97383363fd004f8d1961c44"><code>12a86a4</code></a></td><td><code>Some fixes in the documentation of vector bundles</code></td></tr></table>




---

archive/issue_comments_438168.json:
```json
{
    "body": "Changed branch from **[u/gh-DeRhamSource/vector_bundles](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/vector_bundles)** to **[public/manifolds/vector_bundles](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/vector_bundles)**",
    "created_at": "2019-10-12T21:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438168",
    "user": "https://github.com/egourgoulhon"
}
```

Changed branch from **[u/gh-DeRhamSource/vector_bundles](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-DeRhamSource/vector_bundles)** to **[public/manifolds/vector_bundles](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/vector_bundles)**



---

archive/issue_comments_438169.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nI've gone through the documentation and have introduced some fixes in the above commit (comment:84).\nIn particular, I've added an entry point for the category of vector bundles, as well as for fibers and fiber elements. I've also fixed hyperlinks, quote issues, missing `::` and the invalid escape sequence mentioned in [comment:66](#comment%3A66). You can see the full list of changes [here](https://github.com/sagemath/sagetrac-mirror/commit/12a86a4feef85048f97383363fd004f8d1961c44). Do you agree with them?",
    "created_at": "2019-10-12T21:54:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438169",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:85" align="right">comment:85</div>

I've gone through the documentation and have introduced some fixes in the above commit (comment:84).
In particular, I've added an entry point for the category of vector bundles, as well as for fibers and fiber elements. I've also fixed hyperlinks, quote issues, missing `::` and the invalid escape sequence mentioned in [comment:66](#comment%3A66). You can see the full list of changes [here](https://github.com/sagemath/sagetrac-mirror/commit/12a86a4feef85048f97383363fd004f8d1961c44). Do you agree with them?



---

archive/issue_comments_438170.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nThank you so much for overlooking my code and your effort! There was still quite a lot to do.\n\nThere's just one thing in `differentiable/vector_bundle.py` around line 389 in the class `TensorBundle`:\n\n\"OUPUT\" -> \"OUTPUT\"\n\nApart from that, I agree. :)",
    "created_at": "2019-10-12T22:16:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438170",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:86" align="right">comment:86</div>

Thank you so much for overlooking my code and your effort! There was still quite a lot to do.

There's just one thing in `differentiable/vector_bundle.py` around line 389 in the class `TensorBundle`:

"OUPUT" -> "OUTPUT"

Apart from that, I agree. :)



---

archive/issue_comments_438171.json:
```json
{
    "body": "Changed commit from **[`12a86a4`](https://github.com/sagemath/sagetrac-mirror/commit/12a86a4feef85048f97383363fd004f8d1961c44)** to **[`b8eba57`](https://github.com/sagemath/sagetrac-mirror/commit/b8eba570bccc8db1553bde445342ac716539fa33)**",
    "created_at": "2019-10-13T15:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438171",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`12a86a4`](https://github.com/sagemath/sagetrac-mirror/commit/12a86a4feef85048f97383363fd004f8d1961c44)** to **[`b8eba57`](https://github.com/sagemath/sagetrac-mirror/commit/b8eba570bccc8db1553bde445342ac716539fa33)**



---

archive/issue_comments_438172.json:
```json
{
    "body": "<div id=\"comment:87\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8eba570bccc8db1553bde445342ac716539fa33\"><code>b8eba57</code></a></td><td><code>Slight changes in the documentation and code of vector bundles</code></td></tr></table>\n",
    "created_at": "2019-10-13T15:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438172",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8eba570bccc8db1553bde445342ac716539fa33"><code>b8eba57</code></a></td><td><code>Slight changes in the documentation and code of vector bundles</code></td></tr></table>




---

archive/issue_comments_438173.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@DeRhamSource](#comment%3A86):\n \n> There's just one thing in `differentiable/vector_bundle.py` around line 389 in the class `TensorBundle`:\n> \n> \"OUPUT\" -> \"OUTPUT\"\n> \n\nCorrected in the above commit.\nI've also introduced minor changes to improve the documentation (I hope). \n\nI have also performed some changes in the code, replacing `self._dest_map` by `self._dest_map.restrict(domain)` in `DifferentiableVectorBundle.section()` and `DifferentiableVectorBundle.local_frame()`. Besides, I have made the latter return `NotImplementedError` when the tensor bundle is not the tangent bundle, because in such a case, a `VectorFrame` should not be returned. Do you agree? Shall we maintain the alias `vector_frame` for `local_frame`?\n\nI have some question regarding the methods `atlas()`, `change_of_frame()`, `changes_of_frame`, `coframes()`, `frames()`, `set_change_of_frame()`,  `transition()`, `transitions()` of class `DifferentiableVectorBundle`: are these methods really necessary? As currently implemented, they return only features of the base manifold. In particular, none of them is using the tensor type `(k, l)` of `self`.",
    "created_at": "2019-10-13T15:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438173",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@DeRhamSource](#comment%3A86):
 
> There's just one thing in `differentiable/vector_bundle.py` around line 389 in the class `TensorBundle`:
> 
> "OUPUT" -> "OUTPUT"
> 

Corrected in the above commit.
I've also introduced minor changes to improve the documentation (I hope). 

I have also performed some changes in the code, replacing `self._dest_map` by `self._dest_map.restrict(domain)` in `DifferentiableVectorBundle.section()` and `DifferentiableVectorBundle.local_frame()`. Besides, I have made the latter return `NotImplementedError` when the tensor bundle is not the tangent bundle, because in such a case, a `VectorFrame` should not be returned. Do you agree? Shall we maintain the alias `vector_frame` for `local_frame`?

I have some question regarding the methods `atlas()`, `change_of_frame()`, `changes_of_frame`, `coframes()`, `frames()`, `set_change_of_frame()`,  `transition()`, `transitions()` of class `DifferentiableVectorBundle`: are these methods really necessary? As currently implemented, they return only features of the base manifold. In particular, none of them is using the tensor type `(k, l)` of `self`.



---

archive/issue_comments_438174.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [@egourgoulhon](#comment%3A88):\n> I have also performed some changes in the code, replacing `self._dest_map` by `self._dest_map.restrict(domain)` in `DifferentiableVectorBundle.section()` and `DifferentiableVectorBundle.local_frame()`.\n\nThank you! :)\n\n> Besides, I have made the latter return `NotImplementedError` when the tensor bundle is not the tangent bundle, because in such a case, a `VectorFrame` should not be returned. Do you agree? Shall we maintain the alias `vector_frame` for `local_frame`?\n\nIn this case, I do not agree. Altough actual frames of general tensor bundles are not implemented, vector frames *induce* them canonically. In the whole preexisting code, a vector frame is used for declaration and output of tensor fields. So, in my opinion, we should keep it this way (at least until general tensor product bundles are implemented). However, a corresponding remark in the documentation might be a good idea.\n\n> I have some question regarding the methods `atlas()`, `change_of_frame()`, `changes_of_frame`, `coframes()`, `frames()`, `set_change_of_frame()`,  `transition()`, `transitions()` of class `DifferentiableVectorBundle`: are these methods really necessary? As currently implemented, they return only features of the base manifold. In particular, none of them is using the tensor type `(k, l)` of `self`.\n\nThe class `TopologicalVectorBundle` consists of these methods and `TensorBundle` inherits from it, so it must carry out these methods as well. But since all its features are already regulated through the manifold's framework (tensor bundles are induced by differentiable charts and their transitions), the vector bundle implementation is obsolete in this case and the methods must be overwritten. Likewise, a remark in the documentation might be useful, here. Do you have a better solution in mind?\n\n**Another thing:** In a next step, I want to inherit `TensorField` from `Section` (and perhaps `VectorFrame` from `LocalFrame`) in order to minimize code redundancies. Keeping in mind, when my modifications in #28519 are finished, `Section` and `TrivialSection` should be adapted anyways.",
    "created_at": "2019-10-13T16:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438174",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [@egourgoulhon](#comment%3A88):
> I have also performed some changes in the code, replacing `self._dest_map` by `self._dest_map.restrict(domain)` in `DifferentiableVectorBundle.section()` and `DifferentiableVectorBundle.local_frame()`.

Thank you! :)

> Besides, I have made the latter return `NotImplementedError` when the tensor bundle is not the tangent bundle, because in such a case, a `VectorFrame` should not be returned. Do you agree? Shall we maintain the alias `vector_frame` for `local_frame`?

In this case, I do not agree. Altough actual frames of general tensor bundles are not implemented, vector frames *induce* them canonically. In the whole preexisting code, a vector frame is used for declaration and output of tensor fields. So, in my opinion, we should keep it this way (at least until general tensor product bundles are implemented). However, a corresponding remark in the documentation might be a good idea.

> I have some question regarding the methods `atlas()`, `change_of_frame()`, `changes_of_frame`, `coframes()`, `frames()`, `set_change_of_frame()`,  `transition()`, `transitions()` of class `DifferentiableVectorBundle`: are these methods really necessary? As currently implemented, they return only features of the base manifold. In particular, none of them is using the tensor type `(k, l)` of `self`.

The class `TopologicalVectorBundle` consists of these methods and `TensorBundle` inherits from it, so it must carry out these methods as well. But since all its features are already regulated through the manifold's framework (tensor bundles are induced by differentiable charts and their transitions), the vector bundle implementation is obsolete in this case and the methods must be overwritten. Likewise, a remark in the documentation might be useful, here. Do you have a better solution in mind?

**Another thing:** In a next step, I want to inherit `TensorField` from `Section` (and perhaps `VectorFrame` from `LocalFrame`) in order to minimize code redundancies. Keeping in mind, when my modifications in #28519 are finished, `Section` and `TrivialSection` should be adapted anyways.



---

archive/issue_comments_438175.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nReplying to [@DeRhamSource](#comment%3A89):\n> \n> > Besides, I have made the latter return `NotImplementedError` when the tensor bundle is not the tangent bundle, because in such a case, a `VectorFrame` should not be returned. Do you agree? Shall we maintain the alias `vector_frame` for `local_frame`?\n\n> \n> In this case, I do not agree. Altough actual frames of general tensor bundles are not implemented, vector frames *induce* them canonically. In the whole preexisting code, a vector frame is used for declaration and output of tensor fields. So, in my opinion, we should keep it this way (at least until general tensor product bundles are implemented). \n\nOK, I see.\n\n>However, a corresponding remark in the documentation might be a good idea.\n\nYes, there should be a warning that the returned object is actually not a bundle local frame, although it canonically determines it, as you say. The same thing holds for the method `trivialization()`, which returns a chart on the base manifold and actually not a trivialization in the sense of a vector bundle.\n\n> \n> > I have some question regarding the methods `atlas()`, `change_of_frame()`, `changes_of_frame`, `coframes()`, `frames()`, `set_change_of_frame()`,  `transition()`, `transitions()` of class `DifferentiableVectorBundle`: are these methods really necessary? As currently implemented, they return only features of the base manifold. In particular, none of them is using the tensor type `(k, l)` of `self`.\n\n> \n> The class `TopologicalVectorBundle` consists of these methods and `TensorBundle` inherits from it, so it must carry out these methods as well. But since all its features are already regulated through the manifold's framework (tensor bundles are induced by differentiable charts and their transitions), the vector bundle implementation is obsolete in this case and the methods must be overwritten. \n\nOK.\n\n> Likewise, a remark in the documentation might be useful, here. \n\nIndeed.\n\n>Do you have a better solution in mind?\n> \n\nNot at the moment.\n\nI let you revert the `NotImplementedError` and add the relevent warnings.\n\n> **Another thing:** In a next step, I want to inherit `TensorField` from `Section` (and perhaps `VectorFrame` from `LocalFrame`) in order to minimize code redundancies.\n\nYes, I guess by \"next step\", you mean \"in another ticket\".",
    "created_at": "2019-10-13T18:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438175",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:90" align="right">comment:90</div>

Replying to [@DeRhamSource](#comment%3A89):
> 
> > Besides, I have made the latter return `NotImplementedError` when the tensor bundle is not the tangent bundle, because in such a case, a `VectorFrame` should not be returned. Do you agree? Shall we maintain the alias `vector_frame` for `local_frame`?

> 
> In this case, I do not agree. Altough actual frames of general tensor bundles are not implemented, vector frames *induce* them canonically. In the whole preexisting code, a vector frame is used for declaration and output of tensor fields. So, in my opinion, we should keep it this way (at least until general tensor product bundles are implemented). 

OK, I see.

>However, a corresponding remark in the documentation might be a good idea.

Yes, there should be a warning that the returned object is actually not a bundle local frame, although it canonically determines it, as you say. The same thing holds for the method `trivialization()`, which returns a chart on the base manifold and actually not a trivialization in the sense of a vector bundle.

> 
> > I have some question regarding the methods `atlas()`, `change_of_frame()`, `changes_of_frame`, `coframes()`, `frames()`, `set_change_of_frame()`,  `transition()`, `transitions()` of class `DifferentiableVectorBundle`: are these methods really necessary? As currently implemented, they return only features of the base manifold. In particular, none of them is using the tensor type `(k, l)` of `self`.

> 
> The class `TopologicalVectorBundle` consists of these methods and `TensorBundle` inherits from it, so it must carry out these methods as well. But since all its features are already regulated through the manifold's framework (tensor bundles are induced by differentiable charts and their transitions), the vector bundle implementation is obsolete in this case and the methods must be overwritten. 

OK.

> Likewise, a remark in the documentation might be useful, here. 

Indeed.

>Do you have a better solution in mind?
> 

Not at the moment.

I let you revert the `NotImplementedError` and add the relevent warnings.

> **Another thing:** In a next step, I want to inherit `TensorField` from `Section` (and perhaps `VectorFrame` from `LocalFrame`) in order to minimize code redundancies.

Yes, I guess by "next step", you mean "in another ticket".



---

archive/issue_comments_438176.json:
```json
{
    "body": "Changed commit from **[`b8eba57`](https://github.com/sagemath/sagetrac-mirror/commit/b8eba570bccc8db1553bde445342ac716539fa33)** to **[`770e699`](https://github.com/sagemath/sagetrac-mirror/commit/770e6999c8e3a0cb8c2f7264dd736628634ad606)**",
    "created_at": "2019-10-13T22:08:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438176",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b8eba57`](https://github.com/sagemath/sagetrac-mirror/commit/b8eba570bccc8db1553bde445342ac716539fa33)** to **[`770e699`](https://github.com/sagemath/sagetrac-mirror/commit/770e6999c8e3a0cb8c2f7264dd736628634ad606)**



---

archive/issue_comments_438177.json:
```json
{
    "body": "<div id=\"comment:91\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/770e6999c8e3a0cb8c2f7264dd736628634ad606\"><code>770e699</code></a></td><td><code>More detailed documentation</code></td></tr></table>\n",
    "created_at": "2019-10-13T22:08:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438177",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:91"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/770e6999c8e3a0cb8c2f7264dd736628634ad606"><code>770e699</code></a></td><td><code>More detailed documentation</code></td></tr></table>




---

archive/issue_comments_438178.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@egourgoulhon](#comment%3A90):\n> I let you revert the `NotImplementedError` and add the relevent warnings.\n\nDone.\n\nWould you take a short look for typos etc?\n\nAlso, I've changed the name of the base space in the documentation of `TensorBundle` to `N` instead of `U`.\n\nDo you agree so far? Any more suggestions?\n\n> Yes, I guess by \"next step\", you mean \"in another ticket\".\n\nOf course. :)",
    "created_at": "2019-10-13T22:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438178",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@egourgoulhon](#comment%3A90):
> I let you revert the `NotImplementedError` and add the relevent warnings.

Done.

Would you take a short look for typos etc?

Also, I've changed the name of the base space in the documentation of `TensorBundle` to `N` instead of `U`.

Do you agree so far? Any more suggestions?

> Yes, I guess by "next step", you mean "in another ticket".

Of course. :)



---

archive/issue_comments_438179.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nAh, I've also fixed the filter algorithms for the frames. (Unfortunately, I missed it in the commit message.)",
    "created_at": "2019-10-13T22:16:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438179",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:93" align="right">comment:93</div>

Ah, I've also fixed the filter algorithms for the frames. (Unfortunately, I missed it in the commit message.)



---

archive/issue_comments_438180.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nThere are some more things I noticed. I'm going to take of it later this day.",
    "created_at": "2019-10-14T07:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438180",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:94" align="right">comment:94</div>

There are some more things I noticed. I'm going to take of it later this day.



---

archive/issue_comments_438181.json:
```json
{
    "body": "<div id=\"comment:95\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22e6666e641777f26eb165ba4623f6c28fa8e70b\"><code>22e6666</code></a></td><td><code>Documentation improvements, i.e. frames along maps</code></td></tr></table>\n",
    "created_at": "2019-10-14T09:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438181",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:95"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22e6666e641777f26eb165ba4623f6c28fa8e70b"><code>22e6666</code></a></td><td><code>Documentation improvements, i.e. frames along maps</code></td></tr></table>




---

archive/issue_comments_438182.json:
```json
{
    "body": "Changed commit from **[`770e699`](https://github.com/sagemath/sagetrac-mirror/commit/770e6999c8e3a0cb8c2f7264dd736628634ad606)** to **[`22e6666`](https://github.com/sagemath/sagetrac-mirror/commit/22e6666e641777f26eb165ba4623f6c28fa8e70b)**",
    "created_at": "2019-10-14T09:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438182",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`770e699`](https://github.com/sagemath/sagetrac-mirror/commit/770e6999c8e3a0cb8c2f7264dd736628634ad606)** to **[`22e6666`](https://github.com/sagemath/sagetrac-mirror/commit/22e6666e641777f26eb165ba4623f6c28fa8e70b)**



---

archive/issue_comments_438183.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nPlease take a look. I made many modifications and fixes in the documentation.",
    "created_at": "2019-10-14T09:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438183",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:96" align="right">comment:96</div>

Please take a look. I made many modifications and fixes in the documentation.



---

archive/issue_comments_438184.json:
```json
{
    "body": "Changed commit from **[`22e6666`](https://github.com/sagemath/sagetrac-mirror/commit/22e6666e641777f26eb165ba4623f6c28fa8e70b)** to **[`9ecd22a`](https://github.com/sagemath/sagetrac-mirror/commit/9ecd22a1f537f5392dbad999612c2d433dc2fabc)**",
    "created_at": "2019-10-14T11:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438184",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`22e6666`](https://github.com/sagemath/sagetrac-mirror/commit/22e6666e641777f26eb165ba4623f6c28fa8e70b)** to **[`9ecd22a`](https://github.com/sagemath/sagetrac-mirror/commit/9ecd22a1f537f5392dbad999612c2d433dc2fabc)**



---

archive/issue_comments_438185.json:
```json
{
    "body": "<div id=\"comment:97\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2c535d7e3c0c044088e171eaa82e738c90a2342\"><code>e2c535d</code></a></td><td><code>Merge branch 'public/manifolds/vector_bundles' of git://trac.sagemath.org/sage into Sage 9.0.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ecd22a1f537f5392dbad999612c2d433dc2fabc\"><code>9ecd22a</code></a></td><td><code>Minor fix in the documentation of vector bundles</code></td></tr></table>\n",
    "created_at": "2019-10-14T11:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438185",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:97"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2c535d7e3c0c044088e171eaa82e738c90a2342"><code>e2c535d</code></a></td><td><code>Merge branch 'public/manifolds/vector_bundles' of git://trac.sagemath.org/sage into Sage 9.0.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ecd22a1f537f5392dbad999612c2d433dc2fabc"><code>9ecd22a</code></a></td><td><code>Minor fix in the documentation of vector bundles</code></td></tr></table>




---

archive/issue_comments_438186.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@DeRhamSource](#comment%3A96):\n> Please take a look. I made many modifications and fixes in the documentation.\n\nThanks for the improvements in the documentation!\nI've just pushed a minor fix in some `:meth:` hyperlink. \nI think the ticket is ready to go.",
    "created_at": "2019-10-14T11:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438186",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@DeRhamSource](#comment%3A96):
> Please take a look. I made many modifications and fixes in the documentation.

Thanks for the improvements in the documentation!
I've just pushed a minor fix in some `:meth:` hyperlink. 
I think the ticket is ready to go.



---

archive/issue_comments_438187.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nJust wait a moment. I have still some fixes, coming soon.",
    "created_at": "2019-10-14T12:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438187",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:99" align="right">comment:99</div>

Just wait a moment. I have still some fixes, coming soon.



---

archive/issue_comments_438188.json:
```json
{
    "body": "<div id=\"comment:100\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be0b7d0ff8b2ea739b97bc339e68a2403b74f4df\"><code>be0b7d0</code></a></td><td><code>further methods added + 'local_frame' invokes vector field module's method + doc improvements</code></td></tr></table>\n",
    "created_at": "2019-10-14T13:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438188",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:100"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be0b7d0ff8b2ea739b97bc339e68a2403b74f4df"><code>be0b7d0</code></a></td><td><code>further methods added + 'local_frame' invokes vector field module's method + doc improvements</code></td></tr></table>




---

archive/issue_comments_438189.json:
```json
{
    "body": "Changed commit from **[`9ecd22a`](https://github.com/sagemath/sagetrac-mirror/commit/9ecd22a1f537f5392dbad999612c2d433dc2fabc)** to **[`be0b7d0`](https://github.com/sagemath/sagetrac-mirror/commit/be0b7d0ff8b2ea739b97bc339e68a2403b74f4df)**",
    "created_at": "2019-10-14T13:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438189",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9ecd22a`](https://github.com/sagemath/sagetrac-mirror/commit/9ecd22a1f537f5392dbad999612c2d433dc2fabc)** to **[`be0b7d0`](https://github.com/sagemath/sagetrac-mirror/commit/be0b7d0ff8b2ea739b97bc339e68a2403b74f4df)**



---

archive/issue_comments_438190.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nThere we go. I had a short discussion with a collegue of mine in which I noticed some more things. But that should be it. Please take a short look.",
    "created_at": "2019-10-14T13:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438190",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:101" align="right">comment:101</div>

There we go. I had a short discussion with a collegue of mine in which I noticed some more things. But that should be it. Please take a short look.



---

archive/issue_comments_438191.json:
```json
{
    "body": "Changed commit from **[`be0b7d0`](https://github.com/sagemath/sagetrac-mirror/commit/be0b7d0ff8b2ea739b97bc339e68a2403b74f4df)** to **[`f9810b7`](https://github.com/sagemath/sagetrac-mirror/commit/f9810b77472ee3c16f4843aca27239e149e48ffa)**",
    "created_at": "2019-10-14T13:26:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438191",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`be0b7d0`](https://github.com/sagemath/sagetrac-mirror/commit/be0b7d0ff8b2ea739b97bc339e68a2403b74f4df)** to **[`f9810b7`](https://github.com/sagemath/sagetrac-mirror/commit/f9810b77472ee3c16f4843aca27239e149e48ffa)**



---

archive/issue_comments_438192.json:
```json
{
    "body": "<div id=\"comment:102\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9810b77472ee3c16f4843aca27239e149e48ffa\"><code>f9810b7</code></a></td><td><code>unique_tag documentation added</code></td></tr></table>\n",
    "created_at": "2019-10-14T13:26:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438192",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:102"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9810b77472ee3c16f4843aca27239e149e48ffa"><code>f9810b7</code></a></td><td><code>unique_tag documentation added</code></td></tr></table>




---

archive/issue_events_383212.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-14T19:59:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383212"
}
```



---

archive/issue_events_383213.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-14T19:59:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383213"
}
```



---

archive/issue_comments_438193.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nI've just discovered that, with this ticket branch, the [AdS notebook](https://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Notebooks/SM_anti_de_Sitter.ipynb) stalls at cell 92, which introduces the transition map from conformal coordinates to Poincar\u00e9 coordinates. Running the notebook with Sage 9.0.beta1 shows no problem. So the issue is caused by some piece of code in this ticket. \n\nCell 92 seems to run forever, or at least to take a very long time. After 15 min or so, I halted it by Kernel -> Interrupt in the Jupyter menu. It appeared then that the code was stalled in line 1147 of `src/sage/manifolds/differentiable/chart.py`:\n\n```\n   ch_basis_inv = ch_basis.inverse()\n```\nSo I strongly suspect the issue to be due to the change in the computation of inverse automorphism fields introduced in this ticket.",
    "created_at": "2019-10-14T19:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438193",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:103" align="right">comment:103</div>

I've just discovered that, with this ticket branch, the [AdS notebook](https://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Notebooks/SM_anti_de_Sitter.ipynb) stalls at cell 92, which introduces the transition map from conformal coordinates to Poincar coordinates. Running the notebook with Sage 9.0.beta1 shows no problem. So the issue is caused by some piece of code in this ticket. 

Cell 92 seems to run forever, or at least to take a very long time. After 15 min or so, I halted it by Kernel -> Interrupt in the Jupyter menu. It appeared then that the code was stalled in line 1147 of `src/sage/manifolds/differentiable/chart.py`:

```
   ch_basis_inv = ch_basis.inverse()
```
So I strongly suspect the issue to be due to the change in the computation of inverse automorphism fields introduced in this ticket.



---

archive/issue_comments_438194.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nThis could be related to #28189, especially to the bug reported afterwards which has been partially fixed in #28570 (was this particular ticket merged in your testing?).\n\nIf there are no other options left, we can readd the SR enforcement for now. However, I suggest to construct a minimal example where this particular issue fails and report the error, since it seems to be a bigger problem deep in framework of matrices.",
    "created_at": "2019-10-14T20:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438194",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:104" align="right">comment:104</div>

This could be related to #28189, especially to the bug reported afterwards which has been partially fixed in #28570 (was this particular ticket merged in your testing?).

If there are no other options left, we can readd the SR enforcement for now. However, I suggest to construct a minimal example where this particular issue fails and report the error, since it seems to be a bigger problem deep in framework of matrices.



---

archive/issue_comments_438195.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nWait. Why does the program compute the inverse anyway? This should not happen automatically, right? At least, in the next cell the inverse is set manually.",
    "created_at": "2019-10-14T20:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438195",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:105" align="right">comment:105</div>

Wait. Why does the program compute the inverse anyway? This should not happen automatically, right? At least, in the next cell the inverse is set manually.



---

archive/issue_comments_438196.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nReplying to [@DeRhamSource](#comment%3A105):\n> Wait. Why does the program compute the inverse anyway? This should not happen automatically, right? At least, in the next cell the inverse is set manually.\n\nIt computes the inverse of the Jacobian matrix, not the inverse of the transition map.",
    "created_at": "2019-10-14T20:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438196",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:106" align="right">comment:106</div>

Replying to [@DeRhamSource](#comment%3A105):
> Wait. Why does the program compute the inverse anyway? This should not happen automatically, right? At least, in the next cell the inverse is set manually.

It computes the inverse of the Jacobian matrix, not the inverse of the transition map.



---

archive/issue_comments_438197.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nOkay, I started some debugging process. And apparently, this has nothing to do with the aforementioned issue.\n\nSince the algebra of scalar fields is not a field, the inversion algorithm is division free using adjugate matrices. I guess, this takes much more time than sophisticated algorithms on fields. My suggestion is to claim (at least for sage) that this algebra is a field (like it is done for the symbolic ring). I already started some testing and the computation time shrunk enormously. I've committed the changes.",
    "created_at": "2019-10-15T09:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438197",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:107" align="right">comment:107</div>

Okay, I started some debugging process. And apparently, this has nothing to do with the aforementioned issue.

Since the algebra of scalar fields is not a field, the inversion algorithm is division free using adjugate matrices. I guess, this takes much more time than sophisticated algorithms on fields. My suggestion is to claim (at least for sage) that this algebra is a field (like it is done for the symbolic ring). I already started some testing and the computation time shrunk enormously. I've committed the changes.



---

archive/issue_comments_438198.json:
```json
{
    "body": "Changed commit from **[`f9810b7`](https://github.com/sagemath/sagetrac-mirror/commit/f9810b77472ee3c16f4843aca27239e149e48ffa)** to **[`aa7dbaf`](https://github.com/sagemath/sagetrac-mirror/commit/aa7dbaf6055abab69c1cb43fb3ef709b9715b7ae)**",
    "created_at": "2019-10-15T09:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438198",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f9810b7`](https://github.com/sagemath/sagetrac-mirror/commit/f9810b77472ee3c16f4843aca27239e149e48ffa)** to **[`aa7dbaf`](https://github.com/sagemath/sagetrac-mirror/commit/aa7dbaf6055abab69c1cb43fb3ef709b9715b7ae)**



---

archive/issue_comments_438199.json:
```json
{
    "body": "<div id=\"comment:108\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa7dbaf6055abab69c1cb43fb3ef709b9715b7ae\"><code>aa7dbaf</code></a></td><td><code>'is_field' method added returning 'True'</code></td></tr></table>\n",
    "created_at": "2019-10-15T09:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438199",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:108"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa7dbaf6055abab69c1cb43fb3ef709b9715b7ae"><code>aa7dbaf</code></a></td><td><code>'is_field' method added returning 'True'</code></td></tr></table>




---

archive/issue_events_383214.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-15T10:55:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383214"
}
```



---

archive/issue_events_383215.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-15T10:55:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383215"
}
```



---

archive/issue_comments_438200.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nJust to tell that I am mostly AFK these days. I'll have a look at the ticket on Friday.",
    "created_at": "2019-10-16T10:28:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438200",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:110" align="right">comment:110</div>

Just to tell that I am mostly AFK these days. I'll have a look at the ticket on Friday.



---

archive/issue_events_383216.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-18T14:20:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383216"
}
```



---

archive/issue_events_383217.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-18T14:20:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383217"
}
```



---

archive/issue_comments_438201.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nI don't agree with the proposed fix for it goes against mathematical correctness: the method `is_field()` of `ScalarFieldAlgebra` shall not return `True`, the algebra of scalar fields being not a field (in particular, it is not an integral domain). \n\nI would propose that you revert to the original version of `AutomorphismFieldParal.__invert__()` and open a new ticket to discus the removal of `SR` enforcement in the inversion of automorphism fields. After all, this is not directly connected to vector bundles and therefore does not belong to the current ticket.",
    "created_at": "2019-10-18T14:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438201",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:111" align="right">comment:111</div>

I don't agree with the proposed fix for it goes against mathematical correctness: the method `is_field()` of `ScalarFieldAlgebra` shall not return `True`, the algebra of scalar fields being not a field (in particular, it is not an integral domain). 

I would propose that you revert to the original version of `AutomorphismFieldParal.__invert__()` and open a new ticket to discus the removal of `SR` enforcement in the inversion of automorphism fields. After all, this is not directly connected to vector bundles and therefore does not belong to the current ticket.



---

archive/issue_comments_438202.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nReplying to [@egourgoulhon](#comment%3A111):\n> I don't agree with the proposed fix for it goes against mathematical correctness: the method `is_field()` of `ScalarFieldAlgebra` shall not return `True`, the algebra of scalar fields being not a field (in particular, it is not an integral domain). \n\nYeah, I feel not comfortable with this solution as well.\n\n> I would propose that you revert to the original version of `AutomorphismFieldParal.__invert__()` and open a new ticket to discus the removal of `SR` enforcement in the inversion of automorphism fields. After all, this is not directly connected to vector bundles and therefore does not belong to the current ticket. \n\nThis is not entirely true. If the vector bundle is similarly complicated as the example in the notebook, it runs into the same problem.\n\nHowever, forcing sage to use the inversion algorithm for fields would be very nice!\n\nI will open a ticket on that and suggest this in the sage-devel group. Meanwhile, I undo the SR enforcement at least for tensor fields.",
    "created_at": "2019-10-18T15:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438202",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:112" align="right">comment:112</div>

Replying to [@egourgoulhon](#comment%3A111):
> I don't agree with the proposed fix for it goes against mathematical correctness: the method `is_field()` of `ScalarFieldAlgebra` shall not return `True`, the algebra of scalar fields being not a field (in particular, it is not an integral domain). 

Yeah, I feel not comfortable with this solution as well.

> I would propose that you revert to the original version of `AutomorphismFieldParal.__invert__()` and open a new ticket to discus the removal of `SR` enforcement in the inversion of automorphism fields. After all, this is not directly connected to vector bundles and therefore does not belong to the current ticket. 

This is not entirely true. If the vector bundle is similarly complicated as the example in the notebook, it runs into the same problem.

However, forcing sage to use the inversion algorithm for fields would be very nice!

I will open a ticket on that and suggest this in the sage-devel group. Meanwhile, I undo the SR enforcement at least for tensor fields.



---

archive/issue_comments_438203.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nReplying to [@DeRhamSource](#comment%3A112):\n> Replying to [@egourgoulhon](#comment%3A111):\n> > I don't agree with the proposed fix for it goes against mathematical correctness: the method `is_field()` of `ScalarFieldAlgebra` shall not return `True`, the algebra of scalar fields being not a field (in particular, it is not an integral domain). \n\n> \n> Yeah, I feel not comfortable with this solution as well.\n> \n\nBesides, it generated a lot of doctest errors as you can check in the patchbot report. \n\n> \n> I will open a ticket on that and suggest this in the sage-devel group. Meanwhile, I undo the SR enforcement at least for tensor fields.\n\nOK, very good.",
    "created_at": "2019-10-18T15:07:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438203",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:113" align="right">comment:113</div>

Replying to [@DeRhamSource](#comment%3A112):
> Replying to [@egourgoulhon](#comment%3A111):
> > I don't agree with the proposed fix for it goes against mathematical correctness: the method `is_field()` of `ScalarFieldAlgebra` shall not return `True`, the algebra of scalar fields being not a field (in particular, it is not an integral domain). 

> 
> Yeah, I feel not comfortable with this solution as well.
> 

Besides, it generated a lot of doctest errors as you can check in the patchbot report. 

> 
> I will open a ticket on that and suggest this in the sage-devel group. Meanwhile, I undo the SR enforcement at least for tensor fields.

OK, very good.



---

archive/issue_comments_438204.json:
```json
{
    "body": "<div id=\"comment:114\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4949f55e897ecc6e07830c5cbcf8f46f8f6c357f\"><code>4949f55</code></a></td><td><code>Revert \"'is_field' method added returning 'True'\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39104657254e432c49bef596337fbae291ca5f77\"><code>3910465</code></a></td><td><code>SR enforcement removal undone</code></td></tr></table>\n",
    "created_at": "2019-10-18T15:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438204",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:114"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4949f55e897ecc6e07830c5cbcf8f46f8f6c357f"><code>4949f55</code></a></td><td><code>Revert "'is_field' method added returning 'True'"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39104657254e432c49bef596337fbae291ca5f77"><code>3910465</code></a></td><td><code>SR enforcement removal undone</code></td></tr></table>




---

archive/issue_comments_438205.json:
```json
{
    "body": "Changed commit from **[`aa7dbaf`](https://github.com/sagemath/sagetrac-mirror/commit/aa7dbaf6055abab69c1cb43fb3ef709b9715b7ae)** to **[`3910465`](https://github.com/sagemath/sagetrac-mirror/commit/39104657254e432c49bef596337fbae291ca5f77)**",
    "created_at": "2019-10-18T15:55:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438205",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa7dbaf`](https://github.com/sagemath/sagetrac-mirror/commit/aa7dbaf6055abab69c1cb43fb3ef709b9715b7ae)** to **[`3910465`](https://github.com/sagemath/sagetrac-mirror/commit/39104657254e432c49bef596337fbae291ca5f77)**



---

archive/issue_comments_438206.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nCommitted. Please check, again.",
    "created_at": "2019-10-18T15:57:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438206",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:115" align="right">comment:115</div>

Committed. Please check, again.



---

archive/issue_events_383218.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-18T16:24:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383218"
}
```



---

archive/issue_events_383219.json:
```json
{
    "actor": "https://github.com/DeRhamSource",
    "created_at": "2019-10-18T16:24:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383219"
}
```



---

archive/issue_comments_438207.json:
```json
{
    "body": "<div id=\"comment:117\" align=\"right\">comment:117</div>\n\nAgain, I don't like so much the methods `is_unit()` added to the classes `ChartFunction` and `ScalarField`. They don't reflect fully the mathematical meaning of being a unit element of a ring. Do you really need these in this ticket? (I don't see clearly the connection with vector bundles). \n\nSide note: `self.is_zero()`, as invoked in `ChartFunction.is_unit()`, can be very time consuming for large symbolic expressions, since it is trying to simplify the expression to zero. In this respect, the use of `is_trivial_zero()` in `ScalarField.is_unit()` is better.",
    "created_at": "2019-10-18T20:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438207",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:117" align="right">comment:117</div>

Again, I don't like so much the methods `is_unit()` added to the classes `ChartFunction` and `ScalarField`. They don't reflect fully the mathematical meaning of being a unit element of a ring. Do you really need these in this ticket? (I don't see clearly the connection with vector bundles). 

Side note: `self.is_zero()`, as invoked in `ChartFunction.is_unit()`, can be very time consuming for large symbolic expressions, since it is trying to simplify the expression to zero. In this respect, the use of `is_trivial_zero()` in `ScalarField.is_unit()` is better.



---

archive/issue_comments_438208.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nBtw, thanks for having moved the treatment of autormorphism field inverses to #28629.",
    "created_at": "2019-10-18T20:35:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438208",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:118" align="right">comment:118</div>

Btw, thanks for having moved the treatment of autormorphism field inverses to #28629.



---

archive/issue_comments_438209.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nReplying to [@egourgoulhon](#comment%3A117):\n> Again, I don't like so much the methods `is_unit()` added to the classes `ChartFunction` and `ScalarField`. They don't reflect fully the mathematical meaning of being a unit element of a ring. Do you really need these in this ticket? (I don't see clearly the connection with vector bundles). \n\nI'm not quite sure, but I think this method is mandatory when using the division free algorithm. And the division free algorithm is invoked when changes of frames are established. In general, for vector bundles, frames may be distributed over serveral chart domains, for which the SR enforcement method fails. So yes, this is related to this ticket. I'm not completely satisfied with this either. As soon as the issue in ticket #28629 is solved, this snippet can be deleted again. Should I add a comment in the code about this?\n\n> Side note: `self.is_zero()`, as invoked in `ChartFunction.is_unit()`, can be very time consuming for large symbolic expressions, since it is trying to simplify the expression to zero. In this respect, the use of `is_trivial_zero()` in `ScalarField.is_unit()` is better.\n\nI agree, this is certainly better.",
    "created_at": "2019-10-18T22:12:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438209",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:119" align="right">comment:119</div>

Replying to [@egourgoulhon](#comment%3A117):
> Again, I don't like so much the methods `is_unit()` added to the classes `ChartFunction` and `ScalarField`. They don't reflect fully the mathematical meaning of being a unit element of a ring. Do you really need these in this ticket? (I don't see clearly the connection with vector bundles). 

I'm not quite sure, but I think this method is mandatory when using the division free algorithm. And the division free algorithm is invoked when changes of frames are established. In general, for vector bundles, frames may be distributed over serveral chart domains, for which the SR enforcement method fails. So yes, this is related to this ticket. I'm not completely satisfied with this either. As soon as the issue in ticket #28629 is solved, this snippet can be deleted again. Should I add a comment in the code about this?

> Side note: `self.is_zero()`, as invoked in `ChartFunction.is_unit()`, can be very time consuming for large symbolic expressions, since it is trying to simplify the expression to zero. In this respect, the use of `is_trivial_zero()` in `ScalarField.is_unit()` is better.

I agree, this is certainly better.



---

archive/issue_comments_438210.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nFurthermore, I would add a comment in the corresponding ticket, so that this code snippet gets not lost or forgotten.\n\nWhat do you say?",
    "created_at": "2019-10-18T22:23:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438210",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:120" align="right">comment:120</div>

Furthermore, I would add a comment in the corresponding ticket, so that this code snippet gets not lost or forgotten.

What do you say?



---

archive/issue_comments_438211.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,11 +12,13 @@\n **Improvements in the preexisting code**\n \n - restriction of vectorframes depended on some strange order: fixed!\n-- `SR` enforcement for automorphism field inversion removed (due to ticket #28189)\n-- `is_unit()` method implemented for scalar fields (to check whether a matrix with entries in the scalar field algebra is invertible)\n+- ~~`SR` enforcement for automorphism field inversion removed (due to ticket #28189)~~\n+- `is_unit()` method superficially implemented for scalar fields to ensure division free matrix inversion for changes of frames (may be removed when #28629 is solved) \n \n **Planned in the farther future**\n \n-- sections of general tensor products\n+- sections of general tensor products and automorphism fields on vector bundles\n - tensor products and Whitney sums of vector bundles\n-- return the total space with charts\n+- better zero treatment as in #28562\n+- `TensorField` inherits from `Section`, `VectorFrame` inherits from `LocalFrame`\n+- total space comes with induced charts\n``````\n",
    "created_at": "2019-10-19T12:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438211",
    "user": "https://github.com/DeRhamSource"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,11 +12,13 @@
 **Improvements in the preexisting code**
 
 - restriction of vectorframes depended on some strange order: fixed!
-- `SR` enforcement for automorphism field inversion removed (due to ticket #28189)
-- `is_unit()` method implemented for scalar fields (to check whether a matrix with entries in the scalar field algebra is invertible)
+- ~~`SR` enforcement for automorphism field inversion removed (due to ticket #28189)~~
+- `is_unit()` method superficially implemented for scalar fields to ensure division free matrix inversion for changes of frames (may be removed when #28629 is solved) 
 
 **Planned in the farther future**
 
-- sections of general tensor products
+- sections of general tensor products and automorphism fields on vector bundles
 - tensor products and Whitney sums of vector bundles
-- return the total space with charts
+- better zero treatment as in #28562
+- `TensorField` inherits from `Section`, `VectorFrame` inherits from `LocalFrame`
+- total space comes with induced charts
``````




---

archive/issue_comments_438212.json:
```json
{
    "body": "<div id=\"comment:122\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d7086a01ab7d70817b39ef5ea8f1ea5949d3d9d\"><code>8d7086a</code></a></td><td><code>'is_unit' modified</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/279f4283bd79bf0a964d971c8aed4d006e174813\"><code>279f428</code></a></td><td><code>Typo in doc</code></td></tr></table>\n",
    "created_at": "2019-10-19T20:12:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438212",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:122"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d7086a01ab7d70817b39ef5ea8f1ea5949d3d9d"><code>8d7086a</code></a></td><td><code>'is_unit' modified</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/279f4283bd79bf0a964d971c8aed4d006e174813"><code>279f428</code></a></td><td><code>Typo in doc</code></td></tr></table>




---

archive/issue_comments_438213.json:
```json
{
    "body": "Changed commit from **[`3910465`](https://github.com/sagemath/sagetrac-mirror/commit/39104657254e432c49bef596337fbae291ca5f77)** to **[`279f428`](https://github.com/sagemath/sagetrac-mirror/commit/279f4283bd79bf0a964d971c8aed4d006e174813)**",
    "created_at": "2019-10-19T20:12:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438213",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3910465`](https://github.com/sagemath/sagetrac-mirror/commit/39104657254e432c49bef596337fbae291ca5f77)** to **[`279f428`](https://github.com/sagemath/sagetrac-mirror/commit/279f4283bd79bf0a964d971c8aed4d006e174813)**



---

archive/issue_comments_438214.json:
```json
{
    "body": "Changed commit from **[`279f428`](https://github.com/sagemath/sagetrac-mirror/commit/279f4283bd79bf0a964d971c8aed4d006e174813)** to **[`4ae4ca3`](https://github.com/sagemath/sagetrac-mirror/commit/4ae4ca37508374ef9074cdbf9c650bb0d6ae8211)**",
    "created_at": "2019-10-20T12:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438214",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`279f428`](https://github.com/sagemath/sagetrac-mirror/commit/279f4283bd79bf0a964d971c8aed4d006e174813)** to **[`4ae4ca3`](https://github.com/sagemath/sagetrac-mirror/commit/4ae4ca37508374ef9074cdbf9c650bb0d6ae8211)**



---

archive/issue_comments_438215.json:
```json
{
    "body": "<div id=\"comment:123\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ae4ca37508374ef9074cdbf9c650bb0d6ae8211\"><code>4ae4ca3</code></a></td><td><code>default frame added to vector bundles + doctree modified</code></td></tr></table>\n",
    "created_at": "2019-10-20T12:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438215",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:123"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ae4ca37508374ef9074cdbf9c650bb0d6ae8211"><code>4ae4ca3</code></a></td><td><code>default frame added to vector bundles + doctree modified</code></td></tr></table>




---

archive/issue_comments_438216.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\nSince default frames are somehow obligatoric for further use, I added them. Please check. Sorry for that. But I think, this modification is very essential.",
    "created_at": "2019-10-20T12:11:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438216",
    "user": "https://github.com/DeRhamSource"
}
```

<div id="comment:124" align="right">comment:124</div>

Since default frames are somehow obligatoric for further use, I added them. Please check. Sorry for that. But I think, this modification is very essential.



---

archive/issue_comments_438217.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nReplying to [@DeRhamSource](#comment%3A119):\n> Replying to [@egourgoulhon](#comment%3A117):\n> > Again, I don't like so much the methods `is_unit()` added to the classes `ChartFunction` and `ScalarField`. They don't reflect fully the mathematical meaning of being a unit element of a ring. Do you really need these in this ticket? (I don't see clearly the connection with vector bundles). \n\n> \n> I'm not quite sure, but I think this method is mandatory when using the division free algorithm. And the division free algorithm is invoked when changes of frames are established. In general, for vector bundles, frames may be distributed over serveral chart domains, for which the SR enforcement method fails. So yes, this is related to this ticket. I'm not completely satisfied with this either. As soon as the issue in ticket #28629 is solved, this snippet can be deleted again. \n\nThanks for your answer. \n\n>Should I add a comment in the code about this?\n\nI've seen that you have done it; thanks.",
    "created_at": "2019-10-21T09:45:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438217",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:125" align="right">comment:125</div>

Replying to [@DeRhamSource](#comment%3A119):
> Replying to [@egourgoulhon](#comment%3A117):
> > Again, I don't like so much the methods `is_unit()` added to the classes `ChartFunction` and `ScalarField`. They don't reflect fully the mathematical meaning of being a unit element of a ring. Do you really need these in this ticket? (I don't see clearly the connection with vector bundles). 

> 
> I'm not quite sure, but I think this method is mandatory when using the division free algorithm. And the division free algorithm is invoked when changes of frames are established. In general, for vector bundles, frames may be distributed over serveral chart domains, for which the SR enforcement method fails. So yes, this is related to this ticket. I'm not completely satisfied with this either. As soon as the issue in ticket #28629 is solved, this snippet can be deleted again. 

Thanks for your answer. 

>Should I add a comment in the code about this?

I've seen that you have done it; thanks.



---

archive/issue_comments_438218.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nReplying to [@DeRhamSource](#comment%3A124):\n> Since default frames are somehow obligatoric for further use, I added them. Please check. Sorry for that. But I think, this modification is very essential.\n\nLGTM.",
    "created_at": "2019-10-21T09:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438218",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:126" align="right">comment:126</div>

Replying to [@DeRhamSource](#comment%3A124):
> Since default frames are somehow obligatoric for further use, I added them. Please check. Sorry for that. But I think, this modification is very essential.

LGTM.



---

archive/issue_events_383220.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-21T09:46:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383220"
}
```



---

archive/issue_events_383221.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2019-10-21T09:46:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383221"
}
```



---

archive/issue_comments_438219.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nThank you very much for this very valuable addition to Sage!",
    "created_at": "2019-10-21T09:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438219",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:127" align="right">comment:127</div>

Thank you very much for this very valuable addition to Sage!



---

archive/issue_comments_438220.json:
```json
{
    "body": "Changed branch from **[public/manifolds/vector_bundles](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/vector_bundles)** to **[`4ae4ca3`](https://github.com/sagemath/sagetrac-mirror/commit/4ae4ca37508374ef9074cdbf9c650bb0d6ae8211)**",
    "created_at": "2019-10-23T22:58:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28159#issuecomment-438220",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/manifolds/vector_bundles](https://github.com/sagemath/sagetrac-mirror/tree/public/manifolds/vector_bundles)** to **[`4ae4ca3`](https://github.com/sagemath/sagetrac-mirror/commit/4ae4ca37508374ef9074cdbf9c650bb0d6ae8211)**



---

archive/issue_events_383222.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-23T22:58:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383222"
}
```



---

archive/issue_events_383223.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c4738d71aae0577cb208c7b1fca745bb664f29b3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-10-23T22:58:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28159",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28159#event-383223"
}
```
