# Issue 28108: Py3: ValueError in graph_generators doctests with plantri optional package

archive/issues_027871.json:
```json
{
    "assignees": [],
    "body": "sage -i plantri\\\\\nsage -t --long src/sage/graphs/graph_generators.py\n\n```\n**********************************************************************\nFile \"src/sage/graphs/graph_generators.py\", line 1641, in sage.graphs.graph_generators.GraphGenerators.?\nFailed example:\n    for i in range(12, 23):                                             # optional plantri\n        L = len(list(graphs.triangulations(i, minimum_connectivity=5))) # optional plantri\n        print(\"{}   {:3d}\".format(i,L))                                 # optional plantri\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_generators.GraphGenerators.?[7]>\", line 2, in <module>\n        L = len(list(graphs.triangulations(i, minimum_connectivity=Integer(5)))) # optional plantri\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_generators.py\", line 1746, in triangulations\n        for G in graphs._read_planar_code(sp.stdout):\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_generators.py\", line 1150, in _read_planar_code\n        G.set_embedding(embed_g)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py\", line 2444, in set_embedding\n        self._check_embedding_validity(embedding, boolean=False)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py\", line 2551, in _check_embedding_validity\n        raise ValueError(\"{} and {} are not neighbors but {} is in the list associated with {}\".format(u, v, u, v))\n    ValueError: 10 and 6 are not neighbors but 10 is in the list associated with 6\n**********************************************************************\nFile \"src/sage/graphs/graph_generators.py\", line 1673, in sage.graphs.graph_generators.GraphGenerators.?\nFailed example:\n    [len(g) for g in graphs.triangulations(9, minimum_degree=4, minimum_connectivity=3, dual=True)]  # optional plantri\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.graph_generators.GraphGenerators.?[11]>\", line 1, in <module>\n        [len(g) for g in graphs.triangulations(Integer(9), minimum_degree=Integer(4), minimum_connectivity=Integer(3), dual=True)]  # optional plantri\n      File \"<doctest sage.graphs.graph_generators.GraphGenerators.?[11]>\", line 1, in <listcomp>\n        [len(g) for g in graphs.triangulations(Integer(9), minimum_degree=Integer(4), minimum_connectivity=Integer(3), dual=True)]  # optional plantri\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_generators.py\", line 1746, in triangulations\n        for G in graphs._read_planar_code(sp.stdout):\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_generators.py\", line 1150, in _read_planar_code\n        G.set_embedding(embed_g)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py\", line 2444, in set_embedding\n        self._check_embedding_validity(embedding, boolean=False)\n      File \"/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py\", line 2551, in _check_embedding_validity\n        raise ValueError(\"{} and {} are not neighbors but {} is in the list associated with {}\".format(u, v, u, v))\n    ValueError: 10 and 9 are not neighbors but 10 is in the list associated with 9\n```\n\nAdditionally we get the following errors with `benzene` and `buckygen` packages:\n\n```\nsage -i buckygen\nsage -i benzene\n```\n\n```\nsage -t --long src/sage/features/graph_generators.py\ntoo many failed tests, not using stored timings\nRunning doctests with ID 2019-08-19-15-57-32-a8119f22.\nGit branch: develop\nUsing --optional=benzene,buckygen,build,cmake,dochtml,gap_packages,libsemigroups,memlimit,mpir,plantri,primecount,python2,sage\nDoctesting 1 file.\nsage -t --long src/sage/features/graph_generators.py\n**********************************************************************\nFile \"src/sage/features/graph_generators.py\", line 68, in sage.features.graph_generators.Buckygen\nFailed example:\n    Buckygen().is_present()  # optional: buckygen\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.features.graph_generators.Buckygen[1]>\", line 1, in <module>\n        Buckygen().is_present()  # optional: buckygen\n      File \"sage/misc/cachefunc.pyx\", line 2311, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12712)\n        self.cache = f(self._instance)\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py\", line 129, in is_present\n        res = self._is_present()\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py\", line 353, in _is_present\n        return self.is_functional()\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py\", line 101, in is_functional\n        if lines.find(expected) == -1:\n    TypeError: argument should be integer or bytes-like object, not 'str'\n**********************************************************************\nFile \"src/sage/features/graph_generators.py\", line 90, in sage.features.graph_generators.Buckygen.is_functional\nFailed example:\n    Buckygen().is_functional()  # optional: buckygen\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.features.graph_generators.Buckygen.is_functional[1]>\", line 1, in <module>\n        Buckygen().is_functional()  # optional: buckygen\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py\", line 101, in is_functional\n        if lines.find(expected) == -1:\n    TypeError: argument should be integer or bytes-like object, not 'str'\n**********************************************************************\nFile \"src/sage/features/graph_generators.py\", line 116, in sage.features.graph_generators.Benzene\nFailed example:\n    Benzene().is_present()  # optional: benzene\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.features.graph_generators.Benzene[1]>\", line 1, in <module>\n        Benzene().is_present()  # optional: benzene\n      File \"sage/misc/cachefunc.pyx\", line 2311, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12712)\n        self.cache = f(self._instance)\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py\", line 129, in is_present\n        res = self._is_present()\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py\", line 353, in _is_present\n        return self.is_functional()\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py\", line 150, in is_functional\n        if not lines.startswith(expected):\n    TypeError: startswith first arg must be bytes or a tuple of bytes, not str\n**********************************************************************\nFile \"src/sage/features/graph_generators.py\", line 138, in sage.features.graph_generators.Benzene.is_functional\nFailed example:\n    Benzene().is_functional()  # optional: benzene\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.features.graph_generators.Benzene.is_functional[1]>\", line 1, in <module>\n        Benzene().is_functional()  # optional: benzene\n      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py\", line 150, in is_functional\n        if not lines.startswith(expected):\n    TypeError: startswith first arg must be bytes or a tuple of bytes, not str\n**********************************************************************\n4 items had failures:\n   1 of   3 in sage.features.graph_generators.Benzene\n   1 of   3 in sage.features.graph_generators.Benzene.is_functional\n   1 of   3 in sage.features.graph_generators.Buckygen\n   1 of   3 in sage.features.graph_generators.Buckygen.is_functional\n    [18 tests, 4 failures, 0.08 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/features/graph_generators.py  # 4 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 0.1 seconds\n    cpu time: 0.1 seconds\n    cumulative wall time: 0.1 seconds\n```\n\n```\nsage -t --long src/sage/graphs/graph_generators.py \n...\n   3 items had failures:\n   2 of  41 in sage.graphs.graph_generators.GraphGenerators.?\n   6 of  11 in sage.graphs.graph_generators.GraphGenerators.fullerenes\n   3 of   8 in sage.graphs.graph_generators.GraphGenerators.fusenes\n    [139 tests, 11 failures, 8.87 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/graphs/graph_generators.py  # 11 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 8.9 seconds\n    cpu time: 8.8 seconds\n    cumulative wall time: 8.9 seconds\n\n```\n\nCC:  @dcoudert\n\nBranch/Commit: **[`e9af570`](https://github.com/sagemath/sagetrac-mirror/commit/e9af570f6b3b78b27cf29e530676fb5f9761f2e8)**\n\nReviewer: **Vincent Klein**\n\nAuthor: **David Coudert**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28108_\n\n",
    "closed_at": "2019-08-20T22:28:42Z",
    "created_at": "2019-07-03T14:35:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Py3: ValueError in graph_generators doctests with plantri optional package",
    "type": "issue",
    "updated_at": "2019-08-20T22:28:42Z",
    "url": "https://github.com/sagemath/sage/issues/28108",
    "user": "https://github.com/vinklein"
}
```
sage -i plantri\\
sage -t --long src/sage/graphs/graph_generators.py

```
**********************************************************************
File "src/sage/graphs/graph_generators.py", line 1641, in sage.graphs.graph_generators.GraphGenerators.?
Failed example:
    for i in range(12, 23):                                             # optional plantri
        L = len(list(graphs.triangulations(i, minimum_connectivity=5))) # optional plantri
        print("{}   {:3d}".format(i,L))                                 # optional plantri
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_generators.GraphGenerators.?[7]>", line 2, in <module>
        L = len(list(graphs.triangulations(i, minimum_connectivity=Integer(5)))) # optional plantri
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_generators.py", line 1746, in triangulations
        for G in graphs._read_planar_code(sp.stdout):
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_generators.py", line 1150, in _read_planar_code
        G.set_embedding(embed_g)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py", line 2444, in set_embedding
        self._check_embedding_validity(embedding, boolean=False)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py", line 2551, in _check_embedding_validity
        raise ValueError("{} and {} are not neighbors but {} is in the list associated with {}".format(u, v, u, v))
    ValueError: 10 and 6 are not neighbors but 10 is in the list associated with 6
**********************************************************************
File "src/sage/graphs/graph_generators.py", line 1673, in sage.graphs.graph_generators.GraphGenerators.?
Failed example:
    [len(g) for g in graphs.triangulations(9, minimum_degree=4, minimum_connectivity=3, dual=True)]  # optional plantri
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.graph_generators.GraphGenerators.?[11]>", line 1, in <module>
        [len(g) for g in graphs.triangulations(Integer(9), minimum_degree=Integer(4), minimum_connectivity=Integer(3), dual=True)]  # optional plantri
      File "<doctest sage.graphs.graph_generators.GraphGenerators.?[11]>", line 1, in <listcomp>
        [len(g) for g in graphs.triangulations(Integer(9), minimum_degree=Integer(4), minimum_connectivity=Integer(3), dual=True)]  # optional plantri
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_generators.py", line 1746, in triangulations
        for G in graphs._read_planar_code(sp.stdout):
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/graph_generators.py", line 1150, in _read_planar_code
        G.set_embedding(embed_g)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py", line 2444, in set_embedding
        self._check_embedding_validity(embedding, boolean=False)
      File "/Users/dcoudert/sage3/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py", line 2551, in _check_embedding_validity
        raise ValueError("{} and {} are not neighbors but {} is in the list associated with {}".format(u, v, u, v))
    ValueError: 10 and 9 are not neighbors but 10 is in the list associated with 9
```

Additionally we get the following errors with `benzene` and `buckygen` packages:

```
sage -i buckygen
sage -i benzene
```

```
sage -t --long src/sage/features/graph_generators.py
too many failed tests, not using stored timings
Running doctests with ID 2019-08-19-15-57-32-a8119f22.
Git branch: develop
Using --optional=benzene,buckygen,build,cmake,dochtml,gap_packages,libsemigroups,memlimit,mpir,plantri,primecount,python2,sage
Doctesting 1 file.
sage -t --long src/sage/features/graph_generators.py
**********************************************************************
File "src/sage/features/graph_generators.py", line 68, in sage.features.graph_generators.Buckygen
Failed example:
    Buckygen().is_present()  # optional: buckygen
Exception raised:
    Traceback (most recent call last):
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.features.graph_generators.Buckygen[1]>", line 1, in <module>
        Buckygen().is_present()  # optional: buckygen
      File "sage/misc/cachefunc.pyx", line 2311, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12712)
        self.cache = f(self._instance)
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py", line 129, in is_present
        res = self._is_present()
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py", line 353, in _is_present
        return self.is_functional()
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py", line 101, in is_functional
        if lines.find(expected) == -1:
    TypeError: argument should be integer or bytes-like object, not 'str'
**********************************************************************
File "src/sage/features/graph_generators.py", line 90, in sage.features.graph_generators.Buckygen.is_functional
Failed example:
    Buckygen().is_functional()  # optional: buckygen
Exception raised:
    Traceback (most recent call last):
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.features.graph_generators.Buckygen.is_functional[1]>", line 1, in <module>
        Buckygen().is_functional()  # optional: buckygen
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py", line 101, in is_functional
        if lines.find(expected) == -1:
    TypeError: argument should be integer or bytes-like object, not 'str'
**********************************************************************
File "src/sage/features/graph_generators.py", line 116, in sage.features.graph_generators.Benzene
Failed example:
    Benzene().is_present()  # optional: benzene
Exception raised:
    Traceback (most recent call last):
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.features.graph_generators.Benzene[1]>", line 1, in <module>
        Benzene().is_present()  # optional: benzene
      File "sage/misc/cachefunc.pyx", line 2311, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12712)
        self.cache = f(self._instance)
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py", line 129, in is_present
        res = self._is_present()
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py", line 353, in _is_present
        return self.is_functional()
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py", line 150, in is_functional
        if not lines.startswith(expected):
    TypeError: startswith first arg must be bytes or a tuple of bytes, not str
**********************************************************************
File "src/sage/features/graph_generators.py", line 138, in sage.features.graph_generators.Benzene.is_functional
Failed example:
    Benzene().is_functional()  # optional: benzene
Exception raised:
    Traceback (most recent call last):
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.features.graph_generators.Benzene.is_functional[1]>", line 1, in <module>
        Benzene().is_functional()  # optional: benzene
      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py", line 150, in is_functional
        if not lines.startswith(expected):
    TypeError: startswith first arg must be bytes or a tuple of bytes, not str
**********************************************************************
4 items had failures:
   1 of   3 in sage.features.graph_generators.Benzene
   1 of   3 in sage.features.graph_generators.Benzene.is_functional
   1 of   3 in sage.features.graph_generators.Buckygen
   1 of   3 in sage.features.graph_generators.Buckygen.is_functional
    [18 tests, 4 failures, 0.08 s]
----------------------------------------------------------------------
sage -t --long src/sage/features/graph_generators.py  # 4 doctests failed
----------------------------------------------------------------------
Total time for all tests: 0.1 seconds
    cpu time: 0.1 seconds
    cumulative wall time: 0.1 seconds
```

```
sage -t --long src/sage/graphs/graph_generators.py 
...
   3 items had failures:
   2 of  41 in sage.graphs.graph_generators.GraphGenerators.?
   6 of  11 in sage.graphs.graph_generators.GraphGenerators.fullerenes
   3 of   8 in sage.graphs.graph_generators.GraphGenerators.fusenes
    [139 tests, 11 failures, 8.87 s]
----------------------------------------------------------------------
sage -t --long src/sage/graphs/graph_generators.py  # 11 doctests failed
----------------------------------------------------------------------
Total time for all tests: 8.9 seconds
    cpu time: 8.8 seconds
    cumulative wall time: 8.9 seconds

```

CC:  @dcoudert

Branch/Commit: **[`e9af570`](https://github.com/sagemath/sagetrac-mirror/commit/e9af570f6b3b78b27cf29e530676fb5f9761f2e8)**

Reviewer: **Vincent Klein**

Author: **David Coudert**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/28108_





---

archive/issue_events_385471.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-03T14:35:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385471"
}
```



---

archive/issue_events_385472.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-03T14:35:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385472"
}
```



---

archive/issue_events_385473.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-03T14:35:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385473"
}
```



---

archive/issue_events_385474.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-07-03T14:35:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385474"
}
```



---

archive/issue_comments_437419.json:
```json
{
    "body": "Dependencies: **#27948**",
    "created_at": "2019-07-03T14:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437419",
    "user": "https://github.com/vinklein"
}
```

Dependencies: **#27948**



---

archive/issue_comments_437420.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI did the following test, corresponding to the first failing doctest.\n\n```\nsage: def test(version=2):\n....:     import subprocess\n....:     command = \"plantri -m5c5 16\"\n....:     enc_kwargs = {} if version == 2 else {'encoding': 'latin-1'}\n....:     sp = subprocess.Popen(command, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, close_fds=True,**enc_kwargs)\n....:     code_input = sp.stdout\n....:     print(code_input.read(15))\n....:     s = '[ '\n....:     s2 = '[ '\n....:     order = ord(code_input.read(1))\n....:     i = 0\n....:     while i < order:\n....:         c = code_input.read(1)\n....:         if not ord(c):\n....:             i += 1\n....:             s += ']  [ '\n....:             s2 += ']  [ '\n....:         else:\n....:             s += str(ord(c)) + ' '\n....:             s2 += c + ' '\n....:     print(s[:-3])\n....:     return s2[:-3]\n```\n\nwith Python 2, I get:\n\n```\nsage: test(2)\n>>planar_code<<\n[ 2 3 4 5 6 ]  [ 1 6 7 8 3 ]  [ 1 2 8 9 10 4 ]  [ 1 3 10 11 5 ]  [ 1 4 11 12 6 ]  [ 1 5 12 13 7 2 ]  [ 2 6 13 14 8 ]  [ 2 7 14 9 3 ]  [ 3 8 14 15 10 ]  [ 3 9 15 11 4 ]  [ 4 10 15 16 12 5 ]  [ 5 11 16 13 6 ]  [ 6 12 16 14 7 ]  [ 7 13 16 15 9 8 ]  [ 9 14 16 11 10 ]  [ 11 15 14 13 12 ] \n'[ \\x02 \\x03 \\x04 \\x05 \\x06 ]  [ \\x01 \\x06 \\x07 \\x08 \\x03 ]  [ \\x01 \\x02 \\x08 \\t \\n \\x04 ]  [ \\x01 \\x03 \\n \\x0b \\x05 ]  [ \\x01 \\x04 \\x0b \\x0c \\x06 ]  [ \\x01 \\x05 \\x0c \\r \\x07 \\x02 ]  [ \\x02 \\x06 \\r \\x0e \\x08 ]  [ \\x02 \\x07 \\x0e \\t \\x03 ]  [ \\x03 \\x08 \\x0e \\x0f \\n ]  [ \\x03 \\t \\x0f \\x0b \\x04 ]  [ \\x04 \\n \\x0f \\x10 \\x0c \\x05 ]  [ \\x05 \\x0b \\x10 \\r \\x06 ]  [ \\x06 \\x0c \\x10 \\x0e \\x07 ]  [ \\x07 \\r \\x10 \\x0f \\t \\x08 ]  [ \\t \\x0e \\x10 \\x0b \\n ]  [ \\x0b \\x0f \\x0e \\r \\x0c ] '\n```\n\nand with Python 3:\n\n```\nsage: test(3)\n>>planar_code<<\n[ 2 3 4 5 6 ]  [ 1 6 7 8 3 ]  [ 1 2 8 9 10 4 ]  [ 1 3 10 11 5 ]  [ 1 4 11 12 6 ]  [ 1 5 12 10 7 2 ]  [ 2 6 10 14 8 ]  [ 2 7 14 9 3 ]  [ 3 8 14 15 10 ]  [ 3 9 15 11 4 ]  [ 4 10 15 16 12 5 ]  [ 5 11 16 10 6 ]  [ 6 12 16 14 7 ]  [ 7 10 16 15 9 8 ]  [ 9 14 16 11 10 ]  [ 11 15 14 10 12 ] \n'[ \\x02 \\x03 \\x04 \\x05 \\x06 ]  [ \\x01 \\x06 \\x07 \\x08 \\x03 ]  [ \\x01 \\x02 \\x08 \\t \\n \\x04 ]  [ \\x01 \\x03 \\n \\x0b \\x05 ]  [ \\x01 \\x04 \\x0b \\x0c \\x06 ]  [ \\x01 \\x05 \\x0c \\n \\x07 \\x02 ]  [ \\x02 \\x06 \\n \\x0e \\x08 ]  [ \\x02 \\x07 \\x0e \\t \\x03 ]  [ \\x03 \\x08 \\x0e \\x0f \\n ]  [ \\x03 \\t \\x0f \\x0b \\x04 ]  [ \\x04 \\n \\x0f \\x10 \\x0c \\x05 ]  [ \\x05 \\x0b \\x10 \\n \\x06 ]  [ \\x06 \\x0c \\x10 \\x0e \\x07 ]  [ \\x07 \\n \\x10 \\x0f \\t \\x08 ]  [ \\t \\x0e \\x10 \\x0b \\n ]  [ \\x0b \\x0f \\x0e \\n \\x0c ] '\n```\n\nIf you check carefully, you can see that each occurence of `\\r` that you can find in the output with Python 2 is replaced by `\\n` in Python 3.  However, occurrences of `\\n` that we see in py2 are the same in py3.\n\nHave you already seen that ? Do you know what we can do ?",
    "created_at": "2019-08-14T14:03:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437420",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:2" align="right">comment:2</div>

I did the following test, corresponding to the first failing doctest.

```
sage: def test(version=2):
....:     import subprocess
....:     command = "plantri -m5c5 16"
....:     enc_kwargs = {} if version == 2 else {'encoding': 'latin-1'}
....:     sp = subprocess.Popen(command, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, close_fds=True,**enc_kwargs)
....:     code_input = sp.stdout
....:     print(code_input.read(15))
....:     s = '[ '
....:     s2 = '[ '
....:     order = ord(code_input.read(1))
....:     i = 0
....:     while i < order:
....:         c = code_input.read(1)
....:         if not ord(c):
....:             i += 1
....:             s += ']  [ '
....:             s2 += ']  [ '
....:         else:
....:             s += str(ord(c)) + ' '
....:             s2 += c + ' '
....:     print(s[:-3])
....:     return s2[:-3]
```

with Python 2, I get:

```
sage: test(2)
>>planar_code<<
[ 2 3 4 5 6 ]  [ 1 6 7 8 3 ]  [ 1 2 8 9 10 4 ]  [ 1 3 10 11 5 ]  [ 1 4 11 12 6 ]  [ 1 5 12 13 7 2 ]  [ 2 6 13 14 8 ]  [ 2 7 14 9 3 ]  [ 3 8 14 15 10 ]  [ 3 9 15 11 4 ]  [ 4 10 15 16 12 5 ]  [ 5 11 16 13 6 ]  [ 6 12 16 14 7 ]  [ 7 13 16 15 9 8 ]  [ 9 14 16 11 10 ]  [ 11 15 14 13 12 ] 
'[ \x02 \x03 \x04 \x05 \x06 ]  [ \x01 \x06 \x07 \x08 \x03 ]  [ \x01 \x02 \x08 \t \n \x04 ]  [ \x01 \x03 \n \x0b \x05 ]  [ \x01 \x04 \x0b \x0c \x06 ]  [ \x01 \x05 \x0c \r \x07 \x02 ]  [ \x02 \x06 \r \x0e \x08 ]  [ \x02 \x07 \x0e \t \x03 ]  [ \x03 \x08 \x0e \x0f \n ]  [ \x03 \t \x0f \x0b \x04 ]  [ \x04 \n \x0f \x10 \x0c \x05 ]  [ \x05 \x0b \x10 \r \x06 ]  [ \x06 \x0c \x10 \x0e \x07 ]  [ \x07 \r \x10 \x0f \t \x08 ]  [ \t \x0e \x10 \x0b \n ]  [ \x0b \x0f \x0e \r \x0c ] '
```

and with Python 3:

```
sage: test(3)
>>planar_code<<
[ 2 3 4 5 6 ]  [ 1 6 7 8 3 ]  [ 1 2 8 9 10 4 ]  [ 1 3 10 11 5 ]  [ 1 4 11 12 6 ]  [ 1 5 12 10 7 2 ]  [ 2 6 10 14 8 ]  [ 2 7 14 9 3 ]  [ 3 8 14 15 10 ]  [ 3 9 15 11 4 ]  [ 4 10 15 16 12 5 ]  [ 5 11 16 10 6 ]  [ 6 12 16 14 7 ]  [ 7 10 16 15 9 8 ]  [ 9 14 16 11 10 ]  [ 11 15 14 10 12 ] 
'[ \x02 \x03 \x04 \x05 \x06 ]  [ \x01 \x06 \x07 \x08 \x03 ]  [ \x01 \x02 \x08 \t \n \x04 ]  [ \x01 \x03 \n \x0b \x05 ]  [ \x01 \x04 \x0b \x0c \x06 ]  [ \x01 \x05 \x0c \n \x07 \x02 ]  [ \x02 \x06 \n \x0e \x08 ]  [ \x02 \x07 \x0e \t \x03 ]  [ \x03 \x08 \x0e \x0f \n ]  [ \x03 \t \x0f \x0b \x04 ]  [ \x04 \n \x0f \x10 \x0c \x05 ]  [ \x05 \x0b \x10 \n \x06 ]  [ \x06 \x0c \x10 \x0e \x07 ]  [ \x07 \n \x10 \x0f \t \x08 ]  [ \t \x0e \x10 \x0b \n ]  [ \x0b \x0f \x0e \n \x0c ] '
```

If you check carefully, you can see that each occurence of `\r` that you can find in the output with Python 2 is replaced by `\n` in Python 3.  However, occurrences of `\n` that we see in py2 are the same in py3.

Have you already seen that ? Do you know what we can do ?



---

archive/issue_comments_437421.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nGot it !\n\nI tried adding this fix inside method `_read_planar_code` but it breaks the doctest of that method as `StringIO` has no method `reconfigure`.\n\nI also added the fix to the methods using `buckygen` and `benzene`.",
    "created_at": "2019-08-15T09:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437421",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

Got it !

I tried adding this fix inside method `_read_planar_code` but it breaks the doctest of that method as `StringIO` has no method `reconfigure`.

I also added the fix to the methods using `buckygen` and `benzene`.



---

archive/issue_comments_437422.json:
```json
{
    "body": "Changed dependencies from **#27948** to none",
    "created_at": "2019-08-15T09:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437422",
    "user": "https://github.com/dcoudert"
}
```

Changed dependencies from **#27948** to none



---

archive/issue_comments_437423.json:
```json
{
    "body": "Commit: **[`e240e52`](https://github.com/sagemath/sagetrac-mirror/commit/e240e52f3b292479fac149d8dd44a196a1630da6)**",
    "created_at": "2019-08-15T09:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437423",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`e240e52`](https://github.com/sagemath/sagetrac-mirror/commit/e240e52f3b292479fac149d8dd44a196a1630da6)**



---

archive/issue_events_385475.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-08-15T09:21:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385475"
}
```



---

archive/issue_comments_437424.json:
```json
{
    "body": "Author: **David Coudert**",
    "created_at": "2019-08-15T09:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437424",
    "user": "https://github.com/dcoudert"
}
```

Author: **David Coudert**



---

archive/issue_comments_437425.json:
```json
{
    "body": "Branch: **[public/graphs/28108_plantri](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/28108_plantri)**",
    "created_at": "2019-08-15T09:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437425",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[public/graphs/28108_plantri](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/28108_plantri)**



---

archive/issue_comments_437426.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9af570f6b3b78b27cf29e530676fb5f9761f2e8\">e9af570</a></td><td><code>trac #28108: fix doctests with benzene and buckygen</code></td></tr></table>\n",
    "created_at": "2019-08-15T09:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437426",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9af570f6b3b78b27cf29e530676fb5f9761f2e8">e9af570</a></td><td><code>trac #28108: fix doctests with benzene and buckygen</code></td></tr></table>




---

archive/issue_comments_437427.json:
```json
{
    "body": "Changed commit from **[`e240e52`](https://github.com/sagemath/sagetrac-mirror/commit/e240e52f3b292479fac149d8dd44a196a1630da6)** to **[`e9af570`](https://github.com/sagemath/sagetrac-mirror/commit/e9af570f6b3b78b27cf29e530676fb5f9761f2e8)**",
    "created_at": "2019-08-15T09:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437427",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e240e52`](https://github.com/sagemath/sagetrac-mirror/commit/e240e52f3b292479fac149d8dd44a196a1630da6)** to **[`e9af570`](https://github.com/sagemath/sagetrac-mirror/commit/e9af570f6b3b78b27cf29e530676fb5f9761f2e8)**



---

archive/issue_comments_437428.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWhile testing the fix with `benzene`, I realized it needs the same fix than what was done in #27948 for `plantri`. I also did it for `buckygen`. This way, all tests pass for method `fusenes` (using `benzene`).\n\nHowever, I'm unable to install `buckygen` and so to test method `fullerenes`.",
    "created_at": "2019-08-15T09:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437428",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:5" align="right">comment:5</div>

While testing the fix with `benzene`, I realized it needs the same fix than what was done in #27948 for `plantri`. I also did it for `buckygen`. This way, all tests pass for method `fusenes` (using `benzene`).

However, I'm unable to install `buckygen` and so to test method `fullerenes`.



---

archive/issue_comments_437429.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-sage -i plantri\n+sage -i plantri\\\\\n sage -t --long src/sage/graphs/graph_generators.py\n \n ```\n@@ -50,3 +50,121 @@\n     ValueError: 10 and 9 are not neighbors but 10 is in the list associated with 9\n ```\n \n+Additionally we get the following errors with `benzene` and `buckygen` packages:\n+\n+```\n+sage -i buckygen\n+sage -i benzene\n+```\n+\n+```\n+sage -t --long src/sage/features/graph_generators.py\n+too many failed tests, not using stored timings\n+Running doctests with ID 2019-08-19-15-57-32-a8119f22.\n+Git branch: develop\n+Using --optional=benzene,buckygen,build,cmake,dochtml,gap_packages,libsemigroups,memlimit,mpir,plantri,primecount,python2,sage\n+Doctesting 1 file.\n+sage -t --long src/sage/features/graph_generators.py\n+**********************************************************************\n+File \"src/sage/features/graph_generators.py\", line 68, in sage.features.graph_generators.Buckygen\n+Failed example:\n+    Buckygen().is_present()  # optional: buckygen\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.features.graph_generators.Buckygen[1]>\", line 1, in <module>\n+        Buckygen().is_present()  # optional: buckygen\n+      File \"sage/misc/cachefunc.pyx\", line 2311, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12712)\n+        self.cache = f(self._instance)\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py\", line 129, in is_present\n+        res = self._is_present()\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py\", line 353, in _is_present\n+        return self.is_functional()\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py\", line 101, in is_functional\n+        if lines.find(expected) == -1:\n+    TypeError: argument should be integer or bytes-like object, not 'str'\n+**********************************************************************\n+File \"src/sage/features/graph_generators.py\", line 90, in sage.features.graph_generators.Buckygen.is_functional\n+Failed example:\n+    Buckygen().is_functional()  # optional: buckygen\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.features.graph_generators.Buckygen.is_functional[1]>\", line 1, in <module>\n+        Buckygen().is_functional()  # optional: buckygen\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py\", line 101, in is_functional\n+        if lines.find(expected) == -1:\n+    TypeError: argument should be integer or bytes-like object, not 'str'\n+**********************************************************************\n+File \"src/sage/features/graph_generators.py\", line 116, in sage.features.graph_generators.Benzene\n+Failed example:\n+    Benzene().is_present()  # optional: benzene\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.features.graph_generators.Benzene[1]>\", line 1, in <module>\n+        Benzene().is_present()  # optional: benzene\n+      File \"sage/misc/cachefunc.pyx\", line 2311, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12712)\n+        self.cache = f(self._instance)\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py\", line 129, in is_present\n+        res = self._is_present()\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py\", line 353, in _is_present\n+        return self.is_functional()\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py\", line 150, in is_functional\n+        if not lines.startswith(expected):\n+    TypeError: startswith first arg must be bytes or a tuple of bytes, not str\n+**********************************************************************\n+File \"src/sage/features/graph_generators.py\", line 138, in sage.features.graph_generators.Benzene.is_functional\n+Failed example:\n+    Benzene().is_functional()  # optional: benzene\n+Exception raised:\n+    Traceback (most recent call last):\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n+        self.compile_and_execute(example, compiler, test.globs)\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n+        exec(compiled, globs)\n+      File \"<doctest sage.features.graph_generators.Benzene.is_functional[1]>\", line 1, in <module>\n+        Benzene().is_functional()  # optional: benzene\n+      File \"/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py\", line 150, in is_functional\n+        if not lines.startswith(expected):\n+    TypeError: startswith first arg must be bytes or a tuple of bytes, not str\n+**********************************************************************\n+4 items had failures:\n+   1 of   3 in sage.features.graph_generators.Benzene\n+   1 of   3 in sage.features.graph_generators.Benzene.is_functional\n+   1 of   3 in sage.features.graph_generators.Buckygen\n+   1 of   3 in sage.features.graph_generators.Buckygen.is_functional\n+    [18 tests, 4 failures, 0.08 s]\n+----------------------------------------------------------------------\n+sage -t --long src/sage/features/graph_generators.py  # 4 doctests failed\n+----------------------------------------------------------------------\n+Total time for all tests: 0.1 seconds\n+    cpu time: 0.1 seconds\n+    cumulative wall time: 0.1 seconds\n+```\n+\n+```\n+sage -t --long src/sage/graphs/graph_generators.py \n+...\n+   3 items had failures:\n+   2 of  41 in sage.graphs.graph_generators.GraphGenerators.?\n+   6 of  11 in sage.graphs.graph_generators.GraphGenerators.fullerenes\n+   3 of   8 in sage.graphs.graph_generators.GraphGenerators.fusenes\n+    [139 tests, 11 failures, 8.87 s]\n+----------------------------------------------------------------------\n+sage -t --long src/sage/graphs/graph_generators.py  # 11 doctests failed\n+----------------------------------------------------------------------\n+Total time for all tests: 8.9 seconds\n+    cpu time: 8.8 seconds\n+    cumulative wall time: 8.9 seconds\n+\n+```\n``````\n",
    "created_at": "2019-08-19T14:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437429",
    "user": "https://github.com/vinklein"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-sage -i plantri
+sage -i plantri\\
 sage -t --long src/sage/graphs/graph_generators.py
 
 ```
@@ -50,3 +50,121 @@
     ValueError: 10 and 9 are not neighbors but 10 is in the list associated with 9
 ```
 
+Additionally we get the following errors with `benzene` and `buckygen` packages:
+
+```
+sage -i buckygen
+sage -i benzene
+```
+
+```
+sage -t --long src/sage/features/graph_generators.py
+too many failed tests, not using stored timings
+Running doctests with ID 2019-08-19-15-57-32-a8119f22.
+Git branch: develop
+Using --optional=benzene,buckygen,build,cmake,dochtml,gap_packages,libsemigroups,memlimit,mpir,plantri,primecount,python2,sage
+Doctesting 1 file.
+sage -t --long src/sage/features/graph_generators.py
+**********************************************************************
+File "src/sage/features/graph_generators.py", line 68, in sage.features.graph_generators.Buckygen
+Failed example:
+    Buckygen().is_present()  # optional: buckygen
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.features.graph_generators.Buckygen[1]>", line 1, in <module>
+        Buckygen().is_present()  # optional: buckygen
+      File "sage/misc/cachefunc.pyx", line 2311, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12712)
+        self.cache = f(self._instance)
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py", line 129, in is_present
+        res = self._is_present()
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py", line 353, in _is_present
+        return self.is_functional()
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py", line 101, in is_functional
+        if lines.find(expected) == -1:
+    TypeError: argument should be integer or bytes-like object, not 'str'
+**********************************************************************
+File "src/sage/features/graph_generators.py", line 90, in sage.features.graph_generators.Buckygen.is_functional
+Failed example:
+    Buckygen().is_functional()  # optional: buckygen
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.features.graph_generators.Buckygen.is_functional[1]>", line 1, in <module>
+        Buckygen().is_functional()  # optional: buckygen
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py", line 101, in is_functional
+        if lines.find(expected) == -1:
+    TypeError: argument should be integer or bytes-like object, not 'str'
+**********************************************************************
+File "src/sage/features/graph_generators.py", line 116, in sage.features.graph_generators.Benzene
+Failed example:
+    Benzene().is_present()  # optional: benzene
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.features.graph_generators.Benzene[1]>", line 1, in <module>
+        Benzene().is_present()  # optional: benzene
+      File "sage/misc/cachefunc.pyx", line 2311, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12712)
+        self.cache = f(self._instance)
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py", line 129, in is_present
+        res = self._is_present()
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/__init__.py", line 353, in _is_present
+        return self.is_functional()
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py", line 150, in is_functional
+        if not lines.startswith(expected):
+    TypeError: startswith first arg must be bytes or a tuple of bytes, not str
+**********************************************************************
+File "src/sage/features/graph_generators.py", line 138, in sage.features.graph_generators.Benzene.is_functional
+Failed example:
+    Benzene().is_functional()  # optional: benzene
+Exception raised:
+    Traceback (most recent call last):
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
+        self.compile_and_execute(example, compiler, test.globs)
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
+        exec(compiled, globs)
+      File "<doctest sage.features.graph_generators.Benzene.is_functional[1]>", line 1, in <module>
+        Benzene().is_functional()  # optional: benzene
+      File "/home/vklein/odk/sage/local/lib/python3.7/site-packages/sage/features/graph_generators.py", line 150, in is_functional
+        if not lines.startswith(expected):
+    TypeError: startswith first arg must be bytes or a tuple of bytes, not str
+**********************************************************************
+4 items had failures:
+   1 of   3 in sage.features.graph_generators.Benzene
+   1 of   3 in sage.features.graph_generators.Benzene.is_functional
+   1 of   3 in sage.features.graph_generators.Buckygen
+   1 of   3 in sage.features.graph_generators.Buckygen.is_functional
+    [18 tests, 4 failures, 0.08 s]
+----------------------------------------------------------------------
+sage -t --long src/sage/features/graph_generators.py  # 4 doctests failed
+----------------------------------------------------------------------
+Total time for all tests: 0.1 seconds
+    cpu time: 0.1 seconds
+    cumulative wall time: 0.1 seconds
+```
+
+```
+sage -t --long src/sage/graphs/graph_generators.py 
+...
+   3 items had failures:
+   2 of  41 in sage.graphs.graph_generators.GraphGenerators.?
+   6 of  11 in sage.graphs.graph_generators.GraphGenerators.fullerenes
+   3 of   8 in sage.graphs.graph_generators.GraphGenerators.fusenes
+    [139 tests, 11 failures, 8.87 s]
+----------------------------------------------------------------------
+sage -t --long src/sage/graphs/graph_generators.py  # 11 doctests failed
+----------------------------------------------------------------------
+Total time for all tests: 8.9 seconds
+    cpu time: 8.8 seconds
+    cumulative wall time: 8.9 seconds
+
+```
``````




---

archive/issue_comments_437430.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\n`e9af570` fix the 15 doctests errors. Looks good to me.",
    "created_at": "2019-08-19T14:26:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437430",
    "user": "https://github.com/vinklein"
}
```

<div id="comment:7" align="right">comment:7</div>

`e9af570` fix the 15 doctests errors. Looks good to me.



---

archive/issue_events_385476.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-08-19T14:26:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385476"
}
```



---

archive/issue_events_385477.json:
```json
{
    "actor": "https://github.com/vinklein",
    "created_at": "2019-08-19T14:26:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385477"
}
```



---

archive/issue_comments_437431.json:
```json
{
    "body": "Reviewer: **Vincent Klein**",
    "created_at": "2019-08-19T15:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437431",
    "user": "https://github.com/vinklein"
}
```

Reviewer: **Vincent Klein**



---

archive/issue_comments_437432.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks.",
    "created_at": "2019-08-19T15:19:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437432",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks.



---

archive/issue_events_385478.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-20T22:28:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385478"
}
```



---

archive/issue_events_385479.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7508513e65ae3597e8c3580ff0f3d4d9fcbee30c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-08-20T22:28:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28108#event-385479"
}
```



---

archive/issue_comments_437433.json:
```json
{
    "body": "Changed branch from **[public/graphs/28108_plantri](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/28108_plantri)** to **[`e9af570`](https://github.com/sagemath/sagetrac-mirror/commit/e9af570f6b3b78b27cf29e530676fb5f9761f2e8)**",
    "created_at": "2019-08-20T22:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28108",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28108#issuecomment-437433",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/graphs/28108_plantri](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/28108_plantri)** to **[`e9af570`](https://github.com/sagemath/sagetrac-mirror/commit/e9af570f6b3b78b27cf29e530676fb5f9761f2e8)**
