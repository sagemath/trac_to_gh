# Issue 28559: py3 + linear_tensor_element.pyx

archive/issues_028322.json:
```json
{
    "body": "Intermittent failure with `linear_tensor_element.pyx` on OS X with a Python 3 build of Sage:\n\n```\nsage -t --warn-long 58.7 src/sage/numerical/linear_tensor_element.pyx  # Killed due to abort\n```\nIn more detail:\n\n```\n$ ./sage -t src/sage/numerical/linear_tensor_element.pyx \nRunning doctests with ID 2019-10-05-11-47-01-e1b44413.\nGit branch: develop\nUsing --optional=build,dochtml,sage\nDoctesting 1 file.\nglp_free: memory allocation error\nError detected in file env/alloc.c at line 72\n------------------------------------------------------------------------\n0   signals.cpython-37m-darwin.so       0x000000010ed22f0a print_backtrace + 58\n1   signals.cpython-37m-darwin.so       0x000000010ed271b7 sigdie + 39\n2   signals.cpython-37m-darwin.so       0x000000010ed27130 sigdie_for_sig + 256\n3   libsystem_platform.dylib            0x00007fff621d7b5d _sigtramp + 29\n4   libglpk.40.dylib                    0x0000000152fbb020 libglpk.40.dylib + 32\n5   libsystem_c.dylib                   0x00007fff620916a6 abort + 127\n6   libglpk.40.dylib                    0x0000000153019bd4 errfunc + 212\n7   libglpk.40.dylib                    0x00000001530193c8 dma + 184\n8   libglpk.40.dylib                    0x000000015302b02f _glp_dmp_delete_pool + 47\n9   libglpk.40.dylib                    0x0000000152fd6621 delete_prob + 17\n10  libglpk.40.dylib                    0x0000000152fd66d2 glp_delete_prob + 66\n11  glpk_backend.cpython-37m-darwin.so  0x0000000152f7740c __pyx_tp_dealloc_4sage_9numerical_8backends_12glpk_backend_GLPKBackend + 76\n12  mip.cpython-37m-darwin.so           0x000000014f5bc91e __pyx_tp_clear_4sage_9numerical_3mip_MixedIntegerLinearProgram + 78\n13  libpython3.7m.dylib                 0x000000010d37316c collect + 2204\n14  libpython3.7m.dylib                 0x000000010d3738a2 _PyObject_GC_Alloc + 386\n15  libpython3.7m.dylib                 0x000000010d373914 _PyObject_GC_New + 20\n16  libpython3.7m.dylib                 0x000000010d273c78 dictiter_new + 24\n17  libpython3.7m.dylib                 0x000000010d22c918 PyObject_GetIter + 24\n18  libpython3.7m.dylib                 0x000000010d39aaeb defdict_reduce + 107\n19  libpython3.7m.dylib                 0x000000010d242cbc _PyMethodDef_RawFastCallDict + 588\n20  libpython3.7m.dylib                 0x000000010d241cde _PyObject_FastCallDict + 270\n21  libpython3.7m.dylib                 0x000000010d2a0cfe object___reduce_ex__ + 174\n22  libpython3.7m.dylib                 0x000000010d242cbc _PyMethodDef_RawFastCallDict + 588\n23  libpython3.7m.dylib                 0x000000010d241cde _PyObject_FastCallDict + 270\n24  libpython3.7m.dylib                 0x000000010d2442db object_vacall + 619\n25  libpython3.7m.dylib                 0x000000010d2444e0 PyObject_CallFunctionObjArgs + 144\n26  _pickle.cpython-37m-darwin.so       0x000000010ddc9b82 save + 12626\n27  _pickle.cpython-37m-darwin.so       0x000000010ddccf0a batch_dict + 490\n28  _pickle.cpython-37m-darwin.so       0x000000010ddcbe56 save_reduce + 1142\n29  _pickle.cpython-37m-darwin.so       0x000000010ddc9b29 save + 12537\n30  _pickle.cpython-37m-darwin.so       0x000000010ddc8674 save + 7236\n31  _pickle.cpython-37m-darwin.so       0x000000010ddc6701 dump + 257\n32  _pickle.cpython-37m-darwin.so       0x000000010ddd5390 _pickle_Pickler_dump + 96\n33  libpython3.7m.dylib                 0x000000010d243197 _PyMethodDef_RawFastCallKeywords + 775\n34  libpython3.7m.dylib                 0x000000010d249181 _PyMethodDescr_FastCallKeywords + 81\n35  libpython3.7m.dylib                 0x000000010d317538 call_function + 888\n36  libpython3.7m.dylib                 0x000000010d313efe _PyEval_EvalFrameDefault + 27230\n37  libpython3.7m.dylib                 0x000000010d31824d _PyEval_EvalCodeWithName + 3005\n38  libpython3.7m.dylib                 0x000000010d242499 _PyFunction_FastCallKeywords + 217\n39  libpython3.7m.dylib                 0x000000010d3174cc call_function + 780\n40  libpython3.7m.dylib                 0x000000010d313f1e _PyEval_EvalFrameDefault + 27262\n41  libpython3.7m.dylib                 0x000000010d2429bd function_code_fastcall + 237\n42  libpython3.7m.dylib                 0x000000010d314140 _PyEval_EvalFrameDefault + 27808\n43  libpython3.7m.dylib                 0x000000010d2429bd function_code_fastcall + 237\n44  libpython3.7m.dylib                 0x000000010d3174cc call_function + 780\n45  libpython3.7m.dylib                 0x000000010d313efe _PyEval_EvalFrameDefault + 27230\n46  libpython3.7m.dylib                 0x000000010d2429bd function_code_fastcall + 237\n47  libpython3.7m.dylib                 0x000000010d3174cc call_function + 780\n48  libpython3.7m.dylib                 0x000000010d313efe _PyEval_EvalFrameDefault + 27230\n49  libpython3.7m.dylib                 0x000000010d2429bd function_code_fastcall + 237\n50  libpython3.7m.dylib                 0x000000010d243463 _PyObject_Call_Prepend + 131\n51  libpython3.7m.dylib                 0x000000010d2425f8 PyObject_Call + 136\n52  libpython3.7m.dylib                 0x000000010d3a7e87 t_bootstrap + 71\n53  libpython3.7m.dylib                 0x000000010d35b699 pythread_wrapper + 25\n54  libsystem_pthread.dylib             0x00007fff621e02eb _pthread_body + 126\n55  libsystem_pthread.dylib             0x00007fff621e3249 _pthread_start + 66\n56  libsystem_pthread.dylib             0x00007fff621df40d thread_start + 13\n------------------------------------------------------------------------\nUnhandled SIGABRT: An abort() occurred.\nThis probably occurred because a *compiled* module has a bug\nin it and is not properly wrapped with sig_on(), sig_off().\nPython will now terminate.\n------------------------------------------------------------------------\nsage -t --warn-long 58.7 src/sage/numerical/linear_tensor_element.pyx\n    Killed due to abort\n**********************************************************************\nTests run before process (pid=66448) failed:\nsage: mip.<x> = MixedIntegerLinearProgram('ppl')   # base ring is QQ ## line 6 ##\nsage: lt = x[0] * vector([3,4]) + 1;   lt ## line 7 ##\n(1, 1) + (3, 4)*x_0\nsage: type(lt) ## line 9 ##\n<class 'sage.numerical.linear_tensor_element.LinearTensor'>\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 11 ##\n0\nsage: parent = MixedIntegerLinearProgram().linear_functions_parent().tensor(RDF^2) ## line 47 ##\nsage: parent({0: [1,2], 3: [-7,-8]}) ## line 48 ##\n(1.0, 2.0)*x_0 + (-7.0, -8.0)*x_3\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 50 ##\n0\nsage: LT = MixedIntegerLinearProgram().linear_functions_parent().tensor(RDF^2) ## line 70 ##\nsage: LT({0: [1,2], 3: [-7,-8]}) ## line 71 ##\n(1.0, 2.0)*x_0 + (-7.0, -8.0)*x_3\nsage: TestSuite(LT).run(skip=['_test_an_element', '_test_elements_eq_reflexive',\n    '_test_elements_eq_symmetric', '_test_elements_eq_transitive',\n    '_test_elements_neq', '_test_additive_associativity',\n    '_test_elements', '_test_pickling', '_test_zero']) ## line 74 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 78 ##\n0\nsage: p = MixedIntegerLinearProgram().linear_functions_parent().tensor(RDF^2) ## line 95 ##\nsage: lt = p({0:[1,2], 3:[4,5]});  lt ## line 96 ##\n(1.0, 2.0)*x_0 + (4.0, 5.0)*x_3\nsage: lt[0] ## line 98 ##\nx_0 + 4*x_3\nsage: lt[1] ## line 100 ##\n2*x_0 + 5*x_3\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 102 ##\n0\nsage: p = MixedIntegerLinearProgram().linear_functions_parent().tensor(RDF^2) ## line 120 ##\nsage: lt = p({0:[1,2], 3:[4,5]}) ## line 121 ##\nsage: lt.dict() ## line 122 ##\n{0: (1.0, 2.0), 3: (4.0, 5.0)}\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 124 ##\n0\nsage: mip.<b> = MixedIntegerLinearProgram() ## line 144 ##\nsage: lt = vector([1,2]) * b[3] + vector([4,5]) * b[0] - 5;  lt ## line 145 ##\n(-5.0, -5.0) + (1.0, 2.0)*x_0 + (4.0, 5.0)*x_1\nsage: lt.coefficient(b[3]) ## line 147 ##\n(1.0, 2.0)\nsage: lt.coefficient(0)      # x_0 is b[3] ## line 149 ##\n(1.0, 2.0)\nsage: lt.coefficient(4) ## line 151 ##\n(0.0, 0.0)\nsage: lt.coefficient(-1) ## line 153 ##\n(-5.0, -5.0)\nsage: lt.coefficient(b[3] + b[4]) ## line 158 ##\nsage: lt.coefficient(2*b[3]) ## line 162 ##\nsage: mip.<q> = MixedIntegerLinearProgram(solver='ppl') ## line 166 ##\nsage: lt.coefficient(q[0]) ## line 167 ##\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 171 ##\n0\nsage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 197 ##\nsage: R.<s,t> = RDF[] ## line 198 ##\nsage: LT = LinearFunctionsParent(RDF).tensor(R) ## line 199 ##\nsage: LT.an_element()  # indirect doctest ## line 200 ##\n(s) + (5.0*s)*x_2 + (7.0*s)*x_5\nsage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 203 ##\nsage: LT.an_element()  # indirect doctest ## line 204 ##\n(1.0, 0.0) + (5.0, 0.0)*x_2 + (7.0, 0.0)*x_5\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 206 ##\n0\nsage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 235 ##\nsage: LT = LinearFunctionsParent(RDF).tensor(RDF^(2,2)) ## line 236 ##\nsage: LT.an_element()  # indirect doctest ## line 237 ##\n[1 + 5*x_2 + 7*x_5 1 + 5*x_2 + 7*x_5]\n[1 + 5*x_2 + 7*x_5 1 + 5*x_2 + 7*x_5]\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 240 ##\n0\nsage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 278 ##\nsage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 279 ##\nsage: LT({0: [1,2], 3: [-7,-8]}) + LT({2: [5,6], 3: [2,-2]}) + 16 ## line 280 ##\n(16.0, 16.0) + (1.0, 2.0)*x_0 + (5.0, 6.0)*x_2 + (-5.0, -10.0)*x_3\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 282 ##\n0\nsage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 298 ##\nsage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 299 ##\nsage: -LT({0: [1,2], 3: [-7,-8]}) ## line 300 ##\n(-1.0, -2.0)*x_0 + (7.0, 8.0)*x_3\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 302 ##\n0\nsage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 322 ##\nsage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 323 ##\nsage: LT({0: [1,2], 3: [-7,-8]}) - LT({1: [1,2]}) ## line 324 ##\n(1.0, 2.0)*x_0 + (-1.0, -2.0)*x_1 + (-7.0, -8.0)*x_3\nsage: LT({0: [1,2], 3: [-7,-8]}) - 16 ## line 326 ##\n(-16.0, -16.0) + (1.0, 2.0)*x_0 + (-7.0, -8.0)*x_3\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 328 ##\n0\nsage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 348 ##\nsage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 349 ##\nsage: 10 * LT({0: [1,2], 3: [-7,-8]}) ## line 350 ##\n(10.0, 20.0)*x_0 + (-70.0, -80.0)*x_3\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 352 ##\n0\nsage: mip.<x> = MixedIntegerLinearProgram() ## line 364 ##\nsage: lt0 = x[0] * vector([1,2]) ## line 365 ##\nsage: lt1 = x[1] * vector([2,3]) ## line 366 ##\nsage: lt0.__le__(lt1)    # indirect doctest ## line 367 ##\n(1.0, 2.0)*x_0 <= (2.0, 3.0)*x_1\nsage: mip.<x> = MixedIntegerLinearProgram() ## line 372 ##\nsage: from sage.numerical.linear_functions import LinearFunction ## line 373 ##\nsage: x[0] * vector([1,2]) <= x[1] * vector([2,3]) ## line 374 ##\n(1.0, 2.0)*x_0 <= (2.0, 3.0)*x_1\nsage: x[0] * vector([1,2]) >= x[1] * vector([2,3]) ## line 377 ##\n(2.0, 3.0)*x_1 <= (1.0, 2.0)*x_0\nsage: x[0] * vector([1,2]) == x[1] * vector([2,3]) ## line 380 ##\n(1.0, 2.0)*x_0 == (2.0, 3.0)*x_1\nsage: x[0] * vector([1,2]) < x[1] * vector([2,3]) ## line 383 ##\nsage: x[0] * vector([1,2]) > x[1] * vector([2,3]) ## line 388 ##\nsage: lt = x[0] * vector([1,2]) ## line 395 ##\nsage: cm = sage.structure.element.get_coercion_model() ## line 396 ##\nsage: cm.explain(10, lt, operator.le) ## line 397 ##\nCoercion on left operand via\n    Coercion map:\n      From: Integer Ring\n      To:   Tensor product of Vector space of dimension 2 over Real Double Field and Linear functions over Real Double Field\nArithmetic performed after coercions.\nResult lives in Tensor product of Vector space of dimension 2 over Real Double Field and Linear functions over Real Double Field\nTensor product of Vector space of dimension 2 over Real Double Field and Linear functions over Real Double Field\nsage: operator.le(10, lt) ## line 406 ##\n(10.0, 10.0) <= (1.0, 2.0)*x_0\nsage: lt <= 1 ## line 408 ##\n(1.0, 2.0)*x_0 <= (1.0, 1.0)\nsage: lt >= 1 ## line 410 ##\n(1.0, 1.0) <= (1.0, 2.0)*x_0\nsage: 1 <= lt ## line 412 ##\n(1.0, 1.0) <= (1.0, 2.0)*x_0\nsage: 1 >= lt ## line 414 ##\n(1.0, 2.0)*x_0 <= (1.0, 1.0)\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 416 ##\n0\nsage: p = MixedIntegerLinearProgram() ## line 444 ##\nsage: lt0 = p[0] * vector([1,2]) ## line 445 ##\nsage: hash(lt0)   # random output ## line 446 ##\n-9223372036499170180\nsage: d = {} ## line 448 ##\nsage: d[lt0] = 3 ## line 449 ##\nsage: f = p[0] * vector([1]) ## line 455 ##\nsage: g = p[0] * vector([1]) ## line 456 ##\nsage: set([f, f]) ## line 457 ##\n{((1.0))*x_0}\nsage: set([f, g]) ## line 459 ##\n{((1.0))*x_0, ((1.0))*x_0}\nsage: len(set([f, f+1])) ## line 461 ##\n2\nsage: d = {} ## line 464 ##\nsage: d[f] = 123 ## line 465 ##\nsage: d[g] = 456 ## line 466 ##\nsage: len(list(d)) ## line 467 ##\n2\nsage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 469 ##\n0\n```\nThis has been discussed at #27587, but I think it deserves its own ticket. For some reason, this change makes the failure go away:\n\n```diff\ndiff --git a/src/sage/numerical/linear_tensor_element.pyx b/src/sage/numerical/linear_tensor_element.pyx\nindex 597f96f953..fbd1f58a45 100644\n--- a/src/sage/numerical/linear_tensor_element.pyx\n+++ b/src/sage/numerical/linear_tensor_element.pyx\n@@ -380,16 +380,6 @@ cdef class LinearTensor(ModuleElement):\n             sage: x[0] * vector([1,2]) == x[1] * vector([2,3])\n             (1.0, 2.0)*x_0 == (2.0, 3.0)*x_1\n \n-            sage: x[0] * vector([1,2]) < x[1] * vector([2,3])\n-            Traceback (most recent call last):\n-            ...\n-            ValueError: strict < is not allowed, use <= instead.\n-\n-            sage: x[0] * vector([1,2]) > x[1] * vector([2,3])\n-            Traceback (most recent call last):\n-            ...\n-            ValueError: strict > is not allowed, use >= instead.\n-\n         TESTS::\n \n             sage: lt = x[0] * vector([1,2])\n```\nbut I don't know why.\n\nCC:  @collares\n\nKeywords: random_fail\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/28559\n\n",
    "created_at": "2019-10-05T19:41:10Z",
    "labels": [
        "component: python3",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "py3 + linear_tensor_element.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28559",
    "user": "https://github.com/jhpalmieri"
}
```
Intermittent failure with `linear_tensor_element.pyx` on OS X with a Python 3 build of Sage:

```
sage -t --warn-long 58.7 src/sage/numerical/linear_tensor_element.pyx  # Killed due to abort
```
In more detail:

```
$ ./sage -t src/sage/numerical/linear_tensor_element.pyx 
Running doctests with ID 2019-10-05-11-47-01-e1b44413.
Git branch: develop
Using --optional=build,dochtml,sage
Doctesting 1 file.
glp_free: memory allocation error
Error detected in file env/alloc.c at line 72
------------------------------------------------------------------------
0   signals.cpython-37m-darwin.so       0x000000010ed22f0a print_backtrace + 58
1   signals.cpython-37m-darwin.so       0x000000010ed271b7 sigdie + 39
2   signals.cpython-37m-darwin.so       0x000000010ed27130 sigdie_for_sig + 256
3   libsystem_platform.dylib            0x00007fff621d7b5d _sigtramp + 29
4   libglpk.40.dylib                    0x0000000152fbb020 libglpk.40.dylib + 32
5   libsystem_c.dylib                   0x00007fff620916a6 abort + 127
6   libglpk.40.dylib                    0x0000000153019bd4 errfunc + 212
7   libglpk.40.dylib                    0x00000001530193c8 dma + 184
8   libglpk.40.dylib                    0x000000015302b02f _glp_dmp_delete_pool + 47
9   libglpk.40.dylib                    0x0000000152fd6621 delete_prob + 17
10  libglpk.40.dylib                    0x0000000152fd66d2 glp_delete_prob + 66
11  glpk_backend.cpython-37m-darwin.so  0x0000000152f7740c __pyx_tp_dealloc_4sage_9numerical_8backends_12glpk_backend_GLPKBackend + 76
12  mip.cpython-37m-darwin.so           0x000000014f5bc91e __pyx_tp_clear_4sage_9numerical_3mip_MixedIntegerLinearProgram + 78
13  libpython3.7m.dylib                 0x000000010d37316c collect + 2204
14  libpython3.7m.dylib                 0x000000010d3738a2 _PyObject_GC_Alloc + 386
15  libpython3.7m.dylib                 0x000000010d373914 _PyObject_GC_New + 20
16  libpython3.7m.dylib                 0x000000010d273c78 dictiter_new + 24
17  libpython3.7m.dylib                 0x000000010d22c918 PyObject_GetIter + 24
18  libpython3.7m.dylib                 0x000000010d39aaeb defdict_reduce + 107
19  libpython3.7m.dylib                 0x000000010d242cbc _PyMethodDef_RawFastCallDict + 588
20  libpython3.7m.dylib                 0x000000010d241cde _PyObject_FastCallDict + 270
21  libpython3.7m.dylib                 0x000000010d2a0cfe object___reduce_ex__ + 174
22  libpython3.7m.dylib                 0x000000010d242cbc _PyMethodDef_RawFastCallDict + 588
23  libpython3.7m.dylib                 0x000000010d241cde _PyObject_FastCallDict + 270
24  libpython3.7m.dylib                 0x000000010d2442db object_vacall + 619
25  libpython3.7m.dylib                 0x000000010d2444e0 PyObject_CallFunctionObjArgs + 144
26  _pickle.cpython-37m-darwin.so       0x000000010ddc9b82 save + 12626
27  _pickle.cpython-37m-darwin.so       0x000000010ddccf0a batch_dict + 490
28  _pickle.cpython-37m-darwin.so       0x000000010ddcbe56 save_reduce + 1142
29  _pickle.cpython-37m-darwin.so       0x000000010ddc9b29 save + 12537
30  _pickle.cpython-37m-darwin.so       0x000000010ddc8674 save + 7236
31  _pickle.cpython-37m-darwin.so       0x000000010ddc6701 dump + 257
32  _pickle.cpython-37m-darwin.so       0x000000010ddd5390 _pickle_Pickler_dump + 96
33  libpython3.7m.dylib                 0x000000010d243197 _PyMethodDef_RawFastCallKeywords + 775
34  libpython3.7m.dylib                 0x000000010d249181 _PyMethodDescr_FastCallKeywords + 81
35  libpython3.7m.dylib                 0x000000010d317538 call_function + 888
36  libpython3.7m.dylib                 0x000000010d313efe _PyEval_EvalFrameDefault + 27230
37  libpython3.7m.dylib                 0x000000010d31824d _PyEval_EvalCodeWithName + 3005
38  libpython3.7m.dylib                 0x000000010d242499 _PyFunction_FastCallKeywords + 217
39  libpython3.7m.dylib                 0x000000010d3174cc call_function + 780
40  libpython3.7m.dylib                 0x000000010d313f1e _PyEval_EvalFrameDefault + 27262
41  libpython3.7m.dylib                 0x000000010d2429bd function_code_fastcall + 237
42  libpython3.7m.dylib                 0x000000010d314140 _PyEval_EvalFrameDefault + 27808
43  libpython3.7m.dylib                 0x000000010d2429bd function_code_fastcall + 237
44  libpython3.7m.dylib                 0x000000010d3174cc call_function + 780
45  libpython3.7m.dylib                 0x000000010d313efe _PyEval_EvalFrameDefault + 27230
46  libpython3.7m.dylib                 0x000000010d2429bd function_code_fastcall + 237
47  libpython3.7m.dylib                 0x000000010d3174cc call_function + 780
48  libpython3.7m.dylib                 0x000000010d313efe _PyEval_EvalFrameDefault + 27230
49  libpython3.7m.dylib                 0x000000010d2429bd function_code_fastcall + 237
50  libpython3.7m.dylib                 0x000000010d243463 _PyObject_Call_Prepend + 131
51  libpython3.7m.dylib                 0x000000010d2425f8 PyObject_Call + 136
52  libpython3.7m.dylib                 0x000000010d3a7e87 t_bootstrap + 71
53  libpython3.7m.dylib                 0x000000010d35b699 pythread_wrapper + 25
54  libsystem_pthread.dylib             0x00007fff621e02eb _pthread_body + 126
55  libsystem_pthread.dylib             0x00007fff621e3249 _pthread_start + 66
56  libsystem_pthread.dylib             0x00007fff621df40d thread_start + 13
------------------------------------------------------------------------
Unhandled SIGABRT: An abort() occurred.
This probably occurred because a *compiled* module has a bug
in it and is not properly wrapped with sig_on(), sig_off().
Python will now terminate.
------------------------------------------------------------------------
sage -t --warn-long 58.7 src/sage/numerical/linear_tensor_element.pyx
    Killed due to abort
**********************************************************************
Tests run before process (pid=66448) failed:
sage: mip.<x> = MixedIntegerLinearProgram('ppl')   # base ring is QQ ## line 6 ##
sage: lt = x[0] * vector([3,4]) + 1;   lt ## line 7 ##
(1, 1) + (3, 4)*x_0
sage: type(lt) ## line 9 ##
<class 'sage.numerical.linear_tensor_element.LinearTensor'>
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 11 ##
0
sage: parent = MixedIntegerLinearProgram().linear_functions_parent().tensor(RDF^2) ## line 47 ##
sage: parent({0: [1,2], 3: [-7,-8]}) ## line 48 ##
(1.0, 2.0)*x_0 + (-7.0, -8.0)*x_3
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 50 ##
0
sage: LT = MixedIntegerLinearProgram().linear_functions_parent().tensor(RDF^2) ## line 70 ##
sage: LT({0: [1,2], 3: [-7,-8]}) ## line 71 ##
(1.0, 2.0)*x_0 + (-7.0, -8.0)*x_3
sage: TestSuite(LT).run(skip=['_test_an_element', '_test_elements_eq_reflexive',
    '_test_elements_eq_symmetric', '_test_elements_eq_transitive',
    '_test_elements_neq', '_test_additive_associativity',
    '_test_elements', '_test_pickling', '_test_zero']) ## line 74 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 78 ##
0
sage: p = MixedIntegerLinearProgram().linear_functions_parent().tensor(RDF^2) ## line 95 ##
sage: lt = p({0:[1,2], 3:[4,5]});  lt ## line 96 ##
(1.0, 2.0)*x_0 + (4.0, 5.0)*x_3
sage: lt[0] ## line 98 ##
x_0 + 4*x_3
sage: lt[1] ## line 100 ##
2*x_0 + 5*x_3
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 102 ##
0
sage: p = MixedIntegerLinearProgram().linear_functions_parent().tensor(RDF^2) ## line 120 ##
sage: lt = p({0:[1,2], 3:[4,5]}) ## line 121 ##
sage: lt.dict() ## line 122 ##
{0: (1.0, 2.0), 3: (4.0, 5.0)}
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 124 ##
0
sage: mip.<b> = MixedIntegerLinearProgram() ## line 144 ##
sage: lt = vector([1,2]) * b[3] + vector([4,5]) * b[0] - 5;  lt ## line 145 ##
(-5.0, -5.0) + (1.0, 2.0)*x_0 + (4.0, 5.0)*x_1
sage: lt.coefficient(b[3]) ## line 147 ##
(1.0, 2.0)
sage: lt.coefficient(0)      # x_0 is b[3] ## line 149 ##
(1.0, 2.0)
sage: lt.coefficient(4) ## line 151 ##
(0.0, 0.0)
sage: lt.coefficient(-1) ## line 153 ##
(-5.0, -5.0)
sage: lt.coefficient(b[3] + b[4]) ## line 158 ##
sage: lt.coefficient(2*b[3]) ## line 162 ##
sage: mip.<q> = MixedIntegerLinearProgram(solver='ppl') ## line 166 ##
sage: lt.coefficient(q[0]) ## line 167 ##
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 171 ##
0
sage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 197 ##
sage: R.<s,t> = RDF[] ## line 198 ##
sage: LT = LinearFunctionsParent(RDF).tensor(R) ## line 199 ##
sage: LT.an_element()  # indirect doctest ## line 200 ##
(s) + (5.0*s)*x_2 + (7.0*s)*x_5
sage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 203 ##
sage: LT.an_element()  # indirect doctest ## line 204 ##
(1.0, 0.0) + (5.0, 0.0)*x_2 + (7.0, 0.0)*x_5
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 206 ##
0
sage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 235 ##
sage: LT = LinearFunctionsParent(RDF).tensor(RDF^(2,2)) ## line 236 ##
sage: LT.an_element()  # indirect doctest ## line 237 ##
[1 + 5*x_2 + 7*x_5 1 + 5*x_2 + 7*x_5]
[1 + 5*x_2 + 7*x_5 1 + 5*x_2 + 7*x_5]
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 240 ##
0
sage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 278 ##
sage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 279 ##
sage: LT({0: [1,2], 3: [-7,-8]}) + LT({2: [5,6], 3: [2,-2]}) + 16 ## line 280 ##
(16.0, 16.0) + (1.0, 2.0)*x_0 + (5.0, 6.0)*x_2 + (-5.0, -10.0)*x_3
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 282 ##
0
sage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 298 ##
sage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 299 ##
sage: -LT({0: [1,2], 3: [-7,-8]}) ## line 300 ##
(-1.0, -2.0)*x_0 + (7.0, 8.0)*x_3
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 302 ##
0
sage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 322 ##
sage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 323 ##
sage: LT({0: [1,2], 3: [-7,-8]}) - LT({1: [1,2]}) ## line 324 ##
(1.0, 2.0)*x_0 + (-1.0, -2.0)*x_1 + (-7.0, -8.0)*x_3
sage: LT({0: [1,2], 3: [-7,-8]}) - 16 ## line 326 ##
(-16.0, -16.0) + (1.0, 2.0)*x_0 + (-7.0, -8.0)*x_3
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 328 ##
0
sage: from sage.numerical.linear_functions import LinearFunctionsParent ## line 348 ##
sage: LT = LinearFunctionsParent(RDF).tensor(RDF^2) ## line 349 ##
sage: 10 * LT({0: [1,2], 3: [-7,-8]}) ## line 350 ##
(10.0, 20.0)*x_0 + (-70.0, -80.0)*x_3
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 352 ##
0
sage: mip.<x> = MixedIntegerLinearProgram() ## line 364 ##
sage: lt0 = x[0] * vector([1,2]) ## line 365 ##
sage: lt1 = x[1] * vector([2,3]) ## line 366 ##
sage: lt0.__le__(lt1)    # indirect doctest ## line 367 ##
(1.0, 2.0)*x_0 <= (2.0, 3.0)*x_1
sage: mip.<x> = MixedIntegerLinearProgram() ## line 372 ##
sage: from sage.numerical.linear_functions import LinearFunction ## line 373 ##
sage: x[0] * vector([1,2]) <= x[1] * vector([2,3]) ## line 374 ##
(1.0, 2.0)*x_0 <= (2.0, 3.0)*x_1
sage: x[0] * vector([1,2]) >= x[1] * vector([2,3]) ## line 377 ##
(2.0, 3.0)*x_1 <= (1.0, 2.0)*x_0
sage: x[0] * vector([1,2]) == x[1] * vector([2,3]) ## line 380 ##
(1.0, 2.0)*x_0 == (2.0, 3.0)*x_1
sage: x[0] * vector([1,2]) < x[1] * vector([2,3]) ## line 383 ##
sage: x[0] * vector([1,2]) > x[1] * vector([2,3]) ## line 388 ##
sage: lt = x[0] * vector([1,2]) ## line 395 ##
sage: cm = sage.structure.element.get_coercion_model() ## line 396 ##
sage: cm.explain(10, lt, operator.le) ## line 397 ##
Coercion on left operand via
    Coercion map:
      From: Integer Ring
      To:   Tensor product of Vector space of dimension 2 over Real Double Field and Linear functions over Real Double Field
Arithmetic performed after coercions.
Result lives in Tensor product of Vector space of dimension 2 over Real Double Field and Linear functions over Real Double Field
Tensor product of Vector space of dimension 2 over Real Double Field and Linear functions over Real Double Field
sage: operator.le(10, lt) ## line 406 ##
(10.0, 10.0) <= (1.0, 2.0)*x_0
sage: lt <= 1 ## line 408 ##
(1.0, 2.0)*x_0 <= (1.0, 1.0)
sage: lt >= 1 ## line 410 ##
(1.0, 1.0) <= (1.0, 2.0)*x_0
sage: 1 <= lt ## line 412 ##
(1.0, 1.0) <= (1.0, 2.0)*x_0
sage: 1 >= lt ## line 414 ##
(1.0, 2.0)*x_0 <= (1.0, 1.0)
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 416 ##
0
sage: p = MixedIntegerLinearProgram() ## line 444 ##
sage: lt0 = p[0] * vector([1,2]) ## line 445 ##
sage: hash(lt0)   # random output ## line 446 ##
-9223372036499170180
sage: d = {} ## line 448 ##
sage: d[lt0] = 3 ## line 449 ##
sage: f = p[0] * vector([1]) ## line 455 ##
sage: g = p[0] * vector([1]) ## line 456 ##
sage: set([f, f]) ## line 457 ##
{((1.0))*x_0}
sage: set([f, g]) ## line 459 ##
{((1.0))*x_0, ((1.0))*x_0}
sage: len(set([f, f+1])) ## line 461 ##
2
sage: d = {} ## line 464 ##
sage: d[f] = 123 ## line 465 ##
sage: d[g] = 456 ## line 466 ##
sage: len(list(d)) ## line 467 ##
2
sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 469 ##
0
```
This has been discussed at #27587, but I think it deserves its own ticket. For some reason, this change makes the failure go away:

```diff
diff --git a/src/sage/numerical/linear_tensor_element.pyx b/src/sage/numerical/linear_tensor_element.pyx
index 597f96f953..fbd1f58a45 100644
--- a/src/sage/numerical/linear_tensor_element.pyx
+++ b/src/sage/numerical/linear_tensor_element.pyx
@@ -380,16 +380,6 @@ cdef class LinearTensor(ModuleElement):
             sage: x[0] * vector([1,2]) == x[1] * vector([2,3])
             (1.0, 2.0)*x_0 == (2.0, 3.0)*x_1
 
-            sage: x[0] * vector([1,2]) < x[1] * vector([2,3])
-            Traceback (most recent call last):
-            ...
-            ValueError: strict < is not allowed, use <= instead.
-
-            sage: x[0] * vector([1,2]) > x[1] * vector([2,3])
-            Traceback (most recent call last):
-            ...
-            ValueError: strict > is not allowed, use >= instead.
-
         TESTS::
 
             sage: lt = x[0] * vector([1,2])
```
but I don't know why.

CC:  @collares

Keywords: random_fail

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/28559





---

archive/issue_comments_425793.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -236,7 +236,7 @@\n sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 469 ##\n 0\n \\`\\`\\`\n-This has been discussed at #25680, but I think it deserves its own ticket. For some reason, this change makes the failure go away:\n+This has been discussed at #27587, but I think it deserves its own ticket. For some reason, this change makes the failure go away:\n \n \\`\\`\\`diff\n diff --git a/src/sage/numerical/linear_tensor_element.pyx b/src/sage/numerical/linear_tensor_element.pyx\n```\n",
    "created_at": "2019-10-05T19:42:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425793",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
```diff
--- 
+++ 
@@ -236,7 +236,7 @@
 sage: sig_on_count() # check sig_on/off pairings (virtual doctest) ## line 469 ##
 0
 \`\`\`
-This has been discussed at #25680, but I think it deserves its own ticket. For some reason, this change makes the failure go away:
+This has been discussed at #27587, but I think it deserves its own ticket. For some reason, this change makes the failure go away:
 
 \`\`\`diff
 diff --git a/src/sage/numerical/linear_tensor_element.pyx b/src/sage/numerical/linear_tensor_element.pyx
```




---

archive/issue_comments_425794.json:
```json
{
    "body": "<a id='comment:2'></a>This problem still exists and is not limited to OS X. It appears in the patchbot results occasionally, for example here based on 9.0beta7: [CentOS](https://patchbot.sagemath.org/log/0/CentOS%20Linux/7.7.1908/x86_64/3.10.0-1062.4.3.el7.x86_64/r640/2019-11-29%2020:44:25), [LinuxMint](https://patchbot.sagemath.org/log/25903/LinuxMint/19.2/x86_64/4.15.0-65-generic/pc72/2019-11-30%2004:09:14).",
    "created_at": "2019-11-30T23:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425794",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:2'></a>This problem still exists and is not limited to OS X. It appears in the patchbot results occasionally, for example here based on 9.0beta7: [CentOS](https://patchbot.sagemath.org/log/0/CentOS%20Linux/7.7.1908/x86_64/3.10.0-1062.4.3.el7.x86_64/r640/2019-11-29%2020:44:25), [LinuxMint](https://patchbot.sagemath.org/log/25903/LinuxMint/19.2/x86_64/4.15.0-65-generic/pc72/2019-11-30%2004:09:14).



---

archive/issue_comments_425795.json:
```json
{
    "body": "<a id='comment:3'></a>No one proposes a solution. How about adopting John's temporary measure here just to push sage on python 3? We can create a regular ticket to further track the issue.",
    "created_at": "2019-12-02T07:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425795",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:3'></a>No one proposes a solution. How about adopting John's temporary measure here just to push sage on python 3? We can create a regular ticket to further track the issue.



---

archive/issue_comments_425796.json:
```json
{
    "body": "<a id='comment:4'></a>Indeed, this also happening with LinuxMint:\n\nhttps://patchbot.sagemath.org/log/0/LinuxMint/19.2/x86_64/4.15.0-65-generic/pc72/2019-12-02%2002:01:40\n\nThere is no urgency to fix this for python3. The switch to python3 will happen very soon anyway.",
    "created_at": "2019-12-02T08:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425796",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>Indeed, this also happening with LinuxMint:

https://patchbot.sagemath.org/log/0/LinuxMint/19.2/x86_64/4.15.0-65-generic/pc72/2019-12-02%2002:01:40

There is no urgency to fix this for python3. The switch to python3 will happen very soon anyway.



---

archive/issue_comments_425797.json:
```json
{
    "body": "Changing keywords from \"\" to \"random_fail\".",
    "created_at": "2019-12-15T11:35:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425797",
    "user": "https://github.com/vbraun"
}
```

Changing keywords from "" to "random_fail".



---

archive/issue_comments_425798.json:
```json
{
    "body": "<a id='comment:6'></a>I'm still surprised this isn't similar or related to #28106.  Memory exhaustion is the most likely culprit for random failures like this.",
    "created_at": "2019-12-16T16:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425798",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>I'm still surprised this isn't similar or related to #28106.  Memory exhaustion is the most likely culprit for random failures like this.



---

archive/issue_comments_425799.json:
```json
{
    "body": "<a id='comment:7'></a>I think there is an underlying memory corruption bug here.\n* The test should be almost trivial, doesn't use a significant amount of memory\n* The traceback is from when the glpk memory structure is freed, after the computation succeded\nThe glpk pool allocator has some headers on allocated memory regions to check violations, and this is being triggered here.",
    "created_at": "2019-12-16T17:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425799",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>I think there is an underlying memory corruption bug here.
* The test should be almost trivial, doesn't use a significant amount of memory
* The traceback is from when the glpk memory structure is freed, after the computation succeded
The glpk pool allocator has some headers on allocated memory regions to check violations, and this is being triggered here.



---

archive/issue_comments_425800.json:
```json
{
    "body": "<a id='comment:8'></a>Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425800",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>Ticket retargeted after milestone closed



---

archive/issue_events_071680.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71680"
}
```



---

archive/issue_comments_425801.json:
```json
{
    "body": "<a id='comment:9'></a>Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425801",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_071681.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71681"
}
```



---

archive/issue_events_071682.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71682"
}
```



---

archive/issue_events_071683.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71683"
}
```



---

archive/issue_events_071684.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71684"
}
```



---

archive/issue_events_071685.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71685"
}
```



---

archive/issue_events_071686.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71686"
}
```



---

archive/issue_comments_425802.json:
```json
{
    "body": "<a id='comment:11'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425802",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_425803.json:
```json
{
    "body": "<a id='comment:13'></a>I haven't seen this problem in a long time. Has anyone else?",
    "created_at": "2021-03-12T18:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425803",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>I haven't seen this problem in a long time. Has anyone else?



---

archive/issue_comments_425804.json:
```json
{
    "body": "<a id='comment:14'></a>Yes, this happened on the NixOS builders yesterday: https://nix-cache.s3.amazonaws.com/log/npaj3152j2q7nq1n58i8sncx57mkf6g3-sage-tests-9.2.drv",
    "created_at": "2021-03-12T19:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425804",
    "user": "https://github.com/collares"
}
```

<a id='comment:14'></a>Yes, this happened on the NixOS builders yesterday: https://nix-cache.s3.amazonaws.com/log/npaj3152j2q7nq1n58i8sncx57mkf6g3-sage-tests-9.2.drv



---

archive/issue_comments_425805.json:
```json
{
    "body": "<a id='comment:15'></a>It's easy to find examples of thread-safety issues related to GLPK in other projects, such as https://github.com/jyp/glpk-hs/pull/9. I don't know how Cython's `__dealloc__` works, but could it interact badly with GLPK's use of thread-local storage?",
    "created_at": "2021-04-02T12:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425805",
    "user": "https://github.com/collares"
}
```

<a id='comment:15'></a>It's easy to find examples of thread-safety issues related to GLPK in other projects, such as https://github.com/jyp/glpk-hs/pull/9. I don't know how Cython's `__dealloc__` works, but could it interact badly with GLPK's use of thread-local storage?



---

archive/issue_comments_425806.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:13 jhpalmieri]:\n> I haven't seen this problem in a long time. Has anyone else?\n\n\nA few days ago, this happened on a [patchbot](https://patchbot.sagemath.org/log/30477/Linux/1_SMP_Debian_4.19.181-1_(2021-03-19)/x86_64/4.19.0-16-amd64/tmonteil-lxc2/2021-05-02%2011:48:28) with Debian.",
    "created_at": "2021-05-08T14:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28559#issuecomment-425806",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:16'></a>Replying to [comment:13 jhpalmieri]:
> I haven't seen this problem in a long time. Has anyone else?


A few days ago, this happened on a [patchbot](https://patchbot.sagemath.org/log/30477/Linux/1_SMP_Debian_4.19.181-1_(2021-03-19)/x86_64/4.19.0-16-amd64/tmonteil-lxc2/2021-05-02%2011:48:28) with Debian.



---

archive/issue_events_071687.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71687"
}
```



---

archive/issue_events_071688.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71688"
}
```



---

archive/issue_events_071689.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71689"
}
```



---

archive/issue_events_071690.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71690"
}
```



---

archive/issue_events_071691.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71691"
}
```



---

archive/issue_events_071692.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71692"
}
```



---

archive/issue_events_071693.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71693"
}
```



---

archive/issue_events_071694.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28559",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28559#event-71694"
}
```
