# Issue 28175: Move optional sage optimization backends (COIN, CPLEX, Gurobi) to separate Cython packages to remove OptionalExtension problems

archive/issues_027938.json:
```json
{
    "body": "`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. \n\nWith this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).\n\nThis makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n\nThe new packages are on PyPI:\n\n```\nwget -P upstream https://files.pythonhosted.org/packages/29/8a/65fd90a890fcfb56166c4071aa7a4fb5b865d313304f60474870f0e89998/sage_numerical_backends_cplex-9.0b12.tar.gz\nwget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz\nwget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz\n``` \n\nDevelopment here:\n- https://github.com/mkoeppe/sage-numerical-backends-cplex\n- https://github.com/mkoeppe/sage-numerical-backends-coin\n- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n\n\nSee also:\n- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages\n- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n\n\n\n\nCC:  @isuruf @saraedum @kiwifb @dimpase tmonteil @videlec @seblabbe\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nBranch: 127989764d490e3d9359712970923bd993b14067\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28175\n\n",
    "closed_at": "2020-01-05T15:47:42Z",
    "created_at": "2019-07-11T17:54:04Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Move optional sage optimization backends (COIN, CPLEX, Gurobi) to separate Cython packages to remove OptionalExtension problems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28175",
    "user": "https://github.com/mkoeppe"
}
```
`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. 

With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).

This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.

The new packages are on PyPI:

```
wget -P upstream https://files.pythonhosted.org/packages/29/8a/65fd90a890fcfb56166c4071aa7a4fb5b865d313304f60474870f0e89998/sage_numerical_backends_cplex-9.0b12.tar.gz
wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz
wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz
``` 

Development here:
- https://github.com/mkoeppe/sage-numerical-backends-cplex
- https://github.com/mkoeppe/sage-numerical-backends-coin
- https://github.com/mkoeppe/sage-numerical-backends-gurobi


See also:
- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages
- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 




CC:  @isuruf @saraedum @kiwifb @dimpase tmonteil @videlec @seblabbe

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Branch: 127989764d490e3d9359712970923bd993b14067

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28175





---

archive/issue_comments_539262.json:
```json
{
    "body": "<a id='comment:1'></a>\nCan you be more precise on your plans.\n\nThese backends are used in graphs. So what will happen if linear programming backends are in a separate package ?",
    "created_at": "2019-07-23T20:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539262",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
Can you be more precise on your plans.

These backends are used in graphs. So what will happen if linear programming backends are in a separate package ?



---

archive/issue_comments_539263.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [dcoudert](#comment%3A1):\n> These backends are used in graphs. So what will happen if linear programming backends are in a separate package ? \n\nIn my plan, the backends would be a standard package of the sage distribution, and the cython modules it provides would be automatically imported when MixedIntegerLinearProgram is used.",
    "created_at": "2019-07-24T15:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539263",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Replying to [dcoudert](#comment%3A1):
> These backends are used in graphs. So what will happen if linear programming backends are in a separate package ? 

In my plan, the backends would be a standard package of the sage distribution, and the cython modules it provides would be automatically imported when MixedIntegerLinearProgram is used.



---

archive/issue_events_087178.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-11-27T02:19:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-87178"
}
```



---

archive/issue_events_087179.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "rename": {
        "from": "Move sage optimization backends to a separate package",
        "to": "Move sage optimization backends to separate Cython packages to remove OptionalExtension problems"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-87179"
}
```



---

archive/issue_comments_539264.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,37 @@\n-`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib.\n+`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.\n+\n+From `src/module_list.py`:\n+\n+```\n+    OptionalExtension(\"sage.numerical.backends.gurobi_backend\",\n+              [\"sage/numerical/backends/gurobi_backend.pyx\"],\n+              libraries = [\"gurobi\"],\n+              condition = os.path.isfile(SAGE_INC + \"/gurobi_c.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libgurobi.so\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.cplex_backend\",\n+              [\"sage/numerical/backends/cplex_backend.pyx\"],\n+              libraries = [\"cplex\"],\n+              condition = os.path.isfile(SAGE_INC + \"/cplex.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libcplex.a\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.coin_backend\",\n+              [\"sage/numerical/backends/coin_backend.pyx\"],\n+              language = 'c++',\n+              libraries = [\"Cbc\", \"CbcSolver\", \"Cgl\", \"Clp\", \"CoinUtils\",\n+                           \"OsiCbc\", \"OsiClp\", \"Osi\"] + lapack_libs,\n+              library_dirs = lapack_library_dirs,\n+              include_dirs = lapack_include_dirs,\n+              package = 'cbc'),\n+```\n+\n \n Details:\n - `get_solver` uses base_ring\n - GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)\n-\n- \n+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.\n \n \n+\n+\n+\n``````\n",
    "created_at": "2019-11-27T02:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539264",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,37 @@
-`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib.
+`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.
+
+From `src/module_list.py`:
+
+```
+    OptionalExtension("sage.numerical.backends.gurobi_backend",
+              ["sage/numerical/backends/gurobi_backend.pyx"],
+              libraries = ["gurobi"],
+              condition = os.path.isfile(SAGE_INC + "/gurobi_c.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libgurobi.so")),
+
+    OptionalExtension("sage.numerical.backends.cplex_backend",
+              ["sage/numerical/backends/cplex_backend.pyx"],
+              libraries = ["cplex"],
+              condition = os.path.isfile(SAGE_INC + "/cplex.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libcplex.a")),
+
+    OptionalExtension("sage.numerical.backends.coin_backend",
+              ["sage/numerical/backends/coin_backend.pyx"],
+              language = 'c++',
+              libraries = ["Cbc", "CbcSolver", "Cgl", "Clp", "CoinUtils",
+                           "OsiCbc", "OsiClp", "Osi"] + lapack_libs,
+              library_dirs = lapack_library_dirs,
+              include_dirs = lapack_include_dirs,
+              package = 'cbc'),
+```
+
 
 Details:
 - `get_solver` uses base_ring
 - GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)
-
- 
+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.
 
 
+
+
+
``````




---

archive/issue_comments_539265.json:
```json
{
    "body": "<a id='comment:5'></a>\nFor glpk it looks like https://github.com/biosustain/swiglpk/releases is the best maintained. Excluding sage and cvxopt.",
    "created_at": "2019-11-28T04:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539265",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
For glpk it looks like https://github.com/biosustain/swiglpk/releases is the best maintained. Excluding sage and cvxopt.



---

archive/issue_comments_539266.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -31,6 +31,8 @@\n - GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)\n - For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.\n \n+See also:\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n \n \n \n``````\n",
    "created_at": "2019-11-28T14:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539266",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -31,6 +31,8 @@
 - GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)
 - For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.
 
+See also:
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
 
 
 
``````




---

archive/issue_comments_539267.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -33,7 +33,7 @@\n \n See also:\n - #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n \n \n \n-\n``````\n",
    "created_at": "2019-11-29T18:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539267",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -33,7 +33,7 @@
 
 See also:
 - #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
 
 
 
-
``````




---

archive/issue_comments_539268.json:
```json
{
    "body": "<a id='comment:8'></a>\nI have prepared a first module, https://github.com/mkoeppe/sage-numerical-backends-coin.\nIt depends on Sage (as it inherits from `sage.numerical.backends.generic_backend.GenericBackend`).",
    "created_at": "2019-12-24T05:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539268",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
I have prepared a first module, https://github.com/mkoeppe/sage-numerical-backends-coin.
It depends on Sage (as it inherits from `sage.numerical.backends.generic_backend.GenericBackend`).



---

archive/issue_comments_539269.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this  would also simplify packaging binary distributions.\n \n From `src/module_list.py`:\n \n``````\n",
    "created_at": "2019-12-24T05:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539269",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this  would also simplify packaging binary distributions.
 
 From `src/module_list.py`:
 
``````




---

archive/issue_events_087180.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "rename": {
        "from": "Move sage optimization backends to separate Cython packages to remove OptionalExtension problems",
        "to": "Move optional sage optimization backends to separate Cython packages to remove OptionalExtension problems"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-87180"
}
```



---

archive/issue_events_087181.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "rename": {
        "from": "Move optional sage optimization backends to separate Cython packages to remove OptionalExtension problems",
        "to": "Move optional sage optimization backends (COIN, CPLEX, Gurobi) to separate Cython packages to remove OptionalExtension problems"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-87181"
}
```



---

archive/issue_comments_539270.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,35 +1,24 @@\n-`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this  would also simplify packaging binary distributions.\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n \n-From `src/module_list.py`:\n+The new packages are on PyPI:\n \n ```\n-    OptionalExtension(\"sage.numerical.backends.gurobi_backend\",\n-              [\"sage/numerical/backends/gurobi_backend.pyx\"],\n-              libraries = [\"gurobi\"],\n-              condition = os.path.isfile(SAGE_INC + \"/gurobi_c.h\") and\n-                  os.path.isfile(SAGE_LOCAL + \"/lib/libgurobi.so\")),\n+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/40/01/0b9580bc9db5671cc2446ea089ba1f28bacf85ef0e9f05a4a781bf9dcd7d/sage_numerical_backends_coin-9.0b9.tar.gz\n+``` \n \n-    OptionalExtension(\"sage.numerical.backends.cplex_backend\",\n-              [\"sage/numerical/backends/cplex_backend.pyx\"],\n-              libraries = [\"cplex\"],\n-              condition = os.path.isfile(SAGE_INC + \"/cplex.h\") and\n-                  os.path.isfile(SAGE_LOCAL + \"/lib/libcplex.a\")),\n+Development here:\n+- https://github.com/mkoeppe/sage-numerical-backends-cplex\n+- https://github.com/mkoeppe/sage-numerical-backends-coin\n+- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n \n-    OptionalExtension(\"sage.numerical.backends.coin_backend\",\n-              [\"sage/numerical/backends/coin_backend.pyx\"],\n-              language = 'c++',\n-              libraries = [\"Cbc\", \"CbcSolver\", \"Cgl\", \"Clp\", \"CoinUtils\",\n-                           \"OsiCbc\", \"OsiClp\", \"Osi\"] + lapack_libs,\n-              library_dirs = lapack_library_dirs,\n-              include_dirs = lapack_include_dirs,\n-              package = 'cbc'),\n-```\n+---\n \n-\n-Details:\n+(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:\n - `get_solver` uses base_ring\n-- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)\n-- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.\n+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)\n+(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)\n \n See also:\n - #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n``````\n",
    "created_at": "2019-12-25T02:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539270",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,35 +1,24 @@
-`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this  would also simplify packaging binary distributions.
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
 
-From `src/module_list.py`:
+The new packages are on PyPI:
 
 ```
-    OptionalExtension("sage.numerical.backends.gurobi_backend",
-              ["sage/numerical/backends/gurobi_backend.pyx"],
-              libraries = ["gurobi"],
-              condition = os.path.isfile(SAGE_INC + "/gurobi_c.h") and
-                  os.path.isfile(SAGE_LOCAL + "/lib/libgurobi.so")),
+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/40/01/0b9580bc9db5671cc2446ea089ba1f28bacf85ef0e9f05a4a781bf9dcd7d/sage_numerical_backends_coin-9.0b9.tar.gz
+``` 
 
-    OptionalExtension("sage.numerical.backends.cplex_backend",
-              ["sage/numerical/backends/cplex_backend.pyx"],
-              libraries = ["cplex"],
-              condition = os.path.isfile(SAGE_INC + "/cplex.h") and
-                  os.path.isfile(SAGE_LOCAL + "/lib/libcplex.a")),
+Development here:
+- https://github.com/mkoeppe/sage-numerical-backends-cplex
+- https://github.com/mkoeppe/sage-numerical-backends-coin
+- https://github.com/mkoeppe/sage-numerical-backends-gurobi
 
-    OptionalExtension("sage.numerical.backends.coin_backend",
-              ["sage/numerical/backends/coin_backend.pyx"],
-              language = 'c++',
-              libraries = ["Cbc", "CbcSolver", "Cgl", "Clp", "CoinUtils",
-                           "OsiCbc", "OsiClp", "Osi"] + lapack_libs,
-              library_dirs = lapack_library_dirs,
-              include_dirs = lapack_include_dirs,
-              package = 'cbc'),
-```
+---
 
-
-Details:
+(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:
 - `get_solver` uses base_ring
-- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)
-- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.
+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)
+(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)
 
 See also:
 - #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
``````




---

archive/issue_comments_539271.json:
```json
{
    "body": "<a id='comment:10'></a>\nIs there a git branch to try, replacing Sage's current COIN-OR backend with this one?",
    "created_at": "2019-12-25T02:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539271",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
Is there a git branch to try, replacing Sage's current COIN-OR backend with this one?



---

archive/issue_comments_539272.json:
```json
{
    "body": "<a id='comment:11'></a>\nNot yet (working on it right now), but the 3 backends already pass their test suites separately.",
    "created_at": "2019-12-25T03:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539272",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Not yet (working on it right now), but the 3 backends already pass their test suites separately.



---

archive/issue_comments_539273.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/move_optional_sage_optimization_backends_to_separate_cython_packages_to_remove_optionalextension_problems\"",
    "created_at": "2019-12-25T03:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539273",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/move_optional_sage_optimization_backends_to_separate_cython_packages_to_remove_optionalextension_problems"



---

archive/issue_comments_539274.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[437fec5](https://github.com/sagemath/sagetrac-mirror/commit/437fec50bb78832cd797f263f73732c6993c5719)|`Fixup dependencies`|",
    "created_at": "2019-12-25T03:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539274",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[437fec5](https://github.com/sagemath/sagetrac-mirror/commit/437fec50bb78832cd797f263f73732c6993c5719)|`Fixup dependencies`|



---

archive/issue_comments_539275.json:
```json
{
    "body": "Changing commit from \"\" to \"437fec50bb78832cd797f263f73732c6993c5719\"",
    "created_at": "2019-12-25T03:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "437fec50bb78832cd797f263f73732c6993c5719"



---

archive/issue_comments_539276.json:
```json
{
    "body": "<a id='comment:14'></a>\nNow the packages can be installed using `sage -i -c`... please test",
    "created_at": "2019-12-25T03:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539276",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Now the packages can be installed using `sage -i -c`... please test



---

archive/issue_comments_539277.json:
```json
{
    "body": "<a id='comment:15'></a>\nremains of copypaste, I see `PyNormaliz` in the branch...",
    "created_at": "2019-12-25T03:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539277",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
remains of copypaste, I see `PyNormaliz` in the branch...



---

archive/issue_comments_539278.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|\n|[846ca9a](https://github.com/sagemath/sagetrac-mirror/commit/846ca9a1520562f5c375db8c2ddf45ef5133956c)|`Replace CoinBackend, CPLEXBackend, GurobiBackend by their versions imported from sage_numerical_backends_*`|",
    "created_at": "2019-12-25T03:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|
|[846ca9a](https://github.com/sagemath/sagetrac-mirror/commit/846ca9a1520562f5c375db8c2ddf45ef5133956c)|`Replace CoinBackend, CPLEXBackend, GurobiBackend by their versions imported from sage_numerical_backends_*`|



---

archive/issue_comments_539279.json:
```json
{
    "body": "Changing commit from \"437fec50bb78832cd797f263f73732c6993c5719\" to \"846ca9a1520562f5c375db8c2ddf45ef5133956c\"",
    "created_at": "2019-12-25T03:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539279",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "437fec50bb78832cd797f263f73732c6993c5719" to "846ca9a1520562f5c375db8c2ddf45ef5133956c"



---

archive/issue_comments_539280.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2019-12-25T03:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539280",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_539281.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-12-25T03:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539281",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_539282.json:
```json
{
    "body": "Changing commit from \"846ca9a1520562f5c375db8c2ddf45ef5133956c\" to \"3c557b48cf069ebfb61fe757894808403ba74b1c\"",
    "created_at": "2019-12-25T03:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "846ca9a1520562f5c375db8c2ddf45ef5133956c" to "3c557b48cf069ebfb61fe757894808403ba74b1c"



---

archive/issue_comments_539283.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[3c557b4](https://github.com/sagemath/sagetrac-mirror/commit/3c557b48cf069ebfb61fe757894808403ba74b1c)|`build/pkgs/sage_numerical_backends_*/spkg-install: Adjust error message`|",
    "created_at": "2019-12-25T03:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539283",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[3c557b4](https://github.com/sagemath/sagetrac-mirror/commit/3c557b48cf069ebfb61fe757894808403ba74b1c)|`build/pkgs/sage_numerical_backends_*/spkg-install: Adjust error message`|



---

archive/issue_comments_539284.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|\n|[84c83f2](https://github.com/sagemath/sagetrac-mirror/commit/84c83f26b23fe2714b9078e63e85bc45525cb896)|`src/doc/en/thematic_tutorials/linear_programming.rst: Update COIN/CPLEX/Gurobi install instructions`|",
    "created_at": "2019-12-25T04:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539284",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
|[84c83f2](https://github.com/sagemath/sagetrac-mirror/commit/84c83f26b23fe2714b9078e63e85bc45525cb896)|`src/doc/en/thematic_tutorials/linear_programming.rst: Update COIN/CPLEX/Gurobi install instructions`|



---

archive/issue_comments_539285.json:
```json
{
    "body": "Changing commit from \"3c557b48cf069ebfb61fe757894808403ba74b1c\" to \"84c83f26b23fe2714b9078e63e85bc45525cb896\"",
    "created_at": "2019-12-25T04:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539285",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3c557b48cf069ebfb61fe757894808403ba74b1c" to "84c83f26b23fe2714b9078e63e85bc45525cb896"



---

archive/issue_comments_539286.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|\n|[4828766](https://github.com/sagemath/sagetrac-mirror/commit/48287667e7c3178c6da2cf4e6171d353e2af60d7)|`MixedIntegerLinearProgram: Update docstrings for class and __init__, refer to thematic tutorial,  and reduce copy-paste`|",
    "created_at": "2019-12-25T05:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539286",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------|
|[4828766](https://github.com/sagemath/sagetrac-mirror/commit/48287667e7c3178c6da2cf4e6171d353e2af60d7)|`MixedIntegerLinearProgram: Update docstrings for class and __init__, refer to thematic tutorial,  and reduce copy-paste`|



---

archive/issue_comments_539287.json:
```json
{
    "body": "Changing commit from \"84c83f26b23fe2714b9078e63e85bc45525cb896\" to \"48287667e7c3178c6da2cf4e6171d353e2af60d7\"",
    "created_at": "2019-12-25T05:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539287",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "84c83f26b23fe2714b9078e63e85bc45525cb896" to "48287667e7c3178c6da2cf4e6171d353e2af60d7"



---

archive/issue_comments_539288.json:
```json
{
    "body": "Changing commit from \"48287667e7c3178c6da2cf4e6171d353e2af60d7\" to \"189d60bc565f05a3c72c76da8b2cabc863e08a4f\"",
    "created_at": "2019-12-25T05:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539288",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "48287667e7c3178c6da2cf4e6171d353e2af60d7" to "189d60bc565f05a3c72c76da8b2cabc863e08a4f"



---

archive/issue_comments_539289.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[189d60b](https://github.com/sagemath/sagetrac-mirror/commit/189d60bc565f05a3c72c76da8b2cabc863e08a4f)|`get_solver: Reduce copy-paste in docstring`|",
    "created_at": "2019-12-25T05:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539289",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[189d60b](https://github.com/sagemath/sagetrac-mirror/commit/189d60bc565f05a3c72c76da8b2cabc863e08a4f)|`get_solver: Reduce copy-paste in docstring`|



---

archive/issue_comments_539290.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n ```\n wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz\n-wget -P upstream https://files.pythonhosted.org/packages/40/01/0b9580bc9db5671cc2446ea089ba1f28bacf85ef0e9f05a4a781bf9dcd7d/sage_numerical_backends_coin-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz\n ``` \n \n Development here:\n``````\n",
    "created_at": "2019-12-27T03:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539290",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 ```
 wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
 wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz
-wget -P upstream https://files.pythonhosted.org/packages/40/01/0b9580bc9db5671cc2446ea089ba1f28bacf85ef0e9f05a4a781bf9dcd7d/sage_numerical_backends_coin-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz
 ``` 
 
 Development here:
``````




---

archive/issue_comments_539291.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|\n|[357e966](https://github.com/sagemath/sagetrac-mirror/commit/357e9661e83dcea5f4080821168f05039ad44d67)|`src/doc/en/thematic_tutorials/linear_programming.rst: Update license info, URL for cbc`|\n|[53f3774](https://github.com/sagemath/sagetrac-mirror/commit/53f377414b94308b6ad3bfc41fdf4ff7545e0df5)|`Update sage_numerical_backends_coin to 9.0b10`|",
    "created_at": "2019-12-27T04:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
|[357e966](https://github.com/sagemath/sagetrac-mirror/commit/357e9661e83dcea5f4080821168f05039ad44d67)|`src/doc/en/thematic_tutorials/linear_programming.rst: Update license info, URL for cbc`|
|[53f3774](https://github.com/sagemath/sagetrac-mirror/commit/53f377414b94308b6ad3bfc41fdf4ff7545e0df5)|`Update sage_numerical_backends_coin to 9.0b10`|



---

archive/issue_comments_539292.json:
```json
{
    "body": "Changing commit from \"189d60bc565f05a3c72c76da8b2cabc863e08a4f\" to \"53f377414b94308b6ad3bfc41fdf4ff7545e0df5\"",
    "created_at": "2019-12-27T04:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539292",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "189d60bc565f05a3c72c76da8b2cabc863e08a4f" to "53f377414b94308b6ad3bfc41fdf4ff7545e0df5"



---

archive/issue_comments_539293.json:
```json
{
    "body": "<a id='comment:25'></a>\nSince these are currently part of the Sage distribution, it makes sense to me to have them as standard packages (in regards to[comment:2](#comment%3A2)). Similarly I would argue they do not require a vote on sage-devel, but I would just post something quick there to see if there are any objections.",
    "created_at": "2019-12-27T16:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539293",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>
Since these are currently part of the Sage distribution, it makes sense to me to have them as standard packages (in regards to[comment:2](#comment%3A2)). Similarly I would argue they do not require a vote on sage-devel, but I would just post something quick there to see if there are any objections.



---

archive/issue_comments_539294.json:
```json
{
    "body": "<a id='comment:26'></a>\nThey can't be standard packages because they only compile if the respective solvers are installed.",
    "created_at": "2019-12-27T16:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539294",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
They can't be standard packages because they only compile if the respective solvers are installed.



---

archive/issue_comments_539295.json:
```json
{
    "body": "<a id='comment:27'></a>\nNote that I narrowed down the ticket recently; the early comments were on a broader proposal to move ALL backends out to separate packages.",
    "created_at": "2019-12-27T16:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539295",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Note that I narrowed down the ticket recently; the early comments were on a broader proposal to move ALL backends out to separate packages.



---

archive/issue_comments_539296.json:
```json
{
    "body": "<a id='comment:28'></a>\nAh, I see. Sorry for the noise.",
    "created_at": "2019-12-27T17:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539296",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>
Ah, I see. Sorry for the noise.



---

archive/issue_comments_539297.json:
```json
{
    "body": "<a id='comment:29'></a>\n`coin` is problematic for me on sage-on-gentoo, and has been for a while. So, making it a standard package would be annoying. The `coin` interface doesn't seem to be very stable and `coin` in sage is not updated often (neither it is in gentoo). Version mismatch usually lead to a failure to build the interface.",
    "created_at": "2019-12-27T19:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539297",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:29'></a>
`coin` is problematic for me on sage-on-gentoo, and has been for a while. So, making it a standard package would be annoying. The `coin` interface doesn't seem to be very stable and `coin` in sage is not updated often (neither it is in gentoo). Version mismatch usually lead to a failure to build the interface.



---

archive/issue_comments_539298.json:
```json
{
    "body": "<a id='comment:30'></a>\nWell, the point of this ticket is to make the sage build *less* dependent on coin, not more. \n\nAlso, I'd appreciate any help with testing https://github.com/mkoeppe/sage-numerical-backends-coin on sage installations such as the one provided on gentoo. My current test scripts (using [GitHub](GitHub) actions) cover conda-forge so far, and I'm working on various debian/ubuntu flavors.",
    "created_at": "2019-12-27T19:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539298",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Well, the point of this ticket is to make the sage build *less* dependent on coin, not more. 

Also, I'd appreciate any help with testing https://github.com/mkoeppe/sage-numerical-backends-coin on sage installations such as the one provided on gentoo. My current test scripts (using [GitHub](GitHub) actions) cover conda-forge so far, and I'm working on various debian/ubuntu flavors.



---

archive/issue_comments_539299.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n-`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. \n+\n+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).\n+\n+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n \n The new packages are on PyPI:\n \n``````\n",
    "created_at": "2019-12-27T19:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539299",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
-`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. 
+
+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).
+
+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
 
 The new packages are on PyPI:
 
``````




---

archive/issue_comments_539300.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [mkoeppe](#comment%3A30):\n> Well, the point of this ticket is to make the sage build *less* dependent on coin, not more. \n> \n> Also, I'd appreciate any help with testing https://github.com/mkoeppe/sage-numerical-backends-coin on sage installations such as the one provided on gentoo. My current test scripts (using [GitHub](GitHub) actions) cover conda-forge so far, and I'm working on various debian/ubuntu flavors.\n\n\nI will have a look at it. It looks interesting but where does it install itself? I cannot promise speedy review as I about to have my annual internet /computer detox for a few days :)",
    "created_at": "2019-12-27T19:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539300",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'></a>
Replying to [mkoeppe](#comment%3A30):
> Well, the point of this ticket is to make the sage build *less* dependent on coin, not more. 
> 
> Also, I'd appreciate any help with testing https://github.com/mkoeppe/sage-numerical-backends-coin on sage installations such as the one provided on gentoo. My current test scripts (using [GitHub](GitHub) actions) cover conda-forge so far, and I'm working on various debian/ubuntu flavors.


I will have a look at it. It looks interesting but where does it install itself? I cannot promise speedy review as I about to have my annual internet /computer detox for a few days :)



---

archive/issue_comments_539301.json:
```json
{
    "body": "<a id='comment:33'></a>\nIt just installs itself as a Python package named `sage_numerical_backends_coin.coin_backend` (note, underscores, not dots).\nThe https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/README.md explains how to use it, including how to patch it into a sage for testing purposes.",
    "created_at": "2019-12-27T19:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539301",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
It just installs itself as a Python package named `sage_numerical_backends_coin.coin_backend` (note, underscores, not dots).
The https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/README.md explains how to use it, including how to patch it into a sage for testing purposes.



---

archive/issue_comments_539302.json:
```json
{
    "body": "<a id='comment:34'></a>\nfor coin, there is a verssion mismatch. On pypi and in the ticket description the minor version is b9, in build/pkgs/ it is b10, the latest on github is b12 :-)\n\nSo I took b12 from github, renamed the tarfile (arrgh), bumped up the version,\n\n```diff\ndiff --git a/build/pkgs/sage_numerical_backends_coin/checksums.ini b/build/pkgs/sage_numerical_backends_coin/checksums.ini\nindex 03b250b653..3062652fc1 100644\n--- a/build/pkgs/sage_numerical_backends_coin/checksums.ini\n+++ b/build/pkgs/sage_numerical_backends_coin/checksums.ini\n@@ -1,4 +1,4 @@\n tarball=sage_numerical_backends_coin-VERSION.tar.gz\n-sha1=fd96cfc224f1f45bad6bacaaf37df3904fa7a561\n-md5=98e5a002648cdf3167df2dafb16cde47\n-cksum=869439056\n+sha1=0c424f8d01bdd44169630bc898738a4ee146ea2c\n+md5=09b6b74d7c8b9b3526424cf8850f8700\n+cksum=1339126990\ndiff --git a/build/pkgs/sage_numerical_backends_coin/package-version.txt b/build/pkgs/sage_numerical_backends_coin/package-version.txt\nindex 5d6a14cdd9..1700f7be00 100644\n--- a/build/pkgs/sage_numerical_backends_coin/package-version.txt\n+++ b/build/pkgs/sage_numerical_backends_coin/package-version.txt\n@@ -1 +1 @@\n-9.0b10\n+9.0b12\n```\n\nand then \n\n```\n$ SAGE_CHECK=yes ./sage -i sage_numerical_backends_coin\n```\nworked on Debian with system's cbc 2.9.9.\n(using #28908)",
    "created_at": "2019-12-28T09:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539302",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>
for coin, there is a verssion mismatch. On pypi and in the ticket description the minor version is b9, in build/pkgs/ it is b10, the latest on github is b12 :-)

So I took b12 from github, renamed the tarfile (arrgh), bumped up the version,

```diff
diff --git a/build/pkgs/sage_numerical_backends_coin/checksums.ini b/build/pkgs/sage_numerical_backends_coin/checksums.ini
index 03b250b653..3062652fc1 100644
--- a/build/pkgs/sage_numerical_backends_coin/checksums.ini
+++ b/build/pkgs/sage_numerical_backends_coin/checksums.ini
@@ -1,4 +1,4 @@
 tarball=sage_numerical_backends_coin-VERSION.tar.gz
-sha1=fd96cfc224f1f45bad6bacaaf37df3904fa7a561
-md5=98e5a002648cdf3167df2dafb16cde47
-cksum=869439056
+sha1=0c424f8d01bdd44169630bc898738a4ee146ea2c
+md5=09b6b74d7c8b9b3526424cf8850f8700
+cksum=1339126990
diff --git a/build/pkgs/sage_numerical_backends_coin/package-version.txt b/build/pkgs/sage_numerical_backends_coin/package-version.txt
index 5d6a14cdd9..1700f7be00 100644
--- a/build/pkgs/sage_numerical_backends_coin/package-version.txt
+++ b/build/pkgs/sage_numerical_backends_coin/package-version.txt
@@ -1 +1 @@
-9.0b10
+9.0b12
```

and then 

```
$ SAGE_CHECK=yes ./sage -i sage_numerical_backends_coin
```
worked on Debian with system's cbc 2.9.9.
(using #28908)



---

archive/issue_comments_539303.json:
```json
{
    "body": "<a id='comment:35'></a>\nWhere are the tests from now gone `sage/numerical/backends/coin_backend.pyx` ?\nAre they all being run while installing with `SAGE_CHECK=yes` ?",
    "created_at": "2019-12-28T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539303",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>
Where are the tests from now gone `sage/numerical/backends/coin_backend.pyx` ?
Are they all being run while installing with `SAGE_CHECK=yes` ?



---

archive/issue_comments_539304.json:
```json
{
    "body": "<a id='comment:36'></a>\nIn a way related to #26511, upstream devs for cbc have published their own python interface https://git.patrikdufresne.com/pdsl/cbcpy the fact that it uses swig may be an obstacle for immediate inclusion but switching to something maintained externally is something to think about. The project is quite new (August 2019 according to https://pypi.org/project/cbcpy/ ) which is why it may escaped attention before.",
    "created_at": "2019-12-28T09:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539304",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:36'></a>
In a way related to #26511, upstream devs for cbc have published their own python interface https://git.patrikdufresne.com/pdsl/cbcpy the fact that it uses swig may be an obstacle for immediate inclusion but switching to something maintained externally is something to think about. The project is quite new (August 2019 according to https://pypi.org/project/cbcpy/ ) which is why it may escaped attention before.



---

archive/issue_comments_539305.json:
```json
{
    "body": "<a id='comment:37'></a>\nin the environment as above for coin, \n\n`SAGE_CHECK=yes ./sage -f sage_numerical_backends_gurobi`\n\nfails with\n\n```\n...\n[sage_numerical_backends_gurobi-9.0b9] Running the test suite for sage_numerical_backends_gurobi-9.0b9...\n[sage_numerical_backends_gurobi-9.0b9] running test\n[sage_numerical_backends_gurobi-9.0b9] Searching for sage-package\n[sage_numerical_backends_gurobi-9.0b9] Reading https://pypi.org/simple/sage-package/\n[sage_numerical_backends_gurobi-9.0b9] Using gurobi_include_directories=['/home/dimpase/sage/upstream/gurobi900/linux64/include'], libraries=['gurobi90'], library_dirs=['/home/dimpase/sage/upstream/gurobi900/linux64/lib']\n[sage_numerical_backends_gurobi-9.0b9] Download error on https://pypi.org/simple/sage-package/: [Errno 110] Connection timed out -- Some packages may not be found!\n[sage_numerical_backends_gurobi-9.0b9] Couldn't find index page for 'sage-package' (maybe misspelled?)\n[sage_numerical_backends_gurobi-9.0b9] Scanning index of all packages (this may take a while)\n[sage_numerical_backends_gurobi-9.0b9] Reading https://pypi.org/simple/\n[sage_numerical_backends_gurobi-9.0b9] Download error on https://pypi.org/simple/: [Errno 110] Connection timed out -- Some packages may not be found!\n[sage_numerical_backends_gurobi-9.0b9] No local packages or working download links found for sage-package\n[sage_numerical_backends_gurobi-9.0b9] error: Could not find suitable distribution for Requirement.parse('sage-package')\n[sage_numerical_backends_gurobi-9.0b9] \n[sage_numerical_backends_gurobi-9.0b9] real     1m4.289s\n[sage_numerical_backends_gurobi-9.0b9] user     0m0.833s\n[sage_numerical_backends_gurobi-9.0b9] sys      0m0.148s\n[sage_numerical_backends_gurobi-9.0b9] ************************************************************************\n[sage_numerical_backends_gurobi-9.0b9] Error testing package sage_numerical_backends_gurobi-9.0b9\n```",
    "created_at": "2019-12-28T09:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539305",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
in the environment as above for coin, 

`SAGE_CHECK=yes ./sage -f sage_numerical_backends_gurobi`

fails with

```
...
[sage_numerical_backends_gurobi-9.0b9] Running the test suite for sage_numerical_backends_gurobi-9.0b9...
[sage_numerical_backends_gurobi-9.0b9] running test
[sage_numerical_backends_gurobi-9.0b9] Searching for sage-package
[sage_numerical_backends_gurobi-9.0b9] Reading https://pypi.org/simple/sage-package/
[sage_numerical_backends_gurobi-9.0b9] Using gurobi_include_directories=['/home/dimpase/sage/upstream/gurobi900/linux64/include'], libraries=['gurobi90'], library_dirs=['/home/dimpase/sage/upstream/gurobi900/linux64/lib']
[sage_numerical_backends_gurobi-9.0b9] Download error on https://pypi.org/simple/sage-package/: [Errno 110] Connection timed out -- Some packages may not be found!
[sage_numerical_backends_gurobi-9.0b9] Couldn't find index page for 'sage-package' (maybe misspelled?)
[sage_numerical_backends_gurobi-9.0b9] Scanning index of all packages (this may take a while)
[sage_numerical_backends_gurobi-9.0b9] Reading https://pypi.org/simple/
[sage_numerical_backends_gurobi-9.0b9] Download error on https://pypi.org/simple/: [Errno 110] Connection timed out -- Some packages may not be found!
[sage_numerical_backends_gurobi-9.0b9] No local packages or working download links found for sage-package
[sage_numerical_backends_gurobi-9.0b9] error: Could not find suitable distribution for Requirement.parse('sage-package')
[sage_numerical_backends_gurobi-9.0b9] 
[sage_numerical_backends_gurobi-9.0b9] real     1m4.289s
[sage_numerical_backends_gurobi-9.0b9] user     0m0.833s
[sage_numerical_backends_gurobi-9.0b9] sys      0m0.148s
[sage_numerical_backends_gurobi-9.0b9] ************************************************************************
[sage_numerical_backends_gurobi-9.0b9] Error testing package sage_numerical_backends_gurobi-9.0b9
```



---

archive/issue_comments_539306.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [dimpase](#comment%3A34):\n> So I took b12 from github, renamed the tarfile (arrgh)...\n\n\nI recommend to take the release files from pypi - they have been built with `setup.py sdist`.",
    "created_at": "2019-12-28T15:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539306",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Replying to [dimpase](#comment%3A34):
> So I took b12 from github, renamed the tarfile (arrgh)...


I recommend to take the release files from pypi - they have been built with `setup.py sdist`.



---

archive/issue_comments_539307.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [dimpase](#comment%3A35):\n> Where are the tests from now gone `sage/numerical/backends/coin_backend.pyx` ?\n> Are they all being run while installing with `SAGE_CHECK=yes` ?\n\n\nThey are here:\nhttps://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/sage_numerical_backends_coin/coin_backend.pyx\nThey are run in the CI scripts of the package, and also when installing the spkg with `SAGE_CHECK=yes`.",
    "created_at": "2019-12-28T15:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539307",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
Replying to [dimpase](#comment%3A35):
> Where are the tests from now gone `sage/numerical/backends/coin_backend.pyx` ?
> Are they all being run while installing with `SAGE_CHECK=yes` ?


They are here:
https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/sage_numerical_backends_coin/coin_backend.pyx
They are run in the CI scripts of the package, and also when installing the spkg with `SAGE_CHECK=yes`.



---

archive/issue_comments_539308.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [mkoeppe](#comment%3A38):\n> Replying to [dimpase](#comment%3A34):\n> > So I took b12 from github, renamed the tarfile (arrgh)...\n\n> \n> I recommend to take the release files from pypi - they have been built with `setup.py sdist`.\n\n\nsure, but b12 was not there yet. https://pypi.org/project/sage-numerical-backends-coin/#files says it made it there ~10 hours ago.",
    "created_at": "2019-12-28T15:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539308",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>
Replying to [mkoeppe](#comment%3A38):
> Replying to [dimpase](#comment%3A34):
> > So I took b12 from github, renamed the tarfile (arrgh)...

> 
> I recommend to take the release files from pypi - they have been built with `setup.py sdist`.


sure, but b12 was not there yet. https://pypi.org/project/sage-numerical-backends-coin/#files says it made it there ~10 hours ago.



---

archive/issue_comments_539309.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,14 +17,9 @@\n - https://github.com/mkoeppe/sage-numerical-backends-coin\n - https://github.com/mkoeppe/sage-numerical-backends-gurobi\n \n----\n-\n-(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:\n-- `get_solver` uses base_ring\n-- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)\n-(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)\n \n See also:\n+- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages\n - #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n - https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n \n``````\n",
    "created_at": "2019-12-28T15:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539309",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,14 +17,9 @@
 - https://github.com/mkoeppe/sage-numerical-backends-coin
 - https://github.com/mkoeppe/sage-numerical-backends-gurobi
 
----
-
-(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:
-- `get_solver` uses base_ring
-- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)
-(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)
 
 See also:
+- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages
 - #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
 - https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
 
``````




---

archive/issue_comments_539310.json:
```json
{
    "body": "<a id='comment:41'></a>\nCreated follow-up ticket, cleaned up ticket description",
    "created_at": "2019-12-28T15:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539310",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
Created follow-up ticket, cleaned up ticket description



---

archive/issue_comments_539311.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [mkoeppe](#comment%3A41):\n> Created follow-up ticket, cleaned up ticket description\n\n\nsome links to packages are not up to date.",
    "created_at": "2019-12-28T15:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539311",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>
Replying to [mkoeppe](#comment%3A41):
> Created follow-up ticket, cleaned up ticket description


some links to packages are not up to date.



---

archive/issue_comments_539312.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [fbissey](#comment%3A36):\n> In a way related to #26511, upstream devs for cbc have published their own python interface https://git.patrikdufresne.com/pdsl/cbcpy the fact that it uses swig may be an obstacle for immediate inclusion but switching to something maintained externally is something to think about. The project is quite new (August 2019 according to https://pypi.org/project/cbcpy/ ) which is why it may escaped attention before.\n\nThank you! I've added this information to #26511.",
    "created_at": "2019-12-28T15:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539312",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>
Replying to [fbissey](#comment%3A36):
> In a way related to #26511, upstream devs for cbc have published their own python interface https://git.patrikdufresne.com/pdsl/cbcpy the fact that it uses swig may be an obstacle for immediate inclusion but switching to something maintained externally is something to think about. The project is quite new (August 2019 according to https://pypi.org/project/cbcpy/ ) which is why it may escaped attention before.

Thank you! I've added this information to #26511.



---

archive/issue_comments_539313.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [dimpase](#comment%3A42):\n> Replying to [mkoeppe](#comment%3A41):\n> > Created follow-up ticket, cleaned up ticket description\n\n> \n> some links to packages are not up to date.\n\nThanks for testing! I'll update the cplex and gurobi packages with my changes to the coin package and then make new releases.",
    "created_at": "2019-12-28T15:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539313",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
Replying to [dimpase](#comment%3A42):
> Replying to [mkoeppe](#comment%3A41):
> > Created follow-up ticket, cleaned up ticket description

> 
> some links to packages are not up to date.

Thanks for testing! I'll update the cplex and gurobi packages with my changes to the coin package and then make new releases.



---

archive/issue_comments_539314.json:
```json
{
    "body": "<a id='comment:45'></a>\nPerhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of\n\n```\nexport GUROBI_HOME=\"/opt/gurobi900/linux64\"\nexport PATH=\"${PATH}:${GUROBI_HOME}/bin\"\nexport LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib\"\n```\nto a minimum.\nE.g. there could be an `--with-gurobi-home=` option which would default to\n`$GUROBI_HOME`, \nand `GUROBI_HOME` should be written in `sage-env-config` etc.\n\nThis is for a follow-up ticket, of course.",
    "created_at": "2019-12-28T15:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539314",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>
Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of

```
export GUROBI_HOME="/opt/gurobi900/linux64"
export PATH="${PATH}:${GUROBI_HOME}/bin"
export LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib"
```
to a minimum.
E.g. there could be an `--with-gurobi-home=` option which would default to
`$GUROBI_HOME`, 
and `GUROBI_HOME` should be written in `sage-env-config` etc.

This is for a follow-up ticket, of course.



---

archive/issue_comments_539315.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [dimpase](#comment%3A45):\n> Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of\n> \n> ```\n> export GUROBI_HOME=\"/opt/gurobi900/linux64\"\n> export PATH=\"${PATH}:${GUROBI_HOME}/bin\"\n> export LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib\"\n> ```\n> to a minimum.\n> E.g. there could be an `--with-gurobi-home=` option which would default to\n> `$GUROBI_HOME`, \n> and `GUROBI_HOME` should be written in `sage-env-config` etc.\n> \n> This is for a follow-up ticket, of course.\n\n\nThe macOS installer of Gurobi adds the following symlinks:\n\n```\nlrwxr-xr-x  1 root  wheel  40 Apr 28  2016 /usr/local/bin/gurobi.env -> //Library/gurobi651/mac64/bin/gurobi.env\nlrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi.sh -> //Library/gurobi900/mac64/bin/gurobi.sh\nlrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi_cl -> //Library/gurobi900/mac64/bin/gurobi_cl\n```\n\nSee https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md (just updated) - \nI am using gurobi.sh to do all the build configuration. \nDoes this work on Linux?",
    "created_at": "2019-12-28T16:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539315",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
Replying to [dimpase](#comment%3A45):
> Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of
> 
> ```
> export GUROBI_HOME="/opt/gurobi900/linux64"
> export PATH="${PATH}:${GUROBI_HOME}/bin"
> export LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib"
> ```
> to a minimum.
> E.g. there could be an `--with-gurobi-home=` option which would default to
> `$GUROBI_HOME`, 
> and `GUROBI_HOME` should be written in `sage-env-config` etc.
> 
> This is for a follow-up ticket, of course.


The macOS installer of Gurobi adds the following symlinks:

```
lrwxr-xr-x  1 root  wheel  40 Apr 28  2016 /usr/local/bin/gurobi.env -> //Library/gurobi651/mac64/bin/gurobi.env
lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi.sh -> //Library/gurobi900/mac64/bin/gurobi.sh
lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi_cl -> //Library/gurobi900/mac64/bin/gurobi_cl
```

See https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md (just updated) - 
I am using gurobi.sh to do all the build configuration. 
Does this work on Linux?



---

archive/issue_comments_539316.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [mkoeppe](#comment%3A46):\n> Replying to [dimpase](#comment%3A45):\n> > Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of\n> > \n> > ```\n> > export GUROBI_HOME=\"/opt/gurobi900/linux64\"\n> > export PATH=\"${PATH}:${GUROBI_HOME}/bin\"\n> > export LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib\"\n> > ```\n> > to a minimum.\n> > E.g. there could be an `--with-gurobi-home=` option which would default to\n> > `$GUROBI_HOME`, \n> > and `GUROBI_HOME` should be written in `sage-env-config` etc.\n> > \n> > This is for a follow-up ticket, of course.\n\n> \n> The macOS installer of Gurobi adds the following symlinks:\n> \n> ```\n> lrwxr-xr-x  1 root  wheel  40 Apr 28  2016 /usr/local/bin/gurobi.env -> //Library/gurobi651/mac64/bin/gurobi.env\n> lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi.sh -> //Library/gurobi900/mac64/bin/gurobi.sh\n> lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi_cl -> //Library/gurobi900/mac64/bin/gurobi_cl\n> ```\n> \n> See https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md (just updated) - \n> I am using gurobi.sh to do all the build configuration. \n> Does this work on Linux?\n\n\nI see, on Linux it's not an installer but just a tgz.",
    "created_at": "2019-12-28T16:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539316",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
Replying to [mkoeppe](#comment%3A46):
> Replying to [dimpase](#comment%3A45):
> > Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of
> > 
> > ```
> > export GUROBI_HOME="/opt/gurobi900/linux64"
> > export PATH="${PATH}:${GUROBI_HOME}/bin"
> > export LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib"
> > ```
> > to a minimum.
> > E.g. there could be an `--with-gurobi-home=` option which would default to
> > `$GUROBI_HOME`, 
> > and `GUROBI_HOME` should be written in `sage-env-config` etc.
> > 
> > This is for a follow-up ticket, of course.

> 
> The macOS installer of Gurobi adds the following symlinks:
> 
> ```
> lrwxr-xr-x  1 root  wheel  40 Apr 28  2016 /usr/local/bin/gurobi.env -> //Library/gurobi651/mac64/bin/gurobi.env
> lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi.sh -> //Library/gurobi900/mac64/bin/gurobi.sh
> lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi_cl -> //Library/gurobi900/mac64/bin/gurobi_cl
> ```
> 
> See https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md (just updated) - 
> I am using gurobi.sh to do all the build configuration. 
> Does this work on Linux?


I see, on Linux it's not an installer but just a tgz.



---

archive/issue_comments_539317.json:
```json
{
    "body": "<a id='comment:48'></a>\nEven on a Mac, with a multi-user installation one might want to hardcode `GUROBI_HOME` and the license file location (`GRB_LICENSE_FILE`).",
    "created_at": "2019-12-29T01:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539317",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>
Even on a Mac, with a multi-user installation one might want to hardcode `GUROBI_HOME` and the license file location (`GRB_LICENSE_FILE`).



---

archive/issue_comments_539318.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,8 +8,8 @@\n \n ```\n wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n-wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz\n-wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz\n ``` \n \n Development here:\n``````\n",
    "created_at": "2019-12-29T02:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539318",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,8 +8,8 @@
 
 ```
 wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
-wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz
-wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz
 ``` 
 
 Development here:
``````




---

archive/issue_comments_539319.json:
```json
{
    "body": "Changing commit from \"53f377414b94308b6ad3bfc41fdf4ff7545e0df5\" to \"7caa365e427860e2b91387e014ef8d2ed06e16aa\"",
    "created_at": "2019-12-29T03:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "53f377414b94308b6ad3bfc41fdf4ff7545e0df5" to "7caa365e427860e2b91387e014ef8d2ed06e16aa"



---

archive/issue_comments_539320.json:
```json
{
    "body": "<a id='comment:50'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|\n|[7caa365](https://github.com/sagemath/sagetrac-mirror/commit/7caa365e427860e2b91387e014ef8d2ed06e16aa)|`Update sage_numerical_backends_gurobi and sage_numerical_backends_coin to 9.0b12`|",
    "created_at": "2019-12-29T03:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539320",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
|[7caa365](https://github.com/sagemath/sagetrac-mirror/commit/7caa365e427860e2b91387e014ef8d2ed06e16aa)|`Update sage_numerical_backends_gurobi and sage_numerical_backends_coin to 9.0b12`|



---

archive/issue_comments_539321.json:
```json
{
    "body": "<a id='comment:51'></a>\nThere's a new version of the gurobi package now. I have done some testing on Linux now, but I could not do a full test with a Gurobi license because it does not like to generate license keys on a Docker container. I have revised thee installation instructions to include Linux:\nhttps://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md",
    "created_at": "2019-12-29T03:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539321",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>
There's a new version of the gurobi package now. I have done some testing on Linux now, but I could not do a full test with a Gurobi license because it does not like to generate license keys on a Docker container. I have revised thee installation instructions to include Linux:
https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md



---

archive/issue_comments_539322.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [dimpase](#comment%3A48):\n> Even on a Mac, with a multi-user installation one might want to hardcode `GUROBI_HOME` and the license file location (`GRB_LICENSE_FILE`).\nSure. The package looks at `GUROBI_HOME` first.",
    "created_at": "2019-12-29T03:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539322",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>
Replying to [dimpase](#comment%3A48):
> Even on a Mac, with a multi-user installation one might want to hardcode `GUROBI_HOME` and the license file location (`GRB_LICENSE_FILE`).
Sure. The package looks at `GUROBI_HOME` first.



---

archive/issue_comments_539323.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n The new packages are on PyPI:\n \n ```\n-wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/29/8a/65fd90a890fcfb56166c4071aa7a4fb5b865d313304f60474870f0e89998/sage_numerical_backends_cplex-9.0b12.tar.gz\n wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz\n wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz\n ``` \n``````\n",
    "created_at": "2019-12-29T13:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539323",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 The new packages are on PyPI:
 
 ```
-wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/29/8a/65fd90a890fcfb56166c4071aa7a4fb5b865d313304f60474870f0e89998/sage_numerical_backends_cplex-9.0b12.tar.gz
 wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz
 wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz
 ``` 
``````




---

archive/issue_comments_539324.json:
```json
{
    "body": "Changing commit from \"7caa365e427860e2b91387e014ef8d2ed06e16aa\" to \"2110ed3270741ec5f7211068ebbb91a787f4d815\"",
    "created_at": "2019-12-29T14:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7caa365e427860e2b91387e014ef8d2ed06e16aa" to "2110ed3270741ec5f7211068ebbb91a787f4d815"



---

archive/issue_comments_539325.json:
```json
{
    "body": "<a id='comment:54'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[2110ed3](https://github.com/sagemath/sagetrac-mirror/commit/2110ed3270741ec5f7211068ebbb91a787f4d815)|`Update sage_numerical_backends_cplex to 9.0b12`|",
    "created_at": "2019-12-29T14:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539325",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[2110ed3](https://github.com/sagemath/sagetrac-mirror/commit/2110ed3270741ec5f7211068ebbb91a787f4d815)|`Update sage_numerical_backends_cplex to 9.0b12`|



---

archive/issue_comments_539326.json:
```json
{
    "body": "<a id='comment:55'></a>\nJust updated the cplex backend. \nReady for review.",
    "created_at": "2019-12-29T14:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539326",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
Just updated the cplex backend. 
Ready for review.



---

archive/issue_comments_539327.json:
```json
{
    "body": "<a id='comment:56'></a>\nI suggest using a namespace package for this. See https://packaging.python.org/guides/packaging-namespace-packages/\n\n```\ndiff --git a/setup.py b/setup.py\nindex 176e75e..6dcffe2 100755\n--- a/setup.py\n+++ b/setup.py\n@@ -44,8 +44,8 @@ cbc_library_dirs = cbc_pc['library_dirs']\n cbc_include_dirs = cbc_pc['include_dirs']\n \n \n-ext_modules = [Extension('sage_numerical_backends_coin.coin_backend',\n-                         sources=[os.path.join('sage_numerical_backends_coin',\n+ext_modules = [Extension('sage.numerical.backends.coin_backend',\n+                         sources=[os.path.join('sage/numerical/backends',\n                                     'coin_backend.pyx')],\n                          libraries=cbc_libs,\n                          include_dirs=sage_include_directories() + cbc_include_dirs,\n@@ -81,7 +81,7 @@ except CompileError:\n print(\"Using compile_time_env: {}\".format(compile_time_env), file=sys.stderr)\n \n setup(\n-    name=\"sage_numerical_backends_coin\",\n+    name=\"sage.numerical.backends.coin_backend\",\n     version=readfile(\"VERSION\").strip(),\n     description=\"COIN-OR backend for Sage MixedIntegerLinearProgram\",\n     long_description = readfile(\"README.md\"), # get the long description from the README\n@@ -109,9 +109,8 @@ setup(\n                             compile_time_env=compile_time_env),\n     cmdclass = {'test': SageTest}, # adding a special setup command for tests\n     keywords=['milp', 'linear-programming', 'optimization'],\n-    packages=['sage_numerical_backends_coin'],\n-    package_dir={'sage_numerical_backends_coin': 'sage_numerical_backends_coin'},\n-    package_data={'sage_numerical_backends_coin': ['*.pxd']},\n+    packages=['sage.numerical.backends'],\n+    package_data={'sage.numerical.backends': ['*.pxd']},\n     install_requires = [# 'sage>=8',    ### On too many distributions, sage is actually not known as a pip package\n                         'sphinx'],\n     setup_requires   = ['pkgconfig'],\n```",
    "created_at": "2019-12-29T16:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539327",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:56'></a>
I suggest using a namespace package for this. See https://packaging.python.org/guides/packaging-namespace-packages/

```
diff --git a/setup.py b/setup.py
index 176e75e..6dcffe2 100755
--- a/setup.py
+++ b/setup.py
@@ -44,8 +44,8 @@ cbc_library_dirs = cbc_pc['library_dirs']
 cbc_include_dirs = cbc_pc['include_dirs']
 
 
-ext_modules = [Extension('sage_numerical_backends_coin.coin_backend',
-                         sources=[os.path.join('sage_numerical_backends_coin',
+ext_modules = [Extension('sage.numerical.backends.coin_backend',
+                         sources=[os.path.join('sage/numerical/backends',
                                     'coin_backend.pyx')],
                          libraries=cbc_libs,
                          include_dirs=sage_include_directories() + cbc_include_dirs,
@@ -81,7 +81,7 @@ except CompileError:
 print("Using compile_time_env: {}".format(compile_time_env), file=sys.stderr)
 
 setup(
-    name="sage_numerical_backends_coin",
+    name="sage.numerical.backends.coin_backend",
     version=readfile("VERSION").strip(),
     description="COIN-OR backend for Sage MixedIntegerLinearProgram",
     long_description = readfile("README.md"), # get the long description from the README
@@ -109,9 +109,8 @@ setup(
                             compile_time_env=compile_time_env),
     cmdclass = {'test': SageTest}, # adding a special setup command for tests
     keywords=['milp', 'linear-programming', 'optimization'],
-    packages=['sage_numerical_backends_coin'],
-    package_dir={'sage_numerical_backends_coin': 'sage_numerical_backends_coin'},
-    package_data={'sage_numerical_backends_coin': ['*.pxd']},
+    packages=['sage.numerical.backends'],
+    package_data={'sage.numerical.backends': ['*.pxd']},
     install_requires = [# 'sage>=8',    ### On too many distributions, sage is actually not known as a pip package
                         'sphinx'],
     setup_requires   = ['pkgconfig'],
```



---

archive/issue_comments_539328.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [isuruf](#comment%3A56):\n> I suggest using a namespace package for this. See https://packaging.python.org/guides/packaging-namespace-packages/\n\n\nThanks a lot! I was briefly looking into this before I created the new packages, but was discouraged by various warnings on this page that seemed to imply one needs control of all packages sharing a namespace simultaneously. But I want the packages to work also with versions of sagelib that are already released.\nWhich of the three approaches mentioned on the page do you specifically recommend?",
    "created_at": "2019-12-29T16:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539328",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>
Replying to [isuruf](#comment%3A56):
> I suggest using a namespace package for this. See https://packaging.python.org/guides/packaging-namespace-packages/


Thanks a lot! I was briefly looking into this before I created the new packages, but was discouraged by various warnings on this page that seemed to imply one needs control of all packages sharing a namespace simultaneously. But I want the packages to work also with versions of sagelib that are already released.
Which of the three approaches mentioned on the page do you specifically recommend?



---

archive/issue_comments_539329.json:
```json
{
    "body": "<a id='comment:58'></a>\nThe diff above is for \"1. native namespace package\".\n\n> But I want the packages to work also with versions of sagelib that are already released.\n\n\nThis should work in the case of sagelib already released and if the optional extension is already installed, it will be overriden I think.",
    "created_at": "2019-12-29T16:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539329",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:58'></a>
The diff above is for "1. native namespace package".

> But I want the packages to work also with versions of sagelib that are already released.


This should work in the case of sagelib already released and if the optional extension is already installed, it will be overriden I think.



---

archive/issue_comments_539330.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [isuruf](#comment%3A58):\n> The diff above is for \"1. native namespace package\".\n\n\nThanks. This seems to be for Python 3 only, which would conflict with the goal of my packages to support older released versions such as sage 8.1 on Ubuntu bionic. But I'll keep it in mind for the future.",
    "created_at": "2019-12-29T16:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539330",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>
Replying to [isuruf](#comment%3A58):
> The diff above is for "1. native namespace package".


Thanks. This seems to be for Python 3 only, which would conflict with the goal of my packages to support older released versions such as sage 8.1 on Ubuntu bionic. But I'll keep it in mind for the future.



---

archive/issue_comments_539331.json:
```json
{
    "body": "<a id='comment:60'></a>\nThanks for the pull request at https://github.com/mkoeppe/sage-numerical-backends-coin/pull/4 . Let's continue the discussion regarding namespace packages there.",
    "created_at": "2019-12-29T16:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539331",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>
Thanks for the pull request at https://github.com/mkoeppe/sage-numerical-backends-coin/pull/4 . Let's continue the discussion regarding namespace packages there.



---

archive/issue_comments_539332.json:
```json
{
    "body": "Changing commit from \"2110ed3270741ec5f7211068ebbb91a787f4d815\" to \"127989764d490e3d9359712970923bd993b14067\"",
    "created_at": "2019-12-30T00:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539332",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2110ed3270741ec5f7211068ebbb91a787f4d815" to "127989764d490e3d9359712970923bd993b14067"



---

archive/issue_comments_539333.json:
```json
{
    "body": "<a id='comment:61'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------|\n|[1279897](https://github.com/sagemath/sagetrac-mirror/commit/127989764d490e3d9359712970923bd993b14067)|`build/pkgs/sage_numerical_backends_*/dependencies: Add some .pxd and .h as dependencies`|",
    "created_at": "2019-12-30T00:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------|
|[1279897](https://github.com/sagemath/sagetrac-mirror/commit/127989764d490e3d9359712970923bd993b14067)|`build/pkgs/sage_numerical_backends_*/dependencies: Add some .pxd and .h as dependencies`|



---

archive/issue_comments_539334.json:
```json
{
    "body": "<a id='comment:62'></a>\nReplying to [mkoeppe](#comment%3A60):\n> Thanks for the pull request at https://github.com/mkoeppe/sage-numerical-backends-coin/pull/4 . Let's continue the discussion regarding namespace packages there.\n\nI consider the idea of using namespace packages beyond the scope of the present ticket. I have created ticket #28925 (Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages) for this direction.",
    "created_at": "2019-12-30T14:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539334",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>
Replying to [mkoeppe](#comment%3A60):
> Thanks for the pull request at https://github.com/mkoeppe/sage-numerical-backends-coin/pull/4 . Let's continue the discussion regarding namespace packages there.

I consider the idea of using namespace packages beyond the scope of the present ticket. I have created ticket #28925 (Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages) for this direction.



---

archive/issue_comments_539335.json:
```json
{
    "body": "<a id='comment:64'></a>\nOK, coin and gurobi work, I can't test cplex, but I think it should be OK.\nIt won't make it into 9.0, so I bumped up the milestone.",
    "created_at": "2019-12-30T15:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539335",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:64'></a>
OK, coin and gurobi work, I can't test cplex, but I think it should be OK.
It won't make it into 9.0, so I bumped up the milestone.



---

archive/issue_events_087182.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-30T15:56:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-87182"
}
```



---

archive/issue_events_087183.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-30T15:56:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-87183"
}
```



---

archive/issue_comments_539336.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2019-12-30T15:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539336",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_539337.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-12-30T15:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539337",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_539338.json:
```json
{
    "body": "<a id='comment:66'></a>\nThank you!",
    "created_at": "2019-12-30T16:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539338",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:66'></a>
Thank you!



---

archive/issue_comments_539339.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-01-05T15:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539339",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087184.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-05T15:47:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-87184"
}
```



---

archive/issue_comments_539340.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/move_optional_sage_optimization_backends_to_separate_cython_packages_to_remove_optionalextension_problems\" to \"127989764d490e3d9359712970923bd993b14067\"",
    "created_at": "2020-01-05T15:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539340",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/move_optional_sage_optimization_backends_to_separate_cython_packages_to_remove_optionalextension_problems" to "127989764d490e3d9359712970923bd993b14067"



---

archive/issue_comments_539341.json:
```json
{
    "body": "<a id='comment:68'></a>\nSorry, I was late testing this. It works for me with Ubuntu 16.04 running Gurobi 8.1.1 and CPLEX 12.9.\n\nQuestion: how can I make sure that the tests involing Gurobi and cplex backends continue to work in the next dev versions of SageMath now that those files are gone from the sage library?",
    "created_at": "2020-01-05T17:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539341",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:68'></a>
Sorry, I was late testing this. It works for me with Ubuntu 16.04 running Gurobi 8.1.1 and CPLEX 12.9.

Question: how can I make sure that the tests involing Gurobi and cplex backends continue to work in the next dev versions of SageMath now that those files are gone from the sage library?



---

archive/issue_comments_539342.json:
```json
{
    "body": "Changing commit from \"127989764d490e3d9359712970923bd993b14067\" to \"\"",
    "created_at": "2020-01-05T17:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539342",
    "user": "https://github.com/seblabbe"
}
```

Changing commit from "127989764d490e3d9359712970923bd993b14067" to ""



---

archive/issue_comments_539343.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [slabbe](#comment%3A68):\n> It works for me with Ubuntu 16.04 running Gurobi 8.1.1 and CPLEX 12.9.\n\n\nThanks for testing!\n\n> Question: how can I make sure that the tests involing Gurobi and cplex backends continue to work in the next dev versions of SageMath now that those files are gone from the sage library?\n\n\nThe tests are run when you install the new packages with `sage -i -c`.",
    "created_at": "2020-01-05T17:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-539343",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'></a>
Replying to [slabbe](#comment%3A68):
> It works for me with Ubuntu 16.04 running Gurobi 8.1.1 and CPLEX 12.9.


Thanks for testing!

> Question: how can I make sure that the tests involing Gurobi and cplex backends continue to work in the next dev versions of SageMath now that those files are gone from the sage library?


The tests are run when you install the new packages with `sage -i -c`.
