# Issue 28175: Move optional sage optimization backends (COIN, CPLEX, Gurobi) to separate Cython packages to remove OptionalExtension problems

archive/issues_027938.json:
```json
{
    "body": "`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. \n\nWith this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).\n\nThis makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n\nThe new packages are on PyPI:\n\n```\nwget -P upstream https://files.pythonhosted.org/packages/29/8a/65fd90a890fcfb56166c4071aa7a4fb5b865d313304f60474870f0e89998/sage_numerical_backends_cplex-9.0b12.tar.gz\nwget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz\nwget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz\n``` \n\nDevelopment here:\n- https://github.com/mkoeppe/sage-numerical-backends-cplex\n- https://github.com/mkoeppe/sage-numerical-backends-coin\n- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n\n\nSee also:\n- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages\n- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n\n\n\n\nCC:  @isuruf @saraedum @kiwifb @dimpase tmonteil @videlec @seblabbe\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nBranch: 127989764d490e3d9359712970923bd993b14067\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28175\n\n",
    "closed_at": "2020-01-05T15:47:42Z",
    "created_at": "2019-07-11T17:54:04Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Move optional sage optimization backends (COIN, CPLEX, Gurobi) to separate Cython packages to remove OptionalExtension problems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28175",
    "user": "https://github.com/mkoeppe"
}
```
`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. 

With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).

This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.

The new packages are on PyPI:

```
wget -P upstream https://files.pythonhosted.org/packages/29/8a/65fd90a890fcfb56166c4071aa7a4fb5b865d313304f60474870f0e89998/sage_numerical_backends_cplex-9.0b12.tar.gz
wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz
wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz
``` 

Development here:
- https://github.com/mkoeppe/sage-numerical-backends-cplex
- https://github.com/mkoeppe/sage-numerical-backends-coin
- https://github.com/mkoeppe/sage-numerical-backends-gurobi


See also:
- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages
- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 




CC:  @isuruf @saraedum @kiwifb @dimpase tmonteil @videlec @seblabbe

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Branch: 127989764d490e3d9359712970923bd993b14067

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28175





---

archive/issue_comments_420030.json:
```json
{
    "body": "<a id='comment:1'></a>Can you be more precise on your plans.\n\nThese backends are used in graphs. So what will happen if linear programming backends are in a separate package ?",
    "created_at": "2019-07-23T20:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420030",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>Can you be more precise on your plans.

These backends are used in graphs. So what will happen if linear programming backends are in a separate package ?



---

archive/issue_comments_420031.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 dcoudert]:\n> These backends are used in graphs. So what will happen if linear programming backends are in a separate package ? \n\nIn my plan, the backends would be a standard package of the sage distribution, and the cython modules it provides would be automatically imported when MixedIntegerLinearProgram is used.",
    "created_at": "2019-07-24T15:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420031",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Replying to [comment:1 dcoudert]:
> These backends are used in graphs. So what will happen if linear programming backends are in a separate package ? 

In my plan, the backends would be a standard package of the sage distribution, and the cython modules it provides would be automatically imported when MixedIntegerLinearProgram is used.



---

archive/issue_events_069995.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-11-27T02:19:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-69995"
}
```



---

archive/issue_comments_420032.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,40 @@\n-`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib.\n+`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.\n+\n+From `src/module_list.py`:\n+\n+```\n+    OptionalExtension(\"sage.numerical.backends.gurobi_backend\",\n+              [\"sage/numerical/backends/gurobi_backend.pyx\"],\n+              libraries = [\"gurobi\"],\n+              condition = os.path.isfile(SAGE_INC + \"/gurobi_c.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libgurobi.so\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.cplex_backend\",\n+              [\"sage/numerical/backends/cplex_backend.pyx\"],\n+              libraries = [\"cplex\"],\n+              condition = os.path.isfile(SAGE_INC + \"/cplex.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libcplex.a\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.coin_backend\",\n+              [\"sage/numerical/backends/coin_backend.pyx\"],\n+              language = 'c++',\n+              libraries = [\"Cbc\", \"CbcSolver\", \"Cgl\", \"Clp\", \"CoinUtils\",\n+                           \"OsiCbc\", \"OsiClp\", \"Osi\"] + lapack_libs,\n+              library_dirs = lapack_library_dirs,\n+              include_dirs = lapack_include_dirs,\n+              package = 'cbc'),\n+```\n+\n \n Details:\n - `get_solver` uses base_ring\n - GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)\n+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.\n+\n+\n+\n+\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2019-11-27T02:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420032",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,40 @@
-`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib.
+`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.
+
+From `src/module_list.py`:
+
+```
+    OptionalExtension("sage.numerical.backends.gurobi_backend",
+              ["sage/numerical/backends/gurobi_backend.pyx"],
+              libraries = ["gurobi"],
+              condition = os.path.isfile(SAGE_INC + "/gurobi_c.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libgurobi.so")),
+
+    OptionalExtension("sage.numerical.backends.cplex_backend",
+              ["sage/numerical/backends/cplex_backend.pyx"],
+              libraries = ["cplex"],
+              condition = os.path.isfile(SAGE_INC + "/cplex.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libcplex.a")),
+
+    OptionalExtension("sage.numerical.backends.coin_backend",
+              ["sage/numerical/backends/coin_backend.pyx"],
+              language = 'c++',
+              libraries = ["Cbc", "CbcSolver", "Cgl", "Clp", "CoinUtils",
+                           "OsiCbc", "OsiClp", "Osi"] + lapack_libs,
+              library_dirs = lapack_library_dirs,
+              include_dirs = lapack_include_dirs,
+              package = 'cbc'),
+```
+
 
 Details:
 - `get_solver` uses base_ring
 - GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)
+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.
+
+
+
+
+
 
 Comment: 1
 
``````




---

archive/issue_comments_420033.json:
```json
{
    "body": "<a id='comment:5'></a>For glpk it looks like https://github.com/biosustain/swiglpk/releases is the best maintained. Excluding sage and cvxopt.",
    "created_at": "2019-11-28T04:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420033",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>For glpk it looks like https://github.com/biosustain/swiglpk/releases is the best maintained. Excluding sage and cvxopt.



---

archive/issue_comments_420034.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,41 @@\n+`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.\n+\n+From `src/module_list.py`:\n+\n+```\n+    OptionalExtension(\"sage.numerical.backends.gurobi_backend\",\n+              [\"sage/numerical/backends/gurobi_backend.pyx\"],\n+              libraries = [\"gurobi\"],\n+              condition = os.path.isfile(SAGE_INC + \"/gurobi_c.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libgurobi.so\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.cplex_backend\",\n+              [\"sage/numerical/backends/cplex_backend.pyx\"],\n+              libraries = [\"cplex\"],\n+              condition = os.path.isfile(SAGE_INC + \"/cplex.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libcplex.a\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.coin_backend\",\n+              [\"sage/numerical/backends/coin_backend.pyx\"],\n+              language = 'c++',\n+              libraries = [\"Cbc\", \"CbcSolver\", \"Cgl\", \"Clp\", \"CoinUtils\",\n+                           \"OsiCbc\", \"OsiClp\", \"Osi\"] + lapack_libs,\n+              library_dirs = lapack_library_dirs,\n+              include_dirs = lapack_include_dirs,\n+              package = 'cbc'),\n+```\n+\n+\n+Details:\n+- `get_solver` uses base_ring\n+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)\n+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.\n+\n+See also:\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+\n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-11-28T14:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420034",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,41 @@
+`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.
+
+From `src/module_list.py`:
+
+```
+    OptionalExtension("sage.numerical.backends.gurobi_backend",
+              ["sage/numerical/backends/gurobi_backend.pyx"],
+              libraries = ["gurobi"],
+              condition = os.path.isfile(SAGE_INC + "/gurobi_c.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libgurobi.so")),
+
+    OptionalExtension("sage.numerical.backends.cplex_backend",
+              ["sage/numerical/backends/cplex_backend.pyx"],
+              libraries = ["cplex"],
+              condition = os.path.isfile(SAGE_INC + "/cplex.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libcplex.a")),
+
+    OptionalExtension("sage.numerical.backends.coin_backend",
+              ["sage/numerical/backends/coin_backend.pyx"],
+              language = 'c++',
+              libraries = ["Cbc", "CbcSolver", "Cgl", "Clp", "CoinUtils",
+                           "OsiCbc", "OsiClp", "Osi"] + lapack_libs,
+              library_dirs = lapack_library_dirs,
+              include_dirs = lapack_include_dirs,
+              package = 'cbc'),
+```
+
+
+Details:
+- `get_solver` uses base_ring
+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)
+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.
+
+See also:
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420035.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,41 @@\n+`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.\n+\n+From `src/module_list.py`:\n+\n+```\n+    OptionalExtension(\"sage.numerical.backends.gurobi_backend\",\n+              [\"sage/numerical/backends/gurobi_backend.pyx\"],\n+              libraries = [\"gurobi\"],\n+              condition = os.path.isfile(SAGE_INC + \"/gurobi_c.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libgurobi.so\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.cplex_backend\",\n+              [\"sage/numerical/backends/cplex_backend.pyx\"],\n+              libraries = [\"cplex\"],\n+              condition = os.path.isfile(SAGE_INC + \"/cplex.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libcplex.a\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.coin_backend\",\n+              [\"sage/numerical/backends/coin_backend.pyx\"],\n+              language = 'c++',\n+              libraries = [\"Cbc\", \"CbcSolver\", \"Cgl\", \"Clp\", \"CoinUtils\",\n+                           \"OsiCbc\", \"OsiClp\", \"Osi\"] + lapack_libs,\n+              library_dirs = lapack_library_dirs,\n+              include_dirs = lapack_include_dirs,\n+              package = 'cbc'),\n+```\n+\n+\n+Details:\n+- `get_solver` uses base_ring\n+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)\n+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.\n+\n+See also:\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-11-29T18:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420035",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,41 @@
+`sage.numerical.backends` depends on very little from Sage and should become a separate Cython package. This would make it easier to reconfigure it when new solvers are installed and eliminate some optional extensions from sagelib, which would simplify packaging binary distributions.
+
+From `src/module_list.py`:
+
+```
+    OptionalExtension("sage.numerical.backends.gurobi_backend",
+              ["sage/numerical/backends/gurobi_backend.pyx"],
+              libraries = ["gurobi"],
+              condition = os.path.isfile(SAGE_INC + "/gurobi_c.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libgurobi.so")),
+
+    OptionalExtension("sage.numerical.backends.cplex_backend",
+              ["sage/numerical/backends/cplex_backend.pyx"],
+              libraries = ["cplex"],
+              condition = os.path.isfile(SAGE_INC + "/cplex.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libcplex.a")),
+
+    OptionalExtension("sage.numerical.backends.coin_backend",
+              ["sage/numerical/backends/coin_backend.pyx"],
+              language = 'c++',
+              libraries = ["Cbc", "CbcSolver", "Cgl", "Clp", "CoinUtils",
+                           "OsiCbc", "OsiClp", "Osi"] + lapack_libs,
+              library_dirs = lapack_library_dirs,
+              include_dirs = lapack_include_dirs,
+              package = 'cbc'),
+```
+
+
+Details:
+- `get_solver` uses base_ring
+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)
+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.
+
+See also:
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420036.json:
```json
{
    "body": "<a id='comment:8'></a>I have prepared a first module, https://github.com/mkoeppe/sage-numerical-backends-coin.\nIt depends on Sage (as it inherits from `sage.numerical.backends.generic_backend.GenericBackend`).",
    "created_at": "2019-12-24T05:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420036",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>I have prepared a first module, https://github.com/mkoeppe/sage-numerical-backends-coin.
It depends on Sage (as it inherits from `sage.numerical.backends.generic_backend.GenericBackend`).



---

archive/issue_comments_420037.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,41 @@\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this  would also simplify packaging binary distributions.\n+\n+From `src/module_list.py`:\n+\n+```\n+    OptionalExtension(\"sage.numerical.backends.gurobi_backend\",\n+              [\"sage/numerical/backends/gurobi_backend.pyx\"],\n+              libraries = [\"gurobi\"],\n+              condition = os.path.isfile(SAGE_INC + \"/gurobi_c.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libgurobi.so\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.cplex_backend\",\n+              [\"sage/numerical/backends/cplex_backend.pyx\"],\n+              libraries = [\"cplex\"],\n+              condition = os.path.isfile(SAGE_INC + \"/cplex.h\") and\n+                  os.path.isfile(SAGE_LOCAL + \"/lib/libcplex.a\")),\n+\n+    OptionalExtension(\"sage.numerical.backends.coin_backend\",\n+              [\"sage/numerical/backends/coin_backend.pyx\"],\n+              language = 'c++',\n+              libraries = [\"Cbc\", \"CbcSolver\", \"Cgl\", \"Clp\", \"CoinUtils\",\n+                           \"OsiCbc\", \"OsiClp\", \"Osi\"] + lapack_libs,\n+              library_dirs = lapack_library_dirs,\n+              include_dirs = lapack_include_dirs,\n+              package = 'cbc'),\n+```\n+\n+\n+Details:\n+- `get_solver` uses base_ring\n+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)\n+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.\n+\n+See also:\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-12-24T05:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420037",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,41 @@
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this  would also simplify packaging binary distributions.
+
+From `src/module_list.py`:
+
+```
+    OptionalExtension("sage.numerical.backends.gurobi_backend",
+              ["sage/numerical/backends/gurobi_backend.pyx"],
+              libraries = ["gurobi"],
+              condition = os.path.isfile(SAGE_INC + "/gurobi_c.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libgurobi.so")),
+
+    OptionalExtension("sage.numerical.backends.cplex_backend",
+              ["sage/numerical/backends/cplex_backend.pyx"],
+              libraries = ["cplex"],
+              condition = os.path.isfile(SAGE_INC + "/cplex.h") and
+                  os.path.isfile(SAGE_LOCAL + "/lib/libcplex.a")),
+
+    OptionalExtension("sage.numerical.backends.coin_backend",
+              ["sage/numerical/backends/coin_backend.pyx"],
+              language = 'c++',
+              libraries = ["Cbc", "CbcSolver", "Cgl", "Clp", "CoinUtils",
+                           "OsiCbc", "OsiClp", "Osi"] + lapack_libs,
+              library_dirs = lapack_library_dirs,
+              include_dirs = lapack_include_dirs,
+              package = 'cbc'),
+```
+
+
+Details:
+- `get_solver` uses base_ring
+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings)
+- For Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.
+
+See also:
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420038.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,30 @@\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n+\n+The new packages are on PyPI:\n+\n+```\n+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/40/01/0b9580bc9db5671cc2446ea089ba1f28bacf85ef0e9f05a4a781bf9dcd7d/sage_numerical_backends_coin-9.0b9.tar.gz\n+``` \n+\n+Development here:\n+- https://github.com/mkoeppe/sage-numerical-backends-cplex\n+- https://github.com/mkoeppe/sage-numerical-backends-coin\n+- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n+\n+---\n+\n+(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:\n+- `get_solver` uses base_ring\n+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)\n+(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)\n+\n+See also:\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-12-25T02:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420038",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,30 @@
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
+
+The new packages are on PyPI:
+
+```
+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/40/01/0b9580bc9db5671cc2446ea089ba1f28bacf85ef0e9f05a4a781bf9dcd7d/sage_numerical_backends_coin-9.0b9.tar.gz
+``` 
+
+Development here:
+- https://github.com/mkoeppe/sage-numerical-backends-cplex
+- https://github.com/mkoeppe/sage-numerical-backends-coin
+- https://github.com/mkoeppe/sage-numerical-backends-gurobi
+
+---
+
+(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:
+- `get_solver` uses base_ring
+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)
+(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)
+
+See also:
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420039.json:
```json
{
    "body": "<a id='comment:10'></a>Is there a git branch to try, replacing Sage's current COIN-OR backend with this one?",
    "created_at": "2019-12-25T02:42:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420039",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>Is there a git branch to try, replacing Sage's current COIN-OR backend with this one?



---

archive/issue_comments_420040.json:
```json
{
    "body": "<a id='comment:11'></a>Not yet (working on it right now), but the 3 backends already pass their test suites separately.",
    "created_at": "2019-12-25T03:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420040",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Not yet (working on it right now), but the 3 backends already pass their test suites separately.



---

archive/issue_comments_420041.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-25T03:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420041",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420042.json:
```json
{
    "body": "<a id='comment:14'></a>Now the packages can be installed using `sage -i -c`... please test",
    "created_at": "2019-12-25T03:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420042",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Now the packages can be installed using `sage -i -c`... please test



---

archive/issue_comments_420043.json:
```json
{
    "body": "<a id='comment:15'></a>remains of copypaste, I see `PyNormaliz` in the branch...",
    "created_at": "2019-12-25T03:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420043",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>remains of copypaste, I see `PyNormaliz` in the branch...



---

archive/issue_comments_420044.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-25T03:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420045.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-12-25T03:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420045",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_420046.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-25T03:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420046",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420047.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-25T04:34:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420047",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420048.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-25T05:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420048",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420049.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-25T05:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420050.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,30 @@\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n+\n+The new packages are on PyPI:\n+\n+```\n+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz\n+``` \n+\n+Development here:\n+- https://github.com/mkoeppe/sage-numerical-backends-cplex\n+- https://github.com/mkoeppe/sage-numerical-backends-coin\n+- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n+\n+---\n+\n+(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:\n+- `get_solver` uses base_ring\n+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)\n+(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)\n+\n+See also:\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-12-27T03:32:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420050",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,30 @@
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. This would make it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
+
+The new packages are on PyPI:
+
+```
+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz
+``` 
+
+Development here:
+- https://github.com/mkoeppe/sage-numerical-backends-cplex
+- https://github.com/mkoeppe/sage-numerical-backends-coin
+- https://github.com/mkoeppe/sage-numerical-backends-gurobi
+
+---
+
+(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:
+- `get_solver` uses base_ring
+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)
+(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)
+
+See also:
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420051.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-27T04:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420051",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420052.json:
```json
{
    "body": "<a id='comment:25'></a>Since these are currently part of the Sage distribution, it makes sense to me to have them as standard packages (in regards to comment:2). Similarly I would argue they do not require a vote on sage-devel, but I would just post something quick there to see if there are any objections.",
    "created_at": "2019-12-27T16:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420052",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>Since these are currently part of the Sage distribution, it makes sense to me to have them as standard packages (in regards to comment:2). Similarly I would argue they do not require a vote on sage-devel, but I would just post something quick there to see if there are any objections.



---

archive/issue_comments_420053.json:
```json
{
    "body": "<a id='comment:26'></a>They can't be standard packages because they only compile if the respective solvers are installed.",
    "created_at": "2019-12-27T16:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420053",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>They can't be standard packages because they only compile if the respective solvers are installed.



---

archive/issue_comments_420054.json:
```json
{
    "body": "<a id='comment:27'></a>Note that I narrowed down the ticket recently; the early comments were on a broader proposal to move ALL backends out to separate packages.",
    "created_at": "2019-12-27T16:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420054",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Note that I narrowed down the ticket recently; the early comments were on a broader proposal to move ALL backends out to separate packages.



---

archive/issue_comments_420055.json:
```json
{
    "body": "<a id='comment:28'></a>Ah, I see. Sorry for the noise.",
    "created_at": "2019-12-27T17:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420055",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>Ah, I see. Sorry for the noise.



---

archive/issue_comments_420056.json:
```json
{
    "body": "<a id='comment:29'></a>`coin` is problematic for me on sage-on-gentoo, and has been for a while. So, making it a standard package would be annoying. The `coin` interface doesn't seem to be very stable and `coin` in sage is not updated often (neither it is in gentoo). Version mismatch usually lead to a failure to build the interface.",
    "created_at": "2019-12-27T19:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420056",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:29'></a>`coin` is problematic for me on sage-on-gentoo, and has been for a while. So, making it a standard package would be annoying. The `coin` interface doesn't seem to be very stable and `coin` in sage is not updated often (neither it is in gentoo). Version mismatch usually lead to a failure to build the interface.



---

archive/issue_comments_420057.json:
```json
{
    "body": "<a id='comment:30'></a>Well, the point of this ticket is to make the sage build *less* dependent on coin, not more. \n\nAlso, I'd appreciate any help with testing https://github.com/mkoeppe/sage-numerical-backends-coin on sage installations such as the one provided on gentoo. My current test scripts (using [GitHub](GitHub) actions) cover conda-forge so far, and I'm working on various debian/ubuntu flavors.",
    "created_at": "2019-12-27T19:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420057",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>Well, the point of this ticket is to make the sage build *less* dependent on coin, not more. 

Also, I'd appreciate any help with testing https://github.com/mkoeppe/sage-numerical-backends-coin on sage installations such as the one provided on gentoo. My current test scripts (using [GitHub](GitHub) actions) cover conda-forge so far, and I'm working on various debian/ubuntu flavors.



---

archive/issue_comments_420058.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,34 @@\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. \n+\n+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).\n+\n+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n+\n+The new packages are on PyPI:\n+\n+```\n+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz\n+``` \n+\n+Development here:\n+- https://github.com/mkoeppe/sage-numerical-backends-cplex\n+- https://github.com/mkoeppe/sage-numerical-backends-coin\n+- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n+\n+---\n+\n+(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:\n+- `get_solver` uses base_ring\n+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)\n+(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)\n+\n+See also:\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-12-27T19:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420058",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,34 @@
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. 
+
+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).
+
+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
+
+The new packages are on PyPI:
+
+```
+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz
+``` 
+
+Development here:
+- https://github.com/mkoeppe/sage-numerical-backends-cplex
+- https://github.com/mkoeppe/sage-numerical-backends-coin
+- https://github.com/mkoeppe/sage-numerical-backends-gurobi
+
+---
+
+(In a follow-up ticket, one could consider moving the entire backend machinery to a separate packages. Some notes regarding this:
+- `get_solver` uses base_ring
+- GLPKBackend depends on `sage.libs.glpk`, which should also become a separate Cython package (see https://en.wikibooks.org/wiki/GLPK/Python for a list of other glpk bindings).)
+(In another follow-up ticket, for Gurobi and CPLEX, we could alternatively get rid of these Cython modules entirely by making use of their standard Python API instead.)
+
+See also:
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420059.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:30 mkoeppe]:\n> Well, the point of this ticket is to make the sage build *less* dependent on coin, not more. \n> \n> Also, I'd appreciate any help with testing https://github.com/mkoeppe/sage-numerical-backends-coin on sage installations such as the one provided on gentoo. My current test scripts (using [GitHub](GitHub) actions) cover conda-forge so far, and I'm working on various debian/ubuntu flavors.\n\n\nI will have a look at it. It looks interesting but where does it install itself? I cannot promise speedy review as I about to have my annual internet /computer detox for a few days :)",
    "created_at": "2019-12-27T19:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420059",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:32'></a>Replying to [comment:30 mkoeppe]:
> Well, the point of this ticket is to make the sage build *less* dependent on coin, not more. 
> 
> Also, I'd appreciate any help with testing https://github.com/mkoeppe/sage-numerical-backends-coin on sage installations such as the one provided on gentoo. My current test scripts (using [GitHub](GitHub) actions) cover conda-forge so far, and I'm working on various debian/ubuntu flavors.


I will have a look at it. It looks interesting but where does it install itself? I cannot promise speedy review as I about to have my annual internet /computer detox for a few days :)



---

archive/issue_comments_420060.json:
```json
{
    "body": "<a id='comment:33'></a>It just installs itself as a Python package named `sage_numerical_backends_coin.coin_backend` (note, underscores, not dots).\nThe https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/README.md explains how to use it, including how to patch it into a sage for testing purposes.",
    "created_at": "2019-12-27T19:44:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420060",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>It just installs itself as a Python package named `sage_numerical_backends_coin.coin_backend` (note, underscores, not dots).
The https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/README.md explains how to use it, including how to patch it into a sage for testing purposes.



---

archive/issue_comments_420061.json:
```json
{
    "body": "<a id='comment:34'></a>for coin, there is a verssion mismatch. On pypi and in the ticket description the minor version is b9, in build/pkgs/ it is b10, the latest on github is b12 :-)\n\nSo I took b12 from github, renamed the tarfile (arrgh), bumped up the version,\n\n```diff\ndiff --git a/build/pkgs/sage_numerical_backends_coin/checksums.ini b/build/pkgs/sage_numerical_backends_coin/checksums.ini\nindex 03b250b653..3062652fc1 100644\n--- a/build/pkgs/sage_numerical_backends_coin/checksums.ini\n+++ b/build/pkgs/sage_numerical_backends_coin/checksums.ini\n@@ -1,4 +1,4 @@\n tarball=sage_numerical_backends_coin-VERSION.tar.gz\n-sha1=fd96cfc224f1f45bad6bacaaf37df3904fa7a561\n-md5=98e5a002648cdf3167df2dafb16cde47\n-cksum=869439056\n+sha1=0c424f8d01bdd44169630bc898738a4ee146ea2c\n+md5=09b6b74d7c8b9b3526424cf8850f8700\n+cksum=1339126990\ndiff --git a/build/pkgs/sage_numerical_backends_coin/package-version.txt b/build/pkgs/sage_numerical_backends_coin/package-version.txt\nindex 5d6a14cdd9..1700f7be00 100644\n--- a/build/pkgs/sage_numerical_backends_coin/package-version.txt\n+++ b/build/pkgs/sage_numerical_backends_coin/package-version.txt\n@@ -1 +1 @@\n-9.0b10\n+9.0b12\n```\n\nand then \n\n```\n$ SAGE_CHECK=yes ./sage -i sage_numerical_backends_coin\n```\nworked on Debian with system's cbc 2.9.9.\n(using #28908)",
    "created_at": "2019-12-28T09:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420061",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'></a>for coin, there is a verssion mismatch. On pypi and in the ticket description the minor version is b9, in build/pkgs/ it is b10, the latest on github is b12 :-)

So I took b12 from github, renamed the tarfile (arrgh), bumped up the version,

```diff
diff --git a/build/pkgs/sage_numerical_backends_coin/checksums.ini b/build/pkgs/sage_numerical_backends_coin/checksums.ini
index 03b250b653..3062652fc1 100644
--- a/build/pkgs/sage_numerical_backends_coin/checksums.ini
+++ b/build/pkgs/sage_numerical_backends_coin/checksums.ini
@@ -1,4 +1,4 @@
 tarball=sage_numerical_backends_coin-VERSION.tar.gz
-sha1=fd96cfc224f1f45bad6bacaaf37df3904fa7a561
-md5=98e5a002648cdf3167df2dafb16cde47
-cksum=869439056
+sha1=0c424f8d01bdd44169630bc898738a4ee146ea2c
+md5=09b6b74d7c8b9b3526424cf8850f8700
+cksum=1339126990
diff --git a/build/pkgs/sage_numerical_backends_coin/package-version.txt b/build/pkgs/sage_numerical_backends_coin/package-version.txt
index 5d6a14cdd9..1700f7be00 100644
--- a/build/pkgs/sage_numerical_backends_coin/package-version.txt
+++ b/build/pkgs/sage_numerical_backends_coin/package-version.txt
@@ -1 +1 @@
-9.0b10
+9.0b12
```

and then 

```
$ SAGE_CHECK=yes ./sage -i sage_numerical_backends_coin
```
worked on Debian with system's cbc 2.9.9.
(using #28908)



---

archive/issue_comments_420062.json:
```json
{
    "body": "<a id='comment:35'></a>Where are the tests from now gone `sage/numerical/backends/coin_backend.pyx` ?\nAre they all being run while installing with `SAGE_CHECK=yes` ?",
    "created_at": "2019-12-28T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420062",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>Where are the tests from now gone `sage/numerical/backends/coin_backend.pyx` ?
Are they all being run while installing with `SAGE_CHECK=yes` ?



---

archive/issue_comments_420063.json:
```json
{
    "body": "<a id='comment:36'></a>In a way related to #26511, upstream devs for cbc have published their own python interface https://git.patrikdufresne.com/pdsl/cbcpy the fact that it uses swig may be an obstacle for immediate inclusion but switching to something maintained externally is something to think about. The project is quite new (August 2019 according to https://pypi.org/project/cbcpy/ ) which is why it may escaped attention before.",
    "created_at": "2019-12-28T09:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420063",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:36'></a>In a way related to #26511, upstream devs for cbc have published their own python interface https://git.patrikdufresne.com/pdsl/cbcpy the fact that it uses swig may be an obstacle for immediate inclusion but switching to something maintained externally is something to think about. The project is quite new (August 2019 according to https://pypi.org/project/cbcpy/ ) which is why it may escaped attention before.



---

archive/issue_comments_420064.json:
```json
{
    "body": "<a id='comment:37'></a>in the environment as above for coin, \n\n`SAGE_CHECK=yes ./sage -f sage_numerical_backends_gurobi`\n\nfails with\n\n```\n...\n[sage_numerical_backends_gurobi-9.0b9] Running the test suite for sage_numerical_backends_gurobi-9.0b9...\n[sage_numerical_backends_gurobi-9.0b9] running test\n[sage_numerical_backends_gurobi-9.0b9] Searching for sage-package\n[sage_numerical_backends_gurobi-9.0b9] Reading https://pypi.org/simple/sage-package/\n[sage_numerical_backends_gurobi-9.0b9] Using gurobi_include_directories=['/home/dimpase/sage/upstream/gurobi900/linux64/include'], libraries=['gurobi90'], library_dirs=['/home/dimpase/sage/upstream/gurobi900/linux64/lib']\n[sage_numerical_backends_gurobi-9.0b9] Download error on https://pypi.org/simple/sage-package/: [Errno 110] Connection timed out -- Some packages may not be found!\n[sage_numerical_backends_gurobi-9.0b9] Couldn't find index page for 'sage-package' (maybe misspelled?)\n[sage_numerical_backends_gurobi-9.0b9] Scanning index of all packages (this may take a while)\n[sage_numerical_backends_gurobi-9.0b9] Reading https://pypi.org/simple/\n[sage_numerical_backends_gurobi-9.0b9] Download error on https://pypi.org/simple/: [Errno 110] Connection timed out -- Some packages may not be found!\n[sage_numerical_backends_gurobi-9.0b9] No local packages or working download links found for sage-package\n[sage_numerical_backends_gurobi-9.0b9] error: Could not find suitable distribution for Requirement.parse('sage-package')\n[sage_numerical_backends_gurobi-9.0b9] \n[sage_numerical_backends_gurobi-9.0b9] real     1m4.289s\n[sage_numerical_backends_gurobi-9.0b9] user     0m0.833s\n[sage_numerical_backends_gurobi-9.0b9] sys      0m0.148s\n[sage_numerical_backends_gurobi-9.0b9] ************************************************************************\n[sage_numerical_backends_gurobi-9.0b9] Error testing package sage_numerical_backends_gurobi-9.0b9\n```",
    "created_at": "2019-12-28T09:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420064",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>in the environment as above for coin, 

`SAGE_CHECK=yes ./sage -f sage_numerical_backends_gurobi`

fails with

```
...
[sage_numerical_backends_gurobi-9.0b9] Running the test suite for sage_numerical_backends_gurobi-9.0b9...
[sage_numerical_backends_gurobi-9.0b9] running test
[sage_numerical_backends_gurobi-9.0b9] Searching for sage-package
[sage_numerical_backends_gurobi-9.0b9] Reading https://pypi.org/simple/sage-package/
[sage_numerical_backends_gurobi-9.0b9] Using gurobi_include_directories=['/home/dimpase/sage/upstream/gurobi900/linux64/include'], libraries=['gurobi90'], library_dirs=['/home/dimpase/sage/upstream/gurobi900/linux64/lib']
[sage_numerical_backends_gurobi-9.0b9] Download error on https://pypi.org/simple/sage-package/: [Errno 110] Connection timed out -- Some packages may not be found!
[sage_numerical_backends_gurobi-9.0b9] Couldn't find index page for 'sage-package' (maybe misspelled?)
[sage_numerical_backends_gurobi-9.0b9] Scanning index of all packages (this may take a while)
[sage_numerical_backends_gurobi-9.0b9] Reading https://pypi.org/simple/
[sage_numerical_backends_gurobi-9.0b9] Download error on https://pypi.org/simple/: [Errno 110] Connection timed out -- Some packages may not be found!
[sage_numerical_backends_gurobi-9.0b9] No local packages or working download links found for sage-package
[sage_numerical_backends_gurobi-9.0b9] error: Could not find suitable distribution for Requirement.parse('sage-package')
[sage_numerical_backends_gurobi-9.0b9] 
[sage_numerical_backends_gurobi-9.0b9] real     1m4.289s
[sage_numerical_backends_gurobi-9.0b9] user     0m0.833s
[sage_numerical_backends_gurobi-9.0b9] sys      0m0.148s
[sage_numerical_backends_gurobi-9.0b9] ************************************************************************
[sage_numerical_backends_gurobi-9.0b9] Error testing package sage_numerical_backends_gurobi-9.0b9
```



---

archive/issue_comments_420065.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:34 dimpase]:\n> So I took b12 from github, renamed the tarfile (arrgh)...\n\n\nI recommend to take the release files from pypi - they have been built with `setup.py sdist`.",
    "created_at": "2019-12-28T15:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420065",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>Replying to [comment:34 dimpase]:
> So I took b12 from github, renamed the tarfile (arrgh)...


I recommend to take the release files from pypi - they have been built with `setup.py sdist`.



---

archive/issue_comments_420066.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:35 dimpase]:\n> Where are the tests from now gone `sage/numerical/backends/coin_backend.pyx` ?\n> Are they all being run while installing with `SAGE_CHECK=yes` ?\n\n\nThey are here:\nhttps://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/sage_numerical_backends_coin/coin_backend.pyx\nThey are run in the CI scripts of the package, and also when installing the spkg with `SAGE_CHECK=yes`.",
    "created_at": "2019-12-28T15:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420066",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Replying to [comment:35 dimpase]:
> Where are the tests from now gone `sage/numerical/backends/coin_backend.pyx` ?
> Are they all being run while installing with `SAGE_CHECK=yes` ?


They are here:
https://github.com/mkoeppe/sage-numerical-backends-coin/blob/master/sage_numerical_backends_coin/coin_backend.pyx
They are run in the CI scripts of the package, and also when installing the spkg with `SAGE_CHECK=yes`.



---

archive/issue_comments_420067.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:38 mkoeppe]:\n> Replying to [comment:34 dimpase]:\n> > So I took b12 from github, renamed the tarfile (arrgh)...\n\n> \n> I recommend to take the release files from pypi - they have been built with `setup.py sdist`.\n\n\nsure, but b12 was not there yet. https://pypi.org/project/sage-numerical-backends-coin/#files says it made it there ~10 hours ago.",
    "created_at": "2019-12-28T15:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420067",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>Replying to [comment:38 mkoeppe]:
> Replying to [comment:34 dimpase]:
> > So I took b12 from github, renamed the tarfile (arrgh)...

> 
> I recommend to take the release files from pypi - they have been built with `setup.py sdist`.


sure, but b12 was not there yet. https://pypi.org/project/sage-numerical-backends-coin/#files says it made it there ~10 hours ago.



---

archive/issue_comments_420068.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,29 @@\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. \n+\n+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).\n+\n+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n+\n+The new packages are on PyPI:\n+\n+```\n+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz\n+``` \n+\n+Development here:\n+- https://github.com/mkoeppe/sage-numerical-backends-cplex\n+- https://github.com/mkoeppe/sage-numerical-backends-coin\n+- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n+\n+\n+See also:\n+- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-12-28T15:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420068",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,29 @@
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. 
+
+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).
+
+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
+
+The new packages are on PyPI:
+
+```
+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/72/07/8b52ab9411caec6f4593decebc5660c6ce955f437510d8bd58533866ff31/sage_numerical_backends_gurobi-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/24/04/173c29f0d5cdeccfa335ecc00149834e25b9d7fb00279eed9d7a8757e3a6/sage_numerical_backends_coin-9.0b10.tar.gz
+``` 
+
+Development here:
+- https://github.com/mkoeppe/sage-numerical-backends-cplex
+- https://github.com/mkoeppe/sage-numerical-backends-coin
+- https://github.com/mkoeppe/sage-numerical-backends-gurobi
+
+
+See also:
+- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420069.json:
```json
{
    "body": "<a id='comment:41'></a>Created follow-up ticket, cleaned up ticket description",
    "created_at": "2019-12-28T15:30:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420069",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>Created follow-up ticket, cleaned up ticket description



---

archive/issue_comments_420070.json:
```json
{
    "body": "<a id='comment:42'></a>Replying to [comment:41 mkoeppe]:\n> Created follow-up ticket, cleaned up ticket description\n\n\nsome links to packages are not up to date.",
    "created_at": "2019-12-28T15:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420070",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>Replying to [comment:41 mkoeppe]:
> Created follow-up ticket, cleaned up ticket description


some links to packages are not up to date.



---

archive/issue_comments_420071.json:
```json
{
    "body": "<a id='comment:43'></a>Replying to [comment:36 fbissey]:\n> In a way related to #26511, upstream devs for cbc have published their own python interface https://git.patrikdufresne.com/pdsl/cbcpy the fact that it uses swig may be an obstacle for immediate inclusion but switching to something maintained externally is something to think about. The project is quite new (August 2019 according to https://pypi.org/project/cbcpy/ ) which is why it may escaped attention before.\n\nThank you! I've added this information to #26511.",
    "created_at": "2019-12-28T15:32:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420071",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Replying to [comment:36 fbissey]:
> In a way related to #26511, upstream devs for cbc have published their own python interface https://git.patrikdufresne.com/pdsl/cbcpy the fact that it uses swig may be an obstacle for immediate inclusion but switching to something maintained externally is something to think about. The project is quite new (August 2019 according to https://pypi.org/project/cbcpy/ ) which is why it may escaped attention before.

Thank you! I've added this information to #26511.



---

archive/issue_comments_420072.json:
```json
{
    "body": "<a id='comment:44'></a>Replying to [comment:42 dimpase]:\n> Replying to [comment:41 mkoeppe]:\n> > Created follow-up ticket, cleaned up ticket description\n\n> \n> some links to packages are not up to date.\n\nThanks for testing! I'll update the cplex and gurobi packages with my changes to the coin package and then make new releases.",
    "created_at": "2019-12-28T15:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420072",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>Replying to [comment:42 dimpase]:
> Replying to [comment:41 mkoeppe]:
> > Created follow-up ticket, cleaned up ticket description

> 
> some links to packages are not up to date.

Thanks for testing! I'll update the cplex and gurobi packages with my changes to the coin package and then make new releases.



---

archive/issue_comments_420073.json:
```json
{
    "body": "<a id='comment:45'></a>Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of\n\n```\nexport GUROBI_HOME=\"/opt/gurobi900/linux64\"\nexport PATH=\"${PATH}:${GUROBI_HOME}/bin\"\nexport LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib\"\n```\nto a minimum.\nE.g. there could be an `--with-gurobi-home=` option which would default to\n`$GUROBI_HOME`, \nand `GUROBI_HOME` should be written in `sage-env-config` etc.\n\nThis is for a follow-up ticket, of course.",
    "created_at": "2019-12-28T15:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420073",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of

```
export GUROBI_HOME="/opt/gurobi900/linux64"
export PATH="${PATH}:${GUROBI_HOME}/bin"
export LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib"
```
to a minimum.
E.g. there could be an `--with-gurobi-home=` option which would default to
`$GUROBI_HOME`, 
and `GUROBI_HOME` should be written in `sage-env-config` etc.

This is for a follow-up ticket, of course.



---

archive/issue_comments_420074.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:45 dimpase]:\n> Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of\n> \n> ```\n> export GUROBI_HOME=\"/opt/gurobi900/linux64\"\n> export PATH=\"${PATH}:${GUROBI_HOME}/bin\"\n> export LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib\"\n> ```\n> to a minimum.\n> E.g. there could be an `--with-gurobi-home=` option which would default to\n> `$GUROBI_HOME`, \n> and `GUROBI_HOME` should be written in `sage-env-config` etc.\n> \n> This is for a follow-up ticket, of course.\n\n\nThe macOS installer of Gurobi adds the following symlinks:\n\n```\nlrwxr-xr-x  1 root  wheel  40 Apr 28  2016 /usr/local/bin/gurobi.env -> //Library/gurobi651/mac64/bin/gurobi.env\nlrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi.sh -> //Library/gurobi900/mac64/bin/gurobi.sh\nlrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi_cl -> //Library/gurobi900/mac64/bin/gurobi_cl\n```\n\nSee https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md (just updated) - \nI am using gurobi.sh to do all the build configuration. \nDoes this work on Linux?",
    "created_at": "2019-12-28T16:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420074",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>Replying to [comment:45 dimpase]:
> Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of
> 
> ```
> export GUROBI_HOME="/opt/gurobi900/linux64"
> export PATH="${PATH}:${GUROBI_HOME}/bin"
> export LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib"
> ```
> to a minimum.
> E.g. there could be an `--with-gurobi-home=` option which would default to
> `$GUROBI_HOME`, 
> and `GUROBI_HOME` should be written in `sage-env-config` etc.
> 
> This is for a follow-up ticket, of course.


The macOS installer of Gurobi adds the following symlinks:

```
lrwxr-xr-x  1 root  wheel  40 Apr 28  2016 /usr/local/bin/gurobi.env -> //Library/gurobi651/mac64/bin/gurobi.env
lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi.sh -> //Library/gurobi900/mac64/bin/gurobi.sh
lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi_cl -> //Library/gurobi900/mac64/bin/gurobi_cl
```

See https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md (just updated) - 
I am using gurobi.sh to do all the build configuration. 
Does this work on Linux?



---

archive/issue_comments_420075.json:
```json
{
    "body": "<a id='comment:47'></a>Replying to [comment:46 mkoeppe]:\n> Replying to [comment:45 dimpase]:\n> > Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of\n> > \n> > ```\n> > export GUROBI_HOME=\"/opt/gurobi900/linux64\"\n> > export PATH=\"${PATH}:${GUROBI_HOME}/bin\"\n> > export LD_LIBRARY_PATH=\"${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib\"\n> > ```\n> > to a minimum.\n> > E.g. there could be an `--with-gurobi-home=` option which would default to\n> > `$GUROBI_HOME`, \n> > and `GUROBI_HOME` should be written in `sage-env-config` etc.\n> > \n> > This is for a follow-up ticket, of course.\n\n> \n> The macOS installer of Gurobi adds the following symlinks:\n> \n> ```\n> lrwxr-xr-x  1 root  wheel  40 Apr 28  2016 /usr/local/bin/gurobi.env -> //Library/gurobi651/mac64/bin/gurobi.env\n> lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi.sh -> //Library/gurobi900/mac64/bin/gurobi.sh\n> lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi_cl -> //Library/gurobi900/mac64/bin/gurobi_cl\n> ```\n> \n> See https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md (just updated) - \n> I am using gurobi.sh to do all the build configuration. \n> Does this work on Linux?\n\n\nI see, on Linux it's not an installer but just a tgz.",
    "created_at": "2019-12-28T16:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420075",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Replying to [comment:46 mkoeppe]:
> Replying to [comment:45 dimpase]:
> > Perhaps Gurobi (and similarly, CPLEX) can get some spkg-configure.m4 helpers to reduce the hassle of
> > 
> > ```
> > export GUROBI_HOME="/opt/gurobi900/linux64"
> > export PATH="${PATH}:${GUROBI_HOME}/bin"
> > export LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${GUROBI_HOME}/lib"
> > ```
> > to a minimum.
> > E.g. there could be an `--with-gurobi-home=` option which would default to
> > `$GUROBI_HOME`, 
> > and `GUROBI_HOME` should be written in `sage-env-config` etc.
> > 
> > This is for a follow-up ticket, of course.

> 
> The macOS installer of Gurobi adds the following symlinks:
> 
> ```
> lrwxr-xr-x  1 root  wheel  40 Apr 28  2016 /usr/local/bin/gurobi.env -> //Library/gurobi651/mac64/bin/gurobi.env
> lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi.sh -> //Library/gurobi900/mac64/bin/gurobi.sh
> lrwxr-xr-x  1 root  admin  39 Dec 24 12:11 /usr/local/bin/gurobi_cl -> //Library/gurobi900/mac64/bin/gurobi_cl
> ```
> 
> See https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md (just updated) - 
> I am using gurobi.sh to do all the build configuration. 
> Does this work on Linux?


I see, on Linux it's not an installer but just a tgz.



---

archive/issue_comments_420076.json:
```json
{
    "body": "<a id='comment:48'></a>Even on a Mac, with a multi-user installation one might want to hardcode `GUROBI_HOME` and the license file location (`GRB_LICENSE_FILE`).",
    "created_at": "2019-12-29T01:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420076",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>Even on a Mac, with a multi-user installation one might want to hardcode `GUROBI_HOME` and the license file location (`GRB_LICENSE_FILE`).



---

archive/issue_comments_420077.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,29 @@\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. \n+\n+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).\n+\n+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n+\n+The new packages are on PyPI:\n+\n+```\n+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz\n+``` \n+\n+Development here:\n+- https://github.com/mkoeppe/sage-numerical-backends-cplex\n+- https://github.com/mkoeppe/sage-numerical-backends-coin\n+- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n+\n+\n+See also:\n+- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-12-29T02:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420077",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,29 @@
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. 
+
+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).
+
+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
+
+The new packages are on PyPI:
+
+```
+wget -P upstream https://files.pythonhosted.org/packages/2a/1f/4fc55a0013bc5050ecf253b8bce1c4548380c15d57310a1fae5841405984/sage_numerical_backends_cplex-9.0b9.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz
+``` 
+
+Development here:
+- https://github.com/mkoeppe/sage-numerical-backends-cplex
+- https://github.com/mkoeppe/sage-numerical-backends-coin
+- https://github.com/mkoeppe/sage-numerical-backends-gurobi
+
+
+See also:
+- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420078.json:
```json
{
    "body": "<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-29T03:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420078",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420079.json:
```json
{
    "body": "<a id='comment:51'></a>There's a new version of the gurobi package now. I have done some testing on Linux now, but I could not do a full test with a Gurobi license because it does not like to generate license keys on a Docker container. I have revised thee installation instructions to include Linux:\nhttps://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md",
    "created_at": "2019-12-29T03:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420079",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>There's a new version of the gurobi package now. I have done some testing on Linux now, but I could not do a full test with a Gurobi license because it does not like to generate license keys on a Docker container. I have revised thee installation instructions to include Linux:
https://github.com/mkoeppe/sage-numerical-backends-gurobi/blob/master/README.md



---

archive/issue_comments_420080.json:
```json
{
    "body": "<a id='comment:52'></a>Replying to [comment:48 dimpase]:\n> Even on a Mac, with a multi-user installation one might want to hardcode `GUROBI_HOME` and the license file location (`GRB_LICENSE_FILE`).\nSure. The package looks at `GUROBI_HOME` first.",
    "created_at": "2019-12-29T03:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420080",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>Replying to [comment:48 dimpase]:
> Even on a Mac, with a multi-user installation one might want to hardcode `GUROBI_HOME` and the license file location (`GRB_LICENSE_FILE`).
Sure. The package looks at `GUROBI_HOME` first.



---

archive/issue_comments_420081.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,29 @@\n+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. \n+\n+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).\n+\n+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.\n+\n+The new packages are on PyPI:\n+\n+```\n+wget -P upstream https://files.pythonhosted.org/packages/29/8a/65fd90a890fcfb56166c4071aa7a4fb5b865d313304f60474870f0e89998/sage_numerical_backends_cplex-9.0b12.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz\n+wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz\n+``` \n+\n+Development here:\n+- https://github.com/mkoeppe/sage-numerical-backends-cplex\n+- https://github.com/mkoeppe/sage-numerical-backends-coin\n+- https://github.com/mkoeppe/sage-numerical-backends-gurobi\n+\n+\n+See also:\n+- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages\n+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...\n+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c \n+\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2019-12-29T13:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420081",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,29 @@
+`sage.numerical.backends` depends on very little from Sage. We propose to split out the optional backends (COIN, CPLEX, Gurobi) to separate Cython packages. 
+
+With this ticket, sagelib no longer has the optional dependency on cbc. Instead, these new packages depend on the `sage` package (i.e., sagelib).
+
+This makes it easier to reconfigure when new solvers are installed, as sagelib does not have to be recompiled. By eliminating the use of the optional extensions mechanisms from sagelib, this will also simplify packaging binary distributions.
+
+The new packages are on PyPI:
+
+```
+wget -P upstream https://files.pythonhosted.org/packages/29/8a/65fd90a890fcfb56166c4071aa7a4fb5b865d313304f60474870f0e89998/sage_numerical_backends_cplex-9.0b12.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/2c/5c/e1532bb6cde28cf86ebffd408ccb500d7b846bc29bbd1c5e479a2f18acb6/sage_numerical_backends_gurobi-9.0b12.tar.gz
+wget -P upstream https://files.pythonhosted.org/packages/17/f4/308d3e151d82daf2c58ca26bce157fac31f763b2b60b5173243c09291e0a/sage_numerical_backends_coin-9.0b12.tar.gz
+``` 
+
+Development here:
+- https://github.com/mkoeppe/sage-numerical-backends-cplex
+- https://github.com/mkoeppe/sage-numerical-backends-coin
+- https://github.com/mkoeppe/sage-numerical-backends-gurobi
+
+
+See also:
+- Follow-up: #28920: Move sage optimization backend framework (`sage.numerical.backends`) to separate Cython packages
+- #26511 - Meta-ticket: Use Python optimization interfaces: PuLP, Pyomo, cylp...
+- https://groups.google.com/forum/#!topic/sage-packaging/_FLDkqD2X8c 
+
+
 
 
 Comment: 1
``````




---

archive/issue_comments_420082.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-29T14:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420082",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420083.json:
```json
{
    "body": "<a id='comment:55'></a>Just updated the cplex backend. \nReady for review.",
    "created_at": "2019-12-29T14:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420083",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>Just updated the cplex backend. 
Ready for review.



---

archive/issue_comments_420084.json:
```json
{
    "body": "<a id='comment:56'></a>I suggest using a namespace package for this. See https://packaging.python.org/guides/packaging-namespace-packages/\n\n```\ndiff --git a/setup.py b/setup.py\nindex 176e75e..6dcffe2 100755\n--- a/setup.py\n+++ b/setup.py\n@@ -44,8 +44,8 @@ cbc_library_dirs = cbc_pc['library_dirs']\n cbc_include_dirs = cbc_pc['include_dirs']\n \n \n-ext_modules = [Extension('sage_numerical_backends_coin.coin_backend',\n-                         sources=[os.path.join('sage_numerical_backends_coin',\n+ext_modules = [Extension('sage.numerical.backends.coin_backend',\n+                         sources=[os.path.join('sage/numerical/backends',\n                                     'coin_backend.pyx')],\n                          libraries=cbc_libs,\n                          include_dirs=sage_include_directories() + cbc_include_dirs,\n@@ -81,7 +81,7 @@ except CompileError:\n print(\"Using compile_time_env: {}\".format(compile_time_env), file=sys.stderr)\n \n setup(\n-    name=\"sage_numerical_backends_coin\",\n+    name=\"sage.numerical.backends.coin_backend\",\n     version=readfile(\"VERSION\").strip(),\n     description=\"COIN-OR backend for Sage MixedIntegerLinearProgram\",\n     long_description = readfile(\"README.md\"), # get the long description from the README\n@@ -109,9 +109,8 @@ setup(\n                             compile_time_env=compile_time_env),\n     cmdclass = {'test': SageTest}, # adding a special setup command for tests\n     keywords=['milp', 'linear-programming', 'optimization'],\n-    packages=['sage_numerical_backends_coin'],\n-    package_dir={'sage_numerical_backends_coin': 'sage_numerical_backends_coin'},\n-    package_data={'sage_numerical_backends_coin': ['*.pxd']},\n+    packages=['sage.numerical.backends'],\n+    package_data={'sage.numerical.backends': ['*.pxd']},\n     install_requires = [# 'sage>=8',    ### On too many distributions, sage is actually not known as a pip package\n                         'sphinx'],\n     setup_requires   = ['pkgconfig'],\n```",
    "created_at": "2019-12-29T16:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420084",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:56'></a>I suggest using a namespace package for this. See https://packaging.python.org/guides/packaging-namespace-packages/

```
diff --git a/setup.py b/setup.py
index 176e75e..6dcffe2 100755
--- a/setup.py
+++ b/setup.py
@@ -44,8 +44,8 @@ cbc_library_dirs = cbc_pc['library_dirs']
 cbc_include_dirs = cbc_pc['include_dirs']
 
 
-ext_modules = [Extension('sage_numerical_backends_coin.coin_backend',
-                         sources=[os.path.join('sage_numerical_backends_coin',
+ext_modules = [Extension('sage.numerical.backends.coin_backend',
+                         sources=[os.path.join('sage/numerical/backends',
                                     'coin_backend.pyx')],
                          libraries=cbc_libs,
                          include_dirs=sage_include_directories() + cbc_include_dirs,
@@ -81,7 +81,7 @@ except CompileError:
 print("Using compile_time_env: {}".format(compile_time_env), file=sys.stderr)
 
 setup(
-    name="sage_numerical_backends_coin",
+    name="sage.numerical.backends.coin_backend",
     version=readfile("VERSION").strip(),
     description="COIN-OR backend for Sage MixedIntegerLinearProgram",
     long_description = readfile("README.md"), # get the long description from the README
@@ -109,9 +109,8 @@ setup(
                             compile_time_env=compile_time_env),
     cmdclass = {'test': SageTest}, # adding a special setup command for tests
     keywords=['milp', 'linear-programming', 'optimization'],
-    packages=['sage_numerical_backends_coin'],
-    package_dir={'sage_numerical_backends_coin': 'sage_numerical_backends_coin'},
-    package_data={'sage_numerical_backends_coin': ['*.pxd']},
+    packages=['sage.numerical.backends'],
+    package_data={'sage.numerical.backends': ['*.pxd']},
     install_requires = [# 'sage>=8',    ### On too many distributions, sage is actually not known as a pip package
                         'sphinx'],
     setup_requires   = ['pkgconfig'],
```



---

archive/issue_comments_420085.json:
```json
{
    "body": "<a id='comment:57'></a>Replying to [comment:56 isuruf]:\n> I suggest using a namespace package for this. See https://packaging.python.org/guides/packaging-namespace-packages/\n\n\nThanks a lot! I was briefly looking into this before I created the new packages, but was discouraged by various warnings on this page that seemed to imply one needs control of all packages sharing a namespace simultaneously. But I want the packages to work also with versions of sagelib that are already released.\nWhich of the three approaches mentioned on the page do you specifically recommend?",
    "created_at": "2019-12-29T16:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420085",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>Replying to [comment:56 isuruf]:
> I suggest using a namespace package for this. See https://packaging.python.org/guides/packaging-namespace-packages/


Thanks a lot! I was briefly looking into this before I created the new packages, but was discouraged by various warnings on this page that seemed to imply one needs control of all packages sharing a namespace simultaneously. But I want the packages to work also with versions of sagelib that are already released.
Which of the three approaches mentioned on the page do you specifically recommend?



---

archive/issue_comments_420086.json:
```json
{
    "body": "<a id='comment:58'></a>The diff above is for \"1. native namespace package\".\n\n> But I want the packages to work also with versions of sagelib that are already released.\n\n\nThis should work in the case of sagelib already released and if the optional extension is already installed, it will be overriden I think.",
    "created_at": "2019-12-29T16:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420086",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:58'></a>The diff above is for "1. native namespace package".

> But I want the packages to work also with versions of sagelib that are already released.


This should work in the case of sagelib already released and if the optional extension is already installed, it will be overriden I think.



---

archive/issue_comments_420087.json:
```json
{
    "body": "<a id='comment:59'></a>Replying to [comment:58 isuruf]:\n> The diff above is for \"1. native namespace package\".\n\n\nThanks. This seems to be for Python 3 only, which would conflict with the goal of my packages to support older released versions such as sage 8.1 on Ubuntu bionic. But I'll keep it in mind for the future.",
    "created_at": "2019-12-29T16:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420087",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>Replying to [comment:58 isuruf]:
> The diff above is for "1. native namespace package".


Thanks. This seems to be for Python 3 only, which would conflict with the goal of my packages to support older released versions such as sage 8.1 on Ubuntu bionic. But I'll keep it in mind for the future.



---

archive/issue_comments_420088.json:
```json
{
    "body": "<a id='comment:60'></a>Thanks for the pull request at https://github.com/mkoeppe/sage-numerical-backends-coin/pull/4 . Let's continue the discussion regarding namespace packages there.",
    "created_at": "2019-12-29T16:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420088",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>Thanks for the pull request at https://github.com/mkoeppe/sage-numerical-backends-coin/pull/4 . Let's continue the discussion regarding namespace packages there.



---

archive/issue_comments_420089.json:
```json
{
    "body": "<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-30T00:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420089",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:61'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420090.json:
```json
{
    "body": "<a id='comment:62'></a>Replying to [comment:60 mkoeppe]:\n> Thanks for the pull request at https://github.com/mkoeppe/sage-numerical-backends-coin/pull/4 . Let's continue the discussion regarding namespace packages there.\n\nI consider the idea of using namespace packages beyond the scope of the present ticket. I have created ticket #28925 (Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages) for this direction.",
    "created_at": "2019-12-30T14:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420090",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>Replying to [comment:60 mkoeppe]:
> Thanks for the pull request at https://github.com/mkoeppe/sage-numerical-backends-coin/pull/4 . Let's continue the discussion regarding namespace packages there.

I consider the idea of using namespace packages beyond the scope of the present ticket. I have created ticket #28925 (Modify `clean_stale_files` to support modularization of `sagelib` by namespace packages) for this direction.



---

archive/issue_comments_420091.json:
```json
{
    "body": "<a id='comment:64'></a>OK, coin and gurobi work, I can't test cplex, but I think it should be OK.\nIt won't make it into 9.0, so I bumped up the milestone.",
    "created_at": "2019-12-30T15:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420091",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:64'></a>OK, coin and gurobi work, I can't test cplex, but I think it should be OK.
It won't make it into 9.0, so I bumped up the milestone.



---

archive/issue_events_069996.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-30T15:56:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-69996"
}
```



---

archive/issue_events_069997.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-30T15:56:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-69997"
}
```



---

archive/issue_comments_420092.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-12-30T15:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420092",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420093.json:
```json
{
    "body": "<a id='comment:66'></a>Thank you!",
    "created_at": "2019-12-30T16:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420093",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:66'></a>Thank you!



---

archive/issue_comments_420094.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-01-05T15:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420094",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069998.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-05T15:47:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28175#event-69998"
}
```



---

archive/issue_comments_420095.json:
```json
{
    "body": "<a id='comment:68'></a>Sorry, I was late testing this. It works for me with Ubuntu 16.04 running Gurobi 8.1.1 and CPLEX 12.9.\n\nQuestion: how can I make sure that the tests involing Gurobi and cplex backends continue to work in the next dev versions of SageMath now that those files are gone from the sage library?",
    "created_at": "2020-01-05T17:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420095",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:68'></a>Sorry, I was late testing this. It works for me with Ubuntu 16.04 running Gurobi 8.1.1 and CPLEX 12.9.

Question: how can I make sure that the tests involing Gurobi and cplex backends continue to work in the next dev versions of SageMath now that those files are gone from the sage library?



---

archive/issue_comments_420096.json:
```json
{
    "body": "<a id='comment:69'></a>Replying to [comment:68 slabbe]:\n> It works for me with Ubuntu 16.04 running Gurobi 8.1.1 and CPLEX 12.9.\n\n\nThanks for testing!\n\n> Question: how can I make sure that the tests involing Gurobi and cplex backends continue to work in the next dev versions of SageMath now that those files are gone from the sage library?\n\n\nThe tests are run when you install the new packages with `sage -i -c`.",
    "created_at": "2020-01-05T17:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28175",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28175#issuecomment-420096",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:69'></a>Replying to [comment:68 slabbe]:
> It works for me with Ubuntu 16.04 running Gurobi 8.1.1 and CPLEX 12.9.


Thanks for testing!

> Question: how can I make sure that the tests involing Gurobi and cplex backends continue to work in the next dev versions of SageMath now that those files are gone from the sage library?


The tests are run when you install the new packages with `sage -i -c`.
