# Issue 28745: Add SAGE_ROOT/environment.yml for "conda env create -f".

archive/issues_028508.json:
```json
{
    "body": "These files describes the conda environment (conda package dependencies):\n\n`environment.yml` - describes conda packages that are useful for installing sage.\n\nThis would be a more idiomatic alternative to the `conda install` line that is shown at the end of `./configure`\n\nIn combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.\n\nOpen:\n- use [GitLab](GitLab) CI to actually check that sage builds with `environment.yml`\n- scripts to support keeping package versions in sync between `environment.yml`, sage-the-distribution (`build/pkgs`), and conda-forge packaging (https://github.com/conda-forge/sage-feedstock/tree/master/recipe, https://github.com/conda-forge/sagelib-feedstock/tree/master/recipe)\n\nSee also:\n- #28752 for a more ambitious conda ticket\n- #26668 Add documentation for implementing spkg-configure.m4 for SPKGs\n- #27330 Try to use as many system packages as possible\n\nCC:  @isuruf @saraedum @dimpase @embray\n\nKeywords: conda\n\nBranch/Commit: 736e0064359a37b51f2e9421d54fd655b3b295a5\n\nReviewer: Matthias Koeppe\n\nAuthor: Isuru Fernando\n\nDependencies: #30839, #30719, #30611\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28745\n\n",
    "closed_at": "2020-11-29T11:57:38Z",
    "created_at": "2019-11-16T18:07:53Z",
    "labels": [
        "component: build",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Add SAGE_ROOT/environment.yml for \"conda env create -f\".",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28745",
    "user": "https://github.com/mkoeppe"
}
```
These files describes the conda environment (conda package dependencies):

`environment.yml` - describes conda packages that are useful for installing sage.

This would be a more idiomatic alternative to the `conda install` line that is shown at the end of `./configure`

In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.

Open:
- use [GitLab](GitLab) CI to actually check that sage builds with `environment.yml`
- scripts to support keeping package versions in sync between `environment.yml`, sage-the-distribution (`build/pkgs`), and conda-forge packaging (https://github.com/conda-forge/sage-feedstock/tree/master/recipe, https://github.com/conda-forge/sagelib-feedstock/tree/master/recipe)

See also:
- #28752 for a more ambitious conda ticket
- #26668 Add documentation for implementing spkg-configure.m4 for SPKGs
- #27330 Try to use as many system packages as possible

CC:  @isuruf @saraedum @dimpase @embray

Keywords: conda

Branch/Commit: 736e0064359a37b51f2e9421d54fd655b3b295a5

Reviewer: Matthias Koeppe

Author: Isuru Fernando

Dependencies: #30839, #30719, #30611

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28745





---

archive/issue_comments_551029.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/worktree-sagelib-conda\"",
    "created_at": "2019-11-17T19:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551029",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/worktree-sagelib-conda"



---

archive/issue_comments_551030.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[cf6e48a](https://github.com/sagemath/sagetrac-mirror/commit/cf6e48a20cc28a0649eefac1998199a12644d413)|`First version of environment.yml for conda`|",
    "created_at": "2019-11-17T19:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551030",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[cf6e48a](https://github.com/sagemath/sagetrac-mirror/commit/cf6e48a20cc28a0649eefac1998199a12644d413)|`First version of environment.yml for conda`|



---

archive/issue_comments_551031.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2019-11-17T19:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551031",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_551032.json:
```json
{
    "body": "Changing commit from \"\" to \"cf6e48a20cc28a0649eefac1998199a12644d413\"",
    "created_at": "2019-11-17T19:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551032",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "cf6e48a20cc28a0649eefac1998199a12644d413"



---

archive/issue_comments_551033.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-These file describes the conda environment (conda package dependencies):\n+These files describes the conda environment (conda package dependencies):\n \n `src/environment.yml` - describes packages needed for doing sagelib development. \n \n``````\n",
    "created_at": "2019-11-17T19:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551033",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-These file describes the conda environment (conda package dependencies):
+These files describes the conda environment (conda package dependencies):
 
 `src/environment.yml` - describes packages needed for doing sagelib development. 
 
``````




---

archive/issue_comments_551034.json:
```json
{
    "body": "Changing keywords from \"\" to \"conda\".",
    "created_at": "2019-11-17T19:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551034",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "conda".



---

archive/issue_comments_551035.json:
```json
{
    "body": "<a id='comment:3'></a>\nmkoeppe: I can only see one file in the diff here on trac. Did you forget to add the other?",
    "created_at": "2019-11-17T20:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551035",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:3'></a>
mkoeppe: I can only see one file in the diff here on trac. Did you forget to add the other?



---

archive/issue_comments_551036.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis is how far I got!",
    "created_at": "2019-11-17T20:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551036",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
This is how far I got!



---

archive/issue_comments_551037.json:
```json
{
    "body": "<a id='comment:5'></a>\nAny help and discussion is welcome.",
    "created_at": "2019-11-17T20:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551037",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Any help and discussion is welcome.



---

archive/issue_comments_551038.json:
```json
{
    "body": "<a id='comment:6'></a>\nFirst of all, I think it's great to explore ways to provide an //alternative// to the SPKG system. I have been wanting to use conda for this for a long time.\n\nI have not used conda-debug a lot but I think a combination of `conda debug [sagelib-recipe]`, `conda install sage`, `conda remove sagelib --force` should essentially do the right thing here as well.\n\nA proper `environment.yml` file, as you propose, probably makes more sense though. For me the question is how we can make sure that it is kept up to date. We might want to use [GitLab](GitLab) CI to actually check that sagelib builds with that environment.yml.\n\nIn the long run, it would be great if doctests passed, see https://github.com/conda-forge/sagelib-feedstock/issues/19.",
    "created_at": "2019-11-17T21:00:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551038",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:6'></a>
First of all, I think it's great to explore ways to provide an //alternative// to the SPKG system. I have been wanting to use conda for this for a long time.

I have not used conda-debug a lot but I think a combination of `conda debug [sagelib-recipe]`, `conda install sage`, `conda remove sagelib --force` should essentially do the right thing here as well.

A proper `environment.yml` file, as you propose, probably makes more sense though. For me the question is how we can make sure that it is kept up to date. We might want to use [GitLab](GitLab) CI to actually check that sagelib builds with that environment.yml.

In the long run, it would be great if doctests passed, see https://github.com/conda-forge/sagelib-feedstock/issues/19.



---

archive/issue_comments_551039.json:
```json
{
    "body": "<a id='comment:7'></a>\nI am not sure I understand your intentions for the sage-the-distribution environment.yml. What would the workflow look like? Install that environment.yml, then force-uninstall the package that I want to work on? How would the SPKG system know which packages it needs to build now?",
    "created_at": "2019-11-17T21:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551039",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>
I am not sure I understand your intentions for the sage-the-distribution environment.yml. What would the workflow look like? Install that environment.yml, then force-uninstall the package that I want to work on? How would the SPKG system know which packages it needs to build now?



---

archive/issue_comments_551040.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [saraedum](#comment%3A7):\n> I am not sure I understand your intentions for the sage-the-distribution environment.yml. What would the workflow look like? Install that environment.yml, then force-uninstall the package that I want to work on? How would the SPKG system know which packages it needs to build now?\n\nThrough the spkg-configure mechanism that was introduced recently, sage-the-distribution decides whether to install its own version of the package; but this can be overridden using `configure` options such as `--with-system-glpk=force`. (Here \"system\", of course, from the viewpoint of sage, includes the conda packages.) Sage developers could use the conda environment to avoid compiling many packages by default, but still work on and install sage-the-distribution packages that override the packages provided by conda.",
    "created_at": "2019-11-17T21:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551040",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Replying to [saraedum](#comment%3A7):
> I am not sure I understand your intentions for the sage-the-distribution environment.yml. What would the workflow look like? Install that environment.yml, then force-uninstall the package that I want to work on? How would the SPKG system know which packages it needs to build now?

Through the spkg-configure mechanism that was introduced recently, sage-the-distribution decides whether to install its own version of the package; but this can be overridden using `configure` options such as `--with-system-glpk=force`. (Here "system", of course, from the viewpoint of sage, includes the conda packages.) Sage developers could use the conda environment to avoid compiling many packages by default, but still work on and install sage-the-distribution packages that override the packages provided by conda.



---

archive/issue_comments_551041.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [saraedum](#comment%3A6):\n> We might want to use [GitLab](GitLab) CI to actually check that sagelib builds with that environment.yml.\n\n+1",
    "created_at": "2019-11-17T21:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551041",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Replying to [saraedum](#comment%3A6):
> We might want to use [GitLab](GitLab) CI to actually check that sagelib builds with that environment.yml.

+1



---

archive/issue_comments_551042.json:
```json
{
    "body": "<a id='comment:10'></a>\nSo, to make this actually useful, we'd need the corresponding configure flags to use \"system\" for everything that is in environment.yml as well, right?",
    "created_at": "2019-11-17T21:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551042",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:10'></a>
So, to make this actually useful, we'd need the corresponding configure flags to use "system" for everything that is in environment.yml as well, right?



---

archive/issue_comments_551043.json:
```json
{
    "body": "<a id='comment:11'></a>\nBut maybe we should split this into two tickets. One to do the sagelib environment.yml, and then this one to do the more complicated sage-the-distribution environment.yml.",
    "created_at": "2019-11-17T21:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551043",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:11'></a>
But maybe we should split this into two tickets. One to do the sagelib environment.yml, and then this one to do the more complicated sage-the-distribution environment.yml.



---

archive/issue_comments_551044.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,7 @@\n These files describes the conda environment (conda package dependencies):\n \n-`src/environment.yml` - describes packages needed for doing sagelib development. \n+`environment.yml` - describes conda packages that are useful for installing sage.\n \n-`environment.yml` - describes packages for sage-the-distribution development. In addition to `src/environment.yml`, this would include packages such as `automake`.\n+In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.\n \n \n-\n``````\n",
    "created_at": "2019-11-17T21:39:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551044",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,7 @@
 These files describes the conda environment (conda package dependencies):
 
-`src/environment.yml` - describes packages needed for doing sagelib development. 
+`environment.yml` - describes conda packages that are useful for installing sage.
 
-`environment.yml` - describes packages for sage-the-distribution development. In addition to `src/environment.yml`, this would include packages such as `automake`.
+In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.
 
 
-
``````




---

archive/issue_events_089788.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "rename": {
        "from": "Add environment.yml and src/environment.yml for \"conda env create -f\".",
        "to": "Add SAGE_ROOT/environment.yml for \"conda env create -f\"."
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28745#event-89788"
}
```



---

archive/issue_comments_551045.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [saraedum](#comment%3A10):\n> So, to make this actually useful, we'd need the corresponding configure flags to use \"system\" for everything that is in environment.yml as well, right?\n\nNo, the default is already to use the \"system\" package when it is available and deemed suitable by the configure test.\nIt can be changed to using the sage distribution's package by using `configure --with-system-glpk=no`.",
    "created_at": "2019-11-17T21:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551045",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Replying to [saraedum](#comment%3A10):
> So, to make this actually useful, we'd need the corresponding configure flags to use "system" for everything that is in environment.yml as well, right?

No, the default is already to use the "system" package when it is available and deemed suitable by the configure test.
It can be changed to using the sage distribution's package by using `configure --with-system-glpk=no`.



---

archive/issue_comments_551046.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [saraedum](#comment%3A11):\n> But maybe we should split this into two tickets. One to do the sagelib environment.yml, and then this one to do the more complicated sage-the-distribution environment.yml.\n\nGood idea. I have created #28752 for that and have narrowed down the present ticket.",
    "created_at": "2019-11-17T21:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551046",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Replying to [saraedum](#comment%3A11):
> But maybe we should split this into two tickets. One to do the sagelib environment.yml, and then this one to do the more complicated sage-the-distribution environment.yml.

Good idea. I have created #28752 for that and have narrowed down the present ticket.



---

archive/issue_comments_551047.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,4 @@\n In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.\n \n \n+(See #28752 for a more ambitious conda ticket.)\n``````\n",
    "created_at": "2019-11-17T21:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551047",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,4 @@
 In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.
 
 
+(See #28752 for a more ambitious conda ticket.)
``````




---

archive/issue_comments_551048.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [mkoeppe](#comment%3A14):\n> Replying to [saraedum](#comment%3A11):\n> > But maybe we should split this into two tickets. One to do the sagelib environment.yml, and then this one to do the more complicated sage-the-distribution environment.yml.\n\n> Good idea. I have created #28752 for that and have narrowed down the present ticket.\n(Actually, the sagelib one is more complicated - see #28752!)",
    "created_at": "2019-11-17T21:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551048",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Replying to [mkoeppe](#comment%3A14):
> Replying to [saraedum](#comment%3A11):
> > But maybe we should split this into two tickets. One to do the sagelib environment.yml, and then this one to do the more complicated sage-the-distribution environment.yml.

> Good idea. I have created #28752 for that and have narrowed down the present ticket.
(Actually, the sagelib one is more complicated - see #28752!)



---

archive/issue_comments_551049.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[3e95cab](https://github.com/sagemath/sagetrac-mirror/commit/3e95cabb1cc2b40a8348a1044b7c3cd820a2e82f)|`environment.yml: Add patch, ninja`|",
    "created_at": "2019-11-18T15:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[3e95cab](https://github.com/sagemath/sagetrac-mirror/commit/3e95cabb1cc2b40a8348a1044b7c3cd820a2e82f)|`environment.yml: Add patch, ninja`|



---

archive/issue_comments_551050.json:
```json
{
    "body": "Changing commit from \"cf6e48a20cc28a0649eefac1998199a12644d413\" to \"3e95cabb1cc2b40a8348a1044b7c3cd820a2e82f\"",
    "created_at": "2019-11-18T15:01:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551050",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cf6e48a20cc28a0649eefac1998199a12644d413" to "3e95cabb1cc2b40a8348a1044b7c3cd820a2e82f"



---

archive/issue_comments_551051.json:
```json
{
    "body": "<a id='comment:18'></a>\nThis works reasonably well already (this is on macOS Mojave, with current miniconda 3). \nI had the problem that `automake` and `aclocal` installed by conda segfault, so I bootstrapped Sage using the homebrew binaries.\nThen, running `configure`, most packages that have `spkg-configure` scripts recognize the installed conda packages, with the following exceptions:\n\n```\nSAGE_SPKG_CONFIGURE_PERL_TERM_READLINE_GNU\nSAGE_SPKG_CONFIGURE_PARI_SEADATA_SMALL\nSAGE_SPKG_CONFIGURE_GF2X\nSAGE_SPKG_CONFIGURE_LIBSEMIGROUPS\nSAGE_SPKG_CONFIGURE_PATCH\nSAGE_SPKG_CONFIGURE_ISL\nSAGE_SPKG_CONFIGURE_PARI*\nSAGE_SPKG_CONFIGURE_ECLIB\nSAGE_SPKG_CONFIGURE_LCALC\n```\nThen, a parallel `make` succesfully compiled 135 packages but got stuck on `ecl-16.1.2.p5`, `openblas-0.3.6.p0`, and `tachyon-0.98.9.p7`.",
    "created_at": "2019-11-18T15:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551051",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
This works reasonably well already (this is on macOS Mojave, with current miniconda 3). 
I had the problem that `automake` and `aclocal` installed by conda segfault, so I bootstrapped Sage using the homebrew binaries.
Then, running `configure`, most packages that have `spkg-configure` scripts recognize the installed conda packages, with the following exceptions:

```
SAGE_SPKG_CONFIGURE_PERL_TERM_READLINE_GNU
SAGE_SPKG_CONFIGURE_PARI_SEADATA_SMALL
SAGE_SPKG_CONFIGURE_GF2X
SAGE_SPKG_CONFIGURE_LIBSEMIGROUPS
SAGE_SPKG_CONFIGURE_PATCH
SAGE_SPKG_CONFIGURE_ISL
SAGE_SPKG_CONFIGURE_PARI*
SAGE_SPKG_CONFIGURE_ECLIB
SAGE_SPKG_CONFIGURE_LCALC
```
Then, a parallel `make` succesfully compiled 135 packages but got stuck on `ecl-16.1.2.p5`, `openblas-0.3.6.p0`, and `tachyon-0.98.9.p7`.



---

archive/issue_comments_551052.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,8 @@\n \n In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.\n \n+Open:\n+- use [GitLab](GitLab) CI to actually check that sage builds with `environment.yml`\n+- scripts to support keeping package versions in sync between `environment.yml`, sage-the-distribution (`build/pkgs`), and conda-forge packaging (https://github.com/conda-forge/sage-feedstock/tree/master/recipe, https://github.com/conda-forge/sagelib-feedstock/tree/master/recipe)\n \n (See #28752 for a more ambitious conda ticket.)\n``````\n",
    "created_at": "2019-11-18T15:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551052",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,8 @@
 
 In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.
 
+Open:
+- use [GitLab](GitLab) CI to actually check that sage builds with `environment.yml`
+- scripts to support keeping package versions in sync between `environment.yml`, sage-the-distribution (`build/pkgs`), and conda-forge packaging (https://github.com/conda-forge/sage-feedstock/tree/master/recipe, https://github.com/conda-forge/sagelib-feedstock/tree/master/recipe)
 
 (See #28752 for a more ambitious conda ticket.)
``````




---

archive/issue_comments_551053.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,4 +8,6 @@\n - use [GitLab](GitLab) CI to actually check that sage builds with `environment.yml`\n - scripts to support keeping package versions in sync between `environment.yml`, sage-the-distribution (`build/pkgs`), and conda-forge packaging (https://github.com/conda-forge/sage-feedstock/tree/master/recipe, https://github.com/conda-forge/sagelib-feedstock/tree/master/recipe)\n \n-(See #28752 for a more ambitious conda ticket.)\n+See also:\n+- #28752 for a more ambitious conda ticket\n+- #26668 Add documentation for implementing spkg-configure.m4 for SPKGs\n``````\n",
    "created_at": "2019-11-18T15:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551053",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,4 +8,6 @@
 - use [GitLab](GitLab) CI to actually check that sage builds with `environment.yml`
 - scripts to support keeping package versions in sync between `environment.yml`, sage-the-distribution (`build/pkgs`), and conda-forge packaging (https://github.com/conda-forge/sage-feedstock/tree/master/recipe, https://github.com/conda-forge/sagelib-feedstock/tree/master/recipe)
 
-(See #28752 for a more ambitious conda ticket.)
+See also:
+- #28752 for a more ambitious conda ticket
+- #26668 Add documentation for implementing spkg-configure.m4 for SPKGs
``````




---

archive/issue_comments_551054.json:
```json
{
    "body": "<a id='comment:21'></a>\nFor pari, you need to install `pari-nftables` as well. Can you post the config.log so that we can debug why the other packages are not picked up?\n\nBtw, since this ticket focuses on spkg-configure, shouldn't the packages installed be limited to the ones with an spkg-configure?",
    "created_at": "2019-11-18T15:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551054",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:21'></a>
For pari, you need to install `pari-nftables` as well. Can you post the config.log so that we can debug why the other packages are not picked up?

Btw, since this ticket focuses on spkg-configure, shouldn't the packages installed be limited to the ones with an spkg-configure?



---

archive/issue_comments_551055.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,3 +11,4 @@\n See also:\n - #28752 for a more ambitious conda ticket\n - #26668 Add documentation for implementing spkg-configure.m4 for SPKGs\n+- #27330 Try to use as many system packages as possible\n``````\n",
    "created_at": "2019-11-18T16:15:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551055",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,3 +11,4 @@
 See also:
 - #28752 for a more ambitious conda ticket
 - #26668 Add documentation for implementing spkg-configure.m4 for SPKGs
+- #27330 Try to use as many system packages as possible
``````




---

archive/issue_comments_551056.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [isuruf](#comment%3A21):\n> since this ticket focuses on spkg-configure, shouldn't the packages installed be limited to the ones with an spkg-configure?\n\nGood point.",
    "created_at": "2019-11-18T17:32:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551056",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
Replying to [isuruf](#comment%3A21):
> since this ticket focuses on spkg-configure, shouldn't the packages installed be limited to the ones with an spkg-configure?

Good point.



---

archive/issue_comments_551057.json:
```json
{
    "body": "<a id='comment:24'></a>\nmkoeppe, I think your environment.yml missed the pins from https://github.com/conda-forge/conda-forge-pinning-feedstock/blob/master/recipe/conda_build_config.yaml. I am adding them now.",
    "created_at": "2019-11-21T21:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551057",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:24'></a>
mkoeppe, I think your environment.yml missed the pins from https://github.com/conda-forge/conda-forge-pinning-feedstock/blob/master/recipe/conda_build_config.yaml. I am adding them now.



---

archive/issue_comments_551058.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/worktree-sagelib-conda\" to \"u/saraedum/worktree-sagelib-conda\"",
    "created_at": "2019-11-21T22:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551058",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/mkoeppe/worktree-sagelib-conda" to "u/saraedum/worktree-sagelib-conda"



---

archive/issue_comments_551059.json:
```json
{
    "body": "<a id='comment:26'></a>\nmkoeppe, I update the environment yml. The only ones that don't work for me now are:\n\n* perl_term_readline_gnu\n* gp2c (from PARI)\n\nisuruf: are they packaged somewhere on conda-forge?\n\nAlso I have to rely on the system's pkgconf. Do we have pkgconf in conda-forge?\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|\n|[00745e1](https://github.com/sagemath/sagetrac-mirror/commit/00745e16215a507488438f806627448e49e7d08d)|`Merge remote-tracking branch 'origin/develop' into u/mkoeppe/worktree-sagelib-conda`|\n|[3c693d0](https://github.com/sagemath/sagetrac-mirror/commit/3c693d030e910845c20f841fb154d89975856907)|`environment.yml that mostly passes ./configure`|",
    "created_at": "2019-11-21T22:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551059",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:26'></a>
mkoeppe, I update the environment yml. The only ones that don't work for me now are:

* perl_term_readline_gnu
* gp2c (from PARI)

isuruf: are they packaged somewhere on conda-forge?

Also I have to rely on the system's pkgconf. Do we have pkgconf in conda-forge?

---
New commits:
|                                                                                                                                          |                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|
|[00745e1](https://github.com/sagemath/sagetrac-mirror/commit/00745e16215a507488438f806627448e49e7d08d)|`Merge remote-tracking branch 'origin/develop' into u/mkoeppe/worktree-sagelib-conda`|
|[3c693d0](https://github.com/sagemath/sagetrac-mirror/commit/3c693d030e910845c20f841fb154d89975856907)|`environment.yml that mostly passes ./configure`|



---

archive/issue_comments_551060.json:
```json
{
    "body": "Changing commit from \"3e95cabb1cc2b40a8348a1044b7c3cd820a2e82f\" to \"3c693d030e910845c20f841fb154d89975856907\"",
    "created_at": "2019-11-21T22:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551060",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "3e95cabb1cc2b40a8348a1044b7c3cd820a2e82f" to "3c693d030e910845c20f841fb154d89975856907"



---

archive/issue_comments_551061.json:
```json
{
    "body": "<a id='comment:27'></a>\nI'm building sage now with this environment.yml. Let's see how far I get\u2026",
    "created_at": "2019-11-21T22:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551061",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:27'></a>
I'm building sage now with this environment.yml. Let's see how far I get…



---

archive/issue_comments_551062.json:
```json
{
    "body": "<a id='comment:28'></a>\nThanks a lot, this is looking great.\n\nAs for `perl_term_readline_gnu`, as far as I understand, conda-forge packages `perl` and `perl-app-cpanminus` but not individual CPAN packages, and one is expected to install any packages using `cpanminus`.",
    "created_at": "2019-11-21T22:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551062",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
Thanks a lot, this is looking great.

As for `perl_term_readline_gnu`, as far as I understand, conda-forge packages `perl` and `perl-app-cpanminus` but not individual CPAN packages, and one is expected to install any packages using `cpanminus`.



---

archive/issue_comments_551063.json:
```json
{
    "body": "<a id='comment:29'></a>\n`perl_term_readline_gnu` and `gp2c` are not packaged. `pkgconf` is in conda-forge as `pkg-config`",
    "created_at": "2019-11-21T22:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551063",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:29'></a>
`perl_term_readline_gnu` and `gp2c` are not packaged. `pkgconf` is in conda-forge as `pkg-config`



---

archive/issue_comments_551064.json:
```json
{
    "body": "<a id='comment:30'></a>\nIf you are on Debian or Ubuntu, you need to fix #28533",
    "created_at": "2019-11-21T22:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551064",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:30'></a>
If you are on Debian or Ubuntu, you need to fix #28533



---

archive/issue_comments_551065.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [isuruf](#comment%3A29):\n`pkgconf` is in conda-forge as `pkg-config`\n\nIs this really the same thing? There's at least no pkgconf binary in pkg-config. And judging from my ArchLinux's pkgconf and conda-forge's pkg-config --help, these seem to be two different things.",
    "created_at": "2019-11-21T22:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551065",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:31'></a>
Replying to [isuruf](#comment%3A29):
`pkgconf` is in conda-forge as `pkg-config`

Is this really the same thing? There's at least no pkgconf binary in pkg-config. And judging from my ArchLinux's pkgconf and conda-forge's pkg-config --help, these seem to be two different things.



---

archive/issue_comments_551066.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [saraedum](#comment%3A27):\n> I'm building sage now with this environment.yml. Let's see how far I get\u2026\n\n\npkgconf and tachyon failed to build.",
    "created_at": "2019-11-21T22:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551066",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:32'></a>
Replying to [saraedum](#comment%3A27):
> I'm building sage now with this environment.yml. Let's see how far I get…


pkgconf and tachyon failed to build.



---

archive/issue_comments_551067.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#28533\"",
    "created_at": "2019-11-21T22:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551067",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "" to "#28533"



---

archive/issue_comments_551068.json:
```json
{
    "body": "<a id='comment:33'></a>\nSageMath sets the following for tachyon:\n\n```\n+PNGINC= -I$(SAGE_LOCAL)/include\n+PNGLIB= -L$(SAGE_LOCAL)/lib -lpng -lz\n```\n\nReporting to #27186 where the m4 script for libpng was added.",
    "created_at": "2019-11-21T23:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551068",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:33'></a>
SageMath sets the following for tachyon:

```
+PNGINC= -I$(SAGE_LOCAL)/include
+PNGLIB= -L$(SAGE_LOCAL)/lib -lpng -lz
```

Reporting to #27186 where the m4 script for libpng was added.



---

archive/issue_comments_551069.json:
```json
{
    "body": "<a id='comment:34'></a>\nTachyon's build is very confusing. It appears that they are ignoring the environment's CFLAGS.",
    "created_at": "2019-11-21T23:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551069",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:34'></a>
Tachyon's build is very confusing. It appears that they are ignoring the environment's CFLAGS.



---

archive/issue_comments_551070.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [saraedum](#comment%3A31):\n> Replying to [isuruf](#comment%3A29):\n> `pkgconf` is in conda-forge as `pkg-config`\n> \n> Is this really the same thing? There's at least no pkgconf binary in pkg-config. And judging from my ArchLinux's pkgconf and conda-forge's pkg-config --help, these seem to be two different things.\n\n\nThat's fine. They both do the same thing. https://github.com/pkgconf/pkgconf#compatibility-with-pkg-config",
    "created_at": "2019-11-21T23:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551070",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:35'></a>
Replying to [saraedum](#comment%3A31):
> Replying to [isuruf](#comment%3A29):
> `pkgconf` is in conda-forge as `pkg-config`
> 
> Is this really the same thing? There's at least no pkgconf binary in pkg-config. And judging from my ArchLinux's pkgconf and conda-forge's pkg-config --help, these seem to be two different things.


That's fine. They both do the same thing. https://github.com/pkgconf/pkgconf#compatibility-with-pkg-config



---

archive/issue_comments_551071.json:
```json
{
    "body": "Changing commit from \"3c693d030e910845c20f841fb154d89975856907\" to \"a6c2443634af755d840ebf2920d5f556a5f24f84\"",
    "created_at": "2019-11-21T23:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551071",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3c693d030e910845c20f841fb154d89975856907" to "a6c2443634af755d840ebf2920d5f556a5f24f84"



---

archive/issue_comments_551072.json:
```json
{
    "body": "<a id='comment:36'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[a6c2443](https://github.com/sagemath/sagetrac-mirror/commit/a6c2443634af755d840ebf2920d5f556a5f24f84)|`use conda-forge's pkg-config`|",
    "created_at": "2019-11-21T23:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551072",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[a6c2443](https://github.com/sagemath/sagetrac-mirror/commit/a6c2443634af755d840ebf2920d5f556a5f24f84)|`use conda-forge's pkg-config`|



---

archive/issue_comments_551073.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [mkoeppe](#comment%3A28):\n> but not individual CPAN packages\n\n\nIt's just that they haven't been package yet. If there's anybody who is interested in helping out, they can be packaged.",
    "created_at": "2019-11-22T06:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551073",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:37'></a>
Replying to [mkoeppe](#comment%3A28):
> but not individual CPAN packages


It's just that they haven't been package yet. If there's anybody who is interested in helping out, they can be packaged.



---

archive/issue_comments_551074.json:
```json
{
    "body": "<a id='comment:38'></a>\nWe can add `openblas, cliquer, r-base` to the list now.",
    "created_at": "2019-12-20T00:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551074",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:38'></a>
We can add `openblas, cliquer, r-base` to the list now.



---

archive/issue_comments_551075.json:
```json
{
    "body": "Changing branch from \"u/saraedum/worktree-sagelib-conda\" to \"u/isuruf/worktree-sagelib-conda\"",
    "created_at": "2019-12-21T19:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551075",
    "user": "https://github.com/isuruf"
}
```

Changing branch from "u/saraedum/worktree-sagelib-conda" to "u/isuruf/worktree-sagelib-conda"



---

archive/issue_comments_551076.json:
```json
{
    "body": "Changing commit from \"a6c2443634af755d840ebf2920d5f556a5f24f84\" to \"cfeb376377864c70721750a8584f237d6cf334fb\"",
    "created_at": "2019-12-21T19:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551076",
    "user": "https://github.com/isuruf"
}
```

Changing commit from "a6c2443634af755d840ebf2920d5f556a5f24f84" to "cfeb376377864c70721750a8584f237d6cf334fb"



---

archive/issue_comments_551077.json:
```json
{
    "body": "<a id='comment:39'></a>\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[cfeb376](https://github.com/sagemath/sagetrac-mirror/commit/cfeb376377864c70721750a8584f237d6cf334fb)|`Add configure deps and more packages`|",
    "created_at": "2019-12-21T19:00:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551077",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:39'></a>
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[cfeb376](https://github.com/sagemath/sagetrac-mirror/commit/cfeb376377864c70721750a8584f237d6cf334fb)|`Add configure deps and more packages`|



---

archive/issue_comments_551078.json:
```json
{
    "body": "Changing commit from \"cfeb376377864c70721750a8584f237d6cf334fb\" to \"256e1f567629a3ab9eb22745def47ba2c8d75bf0\"",
    "created_at": "2019-12-21T19:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551078",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cfeb376377864c70721750a8584f237d6cf334fb" to "256e1f567629a3ab9eb22745def47ba2c8d75bf0"



---

archive/issue_comments_551079.json:
```json
{
    "body": "<a id='comment:40'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[256e1f5](https://github.com/sagemath/sagetrac-mirror/commit/256e1f567629a3ab9eb22745def47ba2c8d75bf0)|`Need blas-devel for cblas.so symlinks`|",
    "created_at": "2019-12-21T19:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551079",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[256e1f5](https://github.com/sagemath/sagetrac-mirror/commit/256e1f567629a3ab9eb22745def47ba2c8d75bf0)|`Need blas-devel for cblas.so symlinks`|



---

archive/issue_comments_551080.json:
```json
{
    "body": "<a id='comment:41'></a>\nThe latter doesn't work for me:\n\n```\n$ conda env create -n sage -f environment.yml\nCollecting package metadata (repodata.json): done\nSolving environment: failed\n\nResolvePackageNotFound: \n  - blas-devel[build=*openblas]\n```",
    "created_at": "2019-12-22T03:04:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551080",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>
The latter doesn't work for me:

```
$ conda env create -n sage -f environment.yml
Collecting package metadata (repodata.json): done
Solving environment: failed

ResolvePackageNotFound: 
  - blas-devel[build=*openblas]
```



---

archive/issue_events_089789.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-12-25T16:23:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28745#event-89789"
}
```



---

archive/issue_comments_551081.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [dimpase](#comment%3A41):\n> The latter doesn't work for me:\n> \n> ```\n> $ conda env create -n sage -f environment.yml\n> Collecting package metadata (repodata.json): done\n> Solving environment: failed\n> \n> ResolvePackageNotFound: \n>   - blas-devel[build=*openblas]\n> ```\n\nNeither for me.",
    "created_at": "2020-01-14T18:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551081",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>
Replying to [dimpase](#comment%3A41):
> The latter doesn't work for me:
> 
> ```
> $ conda env create -n sage -f environment.yml
> Collecting package metadata (repodata.json): done
> Solving environment: failed
> 
> ResolvePackageNotFound: 
>   - blas-devel[build=*openblas]
> ```

Neither for me.



---

archive/issue_comments_551082.json:
```json
{
    "body": "<a id='comment:44'></a>\nAfter removing this line, I get the following:\n\n```\n[python3-3.7.3.p1] /opt/conda/envs/sage/bin/x86_64-conda_cos6-linux-gnu-cc -pthread -shared -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/envs/sage/lib -Wl,-rpath-link,/opt/conda/envs/sage/lib -L/opt/conda/envs/sage/lib -L. -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/envs/sage/lib -Wl,-rpath-link,/opt/conda/envs/sage/lib -L/opt/conda/envs/sage/lib -L. -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/envs/sage/lib -Wl,-rpath-link,/opt/conda/envs/sage/lib -L/opt/conda/envs/sage/lib -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /opt/conda/envs/sage/include build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/_ctypes.o build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/callbacks.o build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/callproc.o build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/stgdict.o build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/cfield.o -L. -L/sage/local/lib -L/opt/conda/envs/sage/lib -L/usr/local/lib -lffi -ldl -lpython3.7m -o build/lib.linux-x86_64-3.7/_ctypes.cpython-37m-x86_64-linux-gnu.so\n[python3-3.7.3.p1] *** WARNING: renaming \"_crypt\" since importing it failed: build/lib.linux-x86_64-3.7/_crypt.cpython-37m-x86_64-linux-gnu.so: undefined symbol: crypt_r\n...\n[python3-3.7.3.p1] hashlib module imported OK\n[python3-3.7.3.p1] Traceback (most recent call last):\n[python3-3.7.3.p1]   File \"<string>\", line 1, in <module>\n[python3-3.7.3.p1]   File \"/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Lib/crypt.py\", line 3, in <module>\n[python3-3.7.3.p1]     import _crypt\n[python3-3.7.3.p1] ModuleNotFoundError: No module named '_crypt'\n[python3-3.7.3.p1] crypt module failed to import\n[python3-3.7.3.p1] readline module imported OK\n[python3-3.7.3.p1] socket module imported OK\n[python3-3.7.3.p1] Error: One or more modules failed to import.\n```\nThis is on a Debian docker image based on continuumio/miniconda3:latest - see attached",
    "created_at": "2020-01-14T19:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551082",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
After removing this line, I get the following:

```
[python3-3.7.3.p1] /opt/conda/envs/sage/bin/x86_64-conda_cos6-linux-gnu-cc -pthread -shared -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/envs/sage/lib -Wl,-rpath-link,/opt/conda/envs/sage/lib -L/opt/conda/envs/sage/lib -L. -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/envs/sage/lib -Wl,-rpath-link,/opt/conda/envs/sage/lib -L/opt/conda/envs/sage/lib -L. -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/envs/sage/lib -Wl,-rpath-link,/opt/conda/envs/sage/lib -L/opt/conda/envs/sage/lib -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /opt/conda/envs/sage/include build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/_ctypes.o build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/callbacks.o build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/callproc.o build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/stgdict.o build/temp.linux-x86_64-3.7/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Modules/_ctypes/cfield.o -L. -L/sage/local/lib -L/opt/conda/envs/sage/lib -L/usr/local/lib -lffi -ldl -lpython3.7m -o build/lib.linux-x86_64-3.7/_ctypes.cpython-37m-x86_64-linux-gnu.so
[python3-3.7.3.p1] *** WARNING: renaming "_crypt" since importing it failed: build/lib.linux-x86_64-3.7/_crypt.cpython-37m-x86_64-linux-gnu.so: undefined symbol: crypt_r
...
[python3-3.7.3.p1] hashlib module imported OK
[python3-3.7.3.p1] Traceback (most recent call last):
[python3-3.7.3.p1]   File "<string>", line 1, in <module>
[python3-3.7.3.p1]   File "/sage/local/var/tmp/sage/build/python3-3.7.3.p1/src/Lib/crypt.py", line 3, in <module>
[python3-3.7.3.p1]     import _crypt
[python3-3.7.3.p1] ModuleNotFoundError: No module named '_crypt'
[python3-3.7.3.p1] crypt module failed to import
[python3-3.7.3.p1] readline module imported OK
[python3-3.7.3.p1] socket module imported OK
[python3-3.7.3.p1] Error: One or more modules failed to import.
```
This is on a Debian docker image based on continuumio/miniconda3:latest - see attached



---

archive/issue_comments_551083.json:
```json
{
    "body": "Attachment [Dockerfile-build-within-conda](tarball://root/attachments/some-uuid/ticket28745/Dockerfile-build-within-conda) by @mkoeppe created at 2020-01-14 19:44:52",
    "created_at": "2020-01-14T19:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551083",
    "user": "https://github.com/mkoeppe"
}
```

Attachment [Dockerfile-build-within-conda](tarball://root/attachments/some-uuid/ticket28745/Dockerfile-build-within-conda) by @mkoeppe created at 2020-01-14 19:44:52



---

archive/issue_comments_551084.json:
```json
{
    "body": "<a id='comment:45'></a>\nI have created #29012 for this defect.",
    "created_at": "2020-01-14T20:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551084",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
I have created #29012 for this defect.



---

archive/issue_comments_551085.json:
```json
{
    "body": "Changing branch from \"u/isuruf/worktree-sagelib-conda\" to \"u/mkoeppe/worktree-sagelib-conda\"",
    "created_at": "2020-01-20T02:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551085",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/isuruf/worktree-sagelib-conda" to "u/mkoeppe/worktree-sagelib-conda"



---

archive/issue_comments_551086.json:
```json
{
    "body": "Changing commit from \"256e1f567629a3ab9eb22745def47ba2c8d75bf0\" to \"a511c836012a4ba4e4870331b8cc426e47003b18\"",
    "created_at": "2020-01-22T17:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551086",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "256e1f567629a3ab9eb22745def47ba2c8d75bf0" to "a511c836012a4ba4e4870331b8cc426e47003b18"



---

archive/issue_comments_551087.json:
```json
{
    "body": "<a id='comment:47'></a>\nWould it be a good idea to generate this file from information to be put in `build/pkgs/SPKG/conda-environment.txt` as in #29053? \n\n---\nNew commits:\n|                                                                                                                                          |                                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[c01f4f8](https://github.com/sagemath/sagetrac-mirror/commit/c01f4f8e532d871e110aa3acdc5899e3d9794a0b)|`Merge tag '9.1.beta0' into t/28745/worktree-sagelib-conda`|\n|[a511c83](https://github.com/sagemath/sagetrac-mirror/commit/a511c836012a4ba4e4870331b8cc426e47003b18)|`add openssl, remove blas-devel`|",
    "created_at": "2020-01-22T17:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551087",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
Would it be a good idea to generate this file from information to be put in `build/pkgs/SPKG/conda-environment.txt` as in #29053? 

---
New commits:
|                                                                                                                                          |                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[c01f4f8](https://github.com/sagemath/sagetrac-mirror/commit/c01f4f8e532d871e110aa3acdc5899e3d9794a0b)|`Merge tag '9.1.beta0' into t/28745/worktree-sagelib-conda`|
|[a511c83](https://github.com/sagemath/sagetrac-mirror/commit/a511c836012a4ba4e4870331b8cc426e47003b18)|`add openssl, remove blas-devel`|



---

archive/issue_comments_551088.json:
```json
{
    "body": "Changing dependencies from \"#28533\" to \"#29053\"",
    "created_at": "2020-01-27T16:36:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551088",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#28533" to "#29053"



---

archive/issue_comments_551089.json:
```json
{
    "body": "<a id='comment:49'></a>\nIf one works around the python build failures of #29012 by using system python3 (#27824), several other errors show up:\n\nTestsuite of libatomic_ops:\n\n```\n  [libatomic_ops-7.6.2]   /bin/bash ../libtool  --tag=CC   --mode=link /opt/conda/bin/x86_64-conda_cos6-linux-gnu-cc  -Wall -Wextra -Wpedantic -Wno-long-long -O2 -g -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /opt/conda/include   -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib -o test_malloc test_malloc.o -lpthread ../src/libatomic_ops_gpl.la ../src/libatomic_ops.la \n  [libatomic_ops-7.6.2]   libtool: link: /opt/conda/bin/x86_64-conda_cos6-linux-gnu-cc -Wall -Wextra -Wpedantic -Wno-long-long -O2 -g -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /opt/conda/include -Wl,-rpath -Wl,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/opt/conda/lib -Wl,-rpath-link -Wl,/opt/conda/lib -o test_malloc test_malloc.o  -L/sage/local/lib -L/opt/conda/lib -lpthread ../src/.libs/libatomic_ops_gpl.a /sage/local/var/tmp/sage/build/libatomic_ops-7.6.2/src/src/.libs/libatomic_ops.a ../src/.libs/libatomic_ops.a\n  [libatomic_ops-7.6.2]   /opt/conda/bin/../lib/gcc/x86_64-conda_cos6-linux-gnu/7.3.0/../../../../x86_64-conda_cos6-linux-gnu/bin/ld: ../src/.libs/libatomic_ops_gpl.a(atomic_ops_stack.o): in function `AO_double_compare_and_swap_release':\n  [libatomic_ops-7.6.2]   /sage/local/var/tmp/sage/build/libatomic_ops-7.6.2/src/src/atomic_ops/sysdeps/gcc/generic.h:219: undefined reference to `__atomic_compare_exchange_16'\n  [libatomic_ops-7.6.2]   collect2: error: ld returned 1 exit status\n  [libatomic_ops-7.6.2]   make[7]: *** [Makefile:634: test_malloc] Error 1\n```",
    "created_at": "2020-03-22T17:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551089",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>
If one works around the python build failures of #29012 by using system python3 (#27824), several other errors show up:

Testsuite of libatomic_ops:

```
  [libatomic_ops-7.6.2]   /bin/bash ../libtool  --tag=CC   --mode=link /opt/conda/bin/x86_64-conda_cos6-linux-gnu-cc  -Wall -Wextra -Wpedantic -Wno-long-long -O2 -g -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /opt/conda/include   -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z,relro -Wl,-z,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath,/opt/conda/lib -Wl,-rpath-link,/opt/conda/lib -L/opt/conda/lib -o test_malloc test_malloc.o -lpthread ../src/libatomic_ops_gpl.la ../src/libatomic_ops.la 
  [libatomic_ops-7.6.2]   libtool: link: /opt/conda/bin/x86_64-conda_cos6-linux-gnu-cc -Wall -Wextra -Wpedantic -Wno-long-long -O2 -g -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /opt/conda/include -Wl,-rpath -Wl,/sage/local/lib -Wl,-O2 -Wl,--sort-common -Wl,--as-needed -Wl,-z -Wl,relro -Wl,-z -Wl,now -Wl,--disable-new-dtags -Wl,--gc-sections -Wl,-rpath -Wl,/opt/conda/lib -Wl,-rpath-link -Wl,/opt/conda/lib -o test_malloc test_malloc.o  -L/sage/local/lib -L/opt/conda/lib -lpthread ../src/.libs/libatomic_ops_gpl.a /sage/local/var/tmp/sage/build/libatomic_ops-7.6.2/src/src/.libs/libatomic_ops.a ../src/.libs/libatomic_ops.a
  [libatomic_ops-7.6.2]   /opt/conda/bin/../lib/gcc/x86_64-conda_cos6-linux-gnu/7.3.0/../../../../x86_64-conda_cos6-linux-gnu/bin/ld: ../src/.libs/libatomic_ops_gpl.a(atomic_ops_stack.o): in function `AO_double_compare_and_swap_release':
  [libatomic_ops-7.6.2]   /sage/local/var/tmp/sage/build/libatomic_ops-7.6.2/src/src/atomic_ops/sysdeps/gcc/generic.h:219: undefined reference to `__atomic_compare_exchange_16'
  [libatomic_ops-7.6.2]   collect2: error: ld returned 1 exit status
  [libatomic_ops-7.6.2]   make[7]: *** [Makefile:634: test_malloc] Error 1
```



---

archive/issue_comments_551090.json:
```json
{
    "body": "<a id='comment:50'></a>\n... as well as giac and fflas_ffpack.\n\nTo reproduce: \n\n```\nEXTRA_DOCKER_BUILD_ARGS=\"--build-arg TARGETS=\\\"build ptest\\\" --build-arg USE_MAKEFLAGS=\\\"-k V=0\\\"\" tox -e docker-conda-forge-standard\n```\non the branch of #27824.",
    "created_at": "2020-03-22T17:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551090",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>
... as well as giac and fflas_ffpack.

To reproduce: 

```
EXTRA_DOCKER_BUILD_ARGS="--build-arg TARGETS=\"build ptest\" --build-arg USE_MAKEFLAGS=\"-k V=0\"" tox -e docker-conda-forge-standard
```
on the branch of #27824.



---

archive/issue_comments_551091.json:
```json
{
    "body": "<a id='comment:51'></a>\n(see also #29327)",
    "created_at": "2020-03-22T18:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551091",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>
(see also #29327)



---

archive/issue_comments_551092.json:
```json
{
    "body": "Changing commit from \"a511c836012a4ba4e4870331b8cc426e47003b18\" to \"ba3458b5e93dfc9b6771bd2f400d5db34bb40f98\"",
    "created_at": "2020-03-22T18:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551092",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a511c836012a4ba4e4870331b8cc426e47003b18" to "ba3458b5e93dfc9b6771bd2f400d5db34bb40f98"



---

archive/issue_comments_551093.json:
```json
{
    "body": "<a id='comment:52'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[4decf97](https://github.com/sagemath/sagetrac-mirror/commit/4decf9746adffa7589ce4f510c6899c51c5bd540)|`First version of environment.yml for conda`|\n|[ca0cb5f](https://github.com/sagemath/sagetrac-mirror/commit/ca0cb5f1aa5161f636876c40465a5f7452da4e31)|`environment.yml: Add patch, ninja`|\n|[6b42c51](https://github.com/sagemath/sagetrac-mirror/commit/6b42c51e3acc9c68d0373ce531a59bd50bfec2d9)|`environment.yml that mostly passes ./configure`|\n|[d762508](https://github.com/sagemath/sagetrac-mirror/commit/d762508081f3653e652c341ca04c187ae22fb3a1)|`use conda-forge's pkg-config`|\n|[13123dd](https://github.com/sagemath/sagetrac-mirror/commit/13123dd2f5612390b1bb775c0fab1c1322045803)|`Add configure deps and more packages`|\n|[68219bb](https://github.com/sagemath/sagetrac-mirror/commit/68219bba0e92c762ecea0c282c3e129a20315385)|`Need blas-devel for cblas.so symlinks`|\n|[5192b93](https://github.com/sagemath/sagetrac-mirror/commit/5192b93ef093ab3cedd6ea8a78d094b2199a9779)|`add openssl, remove blas-devel`|\n|[ba3458b](https://github.com/sagemath/sagetrac-mirror/commit/ba3458b5e93dfc9b6771bd2f400d5db34bb40f98)|`build/pkgs/conda.txt: Use python<3.8`|",
    "created_at": "2020-03-22T18:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551093",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[4decf97](https://github.com/sagemath/sagetrac-mirror/commit/4decf9746adffa7589ce4f510c6899c51c5bd540)|`First version of environment.yml for conda`|
|[ca0cb5f](https://github.com/sagemath/sagetrac-mirror/commit/ca0cb5f1aa5161f636876c40465a5f7452da4e31)|`environment.yml: Add patch, ninja`|
|[6b42c51](https://github.com/sagemath/sagetrac-mirror/commit/6b42c51e3acc9c68d0373ce531a59bd50bfec2d9)|`environment.yml that mostly passes ./configure`|
|[d762508](https://github.com/sagemath/sagetrac-mirror/commit/d762508081f3653e652c341ca04c187ae22fb3a1)|`use conda-forge's pkg-config`|
|[13123dd](https://github.com/sagemath/sagetrac-mirror/commit/13123dd2f5612390b1bb775c0fab1c1322045803)|`Add configure deps and more packages`|
|[68219bb](https://github.com/sagemath/sagetrac-mirror/commit/68219bba0e92c762ecea0c282c3e129a20315385)|`Need blas-devel for cblas.so symlinks`|
|[5192b93](https://github.com/sagemath/sagetrac-mirror/commit/5192b93ef093ab3cedd6ea8a78d094b2199a9779)|`add openssl, remove blas-devel`|
|[ba3458b](https://github.com/sagemath/sagetrac-mirror/commit/ba3458b5e93dfc9b6771bd2f400d5db34bb40f98)|`build/pkgs/conda.txt: Use python<3.8`|



---

archive/issue_comments_551094.json:
```json
{
    "body": "Changing dependencies from \"#29053\" to \"\"",
    "created_at": "2020-03-22T18:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551094",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29053" to ""



---

archive/issue_comments_551095.json:
```json
{
    "body": "<a id='comment:54'></a>\nShall we try to get this one here to work for 9.1?",
    "created_at": "2020-04-18T21:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551095",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>
Shall we try to get this one here to work for 9.1?



---

archive/issue_comments_551096.json:
```json
{
    "body": "<a id='comment:55'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[12a00ba](https://github.com/sagemath/sagetrac-mirror/commit/12a00ba0f8cde1e40b28d62189a5e1fc5fa40d76)|`Merge tag '9.1.rc2' into t/28745/worktree-sagelib-conda`|",
    "created_at": "2020-04-26T19:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[12a00ba](https://github.com/sagemath/sagetrac-mirror/commit/12a00ba0f8cde1e40b28d62189a5e1fc5fa40d76)|`Merge tag '9.1.rc2' into t/28745/worktree-sagelib-conda`|



---

archive/issue_comments_551097.json:
```json
{
    "body": "Changing commit from \"ba3458b5e93dfc9b6771bd2f400d5db34bb40f98\" to \"12a00ba0f8cde1e40b28d62189a5e1fc5fa40d76\"",
    "created_at": "2020-04-26T19:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ba3458b5e93dfc9b6771bd2f400d5db34bb40f98" to "12a00ba0f8cde1e40b28d62189a5e1fc5fa40d76"



---

archive/issue_comments_551098.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n These files describes the conda environment (conda package dependencies):\n \n `environment.yml` - describes conda packages that are useful for installing sage.\n+\n+This would be a more idiomatic alternative to the `conda install` line that is shown at the end of `./configure`\n \n In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.\n \n``````\n",
    "created_at": "2020-04-29T19:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551098",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 These files describes the conda environment (conda package dependencies):
 
 `environment.yml` - describes conda packages that are useful for installing sage.
+
+This would be a more idiomatic alternative to the `conda install` line that is shown at the end of `./configure`
 
 In combination with the `spkg-configure` mechanism, this will speed up installation of Sage, in particular for users stuck on outdated OS distributions.
 
``````




---

archive/issue_comments_551099.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29327\"",
    "created_at": "2020-04-29T19:19:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551099",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29327"



---

archive/issue_events_089790.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T18:16:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28745#event-89790"
}
```



---

archive/issue_events_089791.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T18:16:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28745#event-89791"
}
```



---

archive/issue_comments_551100.json:
```json
{
    "body": "<a id='comment:57'></a>\nMoving some tickets to 9.2. This is not a promise that I will be working on them.",
    "created_at": "2020-05-01T18:16:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551100",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>
Moving some tickets to 9.2. This is not a promise that I will be working on them.



---

archive/issue_events_089792.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28745#event-89792"
}
```



---

archive/issue_events_089793.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28745#event-89793"
}
```



---

archive/issue_comments_551101.json:
```json
{
    "body": "Changing commit from \"12a00ba0f8cde1e40b28d62189a5e1fc5fa40d76\" to \"fad0d0479e327acd0fdd5f88fb600873fb90b416\"",
    "created_at": "2020-10-30T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551101",
    "user": "https://github.com/isuruf"
}
```

Changing commit from "12a00ba0f8cde1e40b28d62189a5e1fc5fa40d76" to "fad0d0479e327acd0fdd5f88fb600873fb90b416"



---

archive/issue_comments_551102.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-10-30T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551102",
    "user": "https://github.com/isuruf"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_551103.json:
```json
{
    "body": "Changing author from \"Matthias Koeppe\" to \"Matthias Koeppe, Isuru Fernando\"",
    "created_at": "2020-10-30T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551103",
    "user": "https://github.com/isuruf"
}
```

Changing author from "Matthias Koeppe" to "Matthias Koeppe, Isuru Fernando"



---

archive/issue_comments_551104.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/worktree-sagelib-conda\" to \"u/isuruf/environment_yaml\"",
    "created_at": "2020-10-30T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551104",
    "user": "https://github.com/isuruf"
}
```

Changing branch from "u/mkoeppe/worktree-sagelib-conda" to "u/isuruf/environment_yaml"



---

archive/issue_comments_551105.json:
```json
{
    "body": "<a id='comment:60'></a>\nI added `SAGE_ROOT/environment.yml` for spkg-configure ones and `SAGE_ROOT/src/environment.yml` for all standard packages. These files are auto generated. Not sure if we should check them into the repo for ease of use.",
    "created_at": "2020-10-30T22:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551105",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:60'></a>
I added `SAGE_ROOT/environment.yml` for spkg-configure ones and `SAGE_ROOT/src/environment.yml` for all standard packages. These files are auto generated. Not sure if we should check them into the repo for ease of use.



---

archive/issue_comments_551106.json:
```json
{
    "body": "Changing dependencies from \"#29327\" to \"#30839\"",
    "created_at": "2020-10-30T22:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551106",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29327" to "#30839"



---

archive/issue_comments_551107.json:
```json
{
    "body": "<a id='comment:62'></a>\nI don't think the generated files should be checked in - instead they should be added to the list of files that are put into the configure tarball.",
    "created_at": "2020-10-30T22:33:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551107",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>
I don't think the generated files should be checked in - instead they should be added to the list of files that are put into the configure tarball.



---

archive/issue_comments_551108.json:
```json
{
    "body": "<a id='comment:63'></a>\nSee for example commit 885092e77b06b6d616297edd8ac1a37db9113cc6, where files were added",
    "created_at": "2020-10-30T22:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551108",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>
See for example commit 885092e77b06b6d616297edd8ac1a37db9113cc6, where files were added



---

archive/issue_comments_551109.json:
```json
{
    "body": "Changing commit from \"fad0d0479e327acd0fdd5f88fb600873fb90b416\" to \"61b8fcad5917a00dee6580df3e17d5449bd9a709\"",
    "created_at": "2020-10-30T22:40:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551109",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fad0d0479e327acd0fdd5f88fb600873fb90b416" to "61b8fcad5917a00dee6580df3e17d5449bd9a709"



---

archive/issue_comments_551110.json:
```json
{
    "body": "<a id='comment:64'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[61b8fca](https://github.com/sagemath/sagetrac-mirror/commit/61b8fcad5917a00dee6580df3e17d5449bd9a709)|`add environment files to source tarball`|",
    "created_at": "2020-10-30T22:40:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551110",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[61b8fca](https://github.com/sagemath/sagetrac-mirror/commit/61b8fcad5917a00dee6580df3e17d5449bd9a709)|`add environment files to source tarball`|



---

archive/issue_comments_551111.json:
```json
{
    "body": "<a id='comment:65'></a>\nAlso, if you could untabify `src/doc/bootstrap`...",
    "created_at": "2020-10-30T22:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551111",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>
Also, if you could untabify `src/doc/bootstrap`...



---

archive/issue_comments_551112.json:
```json
{
    "body": "<a id='comment:66'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[c252e72](https://github.com/sagemath/sagetrac-mirror/commit/c252e72f211d68f0f1270d2f61ab07c69237be5e)|`replace tabs with 4 spaces`|",
    "created_at": "2020-10-30T22:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551112",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[c252e72](https://github.com/sagemath/sagetrac-mirror/commit/c252e72f211d68f0f1270d2f61ab07c69237be5e)|`replace tabs with 4 spaces`|



---

archive/issue_comments_551113.json:
```json
{
    "body": "Changing commit from \"61b8fcad5917a00dee6580df3e17d5449bd9a709\" to \"c252e72f211d68f0f1270d2f61ab07c69237be5e\"",
    "created_at": "2020-10-30T22:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551113",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "61b8fcad5917a00dee6580df3e17d5449bd9a709" to "c252e72f211d68f0f1270d2f61ab07c69237be5e"



---

archive/issue_comments_551114.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-10-30T23:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551114",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_551115.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-30T23:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551115",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_551116.json:
```json
{
    "body": "Changing author from \"Matthias Koeppe, Isuru Fernando\" to \"Isuru Fernando\"",
    "created_at": "2020-10-30T23:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551116",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Matthias Koeppe, Isuru Fernando" to "Isuru Fernando"



---

archive/issue_comments_551117.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-11-01T10:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551117",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_551118.json:
```json
{
    "body": "<a id='comment:68'></a>\nMerge conflict",
    "created_at": "2020-11-01T10:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551118",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:68'></a>
Merge conflict



---

archive/issue_comments_551119.json:
```json
{
    "body": "Changing branch from \"u/isuruf/environment_yaml\" to \"u/mkoeppe/environment_yaml\"",
    "created_at": "2020-11-01T16:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551119",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/isuruf/environment_yaml" to "u/mkoeppe/environment_yaml"



---

archive/issue_comments_551120.json:
```json
{
    "body": "<a id='comment:70'></a>\nNew commits:\n|                                                                                                                                          |                                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[025064e](https://github.com/sagemath/sagetrac-mirror/commit/025064e34dafd7e476aae0d067940cb5123cc886)|`Merge tag '9.3.beta0' into t/28745/environment_yaml`|",
    "created_at": "2020-11-01T16:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551120",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>
New commits:
|                                                                                                                                          |                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[025064e](https://github.com/sagemath/sagetrac-mirror/commit/025064e34dafd7e476aae0d067940cb5123cc886)|`Merge tag '9.3.beta0' into t/28745/environment_yaml`|



---

archive/issue_comments_551121.json:
```json
{
    "body": "Changing commit from \"c252e72f211d68f0f1270d2f61ab07c69237be5e\" to \"025064e34dafd7e476aae0d067940cb5123cc886\"",
    "created_at": "2020-11-01T16:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551121",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "c252e72f211d68f0f1270d2f61ab07c69237be5e" to "025064e34dafd7e476aae0d067940cb5123cc886"



---

archive/issue_comments_551122.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-11-01T16:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551122",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_551123.json:
```json
{
    "body": "Changing commit from \"025064e34dafd7e476aae0d067940cb5123cc886\" to \"7def5b9a370feeffd90af8a9d92d3f2589069d4b\"",
    "created_at": "2020-11-10T17:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551123",
    "user": "https://github.com/isuruf"
}
```

Changing commit from "025064e34dafd7e476aae0d067940cb5123cc886" to "7def5b9a370feeffd90af8a9d92d3f2589069d4b"



---

archive/issue_comments_551124.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/environment_yaml\" to \"u/isuruf/environment_yaml\"",
    "created_at": "2020-11-10T17:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551124",
    "user": "https://github.com/isuruf"
}
```

Changing branch from "u/mkoeppe/environment_yaml" to "u/isuruf/environment_yaml"



---

archive/issue_comments_551125.json:
```json
{
    "body": "<a id='comment:71'></a>\nNew commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[7def5b9](https://github.com/sagemath/sagetrac-mirror/commit/7def5b9a370feeffd90af8a9d92d3f2589069d4b)|`Merge remote-tracking branch 'trac/develop' into u/mkoeppe/environment_yaml`|",
    "created_at": "2020-11-10T17:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551125",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:71'></a>
New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[7def5b9](https://github.com/sagemath/sagetrac-mirror/commit/7def5b9a370feeffd90af8a9d92d3f2589069d4b)|`Merge remote-tracking branch 'trac/develop' into u/mkoeppe/environment_yaml`|



---

archive/issue_comments_551126.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-11-19T23:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551126",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_551127.json:
```json
{
    "body": "<a id='comment:72'></a>\nMerge conflict",
    "created_at": "2020-11-19T23:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551127",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:72'></a>
Merge conflict



---

archive/issue_comments_551128.json:
```json
{
    "body": "<a id='comment:73'></a>\nWhich branch should I fix the conflict against? `develop` doesn't seem to have a conflict with this branch",
    "created_at": "2020-11-19T23:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551128",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:73'></a>
Which branch should I fix the conflict against? `develop` doesn't seem to have a conflict with this branch



---

archive/issue_comments_551129.json:
```json
{
    "body": "<a id='comment:74'></a>\nReplying to [isuruf](#comment%3A73):\n> Which branch should I fix the conflict against? `develop` doesn't seem to have a conflict with this branch\n\n\nit's unfortunate feauture of our workflow that this is a bit of a moving target.\nhttps://github.com/vbraun/sage/tree/develop\n\ndo not try to merge/rebase with it, as it's likely to be in vain.",
    "created_at": "2020-11-20T09:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551129",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:74'></a>
Replying to [isuruf](#comment%3A73):
> Which branch should I fix the conflict against? `develop` doesn't seem to have a conflict with this branch


it's unfortunate feauture of our workflow that this is a bit of a moving target.
https://github.com/vbraun/sage/tree/develop

do not try to merge/rebase with it, as it's likely to be in vain.



---

archive/issue_comments_551130.json:
```json
{
    "body": "Changing dependencies from \"#30839\" to \"#30839, #30719\"",
    "created_at": "2020-11-23T02:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551130",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30839" to "#30839, #30719"



---

archive/issue_comments_551131.json:
```json
{
    "body": "Changing branch from \"u/isuruf/environment_yaml\" to \"u/mkoeppe/environment_yaml\"",
    "created_at": "2020-11-23T02:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551131",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/isuruf/environment_yaml" to "u/mkoeppe/environment_yaml"



---

archive/issue_comments_551132.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-11-23T02:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551132",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_551133.json:
```json
{
    "body": "Changing commit from \"7def5b9a370feeffd90af8a9d92d3f2589069d4b\" to \"e53623d9503da131bd8ef4cdacfd1f5f43da88d2\"",
    "created_at": "2020-11-23T02:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551133",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "7def5b9a370feeffd90af8a9d92d3f2589069d4b" to "e53623d9503da131bd8ef4cdacfd1f5f43da88d2"



---

archive/issue_comments_551134.json:
```json
{
    "body": "<a id='comment:77'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[e61929d](https://github.com/sagemath/sagetrac-mirror/commit/e61929d7c568167e2e5b77d9f3b7e4ae9eb80556)|`build/pkgs/sphinx/install-requires.txt: Update from gentoo`|\n|[8fe0e35](https://github.com/sagemath/sagetrac-mirror/commit/8fe0e35aae5e3064bf77a2a0192487fb50f11826)|`build/pkgs/python_openid: Unused, remove`|\n|[ba1d913](https://github.com/sagemath/sagetrac-mirror/commit/ba1d913e2e340c8ec5c533ecb26d2f3d835b4eb9)|`build/pkgs/itsdangerous: Unused, remove`|\n|[bb6c4ae](https://github.com/sagemath/sagetrac-mirror/commit/bb6c4ae829c6c6f55d305e64833a5b85d50fc205)|`build/pkgs/tox/install-requires.txt: New`|\n|[d507501](https://github.com/sagemath/sagetrac-mirror/commit/d50750123c5368874f99a05626f33fade165b246)|`build/pkgs/networkx/install-requires.txt: Update from gentoo`|\n|[c3a9352](https://github.com/sagemath/sagetrac-mirror/commit/c3a9352acb3f87d8afdb5d9b0d61611cc30fefaa)|`build/pkgs/pathpy/install-requires.txt: Package removed in #30611, remove`|\n|[ebd4610](https://github.com/sagemath/sagetrac-mirror/commit/ebd4610519f9794aef64e8f283adcc827addf6f5)|`build/pkgs/pynac/install-requires.txt: New`|\n|[6ec00dd](https://github.com/sagemath/sagetrac-mirror/commit/6ec00dd002b41c4fe9b91233f2cebe37c87144d9)|`build/pkgs/{numpy,pillow}/install-requires.txt: New`|\n|[77cc105](https://github.com/sagemath/sagetrac-mirror/commit/77cc105954bfbb8f580887da79b5b94f7e2de14b)|`Merge commit '6ec00dd002b41c4fe9b91233f2cebe37c87144d9' of git://trac.sagemath.org/sage into t/28745/environment_yaml`|\n|[e53623d](https://github.com/sagemath/sagetrac-mirror/commit/e53623d9503da131bd8ef4cdacfd1f5f43da88d2)|`build/pkgs/itsdangerous/distros/conda.txt: Remove`|",
    "created_at": "2020-11-23T02:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551134",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:77'></a>
Last 10 new commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[e61929d](https://github.com/sagemath/sagetrac-mirror/commit/e61929d7c568167e2e5b77d9f3b7e4ae9eb80556)|`build/pkgs/sphinx/install-requires.txt: Update from gentoo`|
|[8fe0e35](https://github.com/sagemath/sagetrac-mirror/commit/8fe0e35aae5e3064bf77a2a0192487fb50f11826)|`build/pkgs/python_openid: Unused, remove`|
|[ba1d913](https://github.com/sagemath/sagetrac-mirror/commit/ba1d913e2e340c8ec5c533ecb26d2f3d835b4eb9)|`build/pkgs/itsdangerous: Unused, remove`|
|[bb6c4ae](https://github.com/sagemath/sagetrac-mirror/commit/bb6c4ae829c6c6f55d305e64833a5b85d50fc205)|`build/pkgs/tox/install-requires.txt: New`|
|[d507501](https://github.com/sagemath/sagetrac-mirror/commit/d50750123c5368874f99a05626f33fade165b246)|`build/pkgs/networkx/install-requires.txt: Update from gentoo`|
|[c3a9352](https://github.com/sagemath/sagetrac-mirror/commit/c3a9352acb3f87d8afdb5d9b0d61611cc30fefaa)|`build/pkgs/pathpy/install-requires.txt: Package removed in #30611, remove`|
|[ebd4610](https://github.com/sagemath/sagetrac-mirror/commit/ebd4610519f9794aef64e8f283adcc827addf6f5)|`build/pkgs/pynac/install-requires.txt: New`|
|[6ec00dd](https://github.com/sagemath/sagetrac-mirror/commit/6ec00dd002b41c4fe9b91233f2cebe37c87144d9)|`build/pkgs/{numpy,pillow}/install-requires.txt: New`|
|[77cc105](https://github.com/sagemath/sagetrac-mirror/commit/77cc105954bfbb8f580887da79b5b94f7e2de14b)|`Merge commit '6ec00dd002b41c4fe9b91233f2cebe37c87144d9' of git://trac.sagemath.org/sage into t/28745/environment_yaml`|
|[e53623d](https://github.com/sagemath/sagetrac-mirror/commit/e53623d9503da131bd8ef4cdacfd1f5f43da88d2)|`build/pkgs/itsdangerous/distros/conda.txt: Remove`|



---

archive/issue_comments_551135.json:
```json
{
    "body": "Changing dependencies from \"#30839, #30719\" to \"#30839, #30719, #30611\"",
    "created_at": "2020-11-23T02:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551135",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30839, #30719" to "#30839, #30719, #30611"



---

archive/issue_comments_551136.json:
```json
{
    "body": "<a id='comment:79'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[d365707](https://github.com/sagemath/sagetrac-mirror/commit/d36570755ee8c6a0597e4121fa608836dd087084)|`build/pkgs/packaging: Update to 20.4`|\n|[248c84a](https://github.com/sagemath/sagetrac-mirror/commit/248c84aaa0257008ed76473f75d2be298cca8765)|`build/pkgs/pathpy: No longer required by pickleshare, remove`|\n|[be5bdf2](https://github.com/sagemath/sagetrac-mirror/commit/be5bdf2ea4af0a9ad72be7ad1b39b537f9a0a2e1)|`build/pkgs/pyparsing: Update to 2.4.7`|\n|[88b8427](https://github.com/sagemath/sagetrac-mirror/commit/88b84270121cfde12dfd620f6c39e818b73d8d86)|`build/pkgs/pytz: Update to 2020.4`|\n|[df7972c](https://github.com/sagemath/sagetrac-mirror/commit/df7972ccb76198b67c1339d1c0178e8977bc0dcb)|`build/pkgs/rpy2: Update to 3.3.6`|\n|[7cd96b2](https://github.com/sagemath/sagetrac-mirror/commit/7cd96b2efb72094abaf6c5c5016a4496ff5111b5)|`build/pkgs/scipy/patches/extern_decls.patch: Remove`|\n|[84d778c](https://github.com/sagemath/sagetrac-mirror/commit/84d778c219151e6b179b75c1f50c19bf801207fc)|`Fixing upstream url for networkx`|\n|[13af6c6](https://github.com/sagemath/sagetrac-mirror/commit/13af6c6b8c1533ba9d1b45b127e1a7b7d30000c6)|`fix tarball name`|\n|[45b3408](https://github.com/sagemath/sagetrac-mirror/commit/45b3408883e85f70667ac75d184d11b511020607)|`Merge commit '13af6c6b8c1533ba9d1b45b127e1a7b7d30000c6' of git://trac.sagemath.org/sage into t/28745/environment_yaml`|\n|[736e006](https://github.com/sagemath/sagetrac-mirror/commit/736e0064359a37b51f2e9421d54fd655b3b295a5)|`build/pkgs/pathpy/distros/conda.txt: Remove`|",
    "created_at": "2020-11-23T02:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551136",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:79'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[d365707](https://github.com/sagemath/sagetrac-mirror/commit/d36570755ee8c6a0597e4121fa608836dd087084)|`build/pkgs/packaging: Update to 20.4`|
|[248c84a](https://github.com/sagemath/sagetrac-mirror/commit/248c84aaa0257008ed76473f75d2be298cca8765)|`build/pkgs/pathpy: No longer required by pickleshare, remove`|
|[be5bdf2](https://github.com/sagemath/sagetrac-mirror/commit/be5bdf2ea4af0a9ad72be7ad1b39b537f9a0a2e1)|`build/pkgs/pyparsing: Update to 2.4.7`|
|[88b8427](https://github.com/sagemath/sagetrac-mirror/commit/88b84270121cfde12dfd620f6c39e818b73d8d86)|`build/pkgs/pytz: Update to 2020.4`|
|[df7972c](https://github.com/sagemath/sagetrac-mirror/commit/df7972ccb76198b67c1339d1c0178e8977bc0dcb)|`build/pkgs/rpy2: Update to 3.3.6`|
|[7cd96b2](https://github.com/sagemath/sagetrac-mirror/commit/7cd96b2efb72094abaf6c5c5016a4496ff5111b5)|`build/pkgs/scipy/patches/extern_decls.patch: Remove`|
|[84d778c](https://github.com/sagemath/sagetrac-mirror/commit/84d778c219151e6b179b75c1f50c19bf801207fc)|`Fixing upstream url for networkx`|
|[13af6c6](https://github.com/sagemath/sagetrac-mirror/commit/13af6c6b8c1533ba9d1b45b127e1a7b7d30000c6)|`fix tarball name`|
|[45b3408](https://github.com/sagemath/sagetrac-mirror/commit/45b3408883e85f70667ac75d184d11b511020607)|`Merge commit '13af6c6b8c1533ba9d1b45b127e1a7b7d30000c6' of git://trac.sagemath.org/sage into t/28745/environment_yaml`|
|[736e006](https://github.com/sagemath/sagetrac-mirror/commit/736e0064359a37b51f2e9421d54fd655b3b295a5)|`build/pkgs/pathpy/distros/conda.txt: Remove`|



---

archive/issue_comments_551137.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-11-23T02:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551137",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_551138.json:
```json
{
    "body": "Changing commit from \"e53623d9503da131bd8ef4cdacfd1f5f43da88d2\" to \"736e0064359a37b51f2e9421d54fd655b3b295a5\"",
    "created_at": "2020-11-23T02:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551138",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e53623d9503da131bd8ef4cdacfd1f5f43da88d2" to "736e0064359a37b51f2e9421d54fd655b3b295a5"



---

archive/issue_comments_551139.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-23T02:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551139",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_551140.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-29T11:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551140",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_089794.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-29T11:57:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28745#event-89794"
}
```



---

archive/issue_comments_551141.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/environment_yaml\" to \"736e0064359a37b51f2e9421d54fd655b3b295a5\"",
    "created_at": "2020-11-29T11:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28745#issuecomment-551141",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/environment_yaml" to "736e0064359a37b51f2e9421d54fd655b3b295a5"
