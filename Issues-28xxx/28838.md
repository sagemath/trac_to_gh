# Issue 28838: Resurrect "sage -sws2rst" via a pip-installable package sage_sws2rst

archive/issues_028601.json:
```json
{
    "body": "CC:  @vbraun @dimpase @kcrisman @jhpalmieri\n\nAn important feature is to still be able to handle old `.sws` worksheets because a lot of pedagogical material was written on that format. \n\nWith the removal of sagenb, also `sws2rst` disappeared, see #30076 and related tickets.\n\nWe extract and translate the required material from `sagenb` to a new optional package `sage_sws2rst` that makes `sage -sws2rst` work. \n\n\nAs of this ticket, the source code of `sage_sws2rst` is in `build/pkgs/sage_sws2rst/src`, which is a pip-installable Python package; and one can build an sdist from there, for example using the `spkg-src` script. The source tree could as well be split out to a separate repository. \n\nSee also:\n- https://groups.google.com/d/msg/sage-devel/N61HlftxcLU/iVlQaacUAQAJ\n\nIssue created by migration from https://trac.sagemath.org/ticket/28838\n\n",
    "closed_at": "2020-09-18T20:23:13Z",
    "created_at": "2019-12-03T19:43:45Z",
    "labels": [
        "component: python3",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Resurrect \"sage -sws2rst\" via a pip-installable package sage_sws2rst",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28838",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
CC:  @vbraun @dimpase @kcrisman @jhpalmieri

An important feature is to still be able to handle old `.sws` worksheets because a lot of pedagogical material was written on that format. 

With the removal of sagenb, also `sws2rst` disappeared, see #30076 and related tickets.

We extract and translate the required material from `sagenb` to a new optional package `sage_sws2rst` that makes `sage -sws2rst` work. 


As of this ticket, the source code of `sage_sws2rst` is in `build/pkgs/sage_sws2rst/src`, which is a pip-installable Python package; and one can build an sdist from there, for example using the `spkg-src` script. The source tree could as well be split out to a separate repository. 

See also:
- https://groups.google.com/d/msg/sage-devel/N61HlftxcLU/iVlQaacUAQAJ

Issue created by migration from https://trac.sagemath.org/ticket/28838





---

archive/issue_comments_403208.json:
```json
{
    "body": "Is converting `.sws` file covered by `sagenb_export`?",
    "created_at": "2019-12-03T21:36:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403208",
    "user": "https://github.com/kiwifb"
}
```

Is converting `.sws` file covered by `sagenb_export`?



---

archive/issue_comments_403209.json:
```json
{
    "body": "It seems not directly: after a quick look, the script seems to parse the html page, but maybe it could try to parse the html that belongs to the .sws archive (not sure if it has the same structure). Let me CC Volker for a better understanding of what is doable.",
    "created_at": "2019-12-04T12:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403209",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

It seems not directly: after a quick look, the script seems to parse the html page, but maybe it could try to parse the html that belongs to the .sws archive (not sure if it has the same structure). Let me CC Volker for a better understanding of what is doable.



---

archive/issue_comments_403210.json:
```json
{
    "body": "Here is a first sketch. The moved files are not at the level of sage requirements, as many doctests are missing. If this matters for you, please take the job.\n\n---\nNew commits:",
    "created_at": "2019-12-04T15:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403210",
    "user": "https://github.com/fchapoton"
}
```

Here is a first sketch. The moved files are not at the level of sage requirements, as many doctests are missing. If this matters for you, please take the job.

---
New commits:



---

archive/issue_comments_403211.json:
```json
{
    "body": "Shouldn't this go to a subdirectory of `src/ext/` (e.g. `src/ext/sws2rst/`) ?",
    "created_at": "2019-12-08T22:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403211",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Shouldn't this go to a subdirectory of `src/ext/` (e.g. `src/ext/sws2rst/`) ?



---

archive/issue_comments_403212.json:
```json
{
    "body": "Salut Thierry.\n\nFeel free to put it anywhere you like. I am not going to do anything more here.",
    "created_at": "2019-12-09T08:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403212",
    "user": "https://github.com/fchapoton"
}
```

Salut Thierry.

Feel free to put it anywhere you like. I am not going to do anything more here.



---

archive/issue_comments_403213.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403213",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_events_072921.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72921"
}
```



---

archive/issue_events_072922.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-05T19:13:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72922"
}
```



---

archive/issue_events_072923.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-05T19:13:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72923"
}
```



---

archive/issue_events_072924.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T16:56:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72924"
}
```



---

archive/issue_events_072925.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T16:56:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72925"
}
```



---

archive/issue_comments_403214.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-13T16:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403214",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_403215.json:
```json
{
    "body": "outdated, sws stuff was removed in #30076",
    "created_at": "2020-08-13T16:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403215",
    "user": "https://github.com/mkoeppe"
}
```

outdated, sws stuff was removed in #30076



---

archive/issue_comments_403216.json:
```json
{
    "body": "It is even more important now that there is no `sagenb` anymore, while there are still `sws` files that people might want to convert (e.g. from a former course). I will try to work on this.",
    "created_at": "2020-08-13T18:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403216",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

It is even more important now that there is no `sagenb` anymore, while there are still `sws` files that people might want to convert (e.g. from a former course). I will try to work on this.



---

archive/issue_events_072926.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2020-08-13T18:05:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72926"
}
```



---

archive/issue_events_072927.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2020-08-13T18:05:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72927"
}
```



---

archive/issue_comments_403217.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-13T18:05:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403217",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_403218.json:
```json
{
    "body": "it needs sagenb, a non-starter.",
    "created_at": "2020-08-13T18:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403218",
    "user": "https://github.com/dimpase"
}
```

it needs sagenb, a non-starter.



---

archive/issue_events_072928.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-13T18:39:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72928"
}
```



---

archive/issue_events_072929.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-13T18:39:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72929"
}
```



---

archive/issue_comments_403219.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-13T18:39:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403219",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_072930.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2020-08-13T19:02:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72930"
}
```



---

archive/issue_events_072931.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/tmonteil",
    "created_at": "2020-08-13T19:02:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72931"
}
```



---

archive/issue_comments_403220.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-13T19:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403220",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_403221.json:
```json
{
    "body": "Replying to [comment:10 dimpase]:\n> it needs sagenb, a non-starter.\n\n\nIt only needs a small part of it (see Fr\u00e9d\u00e9ric's patch), and the feature is still needed.",
    "created_at": "2020-08-13T19:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403221",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:10 dimpase]:
> it needs sagenb, a non-starter.


It only needs a small part of it (see Frédéric's patch), and the feature is still needed.



---

archive/issue_comments_403222.json:
```json
{
    "body": "Given that this has extra dependencies (`beautifulsoup`) that we have just removed, this should really be packaged as a pip-installable little package and NOT be put into `sage.misc`.",
    "created_at": "2020-08-13T19:06:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403222",
    "user": "https://github.com/mkoeppe"
}
```

Given that this has extra dependencies (`beautifulsoup`) that we have just removed, this should really be packaged as a pip-installable little package and NOT be put into `sage.misc`.



---

archive/issue_comments_403223.json:
```json
{
    "body": "I don't see why such an extraction cannot be carried out in a version of Sage where this tool still works.",
    "created_at": "2020-08-13T21:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403223",
    "user": "https://github.com/dimpase"
}
```

I don't see why such an extraction cannot be carried out in a version of Sage where this tool still works.



---

archive/issue_comments_403224.json:
```json
{
    "body": "It seems like a great idea to me to provide this converter - as long as this code is not dumped into sagelib.",
    "created_at": "2020-08-13T22:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403224",
    "user": "https://github.com/mkoeppe"
}
```

It seems like a great idea to me to provide this converter - as long as this code is not dumped into sagelib.



---

archive/issue_comments_403225.json:
```json
{
    "body": "I'll be happy to help with packaging",
    "created_at": "2020-08-15T13:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403225",
    "user": "https://github.com/mkoeppe"
}
```

I'll be happy to help with packaging



---

archive/issue_comments_403226.json:
```json
{
    "body": "Replying to [comment:9 tmonteil]:\n> It is even more important now that there is no `sagenb` anymore, while there are still `sws` files that people might want to convert (e.g. from a former course). I will try to work on this.\n\n\nAny progress?",
    "created_at": "2020-08-17T16:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403226",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:9 tmonteil]:
> It is even more important now that there is no `sagenb` anymore, while there are still `sws` files that people might want to convert (e.g. from a former course). I will try to work on this.


Any progress?



---

archive/issue_comments_403227.json:
```json
{
    "body": "How is this different from `sagenb_export` by the way?\n\n---\nNew commits:",
    "created_at": "2020-08-18T17:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403227",
    "user": "https://github.com/mkoeppe"
}
```

How is this different from `sagenb_export` by the way?

---
New commits:



---

archive/issue_comments_403228.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-19T04:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_403229.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-19T04:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403230.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-19T04:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403231.json:
```json
{
    "body": "It would be good to add a few test documents to the package.",
    "created_at": "2020-08-19T04:37:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403231",
    "user": "https://github.com/mkoeppe"
}
```

It would be good to add a few test documents to the package.



---

archive/issue_comments_403232.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-19T04:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403233.json:
```json
{
    "body": "> How is this different from `sagenb_export` by the way?\n\n\nThis gives `rst` files which are quite useful for e.g. adding to Sage documentation.  That was some of the main use before.\n\nIs this basically Pablo's stuff modified for Py3?  It looks like it's a required package, is that correct?",
    "created_at": "2020-08-19T17:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403233",
    "user": "https://github.com/kcrisman"
}
```

> How is this different from `sagenb_export` by the way?


This gives `rst` files which are quite useful for e.g. adding to Sage documentation.  That was some of the main use before.

Is this basically Pablo's stuff modified for Py3?  It looks like it's a required package, is that correct?



---

archive/issue_comments_403234.json:
```json
{
    "body": "Replying to [comment:26 kcrisman]:\n> > How is this different from `sagenb_export` by the way?\n\n> \n> This gives `rst` files which are quite useful for e.g. adding to Sage documentation.  That was some of the main use before.\n\n\nThanks.\n\n> Is this basically Pablo's stuff modified for Py3?\n\n\nI don't know. I just moved files around that were on this ticket already.\n\n>   It looks like it's a required package, is that correct?\n\n\nNo, I made it an optional package, see `build/pkgs/sage_sws2rst/type`",
    "created_at": "2020-08-19T18:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403234",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:26 kcrisman]:
> > How is this different from `sagenb_export` by the way?

> 
> This gives `rst` files which are quite useful for e.g. adding to Sage documentation.  That was some of the main use before.


Thanks.

> Is this basically Pablo's stuff modified for Py3?


I don't know. I just moved files around that were on this ticket already.

>   It looks like it's a required package, is that correct?


No, I made it an optional package, see `build/pkgs/sage_sws2rst/type`



---

archive/issue_comments_403235.json:
```json
{
    "body": "Replying to [comment:26 kcrisman]:\n> > How is this different from `sagenb_export` by the way?\n\n> \n> This gives `rst` files which are quite useful for e.g. adding to Sage documentation.  That was some of the main use before.\n\n\nJupiter's nbconvert provides conversion to rst. https://nbconvert.readthedocs.io/en/latest/\nThus, once sws is converted to jupyter, one can convert further, and the package created here is not needed.",
    "created_at": "2020-08-20T09:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403235",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:26 kcrisman]:
> > How is this different from `sagenb_export` by the way?

> 
> This gives `rst` files which are quite useful for e.g. adding to Sage documentation.  That was some of the main use before.


Jupiter's nbconvert provides conversion to rst. https://nbconvert.readthedocs.io/en/latest/
Thus, once sws is converted to jupyter, one can convert further, and the package created here is not needed.



---

archive/issue_comments_403236.json:
```json
{
    "body": "I suppose there is question as to whether the diagram commutes ...",
    "created_at": "2020-08-20T12:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403236",
    "user": "https://github.com/kcrisman"
}
```

I suppose there is question as to whether the diagram commutes ...



---

archive/issue_comments_403237.json:
```json
{
    "body": "As so often in Sage, this is a complex question - are there real users for this feature, or only imaginary users.",
    "created_at": "2020-08-20T12:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403237",
    "user": "https://github.com/mkoeppe"
}
```

As so often in Sage, this is a complex question - are there real users for this feature, or only imaginary users.



---

archive/issue_comments_403238.json:
```json
{
    "body": "At this point, unknown.  I think this would be a small enough constituency if Dima's suggestion is good that we could use that.  So if someone tested a few nontrivial `sws` worksheets and the result was usable and had roughly the same structure, I would think we could then provide this in documentation (perhaps adding something to the `sagenb_export` public-facing doc).\n\nOf course, if this ticket is actually ready to go, maybe that's a moot point.",
    "created_at": "2020-08-20T13:00:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403238",
    "user": "https://github.com/kcrisman"
}
```

At this point, unknown.  I think this would be a small enough constituency if Dima's suggestion is good that we could use that.  So if someone tested a few nontrivial `sws` worksheets and the result was usable and had roughly the same structure, I would think we could then provide this in documentation (perhaps adding something to the `sagenb_export` public-facing doc).

Of course, if this ticket is actually ready to go, maybe that's a moot point.



---

archive/issue_comments_403239.json:
```json
{
    "body": "The ticket is not ready to go because I have no way of testing it. If you or someone else could contribute some sws files that we can use as a little testsuite for this package, it will be easy to finish up.",
    "created_at": "2020-08-20T13:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403239",
    "user": "https://github.com/mkoeppe"
}
```

The ticket is not ready to go because I have no way of testing it. If you or someone else could contribute some sws files that we can use as a little testsuite for this package, it will be easy to finish up.



---

archive/issue_comments_403240.json:
```json
{
    "body": "> The ticket is not ready to go because I have no way of testing it. If you or someone else could contribute some sws files that we can use as a little testsuite for this package, it will be easy to finish up.\n\n\nSure thing.  Trac keeps kicking me off when I try to upload attachments, so I will send them to you under separate cover - my apologies.  Feel free to attach here, of course.",
    "created_at": "2020-08-20T15:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403240",
    "user": "https://github.com/kcrisman"
}
```

> The ticket is not ready to go because I have no way of testing it. If you or someone else could contribute some sws files that we can use as a little testsuite for this package, it will be easy to finish up.


Sure thing.  Trac keeps kicking me off when I try to upload attachments, so I will send them to you under separate cover - my apologies.  Feel free to attach here, of course.



---

archive/issue_comments_403241.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-20T18:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403241",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-20T18:30:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403243.json:
```json
{
    "body": "I added one of the test worksheets from Karl-Dieter.\n\nAfter `sage -i tox`, the code can now be tested with it using \n\n```\n./sage -sh -c '(cd build/pkgs/sage_sws2rst/src && tox -v -v)'\n```\nIt will need adjustments for python 3 and for the beautifulsoup 3->4 upgrade.\nCurrently it fails as follows:\n\n```\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_sws2rst/src/.tox/python/lib/python3.7/site-packages/sage_sws2rst/comments2rst.py\", line 146, in replace_latex\n    parts = single_dollar.split(unicode(t))\nNameError: name 'unicode' is not defined\n```",
    "created_at": "2020-08-20T18:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403243",
    "user": "https://github.com/mkoeppe"
}
```

I added one of the test worksheets from Karl-Dieter.

After `sage -i tox`, the code can now be tested with it using 

```
./sage -sh -c '(cd build/pkgs/sage_sws2rst/src && tox -v -v)'
```
It will need adjustments for python 3 and for the beautifulsoup 3->4 upgrade.
Currently it fails as follows:

```
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sage_sws2rst/src/.tox/python/lib/python3.7/site-packages/sage_sws2rst/comments2rst.py", line 146, in replace_latex
    parts = single_dollar.split(unicode(t))
NameError: name 'unicode' is not defined
```



---

archive/issue_comments_403244.json:
```json
{
    "body": "I'll stop here for now",
    "created_at": "2020-08-20T18:37:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403244",
    "user": "https://github.com/mkoeppe"
}
```

I'll stop here for now



---

archive/issue_comments_403245.json:
```json
{
    "body": "Thierry, please feel free to take over from here...",
    "created_at": "2020-08-23T23:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403245",
    "user": "https://github.com/mkoeppe"
}
```

Thierry, please feel free to take over from here...



---

archive/issue_comments_403246.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-04T23:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403246",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403247.json:
```json
{
    "body": "This version seems to work to some extent.",
    "created_at": "2020-09-04T23:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403247",
    "user": "https://github.com/mkoeppe"
}
```

This version seems to work to some extent.



---

archive/issue_comments_403248.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-04T23:26:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403249.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-04T23:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403249",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_403250.json:
```json
{
    "body": "For each processed file, there are a number of warnings `Warning: node not supported (or something else?) None`. I don't know if this is a problem.",
    "created_at": "2020-09-04T23:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403250",
    "user": "https://github.com/mkoeppe"
}
```

For each processed file, there are a number of warnings `Warning: node not supported (or something else?) None`. I don't know if this is a problem.



---

archive/issue_comments_403251.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-09-04T23:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403251",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_403252.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-05T00:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403252",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403253.json:
```json
{
    "body": "https://doc.sagemath.org/html/en/thematic_tutorials/sws2rst.html needs updating",
    "created_at": "2020-09-05T18:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403253",
    "user": "https://github.com/mkoeppe"
}
```

https://doc.sagemath.org/html/en/thematic_tutorials/sws2rst.html needs updating



---

archive/issue_comments_403254.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-05T18:28:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403255.json:
```json
{
    "body": "It has been a while I used the sagenb, but doing a `find . -name *.sws` on my machine made me rediscover few .sws including some available online. I copy the link below if it may be useful for testing:\n\n```\nhttp://slabbe.org/Sage/2010-perpignan/CIRM_Tutoriel_3_francais.sws\nhttp://slabbe.org/Sage/2010-perpignan/Sage_tour_horizon.sws\nhttp://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_3.sws\nhttp://slabbe.org/Sage/2010-perpignan/5, 6, 100.sws\nhttp://slabbe.org/Sage/2010-perpignan/La_Suite_Un.sws\nhttp://slabbe.org/Sage/2010-perpignan/Outils de dessins.sws\nhttp://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_1.sws\nhttp://slabbe.org/Sage/2010-perpignan/CIRM_Tutoriel_1_francais.sws\nhttp://slabbe.org/Sage/2010-days25.5-tutoriel1.sws\nhttp://slabbe.org/Sage/2010-11-python-montreal-sage-demo.sws\nhttp://slabbe.org/Sage/2009-canadam-sagewords.sws\n```\nI guess we can find more sws files in the wiki.sagemath.org",
    "created_at": "2020-09-05T18:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403255",
    "user": "https://github.com/seblabbe"
}
```

It has been a while I used the sagenb, but doing a `find . -name *.sws` on my machine made me rediscover few .sws including some available online. I copy the link below if it may be useful for testing:

```
http://slabbe.org/Sage/2010-perpignan/CIRM_Tutoriel_3_francais.sws
http://slabbe.org/Sage/2010-perpignan/Sage_tour_horizon.sws
http://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_3.sws
http://slabbe.org/Sage/2010-perpignan/5, 6, 100.sws
http://slabbe.org/Sage/2010-perpignan/La_Suite_Un.sws
http://slabbe.org/Sage/2010-perpignan/Outils de dessins.sws
http://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_1.sws
http://slabbe.org/Sage/2010-perpignan/CIRM_Tutoriel_1_francais.sws
http://slabbe.org/Sage/2010-days25.5-tutoriel1.sws
http://slabbe.org/Sage/2010-11-python-montreal-sage-demo.sws
http://slabbe.org/Sage/2009-canadam-sagewords.sws
```
I guess we can find more sws files in the wiki.sagemath.org



---

archive/issue_comments_403256.json:
```json
{
    "body": "I get an error while building the doc:\n\n```\n[dochtml] Error building the documentation.\n...\n[dochtml] OSError: \n/home/slabbe/GitBox/sage/src/doc/en/thematic_tutorials/sws2rst.rst: \nWARNING: document isn't included in any toctree\n```\n\n... but I confirm that doc builds correctly *after* running `sage -i sage_sws2rst`",
    "created_at": "2020-09-05T20:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403256",
    "user": "https://github.com/seblabbe"
}
```

I get an error while building the doc:

```
[dochtml] Error building the documentation.
...
[dochtml] OSError: 
/home/slabbe/GitBox/sage/src/doc/en/thematic_tutorials/sws2rst.rst: 
WARNING: document isn't included in any toctree
```

... but I confirm that doc builds correctly *after* running `sage -i sage_sws2rst`



---

archive/issue_comments_403257.json:
```json
{
    "body": "There is a typo in \n\n```\n--- a/src/doc/en/thematic_tutorials/index.rst\n+++ b/src/doc/en/thematic_tutorials/index.rst\n@@ -119,6 +119,8 @@ Advanced Programming\n Documentation\n =============\n \n+* :ref:`sws2srt`\n+\n .. Sage development\n .. ----------------\n```\n\n- it should say `sws2rst`, obviously",
    "created_at": "2020-09-05T20:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403257",
    "user": "https://github.com/dimpase"
}
```

There is a typo in 

```
--- a/src/doc/en/thematic_tutorials/index.rst
+++ b/src/doc/en/thematic_tutorials/index.rst
@@ -119,6 +119,8 @@ Advanced Programming
 Documentation
 =============
 
+* :ref:`sws2srt`
+
 .. Sage development
 .. ----------------
```

- it should say `sws2rst`, obviously



---

archive/issue_comments_403258.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-05T20:57:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403258",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_403259.json:
```json
{
    "body": "Doing `sage -sws2rst CIRM_Tutorial_1.sws` creates a rst file with still a *lot* of html stuff. Is it normal? or beautiful soup does not eat the soup well?\n\nAlso doing `rst2html.py CIRM_Tutorial_1.rst` gives lots of warning of the kind\n\n```\nCIRM_Tutorial_1.rst:83: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.\n...\n```\n\nbecause a line is missing. More precisely\n\n```\n.. end of output\n<html><head></head><body></body></html>\n```\n\nshould be better as:\n\n```\n.. end of output\n\n<html><head></head><body></body></html>\n```",
    "created_at": "2020-09-05T21:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403259",
    "user": "https://github.com/seblabbe"
}
```

Doing `sage -sws2rst CIRM_Tutorial_1.sws` creates a rst file with still a *lot* of html stuff. Is it normal? or beautiful soup does not eat the soup well?

Also doing `rst2html.py CIRM_Tutorial_1.rst` gives lots of warning of the kind

```
CIRM_Tutorial_1.rst:83: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.
...
```

because a line is missing. More precisely

```
.. end of output
<html><head></head><body></body></html>
```

should be better as:

```
.. end of output

<html><head></head><body></body></html>
```



---

archive/issue_comments_403260.json:
```json
{
    "body": "All - please feel free to contribute to the branch",
    "created_at": "2020-09-05T21:06:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403260",
    "user": "https://github.com/mkoeppe"
}
```

All - please feel free to contribute to the branch



---

archive/issue_comments_403261.json:
```json
{
    "body": "I wrote the rst2txt and rst2sws long time ago, but sws2rst is more work (parsing html is so fun). The sws2rst script was written thanks to Pablo Angulo at the time. Let me try to spend some (limited) time on it.\n\nQuestion: how does the `sage -n export` work? does it go through rst?",
    "created_at": "2020-09-06T09:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403261",
    "user": "https://github.com/seblabbe"
}
```

I wrote the rst2txt and rst2sws long time ago, but sws2rst is more work (parsing html is so fun). The sws2rst script was written thanks to Pablo Angulo at the time. Let me try to spend some (limited) time on it.

Question: how does the `sage -n export` work? does it go through rst?



---

archive/issue_comments_403262.json:
```json
{
    "body": "adding two commits fixing two of the issues.\n\nBut there are still a lot of html in the result. Also, warnings are printed during the execution. Maybe the way we call beautiful soup needs to be improved?\n\n```\n$ sage -sws2rst CIRM_Tutorial_1.sws \nProcessing CIRM_Tutorial_1.sws\n/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage_sws2rst/comments2rst.py:396:\nGuessedAtParserWarning: No parser was explicitly specified, so I'm using the \nbest available HTML parser for this system (\"html5lib\"). This usually isn't a \nproblem, but if you run this code on another system, or in a different virtual \nenvironment, it may use a different parser and behave differently.\n\nThe code that caused this warning is on line 396 of the file \n/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage_sws2rst/comments2rst.py. \nTo get rid of this warning, pass the additional argument 'features=\"html5lib\"'\nto the BeautifulSoup constructor.\n\n  soup = BeautifulSoup(text,\nWarning: node not supported (or something else?) html\nWarning: node not supported (or something else?) html\nWarning: node not supported (or something else?) html\n...\nWarning: node not supported (or something else?) html\nWarning: node not supported (or something else?) html\nWarning: node not supported (or something else?) html\nFile at CIRM_Tutorial_1.rst\nImage directory at CIRM_Tutorial_1_media\n```\n\n---\nNew commits:",
    "created_at": "2020-09-06T09:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403262",
    "user": "https://github.com/seblabbe"
}
```

adding two commits fixing two of the issues.

But there are still a lot of html in the result. Also, warnings are printed during the execution. Maybe the way we call beautiful soup needs to be improved?

```
$ sage -sws2rst CIRM_Tutorial_1.sws 
Processing CIRM_Tutorial_1.sws
/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage_sws2rst/comments2rst.py:396:
GuessedAtParserWarning: No parser was explicitly specified, so I'm using the 
best available HTML parser for this system ("html5lib"). This usually isn't a 
problem, but if you run this code on another system, or in a different virtual 
environment, it may use a different parser and behave differently.

The code that caused this warning is on line 396 of the file 
/home/slabbe/GitBox/sage/local/lib/python3.7/site-packages/sage_sws2rst/comments2rst.py. 
To get rid of this warning, pass the additional argument 'features="html5lib"'
to the BeautifulSoup constructor.

  soup = BeautifulSoup(text,
Warning: node not supported (or something else?) html
Warning: node not supported (or something else?) html
Warning: node not supported (or something else?) html
...
Warning: node not supported (or something else?) html
Warning: node not supported (or something else?) html
Warning: node not supported (or something else?) html
File at CIRM_Tutorial_1.rst
Image directory at CIRM_Tutorial_1_media
```

---
New commits:



---

archive/issue_comments_403263.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T09:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403264.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T10:04:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403264",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403265.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T10:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403265",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403266.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T10:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403267.json:
```json
{
    "body": "The goal is now to make the following to work:\n\n```\n$ sage -t --optional=sage,beautifulsoup build/pkgs/sage_sws2rst/src/sage_sws2rst\n...\n-----------------------------------------------------------\nsage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/comments2rst.py  # 8 doctests failed\n-----------------------------------------------------------\n```\n\nFor example:\n\n```\n**********************************************************************\nFile \"comments2rst.py\", line 135, in sage_sws2rst.comments2rst.replace_latex\nFailed example:\n    s # optional - beautifulsoup\nExpected:\n    <p>Some <strong>latex: :math:`e^\\pi i=-1`</strong></p>\nGot:\n    <html><head></head><body><p>Some <strong>latex:  :math:`e^\\pi i=-1`</strong></p></body></html>\n**********************************************************************\nFile \"comments2rst.py\", line 139, in sage_sws2rst.comments2rst.replace_latex\nFailed example:\n    s # optional - beautifulsoup\nExpected:\n    <p><strong>2\\+2 \\| 1\\+3</strong></p>\nGot:\n    <html><head></head><body><p><strong>2\\+2 \\| 1\\+3</strong></p></body></html>\n**********************************************************************\n```",
    "created_at": "2020-09-06T10:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403267",
    "user": "https://github.com/seblabbe"
}
```

The goal is now to make the following to work:

```
$ sage -t --optional=sage,beautifulsoup build/pkgs/sage_sws2rst/src/sage_sws2rst
...
-----------------------------------------------------------
sage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/comments2rst.py  # 8 doctests failed
-----------------------------------------------------------
```

For example:

```
**********************************************************************
File "comments2rst.py", line 135, in sage_sws2rst.comments2rst.replace_latex
Failed example:
    s # optional - beautifulsoup
Expected:
    <p>Some <strong>latex: :math:`e^\pi i=-1`</strong></p>
Got:
    <html><head></head><body><p>Some <strong>latex:  :math:`e^\pi i=-1`</strong></p></body></html>
**********************************************************************
File "comments2rst.py", line 139, in sage_sws2rst.comments2rst.replace_latex
Failed example:
    s # optional - beautifulsoup
Expected:
    <p><strong>2\+2 \| 1\+3</strong></p>
Got:
    <html><head></head><body><p><strong>2\+2 \| 1\+3</strong></p></body></html>
**********************************************************************
```



---

archive/issue_comments_403268.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T13:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403269.json:
```json
{
    "body": "```\n$ sage -t --optional=sage,beautifulsoup build/pkgs/sage_sws2rst/src/sage_sws2rst/\n```\nnow gives\n\n```\nDoctesting 4 files.\nsage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/__init__.py\n    [0 tests, 0.00 s]\nsage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/results2rst.py\n    [6 tests, 0.01 s]\nsage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/comments2rst.py\n    [30 tests, 0.07 s]\nsage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/worksheet2rst.py\n    [0 tests, 0.00 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2020-09-06T13:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403269",
    "user": "https://github.com/seblabbe"
}
```

```
$ sage -t --optional=sage,beautifulsoup build/pkgs/sage_sws2rst/src/sage_sws2rst/
```
now gives

```
Doctesting 4 files.
sage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/__init__.py
    [0 tests, 0.00 s]
sage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/results2rst.py
    [6 tests, 0.01 s]
sage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/comments2rst.py
    [30 tests, 0.07 s]
sage -t --random-seed=0 build/pkgs/sage_sws2rst/src/sage_sws2rst/worksheet2rst.py
    [0 tests, 0.00 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_403270.json:
```json
{
    "body": "This now looks much better with no html code in the generated rst file. For example:\n\n```\n$ wget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_1.sws\n$ sage -sws2rst CIRM_Tutorial_1.sws\nProcessing CIRM_Tutorial_1.sws\nFile at CIRM_Tutorial_1.rst\nImage directory at CIRM_Tutorial_1_media\n$ rst2html.py CIRM_Tutorial_1.rst CIRM_Tutorial_1.html\nCIRM_Tutorial_1.rst:182: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.\nCIRM_Tutorial_1.rst:269: (WARNING/2) Inline strong start-string without end-string.\nCIRM_Tutorial_1.rst:343: (WARNING/2) Inline strong start-string without end-string.\n$ open CIRM_Tutorial_1.html \n```\n\nThe above means few ReStructuredText syntax errors are present in the generated rst file...\n\nAlso, it now looks like `.. end of output` is followed by more than one empty lines now. So let me remove the new lines I added few commits before.",
    "created_at": "2020-09-06T13:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403270",
    "user": "https://github.com/seblabbe"
}
```

This now looks much better with no html code in the generated rst file. For example:

```
$ wget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_1.sws
$ sage -sws2rst CIRM_Tutorial_1.sws
Processing CIRM_Tutorial_1.sws
File at CIRM_Tutorial_1.rst
Image directory at CIRM_Tutorial_1_media
$ rst2html.py CIRM_Tutorial_1.rst CIRM_Tutorial_1.html
CIRM_Tutorial_1.rst:182: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.
CIRM_Tutorial_1.rst:269: (WARNING/2) Inline strong start-string without end-string.
CIRM_Tutorial_1.rst:343: (WARNING/2) Inline strong start-string without end-string.
$ open CIRM_Tutorial_1.html 
```

The above means few ReStructuredText syntax errors are present in the generated rst file...

Also, it now looks like `.. end of output` is followed by more than one empty lines now. So let me remove the new lines I added few commits before.



---

archive/issue_comments_403271.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T13:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403272.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T13:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403273.json:
```json
{
    "body": "Ok, so, to me, this is good enough. The remaining issues are neglectable and easy to fix by hand by the user knowing ReStructuredText syntax.\n\nI give a positive review to all commits before mines.\n\nFew commits I did today now need review.\n\nQuestion: is `sage -t --optional=sage,beautifulsoup build/pkgs/sage_sws2rst/src/sage_sws2rst/` going to be tested by the normal `sage -t -a`? (i'm not used with these kind of optional but included packages)",
    "created_at": "2020-09-06T13:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403273",
    "user": "https://github.com/seblabbe"
}
```

Ok, so, to me, this is good enough. The remaining issues are neglectable and easy to fix by hand by the user knowing ReStructuredText syntax.

I give a positive review to all commits before mines.

Few commits I did today now need review.

Question: is `sage -t --optional=sage,beautifulsoup build/pkgs/sage_sws2rst/src/sage_sws2rst/` going to be tested by the normal `sage -t -a`? (i'm not used with these kind of optional but included packages)



---

archive/issue_comments_403274.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-06T14:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403274",
    "user": "https://github.com/seblabbe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_403275.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T18:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403276.json:
```json
{
    "body": "The doctests now run when you install the package with SAGE_CHECK=yes",
    "created_at": "2020-09-06T18:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403276",
    "user": "https://github.com/mkoeppe"
}
```

The doctests now run when you install the package with SAGE_CHECK=yes



---

archive/issue_comments_403277.json:
```json
{
    "body": "Great!\n\nLet me add a commit...",
    "created_at": "2020-09-06T20:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403277",
    "user": "https://github.com/seblabbe"
}
```

Great!

Let me add a commit...



---

archive/issue_comments_403278.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T20:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403279.json:
```json
{
    "body": "I am trying to run the tests with SAGE_CHECK, but before that I now get\n\n```\n$ make sage_sws2rst\n...\n[sage_sws2rst-none] /home/slabbe/GitBox/sage/build/pkgs/sage_sws2rst/spkg-install: 6: source: not found\n[sage_sws2rst-none] Error: failed to source /home/slabbe/GitBox/sage/build/bin/sage-dist-helpers\n[sage_sws2rst-none] Is /home/slabbe/GitBox/sage the correct SAGE_ROOT?\n...\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make sage_sws2rst'):\n\n* package:         sage_sws2rst-none\n  last build time: sept. 6 22:09\n  log file:        /home/slabbe/GitBox/sage/logs/pkgs/sage_sws2rst-none.log\n...\n```\n\nSame thing if I run `SAGE_CHECK=yes make sage_sws2rst`. Why does it `failed to source`?",
    "created_at": "2020-09-06T20:14:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403279",
    "user": "https://github.com/seblabbe"
}
```

I am trying to run the tests with SAGE_CHECK, but before that I now get

```
$ make sage_sws2rst
...
[sage_sws2rst-none] /home/slabbe/GitBox/sage/build/pkgs/sage_sws2rst/spkg-install: 6: source: not found
[sage_sws2rst-none] Error: failed to source /home/slabbe/GitBox/sage/build/bin/sage-dist-helpers
[sage_sws2rst-none] Is /home/slabbe/GitBox/sage the correct SAGE_ROOT?
...
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make sage_sws2rst'):

* package:         sage_sws2rst-none
  last build time: sept. 6 22:09
  log file:        /home/slabbe/GitBox/sage/logs/pkgs/sage_sws2rst-none.log
...
```

Same thing if I run `SAGE_CHECK=yes make sage_sws2rst`. Why does it `failed to source`?



---

archive/issue_comments_403280.json:
```json
{
    "body": "Ah, sorry, I'll fix that",
    "created_at": "2020-09-06T20:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403280",
    "user": "https://github.com/mkoeppe"
}
```

Ah, sorry, I'll fix that



---

archive/issue_comments_403281.json:
```json
{
    "body": "So if I undo the change\n\n```diff\n-#! /usr/bin/env bash\n+#! /bin/sh\n```\nthen I am able to `make sage_sws2rst`. But then `SAGE_CHECK=yes make sage_sws2rst` fails with\n\n```\n[sage_sws2rst-none] Successfully installed sage-sws2rst-9.2\n[sage_sws2rst-none] Removed build tracker: '/tmp/pip-req-tracker-jp5og0mz'\n[sage_sws2rst-none] /home/slabbe/GitBox/sage/build/pkgs/sage_sws2rst/spkg-install: \nligne 17: ./spkg-check: Aucun fichier ou dossier de ce type\n```\n\nIndeed, where is the `spkg-check` file?",
    "created_at": "2020-09-06T20:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403281",
    "user": "https://github.com/seblabbe"
}
```

So if I undo the change

```diff
-#! /usr/bin/env bash
+#! /bin/sh
```
then I am able to `make sage_sws2rst`. But then `SAGE_CHECK=yes make sage_sws2rst` fails with

```
[sage_sws2rst-none] Successfully installed sage-sws2rst-9.2
[sage_sws2rst-none] Removed build tracker: '/tmp/pip-req-tracker-jp5og0mz'
[sage_sws2rst-none] /home/slabbe/GitBox/sage/build/pkgs/sage_sws2rst/spkg-install: 
ligne 17: ./spkg-check: Aucun fichier ou dossier de ce type
```

Indeed, where is the `spkg-check` file?



---

archive/issue_comments_403282.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T20:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403283.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T20:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403283",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403284.json:
```json
{
    "body": "`make sage_sws2rst` now gives:\n\n```\n[sage_sws2rst-none] /home/slabbe/GitBox/sage/build/pkgs/sage_sws2rst/spkg-install: \n239: /home/slabbe/GitBox/sage/build/bin/sage-dist-helpers: \nSyntax error: \"(\" unexpected (expecting \"}\")\n```",
    "created_at": "2020-09-06T20:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403284",
    "user": "https://github.com/seblabbe"
}
```

`make sage_sws2rst` now gives:

```
[sage_sws2rst-none] /home/slabbe/GitBox/sage/build/pkgs/sage_sws2rst/spkg-install: 
239: /home/slabbe/GitBox/sage/build/bin/sage-dist-helpers: 
Syntax error: "(" unexpected (expecting "}")
```



---

archive/issue_comments_403285.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-06T20:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403285",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403286.json:
```json
{
    "body": "Good. `make sage_sws2rst` works and `SAGE_CHECK=yes make sage_sws2rst` now gives: \n\n```\n[sage_sws2rst-none] Successfully built sage-sws2rst\n[sage_sws2rst-none] Installing collected packages: sage-sws2rst\n[sage_sws2rst-none]   Created temporary directory: /tmp/pip-unpacked-wheel-jwcrc2ua\n[sage_sws2rst-none] \n[sage_sws2rst-none] Successfully installed sage-sws2rst-9.2\n[sage_sws2rst-none] Removed build tracker: '/tmp/pip-req-tracker-w5ksuaxe'\n[sage_sws2rst-none] + set -e\n[sage_sws2rst-none] + sage-sws2rst -h\n[sage_sws2rst-none] + python3 sage_sws2rst/comments2rst.py\n[sage_sws2rst-none] + python3 sage_sws2rst/results2rst.py\n[sage_sws2rst-none] + cd test\n[sage_sws2rst-none] + sage-sws2rst Adding_Pictures_and_screenshots.sws\n[sage_sws2rst-none] Processing Adding_Pictures_and_screenshots.sws\n[sage_sws2rst-none] File at Adding_Pictures_and_screenshots.rst\n[sage_sws2rst-none] Image directory at Adding_Pictures_and_screenshots_media\n[sage_sws2rst-none] + sage-sws2rst MAT_141_day_25.sws\n[sage_sws2rst-none] Processing MAT_141_day_25.sws\n[sage_sws2rst-none] File at MAT_141_day_25.rst\n[sage_sws2rst-none] Image directory at MAT_141_day_25_media\ntouch \"/home/slabbe/GitBox/sage/local/var/lib/sage/installed/sage_sws2rst-none\"\nmake[1]\u00a0: on quitte le r\u00e9pertoire \u00ab\u00a0/home/slabbe/GitBox/sage/build/make\u00a0\u00bb\n\nreal\t0m3,936s\nuser\t0m3,554s\nsys\t0m0,403s\nSage build/upgrade complete!\n```\n\nSeems good!",
    "created_at": "2020-09-06T20:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403286",
    "user": "https://github.com/seblabbe"
}
```

Good. `make sage_sws2rst` works and `SAGE_CHECK=yes make sage_sws2rst` now gives: 

```
[sage_sws2rst-none] Successfully built sage-sws2rst
[sage_sws2rst-none] Installing collected packages: sage-sws2rst
[sage_sws2rst-none]   Created temporary directory: /tmp/pip-unpacked-wheel-jwcrc2ua
[sage_sws2rst-none] 
[sage_sws2rst-none] Successfully installed sage-sws2rst-9.2
[sage_sws2rst-none] Removed build tracker: '/tmp/pip-req-tracker-w5ksuaxe'
[sage_sws2rst-none] + set -e
[sage_sws2rst-none] + sage-sws2rst -h
[sage_sws2rst-none] + python3 sage_sws2rst/comments2rst.py
[sage_sws2rst-none] + python3 sage_sws2rst/results2rst.py
[sage_sws2rst-none] + cd test
[sage_sws2rst-none] + sage-sws2rst Adding_Pictures_and_screenshots.sws
[sage_sws2rst-none] Processing Adding_Pictures_and_screenshots.sws
[sage_sws2rst-none] File at Adding_Pictures_and_screenshots.rst
[sage_sws2rst-none] Image directory at Adding_Pictures_and_screenshots_media
[sage_sws2rst-none] + sage-sws2rst MAT_141_day_25.sws
[sage_sws2rst-none] Processing MAT_141_day_25.sws
[sage_sws2rst-none] File at MAT_141_day_25.rst
[sage_sws2rst-none] Image directory at MAT_141_day_25_media
touch "/home/slabbe/GitBox/sage/local/var/lib/sage/installed/sage_sws2rst-none"
make[1] : on quitte le répertoire « /home/slabbe/GitBox/sage/build/make »

real	0m3,936s
user	0m3,554s
sys	0m0,403s
Sage build/upgrade complete!
```

Seems good!



---

archive/issue_comments_403287.json:
```json
{
    "body": "In a folder with the following makefile:\n\n```\ndownload:\n\twget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutoriel_3_francais.sws\n\twget http://slabbe.org/Sage/2010-perpignan/Sage_tour_horizon.sws\n\twget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_3.sws\n\twget \"http://slabbe.org/Sage/2010-perpignan/5, 6, 100.sws\"\n\twget http://slabbe.org/Sage/2010-perpignan/La_Suite_Un.sws\n\twget \"http://slabbe.org/Sage/2010-perpignan/Outils de dessins.sws\"\n\twget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_1.sws\n\twget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutoriel_1_francais.sws\n\twget http://slabbe.org/Sage/2010-days25.5-tutoriel1.sws\n\twget http://slabbe.org/Sage/2010-11-python-montreal-sage-demo.sws\n\twget http://slabbe.org/Sage/2009-canadam-sagewords.sws\n\nsws2rst:\n\tsage -sws2rst CIRM_Tutoriel_3_francais.sws\n\tsage -sws2rst Sage_tour_horizon.sws\n\tsage -sws2rst CIRM_Tutorial_3.sws\n\tsage -sws2rst \"5, 6, 100.sws\"\n\tsage -sws2rst La_Suite_Un.sws\n\tsage -sws2rst \"Outils de dessins.sws\"\n\tsage -sws2rst CIRM_Tutorial_1.sws\n\tsage -sws2rst CIRM_Tutoriel_1_francais.sws\n\tsage -sws2rst 2010-days25.5-tutoriel1.sws\n\tsage -sws2rst 2010-11-python-montreal-sage-demo.sws\n\t#sage -sws2rst 2009-canadam-sagewords.sws\n\nrst2html:\n\trst2html.py CIRM_Tutoriel_3_francais.rst a.out\n\trst2html.py Sage_tour_horizon.rst a.out\n\trst2html.py CIRM_Tutorial_3.rst a.out\n\trst2html.py 5,_6,_100.rst a.out\n\trst2html.py La_Suite_Un.rst a.out\n\trst2html.py Outils_de_dessins.rst a.out\n\trst2html.py CIRM_Tutorial_1.rst a.out\n\trst2html.py CIRM_Tutoriel_1_francais.rst a.out\n\trst2html.py 2010-days25.5-tutoriel1.rst a.out\n\trst2html.py 2010-11-python-montreal-sage-demo.rst a.out\n\t#rst2html.py 2009-canadam-sagewords.rst a.out\n```\nthen `make download && make sws2rst` works and\n\n```\nmake rst2html\n```\ngives only very few warnings:\n\n```\n$ make rst2html \nrst2html.py CIRM_Tutoriel_3_francais.rst a.out\nCIRM_Tutoriel_3_francais.rst:781: (WARNING/2) Inline emphasis start-string without end-string.\nrst2html.py Sage_tour_horizon.rst a.out\nrst2html.py CIRM_Tutorial_3.rst a.out\nCIRM_Tutorial_3.rst:754: (WARNING/2) Inline emphasis start-string without end-string.\nrst2html.py 5,_6,_100.rst a.out\nrst2html.py La_Suite_Un.rst a.out\nrst2html.py Outils_de_dessins.rst a.out\nrst2html.py CIRM_Tutorial_1.rst a.out\nCIRM_Tutorial_1.rst:176: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.\nCIRM_Tutorial_1.rst:334: (WARNING/2) Inline strong start-string without end-string.\nrst2html.py CIRM_Tutoriel_1_francais.rst a.out\nCIRM_Tutoriel_1_francais.rst:178: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.\nCIRM_Tutoriel_1_francais.rst:338: (WARNING/2) Inline strong start-string without end-string.\nrst2html.py 2010-days25.5-tutoriel1.rst a.out\n2010-days25.5-tutoriel1.rst:149: (WARNING/2) Block quote ends without a blank line; unexpected unindent.\n2010-days25.5-tutoriel1.rst:182: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.\n2010-days25.5-tutoriel1.rst:312: (WARNING/2) Inline strong start-string without end-string.\n* Unknown equation environment pmatrix\nrst2html.py 2010-11-python-montreal-sage-demo.rst a.out\n2010-11-python-montreal-sage-demo.rst:495: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.\n2010-11-python-montreal-sage-demo.rst:534: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.\n#rst2html.py 2009-canadam-sagewords.rst a.out\n```\n\nIt is true, that sometimes it does not translates the html properly. For instance, the following paragraph appears in the file CIRM_Tutorial_3.rst:\n\n```\n`Project Euler Problem 6 <http://projecteuler.net/index.php?section=problems&id=6>`_\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n<blockquote><p>The sum of the squares of the first ten natural numbers is,</p><div style=\"text-align: center;\">1<img alt=\"^(\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/><sup>2</sup><img alt=\")\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/> \\+ 2<img alt=\"^(\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/><sup>2</sup><img alt=\")\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/> \\+ ... \\+ 10<img alt=\"^(\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/><sup>2</sup><img alt=\")\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/> = 385</div><p>The square of the sum of the first ten natural numbers is,</p><div style=\"text-align: center;\">(1 \\+ 2 \\+ ... \\+ 10)<img alt=\"^(\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/><sup>2</sup><img alt=\")\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/> = 55<img alt=\"^(\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/><sup>2</sup><img alt=\")\" src=\"http://projecteuler.net/index.php?section=problems&id=6\" style=\"display: none;\"/> = 3025</div><p>Hence the difference between the sum of the squares of the first ten natural numbers and the square of the sum is 3025 <img alt=\"\u2212\" border=\"0\" height=\"3\" src=\"http://projecteuler.net/images/symbol_minus.gif\" style=\"vertical-align: middle;\" width=\"9\"/> 385 = 2640.</p><p>Find the difference between the sum of the squares of the first one hundred natural numbers and the square of the sum.</p></blockquote>\n```\n\nbut I am quite sure it was the same problem before. From me it is a positive review.\n\nLet's deal with blockquote and other missing styles in another ticket if somebody finds it desirable.",
    "created_at": "2020-09-06T20:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403287",
    "user": "https://github.com/seblabbe"
}
```

In a folder with the following makefile:

```
download:
	wget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutoriel_3_francais.sws
	wget http://slabbe.org/Sage/2010-perpignan/Sage_tour_horizon.sws
	wget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_3.sws
	wget "http://slabbe.org/Sage/2010-perpignan/5, 6, 100.sws"
	wget http://slabbe.org/Sage/2010-perpignan/La_Suite_Un.sws
	wget "http://slabbe.org/Sage/2010-perpignan/Outils de dessins.sws"
	wget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutorial_1.sws
	wget http://slabbe.org/Sage/2010-perpignan/CIRM_Tutoriel_1_francais.sws
	wget http://slabbe.org/Sage/2010-days25.5-tutoriel1.sws
	wget http://slabbe.org/Sage/2010-11-python-montreal-sage-demo.sws
	wget http://slabbe.org/Sage/2009-canadam-sagewords.sws

sws2rst:
	sage -sws2rst CIRM_Tutoriel_3_francais.sws
	sage -sws2rst Sage_tour_horizon.sws
	sage -sws2rst CIRM_Tutorial_3.sws
	sage -sws2rst "5, 6, 100.sws"
	sage -sws2rst La_Suite_Un.sws
	sage -sws2rst "Outils de dessins.sws"
	sage -sws2rst CIRM_Tutorial_1.sws
	sage -sws2rst CIRM_Tutoriel_1_francais.sws
	sage -sws2rst 2010-days25.5-tutoriel1.sws
	sage -sws2rst 2010-11-python-montreal-sage-demo.sws
	#sage -sws2rst 2009-canadam-sagewords.sws

rst2html:
	rst2html.py CIRM_Tutoriel_3_francais.rst a.out
	rst2html.py Sage_tour_horizon.rst a.out
	rst2html.py CIRM_Tutorial_3.rst a.out
	rst2html.py 5,_6,_100.rst a.out
	rst2html.py La_Suite_Un.rst a.out
	rst2html.py Outils_de_dessins.rst a.out
	rst2html.py CIRM_Tutorial_1.rst a.out
	rst2html.py CIRM_Tutoriel_1_francais.rst a.out
	rst2html.py 2010-days25.5-tutoriel1.rst a.out
	rst2html.py 2010-11-python-montreal-sage-demo.rst a.out
	#rst2html.py 2009-canadam-sagewords.rst a.out
```
then `make download && make sws2rst` works and

```
make rst2html
```
gives only very few warnings:

```
$ make rst2html 
rst2html.py CIRM_Tutoriel_3_francais.rst a.out
CIRM_Tutoriel_3_francais.rst:781: (WARNING/2) Inline emphasis start-string without end-string.
rst2html.py Sage_tour_horizon.rst a.out
rst2html.py CIRM_Tutorial_3.rst a.out
CIRM_Tutorial_3.rst:754: (WARNING/2) Inline emphasis start-string without end-string.
rst2html.py 5,_6,_100.rst a.out
rst2html.py La_Suite_Un.rst a.out
rst2html.py Outils_de_dessins.rst a.out
rst2html.py CIRM_Tutorial_1.rst a.out
CIRM_Tutorial_1.rst:176: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.
CIRM_Tutorial_1.rst:334: (WARNING/2) Inline strong start-string without end-string.
rst2html.py CIRM_Tutoriel_1_francais.rst a.out
CIRM_Tutoriel_1_francais.rst:178: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.
CIRM_Tutoriel_1_francais.rst:338: (WARNING/2) Inline strong start-string without end-string.
rst2html.py 2010-days25.5-tutoriel1.rst a.out
2010-days25.5-tutoriel1.rst:149: (WARNING/2) Block quote ends without a blank line; unexpected unindent.
2010-days25.5-tutoriel1.rst:182: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.
2010-days25.5-tutoriel1.rst:312: (WARNING/2) Inline strong start-string without end-string.
* Unknown equation environment pmatrix
rst2html.py 2010-11-python-montreal-sage-demo.rst a.out
2010-11-python-montreal-sage-demo.rst:495: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.
2010-11-python-montreal-sage-demo.rst:534: (WARNING/2) Explicit markup ends without a blank line; unexpected unindent.
#rst2html.py 2009-canadam-sagewords.rst a.out
```

It is true, that sometimes it does not translates the html properly. For instance, the following paragraph appears in the file CIRM_Tutorial_3.rst:

```
`Project Euler Problem 6 <http://projecteuler.net/index.php?section=problems&id=6>`_
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

<blockquote><p>The sum of the squares of the first ten natural numbers is,</p><div style="text-align: center;">1<img alt="^(" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/><sup>2</sup><img alt=")" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/> \+ 2<img alt="^(" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/><sup>2</sup><img alt=")" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/> \+ ... \+ 10<img alt="^(" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/><sup>2</sup><img alt=")" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/> = 385</div><p>The square of the sum of the first ten natural numbers is,</p><div style="text-align: center;">(1 \+ 2 \+ ... \+ 10)<img alt="^(" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/><sup>2</sup><img alt=")" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/> = 55<img alt="^(" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/><sup>2</sup><img alt=")" src="http://projecteuler.net/index.php?section=problems&id=6" style="display: none;"/> = 3025</div><p>Hence the difference between the sum of the squares of the first ten natural numbers and the square of the sum is 3025 <img alt="−" border="0" height="3" src="http://projecteuler.net/images/symbol_minus.gif" style="vertical-align: middle;" width="9"/> 385 = 2640.</p><p>Find the difference between the sum of the squares of the first one hundred natural numbers and the square of the sum.</p></blockquote>
```

but I am quite sure it was the same problem before. From me it is a positive review.

Let's deal with blockquote and other missing styles in another ticket if somebody finds it desirable.



---

archive/issue_comments_403288.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-06T21:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403288",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_403289.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-09-10T20:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403289",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_403290.json:
```json
{
    "body": "```\n[dochtml] [thematic_] The HTML pages are in local/share/doc/sage/html/en/thematic_tutorials.\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/release/Sage/local/lib/python3.8/runpy.py\", line 194, in _run_module_as_main\n[dochtml]     return _run_code(code, main_globals, None,\n[dochtml]   File \"/home/release/Sage/local/lib/python3.8/runpy.py\", line 87, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py\", line 1730, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py\", line 353, in _wrapper\n[dochtml]     build_many(build_other_doc, L)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py\", line 296, in build_many\n[dochtml]     _build_many(target, args, processes=NUM_THREADS)\n[dochtml]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/utils.py\", line 289, in build_many\n[dochtml]     raise worker_exc.original_exception\n[dochtml] OSError: /home/release/Sage/src/doc/en/thematic_tutorials/sws2rst.rst: WARNING: document isn't included in any toctree\n```",
    "created_at": "2020-09-10T20:48:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403290",
    "user": "https://github.com/vbraun"
}
```

```
[dochtml] [thematic_] The HTML pages are in local/share/doc/sage/html/en/thematic_tutorials.
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/release/Sage/local/lib/python3.8/runpy.py", line 194, in _run_module_as_main
[dochtml]     return _run_code(code, main_globals, None,
[dochtml]   File "/home/release/Sage/local/lib/python3.8/runpy.py", line 87, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py", line 1730, in main
[dochtml]     builder()
[dochtml]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py", line 353, in _wrapper
[dochtml]     build_many(build_other_doc, L)
[dochtml]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/__init__.py", line 296, in build_many
[dochtml]     _build_many(target, args, processes=NUM_THREADS)
[dochtml]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage_setup/docbuild/utils.py", line 289, in build_many
[dochtml]     raise worker_exc.original_exception
[dochtml] OSError: /home/release/Sage/src/doc/en/thematic_tutorials/sws2rst.rst: WARNING: document isn't included in any toctree
```



---

archive/issue_comments_403291.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-11T16:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_403292.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-11T16:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403292",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_403293.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-12T23:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403293",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_403294.json:
```json
{
    "body": "Docbuild is fixed, back to positive review",
    "created_at": "2020-09-12T23:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403294",
    "user": "https://github.com/mkoeppe"
}
```

Docbuild is fixed, back to positive review



---

archive/issue_comments_403295.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-18T20:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28838#issuecomment-403295",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_072932.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-18T20:23:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28838",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28838#event-72932"
}
```
