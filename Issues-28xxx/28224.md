# Issue 28224: spkg-configure.m4 for lcalc

archive/issues_027987.json:
```json
{
    "assignees": [],
    "body": "Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`). On Debian one needs packages `liblfunction-dev` and `lcalc`.\n\nOne needs to check how well-patched they are.\n\nWe had to introduce an env. var. `SAGE_LCALC_INCDIR_NOLIBPREFIX` to deal with the discrepancy in the include names, which is `libLfunction/` on sage-dist, but `Lfunction/` on Debian.\n\nif `SAGE_LCALC_INCDIR_NOLIBPREFIX` is not `''` then we assume that \nthe include prefix is  `Lfunction/`, and otherwise it is\n`libLfunction/`.\n\n\n\nCC:  @embray @isuruf @antonio-rojas @kiwifb\n\nKeywords: **spkg-configure**\n\nBranch: **[6aa7e76](https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84)**\n\nReviewer: **Isuru Fernando**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28224_\n\n",
    "closed_at": "2019-09-05T21:33:13Z",
    "created_at": "2019-07-21T10:15:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "spkg-configure.m4 for lcalc",
    "type": "issue",
    "updated_at": "2020-03-30T12:44:36Z",
    "url": "https://github.com/sagemath/sage/issues/28224",
    "user": "https://github.com/dimpase"
}
```
Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`). On Debian one needs packages `liblfunction-dev` and `lcalc`.

One needs to check how well-patched they are.

We had to introduce an env. var. `SAGE_LCALC_INCDIR_NOLIBPREFIX` to deal with the discrepancy in the include names, which is `libLfunction/` on sage-dist, but `Lfunction/` on Debian.

if `SAGE_LCALC_INCDIR_NOLIBPREFIX` is not `''` then we assume that 
the include prefix is  `Lfunction/`, and otherwise it is
`libLfunction/`.



CC:  @embray @isuruf @antonio-rojas @kiwifb

Keywords: **spkg-configure**

Branch: **[6aa7e76](https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84)**

Reviewer: **Isuru Fernando**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/28224_





---

archive/issue_events_368920.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-07-21T10:15:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368920"
}
```



---

archive/issue_events_368921.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-07-21T10:15:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "component: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368921"
}
```



---

archive/issue_events_368922.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-07-21T10:15:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368922"
}
```



---

archive/issue_events_368923.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-07-21T10:15:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368923"
}
```



---

archive/issue_comments_442525.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nDoes Conda provide `lcalc`?",
    "created_at": "2019-07-21T10:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442525",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">Comment 1</div>

Does Conda provide `lcalc`?



---

archive/issue_comments_442526.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nReplying to [@dimpase](#comment%3A1):\n> Does Conda provide `lcalc`?\n\nYes and uses the patches from sage https://github.com/conda-forge/lcalc-feedstock/tree/master/recipe/patches",
    "created_at": "2019-07-21T16:25:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442526",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:2" align="right">Comment 2</div>

Replying to [@dimpase](#comment%3A1):
> Does Conda provide `lcalc`?

Yes and uses the patches from sage https://github.com/conda-forge/lcalc-feedstock/tree/master/recipe/patches



---

archive/issue_comments_442527.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nlcalc depends on PARI, so we need to deal with pari first.",
    "created_at": "2019-07-23T19:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442527",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">Comment 3</div>

lcalc depends on PARI, so we need to deal with pari first.



---

archive/issue_comments_442528.json:
```json
{
    "body": "Dependencies: **#28242**",
    "created_at": "2019-07-23T19:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442528",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#28242**



---

archive/issue_comments_442529.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`).\n+Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`). On Debian one needs packages `liblfunction-dev` and `lcalc`.\n \n One needs to check how well-patched they are.\n``````\n",
    "created_at": "2019-08-09T10:38:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442529",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`).
+Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`). On Debian one needs packages `liblfunction-dev` and `lcalc`.
 
 One needs to check how well-patched they are.
``````




---

archive/issue_comments_442530.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/311fce3b0d7dec7b60aaa8a98f47ae45f295c43d\">311fce3</a></td><td><code>spkg-configure for lcalc</code></td></tr></table>\n",
    "created_at": "2019-09-01T01:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442530",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">Comment 5</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/311fce3b0d7dec7b60aaa8a98f47ae45f295c43d">311fce3</a></td><td><code>spkg-configure for lcalc</code></td></tr></table>




---

archive/issue_events_368924.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-01T01:49:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368924"
}
```



---

archive/issue_comments_442531.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/lcalcconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/lcalcconf)**",
    "created_at": "2019-09-01T01:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442531",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/lcalcconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/lcalcconf)**



---

archive/issue_comments_442532.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2019-09-01T01:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442532",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_442533.json:
```json
{
    "body": "Commit: **[311fce3](https://github.com/sagemath/sagetrac-mirror/commit/311fce3b0d7dec7b60aaa8a98f47ae45f295c43d)**",
    "created_at": "2019-09-01T01:49:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442533",
    "user": "https://github.com/dimpase"
}
```

Commit: **[311fce3](https://github.com/sagemath/sagetrac-mirror/commit/311fce3b0d7dec7b60aaa8a98f47ae45f295c43d)**



---

archive/issue_events_368925.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-09-01T02:17:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368925"
}
```



---

archive/issue_events_368926.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-09-01T02:17:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368926"
}
```



---

archive/issue_comments_442534.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nsage-dist, conda, arch installs the header as `<prefix>/include/libLfunction/L.h` while debian installs it as `<prefix>/include/Lfunction/L.h`.\n\nYou'll need more changes to make lcalc work with Debian way. For eg: https://github.com/sagemath/sage/blob/master/src/sage/libs/lcalc/lcalc_sage.h#L1",
    "created_at": "2019-09-01T02:17:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442534",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:6" align="right">Comment 6</div>

sage-dist, conda, arch installs the header as `<prefix>/include/libLfunction/L.h` while debian installs it as `<prefix>/include/Lfunction/L.h`.

You'll need more changes to make lcalc work with Debian way. For eg: https://github.com/sagemath/sage/blob/master/src/sage/libs/lcalc/lcalc_sage.h#L1



---

archive/issue_comments_442535.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\noops, right, one would in the very least deal with hardcoded\n\n```\nsrc/sage/libs/lcalc/lcalc_sage.h:#include \"libLfunction/L.h\"\n```",
    "created_at": "2019-09-01T11:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442535",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">Comment 7</div>

oops, right, one would in the very least deal with hardcoded

```
src/sage/libs/lcalc/lcalc_sage.h:#include "libLfunction/L.h"
```



---

archive/issue_comments_442536.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbcf50601a6913abd19b5e0af2e2631ae4b0bd0b\">dbcf506</a></td><td><code>spkg-configure for lcalc</code></td></tr></table>\n",
    "created_at": "2019-09-01T19:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442536",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbcf50601a6913abd19b5e0af2e2631ae4b0bd0b">dbcf506</a></td><td><code>spkg-configure for lcalc</code></td></tr></table>




---

archive/issue_comments_442537.json:
```json
{
    "body": "Changed commit from **[311fce3](https://github.com/sagemath/sagetrac-mirror/commit/311fce3b0d7dec7b60aaa8a98f47ae45f295c43d)** to **[dbcf506](https://github.com/sagemath/sagetrac-mirror/commit/dbcf50601a6913abd19b5e0af2e2631ae4b0bd0b)**",
    "created_at": "2019-09-01T19:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442537",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[311fce3](https://github.com/sagemath/sagetrac-mirror/commit/311fce3b0d7dec7b60aaa8a98f47ae45f295c43d)** to **[dbcf506](https://github.com/sagemath/sagetrac-mirror/commit/dbcf50601a6913abd19b5e0af2e2631ae4b0bd0b)**



---

archive/issue_comments_442538.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36c5fcaaf2e17f3b5b61c637501f54c886f315c3\">36c5fca</a></td><td><code>spkg-configure for lcalc</code></td></tr></table>\n",
    "created_at": "2019-09-01T19:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442538",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9" align="right">Comment 9</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36c5fcaaf2e17f3b5b61c637501f54c886f315c3">36c5fca</a></td><td><code>spkg-configure for lcalc</code></td></tr></table>




---

archive/issue_comments_442539.json:
```json
{
    "body": "Changed commit from **[dbcf506](https://github.com/sagemath/sagetrac-mirror/commit/dbcf50601a6913abd19b5e0af2e2631ae4b0bd0b)** to **[36c5fca](https://github.com/sagemath/sagetrac-mirror/commit/36c5fcaaf2e17f3b5b61c637501f54c886f315c3)**",
    "created_at": "2019-09-01T19:15:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442539",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[dbcf506](https://github.com/sagemath/sagetrac-mirror/commit/dbcf50601a6913abd19b5e0af2e2631ae4b0bd0b)** to **[36c5fca](https://github.com/sagemath/sagetrac-mirror/commit/36c5fcaaf2e17f3b5b61c637501f54c886f315c3)**



---

archive/issue_events_368927.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-01T19:50:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368927"
}
```



---

archive/issue_events_368928.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-01T19:50:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368928"
}
```



---

archive/issue_comments_442540.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nOK, so the updated branch works with Debian's lcalc, currently checking with sage-dist's lcalc.\nAny chance to test this with Conda? Thanks!",
    "created_at": "2019-09-01T19:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442540",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">Comment 10</div>

OK, so the updated branch works with Debian's lcalc, currently checking with sage-dist's lcalc.
Any chance to test this with Conda? Thanks!



---

archive/issue_comments_442541.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nWorks for me on conda. I see that you have `test x$ac_cv_header_libLfunction = x`. Isn't that supposed to be `test x$ac_cv_header_libLfunction_L_h = x` ?",
    "created_at": "2019-09-01T19:59:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442541",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:11" align="right">Comment 11</div>

Works for me on conda. I see that you have `test x$ac_cv_header_libLfunction = x`. Isn't that supposed to be `test x$ac_cv_header_libLfunction_L_h = x` ?



---

archive/issue_comments_442542.json:
```json
{
    "body": "Changed commit from **[36c5fca](https://github.com/sagemath/sagetrac-mirror/commit/36c5fcaaf2e17f3b5b61c637501f54c886f315c3)** to **[093f706](https://github.com/sagemath/sagetrac-mirror/commit/093f706a39342393803ab0885d13ccb96bd2f360)**",
    "created_at": "2019-09-01T20:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442542",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[36c5fca](https://github.com/sagemath/sagetrac-mirror/commit/36c5fcaaf2e17f3b5b61c637501f54c886f315c3)** to **[093f706](https://github.com/sagemath/sagetrac-mirror/commit/093f706a39342393803ab0885d13ccb96bd2f360)**



---

archive/issue_comments_442543.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/093f706a39342393803ab0885d13ccb96bd2f360\">093f706</a></td><td><code>typo - with it the test was always passing</code></td></tr></table>\n",
    "created_at": "2019-09-01T20:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/093f706a39342393803ab0885d13ccb96bd2f360">093f706</a></td><td><code>typo - with it the test was always passing</code></td></tr></table>




---

archive/issue_comments_442544.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\ngood catch. I guess you won't be able to build lcalc cython extension without the latest commit...",
    "created_at": "2019-09-01T20:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442544",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">Comment 13</div>

good catch. I guess you won't be able to build lcalc cython extension without the latest commit...



---

archive/issue_events_368929.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-09-01T20:23:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368929"
}
```



---

archive/issue_events_368930.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-09-01T20:23:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368930"
}
```



---

archive/issue_comments_442545.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nWith the last commit and the one before that, I get\n\n```\nconfigure: === checking whether to install the lcalc SPKG ===\nchecking installing any of pari mpfr? ... no\nchecking for lcalc... /projects/66d93023-00f0-4c12-8a25-5d6d4e486740/sage-build/bin/lcalc\nchecking is lcalc's version good enough? ... yes.\nchecking Lfunction/L.h usability... no\nchecking Lfunction/L.h presence... no\nchecking for Lfunction/L.h... no\nchecking libLfunction/L.h usability... yes\nchecking libLfunction/L.h presence... yes\nchecking for libLfunction/L.h... yes\nchecking whether we can link and run a program using libLfunction... yes; use lcalc from the system\n```\n\nbut lcalc spkg is being built.",
    "created_at": "2019-09-01T20:23:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442545",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:14" align="right">Comment 14</div>

With the last commit and the one before that, I get

```
configure: === checking whether to install the lcalc SPKG ===
checking installing any of pari mpfr? ... no
checking for lcalc... /projects/66d93023-00f0-4c12-8a25-5d6d4e486740/sage-build/bin/lcalc
checking is lcalc's version good enough? ... yes.
checking Lfunction/L.h usability... no
checking Lfunction/L.h presence... no
checking for Lfunction/L.h... no
checking libLfunction/L.h usability... yes
checking libLfunction/L.h presence... yes
checking for libLfunction/L.h... yes
checking whether we can link and run a program using libLfunction... yes; use lcalc from the system
```

but lcalc spkg is being built.



---

archive/issue_comments_442546.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nhmm, could you attach the output of ./configure and config.log ? Thanks!",
    "created_at": "2019-09-01T20:26:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442546",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">Comment 15</div>

hmm, could you attach the output of ./configure and config.log ? Thanks!



---

archive/issue_comments_442547.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nElse condition of `AC_CHECK_HEADERS` is run for the first header if it is not found.",
    "created_at": "2019-09-01T20:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442547",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:16" align="right">Comment 16</div>

Else condition of `AC_CHECK_HEADERS` is run for the first header if it is not found.



---

archive/issue_comments_442548.json:
```json
{
    "body": "Changed commit from **[093f706](https://github.com/sagemath/sagetrac-mirror/commit/093f706a39342393803ab0885d13ccb96bd2f360)** to **[bbefc4e](https://github.com/sagemath/sagetrac-mirror/commit/bbefc4e91ae1236e73131a345dbcc8ce90d41129)**",
    "created_at": "2019-09-01T20:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442548",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[093f706](https://github.com/sagemath/sagetrac-mirror/commit/093f706a39342393803ab0885d13ccb96bd2f360)** to **[bbefc4e](https://github.com/sagemath/sagetrac-mirror/commit/bbefc4e91ae1236e73131a345dbcc8ce90d41129)**



---

archive/issue_comments_442549.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbefc4e91ae1236e73131a345dbcc8ce90d41129\">bbefc4e</a></td><td><code>do not fall for false positive in AC_CHECK_HEADERS</code></td></tr></table>\n",
    "created_at": "2019-09-01T20:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442549",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17" align="right">Comment 17</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbefc4e91ae1236e73131a345dbcc8ce90d41129">bbefc4e</a></td><td><code>do not fall for false positive in AC_CHECK_HEADERS</code></td></tr></table>




---

archive/issue_comments_442550.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@isuruf](#comment%3A16):\n> Else condition of `AC_CHECK_HEADERS` is run for the first header if it is not found.\n\nfixed by the last commit, good catch. I never used AC_CHECK_HEADER*S* before...",
    "created_at": "2019-09-01T20:44:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442550",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@isuruf](#comment%3A16):
> Else condition of `AC_CHECK_HEADERS` is run for the first header if it is not found.

fixed by the last commit, good catch. I never used AC_CHECK_HEADER*S* before...



---

archive/issue_comments_442551.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nWorks for me now.",
    "created_at": "2019-09-01T20:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442551",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:19" align="right">Comment 19</div>

Works for me now.



---

archive/issue_comments_442552.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d18b88c23d303c5c2654fce6094aae916cd03fec\">d18b88c</a></td><td><code>workaoroung for gcc (?)</code></td></tr></table>\n",
    "created_at": "2019-09-01T22:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442552",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20" align="right">Comment 20</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d18b88c23d303c5c2654fce6094aae916cd03fec">d18b88c</a></td><td><code>workaoroung for gcc (?)</code></td></tr></table>




---

archive/issue_comments_442553.json:
```json
{
    "body": "Changed commit from **[bbefc4e](https://github.com/sagemath/sagetrac-mirror/commit/bbefc4e91ae1236e73131a345dbcc8ce90d41129)** to **[d18b88c](https://github.com/sagemath/sagetrac-mirror/commit/d18b88c23d303c5c2654fce6094aae916cd03fec)**",
    "created_at": "2019-09-01T22:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442553",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bbefc4e](https://github.com/sagemath/sagetrac-mirror/commit/bbefc4e91ae1236e73131a345dbcc8ce90d41129)** to **[d18b88c](https://github.com/sagemath/sagetrac-mirror/commit/d18b88c23d303c5c2654fce6094aae916cd03fec)**



---

archive/issue_comments_442554.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nThe latest commit fixes a weird build bug I was getting.\nNamely, if `LCALC_INCDIR_NOLIBPREFIX==''` the build was failing.\nSo I made it to always be something non-empty and OK for gcc (7 and 8.3, neither worked).\n\nNeeds final review now.",
    "created_at": "2019-09-01T22:26:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442554",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">Comment 21</div>

The latest commit fixes a weird build bug I was getting.
Namely, if `LCALC_INCDIR_NOLIBPREFIX==''` the build was failing.
So I made it to always be something non-empty and OK for gcc (7 and 8.3, neither worked).

Needs final review now.



---

archive/issue_events_368931.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-01T22:26:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368931"
}
```



---

archive/issue_events_368932.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-01T22:26:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368932"
}
```



---

archive/issue_comments_442555.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nI think distutils was sending an empty argument. Empty arguments will give that file not found error.",
    "created_at": "2019-09-01T22:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442555",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:22" align="right">Comment 22</div>

I think distutils was sending an empty argument. Empty arguments will give that file not found error.



---

archive/issue_events_368933.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-09-01T22:32:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368933"
}
```



---

archive/issue_events_368934.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-09-01T22:32:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368934"
}
```



---

archive/issue_comments_442556.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nreviewer name missing",
    "created_at": "2019-09-02T07:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442556",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">Comment 23</div>

reviewer name missing



---

archive/issue_comments_442557.json:
```json
{
    "body": "Reviewer: **Isuru Fernando**",
    "created_at": "2019-09-02T07:32:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442557",
    "user": "https://github.com/isuruf"
}
```

Reviewer: **Isuru Fernando**



---

archive/issue_comments_442558.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nDistributions - new env. var., please take a look.",
    "created_at": "2019-09-02T07:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442558",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">Comment 25</div>

Distributions - new env. var., please take a look.



---

archive/issue_comments_442559.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`). On Debian one needs packages `liblfunction-dev` and `lcalc`.\n \n One needs to check how well-patched they are.\n+\n+We had to introduce an env. var. `SAGE_LCALC_INCDIR_NOLIBPREFIX` to deal with the discrepancy in the include names, which is `libLfunction/` on sage-dist, but `Lfunction/` on Debian.\n+\n+if `SAGE_LCALC_INCDIR_NOLIBPREFIX` is not `''` then we assume that \n+the include prefix is  `Lfunction/`, and otherwise it is\n+`libLfunction/`.\n+\n+\n``````\n",
    "created_at": "2019-09-02T07:53:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442559",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,11 @@
 Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`). On Debian one needs packages `liblfunction-dev` and `lcalc`.
 
 One needs to check how well-patched they are.
+
+We had to introduce an env. var. `SAGE_LCALC_INCDIR_NOLIBPREFIX` to deal with the discrepancy in the include names, which is `libLfunction/` on sage-dist, but `Lfunction/` on Debian.
+
+if `SAGE_LCALC_INCDIR_NOLIBPREFIX` is not `''` then we assume that 
+the include prefix is  `Lfunction/`, and otherwise it is
+`libLfunction/`.
+
+
``````




---

archive/issue_comments_442560.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@dimpase](#comment%3A25):\n> Distributions - new env. var., please take a look.\n\nAs long as there's a fallback that allows not having to set the variable I'm fine with it - I can change the lcalc package headers accordingly.",
    "created_at": "2019-09-02T07:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442560",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@dimpase](#comment%3A25):
> Distributions - new env. var., please take a look.

As long as there's a fallback that allows not having to set the variable I'm fine with it - I can change the lcalc package headers accordingly.



---

archive/issue_comments_442561.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nI am confused now. I thought that you are fine with variables, but not happy with running configure. Otherwise a much easier solution would have been to have\nsomething like `src/sage/libs/lcalc/lcalc_sage.h.in` and fill it in by `./configure`.",
    "created_at": "2019-09-02T08:00:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442561",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">Comment 27</div>

I am confused now. I thought that you are fine with variables, but not happy with running configure. Otherwise a much easier solution would have been to have
something like `src/sage/libs/lcalc/lcalc_sage.h.in` and fill it in by `./configure`.



---

archive/issue_comments_442562.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@dimpase](#comment%3A27):\n> I am confused now. I thought that you are fine with variables, but not happy with running configure. Otherwise a much easier solution would have been to have\n> something like `src/sage/libs/lcalc/lcalc_sage.h.in` and fill it in by `./configure`.\n\nRunning configure < setting env variables < not having to do anything\n\nSo using an env variable with a sane fallback is best.",
    "created_at": "2019-09-02T08:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442562",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@dimpase](#comment%3A27):
> I am confused now. I thought that you are fine with variables, but not happy with running configure. Otherwise a much easier solution would have been to have
> something like `src/sage/libs/lcalc/lcalc_sage.h.in` and fill it in by `./configure`.

Running configure < setting env variables < not having to do anything

So using an env variable with a sane fallback is best.



---

archive/issue_comments_442563.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\n\"not having to do anything\" would only be possible if Debian et. al reverted their clever idea to rename the include location to `Lfunction`.\n\nI don't know what you mean by a fallback here.",
    "created_at": "2019-09-02T08:05:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442563",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">Comment 29</div>

"not having to do anything" would only be possible if Debian et. al reverted their clever idea to rename the include location to `Lfunction`.

I don't know what you mean by a fallback here.



---

archive/issue_comments_442564.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nI don't think any distribution shipping headers in `libLfunction` has to do anything here as there's a fallback in `src/sage/env.py`.",
    "created_at": "2019-09-02T08:08:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442564",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:30" align="right">Comment 30</div>

I don't think any distribution shipping headers in `libLfunction` has to do anything here as there's a fallback in `src/sage/env.py`.



---

archive/issue_comments_442565.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@dimpase](#comment%3A29):\n> \"not having to do anything\" would only be possible if Debian et. al reverted their clever idea to rename the include location to `Lfunction`.\n\nI mean \"not having to do anything when building sagelib on Arch\"\n\n> I don't know what you mean by a fallback here. \n\nI mean a reasonable behavior out of the box when the variable is unset. (ie. if some distro renames the header dir or the lib name, not setting the variable should use the upstream name)",
    "created_at": "2019-09-02T08:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442565",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@dimpase](#comment%3A29):
> "not having to do anything" would only be possible if Debian et. al reverted their clever idea to rename the include location to `Lfunction`.

I mean "not having to do anything when building sagelib on Arch"

> I don't know what you mean by a fallback here. 

I mean a reasonable behavior out of the box when the variable is unset. (ie. if some distro renames the header dir or the lib name, not setting the variable should use the upstream name)



---

archive/issue_events_368935.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-09-02T08:10:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368935"
}
```



---

archive/issue_events_368936.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-09-02T08:10:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368936"
}
```



---

archive/issue_comments_442566.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80bef09bb4d2f6408bf8b1dd7316d6fa91c9dd70\">80bef09</a></td><td><code>distutils can't deal with empty extra_compile_args</code></td></tr></table>\n",
    "created_at": "2019-09-02T08:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442566",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32" align="right">Comment 32</div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80bef09bb4d2f6408bf8b1dd7316d6fa91c9dd70">80bef09</a></td><td><code>distutils can't deal with empty extra_compile_args</code></td></tr></table>




---

archive/issue_comments_442567.json:
```json
{
    "body": "Changed commit from **[d18b88c](https://github.com/sagemath/sagetrac-mirror/commit/d18b88c23d303c5c2654fce6094aae916cd03fec)** to **[80bef09](https://github.com/sagemath/sagetrac-mirror/commit/80bef09bb4d2f6408bf8b1dd7316d6fa91c9dd70)**",
    "created_at": "2019-09-02T08:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d18b88c](https://github.com/sagemath/sagetrac-mirror/commit/d18b88c23d303c5c2654fce6094aae916cd03fec)** to **[80bef09](https://github.com/sagemath/sagetrac-mirror/commit/80bef09bb4d2f6408bf8b1dd7316d6fa91c9dd70)**



---

archive/issue_events_368937.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-02T08:11:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368937"
}
```



---

archive/issue_events_368938.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-02T08:11:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368938"
}
```



---

archive/issue_comments_442568.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nreworded the last commit message, no code changes.",
    "created_at": "2019-09-02T08:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442568",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">Comment 33</div>

reworded the last commit message, no code changes.



---

archive/issue_comments_442569.json:
```json
{
    "body": "Changed dependencies from **#28242** to none",
    "created_at": "2019-09-02T08:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442569",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#28242** to none



---

archive/issue_comments_442570.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nI avoided this ticket so far because `lcalc` is one of those packages that \"smells\" and may be better left alone. \n\nFor the record sage-on-gentoo installs headers in `Lfunction` which is closer to the original upstream than what `libLfunction` is. The latter being a sage packaging special.\nhttps://github.com/sagemath/sagetrac-mirror/blob/master/build/pkgs/lcalc/patches/Makefile.patch#L231\nbeing replaced by\nhttps://github.com/sagemath/sagetrac-mirror/blob/master/build/pkgs/lcalc/patches/Makefile.patch#L234",
    "created_at": "2019-09-02T08:12:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442570",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:35" align="right">Comment 35</div>

I avoided this ticket so far because `lcalc` is one of those packages that "smells" and may be better left alone. 

For the record sage-on-gentoo installs headers in `Lfunction` which is closer to the original upstream than what `libLfunction` is. The latter being a sage packaging special.
https://github.com/sagemath/sagetrac-mirror/blob/master/build/pkgs/lcalc/patches/Makefile.patch#L231
being replaced by
https://github.com/sagemath/sagetrac-mirror/blob/master/build/pkgs/lcalc/patches/Makefile.patch#L234



---

archive/issue_comments_442571.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nShall we change the default and also the patch to use `Lfunction` then?\n\nI can change it in conda.",
    "created_at": "2019-09-02T08:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442571",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:36" align="right">Comment 36</div>

Shall we change the default and also the patch to use `Lfunction` then?

I can change it in conda.



---

archive/issue_comments_442572.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nBeing uniform about these headers locations in distributions and sage certainly would help.",
    "created_at": "2019-09-02T08:24:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442572",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:37" align="right">Comment 37</div>

Being uniform about these headers locations in distributions and sage certainly would help.



---

archive/issue_comments_442573.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nRight. I just checked that on Fedora it's `Lfunction` too.\nI've asked on sage-devel about the reason for these naming twists...\nhttps://groups.google.com/d/msg/sage-devel/fAPWh1G8_Qw/xMAmtUapAQAJ",
    "created_at": "2019-09-02T10:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442573",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:38" align="right">Comment 38</div>

Right. I just checked that on Fedora it's `Lfunction` too.
I've asked on sage-devel about the reason for these naming twists...
https://groups.google.com/d/msg/sage-devel/fAPWh1G8_Qw/xMAmtUapAQAJ



---

archive/issue_comments_442574.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nI've changed the branch so that `INCDIR` of `libLfunction` is `Lfunction/`.\n\nthis is much simpler, please review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec865162ea07fcd83729792acf69e4c6a4a868bb\">ec86516</a></td><td><code>Updated [SageMath](../wiki/SageMath) version to 8.9.beta8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/567d9a0ce9375984c77a53e740524e50ded10c73\">567d9a0</a></td><td><code>spkg-configure.m4 for lcalc, and INCDIR rename</code></td></tr></table>\n",
    "created_at": "2019-09-03T15:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442574",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">Comment 39</div>

I've changed the branch so that `INCDIR` of `libLfunction` is `Lfunction/`.

this is much simpler, please review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec865162ea07fcd83729792acf69e4c6a4a868bb">ec86516</a></td><td><code>Updated [SageMath](../wiki/SageMath) version to 8.9.beta8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/567d9a0ce9375984c77a53e740524e50ded10c73">567d9a0</a></td><td><code>spkg-configure.m4 for lcalc, and INCDIR rename</code></td></tr></table>




---

archive/issue_events_368939.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-03T15:35:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368939"
}
```



---

archive/issue_events_368940.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-03T15:35:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368940"
}
```



---

archive/issue_comments_442575.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/lcalcconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/lcalcconf)** to **[u/dimpase/packages/lcalcchangeinclude](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/lcalcchangeinclude)**",
    "created_at": "2019-09-03T15:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442575",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/dimpase/packages/lcalcconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/lcalcconf)** to **[u/dimpase/packages/lcalcchangeinclude](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/lcalcchangeinclude)**



---

archive/issue_comments_442576.json:
```json
{
    "body": "Changed commit from **[80bef09](https://github.com/sagemath/sagetrac-mirror/commit/80bef09bb4d2f6408bf8b1dd7316d6fa91c9dd70)** to **[567d9a0](https://github.com/sagemath/sagetrac-mirror/commit/567d9a0ce9375984c77a53e740524e50ded10c73)**",
    "created_at": "2019-09-03T15:35:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442576",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[80bef09](https://github.com/sagemath/sagetrac-mirror/commit/80bef09bb4d2f6408bf8b1dd7316d6fa91c9dd70)** to **[567d9a0](https://github.com/sagemath/sagetrac-mirror/commit/567d9a0ce9375984c77a53e740524e50ded10c73)**



---

archive/issue_events_368941.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-09-03T16:55:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368941"
}
```



---

archive/issue_events_368942.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-09-03T16:55:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368942"
}
```



---

archive/issue_comments_442577.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nNeeds a version bump for lcalc",
    "created_at": "2019-09-03T16:55:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442577",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:40" align="right">Comment 40</div>

Needs a version bump for lcalc



---

archive/issue_comments_442578.json:
```json
{
    "body": "Changed commit from **[567d9a0](https://github.com/sagemath/sagetrac-mirror/commit/567d9a0ce9375984c77a53e740524e50ded10c73)** to **[6aa7e76](https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84)**",
    "created_at": "2019-09-03T19:33:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442578",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[567d9a0](https://github.com/sagemath/sagetrac-mirror/commit/567d9a0ce9375984c77a53e740524e50ded10c73)** to **[6aa7e76](https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84)**



---

archive/issue_comments_442579.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84\">6aa7e76</a></td><td><code>lcalc version bump due to moved INCDIR</code></td></tr></table>\n",
    "created_at": "2019-09-03T19:33:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442579",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41" align="right">Comment 41</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84">6aa7e76</a></td><td><code>lcalc version bump due to moved INCDIR</code></td></tr></table>




---

archive/issue_events_368943.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-03T19:34:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368943"
}
```



---

archive/issue_events_368944.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-03T19:34:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368944"
}
```



---

archive/issue_comments_442580.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nLove the fact that I won't have to patch that little bit anymore - I am sure my colleagues in other distros are happy about that too.",
    "created_at": "2019-09-03T21:45:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442580",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:43" align="right">Comment 43</div>

Love the fact that I won't have to patch that little bit anymore - I am sure my colleagues in other distros are happy about that too.



---

archive/issue_events_368945.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-09-03T21:45:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368945"
}
```



---

archive/issue_events_368946.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-09-03T21:45:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368946"
}
```



---

archive/issue_comments_442581.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/lcalcchangeinclude](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/lcalcchangeinclude)** to **[6aa7e76](https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84)**",
    "created_at": "2019-09-05T21:33:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442581",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/lcalcchangeinclude](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/lcalcchangeinclude)** to **[6aa7e76](https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84)**



---

archive/issue_events_368947.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-05T21:33:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368947"
}
```



---

archive/issue_events_368948.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "16c230b44a4db6ce6763f4d3df07649b0c0c435f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-09-05T21:33:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28224#event-368948"
}
```



---

archive/issue_comments_442582.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nFYI, a more recent snapshot, for version 1.3, is available at https://github.com/agrawroh/l-calc .\nIt has been exported from code.google.com/p/l-calc.",
    "created_at": "2020-03-30T12:44:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442582",
    "user": "https://github.com/thierry-FreeBSD"
}
```

<div id="comment:45" align="right">Comment 45</div>

FYI, a more recent snapshot, for version 1.3, is available at https://github.com/agrawroh/l-calc .
It has been exported from code.google.com/p/l-calc.



---

archive/issue_comments_442583.json:
```json
{
    "body": "Changed commit from **[6aa7e76](https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84)** to none",
    "created_at": "2020-03-30T12:44:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28224#issuecomment-442583",
    "user": "https://github.com/thierry-FreeBSD"
}
```

Changed commit from **[6aa7e76](https://github.com/sagemath/sagetrac-mirror/commit/6aa7e76c3a5058c3427bfc0d0f1c501e78369e84)** to none
