# Issue 28224: spkg-configure.m4 for lcalc

archive/issues_027987.json:
```json
{
    "body": "Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`). On Debian one needs packages `liblfunction-dev` and `lcalc`.\n\nOne needs to check how well-patched they are.\n\nWe had to introduce an env. var. `SAGE_LCALC_INCDIR_NOLIBPREFIX` to deal with the discrepancy in the include names, which is `libLfunction/` on sage-dist, but `Lfunction/` on Debian.\n\nif `SAGE_LCALC_INCDIR_NOLIBPREFIX` is not `''` then we assume that \nthe include prefix is  `Lfunction/`, and otherwise it is\n`libLfunction/`.\n\n\n\nCC:  @embray @isuruf @antonio-rojas @kiwifb\n\nKeywords: spkg-configure\n\nReviewer: Isuru Fernando\n\nAuthor: Dima Pasechnik\n\nBranch: 6aa7e76c3a5058c3427bfc0d0f1c501e78369e84\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28224\n\n",
    "closed_at": "2019-09-05T21:33:13Z",
    "created_at": "2019-07-21T10:15:25Z",
    "labels": [
        "component: build: configure"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "spkg-configure.m4 for lcalc",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28224",
    "user": "https://github.com/dimpase"
}
```
Debian and Fedora package lcalc (Fedora calls the package `L-function-devel`). On Debian one needs packages `liblfunction-dev` and `lcalc`.

One needs to check how well-patched they are.

We had to introduce an env. var. `SAGE_LCALC_INCDIR_NOLIBPREFIX` to deal with the discrepancy in the include names, which is `libLfunction/` on sage-dist, but `Lfunction/` on Debian.

if `SAGE_LCALC_INCDIR_NOLIBPREFIX` is not `''` then we assume that 
the include prefix is  `Lfunction/`, and otherwise it is
`libLfunction/`.



CC:  @embray @isuruf @antonio-rojas @kiwifb

Keywords: spkg-configure

Reviewer: Isuru Fernando

Author: Dima Pasechnik

Branch: 6aa7e76c3a5058c3427bfc0d0f1c501e78369e84

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28224





---

archive/issue_comments_420925.json:
```json
{
    "body": "<a id='comment:1'></a>Does Conda provide `lcalc`?",
    "created_at": "2019-07-21T10:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420925",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>Does Conda provide `lcalc`?



---

archive/issue_comments_420926.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 dimpase]:\n> Does Conda provide `lcalc`?\n\n\nYes and uses the patches from sage https://github.com/conda-forge/lcalc-feedstock/tree/master/recipe/patches",
    "created_at": "2019-07-21T16:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420926",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:2'></a>Replying to [comment:1 dimpase]:
> Does Conda provide `lcalc`?


Yes and uses the patches from sage https://github.com/conda-forge/lcalc-feedstock/tree/master/recipe/patches



---

archive/issue_comments_420927.json:
```json
{
    "body": "<a id='comment:3'></a>lcalc depends on PARI, so we need to deal with pari first.",
    "created_at": "2019-07-23T19:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420927",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>lcalc depends on PARI, so we need to deal with pari first.



---

archive/issue_comments_420928.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Debian and Fedora package lcalc (Fedora calls the package \\`L-function-devel\\`).\n+Debian and Fedora package lcalc (Fedora calls the package \\`L-function-devel\\`). On Debian one needs packages \\`liblfunction-dev\\` and \\`lcalc\\`.\n \n One needs to check how well-patched they are.\n \n```\n",
    "created_at": "2019-08-09T10:38:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420928",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Debian and Fedora package lcalc (Fedora calls the package \`L-function-devel\`).
+Debian and Fedora package lcalc (Fedora calls the package \`L-function-devel\`). On Debian one needs packages \`liblfunction-dev\` and \`lcalc\`.
 
 One needs to check how well-patched they are.
 
```




---

archive/issue_comments_420929.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2019-09-01T01:49:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420929",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_420930.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-09-01T01:49:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420930",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_420931.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-09-01T02:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420931",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_420932.json:
```json
{
    "body": "<a id='comment:6'></a>sage-dist, conda, arch installs the header as `<prefix>/include/libLfunction/L.h` while debian installs it as `<prefix>/include/Lfunction/L.h`.\n\nYou'll need more changes to make lcalc work with Debian way. For eg: https://github.com/sagemath/sage/blob/master/src/sage/libs/lcalc/lcalc_sage.h#L1",
    "created_at": "2019-09-01T02:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420932",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:6'></a>sage-dist, conda, arch installs the header as `<prefix>/include/libLfunction/L.h` while debian installs it as `<prefix>/include/Lfunction/L.h`.

You'll need more changes to make lcalc work with Debian way. For eg: https://github.com/sagemath/sage/blob/master/src/sage/libs/lcalc/lcalc_sage.h#L1



---

archive/issue_comments_420933.json:
```json
{
    "body": "<a id='comment:7'></a>oops, right, one would in the very least deal with hardcoded\n\n```\nsrc/sage/libs/lcalc/lcalc_sage.h:#include \"libLfunction/L.h\"\n```",
    "created_at": "2019-09-01T11:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420933",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>oops, right, one would in the very least deal with hardcoded

```
src/sage/libs/lcalc/lcalc_sage.h:#include "libLfunction/L.h"
```



---

archive/issue_comments_420934.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-09-01T19:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420934",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420935.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-09-01T19:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420935",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_420936.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-09-01T19:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420936",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_420937.json:
```json
{
    "body": "<a id='comment:10'></a>OK, so the updated branch works with Debian's lcalc, currently checking with sage-dist's lcalc.\nAny chance to test this with Conda? Thanks!",
    "created_at": "2019-09-01T19:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420937",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>OK, so the updated branch works with Debian's lcalc, currently checking with sage-dist's lcalc.
Any chance to test this with Conda? Thanks!



---

archive/issue_comments_420938.json:
```json
{
    "body": "<a id='comment:11'></a>Works for me on conda. I see that you have `test x$ac_cv_header_libLfunction = x`. Isn't that supposed to be `test x$ac_cv_header_libLfunction_L_h = x` ?",
    "created_at": "2019-09-01T19:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420938",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:11'></a>Works for me on conda. I see that you have `test x$ac_cv_header_libLfunction = x`. Isn't that supposed to be `test x$ac_cv_header_libLfunction_L_h = x` ?



---

archive/issue_comments_420939.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-09-01T20:03:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420940.json:
```json
{
    "body": "<a id='comment:13'></a>good catch. I guess you won't be able to build lcalc cython extension without the latest commit...",
    "created_at": "2019-09-01T20:04:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420940",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>good catch. I guess you won't be able to build lcalc cython extension without the latest commit...



---

archive/issue_comments_420941.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-09-01T20:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420941",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_420942.json:
```json
{
    "body": "<a id='comment:14'></a>With the last commit and the one before that, I get\n\n```\nconfigure: === checking whether to install the lcalc SPKG ===\nchecking installing any of pari mpfr? ... no\nchecking for lcalc... /projects/66d93023-00f0-4c12-8a25-5d6d4e486740/sage-build/bin/lcalc\nchecking is lcalc's version good enough? ... yes.\nchecking Lfunction/L.h usability... no\nchecking Lfunction/L.h presence... no\nchecking for Lfunction/L.h... no\nchecking libLfunction/L.h usability... yes\nchecking libLfunction/L.h presence... yes\nchecking for libLfunction/L.h... yes\nchecking whether we can link and run a program using libLfunction... yes; use lcalc from the system\n```\n\nbut lcalc spkg is being built.",
    "created_at": "2019-09-01T20:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420942",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:14'></a>With the last commit and the one before that, I get

```
configure: === checking whether to install the lcalc SPKG ===
checking installing any of pari mpfr? ... no
checking for lcalc... /projects/66d93023-00f0-4c12-8a25-5d6d4e486740/sage-build/bin/lcalc
checking is lcalc's version good enough? ... yes.
checking Lfunction/L.h usability... no
checking Lfunction/L.h presence... no
checking for Lfunction/L.h... no
checking libLfunction/L.h usability... yes
checking libLfunction/L.h presence... yes
checking for libLfunction/L.h... yes
checking whether we can link and run a program using libLfunction... yes; use lcalc from the system
```

but lcalc spkg is being built.



---

archive/issue_comments_420943.json:
```json
{
    "body": "<a id='comment:15'></a>hmm, could you attach the output of ./configure and config.log ? Thanks!",
    "created_at": "2019-09-01T20:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420943",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>hmm, could you attach the output of ./configure and config.log ? Thanks!



---

archive/issue_comments_420944.json:
```json
{
    "body": "<a id='comment:16'></a>Else condition of `AC_CHECK_HEADERS` is run for the first header if it is not found.",
    "created_at": "2019-09-01T20:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420944",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:16'></a>Else condition of `AC_CHECK_HEADERS` is run for the first header if it is not found.



---

archive/issue_comments_420945.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-09-01T20:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420946.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:16 isuruf]:\n> Else condition of `AC_CHECK_HEADERS` is run for the first header if it is not found.\n\n\nfixed by the last commit, good catch. I never used AC_CHECK_HEADER*S* before...",
    "created_at": "2019-09-01T20:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420946",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>Replying to [comment:16 isuruf]:
> Else condition of `AC_CHECK_HEADERS` is run for the first header if it is not found.


fixed by the last commit, good catch. I never used AC_CHECK_HEADER*S* before...



---

archive/issue_comments_420947.json:
```json
{
    "body": "<a id='comment:19'></a>Works for me now.",
    "created_at": "2019-09-01T20:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420947",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:19'></a>Works for me now.



---

archive/issue_comments_420948.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-09-01T22:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420949.json:
```json
{
    "body": "<a id='comment:21'></a>The latest commit fixes a weird build bug I was getting.\nNamely, if `LCALC_INCDIR_NOLIBPREFIX==''` the build was failing.\nSo I made it to always be something non-empty and OK for gcc (7 and 8.3, neither worked).\n\nNeeds final review now.",
    "created_at": "2019-09-01T22:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420949",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>The latest commit fixes a weird build bug I was getting.
Namely, if `LCALC_INCDIR_NOLIBPREFIX==''` the build was failing.
So I made it to always be something non-empty and OK for gcc (7 and 8.3, neither worked).

Needs final review now.



---

archive/issue_comments_420950.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-09-01T22:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420950",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_420951.json:
```json
{
    "body": "<a id='comment:22'></a>I think distutils was sending an empty argument. Empty arguments will give that file not found error.",
    "created_at": "2019-09-01T22:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420951",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:22'></a>I think distutils was sending an empty argument. Empty arguments will give that file not found error.



---

archive/issue_comments_420952.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-09-01T22:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420952",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420953.json:
```json
{
    "body": "<a id='comment:23'></a>reviewer name missing",
    "created_at": "2019-09-02T07:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420953",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'></a>reviewer name missing



---

archive/issue_comments_420954.json:
```json
{
    "body": "<a id='comment:25'></a>Distributions - new env. var., please take a look.",
    "created_at": "2019-09-02T07:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420954",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>Distributions - new env. var., please take a look.



---

archive/issue_comments_420955.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,13 @@\n+Debian and Fedora package lcalc (Fedora calls the package \\`L-function-devel\\`). On Debian one needs packages \\`liblfunction-dev\\` and \\`lcalc\\`.\n+\n+One needs to check how well-patched they are.\n+\n+We had to introduce an env. var. \\`SAGE_LCALC_INCDIR_NOLIBPREFIX\\` to deal with the discrepancy in the include names, which is \\`libLfunction/\\` on sage-dist, but \\`Lfunction/\\` on Debian.\n+\n+if \\`SAGE_LCALC_INCDIR_NOLIBPREFIX\\` is not \\`''\\` then we assume that \n+the include prefix is  \\`Lfunction/\\`, and otherwise it is\n+\\`libLfunction/\\`.\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2019-09-02T07:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420955",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,13 @@
+Debian and Fedora package lcalc (Fedora calls the package \`L-function-devel\`). On Debian one needs packages \`liblfunction-dev\` and \`lcalc\`.
+
+One needs to check how well-patched they are.
+
+We had to introduce an env. var. \`SAGE_LCALC_INCDIR_NOLIBPREFIX\` to deal with the discrepancy in the include names, which is \`libLfunction/\` on sage-dist, but \`Lfunction/\` on Debian.
+
+if \`SAGE_LCALC_INCDIR_NOLIBPREFIX\` is not \`''\` then we assume that 
+the include prefix is  \`Lfunction/\`, and otherwise it is
+\`libLfunction/\`.
+
 
 
 Comment: 1
```




---

archive/issue_comments_420956.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 dimpase]:\n> Distributions - new env. var., please take a look.\n\n\nAs long as there's a fallback that allows not having to set the variable I'm fine with it - I can change the lcalc package headers accordingly.",
    "created_at": "2019-09-02T07:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420956",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:26'></a>Replying to [comment:25 dimpase]:
> Distributions - new env. var., please take a look.


As long as there's a fallback that allows not having to set the variable I'm fine with it - I can change the lcalc package headers accordingly.



---

archive/issue_comments_420957.json:
```json
{
    "body": "<a id='comment:27'></a>I am confused now. I thought that you are fine with variables, but not happy with running configure. Otherwise a much easier solution would have been to have\nsomething like `src/sage/libs/lcalc/lcalc_sage.h.in` and fill it in by `./configure`.",
    "created_at": "2019-09-02T08:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420957",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>I am confused now. I thought that you are fine with variables, but not happy with running configure. Otherwise a much easier solution would have been to have
something like `src/sage/libs/lcalc/lcalc_sage.h.in` and fill it in by `./configure`.



---

archive/issue_comments_420958.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:27 dimpase]:\n> I am confused now. I thought that you are fine with variables, but not happy with running configure. Otherwise a much easier solution would have been to have\n> something like `src/sage/libs/lcalc/lcalc_sage.h.in` and fill it in by `./configure`.\n\n\nRunning configure < setting env variables < not having to do anything\n\nSo using an env variable with a sane fallback is best.",
    "created_at": "2019-09-02T08:02:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420958",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:28'></a>Replying to [comment:27 dimpase]:
> I am confused now. I thought that you are fine with variables, but not happy with running configure. Otherwise a much easier solution would have been to have
> something like `src/sage/libs/lcalc/lcalc_sage.h.in` and fill it in by `./configure`.


Running configure < setting env variables < not having to do anything

So using an env variable with a sane fallback is best.



---

archive/issue_comments_420959.json:
```json
{
    "body": "<a id='comment:29'></a>\"not having to do anything\" would only be possible if Debian et. al reverted their clever idea to rename the include location to `Lfunction`.\n\nI don't know what you mean by a fallback here.",
    "created_at": "2019-09-02T08:05:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420959",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>"not having to do anything" would only be possible if Debian et. al reverted their clever idea to rename the include location to `Lfunction`.

I don't know what you mean by a fallback here.



---

archive/issue_comments_420960.json:
```json
{
    "body": "<a id='comment:30'></a>I don't think any distribution shipping headers in `libLfunction` has to do anything here as there's a fallback in `src/sage/env.py`.",
    "created_at": "2019-09-02T08:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420960",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:30'></a>I don't think any distribution shipping headers in `libLfunction` has to do anything here as there's a fallback in `src/sage/env.py`.



---

archive/issue_comments_420961.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:29 dimpase]:\n> \"not having to do anything\" would only be possible if Debian et. al reverted their clever idea to rename the include location to `Lfunction`.\n\n\nI mean \"not having to do anything when building sagelib on Arch\"\n\n> I don't know what you mean by a fallback here. \n\n\nI mean a reasonable behavior out of the box when the variable is unset. (ie. if some distro renames the header dir or the lib name, not setting the variable should use the upstream name)",
    "created_at": "2019-09-02T08:09:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420961",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:31'></a>Replying to [comment:29 dimpase]:
> "not having to do anything" would only be possible if Debian et. al reverted their clever idea to rename the include location to `Lfunction`.


I mean "not having to do anything when building sagelib on Arch"

> I don't know what you mean by a fallback here. 


I mean a reasonable behavior out of the box when the variable is unset. (ie. if some distro renames the header dir or the lib name, not setting the variable should use the upstream name)



---

archive/issue_comments_420962.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-09-02T08:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_420963.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:",
    "created_at": "2019-09-02T08:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:



---

archive/issue_comments_420964.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-09-02T08:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420964",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420965.json:
```json
{
    "body": "<a id='comment:33'></a>reworded the last commit message, no code changes.",
    "created_at": "2019-09-02T08:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420965",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>reworded the last commit message, no code changes.



---

archive/issue_comments_420966.json:
```json
{
    "body": "<a id='comment:35'></a>I avoided this ticket so far because `lcalc` is one of those packages that \"smells\" and may be better left alone. \n\nFor the record sage-on-gentoo installs headers in `Lfunction` which is closer to the original upstream than what `libLfunction` is. The latter being a sage packaging special.\nhttps://github.com/sagemath/sagetrac-mirror/blob/master/build/pkgs/lcalc/patches/Makefile.patch#L231\nbeing replaced by\nhttps://github.com/sagemath/sagetrac-mirror/blob/master/build/pkgs/lcalc/patches/Makefile.patch#L234",
    "created_at": "2019-09-02T08:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420966",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:35'></a>I avoided this ticket so far because `lcalc` is one of those packages that "smells" and may be better left alone. 

For the record sage-on-gentoo installs headers in `Lfunction` which is closer to the original upstream than what `libLfunction` is. The latter being a sage packaging special.
https://github.com/sagemath/sagetrac-mirror/blob/master/build/pkgs/lcalc/patches/Makefile.patch#L231
being replaced by
https://github.com/sagemath/sagetrac-mirror/blob/master/build/pkgs/lcalc/patches/Makefile.patch#L234



---

archive/issue_comments_420967.json:
```json
{
    "body": "<a id='comment:36'></a>Shall we change the default and also the patch to use `Lfunction` then?\n\nI can change it in conda.",
    "created_at": "2019-09-02T08:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420967",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:36'></a>Shall we change the default and also the patch to use `Lfunction` then?

I can change it in conda.



---

archive/issue_comments_420968.json:
```json
{
    "body": "<a id='comment:37'></a>Being uniform about these headers locations in distributions and sage certainly would help.",
    "created_at": "2019-09-02T08:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420968",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:37'></a>Being uniform about these headers locations in distributions and sage certainly would help.



---

archive/issue_comments_420969.json:
```json
{
    "body": "<a id='comment:38'></a>Right. I just checked that on Fedora it's `Lfunction` too.\nI've asked on sage-devel about the reason for these naming twists...\nhttps://groups.google.com/d/msg/sage-devel/fAPWh1G8_Qw/xMAmtUapAQAJ",
    "created_at": "2019-09-02T10:59:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420969",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>Right. I just checked that on Fedora it's `Lfunction` too.
I've asked on sage-devel about the reason for these naming twists...
https://groups.google.com/d/msg/sage-devel/fAPWh1G8_Qw/xMAmtUapAQAJ



---

archive/issue_comments_420970.json:
```json
{
    "body": "<a id='comment:39'></a>I've changed the branch so that `INCDIR` of `libLfunction` is `Lfunction/`.\n\nthis is much simpler, please review.\n\n---\nNew commits:",
    "created_at": "2019-09-03T15:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420970",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>I've changed the branch so that `INCDIR` of `libLfunction` is `Lfunction/`.

this is much simpler, please review.

---
New commits:



---

archive/issue_comments_420971.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2019-09-03T15:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420971",
    "user": "https://github.com/dimpase"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_420972.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-09-03T16:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420972",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_420973.json:
```json
{
    "body": "<a id='comment:40'></a>Needs a version bump for lcalc",
    "created_at": "2019-09-03T16:55:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420973",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:40'></a>Needs a version bump for lcalc



---

archive/issue_comments_420974.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-09-03T19:33:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_420975.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-09-03T19:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420975",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_420976.json:
```json
{
    "body": "<a id='comment:43'></a>Love the fact that I won't have to patch that little bit anymore - I am sure my colleagues in other distros are happy about that too.",
    "created_at": "2019-09-03T21:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420976",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:43'></a>Love the fact that I won't have to patch that little bit anymore - I am sure my colleagues in other distros are happy about that too.



---

archive/issue_comments_420977.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-09-03T21:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420977",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_070174.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-09-05T21:33:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28224#event-70174"
}
```



---

archive/issue_comments_420978.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-09-05T21:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420978",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_420979.json:
```json
{
    "body": "<a id='comment:45'></a>FYI, a more recent snapshot, for version 1.3, is available at https://github.com/agrawroh/l-calc .\nIt has been exported from code.google.com/p/l-calc.",
    "created_at": "2020-03-30T12:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28224",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28224#issuecomment-420979",
    "user": "https://github.com/thierry-FreeBSD"
}
```

<a id='comment:45'></a>FYI, a more recent snapshot, for version 1.3, is available at https://github.com/agrawroh/l-calc .
It has been exported from code.google.com/p/l-calc.
