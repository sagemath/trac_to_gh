# Issue 28170: enhance is_postcritically_finite, critical_point_portrait, and multiplier_spectra to work over number fields and finite fields

archive/issues_027933.json:
```json
{
    "body": "The following code does not work as mentioned functions currently go to the algebraic closure:\n\n```\nsage: F.<a> = QuadraticField(2)\nsage: P.<x,y> = ProjectiveSpace(F, 1)\nsage: f = DynamicalSystem_projective([-y^3, a*x^3 - 3*x^2*y + 3*x*y^2 - y^3])\nsage: f.is_postcritically_finite()\n```\n\n```\nsage: F.<a> = GF(7)\nsage: P.<x,y> = ProjectiveSpace(F, 1)\nsage: f = DynamicalSystem_projective([x^2 + y^2, y^2])\nsage: f.multiplier_spectra(1)\n```\n\nWe call field_of_definition_critical/field_of_definition_periodic on f to change ring to a finite extension instead of QQbar, so that functionality is preserved for number fields. \n\nAdditionally, we add _is_preperiodic and is_postcritically_finite to the DynamicalSystem_projective_finite_field class: every point is preperiodic over a finite field, so both functions should return True. If return_period=True in _is_preperiodic, we call orbit_structure. \nIn order to normalize output, we modify orbit_structure to return (m,n) as a tuple instead of a list. \n\nIn doctests for multiplier_spectra, using field of definition instead of QQbar permuted multipliers in several outputs. We corrected this and hope to prevent similar issues by sorting the output.\n\nThese changes allow is_postcritically_finite and multiplier_spectra to work over finite fields as well. \n\nKeywords: SI2019, sd104\n\nBranch/Commit: 321adf3cecc6dbc198ca92c2481ff832e8e6e380\n\nReviewer: Meghan Grip, Talia Blum, John Doyle, Alexis Suki Dasher, John Michael Clark\n\nAuthor: Heidi Benham, Julia Cai, Leopold Mayer, Ben Hutz\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28170\n\n",
    "closed_at": "2019-11-30T13:35:57Z",
    "created_at": "2019-07-11T14:23:15Z",
    "labels": [
        "component: dynamics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "enhance is_postcritically_finite, critical_point_portrait, and multiplier_spectra to work over number fields and finite fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28170",
    "user": "https://github.com/juliacai05"
}
```
The following code does not work as mentioned functions currently go to the algebraic closure:

```
sage: F.<a> = QuadraticField(2)
sage: P.<x,y> = ProjectiveSpace(F, 1)
sage: f = DynamicalSystem_projective([-y^3, a*x^3 - 3*x^2*y + 3*x*y^2 - y^3])
sage: f.is_postcritically_finite()
```

```
sage: F.<a> = GF(7)
sage: P.<x,y> = ProjectiveSpace(F, 1)
sage: f = DynamicalSystem_projective([x^2 + y^2, y^2])
sage: f.multiplier_spectra(1)
```

We call field_of_definition_critical/field_of_definition_periodic on f to change ring to a finite extension instead of QQbar, so that functionality is preserved for number fields. 

Additionally, we add _is_preperiodic and is_postcritically_finite to the DynamicalSystem_projective_finite_field class: every point is preperiodic over a finite field, so both functions should return True. If return_period=True in _is_preperiodic, we call orbit_structure. 
In order to normalize output, we modify orbit_structure to return (m,n) as a tuple instead of a list. 

In doctests for multiplier_spectra, using field of definition instead of QQbar permuted multipliers in several outputs. We corrected this and hope to prevent similar issues by sorting the output.

These changes allow is_postcritically_finite and multiplier_spectra to work over finite fields as well. 

Keywords: SI2019, sd104

Branch/Commit: 321adf3cecc6dbc198ca92c2481ff832e8e6e380

Reviewer: Meghan Grip, Talia Blum, John Doyle, Alexis Suki Dasher, John Michael Clark

Author: Heidi Benham, Julia Cai, Leopold Mayer, Ben Hutz

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28170





---

archive/issue_comments_539111.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,4 +19,6 @@\n Additionally, we add _is_preperiodic and is_postcritically_finite to the DynamicalSystem_projective_finite_field class: every point is preperiodic over a finite field, so both functions should return True. If return_period=True in _is_preperiodic, we call orbit_structure. \n In order to normalize output, we modify orbit_structure to return (m,n) as a tuple instead of a list. \n \n+In doctests for multiplier_spectra, using field of definition instead of QQbar permuted multipliers in several outputs. We corrected this and hope to prevent similar issues by sorting the output.\n+\n These changes allow is_postcritically_finite and multiplier_spectra to work over finite fields as well. \n``````\n",
    "created_at": "2019-07-11T14:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539111",
    "user": "https://github.com/juliacai05"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,4 +19,6 @@
 Additionally, we add _is_preperiodic and is_postcritically_finite to the DynamicalSystem_projective_finite_field class: every point is preperiodic over a finite field, so both functions should return True. If return_period=True in _is_preperiodic, we call orbit_structure. 
 In order to normalize output, we modify orbit_structure to return (m,n) as a tuple instead of a list. 
 
+In doctests for multiplier_spectra, using field of definition instead of QQbar permuted multipliers in several outputs. We corrected this and hope to prevent similar issues by sorting the output.
+
 These changes allow is_postcritically_finite and multiplier_spectra to work over finite fields as well. 
``````




---

archive/issue_comments_539112.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\"",
    "created_at": "2019-07-11T15:17:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539112",
    "user": "https://github.com/leopoldmayer"
}
```

Changing branch from "" to "u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields"



---

archive/issue_comments_539113.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-18T13:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539113",
    "user": "https://github.com/juliacai05"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_539114.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[d145dca](https://github.com/sagemath/sagetrac-mirror/commit/d145dca112b3d8e37fdafec5e1d3df1921847cb1)|`28170 - enhance several functions using field_of_definition functions`|\n|[b9f28bc](https://github.com/sagemath/sagetrac-mirror/commit/b9f28bc1a6231a97b25a26dd233dd619476b84a3)|`Merge branch 'is_pcf' into t/28170/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields`|",
    "created_at": "2019-07-18T13:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539114",
    "user": "https://github.com/juliacai05"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[d145dca](https://github.com/sagemath/sagetrac-mirror/commit/d145dca112b3d8e37fdafec5e1d3df1921847cb1)|`28170 - enhance several functions using field_of_definition functions`|
|[b9f28bc](https://github.com/sagemath/sagetrac-mirror/commit/b9f28bc1a6231a97b25a26dd233dd619476b84a3)|`Merge branch 'is_pcf' into t/28170/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields`|



---

archive/issue_comments_539115.json:
```json
{
    "body": "Changing commit from \"\" to \"b9f28bc1a6231a97b25a26dd233dd619476b84a3\"",
    "created_at": "2019-07-18T13:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539115",
    "user": "https://github.com/juliacai05"
}
```

Changing commit from "" to "b9f28bc1a6231a97b25a26dd233dd619476b84a3"



---

archive/issue_comments_539116.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Meghan Grip, Talia Blum\"",
    "created_at": "2019-07-18T13:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539116",
    "user": "https://github.com/meggrip"
}
```

Changing reviewer from "" to "Meghan Grip, Talia Blum"



---

archive/issue_comments_539117.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-18T13:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539117",
    "user": "https://github.com/meggrip"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_539118.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-07-20T22:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539118",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_539119.json:
```json
{
    "body": "<a id='comment:5'></a>\n\n```\nsage -t --long --warn-long 49.7 src/sage/dynamics/arithmetic_dynamics/projective_ds.py\n**********************************************************************\nFile \"src/sage/dynamics/arithmetic_dynamics/projective_ds.py\", line 264, in sage.dynamics.arithmetic_dynamics.projective_ds.?\nFailed example:\n    fbar.is_postcritically_finite()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.dynamics.arithmetic_dynamics.projective_ds.?[32]>\", line 1, in <module>\n        fbar.is_postcritically_finite()\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/dynamics/arithmetic_dynamics/projective_ds.py\", line 3105, in is_postcritically_finite\n        embedding = self.field_of_definition_critical(return_embedding=True)[1]\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/dynamics/arithmetic_dynamics/generic_ds.py\", line 412, in field_of_definition_critical\n        K = poly.splitting_field(names, map=return_embedding, simplify_all=simplify_all)\n      File \"sage/rings/polynomial/polynomial_element.pyx\", line 4548, in sage.rings.polynomial.polynomial_element.Polynomial.splitting_field (build/cythonized/sage/rings/polynomial/polynomial_element.c:38804)\n        raise NotImplementedError(\"splitting_field() is only implemented over number fields and finite fields\")\n    NotImplementedError: splitting_field() is only implemented over number fields and finite fields\n```",
    "created_at": "2019-07-20T22:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539119",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>

```
sage -t --long --warn-long 49.7 src/sage/dynamics/arithmetic_dynamics/projective_ds.py
**********************************************************************
File "src/sage/dynamics/arithmetic_dynamics/projective_ds.py", line 264, in sage.dynamics.arithmetic_dynamics.projective_ds.?
Failed example:
    fbar.is_postcritically_finite()
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.dynamics.arithmetic_dynamics.projective_ds.?[32]>", line 1, in <module>
        fbar.is_postcritically_finite()
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/dynamics/arithmetic_dynamics/projective_ds.py", line 3105, in is_postcritically_finite
        embedding = self.field_of_definition_critical(return_embedding=True)[1]
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/dynamics/arithmetic_dynamics/generic_ds.py", line 412, in field_of_definition_critical
        K = poly.splitting_field(names, map=return_embedding, simplify_all=simplify_all)
      File "sage/rings/polynomial/polynomial_element.pyx", line 4548, in sage.rings.polynomial.polynomial_element.Polynomial.splitting_field (build/cythonized/sage/rings/polynomial/polynomial_element.c:38804)
        raise NotImplementedError("splitting_field() is only implemented over number fields and finite fields")
    NotImplementedError: splitting_field() is only implemented over number fields and finite fields
```



---

archive/issue_comments_539120.json:
```json
{
    "body": "Changing branch from \"u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\" to \"u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\"",
    "created_at": "2019-07-25T14:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539120",
    "user": "https://github.com/juliacai05"
}
```

Changing branch from "u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields" to "u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields"



---

archive/issue_comments_539121.json:
```json
{
    "body": "<a id='comment:7'></a>\nModified is_postcritically_finite to check if base ring of f is algebraically closed before attempting to change ring.",
    "created_at": "2019-07-25T14:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539121",
    "user": "https://github.com/juliacai05"
}
```

<a id='comment:7'></a>
Modified is_postcritically_finite to check if base ring of f is algebraically closed before attempting to change ring.



---

archive/issue_comments_539122.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-25T14:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539122",
    "user": "https://github.com/juliacai05"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_539123.json:
```json
{
    "body": "Changing branch from \"u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\" to \"u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\"",
    "created_at": "2019-07-25T14:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539123",
    "user": "https://github.com/juliacai05"
}
```

Changing branch from "u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields" to "u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields"



---

archive/issue_comments_539124.json:
```json
{
    "body": "Changing commit from \"b9f28bc1a6231a97b25a26dd233dd619476b84a3\" to \"0b6ead011672404f088ab46b04b0b7ea8c270065\"",
    "created_at": "2019-07-25T15:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539124",
    "user": "https://github.com/juliacai05"
}
```

Changing commit from "b9f28bc1a6231a97b25a26dd233dd619476b84a3" to "0b6ead011672404f088ab46b04b0b7ea8c270065"



---

archive/issue_comments_539125.json:
```json
{
    "body": "Changing branch from \"u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\" to \"u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\"",
    "created_at": "2019-07-25T15:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539125",
    "user": "https://github.com/juliacai05"
}
```

Changing branch from "u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields" to "u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields"



---

archive/issue_comments_539126.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew commits:\n|                                                                                                                                          |                                                                                                                                                                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|[b9b49b2](https://github.com/sagemath/sagetrac-mirror/commit/b9b49b2e1ffd5f7905d1803e05ad864e0c1d6253)|`Merge branch 'u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields' of git://trac.sagemath.org/sage into edit_28170`|\n|[0b6ead0](https://github.com/sagemath/sagetrac-mirror/commit/0b6ead011672404f088ab46b04b0b7ea8c270065)|`Edit 28170 to address doctest failure`|",
    "created_at": "2019-07-25T15:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539126",
    "user": "https://github.com/juliacai05"
}
```

<a id='comment:8'></a>
New commits:
|                                                                                                                                          |                                                                                                                                                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|[b9b49b2](https://github.com/sagemath/sagetrac-mirror/commit/b9b49b2e1ffd5f7905d1803e05ad864e0c1d6253)|`Merge branch 'u/gh-leopoldmayer/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields' of git://trac.sagemath.org/sage into edit_28170`|
|[0b6ead0](https://github.com/sagemath/sagetrac-mirror/commit/0b6ead011672404f088ab46b04b0b7ea8c270065)|`Edit 28170 to address doctest failure`|



---

archive/issue_comments_539127.json:
```json
{
    "body": "Changing commit from \"0b6ead011672404f088ab46b04b0b7ea8c270065\" to \"5c8e1f044be74a0b3d4f27c18421cfd81cd4d00e\"",
    "created_at": "2019-07-30T15:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0b6ead011672404f088ab46b04b0b7ea8c270065" to "5c8e1f044be74a0b3d4f27c18421cfd81cd4d00e"



---

archive/issue_comments_539128.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[e649e4e](https://github.com/sagemath/sagetrac-mirror/commit/e649e4e2508c6a37cccb871fbd7b3b08cc41aa02)|`28263 : Added a degree function for dynamical systems and affine morphisms.`|\n|[b504232](https://github.com/sagemath/sagetrac-mirror/commit/b5042327245e5528cc61f7470bfe9025faded4e1)|`Merge branch 8.9.beta4 of git://trac.sagemath.org/sage into 28263`|\n|[5be01a9](https://github.com/sagemath/sagetrac-mirror/commit/5be01a9ed39f440adee52daa5a126faf1f1bff69)|`Merge branch 'u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields' of git://trac.sagemath.org/sage into change_28170`|\n|[5c8e1f0](https://github.com/sagemath/sagetrac-mirror/commit/5c8e1f044be74a0b3d4f27c18421cfd81cd4d00e)|`28170 - added embedding parameter to is_pcf over finite fields so that critical_point_portrait works over finite fields`|",
    "created_at": "2019-07-30T15:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539128",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[e649e4e](https://github.com/sagemath/sagetrac-mirror/commit/e649e4e2508c6a37cccb871fbd7b3b08cc41aa02)|`28263 : Added a degree function for dynamical systems and affine morphisms.`|
|[b504232](https://github.com/sagemath/sagetrac-mirror/commit/b5042327245e5528cc61f7470bfe9025faded4e1)|`Merge branch 8.9.beta4 of git://trac.sagemath.org/sage into 28263`|
|[5be01a9](https://github.com/sagemath/sagetrac-mirror/commit/5be01a9ed39f440adee52daa5a126faf1f1bff69)|`Merge branch 'u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields' of git://trac.sagemath.org/sage into change_28170`|
|[5c8e1f0](https://github.com/sagemath/sagetrac-mirror/commit/5c8e1f044be74a0b3d4f27c18421cfd81cd4d00e)|`28170 - added embedding parameter to is_pcf over finite fields so that critical_point_portrait works over finite fields`|



---

archive/issue_comments_539129.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-30T18:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539129",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_539130.json:
```json
{
    "body": "<a id='comment:10'></a>\nerr...looks like you got the affine degree function mixed in with your code for this ticket. That needs to be removed.",
    "created_at": "2019-07-30T18:52:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539130",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:10'></a>
err...looks like you got the affine degree function mixed in with your code for this ticket. That needs to be removed.



---

archive/issue_comments_539131.json:
```json
{
    "body": "Changing commit from \"5c8e1f044be74a0b3d4f27c18421cfd81cd4d00e\" to \"b684a71832a24f5c34a06cd7b2e4781d35aa4db0\"",
    "created_at": "2019-07-31T15:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539131",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5c8e1f044be74a0b3d4f27c18421cfd81cd4d00e" to "b684a71832a24f5c34a06cd7b2e4781d35aa4db0"



---

archive/issue_comments_539132.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[6878a90](https://github.com/sagemath/sagetrac-mirror/commit/6878a904005c7969641fe2d7acd773b843d048a1)|`28170 - remove affine degree function from code for ticket`|\n|[d1ff92a](https://github.com/sagemath/sagetrac-mirror/commit/d1ff92a610f08be784a47b4d39336b09060760f6)|`Merge branch 'u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields' of git://trac.sagemath.org/sage into fix_28170`|\n|[b684a71](https://github.com/sagemath/sagetrac-mirror/commit/b684a71832a24f5c34a06cd7b2e4781d35aa4db0)|`28170: removed affine degree function code`|",
    "created_at": "2019-07-31T15:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[6878a90](https://github.com/sagemath/sagetrac-mirror/commit/6878a904005c7969641fe2d7acd773b843d048a1)|`28170 - remove affine degree function from code for ticket`|
|[d1ff92a](https://github.com/sagemath/sagetrac-mirror/commit/d1ff92a610f08be784a47b4d39336b09060760f6)|`Merge branch 'u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields' of git://trac.sagemath.org/sage into fix_28170`|
|[b684a71](https://github.com/sagemath/sagetrac-mirror/commit/b684a71832a24f5c34a06cd7b2e4781d35aa4db0)|`28170: removed affine degree function code`|



---

archive/issue_comments_539133.json:
```json
{
    "body": "<a id='comment:12'></a>\naffine degree function code from 28163 removed",
    "created_at": "2019-07-31T15:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539133",
    "user": "https://github.com/juliacai05"
}
```

<a id='comment:12'></a>
affine degree function code from 28163 removed



---

archive/issue_comments_539134.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-31T15:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539134",
    "user": "https://github.com/juliacai05"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_539135.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-31T15:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539135",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdoyle"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_539136.json:
```json
{
    "body": "Changing reviewer from \"Meghan Grip, Talia Blum\" to \"Meghan Grip, Talia Blum, John Doyle\"",
    "created_at": "2019-07-31T15:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539136",
    "user": "https://trac.sagemath.org/admin/accounts/users/jdoyle"
}
```

Changing reviewer from "Meghan Grip, Talia Blum" to "Meghan Grip, Talia Blum, John Doyle"



---

archive/issue_comments_539137.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-08-03T14:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539137",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_539138.json:
```json
{
    "body": "<a id='comment:14'></a>\nMerge conflict, please merge in the next beta...",
    "created_at": "2019-08-03T14:21:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539138",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
Merge conflict, please merge in the next beta...



---

archive/issue_comments_539139.json:
```json
{
    "body": "Changing branch from \"u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\" to \"u/bhutz/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\"",
    "created_at": "2019-11-18T19:49:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539139",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "u/gh-juliacai05/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields" to "u/bhutz/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields"



---

archive/issue_comments_539140.json:
```json
{
    "body": "Changing commit from \"b684a71832a24f5c34a06cd7b2e4781d35aa4db0\" to \"c877e6853eda82e6b558a3b0773057ec820b7168\"",
    "created_at": "2019-11-19T17:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539140",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b684a71832a24f5c34a06cd7b2e4781d35aa4db0" to "c877e6853eda82e6b558a3b0773057ec820b7168"



---

archive/issue_comments_539141.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[c877e68](https://github.com/sagemath/sagetrac-mirror/commit/c877e6853eda82e6b558a3b0773057ec820b7168)|`28170: added option to use closure or splitting fields`|",
    "created_at": "2019-11-19T17:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539141",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[c877e68](https://github.com/sagemath/sagetrac-mirror/commit/c877e6853eda82e6b558a3b0773057ec820b7168)|`28170: added option to use closure or splitting fields`|



---

archive/issue_comments_539142.json:
```json
{
    "body": "Changing author from \"Heidi Benham, Julia Cai, Leopold Mayer\" to \"Heidi Benham, Julia Cai, Leopold Mayer, Ben Hutz\"",
    "created_at": "2019-11-19T18:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539142",
    "user": "https://github.com/bhutz"
}
```

Changing author from "Heidi Benham, Julia Cai, Leopold Mayer" to "Heidi Benham, Julia Cai, Leopold Mayer, Ben Hutz"



---

archive/issue_comments_539143.json:
```json
{
    "body": "<a id='comment:17'></a>\nSince it was often very slow over the splitting fielded made the default to be the algebraic closure with the option of using the splitting field. Added a number of examples.\n\nAdjusted the field_of_definition functions to return the base if it is already the algebraic closure.\n\nThis is ready for another set of eyes.",
    "created_at": "2019-11-19T18:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539143",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:17'></a>
Since it was often very slow over the splitting fielded made the default to be the algebraic closure with the option of using the splitting field. Added a number of examples.

Adjusted the field_of_definition functions to return the base if it is already the algebraic closure.

This is ready for another set of eyes.



---

archive/issue_comments_539144.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-11-19T18:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539144",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_539145.json:
```json
{
    "body": "Changing branch from \"u/bhutz/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields\" to \"u/bhutz/28170\"",
    "created_at": "2019-11-19T18:01:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539145",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "u/bhutz/enhance_is_postcritically_finite__critical_point_portrait__and_multiplier_spectra_to_work_over_number_fields_and_finite_fields" to "u/bhutz/28170"



---

archive/issue_comments_539146.json:
```json
{
    "body": "Changing keywords from \"SI2019\" to \"SI2019, sd104\".",
    "created_at": "2019-11-19T18:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539146",
    "user": "https://github.com/bhutz"
}
```

Changing keywords from "SI2019" to "SI2019, sd104".



---

archive/issue_comments_539147.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-11-19T23:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539147",
    "user": "https://github.com/JohnClarkSage"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_087164.json:
```json
{
    "actor": "https://github.com/JohnClarkSage",
    "created_at": "2019-11-19T23:17:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28170#event-87164"
}
```



---

archive/issue_comments_539148.json:
```json
{
    "body": "Changing reviewer from \"Meghan Grip, Talia Blum, John Doyle\" to \"Meghan Grip, Talia Blum, John Doyle, Alexis Suki Dasher, John Michael Clark\"",
    "created_at": "2019-11-19T23:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539148",
    "user": "https://github.com/JohnClarkSage"
}
```

Changing reviewer from "Meghan Grip, Talia Blum, John Doyle" to "Meghan Grip, Talia Blum, John Doyle, Alexis Suki Dasher, John Michael Clark"



---

archive/issue_comments_539149.json:
```json
{
    "body": "<a id='comment:19'></a>\nThe following code gives an error:\n \n```\nsage: P.<x,y> = ProjectiveSpace(GF(13),1)\nsage: f = DynamicalSystem_projective([x^4 - x^2*y^2 + y^4, y^4])\nsage: f.is_postcritically_finite(use_algebraic_closure=False)\nTypeError: is_postcritically_finite() got an unexpected keyword argument 'use_algebraic_closure'\n```\n\n\nThis should not give an error when giving the keyword 'use_algebraic_closure', and should instead return True regardless. Every point is postcritically finite in a finite field.",
    "created_at": "2019-11-19T23:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539149",
    "user": "https://github.com/JohnClarkSage"
}
```

<a id='comment:19'></a>
The following code gives an error:
 
```
sage: P.<x,y> = ProjectiveSpace(GF(13),1)
sage: f = DynamicalSystem_projective([x^4 - x^2*y^2 + y^4, y^4])
sage: f.is_postcritically_finite(use_algebraic_closure=False)
TypeError: is_postcritically_finite() got an unexpected keyword argument 'use_algebraic_closure'
```


This should not give an error when giving the keyword 'use_algebraic_closure', and should instead return True regardless. Every point is postcritically finite in a finite field.



---

archive/issue_comments_539150.json:
```json
{
    "body": "Changing commit from \"c877e6853eda82e6b558a3b0773057ec820b7168\" to \"321adf3cecc6dbc198ca92c2481ff832e8e6e380\"",
    "created_at": "2019-11-20T13:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539150",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c877e6853eda82e6b558a3b0773057ec820b7168" to "321adf3cecc6dbc198ca92c2481ff832e8e6e380"



---

archive/issue_comments_539151.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[321adf3](https://github.com/sagemath/sagetrac-mirror/commit/321adf3cecc6dbc198ca92c2481ff832e8e6e380)|`28170: fix from review comments`|",
    "created_at": "2019-11-20T13:38:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[321adf3](https://github.com/sagemath/sagetrac-mirror/commit/321adf3cecc6dbc198ca92c2481ff832e8e6e380)|`28170: fix from review comments`|



---

archive/issue_comments_539152.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-11-20T13:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539152",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_539153.json:
```json
{
    "body": "<a id='comment:22'></a>\nAll tests pass.",
    "created_at": "2019-11-20T16:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539153",
    "user": "https://github.com/JohnClarkSage"
}
```

<a id='comment:22'></a>
All tests pass.



---

archive/issue_comments_539154.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-11-20T16:28:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539154",
    "user": "https://github.com/JohnClarkSage"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_539155.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-11-30T13:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539155",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087165.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-30T13:35:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28170#event-87165"
}
```



---

archive/issue_comments_539156.json:
```json
{
    "body": "Changing branch from \"u/bhutz/28170\" to \"321adf3cecc6dbc198ca92c2481ff832e8e6e380\"",
    "created_at": "2019-11-30T13:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28170",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28170#issuecomment-539156",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/bhutz/28170" to "321adf3cecc6dbc198ca92c2481ff832e8e6e380"
