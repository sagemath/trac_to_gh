# Issue 28013: Build Python 3 docker images

archive/issues_027776.json:
```json
{
    "body": "\n\nCC:  @videlec\n\nKeywords: days101, py3, docker\n\nBranch: [public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images)\n\nReviewer: Julian R\u00fcth\n\nCommit: 054a0b49b5afe81bff92a7ef6840de086bda017c\n\nResolution: duplicate\n\nIssue created by migration from https://trac.sagemath.org/ticket/28013\n\n",
    "closed_at": "2019-08-22T06:46:48Z",
    "created_at": "2019-06-19T00:59:57Z",
    "labels": [
        "component: distribution"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Build Python 3 docker images",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28013",
    "user": "https://github.com/saraedum"
}
```


CC:  @videlec

Keywords: days101, py3, docker

Branch: [public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images)

Reviewer: Julian Rüth

Commit: 054a0b49b5afe81bff92a7ef6840de086bda017c

Resolution: duplicate

Issue created by migration from https://trac.sagemath.org/ticket/28013





---

archive/issue_comments_544113.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2019-06-19T01:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544113",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_544114.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2019-06-19T01:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544114",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_544115.json:
```json
{
    "body": "<a id='comment:2'></a>\nCurrently, this is a hack to see whether building on Docker works. We should of course build both Py2 and Py3.",
    "created_at": "2019-06-19T01:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544115",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:2'></a>
Currently, this is a hack to see whether building on Docker works. We should of course build both Py2 and Py3.



---

archive/issue_comments_544116.json:
```json
{
    "body": "Changing keywords from \"\" to \"days101, py3, docker\".",
    "created_at": "2019-06-19T01:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544116",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "days101, py3, docker".



---

archive/issue_comments_544117.json:
```json
{
    "body": "Changing branch from \"\" to \"u/slelievre/t-28013-py3-docker-images\"",
    "created_at": "2019-06-19T01:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544117",
    "user": "https://github.com/slel"
}
```

Changing branch from "" to "u/slelievre/t-28013-py3-docker-images"



---

archive/issue_comments_544118.json:
```json
{
    "body": "<a id='comment:5'></a>\nYou can see the status of this at: https://gitlab.com/sagemath/dev/trac/commits/u/slelievre/t-28013-py3-docker-images\n\n---\nNew commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[b96f62f](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)|`#28013 py3 docker images`|",
    "created_at": "2019-06-19T01:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544118",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>
You can see the status of this at: https://gitlab.com/sagemath/dev/trac/commits/u/slelievre/t-28013-py3-docker-images

---
New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[b96f62f](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)|`#28013 py3 docker images`|



---

archive/issue_comments_544119.json:
```json
{
    "body": "Changing commit from \"\" to \"b96f62ff11bc7eae875ff542ee55716cf2870766\"",
    "created_at": "2019-06-19T01:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544119",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "" to "b96f62ff11bc7eae875ff542ee55716cf2870766"



---

archive/issue_comments_544120.json:
```json
{
    "body": "Changing branch from \"u/slelievre/t-28013-py3-docker-images\" to \"u/saraedum/t-28013-py3-docker-images\"",
    "created_at": "2019-06-19T01:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544120",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/slelievre/t-28013-py3-docker-images" to "u/saraedum/t-28013-py3-docker-images"



---

archive/issue_comments_544121.json:
```json
{
    "body": "Changing commit from \"b96f62ff11bc7eae875ff542ee55716cf2870766\" to \"0d8d4c18ddcfbab5959bfd77069cdded142d96eb\"",
    "created_at": "2019-06-19T13:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544121",
    "user": "https://github.com/embray"
}
```

Changing commit from "b96f62ff11bc7eae875ff542ee55716cf2870766" to "0d8d4c18ddcfbab5959bfd77069cdded142d96eb"



---

archive/issue_comments_544122.json:
```json
{
    "body": "<a id='comment:7'></a>\nCurrently it looks like my gitlab runners *are* working, but every ticket build is timing out because for some reason they're all trying to build openblas, and then timing out after 3 hours.\n\nThe openblas update is new as of I think 8.8.rc0 (I think it was maybe a mistake to update as big a package as openblas in a *release candidate*).  The docker build of 8.8.rc0 seems to have failed in the test-dev job for some random reason.  So I'll try re-running it...  Then all the 8.8.rc1 builds failed as well for some non-obvious reason.\n\n---\nNew commits:\n|                                                                                                                                          |                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[0d8d4c1](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)|`Fix gitlab-ci.yml`|",
    "created_at": "2019-06-19T13:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544122",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Currently it looks like my gitlab runners *are* working, but every ticket build is timing out because for some reason they're all trying to build openblas, and then timing out after 3 hours.

The openblas update is new as of I think 8.8.rc0 (I think it was maybe a mistake to update as big a package as openblas in a *release candidate*).  The docker build of 8.8.rc0 seems to have failed in the test-dev job for some random reason.  So I'll try re-running it...  Then all the 8.8.rc1 builds failed as well for some non-obvious reason.

---
New commits:
|                                                                                                                                          |                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[0d8d4c1](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)|`Fix gitlab-ci.yml`|



---

archive/issue_comments_544123.json:
```json
{
    "body": "<a id='comment:8'></a>\nWhich is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the \"Release\" stage didn't run...?",
    "created_at": "2019-06-19T13:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544123",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the "Release" stage didn't run...?



---

archive/issue_comments_544124.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [embray](#comment%3A8):\n> Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the \"Release\" stage didn't run...?\n\n\nOh, I see, building/releasing from the 8.8.rc1 *tag* did pass, but from the *develop* branch did not pass.\n\nI guess then maybe many of the trac tickets are not based off 8.8.rc1 yet so they're still pulling docker images of older builds that don't include the openblas update.",
    "created_at": "2019-06-19T14:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544124",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
Replying to [embray](#comment%3A8):
> Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the "Release" stage didn't run...?


Oh, I see, building/releasing from the 8.8.rc1 *tag* did pass, but from the *develop* branch did not pass.

I guess then maybe many of the trac tickets are not based off 8.8.rc1 yet so they're still pulling docker images of older builds that don't include the openblas update.



---

archive/issue_comments_544125.json:
```json
{
    "body": "Changing branch from \"u/saraedum/t-28013-py3-docker-images\" to \"public/t-28013-py3-docker-images\"",
    "created_at": "2019-06-19T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544125",
    "user": "https://github.com/slel"
}
```

Changing branch from "u/saraedum/t-28013-py3-docker-images" to "public/t-28013-py3-docker-images"



---

archive/issue_comments_544126.json:
```json
{
    "body": "<a id='comment:10'></a>\nLet's use a public branch for this.\n\n---\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[054a0b4](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)|`Update branch name in .gitlab-ci.yml`|",
    "created_at": "2019-06-19T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544126",
    "user": "https://github.com/slel"
}
```

<a id='comment:10'></a>
Let's use a public branch for this.

---
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[054a0b4](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)|`Update branch name in .gitlab-ci.yml`|



---

archive/issue_comments_544127.json:
```json
{
    "body": "Changing commit from \"0d8d4c18ddcfbab5959bfd77069cdded142d96eb\" to \"054a0b49b5afe81bff92a7ef6840de086bda017c\"",
    "created_at": "2019-06-19T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544127",
    "user": "https://github.com/slel"
}
```

Changing commit from "0d8d4c18ddcfbab5959bfd77069cdded142d96eb" to "054a0b49b5afe81bff92a7ef6840de086bda017c"



---

archive/issue_comments_544128.json:
```json
{
    "body": "<a id='comment:11'></a>\nDuplicate of #28041.",
    "created_at": "2019-08-19T18:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544128",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:11'></a>
Duplicate of #28041.



---

archive/issue_comments_544129.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-08-19T18:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544129",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_078713.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-78713"
}
```



---

archive/issue_comments_544130.json:
```json
{
    "body": "<a id='comment:12'></a>\nOk.",
    "created_at": "2019-08-20T05:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544130",
    "user": "https://github.com/slel"
}
```

<a id='comment:12'></a>
Ok.



---

archive/issue_comments_544131.json:
```json
{
    "body": "Changing author from \"Samuel Leli\u00e8vre\" to \"\"",
    "created_at": "2019-08-20T05:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544131",
    "user": "https://github.com/slel"
}
```

Changing author from "Samuel Lelièvre" to ""



---

archive/issue_comments_544132.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2019-08-22T06:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-544132",
    "user": "https://github.com/fchapoton"
}
```

Resolution: duplicate



---

archive/issue_events_078714.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-22T06:46:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-78714"
}
```
