# Issue 28013: Build Python 3 docker images

archive/issues_027776.json:
```json
{
    "body": "\n\n**CC:**  @videlec\n\n**Keywords:** days101, py3, docker\n\n**Branch:** [public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images)\n\n**Commit:** [054a0b49b5afe81bff92a7ef6840de086bda017c](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)\n\n**Reviewer:** Julian R\u00fcth\n\nIssue created by migration from https://trac.sagemath.org/ticket/28013\n\n",
    "closed_at": "2019-08-22T06:46:48Z",
    "created_at": "2019-06-19T00:59:57Z",
    "labels": [
        "component: distribution",
        "enhancement",
        "duplicate"
    ],
    "title": "Build Python 3 docker images",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28013",
    "user": "https://github.com/saraedum"
}
```


**CC:**  @videlec

**Keywords:** days101, py3, docker

**Branch:** [public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images)

**Commit:** [054a0b49b5afe81bff92a7ef6840de086bda017c](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)

**Reviewer:** Julian Rüth

Issue created by migration from https://trac.sagemath.org/ticket/28013





---

archive/issue_events_251643.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T01:09:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251643"
}
```



---

archive/issue_events_251644.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T01:09:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251644"
}
```



---

archive/issue_events_251645.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T01:09:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251645"
}
```



---

archive/issue_comments_440209.json:
```json
{
    "body": "<a id='comment:2'></a>\nCurrently, this is a hack to see whether building on Docker works. We should of course build both Py2 and Py3.",
    "created_at": "2019-06-19T01:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440209",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:2'></a>
Currently, this is a hack to see whether building on Docker works. We should of course build both Py2 and Py3.



---

archive/issue_comments_440210.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"days101, py3, docker\".",
    "created_at": "2019-06-19T01:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440210",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "days101, py3, docker".



---

archive/issue_comments_440211.json:
```json
{
    "body": "**Branch:** [u/slelievre/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/t-28013-py3-docker-images)",
    "created_at": "2019-06-19T01:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440211",
    "user": "https://github.com/slel"
}
```

**Branch:** [u/slelievre/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/t-28013-py3-docker-images)



---

archive/issue_comments_440212.json:
```json
{
    "body": "<a id='comment:5'></a>\nYou can see the status of this at: https://gitlab.com/sagemath/dev/trac/commits/u/slelievre/t-28013-py3-docker-images\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766\">b96f62f</a></td><td><code>#28013 py3 docker images</code></td></tr></table>\n",
    "created_at": "2019-06-19T01:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440212",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>
You can see the status of this at: https://gitlab.com/sagemath/dev/trac/commits/u/slelievre/t-28013-py3-docker-images

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766">b96f62f</a></td><td><code>#28013 py3 docker images</code></td></tr></table>




---

archive/issue_comments_440213.json:
```json
{
    "body": "**Commit:** [b96f62ff11bc7eae875ff542ee55716cf2870766](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)",
    "created_at": "2019-06-19T01:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440213",
    "user": "https://github.com/saraedum"
}
```

**Commit:** [b96f62ff11bc7eae875ff542ee55716cf2870766](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)



---

archive/issue_comments_440214.json:
```json
{
    "body": "**Changing branch** from \"[u/slelievre/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/t-28013-py3-docker-images)\" to \"[u/saraedum/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/t-28013-py3-docker-images)\".",
    "created_at": "2019-06-19T01:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440214",
    "user": "https://github.com/saraedum"
}
```

**Changing branch** from "[u/slelievre/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/t-28013-py3-docker-images)" to "[u/saraedum/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/t-28013-py3-docker-images)".



---

archive/issue_comments_440215.json:
```json
{
    "body": "**Changing commit** from \"[b96f62ff11bc7eae875ff542ee55716cf2870766](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)\" to \"[0d8d4c18ddcfbab5959bfd77069cdded142d96eb](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)\".",
    "created_at": "2019-06-19T13:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440215",
    "user": "https://github.com/embray"
}
```

**Changing commit** from "[b96f62ff11bc7eae875ff542ee55716cf2870766](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)" to "[0d8d4c18ddcfbab5959bfd77069cdded142d96eb](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)".



---

archive/issue_comments_440216.json:
```json
{
    "body": "<a id='comment:7'></a>\nCurrently it looks like my gitlab runners *are* working, but every ticket build is timing out because for some reason they're all trying to build openblas, and then timing out after 3 hours.\n\nThe openblas update is new as of I think 8.8.rc0 (I think it was maybe a mistake to update as big a package as openblas in a *release candidate*).  The docker build of 8.8.rc0 seems to have failed in the test-dev job for some random reason.  So I'll try re-running it...  Then all the 8.8.rc1 builds failed as well for some non-obvious reason.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb\">0d8d4c1</a></td><td><code>Fix gitlab-ci.yml</code></td></tr></table>\n",
    "created_at": "2019-06-19T13:57:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440216",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Currently it looks like my gitlab runners *are* working, but every ticket build is timing out because for some reason they're all trying to build openblas, and then timing out after 3 hours.

The openblas update is new as of I think 8.8.rc0 (I think it was maybe a mistake to update as big a package as openblas in a *release candidate*).  The docker build of 8.8.rc0 seems to have failed in the test-dev job for some random reason.  So I'll try re-running it...  Then all the 8.8.rc1 builds failed as well for some non-obvious reason.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb">0d8d4c1</a></td><td><code>Fix gitlab-ci.yml</code></td></tr></table>




---

archive/issue_comments_440217.json:
```json
{
    "body": "<a id='comment:8'></a>\nWhich is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the \"Release\" stage didn't run...?",
    "created_at": "2019-06-19T13:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440217",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the "Release" stage didn't run...?



---

archive/issue_comments_440218.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [embray](#comment%3A8):\n> Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the \"Release\" stage didn't run...?\n\n\nOh, I see, building/releasing from the 8.8.rc1 *tag* did pass, but from the *develop* branch did not pass.\n\nI guess then maybe many of the trac tickets are not based off 8.8.rc1 yet so they're still pulling docker images of older builds that don't include the openblas update.",
    "created_at": "2019-06-19T14:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440218",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
Replying to [embray](#comment%3A8):
> Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the "Release" stage didn't run...?


Oh, I see, building/releasing from the 8.8.rc1 *tag* did pass, but from the *develop* branch did not pass.

I guess then maybe many of the trac tickets are not based off 8.8.rc1 yet so they're still pulling docker images of older builds that don't include the openblas update.



---

archive/issue_comments_440219.json:
```json
{
    "body": "**Changing branch** from \"[u/saraedum/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/t-28013-py3-docker-images)\" to \"[public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images)\".",
    "created_at": "2019-06-19T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440219",
    "user": "https://github.com/slel"
}
```

**Changing branch** from "[u/saraedum/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/t-28013-py3-docker-images)" to "[public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images)".



---

archive/issue_comments_440220.json:
```json
{
    "body": "<a id='comment:10'></a>\nLet's use a public branch for this.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c\">054a0b4</a></td><td><code>Update branch name in .gitlab-ci.yml</code></td></tr></table>\n",
    "created_at": "2019-06-19T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440220",
    "user": "https://github.com/slel"
}
```

<a id='comment:10'></a>
Let's use a public branch for this.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c">054a0b4</a></td><td><code>Update branch name in .gitlab-ci.yml</code></td></tr></table>




---

archive/issue_comments_440221.json:
```json
{
    "body": "**Changing commit** from \"[0d8d4c18ddcfbab5959bfd77069cdded142d96eb](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)\" to \"[054a0b49b5afe81bff92a7ef6840de086bda017c](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)\".",
    "created_at": "2019-06-19T22:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440221",
    "user": "https://github.com/slel"
}
```

**Changing commit** from "[0d8d4c18ddcfbab5959bfd77069cdded142d96eb](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)" to "[054a0b49b5afe81bff92a7ef6840de086bda017c](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)".



---

archive/issue_comments_440222.json:
```json
{
    "body": "<a id='comment:11'></a>\nDuplicate of #28041.",
    "created_at": "2019-08-19T18:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440222",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:11'></a>
Duplicate of #28041.



---

archive/issue_events_251646.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251646"
}
```



---

archive/issue_events_251647.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251647"
}
```



---

archive/issue_events_251648.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251648"
}
```



---

archive/issue_events_251649.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "label": "duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251649"
}
```



---

archive/issue_comments_440223.json:
```json
{
    "body": "<a id='comment:12'></a>\nOk.",
    "created_at": "2019-08-20T05:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440223",
    "user": "https://github.com/slel"
}
```

<a id='comment:12'></a>
Ok.



---

archive/issue_comments_440224.json:
```json
{
    "body": "**Changing author** from \"Samuel Leli\u00e8vre\" to \"\".",
    "created_at": "2019-08-20T05:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28013#issuecomment-440224",
    "user": "https://github.com/slel"
}
```

**Changing author** from "Samuel Lelièvre" to "".



---

archive/issue_events_251650.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-22T06:46:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "label": "duplicate",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251650"
}
```



---

archive/issue_events_251651.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-22T06:46:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251651"
}
```



---

archive/issue_events_251652.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-22T06:46:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28013#event-251652"
}
```
