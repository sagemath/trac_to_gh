# Issue 28013: Build Python 3 docker images

archive/issues_027776.json:
```json
{
    "assignees": [],
    "body": "\n\nCC:  @videlec\n\nKeywords: **days101, py3, docker**\n\nBranch/Commit: **[public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images) @ [054a0b4](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)**\n\nReviewer: **Julian R\u00fcth**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28013_\n\n",
    "closed_at": "2019-08-22T06:46:48Z",
    "created_at": "2019-06-19T00:59:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20distribution",
        "https://github.com/sagemath/sage/labels/duplicate",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Build Python 3 docker images",
    "type": "issue",
    "updated_at": "2019-08-22T06:46:48Z",
    "url": "https://github.com/sagemath/sage/issues/28013",
    "user": "https://github.com/saraedum"
}
```


CC:  @videlec

Keywords: **days101, py3, docker**

Branch/Commit: **[public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images) @ [054a0b4](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)**

Reviewer: **Julian Rüth**

_Issue created by migration from https://trac.sagemath.org/ticket/28013_





---

archive/issue_events_365967.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T00:59:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365967"
}
```



---

archive/issue_events_365968.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T00:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20distribution",
    "label_color": "000080",
    "label_name": "component: distribution",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365968"
}
```



---

archive/issue_events_365969.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T00:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365969"
}
```



---

archive/issue_events_365970.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T00:59:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365970"
}
```



---

archive/issue_events_365971.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T01:09:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365971"
}
```



---

archive/issue_events_365972.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T01:09:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365972"
}
```



---

archive/issue_events_365973.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-06-19T01:09:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365973"
}
```



---

archive/issue_comments_438802.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nCurrently, this is a hack to see whether building on Docker works. We should of course build both Py2 and Py3.",
    "created_at": "2019-06-19T01:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438802",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:2" align="right">Comment 2</div>

Currently, this is a hack to see whether building on Docker works. We should of course build both Py2 and Py3.



---

archive/issue_comments_438803.json:
```json
{
    "body": "Changed keywords from **** to **days101, py3, docker**",
    "created_at": "2019-06-19T01:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438803",
    "user": "https://github.com/slel"
}
```

Changed keywords from **** to **days101, py3, docker**



---

archive/issue_comments_438804.json:
```json
{
    "body": "Branch: **[u/slelievre/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/t-28013-py3-docker-images)**",
    "created_at": "2019-06-19T01:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438804",
    "user": "https://github.com/slel"
}
```

Branch: **[u/slelievre/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/t-28013-py3-docker-images)**



---

archive/issue_comments_438805.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nYou can see the status of this at: https://gitlab.com/sagemath/dev/trac/commits/u/slelievre/t-28013-py3-docker-images\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766\">b96f62f</a></td><td><code>#28013 py3 docker images</code></td></tr></table>\n",
    "created_at": "2019-06-19T01:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438805",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:5" align="right">Comment 5</div>

You can see the status of this at: https://gitlab.com/sagemath/dev/trac/commits/u/slelievre/t-28013-py3-docker-images

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766">b96f62f</a></td><td><code>#28013 py3 docker images</code></td></tr></table>




---

archive/issue_comments_438806.json:
```json
{
    "body": "Commit: **[b96f62f](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)**",
    "created_at": "2019-06-19T01:13:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438806",
    "user": "https://github.com/saraedum"
}
```

Commit: **[b96f62f](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)**



---

archive/issue_comments_438807.json:
```json
{
    "body": "Changed branch from **[u/slelievre/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/t-28013-py3-docker-images)** to **[u/saraedum/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/t-28013-py3-docker-images)**",
    "created_at": "2019-06-19T01:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438807",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/slelievre/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/t-28013-py3-docker-images)** to **[u/saraedum/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/t-28013-py3-docker-images)**



---

archive/issue_comments_438808.json:
```json
{
    "body": "Changed commit from **[b96f62f](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)** to **[0d8d4c1](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)**",
    "created_at": "2019-06-19T13:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438808",
    "user": "https://github.com/embray"
}
```

Changed commit from **[b96f62f](https://github.com/sagemath/sagetrac-mirror/commit/b96f62ff11bc7eae875ff542ee55716cf2870766)** to **[0d8d4c1](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)**



---

archive/issue_comments_438809.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nCurrently it looks like my gitlab runners *are* working, but every ticket build is timing out because for some reason they're all trying to build openblas, and then timing out after 3 hours.\n\nThe openblas update is new as of I think 8.8.rc0 (I think it was maybe a mistake to update as big a package as openblas in a *release candidate*).  The docker build of 8.8.rc0 seems to have failed in the test-dev job for some random reason.  So I'll try re-running it...  Then all the 8.8.rc1 builds failed as well for some non-obvious reason.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb\">0d8d4c1</a></td><td><code>Fix gitlab-ci.yml</code></td></tr></table>\n",
    "created_at": "2019-06-19T13:57:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438809",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">Comment 7</div>

Currently it looks like my gitlab runners *are* working, but every ticket build is timing out because for some reason they're all trying to build openblas, and then timing out after 3 hours.

The openblas update is new as of I think 8.8.rc0 (I think it was maybe a mistake to update as big a package as openblas in a *release candidate*).  The docker build of 8.8.rc0 seems to have failed in the test-dev job for some random reason.  So I'll try re-running it...  Then all the 8.8.rc1 builds failed as well for some non-obvious reason.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb">0d8d4c1</a></td><td><code>Fix gitlab-ci.yml</code></td></tr></table>




---

archive/issue_comments_438810.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nWhich is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the \"Release\" stage didn't run...?",
    "created_at": "2019-06-19T13:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438810",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">Comment 8</div>

Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the "Release" stage didn't run...?



---

archive/issue_comments_438811.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@embray](#comment%3A8):\n> Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the \"Release\" stage didn't run...?\n\nOh, I see, building/releasing from the 8.8.rc1 *tag* did pass, but from the *develop* branch did not pass.\n\nI guess then maybe many of the trac tickets are not based off 8.8.rc1 yet so they're still pulling docker images of older builds that don't include the openblas update.",
    "created_at": "2019-06-19T14:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438811",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@embray](#comment%3A8):
> Which is also strange because there does appear to be an 8.8.rc1 image tagged on sagemath/sagemath-dev even though the "Release" stage didn't run...?

Oh, I see, building/releasing from the 8.8.rc1 *tag* did pass, but from the *develop* branch did not pass.

I guess then maybe many of the trac tickets are not based off 8.8.rc1 yet so they're still pulling docker images of older builds that don't include the openblas update.



---

archive/issue_comments_438812.json:
```json
{
    "body": "Changed branch from **[u/saraedum/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/t-28013-py3-docker-images)** to **[public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images)**",
    "created_at": "2019-06-19T22:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438812",
    "user": "https://github.com/slel"
}
```

Changed branch from **[u/saraedum/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/t-28013-py3-docker-images)** to **[public/t-28013-py3-docker-images](https://github.com/sagemath/sagetrac-mirror/tree/public/t-28013-py3-docker-images)**



---

archive/issue_comments_438813.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nLet's use a public branch for this.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c\">054a0b4</a></td><td><code>Update branch name in .gitlab-ci.yml</code></td></tr></table>\n",
    "created_at": "2019-06-19T22:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438813",
    "user": "https://github.com/slel"
}
```

<div id="comment:10" align="right">Comment 10</div>

Let's use a public branch for this.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c">054a0b4</a></td><td><code>Update branch name in .gitlab-ci.yml</code></td></tr></table>




---

archive/issue_comments_438814.json:
```json
{
    "body": "Changed commit from **[0d8d4c1](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)** to **[054a0b4](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)**",
    "created_at": "2019-06-19T22:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438814",
    "user": "https://github.com/slel"
}
```

Changed commit from **[0d8d4c1](https://github.com/sagemath/sagetrac-mirror/commit/0d8d4c18ddcfbab5959bfd77069cdded142d96eb)** to **[054a0b4](https://github.com/sagemath/sagetrac-mirror/commit/054a0b49b5afe81bff92a7ef6840de086bda017c)**



---

archive/issue_comments_438815.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nDuplicate of #28041.",
    "created_at": "2019-08-19T18:02:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438815",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:11" align="right">Comment 11</div>

Duplicate of #28041.



---

archive/issue_events_365974.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365974"
}
```



---

archive/issue_events_365975.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365975"
}
```



---

archive/issue_events_365976.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365976"
}
```



---

archive/issue_events_365977.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365977"
}
```



---

archive/issue_events_365978.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2019-08-19T18:02:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365978"
}
```



---

archive/issue_comments_438816.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nOk.",
    "created_at": "2019-08-20T05:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438816",
    "user": "https://github.com/slel"
}
```

<div id="comment:12" align="right">Comment 12</div>

Ok.



---

archive/issue_comments_438817.json:
```json
{
    "body": "Changed author from **Samuel Leli\u00e8vre** to none",
    "created_at": "2019-08-20T05:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28013#issuecomment-438817",
    "user": "https://github.com/slel"
}
```

Changed author from **Samuel Lelièvre** to none



---

archive/issue_events_365979.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-22T06:46:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365979"
}
```



---

archive/issue_events_365980.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-22T06:46:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365980"
}
```



---

archive/issue_events_365981.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-08-22T06:46:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28013",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28013#event-365981"
}
```
