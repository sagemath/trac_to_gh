# Issue 28879: spkg-configure for GSL

archive/issues_028642.json:
```json
{
    "assignees": [],
    "body": "\n\nDepends on #27870\n\nCC:  @embray @kiwifb @isuruf @mkoeppe\n\nBranch/Commit: **[a180599](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**\n\nWork Issues: **install modified gsl.pc**\n\nReviewer: **Isuru Fernando**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28879_\n\n",
    "closed_at": "2020-01-09T23:44:29Z",
    "created_at": "2019-12-13T14:42:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "spkg-configure for GSL",
    "type": "issue",
    "updated_at": "2020-01-09T23:44:29Z",
    "url": "https://github.com/sagemath/sage/issues/28879",
    "user": "https://github.com/dimpase"
}
```


Depends on #27870

CC:  @embray @kiwifb @isuruf @mkoeppe

Branch/Commit: **[a180599](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**

Work Issues: **install modified gsl.pc**

Reviewer: **Isuru Fernando**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/28879_





---

archive/issue_events_365285.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-13T14:42:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365285"
}
```



---

archive/issue_events_365286.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-13T14:42:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "component: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365286"
}
```



---

archive/issue_events_365287.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-13T14:42:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365287"
}
```



---

archive/issue_comments_453571.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d\">e5c91db</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1720b38cdca1aa6c436a4b579545c227d3a313fc\">1720b38</a></td><td><code>a bare minumim openblas config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/925266bfb2e8446e4fadd09eea86d7c04534eed6\">925266b</a></td><td><code>use openblas.pc for blas and lapack, don't require atlas is to be used</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b89df80e245766884e59d78accfe809e240ad2ba\">b89df80</a></td><td><code>move blas handling to build/pkgs/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/634157628ac3f7292e7065eae462bb6b80db7aed\">6341576</a></td><td><code>create cblas.pc link, too, not only blas and lapack</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4\">3a95431</a></td><td><code>spkg-configure for gsl</code></td></tr></table>\n",
    "created_at": "2019-12-14T10:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453571",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:1'>Comment 1:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d">e5c91db</a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1720b38cdca1aa6c436a4b579545c227d3a313fc">1720b38</a></td><td><code>a bare minumim openblas config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/925266bfb2e8446e4fadd09eea86d7c04534eed6">925266b</a></td><td><code>use openblas.pc for blas and lapack, don't require atlas is to be used</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b89df80e245766884e59d78accfe809e240ad2ba">b89df80</a></td><td><code>move blas handling to build/pkgs/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/634157628ac3f7292e7065eae462bb6b80db7aed">6341576</a></td><td><code>create cblas.pc link, too, not only blas and lapack</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4">3a95431</a></td><td><code>spkg-configure for gsl</code></td></tr></table>




---

archive/issue_comments_453572.json:
```json
{
    "body": "Changed commit from **[f8833aa](https://github.com/sagemath/sagetrac-mirror/commit/f8833aa8b98fadbb8f060e112ba4ef3638a5421d)** to **[3a95431](https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4)**",
    "created_at": "2019-12-14T10:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453572",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f8833aa](https://github.com/sagemath/sagetrac-mirror/commit/f8833aa8b98fadbb8f060e112ba4ef3638a5421d)** to **[3a95431](https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4)**



---

archive/issue_events_365288.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T22:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365288"
}
```



---

archive/issue_events_365289.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T22:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365289"
}
```



---

archive/issue_comments_453573.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nDid you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?",
    "created_at": "2019-12-14T23:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453573",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:4'>Comment 4:</a>
Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?



---

archive/issue_comments_453574.json:
```json
{
    "body": "Changed commit from **[3a95431](https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4)** to **[137c972](https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2)**",
    "created_at": "2019-12-14T23:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453574",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3a95431](https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4)** to **[137c972](https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2)**



---

archive/issue_comments_453575.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2\">137c972</a></td><td><code>typo in variable name</code></td></tr></table>\n",
    "created_at": "2019-12-14T23:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453575",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2">137c972</a></td><td><code>typo in variable name</code></td></tr></table>




---

archive/issue_comments_453576.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@isuruf](#comment%3A4):\n> Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?\n\nOnly on debian and gentoo, where it's linked to its own gslcblas",
    "created_at": "2019-12-15T00:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453576",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@isuruf](#comment%3A4):
> Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?

Only on debian and gentoo, where it's linked to its own gslcblas



---

archive/issue_comments_453577.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@dimpase](#comment%3A6):\n> Replying to [@isuruf](#comment%3A4):\n> > Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?\n\n> \n> Only on debian and gentoo, where it's linked to its own gslcblas\n\nNot on my gentoo box, but that would be the default. In any case neither debian or gentoo will ship it underlinked. I don't think any major distro ship underlinked libraries. OK as much as they can help it. Stuff that people build themselves is another story",
    "created_at": "2019-12-15T00:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453577",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@dimpase](#comment%3A6):
> Replying to [@isuruf](#comment%3A4):
> > Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?

> 
> Only on debian and gentoo, where it's linked to its own gslcblas

Not on my gentoo box, but that would be the default. In any case neither debian or gentoo will ship it underlinked. I don't think any major distro ship underlinked libraries. OK as much as they can help it. Stuff that people build themselves is another story



---

archive/issue_comments_453578.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nWhat happens when `gslcblas` and `openblas` are both linked in?",
    "created_at": "2019-12-15T01:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453578",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:8'>Comment 8:</a>
What happens when `gslcblas` and `openblas` are both linked in?



---

archive/issue_comments_453579.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nA bit pathological, but basically nothing visible until you test something with a high precision where there can be divergences between the two. \nIf you run GSL test suite with openblas rather than gslcblas you'll get failures of the numerical noise kind.\n\nHonestly, I am not sure which one would be used. My guess would be the first one on the list of libraries linked.",
    "created_at": "2019-12-15T01:28:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453579",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:9'>Comment 9:</a>
A bit pathological, but basically nothing visible until you test something with a high precision where there can be divergences between the two. 
If you run GSL test suite with openblas rather than gslcblas you'll get failures of the numerical noise kind.

Honestly, I am not sure which one would be used. My guess would be the first one on the list of libraries linked.



---

archive/issue_comments_453580.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nOkay. Another concern is when system's `gsl.pc` is used by downstream packages, they'll be linking to `gslcblas` instead of `openblas`, but sage's `gsl.pc` would link the downstream package to `openblas`.",
    "created_at": "2019-12-15T01:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453580",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:10'>Comment 10:</a>
Okay. Another concern is when system's `gsl.pc` is used by downstream packages, they'll be linking to `gslcblas` instead of `openblas`, but sage's `gsl.pc` would link the downstream package to `openblas`.



---

archive/issue_comments_453581.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\n\n```\nfbissey@moonloop ~ $  cat /usr/lib64/pkgconfig/gsl.pc \nprefix=/usr\nexec_prefix=/usr\nlibdir=/usr/lib64\nincludedir=/usr/include\nGSL_CBLAS_LIB=-lcblas\n\nName: GSL\nDescription: GNU Scientific Library\nVersion: 2.5\nLibs: -L/usr/lib64 -lgsl ${GSL_CBLAS_LIB} -lm -lm \nCflags: -I/usr/include\n```\ndistro will usually patch gsl.pc to match the linking they are doing. Supposing that libgsl is linked with cblas1 and sage tries to link extensions gslext.pyx using libgsl to cblas2. If there are direct call to cblas in glsext.pyx, cblas2 will be used for these, otherwise -lcblas2 will be ignored. If there is no direct calls to cblas in gslext.pyx, libgsl will use cblas1, since cblas2 will be discarded. If cblas2 is not discarded because there are calls to cblas in gslext.pyx what you get in libgsl is not clearly defined and may depend on what is loaded first.",
    "created_at": "2019-12-15T01:52:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453581",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'>Comment 11:</a>

```
fbissey@moonloop ~ $  cat /usr/lib64/pkgconfig/gsl.pc 
prefix=/usr
exec_prefix=/usr
libdir=/usr/lib64
includedir=/usr/include
GSL_CBLAS_LIB=-lcblas

Name: GSL
Description: GNU Scientific Library
Version: 2.5
Libs: -L/usr/lib64 -lgsl ${GSL_CBLAS_LIB} -lm -lm 
Cflags: -I/usr/include
```
distro will usually patch gsl.pc to match the linking they are doing. Supposing that libgsl is linked with cblas1 and sage tries to link extensions gslext.pyx using libgsl to cblas2. If there are direct call to cblas in glsext.pyx, cblas2 will be used for these, otherwise -lcblas2 will be ignored. If there is no direct calls to cblas in gslext.pyx, libgsl will use cblas1, since cblas2 will be discarded. If cblas2 is not discarded because there are calls to cblas in gslext.pyx what you get in libgsl is not clearly defined and may depend on what is loaded first.



---

archive/issue_comments_453582.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nOn Ubuntu,\n\n```\n(base) isuru@isuru:~$ cat /usr/lib/x86_64-linux-gnu/pkgconfig/gsl.pc \nprefix=/usr\nexec_prefix=/usr\nlibdir=/usr/lib/x86_64-linux-gnu\nincludedir=/usr/include\nGSL_CBLAS_LIB=-lgslcblas\n\nName: GSL\nDescription: GNU Scientific Library\nVersion: 2.4\nLibs: -L/usr/lib/x86_64-linux-gnu -lgsl ${GSL_CBLAS_LIB} -lm -lm \nCflags: -I/usr/include\n(base) isuru@isuru:~$ ls /usr/lib/x86_64-linux-gnu/libgslcblas.so\n/usr/lib/x86_64-linux-gnu/libgslcblas.so\n(base) isuru@isuru:~$ ls -al /usr/lib/x86_64-linux-gnu/libgslcblas.so\nlrwxrwxrwx 1 root root 20 Aug  9  2017 /usr/lib/x86_64-linux-gnu/libgslcblas.so -> libgslcblas.so.0.0.0\n(base) isuru@isuru:~$ ls -al /usr/lib/x86_64-linux-gnu/libgslcblas.so.0.0.0 \n-rw-r--r-- 1 root root 255968 Aug  9  2017 /usr/lib/x86_64-linux-gnu/libgslcblas.so.0.0.0\n```",
    "created_at": "2019-12-15T03:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453582",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:12'>Comment 12:</a>
On Ubuntu,

```
(base) isuru@isuru:~$ cat /usr/lib/x86_64-linux-gnu/pkgconfig/gsl.pc 
prefix=/usr
exec_prefix=/usr
libdir=/usr/lib/x86_64-linux-gnu
includedir=/usr/include
GSL_CBLAS_LIB=-lgslcblas

Name: GSL
Description: GNU Scientific Library
Version: 2.4
Libs: -L/usr/lib/x86_64-linux-gnu -lgsl ${GSL_CBLAS_LIB} -lm -lm 
Cflags: -I/usr/include
(base) isuru@isuru:~$ ls /usr/lib/x86_64-linux-gnu/libgslcblas.so
/usr/lib/x86_64-linux-gnu/libgslcblas.so
(base) isuru@isuru:~$ ls -al /usr/lib/x86_64-linux-gnu/libgslcblas.so
lrwxrwxrwx 1 root root 20 Aug  9  2017 /usr/lib/x86_64-linux-gnu/libgslcblas.so -> libgslcblas.so.0.0.0
(base) isuru@isuru:~$ ls -al /usr/lib/x86_64-linux-gnu/libgslcblas.so.0.0.0 
-rw-r--r-- 1 root root 255968 Aug  9  2017 /usr/lib/x86_64-linux-gnu/libgslcblas.so.0.0.0
```



---

archive/issue_comments_453583.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nIt is underlinked as far as I can tell.\n\n```\n(base) isuru@isuru:~$ ldd /usr/lib/x86_64-linux-gnu/libgsl.so.23\n        linux-vdso.so.1 (0x00007fffb1ba6000)\n        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8a703f4000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8a70003000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007f8a70bf4000)\n```",
    "created_at": "2019-12-15T03:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453583",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:13'>Comment 13:</a>
It is underlinked as far as I can tell.

```
(base) isuru@isuru:~$ ldd /usr/lib/x86_64-linux-gnu/libgsl.so.23
        linux-vdso.so.1 (0x00007fffb1ba6000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8a703f4000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8a70003000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f8a70bf4000)
```



---

archive/issue_comments_453584.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nOK, I am surprised. Then cblas as to be provided with anything linking libgsl. And if we are taking it from gsl.pc that may be gslcblas. At worst we take performance hit.\n\nAn option would be to substitute gslcblas by the the default cblas we are using in the linking flags.",
    "created_at": "2019-12-15T03:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453584",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:14'>Comment 14:</a>
OK, I am surprised. Then cblas as to be provided with anything linking libgsl. And if we are taking it from gsl.pc that may be gslcblas. At worst we take performance hit.

An option would be to substitute gslcblas by the the default cblas we are using in the linking flags.



---

archive/issue_comments_453585.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nIn the openblas `spkg-configure` script, `openblas.pc` is copied into `$SAGE_LOCAL/lib/pkgconfig/cblas.pc`. How about copying the system `gsl.pc` into `$SAGE_LOCAL/lib/pkgconfig/gsl.pc` and replacing the gslcblas line with openblas? (or whatever BLAS is selected)",
    "created_at": "2019-12-15T03:57:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453585",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:15'>Comment 15:</a>
In the openblas `spkg-configure` script, `openblas.pc` is copied into `$SAGE_LOCAL/lib/pkgconfig/cblas.pc`. How about copying the system `gsl.pc` into `$SAGE_LOCAL/lib/pkgconfig/gsl.pc` and replacing the gslcblas line with openblas? (or whatever BLAS is selected)



---

archive/issue_comments_453586.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nRemove `GSL_CBLAS_LIB` and add a line\n\n```\nrequires: cblas\n```\nwhich will pull `cblas.pc` all by itself.",
    "created_at": "2019-12-15T04:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453586",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'>Comment 16:</a>
Remove `GSL_CBLAS_LIB` and add a line

```
requires: cblas
```
which will pull `cblas.pc` all by itself.



---

archive/issue_comments_453587.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nJust to make it clear, are you proposing to change `gsl.pc` in the underlinked case only,\nright?\n\nWill the underlinked GSL work with \"cblas\", which is in the configuration of #27870 the same as `openblas`? (I am ignorant about the purpose of `gslcblas`, sorry).",
    "created_at": "2019-12-15T09:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453587",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'>Comment 17:</a>
Just to make it clear, are you proposing to change `gsl.pc` in the underlinked case only,
right?

Will the underlinked GSL work with "cblas", which is in the configuration of #27870 the same as `openblas`? (I am ignorant about the purpose of `gslcblas`, sorry).



---

archive/issue_comments_453588.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nYes it will work. It would work if we did it in all cases. `gslcblas` is just another complete cblas implementation just as atlas and openblas are.",
    "created_at": "2019-12-15T09:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453588",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:18'>Comment 18:</a>
Yes it will work. It would work if we did it in all cases. `gslcblas` is just another complete cblas implementation just as atlas and openblas are.



---

archive/issue_events_365290.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-15T10:00:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365290"
}
```



---

archive/issue_events_365291.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-15T10:00:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365291"
}
```



---

archive/issue_comments_453589.json:
```json
{
    "body": "Work Issues: **install modified gsl.pc**",
    "created_at": "2019-12-15T10:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453589",
    "user": "https://github.com/dimpase"
}
```

Work Issues: **install modified gsl.pc**



---

archive/issue_comments_453590.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@kiwifb](#comment%3A14):\n> OK, I am surprised. Then cblas as to be provided with anything linking libgsl. And if we are taking it from gsl.pc that may be gslcblas. At worst we take performance hit.\n> \n> An option would be to substitute gslcblas by the the default cblas we are using in the linking flags.\n\nGSL is also underlinked on Fedora",
    "created_at": "2019-12-15T12:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453590",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@kiwifb](#comment%3A14):
> OK, I am surprised. Then cblas as to be provided with anything linking libgsl. And if we are taking it from gsl.pc that may be gslcblas. At worst we take performance hit.
> 
> An option would be to substitute gslcblas by the the default cblas we are using in the linking flags.

GSL is also underlinked on Fedora



---

archive/issue_comments_453591.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@isuruf](#comment%3A8):\n> What happens when `gslcblas` and `openblas` are both linked in?\n\nthis is what I get with this branch:\n\n```\n$ ldd local/lib/python3.7/site-packages/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so\n...\n\tlibgsl.so.23 => /usr/lib/x86_64-linux-gnu/libgsl.so.23 (0x00007d76b701a000)\n\tlibopenblas.so.0 => /usr/lib/x86_64-linux-gnu/libopenblas.so.0 (0x00007d76b4e36000)\n...\n\tlibgslcblas.so.0 => /usr/lib/x86_64-linux-gnu/libgslcblas.so.0 (0x00007d76b48db000)\n...\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007d76b462e000)\n...\n```\n\nso both `libopenblas.so` and `libgslblas.so` are there. \n(I suppose it's the same with Sage-supplied GSL and OpenBLAS)\n\nAre you saying that modifyng `gsl.pc` as suggested here would lead to skipping `libgslblas.so` ?\n\nIMHO this would not lead to re-linking `libgsl.so` with `libopenblas.so`, if it was\nalready linked with `libgslblas.so`. Woulndn't is need some `LD_PRELOAD` platform-dependent `ld` hacks  --- I guess MacOS would need something quite different to achieve this.",
    "created_at": "2019-12-20T04:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453591",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@isuruf](#comment%3A8):
> What happens when `gslcblas` and `openblas` are both linked in?

this is what I get with this branch:

```
$ ldd local/lib/python3.7/site-packages/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so
...
	libgsl.so.23 => /usr/lib/x86_64-linux-gnu/libgsl.so.23 (0x00007d76b701a000)
	libopenblas.so.0 => /usr/lib/x86_64-linux-gnu/libopenblas.so.0 (0x00007d76b4e36000)
...
	libgslcblas.so.0 => /usr/lib/x86_64-linux-gnu/libgslcblas.so.0 (0x00007d76b48db000)
...
	libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007d76b462e000)
...
```

so both `libopenblas.so` and `libgslblas.so` are there. 
(I suppose it's the same with Sage-supplied GSL and OpenBLAS)

Are you saying that modifyng `gsl.pc` as suggested here would lead to skipping `libgslblas.so` ?

IMHO this would not lead to re-linking `libgsl.so` with `libopenblas.so`, if it was
already linked with `libgslblas.so`. Woulndn't is need some `LD_PRELOAD` platform-dependent `ld` hacks  --- I guess MacOS would need something quite different to achieve this.



---

archive/issue_comments_453592.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\n> (I suppose it's the same with Sage-supplied GSL and OpenBLAS) \n\nNo, see https://github.com/sagemath/sage/blob/f0ae571d17e685258c1de89c2a29953f4d8fb302/build/pkgs/gsl/patches/gsl-2.1-gslcblas.patch . gslcblas is removed sage-suplied GSL.\n\n>  Are you saying that modifyng gsl.pc as suggested here would lead to skipping libgslblas.so ?\n\nYes\n\n> IMHO this would not lead to re-linking libgsl.so with libopenblas.so, if it was already linked with libgslblas.so\n\n`libgsl.so` is not linked to any blas in distros like Ubuntu. It is underlinked. In sage-the-distribution, `libgsl.so` is linked to `libopenblas` and the `-lgslcblas` line is removed from `gsl.pc`.",
    "created_at": "2019-12-20T04:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453592",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:22'>Comment 22:</a>
> (I suppose it's the same with Sage-supplied GSL and OpenBLAS) 

No, see https://github.com/sagemath/sage/blob/f0ae571d17e685258c1de89c2a29953f4d8fb302/build/pkgs/gsl/patches/gsl-2.1-gslcblas.patch . gslcblas is removed sage-suplied GSL.

>  Are you saying that modifyng gsl.pc as suggested here would lead to skipping libgslblas.so ?

Yes

> IMHO this would not lead to re-linking libgsl.so with libopenblas.so, if it was already linked with libgslblas.so

`libgsl.so` is not linked to any blas in distros like Ubuntu. It is underlinked. In sage-the-distribution, `libgsl.so` is linked to `libopenblas` and the `-lgslcblas` line is removed from `gsl.pc`.



---

archive/issue_comments_453593.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nNo, why, on Debian 10 I see\n\n```\n$ ldd /usr/lib/x86_64-linux-gnu/libgsl.so\n\tlinux-vdso.so.1 (0x00007ffcf2bb5000)\n\tlibgslcblas.so.0 => /usr/lib/x86_64-linux-gnu/libgslcblas.so.0 (0x00007a0da11b5000)\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007a0da1032000)\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007a0da0e71000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007a0da1499000)\n```\nSo libgsl.so is linked to libopenblas.so",
    "created_at": "2019-12-20T04:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453593",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'>Comment 23:</a>
No, why, on Debian 10 I see

```
$ ldd /usr/lib/x86_64-linux-gnu/libgsl.so
	linux-vdso.so.1 (0x00007ffcf2bb5000)
	libgslcblas.so.0 => /usr/lib/x86_64-linux-gnu/libgslcblas.so.0 (0x00007a0da11b5000)
	libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007a0da1032000)
	libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007a0da0e71000)
	/lib64/ld-linux-x86-64.so.2 (0x00007a0da1499000)
```
So libgsl.so is linked to libopenblas.so



---

archive/issue_comments_453594.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI guess it depends on the distro. I checked Ubuntu 18.04, and it's underlinked there. See [#28879 comment:13](https://github.com/sagemath/sage/issues/28879#comment:13)",
    "created_at": "2019-12-20T04:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453594",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:24'>Comment 24:</a>
I guess it depends on the distro. I checked Ubuntu 18.04, and it's underlinked there. See [#28879 comment:13](https://github.com/sagemath/sage/issues/28879#comment:13)



---

archive/issue_comments_453595.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nReplying to [@isuruf](#comment%3A24):\n> I guess it depends on the distro. I checked Ubuntu 18.04, and it's underlinked there. See [#28879 comment:13](https://github.com/sagemath/sage/issues/28879#comment:13)\n\nYes, it's distro-dependent. So how is this gsl.pc hack supposed to help in such a case (of already linked gslcblas?\nAre we left with linking to both openblas and gslcblas then?",
    "created_at": "2019-12-20T04:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453595",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'>Comment 25:</a>
Replying to [@isuruf](#comment%3A24):
> I guess it depends on the distro. I checked Ubuntu 18.04, and it's underlinked there. See [#28879 comment:13](https://github.com/sagemath/sage/issues/28879#comment:13)

Yes, it's distro-dependent. So how is this gsl.pc hack supposed to help in such a case (of already linked gslcblas?
Are we left with linking to both openblas and gslcblas then?



---

archive/issue_comments_453596.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nIn the case that it is already linked to libgslcblas, then the library or the executable using gsl has the option of selecting the blas.\n\nSee https://wiki.debian.org/DebianScience/LinearAlgebraLibraries section \"Using the GSL with an optimized BLAS\"",
    "created_at": "2019-12-20T04:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453596",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:26'>Comment 26:</a>
In the case that it is already linked to libgslcblas, then the library or the executable using gsl has the option of selecting the blas.

See https://wiki.debian.org/DebianScience/LinearAlgebraLibraries section "Using the GSL with an optimized BLAS"



---

archive/issue_comments_453597.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@isuruf](#comment%3A26):\n> In the case that it is already linked to libgslcblas, then the library or the executable using gsl has the option of selecting the blas.\n> \n> See https://wiki.debian.org/DebianScience/LinearAlgebraLibraries section \"Using the GSL with an optimized BLAS\"\n\nwell, this does not quite wotk.\nAfter these changes to gsl.pc I see the correct linking command\n\n```\n    gcc -pthread -shared -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L. -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib build/temp.linux-x86_64-3.7/src/C/gsl.o -L/home/dimpase/sage/local -L/home/dimpase/sage/local -L/home/dimpase/sage/local/lib -lm -lgsl -lopenblas -lpython3.7m -o build/lib.linux-x86_64-3.7/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so\n```\nbut stil the same ldd output as in [comment:21](#comment%3A21).",
    "created_at": "2019-12-20T06:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453597",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@isuruf](#comment%3A26):
> In the case that it is already linked to libgslcblas, then the library or the executable using gsl has the option of selecting the blas.
> 
> See https://wiki.debian.org/DebianScience/LinearAlgebraLibraries section "Using the GSL with an optimized BLAS"

well, this does not quite wotk.
After these changes to gsl.pc I see the correct linking command

```
    gcc -pthread -shared -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L. -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib build/temp.linux-x86_64-3.7/src/C/gsl.o -L/home/dimpase/sage/local -L/home/dimpase/sage/local -L/home/dimpase/sage/local/lib -lm -lgsl -lopenblas -lpython3.7m -o build/lib.linux-x86_64-3.7/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so
```
but stil the same ldd output as in [comment:21](#comment%3A21).



---

archive/issue_comments_453598.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\n`ldd` gives transitive deps. Try `readelf -d local/lib/python3.7/site-packages/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so`",
    "created_at": "2019-12-20T06:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453598",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:28'>Comment 28:</a>
`ldd` gives transitive deps. Try `readelf -d local/lib/python3.7/site-packages/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so`



---

archive/issue_comments_453599.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nOK, so `readelf -d` indeed shows that the only linking to gslcblas comes from one of the linked libs\n\n```\n0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libgsl.so.23]\n 0x0000000000000001 (NEEDED)             Shared library: [libopenblas.so.0]\n 0x0000000000000001 (NEEDED)             Shared library: [libpython3.7m.so.1.0]\n 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n```\nand it must be libgsl, for obvious reasons.\nSo that's as good as it gets, we won't try to relink libgsl, right?",
    "created_at": "2019-12-20T07:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453599",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'>Comment 29:</a>
OK, so `readelf -d` indeed shows that the only linking to gslcblas comes from one of the linked libs

```
0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgsl.so.23]
 0x0000000000000001 (NEEDED)             Shared library: [libopenblas.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libpython3.7m.so.1.0]
 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
```
and it must be libgsl, for obvious reasons.
So that's as good as it gets, we won't try to relink libgsl, right?



---

archive/issue_comments_453600.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\n> So that's as good as it gets, we won't try to relink libgsl, right? \n\nYes. Looks good. Can you push your changes to modify gsl.pc?",
    "created_at": "2019-12-20T11:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453600",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:30'>Comment 30:</a>
> So that's as good as it gets, we won't try to relink libgsl, right? 

Yes. Looks good. Can you push your changes to modify gsl.pc?



---

archive/issue_comments_453601.json:
```json
{
    "body": "Changed commit from **[137c972](https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2)** to **[2bc86cd](https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2)**",
    "created_at": "2019-12-20T18:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453601",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[137c972](https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2)** to **[2bc86cd](https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2)**



---

archive/issue_comments_453602.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2\">2bc86cd</a></td><td><code>install and modify gsl.pc to use cblas</code></td></tr></table>\n",
    "created_at": "2019-12-20T18:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453602",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:32'>Comment 32:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2">2bc86cd</a></td><td><code>install and modify gsl.pc to use cblas</code></td></tr></table>




---

archive/issue_comments_453603.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nThis is not ideal, as one should use `$SED`, not `sed`.\nHowever, calling `sed` happens in `config.status`, and I have no\nidea how to make `$SED` known there.\nProbably some magic with \"init commands\" I don't know.",
    "created_at": "2019-12-20T18:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453603",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'>Comment 33:</a>
This is not ideal, as one should use `$SED`, not `sed`.
However, calling `sed` happens in `config.status`, and I have no
idea how to make `$SED` known there.
Probably some magic with "init commands" I don't know.



---

archive/issue_events_365292.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-20T18:41:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365292"
}
```



---

archive/issue_events_365293.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-20T18:41:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365293"
}
```



---

archive/issue_comments_453604.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\n`sed -i` without an extension is GNU sed specific and doesn't work with BSD sed",
    "created_at": "2019-12-20T18:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453604",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:35'>Comment 35:</a>
`sed -i` without an extension is GNU sed specific and doesn't work with BSD sed



---

archive/issue_events_365294.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-20T18:43:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365294"
}
```



---

archive/issue_events_365295.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-20T18:43:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365295"
}
```



---

archive/issue_comments_453605.json:
```json
{
    "body": "Changed commit from **[2bc86cd](https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2)** to **[c13be38](https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e)**",
    "created_at": "2019-12-21T01:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453605",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2bc86cd](https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2)** to **[c13be38](https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e)**



---

archive/issue_comments_453606.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e\">c13be38</a></td><td><code>add extension '' to -i in sed calls</code></td></tr></table>\n",
    "created_at": "2019-12-21T01:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453606",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:36'>Comment 36:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e">c13be38</a></td><td><code>add extension '' to -i in sed calls</code></td></tr></table>




---

archive/issue_comments_453607.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nReplying to [@isuruf](#comment%3A35):\n> `sed -i` without an extension is GNU sed specific and doesn't work with BSD sed\n\nIt is not posix full stop. I am surprised it works as suggested on freeBSD. My experience with AIX `sed`, which is posix, is that `-i` isn't supported at all. Fortunately we don't have to support such dinosaur platforms.\n\n`@`Dima one of the purpose of `-e` is to be able to chain commands.\n\n```\nsed -i'' -e 's/\\${GSL_CBLAS_LIB}\\ //'  -e 's/GSL_CBLAS_LIB.*/Require: cblas/' \"$SAGE_LOCAL\"/lib/pkgconfig/gsl.pc\n```\nis perfectly legal. Of course some line separation gain in clarity, but that's why I would break things into several line in a pure shell script\n\n```\nsed  \\\n       -e 's/\\${GSL_CBLAS_LIB}\\ //'  \\\n       -e 's/GSL_CBLAS_LIB.*/Require: cblas/' \\\n       -i'' $SAGE_LOCAL\"/lib/pkgconfig/gsl.pc\n```",
    "created_at": "2019-12-21T01:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453607",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:37'>Comment 37:</a>
Replying to [@isuruf](#comment%3A35):
> `sed -i` without an extension is GNU sed specific and doesn't work with BSD sed

It is not posix full stop. I am surprised it works as suggested on freeBSD. My experience with AIX `sed`, which is posix, is that `-i` isn't supported at all. Fortunately we don't have to support such dinosaur platforms.

`@`Dima one of the purpose of `-e` is to be able to chain commands.

```
sed -i'' -e 's/\${GSL_CBLAS_LIB}\ //'  -e 's/GSL_CBLAS_LIB.*/Require: cblas/' "$SAGE_LOCAL"/lib/pkgconfig/gsl.pc
```
is perfectly legal. Of course some line separation gain in clarity, but that's why I would break things into several line in a pure shell script

```
sed  \
       -e 's/\${GSL_CBLAS_LIB}\ //'  \
       -e 's/GSL_CBLAS_LIB.*/Require: cblas/' \
       -i'' $SAGE_LOCAL"/lib/pkgconfig/gsl.pc
```



---

archive/issue_comments_453608.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b\">310ba06</a></td><td><code>get SED into config.status</code></td></tr></table>\n",
    "created_at": "2019-12-21T01:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453608",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:38'>Comment 38:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b">310ba06</a></td><td><code>get SED into config.status</code></td></tr></table>




---

archive/issue_comments_453609.json:
```json
{
    "body": "Changed commit from **[c13be38](https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e)** to **[310ba06](https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b)**",
    "created_at": "2019-12-21T01:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453609",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c13be38](https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e)** to **[310ba06](https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b)**



---

archive/issue_comments_453610.json:
```json
{
    "body": "<a id='comment:39'>Comment 39:</a>\nOK, all done, also managed to get SED value into config.status.",
    "created_at": "2019-12-21T01:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453610",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'>Comment 39:</a>
OK, all done, also managed to get SED value into config.status.



---

archive/issue_events_365296.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T01:25:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365296"
}
```



---

archive/issue_events_365297.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T01:25:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365297"
}
```



---

archive/issue_comments_453611.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nif you prefer chained `-e` in one sed call, let me know. I don't see this comment while I fought value of SED thing :-)",
    "created_at": "2019-12-21T01:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453611",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'>Comment 40:</a>
if you prefer chained `-e` in one sed call, let me know. I don't see this comment while I fought value of SED thing :-)



---

archive/issue_comments_453612.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nReplying to [@dimpase](#comment%3A40):\n> if you prefer chained `-e` in one sed call, let me know. I don't see this comment while I fought value of SED thing :-)\n\nThat's just nitpicking and absolutely non-esential. My comment should be taken as informative rather than \"take this action, please\".",
    "created_at": "2019-12-21T01:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453612",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:41'>Comment 41:</a>
Replying to [@dimpase](#comment%3A40):
> if you prefer chained `-e` in one sed call, let me know. I don't see this comment while I fought value of SED thing :-)

That's just nitpicking and absolutely non-esential. My comment should be taken as informative rather than "take this action, please".



---

archive/issue_comments_453613.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nReplying to [@kiwifb](#comment%3A37):\n> Replying to [@isuruf](#comment%3A35):\n> > `sed -i` without an extension is GNU sed specific and doesn't work with BSD sed\n\n> \n> It is not posix full stop. I am surprised it works as suggested on freeBSD. My experience with AIX `sed`, which is posix, is that `-i` isn't supported at all. Fortunately we don't have to support such dinosaur platforms.\n\nI'm pretty sure this doesn't work on OSX. See https://stackoverflow.com/a/5694430/4768820",
    "created_at": "2019-12-21T14:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453613",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:42'>Comment 42:</a>
Replying to [@kiwifb](#comment%3A37):
> Replying to [@isuruf](#comment%3A35):
> > `sed -i` without an extension is GNU sed specific and doesn't work with BSD sed

> 
> It is not posix full stop. I am surprised it works as suggested on freeBSD. My experience with AIX `sed`, which is posix, is that `-i` isn't supported at all. Fortunately we don't have to support such dinosaur platforms.

I'm pretty sure this doesn't work on OSX. See https://stackoverflow.com/a/5694430/4768820



---

archive/issue_comments_453614.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nSo it should be `-i *`, not `-i*`? I don't have access to an OSX machine in the coming 2 weeks, sorry.",
    "created_at": "2019-12-21T14:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453614",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'>Comment 43:</a>
So it should be `-i *`, not `-i*`? I don't have access to an OSX machine in the coming 2 weeks, sorry.



---

archive/issue_comments_453615.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\n`-i *` works in BSD/OSX sed, but doesn't in GNU sed. `-i*` works in GNU sed, but doesn't in BSD/OSX sed.\n\nSolution is to use `-i.bak` as in the StackOverflow answer. This creates a backup file with suffix `.bak`",
    "created_at": "2019-12-21T14:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453615",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:44'>Comment 44:</a>
`-i *` works in BSD/OSX sed, but doesn't in GNU sed. `-i*` works in GNU sed, but doesn't in BSD/OSX sed.

Solution is to use `-i.bak` as in the StackOverflow answer. This creates a backup file with suffix `.bak`



---

archive/issue_comments_453616.json:
```json
{
    "body": "Changed commit from **[310ba06](https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b)** to **[f9d6966](https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3)**",
    "created_at": "2019-12-21T15:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453616",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[310ba06](https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b)** to **[f9d6966](https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3)**



---

archive/issue_comments_453617.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3\">f9d6966</a></td><td><code>get rid of -i option of sed</code></td></tr></table>\n",
    "created_at": "2019-12-21T15:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453617",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:45'>Comment 45:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3">f9d6966</a></td><td><code>get rid of -i option of sed</code></td></tr></table>




---

archive/issue_comments_453618.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nOK, done. Now it's POSIX, I think.",
    "created_at": "2019-12-21T15:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453618",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'>Comment 46:</a>
OK, done. Now it's POSIX, I think.



---

archive/issue_comments_453619.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\ntesting this on Ubuntu (i.e. undelinked libgsl.so) gives a linking error during python import:\n\n```\n$ ./sage --python\nPython 3.7.3 (default, Dec 21 2019, 11:29:09) \n[GCC 7.4.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from sage.rings.complex_double import CDF\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nImportError: /usr/lib/i386-linux-gnu/libgsl.so.23: undefined symbol: cblas_ctrmv\n>>> \n```\nI suppose some sagelib modules don't know that they must also link with openblas.",
    "created_at": "2019-12-21T15:27:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453619",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'>Comment 47:</a>
testing this on Ubuntu (i.e. undelinked libgsl.so) gives a linking error during python import:

```
$ ./sage --python
Python 3.7.3 (default, Dec 21 2019, 11:29:09) 
[GCC 7.4.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from sage.rings.complex_double import CDF
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: /usr/lib/i386-linux-gnu/libgsl.so.23: undefined symbol: cblas_ctrmv
>>> 
```
I suppose some sagelib modules don't know that they must also link with openblas.



---

archive/issue_events_365298.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T15:27:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365298"
}
```



---

archive/issue_events_365299.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T15:27:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365299"
}
```



---

archive/issue_comments_453620.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b\">9d9e046</a></td><td><code>fix a crucial typo in edited gsl.pc</code></td></tr></table>\n",
    "created_at": "2019-12-21T15:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453620",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:48'>Comment 48:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b">9d9e046</a></td><td><code>fix a crucial typo in edited gsl.pc</code></td></tr></table>




---

archive/issue_comments_453621.json:
```json
{
    "body": "Changed commit from **[f9d6966](https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3)** to **[9d9e046](https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b)**",
    "created_at": "2019-12-21T15:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453621",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f9d6966](https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3)** to **[9d9e046](https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b)**



---

archive/issue_comments_453622.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nthe .pc syntax needs `Requires` rather than `Require`...",
    "created_at": "2019-12-21T15:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453622",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'>Comment 49:</a>
the .pc syntax needs `Requires` rather than `Require`...



---

archive/issue_events_365300.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T17:11:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365300"
}
```



---

archive/issue_events_365301.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T17:11:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365301"
}
```



---

archive/issue_comments_453623.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nnow things work on Ubuntu, too.",
    "created_at": "2019-12-21T17:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453623",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'>Comment 50:</a>
now things work on Ubuntu, too.



---

archive/issue_events_365302.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-21T18:54:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365302"
}
```



---

archive/issue_events_365303.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-21T18:54:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365303"
}
```



---

archive/issue_comments_453624.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nTested that configure creates gsl.pc correctly in OSX.",
    "created_at": "2019-12-21T18:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453624",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:51'>Comment 51:</a>
Tested that configure creates gsl.pc correctly in OSX.



---

archive/issue_comments_453625.json:
```json
{
    "body": "Reviewer: **Isuru Fernando**",
    "created_at": "2019-12-21T19:04:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453625",
    "user": "https://github.com/isuruf"
}
```

Reviewer: **Isuru Fernando**



---

archive/issue_comments_453626.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c031c9ea33b2e6210d571b6939c5faf2e0ed4f84\">c031c9e</a></td><td><code>use openblas.pc for blas and lapack, don't require atlas is to be used</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b49f79eca2bde8ce3ce134dbdc7f01172bd9293c\">b49f79e</a></td><td><code>move blas handling to build/pkgs/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81bf522a5a417e236f9b9ee4f05256126b5b47cb\">81bf522</a></td><td><code>create cblas.pc link, too, not only blas and lapack</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/244f9545e970dda46f609434b658d02c8fb2573b\">244f954</a></td><td><code>spkg-configure for gsl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efd642f346bbfb3eb8f1c8ca468b0293add4f8c1\">efd642f</a></td><td><code>typo in variable name</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/641e3fae1fa51e8b25c025d2ab1c37f13f4cfee6\">641e3fa</a></td><td><code>install and modify gsl.pc to use cblas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51bc6229a1d89c7d82ddad4bbf4cc8709f7ad9f4\">51bc622</a></td><td><code>add extension '' to -i in sed calls</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13a54341d819e383bd0de58b1c3427fb50e06a09\">13a5434</a></td><td><code>get SED into config.status</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac32b133c2f86798f3ed18d709a8609147b07119\">ac32b13</a></td><td><code>get rid of -i option of sed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8\">a180599</a></td><td><code>fix a crucial typo in edited gsl.pc</code></td></tr></table>\n",
    "created_at": "2019-12-28T08:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453626",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:53'>Comment 53:</a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c031c9ea33b2e6210d571b6939c5faf2e0ed4f84">c031c9e</a></td><td><code>use openblas.pc for blas and lapack, don't require atlas is to be used</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b49f79eca2bde8ce3ce134dbdc7f01172bd9293c">b49f79e</a></td><td><code>move blas handling to build/pkgs/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81bf522a5a417e236f9b9ee4f05256126b5b47cb">81bf522</a></td><td><code>create cblas.pc link, too, not only blas and lapack</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/244f9545e970dda46f609434b658d02c8fb2573b">244f954</a></td><td><code>spkg-configure for gsl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efd642f346bbfb3eb8f1c8ca468b0293add4f8c1">efd642f</a></td><td><code>typo in variable name</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/641e3fae1fa51e8b25c025d2ab1c37f13f4cfee6">641e3fa</a></td><td><code>install and modify gsl.pc to use cblas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51bc6229a1d89c7d82ddad4bbf4cc8709f7ad9f4">51bc622</a></td><td><code>add extension '' to -i in sed calls</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13a54341d819e383bd0de58b1c3427fb50e06a09">13a5434</a></td><td><code>get SED into config.status</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac32b133c2f86798f3ed18d709a8609147b07119">ac32b13</a></td><td><code>get rid of -i option of sed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8">a180599</a></td><td><code>fix a crucial typo in edited gsl.pc</code></td></tr></table>




---

archive/issue_comments_453627.json:
```json
{
    "body": "Changed commit from **[9d9e046](https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b)** to **[a180599](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**",
    "created_at": "2019-12-28T08:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453627",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9d9e046](https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b)** to **[a180599](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**



---

archive/issue_events_365304.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-12-28T08:02:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365304"
}
```



---

archive/issue_events_365305.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-12-28T08:02:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365305"
}
```



---

archive/issue_events_365306.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-28T08:03:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365306"
}
```



---

archive/issue_events_365307.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-28T08:03:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365307"
}
```



---

archive/issue_comments_453628.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\ntrivial rebase over updated #27870",
    "created_at": "2019-12-28T08:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453628",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'>Comment 54:</a>
trivial rebase over updated #27870



---

archive/issue_events_365308.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-28T08:03:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365308"
}
```



---

archive/issue_events_365309.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-28T08:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365309"
}
```



---

archive/issue_events_365310.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-01T14:38:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365310"
}
```



---

archive/issue_events_365311.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-01T14:38:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365311"
}
```



---

archive/issue_events_365312.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-09T23:44:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365312"
}
```



---

archive/issue_events_365313.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c4ed371cdfc728bc4afa0b1c529f887b62a2b26d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-01-09T23:44:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-365313"
}
```



---

archive/issue_comments_453629.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/gslconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gslconf)** to **[a180599](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**",
    "created_at": "2020-01-09T23:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-453629",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/gslconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gslconf)** to **[a180599](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**
