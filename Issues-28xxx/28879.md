# Issue 28879: spkg-configure for GSL

archive/issues_028642.json:
```json
{
    "assignees": [],
    "body": "\n\nDepends on #27870\n\nCC:  @embray @kiwifb @isuruf @mkoeppe\n\nBranch/Commit: **[`a180599`](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**\n\nWork Issues: **install modified gsl.pc**\n\nReviewer: **Isuru Fernando**\n\nAuthor: **Dima Pasechnik**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28879_\n\n",
    "closed_at": "2020-01-09T23:44:29Z",
    "created_at": "2019-12-13T14:42:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "spkg-configure for GSL",
    "type": "issue",
    "updated_at": "2020-01-09T23:44:29Z",
    "url": "https://github.com/sagemath/sage/issues/28879",
    "user": "https://github.com/dimpase"
}
```


Depends on #27870

CC:  @embray @kiwifb @isuruf @mkoeppe

Branch/Commit: **[`a180599`](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**

Work Issues: **install modified gsl.pc**

Reviewer: **Isuru Fernando**

Author: **Dima Pasechnik**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/28879_





---

archive/issue_events_396699.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-13T14:42:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396699"
}
```



---

archive/issue_events_396700.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-13T14:42:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396700"
}
```



---

archive/issue_events_396701.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-13T14:42:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396701"
}
```



---

archive/issue_comments_450695.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d\"><code>e5c91db</code></a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1720b38cdca1aa6c436a4b579545c227d3a313fc\"><code>1720b38</code></a></td><td><code>a bare minumim openblas config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/925266bfb2e8446e4fadd09eea86d7c04534eed6\"><code>925266b</code></a></td><td><code>use openblas.pc for blas and lapack, don't require atlas is to be used</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b89df80e245766884e59d78accfe809e240ad2ba\"><code>b89df80</code></a></td><td><code>move blas handling to build/pkgs/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/634157628ac3f7292e7065eae462bb6b80db7aed\"><code>6341576</code></a></td><td><code>create cblas.pc link, too, not only blas and lapack</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4\"><code>3a95431</code></a></td><td><code>spkg-configure for gsl</code></td></tr></table>\n",
    "created_at": "2019-12-14T10:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450695",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5c91dbb4d313d43f05cf3d33fc1758ac089613d"><code>e5c91db</code></a></td><td><code>update pkgconfig to v1.5.1. See trac #28883</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1720b38cdca1aa6c436a4b579545c227d3a313fc"><code>1720b38</code></a></td><td><code>a bare minumim openblas config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/925266bfb2e8446e4fadd09eea86d7c04534eed6"><code>925266b</code></a></td><td><code>use openblas.pc for blas and lapack, don't require atlas is to be used</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b89df80e245766884e59d78accfe809e240ad2ba"><code>b89df80</code></a></td><td><code>move blas handling to build/pkgs/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/634157628ac3f7292e7065eae462bb6b80db7aed"><code>6341576</code></a></td><td><code>create cblas.pc link, too, not only blas and lapack</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4"><code>3a95431</code></a></td><td><code>spkg-configure for gsl</code></td></tr></table>




---

archive/issue_comments_450696.json:
```json
{
    "body": "Changed commit from **[`f8833aa`](https://github.com/sagemath/sagetrac-mirror/commit/f8833aa8b98fadbb8f060e112ba4ef3638a5421d)** to **[`3a95431`](https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4)**",
    "created_at": "2019-12-14T10:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450696",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f8833aa`](https://github.com/sagemath/sagetrac-mirror/commit/f8833aa8b98fadbb8f060e112ba4ef3638a5421d)** to **[`3a95431`](https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4)**



---

archive/issue_events_396702.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T22:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396702"
}
```



---

archive/issue_events_396703.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-14T22:57:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396703"
}
```



---

archive/issue_comments_450697.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nDid you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?",
    "created_at": "2019-12-14T23:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450697",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:4" align="right">comment:4</div>

Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?



---

archive/issue_comments_450698.json:
```json
{
    "body": "Changed commit from **[`3a95431`](https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4)** to **[`137c972`](https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2)**",
    "created_at": "2019-12-14T23:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450698",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a95431`](https://github.com/sagemath/sagetrac-mirror/commit/3a95431674d81d946926d0553d0f70b0d77654a4)** to **[`137c972`](https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2)**



---

archive/issue_comments_450699.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2\"><code>137c972</code></a></td><td><code>typo in variable name</code></td></tr></table>\n",
    "created_at": "2019-12-14T23:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450699",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2"><code>137c972</code></a></td><td><code>typo in variable name</code></td></tr></table>




---

archive/issue_comments_450700.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@isuruf](#comment:4):\n> Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?\n\nOnly on debian and gentoo, where it's linked to its own gslcblas",
    "created_at": "2019-12-15T00:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450700",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@isuruf](#comment:4):
> Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?

Only on debian and gentoo, where it's linked to its own gslcblas



---

archive/issue_comments_450701.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@dimpase](#comment:6):\n> Replying to [@isuruf](#comment:4):\n> > Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?\n\n> \n> Only on debian and gentoo, where it's linked to its own gslcblas\n\nNot on my gentoo box, but that would be the default. In any case neither debian or gentoo will ship it underlinked. I don't think any major distro ship underlinked libraries. OK as much as they can help it. Stuff that people build themselves is another story",
    "created_at": "2019-12-15T00:07:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450701",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@dimpase](#comment:6):
> Replying to [@isuruf](#comment:4):
> > Did you check this with an underlinked GSL (A blas library is not linked in) or a fully linked one like Sage's GSL?

> 
> Only on debian and gentoo, where it's linked to its own gslcblas

Not on my gentoo box, but that would be the default. In any case neither debian or gentoo will ship it underlinked. I don't think any major distro ship underlinked libraries. OK as much as they can help it. Stuff that people build themselves is another story



---

archive/issue_comments_450702.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhat happens when `gslcblas` and `openblas` are both linked in?",
    "created_at": "2019-12-15T01:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450702",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:8" align="right">comment:8</div>

What happens when `gslcblas` and `openblas` are both linked in?



---

archive/issue_comments_450703.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nA bit pathological, but basically nothing visible until you test something with a high precision where there can be divergences between the two. \nIf you run GSL test suite with openblas rather than gslcblas you'll get failures of the numerical noise kind.\n\nHonestly, I am not sure which one would be used. My guess would be the first one on the list of libraries linked.",
    "created_at": "2019-12-15T01:28:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450703",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

A bit pathological, but basically nothing visible until you test something with a high precision where there can be divergences between the two. 
If you run GSL test suite with openblas rather than gslcblas you'll get failures of the numerical noise kind.

Honestly, I am not sure which one would be used. My guess would be the first one on the list of libraries linked.



---

archive/issue_comments_450704.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOkay. Another concern is when system's `gsl.pc` is used by downstream packages, they'll be linking to `gslcblas` instead of `openblas`, but sage's `gsl.pc` would link the downstream package to `openblas`.",
    "created_at": "2019-12-15T01:32:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450704",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:10" align="right">comment:10</div>

Okay. Another concern is when system's `gsl.pc` is used by downstream packages, they'll be linking to `gslcblas` instead of `openblas`, but sage's `gsl.pc` would link the downstream package to `openblas`.



---

archive/issue_comments_450705.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n\n```\nfbissey@moonloop ~ $  cat /usr/lib64/pkgconfig/gsl.pc \nprefix=/usr\nexec_prefix=/usr\nlibdir=/usr/lib64\nincludedir=/usr/include\nGSL_CBLAS_LIB=-lcblas\n\nName: GSL\nDescription: GNU Scientific Library\nVersion: 2.5\nLibs: -L/usr/lib64 -lgsl ${GSL_CBLAS_LIB} -lm -lm \nCflags: -I/usr/include\n```\ndistro will usually patch gsl.pc to match the linking they are doing. Supposing that libgsl is linked with cblas1 and sage tries to link extensions gslext.pyx using libgsl to cblas2. If there are direct call to cblas in glsext.pyx, cblas2 will be used for these, otherwise -lcblas2 will be ignored. If there is no direct calls to cblas in gslext.pyx, libgsl will use cblas1, since cblas2 will be discarded. If cblas2 is not discarded because there are calls to cblas in gslext.pyx what you get in libgsl is not clearly defined and may depend on what is loaded first.",
    "created_at": "2019-12-15T01:52:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450705",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>


```
fbissey@moonloop ~ $  cat /usr/lib64/pkgconfig/gsl.pc 
prefix=/usr
exec_prefix=/usr
libdir=/usr/lib64
includedir=/usr/include
GSL_CBLAS_LIB=-lcblas

Name: GSL
Description: GNU Scientific Library
Version: 2.5
Libs: -L/usr/lib64 -lgsl ${GSL_CBLAS_LIB} -lm -lm 
Cflags: -I/usr/include
```
distro will usually patch gsl.pc to match the linking they are doing. Supposing that libgsl is linked with cblas1 and sage tries to link extensions gslext.pyx using libgsl to cblas2. If there are direct call to cblas in glsext.pyx, cblas2 will be used for these, otherwise -lcblas2 will be ignored. If there is no direct calls to cblas in gslext.pyx, libgsl will use cblas1, since cblas2 will be discarded. If cblas2 is not discarded because there are calls to cblas in gslext.pyx what you get in libgsl is not clearly defined and may depend on what is loaded first.



---

archive/issue_comments_450706.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOn Ubuntu,\n\n```\n(base) isuru@isuru:~$ cat /usr/lib/x86_64-linux-gnu/pkgconfig/gsl.pc \nprefix=/usr\nexec_prefix=/usr\nlibdir=/usr/lib/x86_64-linux-gnu\nincludedir=/usr/include\nGSL_CBLAS_LIB=-lgslcblas\n\nName: GSL\nDescription: GNU Scientific Library\nVersion: 2.4\nLibs: -L/usr/lib/x86_64-linux-gnu -lgsl ${GSL_CBLAS_LIB} -lm -lm \nCflags: -I/usr/include\n(base) isuru@isuru:~$ ls /usr/lib/x86_64-linux-gnu/libgslcblas.so\n/usr/lib/x86_64-linux-gnu/libgslcblas.so\n(base) isuru@isuru:~$ ls -al /usr/lib/x86_64-linux-gnu/libgslcblas.so\nlrwxrwxrwx 1 root root 20 Aug  9  2017 /usr/lib/x86_64-linux-gnu/libgslcblas.so -> libgslcblas.so.0.0.0\n(base) isuru@isuru:~$ ls -al /usr/lib/x86_64-linux-gnu/libgslcblas.so.0.0.0 \n-rw-r--r-- 1 root root 255968 Aug  9  2017 /usr/lib/x86_64-linux-gnu/libgslcblas.so.0.0.0\n```",
    "created_at": "2019-12-15T03:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450706",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:12" align="right">comment:12</div>

On Ubuntu,

```
(base) isuru@isuru:~$ cat /usr/lib/x86_64-linux-gnu/pkgconfig/gsl.pc 
prefix=/usr
exec_prefix=/usr
libdir=/usr/lib/x86_64-linux-gnu
includedir=/usr/include
GSL_CBLAS_LIB=-lgslcblas

Name: GSL
Description: GNU Scientific Library
Version: 2.4
Libs: -L/usr/lib/x86_64-linux-gnu -lgsl ${GSL_CBLAS_LIB} -lm -lm 
Cflags: -I/usr/include
(base) isuru@isuru:~$ ls /usr/lib/x86_64-linux-gnu/libgslcblas.so
/usr/lib/x86_64-linux-gnu/libgslcblas.so
(base) isuru@isuru:~$ ls -al /usr/lib/x86_64-linux-gnu/libgslcblas.so
lrwxrwxrwx 1 root root 20 Aug  9  2017 /usr/lib/x86_64-linux-gnu/libgslcblas.so -> libgslcblas.so.0.0.0
(base) isuru@isuru:~$ ls -al /usr/lib/x86_64-linux-gnu/libgslcblas.so.0.0.0 
-rw-r--r-- 1 root root 255968 Aug  9  2017 /usr/lib/x86_64-linux-gnu/libgslcblas.so.0.0.0
```



---

archive/issue_comments_450707.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nIt is underlinked as far as I can tell.\n\n```\n(base) isuru@isuru:~$ ldd /usr/lib/x86_64-linux-gnu/libgsl.so.23\n        linux-vdso.so.1 (0x00007fffb1ba6000)\n        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8a703f4000)\n        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8a70003000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007f8a70bf4000)\n```",
    "created_at": "2019-12-15T03:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450707",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:13" align="right">comment:13</div>

It is underlinked as far as I can tell.

```
(base) isuru@isuru:~$ ldd /usr/lib/x86_64-linux-gnu/libgsl.so.23
        linux-vdso.so.1 (0x00007fffb1ba6000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8a703f4000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8a70003000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f8a70bf4000)
```



---

archive/issue_comments_450708.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOK, I am surprised. Then cblas as to be provided with anything linking libgsl. And if we are taking it from gsl.pc that may be gslcblas. At worst we take performance hit.\n\nAn option would be to substitute gslcblas by the the default cblas we are using in the linking flags.",
    "created_at": "2019-12-15T03:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450708",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

OK, I am surprised. Then cblas as to be provided with anything linking libgsl. And if we are taking it from gsl.pc that may be gslcblas. At worst we take performance hit.

An option would be to substitute gslcblas by the the default cblas we are using in the linking flags.



---

archive/issue_comments_450709.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIn the openblas `spkg-configure` script, `openblas.pc` is copied into `$SAGE_LOCAL/lib/pkgconfig/cblas.pc`. How about copying the system `gsl.pc` into `$SAGE_LOCAL/lib/pkgconfig/gsl.pc` and replacing the gslcblas line with openblas? (or whatever BLAS is selected)",
    "created_at": "2019-12-15T03:57:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450709",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:15" align="right">comment:15</div>

In the openblas `spkg-configure` script, `openblas.pc` is copied into `$SAGE_LOCAL/lib/pkgconfig/cblas.pc`. How about copying the system `gsl.pc` into `$SAGE_LOCAL/lib/pkgconfig/gsl.pc` and replacing the gslcblas line with openblas? (or whatever BLAS is selected)



---

archive/issue_comments_450710.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nRemove `GSL_CBLAS_LIB` and add a line\n\n```\nrequires: cblas\n```\nwhich will pull `cblas.pc` all by itself.",
    "created_at": "2019-12-15T04:03:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450710",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

Remove `GSL_CBLAS_LIB` and add a line

```
requires: cblas
```
which will pull `cblas.pc` all by itself.



---

archive/issue_comments_450711.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nJust to make it clear, are you proposing to change `gsl.pc` in the underlinked case only,\nright?\n\nWill the underlinked GSL work with \"cblas\", which is in the configuration of #27870 the same as `openblas`? (I am ignorant about the purpose of `gslcblas`, sorry).",
    "created_at": "2019-12-15T09:01:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450711",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

Just to make it clear, are you proposing to change `gsl.pc` in the underlinked case only,
right?

Will the underlinked GSL work with "cblas", which is in the configuration of #27870 the same as `openblas`? (I am ignorant about the purpose of `gslcblas`, sorry).



---

archive/issue_comments_450712.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nYes it will work. It would work if we did it in all cases. `gslcblas` is just another complete cblas implementation just as atlas and openblas are.",
    "created_at": "2019-12-15T09:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450712",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

Yes it will work. It would work if we did it in all cases. `gslcblas` is just another complete cblas implementation just as atlas and openblas are.



---

archive/issue_events_396704.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-15T10:00:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396704"
}
```



---

archive/issue_events_396705.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-15T10:00:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396705"
}
```



---

archive/issue_comments_450713.json:
```json
{
    "body": "Work Issues: **install modified gsl.pc**",
    "created_at": "2019-12-15T10:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450713",
    "user": "https://github.com/dimpase"
}
```

Work Issues: **install modified gsl.pc**



---

archive/issue_comments_450714.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@kiwifb](#comment:14):\n> OK, I am surprised. Then cblas as to be provided with anything linking libgsl. And if we are taking it from gsl.pc that may be gslcblas. At worst we take performance hit.\n> \n> An option would be to substitute gslcblas by the the default cblas we are using in the linking flags.\n\nGSL is also underlinked on Fedora",
    "created_at": "2019-12-15T12:27:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450714",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@kiwifb](#comment:14):
> OK, I am surprised. Then cblas as to be provided with anything linking libgsl. And if we are taking it from gsl.pc that may be gslcblas. At worst we take performance hit.
> 
> An option would be to substitute gslcblas by the the default cblas we are using in the linking flags.

GSL is also underlinked on Fedora



---

archive/issue_comments_450715.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@isuruf](#comment:8):\n> What happens when `gslcblas` and `openblas` are both linked in?\n\nthis is what I get with this branch:\n\n```\n$ ldd local/lib/python3.7/site-packages/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so\n...\n\tlibgsl.so.23 => /usr/lib/x86_64-linux-gnu/libgsl.so.23 (0x00007d76b701a000)\n\tlibopenblas.so.0 => /usr/lib/x86_64-linux-gnu/libopenblas.so.0 (0x00007d76b4e36000)\n...\n\tlibgslcblas.so.0 => /usr/lib/x86_64-linux-gnu/libgslcblas.so.0 (0x00007d76b48db000)\n...\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007d76b462e000)\n...\n```\n\nso both `libopenblas.so` and `libgslblas.so` are there. \n(I suppose it's the same with Sage-supplied GSL and OpenBLAS)\n\nAre you saying that modifyng `gsl.pc` as suggested here would lead to skipping `libgslblas.so` ?\n\nIMHO this would not lead to re-linking `libgsl.so` with `libopenblas.so`, if it was\nalready linked with `libgslblas.so`. Woulndn't is need some `LD_PRELOAD` platform-dependent `ld` hacks  --- I guess MacOS would need something quite different to achieve this.",
    "created_at": "2019-12-20T04:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450715",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@isuruf](#comment:8):
> What happens when `gslcblas` and `openblas` are both linked in?

this is what I get with this branch:

```
$ ldd local/lib/python3.7/site-packages/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so
...
	libgsl.so.23 => /usr/lib/x86_64-linux-gnu/libgsl.so.23 (0x00007d76b701a000)
	libopenblas.so.0 => /usr/lib/x86_64-linux-gnu/libopenblas.so.0 (0x00007d76b4e36000)
...
	libgslcblas.so.0 => /usr/lib/x86_64-linux-gnu/libgslcblas.so.0 (0x00007d76b48db000)
...
	libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007d76b462e000)
...
```

so both `libopenblas.so` and `libgslblas.so` are there. 
(I suppose it's the same with Sage-supplied GSL and OpenBLAS)

Are you saying that modifyng `gsl.pc` as suggested here would lead to skipping `libgslblas.so` ?

IMHO this would not lead to re-linking `libgsl.so` with `libopenblas.so`, if it was
already linked with `libgslblas.so`. Woulndn't is need some `LD_PRELOAD` platform-dependent `ld` hacks  --- I guess MacOS would need something quite different to achieve this.



---

archive/issue_comments_450716.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n> (I suppose it's the same with Sage-supplied GSL and OpenBLAS) \n\nNo, see https://github.com/sagemath/sage/blob/f0ae571d17e685258c1de89c2a29953f4d8fb302/build/pkgs/gsl/patches/gsl-2.1-gslcblas.patch . gslcblas is removed sage-suplied GSL.\n\n>  Are you saying that modifyng gsl.pc as suggested here would lead to skipping libgslblas.so ?\n\nYes\n\n> IMHO this would not lead to re-linking libgsl.so with libopenblas.so, if it was already linked with libgslblas.so\n\n`libgsl.so` is not linked to any blas in distros like Ubuntu. It is underlinked. In sage-the-distribution, `libgsl.so` is linked to `libopenblas` and the `-lgslcblas` line is removed from `gsl.pc`.",
    "created_at": "2019-12-20T04:12:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450716",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:22" align="right">comment:22</div>

> (I suppose it's the same with Sage-supplied GSL and OpenBLAS) 

No, see https://github.com/sagemath/sage/blob/f0ae571d17e685258c1de89c2a29953f4d8fb302/build/pkgs/gsl/patches/gsl-2.1-gslcblas.patch . gslcblas is removed sage-suplied GSL.

>  Are you saying that modifyng gsl.pc as suggested here would lead to skipping libgslblas.so ?

Yes

> IMHO this would not lead to re-linking libgsl.so with libopenblas.so, if it was already linked with libgslblas.so

`libgsl.so` is not linked to any blas in distros like Ubuntu. It is underlinked. In sage-the-distribution, `libgsl.so` is linked to `libopenblas` and the `-lgslcblas` line is removed from `gsl.pc`.



---

archive/issue_comments_450717.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nNo, why, on Debian 10 I see\n\n```\n$ ldd /usr/lib/x86_64-linux-gnu/libgsl.so\n\tlinux-vdso.so.1 (0x00007ffcf2bb5000)\n\tlibgslcblas.so.0 => /usr/lib/x86_64-linux-gnu/libgslcblas.so.0 (0x00007a0da11b5000)\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007a0da1032000)\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007a0da0e71000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007a0da1499000)\n```\nSo libgsl.so is linked to libopenblas.so",
    "created_at": "2019-12-20T04:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450717",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

No, why, on Debian 10 I see

```
$ ldd /usr/lib/x86_64-linux-gnu/libgsl.so
	linux-vdso.so.1 (0x00007ffcf2bb5000)
	libgslcblas.so.0 => /usr/lib/x86_64-linux-gnu/libgslcblas.so.0 (0x00007a0da11b5000)
	libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007a0da1032000)
	libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007a0da0e71000)
	/lib64/ld-linux-x86-64.so.2 (0x00007a0da1499000)
```
So libgsl.so is linked to libopenblas.so



---

archive/issue_comments_450718.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI guess it depends on the distro. I checked Ubuntu 18.04, and it's underlinked there. See [#28879 comment:13](https://github.com/sagemath/sage/issues/28879#comment:13)",
    "created_at": "2019-12-20T04:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450718",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:24" align="right">comment:24</div>

I guess it depends on the distro. I checked Ubuntu 18.04, and it's underlinked there. See [#28879 comment:13](https://github.com/sagemath/sage/issues/28879#comment:13)



---

archive/issue_comments_450719.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@isuruf](#comment:24):\n> I guess it depends on the distro. I checked Ubuntu 18.04, and it's underlinked there. See [#28879 comment:13](https://github.com/sagemath/sage/issues/28879#comment:13)\n\nYes, it's distro-dependent. So how is this gsl.pc hack supposed to help in such a case (of already linked gslcblas?\nAre we left with linking to both openblas and gslcblas then?",
    "created_at": "2019-12-20T04:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450719",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@isuruf](#comment:24):
> I guess it depends on the distro. I checked Ubuntu 18.04, and it's underlinked there. See [#28879 comment:13](https://github.com/sagemath/sage/issues/28879#comment:13)

Yes, it's distro-dependent. So how is this gsl.pc hack supposed to help in such a case (of already linked gslcblas?
Are we left with linking to both openblas and gslcblas then?



---

archive/issue_comments_450720.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIn the case that it is already linked to libgslcblas, then the library or the executable using gsl has the option of selecting the blas.\n\nSee https://wiki.debian.org/DebianScience/LinearAlgebraLibraries section \"Using the GSL with an optimized BLAS\"",
    "created_at": "2019-12-20T04:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450720",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:26" align="right">comment:26</div>

In the case that it is already linked to libgslcblas, then the library or the executable using gsl has the option of selecting the blas.

See https://wiki.debian.org/DebianScience/LinearAlgebraLibraries section "Using the GSL with an optimized BLAS"



---

archive/issue_comments_450721.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@isuruf](#comment:26):\n> In the case that it is already linked to libgslcblas, then the library or the executable using gsl has the option of selecting the blas.\n> \n> See https://wiki.debian.org/DebianScience/LinearAlgebraLibraries section \"Using the GSL with an optimized BLAS\"\n\nwell, this does not quite wotk.\nAfter these changes to gsl.pc I see the correct linking command\n\n```\n    gcc -pthread -shared -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L. -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib build/temp.linux-x86_64-3.7/src/C/gsl.o -L/home/dimpase/sage/local -L/home/dimpase/sage/local -L/home/dimpase/sage/local/lib -lm -lgsl -lopenblas -lpython3.7m -o build/lib.linux-x86_64-3.7/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so\n```\nbut stil the same ldd output as in [comment:21](#comment:21).",
    "created_at": "2019-12-20T06:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450721",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@isuruf](#comment:26):
> In the case that it is already linked to libgslcblas, then the library or the executable using gsl has the option of selecting the blas.
> 
> See https://wiki.debian.org/DebianScience/LinearAlgebraLibraries section "Using the GSL with an optimized BLAS"

well, this does not quite wotk.
After these changes to gsl.pc I see the correct linking command

```
    gcc -pthread -shared -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L. -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib -L/home/dimpase/sage/local/lib -Wl,-rpath,/home/dimpase/sage/local/lib build/temp.linux-x86_64-3.7/src/C/gsl.o -L/home/dimpase/sage/local -L/home/dimpase/sage/local -L/home/dimpase/sage/local/lib -lm -lgsl -lopenblas -lpython3.7m -o build/lib.linux-x86_64-3.7/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so
```
but stil the same ldd output as in [comment:21](#comment:21).



---

archive/issue_comments_450722.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n`ldd` gives transitive deps. Try `readelf -d local/lib/python3.7/site-packages/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so`",
    "created_at": "2019-12-20T06:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450722",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:28" align="right">comment:28</div>

`ldd` gives transitive deps. Try `readelf -d local/lib/python3.7/site-packages/cvxopt/gsl.cpython-37m-x86_64-linux-gnu.so`



---

archive/issue_comments_450723.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOK, so `readelf -d` indeed shows that the only linking to gslcblas comes from one of the linked libs\n\n```\n0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libgsl.so.23]\n 0x0000000000000001 (NEEDED)             Shared library: [libopenblas.so.0]\n 0x0000000000000001 (NEEDED)             Shared library: [libpython3.7m.so.1.0]\n 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n```\nand it must be libgsl, for obvious reasons.\nSo that's as good as it gets, we won't try to relink libgsl, right?",
    "created_at": "2019-12-20T07:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450723",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

OK, so `readelf -d` indeed shows that the only linking to gslcblas comes from one of the linked libs

```
0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]
 0x0000000000000001 (NEEDED)             Shared library: [libgsl.so.23]
 0x0000000000000001 (NEEDED)             Shared library: [libopenblas.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libpython3.7m.so.1.0]
 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
```
and it must be libgsl, for obvious reasons.
So that's as good as it gets, we won't try to relink libgsl, right?



---

archive/issue_comments_450724.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n> So that's as good as it gets, we won't try to relink libgsl, right? \n\nYes. Looks good. Can you push your changes to modify gsl.pc?",
    "created_at": "2019-12-20T11:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450724",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:30" align="right">comment:30</div>

> So that's as good as it gets, we won't try to relink libgsl, right? 

Yes. Looks good. Can you push your changes to modify gsl.pc?



---

archive/issue_comments_450725.json:
```json
{
    "body": "Changed commit from **[`137c972`](https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2)** to **[`2bc86cd`](https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2)**",
    "created_at": "2019-12-20T18:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450725",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`137c972`](https://github.com/sagemath/sagetrac-mirror/commit/137c97252c15455b1d0e8c8d81929b4a21e722b2)** to **[`2bc86cd`](https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2)**



---

archive/issue_comments_450726.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2\"><code>2bc86cd</code></a></td><td><code>install and modify gsl.pc to use cblas</code></td></tr></table>\n",
    "created_at": "2019-12-20T18:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450726",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2"><code>2bc86cd</code></a></td><td><code>install and modify gsl.pc to use cblas</code></td></tr></table>




---

archive/issue_comments_450727.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThis is not ideal, as one should use `$SED`, not `sed`.\nHowever, calling `sed` happens in `config.status`, and I have no\nidea how to make `$SED` known there.\nProbably some magic with \"init commands\" I don't know.",
    "created_at": "2019-12-20T18:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450727",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

This is not ideal, as one should use `$SED`, not `sed`.
However, calling `sed` happens in `config.status`, and I have no
idea how to make `$SED` known there.
Probably some magic with "init commands" I don't know.



---

archive/issue_events_396706.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-20T18:41:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396706"
}
```



---

archive/issue_events_396707.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-20T18:41:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396707"
}
```



---

archive/issue_comments_450728.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\n`sed -i` without an extension is GNU sed specific and doesn't work with BSD sed",
    "created_at": "2019-12-20T18:43:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450728",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:35" align="right">comment:35</div>

`sed -i` without an extension is GNU sed specific and doesn't work with BSD sed



---

archive/issue_events_396708.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-20T18:43:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396708"
}
```



---

archive/issue_events_396709.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-20T18:43:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396709"
}
```



---

archive/issue_comments_450729.json:
```json
{
    "body": "Changed commit from **[`2bc86cd`](https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2)** to **[`c13be38`](https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e)**",
    "created_at": "2019-12-21T01:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450729",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2bc86cd`](https://github.com/sagemath/sagetrac-mirror/commit/2bc86cd701014b1bdcc0c7d5055c5d323962fbd2)** to **[`c13be38`](https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e)**



---

archive/issue_comments_450730.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e\"><code>c13be38</code></a></td><td><code>add extension '' to -i in sed calls</code></td></tr></table>\n",
    "created_at": "2019-12-21T01:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450730",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e"><code>c13be38</code></a></td><td><code>add extension '' to -i in sed calls</code></td></tr></table>




---

archive/issue_comments_450731.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@isuruf](#comment:35):\n> `sed -i` without an extension is GNU sed specific and doesn't work with BSD sed\n\nIt is not posix full stop. I am surprised it works as suggested on freeBSD. My experience with AIX `sed`, which is posix, is that `-i` isn't supported at all. Fortunately we don't have to support such dinosaur platforms.\n\n@dimpase one of the purpose of `-e` is to be able to chain commands.\n\n```\nsed -i'' -e 's/\\${GSL_CBLAS_LIB}\\ //'  -e 's/GSL_CBLAS_LIB.*/Require: cblas/' \"$SAGE_LOCAL\"/lib/pkgconfig/gsl.pc\n```\nis perfectly legal. Of course some line separation gain in clarity, but that's why I would break things into several line in a pure shell script\n\n```\nsed  \\\n       -e 's/\\${GSL_CBLAS_LIB}\\ //'  \\\n       -e 's/GSL_CBLAS_LIB.*/Require: cblas/' \\\n       -i'' $SAGE_LOCAL\"/lib/pkgconfig/gsl.pc\n```",
    "created_at": "2019-12-21T01:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450731",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@isuruf](#comment:35):
> `sed -i` without an extension is GNU sed specific and doesn't work with BSD sed

It is not posix full stop. I am surprised it works as suggested on freeBSD. My experience with AIX `sed`, which is posix, is that `-i` isn't supported at all. Fortunately we don't have to support such dinosaur platforms.

@dimpase one of the purpose of `-e` is to be able to chain commands.

```
sed -i'' -e 's/\${GSL_CBLAS_LIB}\ //'  -e 's/GSL_CBLAS_LIB.*/Require: cblas/' "$SAGE_LOCAL"/lib/pkgconfig/gsl.pc
```
is perfectly legal. Of course some line separation gain in clarity, but that's why I would break things into several line in a pure shell script

```
sed  \
       -e 's/\${GSL_CBLAS_LIB}\ //'  \
       -e 's/GSL_CBLAS_LIB.*/Require: cblas/' \
       -i'' $SAGE_LOCAL"/lib/pkgconfig/gsl.pc
```



---

archive/issue_comments_450732.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b\"><code>310ba06</code></a></td><td><code>get SED into config.status</code></td></tr></table>\n",
    "created_at": "2019-12-21T01:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450732",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b"><code>310ba06</code></a></td><td><code>get SED into config.status</code></td></tr></table>




---

archive/issue_comments_450733.json:
```json
{
    "body": "Changed commit from **[`c13be38`](https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e)** to **[`310ba06`](https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b)**",
    "created_at": "2019-12-21T01:23:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450733",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c13be38`](https://github.com/sagemath/sagetrac-mirror/commit/c13be388d0e6ce1dbd719d64a7a71ff2f87cc82e)** to **[`310ba06`](https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b)**



---

archive/issue_comments_450734.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOK, all done, also managed to get SED value into config.status.",
    "created_at": "2019-12-21T01:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450734",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

OK, all done, also managed to get SED value into config.status.



---

archive/issue_events_396710.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T01:25:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396710"
}
```



---

archive/issue_events_396711.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T01:25:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396711"
}
```



---

archive/issue_comments_450735.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nif you prefer chained `-e` in one sed call, let me know. I don't see this comment while I fought value of SED thing :-)",
    "created_at": "2019-12-21T01:28:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450735",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

if you prefer chained `-e` in one sed call, let me know. I don't see this comment while I fought value of SED thing :-)



---

archive/issue_comments_450736.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@dimpase](#comment:40):\n> if you prefer chained `-e` in one sed call, let me know. I don't see this comment while I fought value of SED thing :-)\n\nThat's just nitpicking and absolutely non-esential. My comment should be taken as informative rather than \"take this action, please\".",
    "created_at": "2019-12-21T01:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450736",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@dimpase](#comment:40):
> if you prefer chained `-e` in one sed call, let me know. I don't see this comment while I fought value of SED thing :-)

That's just nitpicking and absolutely non-esential. My comment should be taken as informative rather than "take this action, please".



---

archive/issue_comments_450737.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@kiwifb](#comment:37):\n> Replying to [@isuruf](#comment:35):\n> > `sed -i` without an extension is GNU sed specific and doesn't work with BSD sed\n\n> \n> It is not posix full stop. I am surprised it works as suggested on freeBSD. My experience with AIX `sed`, which is posix, is that `-i` isn't supported at all. Fortunately we don't have to support such dinosaur platforms.\n\nI'm pretty sure this doesn't work on OSX. See https://stackoverflow.com/a/5694430/4768820",
    "created_at": "2019-12-21T14:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450737",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@kiwifb](#comment:37):
> Replying to [@isuruf](#comment:35):
> > `sed -i` without an extension is GNU sed specific and doesn't work with BSD sed

> 
> It is not posix full stop. I am surprised it works as suggested on freeBSD. My experience with AIX `sed`, which is posix, is that `-i` isn't supported at all. Fortunately we don't have to support such dinosaur platforms.

I'm pretty sure this doesn't work on OSX. See https://stackoverflow.com/a/5694430/4768820



---

archive/issue_comments_450738.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nSo it should be `-i *`, not `-i*`? I don't have access to an OSX machine in the coming 2 weeks, sorry.",
    "created_at": "2019-12-21T14:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450738",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">comment:43</div>

So it should be `-i *`, not `-i*`? I don't have access to an OSX machine in the coming 2 weeks, sorry.



---

archive/issue_comments_450739.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n`-i *` works in BSD/OSX sed, but doesn't in GNU sed. `-i*` works in GNU sed, but doesn't in BSD/OSX sed.\n\nSolution is to use `-i.bak` as in the StackOverflow answer. This creates a backup file with suffix `.bak`",
    "created_at": "2019-12-21T14:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450739",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:44" align="right">comment:44</div>

`-i *` works in BSD/OSX sed, but doesn't in GNU sed. `-i*` works in GNU sed, but doesn't in BSD/OSX sed.

Solution is to use `-i.bak` as in the StackOverflow answer. This creates a backup file with suffix `.bak`



---

archive/issue_comments_450740.json:
```json
{
    "body": "Changed commit from **[`310ba06`](https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b)** to **[`f9d6966`](https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3)**",
    "created_at": "2019-12-21T15:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450740",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`310ba06`](https://github.com/sagemath/sagetrac-mirror/commit/310ba06411ee413379c1ce3ca75b595ac83e8b0b)** to **[`f9d6966`](https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3)**



---

archive/issue_comments_450741.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3\"><code>f9d6966</code></a></td><td><code>get rid of -i option of sed</code></td></tr></table>\n",
    "created_at": "2019-12-21T15:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450741",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3"><code>f9d6966</code></a></td><td><code>get rid of -i option of sed</code></td></tr></table>




---

archive/issue_comments_450742.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nOK, done. Now it's POSIX, I think.",
    "created_at": "2019-12-21T15:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450742",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

OK, done. Now it's POSIX, I think.



---

archive/issue_comments_450743.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\ntesting this on Ubuntu (i.e. undelinked libgsl.so) gives a linking error during python import:\n\n```\n$ ./sage --python\nPython 3.7.3 (default, Dec 21 2019, 11:29:09) \n[GCC 7.4.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from sage.rings.complex_double import CDF\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nImportError: /usr/lib/i386-linux-gnu/libgsl.so.23: undefined symbol: cblas_ctrmv\n>>> \n```\nI suppose some sagelib modules don't know that they must also link with openblas.",
    "created_at": "2019-12-21T15:27:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450743",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

testing this on Ubuntu (i.e. undelinked libgsl.so) gives a linking error during python import:

```
$ ./sage --python
Python 3.7.3 (default, Dec 21 2019, 11:29:09) 
[GCC 7.4.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> from sage.rings.complex_double import CDF
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: /usr/lib/i386-linux-gnu/libgsl.so.23: undefined symbol: cblas_ctrmv
>>> 
```
I suppose some sagelib modules don't know that they must also link with openblas.



---

archive/issue_events_396712.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T15:27:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396712"
}
```



---

archive/issue_events_396713.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T15:27:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396713"
}
```



---

archive/issue_comments_450744.json:
```json
{
    "body": "<div id=\"comment:48\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b\"><code>9d9e046</code></a></td><td><code>fix a crucial typo in edited gsl.pc</code></td></tr></table>\n",
    "created_at": "2019-12-21T15:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450744",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b"><code>9d9e046</code></a></td><td><code>fix a crucial typo in edited gsl.pc</code></td></tr></table>




---

archive/issue_comments_450745.json:
```json
{
    "body": "Changed commit from **[`f9d6966`](https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3)** to **[`9d9e046`](https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b)**",
    "created_at": "2019-12-21T15:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450745",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f9d6966`](https://github.com/sagemath/sagetrac-mirror/commit/f9d6966f63a12991b81dce40ba69887cd9dacaa3)** to **[`9d9e046`](https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b)**



---

archive/issue_comments_450746.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nthe .pc syntax needs `Requires` rather than `Require`...",
    "created_at": "2019-12-21T15:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450746",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:49" align="right">comment:49</div>

the .pc syntax needs `Requires` rather than `Require`...



---

archive/issue_events_396714.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T17:11:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396714"
}
```



---

archive/issue_events_396715.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-21T17:11:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396715"
}
```



---

archive/issue_comments_450747.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nnow things work on Ubuntu, too.",
    "created_at": "2019-12-21T17:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450747",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">comment:50</div>

now things work on Ubuntu, too.



---

archive/issue_events_396716.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-21T18:54:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396716"
}
```



---

archive/issue_events_396717.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2019-12-21T18:54:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396717"
}
```



---

archive/issue_comments_450748.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nTested that configure creates gsl.pc correctly in OSX.",
    "created_at": "2019-12-21T18:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450748",
    "user": "https://github.com/isuruf"
}
```

<div id="comment:51" align="right">comment:51</div>

Tested that configure creates gsl.pc correctly in OSX.



---

archive/issue_comments_450749.json:
```json
{
    "body": "Reviewer: **Isuru Fernando**",
    "created_at": "2019-12-21T19:04:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450749",
    "user": "https://github.com/isuruf"
}
```

Reviewer: **Isuru Fernando**



---

archive/issue_comments_450750.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c031c9ea33b2e6210d571b6939c5faf2e0ed4f84\"><code>c031c9e</code></a></td><td><code>use openblas.pc for blas and lapack, don't require atlas is to be used</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b49f79eca2bde8ce3ce134dbdc7f01172bd9293c\"><code>b49f79e</code></a></td><td><code>move blas handling to build/pkgs/</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81bf522a5a417e236f9b9ee4f05256126b5b47cb\"><code>81bf522</code></a></td><td><code>create cblas.pc link, too, not only blas and lapack</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/244f9545e970dda46f609434b658d02c8fb2573b\"><code>244f954</code></a></td><td><code>spkg-configure for gsl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efd642f346bbfb3eb8f1c8ca468b0293add4f8c1\"><code>efd642f</code></a></td><td><code>typo in variable name</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/641e3fae1fa51e8b25c025d2ab1c37f13f4cfee6\"><code>641e3fa</code></a></td><td><code>install and modify gsl.pc to use cblas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51bc6229a1d89c7d82ddad4bbf4cc8709f7ad9f4\"><code>51bc622</code></a></td><td><code>add extension '' to -i in sed calls</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13a54341d819e383bd0de58b1c3427fb50e06a09\"><code>13a5434</code></a></td><td><code>get SED into config.status</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac32b133c2f86798f3ed18d709a8609147b07119\"><code>ac32b13</code></a></td><td><code>get rid of -i option of sed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8\"><code>a180599</code></a></td><td><code>fix a crucial typo in edited gsl.pc</code></td></tr></table>\n",
    "created_at": "2019-12-28T08:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450750",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c031c9ea33b2e6210d571b6939c5faf2e0ed4f84"><code>c031c9e</code></a></td><td><code>use openblas.pc for blas and lapack, don't require atlas is to be used</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b49f79eca2bde8ce3ce134dbdc7f01172bd9293c"><code>b49f79e</code></a></td><td><code>move blas handling to build/pkgs/</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81bf522a5a417e236f9b9ee4f05256126b5b47cb"><code>81bf522</code></a></td><td><code>create cblas.pc link, too, not only blas and lapack</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/244f9545e970dda46f609434b658d02c8fb2573b"><code>244f954</code></a></td><td><code>spkg-configure for gsl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efd642f346bbfb3eb8f1c8ca468b0293add4f8c1"><code>efd642f</code></a></td><td><code>typo in variable name</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/641e3fae1fa51e8b25c025d2ab1c37f13f4cfee6"><code>641e3fa</code></a></td><td><code>install and modify gsl.pc to use cblas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51bc6229a1d89c7d82ddad4bbf4cc8709f7ad9f4"><code>51bc622</code></a></td><td><code>add extension '' to -i in sed calls</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13a54341d819e383bd0de58b1c3427fb50e06a09"><code>13a5434</code></a></td><td><code>get SED into config.status</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac32b133c2f86798f3ed18d709a8609147b07119"><code>ac32b13</code></a></td><td><code>get rid of -i option of sed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8"><code>a180599</code></a></td><td><code>fix a crucial typo in edited gsl.pc</code></td></tr></table>




---

archive/issue_comments_450751.json:
```json
{
    "body": "Changed commit from **[`9d9e046`](https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b)** to **[`a180599`](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**",
    "created_at": "2019-12-28T08:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450751",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9d9e046`](https://github.com/sagemath/sagetrac-mirror/commit/9d9e0465310b67352105644e7e26eabb2684c84b)** to **[`a180599`](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**



---

archive/issue_events_396718.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-12-28T08:02:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396718"
}
```



---

archive/issue_events_396719.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-12-28T08:02:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396719"
}
```



---

archive/issue_events_396720.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-28T08:03:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396720"
}
```



---

archive/issue_events_396721.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-28T08:03:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396721"
}
```



---

archive/issue_comments_450752.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\ntrivial rebase over updated #27870",
    "created_at": "2019-12-28T08:03:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450752",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:54" align="right">comment:54</div>

trivial rebase over updated #27870



---

archive/issue_events_396722.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-28T08:03:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396722"
}
```



---

archive/issue_events_396723.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-12-28T08:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396723"
}
```



---

archive/issue_events_396724.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-01T14:38:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396724"
}
```



---

archive/issue_events_396725.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-01-01T14:38:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396725"
}
```



---

archive/issue_events_396726.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-09T23:44:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396726"
}
```



---

archive/issue_events_396727.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c4ed371cdfc728bc4afa0b1c529f887b62a2b26d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-01-09T23:44:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28879#event-396727"
}
```



---

archive/issue_comments_450753.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/gslconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gslconf)** to **[`a180599`](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**",
    "created_at": "2020-01-09T23:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28879#issuecomment-450753",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/gslconf](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/gslconf)** to **[`a180599`](https://github.com/sagemath/sagetrac-mirror/commit/a18059933c6b6ecfe4e98a7c8e1ca6de3dc223c8)**
