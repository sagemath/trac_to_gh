# Issue 28873: Implement ambient volume of polyhedron with normaliz

archive/issues_028636.json:
```json
{
    "body": "We implement the ambient volume using backend normaliz.\n\nThis is done by return 0 or infinity if the polyhedron is not full-dimensional and not compact respectively.\n\nOtherwise, we take the `induced_lattice` volume and divide by `factorial(self.dim())`.\n\nSee section 6.1.1 of the normaliz manual on how `induced_lattice` volume relates to euclidean volume: [https://github.com/Normaliz/Normaliz/blob/master/doc/Normaliz.pdf](https://github.com/Normaliz/Normaliz/blob/master/doc/Normaliz.pdf)\n\nThis is much faster than the current method, so we set this to default if backend is normaliz.\n\n```\nsage: P = polytopes.dodecahedron(backend='normaliz')\nsage: %time P.volume(engine='normaliz')\nCPU times: user 3.91 ms, sys: 0 ns, total: 3.91 ms\nWall time: 1.49 ms\n-176*sqrt5 + 400\nsage: %time P.volume(engine='internal')\nCPU times: user 26.5 ms, sys: 332 \u00b5s, total: 26.9 ms\nWall time: 27.5 ms\n-176*sqrt5 + 400\n```\n\n```\nsage: P = polytopes.one_hundred_twenty_cell(backend='normaliz')\nsage: %time P.volume(engine='normaliz')\nCPU times: user 1.5 s, sys: 0 ns, total: 1.5 s\nWall time: 210 ms\n120*sqrt5\nsage: %time P.volume(engine='internal')\nCPU times: user 8.61 s, sys: 14.7 ms, total: 8.63 s\nWall time: 8.63 s\n120*sqrt5\n```\n\n```\nsage: P = polytopes.hypercube(6, backend='normaliz')\nsage: %time P.volume(engine='normaliz')\nCPU times: user 2.33 ms, sys: 0 ns, total: 2.33 ms\nWall time: 2.34 ms\n64\nsage: %time P.volume(engine='internal')\nCPU times: user 183 ms, sys: 32 \u00b5s, total: 183 ms\nWall time: 182 ms\n64\n```\n\nThis also speeds up calculation in case the polyhedron is not full-dimensional:\n\n```\nsage: P = polytopes.permutahedron(6, backend='normaliz')\nsage: %time P.volume(measure='induced')\nCPU times: user 37.7 s, sys: 42.4 ms, total: 37.7 s\nWall time: 24.2 s\n1296*sqrt(6)\nsage: %time P.volume(engine='internal', measure='induced')\nCPU times: user 42.9 s, sys: 71.9 ms, total: 43 s\nWall time: 41.8 s\n1296*sqrt(6)\n```\n\nHowever, note that calculation of the affine hull takes quite some time in this case. So we leave the inexact normaliz option for now:\n\n```\nsage: %time P.volume(engine='normaliz', measure='induced')\nCPU times: user 710 ms, sys: 0 ns, total: 710 ms\nWall time: 92.3 ms\n3174.5387066469984\n```\n\nPossible follow ups:\n\nThere is probably a good and fast way to convert the lattice volume to the euclidean volume exactly. Also, once we can set up a normaliz polyhedron with both Vrep and Hrep, affine hull should be really quick.\n\n**CC:**  @jplab @laisrast\n\n**Keywords:** polyhedron, normaliz, ambient volume\n\n**Branch/Commit:** [cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8](https://github.com/sagemath/sagetrac-mirror/commit/cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8)\n\n**Reviewer:** Jean-Philippe Labb\u00e9\n\n**Author:** Jonathan Kliem\n\n**Dependencies:** #28872\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28873\n\n",
    "closed_at": "2020-04-23T22:33:01Z",
    "created_at": "2019-12-12T07:50:39Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Implement ambient volume of polyhedron with normaliz",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28873",
    "user": "https://github.com/kliem"
}
```
We implement the ambient volume using backend normaliz.

This is done by return 0 or infinity if the polyhedron is not full-dimensional and not compact respectively.

Otherwise, we take the `induced_lattice` volume and divide by `factorial(self.dim())`.

See section 6.1.1 of the normaliz manual on how `induced_lattice` volume relates to euclidean volume: [https://github.com/Normaliz/Normaliz/blob/master/doc/Normaliz.pdf](https://github.com/Normaliz/Normaliz/blob/master/doc/Normaliz.pdf)

This is much faster than the current method, so we set this to default if backend is normaliz.

```
sage: P = polytopes.dodecahedron(backend='normaliz')
sage: %time P.volume(engine='normaliz')
CPU times: user 3.91 ms, sys: 0 ns, total: 3.91 ms
Wall time: 1.49 ms
-176*sqrt5 + 400
sage: %time P.volume(engine='internal')
CPU times: user 26.5 ms, sys: 332 µs, total: 26.9 ms
Wall time: 27.5 ms
-176*sqrt5 + 400
```

```
sage: P = polytopes.one_hundred_twenty_cell(backend='normaliz')
sage: %time P.volume(engine='normaliz')
CPU times: user 1.5 s, sys: 0 ns, total: 1.5 s
Wall time: 210 ms
120*sqrt5
sage: %time P.volume(engine='internal')
CPU times: user 8.61 s, sys: 14.7 ms, total: 8.63 s
Wall time: 8.63 s
120*sqrt5
```

```
sage: P = polytopes.hypercube(6, backend='normaliz')
sage: %time P.volume(engine='normaliz')
CPU times: user 2.33 ms, sys: 0 ns, total: 2.33 ms
Wall time: 2.34 ms
64
sage: %time P.volume(engine='internal')
CPU times: user 183 ms, sys: 32 µs, total: 183 ms
Wall time: 182 ms
64
```

This also speeds up calculation in case the polyhedron is not full-dimensional:

```
sage: P = polytopes.permutahedron(6, backend='normaliz')
sage: %time P.volume(measure='induced')
CPU times: user 37.7 s, sys: 42.4 ms, total: 37.7 s
Wall time: 24.2 s
1296*sqrt(6)
sage: %time P.volume(engine='internal', measure='induced')
CPU times: user 42.9 s, sys: 71.9 ms, total: 43 s
Wall time: 41.8 s
1296*sqrt(6)
```

However, note that calculation of the affine hull takes quite some time in this case. So we leave the inexact normaliz option for now:

```
sage: %time P.volume(engine='normaliz', measure='induced')
CPU times: user 710 ms, sys: 0 ns, total: 710 ms
Wall time: 92.3 ms
3174.5387066469984
```

Possible follow ups:

There is probably a good and fast way to convert the lattice volume to the euclidean volume exactly. Also, once we can set up a normaliz polyhedron with both Vrep and Hrep, affine hull should be really quick.

**CC:**  @jplab @laisrast

**Keywords:** polyhedron, normaliz, ambient volume

**Branch/Commit:** [cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8](https://github.com/sagemath/sagetrac-mirror/commit/cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8)

**Reviewer:** Jean-Philippe Labbé

**Author:** Jonathan Kliem

**Dependencies:** #28872

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/28873





---

archive/issue_comments_561821.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a15a44b8702bcd05d441f794493be350ce461f4\">6a15a44</a></td><td><code>raised error instead of crashing for a bug in normaliz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/516a62270a54e6d15f32e87241cf953a4f5daf75\">516a622</a></td><td><code>actually fixing our error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f99cf7e9dedd2d5220f6409576041d065757e3c9\">f99cf7e</a></td><td><code>implement ambient volume using normaliz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f92b7b501c81e5dea25203681dce756307c5d6c\">2f92b7b</a></td><td><code>took care of non-compact case</code></td></tr></table>\n",
    "created_at": "2019-12-12T07:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561821",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a15a44b8702bcd05d441f794493be350ce461f4">6a15a44</a></td><td><code>raised error instead of crashing for a bug in normaliz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/516a62270a54e6d15f32e87241cf953a4f5daf75">516a622</a></td><td><code>actually fixing our error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f99cf7e9dedd2d5220f6409576041d065757e3c9">f99cf7e</a></td><td><code>implement ambient volume using normaliz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f92b7b501c81e5dea25203681dce756307c5d6c">2f92b7b</a></td><td><code>took care of non-compact case</code></td></tr></table>




---

archive/issue_comments_561822.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-12-12T07:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561822",
    "user": "https://github.com/kliem"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_561823.json:
```json
{
    "body": "**Commit:** [2f92b7b501c81e5dea25203681dce756307c5d6c](https://github.com/sagemath/sagetrac-mirror/commit/2f92b7b501c81e5dea25203681dce756307c5d6c)",
    "created_at": "2019-12-12T07:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561823",
    "user": "https://github.com/kliem"
}
```

**Commit:** [2f92b7b501c81e5dea25203681dce756307c5d6c](https://github.com/sagemath/sagetrac-mirror/commit/2f92b7b501c81e5dea25203681dce756307c5d6c)



---

archive/issue_comments_561824.json:
```json
{
    "body": "**Branch:** [public/28873](https://github.com/sagemath/sagetrac-mirror/tree/public/28873)",
    "created_at": "2019-12-12T07:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561824",
    "user": "https://github.com/kliem"
}
```

**Branch:** [public/28873](https://github.com/sagemath/sagetrac-mirror/tree/public/28873)



---

archive/issue_comments_561825.json:
```json
{
    "body": "**Changing commit** from \"[2f92b7b501c81e5dea25203681dce756307c5d6c](https://github.com/sagemath/sagetrac-mirror/commit/2f92b7b501c81e5dea25203681dce756307c5d6c)\" to \"[a35dc82c5d26c74e935f0c1b6d054e2efe3467be](https://github.com/sagemath/sagetrac-mirror/commit/a35dc82c5d26c74e935f0c1b6d054e2efe3467be)\".",
    "created_at": "2019-12-12T07:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2f92b7b501c81e5dea25203681dce756307c5d6c](https://github.com/sagemath/sagetrac-mirror/commit/2f92b7b501c81e5dea25203681dce756307c5d6c)" to "[a35dc82c5d26c74e935f0c1b6d054e2efe3467be](https://github.com/sagemath/sagetrac-mirror/commit/a35dc82c5d26c74e935f0c1b6d054e2efe3467be)".



---

archive/issue_comments_561826.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a35dc82c5d26c74e935f0c1b6d054e2efe3467be\">a35dc82</a></td><td><code>removed not needed method</code></td></tr></table>\n",
    "created_at": "2019-12-12T07:53:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561826",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a35dc82c5d26c74e935f0c1b6d054e2efe3467be">a35dc82</a></td><td><code>removed not needed method</code></td></tr></table>




---

archive/issue_comments_561827.json:
```json
{
    "body": "**Changing branch** from \"[public/28873](https://github.com/sagemath/sagetrac-mirror/tree/public/28873)\" to \"[public/28873-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb)\".",
    "created_at": "2019-12-26T21:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561827",
    "user": "https://github.com/kliem"
}
```

**Changing branch** from "[public/28873](https://github.com/sagemath/sagetrac-mirror/tree/public/28873)" to "[public/28873-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb)".



---

archive/issue_comments_561828.json:
```json
{
    "body": "**Changing commit** from \"[a35dc82c5d26c74e935f0c1b6d054e2efe3467be](https://github.com/sagemath/sagetrac-mirror/commit/a35dc82c5d26c74e935f0c1b6d054e2efe3467be)\" to \"[a349c8ce2614c117aeea58a98d0ae0a0312035f7](https://github.com/sagemath/sagetrac-mirror/commit/a349c8ce2614c117aeea58a98d0ae0a0312035f7)\".",
    "created_at": "2019-12-26T21:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561828",
    "user": "https://github.com/kliem"
}
```

**Changing commit** from "[a35dc82c5d26c74e935f0c1b6d054e2efe3467be](https://github.com/sagemath/sagetrac-mirror/commit/a35dc82c5d26c74e935f0c1b6d054e2efe3467be)" to "[a349c8ce2614c117aeea58a98d0ae0a0312035f7](https://github.com/sagemath/sagetrac-mirror/commit/a349c8ce2614c117aeea58a98d0ae0a0312035f7)".



---

archive/issue_comments_561829.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4046e3a9fd486bf2292005bdfe0996368e4926e9\">4046e3a</a></td><td><code>implement ambient volume using normaliz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/485cc64131ca6d2461b033cf31a983cd0295ae3a\">485cc64</a></td><td><code>took care of non-compact case</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6985bf8343378cca342d681e35795e7ebec5a390\">6985bf8</a></td><td><code>removed not needed method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/591d3b146d31b1c78a87c1fdc86e4611dd9bd98d\">591d3b1</a></td><td><code>fix pyflakes warning; added optional flag</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a349c8ce2614c117aeea58a98d0ae0a0312035f7\">a349c8c</a></td><td><code>undid change regarding strange conversion of normaliz </code></td>Sublattice<td><code> output</code></td></tr></table>\n",
    "created_at": "2019-12-26T21:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561829",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4046e3a9fd486bf2292005bdfe0996368e4926e9">4046e3a</a></td><td><code>implement ambient volume using normaliz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/485cc64131ca6d2461b033cf31a983cd0295ae3a">485cc64</a></td><td><code>took care of non-compact case</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6985bf8343378cca342d681e35795e7ebec5a390">6985bf8</a></td><td><code>removed not needed method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/591d3b146d31b1c78a87c1fdc86e4611dd9bd98d">591d3b1</a></td><td><code>fix pyflakes warning; added optional flag</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a349c8ce2614c117aeea58a98d0ae0a0312035f7">a349c8c</a></td><td><code>undid change regarding strange conversion of normaliz </code></td>Sublattice<td><code> output</code></td></tr></table>




---

archive/issue_comments_561830.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/add61a5dcf0194da376d34e2c3959c22d2b48bb4\">add61a5</a></td><td><code>undo false alignment</code></td></tr></table>\n",
    "created_at": "2019-12-26T21:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561830",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/add61a5dcf0194da376d34e2c3959c22d2b48bb4">add61a5</a></td><td><code>undo false alignment</code></td></tr></table>




---

archive/issue_comments_561831.json:
```json
{
    "body": "**Changing commit** from \"[a349c8ce2614c117aeea58a98d0ae0a0312035f7](https://github.com/sagemath/sagetrac-mirror/commit/a349c8ce2614c117aeea58a98d0ae0a0312035f7)\" to \"[add61a5dcf0194da376d34e2c3959c22d2b48bb4](https://github.com/sagemath/sagetrac-mirror/commit/add61a5dcf0194da376d34e2c3959c22d2b48bb4)\".",
    "created_at": "2019-12-26T21:38:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a349c8ce2614c117aeea58a98d0ae0a0312035f7](https://github.com/sagemath/sagetrac-mirror/commit/a349c8ce2614c117aeea58a98d0ae0a0312035f7)" to "[add61a5dcf0194da376d34e2c3959c22d2b48bb4](https://github.com/sagemath/sagetrac-mirror/commit/add61a5dcf0194da376d34e2c3959c22d2b48bb4)".



---

archive/issue_comments_561832.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt should be noted that the conversion of the normaliz output does not work correctly when computing `Sublattice` for algebraic polyhedra.",
    "created_at": "2019-12-26T21:45:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561832",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'></a>
It should be noted that the conversion of the normaliz output does not work correctly when computing `Sublattice` for algebraic polyhedra.



---

archive/issue_comments_561833.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -44,6 +44,29 @@\n 64\n ```\n \n-Follow up:\n+This also speeds up calculation in case the polyhedron is not full-dimensional:\n \n-Once `affine_hull` completely respects the backend, this method will be used to calculate the induced volume by default (automatically).\n+```\n+sage: P = polytopes.permutahedron(6, backend='normaliz')\n+sage: %time P.volume(measure='induced')\n+CPU times: user 37.7 s, sys: 42.4 ms, total: 37.7 s\n+Wall time: 24.2 s\n+1296*sqrt(6)\n+sage: %time P.volume(engine='internal', measure='induced')\n+CPU times: user 42.9 s, sys: 71.9 ms, total: 43 s\n+Wall time: 41.8 s\n+1296*sqrt(6)\n+```\n+\n+However, note that calculation of the affine hull takes quite some time in this case. So we leave the inexact normaliz option for now:\n+\n+```\n+sage: %time P.volume(engine='normaliz', measure='induced')\n+CPU times: user 710 ms, sys: 0 ns, total: 710 ms\n+Wall time: 92.3 ms\n+3174.5387066469984\n+```\n+\n+Possible follow ups:\n+\n+There is probably a good and fast way to convert the lattice volume to the euclidean volume exactly. Also, once we can set up a normaliz polyhedron with both Vrep and Hrep, affine hull should be really quick.\n``````\n",
    "created_at": "2019-12-26T22:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561833",
    "user": "https://github.com/kliem"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -44,6 +44,29 @@
 64
 ```
 
-Follow up:
+This also speeds up calculation in case the polyhedron is not full-dimensional:
 
-Once `affine_hull` completely respects the backend, this method will be used to calculate the induced volume by default (automatically).
+```
+sage: P = polytopes.permutahedron(6, backend='normaliz')
+sage: %time P.volume(measure='induced')
+CPU times: user 37.7 s, sys: 42.4 ms, total: 37.7 s
+Wall time: 24.2 s
+1296*sqrt(6)
+sage: %time P.volume(engine='internal', measure='induced')
+CPU times: user 42.9 s, sys: 71.9 ms, total: 43 s
+Wall time: 41.8 s
+1296*sqrt(6)
+```
+
+However, note that calculation of the affine hull takes quite some time in this case. So we leave the inexact normaliz option for now:
+
+```
+sage: %time P.volume(engine='normaliz', measure='induced')
+CPU times: user 710 ms, sys: 0 ns, total: 710 ms
+Wall time: 92.3 ms
+3174.5387066469984
+```
+
+Possible follow ups:
+
+There is probably a good and fast way to convert the lattice volume to the euclidean volume exactly. Also, once we can set up a normaliz polyhedron with both Vrep and Hrep, affine hull should be really quick.
``````




---

archive/issue_events_082479.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28873#event-82479"
}
```



---

archive/issue_comments_561834.json:
```json
{
    "body": "<a id='comment:7'></a>\nTicket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561834",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Ticket retargeted after milestone closed



---

archive/issue_comments_561835.json:
```json
{
    "body": "<a id='comment:8'></a>\nRebased.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0797f5ae613226eacb57b2f1d48579f835f5ca58\">0797f5a</a></td><td><code>implement ambient volume using normaliz</code></td></tr></table>\n",
    "created_at": "2020-03-27T15:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561835",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'></a>
Rebased.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0797f5ae613226eacb57b2f1d48579f835f5ca58">0797f5a</a></td><td><code>implement ambient volume using normaliz</code></td></tr></table>




---

archive/issue_comments_561836.json:
```json
{
    "body": "**Changing branch** from \"[public/28873-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb)\" to \"[public/28873-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb2)\".",
    "created_at": "2020-03-27T15:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561836",
    "user": "https://github.com/kliem"
}
```

**Changing branch** from "[public/28873-reb](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb)" to "[public/28873-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb2)".



---

archive/issue_comments_561837.json:
```json
{
    "body": "**Changing commit** from \"[add61a5dcf0194da376d34e2c3959c22d2b48bb4](https://github.com/sagemath/sagetrac-mirror/commit/add61a5dcf0194da376d34e2c3959c22d2b48bb4)\" to \"[0797f5ae613226eacb57b2f1d48579f835f5ca58](https://github.com/sagemath/sagetrac-mirror/commit/0797f5ae613226eacb57b2f1d48579f835f5ca58)\".",
    "created_at": "2020-03-27T15:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561837",
    "user": "https://github.com/kliem"
}
```

**Changing commit** from "[add61a5dcf0194da376d34e2c3959c22d2b48bb4](https://github.com/sagemath/sagetrac-mirror/commit/add61a5dcf0194da376d34e2c3959c22d2b48bb4)" to "[0797f5ae613226eacb57b2f1d48579f835f5ca58](https://github.com/sagemath/sagetrac-mirror/commit/0797f5ae613226eacb57b2f1d48579f835f5ca58)".



---

archive/issue_comments_561838.json:
```json
{
    "body": "<a id='comment:9'></a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561838",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_082480.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28873#event-82480"
}
```



---

archive/issue_events_082481.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28873#event-82481"
}
```



---

archive/issue_comments_561839.json:
```json
{
    "body": "**Reviewer:** Jean-Philippe Labb\u00e9",
    "created_at": "2020-04-19T13:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561839",
    "user": "https://github.com/jplab"
}
```

**Reviewer:** Jean-Philippe Labbé



---

archive/issue_comments_561840.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-04-19T13:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561840",
    "user": "https://github.com/jplab"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_561841.json:
```json
{
    "body": "<a id='comment:10'></a>\nYou should add the reference to the manual in the documentation of the function. That would be a good improvement.",
    "created_at": "2020-04-19T13:40:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561841",
    "user": "https://github.com/jplab"
}
```

<a id='comment:10'></a>
You should add the reference to the manual in the documentation of the function. That would be a good improvement.



---

archive/issue_comments_561842.json:
```json
{
    "body": "**Changing commit** from \"[0797f5ae613226eacb57b2f1d48579f835f5ca58](https://github.com/sagemath/sagetrac-mirror/commit/0797f5ae613226eacb57b2f1d48579f835f5ca58)\" to \"[6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47](https://github.com/sagemath/sagetrac-mirror/commit/6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47)\".",
    "created_at": "2020-04-19T14:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561842",
    "user": "https://github.com/kliem"
}
```

**Changing commit** from "[0797f5ae613226eacb57b2f1d48579f835f5ca58](https://github.com/sagemath/sagetrac-mirror/commit/0797f5ae613226eacb57b2f1d48579f835f5ca58)" to "[6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47](https://github.com/sagemath/sagetrac-mirror/commit/6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47)".



---

archive/issue_comments_561843.json:
```json
{
    "body": "**Changing branch** from \"[public/28873-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb2)\" to \"[public/28873-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb3)\".",
    "created_at": "2020-04-19T14:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561843",
    "user": "https://github.com/kliem"
}
```

**Changing branch** from "[public/28873-reb2](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb2)" to "[public/28873-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb3)".



---

archive/issue_comments_561844.json:
```json
{
    "body": "<a id='comment:11'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/548d302ad38f9b1a25a6258dbea16058de0fc888\">548d302</a></td><td><code>Merge branch 'public/28873-reb2' of git://trac.sagemath.org/sage into public/28873-reb3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47\">6a3d5b4</a></td><td><code>added reference</code></td></tr></table>\n",
    "created_at": "2020-04-19T14:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561844",
    "user": "https://github.com/kliem"
}
```

<a id='comment:11'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/548d302ad38f9b1a25a6258dbea16058de0fc888">548d302</a></td><td><code>Merge branch 'public/28873-reb2' of git://trac.sagemath.org/sage into public/28873-reb3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47">6a3d5b4</a></td><td><code>added reference</code></td></tr></table>




---

archive/issue_comments_561845.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-04-19T14:24:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561845",
    "user": "https://github.com/kliem"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_561846.json:
```json
{
    "body": "<a id='comment:12'></a>\nIt would be nice to have this in 9.1, if possible.",
    "created_at": "2020-04-19T14:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561846",
    "user": "https://github.com/kliem"
}
```

<a id='comment:12'></a>
It would be nice to have this in 9.1, if possible.



---

archive/issue_comments_561847.json:
```json
{
    "body": "<a id='comment:13'></a>\nIs the following \"unimodual\" a typo? Is unimodular meant?\n\n```diff\n+        One other possibility is to compute the scaled volume where a unimodual\n```\n\nThere is also\n\n```diff\n+        volume of the unimodal simplex (or zero if not full-dimensional)::\n```\n\nUnimodular?\n\nCould you check if this occurs in the rest of the file too?\n\nOtherwise, the ticket looks good and the bots are green on 9.1rc0, so you can put this on positive review on my behalf once you considered the above comments.",
    "created_at": "2020-04-20T09:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561847",
    "user": "https://github.com/jplab"
}
```

<a id='comment:13'></a>
Is the following "unimodual" a typo? Is unimodular meant?

```diff
+        One other possibility is to compute the scaled volume where a unimodual
```

There is also

```diff
+        volume of the unimodal simplex (or zero if not full-dimensional)::
```

Unimodular?

Could you check if this occurs in the rest of the file too?

Otherwise, the ticket looks good and the bots are green on 9.1rc0, so you can put this on positive review on my behalf once you considered the above comments.



---

archive/issue_comments_561848.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-04-20T09:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561848",
    "user": "https://github.com/jplab"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_561849.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8\">cc808dd</a></td><td><code>typo with unimodular</code></td></tr></table>\n",
    "created_at": "2020-04-20T10:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561849",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8">cc808dd</a></td><td><code>typo with unimodular</code></td></tr></table>




---

archive/issue_comments_561850.json:
```json
{
    "body": "**Changing commit** from \"[6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47](https://github.com/sagemath/sagetrac-mirror/commit/6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47)\" to \"[cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8](https://github.com/sagemath/sagetrac-mirror/commit/cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8)\".",
    "created_at": "2020-04-20T10:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47](https://github.com/sagemath/sagetrac-mirror/commit/6a3d5b4056a69118ef0a15ff84f3eb0ce155bf47)" to "[cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8](https://github.com/sagemath/sagetrac-mirror/commit/cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8)".



---

archive/issue_events_082482.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-04-20T10:29:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28873#event-82482"
}
```



---

archive/issue_events_082483.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-04-20T10:29:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28873#event-82483"
}
```



---

archive/issue_comments_561851.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2020-04-20T10:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561851",
    "user": "https://github.com/kliem"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_events_082484.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-23T22:33:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28873#event-82484"
}
```



---

archive/issue_comments_561852.json:
```json
{
    "body": "**Changing branch** from \"[public/28873-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb3)\" to \"[cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8](https://github.com/sagemath/sagetrac-mirror/commit/cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8)\".",
    "created_at": "2020-04-23T22:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561852",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/28873-reb3](https://github.com/sagemath/sagetrac-mirror/tree/public/28873-reb3)" to "[cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8](https://github.com/sagemath/sagetrac-mirror/commit/cc808ddf0aa4c094426d799f26bebaf5a2b5c3e8)".



---

archive/issue_comments_561853.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2020-04-23T22:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28873#issuecomment-561853",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed
