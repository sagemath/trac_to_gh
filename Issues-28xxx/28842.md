# Issue 28842: Uncaught AttributeError in integrate()

archive/issues_028605.json:
```json
{
    "body": "As reported in this [sage-devel post](https://groups.google.com/d/msg/sage-devel/_wwyqHmE5Lg/M24X8Mv_AAAJ), some integral computations may go through SymPy and return a `RootSum` object, which has currently no translation to Sage (cf. #16816)\n\n```\nsage: integrate(1/(x^4 + x^3 + 1), x)\n...\nAttributeError: 'RootSum' object has no attribute '_sage_'\n```\nUntil #16816 is solved, the current ticket proposes a quick fix by catching the `AttributeError` as if no valid result were found, so that we get \n\n```\nsage: integrate(1/(x^4 + x^3 + 1), x)\nintegrate(1/(x^4 + x^3 + 1), x)\n```\nwhich was the behavior prior to Sage 8.9, i.e. prior to the automatic use of SymPy if Maxima fails.\n\n**CC:**  @dimpase @EmmanuelCharpentier\n\n**Keywords:** integrate, integral, sympy, RootSum\n\n**Branch/Commit:** [e5a3f32c6cb2d62384eadf132cb182e25ef01b98](https://github.com/sagemath/sagetrac-mirror/commit/e5a3f32c6cb2d62384eadf132cb182e25ef01b98)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Eric Gourgoulhon\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28842\n\n",
    "closed_at": "2019-12-09T22:54:28Z",
    "created_at": "2019-12-04T21:57:39Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Uncaught AttributeError in integrate()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28842",
    "user": "https://github.com/egourgoulhon"
}
```
As reported in this [sage-devel post](https://groups.google.com/d/msg/sage-devel/_wwyqHmE5Lg/M24X8Mv_AAAJ), some integral computations may go through SymPy and return a `RootSum` object, which has currently no translation to Sage (cf. #16816)

```
sage: integrate(1/(x^4 + x^3 + 1), x)
...
AttributeError: 'RootSum' object has no attribute '_sage_'
```
Until #16816 is solved, the current ticket proposes a quick fix by catching the `AttributeError` as if no valid result were found, so that we get 

```
sage: integrate(1/(x^4 + x^3 + 1), x)
integrate(1/(x^4 + x^3 + 1), x)
```
which was the behavior prior to Sage 8.9, i.e. prior to the automatic use of SymPy if Maxima fails.

**CC:**  @dimpase @EmmanuelCharpentier

**Keywords:** integrate, integral, sympy, RootSum

**Branch/Commit:** [e5a3f32c6cb2d62384eadf132cb182e25ef01b98](https://github.com/sagemath/sagetrac-mirror/commit/e5a3f32c6cb2d62384eadf132cb182e25ef01b98)

**Reviewer:** Frédéric Chapoton

**Author:** Eric Gourgoulhon

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/28842





---

archive/issue_comments_561025.json:
```json
{
    "body": "**Commit:** [14c75619f8ff530c2887bc3be109aa670ad0b6f1](https://github.com/sagemath/sagetrac-mirror/commit/14c75619f8ff530c2887bc3be109aa670ad0b6f1)",
    "created_at": "2019-12-04T22:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561025",
    "user": "https://github.com/egourgoulhon"
}
```


**Commit:** [14c75619f8ff530c2887bc3be109aa670ad0b6f1](https://github.com/sagemath/sagetrac-mirror/commit/14c75619f8ff530c2887bc3be109aa670ad0b6f1)



---

archive/issue_comments_561026.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14c75619f8ff530c2887bc3be109aa670ad0b6f1\">14c7561</a></td><td><code>#28842: catch AttributeError from SymPy's RootSum</code></td></tr></table>\n",
    "created_at": "2019-12-04T22:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561026",
    "user": "https://github.com/egourgoulhon"
}
```


<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14c75619f8ff530c2887bc3be109aa670ad0b6f1">14c7561</a></td><td><code>#28842: catch AttributeError from SymPy's RootSum</code></td></tr></table>




---

archive/issue_comments_561027.json:
```json
{
    "body": "**Branch:** [public/symbolics/integrate_RootSum_error-28842](https://github.com/sagemath/sagetrac-mirror/tree/public/symbolics/integrate_RootSum_error-28842)",
    "created_at": "2019-12-04T22:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561027",
    "user": "https://github.com/egourgoulhon"
}
```


**Branch:** [public/symbolics/integrate_RootSum_error-28842](https://github.com/sagemath/sagetrac-mirror/tree/public/symbolics/integrate_RootSum_error-28842)



---

archive/issue_comments_561028.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-12-04T22:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561028",
    "user": "https://github.com/egourgoulhon"
}
```


**Changing status** from new to needs_review.



---

archive/issue_comments_561029.json:
```json
{
    "body": "**Author:** Eric Gourgoulhon",
    "created_at": "2019-12-04T22:08:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561029",
    "user": "https://github.com/egourgoulhon"
}
```


**Author:** Eric Gourgoulhon



---

archive/issue_comments_561030.json:
```json
{
    "body": "<a id='comment:2'></a>\nIf/when patchbot says this is good, I think this is a good interim solution.  Good catch.",
    "created_at": "2019-12-05T04:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561030",
    "user": "https://github.com/kcrisman"
}
```


<a id='comment:2'></a>
If/when patchbot says this is good, I think this is a good interim solution.  Good catch.



---

archive/issue_comments_561031.json:
```json
{
    "body": "<a id='comment:3'></a>\npatchbot says\n\n```\n++        Check that trac:`28842` is fixed::\n+Bad trac link inserted on 1 non-empty lines\n```",
    "created_at": "2019-12-05T07:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561031",
    "user": "https://github.com/fchapoton"
}
```


<a id='comment:3'></a>
patchbot says

```
++        Check that trac:`28842` is fixed::
+Bad trac link inserted on 1 non-empty lines
```



---

archive/issue_comments_561032.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5a3f32c6cb2d62384eadf132cb182e25ef01b98\">e5a3f32</a></td><td><code>#28842: corrected trac link</code></td></tr></table>\n",
    "created_at": "2019-12-05T08:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5a3f32c6cb2d62384eadf132cb182e25ef01b98">e5a3f32</a></td><td><code>#28842: corrected trac link</code></td></tr></table>




---

archive/issue_comments_561033.json:
```json
{
    "body": "**Changing commit** from \"[14c75619f8ff530c2887bc3be109aa670ad0b6f1](https://github.com/sagemath/sagetrac-mirror/commit/14c75619f8ff530c2887bc3be109aa670ad0b6f1)\" to \"[e5a3f32c6cb2d62384eadf132cb182e25ef01b98](https://github.com/sagemath/sagetrac-mirror/commit/e5a3f32c6cb2d62384eadf132cb182e25ef01b98)\".",
    "created_at": "2019-12-05T08:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561033",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```


**Changing commit** from "[14c75619f8ff530c2887bc3be109aa670ad0b6f1](https://github.com/sagemath/sagetrac-mirror/commit/14c75619f8ff530c2887bc3be109aa670ad0b6f1)" to "[e5a3f32c6cb2d62384eadf132cb182e25ef01b98](https://github.com/sagemath/sagetrac-mirror/commit/e5a3f32c6cb2d62384eadf132cb182e25ef01b98)".



---

archive/issue_comments_561034.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [chapoton](#comment%3A3):\n> patchbot says\n> \n> ```\n> ++        Check that trac:`28842` is fixed::\n> +Bad trac link inserted on 1 non-empty lines\n> ```\n\n\nOups! This is corrected in the above commit.",
    "created_at": "2019-12-05T08:27:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561034",
    "user": "https://github.com/egourgoulhon"
}
```


<a id='comment:5'></a>
Replying to [chapoton](#comment%3A3):
> patchbot says
> 
> ```
> ++        Check that trac:`28842` is fixed::
> +Bad trac link inserted on 1 non-empty lines
> ```


Oups! This is corrected in the above commit.



---

archive/issue_events_082361.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "rename": {
        "from": "Uncatched AttributeError in integrate()",
        "to": "Uncaught AttributeError in integrate()"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28842#event-82361"
}
```




---

archive/issue_comments_561035.json:
```json
{
    "body": "<a id='comment:6'></a>\nMinor English nitpick :)",
    "created_at": "2019-12-05T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561035",
    "user": "https://github.com/embray"
}
```


<a id='comment:6'></a>
Minor English nitpick :)



---

archive/issue_comments_561036.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-12-05T12:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561036",
    "user": "https://github.com/fchapoton"
}
```


**Changing status** from needs_review to positive_review.



---

archive/issue_comments_561037.json:
```json
{
    "body": "<a id='comment:7'></a>\nok, let it be",
    "created_at": "2019-12-05T12:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561037",
    "user": "https://github.com/fchapoton"
}
```


<a id='comment:7'></a>
ok, let it be



---

archive/issue_comments_561038.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2019-12-05T12:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561038",
    "user": "https://github.com/fchapoton"
}
```


**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_561039.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [embray](#comment%3A6):\n> Minor English nitpick :)\n\nShame on me! Thanks for correcting it.",
    "created_at": "2019-12-05T12:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561039",
    "user": "https://github.com/egourgoulhon"
}
```


<a id='comment:8'></a>
Replying to [embray](#comment%3A6):
> Minor English nitpick :)

Shame on me! Thanks for correcting it.



---

archive/issue_comments_561040.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [chapoton](#comment%3A7):\n> ok, let it be\n\n\nThanks for the review!",
    "created_at": "2019-12-05T12:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561040",
    "user": "https://github.com/egourgoulhon"
}
```


<a id='comment:9'></a>
Replying to [chapoton](#comment%3A7):
> ok, let it be


Thanks for the review!



---

archive/issue_comments_561041.json:
```json
{
    "body": "<a id='comment:10'></a>\n> > Minor English nitpick :)\n\n> Shame on me! Thanks for correcting it.\nHaha, I thought about doing this but since it was just in the Trac title I didn't bother.\n\n> patchbot says\n\n\nI was wondering if that was the correct syntax.  Glad patchbot saw it.",
    "created_at": "2019-12-05T14:38:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561041",
    "user": "https://github.com/kcrisman"
}
```


<a id='comment:10'></a>
> > Minor English nitpick :)

> Shame on me! Thanks for correcting it.
Haha, I thought about doing this but since it was just in the Trac title I didn't bother.

> patchbot says


I was wondering if that was the correct syntax.  Glad patchbot saw it.



---

archive/issue_events_082362.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-09T22:54:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28842#event-82362"
}
```




---

archive/issue_comments_561042.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2019-12-09T22:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561042",
    "user": "https://github.com/vbraun"
}
```


**Resolution:** fixed



---

archive/issue_comments_561043.json:
```json
{
    "body": "**Changing branch** from \"[public/symbolics/integrate_RootSum_error-28842](https://github.com/sagemath/sagetrac-mirror/tree/public/symbolics/integrate_RootSum_error-28842)\" to \"[e5a3f32c6cb2d62384eadf132cb182e25ef01b98](https://github.com/sagemath/sagetrac-mirror/commit/e5a3f32c6cb2d62384eadf132cb182e25ef01b98)\".",
    "created_at": "2019-12-09T22:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28842",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28842#issuecomment-561043",
    "user": "https://github.com/vbraun"
}
```


**Changing branch** from "[public/symbolics/integrate_RootSum_error-28842](https://github.com/sagemath/sagetrac-mirror/tree/public/symbolics/integrate_RootSum_error-28842)" to "[e5a3f32c6cb2d62384eadf132cb182e25ef01b98](https://github.com/sagemath/sagetrac-mirror/commit/e5a3f32c6cb2d62384eadf132cb182e25ef01b98)".
