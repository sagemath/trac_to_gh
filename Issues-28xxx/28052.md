# Issue 28052: Incorporating a function for Tautological Implication in the Logic Module

archive/issues_027815.json:
```json
{
    "body": "This ticket defines a method `is_consequence` for the class `BooleanFormula`. This method provides the same functionality as the function `valid_consequence` (which is now deprecated): the method returns `True` if `self` is a tautological consequence of the given formula(s).\n\n```\n\nsage: f = propcalc.formula(\"a\")\nsage: g = propcalc.formula(\"a|b\")\nsage: f.is_consequence(g)\nFalse\nsage: g.is_consequence(f)\nTrue\n```\nIn addition, the function call `is_consequence(conclusion,hypotheses)` is defined to be a synonym for `conclusion.is_consequence(hypotheses)` and is therefore a drop-in replacement for the deprecated function `valid_consequence`.\n\nAssignee: @Medha210699\n\nKeywords: logic, symbolics, propositional formula\n\nBranch/Commit: bbec2e651fa66d96103da21115039dfa01e76e24\n\nReviewer: Dave Morris, Travis Scrimshaw\n\nAuthor: Medha Sharma, Dave Morris\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28052\n\n",
    "closed_at": "2020-03-25T22:48:27Z",
    "created_at": "2019-06-25T11:56:39Z",
    "labels": [
        "component: symbolics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Incorporating a function for Tautological Implication in the Logic Module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28052",
    "user": "https://github.com/Medha210699"
}
```
This ticket defines a method `is_consequence` for the class `BooleanFormula`. This method provides the same functionality as the function `valid_consequence` (which is now deprecated): the method returns `True` if `self` is a tautological consequence of the given formula(s).

```

sage: f = propcalc.formula("a")
sage: g = propcalc.formula("a|b")
sage: f.is_consequence(g)
False
sage: g.is_consequence(f)
True
```
In addition, the function call `is_consequence(conclusion,hypotheses)` is defined to be a synonym for `conclusion.is_consequence(hypotheses)` and is therefore a drop-in replacement for the deprecated function `valid_consequence`.

Assignee: @Medha210699

Keywords: logic, symbolics, propositional formula

Branch/Commit: bbec2e651fa66d96103da21115039dfa01e76e24

Reviewer: Dave Morris, Travis Scrimshaw

Author: Medha Sharma, Dave Morris

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28052





---

archive/issue_comments_418232.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-25T12:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418232",
    "user": "https://github.com/Medha210699"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_418233.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This ticket aims at implementing a boolean function which returns True if some formula, say f, tautologically implies another formula, say g.hat \n+This ticket aims at implementing a boolean function which returns True if some formula, say f, tautologically implies another formula, say g.\n Refer to the below example for understanding how the function will work.\n \n \\`\\`\\`\n```\n",
    "created_at": "2019-06-25T12:08:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418233",
    "user": "https://github.com/Medha210699"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This ticket aims at implementing a boolean function which returns True if some formula, say f, tautologically implies another formula, say g.hat 
+This ticket aims at implementing a boolean function which returns True if some formula, say f, tautologically implies another formula, say g.
 Refer to the below example for understanding how the function will work.
 
 \`\`\`
```




---

archive/issue_comments_418234.json:
```json
{
    "body": "<a id='comment:3'></a>A ticket should be set in needs review when it provides source code ready to be integrated into Sage.",
    "created_at": "2019-06-25T19:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418234",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>A ticket should be set in needs review when it provides source code ready to be integrated into Sage.



---

archive/issue_comments_418235.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-25T19:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418235",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418236.json:
```json
{
    "body": "Set assignee to @Medha210699.",
    "created_at": "2019-06-27T11:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418236",
    "user": "https://github.com/Medha210699"
}
```

Set assignee to @Medha210699.



---

archive/issue_comments_418237.json:
```json
{
    "body": "<a id='comment:6'></a>Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418237",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>Ticket retargeted after milestone closed



---

archive/issue_events_069521.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69521"
}
```



---

archive/issue_comments_418238.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418238",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418239.json:
```json
{
    "body": "<a id='comment:7'></a>I recommend closing this ticket as \"invalid/wontfix\", because the functionality is already available by using `sage.logic.propcalc.valid_consequence`.\n\n```\nsage: from sage.logic.propcalc import valid_consequence\nsage: f = propcalc.formula(\"a\")\nsage: g = propcalc.formula(\"a|b\")\nsage: valid_consequence(g,f) # is g a tautological consequence of f ?\nTrue\nsage: valid_consequence(f,g) # is f a tautological consequence of g ?\nFalse\n```",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418239",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:7'></a>I recommend closing this ticket as "invalid/wontfix", because the functionality is already available by using `sage.logic.propcalc.valid_consequence`.

```
sage: from sage.logic.propcalc import valid_consequence
sage: f = propcalc.formula("a")
sage: g = propcalc.formula("a|b")
sage: valid_consequence(g,f) # is g a tautological consequence of f ?
True
sage: valid_consequence(f,g) # is f a tautological consequence of g ?
False
```



---

archive/issue_comments_418240.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418240",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing priority from major to minor.



---

archive/issue_events_069522.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-11T05:49:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69522"
}
```



---

archive/issue_events_069523.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-11T05:49:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69523"
}
```



---

archive/issue_comments_418241.json:
```json
{
    "body": "<a id='comment:8'></a>Perhaps it would be good to add a method `valid_consequence` that redirects to this function to make it more discoverable?",
    "created_at": "2020-03-13T00:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418241",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Perhaps it would be good to add a method `valid_consequence` that redirects to this function to make it more discoverable?



---

archive/issue_comments_418242.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-13T01:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418242",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418243.json:
```json
{
    "body": "<a id='comment:9'></a>Thanks, that seems like a good idea. I'll do it soon, but probably not today. Probably it makes the most sense to move the definition into a method, and then (for backward compatibility) define a stand-alone function that calls the method. Perhaps the stand-alone should be deprecated?",
    "created_at": "2020-03-13T01:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418243",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:9'></a>Thanks, that seems like a good idea. I'll do it soon, but probably not today. Probably it makes the most sense to move the definition into a method, and then (for backward compatibility) define a stand-alone function that calls the method. Perhaps the stand-alone should be deprecated?



---

archive/issue_comments_418244.json:
```json
{
    "body": "<a id='comment:10'></a>I don't use this, so I don't have an option. I think it is okay to have a method redirect to a function (or vice versa; they are equivalent in my mind up to putting the definition in the method to make it easier to see via `?` on the command-line). There might be some reason for having the actual computation done in a function (which could be in a separate file). Actually, the easiest thing to do would be to simply make the function into a (bounded) method of the appropriate class. I think you just need:\n\n```python\ndef foo(x, y):\n    return -y\nclass Bar:\n    foo = foo\n```\n\n```\nsage: b = Bar()\nsage: b.foo(2)\n-2\n```\nThis would mean everything in the doc, etc. is properly linked without redundancy. This would be my recommendation.",
    "created_at": "2020-03-13T01:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418244",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>I don't use this, so I don't have an option. I think it is okay to have a method redirect to a function (or vice versa; they are equivalent in my mind up to putting the definition in the method to make it easier to see via `?` on the command-line). There might be some reason for having the actual computation done in a function (which could be in a separate file). Actually, the easiest thing to do would be to simply make the function into a (bounded) method of the appropriate class. I think you just need:

```python
def foo(x, y):
    return -y
class Bar:
    foo = foo
```

```
sage: b = Bar()
sage: b.foo(2)
-2
```
This would mean everything in the doc, etc. is properly linked without redundancy. This would be my recommendation.



---

archive/issue_events_069524.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-19T03:48:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69524"
}
```



---

archive/issue_events_069525.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-19T03:48:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69525"
}
```



---

archive/issue_comments_418245.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks for telling me about `foo = foo`. I was going to do something more complicated.\n1. I defined a method of the class `BooleanFormula` by moving the code for `valid_consequence` from `propcalc.py` into `boolformula.py`.\n2. I named the method `is_consequence` (and also defined a standalone function of this same name), to be consistent with the methods `is_satisfiable`, `is_contradiction`, etc., but retained `valid_consequence` as a deprecated function for backwards compatibility (in the file `propcalc.py`).\n3. I refactored the code for the `is_consequence` method, added coverage of the case where there are no hypotheses, and added more doctests.\n4. I made some other minor tweaks to `propcalc.py` and `boolformula.py`, such as changing \"http\" to \"https\".\n5. I revised the description of this ticket. \nShould some of this be on a separate ticket?\n\n---\nNew commits:",
    "created_at": "2020-03-19T03:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418245",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:12'></a>Thanks for telling me about `foo = foo`. I was going to do something more complicated.
1. I defined a method of the class `BooleanFormula` by moving the code for `valid_consequence` from `propcalc.py` into `boolformula.py`.
2. I named the method `is_consequence` (and also defined a standalone function of this same name), to be consistent with the methods `is_satisfiable`, `is_contradiction`, etc., but retained `valid_consequence` as a deprecated function for backwards compatibility (in the file `propcalc.py`).
3. I refactored the code for the `is_consequence` method, added coverage of the case where there are no hypotheses, and added more doctests.
4. I made some other minor tweaks to `propcalc.py` and `boolformula.py`, such as changing "http" to "https".
5. I revised the description of this ticket. 
Should some of this be on a separate ticket?

---
New commits:



---

archive/issue_comments_418246.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,15 @@\n+This ticket defines a method \\`is_consequence\\` for the class \\`BooleanFormula\\`. This method provides the same functionality as the function \\`valid_consequence\\` (which is now deprecated): the method returns \\`True\\` if \\`self\\` is a tautological consequence of the given formula(s).\n \n+\\`\\`\\`\n+\n+sage: f = propcalc.formula(\"a\")\n+sage: g = propcalc.formula(\"a|b\")\n+sage: f.is_consequence(g)\n+False\n+sage: g.is_consequence(f)\n+True\n+\\`\\`\\`\n+In addition, the function call \\`is_consequence(conclusion,hypotheses)\\` is defined to be a synonym for \\`conclusion.is_consequence(hypotheses)\\` and is therefore a drop-in replacement for the deprecated function \\`valid_consequence\\`.\n \n Comment: 1\n \n```\n",
    "created_at": "2020-03-19T03:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418246",
    "user": "https://github.com/DaveWitteMorris"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,15 @@
+This ticket defines a method \`is_consequence\` for the class \`BooleanFormula\`. This method provides the same functionality as the function \`valid_consequence\` (which is now deprecated): the method returns \`True\` if \`self\` is a tautological consequence of the given formula(s).
 
+\`\`\`
+
+sage: f = propcalc.formula("a")
+sage: g = propcalc.formula("a|b")
+sage: f.is_consequence(g)
+False
+sage: g.is_consequence(f)
+True
+\`\`\`
+In addition, the function call \`is_consequence(conclusion,hypotheses)\` is defined to be a synonym for \`conclusion.is_consequence(hypotheses)\` and is therefore a drop-in replacement for the deprecated function \`valid_consequence\`.
 
 Comment: 1
 
```




---

archive/issue_comments_418247.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-19T03:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418247",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418248.json:
```json
{
    "body": "<a id='comment:14'></a>Merge conflict.",
    "created_at": "2020-03-19T04:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418248",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:14'></a>Merge conflict.



---

archive/issue_comments_418249.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-19T04:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418249",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418250.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-19T05:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418250",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418251.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-19T05:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418251",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418252.json:
```json
{
    "body": "<a id='comment:16'></a>Fixed the merge conflict with #28053 and merged 9.1b8. I hope the patchbots will be happy now.",
    "created_at": "2020-03-19T05:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418252",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:16'></a>Fixed the merge conflict with #28053 and merged 9.1b8. I hope the patchbots will be happy now.



---

archive/issue_comments_418253.json:
```json
{
    "body": "<a id='comment:17'></a>Some little comments:\n\n```diff\n-if not(hypotheses):\n+if not hypotheses:\n```\n\nRemove ``self`` as an `INPUT:`.\n\nBeyond that, LGTM.",
    "created_at": "2020-03-19T07:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418253",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>Some little comments:

```diff
-if not(hypotheses):
+if not hypotheses:
```

Remove ``self`` as an `INPUT:`.

Beyond that, LGTM.



---

archive/issue_comments_418254.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-19T17:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418255.json:
```json
{
    "body": "<a id='comment:19'></a>Thanks for the corrections.",
    "created_at": "2020-03-19T18:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418255",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:19'></a>Thanks for the corrections.



---

archive/issue_comments_418256.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-19T22:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418256",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_418257.json:
```json
{
    "body": "<a id='comment:20'></a>Thank you. LGTM.",
    "created_at": "2020-03-19T22:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418257",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>Thank you. LGTM.



---

archive/issue_events_069526.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-25T22:48:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69526"
}
```



---

archive/issue_comments_418258.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-25T22:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-418258",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
