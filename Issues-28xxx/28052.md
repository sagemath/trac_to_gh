# Issue 28052: Incorporating a function for Tautological Implication in the Logic Module

archive/issues_027815.json:
```json
{
    "body": "This ticket defines a method `is_consequence` for the class `BooleanFormula`. This method provides the same functionality as the function `valid_consequence` (which is now deprecated): the method returns `True` if `self` is a tautological consequence of the given formula(s).\n\n```\n\nsage: f = propcalc.formula(\"a\")\nsage: g = propcalc.formula(\"a|b\")\nsage: f.is_consequence(g)\nFalse\nsage: g.is_consequence(f)\nTrue\n```\nIn addition, the function call `is_consequence(conclusion,hypotheses)` is defined to be a synonym for `conclusion.is_consequence(hypotheses)` and is therefore a drop-in replacement for the deprecated function `valid_consequence`.\n\nAssignee: @Medha210699\n\nKeywords: logic, symbolics, propositional formula\n\nReviewer: Dave Morris, Travis Scrimshaw\n\nAuthor: Medha Sharma, Dave Morris\n\nBranch: bbec2e651fa66d96103da21115039dfa01e76e24\n\nCommit: bbec2e651fa66d96103da21115039dfa01e76e24\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28052\n\n",
    "closed_at": "2020-03-25T22:48:27Z",
    "created_at": "2019-06-25T11:56:39Z",
    "labels": [
        "component: symbolics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Incorporating a function for Tautological Implication in the Logic Module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28052",
    "user": "https://github.com/Medha210699"
}
```
This ticket defines a method `is_consequence` for the class `BooleanFormula`. This method provides the same functionality as the function `valid_consequence` (which is now deprecated): the method returns `True` if `self` is a tautological consequence of the given formula(s).

```

sage: f = propcalc.formula("a")
sage: g = propcalc.formula("a|b")
sage: f.is_consequence(g)
False
sage: g.is_consequence(f)
True
```
In addition, the function call `is_consequence(conclusion,hypotheses)` is defined to be a synonym for `conclusion.is_consequence(hypotheses)` and is therefore a drop-in replacement for the deprecated function `valid_consequence`.

Assignee: @Medha210699

Keywords: logic, symbolics, propositional formula

Reviewer: Dave Morris, Travis Scrimshaw

Author: Medha Sharma, Dave Morris

Branch: bbec2e651fa66d96103da21115039dfa01e76e24

Commit: bbec2e651fa66d96103da21115039dfa01e76e24

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28052





---

archive/issue_comments_392419.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-06-25T12:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392419",
    "user": "https://github.com/Medha210699"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_392420.json:
```json
{
    "body": "<a id='comment:3'></a>A ticket should be set in needs review when it provides source code ready to be integrated into Sage.",
    "created_at": "2019-06-25T19:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392420",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>A ticket should be set in needs review when it provides source code ready to be integrated into Sage.



---

archive/issue_comments_392421.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-06-25T19:13:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392421",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_392422.json:
```json
{
    "body": "Set assignee to @Medha210699.",
    "created_at": "2019-06-27T11:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392422",
    "user": "https://github.com/Medha210699"
}
```

Set assignee to @Medha210699.



---

archive/issue_comments_392423.json:
```json
{
    "body": "<a id='comment:6'></a>Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392423",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>Ticket retargeted after milestone closed



---

archive/issue_events_069521.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69521"
}
```



---

archive/issue_comments_392424.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392424",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_392425.json:
```json
{
    "body": "<a id='comment:7'></a>I recommend closing this ticket as \"invalid/wontfix\", because the functionality is already available by using `sage.logic.propcalc.valid_consequence`.\n\n```\nsage: from sage.logic.propcalc import valid_consequence\nsage: f = propcalc.formula(\"a\")\nsage: g = propcalc.formula(\"a|b\")\nsage: valid_consequence(g,f) # is g a tautological consequence of f ?\nTrue\nsage: valid_consequence(f,g) # is f a tautological consequence of g ?\nFalse\n```",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392425",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:7'></a>I recommend closing this ticket as "invalid/wontfix", because the functionality is already available by using `sage.logic.propcalc.valid_consequence`.

```
sage: from sage.logic.propcalc import valid_consequence
sage: f = propcalc.formula("a")
sage: g = propcalc.formula("a|b")
sage: valid_consequence(g,f) # is g a tautological consequence of f ?
True
sage: valid_consequence(f,g) # is f a tautological consequence of g ?
False
```



---

archive/issue_comments_392426.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2020-03-11T05:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392426",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing priority from major to minor.



---

archive/issue_events_069522.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-11T05:49:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69522"
}
```



---

archive/issue_events_069523.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-11T05:49:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69523"
}
```



---

archive/issue_comments_392427.json:
```json
{
    "body": "<a id='comment:8'></a>Perhaps it would be good to add a method `valid_consequence` that redirects to this function to make it more discoverable?",
    "created_at": "2020-03-13T00:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392427",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Perhaps it would be good to add a method `valid_consequence` that redirects to this function to make it more discoverable?



---

archive/issue_comments_392428.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-13T01:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392428",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_392429.json:
```json
{
    "body": "<a id='comment:9'></a>Thanks, that seems like a good idea. I'll do it soon, but probably not today. Probably it makes the most sense to move the definition into a method, and then (for backward compatibility) define a stand-alone function that calls the method. Perhaps the stand-alone should be deprecated?",
    "created_at": "2020-03-13T01:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392429",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:9'></a>Thanks, that seems like a good idea. I'll do it soon, but probably not today. Probably it makes the most sense to move the definition into a method, and then (for backward compatibility) define a stand-alone function that calls the method. Perhaps the stand-alone should be deprecated?



---

archive/issue_comments_392430.json:
```json
{
    "body": "<a id='comment:10'></a>I don't use this, so I don't have an option. I think it is okay to have a method redirect to a function (or vice versa; they are equivalent in my mind up to putting the definition in the method to make it easier to see via `?` on the command-line). There might be some reason for having the actual computation done in a function (which could be in a separate file). Actually, the easiest thing to do would be to simply make the function into a (bounded) method of the appropriate class. I think you just need:\n\n```python\ndef foo(x, y):\n    return -y\nclass Bar:\n    foo = foo\n```\n\n```\nsage: b = Bar()\nsage: b.foo(2)\n-2\n```\nThis would mean everything in the doc, etc. is properly linked without redundancy. This would be my recommendation.",
    "created_at": "2020-03-13T01:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392430",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>I don't use this, so I don't have an option. I think it is okay to have a method redirect to a function (or vice versa; they are equivalent in my mind up to putting the definition in the method to make it easier to see via `?` on the command-line). There might be some reason for having the actual computation done in a function (which could be in a separate file). Actually, the easiest thing to do would be to simply make the function into a (bounded) method of the appropriate class. I think you just need:

```python
def foo(x, y):
    return -y
class Bar:
    foo = foo
```

```
sage: b = Bar()
sage: b.foo(2)
-2
```
This would mean everything in the doc, etc. is properly linked without redundancy. This would be my recommendation.



---

archive/issue_events_069524.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-19T03:48:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69524"
}
```



---

archive/issue_events_069525.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2020-03-19T03:48:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69525"
}
```



---

archive/issue_comments_392431.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks for telling me about `foo = foo`. I was going to do something more complicated.\n1. I defined a method of the class `BooleanFormula` by moving the code for `valid_consequence` from `propcalc.py` into `boolformula.py`.\n2. I named the method `is_consequence` (and also defined a standalone function of this same name), to be consistent with the methods `is_satisfiable`, `is_contradiction`, etc., but retained `valid_consequence` as a deprecated function for backwards compatibility (in the file `propcalc.py`).\n3. I refactored the code for the `is_consequence` method, added coverage of the case where there are no hypotheses, and added more doctests.\n4. I made some other minor tweaks to `propcalc.py` and `boolformula.py`, such as changing \"http\" to \"https\".\n5. I revised the description of this ticket. \nShould some of this be on a separate ticket?\n\n---\nNew commits:",
    "created_at": "2020-03-19T03:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392431",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:12'></a>Thanks for telling me about `foo = foo`. I was going to do something more complicated.
1. I defined a method of the class `BooleanFormula` by moving the code for `valid_consequence` from `propcalc.py` into `boolformula.py`.
2. I named the method `is_consequence` (and also defined a standalone function of this same name), to be consistent with the methods `is_satisfiable`, `is_contradiction`, etc., but retained `valid_consequence` as a deprecated function for backwards compatibility (in the file `propcalc.py`).
3. I refactored the code for the `is_consequence` method, added coverage of the case where there are no hypotheses, and added more doctests.
4. I made some other minor tweaks to `propcalc.py` and `boolformula.py`, such as changing "http" to "https".
5. I revised the description of this ticket. 
Should some of this be on a separate ticket?

---
New commits:



---

archive/issue_comments_392432.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-19T03:48:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392432",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_392433.json:
```json
{
    "body": "<a id='comment:14'></a>Merge conflict.",
    "created_at": "2020-03-19T04:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392433",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:14'></a>Merge conflict.



---

archive/issue_comments_392434.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-19T04:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392434",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_392435.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-19T05:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_392436.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-19T05:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392436",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_392437.json:
```json
{
    "body": "<a id='comment:16'></a>Fixed the merge conflict with #28053 and merged 9.1b8. I hope the patchbots will be happy now.",
    "created_at": "2020-03-19T05:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392437",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:16'></a>Fixed the merge conflict with #28053 and merged 9.1b8. I hope the patchbots will be happy now.



---

archive/issue_comments_392438.json:
```json
{
    "body": "<a id='comment:17'></a>Some little comments:\n\n```diff\n-if not(hypotheses):\n+if not hypotheses:\n```\n\nRemove ``self`` as an `INPUT:`.\n\nBeyond that, LGTM.",
    "created_at": "2020-03-19T07:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392438",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>Some little comments:

```diff
-if not(hypotheses):
+if not hypotheses:
```

Remove ``self`` as an `INPUT:`.

Beyond that, LGTM.



---

archive/issue_comments_392439.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-19T17:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_392440.json:
```json
{
    "body": "<a id='comment:19'></a>Thanks for the corrections.",
    "created_at": "2020-03-19T18:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392440",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:19'></a>Thanks for the corrections.



---

archive/issue_comments_392441.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-19T22:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392441",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_392442.json:
```json
{
    "body": "<a id='comment:20'></a>Thank you. LGTM.",
    "created_at": "2020-03-19T22:00:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392442",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>Thank you. LGTM.



---

archive/issue_events_069526.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-25T22:48:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28052#event-69526"
}
```



---

archive/issue_comments_392443.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-03-25T22:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28052",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28052#issuecomment-392443",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
