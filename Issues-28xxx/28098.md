# Issue 28098: Shortest path fix for the case that no path exists

archive/issues_027861.json:
```json
{
    "body": "In the documentation of the `shortest_path()` method of `GenericGraph` we can read\n\n```\nIf there is no path from `u` to `v`, the returned list is empty.\n```\n\nIn the documentation of the `shortest_path_length()` method of `GenericGraph` we can read\n\n```\nIf there is no path from `u` to `v`, returns ``Infinity``.\n```\n\n\nBut actually in many cases the methods stop with an error instead of returning an empty list or infinity, respectively:\n\n```python\n## Minimum repro\nsage: G = Graph()\nsage: G.add_vertices([1, 2])\nsage: G.shortest_path(1, 2, algorithm='BFS')\n      # result: KeyError, expected: []\nsage: G.shortest_path_length(1, 2, algorithm='BFS')\n      # result: KeyError, expected: +Infinity\nsage: G.shortest_path(1, 2, algorithm='Dijkstra_NetworkX')\n      # result: KeyError, expected: []\nsage: G.shortest_path_length(1, 2, algorithm='Dijkstra_NetworkX')\n      # result: KeyError, expected: +Infinity\nsage: G.shortest_path(1, 2, algorithm='Dijkstra_Bid_NetworkX')\n      # result: NetworkXNoPath, expected: []\nsage: G.shortest_path_length(1, 2, algorithm='Dijkstra_Bid_NetworkX')\n      # result: NetworkXNoPath, expected: +Infinity\nsage: G.shortest_path(1, 2, algorithm='Bellman-Ford_Boost')\n      # result: KeyError, expected: []\nsage: G.shortest_path_length(1, 2, algorithm='Bellman-Ford_Boost')\n      # result: KeyError, expected: +Infinity\n```\n\nI'm using [SageMath](SageMath) version 8.8, Release Date: 2019-06-26, with Python 2.7.15, on Ubuntu 18.04.2 64bit.\n\nCC:  @rajat1433\n\nBranch/Commit: f7583be987b5291d8589da614bd4d93b142b1a9e\n\nReviewer: David Coudert, Rajat Mittal\n\nAuthor: Hendrik Schrezenmaier\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28098\n\n",
    "closed_at": "2019-07-05T15:29:12Z",
    "created_at": "2019-07-02T18:55:49Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Shortest path fix for the case that no path exists",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28098",
    "user": "https://github.com/hensc"
}
```
In the documentation of the `shortest_path()` method of `GenericGraph` we can read

```
If there is no path from `u` to `v`, the returned list is empty.
```

In the documentation of the `shortest_path_length()` method of `GenericGraph` we can read

```
If there is no path from `u` to `v`, returns ``Infinity``.
```


But actually in many cases the methods stop with an error instead of returning an empty list or infinity, respectively:

```python
## Minimum repro
sage: G = Graph()
sage: G.add_vertices([1, 2])
sage: G.shortest_path(1, 2, algorithm='BFS')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='BFS')
      # result: KeyError, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Dijkstra_NetworkX')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Dijkstra_NetworkX')
      # result: KeyError, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Dijkstra_Bid_NetworkX')
      # result: NetworkXNoPath, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Dijkstra_Bid_NetworkX')
      # result: NetworkXNoPath, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Bellman-Ford_Boost')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Bellman-Ford_Boost')
      # result: KeyError, expected: +Infinity
```

I'm using [SageMath](SageMath) version 8.8, Release Date: 2019-06-26, with Python 2.7.15, on Ubuntu 18.04.2 64bit.

CC:  @rajat1433

Branch/Commit: f7583be987b5291d8589da614bd4d93b142b1a9e

Reviewer: David Coudert, Rajat Mittal

Author: Hendrik Schrezenmaier

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28098





---

archive/issue_comments_544335.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists\"",
    "created_at": "2019-07-02T22:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544335",
    "user": "https://github.com/hensc"
}
```

Changing branch from "" to "u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists"



---

archive/issue_comments_544336.json:
```json
{
    "body": "Changing commit from \"\" to \"f7583be987b5291d8589da614bd4d93b142b1a9e\"",
    "created_at": "2019-07-02T22:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544336",
    "user": "https://github.com/hensc"
}
```

Changing commit from "" to "f7583be987b5291d8589da614bd4d93b142b1a9e"



---

archive/issue_comments_544337.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[f7583be](https://git.sagemath.org/sage.git/commit?id=f7583be987b5291d8589da614bd4d93b142b1a9e)|`fixed bug, added doctests`|",
    "created_at": "2019-07-02T22:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544337",
    "user": "https://github.com/hensc"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[f7583be](https://git.sagemath.org/sage.git/commit?id=f7583be987b5291d8589da614bd4d93b142b1a9e)|`fixed bug, added doctests`|



---

archive/issue_comments_544338.json:
```json
{
    "body": "Changing author from \"\" to \"Hendrik Schrezenmaier\"",
    "created_at": "2019-07-02T22:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544338",
    "user": "https://github.com/hensc"
}
```

Changing author from "" to "Hendrik Schrezenmaier"



---

archive/issue_comments_544339.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-02T22:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544339",
    "user": "https://github.com/hensc"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_544340.json:
```json
{
    "body": "<a id='comment:3'></a>\nFor me this patch is good to go.\n\n`@`Rajat: can you double check. Thanks.",
    "created_at": "2019-07-03T17:42:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544340",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>
For me this patch is good to go.

`@`Rajat: can you double check. Thanks.



---

archive/issue_comments_544341.json:
```json
{
    "body": "<a id='comment:4'></a>\nAh, wonderful, I nearly had reported this as well - just ran into it. Thanks for fixing it before I could even file a report :-)",
    "created_at": "2019-07-03T21:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544341",
    "user": "https://github.com/bergus"
}
```

<a id='comment:4'></a>
Ah, wonderful, I nearly had reported this as well - just ran into it. Thanks for fixing it before I could even file a report :-)



---

archive/issue_comments_544342.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt looks good.\nFor me too its good to go.",
    "created_at": "2019-07-04T05:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544342",
    "user": "https://github.com/rajat1433"
}
```

<a id='comment:5'></a>
It looks good.
For me too its good to go.



---

archive/issue_comments_544343.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2019-07-04T05:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544343",
    "user": "https://github.com/rajat1433"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_544344.json:
```json
{
    "body": "<a id='comment:7'></a>\nSo let it be.",
    "created_at": "2019-07-04T16:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544344",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>
So let it be.



---

archive/issue_comments_544345.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-04T16:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544345",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_544346.json:
```json
{
    "body": "Changing reviewer from \"David Coudert\" to \"David Coudert, Rajat Mittal\"",
    "created_at": "2019-07-04T16:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544346",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "David Coudert" to "David Coudert, Rajat Mittal"



---

archive/issue_comments_544347.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-07-05T15:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544347",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_069681.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-05T15:29:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28098#event-69681"
}
```



---

archive/issue_comments_544348.json:
```json
{
    "body": "Changing branch from \"u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists\" to \"f7583be987b5291d8589da614bd4d93b142b1a9e\"",
    "created_at": "2019-07-05T15:29:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28098#issuecomment-544348",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists" to "f7583be987b5291d8589da614bd4d93b142b1a9e"
