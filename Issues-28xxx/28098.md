# Issue 28098: Shortest path fix for the case that no path exists

archive/issues_027861.json:
```json
{
    "assignees": [],
    "body": "In the documentation of the `shortest_path()` method of `GenericGraph` we can read\n\n```\nIf there is no path from `u` to `v`, the returned list is empty.\n```\n\nIn the documentation of the `shortest_path_length()` method of `GenericGraph` we can read\n\n```\nIf there is no path from `u` to `v`, returns ``Infinity``.\n```\n\n\nBut actually in many cases the methods stop with an error instead of returning an empty list or infinity, respectively:\n\n```python\n## Minimum repro\nsage: G = Graph()\nsage: G.add_vertices([1, 2])\nsage: G.shortest_path(1, 2, algorithm='BFS')\n      # result: KeyError, expected: []\nsage: G.shortest_path_length(1, 2, algorithm='BFS')\n      # result: KeyError, expected: +Infinity\nsage: G.shortest_path(1, 2, algorithm='Dijkstra_NetworkX')\n      # result: KeyError, expected: []\nsage: G.shortest_path_length(1, 2, algorithm='Dijkstra_NetworkX')\n      # result: KeyError, expected: +Infinity\nsage: G.shortest_path(1, 2, algorithm='Dijkstra_Bid_NetworkX')\n      # result: NetworkXNoPath, expected: []\nsage: G.shortest_path_length(1, 2, algorithm='Dijkstra_Bid_NetworkX')\n      # result: NetworkXNoPath, expected: +Infinity\nsage: G.shortest_path(1, 2, algorithm='Bellman-Ford_Boost')\n      # result: KeyError, expected: []\nsage: G.shortest_path_length(1, 2, algorithm='Bellman-Ford_Boost')\n      # result: KeyError, expected: +Infinity\n```\n\nI'm using [SageMath](../wiki/SageMath) version 8.8, Release Date: 2019-06-26, with Python 2.7.15, on Ubuntu 18.04.2 64bit.\n\nCC:  @rajat1433\n\nBranch/Commit: **[`f7583be`](https://github.com/sagemath/sagetrac-mirror/commit/f7583be987b5291d8589da614bd4d93b142b1a9e)**\n\nReviewer: **David Coudert, Rajat Mittal**\n\nAuthor: **Hendrik Schrezenmaier**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28098_\n\n",
    "closed_at": "2019-07-05T15:29:12Z",
    "created_at": "2019-07-02T18:55:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Shortest path fix for the case that no path exists",
    "type": "issue",
    "updated_at": "2019-07-05T15:29:12Z",
    "url": "https://github.com/sagemath/sage/issues/28098",
    "user": "https://github.com/hensc"
}
```
In the documentation of the `shortest_path()` method of `GenericGraph` we can read

```
If there is no path from `u` to `v`, the returned list is empty.
```

In the documentation of the `shortest_path_length()` method of `GenericGraph` we can read

```
If there is no path from `u` to `v`, returns ``Infinity``.
```


But actually in many cases the methods stop with an error instead of returning an empty list or infinity, respectively:

```python
## Minimum repro
sage: G = Graph()
sage: G.add_vertices([1, 2])
sage: G.shortest_path(1, 2, algorithm='BFS')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='BFS')
      # result: KeyError, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Dijkstra_NetworkX')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Dijkstra_NetworkX')
      # result: KeyError, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Dijkstra_Bid_NetworkX')
      # result: NetworkXNoPath, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Dijkstra_Bid_NetworkX')
      # result: NetworkXNoPath, expected: +Infinity
sage: G.shortest_path(1, 2, algorithm='Bellman-Ford_Boost')
      # result: KeyError, expected: []
sage: G.shortest_path_length(1, 2, algorithm='Bellman-Ford_Boost')
      # result: KeyError, expected: +Infinity
```

I'm using [SageMath](../wiki/SageMath) version 8.8, Release Date: 2019-06-26, with Python 2.7.15, on Ubuntu 18.04.2 64bit.

CC:  @rajat1433

Branch/Commit: **[`f7583be`](https://github.com/sagemath/sagetrac-mirror/commit/f7583be987b5291d8589da614bd4d93b142b1a9e)**

Reviewer: **David Coudert, Rajat Mittal**

Author: **Hendrik Schrezenmaier**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/28098_





---

archive/issue_events_385312.json:
```json
{
    "actor": "https://github.com/hensc",
    "created_at": "2019-07-02T18:55:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385312"
}
```



---

archive/issue_events_385313.json:
```json
{
    "actor": "https://github.com/hensc",
    "created_at": "2019-07-02T18:55:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385313"
}
```



---

archive/issue_events_385314.json:
```json
{
    "actor": "https://github.com/hensc",
    "created_at": "2019-07-02T18:55:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385314"
}
```



---

archive/issue_events_385315.json:
```json
{
    "actor": "https://github.com/hensc",
    "created_at": "2019-07-02T18:55:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385315"
}
```



---

archive/issue_comments_437242.json:
```json
{
    "body": "Branch: **[u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists)**",
    "created_at": "2019-07-02T22:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437242",
    "user": "https://github.com/hensc"
}
```

Branch: **[u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists)**



---

archive/issue_comments_437243.json:
```json
{
    "body": "Commit: **[`f7583be`](https://github.com/sagemath/sagetrac-mirror/commit/f7583be987b5291d8589da614bd4d93b142b1a9e)**",
    "created_at": "2019-07-02T22:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437243",
    "user": "https://github.com/hensc"
}
```

Commit: **[`f7583be`](https://github.com/sagemath/sagetrac-mirror/commit/f7583be987b5291d8589da614bd4d93b142b1a9e)**



---

archive/issue_comments_437244.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7583be987b5291d8589da614bd4d93b142b1a9e\"><code>f7583be</code></a></td><td><code>fixed bug, added doctests</code></td></tr></table>\n",
    "created_at": "2019-07-02T22:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437244",
    "user": "https://github.com/hensc"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7583be987b5291d8589da614bd4d93b142b1a9e"><code>f7583be</code></a></td><td><code>fixed bug, added doctests</code></td></tr></table>




---

archive/issue_comments_437245.json:
```json
{
    "body": "Author: **Hendrik Schrezenmaier**",
    "created_at": "2019-07-02T22:42:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437245",
    "user": "https://github.com/hensc"
}
```

Author: **Hendrik Schrezenmaier**



---

archive/issue_events_385316.json:
```json
{
    "actor": "https://github.com/hensc",
    "created_at": "2019-07-02T22:42:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385316"
}
```



---

archive/issue_comments_437246.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFor me this patch is good to go.\n\n`@`Rajat: can you double check. Thanks.",
    "created_at": "2019-07-03T17:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437246",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

For me this patch is good to go.

`@`Rajat: can you double check. Thanks.



---

archive/issue_comments_437247.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAh, wonderful, I nearly had reported this as well - just ran into it. Thanks for fixing it before I could even file a report :-)",
    "created_at": "2019-07-03T21:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437247",
    "user": "https://github.com/bergus"
}
```

<div id="comment:4" align="right">comment:4</div>

Ah, wonderful, I nearly had reported this as well - just ran into it. Thanks for fixing it before I could even file a report :-)



---

archive/issue_comments_437248.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIt looks good.\nFor me too its good to go.",
    "created_at": "2019-07-04T05:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437248",
    "user": "https://github.com/rajat1433"
}
```

<div id="comment:5" align="right">comment:5</div>

It looks good.
For me too its good to go.



---

archive/issue_comments_437249.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2019-07-04T05:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437249",
    "user": "https://github.com/rajat1433"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_437250.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSo let it be.",
    "created_at": "2019-07-04T16:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437250",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

So let it be.



---

archive/issue_events_385317.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-07-04T16:59:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385317"
}
```



---

archive/issue_events_385318.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-07-04T16:59:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385318"
}
```



---

archive/issue_comments_437251.json:
```json
{
    "body": "Changed reviewer from **David Coudert** to **David Coudert, Rajat Mittal**",
    "created_at": "2019-07-04T16:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437251",
    "user": "https://github.com/dcoudert"
}
```

Changed reviewer from **David Coudert** to **David Coudert, Rajat Mittal**



---

archive/issue_events_385319.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-07-05T15:29:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385319"
}
```



---

archive/issue_events_385320.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ab76bb3d77fca64a29b9abfe23428e159726a382",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-07-05T15:29:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28098#event-385320"
}
```



---

archive/issue_comments_437252.json:
```json
{
    "body": "Changed branch from **[u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists)** to **[`f7583be`](https://github.com/sagemath/sagetrac-mirror/commit/f7583be987b5291d8589da614bd4d93b142b1a9e)**",
    "created_at": "2019-07-05T15:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28098",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28098#issuecomment-437252",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-hensc/shortest_path_fix_for_the_case_that_no_path_exists)** to **[`f7583be`](https://github.com/sagemath/sagetrac-mirror/commit/f7583be987b5291d8589da614bd4d93b142b1a9e)**
