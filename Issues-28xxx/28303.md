# Issue 28303: better string representation of Macaulay2 elements

archive/issues_028066.json:
```json
{
    "body": "This ticket improves the string representation of Macaulay2 elements that usually acquire the name of the global variable they are assigned to, such as polynomial rings and varieties.\n\nCurrently, Sage implicitly calls `describe` to get a string representation that avoids the global names, in particular those of internal Expect variables `sage0`, `sage1`,\u2026 which are not meaningful to a user. This ticket changes the assignment operator for these internal variables from `=` to `<-` to keep internal variables from acquiring the names, which was suggested by the developers [upstream](https://github.com/Macaulay2/M2/issues/967#issuecomment-513470518). As a result, calling `describe` is no longer necessary and the string representation becomes much nicer. Previously, this output could not be obtained at all (this is what `describe` used to return in old versions of M2):\n\n```\nsage: macaulay2('QQ[x,y,z]')\nQQ[x, y, z]\n```\nIt is still possible to call `describe` explicitly:\n\n```\nsage: macaulay2('QQ[x,y,z]').describe()\nQQ[x..z, Degrees => {3:1}, Heft => {1}, MonomialOrder => {MonomialSize => 32}, DegreeRank => 1]\n                                                         {GRevLex => {3:1}  }\n                                                         {Position => Up    }\n```\nAlso, if a user specifies the variable name, the element assumes that name as usual in Macaulay2:\n\n```\nsage: R = macaulay2('QQ[x,y,z]', 'R'); R\nR\n```\n\n\nKeywords: macaulay2\n\nBranch/Commit: 53c4f2321cea2cacd1792bfa2918f5e6e400809a\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Markus Wageringel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28303\n\n",
    "closed_at": "2019-08-03T08:49:18Z",
    "created_at": "2019-07-31T22:19:16Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "better string representation of Macaulay2 elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28303",
    "user": "https://github.com/mwageringel"
}
```
This ticket improves the string representation of Macaulay2 elements that usually acquire the name of the global variable they are assigned to, such as polynomial rings and varieties.

Currently, Sage implicitly calls `describe` to get a string representation that avoids the global names, in particular those of internal Expect variables `sage0`, `sage1`,… which are not meaningful to a user. This ticket changes the assignment operator for these internal variables from `=` to `<-` to keep internal variables from acquiring the names, which was suggested by the developers [upstream](https://github.com/Macaulay2/M2/issues/967#issuecomment-513470518). As a result, calling `describe` is no longer necessary and the string representation becomes much nicer. Previously, this output could not be obtained at all (this is what `describe` used to return in old versions of M2):

```
sage: macaulay2('QQ[x,y,z]')
QQ[x, y, z]
```
It is still possible to call `describe` explicitly:

```
sage: macaulay2('QQ[x,y,z]').describe()
QQ[x..z, Degrees => {3:1}, Heft => {1}, MonomialOrder => {MonomialSize => 32}, DegreeRank => 1]
                                                         {GRevLex => {3:1}  }
                                                         {Position => Up    }
```
Also, if a user specifies the variable name, the element assumes that name as usual in Macaulay2:

```
sage: R = macaulay2('QQ[x,y,z]', 'R'); R
R
```


Keywords: macaulay2

Branch/Commit: 53c4f2321cea2cacd1792bfa2918f5e6e400809a

Reviewer: Frédéric Chapoton

Author: Markus Wageringel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28303





---

archive/issue_comments_542329.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-31T22:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542329",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_542330.json:
```json
{
    "body": "Changing commit from \"\" to \"53c4f2321cea2cacd1792bfa2918f5e6e400809a\"",
    "created_at": "2019-07-31T22:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542330",
    "user": "https://github.com/mwageringel"
}
```

Changing commit from "" to "53c4f2321cea2cacd1792bfa2918f5e6e400809a"



---

archive/issue_comments_542331.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mwageringel/28303\"",
    "created_at": "2019-07-31T22:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542331",
    "user": "https://github.com/mwageringel"
}
```

Changing branch from "" to "u/gh-mwageringel/28303"



---

archive/issue_comments_542332.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis also includes small improvements to the documentation of the interface. I tested this using Macaulay2 version 1.12 and 1.14 with Python 2 and 3.\n\n---\nNew commits:\n|                                                                                                                                          |                                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[53c4f23](https://github.com/sagemath/sagetrac-mirror/commit/53c4f2321cea2cacd1792bfa2918f5e6e400809a)|`28303: improve assignment of internal Macaulay2 variables`|",
    "created_at": "2019-07-31T22:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542332",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>
This also includes small improvements to the documentation of the interface. I tested this using Macaulay2 version 1.12 and 1.14 with Python 2 and 3.

---
New commits:
|                                                                                                                                          |                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[53c4f23](https://github.com/sagemath/sagetrac-mirror/commit/53c4f2321cea2cacd1792bfa2918f5e6e400809a)|`28303: improve assignment of internal Macaulay2 variables`|



---

archive/issue_comments_542333.json:
```json
{
    "body": "Changing author from \"\" to \"Markus Wageringel\"",
    "created_at": "2019-07-31T22:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542333",
    "user": "https://github.com/mwageringel"
}
```

Changing author from "" to "Markus Wageringel"



---

archive/issue_comments_542334.json:
```json
{
    "body": "<a id='comment:2'></a>\nok, looks good. Maybe we should keep an example about matrices ?",
    "created_at": "2019-08-01T12:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542334",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
ok, looks good. Maybe we should keep an example about matrices ?



---

archive/issue_comments_542335.json:
```json
{
    "body": "<a id='comment:3'></a>\nThere are examples in [matrix1.pyx](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/matrix/matrix1.pyx?id=53c4f2321cea2cacd1792bfa2918f5e6e400809a#n432). The test I removed was meant to specifically test the workaround for matrices, but that is no longer needed if we do not call `describe` anymore.",
    "created_at": "2019-08-01T13:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542335",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:3'></a>
There are examples in [matrix1.pyx](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/matrix/matrix1.pyx?id=53c4f2321cea2cacd1792bfa2918f5e6e400809a#n432). The test I removed was meant to specifically test the workaround for matrices, but that is no longer needed if we do not call `describe` anymore.



---

archive/issue_comments_542336.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-01T14:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542336",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_542337.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-08-01T14:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542337",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_542338.json:
```json
{
    "body": "<a id='comment:4'></a>\nok, then.",
    "created_at": "2019-08-01T14:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542338",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
ok, then.



---

archive/issue_comments_542339.json:
```json
{
    "body": "Changing branch from \"u/gh-mwageringel/28303\" to \"53c4f2321cea2cacd1792bfa2918f5e6e400809a\"",
    "created_at": "2019-08-03T08:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542339",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mwageringel/28303" to "53c4f2321cea2cacd1792bfa2918f5e6e400809a"



---

archive/issue_comments_542340.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-03T08:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28303#issuecomment-542340",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_087863.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-03T08:49:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28303",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28303#event-87863"
}
```
