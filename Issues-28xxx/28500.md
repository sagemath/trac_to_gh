# Issue 28500: DeprecationWarning not visible from Cython

archive/issues_028263.json:
```json
{
    "assignees": [],
    "body": "Since at least Sage 8.4 deprecation warnings are not visible when issued from Cython code inside a function\n\n```\nsage: cython(\"\"\"from sage.misc.superseded import deprecation\n....: def f():\n....:     deprecation(28500, 'hello')\n....: \"\"\")\nsage: f()    # BUG: no deprecation warning shown!\n```\nCompare with\n\n```\nsage: cython(\"from sage.misc.superseded import deprecation; deprecation(28500, 'hello')\")\n/opt/sage/local/lib/python3.7/site-packages/sage/misc/cython.py:538: DeprecationWarning: hello\nSee https://trac.sagemath.org/28500 for details.\n  m = cython_import(filename, **kwds)\n```\nor\n\n```\nsage: def f():\n....:     deprecation(28500, 'hello')  \nsage: f()\n/opt/sage/src/bin/sage-ipython:1: DeprecationWarning: hello\nSee https://trac.sagemath.org/28500 for details.\n  #!/usr/bin/env sage-python23\n```\nHowever the warnings are visible by the doctest runner! As a consequence, even though they are doctest, no user could have seen the two following deprecations\n- in `sage/matroids/matroid.pyx`\n\n```\nsage: M = matroids.Uniform(2, 3).is_3connected(separation=True)\n```\n- in `sage/matrix/matrix_integer_dense.pyx`\n\n```\nsage: M = matrix(2, [2,1,1,1])._invert_unit()\n```\n(there are 38 cython files with such deprecation)\n\nHere is an example from a Python file that works fine\n\n```\nsage: P = Permutations(4)\nsage: x = P([3, 2, 4, 1]).has_left_descent(2, mult='l2r')\n/opt/sage/src/bin/sage-ipython:3: DeprecationWarning: The mult option is deprecated and ignored.\nSee https://trac.sagemath.org/27467 for details.\n  \"\"\"\n```\n\nCC:  @mwageringel @jhpalmieri\n\nBranch/Commit: **[`f7d847d`](https://github.com/sagemath/sagetrac-mirror/commit/f7d847d22735882a68f1bbf7a283b07ff36c5fcf)**\n\nReviewer: **Matthias Koeppe, Vincent Delecroix, Dima Pasechnik**\n\nAuthor: **Nils Bruin, Matthias Koeppe**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28500_\n\n",
    "closed_at": "2021-08-29T09:38:19Z",
    "created_at": "2019-09-15T13:50:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "DeprecationWarning not visible from Cython",
    "type": "issue",
    "updated_at": "2021-08-29T09:38:19Z",
    "url": "https://github.com/sagemath/sage/issues/28500",
    "user": "https://github.com/videlec"
}
```
Since at least Sage 8.4 deprecation warnings are not visible when issued from Cython code inside a function

```
sage: cython("""from sage.misc.superseded import deprecation
....: def f():
....:     deprecation(28500, 'hello')
....: """)
sage: f()    # BUG: no deprecation warning shown!
```
Compare with

```
sage: cython("from sage.misc.superseded import deprecation; deprecation(28500, 'hello')")
/opt/sage/local/lib/python3.7/site-packages/sage/misc/cython.py:538: DeprecationWarning: hello
See https://trac.sagemath.org/28500 for details.
  m = cython_import(filename, **kwds)
```
or

```
sage: def f():
....:     deprecation(28500, 'hello')  
sage: f()
/opt/sage/src/bin/sage-ipython:1: DeprecationWarning: hello
See https://trac.sagemath.org/28500 for details.
  #!/usr/bin/env sage-python23
```
However the warnings are visible by the doctest runner! As a consequence, even though they are doctest, no user could have seen the two following deprecations
- in `sage/matroids/matroid.pyx`

```
sage: M = matroids.Uniform(2, 3).is_3connected(separation=True)
```
- in `sage/matrix/matrix_integer_dense.pyx`

```
sage: M = matrix(2, [2,1,1,1])._invert_unit()
```
(there are 38 cython files with such deprecation)

Here is an example from a Python file that works fine

```
sage: P = Permutations(4)
sage: x = P([3, 2, 4, 1]).has_left_descent(2, mult='l2r')
/opt/sage/src/bin/sage-ipython:3: DeprecationWarning: The mult option is deprecated and ignored.
See https://trac.sagemath.org/27467 for details.
  """
```

CC:  @mwageringel @jhpalmieri

Branch/Commit: **[`f7d847d`](https://github.com/sagemath/sagetrac-mirror/commit/f7d847d22735882a68f1bbf7a283b07ff36c5fcf)**

Reviewer: **Matthias Koeppe, Vincent Delecroix, Dima Pasechnik**

Author: **Nils Bruin, Matthias Koeppe**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/28500_





---

archive/issue_events_393158.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-15T13:50:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393158"
}
```



---

archive/issue_events_393159.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-15T13:50:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393159"
}
```



---

archive/issue_events_393160.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-15T13:50:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393160"
}
```



---

archive/issue_events_393161.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-15T13:50:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393161"
}
```



---

archive/issue_comments_444174.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThe problem is not Python 3 specific. Same with Python 2 (8.9.beta9.)",
    "created_at": "2019-09-15T13:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444174",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:1" align="right">comment:1</div>

The problem is not Python 3 specific. Same with Python 2 (8.9.beta9.)



---

archive/issue_events_393162.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-15T13:53:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393162"
}
```



---

archive/issue_events_393163.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-15T13:53:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393163"
}
```



---

archive/issue_events_393164.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-15T13:53:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "title_is": "DeprecationWarning not visible from Cython",
    "title_was": "py3: DeprecationWarning not visible from Cython",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393164"
}
```



---

archive/issue_events_393165.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-15T13:53:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393165"
}
```



---

archive/issue_comments_444175.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHappens also with Sage 8.4, 8.6, 8.7, 8.8.\n\nThat's all the releases that we have new docker images for.",
    "created_at": "2019-09-15T13:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444175",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:4" align="right">comment:4</div>

Happens also with Sage 8.4, 8.6, 8.7, 8.8.

That's all the releases that we have new docker images for.



---

archive/issue_comments_444176.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOuch.",
    "created_at": "2019-09-15T13:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444176",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Ouch.



---

archive/issue_comments_444177.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nDeprecation works with inline Cython code\n\n```\nsage: cython(\"from sage.misc.superseded import deprecation; deprecation(28500, 'hello boy')\")\n/opt/sage/local/lib/python3.7/site-packages/sage/misc/cython.py:538: DeprecationWarning: hello boy\nSee https://trac.sagemath.org/28500 for details.\n  m = cython_import(filename, **kwds)\n```",
    "created_at": "2019-09-15T13:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444177",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Deprecation works with inline Cython code

```
sage: cython("from sage.misc.superseded import deprecation; deprecation(28500, 'hello boy')")
/opt/sage/local/lib/python3.7/site-packages/sage/misc/cython.py:538: DeprecationWarning: hello boy
See https://trac.sagemath.org/28500 for details.
  m = cython_import(filename, **kwds)
```



---

archive/issue_comments_444178.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nBut not inside a function\n\n```\nsage: cython(\"from sage.misc.superseded import deprecation\\ndef f(): deprecation(28500, 'hello boy')\")\nsage: f()\n```",
    "created_at": "2019-09-15T13:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444178",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

But not inside a function

```
sage: cython("from sage.misc.superseded import deprecation\ndef f(): deprecation(28500, 'hello boy')")
sage: f()
```



---

archive/issue_comments_444179.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nDid this ever work? It's been broken since 8.4 at least, shamelessly using the opportunity to advertise #28457: https://gitlab-hooks-flau3jeaza-ew.a.run.app/status/trac/tag/8.4",
    "created_at": "2019-09-15T14:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444179",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:8" align="right">comment:8</div>

Did this ever work? It's been broken since 8.4 at least, shamelessly using the opportunity to advertise #28457: https://gitlab-hooks-flau3jeaza-ew.a.run.app/status/trac/tag/8.4



---

archive/issue_comments_444180.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,19 +1,49 @@\n-In Sage built with Python 3 deprecation warnings raised from Cython code are not visible (in both the console or Jupyter notebook). However they are visible to the doctest runner!\n+Since at least Sage 8.4 deprecation warnings are not visible when issued from Cython code inside a function\n \n-Example from `sage/matroids/matroid.pyx`\n+```\n+sage: cython(\"\"\"from sage.misc.superseded import deprecation\n+....: def f():\n+....:     deprecation(28500, 'hello')\n+....: \"\"\")\n+sage: f()    # BUG: no deprecation warning shown!\n+```\n+Compare with\n+\n+```\n+sage: cython(\"from sage.misc.superseded import deprecation; deprecation(28500, 'hello')\")\n+/opt/sage/local/lib/python3.7/site-packages/sage/misc/cython.py:538: DeprecationWarning: hello\n+See https://trac.sagemath.org/28500 for details.\n+  m = cython_import(filename, **kwds)\n+```\n+or\n+\n+```\n+sage: def f():\n+....:     deprecation(28500, 'hello')  \n+sage: f()\n+/opt/sage/src/bin/sage-ipython:1: DeprecationWarning: hello\n+See https://trac.sagemath.org/28500 for details.\n+  #!/usr/bin/env sage-python23\n+```\n+However the warnings are visible by the doctest runner! As a consequence, even though they are doctest, no user could have seen the two following deprecations\n+- in `sage/matroids/matroid.pyx`\n \n ```\n sage: M = matroids.Uniform(2, 3).is_3connected(separation=True)\n ```\n-Example from `sage/matrix/matrix_integer_dense.pyx`\n+- in `sage/matrix/matrix_integer_dense.pyx`\n \n ```\n sage: M = matrix(2, [2,1,1,1])._invert_unit()\n ```\n+(there are 38 cython files with such deprecation)\n \n Here is an example from a Python file that works fine\n \n ```\n sage: P = Permutations(4)\n sage: x = P([3, 2, 4, 1]).has_left_descent(2, mult='l2r')\n+/opt/sage/src/bin/sage-ipython:3: DeprecationWarning: The mult option is deprecated and ignored.\n+See https://trac.sagemath.org/27467 for details.\n+  \"\"\"\n ```\n``````\n",
    "created_at": "2019-09-15T14:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444180",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,19 +1,49 @@
-In Sage built with Python 3 deprecation warnings raised from Cython code are not visible (in both the console or Jupyter notebook). However they are visible to the doctest runner!
+Since at least Sage 8.4 deprecation warnings are not visible when issued from Cython code inside a function
 
-Example from `sage/matroids/matroid.pyx`
+```
+sage: cython("""from sage.misc.superseded import deprecation
+....: def f():
+....:     deprecation(28500, 'hello')
+....: """)
+sage: f()    # BUG: no deprecation warning shown!
+```
+Compare with
+
+```
+sage: cython("from sage.misc.superseded import deprecation; deprecation(28500, 'hello')")
+/opt/sage/local/lib/python3.7/site-packages/sage/misc/cython.py:538: DeprecationWarning: hello
+See https://trac.sagemath.org/28500 for details.
+  m = cython_import(filename, **kwds)
+```
+or
+
+```
+sage: def f():
+....:     deprecation(28500, 'hello')  
+sage: f()
+/opt/sage/src/bin/sage-ipython:1: DeprecationWarning: hello
+See https://trac.sagemath.org/28500 for details.
+  #!/usr/bin/env sage-python23
+```
+However the warnings are visible by the doctest runner! As a consequence, even though they are doctest, no user could have seen the two following deprecations
+- in `sage/matroids/matroid.pyx`
 
 ```
 sage: M = matroids.Uniform(2, 3).is_3connected(separation=True)
 ```
-Example from `sage/matrix/matrix_integer_dense.pyx`
+- in `sage/matrix/matrix_integer_dense.pyx`
 
 ```
 sage: M = matrix(2, [2,1,1,1])._invert_unit()
 ```
+(there are 38 cython files with such deprecation)
 
 Here is an example from a Python file that works fine
 
 ```
 sage: P = Permutations(4)
 sage: x = P([3, 2, 4, 1]).has_left_descent(2, mult='l2r')
+/opt/sage/src/bin/sage-ipython:3: DeprecationWarning: The mult option is deprecated and ignored.
+See https://trac.sagemath.org/27467 for details.
+  """
 ```
``````




---

archive/issue_comments_444181.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@saraedum](#comment:8):\n> Did this ever work?\n\nIt worked with 7.5.1 at least.",
    "created_at": "2019-09-15T20:58:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444181",
    "user": "https://github.com/mwageringel"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@saraedum](#comment:8):
> Did this ever work?

It worked with 7.5.1 at least.



---

archive/issue_comments_444182.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI'm not sure how to fix the problem, but the reason things fail is because cython functions don't create a stack frame. The deprecation mechanism tries to raise the warning referring to the stack frame of the call site. That's not there in this case! You can see that things work when you make sure that there is a call frame present:\n\n```\nsage: def g():\n....:     return f()\n....: \nsage: g()\n/usr/local/sage/sage-git/src/bin/sage-ipython:1: DeprecationWarning: hello\nSee https://trac.sagemath.org/28500 for details.\n  #!/usr/bin/env sage-python23\n```\nIt goes back to the python \"warning\" system:\n\n```\nsage: cython(\"\"\"\n....: from warnings import warn\n....: def cyW(s):\n....:     warn(\"test\",DeprecationWarning,stacklevel=s)\n....: \"\"\")\n```\n\n```\nsage: def pyW(s):\n....:     warn(\"test\",DeprecationWarning,stacklevel=s)\n```\n\n```\nsage: def testW(c,s):\n....:     if c==\"cython\":     \n....:         cyW(s)\n....:     else:\n....:         pyW(s)\n```\nyou'll see that `testW(\"python\",3)` and `test(\"cython\",2)` have the same result (that's at top level) and that `testW(\"python\",4)` and `test(\"cython\",3)` also have the same result (no warning printed, because the stack frame lookup failed). It could be considered a bug in python that `warn(..., stacklevel=...\")` fails silently if the give stack level is too high.\n\nI think the fix is that cython's \"deprecation\" should be a different one from python's; and should reduce its stacklevel by one from the value used in python.\n\nThere is also the problem that we shouldn't expect deprecation warnings to work properly when called from cython, but that's going to apply to all warnings.",
    "created_at": "2019-09-16T22:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444182",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:11" align="right">comment:11</div>

I'm not sure how to fix the problem, but the reason things fail is because cython functions don't create a stack frame. The deprecation mechanism tries to raise the warning referring to the stack frame of the call site. That's not there in this case! You can see that things work when you make sure that there is a call frame present:

```
sage: def g():
....:     return f()
....: 
sage: g()
/usr/local/sage/sage-git/src/bin/sage-ipython:1: DeprecationWarning: hello
See https://trac.sagemath.org/28500 for details.
  #!/usr/bin/env sage-python23
```
It goes back to the python "warning" system:

```
sage: cython("""
....: from warnings import warn
....: def cyW(s):
....:     warn("test",DeprecationWarning,stacklevel=s)
....: """)
```

```
sage: def pyW(s):
....:     warn("test",DeprecationWarning,stacklevel=s)
```

```
sage: def testW(c,s):
....:     if c=="cython":     
....:         cyW(s)
....:     else:
....:         pyW(s)
```
you'll see that `testW("python",3)` and `test("cython",2)` have the same result (that's at top level) and that `testW("python",4)` and `test("cython",3)` also have the same result (no warning printed, because the stack frame lookup failed). It could be considered a bug in python that `warn(..., stacklevel=...")` fails silently if the give stack level is too high.

I think the fix is that cython's "deprecation" should be a different one from python's; and should reduce its stacklevel by one from the value used in python.

There is also the problem that we shouldn't expect deprecation warnings to work properly when called from cython, but that's going to apply to all warnings.



---

archive/issue_comments_444183.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nIs this related to #24755?",
    "created_at": "2019-09-16T22:24:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444183",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

Is this related to #24755?



---

archive/issue_comments_444184.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@jhpalmieri](#comment:12):\n> Is this related to #24755?\n\nI don't think so. The problem there does not seem to involve cython. Also, the reported example there has gone away: the file `piecewise_old.py` doesn't exist since the resolution of #26865. That ticket should probably update its example.",
    "created_at": "2019-09-17T00:51:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444184",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@jhpalmieri](#comment:12):
> Is this related to #24755?

I don't think so. The problem there does not seem to involve cython. Also, the reported example there has gone away: the file `piecewise_old.py` doesn't exist since the resolution of #26865. That ticket should probably update its example.



---

archive/issue_comments_444185.json:
```json
{
    "body": "Branch: **[u/nbruin/deprecationwarning_not_visible_from_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/deprecationwarning_not_visible_from_cython)**",
    "created_at": "2019-10-20T23:28:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444185",
    "user": "https://github.com/nbruin"
}
```

Branch: **[u/nbruin/deprecationwarning_not_visible_from_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/deprecationwarning_not_visible_from_cython)**



---

archive/issue_comments_444186.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nTried to keep the changes minimal, to avoid merge conflicts. These are all mentions of \"import deprecation\" in `.pyx` files, according search_src.\n\nIf someone feels the urge to add documentation to `deprecation_cython` ... go ahead!\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a24077846fdf5389f775c9bb35b8c71168692fb4\"><code>a240778</code></a></td><td><code>introduce deprecation_cython and use it in pyx files</code></td></tr></table>\n",
    "created_at": "2019-10-20T23:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444186",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Tried to keep the changes minimal, to avoid merge conflicts. These are all mentions of "import deprecation" in `.pyx` files, according search_src.

If someone feels the urge to add documentation to `deprecation_cython` ... go ahead!

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a24077846fdf5389f775c9bb35b8c71168692fb4"><code>a240778</code></a></td><td><code>introduce deprecation_cython and use it in pyx files</code></td></tr></table>




---

archive/issue_comments_444187.json:
```json
{
    "body": "Author: **Nils Bruin**",
    "created_at": "2019-10-20T23:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444187",
    "user": "https://github.com/nbruin"
}
```

Author: **Nils Bruin**



---

archive/issue_events_393166.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2019-10-20T23:32:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393166"
}
```



---

archive/issue_comments_444188.json:
```json
{
    "body": "Commit: **[`a240778`](https://github.com/sagemath/sagetrac-mirror/commit/a24077846fdf5389f775c9bb35b8c71168692fb4)**",
    "created_at": "2019-10-20T23:32:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444188",
    "user": "https://github.com/nbruin"
}
```

Commit: **[`a240778`](https://github.com/sagemath/sagetrac-mirror/commit/a24077846fdf5389f775c9bb35b8c71168692fb4)**



---

archive/issue_comments_444189.json:
```json
{
    "body": "Changed commit from **[`a240778`](https://github.com/sagemath/sagetrac-mirror/commit/a24077846fdf5389f775c9bb35b8c71168692fb4)** to **[`9d5f2fe`](https://github.com/sagemath/sagetrac-mirror/commit/9d5f2fed40aef2bb02f871876d85bb042911cbd9)**",
    "created_at": "2019-10-22T00:00:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444189",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a240778`](https://github.com/sagemath/sagetrac-mirror/commit/a24077846fdf5389f775c9bb35b8c71168692fb4)** to **[`9d5f2fe`](https://github.com/sagemath/sagetrac-mirror/commit/9d5f2fed40aef2bb02f871876d85bb042911cbd9)**



---

archive/issue_comments_444190.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d5f2fed40aef2bb02f871876d85bb042911cbd9\"><code>9d5f2fe</code></a></td><td><code>doctest</code></td></tr></table>\n",
    "created_at": "2019-10-22T00:00:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444190",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d5f2fed40aef2bb02f871876d85bb042911cbd9"><code>9d5f2fe</code></a></td><td><code>doctest</code></td></tr></table>




---

archive/issue_comments_444191.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSo ... it turns out `IPython` is a bit to blame for the fact that we're not seeing the warning (meaning, there's no bug in python here). If we override the warning filters that IPython installs we see:\n\n```\nsage: cython(\"from sage.misc.superseded import deprecation\\ndef f(): deprecation(28500, 'hello boy')\")\nsage: warnings.simplefilter(\"always\")\nsage: f()\n/usr/local/sage/sage-git/local/lib/python2.7/site-packages/IPython/core/interactiveshell.py:2878: DeprecationWarning: hello boy\nSee https://trac.sagemath.org/28500 for details.\n  exec(code_obj, self.user_global_ns, self.user_ns)\n```\nWhat happens here is that `IPython` apparently hides warnings that appear to emanate from `IPython` code. Since we refer to the wrong callsite, we normally don't get to see the warning.",
    "created_at": "2019-10-22T00:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444191",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:17" align="right">comment:17</div>

So ... it turns out `IPython` is a bit to blame for the fact that we're not seeing the warning (meaning, there's no bug in python here). If we override the warning filters that IPython installs we see:

```
sage: cython("from sage.misc.superseded import deprecation\ndef f(): deprecation(28500, 'hello boy')")
sage: warnings.simplefilter("always")
sage: f()
/usr/local/sage/sage-git/local/lib/python2.7/site-packages/IPython/core/interactiveshell.py:2878: DeprecationWarning: hello boy
See https://trac.sagemath.org/28500 for details.
  exec(code_obj, self.user_global_ns, self.user_ns)
```
What happens here is that `IPython` apparently hides warnings that appear to emanate from `IPython` code. Since we refer to the wrong callsite, we normally don't get to see the warning.



---

archive/issue_comments_444192.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nNot ideal to have these two functions `deprecation` and `deprecation_cython`. But at least, this is a fix.\n\nYou should add an explanation of the problem in the documentation or/and a reference to this ticket. Also I would make a reference to `deprecation_cython` in the documentation of `deprecation`.",
    "created_at": "2019-10-25T04:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444192",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

Not ideal to have these two functions `deprecation` and `deprecation_cython`. But at least, this is a fix.

You should add an explanation of the problem in the documentation or/and a reference to this ticket. Also I would make a reference to `deprecation_cython` in the documentation of `deprecation`.



---

archive/issue_events_393167.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-10-25T04:30:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393167"
}
```



---

archive/issue_events_393168.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-10-25T04:30:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393168"
}
```



---

archive/issue_comments_444193.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2019-10-25T04:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444193",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_393169.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-10-25T04:30:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393169"
}
```



---

archive/issue_events_393170.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-10-25T04:30:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393170"
}
```



---

archive/issue_comments_444194.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIdeally, the doctest framework should detect when a deprecation from Cython code is wrong.",
    "created_at": "2019-10-25T04:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444194",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

Ideally, the doctest framework should detect when a deprecation from Cython code is wrong.



---

archive/issue_comments_444195.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@videlec](#comment:19):\n> Ideally, the doctest framework should detect when a deprecation from Cython code is wrong.\n\nSimilar to the inserted doctest, you can catch raised deprecation warnings and investigate if they are referencing the right callsite. If you make sure you call the deprecated routine from a recognizable location you can check that the raised warning is referencing it. More particularly, if you want to make sure that deprecation warnings are not referring to one-level-too-high you could install in the doctest framework a warning filter [https://docs.python.org/3/library/warnings.html#overriding-the-default-filter](https://docs.python.org/3/library/warnings.html#overriding-the-default-filter) that generates an error rather than a warning.\n\nFor documentation: If you adapt it how you'd like it, I'm fine with it. I never know which bits of documentation get processed/placed where.",
    "created_at": "2019-10-25T06:32:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444195",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@videlec](#comment:19):
> Ideally, the doctest framework should detect when a deprecation from Cython code is wrong.

Similar to the inserted doctest, you can catch raised deprecation warnings and investigate if they are referencing the right callsite. If you make sure you call the deprecated routine from a recognizable location you can check that the raised warning is referencing it. More particularly, if you want to make sure that deprecation warnings are not referring to one-level-too-high you could install in the doctest framework a warning filter [https://docs.python.org/3/library/warnings.html#overriding-the-default-filter](https://docs.python.org/3/library/warnings.html#overriding-the-default-filter) that generates an error rather than a warning.

For documentation: If you adapt it how you'd like it, I'm fine with it. I never know which bits of documentation get processed/placed where.



---

archive/issue_events_393171.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-28T11:12:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393171"
}
```



---

archive/issue_events_393172.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-28T11:12:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393172"
}
```



---

archive/issue_comments_444196.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nDefinitely a bug that should be fixed, but not a blocker",
    "created_at": "2019-12-28T11:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444196",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>

Definitely a bug that should be fixed, but not a blocker



---

archive/issue_events_393173.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393173"
}
```



---

archive/issue_events_393174.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393174"
}
```



---

archive/issue_comments_444197.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nTicket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444197",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">comment:22</div>

Ticket retargeted after milestone closed



---

archive/issue_events_393175.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-07T02:29:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393175"
}
```



---

archive/issue_events_393176.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-07T02:29:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393176"
}
```



---

archive/issue_events_393177.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-08T17:31:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393177"
}
```



---

archive/issue_events_393178.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-08T17:31:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393178"
}
```



---

archive/issue_comments_444198.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nMoving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage",
    "created_at": "2021-04-02T20:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444198",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage



---

archive/issue_events_393179.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-02T20:21:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393179"
}
```



---

archive/issue_events_393180.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-02T20:21:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393180"
}
```



---

archive/issue_comments_444199.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nRelated: #32139",
    "created_at": "2021-07-18T17:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444199",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Related: #32139



---

archive/issue_comments_444200.json:
```json
{
    "body": "Dependencies: **#32139**",
    "created_at": "2021-07-18T18:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444200",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#32139**



---

archive/issue_comments_444201.json:
```json
{
    "body": "Changed branch from **[u/nbruin/deprecationwarning_not_visible_from_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/deprecationwarning_not_visible_from_cython)** to **[u/mkoeppe/deprecationwarning_not_visible_from_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecationwarning_not_visible_from_cython)**",
    "created_at": "2021-07-18T18:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444201",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/nbruin/deprecationwarning_not_visible_from_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/deprecationwarning_not_visible_from_cython)** to **[u/mkoeppe/deprecationwarning_not_visible_from_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecationwarning_not_visible_from_cython)**



---

archive/issue_comments_444202.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nRebased on #32139 (and 9.4.beta4). Many of the changed calls to deprecation had already disappeared\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/419133748bb6a4ab38612b27b2b820d1f3e3b766\"><code>4191337</code></a></td><td><code>src/sage/all.py: Repair the filterwarnings regexp that ensures sagelib warnings are not ignored</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6492b8c2fdb941c009127d83bb83fc35f2fbeed1\"><code>6492b8c</code></a></td><td><code>src/sage/symbolic/ring.pyx: Pass the correct stacklevel to deprecatio()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04fdda6254d7e543235c863c271bb63faafb7d02\"><code>04fdda6</code></a></td><td><code>sage.all: In filterwarnings, remove leading '.*' from module regexes, use regex that matches vendored 'packaging'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69a81ca8214b708b2e937675c933c4d00ad83fc0\"><code>69a81ca</code></a></td><td><code>sage.all: Fix up filterwarnings for collections.abc</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0f4e6fd136ea9da18813cc62db03f37792c95fd\"><code>c0f4e6f</code></a></td><td><code>introduce deprecation_cython and use it in pyx files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3910a3742e003bb82f531338bcc541e53099f26\"><code>b3910a3</code></a></td><td><code>doctest</code></td></tr></table>\n",
    "created_at": "2021-07-18T18:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444202",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Rebased on #32139 (and 9.4.beta4). Many of the changed calls to deprecation had already disappeared

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/419133748bb6a4ab38612b27b2b820d1f3e3b766"><code>4191337</code></a></td><td><code>src/sage/all.py: Repair the filterwarnings regexp that ensures sagelib warnings are not ignored</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6492b8c2fdb941c009127d83bb83fc35f2fbeed1"><code>6492b8c</code></a></td><td><code>src/sage/symbolic/ring.pyx: Pass the correct stacklevel to deprecatio()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04fdda6254d7e543235c863c271bb63faafb7d02"><code>04fdda6</code></a></td><td><code>sage.all: In filterwarnings, remove leading '.*' from module regexes, use regex that matches vendored 'packaging'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69a81ca8214b708b2e937675c933c4d00ad83fc0"><code>69a81ca</code></a></td><td><code>sage.all: Fix up filterwarnings for collections.abc</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0f4e6fd136ea9da18813cc62db03f37792c95fd"><code>c0f4e6f</code></a></td><td><code>introduce deprecation_cython and use it in pyx files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3910a3742e003bb82f531338bcc541e53099f26"><code>b3910a3</code></a></td><td><code>doctest</code></td></tr></table>




---

archive/issue_comments_444203.json:
```json
{
    "body": "Changed commit from **[`9d5f2fe`](https://github.com/sagemath/sagetrac-mirror/commit/9d5f2fed40aef2bb02f871876d85bb042911cbd9)** to **[`b3910a3`](https://github.com/sagemath/sagetrac-mirror/commit/b3910a3742e003bb82f531338bcc541e53099f26)**",
    "created_at": "2021-07-18T18:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444203",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`9d5f2fe`](https://github.com/sagemath/sagetrac-mirror/commit/9d5f2fed40aef2bb02f871876d85bb042911cbd9)** to **[`b3910a3`](https://github.com/sagemath/sagetrac-mirror/commit/b3910a3742e003bb82f531338bcc541e53099f26)**



---

archive/issue_comments_444204.json:
```json
{
    "body": "Changed dependencies from **#32139** to **#32139, #32114**",
    "created_at": "2021-07-18T18:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444204",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#32139** to **#32139, #32114**



---

archive/issue_comments_444205.json:
```json
{
    "body": "Changed commit from **[`b3910a3`](https://github.com/sagemath/sagetrac-mirror/commit/b3910a3742e003bb82f531338bcc541e53099f26)** to **[`ffa13cd`](https://github.com/sagemath/sagetrac-mirror/commit/ffa13cd00db2a3c1259687aa5da290dd3cfa74a9)**",
    "created_at": "2021-07-18T18:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444205",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3910a3`](https://github.com/sagemath/sagetrac-mirror/commit/b3910a3742e003bb82f531338bcc541e53099f26)** to **[`ffa13cd`](https://github.com/sagemath/sagetrac-mirror/commit/ffa13cd00db2a3c1259687aa5da290dd3cfa74a9)**



---

archive/issue_comments_444206.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c49fddb79e85ec08ae9007c9eb76dba8bfd45f6c\"><code>c49fddb</code></a></td><td><code>sage.structure.misc: Remove</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ffa13cd00db2a3c1259687aa5da290dd3cfa74a9\"><code>ffa13cd</code></a></td><td><code>Merge #32114</code></td></tr></table>\n",
    "created_at": "2021-07-18T18:48:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444206",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c49fddb79e85ec08ae9007c9eb76dba8bfd45f6c"><code>c49fddb</code></a></td><td><code>sage.structure.misc: Remove</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ffa13cd00db2a3c1259687aa5da290dd3cfa74a9"><code>ffa13cd</code></a></td><td><code>Merge #32114</code></td></tr></table>




---

archive/issue_events_393181.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-18T18:55:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393181"
}
```



---

archive/issue_events_393182.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-18T18:55:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393182"
}
```



---

archive/issue_comments_444207.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nMany or all of the calls to `deprecation` that are updated in this ticket are already so old that the code can be removed. But that's best done in individual tickets",
    "created_at": "2021-07-18T18:55:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444207",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Many or all of the calls to `deprecation` that are updated in this ticket are already so old that the code can be removed. But that's best done in individual tickets



---

archive/issue_comments_444208.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI'm getting this (after merging with 9.4.beta5):\n\n```\nsage -t --warn-long 98.1 --random-seed=0 src/sage/misc/superseded.py\n**********************************************************************\nFile \"src/sage/misc/superseded.py\", line 129, in sage.misc.superseded.deprecation_cython\nFailed example:\n    w1[0].filename == w3[0].filename\nExpected:\n    True\nGot:\n    False\n```",
    "created_at": "2021-07-21T04:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444208",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

I'm getting this (after merging with 9.4.beta5):

```
sage -t --warn-long 98.1 --random-seed=0 src/sage/misc/superseded.py
**********************************************************************
File "src/sage/misc/superseded.py", line 129, in sage.misc.superseded.deprecation_cython
Failed example:
    w1[0].filename == w3[0].filename
Expected:
    True
Got:
    False
```



---

archive/issue_comments_444209.json:
```json
{
    "body": "Changed commit from **[`ffa13cd`](https://github.com/sagemath/sagetrac-mirror/commit/ffa13cd00db2a3c1259687aa5da290dd3cfa74a9)** to **[`db624af`](https://github.com/sagemath/sagetrac-mirror/commit/db624af0e54af4e7f6b883f8b5fdd99c236b2a5e)**",
    "created_at": "2021-08-13T19:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444209",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ffa13cd`](https://github.com/sagemath/sagetrac-mirror/commit/ffa13cd00db2a3c1259687aa5da290dd3cfa74a9)** to **[`db624af`](https://github.com/sagemath/sagetrac-mirror/commit/db624af0e54af4e7f6b883f8b5fdd99c236b2a5e)**



---

archive/issue_comments_444210.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db624af0e54af4e7f6b883f8b5fdd99c236b2a5e\"><code>db624af</code></a></td><td><code>Merge tag '9.4.rc2' into t/28500/deprecationwarning_not_visible_from_cython</code></td></tr></table>\n",
    "created_at": "2021-08-13T19:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444210",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db624af0e54af4e7f6b883f8b5fdd99c236b2a5e"><code>db624af</code></a></td><td><code>Merge tag '9.4.rc2' into t/28500/deprecationwarning_not_visible_from_cython</code></td></tr></table>




---

archive/issue_comments_444211.json:
```json
{
    "body": "Changed dependencies from **#32139, #32114** to none",
    "created_at": "2021-08-13T20:48:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444211",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#32139, #32114** to none



---

archive/issue_comments_444212.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@jhpalmieri](#comment:34):\n> I'm getting this (after merging with 9.4.beta5):\n> \n> ```\n> sage -t --warn-long 98.1 --random-seed=0 src/sage/misc/superseded.py\n> **********************************************************************\n> File \"src/sage/misc/superseded.py\", line 129, in sage.misc.superseded.deprecation_cython\n> Failed example:\n>     w1[0].filename == w3[0].filename\n> Expected:\n>     True\n> Got:\n>     False\n> ```\n\nYes, this doctest is only true interactively. Within the actual doctesting, printing out the filenames gives:\n\n```\n**********************************************************************\nFile \"src/sage/misc/superseded.py\", line 133, in sage.misc.superseded.deprecation_cython\nFailed example:\n    w1[0].filename\nExpected nothing\nGot:\n    '<doctest sage.misc.superseded.deprecation_cython[2]>'\n**********************************************************************\nFile \"src/sage/misc/superseded.py\", line 134, in sage.misc.superseded.deprecation_cython\nFailed example:\n    w2[0].filename\nExpected nothing\nGot:\n    '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py'\n**********************************************************************\nFile \"src/sage/misc/superseded.py\", line 135, in sage.misc.superseded.deprecation_cython\nFailed example:\n    w3[0].filename\nExpected nothing\nGot:\n    '<doctest sage.misc.superseded.deprecation_cython[4]>'\n**********************************************************************\n```",
    "created_at": "2021-08-13T21:30:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444212",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@jhpalmieri](#comment:34):
> I'm getting this (after merging with 9.4.beta5):
> 
> ```
> sage -t --warn-long 98.1 --random-seed=0 src/sage/misc/superseded.py
> **********************************************************************
> File "src/sage/misc/superseded.py", line 129, in sage.misc.superseded.deprecation_cython
> Failed example:
>     w1[0].filename == w3[0].filename
> Expected:
>     True
> Got:
>     False
> ```

Yes, this doctest is only true interactively. Within the actual doctesting, printing out the filenames gives:

```
**********************************************************************
File "src/sage/misc/superseded.py", line 133, in sage.misc.superseded.deprecation_cython
Failed example:
    w1[0].filename
Expected nothing
Got:
    '<doctest sage.misc.superseded.deprecation_cython[2]>'
**********************************************************************
File "src/sage/misc/superseded.py", line 134, in sage.misc.superseded.deprecation_cython
Failed example:
    w2[0].filename
Expected nothing
Got:
    '/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/src/sage/doctest/forker.py'
**********************************************************************
File "src/sage/misc/superseded.py", line 135, in sage.misc.superseded.deprecation_cython
Failed example:
    w3[0].filename
Expected nothing
Got:
    '<doctest sage.misc.superseded.deprecation_cython[4]>'
**********************************************************************
```



---

archive/issue_comments_444213.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\n(In the interactive shell, the results are:\n\n```\nsage: w1[0].filename \nsage: w2[0].filename \nsage: w3[0].filename \n....:                                                                                                                                                                        \n'<ipython-input-1-816ba0309bb2>'\n'/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/IPython/core/interactiveshell.py'\n'<ipython-input-1-816ba0309bb2>'\n```",
    "created_at": "2021-08-13T21:32:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444213",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

(In the interactive shell, the results are:

```
sage: w1[0].filename 
sage: w2[0].filename 
sage: w3[0].filename 
....:                                                                                                                                                                        
'<ipython-input-1-816ba0309bb2>'
'/Users/mkoeppe/s/sage/sage-rebasing/worktree-gcc11/local/lib/python3.9/site-packages/IPython/core/interactiveshell.py'
'<ipython-input-1-816ba0309bb2>'
```



---

archive/issue_comments_444214.json:
```json
{
    "body": "Changed commit from **[`db624af`](https://github.com/sagemath/sagetrac-mirror/commit/db624af0e54af4e7f6b883f8b5fdd99c236b2a5e)** to **[`f7d847d`](https://github.com/sagemath/sagetrac-mirror/commit/f7d847d22735882a68f1bbf7a283b07ff36c5fcf)**",
    "created_at": "2021-08-13T21:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444214",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db624af`](https://github.com/sagemath/sagetrac-mirror/commit/db624af0e54af4e7f6b883f8b5fdd99c236b2a5e)** to **[`f7d847d`](https://github.com/sagemath/sagetrac-mirror/commit/f7d847d22735882a68f1bbf7a283b07ff36c5fcf)**



---

archive/issue_comments_444215.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7d847d22735882a68f1bbf7a283b07ff36c5fcf\"><code>f7d847d</code></a></td><td><code>sage/misc/superseded.py: Fix deprecation_cython doctest</code></td></tr></table>\n",
    "created_at": "2021-08-13T21:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444215",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7d847d22735882a68f1bbf7a283b07ff36c5fcf"><code>f7d847d</code></a></td><td><code>sage/misc/superseded.py: Fix deprecation_cython doctest</code></td></tr></table>




---

archive/issue_comments_444216.json:
```json
{
    "body": "Changed author from **Nils Bruin** to **Nils Bruin,**",
    "created_at": "2021-08-13T21:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444216",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Nils Bruin** to **Nils Bruin,**



---

archive/issue_comments_444217.json:
```json
{
    "body": "Changed reviewer from **Vincent Delecroix** to **Matthias Koeppe, Vincent Delecroix, ...**",
    "created_at": "2021-08-13T21:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444217",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Vincent Delecroix** to **Matthias Koeppe, Vincent Delecroix, ...**



---

archive/issue_comments_444218.json:
```json
{
    "body": "Changed author from **Nils Bruin,** to **Nils Bruin, Matthias Koeppe**",
    "created_at": "2021-08-13T21:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444218",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Nils Bruin,** to **Nils Bruin, Matthias Koeppe**



---

archive/issue_comments_444219.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, Vincent Delecroix, ...** to **Matthias Koeppe, Vincent Delecroix, Dima Pasechnik**",
    "created_at": "2021-08-14T17:24:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444219",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Matthias Koeppe, Vincent Delecroix, ...** to **Matthias Koeppe, Vincent Delecroix, Dima Pasechnik**



---

archive/issue_events_393183.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-08-14T17:24:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393183"
}
```



---

archive/issue_events_393184.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-08-14T17:24:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393184"
}
```



---

archive/issue_comments_444220.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThanks!",
    "created_at": "2021-08-14T17:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444220",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

Thanks!



---

archive/issue_events_393185.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393185"
}
```



---

archive/issue_events_393186.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393186"
}
```



---

archive/issue_comments_444221.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/deprecationwarning_not_visible_from_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecationwarning_not_visible_from_cython)** to **[`f7d847d`](https://github.com/sagemath/sagetrac-mirror/commit/f7d847d22735882a68f1bbf7a283b07ff36c5fcf)**",
    "created_at": "2021-08-29T09:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28500#issuecomment-444221",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/deprecationwarning_not_visible_from_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/deprecationwarning_not_visible_from_cython)** to **[`f7d847d`](https://github.com/sagemath/sagetrac-mirror/commit/f7d847d22735882a68f1bbf7a283b07ff36c5fcf)**



---

archive/issue_events_393187.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-29T09:38:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393187"
}
```



---

archive/issue_events_393188.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b663b2052e3addd5fcf5d5b9b1c39337642de9fa",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-08-29T09:38:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28500",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28500#event-393188"
}
```
