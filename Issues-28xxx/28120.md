# Issue 28120: Cygwin: More rebase lock problems

archive/issues_027883.json:
```json
{
    "assignees": [],
    "body": "I haven't seen problems with this much if at all until just recently trying to build Sage 8.8 from scratch for the Windows release.\n\nOccasionally the build will just block on some package \"Waiting for rebase lock\".  It's not exactly clear why it's deadlocking.\n\nBranch/Commit: **[u/embray/cygwin/ticket-28120](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-28120) @ [ea5861f](https://github.com/sagemath/sagetrac-mirror/commit/ea5861f4eeca01349a2ec49044c4ff58d4ee5458)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28120_\n\n",
    "created_at": "2019-07-05T12:29:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/pending"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Cygwin: More rebase lock problems",
    "type": "issue",
    "updated_at": "2022-08-25T20:19:16Z",
    "url": "https://github.com/sagemath/sage/issues/28120",
    "user": "https://github.com/embray"
}
```
I haven't seen problems with this much if at all until just recently trying to build Sage 8.8 from scratch for the Windows release.

Occasionally the build will just block on some package "Waiting for rebase lock".  It's not exactly clear why it's deadlocking.

Branch/Commit: **[u/embray/cygwin/ticket-28120](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-28120) @ [ea5861f](https://github.com/sagemath/sagetrac-mirror/commit/ea5861f4eeca01349a2ec49044c4ff58d4ee5458)**

_Issue created by migration from https://trac.sagemath.org/ticket/28120_





---

archive/issue_events_354477.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-05T12:29:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "component: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354477"
}
```



---

archive/issue_events_354478.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-05T12:29:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354478"
}
```



---

archive/issue_events_354479.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-05T12:29:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354479"
}
```



---

archive/issue_events_354480.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-07-05T12:29:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354480"
}
```



---

archive/issue_comments_440484.json:
```json
{
    "body": "Commit: **[ea5861f](https://github.com/sagemath/sagetrac-mirror/commit/ea5861f4eeca01349a2ec49044c4ff58d4ee5458)**",
    "created_at": "2019-07-05T13:27:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28120#issuecomment-440484",
    "user": "https://github.com/embray"
}
```

Commit: **[ea5861f](https://github.com/sagemath/sagetrac-mirror/commit/ea5861f4eeca01349a2ec49044c4ff58d4ee5458)**



---

archive/issue_comments_440485.json:
```json
{
    "body": "Branch: **[u/embray/cygwin/ticket-28120](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-28120)**",
    "created_at": "2019-07-05T13:27:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28120#issuecomment-440485",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/cygwin/ticket-28120](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-28120)**



---

archive/issue_comments_440486.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nExperimenting now with this branch.  Just trying to cut down the amount of time each `sage-spkg` goes without holding the lock.  Not sure if it's really relevant though.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea5861f4eeca01349a2ec49044c4ff58d4ee5458\">ea5861f</a></td><td><code>Trac #28120: Convert existing shared lock to an exclusively lock on the</code></td></tr></table>\n",
    "created_at": "2019-07-05T13:27:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28120#issuecomment-440486",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'>Comment 1:</a>
Experimenting now with this branch.  Just trying to cut down the amount of time each `sage-spkg` goes without holding the lock.  Not sure if it's really relevant though.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea5861f4eeca01349a2ec49044c4ff58d4ee5458">ea5861f</a></td><td><code>Trac #28120: Convert existing shared lock to an exclusively lock on the</code></td></tr></table>




---

archive/issue_comments_440487.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nSeeing this again on the patchbot I set up--it occasionally hangs waiting for rebase lock.  I don't normally see this locally, but because the patchbot is on a VM that tends to run slow, it's possible some race condition is amplified.",
    "created_at": "2019-12-17T10:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28120#issuecomment-440487",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'>Comment 2:</a>
Seeing this again on the patchbot I set up--it occasionally hangs waiting for rebase lock.  I don't normally see this locally, but because the patchbot is on a VM that tends to run slow, it's possible some race condition is amplified.



---

archive/issue_comments_440488.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28120#issuecomment-440488",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'>Comment 3:</a>
Ticket retargeted after milestone closed



---

archive/issue_events_354481.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354481"
}
```



---

archive/issue_events_354482.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354482"
}
```



---

archive/issue_events_354483.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T20:06:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354483"
}
```



---

archive/issue_events_354484.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-04T20:06:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354484"
}
```



---

archive/issue_events_354485.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354485"
}
```



---

archive/issue_events_354486.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354486"
}
```



---

archive/issue_comments_440489.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28120#issuecomment-440489",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'>Comment 6:</a>
Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_354487.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354487"
}
```



---

archive/issue_events_354488.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354488"
}
```



---

archive/issue_events_354489.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354489"
}
```



---

archive/issue_events_354490.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354490"
}
```



---

archive/issue_events_354491.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354491"
}
```



---

archive/issue_events_354492.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354492"
}
```



---

archive/issue_events_354493.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354493"
}
```



---

archive/issue_events_354494.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354494"
}
```



---

archive/issue_events_354495.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-25T20:19:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28120",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28120#event-354495"
}
```
