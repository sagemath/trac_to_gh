# Issue 28073: Abstract Code Class

archive/issues_027836.json:
```json
{
    "assignees": [
        "https://github.com/emes4"
    ],
    "body": "`AbstractLinearCode` is at the moment the most abstract representation of codes in Sage. This makes it very difficult to implement non-linear codes and also codes with a metric different than Hamming. \n\nWe propose to create `AbstractCode` class that will contain metric-agnostic methods, as well as the encoder/decoder framework. `AbstractLinearCode` will derive from this class.\n\nDepends on #27634\n\nCC:  @dimpase @johanrosenkilde @xcaruso @Adurand8\n\nKeywords: **gsoc19**\n\nBranch/Commit: **[`4dbc878`](https://github.com/sagemath/sagetrac-mirror/commit/4dbc8789f4ef1e173987df7ba6e13769eacff2ac)**\n\nReviewer: **Dima Pasechnik, Durand Amaury**\n\nAuthor: **Marketa Slukova**\n\nComponent: **coding theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28073_\n\n",
    "closed_at": "2019-10-03T17:58:07Z",
    "created_at": "2019-06-27T15:21:41Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coding%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Abstract Code Class",
    "type": "issue",
    "updated_at": "2019-10-03T17:58:07Z",
    "url": "https://github.com/sagemath/sage/issues/28073",
    "user": "https://github.com/emes4"
}
```
`AbstractLinearCode` is at the moment the most abstract representation of codes in Sage. This makes it very difficult to implement non-linear codes and also codes with a metric different than Hamming. 

We propose to create `AbstractCode` class that will contain metric-agnostic methods, as well as the encoder/decoder framework. `AbstractLinearCode` will derive from this class.

Depends on #27634

CC:  @dimpase @johanrosenkilde @xcaruso @Adurand8

Keywords: **gsoc19**

Branch/Commit: **[`4dbc878`](https://github.com/sagemath/sagetrac-mirror/commit/4dbc8789f4ef1e173987df7ba6e13769eacff2ac)**

Reviewer: **Dima Pasechnik, Durand Amaury**

Author: **Marketa Slukova**

Component: **coding theory**

_Issue created by migration from https://trac.sagemath.org/ticket/28073_





---

archive/issue_events_384936.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-06-27T15:21:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384936"
}
```



---

archive/issue_events_384937.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-06-27T15:21:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384937"
}
```



---

archive/issue_comments_436787.json:
```json
{
    "body": "Author: **Marketa Slukova**",
    "created_at": "2019-06-27T15:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436787",
    "user": "https://github.com/emes4"
}
```

Author: **Marketa Slukova**



---

archive/issue_comments_436788.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+`AbstractLinearCode` is at the moment the most abstract representation of codes in Sage. This makes it very difficult to implement non-linear codes and also codes with a metric different than Hamming. \n \n+We propose to create `AbstractCode` class that will contain metric-agnostic methods, as well as the encoder/decoder framework. `AbstractLinearCode` will derive from this class.\n``````\n",
    "created_at": "2019-06-27T15:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436788",
    "user": "https://github.com/emes4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+`AbstractLinearCode` is at the moment the most abstract representation of codes in Sage. This makes it very difficult to implement non-linear codes and also codes with a metric different than Hamming. 
 
+We propose to create `AbstractCode` class that will contain metric-agnostic methods, as well as the encoder/decoder framework. `AbstractLinearCode` will derive from this class.
``````




---

archive/issue_events_384938.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-06-27T15:31:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coding%20theory",
    "label_color": "0000ff",
    "label_name": "c: coding theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384938"
}
```



---

archive/issue_events_384939.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-06-27T15:31:26Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "subject": "https://github.com/emes4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384939"
}
```



---

archive/issue_events_384940.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-06-27T15:31:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384940"
}
```



---

archive/issue_events_384941.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-06-27T15:32:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "title_is": "Abstract Code Class",
    "title_was": "Abstract Code",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384941"
}
```



---

archive/issue_comments_436789.json:
```json
{
    "body": "Branch: **[u/emes4/abstract_code](https://github.com/sagemath/sagetrac-mirror/tree/u/emes4/abstract_code)**",
    "created_at": "2019-06-27T15:36:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436789",
    "user": "https://github.com/emes4"
}
```

Branch: **[u/emes4/abstract_code](https://github.com/sagemath/sagetrac-mirror/tree/u/emes4/abstract_code)**



---

archive/issue_comments_436790.json:
```json
{
    "body": "Commit: **[`ba4fc53`](https://github.com/sagemath/sagetrac-mirror/commit/ba4fc5394446919f9969b5df6bb5b4da82bf9876)**",
    "created_at": "2019-06-27T15:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436790",
    "user": "https://github.com/emes4"
}
```

Commit: **[`ba4fc53`](https://github.com/sagemath/sagetrac-mirror/commit/ba4fc5394446919f9969b5df6bb5b4da82bf9876)**



---

archive/issue_comments_436791.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4767e032cbaf48dae95705457224a68baa44754\">f4767e0</a></td><td><code>AbstractCode class created, cut relevant methods from linear_code.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cc4c72ef6b1268d030c00e961a6bf931273e03a\">2cc4c72</a></td><td><code>Reverted base_field and length to be only in linear_code.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64f446a126d16524f2f83faa2f0993242af28332\">64f446a</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into abstract_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53e445b64759f3a75a3be478d807ad592d110219\">53e445b</a></td><td><code>added base_ring and length parameter to AbstractCode</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e6dffe0f19a3fd255a26920cced2157d5ee0624\">5e6dffe</a></td><td><code>Fixed some dependencies. Category still set up wrong.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba4fc5394446919f9969b5df6bb5b4da82bf9876\">ba4fc53</a></td><td><code>Merge branch 'abstract_code' into t/28073/abstract_code</code></td></tr></table>\n",
    "created_at": "2019-06-27T15:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436791",
    "user": "https://github.com/emes4"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4767e032cbaf48dae95705457224a68baa44754">f4767e0</a></td><td><code>AbstractCode class created, cut relevant methods from linear_code.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cc4c72ef6b1268d030c00e961a6bf931273e03a">2cc4c72</a></td><td><code>Reverted base_field and length to be only in linear_code.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64f446a126d16524f2f83faa2f0993242af28332">64f446a</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into abstract_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53e445b64759f3a75a3be478d807ad592d110219">53e445b</a></td><td><code>added base_ring and length parameter to AbstractCode</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e6dffe0f19a3fd255a26920cced2157d5ee0624">5e6dffe</a></td><td><code>Fixed some dependencies. Category still set up wrong.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba4fc5394446919f9969b5df6bb5b4da82bf9876">ba4fc53</a></td><td><code>Merge branch 'abstract_code' into t/28073/abstract_code</code></td></tr></table>




---

archive/issue_comments_436792.json:
```json
{
    "body": "Changed branch from **[u/emes4/abstract_code](https://github.com/sagemath/sagetrac-mirror/tree/u/emes4/abstract_code)** to **[u/gh-emes4/coding/abstract_code](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-emes4/coding/abstract_code)**",
    "created_at": "2019-06-27T15:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436792",
    "user": "https://github.com/emes4"
}
```

Changed branch from **[u/emes4/abstract_code](https://github.com/sagemath/sagetrac-mirror/tree/u/emes4/abstract_code)** to **[u/gh-emes4/coding/abstract_code](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-emes4/coding/abstract_code)**



---

archive/issue_comments_436793.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nyou've checked in uncleanly merged/rebased things, e.g.\n\n```\n+>>>>>>> 4f44acd853... Fixed some dependencies. Category still set up wrong.\n```\n please look at `>>>>`, `<<<<`, and `====` markers in these files, clean them up.",
    "created_at": "2019-06-27T15:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436793",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

you've checked in uncleanly merged/rebased things, e.g.

```
+>>>>>>> 4f44acd853... Fixed some dependencies. Category still set up wrong.
```
 please look at `>>>>`, `<<<<`, and `====` markers in these files, clean them up.



---

archive/issue_comments_436794.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8edfebc20568c2173cc4d2e9306edcff42fa85b\">e8edfeb</a></td><td><code>Fixed unclean merge.</code></td></tr></table>\n",
    "created_at": "2019-06-27T15:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436794",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8edfebc20568c2173cc4d2e9306edcff42fa85b">e8edfeb</a></td><td><code>Fixed unclean merge.</code></td></tr></table>




---

archive/issue_comments_436795.json:
```json
{
    "body": "Changed commit from **[`ba4fc53`](https://github.com/sagemath/sagetrac-mirror/commit/ba4fc5394446919f9969b5df6bb5b4da82bf9876)** to **[`e8edfeb`](https://github.com/sagemath/sagetrac-mirror/commit/e8edfebc20568c2173cc4d2e9306edcff42fa85b)**",
    "created_at": "2019-06-27T15:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436795",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ba4fc53`](https://github.com/sagemath/sagetrac-mirror/commit/ba4fc5394446919f9969b5df6bb5b4da82bf9876)** to **[`e8edfeb`](https://github.com/sagemath/sagetrac-mirror/commit/e8edfebc20568c2173cc4d2e9306edcff42fa85b)**



---

archive/issue_comments_436796.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@dimpase](#comment:5):\n\nSorry about that, it showed me the cleaned up file in my editor.",
    "created_at": "2019-06-27T15:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436796",
    "user": "https://github.com/emes4"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@dimpase](#comment:5):

Sorry about that, it showed me the cleaned up file in my editor.



---

archive/issue_comments_436797.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI created the class `AbstractCode` and moved all the relevant methods from `AbstractLinearCode`.\n\nOriginally, I had `default_encoder` and `default_decoder` parameters in the initialisation of `AbstractCode`, however, I ran into an issue with dependencies - if I set a `default_encoder` for `AbstractLinearCode`, this would then be the default for all the codes inheriting from this. I am sure that this can be fixed, however maybe it makes sense for classes such as `AbstractLinearCode` to not have default decoders/encoders?\n\nFinally, one of the doc tests fails. I tried to set up the category stuff (`Parent.__init__()`), but I don't think I did it correctly. \n\nThis is just a rough, first draft.",
    "created_at": "2019-06-27T15:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436797",
    "user": "https://github.com/emes4"
}
```

<div id="comment:8" align="right">comment:8</div>

I created the class `AbstractCode` and moved all the relevant methods from `AbstractLinearCode`.

Originally, I had `default_encoder` and `default_decoder` parameters in the initialisation of `AbstractCode`, however, I ran into an issue with dependencies - if I set a `default_encoder` for `AbstractLinearCode`, this would then be the default for all the codes inheriting from this. I am sure that this can be fixed, however maybe it makes sense for classes such as `AbstractLinearCode` to not have default decoders/encoders?

Finally, one of the doc tests fails. I tried to set up the category stuff (`Parent.__init__()`), but I don't think I did it correctly. 

This is just a rough, first draft.



---

archive/issue_comments_436798.json:
```json
{
    "body": "Changed commit from **[`e8edfeb`](https://github.com/sagemath/sagetrac-mirror/commit/e8edfebc20568c2173cc4d2e9306edcff42fa85b)** to **[`880aebb`](https://github.com/sagemath/sagetrac-mirror/commit/880aebb7258263aa73ac90763551aeccbce84c94)**",
    "created_at": "2019-06-27T17:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436798",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e8edfeb`](https://github.com/sagemath/sagetrac-mirror/commit/e8edfebc20568c2173cc4d2e9306edcff42fa85b)** to **[`880aebb`](https://github.com/sagemath/sagetrac-mirror/commit/880aebb7258263aa73ac90763551aeccbce84c94)**



---

archive/issue_comments_436799.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/880aebb7258263aa73ac90763551aeccbce84c94\">880aebb</a></td><td><code>Fixed default decoder/encoder dependencies. Set to None by default.</code></td></tr></table>\n",
    "created_at": "2019-06-27T17:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436799",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/880aebb7258263aa73ac90763551aeccbce84c94">880aebb</a></td><td><code>Fixed default decoder/encoder dependencies. Set to None by default.</code></td></tr></table>




---

archive/issue_comments_436800.json:
```json
{
    "body": "Changed keywords from none to **gsoc19**",
    "created_at": "2019-06-27T17:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436800",
    "user": "https://github.com/dimpase"
}
```

Changed keywords from none to **gsoc19**



---

archive/issue_comments_436801.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThanks for working on this! I took a quick view over the new class, and it looks good. There are some copy/paste errors in the documentation where it refers to `AbstractLinearCode` or \"this linear code\" etc., but that's small stuff.\n\nMore importantly, I am worried about how `AbstractCode` should fit into the category framework. In particular, a non-linear code is not necessarily a module. Also, some objects people call codes are not even inside some free module like `R^n` for some ring `R`, e.g. polyalphabetic codes like Chinese Remainder Codes or Polynomial Remainder codes, which are inside `A_1 x A_2 x ... x A_n` for some rings `A_i`. Really, the most general notion of a code is just a subset of some set, which isn't saying much. \n\nPerhaps, as we're now talking of a really base class for all codes, `AbstractCode` should therefore simply omit setting up anything in the category framework, leaving that to more concrete implementations. The task of `AbstractCode` would then basically only consist of setting up the encoder/decoder framework, as well as providing the `metric` method, which I like (I guess `list()` is fine too). It shouldn't even have a length I guess?\n\nIn this case, I don't know whether `AbstractCode` should somehow otherwise be made a parent in the category framework, or whether we should agree that this is a \"contract\" that sub-classes have to do themselves.\n\nBest,\nJohan",
    "created_at": "2019-07-01T11:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436801",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:11" align="right">comment:11</div>

Thanks for working on this! I took a quick view over the new class, and it looks good. There are some copy/paste errors in the documentation where it refers to `AbstractLinearCode` or "this linear code" etc., but that's small stuff.

More importantly, I am worried about how `AbstractCode` should fit into the category framework. In particular, a non-linear code is not necessarily a module. Also, some objects people call codes are not even inside some free module like `R^n` for some ring `R`, e.g. polyalphabetic codes like Chinese Remainder Codes or Polynomial Remainder codes, which are inside `A_1 x A_2 x ... x A_n` for some rings `A_i`. Really, the most general notion of a code is just a subset of some set, which isn't saying much. 

Perhaps, as we're now talking of a really base class for all codes, `AbstractCode` should therefore simply omit setting up anything in the category framework, leaving that to more concrete implementations. The task of `AbstractCode` would then basically only consist of setting up the encoder/decoder framework, as well as providing the `metric` method, which I like (I guess `list()` is fine too). It shouldn't even have a length I guess?

In this case, I don't know whether `AbstractCode` should somehow otherwise be made a parent in the category framework, or whether we should agree that this is a "contract" that sub-classes have to do themselves.

Best,
Johan



---

archive/issue_comments_436802.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d11560039839bb16a6d85d9e4ed674afdabfc299\">d115600</a></td><td><code>No category set up and base_field in AbstractCode. No encoder/decoder error msgs. Documentation and tests.</code></td></tr></table>\n",
    "created_at": "2019-07-01T19:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436802",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d11560039839bb16a6d85d9e4ed674afdabfc299">d115600</a></td><td><code>No category set up and base_field in AbstractCode. No encoder/decoder error msgs. Documentation and tests.</code></td></tr></table>




---

archive/issue_comments_436803.json:
```json
{
    "body": "Changed commit from **[`880aebb`](https://github.com/sagemath/sagetrac-mirror/commit/880aebb7258263aa73ac90763551aeccbce84c94)** to **[`d115600`](https://github.com/sagemath/sagetrac-mirror/commit/d11560039839bb16a6d85d9e4ed674afdabfc299)**",
    "created_at": "2019-07-01T19:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436803",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`880aebb`](https://github.com/sagemath/sagetrac-mirror/commit/880aebb7258263aa73ac90763551aeccbce84c94)** to **[`d115600`](https://github.com/sagemath/sagetrac-mirror/commit/d11560039839bb16a6d85d9e4ed674afdabfc299)**



---

archive/issue_comments_436804.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI made all the changes we discussed, namely:\n\nThe category framework is no longer set up in `AbstractCode`. Instead of inheriting from `Module`, it now inherits from `Parent`. I tried a few things, e.g. `SageObject`, `Set` here and `Parent` seemed to do the trick. I added some documentation hopefully instructing the user on how to set the category framework up.\n\nI took `base_field` away from the initiating parameters of `AbstractCode`. This should be the only change in `AbstractLinearCode`.\n\nThe `decoder` and `encoder` methods now instruct the user to add a decoder/encoder for the code if they try to use the encoder/decoder framework without having set these up. I added tests for these. If there are no default encoders/decoders, the methods `decoders_available` and `encoders_available` return an empty list. Let me know if all the checks for `None` are correctly set up.\n\nI extended the documentation and following the example of `AbstractLinearCode`, added an example of how to use `AbstractCode` to create a subclass.\n\nA lot of the documentation overlaps with `AbstractLinearCode`, however I don't think this is an issue.",
    "created_at": "2019-07-01T19:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436804",
    "user": "https://github.com/emes4"
}
```

<div id="comment:13" align="right">comment:13</div>

I made all the changes we discussed, namely:

The category framework is no longer set up in `AbstractCode`. Instead of inheriting from `Module`, it now inherits from `Parent`. I tried a few things, e.g. `SageObject`, `Set` here and `Parent` seemed to do the trick. I added some documentation hopefully instructing the user on how to set the category framework up.

I took `base_field` away from the initiating parameters of `AbstractCode`. This should be the only change in `AbstractLinearCode`.

The `decoder` and `encoder` methods now instruct the user to add a decoder/encoder for the code if they try to use the encoder/decoder framework without having set these up. I added tests for these. If there are no default encoders/decoders, the methods `decoders_available` and `encoders_available` return an empty list. Let me know if all the checks for `None` are correctly set up.

I extended the documentation and following the example of `AbstractLinearCode`, added an example of how to use `AbstractCode` to create a subclass.

A lot of the documentation overlaps with `AbstractLinearCode`, however I don't think this is an issue.



---

archive/issue_comments_436805.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nplease push your updates...",
    "created_at": "2019-07-11T12:21:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436805",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

please push your updates...



---

archive/issue_comments_436806.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bf73f8d2d11699ffbdf48d010a8f58c2df99269\">2bf73f8</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/487e9e2ce347f619114d52bb33e98ab042947dee\">487e9e2</a></td><td><code>Category related methods added. Encoder/decoder documentation specified for linear codes.</code></td></tr></table>\n",
    "created_at": "2019-07-12T19:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436806",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bf73f8d2d11699ffbdf48d010a8f58c2df99269">2bf73f8</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/487e9e2ce347f619114d52bb33e98ab042947dee">487e9e2</a></td><td><code>Category related methods added. Encoder/decoder documentation specified for linear codes.</code></td></tr></table>




---

archive/issue_comments_436807.json:
```json
{
    "body": "Changed commit from **[`d115600`](https://github.com/sagemath/sagetrac-mirror/commit/d11560039839bb16a6d85d9e4ed674afdabfc299)** to **[`487e9e2`](https://github.com/sagemath/sagetrac-mirror/commit/487e9e2ce347f619114d52bb33e98ab042947dee)**",
    "created_at": "2019-07-12T19:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436807",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d115600`](https://github.com/sagemath/sagetrac-mirror/commit/d11560039839bb16a6d85d9e4ed674afdabfc299)** to **[`487e9e2`](https://github.com/sagemath/sagetrac-mirror/commit/487e9e2ce347f619114d52bb33e98ab042947dee)**



---

archive/issue_comments_436808.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAdded methods `__iter__` and `__contains__` to `AbstractCode` instructing the user to override them.\n\nChanged `Encoder` and `Decoder` class documentation to instruct the user to inherit from these when working with linear codes (over any metric).",
    "created_at": "2019-07-12T19:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436808",
    "user": "https://github.com/emes4"
}
```

<div id="comment:16" align="right">comment:16</div>

Added methods `__iter__` and `__contains__` to `AbstractCode` instructing the user to override them.

Changed `Encoder` and `Decoder` class documentation to instruct the user to inherit from these when working with linear codes (over any metric).



---

archive/issue_comments_436809.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40df01e3e1bc92c4d22ae9928f39c24d64117841\">40df01e</a></td><td><code>Finished up documentation.</code></td></tr></table>\n",
    "created_at": "2019-07-17T10:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436809",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40df01e3e1bc92c4d22ae9928f39c24d64117841">40df01e</a></td><td><code>Finished up documentation.</code></td></tr></table>




---

archive/issue_comments_436810.json:
```json
{
    "body": "Changed commit from **[`487e9e2`](https://github.com/sagemath/sagetrac-mirror/commit/487e9e2ce347f619114d52bb33e98ab042947dee)** to **[`40df01e`](https://github.com/sagemath/sagetrac-mirror/commit/40df01e3e1bc92c4d22ae9928f39c24d64117841)**",
    "created_at": "2019-07-17T10:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436810",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`487e9e2`](https://github.com/sagemath/sagetrac-mirror/commit/487e9e2ce347f619114d52bb33e98ab042947dee)** to **[`40df01e`](https://github.com/sagemath/sagetrac-mirror/commit/40df01e3e1bc92c4d22ae9928f39c24d64117841)**



---

archive/issue_events_384942.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-07-17T10:40:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384942"
}
```



---

archive/issue_comments_436811.json:
```json
{
    "body": "Dependencies: **#28209**",
    "created_at": "2019-07-17T11:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436811",
    "user": "https://github.com/emes4"
}
```

Dependencies: **#28209**



---

archive/issue_comments_436812.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01135cbfae1ff481ba243ca05eabf229e8c1432d\">01135cb</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr></table>\n",
    "created_at": "2019-07-22T10:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436812",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01135cbfae1ff481ba243ca05eabf229e8c1432d">01135cb</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr></table>




---

archive/issue_comments_436813.json:
```json
{
    "body": "Changed commit from **[`40df01e`](https://github.com/sagemath/sagetrac-mirror/commit/40df01e3e1bc92c4d22ae9928f39c24d64117841)** to **[`01135cb`](https://github.com/sagemath/sagetrac-mirror/commit/01135cbfae1ff481ba243ca05eabf229e8c1432d)**",
    "created_at": "2019-07-22T10:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436813",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`40df01e`](https://github.com/sagemath/sagetrac-mirror/commit/40df01e3e1bc92c4d22ae9928f39c24d64117841)** to **[`01135cb`](https://github.com/sagemath/sagetrac-mirror/commit/01135cbfae1ff481ba243ca05eabf229e8c1432d)**



---

archive/issue_comments_436814.json:
```json
{
    "body": "Changed dependencies from **#28209** to none",
    "created_at": "2019-07-29T13:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436814",
    "user": "https://github.com/emes4"
}
```

Changed dependencies from **#28209** to none



---

archive/issue_events_384943.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2019-07-29T13:37:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384943"
}
```



---

archive/issue_events_384944.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2019-07-29T13:37:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384944"
}
```



---

archive/issue_comments_436815.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis looks very promising! My comments may look long but they are not too heavy. Note: this is not a complete review, I didn't compile, run the code and build the documentation. I'm hoping Dima will do that :-)\n\n- Top of the class:\n    The only assumption we kept is that the code is enumerable.\n  change to\n    The abstract notion of \"code\" that is implicitly used for this class is any\n    enumerable subset of a cartesian product `A_1 \\times A_2 \\times \\ldots\n    \\times A_n` for some sets `A_i`. Note though that this class makes no\n    attempt to directly represent the code in this fashion, allowing subclasses\n    to make the appropriate choices. The notion of metric is also not\n    mathematically enforced in any way, and is simply stored as a string value.\n    \".\n\n  The line just after has a line break very early, doesn't it?\n\n- `part of the framework category` -> `part of the category framework`\n\n- `any method that works on linear codes works for our` -> `coming from AbstractCode code`\n\n- The example in `AbstractCode.__init__` is not great, since it doesn't yield a\n  working code class (it doesn't implement `_list_` etc.). Can you make an\n  small, but more meaningful example, e.g. the code consisting of the l words\n\n  ```\n  {\n    00...00,\n    10...00,\n    11...00,\n    ...\n    11...10,\n    11...11\n  }\n  ```\n\n  For this code, you could add a full working example with implementations of\n  `_list_`, `__iter__`, `__contains__`.\n\n  The For #28209, the example could be expounded upon in a short thematic\n  tutorial: adding an encoder/unencoder from the ring (ZZ mod (l+1)) into the\n  code. The metric could be Hamming (though the code is of course quite bad),\n  and that would allow attaching the LinearCodeNearestNeighbor decoder, which\n  actually works for any code under the Hamming metric.\n\n  That would be very nice documentation for anyone wanting to implement a new\n  class of codes not fitting in linear/hamming codes.\n\n- The example for `_repr_` and `_latex_` is unnecessarily complicated because\n  `AbstractCode` does not need supplying encoders and decoders. Use instead the\n  smaller example from e.g. `__contains__`.\n\n- In doc for `decode_to_code` and `decode_to_message`, the description of\n  `word` should say \"an element in the ambient space as `self`\". The code might\n  not be vectorial in the classical sense.\n\n- For `decoder()` and `encoder()`, the exception thrown should be a\n  `NotImplementedError` and the message could perhaps be \"No encoder [resp. decoder]\n  implemented for this code\".\n\n- In doc for `encode`, then the description of `word` should say \"an element\n  of a message space of the code\". The message space might not be vectorial. The\n  note after the INPUT block is not appropriate anymore and should just be\n  removed.\n\n- At this abstraction there's virtually no service we could put on an Encoder or\n  Decoder class which would justify having an AbstractEncoder or\n  AbstractDecoder, I think. In a strongly typed OOP language, like Java, we\n  would of course have to have such a thing, but I believe in Python and\n  [SageMath](../wiki/SageMath) in particular, the convention is not to have needless abstract\n  classes. Therefore your oneline doc changes to `encoder.py` and\n  `decoder.py` are spot-on: that's all the change we'll have for those files.\n\n  However, we are left with something of a documentation problem. For where do\n  we document the precise interface requirements of an encoder and a decoder\n  assumed by the framework in AbstractCode? I think the best place for this is a\n  (not too long) discussion at the top of the file `abstract_code.py`, i.e.\n  just after \"Any class inheriting ... can use the encode/decode framework\".\n  Here we can describe what that is, and what is meant and promised by an\n  encoder/decoder.\n\n  I am OK with having a relatively short description of the purpose, and just\n  mentioning the methods an encoder must have (`encode`, `__call__` which is\n  simply `encode`, `unencode`, `message_space` and `code`), and similarly for\n  a decoder. And then pointing to `Encoder` and `Decoder` as examples.\n\nBest,\nJohan",
    "created_at": "2019-07-29T13:37:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436815",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:22" align="right">comment:22</div>

This looks very promising! My comments may look long but they are not too heavy. Note: this is not a complete review, I didn't compile, run the code and build the documentation. I'm hoping Dima will do that :-)

- Top of the class:
    The only assumption we kept is that the code is enumerable.
  change to
    The abstract notion of "code" that is implicitly used for this class is any
    enumerable subset of a cartesian product `A_1 \times A_2 \times \ldots
    \times A_n` for some sets `A_i`. Note though that this class makes no
    attempt to directly represent the code in this fashion, allowing subclasses
    to make the appropriate choices. The notion of metric is also not
    mathematically enforced in any way, and is simply stored as a string value.
    ".

  The line just after has a line break very early, doesn't it?

- `part of the framework category` -> `part of the category framework`

- `any method that works on linear codes works for our` -> `coming from AbstractCode code`

- The example in `AbstractCode.__init__` is not great, since it doesn't yield a
  working code class (it doesn't implement `_list_` etc.). Can you make an
  small, but more meaningful example, e.g. the code consisting of the l words

  ```
  {
    00...00,
    10...00,
    11...00,
    ...
    11...10,
    11...11
  }
  ```

  For this code, you could add a full working example with implementations of
  `_list_`, `__iter__`, `__contains__`.

  The For #28209, the example could be expounded upon in a short thematic
  tutorial: adding an encoder/unencoder from the ring (ZZ mod (l+1)) into the
  code. The metric could be Hamming (though the code is of course quite bad),
  and that would allow attaching the LinearCodeNearestNeighbor decoder, which
  actually works for any code under the Hamming metric.

  That would be very nice documentation for anyone wanting to implement a new
  class of codes not fitting in linear/hamming codes.

- The example for `_repr_` and `_latex_` is unnecessarily complicated because
  `AbstractCode` does not need supplying encoders and decoders. Use instead the
  smaller example from e.g. `__contains__`.

- In doc for `decode_to_code` and `decode_to_message`, the description of
  `word` should say "an element in the ambient space as `self`". The code might
  not be vectorial in the classical sense.

- For `decoder()` and `encoder()`, the exception thrown should be a
  `NotImplementedError` and the message could perhaps be "No encoder [resp. decoder]
  implemented for this code".

- In doc for `encode`, then the description of `word` should say "an element
  of a message space of the code". The message space might not be vectorial. The
  note after the INPUT block is not appropriate anymore and should just be
  removed.

- At this abstraction there's virtually no service we could put on an Encoder or
  Decoder class which would justify having an AbstractEncoder or
  AbstractDecoder, I think. In a strongly typed OOP language, like Java, we
  would of course have to have such a thing, but I believe in Python and
  [SageMath](../wiki/SageMath) in particular, the convention is not to have needless abstract
  classes. Therefore your oneline doc changes to `encoder.py` and
  `decoder.py` are spot-on: that's all the change we'll have for those files.

  However, we are left with something of a documentation problem. For where do
  we document the precise interface requirements of an encoder and a decoder
  assumed by the framework in AbstractCode? I think the best place for this is a
  (not too long) discussion at the top of the file `abstract_code.py`, i.e.
  just after "Any class inheriting ... can use the encode/decode framework".
  Here we can describe what that is, and what is meant and promised by an
  encoder/decoder.

  I am OK with having a relatively short description of the purpose, and just
  mentioning the methods an encoder must have (`encode`, `__call__` which is
  simply `encode`, `unencode`, `message_space` and `code`), and similarly for
  a decoder. And then pointing to `Encoder` and `Decoder` as examples.

Best,
Johan



---

archive/issue_comments_436816.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI'd like to wait for above to be implemented (at least in part) before doing my own review.",
    "created_at": "2019-07-30T08:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436816",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

I'd like to wait for above to be implemented (at least in part) before doing my own review.



---

archive/issue_comments_436817.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef7b797ac8c8e94954bac4c6359f62681700161c\">ef7b797</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9608a237aeabcaf56416bc26475a6b3c0433e6c0\">9608a23</a></td><td><code>Documentation and example fixes.</code></td></tr></table>\n",
    "created_at": "2019-07-30T10:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436817",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef7b797ac8c8e94954bac4c6359f62681700161c">ef7b797</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9608a237aeabcaf56416bc26475a6b3c0433e6c0">9608a23</a></td><td><code>Documentation and example fixes.</code></td></tr></table>




---

archive/issue_comments_436818.json:
```json
{
    "body": "Changed commit from **[`01135cb`](https://github.com/sagemath/sagetrac-mirror/commit/01135cbfae1ff481ba243ca05eabf229e8c1432d)** to **[`9608a23`](https://github.com/sagemath/sagetrac-mirror/commit/9608a237aeabcaf56416bc26475a6b3c0433e6c0)**",
    "created_at": "2019-07-30T10:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436818",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`01135cb`](https://github.com/sagemath/sagetrac-mirror/commit/01135cbfae1ff481ba243ca05eabf229e8c1432d)** to **[`9608a23`](https://github.com/sagemath/sagetrac-mirror/commit/9608a237aeabcaf56416bc26475a6b3c0433e6c0)**



---

archive/issue_comments_436819.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI implemented all the changes that Johan suggested.\n\nOne comment: In the new example in `AbstractCode.__init__`, I didn't make it a part of the category framework, partially because I was unsure as to which category to choose.",
    "created_at": "2019-07-30T10:16:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436819",
    "user": "https://github.com/emes4"
}
```

<div id="comment:25" align="right">comment:25</div>

I implemented all the changes that Johan suggested.

One comment: In the new example in `AbstractCode.__init__`, I didn't make it a part of the category framework, partially because I was unsure as to which category to choose.



---

archive/issue_comments_436820.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@emes4](#comment:25):\n> I implemented all the changes that Johan suggested.\n\nYou are fast! :-)\n\n> One comment: In the new example in `AbstractCode.__init__`, I didn't make it a part of the category framework, partially because I was unsure as to which category to choose.\n\nPutting it in the category framework would be great, but I think it is fine as it is. I'm happy with the example :-)\n\nOne new comment I thought of: `AbstractLinearCode` used to inherit from `Module` as well as being injected into the category framework under `Modules`. Now it inherits from `AbstractCode` which, of course, does not inherit from `Module`. My concern is whether some functionality from `Module` might now have gotten lost? \n\nI haven't checked out your ticket and compiled, but this is the list of methods I get with `dir(C)` on a freshly created `LinearCode` `C` on Sage 8.8.rc3:\n\n```\n['CartesianProduct', 'Element', 'Hom', '__cached_methods', '__call__', '__class__', '__contains__', '__delattr__', '__dict__', '__dir__', '__div__', '__doc__', '__eq__', '__format__', '__gens_dict', '__getattribute__', '__getitem__', '__getstate__', '__hash__', '__init__', '__init_extra__', '__iter__', '__len__', '__make_element_class__', '__module__', '__mul__', '__ne__', '__new__', '__nonzero__', '__pari__', '__pyx_vtable__', '__rdiv__', '__reduce__', '__reduce_ex__', '__repr__', '__rmul__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__temporarily_change_names', '_abstract_element_class', '_an_element_', '_apply_module_endomorphism', '_apply_module_morphism', '_ascii_art_', '_assign_names', '_axiom_', '_axiom_init_', '_base', '_cache_an_element', '_cache_key', '_canonize', '_coerce_map_from_', '_coerce_map_via', '_coercions_used', '_convert_map_from_', '_convert_method_map', '_convert_method_name', '_default_decoder_name', '_default_encoder_name', '_defining_names', '_dense_free_module', '_dimension', '_doccls', '_element_constructor_', '_element_constructor_from_element_class', '_facade_for', '_factory_data', '_first_ngens', '_fricas_', '_fricas_init_', '_from_dict', '_gap_', '_gap_init_', '_generator_matrix', '_generic_coerce_map', '_generic_convert_map', '_get_action_', '_giac_', '_giac_init_', '_gp_', '_gp_init_', '_init_category_', '_initial_action_list', '_initial_coerce_list', '_initial_convert_list', '_interface_', '_interface_init_', '_interface_is_cached_', '_internal_coerce_map_from', '_internal_convert_map_from', '_introspect_coerce', '_is_category_initialized', '_is_coercion_cached', '_is_conversion_cached', '_is_valid_homomorphism_', '_kash_', '_kash_init_', '_latex_', '_length', '_macaulay2_', '_macaulay2_init_', '_magma_init_', '_maple_', '_maple_init_', '_mathematica_', '_mathematica_init_', '_maxima_', '_maxima_init_', '_maxima_lib_', '_maxima_lib_init_', '_minimum_distance', '_minimum_weight_codeword', '_module_morphism', '_names', '_octave_', '_octave_init_', '_pari_init_', '_polymake_', '_polymake_init_', '_populate_coercion_lists_', '_punctured_form', '_r_init_', '_reduction', '_refine_category_', '_registered_decoders', '_registered_encoders', '_remove_from_coerce_cache', '_repr_', '_repr_option', '_sage_', '_set_element_constructor', '_singular_', '_singular_init_', '_sum_of_monomials', '_test_additive_associativity', '_test_an_element', '_test_cardinality', '_test_category', '_test_elements', '_test_elements_eq_reflexive', '_test_elements_eq_symmetric', '_test_elements_eq_transitive', '_test_elements_neq', '_test_eq', '_test_new', '_test_not_implemented_methods', '_test_pickling', '_test_some_elements', '_test_zero', '_tester', '_underlying_class', '_unicode_art_', '_unset_category', '_unset_coercions_used', '_unset_embedding', 'add_decoder', 'add_encoder', 'addition_table', 'algebra', 'ambient_space', 'an_element', 'annihilator', 'annihilator_basis', 'assmus_mattson_designs', 'automorphism_group_gens', 'base', 'base_extend', 'base_field', 'base_ring', 'basis', 'binomial_moment', 'canonical_representative', 'cardinality', 'cartesian_product', 'categories', 'category', 'change_ring', 'characteristic', 'characteristic_polynomial', 'chinen_polynomial', 'coerce', 'coerce_embedding', 'coerce_map_from', 'construction', 'convert_map_from', 'covering_radius', 'decode_to_code', 'decode_to_message', 'decoder', 'decoders_available', 'dimension', 'direct_sum', 'divisor', 'dual_code', 'dump', 'dumps', 'echelon_form', 'element_class', 'encode', 'encoder', 'encoders_available', 'endomorphism_ring', 'extended_code', 'facade_for', 'from_vector', 'galois_closure', 'generator_matrix', 'gens', 'gens_dict', 'gens_dict_recursive', 'genus', 'get_action', 'has_coerce_map_from', 'hom', 'information_set', 'inject_variables', 'is_empty', 'is_exact', 'is_finite', 'is_galois_closed', 'is_information_set', 'is_parent_of', 'is_permutation_automorphism', 'is_permutation_equivalent', 'is_projective', 'is_self_dual', 'is_self_orthogonal', 'is_subcode', 'latex_name', 'latex_variable_names', 'length', 'linear_combination', 'list', 'minimum_distance', 'module_composition_factors', 'module_morphism', 'monomial', 'monomial_or_zero_if_none', 'objgen', 'objgens', 'parent', 'parity_check_matrix', 'permutation_automorphism_group', 'permuted_code', 'punctured', 'quotient_module', 'random_element', 'rate', 'redundancy_matrix', 'register_action', 'register_coercion', 'register_conversion', 'register_embedding', 'relative_distance', 'rename', 'reset_name', 'save', 'shortened', 'some_elements', 'spectrum', 'standard_form', 'submodule', 'sum', 'sum_of_monomials', 'sum_of_terms', 'summation', 'summation_from_element_class_add', 'support', 'syndrome', 'systematic_generator_matrix', 'tensor', 'tensor_square', 'term', 'unencode', 'variable_name', 'variable_names', 'weight_distribution', 'weight_enumerator', 'zero', 'zeta_function', 'zeta_polynomial']\n```",
    "created_at": "2019-07-30T12:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436820",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@emes4](#comment:25):
> I implemented all the changes that Johan suggested.

You are fast! :-)

> One comment: In the new example in `AbstractCode.__init__`, I didn't make it a part of the category framework, partially because I was unsure as to which category to choose.

Putting it in the category framework would be great, but I think it is fine as it is. I'm happy with the example :-)

One new comment I thought of: `AbstractLinearCode` used to inherit from `Module` as well as being injected into the category framework under `Modules`. Now it inherits from `AbstractCode` which, of course, does not inherit from `Module`. My concern is whether some functionality from `Module` might now have gotten lost? 

I haven't checked out your ticket and compiled, but this is the list of methods I get with `dir(C)` on a freshly created `LinearCode` `C` on Sage 8.8.rc3:

```
['CartesianProduct', 'Element', 'Hom', '__cached_methods', '__call__', '__class__', '__contains__', '__delattr__', '__dict__', '__dir__', '__div__', '__doc__', '__eq__', '__format__', '__gens_dict', '__getattribute__', '__getitem__', '__getstate__', '__hash__', '__init__', '__init_extra__', '__iter__', '__len__', '__make_element_class__', '__module__', '__mul__', '__ne__', '__new__', '__nonzero__', '__pari__', '__pyx_vtable__', '__rdiv__', '__reduce__', '__reduce_ex__', '__repr__', '__rmul__', '__setattr__', '__setstate__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__temporarily_change_names', '_abstract_element_class', '_an_element_', '_apply_module_endomorphism', '_apply_module_morphism', '_ascii_art_', '_assign_names', '_axiom_', '_axiom_init_', '_base', '_cache_an_element', '_cache_key', '_canonize', '_coerce_map_from_', '_coerce_map_via', '_coercions_used', '_convert_map_from_', '_convert_method_map', '_convert_method_name', '_default_decoder_name', '_default_encoder_name', '_defining_names', '_dense_free_module', '_dimension', '_doccls', '_element_constructor_', '_element_constructor_from_element_class', '_facade_for', '_factory_data', '_first_ngens', '_fricas_', '_fricas_init_', '_from_dict', '_gap_', '_gap_init_', '_generator_matrix', '_generic_coerce_map', '_generic_convert_map', '_get_action_', '_giac_', '_giac_init_', '_gp_', '_gp_init_', '_init_category_', '_initial_action_list', '_initial_coerce_list', '_initial_convert_list', '_interface_', '_interface_init_', '_interface_is_cached_', '_internal_coerce_map_from', '_internal_convert_map_from', '_introspect_coerce', '_is_category_initialized', '_is_coercion_cached', '_is_conversion_cached', '_is_valid_homomorphism_', '_kash_', '_kash_init_', '_latex_', '_length', '_macaulay2_', '_macaulay2_init_', '_magma_init_', '_maple_', '_maple_init_', '_mathematica_', '_mathematica_init_', '_maxima_', '_maxima_init_', '_maxima_lib_', '_maxima_lib_init_', '_minimum_distance', '_minimum_weight_codeword', '_module_morphism', '_names', '_octave_', '_octave_init_', '_pari_init_', '_polymake_', '_polymake_init_', '_populate_coercion_lists_', '_punctured_form', '_r_init_', '_reduction', '_refine_category_', '_registered_decoders', '_registered_encoders', '_remove_from_coerce_cache', '_repr_', '_repr_option', '_sage_', '_set_element_constructor', '_singular_', '_singular_init_', '_sum_of_monomials', '_test_additive_associativity', '_test_an_element', '_test_cardinality', '_test_category', '_test_elements', '_test_elements_eq_reflexive', '_test_elements_eq_symmetric', '_test_elements_eq_transitive', '_test_elements_neq', '_test_eq', '_test_new', '_test_not_implemented_methods', '_test_pickling', '_test_some_elements', '_test_zero', '_tester', '_underlying_class', '_unicode_art_', '_unset_category', '_unset_coercions_used', '_unset_embedding', 'add_decoder', 'add_encoder', 'addition_table', 'algebra', 'ambient_space', 'an_element', 'annihilator', 'annihilator_basis', 'assmus_mattson_designs', 'automorphism_group_gens', 'base', 'base_extend', 'base_field', 'base_ring', 'basis', 'binomial_moment', 'canonical_representative', 'cardinality', 'cartesian_product', 'categories', 'category', 'change_ring', 'characteristic', 'characteristic_polynomial', 'chinen_polynomial', 'coerce', 'coerce_embedding', 'coerce_map_from', 'construction', 'convert_map_from', 'covering_radius', 'decode_to_code', 'decode_to_message', 'decoder', 'decoders_available', 'dimension', 'direct_sum', 'divisor', 'dual_code', 'dump', 'dumps', 'echelon_form', 'element_class', 'encode', 'encoder', 'encoders_available', 'endomorphism_ring', 'extended_code', 'facade_for', 'from_vector', 'galois_closure', 'generator_matrix', 'gens', 'gens_dict', 'gens_dict_recursive', 'genus', 'get_action', 'has_coerce_map_from', 'hom', 'information_set', 'inject_variables', 'is_empty', 'is_exact', 'is_finite', 'is_galois_closed', 'is_information_set', 'is_parent_of', 'is_permutation_automorphism', 'is_permutation_equivalent', 'is_projective', 'is_self_dual', 'is_self_orthogonal', 'is_subcode', 'latex_name', 'latex_variable_names', 'length', 'linear_combination', 'list', 'minimum_distance', 'module_composition_factors', 'module_morphism', 'monomial', 'monomial_or_zero_if_none', 'objgen', 'objgens', 'parent', 'parity_check_matrix', 'permutation_automorphism_group', 'permuted_code', 'punctured', 'quotient_module', 'random_element', 'rate', 'redundancy_matrix', 'register_action', 'register_coercion', 'register_conversion', 'register_embedding', 'relative_distance', 'rename', 'reset_name', 'save', 'shortened', 'some_elements', 'spectrum', 'standard_form', 'submodule', 'sum', 'sum_of_monomials', 'sum_of_terms', 'summation', 'summation_from_element_class_add', 'support', 'syndrome', 'systematic_generator_matrix', 'tensor', 'tensor_square', 'term', 'unencode', 'variable_name', 'variable_names', 'weight_distribution', 'weight_enumerator', 'zero', 'zeta_function', 'zeta_polynomial']
```



---

archive/issue_comments_436821.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOh yeah, Python has multiple inheritance, so perhaps `AbstractLinearCode` should just be declared as\n\n```\nclass AbstractLinearCode(AbstractCode, Module)\n```\nand then everything should be fine?",
    "created_at": "2019-07-30T12:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436821",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:27" align="right">comment:27</div>

Oh yeah, Python has multiple inheritance, so perhaps `AbstractLinearCode` should just be declared as

```
class AbstractLinearCode(AbstractCode, Module)
```
and then everything should be fine?



---

archive/issue_comments_436822.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@johanrosenkilde](#comment:26):\n> I haven't checked out your ticket and compiled, but this is the list of methods I get with `dir(C)` on a freshly created `LinearCode` `C` on Sage 8.8.rc3:\n\nWithout inheriting from `Module`, a fresh `LinearCode` on this branch (Sage 8.9.beta4) has more methods than your list, but is missing these: `['base_extend', 'change_ring', 'endomorphism_ring']`. \n\nI added the Module inheritance, will push it with some bigger changes.",
    "created_at": "2019-07-30T12:17:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436822",
    "user": "https://github.com/emes4"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@johanrosenkilde](#comment:26):
> I haven't checked out your ticket and compiled, but this is the list of methods I get with `dir(C)` on a freshly created `LinearCode` `C` on Sage 8.8.rc3:

Without inheriting from `Module`, a fresh `LinearCode` on this branch (Sage 8.9.beta4) has more methods than your list, but is missing these: `['base_extend', 'change_ring', 'endomorphism_ring']`. 

I added the Module inheritance, will push it with some bigger changes.



---

archive/issue_comments_436823.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@emes4](#comment:28):\n> Replying to [@johanrosenkilde](#comment:26):\n> > I haven't checked out your ticket and compiled, but this is the list of methods I get with `dir(C)` on a freshly created `LinearCode` `C` on Sage 8.8.rc3:\n\n> \n> Without inheriting from `Module`, a fresh `LinearCode` on this branch (Sage 8.9.beta4) has more methods than your list, but is missing these: `['base_extend', 'change_ring', 'endomorphism_ring']`. \n\nNone of those methods seem to do anything useful, and they don't even make much sense for a (linear) code to begin with. `endomorphism_ring` is particularly unfortunate, since we have `automorphism_group_gens` which does something very useful, and a user might confuse these.\n\nPerhaps, then, it's better to not inherit from `Module` after all?",
    "created_at": "2019-07-30T12:53:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436823",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@emes4](#comment:28):
> Replying to [@johanrosenkilde](#comment:26):
> > I haven't checked out your ticket and compiled, but this is the list of methods I get with `dir(C)` on a freshly created `LinearCode` `C` on Sage 8.8.rc3:

> 
> Without inheriting from `Module`, a fresh `LinearCode` on this branch (Sage 8.9.beta4) has more methods than your list, but is missing these: `['base_extend', 'change_ring', 'endomorphism_ring']`. 

None of those methods seem to do anything useful, and they don't even make much sense for a (linear) code to begin with. `endomorphism_ring` is particularly unfortunate, since we have `automorphism_group_gens` which does something very useful, and a user might confuse these.

Perhaps, then, it's better to not inherit from `Module` after all?



---

archive/issue_events_384945.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-07-30T12:55:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384945"
}
```



---

archive/issue_events_384946.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-07-30T12:55:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384946"
}
```



---

archive/issue_comments_436824.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@johanrosenkilde](#comment:29):\n\n> None of those methods seem to do anything useful, and they don't even make much sense for a (linear) code to begin with. `endomorphism_ring` is particularly unfortunate, since we have `automorphism_group_gens` which does something very useful, and a user might confuse these.\n> \n> Perhaps, then, it's better to not inherit from `Module` after all?\n\nIMHO, `Module` is too general, here we have free modules, a.k.a. `ModulesWithBasis`.",
    "created_at": "2019-07-30T13:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436824",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@johanrosenkilde](#comment:29):

> None of those methods seem to do anything useful, and they don't even make much sense for a (linear) code to begin with. `endomorphism_ring` is particularly unfortunate, since we have `automorphism_group_gens` which does something very useful, and a user might confuse these.
> 
> Perhaps, then, it's better to not inherit from `Module` after all?

IMHO, `Module` is too general, here we have free modules, a.k.a. `ModulesWithBasis`.



---

archive/issue_comments_436825.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@dimpase](#comment:31):\n> > Perhaps, then, it's better to not inherit from `Module` after all?\n\n> \n> IMHO, `Module` is too general, here we have free modules, a.k.a. `ModulesWithBasis`.\n> \n\nThat's absolutely true. If we inherit from that instead, do these useless methods then go away?",
    "created_at": "2019-07-30T14:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436825",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@dimpase](#comment:31):
> > Perhaps, then, it's better to not inherit from `Module` after all?

> 
> IMHO, `Module` is too general, here we have free modules, a.k.a. `ModulesWithBasis`.
> 

That's absolutely true. If we inherit from that instead, do these useless methods then go away?



---

archive/issue_comments_436826.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@johanrosenkilde](#comment:32):\n> Replying to [@dimpase](#comment:31):\n> > > Perhaps, then, it's better to not inherit from `Module` after all?\n\n> > \n> > IMHO, `Module` is too general, here we have free modules, a.k.a. `ModulesWithBasis`.\n> > \n\n> \n> That's absolutely true. If we inherit from that instead, do these useless methods then go away?\n\nWhen I add `ModulesWithBasis` to the inheritance of `AbstractLinearCode`, I get the following error: `ValueError: base must be a ring or a subcategory of Rings()`. I am not sure how to fix that?",
    "created_at": "2019-07-30T16:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436826",
    "user": "https://github.com/emes4"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@johanrosenkilde](#comment:32):
> Replying to [@dimpase](#comment:31):
> > > Perhaps, then, it's better to not inherit from `Module` after all?

> > 
> > IMHO, `Module` is too general, here we have free modules, a.k.a. `ModulesWithBasis`.
> > 

> 
> That's absolutely true. If we inherit from that instead, do these useless methods then go away?

When I add `ModulesWithBasis` to the inheritance of `AbstractLinearCode`, I get the following error: `ValueError: base must be a ring or a subcategory of Rings()`. I am not sure how to fix that?



---

archive/issue_comments_436827.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI see, this is due to the structure of the category framework: `ModulesWithBasis` is a category (i.e. the set of all modules with a basis). We are standing with a single \"module with basis\", so we should put that into the category. But there is no class `ModuleWithBasis` (singular). So the way this is done is to inherit from `Module` and then use a magic incantation to tell the category framework that this is not just any module, it is a module with basis. That's exactly what is currently done in `AbstractLinearCode`.\n\nLooking at the definition of `sage.modules.modules.Module`, I don't see anything useful for `LinearCode`s to inherit. On the other hand, it's probably not a good idea to put a parent object into the category of modules (with basis) without that parent object actually being a module. At least, any strong type system would cry ;-)\n\nSo I suggest just keeping the status quo by using multiple inheritance so `AbstractLinearCode`  inherits from both `AbstractCode` and `Module` (in that order).",
    "created_at": "2019-07-31T06:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436827",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:34" align="right">comment:34</div>

I see, this is due to the structure of the category framework: `ModulesWithBasis` is a category (i.e. the set of all modules with a basis). We are standing with a single "module with basis", so we should put that into the category. But there is no class `ModuleWithBasis` (singular). So the way this is done is to inherit from `Module` and then use a magic incantation to tell the category framework that this is not just any module, it is a module with basis. That's exactly what is currently done in `AbstractLinearCode`.

Looking at the definition of `sage.modules.modules.Module`, I don't see anything useful for `LinearCode`s to inherit. On the other hand, it's probably not a good idea to put a parent object into the category of modules (with basis) without that parent object actually being a module. At least, any strong type system would cry ;-)

So I suggest just keeping the status quo by using multiple inheritance so `AbstractLinearCode`  inherits from both `AbstractCode` and `Module` (in that order).



---

archive/issue_comments_436828.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI've just been reviewing the cleanup-ticket #27634. This ticket might very well conflict with that, so I suggest merging in #27634 and making it a dependency, so we handle that up-front.",
    "created_at": "2019-07-31T06:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436828",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:35" align="right">comment:35</div>

I've just been reviewing the cleanup-ticket #27634. This ticket might very well conflict with that, so I suggest merging in #27634 and making it a dependency, so we handle that up-front.



---

archive/issue_comments_436829.json:
```json
{
    "body": "Dependencies: **#27634**",
    "created_at": "2019-07-31T08:37:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436829",
    "user": "https://github.com/emes4"
}
```

Dependencies: **#27634**



---

archive/issue_comments_436830.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI propose adding a method `ambient_space` to `AbstractCode` which throws a `NotImplementedError`. It should be documented that it is recommended (but not required) to override this method. Then we can also move the `__call__` method of `AbstractLinearCode` to `AbstractCode`.",
    "created_at": "2019-07-31T08:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436830",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:37" align="right">comment:37</div>

I propose adding a method `ambient_space` to `AbstractCode` which throws a `NotImplementedError`. It should be documented that it is recommended (but not required) to override this method. Then we can also move the `__call__` method of `AbstractLinearCode` to `AbstractCode`.



---

archive/issue_events_384947.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2019-07-31T09:51:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384947"
}
```



---

archive/issue_events_384948.json:
```json
{
    "actor": "https://github.com/johanrosenkilde",
    "created_at": "2019-07-31T09:51:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384948"
}
```



---

archive/issue_comments_436831.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@johanrosenkilde](#comment:37):\n> I propose adding a method `ambient_space` to `AbstractCode` which throws a `NotImplementedError`. It should be documented that it is recommended (but not required) to override this method. Then we can also move the `__call__` method of `AbstractLinearCode` to `AbstractCode`.\n\nIs this method required by the encoder/decoder framework?",
    "created_at": "2019-07-31T10:20:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436831",
    "user": "https://github.com/emes4"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@johanrosenkilde](#comment:37):
> I propose adding a method `ambient_space` to `AbstractCode` which throws a `NotImplementedError`. It should be documented that it is recommended (but not required) to override this method. Then we can also move the `__call__` method of `AbstractLinearCode` to `AbstractCode`.

Is this method required by the encoder/decoder framework?



---

archive/issue_comments_436832.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@emes4](#comment:39):\n> Replying to [@johanrosenkilde](#comment:37):\n> > I propose adding a method `ambient_space` to `AbstractCode` which throws a `NotImplementedError`. It should be documented that it is recommended (but not required) to override this method. Then we can also move the `__call__` method of `AbstractLinearCode` to `AbstractCode`.\n\n> \n> Is this method required by the encoder/decoder framework?\n\nWell, `__call__` is a natural method for any code that is encodable, so it naturally fits to `AbstractCode`. Generally in Sage for a parent `P` then `P(e)` for some value `e` does one of two things (which abstractly is maybe the same thing):\n\n1. It \"coerces\" `e` into being something that can be considered to be in `P`. So you convert `e` into the shape objects in `P` have. E.g. if `F` is a field then `F(1)` gives you the 1-element of that field.\n\n2. It uses `e` as an input to create an object in `P`. E.g. if `P` is a polynomial ring then `P[1,2,3]` creates the polynomial `1 + 2*x + 3*x^2`.\n\nIf `P` is some linear code `C`, then Item 1 is supported in the sense that if `e` is a vector in the ambient space of `C`, then `C(e)` returns `e` if `e` is in `C`, otherwise it throws an error. Not the most useful function perhaps, but it follows this coercioen convention of [SageMath](../wiki/SageMath).\n\nItem 2, however, can naturally be considered to be encoding - after all, that's the canonical way you would \"construct\" a codeword. Due to the convention that the default encoder should always use `F[x]^k` as the message space, then if `e` is a vector of length `k` then `C(e)` returns the encoding of `e` as a codeword.\n\nA funny (disturbing?) detail I never considered before is that if `C` is an `[n,n]` code, then the current implementation always uses Item 1, i.e. it doesn't encode.\n\nAnyway, this convention absolutely makes sense for any type of code I could think of. So, it should be on `AbstractCode`. For that to work, `ambient_space()` has to be on `AbstractCode` as well. But since we don't really want to force a representation of the ambient space (since it would be some clumsy cartesian product in the general case), then we should just leave it to subclasses to fill out.\n\nIn any case, it is a natural function to expect a code to have, i.e. if I was writing in a strongly typed language like Java or C#, then `AbstractCode` would be an interface, and I would require `ambient_space` to be a method that had to be implemented in subclasses.",
    "created_at": "2019-07-31T10:45:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436832",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@emes4](#comment:39):
> Replying to [@johanrosenkilde](#comment:37):
> > I propose adding a method `ambient_space` to `AbstractCode` which throws a `NotImplementedError`. It should be documented that it is recommended (but not required) to override this method. Then we can also move the `__call__` method of `AbstractLinearCode` to `AbstractCode`.

> 
> Is this method required by the encoder/decoder framework?

Well, `__call__` is a natural method for any code that is encodable, so it naturally fits to `AbstractCode`. Generally in Sage for a parent `P` then `P(e)` for some value `e` does one of two things (which abstractly is maybe the same thing):

1. It "coerces" `e` into being something that can be considered to be in `P`. So you convert `e` into the shape objects in `P` have. E.g. if `F` is a field then `F(1)` gives you the 1-element of that field.

2. It uses `e` as an input to create an object in `P`. E.g. if `P` is a polynomial ring then `P[1,2,3]` creates the polynomial `1 + 2*x + 3*x^2`.

If `P` is some linear code `C`, then Item 1 is supported in the sense that if `e` is a vector in the ambient space of `C`, then `C(e)` returns `e` if `e` is in `C`, otherwise it throws an error. Not the most useful function perhaps, but it follows this coercioen convention of [SageMath](../wiki/SageMath).

Item 2, however, can naturally be considered to be encoding - after all, that's the canonical way you would "construct" a codeword. Due to the convention that the default encoder should always use `F[x]^k` as the message space, then if `e` is a vector of length `k` then `C(e)` returns the encoding of `e` as a codeword.

A funny (disturbing?) detail I never considered before is that if `C` is an `[n,n]` code, then the current implementation always uses Item 1, i.e. it doesn't encode.

Anyway, this convention absolutely makes sense for any type of code I could think of. So, it should be on `AbstractCode`. For that to work, `ambient_space()` has to be on `AbstractCode` as well. But since we don't really want to force a representation of the ambient space (since it would be some clumsy cartesian product in the general case), then we should just leave it to subclasses to fill out.

In any case, it is a natural function to expect a code to have, i.e. if I was writing in a strongly typed language like Java or C#, then `AbstractCode` would be an interface, and I would require `ambient_space` to be a method that had to be implemented in subclasses.



---

archive/issue_comments_436833.json:
```json
{
    "body": "Changed commit from **[`9608a23`](https://github.com/sagemath/sagetrac-mirror/commit/9608a237aeabcaf56416bc26475a6b3c0433e6c0)** to **[`318b444`](https://github.com/sagemath/sagetrac-mirror/commit/318b4441b0e2f7ee1b1275f733e5f43b64b3669e)**",
    "created_at": "2019-07-31T11:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436833",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9608a23`](https://github.com/sagemath/sagetrac-mirror/commit/9608a237aeabcaf56416bc26475a6b3c0433e6c0)** to **[`318b444`](https://github.com/sagemath/sagetrac-mirror/commit/318b4441b0e2f7ee1b1275f733e5f43b64b3669e)**



---

archive/issue_comments_436834.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8706ee65c325376811df57fed19e9ed5851b9c2\">c8706ee</a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb35c2f7493c84f76981843be82d09aa9ebc4962\">fb35c2f</a></td><td><code>Fixes responding to reviewer comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b95c1dfc649c6be392ce37499d28d386843b11a\">0b95c1d</a></td><td><code>Manual table for codes_catalog.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1bca13c26ef9a7a79d84a2adb8924cc7074ed753\">1bca13c</a></td><td><code>Merge branch 'u/jsrn/27634'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6bf9f1e816c3e128498ea92f59581bf009d0f085\">6bf9f1e</a></td><td><code>Remove unwanted names under codes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24df329139c541b80a31b58bf6da8f4d1ea1cdc3\">24df329</a></td><td><code>A minor fix in the main document</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c7012bcbb524f86d43ddf5e30b8cf8718032254\">6c7012b</a></td><td><code>A pyflakes fix in linear_code.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c650b8aed9f43bc59fc2734ed70b11315490cb0f\">c650b8a</a></td><td><code>Rename channel_constructions.py and goppa.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5230b194366076edbad497dff8d866ba5428f7a2\">5230b19</a></td><td><code>Merge #27634</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/318b4441b0e2f7ee1b1275f733e5f43b64b3669e\">318b444</a></td><td><code>Module inheritance. Ambient_space and `__call__` changes.</code></td></tr></table>\n",
    "created_at": "2019-07-31T11:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436834",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8706ee65c325376811df57fed19e9ed5851b9c2">c8706ee</a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb35c2f7493c84f76981843be82d09aa9ebc4962">fb35c2f</a></td><td><code>Fixes responding to reviewer comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b95c1dfc649c6be392ce37499d28d386843b11a">0b95c1d</a></td><td><code>Manual table for codes_catalog.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1bca13c26ef9a7a79d84a2adb8924cc7074ed753">1bca13c</a></td><td><code>Merge branch 'u/jsrn/27634'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6bf9f1e816c3e128498ea92f59581bf009d0f085">6bf9f1e</a></td><td><code>Remove unwanted names under codes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24df329139c541b80a31b58bf6da8f4d1ea1cdc3">24df329</a></td><td><code>A minor fix in the main document</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c7012bcbb524f86d43ddf5e30b8cf8718032254">6c7012b</a></td><td><code>A pyflakes fix in linear_code.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c650b8aed9f43bc59fc2734ed70b11315490cb0f">c650b8a</a></td><td><code>Rename channel_constructions.py and goppa.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5230b194366076edbad497dff8d866ba5428f7a2">5230b19</a></td><td><code>Merge #27634</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/318b4441b0e2f7ee1b1275f733e5f43b64b3669e">318b444</a></td><td><code>Module inheritance. Ambient_space and `__call__` changes.</code></td></tr></table>




---

archive/issue_comments_436835.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@johanrosenkilde](#comment:29):\n> Replying to [@emes4](#comment:28):\n> > Replying to [@johanrosenkilde](#comment:26):\n> > > I haven't checked out your ticket and compiled, but this is the list of methods I get with `dir(C)` on a freshly created `LinearCode` `C` on Sage 8.8.rc3:\n\n> > \n> > Without inheriting from `Module`, a fresh `LinearCode` on this branch (Sage 8.9.beta4) has more methods than your list, but is missing these: `['base_extend', 'change_ring', 'endomorphism_ring']`. \n\n> \n> None of those methods seem to do anything useful, and they don't even make much sense for a (linear) code to begin with. `endomorphism_ring` is particularly unfortunate, \n\nendomorphism ring provides maps onto subcodes, which does not look as totally useless to me.\n\nchanging the ring (taking  a bigger ring) produces an additive code.",
    "created_at": "2019-07-31T11:35:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436835",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@johanrosenkilde](#comment:29):
> Replying to [@emes4](#comment:28):
> > Replying to [@johanrosenkilde](#comment:26):
> > > I haven't checked out your ticket and compiled, but this is the list of methods I get with `dir(C)` on a freshly created `LinearCode` `C` on Sage 8.8.rc3:

> > 
> > Without inheriting from `Module`, a fresh `LinearCode` on this branch (Sage 8.9.beta4) has more methods than your list, but is missing these: `['base_extend', 'change_ring', 'endomorphism_ring']`. 

> 
> None of those methods seem to do anything useful, and they don't even make much sense for a (linear) code to begin with. `endomorphism_ring` is particularly unfortunate, 

endomorphism ring provides maps onto subcodes, which does not look as totally useless to me.

changing the ring (taking  a bigger ring) produces an additive code.



---

archive/issue_comments_436836.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@johanrosenkilde](#comment:40):\n> In any case, it is a natural function to expect a code to have, i.e. if I was writing in a strongly typed language like Java or C#, then `AbstractCode` would be an interface, and I would require `ambient_space` to be a method that had to be implemented in subclasses.\n\nThank you for the explanation, makes things much clearer!\n\nI did all the changes, namely added `Module` to inheritance of `AbstractLinearCode`, merged #27634, added `ambient_space` method to `AbstractCode` with a recommendation to implement it, and moved `__call__` from `AbstractLinearCode` to `AbstractCode`.",
    "created_at": "2019-07-31T12:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436836",
    "user": "https://github.com/emes4"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@johanrosenkilde](#comment:40):
> In any case, it is a natural function to expect a code to have, i.e. if I was writing in a strongly typed language like Java or C#, then `AbstractCode` would be an interface, and I would require `ambient_space` to be a method that had to be implemented in subclasses.

Thank you for the explanation, makes things much clearer!

I did all the changes, namely added `Module` to inheritance of `AbstractLinearCode`, merged #27634, added `ambient_space` method to `AbstractCode` with a recommendation to implement it, and moved `__call__` from `AbstractLinearCode` to `AbstractCode`.



---

archive/issue_events_384949.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-07-31T12:08:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384949"
}
```



---

archive/issue_events_384950.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-07-31T12:08:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384950"
}
```



---

archive/issue_comments_436837.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@dimpase](#comment:42):\n> endomorphism ring provides maps onto subcodes, which does not look as totally useless to me.\n\nQuite true. I have never seen people study it, but probably some people have. And it does have the same type of meaning as `automorphism_group_gens`. It's just inconsistent and unfortunate that that method is not called `automorphism_ring` and wraps the returned generators in some appropriate algebraic object.\n\n> changing the ring (taking  a bigger ring) produces an additive code. \n\nOK, I'm not familiar with those. But of course you can take a linear code over some field `F_q` and then consider its generator matrix as part of `F_{q^m}` and look at the code there. That would even be trivial to implement (but does not belong in this ticket).",
    "created_at": "2019-07-31T12:23:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436837",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@dimpase](#comment:42):
> endomorphism ring provides maps onto subcodes, which does not look as totally useless to me.

Quite true. I have never seen people study it, but probably some people have. And it does have the same type of meaning as `automorphism_group_gens`. It's just inconsistent and unfortunate that that method is not called `automorphism_ring` and wraps the returned generators in some appropriate algebraic object.

> changing the ring (taking  a bigger ring) produces an additive code. 

OK, I'm not familiar with those. But of course you can take a linear code over some field `F_q` and then consider its generator matrix as part of `F_{q^m}` and look at the code there. That would even be trivial to implement (but does not belong in this ticket).



---

archive/issue_comments_436838.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@emes4](#comment:43):\n> I did all the changes, namely added `Module` to inheritance of `AbstractLinearCode`, merged #27634, added `ambient_space` method to `AbstractCode` with a recommendation to implement it, and moved `__call__` from `AbstractLinearCode` to `AbstractCode`.\n\nAwesome! I'm happy now :-) Dima, your turn ;-)",
    "created_at": "2019-07-31T12:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436838",
    "user": "https://github.com/johanrosenkilde"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@emes4](#comment:43):
> I did all the changes, namely added `Module` to inheritance of `AbstractLinearCode`, merged #27634, added `ambient_space` method to `AbstractCode` with a recommendation to implement it, and moved `__call__` from `AbstractLinearCode` to `AbstractCode`.

Awesome! I'm happy now :-) Dima, your turn ;-)



---

archive/issue_comments_436839.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI am getting (on the branch of the ticket)\n\n```\nsage -t --warn-long 47.5 src/doc/en/thematic_tutorials/structures_in_coding_theory.rst\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/structures_in_coding_theory.rst\", line 450, in doc.en.thematic_tutorials.structures_in_coding_theory\nFailed example:\n    from sage.coding.channel_constructions import Channel\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dimpase/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dimpase/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest doc.en.thematic_tutorials.structures_in_coding_theory[0]>\", line 1, in <module>\n        from sage.coding.channel_constructions import Channel\n    ImportError: No module named channel_constructions\n**********************************************************************\nFile \"src/doc/en/thematic_tutorials/structures_in_coding_theory.rst\", line 451, in doc.en.thematic_tutorials.structures_in_coding_theory\nFailed example:\n    class BinaryStaticErrorRateChannel(Channel):\n        def __init__(self, space, number_errors):\n            if space.base_ring() is not GF(2):\n                raise ValueError(\"Provided space must be a vector space over GF(2)\")\n            if number_errors > space.dimension():\n                raise ValueErrors(\"number_errors cannot be bigger than input space's dimension\")\n            super(BinaryStaticErrorRateChannel, self).__init__(space, space)\n            self._number_errors = number_errors\nException raised:\n    Traceback (most recent call last):\n      File \"/home/dimpase/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/dimpase/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1105, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest doc.en.thematic_tutorials.structures_in_coding_theory[1]>\", line 1, in <module>\n        class BinaryStaticErrorRateChannel(Channel):\n    NameError: name 'Channel' is not defined\n**********************************************************************\n1 item had failures:\n   2 of  45 in doc.en.thematic_tutorials.structures_in_coding_theory\n    [28 tests, 2 failures, 0.11 s]\n```",
    "created_at": "2019-08-07T09:33:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436839",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

I am getting (on the branch of the ticket)

```
sage -t --warn-long 47.5 src/doc/en/thematic_tutorials/structures_in_coding_theory.rst
**********************************************************************
File "src/doc/en/thematic_tutorials/structures_in_coding_theory.rst", line 450, in doc.en.thematic_tutorials.structures_in_coding_theory
Failed example:
    from sage.coding.channel_constructions import Channel
Exception raised:
    Traceback (most recent call last):
      File "/home/dimpase/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dimpase/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.structures_in_coding_theory[0]>", line 1, in <module>
        from sage.coding.channel_constructions import Channel
    ImportError: No module named channel_constructions
**********************************************************************
File "src/doc/en/thematic_tutorials/structures_in_coding_theory.rst", line 451, in doc.en.thematic_tutorials.structures_in_coding_theory
Failed example:
    class BinaryStaticErrorRateChannel(Channel):
        def __init__(self, space, number_errors):
            if space.base_ring() is not GF(2):
                raise ValueError("Provided space must be a vector space over GF(2)")
            if number_errors > space.dimension():
                raise ValueErrors("number_errors cannot be bigger than input space's dimension")
            super(BinaryStaticErrorRateChannel, self).__init__(space, space)
            self._number_errors = number_errors
Exception raised:
    Traceback (most recent call last):
      File "/home/dimpase/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/dimpase/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1105, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.structures_in_coding_theory[1]>", line 1, in <module>
        class BinaryStaticErrorRateChannel(Channel):
    NameError: name 'Channel' is not defined
**********************************************************************
1 item had failures:
   2 of  45 in doc.en.thematic_tutorials.structures_in_coding_theory
    [28 tests, 2 failures, 0.11 s]
```



---

archive/issue_events_384951.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-08-07T09:33:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384951"
}
```



---

archive/issue_events_384952.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-08-07T09:33:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384952"
}
```



---

archive/issue_comments_436840.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nthere is also a typo, please apply the following:\n\n```\n--- a/src/sage/coding/abstract_code.py\n+++ b/src/sage/coding/abstract_code.py\n@@ -353,7 +353,7 @@ class AbstractCode(Parent):\n         r\"\"\"\n         Return an error stating ``ambient_space`` of ``self`` is not implemented.\n \n-        This method is required by the :method:`__call__`.\n+        This method is required by the :meth:`__call__`.\n \n         EXAMPLES::\n \n```",
    "created_at": "2019-08-07T12:35:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436840",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

there is also a typo, please apply the following:

```
--- a/src/sage/coding/abstract_code.py
+++ b/src/sage/coding/abstract_code.py
@@ -353,7 +353,7 @@ class AbstractCode(Parent):
         r"""
         Return an error stating ``ambient_space`` of ``self`` is not implemented.
 
-        This method is required by the :method:`__call__`.
+        This method is required by the :meth:`__call__`.
 
         EXAMPLES::
 
```



---

archive/issue_comments_436841.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3996761941a54663d70ca79111e9373cfbdbcd0f\">3996761</a></td><td><code>Merge commit '8b01cc5df9e1508250976b08b4d2212aecb02927' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4582a31a040ac3dcdeb7f5d05affe5032979f72\">a4582a3</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dbc8789f4ef1e173987df7ba6e13769eacff2ac\">4dbc878</a></td><td><code>documentation fix</code></td></tr></table>\n",
    "created_at": "2019-08-13T17:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436841",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3996761941a54663d70ca79111e9373cfbdbcd0f">3996761</a></td><td><code>Merge commit '8b01cc5df9e1508250976b08b4d2212aecb02927' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4582a31a040ac3dcdeb7f5d05affe5032979f72">a4582a3</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into t/28073/abstract_code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dbc8789f4ef1e173987df7ba6e13769eacff2ac">4dbc878</a></td><td><code>documentation fix</code></td></tr></table>




---

archive/issue_comments_436842.json:
```json
{
    "body": "Changed commit from **[`318b444`](https://github.com/sagemath/sagetrac-mirror/commit/318b4441b0e2f7ee1b1275f733e5f43b64b3669e)** to **[`4dbc878`](https://github.com/sagemath/sagetrac-mirror/commit/4dbc8789f4ef1e173987df7ba6e13769eacff2ac)**",
    "created_at": "2019-08-13T17:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436842",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`318b444`](https://github.com/sagemath/sagetrac-mirror/commit/318b4441b0e2f7ee1b1275f733e5f43b64b3669e)** to **[`4dbc878`](https://github.com/sagemath/sagetrac-mirror/commit/4dbc8789f4ef1e173987df7ba6e13769eacff2ac)**



---

archive/issue_comments_436843.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@dimpase](#comment:47):\n> I am getting (on the branch of the ticket)\n\nThis was an error coming from #27634, [#27634 comment:40](https://github.com/sagemath/sage/issues/27634#comment:40). It was fixed on the ticket, I merged the updated branch. \n\nI fixed the small documentation mistake.\n\nI ran the whole test suite `make ptestlong` and there were no errors.",
    "created_at": "2019-08-13T17:15:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436843",
    "user": "https://github.com/emes4"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@dimpase](#comment:47):
> I am getting (on the branch of the ticket)

This was an error coming from #27634, [#27634 comment:40](https://github.com/sagemath/sage/issues/27634#comment:40). It was fixed on the ticket, I merged the updated branch. 

I fixed the small documentation mistake.

I ran the whole test suite `make ptestlong` and there were no errors.



---

archive/issue_events_384953.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-08-13T17:15:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384953"
}
```



---

archive/issue_events_384954.json:
```json
{
    "actor": "https://github.com/emes4",
    "created_at": "2019-08-13T17:15:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384954"
}
```



---

archive/issue_comments_436844.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2019-09-08T14:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436844",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_436845.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nlooks good",
    "created_at": "2019-09-08T14:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436845",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:52" align="right">comment:52</div>

looks good



---

archive/issue_events_384955.json:
```json
{
    "actor": "https://github.com/Adurand8",
    "created_at": "2019-09-24T13:15:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384955"
}
```



---

archive/issue_events_384956.json:
```json
{
    "actor": "https://github.com/Adurand8",
    "created_at": "2019-09-24T13:15:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384956"
}
```



---

archive/issue_comments_436846.json:
```json
{
    "body": "Changed reviewer from **Dima Pasechnik** to **Dima Pasechnik, gh-Adurand8**",
    "created_at": "2019-09-24T13:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436846",
    "user": "https://github.com/Adurand8"
}
```

Changed reviewer from **Dima Pasechnik** to **Dima Pasechnik, gh-Adurand8**



---

archive/issue_comments_436847.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nreviewer names should be real  names.",
    "created_at": "2019-09-24T14:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436847",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">comment:56</div>

reviewer names should be real  names.



---

archive/issue_events_384957.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-24T14:22:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384957"
}
```



---

archive/issue_events_384958.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-09-24T14:22:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384958"
}
```



---

archive/issue_comments_436848.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nSorry, I missed this information. It's corrected !",
    "created_at": "2019-09-25T06:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436848",
    "user": "https://github.com/Adurand8"
}
```

<div id="comment:57" align="right">comment:57</div>

Sorry, I missed this information. It's corrected !



---

archive/issue_comments_436849.json:
```json
{
    "body": "Changed reviewer from **Dima Pasechnik, gh-Adurand8** to **Dima Pasechnik, Durand Amaury**",
    "created_at": "2019-09-25T06:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436849",
    "user": "https://github.com/Adurand8"
}
```

Changed reviewer from **Dima Pasechnik, gh-Adurand8** to **Dima Pasechnik, Durand Amaury**



---

archive/issue_events_384959.json:
```json
{
    "actor": "https://github.com/Adurand8",
    "created_at": "2019-09-25T06:23:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384959"
}
```



---

archive/issue_events_384960.json:
```json
{
    "actor": "https://github.com/Adurand8",
    "created_at": "2019-09-25T06:23:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384960"
}
```



---

archive/issue_events_384961.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-09-30T08:12:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384961"
}
```



---

archive/issue_events_384962.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-09-30T08:12:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384962"
}
```



---

archive/issue_comments_436850.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nmoving milestone to 9.0 (after release of 8.9)",
    "created_at": "2019-09-30T08:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436850",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:58" align="right">comment:58</div>

moving milestone to 9.0 (after release of 8.9)



---

archive/issue_events_384963.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-03T17:58:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384963"
}
```



---

archive/issue_events_384964.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fa0853f57e41e6eb0000b19be71eb2c2c0b72171",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-10-03T17:58:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28073#event-384964"
}
```



---

archive/issue_comments_436851.json:
```json
{
    "body": "Changed branch from **[u/gh-emes4/coding/abstract_code](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-emes4/coding/abstract_code)** to **[`4dbc878`](https://github.com/sagemath/sagetrac-mirror/commit/4dbc8789f4ef1e173987df7ba6e13769eacff2ac)**",
    "created_at": "2019-10-03T17:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28073",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28073#issuecomment-436851",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-emes4/coding/abstract_code](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-emes4/coding/abstract_code)** to **[`4dbc878`](https://github.com/sagemath/sagetrac-mirror/commit/4dbc8789f4ef1e173987df7ba6e13769eacff2ac)**
