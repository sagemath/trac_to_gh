# Issue 28429: Add the classical construction of the 120-cell

archive/issues_028192.json:
```json
{
    "assignees": [],
    "body": "Ticket #27760 introduced the 120-cell in the library, but it does not give the classical construction of Coxeter form 1969 available on Wikipedia:\n\nhttps://en.wikipedia.org/wiki/120-cell\n\nThis ticket provides this classical construction which is much faster since it uses only a degree 2 extension of the rationals.\n\nDepends on #27760\n\nCC:  @w-bruns @jplab @mkoeppe @videlec\n\nKeywords: **polytopes, non-rational, normaliz**\n\nBranch/Commit: **[`9464179`](https://github.com/sagemath/sagetrac-mirror/commit/94641796685d7bbf0b8dbf14f67898cf3f728119)**\n\nReviewer: **Jonathan Kliem**\n\nAuthor: **Jean-Philippe Labb\u00e9**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28429_\n\n",
    "closed_at": "2019-10-31T22:40:49Z",
    "created_at": "2019-08-30T10:08:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add the classical construction of the 120-cell",
    "type": "issue",
    "updated_at": "2019-10-31T22:40:49Z",
    "url": "https://github.com/sagemath/sage/issues/28429",
    "user": "https://github.com/jplab"
}
```
Ticket #27760 introduced the 120-cell in the library, but it does not give the classical construction of Coxeter form 1969 available on Wikipedia:

https://en.wikipedia.org/wiki/120-cell

This ticket provides this classical construction which is much faster since it uses only a degree 2 extension of the rationals.

Depends on #27760

CC:  @w-bruns @jplab @mkoeppe @videlec

Keywords: **polytopes, non-rational, normaliz**

Branch/Commit: **[`9464179`](https://github.com/sagemath/sagetrac-mirror/commit/94641796685d7bbf0b8dbf14f67898cf3f728119)**

Reviewer: **Jonathan Kliem**

Author: **Jean-Philippe Labbé**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/28429_





---

archive/issue_events_387155.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-08-30T10:08:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387155"
}
```



---

archive/issue_events_387156.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-08-30T10:08:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387156"
}
```



---

archive/issue_events_387157.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-08-30T10:08:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387157"
}
```



---

archive/issue_events_387158.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-08-30T10:08:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387158"
}
```



---

archive/issue_comments_442805.json:
```json
{
    "body": "Branch: **[u/jipilab/classic120](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/classic120)**",
    "created_at": "2019-08-30T10:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442805",
    "user": "https://github.com/jplab"
}
```

Branch: **[u/jipilab/classic120](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/classic120)**



---

archive/issue_events_387159.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-08-30T10:10:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387159"
}
```



---

archive/issue_comments_442806.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c5b8d985af88ce11380af113c83f7358c7eaa67\"><code>0c5b8d9</code></a></td><td><code>Fix py3 code and tests for Sage8.9beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d66f7e2092a11cebcd23c074e67c5ae078a0230b\"><code>d66f7e2</code></a></td><td><code>pep8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6a545236166505c1094ca49500e6f2ba85b66ac\"><code>a6a5452</code></a></td><td><code>fixed some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71fbfdf8df8a66fbe7d7a9431be7097f1006a2ae\"><code>71fbfdf</code></a></td><td><code>Fixed a test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4260a6749d6ccd7e6a30266dfc1fbbbd00c91c3\"><code>d4260a6</code></a></td><td><code>trivial doc fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95d6bdad88dac7435d6a1df890a8420fd70c9e47\"><code>95d6bda</code></a></td><td><code>fix coding in library</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5971228039a778b2ad7bc697ead1e30215f8c76c\"><code>5971228</code></a></td><td><code>Added 'polytope' and fixed sum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1ad959ee22b50880c56165c4a140f7861b92e1d\"><code>a1ad959</code></a></td><td><code>Made a doctest not tested due to time</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc1a6ab69c73e33d31bc161b487f909e33cd7921\"><code>cc1a6ab</code></a></td><td><code>Merge branch 'develop' into h4_polytopes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14b49182ed3bebd4c5b8cf19fca52d1400ed1888\"><code>14b4918</code></a></td><td><code>Added classical construction of 120-cell</code></td></tr></table>\n",
    "created_at": "2019-08-30T10:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442806",
    "user": "https://github.com/jplab"
}
```

<div id="comment:1" align="right">comment:1</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c5b8d985af88ce11380af113c83f7358c7eaa67"><code>0c5b8d9</code></a></td><td><code>Fix py3 code and tests for Sage8.9beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d66f7e2092a11cebcd23c074e67c5ae078a0230b"><code>d66f7e2</code></a></td><td><code>pep8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6a545236166505c1094ca49500e6f2ba85b66ac"><code>a6a5452</code></a></td><td><code>fixed some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71fbfdf8df8a66fbe7d7a9431be7097f1006a2ae"><code>71fbfdf</code></a></td><td><code>Fixed a test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4260a6749d6ccd7e6a30266dfc1fbbbd00c91c3"><code>d4260a6</code></a></td><td><code>trivial doc fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95d6bdad88dac7435d6a1df890a8420fd70c9e47"><code>95d6bda</code></a></td><td><code>fix coding in library</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5971228039a778b2ad7bc697ead1e30215f8c76c"><code>5971228</code></a></td><td><code>Added 'polytope' and fixed sum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1ad959ee22b50880c56165c4a140f7861b92e1d"><code>a1ad959</code></a></td><td><code>Made a doctest not tested due to time</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc1a6ab69c73e33d31bc161b487f909e33cd7921"><code>cc1a6ab</code></a></td><td><code>Merge branch 'develop' into h4_polytopes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14b49182ed3bebd4c5b8cf19fca52d1400ed1888"><code>14b4918</code></a></td><td><code>Added classical construction of 120-cell</code></td></tr></table>




---

archive/issue_comments_442807.json:
```json
{
    "body": "Commit: **[`14b4918`](https://github.com/sagemath/sagetrac-mirror/commit/14b49182ed3bebd4c5b8cf19fca52d1400ed1888)**",
    "created_at": "2019-08-30T10:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442807",
    "user": "https://github.com/jplab"
}
```

Commit: **[`14b4918`](https://github.com/sagemath/sagetrac-mirror/commit/14b49182ed3bebd4c5b8cf19fca52d1400ed1888)**



---

archive/issue_comments_442808.json:
```json
{
    "body": "Dependencies: **#27760**",
    "created_at": "2019-08-30T10:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442808",
    "user": "https://github.com/jplab"
}
```

Dependencies: **#27760**



---

archive/issue_comments_442809.json:
```json
{
    "body": "Changed commit from **[`14b4918`](https://github.com/sagemath/sagetrac-mirror/commit/14b49182ed3bebd4c5b8cf19fca52d1400ed1888)** to **[`3ee9569`](https://github.com/sagemath/sagetrac-mirror/commit/3ee9569820fbd619223498a43efa19013e27076c)**",
    "created_at": "2019-09-01T13:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442809",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`14b4918`](https://github.com/sagemath/sagetrac-mirror/commit/14b49182ed3bebd4c5b8cf19fca52d1400ed1888)** to **[`3ee9569`](https://github.com/sagemath/sagetrac-mirror/commit/3ee9569820fbd619223498a43efa19013e27076c)**



---

archive/issue_comments_442810.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd1fd21ddaaafde8329f72d4cf5346ca62656429\"><code>bd1fd21</code></a></td><td><code>fix details</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ee9569820fbd619223498a43efa19013e27076c\"><code>3ee9569</code></a></td><td><code>Merge branch 'public/uniform_H4_polytopes' of trac.sagemath.org:sage into h4_polytopes</code></td></tr></table>\n",
    "created_at": "2019-09-01T13:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442810",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd1fd21ddaaafde8329f72d4cf5346ca62656429"><code>bd1fd21</code></a></td><td><code>fix details</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ee9569820fbd619223498a43efa19013e27076c"><code>3ee9569</code></a></td><td><code>Merge branch 'public/uniform_H4_polytopes' of trac.sagemath.org:sage into h4_polytopes</code></td></tr></table>




---

archive/issue_comments_442811.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI merged the missing commit from #27760 to get a clean bot test.",
    "created_at": "2019-09-01T13:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442811",
    "user": "https://github.com/jplab"
}
```

<div id="comment:3" align="right">comment:3</div>

I merged the missing commit from #27760 to get a clean bot test.



---

archive/issue_comments_442812.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI think this can be simplified:\n\n```diff\n-list(set([tuple(p) for p in flatten([Permutations(list(c)).list() for c in cp])]))\n+list(set([tuple(p) for c in cp for p in Permutations(list(c))]))\n```\nso there are less transient (large) lists. Also, you should be able to do\n\n```python\nverts += itertools.chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)\n```\nsince `+=` for lists works for iterators and you might as well pass a iterable to `from_iterable` to avoid storing the entire list in memory (twice). Next, I would use latex formatting here: <code>of type \\`H_4\\`::</code>. Finally, is it reasonable to do this test with the backend that comes standard with Sage? In that same vein, how long does the normaliz test take?",
    "created_at": "2019-09-03T00:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442812",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

I think this can be simplified:

```diff
-list(set([tuple(p) for p in flatten([Permutations(list(c)).list() for c in cp])]))
+list(set([tuple(p) for c in cp for p in Permutations(list(c))]))
```
so there are less transient (large) lists. Also, you should be able to do

```python
verts += itertools.chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)
```
since `+=` for lists works for iterators and you might as well pass a iterable to `from_iterable` to avoid storing the entire list in memory (twice). Next, I would use latex formatting here: <code>of type \`H_4\`::</code>. Finally, is it reasonable to do this test with the backend that comes standard with Sage? In that same vein, how long does the normaliz test take?



---

archive/issue_comments_442813.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHi Travis,\n\nThanks for the feedback, I'll do the changes.\n\nThe new implementation with normaliz takes less than 1 sec. Before, it was taking much longer that's why it was tagged not tested.\n\nNow, for the default `'field'` backend, I did not test, but I expect it to take a long while. But I'll test it and write it here for the record.",
    "created_at": "2019-09-03T18:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442813",
    "user": "https://github.com/jplab"
}
```

<div id="comment:5" align="right">comment:5</div>

Hi Travis,

Thanks for the feedback, I'll do the changes.

The new implementation with normaliz takes less than 1 sec. Before, it was taking much longer that's why it was tagged not tested.

Now, for the default `'field'` backend, I did not test, but I expect it to take a long while. But I'll test it and write it here for the record.



---

archive/issue_comments_442814.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nA few comments:\n\n- Most importantly `exact=False` does not work. `base_ring` is not defined. Also you don't define `sqrt5`. On that not, it makes sense to define `phi` outside the `if ... else` environment.\n\n- \n\n```diff\n-            sage: polytopes.one_hundred_twenty_cell(backend='normaliz',construction='as_permutahedron') # not tested - long time\n+            sage: polytopes.one_hundred_twenty_cell(backend='normaliz', construction='as_permutahedron') # not tested - long time\n```\n\n- \n\n```\n# The 64 permutations of [\u00b12,\u00b12,0,0] (the \u00b1 are independant)\n```\n  I count 24.\n\n- I somehow don't like the construction with the Cartesian product. In the comments its all so easy and then I have to think about, why this is exactly true.\n\n  Couldn't we make a use of `product` from `itertools`? This creates all possible signs and then we just multiply (elementwise) all permutations:\n\n  ```\n  verts = [[sign[i]*perm[i] for i in range(4)] for sign in product(*[[1,-1]]*4) for perm in verts_without_sign]\n```\n\nFor the record:\n\n```\nsage: %time polytopes.one_hundred_twenty_cell(backend='normaliz')\nCPU times: user 1.04 s, sys: 8 ms, total: 1.05 s\nWall time: 255 ms\nA 4-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^4 defined as the convex hull of 600 vertices\nsage: %time polytopes.one_hundred_twenty_cell(backend='field')\nCPU times: user 18.1 s, sys: 28 ms, total: 18.2 s\nWall time: 18.2 s\nA 4-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^4 defined as the convex hull of 600 vertices\nsage: %time polytopes.one_hundred_twenty_cell(backend='normaliz',construction='as_permutahedron')\nCPU times: user 17.2 s, sys: 52 ms, total: 17.2 s\nWall time: 15.5 s\n```",
    "created_at": "2019-09-05T19:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442814",
    "user": "https://github.com/kliem"
}
```

<div id="comment:6" align="right">comment:6</div>

A few comments:

- Most importantly `exact=False` does not work. `base_ring` is not defined. Also you don't define `sqrt5`. On that not, it makes sense to define `phi` outside the `if ... else` environment.

- 

```diff
-            sage: polytopes.one_hundred_twenty_cell(backend='normaliz',construction='as_permutahedron') # not tested - long time
+            sage: polytopes.one_hundred_twenty_cell(backend='normaliz', construction='as_permutahedron') # not tested - long time
```

- 

```
# The 64 permutations of [±2,±2,0,0] (the ± are independant)
```
  I count 24.

- I somehow don't like the construction with the Cartesian product. In the comments its all so easy and then I have to think about, why this is exactly true.

  Couldn't we make a use of `product` from `itertools`? This creates all possible signs and then we just multiply (elementwise) all permutations:

  ```
  verts = [[sign[i]*perm[i] for i in range(4)] for sign in product(*[[1,-1]]*4) for perm in verts_without_sign]
```

For the record:

```
sage: %time polytopes.one_hundred_twenty_cell(backend='normaliz')
CPU times: user 1.04 s, sys: 8 ms, total: 1.05 s
Wall time: 255 ms
A 4-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^4 defined as the convex hull of 600 vertices
sage: %time polytopes.one_hundred_twenty_cell(backend='field')
CPU times: user 18.1 s, sys: 28 ms, total: 18.2 s
Wall time: 18.2 s
A 4-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?)^4 defined as the convex hull of 600 vertices
sage: %time polytopes.one_hundred_twenty_cell(backend='normaliz',construction='as_permutahedron')
CPU times: user 17.2 s, sys: 52 ms, total: 17.2 s
Wall time: 15.5 s
```



---

archive/issue_comments_442815.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@kliem](#comment:6):\n> - I somehow don't like the construction with the Cartesian product. In the comments its all so easy and then I have to think about, why this is exactly true.\n> \n>   Couldn't we make a use of `product` from `itertools`? This creates all possible signs and then we just multiply (elementwise) all permutations:\n> \n>   ```\n>   verts = [[sign[i]*perm[i] for i in range(4)] for sign in product(*[[1,-1]]*4) for perm in verts_without_sign]\n> ```\n\nI should have read the code better...\nDidn't know that cartesian product does exactly that. Just figured it's way to many lines for something that simple and then I stopped reading and tried to find a shorter solution.\n\nStill one could do all the signs with one line instead of doing it over and over again. Something like:\n\n```diff\n-            # The 64 permutations of [\u00b12,\u00b12,0,0] (the \u00b1 are independant)\n-            verts = Permutations([0,0,2,2]).list() + Permutations([0,0,-2,-2]).list() + Permutations([0,0,2,-2]).list()\n-\n-            # The 64 permutations of the following vectors:\n-            # [\u00b11,\u00b11,\u00b11,\u00b1sqrt(5)]\n-            # [\u00b11/phi^2,\u00b1phi,\u00b1phi,\u00b1phi]\n-            # [\u00b11/phi,\u00b11/phi,\u00b11/phi,\u00b1phi^2]\n-            from sage.categories.cartesian_product import cartesian_product\n-            from sage.misc.flatten import flatten\n-            full_perm_vectors = [[[1,-1],[1,-1],[1,-1],[-sqrt5,sqrt5]],\n-                                 [[phi_inv**2,-phi_inv**2],[phi,-phi],[phi,-phi],[-phi,phi]],\n-                                 [[phi_inv,-phi_inv],[phi_inv,-phi_inv],[phi_inv,-phi_inv],[-(phi**2),phi**2]]]\n-            for vect in full_perm_vectors:\n-                cp = cartesian_product(vect)\n-                # The cartesian product creates duplicates, so we reduce it:\n-                verts += list(set([tuple(p) for p in flatten([Permutations(list(c)).list() for c in cp])]))\n-\n-            # The 96 even permutations of [0,\u00b11/phi^2,\u00b11,\u00b1phi^2]\n-            # The 96 even permutations of [0,\u00b11/phi,\u00b1phi,\u00b1sqrt(5)]\n-            # The 192 even permutations of [\u00b11/phi,\u00b11,\u00b1phi,\u00b12]\n-            import itertools\n-            even_perm_vectors = [[[0],[phi_inv**2,-phi_inv**2],[1,-1],[-(phi**2),phi**2]],\n-                                 [[0],[phi_inv,-phi_inv],[phi,-phi],[-sqrt5,sqrt5]],\n-                                 [[phi_inv,-phi_inv],[1,-1],[phi,-phi],[-2,2]]]\n-            even_perm = AlternatingGroup(4)\n-            for vect in even_perm_vectors:\n-                cp = cartesian_product(vect)\n-                # The cartesian product creates duplicates, so we reduce it:\n-                verts += list(itertools.chain.from_iterable([[p(tuple(c)) for p in even_perm] for c in cp]))\n+            # The permutations of:\n+            # [2,2,0,0]\n+            # [1,1,1,sqrt(5)]\n+            # [1/phi^2,phi,phi,phi]\n+            # [1/phi,1/phi,1/phi,phi^2]\n+            vectors = [[2,2,0,0], [1,1,1,sqrt5], [1/phi**2,phi,phi,phi], [1/phi, 1/phi, 1/phi, phi**2]]\n+            verts_no_sign = list(x for vec in vectors for x in Permutations(vec).list())\n+\n+            # The even permutations of [0,1/phi^2,1,phi^2]\n+            # The even permutations of [0,1/phi,phi,sqrt(5)]\n+            # The even permutations of [1/phi,1,phi,2]\n+            import itertools\n+            vectors = [[0,1/phi**2,1,phi**2], [0,1/phi,phi,sqrt5], [1/phi,1,phi,2]]\n+            even_perm = AlternatingGroup(4)\n+            verts_no_sign += list(itertools.chain.from_iterable([[p(tuple(vec)) for p in even_perm] for vec in vectors]))\n+\n+            # Adding for each vertex copies in all orthants:\n+            # [1,1,1,sqrt(5)] -> [\u00b11,\u00b11,\u00b11,\u00b1sqrt(5)]\n+            from itertools import product\n+            verts = [[sign[i]*perm[i] for i in range(4)] for sign in product(*[[1,-1]]*4) for perm in verts_no_sign]\n```\n\nBut I guess it's up to taste, what one prefers.",
    "created_at": "2019-09-06T06:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442815",
    "user": "https://github.com/kliem"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@kliem](#comment:6):
> - I somehow don't like the construction with the Cartesian product. In the comments its all so easy and then I have to think about, why this is exactly true.
> 
>   Couldn't we make a use of `product` from `itertools`? This creates all possible signs and then we just multiply (elementwise) all permutations:
> 
>   ```
>   verts = [[sign[i]*perm[i] for i in range(4)] for sign in product(*[[1,-1]]*4) for perm in verts_without_sign]
> ```

I should have read the code better...
Didn't know that cartesian product does exactly that. Just figured it's way to many lines for something that simple and then I stopped reading and tried to find a shorter solution.

Still one could do all the signs with one line instead of doing it over and over again. Something like:

```diff
-            # The 64 permutations of [±2,±2,0,0] (the ± are independant)
-            verts = Permutations([0,0,2,2]).list() + Permutations([0,0,-2,-2]).list() + Permutations([0,0,2,-2]).list()
-
-            # The 64 permutations of the following vectors:
-            # [±1,±1,±1,±sqrt(5)]
-            # [±1/phi^2,±phi,±phi,±phi]
-            # [±1/phi,±1/phi,±1/phi,±phi^2]
-            from sage.categories.cartesian_product import cartesian_product
-            from sage.misc.flatten import flatten
-            full_perm_vectors = [[[1,-1],[1,-1],[1,-1],[-sqrt5,sqrt5]],
-                                 [[phi_inv**2,-phi_inv**2],[phi,-phi],[phi,-phi],[-phi,phi]],
-                                 [[phi_inv,-phi_inv],[phi_inv,-phi_inv],[phi_inv,-phi_inv],[-(phi**2),phi**2]]]
-            for vect in full_perm_vectors:
-                cp = cartesian_product(vect)
-                # The cartesian product creates duplicates, so we reduce it:
-                verts += list(set([tuple(p) for p in flatten([Permutations(list(c)).list() for c in cp])]))
-
-            # The 96 even permutations of [0,±1/phi^2,±1,±phi^2]
-            # The 96 even permutations of [0,±1/phi,±phi,±sqrt(5)]
-            # The 192 even permutations of [±1/phi,±1,±phi,±2]
-            import itertools
-            even_perm_vectors = [[[0],[phi_inv**2,-phi_inv**2],[1,-1],[-(phi**2),phi**2]],
-                                 [[0],[phi_inv,-phi_inv],[phi,-phi],[-sqrt5,sqrt5]],
-                                 [[phi_inv,-phi_inv],[1,-1],[phi,-phi],[-2,2]]]
-            even_perm = AlternatingGroup(4)
-            for vect in even_perm_vectors:
-                cp = cartesian_product(vect)
-                # The cartesian product creates duplicates, so we reduce it:
-                verts += list(itertools.chain.from_iterable([[p(tuple(c)) for p in even_perm] for c in cp]))
+            # The permutations of:
+            # [2,2,0,0]
+            # [1,1,1,sqrt(5)]
+            # [1/phi^2,phi,phi,phi]
+            # [1/phi,1/phi,1/phi,phi^2]
+            vectors = [[2,2,0,0], [1,1,1,sqrt5], [1/phi**2,phi,phi,phi], [1/phi, 1/phi, 1/phi, phi**2]]
+            verts_no_sign = list(x for vec in vectors for x in Permutations(vec).list())
+
+            # The even permutations of [0,1/phi^2,1,phi^2]
+            # The even permutations of [0,1/phi,phi,sqrt(5)]
+            # The even permutations of [1/phi,1,phi,2]
+            import itertools
+            vectors = [[0,1/phi**2,1,phi**2], [0,1/phi,phi,sqrt5], [1/phi,1,phi,2]]
+            even_perm = AlternatingGroup(4)
+            verts_no_sign += list(itertools.chain.from_iterable([[p(tuple(vec)) for p in even_perm] for vec in vectors]))
+
+            # Adding for each vertex copies in all orthants:
+            # [1,1,1,sqrt(5)] -> [±1,±1,±1,±sqrt(5)]
+            from itertools import product
+            verts = [[sign[i]*perm[i] for i in range(4)] for sign in product(*[[1,-1]]*4) for perm in verts_no_sign]
```

But I guess it's up to taste, what one prefers.



---

archive/issue_events_387160.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-09-14T18:16:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387160"
}
```



---

archive/issue_events_387161.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-09-14T18:16:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387161"
}
```



---

archive/issue_comments_442816.json:
```json
{
    "body": "Changed commit from **[`3ee9569`](https://github.com/sagemath/sagetrac-mirror/commit/3ee9569820fbd619223498a43efa19013e27076c)** to **[`7defa3c`](https://github.com/sagemath/sagetrac-mirror/commit/7defa3c99e618c5c8820b107ff73f792e54a360d)**",
    "created_at": "2019-10-24T11:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442816",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3ee9569`](https://github.com/sagemath/sagetrac-mirror/commit/3ee9569820fbd619223498a43efa19013e27076c)** to **[`7defa3c`](https://github.com/sagemath/sagetrac-mirror/commit/7defa3c99e618c5c8820b107ff73f792e54a360d)**



---

archive/issue_comments_442817.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f1525568fc59b79839efba779fb343cd21e60d1\"><code>2f15255</code></a></td><td><code>Merge branch 'u/jipilab/classic120' into sage 9.0.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7defa3c99e618c5c8820b107ff73f792e54a360d\"><code>7defa3c</code></a></td><td><code>fixed the construction</code></td></tr></table>\n",
    "created_at": "2019-10-24T11:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442817",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f1525568fc59b79839efba779fb343cd21e60d1"><code>2f15255</code></a></td><td><code>Merge branch 'u/jipilab/classic120' into sage 9.0.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7defa3c99e618c5c8820b107ff73f792e54a360d"><code>7defa3c</code></a></td><td><code>fixed the construction</code></td></tr></table>




---

archive/issue_comments_442818.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI did the changes. I decided to keep the construction as is.\n\nI added a raise ValueError if one tries to construct it with `RDF` as cdd returns a numerical inconsistency error.",
    "created_at": "2019-10-24T11:38:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442818",
    "user": "https://github.com/jplab"
}
```

<div id="comment:10" align="right">comment:10</div>

I did the changes. I decided to keep the construction as is.

I added a raise ValueError if one tries to construct it with `RDF` as cdd returns a numerical inconsistency error.



---

archive/issue_events_387162.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-24T11:38:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387162"
}
```



---

archive/issue_events_387163.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-24T11:38:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387163"
}
```



---

archive/issue_comments_442819.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSome minor things:\n\n- The order should be consistent here:\n\n```\n+            # The 64 permutations of [\u00b12,\u00b12,0,0] (the \u00b1 are independant)\n+            verts = Permutations([0,0,2,2]).list() + Permutations([0,0,-2,-2]).list() + \nPermutations([0,0,2,-2]).list()\n```\n  also I still count 24 permutations as I already mentioned.\n- I'm a bit puzzled, where you remove the duplicates here:\n\n```\n+                # The cartesian product creates duplicates, so we reduce it:\n+                verts += itertools.chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)\n```\n- Instead of importing `itertools` I would vote for importing just `itertools.chain`.\n  Otherwise you might also consider to use `itertools.product` instead of `sage.categories.cartesian_product`.\n- Whats the point of naming it `K` here?\n\n```\nK = QuadraticField(5, 'sqrt5')\nbase_ring = K\n```",
    "created_at": "2019-10-28T09:24:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442819",
    "user": "https://github.com/kliem"
}
```

<div id="comment:11" align="right">comment:11</div>

Some minor things:

- The order should be consistent here:

```
+            # The 64 permutations of [±2,±2,0,0] (the ± are independant)
+            verts = Permutations([0,0,2,2]).list() + Permutations([0,0,-2,-2]).list() + 
Permutations([0,0,2,-2]).list()
```
  also I still count 24 permutations as I already mentioned.
- I'm a bit puzzled, where you remove the duplicates here:

```
+                # The cartesian product creates duplicates, so we reduce it:
+                verts += itertools.chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)
```
- Instead of importing `itertools` I would vote for importing just `itertools.chain`.
  Otherwise you might also consider to use `itertools.product` instead of `sage.categories.cartesian_product`.
- Whats the point of naming it `K` here?

```
K = QuadraticField(5, 'sqrt5')
base_ring = K
```



---

archive/issue_events_387164.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-28T09:25:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387164"
}
```



---

archive/issue_events_387165.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-28T09:25:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387165"
}
```



---

archive/issue_comments_442820.json:
```json
{
    "body": "Changed commit from **[`7defa3c`](https://github.com/sagemath/sagetrac-mirror/commit/7defa3c99e618c5c8820b107ff73f792e54a360d)** to **[`5e37f0e`](https://github.com/sagemath/sagetrac-mirror/commit/5e37f0e0c6886ed762e0c3e8c13e92b91926eb07)**",
    "created_at": "2019-10-29T09:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442820",
    "user": "https://github.com/jplab"
}
```

Changed commit from **[`7defa3c`](https://github.com/sagemath/sagetrac-mirror/commit/7defa3c99e618c5c8820b107ff73f792e54a360d)** to **[`5e37f0e`](https://github.com/sagemath/sagetrac-mirror/commit/5e37f0e0c6886ed762e0c3e8c13e92b91926eb07)**



---

archive/issue_comments_442821.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@kliem](#comment:11):\n> - The order should be consistent here:\n> \n> ```\n> +            # The 64 permutations of [\u00b12,\u00b12,0,0] (the \u00b1 are independant)\n> +            verts = Permutations([0,0,2,2]).list() + Permutations([0,0,-2,-2]).list() + \n> Permutations([0,0,2,-2]).list()\n> ```\n>   also I still count 24 permutations as I already mentioned.\n\nTypo. Fixed.\n\n> - I'm a bit puzzled, where you remove the duplicates here:\n> \n> ```\n> +                # The cartesian product creates duplicates, so we reduce it:\n> +                verts += itertools.chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)\n> ```\n\nWell, this does what I want, what else can I say? It is very annoying to write something that creates them without duplicates, and we are dealing with a negligible amount of vertices, so I see now reason to make a fuss about inefficiency here.\n\n> - Instead of importing `itertools` I would vote for importing just `itertools.chain`.\n\nDone.\n\n> - Whats the point of naming it `K` here?\n> \n> ```\n> K = QuadraticField(5, 'sqrt5')\n> base_ring = K\n> ```\n\nThat's a wonderful rhetorical question. My rhetorical answer: to make you ask rhetorical questions. ;-)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6454b0bc853923e19222ff8b53c73a39ba4588c2\"><code>6454b0b</code></a></td><td><code>Added classical construction of 120-cell</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b64deccbfd9174ee40f7e82d892c181a00f76d1\"><code>8b64dec</code></a></td><td><code>fixed the construction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e37f0e0c6886ed762e0c3e8c13e92b91926eb07\"><code>5e37f0e</code></a></td><td><code>some more fixes</code></td></tr></table>\n",
    "created_at": "2019-10-29T09:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442821",
    "user": "https://github.com/jplab"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@kliem](#comment:11):
> - The order should be consistent here:
> 
> ```
> +            # The 64 permutations of [±2,±2,0,0] (the ± are independant)
> +            verts = Permutations([0,0,2,2]).list() + Permutations([0,0,-2,-2]).list() + 
> Permutations([0,0,2,-2]).list()
> ```
>   also I still count 24 permutations as I already mentioned.

Typo. Fixed.

> - I'm a bit puzzled, where you remove the duplicates here:
> 
> ```
> +                # The cartesian product creates duplicates, so we reduce it:
> +                verts += itertools.chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)
> ```

Well, this does what I want, what else can I say? It is very annoying to write something that creates them without duplicates, and we are dealing with a negligible amount of vertices, so I see now reason to make a fuss about inefficiency here.

> - Instead of importing `itertools` I would vote for importing just `itertools.chain`.

Done.

> - Whats the point of naming it `K` here?
> 
> ```
> K = QuadraticField(5, 'sqrt5')
> base_ring = K
> ```

That's a wonderful rhetorical question. My rhetorical answer: to make you ask rhetorical questions. ;-)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6454b0bc853923e19222ff8b53c73a39ba4588c2"><code>6454b0b</code></a></td><td><code>Added classical construction of 120-cell</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b64deccbfd9174ee40f7e82d892c181a00f76d1"><code>8b64dec</code></a></td><td><code>fixed the construction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e37f0e0c6886ed762e0c3e8c13e92b91926eb07"><code>5e37f0e</code></a></td><td><code>some more fixes</code></td></tr></table>




---

archive/issue_comments_442822.json:
```json
{
    "body": "Changed branch from **[u/jipilab/classic120](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/classic120)** to **[u/jipilab/classic120bis](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/classic120bis)**",
    "created_at": "2019-10-29T09:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442822",
    "user": "https://github.com/jplab"
}
```

Changed branch from **[u/jipilab/classic120](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/classic120)** to **[u/jipilab/classic120bis](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/classic120bis)**



---

archive/issue_events_387166.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-29T09:07:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387166"
}
```



---

archive/issue_events_387167.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-29T09:07:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387167"
}
```



---

archive/issue_comments_442823.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jplab](#comment:13):\n> Replying to [@kliem](#comment:11):\n> \n> > - I'm a bit puzzled, where you remove the duplicates here:\n> > \n> > ```\n> > +                # The cartesian product creates duplicates, so we reduce it:\n> > +                verts += itertools.chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)\n> > ```\n\n> \n> Well, this does what I want, what else can I say? It is very annoying to write something that creates them without duplicates, and we are dealing with a negligible amount of vertices, so I see now reason to make a fuss about inefficiency here.\n\nWell, as every entry is unique, the cartesian product creates no duplicates. Hence, you don't have to remove them.\n\nThis is why I find this comment very confusing. You comment that you will remove duplicates, but neither are there duplicate nor do you do any instructions that would remove duplicates, if they where there.\n\nAlso you have a typo in your chain import, so this doesn't build.",
    "created_at": "2019-10-29T10:10:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442823",
    "user": "https://github.com/kliem"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jplab](#comment:13):
> Replying to [@kliem](#comment:11):
> 
> > - I'm a bit puzzled, where you remove the duplicates here:
> > 
> > ```
> > +                # The cartesian product creates duplicates, so we reduce it:
> > +                verts += itertools.chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)
> > ```

> 
> Well, this does what I want, what else can I say? It is very annoying to write something that creates them without duplicates, and we are dealing with a negligible amount of vertices, so I see now reason to make a fuss about inefficiency here.

Well, as every entry is unique, the cartesian product creates no duplicates. Hence, you don't have to remove them.

This is why I find this comment very confusing. You comment that you will remove duplicates, but neither are there duplicate nor do you do any instructions that would remove duplicates, if they where there.

Also you have a typo in your chain import, so this doesn't build.



---

archive/issue_events_387168.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-29T10:10:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387168"
}
```



---

archive/issue_events_387169.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-29T10:10:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387169"
}
```



---

archive/issue_comments_442824.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOops, yes, I changed the `import` to `from`.\n\nPerhaps my comment is not clear enough, it is not the cartesian product but the action of the even permutations:\n\n```diff\n+            import itertools import chain\n+            even_perm_vectors = [[[0],[phi_inv**2,-phi_inv**2],[1,-1],[-(phi**2),phi**2]],\n+                                 [[0],[phi_inv,-phi_inv],[phi,-phi],[-sqrt5,sqrt5]],\n+                                 [[phi_inv,-phi_inv],[1,-1],[phi,-phi],[-2,2]]]\n+            even_perm = AlternatingGroup(4)\n+            for vect in even_perm_vectors:\n+                cp = cartesian_product(vect)\n+                # The cartesian product creates duplicates, so we reduce it:\n+                verts += chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)\n                                               ^-------p acts here and creates duplicates\n```",
    "created_at": "2019-10-29T11:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442824",
    "user": "https://github.com/jplab"
}
```

<div id="comment:17" align="right">comment:17</div>

Oops, yes, I changed the `import` to `from`.

Perhaps my comment is not clear enough, it is not the cartesian product but the action of the even permutations:

```diff
+            import itertools import chain
+            even_perm_vectors = [[[0],[phi_inv**2,-phi_inv**2],[1,-1],[-(phi**2),phi**2]],
+                                 [[0],[phi_inv,-phi_inv],[phi,-phi],[-sqrt5,sqrt5]],
+                                 [[phi_inv,-phi_inv],[1,-1],[phi,-phi],[-2,2]]]
+            even_perm = AlternatingGroup(4)
+            for vect in even_perm_vectors:
+                cp = cartesian_product(vect)
+                # The cartesian product creates duplicates, so we reduce it:
+                verts += chain.from_iterable([p(tuple(c)) for p in even_perm] for c in cp)
                                               ^-------p acts here and creates duplicates
```



---

archive/issue_comments_442825.json:
```json
{
    "body": "Changed commit from **[`5e37f0e`](https://github.com/sagemath/sagetrac-mirror/commit/5e37f0e0c6886ed762e0c3e8c13e92b91926eb07)** to **[`6cb1552`](https://github.com/sagemath/sagetrac-mirror/commit/6cb1552841d2df9a4ecccc13a59cc351b8c17f6e)**",
    "created_at": "2019-10-29T11:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442825",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5e37f0e`](https://github.com/sagemath/sagetrac-mirror/commit/5e37f0e0c6886ed762e0c3e8c13e92b91926eb07)** to **[`6cb1552`](https://github.com/sagemath/sagetrac-mirror/commit/6cb1552841d2df9a4ecccc13a59cc351b8c17f6e)**



---

archive/issue_comments_442826.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cb1552841d2df9a4ecccc13a59cc351b8c17f6e\"><code>6cb1552</code></a></td><td><code>more fixes</code></td></tr></table>\n",
    "created_at": "2019-10-29T11:45:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442826",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cb1552841d2df9a4ecccc13a59cc351b8c17f6e"><code>6cb1552</code></a></td><td><code>more fixes</code></td></tr></table>




---

archive/issue_comments_442827.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94641796685d7bbf0b8dbf14f67898cf3f728119\"><code>9464179</code></a></td><td><code>Last edits</code></td></tr></table>\n",
    "created_at": "2019-10-29T11:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442827",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94641796685d7bbf0b8dbf14f67898cf3f728119"><code>9464179</code></a></td><td><code>Last edits</code></td></tr></table>




---

archive/issue_comments_442828.json:
```json
{
    "body": "Changed commit from **[`6cb1552`](https://github.com/sagemath/sagetrac-mirror/commit/6cb1552841d2df9a4ecccc13a59cc351b8c17f6e)** to **[`9464179`](https://github.com/sagemath/sagetrac-mirror/commit/94641796685d7bbf0b8dbf14f67898cf3f728119)**",
    "created_at": "2019-10-29T11:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442828",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6cb1552`](https://github.com/sagemath/sagetrac-mirror/commit/6cb1552841d2df9a4ecccc13a59cc351b8c17f6e)** to **[`9464179`](https://github.com/sagemath/sagetrac-mirror/commit/94641796685d7bbf0b8dbf14f67898cf3f728119)**



---

archive/issue_events_387170.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-29T11:59:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387170"
}
```



---

archive/issue_events_387171.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2019-10-29T11:59:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387171"
}
```



---

archive/issue_comments_442829.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nShould be good to go now.",
    "created_at": "2019-10-29T11:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442829",
    "user": "https://github.com/jplab"
}
```

<div id="comment:20" align="right">comment:20</div>

Should be good to go now.



---

archive/issue_comments_442830.json:
```json
{
    "body": "Reviewer: **Jonathan Kliem**",
    "created_at": "2019-10-30T13:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442830",
    "user": "https://github.com/kliem"
}
```

Reviewer: **Jonathan Kliem**



---

archive/issue_comments_442831.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nLGTM",
    "created_at": "2019-10-30T13:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442831",
    "user": "https://github.com/kliem"
}
```

<div id="comment:21" align="right">comment:21</div>

LGTM



---

archive/issue_events_387172.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-30T13:12:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387172"
}
```



---

archive/issue_events_387173.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-10-30T13:12:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387173"
}
```



---

archive/issue_events_387174.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-30T19:00:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387174"
}
```



---

archive/issue_events_387175.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-10-30T19:00:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387175"
}
```



---

archive/issue_comments_442832.json:
```json
{
    "body": "Changed branch from **[u/jipilab/classic120bis](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/classic120bis)** to **[`9464179`](https://github.com/sagemath/sagetrac-mirror/commit/94641796685d7bbf0b8dbf14f67898cf3f728119)**",
    "created_at": "2019-10-31T22:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28429#issuecomment-442832",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jipilab/classic120bis](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/classic120bis)** to **[`9464179`](https://github.com/sagemath/sagetrac-mirror/commit/94641796685d7bbf0b8dbf14f67898cf3f728119)**



---

archive/issue_events_387176.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-31T22:40:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387176"
}
```



---

archive/issue_events_387177.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4d72eefaf37a40631328ffeedf60675f3720d0d9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-10-31T22:40:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28429",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28429#event-387177"
}
```
