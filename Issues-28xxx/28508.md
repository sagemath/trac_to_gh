# Issue 28508: An API for testing if a parent's element “are” real/complex numbers

archive/issues_028271.json:
```json
{
    "assignees": [],
    "body": "See commit messages.\n\nBranch/Commit: **[`25658d6`](https://github.com/sagemath/sagetrac-mirror/commit/25658d601697e76c16798258448622132cc37a25)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Marc Mezzarobba**\n\nComponent: **coercion**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28508_\n\n",
    "closed_at": "2019-10-20T22:19:04Z",
    "created_at": "2019-09-16T14:28:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "An API for testing if a parent's element \u201care\u201d real/complex numbers",
    "type": "issue",
    "updated_at": "2019-10-20T22:19:04Z",
    "url": "https://github.com/sagemath/sage/issues/28508",
    "user": "https://github.com/mezzarobba"
}
```
See commit messages.

Branch/Commit: **[`25658d6`](https://github.com/sagemath/sagetrac-mirror/commit/25658d601697e76c16798258448622132cc37a25)**

Reviewer: **Vincent Delecroix**

Author: **Marc Mezzarobba**

Component: **coercion**

_Issue created by migration from https://trac.sagemath.org/ticket/28508_





---

archive/issue_events_393287.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-09-16T14:28:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393287"
}
```



---

archive/issue_events_393288.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-09-16T14:28:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "eeeeee",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393288"
}
```



---

archive/issue_events_393289.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-09-16T14:28:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393289"
}
```



---

archive/issue_events_393290.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-09-16T14:28:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393290"
}
```



---

archive/issue_comments_444333.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nNot well tested on my side, because my Sage build uses versions of various packages with which lots of doctests fail. Let's see what the patchbot says.",
    "created_at": "2019-09-16T14:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444333",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:1" align="right">comment:1</div>

Not well tested on my side, because my Sage build uses versions of various packages with which lots of doctests fail. Let's see what the patchbot says.



---

archive/issue_events_393291.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-09-16T14:30:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393291"
}
```



---

archive/issue_comments_444334.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/524523d84530de3c5a99f77d97ee5ba38679f8e9\"><code>524523d</code></a></td><td><code>test if a parent represents real/complex numbers</code></td></tr></table>\n",
    "created_at": "2019-09-16T14:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444334",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/524523d84530de3c5a99f77d97ee5ba38679f8e9"><code>524523d</code></a></td><td><code>test if a parent represents real/complex numbers</code></td></tr></table>




---

archive/issue_comments_444335.json:
```json
{
    "body": "Changed commit from **[`b346632`](https://github.com/sagemath/sagetrac-mirror/commit/b346632069b8ea1ed13ce4efc0a65d40adcb5ad2)** to **[`524523d`](https://github.com/sagemath/sagetrac-mirror/commit/524523d84530de3c5a99f77d97ee5ba38679f8e9)**",
    "created_at": "2019-09-16T14:32:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444335",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b346632`](https://github.com/sagemath/sagetrac-mirror/commit/b346632069b8ea1ed13ce4efc0a65d40adcb5ad2)** to **[`524523d`](https://github.com/sagemath/sagetrac-mirror/commit/524523d84530de3c5a99f77d97ee5ba38679f8e9)**



---

archive/issue_comments_444336.json:
```json
{
    "body": "Changed commit from **[`524523d`](https://github.com/sagemath/sagetrac-mirror/commit/524523d84530de3c5a99f77d97ee5ba38679f8e9)** to **[`9d0d5f1`](https://github.com/sagemath/sagetrac-mirror/commit/9d0d5f1239371a6e665218706b8ff7ad8ec879c6)**",
    "created_at": "2019-09-17T14:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444336",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`524523d`](https://github.com/sagemath/sagetrac-mirror/commit/524523d84530de3c5a99f77d97ee5ba38679f8e9)** to **[`9d0d5f1`](https://github.com/sagemath/sagetrac-mirror/commit/9d0d5f1239371a6e665218706b8ff7ad8ec879c6)**



---

archive/issue_comments_444337.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d0d5f1239371a6e665218706b8ff7ad8ec879c6\"><code>9d0d5f1</code></a></td><td><code>test if a parent represents real/complex numbers</code></td></tr></table>\n",
    "created_at": "2019-09-17T14:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444337",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d0d5f1239371a6e665218706b8ff7ad8ec879c6"><code>9d0d5f1</code></a></td><td><code>test if a parent represents real/complex numbers</code></td></tr></table>




---

archive/issue_comments_444338.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6203d78d85f1befb4e25b4e6e38121c325ac914\"><code>f6203d7</code></a></td><td><code>test if a parent represents real/complex numbers</code></td></tr></table>\n",
    "created_at": "2019-09-18T09:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444338",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6203d78d85f1befb4e25b4e6e38121c325ac914"><code>f6203d7</code></a></td><td><code>test if a parent represents real/complex numbers</code></td></tr></table>




---

archive/issue_comments_444339.json:
```json
{
    "body": "Changed commit from **[`9d0d5f1`](https://github.com/sagemath/sagetrac-mirror/commit/9d0d5f1239371a6e665218706b8ff7ad8ec879c6)** to **[`f6203d7`](https://github.com/sagemath/sagetrac-mirror/commit/f6203d78d85f1befb4e25b4e6e38121c325ac914)**",
    "created_at": "2019-09-18T09:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444339",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9d0d5f1`](https://github.com/sagemath/sagetrac-mirror/commit/9d0d5f1239371a6e665218706b8ff7ad8ec879c6)** to **[`f6203d7`](https://github.com/sagemath/sagetrac-mirror/commit/f6203d78d85f1befb4e25b4e6e38121c325ac914)**



---

archive/issue_comments_444340.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nShould be okay now...",
    "created_at": "2019-09-18T09:41:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444340",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:5" align="right">comment:5</div>

Should be okay now...



---

archive/issue_comments_444341.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nCould you clarify the specification of the functions? I find the sentence `can be canonically considered a subring of` a bit vague. For example `RR` (the mpfr floating point real number in Sage) is **not** a ring and hence not a subring of the real numbers.",
    "created_at": "2019-09-19T08:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444341",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Could you clarify the specification of the functions? I find the sentence `can be canonically considered a subring of` a bit vague. For example `RR` (the mpfr floating point real number in Sage) is **not** a ring and hence not a subring of the real numbers.



---

archive/issue_comments_444342.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nMaybe you meant `subset`?",
    "created_at": "2019-09-19T08:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444342",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">comment:7</div>

Maybe you meant `subset`?



---

archive/issue_comments_444343.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nCould you also justify the terminology `numerical`? For me it would have been hard to find out this method. The keywords I would have tried are `real`, `subset`, `real embedded`. Also, numerical sounds like numerical analysis which refers mostly to floating point computations.",
    "created_at": "2019-09-19T08:24:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444343",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Could you also justify the terminology `numerical`? For me it would have been hard to find out this method. The keywords I would have tried are `real`, `subset`, `real embedded`. Also, numerical sounds like numerical analysis which refers mostly to floating point computations.



---

archive/issue_comments_444344.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2019-09-19T08:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444344",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_393292.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-19T08:43:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393292"
}
```



---

archive/issue_events_393293.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-19T08:43:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393293"
}
```



---

archive/issue_comments_444345.json:
```json
{
    "body": "Changed commit from **[`f6203d7`](https://github.com/sagemath/sagetrac-mirror/commit/f6203d78d85f1befb4e25b4e6e38121c325ac914)** to **[`c74586b`](https://github.com/sagemath/sagetrac-mirror/commit/c74586b1e3268f4a4ff718853a3a27f13db3f206)**",
    "created_at": "2019-09-19T08:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444345",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f6203d7`](https://github.com/sagemath/sagetrac-mirror/commit/f6203d78d85f1befb4e25b4e6e38121c325ac914)** to **[`c74586b`](https://github.com/sagemath/sagetrac-mirror/commit/c74586b1e3268f4a4ff718853a3a27f13db3f206)**



---

archive/issue_comments_444346.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c74586b1e3268f4a4ff718853a3a27f13db3f206\"><code>c74586b</code></a></td><td><code>#28508 attempt to make the doc less misleading</code></td></tr></table>\n",
    "created_at": "2019-09-19T08:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444346",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c74586b1e3268f4a4ff718853a3a27f13db3f206"><code>c74586b</code></a></td><td><code>#28508 attempt to make the doc less misleading</code></td></tr></table>




---

archive/issue_events_393294.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-09-19T08:52:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393294"
}
```



---

archive/issue_events_393295.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-09-19T08:52:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393295"
}
```



---

archive/issue_comments_444347.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHi Vincent,\n\nThank you for your comments.\n\nI agree that the documentation is not great. The idea was just to factor out the idiom `RR(2).has_coerce_map_from(P)` that is used in a number of places, and to cache the result. (I also think that a way to test if a ring is a subring of the reals would be a good think to have, but that's not the point of this ticket.)\n\nI'm happy with improving the documentation again if you have a better wording to suggest. However, I would prefer not to make changes that require rebasing #28517 without a really compelling reason at this point, because I'm starting to lack on time for all that, and #28517 is frankly a lot more important. If we want to rename the new functions or something like that, I think it will be easier to do it once #28517 has been reviewd.",
    "created_at": "2019-09-19T08:52:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444347",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:11" align="right">comment:11</div>

Hi Vincent,

Thank you for your comments.

I agree that the documentation is not great. The idea was just to factor out the idiom `RR(2).has_coerce_map_from(P)` that is used in a number of places, and to cache the result. (I also think that a way to test if a ring is a subring of the reals would be a good think to have, but that's not the point of this ticket.)

I'm happy with improving the documentation again if you have a better wording to suggest. However, I would prefer not to make changes that require rebasing #28517 without a really compelling reason at this point, because I'm starting to lack on time for all that, and #28517 is frankly a lot more important. If we want to rename the new functions or something like that, I think it will be easier to do it once #28517 has been reviewd.



---

archive/issue_comments_444348.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSalut Marc,\n\nI definitely agree that factorizing the various \"is my ring a subring of real numbers\" into a method is good idea. But since this ticket is fixing naming conventions, they should be thought carefully.\n\nThough as nothing is pulled in the global Sage namespace and we can fix names later on.",
    "created_at": "2019-09-19T08:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444348",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Salut Marc,

I definitely agree that factorizing the various "is my ring a subring of real numbers" into a method is good idea. But since this ticket is fixing naming conventions, they should be thought carefully.

Though as nothing is pulled in the global Sage namespace and we can fix names later on.



---

archive/issue_comments_444349.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n- In `parent_is_numerical` docstring:\n  - `this parent or type` -> <code>the parent or type \\`\\`P\\`\\`</code>\n  - `typecan` -> `type can`\n\nFor efficiency reason, we might want to special case standard Python types in `parent_is_numerical` and `parent_is_real_numerical` rather than relying on `py_scalar_parent`.\n\nIt would be good to also tests non standard Python types such as `gmpy2.mpz`, `gmpy2.mpq`, `gmpy2.mpfr`, `gmpy2.mpc`.",
    "created_at": "2019-09-19T09:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444349",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">comment:13</div>

- In `parent_is_numerical` docstring:
  - `this parent or type` -> <code>the parent or type \`\`P\`\`</code>
  - `typecan` -> `type can`

For efficiency reason, we might want to special case standard Python types in `parent_is_numerical` and `parent_is_real_numerical` rather than relying on `py_scalar_parent`.

It would be good to also tests non standard Python types such as `gmpy2.mpz`, `gmpy2.mpq`, `gmpy2.mpfr`, `gmpy2.mpc`.



---

archive/issue_comments_444350.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80df258415798a96106a1534be53ce5f07bbb242\"><code>80df258</code></a></td><td><code>#28508 less misleading doc, some more tests</code></td></tr></table>\n",
    "created_at": "2019-09-19T09:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444350",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80df258415798a96106a1534be53ce5f07bbb242"><code>80df258</code></a></td><td><code>#28508 less misleading doc, some more tests</code></td></tr></table>




---

archive/issue_comments_444351.json:
```json
{
    "body": "Changed commit from **[`c74586b`](https://github.com/sagemath/sagetrac-mirror/commit/c74586b1e3268f4a4ff718853a3a27f13db3f206)** to **[`80df258`](https://github.com/sagemath/sagetrac-mirror/commit/80df258415798a96106a1534be53ce5f07bbb242)**",
    "created_at": "2019-09-19T09:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444351",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c74586b`](https://github.com/sagemath/sagetrac-mirror/commit/c74586b1e3268f4a4ff718853a3a27f13db3f206)** to **[`80df258`](https://github.com/sagemath/sagetrac-mirror/commit/80df258415798a96106a1534be53ce5f07bbb242)**



---

archive/issue_comments_444352.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@videlec](#comment:13):\n> - In `parent_is_numerical` docstring:\n>   - `this parent or type` -> <code>the parent or type \\`\\`P\\`\\`</code>\n>   - `typecan` -> `type can`\n\nDone, thanks.\n\n> For efficiency reason, we might want to special case standard Python types in `parent_is_numerical` and `parent_is_real_numerical` rather than relying on `py_scalar_parent`.\n\nI think that's premature. `py_scalar_parent` is quite fast, and non-Sage objects aren't used that much in time-critical code.\n\n> It would be good to also tests non standard Python types such as `gmpy2.mpz`, `gmpy2.mpq`, `gmpy2.mpfr`, `gmpy2.mpc`.\n\nDone.",
    "created_at": "2019-09-19T09:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444352",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@videlec](#comment:13):
> - In `parent_is_numerical` docstring:
>   - `this parent or type` -> <code>the parent or type \`\`P\`\`</code>
>   - `typecan` -> `type can`

Done, thanks.

> For efficiency reason, we might want to special case standard Python types in `parent_is_numerical` and `parent_is_real_numerical` rather than relying on `py_scalar_parent`.

I think that's premature. `py_scalar_parent` is quite fast, and non-Sage objects aren't used that much in time-critical code.

> It would be good to also tests non standard Python types such as `gmpy2.mpz`, `gmpy2.mpq`, `gmpy2.mpfr`, `gmpy2.mpc`.

Done.



---

archive/issue_events_393296.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-19T09:36:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393296"
}
```



---

archive/issue_events_393297.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-19T09:36:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393297"
}
```



---

archive/issue_events_393298.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-19T09:36:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393298"
}
```



---

archive/issue_events_393299.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-09-19T09:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393299"
}
```



---

archive/issue_comments_444353.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThank you!",
    "created_at": "2019-09-19T09:49:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444353",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:17" align="right">comment:17</div>

Thank you!



---

archive/issue_comments_444354.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nFails on python 3, multiple occurances of:\n\n```\n**********************************************************************\nFile \"src/sage/structure/coerce.pyx\", line 380, in sage.structure.coerce.parent_is_numerical\nFailed example:\n    [parent_is_numerical(R) for R in SR, QQ['x'], QQ[['x']], str]\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1121, in compile_and_execute\n        compiled = compiler(example)\n      File \"/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 649, in compiler\n        compileflags, 1)\n      File \"<doctest sage.structure.coerce.parent_is_numerical[3]>\", line 1\n        [parent_is_numerical(R) for R in SR, QQ['x'], QQ[['x']], str]\n                                           ^\n    SyntaxError: invalid syntax\n**********************************************************************\n```",
    "created_at": "2019-10-05T07:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444354",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:18" align="right">comment:18</div>

Fails on python 3, multiple occurances of:

```
**********************************************************************
File "src/sage/structure/coerce.pyx", line 380, in sage.structure.coerce.parent_is_numerical
Failed example:
    [parent_is_numerical(R) for R in SR, QQ['x'], QQ[['x']], str]
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1121, in compile_and_execute
        compiled = compiler(example)
      File "/var/lib/buildbot/slave/sage3_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 649, in compiler
        compileflags, 1)
      File "<doctest sage.structure.coerce.parent_is_numerical[3]>", line 1
        [parent_is_numerical(R) for R in SR, QQ['x'], QQ[['x']], str]
                                           ^
    SyntaxError: invalid syntax
**********************************************************************
```



---

archive/issue_events_393300.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-05T07:57:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393300"
}
```



---

archive/issue_events_393301.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-05T07:57:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393301"
}
```



---

archive/issue_comments_444355.json:
```json
{
    "body": "Changed commit from **[`80df258`](https://github.com/sagemath/sagetrac-mirror/commit/80df258415798a96106a1534be53ce5f07bbb242)** to **[`25658d6`](https://github.com/sagemath/sagetrac-mirror/commit/25658d601697e76c16798258448622132cc37a25)**",
    "created_at": "2019-10-05T09:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444355",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`80df258`](https://github.com/sagemath/sagetrac-mirror/commit/80df258415798a96106a1534be53ce5f07bbb242)** to **[`25658d6`](https://github.com/sagemath/sagetrac-mirror/commit/25658d601697e76c16798258448622132cc37a25)**



---

archive/issue_comments_444356.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25658d601697e76c16798258448622132cc37a25\"><code>25658d6</code></a></td><td><code>#28508 fix doctests for Python 3</code></td></tr></table>\n",
    "created_at": "2019-10-05T09:36:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444356",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25658d601697e76c16798258448622132cc37a25"><code>25658d6</code></a></td><td><code>#28508 fix doctests for Python 3</code></td></tr></table>




---

archive/issue_comments_444357.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@vbraun](#comment:18):\n> Fails on python 3,\n\nThank you. Fixed (I think).",
    "created_at": "2019-10-05T09:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444357",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@vbraun](#comment:18):
> Fails on python 3,

Thank you. Fixed (I think).



---

archive/issue_events_393302.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-10-05T09:37:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393302"
}
```



---

archive/issue_events_393303.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-10-05T09:37:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393303"
}
```



---

archive/issue_events_393304.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-10-14T15:13:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393304"
}
```



---

archive/issue_events_393305.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2019-10-14T15:13:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393305"
}
```



---

archive/issue_comments_444358.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/test_numerical_parent](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/test_numerical_parent)** to **[`25658d6`](https://github.com/sagemath/sagetrac-mirror/commit/25658d601697e76c16798258448622132cc37a25)**",
    "created_at": "2019-10-20T22:19:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28508#issuecomment-444358",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/test_numerical_parent](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/test_numerical_parent)** to **[`25658d6`](https://github.com/sagemath/sagetrac-mirror/commit/25658d601697e76c16798258448622132cc37a25)**



---

archive/issue_events_393306.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-20T22:19:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393306"
}
```



---

archive/issue_events_393307.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1471238e55dd4af1e6a41b7f819e9a7cf3f50cc1",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-10-20T22:19:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28508",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28508#event-393307"
}
```
