# Issue 28574: conversion of nested polynomial rings to Macaulay2

archive/issues_028337.json:
```json
{
    "body": "This ticket implements conversion to and from Macaulay2 of polynomial rings over arbitrary base rings \u2013 nested polynomial rings in particular \u2013 as well as their elements.\n\nThis ticket also implements `_macaulay2_()` for polydicts. This is used in elements of nested polynomial rings, for example.\n\nIt also fixes an issue where constant polynomials are accidentally converted to elements of the base ring in Macaulay2, not to elements of the polynomial ring.\n\nWe add a special case in the conversion of Galois fields, since in Macaulay2 it is more natural to define finite fields as `ZZ/p` rather than `GF p`. This has a positive effect on performance, and simplifies the construction of Macaulay2 polynomial rings.\n\nCC:  @saliola @dimpase @antonleykin\n\nKeywords: macaulay2, IMA Coding Sprint\n\nBranch/Commit: ac2ff35e8bf3e9865f617234405b3acb7318bc34\n\nReviewer: Franco Saliola, Dima Pasechnik\n\nAuthor: Markus Wageringel\n\nDependencies: #28566, #28571, #28572, #28074\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28574\n\n",
    "closed_at": "2019-11-07T23:30:08Z",
    "created_at": "2019-10-07T23:29:04Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "conversion of nested polynomial rings to Macaulay2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28574",
    "user": "https://github.com/mwageringel"
}
```
This ticket implements conversion to and from Macaulay2 of polynomial rings over arbitrary base rings – nested polynomial rings in particular – as well as their elements.

This ticket also implements `_macaulay2_()` for polydicts. This is used in elements of nested polynomial rings, for example.

It also fixes an issue where constant polynomials are accidentally converted to elements of the base ring in Macaulay2, not to elements of the polynomial ring.

We add a special case in the conversion of Galois fields, since in Macaulay2 it is more natural to define finite fields as `ZZ/p` rather than `GF p`. This has a positive effect on performance, and simplifies the construction of Macaulay2 polynomial rings.

CC:  @saliola @dimpase @antonleykin

Keywords: macaulay2, IMA Coding Sprint

Branch/Commit: ac2ff35e8bf3e9865f617234405b3acb7318bc34

Reviewer: Franco Saliola, Dima Pasechnik

Author: Markus Wageringel

Dependencies: #28566, #28571, #28572, #28074

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28574





---

archive/issue_comments_426051.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2019-10-07T23:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426051",
    "user": "https://github.com/mwageringel"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_426052.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-07T23:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426052",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426053.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2019-10-07T23:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426053",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_426054.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+This ticket implements conversion to and from Macaulay2 of polynomial rings over arbitrary base rings \u2013 nested polynomial rings in particular \u2013 as well as their elements.\n \n+This ticket also implements `_macaulay2_()` for polydicts. This is used in elements of nested polynomial rings, for example.\n+\n+It also fixes an issue where constant polynomials are accidentally converted to elements of the base ring in Macaulay2, not to elements of the polynomial ring.\n+\n+We add a special case in the conversion of Galois fields, since in Macaulay2 it is more natural to define finite fields as `ZZ/p` rather than `GF p`. This has a positive effect on performance, and simplifies the construction of Macaulay2 polynomial rings.\n \n Type: PLEASE CHANGE\n \n``````\n",
    "created_at": "2019-10-07T23:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426054",
    "user": "https://github.com/mwageringel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+This ticket implements conversion to and from Macaulay2 of polynomial rings over arbitrary base rings – nested polynomial rings in particular – as well as their elements.
 
+This ticket also implements `_macaulay2_()` for polydicts. This is used in elements of nested polynomial rings, for example.
+
+It also fixes an issue where constant polynomials are accidentally converted to elements of the base ring in Macaulay2, not to elements of the polynomial ring.
+
+We add a special case in the conversion of Galois fields, since in Macaulay2 it is more natural to define finite fields as `ZZ/p` rather than `GF p`. This has a positive effect on performance, and simplifies the construction of Macaulay2 polynomial rings.
 
 Type: PLEASE CHANGE
 
``````




---

archive/issue_comments_426055.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-08T16:54:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426055",
    "user": "https://github.com/saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426056.json:
```json
{
    "body": "<a id='comment:4'></a>reviewer name missing",
    "created_at": "2019-10-09T07:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426056",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>reviewer name missing



---

archive/issue_comments_426057.json:
```json
{
    "body": "<a id='comment:5'></a>Thanks.",
    "created_at": "2019-10-09T14:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426057",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:5'></a>Thanks.



---

archive/issue_comments_426058.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-10T16:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426058",
    "user": "https://github.com/saliola"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_426059.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-10T18:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426060.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2019-10-10T19:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426060",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_426061.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-10T19:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426061",
    "user": "https://github.com/saliola"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_426062.json:
```json
{
    "body": "<a id='comment:10'></a>In order to make this ticket merge cleanly with some of the other M2 tickets summarized at #28573, I set dependencies and merged the appropriate branches. Provided the dependencies are respected, everything should merge cleanly now.",
    "created_at": "2019-10-10T19:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426062",
    "user": "https://github.com/saliola"
}
```

<a id='comment:10'></a>In order to make this ticket merge cleanly with some of the other M2 tickets summarized at #28573, I set dependencies and merged the appropriate branches. Provided the dependencies are respected, everything should merge cleanly now.



---

archive/issue_comments_426063.json:
```json
{
    "body": "<a id='comment:11'></a>I am happy with this ticket. Markus, if you accept the proposed merging, then you can set this to positive review.",
    "created_at": "2019-10-10T21:05:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426063",
    "user": "https://github.com/saliola"
}
```

<a id='comment:11'></a>I am happy with this ticket. Markus, if you accept the proposed merging, then you can set this to positive review.



---

archive/issue_comments_426064.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-10-25T10:38:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426064",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_426065.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2019-10-31T15:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426065",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_426066.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-31T15:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426066",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_426067.json:
```json
{
    "body": "<a id='comment:14'></a>I have replaced the last merge commit by a new merge with #28572 and still all tests pass on my end.\n\nFranco, please review the merging, though maybe wait for the next beta to see if it merges cleanly.",
    "created_at": "2019-10-31T15:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426067",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:14'></a>I have replaced the last merge commit by a new merge with #28572 and still all tests pass on my end.

Franco, please review the merging, though maybe wait for the next beta to see if it merges cleanly.



---

archive/issue_comments_426068.json:
```json
{
    "body": "<a id='comment:15'></a>seems to be merging just fine (with 9.0.beta4)",
    "created_at": "2019-11-04T16:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426068",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>seems to be merging just fine (with 9.0.beta4)



---

archive/issue_comments_426069.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-11-04T16:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426069",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_071731.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-07T23:30:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28574#event-71731"
}
```



---

archive/issue_comments_426070.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-11-07T23:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28574",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28574#issuecomment-426070",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
