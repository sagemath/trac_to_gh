# Issue 28942: Maximal even overlattice

archive/issues_028705.json:
```json
{
    "body": "Create a method that returns a maximal even overlattice of an even integral lattice.\n\nCC:  @annahaensch\n\nBranch/Commit: [ca2b83e736aea3a580051616bed172ce36c820d4](https://github.com/sagemath/sagetrac-mirror/commit/ca2b83e736aea3a580051616bed172ce36c820d4)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Simon Brandhorst\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28942\n\n",
    "closed_at": "2020-01-11T17:45:16Z",
    "created_at": "2020-01-02T16:40:14Z",
    "labels": [
        "component: quadratic forms"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Maximal even overlattice",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28942",
    "user": "https://github.com/simonbrandhorst"
}
```
Create a method that returns a maximal even overlattice of an even integral lattice.

CC:  @annahaensch

Branch/Commit: [ca2b83e736aea3a580051616bed172ce36c820d4](https://github.com/sagemath/sagetrac-mirror/commit/ca2b83e736aea3a580051616bed172ce36c820d4)

Reviewer: Travis Scrimshaw

Author: Simon Brandhorst

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28942





---

archive/issue_comments_563554.json:
```json
{
    "body": "Changing branch from \"\" to \"u/sbrandhorst/maximal_even_overlattice\"",
    "created_at": "2020-01-04T20:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563554",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "" to "u/sbrandhorst/maximal_even_overlattice"



---

archive/issue_comments_563555.json:
```json
{
    "body": "Changing author from \"\" to \"Simon Brandhorst\"",
    "created_at": "2020-01-04T20:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563555",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing author from "" to "Simon Brandhorst"



---

archive/issue_comments_563556.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/maximal_even_overlattice\" to \"\"",
    "created_at": "2020-01-04T20:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563556",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "u/sbrandhorst/maximal_even_overlattice" to ""



---

archive/issue_comments_563557.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[635df5f](https://github.com/sagemath/sagetrac-mirror/commit/635df5f6b1b5fad7ad57bb66e9b160455dc3cf72)|`maximal_overlattices first version`|",
    "created_at": "2020-01-04T20:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563557",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[635df5f](https://github.com/sagemath/sagetrac-mirror/commit/635df5f6b1b5fad7ad57bb66e9b160455dc3cf72)|`maximal_overlattices first version`|



---

archive/issue_comments_563558.json:
```json
{
    "body": "Changing commit from \"\" to \"635df5f6b1b5fad7ad57bb66e9b160455dc3cf72\"",
    "created_at": "2020-01-04T20:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563558",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing commit from "" to "635df5f6b1b5fad7ad57bb66e9b160455dc3cf72"



---

archive/issue_comments_563559.json:
```json
{
    "body": "Changing branch from \"\" to \"u/sbrandhorst/maximal_even_overlattice\"",
    "created_at": "2020-01-04T20:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563559",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing branch from "" to "u/sbrandhorst/maximal_even_overlattice"



---

archive/issue_comments_563560.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-01-04T20:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563560",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_563561.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[c13d0df](https://github.com/sagemath/sagetrac-mirror/commit/c13d0dfac866432917db43fbf34505defccd42ae)|`fixes and a test for maximal_overlattice`|",
    "created_at": "2020-01-04T22:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[c13d0df](https://github.com/sagemath/sagetrac-mirror/commit/c13d0dfac866432917db43fbf34505defccd42ae)|`fixes and a test for maximal_overlattice`|



---

archive/issue_comments_563562.json:
```json
{
    "body": "Changing commit from \"635df5f6b1b5fad7ad57bb66e9b160455dc3cf72\" to \"c13d0dfac866432917db43fbf34505defccd42ae\"",
    "created_at": "2020-01-04T22:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "635df5f6b1b5fad7ad57bb66e9b160455dc3cf72" to "c13d0dfac866432917db43fbf34505defccd42ae"



---

archive/issue_comments_563563.json:
```json
{
    "body": "<a id='comment:6'></a>\nSome little things: The error message should start with a lower case letter (Python convention).\nAlso some PEP8 changes:\n\n```diff\n-                    if t != 0 and t.q()==0:\n+                    if t != 0 and t.q() == 0:\n                         break\n-                if t.q()!=0:\n+                if t.q() != 0:\n```\n\n```diff\n-                if v<=1 or (v == 2 and ZZ(-1).kronecker(p) != u.kronecker(p)):\n+                if v <= 1 or (v == 2 and ZZ(-1).kronecker(p) != u.kronecker(p)):\n```\n\n```diff\n-                a = k(G[0].numerator()); b = k(G[1].numerator());\n+                a = k(G[0].numerator())\n+                b = k(G[1].numerator())\n```\n\n```diff\n-                        x = ((-c - b*y**2)/a)\n+                        x = (-c - b*y**2) / a\n```\n\nThe list comprehension doesn't allow for short-circuiting:\n\n```diff\n-                if t.q() == 0 and all([t.b(g)==0 for g in isotropic]):\n+                if t.q() == 0 and all(t.b(g) == 0 for g in isotropic):\n```",
    "created_at": "2020-01-06T18:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563563",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
Some little things: The error message should start with a lower case letter (Python convention).
Also some PEP8 changes:

```diff
-                    if t != 0 and t.q()==0:
+                    if t != 0 and t.q() == 0:
                         break
-                if t.q()!=0:
+                if t.q() != 0:
```

```diff
-                if v<=1 or (v == 2 and ZZ(-1).kronecker(p) != u.kronecker(p)):
+                if v <= 1 or (v == 2 and ZZ(-1).kronecker(p) != u.kronecker(p)):
```

```diff
-                a = k(G[0].numerator()); b = k(G[1].numerator());
+                a = k(G[0].numerator())
+                b = k(G[1].numerator())
```

```diff
-                        x = ((-c - b*y**2)/a)
+                        x = (-c - b*y**2) / a
```

The list comprehension doesn't allow for short-circuiting:

```diff
-                if t.q() == 0 and all([t.b(g)==0 for g in isotropic]):
+                if t.q() == 0 and all(t.b(g) == 0 for g in isotropic):
```



---

archive/issue_comments_563564.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-01-06T18:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563564",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_563565.json:
```json
{
    "body": "Changing commit from \"c13d0dfac866432917db43fbf34505defccd42ae\" to \"2a2a77ecd6c091be1c26efc2b7b87096bf1bb5df\"",
    "created_at": "2020-01-07T11:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c13d0dfac866432917db43fbf34505defccd42ae" to "2a2a77ecd6c091be1c26efc2b7b87096bf1bb5df"



---

archive/issue_comments_563566.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[2a2a77e](https://github.com/sagemath/sagetrac-mirror/commit/2a2a77ecd6c091be1c26efc2b7b87096bf1bb5df)|`PEP8 and avoid list comprehension`|",
    "created_at": "2020-01-07T11:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563566",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[2a2a77e](https://github.com/sagemath/sagetrac-mirror/commit/2a2a77ecd6c091be1c26efc2b7b87096bf1bb5df)|`PEP8 and avoid list comprehension`|



---

archive/issue_comments_563567.json:
```json
{
    "body": "<a id='comment:8'></a>\n`if t.q()!=0 :` -> `if t.q() != 0:`. Once changed, you can set a positive review.",
    "created_at": "2020-01-07T22:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563567",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
`if t.q()!=0 :` -> `if t.q() != 0:`. Once changed, you can set a positive review.



---

archive/issue_comments_563568.json:
```json
{
    "body": "Changing commit from \"2a2a77ecd6c091be1c26efc2b7b87096bf1bb5df\" to \"ca2b83e736aea3a580051616bed172ce36c820d4\"",
    "created_at": "2020-01-08T06:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563568",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2a2a77ecd6c091be1c26efc2b7b87096bf1bb5df" to "ca2b83e736aea3a580051616bed172ce36c820d4"



---

archive/issue_comments_563569.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------|\n|[ca2b83e](https://github.com/sagemath/sagetrac-mirror/commit/ca2b83e736aea3a580051616bed172ce36c820d4)|`pep 8`|",
    "created_at": "2020-01-08T06:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------|
|[ca2b83e](https://github.com/sagemath/sagetrac-mirror/commit/ca2b83e736aea3a580051616bed172ce36c820d4)|`pep 8`|



---

archive/issue_comments_563570.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-08T09:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563570",
    "user": "https://github.com/simonbrandhorst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_563571.json:
```json
{
    "body": "<a id='comment:10'></a>\nthank you",
    "created_at": "2020-01-08T09:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563571",
    "user": "https://github.com/simonbrandhorst"
}
```

<a id='comment:10'></a>
thank you



---

archive/issue_comments_563572.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-01-11T17:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563572",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_082763.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-01-11T17:45:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28942#event-82763"
}
```



---

archive/issue_comments_563573.json:
```json
{
    "body": "Changing branch from \"u/sbrandhorst/maximal_even_overlattice\" to \"ca2b83e736aea3a580051616bed172ce36c820d4\"",
    "created_at": "2020-01-11T17:45:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28942#issuecomment-563573",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/sbrandhorst/maximal_even_overlattice" to "ca2b83e736aea3a580051616bed172ce36c820d4"
