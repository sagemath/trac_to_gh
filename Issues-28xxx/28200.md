# Issue 28200: reduce base field for scheme morphisms

archive/issues_027963.json:
```json
{
    "body": "It is possible that the field defined by the coefficients is strictly contained in base field of the morphism. This can be happen in a number of situations, especially from conjugations or computing normal forms. There should be a general function to reduce to the field of definition of the coefficients.\n\nKeywords: SI2019\n\nBranch/Commit: a0e7824d1b09faa5b59f55833b3ba51fef2d6456\n\nReviewer: Meghan Grip, Emily Rachfal, Henry Talbott\n\nAuthor: Ben Hutz\n\nDependencies: #28161, #28174\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28200\n\n",
    "closed_at": "2019-08-01T22:54:56Z",
    "created_at": "2019-07-15T17:23:55Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "reduce base field for scheme morphisms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28200",
    "user": "https://github.com/bhutz"
}
```
It is possible that the field defined by the coefficients is strictly contained in base field of the morphism. This can be happen in a number of situations, especially from conjugations or computing normal forms. There should be a general function to reduce to the field of definition of the coefficients.

Keywords: SI2019

Branch/Commit: a0e7824d1b09faa5b59f55833b3ba51fef2d6456

Reviewer: Meghan Grip, Emily Rachfal, Henry Talbott

Author: Ben Hutz

Dependencies: #28161, #28174

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28200





---

archive/issue_comments_546791.json:
```json
{
    "body": "Changing branch from \"\" to \"u/bhutz/28200_reduce_base_field\"",
    "created_at": "2019-07-15T17:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546791",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "" to "u/bhutz/28200_reduce_base_field"



---

archive/issue_comments_546792.json:
```json
{
    "body": "<a id='comment:1'></a>Here is an initial implementation that could use some more testing.\n\nThis just implements the function and does not have any of the 'client' functions utilize this; like conjugate or normal form. I'm not sure those additional modifications should be part of this ticket.\n\n---\nNew commits:",
    "created_at": "2019-07-15T17:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546792",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:1'></a>Here is an initial implementation that could use some more testing.

This just implements the function and does not have any of the 'client' functions utilize this; like conjugate or normal form. I'm not sure those additional modifications should be part of this ticket.

---
New commits:



---

archive/issue_comments_546793.json:
```json
{
    "body": "Changing commit from \"\" to \"222c9aa779e787ccee188349e87b653e2ab54758\"",
    "created_at": "2019-07-15T17:27:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546793",
    "user": "https://github.com/bhutz"
}
```

Changing commit from "" to "222c9aa779e787ccee188349e87b653e2ab54758"



---

archive/issue_comments_546794.json:
```json
{
    "body": "Changing dependencies from \"28161, 28174\" to \"#28161, #28174\"",
    "created_at": "2019-07-15T17:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546794",
    "user": "https://github.com/bhutz"
}
```

Changing dependencies from "28161, 28174" to "#28161, #28174"



---

archive/issue_comments_546795.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-25T15:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546795",
    "user": "https://github.com/bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_546796.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-25T15:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546796",
    "user": "https://github.com/HTalbott"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_546797.json:
```json
{
    "body": "<a id='comment:4'></a>On line 1684 of src/sage/schemes/projective/projective_morphism.py, the method finds the max of the the degrees of the coefficients. This should find the LCM rather than the max. For instance, the following code currently gives the minimal field as GF(5 to 3), when it should give GF(5 to 6), as below:\n\n```\nsage: K.<t>=GF(5^6)\nsage: A.<x>=AffineSpace(K,1)\nsage: H=End(A)\nsage: f=H([x^2+x*(t^3 + 2*t^2 + 4*t)+(t^5 + 3*t^4 + t^2 + 4*t)])\nsage: f.reduce_base_field()\nScheme endomorphism of Affine Space of dimension 1 over Finite Field in t of size 5^6\n  Defn: Defined on coordinates by sending (x) to\n        (x^2 + (t^3 + 2*t^2 - t)*x + (t^5 - 2*t^4 + t^2 - t))\n```",
    "created_at": "2019-07-25T15:17:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546797",
    "user": "https://github.com/HTalbott"
}
```

<a id='comment:4'></a>On line 1684 of src/sage/schemes/projective/projective_morphism.py, the method finds the max of the the degrees of the coefficients. This should find the LCM rather than the max. For instance, the following code currently gives the minimal field as GF(5 to 3), when it should give GF(5 to 6), as below:

```
sage: K.<t>=GF(5^6)
sage: A.<x>=AffineSpace(K,1)
sage: H=End(A)
sage: f=H([x^2+x*(t^3 + 2*t^2 + 4*t)+(t^5 + 3*t^4 + t^2 + 4*t)])
sage: f.reduce_base_field()
Scheme endomorphism of Affine Space of dimension 1 over Finite Field in t of size 5^6
  Defn: Defined on coordinates by sending (x) to
        (x^2 + (t^3 + 2*t^2 - t)*x + (t^5 - 2*t^4 + t^2 - t))
```



---

archive/issue_comments_546798.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-25T18:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_546799.json:
```json
{
    "body": "Changing commit from \"222c9aa779e787ccee188349e87b653e2ab54758\" to \"e9fc3faa1c8acef91cfc1d03f987352bfedab7df\"",
    "created_at": "2019-07-25T18:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "222c9aa779e787ccee188349e87b653e2ab54758" to "e9fc3faa1c8acef91cfc1d03f987352bfedab7df"



---

archive/issue_comments_546800.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-25T18:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546800",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_546801.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Meghan Grip, Emily Rachfal, Henry Talbott\"",
    "created_at": "2019-07-30T13:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546801",
    "user": "https://github.com/meggrip"
}
```

Changing reviewer from "" to "Meghan Grip, Emily Rachfal, Henry Talbott"



---

archive/issue_comments_546802.json:
```json
{
    "body": "Changing branch from \"u/bhutz/28200_reduce_base_field\" to \"u/gh-HTalbott/28200_reduce_base_field\"",
    "created_at": "2019-07-30T13:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546802",
    "user": "https://github.com/HTalbott"
}
```

Changing branch from "u/bhutz/28200_reduce_base_field" to "u/gh-HTalbott/28200_reduce_base_field"



---

archive/issue_comments_546803.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-30T13:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546803",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_546804.json:
```json
{
    "body": "Changing commit from \"e9fc3faa1c8acef91cfc1d03f987352bfedab7df\" to \"a0e7824d1b09faa5b59f55833b3ba51fef2d6456\"",
    "created_at": "2019-07-30T13:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e9fc3faa1c8acef91cfc1d03f987352bfedab7df" to "a0e7824d1b09faa5b59f55833b3ba51fef2d6456"



---

archive/issue_comments_546805.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-30T14:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546805",
    "user": "https://github.com/HTalbott"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_546806.json:
```json
{
    "body": "<a id='comment:10'></a>Fixed small documentations errors. Everything else looks good!\n\n---\nNew commits:",
    "created_at": "2019-07-30T14:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546806",
    "user": "https://github.com/HTalbott"
}
```

<a id='comment:10'></a>Fixed small documentations errors. Everything else looks good!

---
New commits:



---

archive/issue_comments_546807.json:
```json
{
    "body": "Changing branch from \"u/gh-HTalbott/28200_reduce_base_field\" to \"a0e7824d1b09faa5b59f55833b3ba51fef2d6456\"",
    "created_at": "2019-08-01T22:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546807",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-HTalbott/28200_reduce_base_field" to "a0e7824d1b09faa5b59f55833b3ba51fef2d6456"



---

archive/issue_events_070089.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-01T22:54:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28200#event-70089"
}
```



---

archive/issue_comments_546808.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-01T22:54:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28200",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28200#issuecomment-546808",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
