# Issue 28094: support function fields in characteristic zero

archive/issues_027857.json:
```json
{
    "body": "Current function field code only works in prime characteristic.\n\nThis ticket supports function fields over QQ and NumberField's.\n\nAfter Trac #25390 is integrated, it should also support function fields over QQbar.\n\nKeywords: function fields\n\nBranch/Commit: 77dbf93d3116cf33e090d79607803d96c349e68b\n\nReviewer: Travis Scrimshaw, Kwankyu Lee\n\nAuthor: Brent Baccala\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28094\n\n",
    "closed_at": "2019-12-25T19:09:34Z",
    "created_at": "2019-07-01T18:14:29Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "support function fields in characteristic zero",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28094",
    "user": "https://github.com/BrentBaccala"
}
```
Current function field code only works in prime characteristic.

This ticket supports function fields over QQ and NumberField's.

After Trac #25390 is integrated, it should also support function fields over QQbar.

Keywords: function fields

Branch/Commit: 77dbf93d3116cf33e090d79607803d96c349e68b

Reviewer: Travis Scrimshaw, Kwankyu Lee

Author: Brent Baccala

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28094





---

archive/issue_comments_544166.json:
```json
{
    "body": "Description of algorithm to decompose prime ideals in an extension",
    "created_at": "2019-10-10T01:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544166",
    "user": "https://github.com/BrentBaccala"
}
```

Description of algorithm to decompose prime ideals in an extension



---

archive/issue_comments_544167.json:
```json
{
    "body": "Attachment [decomposition.pdf](tarball://root/attachments/some-uuid/ticket28094/decomposition.pdf) by @BrentBaccala created at 2019-10-10 01:22:29\n\nLaTex source of decomposition.pdf",
    "created_at": "2019-10-10T01:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544167",
    "user": "https://github.com/BrentBaccala"
}
```

Attachment [decomposition.pdf](tarball://root/attachments/some-uuid/ticket28094/decomposition.pdf) by @BrentBaccala created at 2019-10-10 01:22:29

LaTex source of decomposition.pdf



---

archive/issue_comments_544168.json:
```json
{
    "body": "Changing branch from \"\" to \"public/28094\"",
    "created_at": "2019-10-10T02:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544168",
    "user": "https://github.com/BrentBaccala"
}
```

Changing branch from "" to "public/28094"



---

archive/issue_comments_544169.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [decomposition.tex](tarball://root/attachments/some-uuid/ticket28094/decomposition.tex) by @BrentBaccala created at 2019-10-10 02:02:08\n\nLast 10 new commits:",
    "created_at": "2019-10-10T02:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544169",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:1'></a>Attachment [decomposition.tex](tarball://root/attachments/some-uuid/ticket28094/decomposition.tex) by @BrentBaccala created at 2019-10-10 02:02:08

Last 10 new commits:



---

archive/issue_events_069647.json:
```json
{
    "actor": "https://github.com/BrentBaccala",
    "created_at": "2019-10-10T02:02:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28094#event-69647"
}
```



---

archive/issue_comments_544170.json:
```json
{
    "body": "Changing commit from \"\" to \"b0862a94a9601814bd0d6fd941baae6e2cc2ed2d\"",
    "created_at": "2019-10-10T02:02:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544170",
    "user": "https://github.com/BrentBaccala"
}
```

Changing commit from "" to "b0862a94a9601814bd0d6fd941baae6e2cc2ed2d"



---

archive/issue_comments_544171.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-11T03:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544171",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544172.json:
```json
{
    "body": "Changing commit from \"b0862a94a9601814bd0d6fd941baae6e2cc2ed2d\" to \"865d513907819a415a2135b48d11f638aea021de\"",
    "created_at": "2019-10-11T03:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544172",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b0862a94a9601814bd0d6fd941baae6e2cc2ed2d" to "865d513907819a415a2135b48d11f638aea021de"



---

archive/issue_comments_544173.json:
```json
{
    "body": "<a id='comment:3'></a>Current status of this ticket:\n\n1. It mostly works!\n\n2. There's a new algorithm (see attached pdf and tex files) to compute decomposition of prime ideals in extension fields.  The older algorithm, which only works in characteristic p, is still used in characteristic p.\n\n3. One way of testing the new decomposition algorithm is to comment out the old algorithm.  This produces a bunch of failures in the test cases, but they all look like different ways of writing the same ideals, not actual failures.\n\n4. It needs test cases.  Lots of them.  We have almost no tests for characteristic zero.  Many of the characteristic p test cases could be adapted to characteristic zero.\n\n5. Once Trac #25390 is integrated, it should work over the algebraic field.",
    "created_at": "2019-10-11T03:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544173",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:3'></a>Current status of this ticket:

1. It mostly works!

2. There's a new algorithm (see attached pdf and tex files) to compute decomposition of prime ideals in extension fields.  The older algorithm, which only works in characteristic p, is still used in characteristic p.

3. One way of testing the new decomposition algorithm is to comment out the old algorithm.  This produces a bunch of failures in the test cases, but they all look like different ways of writing the same ideals, not actual failures.

4. It needs test cases.  Lots of them.  We have almost no tests for characteristic zero.  Many of the characteristic p test cases could be adapted to characteristic zero.

5. Once Trac #25390 is integrated, it should work over the algebraic field.



---

archive/issue_comments_544174.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-11T16:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544174",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544175.json:
```json
{
    "body": "Changing commit from \"865d513907819a415a2135b48d11f638aea021de\" to \"6e9b58faf623a5bd83a20fc8703995ffa3e8658c\"",
    "created_at": "2019-10-11T16:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544175",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "865d513907819a415a2135b48d11f638aea021de" to "6e9b58faf623a5bd83a20fc8703995ffa3e8658c"



---

archive/issue_comments_544176.json:
```json
{
    "body": "Changing commit from \"6e9b58faf623a5bd83a20fc8703995ffa3e8658c\" to \"4e584b5c3779bf2723ab8b543d6efe762030d1ec\"",
    "created_at": "2019-10-11T16:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544176",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6e9b58faf623a5bd83a20fc8703995ffa3e8658c" to "4e584b5c3779bf2723ab8b543d6efe762030d1ec"



---

archive/issue_comments_544177.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-11T16:46:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544177",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544178.json:
```json
{
    "body": "Changing commit from \"4e584b5c3779bf2723ab8b543d6efe762030d1ec\" to \"49c3aec301f0439f18f66413f0c16d1360f32584\"",
    "created_at": "2019-10-24T19:53:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544178",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4e584b5c3779bf2723ab8b543d6efe762030d1ec" to "49c3aec301f0439f18f66413f0c16d1360f32584"



---

archive/issue_comments_544179.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-24T19:53:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544180.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-24T19:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544181.json:
```json
{
    "body": "Changing commit from \"49c3aec301f0439f18f66413f0c16d1360f32584\" to \"76cd59e3f6e077980248314e33de020c5647da81\"",
    "created_at": "2019-10-24T19:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544181",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "49c3aec301f0439f18f66413f0c16d1360f32584" to "76cd59e3f6e077980248314e33de020c5647da81"



---

archive/issue_comments_544182.json:
```json
{
    "body": "Changing commit from \"76cd59e3f6e077980248314e33de020c5647da81\" to \"bb6d83c7d979df945de62bdfb2d7a62b16eb5167\"",
    "created_at": "2019-10-27T18:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "76cd59e3f6e077980248314e33de020c5647da81" to "bb6d83c7d979df945de62bdfb2d7a62b16eb5167"



---

archive/issue_comments_544183.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-27T18:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544184.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-27T18:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544184",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544185.json:
```json
{
    "body": "Changing commit from \"bb6d83c7d979df945de62bdfb2d7a62b16eb5167\" to \"a72c5188a801af2bc6a2225365bb5f76c5d2730f\"",
    "created_at": "2019-10-27T18:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bb6d83c7d979df945de62bdfb2d7a62b16eb5167" to "a72c5188a801af2bc6a2225365bb5f76c5d2730f"



---

archive/issue_comments_544186.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n Current function field code only works in prime characteristic.\n \n-First step is to support function fields over QQ and NumberField's.\n+This ticket supports function fields over QQ and NumberField's.\n \n-Next step is to support function fields over QQbar.\n+After Trac #25390 is integrated, it should also support function fields over QQbar.\n \n Issue created by migration from https://trac.sagemath.org/ticket/28094\n \n``````\n",
    "created_at": "2019-10-27T18:11:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544186",
    "user": "https://github.com/BrentBaccala"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
 Current function field code only works in prime characteristic.
 
-First step is to support function fields over QQ and NumberField's.
+This ticket supports function fields over QQ and NumberField's.
 
-Next step is to support function fields over QQbar.
+After Trac #25390 is integrated, it should also support function fields over QQbar.
 
 Issue created by migration from https://trac.sagemath.org/ticket/28094
 
``````




---

archive/issue_comments_544187.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-27T18:11:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544187",
    "user": "https://github.com/BrentBaccala"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_544188.json:
```json
{
    "body": "Changing commit from \"a72c5188a801af2bc6a2225365bb5f76c5d2730f\" to \"07b6a0c20a26c08aaf16c192830cd095128ae2a7\"",
    "created_at": "2019-11-04T22:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544188",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a72c5188a801af2bc6a2225365bb5f76c5d2730f" to "07b6a0c20a26c08aaf16c192830cd095128ae2a7"



---

archive/issue_comments_544189.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-11-04T22:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544189",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544190.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-11-05T01:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544190",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_544191.json:
```json
{
    "body": "<a id='comment:12'></a>Some little things from a quick read through:\n\n```diff\n         - ``separating_element`` -- separating element of the function field;\n-            the default is the generator of the rational function field\n+          the default is the generator of the rational function field\n```\n\n```diff\n-Function fields over the rational field are supported:\n+Function fields over the rational field are supported::\n```\n\n```diff\n-    G.-M.Greuel, S.Laplagne, F.Seelisch: Normalization of Rings (2009).\n+    G.-M. Greuel, S. Laplagne, F. Seelisch: Normalization of Rings (2009).\n```\n\nMissing doctests on `_singular_normal` and `FunctionFieldIdeal_global.__init__` (which should be a `TestSuite(foo).run()`).\n\nIn `FunctionFieldIdeal_global.gens_two()`, it should be `ALGORITHM:` and no indentation there, and without dollar signs.\n\nIn `FunctionFieldHigherDerivation_charzero._derive`, I don't see the point of the internal `derive` function. Also, I believe it is considered better practice to do `def derivative(f): return f.derivative()` since you are naming the function.\n\nIn `FunctionFieldMaximalOrder_global.decomposition`, the `.. TODO::` block needs to be indented. I would also do\n\n```diff\n-is done in `FunctionFieldMaximalOrder_global`'s `decomposition`\n+is done in :meth:`FunctionFieldMaximalOrder_global.decomposition()`\n```",
    "created_at": "2019-11-05T01:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544191",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Some little things from a quick read through:

```diff
         - ``separating_element`` -- separating element of the function field;
-            the default is the generator of the rational function field
+          the default is the generator of the rational function field
```

```diff
-Function fields over the rational field are supported:
+Function fields over the rational field are supported::
```

```diff
-    G.-M.Greuel, S.Laplagne, F.Seelisch: Normalization of Rings (2009).
+    G.-M. Greuel, S. Laplagne, F. Seelisch: Normalization of Rings (2009).
```

Missing doctests on `_singular_normal` and `FunctionFieldIdeal_global.__init__` (which should be a `TestSuite(foo).run()`).

In `FunctionFieldIdeal_global.gens_two()`, it should be `ALGORITHM:` and no indentation there, and without dollar signs.

In `FunctionFieldHigherDerivation_charzero._derive`, I don't see the point of the internal `derive` function. Also, I believe it is considered better practice to do `def derivative(f): return f.derivative()` since you are naming the function.

In `FunctionFieldMaximalOrder_global.decomposition`, the `.. TODO::` block needs to be indented. I would also do

```diff
-is done in `FunctionFieldMaximalOrder_global`'s `decomposition`
+is done in :meth:`FunctionFieldMaximalOrder_global.decomposition()`
```



---

archive/issue_comments_544192.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-01T04:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544192",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544193.json:
```json
{
    "body": "Changing commit from \"07b6a0c20a26c08aaf16c192830cd095128ae2a7\" to \"f9bab18e403c62f5f66d591e11008bd6a0c134c5\"",
    "created_at": "2019-12-01T04:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544193",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "07b6a0c20a26c08aaf16c192830cd095128ae2a7" to "f9bab18e403c62f5f66d591e11008bd6a0c134c5"



---

archive/issue_comments_544194.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-12-01T04:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544194",
    "user": "https://github.com/BrentBaccala"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_544195.json:
```json
{
    "body": "<a id='comment:14'></a>I've addressed all of the issues from comment:12 and have fixed a serious bug that I uncovered with some more testing.\n\nI'd like to add some more test cases for function fields over `QQbar` (and likely will), but other than that I again think that this ticket is ready for review.",
    "created_at": "2019-12-01T04:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544195",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:14'></a>I've addressed all of the issues from comment:12 and have fixed a serious bug that I uncovered with some more testing.

I'd like to add some more test cases for function fields over `QQbar` (and likely will), but other than that I again think that this ticket is ready for review.



---

archive/issue_comments_544196.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-12-06T07:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544196",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_544197.json:
```json
{
    "body": "<a id='comment:15'></a>Before the patch, \n\n```\nsage: K.<x> = FunctionField(GF(3))\nsage: _.<Y> = K[]\nsage: L.<y> = K.extension(Y-x)\nsage: y.zeros()\n[Place (x)]\n```\nAfter the patch, \n\n```\nsage: K.<x> = FunctionField(GF(3))\nsage: _.<Y> = K[]\nsage: L.<y> = K.extension(Y-x)\nsage: y.zeros()\n[Place (x, 0)]\n```",
    "created_at": "2019-12-06T07:01:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544197",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:15'></a>Before the patch, 

```
sage: K.<x> = FunctionField(GF(3))
sage: _.<Y> = K[]
sage: L.<y> = K.extension(Y-x)
sage: y.zeros()
[Place (x)]
```
After the patch, 

```
sage: K.<x> = FunctionField(GF(3))
sage: _.<Y> = K[]
sage: L.<y> = K.extension(Y-x)
sage: y.zeros()
[Place (x, 0)]
```



---

archive/issue_comments_544198.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-06T21:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544199.json:
```json
{
    "body": "Changing commit from \"f9bab18e403c62f5f66d591e11008bd6a0c134c5\" to \"87fe1472c7da2912d4ff68c1cc42b4fe3a8447b4\"",
    "created_at": "2019-12-06T21:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f9bab18e403c62f5f66d591e11008bd6a0c134c5" to "87fe1472c7da2912d4ff68c1cc42b4fe3a8447b4"



---

archive/issue_comments_544200.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-12-06T21:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544200",
    "user": "https://github.com/BrentBaccala"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_544201.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 klee]:\n\nLooks like I dropped some code during one of my refactoring steps.  Fixed.",
    "created_at": "2019-12-06T21:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544201",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:17'></a>Replying to [comment:15 klee]:

Looks like I dropped some code during one of my refactoring steps.  Fixed.



---

archive/issue_comments_544202.json:
```json
{
    "body": "Changing commit from \"87fe1472c7da2912d4ff68c1cc42b4fe3a8447b4\" to \"492a6677006eedd3a7205add2d363f0424edfb1c\"",
    "created_at": "2019-12-10T05:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544202",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "87fe1472c7da2912d4ff68c1cc42b4fe3a8447b4" to "492a6677006eedd3a7205add2d363f0424edfb1c"



---

archive/issue_comments_544203.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-10T05:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544203",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544204.json:
```json
{
    "body": "<a id='comment:19'></a>Kwankyu, can you do a check of the mathematical correctness? I can recheck the code, but I doubt there will be anything more from my side.",
    "created_at": "2019-12-12T04:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544204",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>Kwankyu, can you do a check of the mathematical correctness? I can recheck the code, but I doubt there will be anything more from my side.



---

archive/issue_comments_544205.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 tscrim]:\n> Kwankyu, can you do a check of the mathematical correctness? I can recheck the code, but I doubt there will be anything more from my side.\n\n\nOk. That is on my to-do list.",
    "created_at": "2019-12-12T05:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544205",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:20'></a>Replying to [comment:19 tscrim]:
> Kwankyu, can you do a check of the mathematical correctness? I can recheck the code, but I doubt there will be anything more from my side.


Ok. That is on my to-do list.



---

archive/issue_comments_544206.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-19T06:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544206",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544207.json:
```json
{
    "body": "Changing commit from \"492a6677006eedd3a7205add2d363f0424edfb1c\" to \"6760fd41d1676cbef776396b9ea28487e8524871\"",
    "created_at": "2019-12-19T06:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "492a6677006eedd3a7205add2d363f0424edfb1c" to "6760fd41d1676cbef776396b9ea28487e8524871"



---

archive/issue_comments_544208.json:
```json
{
    "body": "<a id='comment:22'></a>It is a nice work.  I made lots of small changes to tidy up the overall function field code. Most of them are just for better style  and for better naming. I made also some refactoring to add more functionality to function fields of char zero.\n\nI give positive review on the base code. Please review on my part of modifications.  Then this is good to go.",
    "created_at": "2019-12-19T06:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544208",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:22'></a>It is a nice work.  I made lots of small changes to tidy up the overall function field code. Most of them are just for better style  and for better naming. I made also some refactoring to add more functionality to function fields of char zero.

I give positive review on the base code. Please review on my part of modifications.  Then this is good to go.



---

archive/issue_comments_544209.json:
```json
{
    "body": "<a id='comment:23'></a>I observe a serious speed regression on computing maximal orders of global function fields:\n\nPreviously,\n\n```\nsage: k.<a>=GF(3^3)\n....: K.<x>=FunctionField(k); _.<s>=K[]\n....: L.<y>=K.extension(s^9 + x^72*s^3 + x^96*s + 2*x^104 + 2*x^96) \n....: \nsage: time L.maximal_order()\nCPU times: user 3.41 s, sys: 33.8 ms, total: 3.44 s\nWall time: 3.45 s\nMaximal order of Function field in y defined by y^9 + x^72*y^3 + x^96*y + 2*x^104 + 2*x^96\n```\nNow with the patch,\n\n```\nsage: k.<a>=GF(3^3)\n....: K.<x>=FunctionField(k); _.<s>=K[]\n....: L.<y>=K.extension(s^9 + x^72*s^3 + x^96*s + 2*x^104 + 2*x^96) \n....: \nsage: time L.maximal_order()\nCPU times: user 35.1 s, sys: 168 ms, total: 35.3 s\nWall time: 35.2 s\nMaximal order of Function field in y defined by y^9 + x^72*y^3 + x^96*y + 2*x^104 + 2*x^96\n```\n\nThis is actually expected because now  Singular's generic normalization algorithm is used while previously a custom implementation (in `ext/singular/function_field/core.lib`)of Leonard-Pellikaan-Singh-Swanson algorithm  specialized for finite field was used.\n\nI think we should recover the previous algorithm for global function fields.",
    "created_at": "2019-12-19T10:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544209",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:23'></a>I observe a serious speed regression on computing maximal orders of global function fields:

Previously,

```
sage: k.<a>=GF(3^3)
....: K.<x>=FunctionField(k); _.<s>=K[]
....: L.<y>=K.extension(s^9 + x^72*s^3 + x^96*s + 2*x^104 + 2*x^96) 
....: 
sage: time L.maximal_order()
CPU times: user 3.41 s, sys: 33.8 ms, total: 3.44 s
Wall time: 3.45 s
Maximal order of Function field in y defined by y^9 + x^72*y^3 + x^96*y + 2*x^104 + 2*x^96
```
Now with the patch,

```
sage: k.<a>=GF(3^3)
....: K.<x>=FunctionField(k); _.<s>=K[]
....: L.<y>=K.extension(s^9 + x^72*s^3 + x^96*s + 2*x^104 + 2*x^96) 
....: 
sage: time L.maximal_order()
CPU times: user 35.1 s, sys: 168 ms, total: 35.3 s
Wall time: 35.2 s
Maximal order of Function field in y defined by y^9 + x^72*y^3 + x^96*y + 2*x^104 + 2*x^96
```

This is actually expected because now  Singular's generic normalization algorithm is used while previously a custom implementation (in `ext/singular/function_field/core.lib`)of Leonard-Pellikaan-Singh-Swanson algorithm  specialized for finite field was used.

I think we should recover the previous algorithm for global function fields.



---

archive/issue_comments_544210.json:
```json
{
    "body": "Changing commit from \"6760fd41d1676cbef776396b9ea28487e8524871\" to \"77dbf93d3116cf33e090d79607803d96c349e68b\"",
    "created_at": "2019-12-19T12:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6760fd41d1676cbef776396b9ea28487e8524871" to "77dbf93d3116cf33e090d79607803d96c349e68b"



---

archive/issue_comments_544211.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-12-19T12:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_544212.json:
```json
{
    "body": "<a id='comment:25'></a>By the way, I get this timing on Mac pro\n\n```\nsage: k.<a>=GF(3^3)\n....: K.<x>=FunctionField(k); _.<s>=K[]\n....: L.<y>=K.extension(s^9 + x^72*s^3 + x^96*s + 2*x^104 + 2*x^96) \n....: \nsage: time L.genus() # 5.08s    \nCPU times: user 27.3 s, sys: 83.7 ms, total: 27.4 s\nWall time: 27.4 s\n12\n```\n5.08s is the timing I got more than two years ago on a slower  labtop. I wonder what have happened with sage meanwhile. Sigh..",
    "created_at": "2019-12-19T12:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544212",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:25'></a>By the way, I get this timing on Mac pro

```
sage: k.<a>=GF(3^3)
....: K.<x>=FunctionField(k); _.<s>=K[]
....: L.<y>=K.extension(s^9 + x^72*s^3 + x^96*s + 2*x^104 + 2*x^96) 
....: 
sage: time L.genus() # 5.08s    
CPU times: user 27.3 s, sys: 83.7 ms, total: 27.4 s
Wall time: 27.4 s
12
```
5.08s is the timing I got more than two years ago on a slower  labtop. I wonder what have happened with sage meanwhile. Sigh..



---

archive/issue_comments_544213.json:
```json
{
    "body": "<a id='comment:26'></a>Approved.  We can study the performance regression on another ticket.",
    "created_at": "2019-12-20T02:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544213",
    "user": "https://github.com/BrentBaccala"
}
```

<a id='comment:26'></a>Approved.  We can study the performance regression on another ticket.



---

archive/issue_comments_544214.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-12-20T02:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544214",
    "user": "https://github.com/BrentBaccala"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_544215.json:
```json
{
    "body": "<a id='comment:27'></a>no author name and no reviewer name !",
    "created_at": "2019-12-20T08:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544215",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>no author name and no reviewer name !



---

archive/issue_comments_544216.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw, Kwankyu Lee\"",
    "created_at": "2019-12-20T08:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544216",
    "user": "https://github.com/kwankyu"
}
```

Changing reviewer from "" to "Travis Scrimshaw, Kwankyu Lee"



---

archive/issue_comments_544217.json:
```json
{
    "body": "Changing author from \"\" to \"Brent Baccala\"",
    "created_at": "2019-12-20T08:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544217",
    "user": "https://github.com/kwankyu"
}
```

Changing author from "" to "Brent Baccala"



---

archive/issue_events_069648.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-25T19:09:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28094#event-69648"
}
```



---

archive/issue_comments_544218.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-12-25T19:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544218",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_544219.json:
```json
{
    "body": "Changing branch from \"public/28094\" to \"77dbf93d3116cf33e090d79607803d96c349e68b\"",
    "created_at": "2019-12-25T19:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28094",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28094#issuecomment-544219",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/28094" to "77dbf93d3116cf33e090d79607803d96c349e68b"
