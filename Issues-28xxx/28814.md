# Issue 28814: Conversion of scientific notation floats/RDF,etc... incorrect in Mathematica interface

archive/issues_028577.json:
```json
{
    "body": "Exploration of a problem reported in an [ask.sagemath question](https://ask.sagemath.org/question/48908/how-to-avoid-scientific-notation-of-numbers-in-the-mathematica-interface/).\n\nThe conversion of large or small floating point constants (needing scientific notation) to mathematica is incorrect:\n\n```\n# Reference\nsage: 3.5.log().n()\n1.25276296849537\n# This works\nsage: mathematica.N(mathematica.Log(3.5)).sage()\n1.252762968495368\n# Scale up works in Sage:\nsage: 3.5e6.log().n()\n15.0682735264596\n# Doesn't work when translated to to mathematica\nsage: mathematica.N(mathematica.Log(3.5e6)).sage()\nlog(3.5*e6)\n# Possible cause : confusion with SR\nsage: mathematica.N(mathematica.Log(3.5e6)).sage().parent()\nSymbolic Ring\n# Ditto for small values. OK in Sage\nsage: sin(1e-8).n()\n1.00000000000000e-8\n# Fails when converted to mathematica:\nsage: mathematica.N(mathematica.Sin(1e-8)).sage()\n-1.0*sin(-1.0*e + 8.0)\n# Same possible cause\nsage: mathematica.N(mathematica.Sin(1e-8)).sage().parent()\nSymbolic Ring\n```\n\nThe reverse conversion (Mathematica --> Sage) works...\n\n```\nsage: mathematica.N(mathematica.Exp(500))\n1.4035922178528375*^217\nsage: mathematica.N(mathematica.Exp(500)).sage()\n1.4035922178528375e+217\nsage: mathematica.N(mathematica.Exp(-500))\n7.124576406741286*^-218\nsage: mathematica.N(mathematica.Exp(-500)).sage()\n7.124576406741286e-218\n```\n\n...as long as Sage is able to express it:\n\n```\nsage: mathematica.N(mathematica.Exp(1000))\n1.970071114017*^434\nsage: mathematica.N(mathematica.Exp(1000)).sage()\n+infinity\nsage: mathematica.N(mathematica.Exp(-1000))\n5.0759588975495*^-435\nsage: mathematica.N(mathematica.Exp(-1000)).sage()\n0.0\n```\n\nThe latter quantities over/underflow the default Sage floating point systems...\n\n\n**CC:**  @yuan-zhou\n\n**Keywords:** mathematica conversions\n\n**Branch/Commit:** [37c5e193d9229517fd24be077f2e6cf2fc82b9b2](https://github.com/sagemath/sagetrac-mirror/commit/37c5e193d9229517fd24be077f2e6cf2fc82b9b2)\n\n**Reviewer:** Dima Pasechnik\n\n**Author:** Markus Wageringel\n\nIssue created by migration from https://trac.sagemath.org/ticket/28814\n\n",
    "closed_at": "2020-09-15T22:00:52Z",
    "created_at": "2019-11-28T14:10:12Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Conversion of scientific notation floats/RDF,etc... incorrect in Mathematica interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28814",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
Exploration of a problem reported in an [ask.sagemath question](https://ask.sagemath.org/question/48908/how-to-avoid-scientific-notation-of-numbers-in-the-mathematica-interface/).

The conversion of large or small floating point constants (needing scientific notation) to mathematica is incorrect:

```
# Reference
sage: 3.5.log().n()
1.25276296849537
# This works
sage: mathematica.N(mathematica.Log(3.5)).sage()
1.252762968495368
# Scale up works in Sage:
sage: 3.5e6.log().n()
15.0682735264596
# Doesn't work when translated to to mathematica
sage: mathematica.N(mathematica.Log(3.5e6)).sage()
log(3.5*e6)
# Possible cause : confusion with SR
sage: mathematica.N(mathematica.Log(3.5e6)).sage().parent()
Symbolic Ring
# Ditto for small values. OK in Sage
sage: sin(1e-8).n()
1.00000000000000e-8
# Fails when converted to mathematica:
sage: mathematica.N(mathematica.Sin(1e-8)).sage()
-1.0*sin(-1.0*e + 8.0)
# Same possible cause
sage: mathematica.N(mathematica.Sin(1e-8)).sage().parent()
Symbolic Ring
```

The reverse conversion (Mathematica --> Sage) works...

```
sage: mathematica.N(mathematica.Exp(500))
1.4035922178528375*^217
sage: mathematica.N(mathematica.Exp(500)).sage()
1.4035922178528375e+217
sage: mathematica.N(mathematica.Exp(-500))
7.124576406741286*^-218
sage: mathematica.N(mathematica.Exp(-500)).sage()
7.124576406741286e-218
```

...as long as Sage is able to express it:

```
sage: mathematica.N(mathematica.Exp(1000))
1.970071114017*^434
sage: mathematica.N(mathematica.Exp(1000)).sage()
+infinity
sage: mathematica.N(mathematica.Exp(-1000))
5.0759588975495*^-435
sage: mathematica.N(mathematica.Exp(-1000)).sage()
0.0
```

The latter quantities over/underflow the default Sage floating point systems...


**CC:**  @yuan-zhou

**Keywords:** mathematica conversions

**Branch/Commit:** [37c5e193d9229517fd24be077f2e6cf2fc82b9b2](https://github.com/sagemath/sagetrac-mirror/commit/37c5e193d9229517fd24be077f2e6cf2fc82b9b2)

**Reviewer:** Dima Pasechnik

**Author:** Markus Wageringel

Issue created by migration from https://trac.sagemath.org/ticket/28814





---

archive/issue_events_255658.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2019-11-28T21:06:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "rename": {
        "from": "Conversion of scientific notation floats/RDF,etc... incorrect",
        "to": "Conversion of scientific notation floats/RDF,etc... incorrect in Mathematica interface"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255658"
}
```



---

archive/issue_comments_452144.json:
```json
{
    "body": "<a id='comment:1'></a>\nAnother workaround to avoid scientific notation:\n\n```\nsage: mathematica.Log(3.5e6.str(no_sci=2)).sage()\n15.068273526459642\n```\nThe overflows might be difficult to avoid since that is a problem of `SR`, and the symbolic ring is the closest thing in Sage that Mathematica expressions can convert to.",
    "created_at": "2019-11-28T21:06:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452144",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>
Another workaround to avoid scientific notation:

```
sage: mathematica.Log(3.5e6.str(no_sci=2)).sage()
15.068273526459642
```
The overflows might be difficult to avoid since that is a problem of `SR`, and the symbolic ring is the closest thing in Sage that Mathematica expressions can convert to.



---

archive/issue_events_255659.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2019-11-28T21:06:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "component: interfaces",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255659"
}
```



---

archive/issue_events_255660.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2019-11-28T21:06:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "component: interfaces: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255660"
}
```



---

archive/issue_events_255661.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-11-28T21:13:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "component: interfaces: optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255661"
}
```



---

archive/issue_events_255662.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2019-11-28T21:13:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "component: interfaces",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255662"
}
```



---

archive/issue_comments_452145.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe Mathematica interface is standard (as is Maple's). What is optional is having Mathematica (or Maple) installed...",
    "created_at": "2019-11-28T21:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452145",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:2'></a>
The Mathematica interface is standard (as is Maple's). What is optional is having Mathematica (or Maple) installed...



---

archive/issue_comments_452146.json:
```json
{
    "body": "**Assignee:** @williamstein",
    "created_at": "2019-11-28T21:13:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452146",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Assignee:** @williamstein



---

archive/issue_comments_452147.json:
```json
{
    "body": "<a id='comment:3'></a>\nSorry, I must have inavertently assigned this ticket to \"was\".",
    "created_at": "2019-11-28T21:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452147",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:3'></a>
Sorry, I must have inavertently assigned this ticket to "was".



---

archive/issue_comments_452148.json:
```json
{
    "body": "**Remove assignee** @williamstein.",
    "created_at": "2019-11-28T21:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452148",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Remove assignee** @williamstein.



---

archive/issue_comments_452149.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [gh-mwageringel](#comment%3A1):\n> Another workaround to avoid scientific notation:\n> \n> ```\n> sage: mathematica.Log(3.5e6.str(no_sci=2)).sage()\n> 15.068273526459642\n> ```\n\n\nThanks ! I was unaware of this one...\n\n> The overflows might be difficult to avoid since that is a problem of `SR`, and the symbolic ring is the closest thing in Sage that Mathematica expressions can convert to.\n\n\nIndeed. That's a consequence of [IEE 754](https://fr.wikipedia.org/wiki/IEEE_754). Do we need Mathematica's large-absolute-magnitude floats ?",
    "created_at": "2019-11-28T21:18:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452149",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:4'></a>
Replying to [gh-mwageringel](#comment%3A1):
> Another workaround to avoid scientific notation:
> 
> ```
> sage: mathematica.Log(3.5e6.str(no_sci=2)).sage()
> 15.068273526459642
> ```


Thanks ! I was unaware of this one...

> The overflows might be difficult to avoid since that is a problem of `SR`, and the symbolic ring is the closest thing in Sage that Mathematica expressions can convert to.


Indeed. That's a consequence of [IEE 754](https://fr.wikipedia.org/wiki/IEEE_754). Do we need Mathematica's large-absolute-magnitude floats ?



---

archive/issue_comments_452150.json:
```json
{
    "body": "**Commit:** [af20e1f8b94d3fdfc8943260e93934fe8bea21c1](https://github.com/sagemath/sagetrac-mirror/commit/af20e1f8b94d3fdfc8943260e93934fe8bea21c1)",
    "created_at": "2019-12-21T16:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452150",
    "user": "https://github.com/mwageringel"
}
```

**Commit:** [af20e1f8b94d3fdfc8943260e93934fe8bea21c1](https://github.com/sagemath/sagetrac-mirror/commit/af20e1f8b94d3fdfc8943260e93934fe8bea21c1)



---

archive/issue_events_255663.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2019-12-21T16:57:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255663"
}
```



---

archive/issue_comments_452151.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [charpent](#comment%3A4):\n> > The overflows might be difficult to avoid since that is a problem of `SR`, and the symbolic ring is the closest thing in Sage that Mathematica expressions can convert to.\n\n> \n> Indeed. That's a consequence of [IEE 754](https://fr.wikipedia.org/wiki/IEEE_754). Do we need Mathematica's large-absolute-magnitude floats ?\n\n\nActually I was wrong about `SR` \u2013 it does support arbitrary precision floating point numbers. The conversion from Mathematica to Sage treats them as elements of `RDF` before embedding them in `SR`, though. Here is a branch where they are converted to elements of `RealField` instead which automatically chooses a suitable precision.\n\nMoreover, I implemented the conversions from Sage to Mathematica for elements of `RDF`, `CDF`, `RealField` and `ComplexField` in order to handle the scientific notation.\n\n---\n\nThese changes have the potential for some numerical noise. The function `symbolic_expression_from_string` is also used by `SR` to create expressions from strings, so floating point numbers parsed from strings are now backed by `RealField` elements instead of `RDF`. This is also why some tests in sandpiles fail with the current branch.\n\n```\nsage: SR('.3333333333333333333333333333333333333')  # before: internally an element of RDF\n0.3333333333333333\nsage: SR('.3333333333333333333333333333333333333')  # after: now internally an element of RealField\n0.333333333333333333333333333333333333\nsage: SR(.3333333333333333333333333333333333333)    # unaffected by these changes\n0.333333333333333333333333333333333333\n```\n\nIs it ok to change this? It seems desirable to preserve the precision here, but I am not sure if this might have other negative consequences.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af20e1f8b94d3fdfc8943260e93934fe8bea21c1\">af20e1f</a></td><td><code>28814: fix Mathematica-conversion of floating-point numbers</code></td></tr></table>\n",
    "created_at": "2019-12-21T16:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452151",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:5'></a>
Replying to [charpent](#comment%3A4):
> > The overflows might be difficult to avoid since that is a problem of `SR`, and the symbolic ring is the closest thing in Sage that Mathematica expressions can convert to.

> 
> Indeed. That's a consequence of [IEE 754](https://fr.wikipedia.org/wiki/IEEE_754). Do we need Mathematica's large-absolute-magnitude floats ?


Actually I was wrong about `SR` – it does support arbitrary precision floating point numbers. The conversion from Mathematica to Sage treats them as elements of `RDF` before embedding them in `SR`, though. Here is a branch where they are converted to elements of `RealField` instead which automatically chooses a suitable precision.

Moreover, I implemented the conversions from Sage to Mathematica for elements of `RDF`, `CDF`, `RealField` and `ComplexField` in order to handle the scientific notation.

---

These changes have the potential for some numerical noise. The function `symbolic_expression_from_string` is also used by `SR` to create expressions from strings, so floating point numbers parsed from strings are now backed by `RealField` elements instead of `RDF`. This is also why some tests in sandpiles fail with the current branch.

```
sage: SR('.3333333333333333333333333333333333333')  # before: internally an element of RDF
0.3333333333333333
sage: SR('.3333333333333333333333333333333333333')  # after: now internally an element of RealField
0.333333333333333333333333333333333333
sage: SR(.3333333333333333333333333333333333333)    # unaffected by these changes
0.333333333333333333333333333333333333
```

Is it ok to change this? It seems desirable to preserve the precision here, but I am not sure if this might have other negative consequences.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af20e1f8b94d3fdfc8943260e93934fe8bea21c1">af20e1f</a></td><td><code>28814: fix Mathematica-conversion of floating-point numbers</code></td></tr></table>




---

archive/issue_comments_452152.json:
```json
{
    "body": "**Branch:** [public/28814](https://github.com/sagemath/sagetrac-mirror/tree/public/28814)",
    "created_at": "2019-12-21T16:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452152",
    "user": "https://github.com/mwageringel"
}
```

**Branch:** [public/28814](https://github.com/sagemath/sagetrac-mirror/tree/public/28814)



---

archive/issue_events_255664.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2019-12-21T16:57:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255664"
}
```



---

archive/issue_events_255665.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2019-12-21T16:57:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255665"
}
```



---

archive/issue_comments_452153.json:
```json
{
    "body": "**Changing commit** from \"[af20e1f8b94d3fdfc8943260e93934fe8bea21c1](https://github.com/sagemath/sagetrac-mirror/commit/af20e1f8b94d3fdfc8943260e93934fe8bea21c1)\" to \"[0c2b2696fe173db5fdb9a3110ead0b95c200859f](https://github.com/sagemath/sagetrac-mirror/commit/0c2b2696fe173db5fdb9a3110ead0b95c200859f)\".",
    "created_at": "2020-02-03T20:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[af20e1f8b94d3fdfc8943260e93934fe8bea21c1](https://github.com/sagemath/sagetrac-mirror/commit/af20e1f8b94d3fdfc8943260e93934fe8bea21c1)" to "[0c2b2696fe173db5fdb9a3110ead0b95c200859f](https://github.com/sagemath/sagetrac-mirror/commit/0c2b2696fe173db5fdb9a3110ead0b95c200859f)".



---

archive/issue_comments_452154.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e82b76814e91b97dc280c5c18c17385becd6e31\">6e82b76</a></td><td><code>28814: fix Mathematica-conversion of floating-point numbers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c2b2696fe173db5fdb9a3110ead0b95c200859f\">0c2b269</a></td><td><code>28814: fix mathematica doctests in sandpiles</code></td></tr></table>\n",
    "created_at": "2020-02-03T20:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e82b76814e91b97dc280c5c18c17385becd6e31">6e82b76</a></td><td><code>28814: fix Mathematica-conversion of floating-point numbers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c2b2696fe173db5fdb9a3110ead0b95c200859f">0c2b269</a></td><td><code>28814: fix mathematica doctests in sandpiles</code></td></tr></table>




---

archive/issue_comments_452155.json:
```json
{
    "body": "<a id='comment:8'></a>\nI have fixed the remaining doctest failures, so this could be reviewed.",
    "created_at": "2020-02-03T20:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452155",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:8'></a>
I have fixed the remaining doctest failures, so this could be reviewed.



---

archive/issue_events_255666.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2020-02-03T20:04:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255666"
}
```



---

archive/issue_events_255667.json:
```json
{
    "actor": "https://github.com/mwageringel",
    "created_at": "2020-02-03T20:04:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255667"
}
```



---

archive/issue_comments_452156.json:
```json
{
    "body": "**Author:** Markus Wageringel",
    "created_at": "2020-02-04T21:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452156",
    "user": "https://github.com/mwageringel"
}
```

**Author:** Markus Wageringel



---

archive/issue_events_255668.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255668"
}
```



---

archive/issue_events_255669.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255669"
}
```



---

archive/issue_comments_452157.json:
```json
{
    "body": "<a id='comment:10'></a>\nMoving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452157",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_452158.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2020-09-08T10:40:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452158",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_452159.json:
```json
{
    "body": "<a id='comment:12'></a>\nTested with Mathematica 12 that comes free on Raspberry Pi 4.\nThere the equivalent of `math` command is `wolfram`, so I created  a symbolic link named `math` in my PATH to point to `wolfram`.  :-)\n\n```\n$ uname -a\nLinux raspberrypi 5.4.51-v7l+ #1333 SMP Mon Aug 10 16:51:40 BST 2020 armv7l GNU/Linux\n$ ls -l `which math`\nlrwxrwxrwx 1 pi pi 16 Sep  8 11:22 /home/pi/bin/math -> /usr/bin/wolfram\n```",
    "created_at": "2020-09-08T10:40:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452159",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>
Tested with Mathematica 12 that comes free on Raspberry Pi 4.
There the equivalent of `math` command is `wolfram`, so I created  a symbolic link named `math` in my PATH to point to `wolfram`.  :-)

```
$ uname -a
Linux raspberrypi 5.4.51-v7l+ #1333 SMP Mon Aug 10 16:51:40 BST 2020 armv7l GNU/Linux
$ ls -l `which math`
lrwxrwxrwx 1 pi pi 16 Sep  8 11:22 /home/pi/bin/math -> /usr/bin/wolfram
```



---

archive/issue_events_255670.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-08T10:40:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255670"
}
```



---

archive/issue_events_255671.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-08T10:40:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255671"
}
```



---

archive/issue_events_255672.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2020-09-08T17:07:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255672"
}
```



---

archive/issue_events_255673.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2020-09-08T17:07:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255673"
}
```



---

archive/issue_comments_452160.json:
```json
{
    "body": "**Changing commit** from \"[0c2b2696fe173db5fdb9a3110ead0b95c200859f](https://github.com/sagemath/sagetrac-mirror/commit/0c2b2696fe173db5fdb9a3110ead0b95c200859f)\" to \"[37c5e193d9229517fd24be077f2e6cf2fc82b9b2](https://github.com/sagemath/sagetrac-mirror/commit/37c5e193d9229517fd24be077f2e6cf2fc82b9b2)\".",
    "created_at": "2020-09-08T17:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452160",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0c2b2696fe173db5fdb9a3110ead0b95c200859f](https://github.com/sagemath/sagetrac-mirror/commit/0c2b2696fe173db5fdb9a3110ead0b95c200859f)" to "[37c5e193d9229517fd24be077f2e6cf2fc82b9b2](https://github.com/sagemath/sagetrac-mirror/commit/37c5e193d9229517fd24be077f2e6cf2fc82b9b2)".



---

archive/issue_comments_452161.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6cd28b3b4909ed8ba4a109d9931b0d7657bad2f\">b6cd28b</a></td><td><code>28814: Merge tag '9.2.beta12' into #28814</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37c5e193d9229517fd24be077f2e6cf2fc82b9b2\">37c5e19</a></td><td><code>28814: fix libgiac doctest</code></td></tr></table>\n",
    "created_at": "2020-09-08T17:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6cd28b3b4909ed8ba4a109d9931b0d7657bad2f">b6cd28b</a></td><td><code>28814: Merge tag '9.2.beta12' into #28814</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37c5e193d9229517fd24be077f2e6cf2fc82b9b2">37c5e19</a></td><td><code>28814: fix libgiac doctest</code></td></tr></table>




---

archive/issue_comments_452162.json:
```json
{
    "body": "<a id='comment:14'></a>\nSorry, there was a failing doctest in the file `src/sage/libs/giac/giac.pyx` which has recently been added. The failure was due to the fact that, after this ticket, `SR('1.3')` is equivalent to `SR(RR('1.3'))` rather than `SR(RDF('1.3'))`.\n\nNice to see that this work with a Raspberry Pi. On Linux, the `math` and `wolfram` scripts appear to be equal. I cannot find any documentation about `math`, so perhaps we should just replace it by `wolfram` \u2013 though, I am not sure about the situation on other platforms.",
    "created_at": "2020-09-08T17:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452162",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:14'></a>
Sorry, there was a failing doctest in the file `src/sage/libs/giac/giac.pyx` which has recently been added. The failure was due to the fact that, after this ticket, `SR('1.3')` is equivalent to `SR(RR('1.3'))` rather than `SR(RDF('1.3'))`.

Nice to see that this work with a Raspberry Pi. On Linux, the `math` and `wolfram` scripts appear to be equal. I cannot find any documentation about `math`, so perhaps we should just replace it by `wolfram` – though, I am not sure about the situation on other platforms.



---

archive/issue_comments_452163.json:
```json
{
    "body": "**Changing stopgaps** from \"Cast those inconvenient quantities to rationals\" to \"\".",
    "created_at": "2020-09-08T17:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452163",
    "user": "https://github.com/mwageringel"
}
```

**Changing stopgaps** from "Cast those inconvenient quantities to rationals" to "".



---

archive/issue_comments_452164.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [dimpase](#comment%3A12):\n> Tested with Mathematica 12 that comes free on Raspberry Pi 4.\n> There the equivalent of `math` command is `wolfram`, so I created  a symbolic link named `math` in my PATH to point to `wolfram`.  :-)\n> \n> ```\n> $ uname -a\n> Linux raspberrypi 5.4.51-v7l+ #1333 SMP Mon Aug 10 16:51:40 BST 2020 armv7l GNU/Linux\n> $ ls -l `which math`\n> lrwxrwxrwx 1 pi pi 16 Sep  8 11:22 /home/pi/bin/math -> /usr/bin/wolfram\n> ```\n\n\nImagine a Beowulf cluster of these!",
    "created_at": "2020-09-08T17:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452164",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Replying to [dimpase](#comment%3A12):
> Tested with Mathematica 12 that comes free on Raspberry Pi 4.
> There the equivalent of `math` command is `wolfram`, so I created  a symbolic link named `math` in my PATH to point to `wolfram`.  :-)
> 
> ```
> $ uname -a
> Linux raspberrypi 5.4.51-v7l+ #1333 SMP Mon Aug 10 16:51:40 BST 2020 armv7l GNU/Linux
> $ ls -l `which math`
> lrwxrwxrwx 1 pi pi 16 Sep  8 11:22 /home/pi/bin/math -> /usr/bin/wolfram
> ```


Imagine a Beowulf cluster of these!



---

archive/issue_comments_452165.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [gh-mwageringel](#comment%3A14):\n> Sorry, there was a failing doctest in the file `src/sage/libs/giac/giac.pyx` which has recently been added. The failure was due to the fact that, after this ticket, `SR('1.3')` is equivalent to `SR(RR('1.3'))` rather than `SR(RDF('1.3'))`.\n> \n> Nice to see that this work with a Raspberry Pi. On Linux, the `math` and `wolfram` scripts appear to be equal. I cannot find any documentation about `math`, so perhaps we should just replace it by `wolfram` \u2013 though, I am not sure about the situation on other platforms.\n\n\n`math` was the name  until some versions ago, then in version 11 (or maybe earlier) one got both wolfram and math.\n\nPerhaps, add a runtime check for the correct name?",
    "created_at": "2020-09-08T18:20:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452165",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>
Replying to [gh-mwageringel](#comment%3A14):
> Sorry, there was a failing doctest in the file `src/sage/libs/giac/giac.pyx` which has recently been added. The failure was due to the fact that, after this ticket, `SR('1.3')` is equivalent to `SR(RR('1.3'))` rather than `SR(RDF('1.3'))`.
> 
> Nice to see that this work with a Raspberry Pi. On Linux, the `math` and `wolfram` scripts appear to be equal. I cannot find any documentation about `math`, so perhaps we should just replace it by `wolfram` – though, I am not sure about the situation on other platforms.


`math` was the name  until some versions ago, then in version 11 (or maybe earlier) one got both wolfram and math.

Perhaps, add a runtime check for the correct name?



---

archive/issue_comments_452166.json:
```json
{
    "body": "<a id='comment:17'></a>\nOn macOS, neither is provided; one needs to use `/Applications/Mathematica.app/Contents//MacOS/WolframKernel`",
    "created_at": "2020-09-08T18:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452166",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
On macOS, neither is provided; one needs to use `/Applications/Mathematica.app/Contents//MacOS/WolframKernel`



---

archive/issue_comments_452167.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [gh-mwageringel](#comment%3A14):\n> Sorry, there was a failing doctest in the file `src/sage/libs/giac/giac.pyx` which has recently been added. The failure was due to the fact that, after this ticket, `SR('1.3')` is equivalent to `SR(RR('1.3'))` rather than `SR(RDF('1.3'))`.\n\n\nOK, this works.",
    "created_at": "2020-09-08T18:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452167",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
Replying to [gh-mwageringel](#comment%3A14):
> Sorry, there was a failing doctest in the file `src/sage/libs/giac/giac.pyx` which has recently been added. The failure was due to the fact that, after this ticket, `SR('1.3')` is equivalent to `SR(RR('1.3'))` rather than `SR(RDF('1.3'))`.


OK, this works.



---

archive/issue_events_255674.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-08T18:40:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255674"
}
```



---

archive/issue_events_255675.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-09-08T18:40:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255675"
}
```



---

archive/issue_comments_452168.json:
```json
{
    "body": "<a id='comment:19'></a>\nThank you.",
    "created_at": "2020-09-08T19:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452168",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:19'></a>
Thank you.



---

archive/issue_events_255676.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-15T22:00:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255676"
}
```



---

archive/issue_events_255677.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-15T22:00:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28814#event-255677"
}
```



---

archive/issue_comments_452169.json:
```json
{
    "body": "**Changing branch** from \"[public/28814](https://github.com/sagemath/sagetrac-mirror/tree/public/28814)\" to \"[37c5e193d9229517fd24be077f2e6cf2fc82b9b2](https://github.com/sagemath/sagetrac-mirror/commit/37c5e193d9229517fd24be077f2e6cf2fc82b9b2)\".",
    "created_at": "2020-09-15T22:00:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28814#issuecomment-452169",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/28814](https://github.com/sagemath/sagetrac-mirror/tree/public/28814)" to "[37c5e193d9229517fd24be077f2e6cf2fc82b9b2](https://github.com/sagemath/sagetrac-mirror/commit/37c5e193d9229517fd24be077f2e6cf2fc82b9b2)".
