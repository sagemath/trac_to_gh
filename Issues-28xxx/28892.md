# Issue 28892: Drop package certifi

archive/issues_028655.json:
```json
{
    "body": "dependency of tornado:\n\n```\n~/src/sage.git/build/pkgs $ grep -rl 'certifi[^ce]'\ncertifi/checksums.ini\ncertifi/spkg-install\ntornado/dependencies\n```\n\nHowever, they are no longer necessary. The setup.py file shipped with tornado-4.5.2 indicates this:\n\n```\nif sys.version_info < (2, 7, 9):\n    install_requires.append('backports.ssl_match_hostname')\nif sys.version_info < (3, 4):\n    install_requires.append('singledispatch')\n    # Certifi is also optional on 2.7.9+, although making our dependencies\n    # conditional on micro version numbers seems like a bad idea\n    # until we have more declarative metadata.\n    install_requires.append('certifi')\n```\n\ncertifi should be dead weight, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,\n\n```\n-    install_requires.append('certifi')\n+    # install_requires.append('certifi')\n```\n\n\n\nCC:  @dimpase @jcamp0x2a\n\nReviewer: Michael Orlitzky\n\nDependencies: #26919\n\nResolution: wontfix\n\nIssue created by migration from https://trac.sagemath.org/ticket/28892\n\n",
    "closed_at": "2020-08-31T15:31:48Z",
    "created_at": "2019-12-16T20:17:47Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Drop package certifi",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28892",
    "user": "https://github.com/orlitzky"
}
```
dependency of tornado:

```
~/src/sage.git/build/pkgs $ grep -rl 'certifi[^ce]'
certifi/checksums.ini
certifi/spkg-install
tornado/dependencies
```

However, they are no longer necessary. The setup.py file shipped with tornado-4.5.2 indicates this:

```
if sys.version_info < (2, 7, 9):
    install_requires.append('backports.ssl_match_hostname')
if sys.version_info < (3, 4):
    install_requires.append('singledispatch')
    # Certifi is also optional on 2.7.9+, although making our dependencies
    # conditional on micro version numbers seems like a bad idea
    # until we have more declarative metadata.
    install_requires.append('certifi')
```

certifi should be dead weight, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,

```
-    install_requires.append('certifi')
+    # install_requires.append('certifi')
```



CC:  @dimpase @jcamp0x2a

Reviewer: Michael Orlitzky

Dependencies: #26919

Resolution: wontfix

Issue created by migration from https://trac.sagemath.org/ticket/28892





---

archive/issue_comments_562390.json:
```json
{
    "body": "<a id='comment:1'></a>\nTicket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562390",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>
Ticket retargeted after milestone closed



---

archive/issue_events_082531.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28892#event-82531"
}
```



---

archive/issue_events_082532.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28892#event-82532"
}
```



---

archive/issue_events_082533.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28892#event-82533"
}
```



---

archive/issue_comments_562391.json:
```json
{
    "body": "<a id='comment:2'></a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562391",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_comments_562392.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#26919\"",
    "created_at": "2020-08-13T17:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562392",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#26919"



---

archive/issue_comments_562393.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,6 @@\n-These two packages are dependencies of tornado:\n+dependency of tornado:\n \n ```\n-~/src/sage.git/build/pkgs $ grep -rl backports_ssl_match_hostname\n-tornado/dependencies\n-backports_ssl_match_hostname/SPKG.txt\n-backports_ssl_match_hostname/checksums.ini\n-\n ~/src/sage.git/build/pkgs $ grep -rl 'certifi[^ce]'\n certifi/checksums.ini\n certifi/spkg-install\n@@ -25,7 +20,7 @@\n     install_requires.append('certifi')\n ```\n \n-So, backports_ssl_match_hostname can go immediately, because our versions of python are new enough. And certifi should be dead weight too, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,\n+certifi should be dead weight, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,\n \n ```\n -    install_requires.append('certifi')\n``````\n",
    "created_at": "2020-08-13T17:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562393",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,6 @@
-These two packages are dependencies of tornado:
+dependency of tornado:
 
 ```
-~/src/sage.git/build/pkgs $ grep -rl backports_ssl_match_hostname
-tornado/dependencies
-backports_ssl_match_hostname/SPKG.txt
-backports_ssl_match_hostname/checksums.ini
-
 ~/src/sage.git/build/pkgs $ grep -rl 'certifi[^ce]'
 certifi/checksums.ini
 certifi/spkg-install
@@ -25,7 +20,7 @@
     install_requires.append('certifi')
 ```
 
-So, backports_ssl_match_hostname can go immediately, because our versions of python are new enough. And certifi should be dead weight too, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,
+certifi should be dead weight, except for the fact that the setup.py file still mistakenly (with a comment to that effect) requires it. Thus for certifi, I suggest we patch out that one line,
 
 ```
 -    install_requires.append('certifi')
``````




---

archive/issue_events_082534.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "rename": {
        "from": "Drop packages backports_ssl_match_hostname and certifi",
        "to": "Drop package certifi"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28892#event-82534"
}
```



---

archive/issue_comments_562394.json:
```json
{
    "body": "<a id='comment:3'></a>\n`backports_ssl_match_hostname` was removed in #29754, so I have narrowed the ticket to `certifi`.\n\n`tornado` is updated in #26919.\nIt should be checked what the situation with `certifi` is in the new version.",
    "created_at": "2020-08-13T17:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562394",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
`backports_ssl_match_hostname` was removed in #29754, so I have narrowed the ticket to `certifi`.

`tornado` is updated in #26919.
It should be checked what the situation with `certifi` is in the new version.



---

archive/issue_comments_562395.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -27,4 +27,4 @@\n +    # install_requires.append('certifi')\n ```\n \n-There's also a new bugfix version 4.5.3 of tornado that I guess we should update to at the same time. There are newer major releases, but they likely require more work.\n+\n``````\n",
    "created_at": "2020-08-13T17:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562395",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -27,4 +27,4 @@
 +    # install_requires.append('certifi')
 ```
 
-There's also a new bugfix version 4.5.3 of tornado that I guess we should update to at the same time. There are newer major releases, but they likely require more work.
+
``````




---

archive/issue_comments_562396.json:
```json
{
    "body": "<a id='comment:5'></a>\nAlso matplotlib 3.3.1 (#30358) wants `certifi`.",
    "created_at": "2020-08-14T20:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562396",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Also matplotlib 3.3.1 (#30358) wants `certifi`.



---

archive/issue_events_082535.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-14T20:51:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28892#event-82535"
}
```



---

archive/issue_events_082536.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-14T20:51:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28892#event-82536"
}
```



---

archive/issue_comments_562397.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-14T20:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562397",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_562398.json:
```json
{
    "body": "<a id='comment:6'></a>\nIt looks like we could comment out the dependency in matplotlib, too, but I'm not volunteering to do it so I rescind the suggestion.",
    "created_at": "2020-08-14T21:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562398",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:6'></a>
It looks like we could comment out the dependency in matplotlib, too, but I'm not volunteering to do it so I rescind the suggestion.



---

archive/issue_comments_562399.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Michael Orlitzky\"",
    "created_at": "2020-08-14T21:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562399",
    "user": "https://github.com/orlitzky"
}
```

Changing reviewer from "" to "Michael Orlitzky"



---

archive/issue_comments_562400.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-14T21:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562400",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_082537.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-08-31T15:31:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28892#event-82537"
}
```



---

archive/issue_comments_562401.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2020-08-31T15:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28892#issuecomment-562401",
    "user": "https://github.com/embray"
}
```

Resolution: wontfix
