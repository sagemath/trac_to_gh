# Issue 28708: 5 cplex doctests failed in cplex_backend.pyx

archive/issues_028471.json:
```json
{
    "body": "\n```\nsage -bt --optional=sage,optional,external src/sage/numerical/backends/cplex_backend.pyx\n```\n\ngives\n\n```\nsage -t src/sage/numerical/backends/cplex_backend.pyx\n**********************************************************************\nFile \"src/sage/numerical/backends/cplex_backend.pyx\", line 595, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint\nFailed example:\n    p.add_linear_constraint(zip(range(5), range(5), 2.0, 2.0)  # optional - CPLEX\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1121, in compile_and_execute\n        compiled = compiler(example)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 649, in compiler\n        compileflags, 1)\n      File \"<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[3]>\", line 1\n        p.add_linear_constraint(zip(range(Integer(5)), range(Integer(5)), RealNumber('2.0'), RealNumber('2.0'))  # optional - CPLEX\n                                                                                                                                  ^\n    SyntaxError: unexpected EOF while parsing\n**********************************************************************\nFile \"src/sage/numerical/backends/cplex_backend.pyx\", line 596, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint\nFailed example:\n    p.row(0)                                                     # optional - CPLEX\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[4]>\", line 1, in <module>\n        p.row(Integer(0))                                                     # optional - CPLEX\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 671, in sage.numerical.backends.cplex_backend.CPLEXBackend.row (build/cythonized/sage/numerical/backends/cplex_backend.c:8844)\n        cpdef row(self, int index):\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 710, in sage.numerical.backends.cplex_backend.CPLEXBackend.row (build/cythonized/sage/numerical/backends/cplex_backend.c:8711)\n        check(status)\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 1678, in sage.numerical.backends.cplex_backend.check (build/cythonized/sage/numerical/backends/cplex_backend.c:15103)\n        raise MIPSolverException(\"CPLEX: \"+errors.get(number,default))\n    MIPSolverException: CPLEX: CPXERR_INDEX_RANGE\n**********************************************************************\nFile \"src/sage/numerical/backends/cplex_backend.pyx\", line 598, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint\nFailed example:\n    p.row_bounds(0)                                              # optional - CPLEX\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[5]>\", line 1, in <module>\n        p.row_bounds(Integer(0))                                              # optional - CPLEX\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 721, in sage.numerical.backends.cplex_backend.CPLEXBackend.row_bounds (build/cythonized/sage/numerical/backends/cplex_backend.c:9200)\n        cpdef row_bounds(self, int index):\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 752, in sage.numerical.backends.cplex_backend.CPLEXBackend.row_bounds (build/cythonized/sage/numerical/backends/cplex_backend.c:8951)\n        check(status)\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 1678, in sage.numerical.backends.cplex_backend.check (build/cythonized/sage/numerical/backends/cplex_backend.c:15103)\n        raise MIPSolverException(\"CPLEX: \"+errors.get(number,default))\n    MIPSolverException: CPLEX: CPXERR_INDEX_RANGE\n**********************************************************************\nFile \"src/sage/numerical/backends/cplex_backend.pyx\", line 600, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint\nFailed example:\n    p.add_linear_constraint(zip(range(5), range(5), 1.0, 1.0, name='foo') # optional - CPLEX\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1121, in compile_and_execute\n        compiled = compiler(example)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 649, in compiler\n        compileflags, 1)\n      File \"<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[6]>\", line 1\n        p.add_linear_constraint(zip(range(Integer(5)), range(Integer(5)), RealNumber('1.0'), RealNumber('1.0'), name='foo') # optional - CPLEX\n                                                                                                                                             ^\n    SyntaxError: unexpected EOF while parsing\n**********************************************************************\nFile \"src/sage/numerical/backends/cplex_backend.pyx\", line 601, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint\nFailed example:\n    p.row_name(1)                                                           # optional - CPLEX\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 681, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1123, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[7]>\", line 1, in <module>\n        p.row_name(Integer(1))                                                           # optional - CPLEX\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 1151, in sage.numerical.backends.cplex_backend.CPLEXBackend.row_name (build/cythonized/sage/numerical/backends/cplex_backend.c:11698)\n        cpdef row_name(self, int index):\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 1177, in sage.numerical.backends.cplex_backend.CPLEXBackend.row_name (build/cythonized/sage/numerical/backends/cplex_backend.c:11606)\n        check(status)\n      File \"sage/numerical/backends/cplex_backend.pyx\", line 1678, in sage.numerical.backends.cplex_backend.check (build/cythonized/sage/numerical/backends/cplex_backend.c:15103)\n        raise MIPSolverException(\"CPLEX: \"+errors.get(number,default))\n    MIPSolverException: CPLEX: CPXERR_INDEX_RANGE\n**********************************************************************\n1 item had failures:\n   5 of   9 in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint\n    [266 tests, 5 failures, 0.10 s]\n----------------------------------------------------------------------\nsage -t src/sage/numerical/backends/cplex_backend.pyx  # 5 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 0.2 seconds\n    cpu time: 0.1 seconds\n    cumulative wall time: 0.1 seconds\nExternal software detected for doctesting: cplex\n```\n\n**Branch/Commit:** [48845b928e57ce6b9016a026b954327fe8e48218](https://github.com/sagemath/sagetrac-mirror/commit/48845b928e57ce6b9016a026b954327fe8e48218)\n\n**Reviewer:** S\u00e9bastien Labb\u00e9\n\n**Author:** David Coudert\n\nIssue created by migration from https://trac.sagemath.org/ticket/28708\n\n",
    "closed_at": "2019-11-14T23:19:16Z",
    "created_at": "2019-11-08T14:02:17Z",
    "labels": [
        "component: linear programming",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "5 cplex doctests failed in cplex_backend.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28708",
    "user": "https://github.com/seblabbe"
}
```

```
sage -bt --optional=sage,optional,external src/sage/numerical/backends/cplex_backend.pyx
```

gives

```
sage -t src/sage/numerical/backends/cplex_backend.pyx
**********************************************************************
File "src/sage/numerical/backends/cplex_backend.pyx", line 595, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint
Failed example:
    p.add_linear_constraint(zip(range(5), range(5), 2.0, 2.0)  # optional - CPLEX
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1121, in compile_and_execute
        compiled = compiler(example)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 649, in compiler
        compileflags, 1)
      File "<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[3]>", line 1
        p.add_linear_constraint(zip(range(Integer(5)), range(Integer(5)), RealNumber('2.0'), RealNumber('2.0'))  # optional - CPLEX
                                                                                                                                  ^
    SyntaxError: unexpected EOF while parsing
**********************************************************************
File "src/sage/numerical/backends/cplex_backend.pyx", line 596, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint
Failed example:
    p.row(0)                                                     # optional - CPLEX
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[4]>", line 1, in <module>
        p.row(Integer(0))                                                     # optional - CPLEX
      File "sage/numerical/backends/cplex_backend.pyx", line 671, in sage.numerical.backends.cplex_backend.CPLEXBackend.row (build/cythonized/sage/numerical/backends/cplex_backend.c:8844)
        cpdef row(self, int index):
      File "sage/numerical/backends/cplex_backend.pyx", line 710, in sage.numerical.backends.cplex_backend.CPLEXBackend.row (build/cythonized/sage/numerical/backends/cplex_backend.c:8711)
        check(status)
      File "sage/numerical/backends/cplex_backend.pyx", line 1678, in sage.numerical.backends.cplex_backend.check (build/cythonized/sage/numerical/backends/cplex_backend.c:15103)
        raise MIPSolverException("CPLEX: "+errors.get(number,default))
    MIPSolverException: CPLEX: CPXERR_INDEX_RANGE
**********************************************************************
File "src/sage/numerical/backends/cplex_backend.pyx", line 598, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint
Failed example:
    p.row_bounds(0)                                              # optional - CPLEX
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[5]>", line 1, in <module>
        p.row_bounds(Integer(0))                                              # optional - CPLEX
      File "sage/numerical/backends/cplex_backend.pyx", line 721, in sage.numerical.backends.cplex_backend.CPLEXBackend.row_bounds (build/cythonized/sage/numerical/backends/cplex_backend.c:9200)
        cpdef row_bounds(self, int index):
      File "sage/numerical/backends/cplex_backend.pyx", line 752, in sage.numerical.backends.cplex_backend.CPLEXBackend.row_bounds (build/cythonized/sage/numerical/backends/cplex_backend.c:8951)
        check(status)
      File "sage/numerical/backends/cplex_backend.pyx", line 1678, in sage.numerical.backends.cplex_backend.check (build/cythonized/sage/numerical/backends/cplex_backend.c:15103)
        raise MIPSolverException("CPLEX: "+errors.get(number,default))
    MIPSolverException: CPLEX: CPXERR_INDEX_RANGE
**********************************************************************
File "src/sage/numerical/backends/cplex_backend.pyx", line 600, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint
Failed example:
    p.add_linear_constraint(zip(range(5), range(5), 1.0, 1.0, name='foo') # optional - CPLEX
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1121, in compile_and_execute
        compiled = compiler(example)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 649, in compiler
        compileflags, 1)
      File "<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[6]>", line 1
        p.add_linear_constraint(zip(range(Integer(5)), range(Integer(5)), RealNumber('1.0'), RealNumber('1.0'), name='foo') # optional - CPLEX
                                                                                                                                             ^
    SyntaxError: unexpected EOF while parsing
**********************************************************************
File "src/sage/numerical/backends/cplex_backend.pyx", line 601, in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint
Failed example:
    p.row_name(1)                                                           # optional - CPLEX
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1123, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint[7]>", line 1, in <module>
        p.row_name(Integer(1))                                                           # optional - CPLEX
      File "sage/numerical/backends/cplex_backend.pyx", line 1151, in sage.numerical.backends.cplex_backend.CPLEXBackend.row_name (build/cythonized/sage/numerical/backends/cplex_backend.c:11698)
        cpdef row_name(self, int index):
      File "sage/numerical/backends/cplex_backend.pyx", line 1177, in sage.numerical.backends.cplex_backend.CPLEXBackend.row_name (build/cythonized/sage/numerical/backends/cplex_backend.c:11606)
        check(status)
      File "sage/numerical/backends/cplex_backend.pyx", line 1678, in sage.numerical.backends.cplex_backend.check (build/cythonized/sage/numerical/backends/cplex_backend.c:15103)
        raise MIPSolverException("CPLEX: "+errors.get(number,default))
    MIPSolverException: CPLEX: CPXERR_INDEX_RANGE
**********************************************************************
1 item had failures:
   5 of   9 in sage.numerical.backends.cplex_backend.CPLEXBackend.add_linear_constraint
    [266 tests, 5 failures, 0.10 s]
----------------------------------------------------------------------
sage -t src/sage/numerical/backends/cplex_backend.pyx  # 5 doctests failed
----------------------------------------------------------------------
Total time for all tests: 0.2 seconds
    cpu time: 0.1 seconds
    cumulative wall time: 0.1 seconds
External software detected for doctesting: cplex
```

**Branch/Commit:** [48845b928e57ce6b9016a026b954327fe8e48218](https://github.com/sagemath/sagetrac-mirror/commit/48845b928e57ce6b9016a026b954327fe8e48218)

**Reviewer:** Sébastien Labbé

**Author:** David Coudert

Issue created by migration from https://trac.sagemath.org/ticket/28708





---

archive/issue_comments_532558.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2019-11-08T14:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28708#issuecomment-532558",
    "user": "https://github.com/dcoudert"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_532559.json:
```json
{
    "body": "**Commit:** [48845b928e57ce6b9016a026b954327fe8e48218](https://github.com/sagemath/sagetrac-mirror/commit/48845b928e57ce6b9016a026b954327fe8e48218)",
    "created_at": "2019-11-08T14:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28708#issuecomment-532559",
    "user": "https://github.com/dcoudert"
}
```

**Commit:** [48845b928e57ce6b9016a026b954327fe8e48218](https://github.com/sagemath/sagetrac-mirror/commit/48845b928e57ce6b9016a026b954327fe8e48218)



---

archive/issue_comments_532560.json:
```json
{
    "body": "**Branch:** [public/numerical/28708_fix_doctests_with_cplex](https://github.com/sagemath/sagetrac-mirror/tree/public/numerical/28708_fix_doctests_with_cplex)",
    "created_at": "2019-11-08T14:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28708#issuecomment-532560",
    "user": "https://github.com/dcoudert"
}
```

**Branch:** [public/numerical/28708_fix_doctests_with_cplex](https://github.com/sagemath/sagetrac-mirror/tree/public/numerical/28708_fix_doctests_with_cplex)



---

archive/issue_comments_532561.json:
```json
{
    "body": "<a id='comment:1'></a>\nI don't how this has not been seen before...\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48845b928e57ce6b9016a026b954327fe8e48218\">48845b9</a></td><td><code>trac #28708: fix doctests</code></td></tr></table>\n",
    "created_at": "2019-11-08T14:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28708#issuecomment-532561",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
I don't how this has not been seen before...

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48845b928e57ce6b9016a026b954327fe8e48218">48845b9</a></td><td><code>trac #28708: fix doctests</code></td></tr></table>




---

archive/issue_comments_532562.json:
```json
{
    "body": "**Author:** David Coudert",
    "created_at": "2019-11-08T14:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28708#issuecomment-532562",
    "user": "https://github.com/dcoudert"
}
```

**Author:** David Coudert



---

archive/issue_comments_532563.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2019-11-08T15:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28708#issuecomment-532563",
    "user": "https://github.com/seblabbe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_532564.json:
```json
{
    "body": "**Reviewer:** S\u00e9bastien Labb\u00e9",
    "created_at": "2019-11-08T15:48:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28708#issuecomment-532564",
    "user": "https://github.com/seblabbe"
}
```

**Reviewer:** Sébastien Labbé



---

archive/issue_comments_532565.json:
```json
{
    "body": "**Changing branch** from \"[public/numerical/28708_fix_doctests_with_cplex](https://github.com/sagemath/sagetrac-mirror/tree/public/numerical/28708_fix_doctests_with_cplex)\" to \"[48845b928e57ce6b9016a026b954327fe8e48218](https://github.com/sagemath/sagetrac-mirror/commit/48845b928e57ce6b9016a026b954327fe8e48218)\".",
    "created_at": "2019-11-14T23:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28708#issuecomment-532565",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/numerical/28708_fix_doctests_with_cplex](https://github.com/sagemath/sagetrac-mirror/tree/public/numerical/28708_fix_doctests_with_cplex)" to "[48845b928e57ce6b9016a026b954327fe8e48218](https://github.com/sagemath/sagetrac-mirror/commit/48845b928e57ce6b9016a026b954327fe8e48218)".



---

archive/issue_events_081456.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-14T23:19:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28708",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28708#event-81456"
}
```
