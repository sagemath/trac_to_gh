# Issue 28572: conversion of quotient rings to macaulay2

archive/issues_028335.json:
```json
{
    "body": "Currently, conversion of quotient rings to M2 is not supported; we add this functionality:\n\n```\nsage: R.<x,y> = PolynomialRing(QQ)\nsage: I = R.ideal([x^2 - y])\nsage: macaulay2(R.quotient_ring(I))\n```\n\nThis also improves the conversion of ideals by moving the `MPolynomialIdeal_macaulay2_repr._macaulay2_` to `Ideal_generic._macaulay2_init_`; for example, the following now work but didn't before (see the doctests for examples):\n- ideals in univariate polynomial rings\n\n```\nsage: R.<x> = PolynomialRing(ZZ)\nsage: macaulay2(R.ideal(x^2))\n```\n- ideals in PIDs\n\n```\nsage: macaulay2(ideal(5))\n```\n\n\nNote that quotient rings in M2 inherit variable names from the ambient ring, so we mimic this behaviour in Sage::\n\n```\nsage: R = macaulay2(\"ZZ/7[x,y]\")\nsage: I = macaulay2(\"ideal (x^3 - y^2)\")\nsage: (R/I).gens()\n{x, y}\nsage: (R/I).sage().gens()\n(x, y)\n```\n\nWe also implement conversion of polynomials from quotient rings from/to M2:\n\n```\nsage: x, y = (R/I).gens()\nsage: f = (x^3 + 2*y^2*x)^7; f\n    18    14\n2x*y   + y\nsage: f.sage()\n2*x*y^18 + y^14\nsage: _.parent()\nQuotient of Multivariate Polynomial Ring in x, y over Finite Field of size 7 by the ideal (x^3 - y^2)\nsage: macaulay2(f.sage())\n    18    14\n2x*y   + y\n```\n\n\n\nCC:  @dimpase @mwageringel @antonleykin\n\nKeywords: IMA Coding Sprint, macaulay2, interfaces\n\nBranch/Commit: [3f4f6f577654bb038692a140df4dc9ca9be03219](https://github.com/sagemath/sagetrac-mirror/commit/3f4f6f577654bb038692a140df4dc9ca9be03219)\n\nReviewer: Markus Wageringel, Dima Pasechnik\n\nAuthor: Franco Saliola\n\nDependencies: #28567, #28571, #28074, #28591\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28572\n\n",
    "closed_at": "2019-10-29T23:41:57Z",
    "created_at": "2019-10-07T17:19:43Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "conversion of quotient rings to macaulay2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28572",
    "user": "https://github.com/saliola"
}
```
Currently, conversion of quotient rings to M2 is not supported; we add this functionality:

```
sage: R.<x,y> = PolynomialRing(QQ)
sage: I = R.ideal([x^2 - y])
sage: macaulay2(R.quotient_ring(I))
```

This also improves the conversion of ideals by moving the `MPolynomialIdeal_macaulay2_repr._macaulay2_` to `Ideal_generic._macaulay2_init_`; for example, the following now work but didn't before (see the doctests for examples):
- ideals in univariate polynomial rings

```
sage: R.<x> = PolynomialRing(ZZ)
sage: macaulay2(R.ideal(x^2))
```
- ideals in PIDs

```
sage: macaulay2(ideal(5))
```


Note that quotient rings in M2 inherit variable names from the ambient ring, so we mimic this behaviour in Sage::

```
sage: R = macaulay2("ZZ/7[x,y]")
sage: I = macaulay2("ideal (x^3 - y^2)")
sage: (R/I).gens()
{x, y}
sage: (R/I).sage().gens()
(x, y)
```

We also implement conversion of polynomials from quotient rings from/to M2:

```
sage: x, y = (R/I).gens()
sage: f = (x^3 + 2*y^2*x)^7; f
    18    14
2x*y   + y
sage: f.sage()
2*x*y^18 + y^14
sage: _.parent()
Quotient of Multivariate Polynomial Ring in x, y over Finite Field of size 7 by the ideal (x^3 - y^2)
sage: macaulay2(f.sage())
    18    14
2x*y   + y
```



CC:  @dimpase @mwageringel @antonleykin

Keywords: IMA Coding Sprint, macaulay2, interfaces

Branch/Commit: [3f4f6f577654bb038692a140df4dc9ca9be03219](https://github.com/sagemath/sagetrac-mirror/commit/3f4f6f577654bb038692a140df4dc9ca9be03219)

Reviewer: Markus Wageringel, Dima Pasechnik

Author: Franco Saliola

Dependencies: #28567, #28571, #28074, #28591

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28572





---

archive/issue_comments_555700.json:
```json
{
    "body": "Changing commit from \"\" to \"6e734c6da9c92f986ff3e7a9017221065057e8ac\"",
    "created_at": "2019-10-07T17:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555700",
    "user": "https://github.com/saliola"
}
```

Changing commit from "" to "6e734c6da9c92f986ff3e7a9017221065057e8ac"



---

archive/issue_comments_555701.json:
```json
{
    "body": "Changing dependencies from \"28571, 28074\" to \"#28571, #28074\"",
    "created_at": "2019-10-07T17:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555701",
    "user": "https://github.com/saliola"
}
```

Changing dependencies from "28571, 28074" to "#28571, #28074"



---

archive/issue_comments_555702.json:
```json
{
    "body": "Changing branch from \"\" to \"public/interfaces/m2/m2_quotient_rings\"",
    "created_at": "2019-10-07T17:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555702",
    "user": "https://github.com/saliola"
}
```

Changing branch from "" to "public/interfaces/m2/m2_quotient_rings"



---

archive/issue_comments_555703.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-07T17:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555703",
    "user": "https://github.com/saliola"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_555704.json:
```json
{
    "body": "Changing commit from \"6e734c6da9c92f986ff3e7a9017221065057e8ac\" to \"6a537c88b1e9480cf387d69542a268e1909e39de\"",
    "created_at": "2019-10-07T19:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6e734c6da9c92f986ff3e7a9017221065057e8ac" to "6a537c88b1e9480cf387d69542a268e1909e39de"



---

archive/issue_comments_555705.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[6a537c8](https://github.com/sagemath/sagetrac-mirror/commit/6a537c88b1e9480cf387d69542a268e1909e39de)|`28572: fix conversion of quotient rings from Macaulay2 to Sage`|",
    "created_at": "2019-10-07T19:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[6a537c8](https://github.com/sagemath/sagetrac-mirror/commit/6a537c88b1e9480cf387d69542a268e1909e39de)|`28572: fix conversion of quotient rings from Macaulay2 to Sage`|



---

archive/issue_comments_555706.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[5ddbe5c](https://github.com/sagemath/sagetrac-mirror/commit/5ddbe5c5017d78bc2faa240954d3e561400864da)|`mark m2 doctests as optional`|\n|[4b256a1](https://github.com/sagemath/sagetrac-mirror/commit/4b256a1d5a0e8eea859831e5e0bcbe7759bac2cb)|`add _macaulay2_init_ method to QuotientRingElement`|",
    "created_at": "2019-10-07T20:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[5ddbe5c](https://github.com/sagemath/sagetrac-mirror/commit/5ddbe5c5017d78bc2faa240954d3e561400864da)|`mark m2 doctests as optional`|
|[4b256a1](https://github.com/sagemath/sagetrac-mirror/commit/4b256a1d5a0e8eea859831e5e0bcbe7759bac2cb)|`add _macaulay2_init_ method to QuotientRingElement`|



---

archive/issue_comments_555707.json:
```json
{
    "body": "Changing commit from \"6a537c88b1e9480cf387d69542a268e1909e39de\" to \"4b256a1d5a0e8eea859831e5e0bcbe7759bac2cb\"",
    "created_at": "2019-10-07T20:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6a537c88b1e9480cf387d69542a268e1909e39de" to "4b256a1d5a0e8eea859831e5e0bcbe7759bac2cb"



---

archive/issue_comments_555708.json:
```json
{
    "body": "Changing commit from \"4b256a1d5a0e8eea859831e5e0bcbe7759bac2cb\" to \"d1566e572f380d5c00d9a024b90b01621216048c\"",
    "created_at": "2019-10-07T20:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4b256a1d5a0e8eea859831e5e0bcbe7759bac2cb" to "d1566e572f380d5c00d9a024b90b01621216048c"



---

archive/issue_comments_555709.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[d1566e5](https://github.com/sagemath/sagetrac-mirror/commit/d1566e572f380d5c00d9a024b90b01621216048c)|`correct inaccuracy in doctest description`|",
    "created_at": "2019-10-07T20:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[d1566e5](https://github.com/sagemath/sagetrac-mirror/commit/d1566e572f380d5c00d9a024b90b01621216048c)|`correct inaccuracy in doctest description`|



---

archive/issue_comments_555710.json:
```json
{
    "body": "Changing commit from \"d1566e572f380d5c00d9a024b90b01621216048c\" to \"bd06a80b806ab7c38ad45a55024cf59b9f7e8f40\"",
    "created_at": "2019-10-07T21:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d1566e572f380d5c00d9a024b90b01621216048c" to "bd06a80b806ab7c38ad45a55024cf59b9f7e8f40"



---

archive/issue_comments_555711.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|\n|[bd06a80](https://github.com/sagemath/sagetrac-mirror/commit/bd06a80b806ab7c38ad45a55024cf59b9f7e8f40)|`properly handle conversion of quotient ring elements & inherit variable names when converting from M2 quotient rings`|",
    "created_at": "2019-10-07T21:01:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555711",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
|[bd06a80](https://github.com/sagemath/sagetrac-mirror/commit/bd06a80b806ab7c38ad45a55024cf59b9f7e8f40)|`properly handle conversion of quotient ring elements & inherit variable names when converting from M2 quotient rings`|



---

archive/issue_comments_555712.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,3 +19,32 @@\n sage: macaulay2(ideal(5))\n ```\n \n+\n+Note that quotient rings in M2 inherit variable names from the ambient ring, so we mimic this behaviour in Sage::\n+\n+```\n+sage: R = macaulay2(\"ZZ/7[x,y]\")\n+sage: I = macaulay2(\"ideal (x^3 - y^2)\")\n+sage: (R/I).gens()\n+{x, y}\n+sage: (R/I).sage().gens()\n+(x, y)\n+```\n+\n+We also implement conversion of polynomials from quotient rings from/to M2:\n+\n+```\n+sage: x, y = (R/I).gens()\n+sage: f = (x^3 + 2*y^2*x)^7; f\n+    18    14\n+2x*y   + y\n+sage: f.sage()\n+2*x*y^18 + y^14\n+sage: _.parent()\n+Quotient of Multivariate Polynomial Ring in x, y over Finite Field of size 7 by the ideal (x^3 - y^2)\n+sage: macaulay2(f.sage())\n+    18    14\n+2x*y   + y\n+```\n+\n+\n``````\n",
    "created_at": "2019-10-07T21:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555712",
    "user": "https://github.com/saliola"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,3 +19,32 @@
 sage: macaulay2(ideal(5))
 ```
 
+
+Note that quotient rings in M2 inherit variable names from the ambient ring, so we mimic this behaviour in Sage::
+
+```
+sage: R = macaulay2("ZZ/7[x,y]")
+sage: I = macaulay2("ideal (x^3 - y^2)")
+sage: (R/I).gens()
+{x, y}
+sage: (R/I).sage().gens()
+(x, y)
+```
+
+We also implement conversion of polynomials from quotient rings from/to M2:
+
+```
+sage: x, y = (R/I).gens()
+sage: f = (x^3 + 2*y^2*x)^7; f
+    18    14
+2x*y   + y
+sage: f.sage()
+2*x*y^18 + y^14
+sage: _.parent()
+Quotient of Multivariate Polynomial Ring in x, y over Finite Field of size 7 by the ideal (x^3 - y^2)
+sage: macaulay2(f.sage())
+    18    14
+2x*y   + y
+```
+
+
``````




---

archive/issue_comments_555713.json:
```json
{
    "body": "Changing commit from \"bd06a80b806ab7c38ad45a55024cf59b9f7e8f40\" to \"ec1773ed4debbc9627287962630c7a04e85cdb7a\"",
    "created_at": "2019-10-07T22:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bd06a80b806ab7c38ad45a55024cf59b9f7e8f40" to "ec1773ed4debbc9627287962630c7a04e85cdb7a"



---

archive/issue_comments_555714.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|\n|[ec1773e](https://github.com/sagemath/sagetrac-mirror/commit/ec1773ed4debbc9627287962630c7a04e85cdb7a)|`disable caching of M2 conversion of polynomials in quotient rings (change _macaulay2_init_ to _macaulay2_)`|",
    "created_at": "2019-10-07T22:29:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555714",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|
|[ec1773e](https://github.com/sagemath/sagetrac-mirror/commit/ec1773ed4debbc9627287962630c7a04e85cdb7a)|`disable caching of M2 conversion of polynomials in quotient rings (change _macaulay2_init_ to _macaulay2_)`|



---

archive/issue_comments_555715.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[25afa2f](https://github.com/sagemath/sagetrac-mirror/commit/25afa2f9be52e07bbd222dce0ff125fc8f6b8643)|`simplify doctest`|",
    "created_at": "2019-10-07T22:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[25afa2f](https://github.com/sagemath/sagetrac-mirror/commit/25afa2f9be52e07bbd222dce0ff125fc8f6b8643)|`simplify doctest`|



---

archive/issue_comments_555716.json:
```json
{
    "body": "Changing commit from \"ec1773ed4debbc9627287962630c7a04e85cdb7a\" to \"25afa2f9be52e07bbd222dce0ff125fc8f6b8643\"",
    "created_at": "2019-10-07T22:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ec1773ed4debbc9627287962630c7a04e85cdb7a" to "25afa2f9be52e07bbd222dce0ff125fc8f6b8643"



---

archive/issue_comments_555717.json:
```json
{
    "body": "Changing commit from \"25afa2f9be52e07bbd222dce0ff125fc8f6b8643\" to \"19d9995883416aa73f370904c8cc2d474c5a170b\"",
    "created_at": "2019-10-08T00:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "25afa2f9be52e07bbd222dce0ff125fc8f6b8643" to "19d9995883416aa73f370904c8cc2d474c5a170b"



---

archive/issue_comments_555718.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[19d9995](https://github.com/sagemath/sagetrac-mirror/commit/19d9995883416aa73f370904c8cc2d474c5a170b)|`28572: remove unnecessary doctests`|",
    "created_at": "2019-10-08T00:25:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[19d9995](https://github.com/sagemath/sagetrac-mirror/commit/19d9995883416aa73f370904c8cc2d474c5a170b)|`28572: remove unnecessary doctests`|



---

archive/issue_comments_555719.json:
```json
{
    "body": "<a id='comment:10'></a>\nThe following does not work yet (not even with #28574):\n\n```\nsage: R = QQ['x,y'].quotient('x^2-y')['z,t']\nsage: f = R.base_ring()('x')^2 - R('z^2')\nsage: macaulay2(f)  # fails\n```\nThis fails because the variable names in the quotient ring are named `xbar,ybar` in Sage, but `x,y` in Macaulay2. The conversion routine for polynomials does not currently take this into account when the base ring is a quotient ring.\n\nOther than that, everything looks good to me up until here.",
    "created_at": "2019-10-08T01:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555719",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:10'></a>
The following does not work yet (not even with #28574):

```
sage: R = QQ['x,y'].quotient('x^2-y')['z,t']
sage: f = R.base_ring()('x')^2 - R('z^2')
sage: macaulay2(f)  # fails
```
This fails because the variable names in the quotient ring are named `xbar,ybar` in Sage, but `x,y` in Macaulay2. The conversion routine for polynomials does not currently take this into account when the base ring is a quotient ring.

Other than that, everything looks good to me up until here.



---

archive/issue_comments_555720.json:
```json
{
    "body": "Changing dependencies from \"#28571, #28074\" to \"#28567, #28571, #28074\"",
    "created_at": "2019-10-10T16:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555720",
    "user": "https://github.com/saliola"
}
```

Changing dependencies from "#28571, #28074" to "#28567, #28571, #28074"



---

archive/issue_comments_555721.json:
```json
{
    "body": "Changing commit from \"19d9995883416aa73f370904c8cc2d474c5a170b\" to \"15d35e3ae6392e1fdfbdf15cb3160de34c51a27b\"",
    "created_at": "2019-10-10T16:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "19d9995883416aa73f370904c8cc2d474c5a170b" to "15d35e3ae6392e1fdfbdf15cb3160de34c51a27b"



---

archive/issue_comments_555722.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[0d90888](https://github.com/sagemath/sagetrac-mirror/commit/0d908887b2b61f69d86d31a8c348b33c0b822ee9)|`f4 and mgb opts for M2 gb computations`|\n|[59b3215](https://github.com/sagemath/sagetrac-mirror/commit/59b3215321353ed165a573fc16462dd055fd1bb2)|`add documentation and minor fixes`|\n|[1ad24c3](https://github.com/sagemath/sagetrac-mirror/commit/1ad24c3f6850e4f739a68d63a1341a11916a0127)|`pass F4 and MGB to M2 as strings`|\n|[7038ba2](https://github.com/sagemath/sagetrac-mirror/commit/7038ba2e92d2dd64fbc601677730baa0b1cf2bcd)|`28567: run Macaulay2 f4 and mgb doctests over a finite field`|\n|[00c028f](https://github.com/sagemath/sagetrac-mirror/commit/00c028f94219dd8f5fbc68f566027ae1e80f2051)|`28567: add missing optional doctest flag`|\n|[15d35e3](https://github.com/sagemath/sagetrac-mirror/commit/15d35e3ae6392e1fdfbdf15cb3160de34c51a27b)|`Merge remote-tracking branch 'origin/public/interfaces/m2/f4etc' into public/interfaces/m2/m2_quotient_rings`|",
    "created_at": "2019-10-10T16:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[0d90888](https://github.com/sagemath/sagetrac-mirror/commit/0d908887b2b61f69d86d31a8c348b33c0b822ee9)|`f4 and mgb opts for M2 gb computations`|
|[59b3215](https://github.com/sagemath/sagetrac-mirror/commit/59b3215321353ed165a573fc16462dd055fd1bb2)|`add documentation and minor fixes`|
|[1ad24c3](https://github.com/sagemath/sagetrac-mirror/commit/1ad24c3f6850e4f739a68d63a1341a11916a0127)|`pass F4 and MGB to M2 as strings`|
|[7038ba2](https://github.com/sagemath/sagetrac-mirror/commit/7038ba2e92d2dd64fbc601677730baa0b1cf2bcd)|`28567: run Macaulay2 f4 and mgb doctests over a finite field`|
|[00c028f](https://github.com/sagemath/sagetrac-mirror/commit/00c028f94219dd8f5fbc68f566027ae1e80f2051)|`28567: add missing optional doctest flag`|
|[15d35e3](https://github.com/sagemath/sagetrac-mirror/commit/15d35e3ae6392e1fdfbdf15cb3160de34c51a27b)|`Merge remote-tracking branch 'origin/public/interfaces/m2/f4etc' into public/interfaces/m2/m2_quotient_rings`|



---

archive/issue_comments_555723.json:
```json
{
    "body": "<a id='comment:13'></a>\nI added a dependency to #28567 because this did not merge cleanly on top of it (and I merged it into this branch).",
    "created_at": "2019-10-10T16:26:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555723",
    "user": "https://github.com/saliola"
}
```

<a id='comment:13'></a>
I added a dependency to #28567 because this did not merge cleanly on top of it (and I merged it into this branch).



---

archive/issue_comments_555724.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-10T19:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555724",
    "user": "https://github.com/mwageringel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_555725.json:
```json
{
    "body": "<a id='comment:14'></a>\nOk.",
    "created_at": "2019-10-10T19:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555725",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:14'></a>
Ok.



---

archive/issue_comments_555726.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Markus Wageringel\"",
    "created_at": "2019-10-10T19:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555726",
    "user": "https://github.com/mwageringel"
}
```

Changing reviewer from "" to "Markus Wageringel"



---

archive/issue_comments_555727.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-15T22:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555727",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_555728.json:
```json
{
    "body": "<a id='comment:15'></a>\nMerge conflict (please merge in next beta)",
    "created_at": "2019-10-15T22:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555728",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
Merge conflict (please merge in next beta)



---

archive/issue_comments_555729.json:
```json
{
    "body": "Changing dependencies from \"#28567, #28571, #28074\" to \"#28567, #28571, #28074, #28591\"",
    "created_at": "2019-10-22T18:07:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555729",
    "user": "https://github.com/dimpase"
}
```

Changing dependencies from "#28567, #28571, #28074" to "#28567, #28571, #28074, #28591"



---

archive/issue_comments_555730.json:
```json
{
    "body": "<a id='comment:17'></a>\nrebased on top of the branch of #28591\n\n---\nLast 10 new commits:\n|                                                                                                                                          |                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[e40eb60](https://github.com/sagemath/sagetrac-mirror/commit/e40eb601a4fc4c040b7bc4c06136d455dea4f9de)|`make tests more foolproof.`|\n|[61ca2db](https://github.com/sagemath/sagetrac-mirror/commit/61ca2db5603288411223dabd6cd0ab5f6f04be6e)|`conversion of quotient rings to macaulay2 & improvements to conversion of ideals`|\n|[84702b4](https://github.com/sagemath/sagetrac-mirror/commit/84702b476dbf3c5e7005c4ae53a285cda3b6cf14)|`28572: fix conversion of quotient rings from Macaulay2 to Sage`|\n|[4db4a3c](https://github.com/sagemath/sagetrac-mirror/commit/4db4a3cf7fda101cd605a4f8c9dd7956d8e29ef1)|`mark m2 doctests as optional`|\n|[80b99b9](https://github.com/sagemath/sagetrac-mirror/commit/80b99b9cb23101609fc02b4702e07b32dd6d17b2)|`add _macaulay2_init_ method to QuotientRingElement`|\n|[c185cff](https://github.com/sagemath/sagetrac-mirror/commit/c185cff3c74d11392953b3484252e5ea3c58e69a)|`correct inaccuracy in doctest description`|\n|[ca619b8](https://github.com/sagemath/sagetrac-mirror/commit/ca619b8afcf0c118dfcb5031e5f0d6f48ec43ba6)|`properly handle conversion of quotient ring elements & inherit variable names when converting from M2 quotient rings`|\n|[3a0e906](https://github.com/sagemath/sagetrac-mirror/commit/3a0e906c26d7af942f08271227701b2ba58f5770)|`disable caching of M2 conversion of polynomials in quotient rings (change _macaulay2_init_ to _macaulay2_)`|\n|[117ab9f](https://github.com/sagemath/sagetrac-mirror/commit/117ab9fdfd44f046b8578e6fa89165a627e50209)|`simplify doctest`|\n|[3f4f6f5](https://github.com/sagemath/sagetrac-mirror/commit/3f4f6f577654bb038692a140df4dc9ca9be03219)|`28572: remove unnecessary doctests`|",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555730",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>
rebased on top of the branch of #28591

---
Last 10 new commits:
|                                                                                                                                          |                            |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[e40eb60](https://github.com/sagemath/sagetrac-mirror/commit/e40eb601a4fc4c040b7bc4c06136d455dea4f9de)|`make tests more foolproof.`|
|[61ca2db](https://github.com/sagemath/sagetrac-mirror/commit/61ca2db5603288411223dabd6cd0ab5f6f04be6e)|`conversion of quotient rings to macaulay2 & improvements to conversion of ideals`|
|[84702b4](https://github.com/sagemath/sagetrac-mirror/commit/84702b476dbf3c5e7005c4ae53a285cda3b6cf14)|`28572: fix conversion of quotient rings from Macaulay2 to Sage`|
|[4db4a3c](https://github.com/sagemath/sagetrac-mirror/commit/4db4a3cf7fda101cd605a4f8c9dd7956d8e29ef1)|`mark m2 doctests as optional`|
|[80b99b9](https://github.com/sagemath/sagetrac-mirror/commit/80b99b9cb23101609fc02b4702e07b32dd6d17b2)|`add _macaulay2_init_ method to QuotientRingElement`|
|[c185cff](https://github.com/sagemath/sagetrac-mirror/commit/c185cff3c74d11392953b3484252e5ea3c58e69a)|`correct inaccuracy in doctest description`|
|[ca619b8](https://github.com/sagemath/sagetrac-mirror/commit/ca619b8afcf0c118dfcb5031e5f0d6f48ec43ba6)|`properly handle conversion of quotient ring elements & inherit variable names when converting from M2 quotient rings`|
|[3a0e906](https://github.com/sagemath/sagetrac-mirror/commit/3a0e906c26d7af942f08271227701b2ba58f5770)|`disable caching of M2 conversion of polynomials in quotient rings (change _macaulay2_init_ to _macaulay2_)`|
|[117ab9f](https://github.com/sagemath/sagetrac-mirror/commit/117ab9fdfd44f046b8578e6fa89165a627e50209)|`simplify doctest`|
|[3f4f6f5](https://github.com/sagemath/sagetrac-mirror/commit/3f4f6f577654bb038692a140df4dc9ca9be03219)|`28572: remove unnecessary doctests`|



---

archive/issue_comments_555731.json:
```json
{
    "body": "Changing branch from \"public/interfaces/m2/m2_quotient_rings\" to \"u/dimpase/interfaces/m2/m2_quotient_rings\"",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555731",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "public/interfaces/m2/m2_quotient_rings" to "u/dimpase/interfaces/m2/m2_quotient_rings"



---

archive/issue_comments_555732.json:
```json
{
    "body": "Changing commit from \"15d35e3ae6392e1fdfbdf15cb3160de34c51a27b\" to \"3f4f6f577654bb038692a140df4dc9ca9be03219\"",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555732",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "15d35e3ae6392e1fdfbdf15cb3160de34c51a27b" to "3f4f6f577654bb038692a140df4dc9ca9be03219"



---

archive/issue_comments_555733.json:
```json
{
    "body": "Changing reviewer from \"Markus Wageringel\" to \"Markus Wageringel, Dima Pasechnik\"",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555733",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "Markus Wageringel" to "Markus Wageringel, Dima Pasechnik"



---

archive/issue_comments_555734.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-10-22T21:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555734",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_081096.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-10-29T23:41:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28572#event-81096"
}
```



---

archive/issue_comments_555735.json:
```json
{
    "body": "Changing branch from \"u/dimpase/interfaces/m2/m2_quotient_rings\" to \"3f4f6f577654bb038692a140df4dc9ca9be03219\"",
    "created_at": "2019-10-29T23:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555735",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dimpase/interfaces/m2/m2_quotient_rings" to "3f4f6f577654bb038692a140df4dc9ca9be03219"



---

archive/issue_comments_555736.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-29T23:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28572",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28572#issuecomment-555736",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
