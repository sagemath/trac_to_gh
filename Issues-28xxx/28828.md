# Issue 28828: Attributes of polyhedra are exposed

archive/issues_028591.json:
```json
{
    "assignees": [],
    "body": "Currently the f_vector is exposed.\n\n```\nsage: P = polytopes.simplex()\nsage: P.f_vector()[0] = 2\nsage: P.f_vector()\n(2, 4, 6, 4, 1)\n```\n\nSame applies for\n- incidence matrix,\n- vertex-facet graph,\n- vertices matrix,\n- vertex adjacency matrix,\n- facet adjacency matrix,\n- gale transform.\n\nSome of the above are probably more relevant than others.\n\nCC:  @jplab @LaisRast\n\nKeywords: **polyhedron, exposed attributes**\n\nBranch/Commit: **[a7eeece](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)**\n\nReviewer: **Laith Rastanawi**\n\nAuthor: **Jonathan Kliem**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/28828_\n\n",
    "closed_at": "2019-12-20T22:45:58Z",
    "created_at": "2019-12-02T10:28:33Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Attributes of polyhedra are exposed",
    "type": "issue",
    "updated_at": "2019-12-20T22:45:58Z",
    "url": "https://github.com/sagemath/sage/issues/28828",
    "user": "https://github.com/kliem"
}
```
Currently the f_vector is exposed.

```
sage: P = polytopes.simplex()
sage: P.f_vector()[0] = 2
sage: P.f_vector()
(2, 4, 6, 4, 1)
```

Same applies for
- incidence matrix,
- vertex-facet graph,
- vertices matrix,
- vertex adjacency matrix,
- facet adjacency matrix,
- gale transform.

Some of the above are probably more relevant than others.

CC:  @jplab @LaisRast

Keywords: **polyhedron, exposed attributes**

Branch/Commit: **[a7eeece](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)**

Reviewer: **Laith Rastanawi**

Author: **Jonathan Kliem**

_Issue created by migration from https://trac.sagemath.org/ticket/28828_





---

archive/issue_events_364601.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-12-02T10:28:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364601"
}
```



---

archive/issue_events_364602.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-12-02T10:28:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364602"
}
```



---

archive/issue_events_364603.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-12-02T10:28:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364603"
}
```



---

archive/issue_events_364604.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-12-02T10:28:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364604"
}
```



---

archive/issue_comments_452559.json:
```json
{
    "body": "Changed author from **Jonathan Kliem** to none",
    "created_at": "2019-12-02T10:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452559",
    "user": "https://github.com/kliem"
}
```

Changed author from **Jonathan Kliem** to none



---

archive/issue_comments_452560.json:
```json
{
    "body": "Changed keywords from **polyhedron, f_vector** to **polyhedron, exposed attributes**",
    "created_at": "2019-12-02T10:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452560",
    "user": "https://github.com/kliem"
}
```

Changed keywords from **polyhedron, f_vector** to **polyhedron, exposed attributes**



---

archive/issue_events_364605.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-12-02T10:46:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "title_is": "Attributes of polyhedra are exposed",
    "title_was": "f_vector is exposed",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364605"
}
```



---

archive/issue_comments_452561.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,12 @@\n (2, 4, 6, 4, 1)\n ```\n \n-We fix this by not caching this method anymore. It's manually cached in `CombinatorialPolyhedron` anyway.\n+Same applies for\n+- incidence matrix,\n+- vertex-facet graph,\n+- vertices matrix,\n+- vertex adjacency matrix,\n+- facet adjacency matrix,\n+- gale transform.\n+\n+Some of the above are probably more relevant than others.\n``````\n",
    "created_at": "2019-12-02T10:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452561",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,12 @@
 (2, 4, 6, 4, 1)
 ```
 
-We fix this by not caching this method anymore. It's manually cached in `CombinatorialPolyhedron` anyway.
+Same applies for
+- incidence matrix,
+- vertex-facet graph,
+- vertices matrix,
+- vertex adjacency matrix,
+- facet adjacency matrix,
+- gale transform.
+
+Some of the above are probably more relevant than others.
``````




---

archive/issue_comments_452562.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nAn older open ticket might be worth a look in this context: [https://trac.sagemath.org/ticket/25509](https://trac.sagemath.org/ticket/25509). It proposes to simplify the creation of immutable vectors/matrices, e.g. by adding an `immutable=True/False` switch to the `vector` and `matrix` constructors.",
    "created_at": "2019-12-10T15:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452562",
    "user": "https://github.com/sagetrac-nailuj"
}
```

<a id='comment:2'>Comment 2:</a>
An older open ticket might be worth a look in this context: [https://trac.sagemath.org/ticket/25509](https://trac.sagemath.org/ticket/25509). It proposes to simplify the creation of immutable vectors/matrices, e.g. by adding an `immutable=True/False` switch to the `vector` and `matrix` constructors.



---

archive/issue_comments_452563.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nThanks for pointing this out.\n\nAs for vectors and matrices there is `set_immutable`, which should work fine here.\nI just didn't get around to doing it.",
    "created_at": "2019-12-10T16:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452563",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'>Comment 3:</a>
Thanks for pointing this out.

As for vectors and matrices there is `set_immutable`, which should work fine here.
I just didn't get around to doing it.



---

archive/issue_comments_452564.json:
```json
{
    "body": "Branch: **[public/28828](https://github.com/sagemath/sagetrac-mirror/tree/public/28828)**",
    "created_at": "2019-12-13T07:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452564",
    "user": "https://github.com/kliem"
}
```

Branch: **[public/28828](https://github.com/sagemath/sagetrac-mirror/tree/public/28828)**



---

archive/issue_comments_452565.json:
```json
{
    "body": "Commit: **[c113802](https://github.com/sagemath/sagetrac-mirror/commit/c1138025fd8a25a48882b483c8bad5399d296ec0)**",
    "created_at": "2019-12-13T07:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452565",
    "user": "https://github.com/kliem"
}
```

Commit: **[c113802](https://github.com/sagemath/sagetrac-mirror/commit/c1138025fd8a25a48882b483c8bad5399d296ec0)**



---

archive/issue_comments_452566.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1138025fd8a25a48882b483c8bad5399d296ec0\">c113802</a></td><td><code>make exposed invariants of polyhedron immutable</code></td></tr></table>\n",
    "created_at": "2019-12-13T07:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452566",
    "user": "https://github.com/kliem"
}
```

<a id='comment:4'>Comment 4:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1138025fd8a25a48882b483c8bad5399d296ec0">c113802</a></td><td><code>make exposed invariants of polyhedron immutable</code></td></tr></table>




---

archive/issue_comments_452567.json:
```json
{
    "body": "Author: **Jonathan Kliem**",
    "created_at": "2019-12-13T07:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452567",
    "user": "https://github.com/kliem"
}
```

Author: **Jonathan Kliem**



---

archive/issue_events_364606.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-12-13T07:21:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364606"
}
```



---

archive/issue_comments_452568.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nI am not sure we need to change everything to be immutable.\nBut since you are doing this, you may also want to consider the following:\n\n```\nsage: P = polytopes.cube()\n....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000\n....: P.restricted_automorphism_group(output='matrixlist')[0]\n....: \n[1000    0    0    0]\n[   0    1    0    0]\n[   0    0    1    0]\n[   0    0    0    1]\n```",
    "created_at": "2019-12-17T10:03:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452568",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:6'>Comment 6:</a>
I am not sure we need to change everything to be immutable.
But since you are doing this, you may also want to consider the following:

```
sage: P = polytopes.cube()
....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000
....: P.restricted_automorphism_group(output='matrixlist')[0]
....: 
[1000    0    0    0]
[   0    1    0    0]
[   0    0    1    0]
[   0    0    0    1]
```



---

archive/issue_events_364607.json:
```json
{
    "actor": "https://github.com/LaisRast",
    "created_at": "2019-12-17T11:30:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364607"
}
```



---

archive/issue_events_364608.json:
```json
{
    "actor": "https://github.com/LaisRast",
    "created_at": "2019-12-17T11:30:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364608"
}
```



---

archive/issue_comments_452569.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50a4975f9a312efb04d645313caa69ee66214e27\">50a4975</a></td><td><code>make exposed invariants of polyhedron immutable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85\">a7eeece</a></td><td><code>make restricted automorphism group as matrixlist immutable</code></td></tr></table>\n",
    "created_at": "2019-12-17T14:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452569",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50a4975f9a312efb04d645313caa69ee66214e27">50a4975</a></td><td><code>make exposed invariants of polyhedron immutable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85">a7eeece</a></td><td><code>make restricted automorphism group as matrixlist immutable</code></td></tr></table>




---

archive/issue_comments_452570.json:
```json
{
    "body": "Changed commit from **[c113802](https://github.com/sagemath/sagetrac-mirror/commit/c1138025fd8a25a48882b483c8bad5399d296ec0)** to **[a7eeece](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)**",
    "created_at": "2019-12-17T14:34:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452570",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c113802](https://github.com/sagemath/sagetrac-mirror/commit/c1138025fd8a25a48882b483c8bad5399d296ec0)** to **[a7eeece](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)**



---

archive/issue_events_364609.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-12-17T14:35:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364609"
}
```



---

archive/issue_events_364610.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2019-12-17T14:35:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364610"
}
```



---

archive/issue_comments_452571.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nAs mentioned in the description of the ticket, some methods are worse than others.\n\nE.g. it can easily happen, that one does something with the graph. There is even an example in the doctests (the one I modified in ticket), where the original graph was reversed.\n\nReplying to [@LaisRast](#comment%3A6):\n> I am not sure we need to change everything to be immutable.\n> But since you are doing this, you may also want to consider the following:\n> \n> ```\n> sage: P = polytopes.cube()\n> ....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000\n> ....: P.restricted_automorphism_group(output='matrixlist')[0]\n> ....: \n> [1000    0    0    0]\n> [   0    1    0    0]\n> [   0    0    1    0]\n> [   0    0    0    1]\n> ```",
    "created_at": "2019-12-17T15:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452571",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'>Comment 10:</a>
As mentioned in the description of the ticket, some methods are worse than others.

E.g. it can easily happen, that one does something with the graph. There is even an example in the doctests (the one I modified in ticket), where the original graph was reversed.

Replying to [@LaisRast](#comment%3A6):
> I am not sure we need to change everything to be immutable.
> But since you are doing this, you may also want to consider the following:
> 
> ```
> sage: P = polytopes.cube()
> ....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000
> ....: P.restricted_automorphism_group(output='matrixlist')[0]
> ....: 
> [1000    0    0    0]
> [   0    1    0    0]
> [   0    0    1    0]
> [   0    0    0    1]
> ```



---

archive/issue_comments_452572.json:
```json
{
    "body": "Reviewer: **Laith Rastanawi**",
    "created_at": "2019-12-17T20:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452572",
    "user": "https://github.com/LaisRast"
}
```

Reviewer: **Laith Rastanawi**



---

archive/issue_events_364611.json:
```json
{
    "actor": "https://github.com/LaisRast",
    "created_at": "2019-12-17T20:51:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364611"
}
```



---

archive/issue_events_364612.json:
```json
{
    "actor": "https://github.com/LaisRast",
    "created_at": "2019-12-17T20:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364612"
}
```



---

archive/issue_comments_452573.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI believe now it is good to go.",
    "created_at": "2019-12-17T20:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452573",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:11'>Comment 11:</a>
I believe now it is good to go.



---

archive/issue_events_364613.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-20T22:45:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364613"
}
```



---

archive/issue_events_364614.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "954320295c2528605608e49e45e430ced3a40622",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-12-20T22:45:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28828#event-364614"
}
```



---

archive/issue_comments_452574.json:
```json
{
    "body": "Changed branch from **[public/28828](https://github.com/sagemath/sagetrac-mirror/tree/public/28828)** to **[a7eeece](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)**",
    "created_at": "2019-12-20T22:45:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28828#issuecomment-452574",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/28828](https://github.com/sagemath/sagetrac-mirror/tree/public/28828)** to **[a7eeece](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)**
