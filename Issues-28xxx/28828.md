# Issue 28828: Attributes of polyhedra are exposed

archive/issues_028591.json:
```json
{
    "body": "Currently the f_vector is exposed.\n\n```\nsage: P = polytopes.simplex()\nsage: P.f_vector()[0] = 2\nsage: P.f_vector()\n(2, 4, 6, 4, 1)\n```\n\nSame applies for\n- incidence matrix,\n- vertex-facet graph,\n- vertices matrix,\n- vertex adjacency matrix,\n- facet adjacency matrix,\n- gale transform.\n\nSome of the above are probably more relevant than others.\n\nCC:  @jplab @laisrast\n\nKeywords: polyhedron, exposed attributes\n\nBranch/Commit: [a7eeece2180be4d91587eb133e7ab73734400f85](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)\n\nReviewer: Laith Rastanawi\n\nAuthor: Jonathan Kliem\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/28828\n\n",
    "closed_at": "2019-12-20T22:45:58Z",
    "created_at": "2019-12-02T10:28:33Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Attributes of polyhedra are exposed",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28828",
    "user": "https://github.com/kliem"
}
```
Currently the f_vector is exposed.

```
sage: P = polytopes.simplex()
sage: P.f_vector()[0] = 2
sage: P.f_vector()
(2, 4, 6, 4, 1)
```

Same applies for
- incidence matrix,
- vertex-facet graph,
- vertices matrix,
- vertex adjacency matrix,
- facet adjacency matrix,
- gale transform.

Some of the above are probably more relevant than others.

CC:  @jplab @laisrast

Keywords: polyhedron, exposed attributes

Branch/Commit: [a7eeece2180be4d91587eb133e7ab73734400f85](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)

Reviewer: Laith Rastanawi

Author: Jonathan Kliem

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/28828





---

archive/issue_comments_560710.json:
```json
{
    "body": "Changing author from \"Jonathan Kliem\" to \"\"",
    "created_at": "2019-12-02T10:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560710",
    "user": "https://github.com/kliem"
}
```

Changing author from "Jonathan Kliem" to ""



---

archive/issue_comments_560711.json:
```json
{
    "body": "Changing keywords from \"polyhedron, f_vector\" to \"polyhedron, exposed attributes\".",
    "created_at": "2019-12-02T10:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560711",
    "user": "https://github.com/kliem"
}
```

Changing keywords from "polyhedron, f_vector" to "polyhedron, exposed attributes".



---

archive/issue_events_082306.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "rename": {
        "from": "f_vector is exposed",
        "to": "Attributes of polyhedra are exposed"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28828#event-82306"
}
```



---

archive/issue_comments_560712.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,4 +7,12 @@\n (2, 4, 6, 4, 1)\n ```\n \n-We fix this by not caching this method anymore. It's manually cached in `CombinatorialPolyhedron` anyway.\n+Same applies for\n+- incidence matrix,\n+- vertex-facet graph,\n+- vertices matrix,\n+- vertex adjacency matrix,\n+- facet adjacency matrix,\n+- gale transform.\n+\n+Some of the above are probably more relevant than others.\n``````\n",
    "created_at": "2019-12-02T10:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560712",
    "user": "https://github.com/kliem"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,4 +7,12 @@
 (2, 4, 6, 4, 1)
 ```
 
-We fix this by not caching this method anymore. It's manually cached in `CombinatorialPolyhedron` anyway.
+Same applies for
+- incidence matrix,
+- vertex-facet graph,
+- vertices matrix,
+- vertex adjacency matrix,
+- facet adjacency matrix,
+- gale transform.
+
+Some of the above are probably more relevant than others.
``````




---

archive/issue_comments_560713.json:
```json
{
    "body": "<a id='comment:2'></a>\nAn older open ticket might be worth a look in this context: [https://trac.sagemath.org/ticket/25509](https://trac.sagemath.org/ticket/25509). It proposes to simplify the creation of immutable vectors/matrices, e.g. by adding an `immutable=True/False` switch to the `vector` and `matrix` constructors.",
    "created_at": "2019-12-10T15:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560713",
    "user": "https://trac.sagemath.org/admin/accounts/users/nailuj"
}
```

<a id='comment:2'></a>
An older open ticket might be worth a look in this context: [https://trac.sagemath.org/ticket/25509](https://trac.sagemath.org/ticket/25509). It proposes to simplify the creation of immutable vectors/matrices, e.g. by adding an `immutable=True/False` switch to the `vector` and `matrix` constructors.



---

archive/issue_comments_560714.json:
```json
{
    "body": "<a id='comment:3'></a>\nThanks for pointing this out.\n\nAs for vectors and matrices there is `set_immutable`, which should work fine here.\nI just didn't get around to doing it.",
    "created_at": "2019-12-10T16:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560714",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'></a>
Thanks for pointing this out.

As for vectors and matrices there is `set_immutable`, which should work fine here.
I just didn't get around to doing it.



---

archive/issue_comments_560715.json:
```json
{
    "body": "Changing branch from \"\" to \"public/28828\"",
    "created_at": "2019-12-13T07:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560715",
    "user": "https://github.com/kliem"
}
```

Changing branch from "" to "public/28828"



---

archive/issue_comments_560716.json:
```json
{
    "body": "Changing commit from \"\" to \"c1138025fd8a25a48882b483c8bad5399d296ec0\"",
    "created_at": "2019-12-13T07:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560716",
    "user": "https://github.com/kliem"
}
```

Changing commit from "" to "c1138025fd8a25a48882b483c8bad5399d296ec0"



---

archive/issue_comments_560717.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[c113802](https://github.com/sagemath/sagetrac-mirror/commit/c1138025fd8a25a48882b483c8bad5399d296ec0)|`make exposed invariants of polyhedron immutable`|",
    "created_at": "2019-12-13T07:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560717",
    "user": "https://github.com/kliem"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[c113802](https://github.com/sagemath/sagetrac-mirror/commit/c1138025fd8a25a48882b483c8bad5399d296ec0)|`make exposed invariants of polyhedron immutable`|



---

archive/issue_comments_560718.json:
```json
{
    "body": "Changing author from \"\" to \"Jonathan Kliem\"",
    "created_at": "2019-12-13T07:10:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560718",
    "user": "https://github.com/kliem"
}
```

Changing author from "" to "Jonathan Kliem"



---

archive/issue_comments_560719.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-12-13T07:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560719",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_560720.json:
```json
{
    "body": "<a id='comment:6'></a>\nI am not sure we need to change everything to be immutable.\nBut since you are doing this, you may also want to consider the following:\n\n```\nsage: P = polytopes.cube()\n....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000\n....: P.restricted_automorphism_group(output='matrixlist')[0]\n....: \n[1000    0    0    0]\n[   0    1    0    0]\n[   0    0    1    0]\n[   0    0    0    1]\n```",
    "created_at": "2019-12-17T10:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560720",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:6'></a>
I am not sure we need to change everything to be immutable.
But since you are doing this, you may also want to consider the following:

```
sage: P = polytopes.cube()
....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000
....: P.restricted_automorphism_group(output='matrixlist')[0]
....: 
[1000    0    0    0]
[   0    1    0    0]
[   0    0    1    0]
[   0    0    0    1]
```



---

archive/issue_comments_560721.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-12-17T11:30:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560721",
    "user": "https://github.com/LaisRast"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_560722.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[50a4975](https://github.com/sagemath/sagetrac-mirror/commit/50a4975f9a312efb04d645313caa69ee66214e27)|`make exposed invariants of polyhedron immutable`|\n|[a7eeece](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)|`make restricted automorphism group as matrixlist immutable`|",
    "created_at": "2019-12-17T14:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[50a4975](https://github.com/sagemath/sagetrac-mirror/commit/50a4975f9a312efb04d645313caa69ee66214e27)|`make exposed invariants of polyhedron immutable`|
|[a7eeece](https://github.com/sagemath/sagetrac-mirror/commit/a7eeece2180be4d91587eb133e7ab73734400f85)|`make restricted automorphism group as matrixlist immutable`|



---

archive/issue_comments_560723.json:
```json
{
    "body": "Changing commit from \"c1138025fd8a25a48882b483c8bad5399d296ec0\" to \"a7eeece2180be4d91587eb133e7ab73734400f85\"",
    "created_at": "2019-12-17T14:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c1138025fd8a25a48882b483c8bad5399d296ec0" to "a7eeece2180be4d91587eb133e7ab73734400f85"



---

archive/issue_comments_560724.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-12-17T14:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560724",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_560725.json:
```json
{
    "body": "<a id='comment:10'></a>\nAs mentioned in the description of the ticket, some methods are worse than others.\n\nE.g. it can easily happen, that one does something with the graph. There is even an example in the doctests (the one I modified in ticket), where the original graph was reversed.\n\nReplying to [gh-LaisRast](#comment%3A6):\n> I am not sure we need to change everything to be immutable.\n> But since you are doing this, you may also want to consider the following:\n> \n> ```\n> sage: P = polytopes.cube()\n> ....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000\n> ....: P.restricted_automorphism_group(output='matrixlist')[0]\n> ....: \n> [1000    0    0    0]\n> [   0    1    0    0]\n> [   0    0    1    0]\n> [   0    0    0    1]\n> ```",
    "created_at": "2019-12-17T15:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560725",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'></a>
As mentioned in the description of the ticket, some methods are worse than others.

E.g. it can easily happen, that one does something with the graph. There is even an example in the doctests (the one I modified in ticket), where the original graph was reversed.

Replying to [gh-LaisRast](#comment%3A6):
> I am not sure we need to change everything to be immutable.
> But since you are doing this, you may also want to consider the following:
> 
> ```
> sage: P = polytopes.cube()
> ....: P.restricted_automorphism_group(output='matrixlist')[0][0,0] = 1000
> ....: P.restricted_automorphism_group(output='matrixlist')[0]
> ....: 
> [1000    0    0    0]
> [   0    1    0    0]
> [   0    0    1    0]
> [   0    0    0    1]
> ```



---

archive/issue_comments_560726.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Laith Rastanawi\"",
    "created_at": "2019-12-17T20:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560726",
    "user": "https://github.com/LaisRast"
}
```

Changing reviewer from "" to "Laith Rastanawi"



---

archive/issue_comments_560727.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-12-17T20:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560727",
    "user": "https://github.com/LaisRast"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_560728.json:
```json
{
    "body": "<a id='comment:11'></a>\nI believe now it is good to go.",
    "created_at": "2019-12-17T20:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560728",
    "user": "https://github.com/LaisRast"
}
```

<a id='comment:11'></a>
I believe now it is good to go.



---

archive/issue_comments_560729.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-12-20T22:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560729",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_082307.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-12-20T22:45:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28828#event-82307"
}
```



---

archive/issue_comments_560730.json:
```json
{
    "body": "Changing branch from \"public/28828\" to \"a7eeece2180be4d91587eb133e7ab73734400f85\"",
    "created_at": "2019-12-20T22:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28828",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28828#issuecomment-560730",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/28828" to "a7eeece2180be4d91587eb133e7ab73734400f85"
