# Issue 34131: implement the F,H,M triangles

Issue created by migration from https://trac.sagemath.org/ticket/34368

Original creator: chapoton

Original creation time: 2022-08-15 17:02:45

CC:  mantepse tscrim jhpalmieri

as useful invariants of posets and simplicial complexes


---

Comment by git created at 2022-08-17 06:45:11

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2022-10-10 15:27:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-10-10 15:32:17

not sure if there is somebody else here around interested in that stuff, but this is important for me, so review is welcome


---

Comment by tscrim created at 2022-10-10 23:05:10

Needs review?

Some quick comments:

- I would have expected something called triangle to be more, well, triangle-like. Could you include a definition in each of the triangle classes?
- It might be good to add “X-triangle:” to the start of each of the representation.
- “2-**variable** polynomial”
- Is “toutes” French? It is fine, but I just wanted to make sure the variable name makes sense in at least one language.
- Please spell out “with respect to”.


---

Comment by git created at 2022-10-11 06:54:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-10-11 09:22:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-10-11 09:26:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-10-21 14:19:48

ok, let me try to get this in. Interested people are probably using sage, but not contributing.


---

Comment by chapoton created at 2022-10-21 14:19:48

Changing status from new to needs_review.


---

Comment by tscrim created at 2022-10-22 07:46:32

Thank you.

Last little things:

- I think it would be good to also have an `_ascii_art_` and `_latex_`.
- Should we add the type also to those and/or the `_unicode_art_`?
- Similarly, it would make more sense for the prefix to just be the letter rather than have the `: ` as well.
- Can you add a doctest for `F_triangle` using the empty complex? I have a hunch this will fail because `sum` will return an `int` in this case.

I am slightly worried about `f_triangle` and `F_triangle` causing confusion. Perhaps `F_triangle_polynomial`? I am not sure there is a better name though. I am cc-ing John in case he has an opinion about this.


---

Comment by git created at 2022-10-22 08:33:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-10-22 08:42:31

Thanks for the suggestions.
> 
> - I think it would be good to also have an `_ascii_art_` and `_latex_`.

ok, done

> - Should we add the type also to those and/or the `_unicode_art_`?

This is a good suggestion. I am not sure that I want that, as usually it is very clear in my mind what kind of triangle I am seeing. And also, I would not know where to write the prefix. Maybe something like this:

```
    F-triangle
    ⎛ 1  0  0  0⎞
    ⎜ 3  3  0  0⎟
    ⎜ 3  8  5  0⎟
    ⎝ 1  6 10  5⎠
```

?

> - Similarly, it would make more sense for the prefix to just be the letter rather than have the `: ` as well.

ok, done

> - Can you add a doctest for `F_triangle` using the empty complex? I have a hunch this will fail because `sum` will return an `int` in this case.

doctest added and it was not failing
 
> I am slightly worried about `f_triangle` and `F_triangle` causing confusion. Perhaps `F_triangle_polynomial`? I am not sure there is a better name though. I am cc-ing John in case he has an opinion about this.

Yes, this is certainly confusing. I have never heard of the other f-triangle outside of sage, but of course almost nobody has heard of the F-triangle. So, there is some kind of competition in the lack of fame..


---

Comment by tscrim created at 2022-10-22 10:26:44

Replying to [comment:12 Frédéric Chapoton]:
> > - Should we add the type also to those and/or the `_unicode_art_`?
> 
> This is a good suggestion. I am not sure that I want that, as usually it is very clear in my mind what kind of triangle I am seeing. And also, I would not know where to write the prefix. Maybe something like this:
> {{{
>     F-triangle
>     ⎛ 1  0  0  0⎞
>     ⎜ 3  3  0  0⎟
>     ⎜ 3  8  5  0⎟
>     ⎝ 1  6 10  5⎠
> }}}
> ?

I would add the prefix to the lower-right corner of the matrix and have it be a subscript in the latex. However, it is not such a big deal since it is at least there in the print representation.

> > - Can you add a doctest for `F_triangle` using the empty complex? I have a hunch this will fail because `sum` will return an `int` in this case.
> 
> doctest added and it was not failing

Ah, I see why: the empty face gets counted. Thanks for adding the check for this corner case.

> > I am slightly worried about `f_triangle` and `F_triangle` causing confusion. Perhaps `F_triangle_polynomial`? I am not sure there is a better name though. I am cc-ing John in case he has an opinion about this.
> 
> Yes, this is certainly confusing. I have never heard of the other f-triangle outside of sage, but of course almost nobody has heard of the F-triangle. So, there is some kind of competition in the lack of fame..

Neither have I. There also is the fact we are breaking Python naming conventions here too. Well, IMO it isn't something that needs to be changed for a positive review. I will try to think a bit more about this while I wait until at least Monday Pacific time in case John wants to comment (and wants to not do any work on the weekend).


---

Comment by jhpalmieri created at 2022-10-23 19:56:55

First, I haven't heard of `f-triangle` or `F-triangle`. I might lean toward `F-triangle-polynomial` to avoid confusion, but I don't think it's important.

Second, the PDF docs have at least one error: in the docstring for `Gamma_triangle.h`, the displayed math should have `\gamma` rather than `gamma`. I would also use `\left(` and `\right)` for the parentheses. I think this is pretty minor since the PDF documentation for `combinat` is pretty useless: since it doesn't have a meaningful table of contents, you can't find anything, so I'm guessing that no one uses it. I see this for the table of contents:

1. Introductory material .... 1
2. Thematic indices .... 3
3. Utilities ..... 5
4. Related Topics ..... 7
5. Comprehensive Module List ..... 9
6. Indices and Tables ..... 3697
...

Having over 3000 pages under a single t.o.c. entry is just bad. I think there should be maybe two tables of contents: one organized by topic, and maybe one organized alphabetically (based on the current module list).

Anyway, back to the topic at hand: coming in as an outsider, I am left wondering why these polynomials are called "triangles." If it makes sense to address this in the documentation, then that could be added. If you think the people who care already know, then don't worry about it.


---

Comment by tscrim created at 2022-10-23 23:31:51

Replying to [comment:14 John Palmieri]:
> Having over 3000 pages under a single t.o.c. entry is just bad. I think there should be maybe two tables of contents: one organized by topic, and maybe one organized alphabetically (based on the current module list).

+1 on this, but there are some annoying cross-ref issues. For example, the crystals and root systems should be split into 2 parts, but the former needs to frequently reference the latter. Plus the other combinatorics links. I think it is better now, but I remember struggling a bit with trying to split this up many years ago. I really should find the time to do this...

> Anyway, back to the topic at hand: coming in as an outsider, I am left wondering why these polynomials are called "triangles." If it makes sense to address this in the documentation, then that could be added. If you think the people who care already know, then don't worry about it.

It took me a minute at first to understand it, but it comes from realizing a homogeneous 2 variable polynomial as a row in the (finite) triangle. A row of Pascal's triangle corresponds to `(x + y)^k`, and so a finite version of Pascal's triangle would be $\sum_{k=0}^n (x + y)^k`.


---

Comment by jhpalmieri created at 2022-10-24 03:28:26

Replying to [comment:15 Travis Scrimshaw]:
> Replying to [comment:14 John Palmieri]:
> > Having over 3000 pages under a single t.o.c. entry is just bad. I think there should be maybe two tables of contents: one organized by topic, and maybe one organized alphabetically (based on the current module list).
> 
> +1 on this, but there are some annoying cross-ref issues. For example, the crystals and root systems should be split into 2 parts, but the former needs to frequently reference the latter. Plus the other combinatorics links. I think it is better now, but I remember struggling a bit with trying to split this up many years ago. I really should find the time to do this...

If we could just add a meaningful table of contents, we can leave everything where it is. Maybe that wouldn't create any cross-referencing issues. Just changing `:maxdepth: 1` to `:maxdepth: 2` for the toctrees doesn't do it, I think.


---

Comment by git created at 2022-10-24 08:18:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-10-24 08:19:33

Thanks for the suggestions. I have added one sentence to explain the word "triangle".


---

Comment by tscrim created at 2022-10-24 08:47:46

Replying to [comment:16 John Palmieri]:
> Replying to [comment:15 Travis Scrimshaw]:
> > Replying to [comment:14 John Palmieri]:
> > > Having over 3000 pages under a single t.o.c. entry is just bad. I think there should be maybe two tables of contents: one organized by topic, and maybe one organized alphabetically (based on the current module list).
> > 
> > +1 on this, but there are some annoying cross-ref issues. For example, the crystals and root systems should be split into 2 parts, but the former needs to frequently reference the latter. Plus the other combinatorics links. I think it is better now, but I remember struggling a bit with trying to split this up many years ago. I really should find the time to do this...
> 
> If we could just add a meaningful table of contents, we can leave everything where it is. Maybe that wouldn't create any cross-referencing issues. Just changing `:maxdepth: 1` to `:maxdepth: 2` for the toctrees doesn't do it, I think.

That could work too. Anyways, for another ticket.


---

Comment by tscrim created at 2022-10-24 08:48:18

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2022-10-24 08:48:18

Thanks. LGTM. John, if you disagree, feel free to revert.


---

Comment by jhpalmieri created at 2022-10-24 15:03:05

It's fine with me.


---

Comment by jhpalmieri created at 2022-10-24 22:32:27

Replying to [comment:16 John Palmieri]:
> If we could just add a meaningful table of contents, we can leave everything where it is. Maybe that wouldn't create any cross-referencing issues. Just changing `:maxdepth: 1` to `:maxdepth: 2` for the toctrees doesn't do it, I think.

Removing `module_list.rst` and inserting its contents into `index.rst` works, sort of.

```diff
diff --git a/src/doc/en/reference/combinat/index.rst b/src/doc/en/reference/combinat/index.rst
index 1e2a6da866..c0f79e106a 100644
--- a/src/doc/en/reference/combinat/index.rst
+++ b/src/doc/en/reference/combinat/index.rst
@@ -10,9 +10,375 @@ Comprehensive Module List
 -------------------------
 
 .. toctree::
-   :maxdepth: 1
+   :maxdepth: 2
+
+   sage/combinat/abstract_tree
+   sage/combinat/affine_permutation
+   sage/combinat/algebraic_combinatorics
+   sage/combinat/all
+   sage/combinat/alternating_sign_matrix

 ...

 
-   module_list
 
 .. include:: ../footer.txt
```

produces a good t.o.c. in the PDF file but the depth is perhaps too high in the html version. If we keep `:maxdepth: 1`, then the html looks good but the t.o.c. in the PDF is not high enough. But something along these lines might be good enough. If you open another ticket, please cc me.


---

Comment by vbraun created at 2022-11-07 20:26:09

Resolution: fixed
