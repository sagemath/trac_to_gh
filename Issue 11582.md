# Issue 11582: Computation of rank-decompositions in Sage

archive/issues_011582.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  lsampaio mvngu\n\nHello everybody !\n\nThis patch is an interface between Sage and the software RW, written by Philipp Klaus Krause [1]. It is written in C, and freshly licensed under the GPL2. It is a highly enumerative code that uses a lot of memory, but is still so far the best practical way to obtain optimal decompositions.\n\nThis patch creates the module sage.graphs.graph_decompositions and the rankwidth-related files. As it requires some documentation, some words are added on what a rank-decomposition is and where the code is coming from. Doing that, I also added sage.graphs.modular_decompositions to the documentation.\n\n(As I created a module graph_decompositions, it would make sense to move te modular_decomposition there. It thought it best to do it in a distinct patch, this one being large enough already)\n\nOh. By the way, most of the patch actually contains the copy of the files written by Philipp Klaus Krause.\n\nNathann\n\nhttp://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/rw.shtml\n\nIssue created by migration from https://trac.sagemath.org/ticket/11754\n\n",
    "created_at": "2011-08-29T07:40:29Z",
    "labels": [
        "graph theory",
        "major",
        "enhancement"
    ],
    "title": "Computation of rank-decompositions in Sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11582",
    "user": "ncohen"
}
```
Assignee: jason, ncohen, rlm

CC:  lsampaio mvngu

Hello everybody !

This patch is an interface between Sage and the software RW, written by Philipp Klaus Krause [1]. It is written in C, and freshly licensed under the GPL2. It is a highly enumerative code that uses a lot of memory, but is still so far the best practical way to obtain optimal decompositions.

This patch creates the module sage.graphs.graph_decompositions and the rankwidth-related files. As it requires some documentation, some words are added on what a rank-decomposition is and where the code is coming from. Doing that, I also added sage.graphs.modular_decompositions to the documentation.

(As I created a module graph_decompositions, it would make sense to move te modular_decomposition there. It thought it best to do it in a distinct patch, this one being large enough already)

Oh. By the way, most of the patch actually contains the copy of the files written by Philipp Klaus Krause.

Nathann

http://pholia.tdi.informatik.uni-frankfurt.de/~philipp/software/rw.shtml

Issue created by migration from https://trac.sagemath.org/ticket/11754





---

archive/issue_comments_130384.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-08-29T07:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130384",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_130385.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-01-01T21:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130385",
    "user": "dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_130386.json:
```json
{
    "body": "Nathann,\n\nI tried to install the patch with sage-4.8.alpha5 and it's not possible anymore. \nCould you update the patch ?\n\nBest,\nD.\n\n\n```\ncompote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> hg qimport ~/Soft/sage-patchs/trac_11754.patchadding trac_11754.patch to series file\ncompote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> hg qpush\napplying trac_11754.patch\npatching file doc/en/reference/graphs.rst\nHunk #1 FAILED at 46\n1 out of 1 hunks FAILED -- saving rejects to file doc/en/reference/graphs.rst.rej\nfile sage/graphs/graph_decompositions/__init__.py already exists\n1 out of 1 hunks FAILED -- saving rejects to file sage/graphs/graph_decompositions/__init__.py.rej\npatching file setup.py\nHunk #1 FAILED at 929\n1 out of 1 hunks FAILED -- saving rejects to file setup.py.rej\npatch failed, unable to continue (try -v)\npatch failed, rejects left in working dir\nerrors during apply, please fix and refresh trac_11754.patch\ncompote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> \n```\n",
    "created_at": "2012-01-01T21:52:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130386",
    "user": "dcoudert"
}
```

Nathann,

I tried to install the patch with sage-4.8.alpha5 and it's not possible anymore. 
Could you update the patch ?

Best,
D.


```
compote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> hg qimport ~/Soft/sage-patchs/trac_11754.patchadding trac_11754.patch to series file
compote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> hg qpush
applying trac_11754.patch
patching file doc/en/reference/graphs.rst
Hunk #1 FAILED at 46
1 out of 1 hunks FAILED -- saving rejects to file doc/en/reference/graphs.rst.rej
file sage/graphs/graph_decompositions/__init__.py already exists
1 out of 1 hunks FAILED -- saving rejects to file sage/graphs/graph_decompositions/__init__.py.rej
patching file setup.py
Hunk #1 FAILED at 929
1 out of 1 hunks FAILED -- saving rejects to file setup.py.rej
patch failed, unable to continue (try -v)
patch failed, rejects left in working dir
errors during apply, please fix and refresh trac_11754.patch
compote:/path-to-sage/sage-4.8.alpha5/devel/sage-myclone> 
```




---

archive/issue_comments_130387.json:
```json
{
    "body": "I thought it would be much worse ! Just obvious conflicts with the vertex_separation stuff... Patch updated ! `:-)`\n\nNathann",
    "created_at": "2012-01-01T22:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130387",
    "user": "ncohen"
}
```

I thought it would be much worse ! Just obvious conflicts with the vertex_separation stuff... Patch updated ! `:-)`

Nathann



---

archive/issue_comments_130388.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-01T22:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130388",
    "user": "ncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_130389.json:
```json
{
    "body": "I can now install the patch correctly.\nIt works on my computer for graphs with 20 nodes and seems OK for 25 nodes (I stopped computation since its quite long), but not for graphs with 30 nodes (see error message bellow). I assume I don't have enough memory on my computer, but the error message is not explicit enough.\nIs it possible to test if enough memory is available to run the algorithm as you did for vertex separation and pathwidth ?\nThanks,\nDavid.\n\n\n```\nsage: G = graphs.RandomGNM(30,200)\nsage: x,H = G.rank_decomposition()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:815)()\n\nRuntimeError: Segmentation fault\n```\n",
    "created_at": "2012-01-02T00:33:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130389",
    "user": "dcoudert"
}
```

I can now install the patch correctly.
It works on my computer for graphs with 20 nodes and seems OK for 25 nodes (I stopped computation since its quite long), but not for graphs with 30 nodes (see error message bellow). I assume I don't have enough memory on my computer, but the error message is not explicit enough.
Is it possible to test if enough memory is available to run the algorithm as you did for vertex separation and pathwidth ?
Thanks,
David.


```
sage: G = graphs.RandomGNM(30,200)
sage: x,H = G.rank_decomposition()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:815)()

RuntimeError: Segmentation fault
```




---

archive/issue_comments_130390.json:
```json
{
    "body": "HMmmmmmm.... In the part of the code I wrote the memory allocations are checked, and it would be bad if it came from the original source code. We try not to put our hands in this kind of code, in order to avoid any troubles when the original source codes get updated (we would have to do all our modifications again on the updated version). What we usually do in these cases is report the bug upstream and wait for them to fix it.\n\nThe thing is that I was not able to reproduce your bug on my computer. It begins to eat a lot of memory but no segfault, so I do not really know how to debug it `^^;`\n\nAre you testing this code on your mac ? I hope it is not one of those integer initializations again `:-P`\n\nNathann",
    "created_at": "2012-01-02T10:21:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130390",
    "user": "ncohen"
}
```

HMmmmmmm.... In the part of the code I wrote the memory allocations are checked, and it would be bad if it came from the original source code. We try not to put our hands in this kind of code, in order to avoid any troubles when the original source codes get updated (we would have to do all our modifications again on the updated version). What we usually do in these cases is report the bug upstream and wait for them to fix it.

The thing is that I was not able to reproduce your bug on my computer. It begins to eat a lot of memory but no segfault, so I do not really know how to debug it `^^;`

Are you testing this code on your mac ? I hope it is not one of those integer initializations again `:-P`

Nathann



---

archive/issue_comments_130391.json:
```json
{
    "body": "The test has been done on a standard PC (32 bits) with 4G of RAM and running linux. Nothing special. The error is almost instantaneous. \n\nSome simple tests.\n\n```\nsage: G = graphs.PetersenGraph()\nsage: G.rank_decomposition()\n(3, Graph on 19 vertices)\nsage: G = graphs.RandomGNM(20,200)\nsage: G.rank_decomposition()\n(1, Graph on 39 vertices)\n```\n\n\nTesting with 32 nodes => the patch is working for 31 vertices only !\n\n```\nsage: G = graphs.RandomGNM(32,200)\nsage: G.connected_components_number()\n1\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nException                                 Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:677)()\n\nException: The rank decomposition cannot be computed on graphs of more than 32 vertices.\n```\n\n\nThe patch contains some test regarding memory requirement\n\n```\nsage: G = graphs.RandomGNM(29,200)\nsage: G.connected_components_number()\n1\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nException                                 Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:730)()\n\nException: There has been a mistake while converting the Sage graph to a C structure. The memory is probably insufficient (2^(n+1) is a *LOT*).\n\n```\n\n\nBut the test is not always working, perhaps because I'm on a 32 bits computer...\n\n```\n\nsage: G = graphs.RandomGNM(30,200)\nsage: G.connected_components_number()\n1\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:815)()\n\nRuntimeError: Segmentation fault\n\n```\n\n\n\nI also have a segfault when running on an empty graph. A simple test is certainly missing.\n\n```\nsage: G= Graph()\nsage: G.rank_decomposition()\n/path-to-sage/sage-4.8.alpha5/local/lib/libcsage.so(print_backtrace+0x3b)[0x4f7967]\n/path-to-sage/sage-4.8.alpha5/local/lib/libcsage.so(sigdie+0x17)[0x4f79a7]\n...\n...\n------------------------------------------------------------------------\nUnhandled SIGSEGV: A segmentation fault occurred in Sage.\nThis probably occurred because a *compiled* component of Sage has a bug\nin it and is not properly wrapped with sig_on(), sig_off(). You might\nwant to run Sage under gdb with 'sage -gdb' to debug this.\nSage will now terminate.\n------------------------------------------------------------------------\nlocal/bin/sage-sage: line 305:  4884 Segmentation fault      (core dumped) sage-ipython \"$@\" -i\n```\n\n\n\nHope it helps fixing the problems.\n\nBest,\n\nDavid.",
    "created_at": "2012-01-02T10:47:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130391",
    "user": "dcoudert"
}
```

The test has been done on a standard PC (32 bits) with 4G of RAM and running linux. Nothing special. The error is almost instantaneous. 

Some simple tests.

```
sage: G = graphs.PetersenGraph()
sage: G.rank_decomposition()
(3, Graph on 19 vertices)
sage: G = graphs.RandomGNM(20,200)
sage: G.rank_decomposition()
(1, Graph on 39 vertices)
```


Testing with 32 nodes => the patch is working for 31 vertices only !

```
sage: G = graphs.RandomGNM(32,200)
sage: G.connected_components_number()
1
sage: G.rank_decomposition()
---------------------------------------------------------------------------
Exception                                 Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:677)()

Exception: The rank decomposition cannot be computed on graphs of more than 32 vertices.
```


The patch contains some test regarding memory requirement

```
sage: G = graphs.RandomGNM(29,200)
sage: G.connected_components_number()
1
sage: G.rank_decomposition()
---------------------------------------------------------------------------
Exception                                 Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:730)()

Exception: There has been a mistake while converting the Sage graph to a C structure. The memory is probably insufficient (2^(n+1) is a *LOT*).

```


But the test is not always working, perhaps because I'm on a 32 bits computer...

```

sage: G = graphs.RandomGNM(30,200)
sage: G.connected_components_number()
1
sage: G.rank_decomposition()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-myclone/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:815)()

RuntimeError: Segmentation fault

```



I also have a segfault when running on an empty graph. A simple test is certainly missing.

```
sage: G= Graph()
sage: G.rank_decomposition()
/path-to-sage/sage-4.8.alpha5/local/lib/libcsage.so(print_backtrace+0x3b)[0x4f7967]
/path-to-sage/sage-4.8.alpha5/local/lib/libcsage.so(sigdie+0x17)[0x4f79a7]
...
...
------------------------------------------------------------------------
Unhandled SIGSEGV: A segmentation fault occurred in Sage.
This probably occurred because a *compiled* component of Sage has a bug
in it and is not properly wrapped with sig_on(), sig_off(). You might
want to run Sage under gdb with 'sage -gdb' to debug this.
Sage will now terminate.
------------------------------------------------------------------------
local/bin/sage-sage: line 305:  4884 Segmentation fault      (core dumped) sage-ipython "$@" -i
```



Hope it helps fixing the problems.

Best,

David.



---

archive/issue_comments_130392.json:
```json
{
    "body": "Hellooooooo David !!\n\nI just updated the patch so that the case n == 0 is checked. This being said, there is nothing I can do with the segfault you meet as I have not been able to reproduce it. I read my code several times and try to pay attention to those memory errors, all the malloc are checked, etc... I am beginning to think the error may be in the original C code and perhaps it is not too hard to spot by adding \"printf(\"Hello\\n\");\" at some different places until we know where the error is coming from. \nAfter this, I can forward the problem to the author and ask for a patch (and I don't expect this to take too much time either).\n\nThe thing is that I really can not debug this without being able to reproduce the bug. I tried maaaaaaany times t create a random graph and give it a try but it never happened. Did you tell me that the error occurred right when the function was called ? And do you know if it happens \"often\" ? How many random graphs do you try before it segfaults ?\n\nNathann",
    "created_at": "2012-01-08T10:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130392",
    "user": "ncohen"
}
```

Hellooooooo David !!

I just updated the patch so that the case n == 0 is checked. This being said, there is nothing I can do with the segfault you meet as I have not been able to reproduce it. I read my code several times and try to pay attention to those memory errors, all the malloc are checked, etc... I am beginning to think the error may be in the original C code and perhaps it is not too hard to spot by adding "printf("Hello\n");" at some different places until we know where the error is coming from. 
After this, I can forward the problem to the author and ask for a patch (and I don't expect this to take too much time either).

The thing is that I really can not debug this without being able to reproduce the bug. I tried maaaaaaany times t create a random graph and give it a try but it never happened. Did you tell me that the error occurred right when the function was called ? And do you know if it happens "often" ? How many random graphs do you try before it segfaults ?

Nathann



---

archive/issue_comments_130393.json:
```json
{
    "body": "I just tried the new version of the patch.\n\nIt is now OK for empty graphs\n\n```\nsage: G = Graph()\nsage: G.rank_decomposition()\n(0, Graph on 0 vertices)\n```\n\n\nI don't know what is the expected result for non-connected graphs. I have the following result:\n\n```\nsage: G = graphs.RandomGNM(10,1)\nsage: G.connected_components_number()\n9\nsage: G.rank_decomposition()\n(1, Graph on 19 vertices)\n```\n\n\nNow, concerning large graphs:\n\n* The exception message for N==32 could be slightly improve. The current message is \"\nException: The rank decomposition cannot be computed on graphs of more than 32 vertices.\", but is it >32 or >=32 ?\n\n* N == 31 AND N == 29: I got the correct message: \"Exception: There has been a mistake while converting the Sage graph to a C structure. The memory is probably insufficient (2^(n+1) is a *LOT*).\"\n\n* N == 30: I have a segfault immediatly, that is for the first 30 vertices graph I'm trying:\n\n```\nsage: G = graphs.RandomGNM(30,500)\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/path-to-sage/sage-4.8.alpha5/devel/sage-blop/sage/<ipython console> in <module>()\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:863)()\n\nRuntimeError: Segmentation fault\n\n```\n \n\nI tried with other 30 vertices graphs: G = graphs.GridGraph([5,6]), G = graphs.RandomTree(30), G = graphs.CompleteGraph(30), ... and I have exactly the same segfault.\n\nThe problem comes from the \"if sage_graph_to_matrix(G)\" in which you use the \"    int init_rw_dec(uint_fast8_t n) \" function that uses the \"int init_rw(uint_fast8_t n)\" function. \nMost probably, the computation exceeds the type capacity and we get a wrong result. \nSo, to be on the safe side, I suggest to add a test in the sage_graph_to_matrix function to test if memory allocation is possible.\nOr, as you have suggested, you can ask for a patch from the original author.\n\nBest,\nD.",
    "created_at": "2012-01-08T13:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130393",
    "user": "dcoudert"
}
```

I just tried the new version of the patch.

It is now OK for empty graphs

```
sage: G = Graph()
sage: G.rank_decomposition()
(0, Graph on 0 vertices)
```


I don't know what is the expected result for non-connected graphs. I have the following result:

```
sage: G = graphs.RandomGNM(10,1)
sage: G.connected_components_number()
9
sage: G.rank_decomposition()
(1, Graph on 19 vertices)
```


Now, concerning large graphs:

* The exception message for N==32 could be slightly improve. The current message is "
Exception: The rank decomposition cannot be computed on graphs of more than 32 vertices.", but is it >32 or >=32 ?

* N == 31 AND N == 29: I got the correct message: "Exception: There has been a mistake while converting the Sage graph to a C structure. The memory is probably insufficient (2^(n+1) is a *LOT*)."

* N == 30: I have a segfault immediatly, that is for the first 30 vertices graph I'm trying:

```
sage: G = graphs.RandomGNM(30,500)
sage: G.rank_decomposition()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/path-to-sage/sage-4.8.alpha5/devel/sage-blop/sage/<ipython console> in <module>()

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-4.8.alpha5/local/lib/python2.6/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:863)()

RuntimeError: Segmentation fault

```
 

I tried with other 30 vertices graphs: G = graphs.GridGraph([5,6]), G = graphs.RandomTree(30), G = graphs.CompleteGraph(30), ... and I have exactly the same segfault.

The problem comes from the "if sage_graph_to_matrix(G)" in which you use the "    int init_rw_dec(uint_fast8_t n) " function that uses the "int init_rw(uint_fast8_t n)" function. 
Most probably, the computation exceeds the type capacity and we get a wrong result. 
So, to be on the safe side, I suggest to add a test in the sage_graph_to_matrix function to test if memory allocation is possible.
Or, as you have suggested, you can ask for a patch from the original author.

Best,
D.



---

archive/issue_comments_130394.json:
```json
{
    "body": "Helloooooo !!!\n\nPatch updated to make the 32 limit clearer `:-)`\n\nAbout the segfault : the point is that there is nothing I could \"check\" to return an exception to avoid the segault unless I know where it comes from. The function you mention contains a total of 5 lines which can produce no segfault, and exclusively consist in memory allocations and checking the memory has been allocated \n\n```\nint init_rw(uint_fast8_t n)\n{\n \tnum_vertices = n;\n\tadjacency_matrix = malloc(sizeof(subset_t) * n);\n\tslots = malloc(sizeof(uint_fast8_t) * (1ul << n));\n\tcslots = 0;\n\treturn((adjacency_matrix && slots) ? 0 : -1);\n}\n```\n\nIf anything goes wrong, the function return -1 instead of 0. And this function (which is defined in the original C code) is called as you said, by a \"if\" that is precisely there to ensure the memory allocation went smoothly. If it did not, it also returns and error and the function above (rank_decomposition) raises the exception. I mean, there is no memory allocation that I could check and that is not checked already `O_o`\n\nNathann",
    "created_at": "2012-01-08T19:17:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130394",
    "user": "ncohen"
}
```

Helloooooo !!!

Patch updated to make the 32 limit clearer `:-)`

About the segfault : the point is that there is nothing I could "check" to return an exception to avoid the segault unless I know where it comes from. The function you mention contains a total of 5 lines which can produce no segfault, and exclusively consist in memory allocations and checking the memory has been allocated 

```
int init_rw(uint_fast8_t n)
{
 	num_vertices = n;
	adjacency_matrix = malloc(sizeof(subset_t) * n);
	slots = malloc(sizeof(uint_fast8_t) * (1ul << n));
	cslots = 0;
	return((adjacency_matrix && slots) ? 0 : -1);
}
```

If anything goes wrong, the function return -1 instead of 0. And this function (which is defined in the original C code) is called as you said, by a "if" that is precisely there to ensure the memory allocation went smoothly. If it did not, it also returns and error and the function above (rank_decomposition) raises the exception. I mean, there is no memory allocation that I could check and that is not checked already `O_o`

Nathann



---

archive/issue_comments_130395.json:
```json
{
    "body": "I added some printf to track the segfault. It occurs in the calculate_level function for ss=1 and i=17. More precisely, the segfault is with the instruction *cslots[1 << i] = 0x0;*. \n\n```\nvoid calculate_level(uint_fast8_t ss)\n{\n        uint_fast8_t i;\n\n        subset_size = ss;\n\n        if(subset_size == 0)\n                slots[0] = 0;\n        else if(subset_size == 1)\n                for(i = 0; i < num_vertices; i++)\n                { \n                  printf(\"ss=%d, i=%d\\n\",ss,i);\n                        slots[1 << i] = cut_rank(1 << i);\n                  printf(\"after cut_rank\\n\");\n                        cslots[1 << i] = 0x0;\n                  printf(\"after cslots\\n\");\n                }\n        else\n        {\n                subset_t i;\n                const subset_t end = binomial_coefficient(num_vertices, subset_size);\n                for(i = 0; i < end; i++)\n                        fill_slot(i);\n        }\n}\n```\n\nThis is definitely a memory allocation problem.\n\nD.",
    "created_at": "2012-01-08T22:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130395",
    "user": "dcoudert"
}
```

I added some printf to track the segfault. It occurs in the calculate_level function for ss=1 and i=17. More precisely, the segfault is with the instruction *cslots[1 << i] = 0x0;*. 

```
void calculate_level(uint_fast8_t ss)
{
        uint_fast8_t i;

        subset_size = ss;

        if(subset_size == 0)
                slots[0] = 0;
        else if(subset_size == 1)
                for(i = 0; i < num_vertices; i++)
                { 
                  printf("ss=%d, i=%d\n",ss,i);
                        slots[1 << i] = cut_rank(1 << i);
                  printf("after cut_rank\n");
                        cslots[1 << i] = 0x0;
                  printf("after cslots\n");
                }
        else
        {
                subset_t i;
                const subset_t end = binomial_coefficient(num_vertices, subset_size);
                for(i = 0; i < end; i++)
                        fill_slot(i);
        }
}
```

This is definitely a memory allocation problem.

D.



---

archive/issue_comments_130396.json:
```json
{
    "body": "Ahah !! i=17 ! Now that's something ! I prefer when it is something around a power of two, it makes more sense `:-)`\n\nWell, for instance I wondered what the result of \n\n```\n1 << (uint_fast8) 17\n```\n\n\nis in C. Is 1 automatically set to type uint_fast8 ? In this case the result is zero. Is it automatically set to integer ? In this case the result is 2^17. Anyway this should not make much of a difference, as accessing cslots[0] is not big deal -- it is the safest of them all to access !\nOddly the allocation part seems totally safe \n\n```\ncslots = malloc(sizeof(subset_t) * (1ul << n));\n```\n\n\nNathann",
    "created_at": "2012-01-09T10:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130396",
    "user": "ncohen"
}
```

Ahah !! i=17 ! Now that's something ! I prefer when it is something around a power of two, it makes more sense `:-)`

Well, for instance I wondered what the result of 

```
1 << (uint_fast8) 17
```


is in C. Is 1 automatically set to type uint_fast8 ? In this case the result is zero. Is it automatically set to integer ? In this case the result is 2^17. Anyway this should not make much of a difference, as accessing cslots[0] is not big deal -- it is the safest of them all to access !
Oddly the allocation part seems totally safe 

```
cslots = malloc(sizeof(subset_t) * (1ul << n));
```


Nathann



---

archive/issue_comments_130397.json:
```json
{
    "body": "I tried with a fresh install of 5.0.beta1 and I still have the problem with 30 :(\n\nD.",
    "created_at": "2012-01-24T22:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130397",
    "user": "dcoudert"
}
```

I tried with a fresh install of 5.0.beta1 and I still have the problem with 30 :(

D.



---

archive/issue_comments_130398.json:
```json
{
    "body": "Ok... I gave it another try and really have no idea where this could come from. As the only thing I can guess is that the problem actually come from the original source code, what would you think of merging this patch anyway, with a warning in the documentation (also to ask people experiencing the same bug, if any, to give us information on their hardware), and continue to discuss it with the author ?\n\nThe way we are going now, this patch will just be forgotten even though it can actually solve the problem except on your architecture for some mysterious reason `O_o`\n\nNathann",
    "created_at": "2012-01-25T09:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130398",
    "user": "ncohen"
}
```

Ok... I gave it another try and really have no idea where this could come from. As the only thing I can guess is that the problem actually come from the original source code, what would you think of merging this patch anyway, with a warning in the documentation (also to ask people experiencing the same bug, if any, to give us information on their hardware), and continue to discuss it with the author ?

The way we are going now, this patch will just be forgotten even though it can actually solve the problem except on your architecture for some mysterious reason `O_o`

Nathann



---

archive/issue_comments_130399.json:
```json
{
    "body": "I agree with this proposal, so I give a positive review.\n\nHonestly, I think most of us will never try use the algorithm for N=30 due to very huge computation time ;-)\n\nD.",
    "created_at": "2012-01-25T13:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130399",
    "user": "dcoudert"
}
```

I agree with this proposal, so I give a positive review.

Honestly, I think most of us will never try use the algorithm for N=30 due to very huge computation time ;-)

D.



---

archive/issue_comments_130400.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-01-25T13:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130400",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_130401.json:
```json
{
    "body": "Argggg !!! A bit too fast !! The warning was not in the patch when I said that ! Could you check this other patch too ? It contains the message I mentionned and also fixes a warning when building the documentation.\n\nSorryyyyyyyyyyyyyyyyyy !!\n\nNathann",
    "created_at": "2012-01-25T13:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130401",
    "user": "ncohen"
}
```

Argggg !!! A bit too fast !! The warning was not in the patch when I said that ! Could you check this other patch too ? It contains the message I mentionned and also fixes a warning when building the documentation.

Sorryyyyyyyyyyyyyyyyyy !!

Nathann



---

archive/issue_comments_130402.json:
```json
{
    "body": "Attachment [trac_11754_warning.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754_warning.patch) by dcoudert created at 2012-01-25 14:18:44\n\nI tried the warning patch as well, and the documentation is properly generated with a clear message (pink warning box).\n\nI give a positive review.\n\nD.",
    "created_at": "2012-01-25T14:18:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130402",
    "user": "dcoudert"
}
```

Attachment [trac_11754_warning.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754_warning.patch) by dcoudert created at 2012-01-25 14:18:44

I tried the warning patch as well, and the documentation is properly generated with a clear message (pink warning box).

I give a positive review.

D.



---

archive/issue_comments_130403.json:
```json
{
    "body": "Thaaaaaaaaaanks ! `:-)`\n\nI'm trying to write some proof in geometry, and I'm having a lot of fun. Hopefully it is not a final one, but just for my new bosses... It's as clear as a cops-and-robbers proof `:-P`\n\nNathann",
    "created_at": "2012-01-25T14:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130403",
    "user": "ncohen"
}
```

Thaaaaaaaaaanks ! `:-)`

I'm trying to write some proof in geometry, and I'm having a lot of fun. Hopefully it is not a final one, but just for my new bosses... It's as clear as a cops-and-robbers proof `:-P`

Nathann



---

archive/issue_comments_130404.json:
```json
{
    "body": "Oops. Forgot to add the list of patches that should be applied to the ticket.",
    "created_at": "2012-01-25T14:22:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130404",
    "user": "ncohen"
}
```

Oops. Forgot to add the list of patches that should be applied to the ticket.



---

archive/issue_comments_130405.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-01-29T14:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130405",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_130406.json:
```json
{
    "body": "The commit message of [attachment:trac_11754.patch] should be changed.",
    "created_at": "2012-01-29T14:03:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130406",
    "user": "jdemeyer"
}
```

The commit message of [attachment:trac_11754.patch] should be changed.



---

archive/issue_comments_130407.json:
```json
{
    "body": "Ooops `^^;`\n\nNathann",
    "created_at": "2012-01-29T14:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130407",
    "user": "ncohen"
}
```

Ooops `^^;`

Nathann



---

archive/issue_comments_130408.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2012-01-29T14:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130408",
    "user": "ncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_130409.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-01-29T16:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130409",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_130410.json:
```json
{
    "body": "I get Cython compilation failures:\n\n```\nIn file included from sage/graphs/graph_decompositions/rankwidth/rw.c:22,\n                 from sage/graphs/graph_decompositions/rankwidth.c:236:\nsage/graphs/graph_decompositions/rankwidth/rw.h:28: error: redefinition of typedef 'subset_t'\nsage/graphs/graph_decompositions/rankwidth/rw.h:28: error: previous declaration of 'subset_t' was here\n```\n",
    "created_at": "2012-01-29T16:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130410",
    "user": "jdemeyer"
}
```

I get Cython compilation failures:

```
In file included from sage/graphs/graph_decompositions/rankwidth/rw.c:22,
                 from sage/graphs/graph_decompositions/rankwidth.c:236:
sage/graphs/graph_decompositions/rankwidth/rw.h:28: error: redefinition of typedef 'subset_t'
sage/graphs/graph_decompositions/rankwidth/rw.h:28: error: previous declaration of 'subset_t' was here
```




---

archive/issue_comments_130411.json:
```json
{
    "body": "Weird `O_o`. I've got no problem on my computer. Are you using beta1, or has something important changed since ?\n\nNathann",
    "created_at": "2012-01-29T16:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130411",
    "user": "ncohen"
}
```

Weird `O_o`. I've got no problem on my computer. Are you using beta1, or has something important changed since ?

Nathann



---

archive/issue_comments_130412.json:
```json
{
    "body": "I tried on several computers, and I have the same compilation error on one of them (namely musclotte). \n\n* Intel(R) Xeon(R) CPU W5580 `@` 3.20GHz\n* 64bits\n* gcc (GCC) 4.4.3 20100127 (Red Hat 4.4.3-4)\n* Sage Version 4.8, Release Date: 2012-01-20\n\nLet me know if I can help solving the problem.\n\nD.",
    "created_at": "2012-01-29T19:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130412",
    "user": "dcoudert"
}
```

I tried on several computers, and I have the same compilation error on one of them (namely musclotte). 

* Intel(R) Xeon(R) CPU W5580 `@` 3.20GHz
* 64bits
* gcc (GCC) 4.4.3 20100127 (Red Hat 4.4.3-4)
* Sage Version 4.8, Release Date: 2012-01-20

Let me know if I can help solving the problem.

D.



---

archive/issue_comments_130413.json:
```json
{
    "body": "Probably it depends on the gcc version.  My report was with the default gcc on sage.math, which is gcc-4.2.4.",
    "created_at": "2012-01-29T23:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130413",
    "user": "jdemeyer"
}
```

Probably it depends on the gcc version.  My report was with the default gcc on sage.math, which is gcc-4.2.4.



---

archive/issue_comments_130414.json:
```json
{
    "body": "Hmmmm... Considering the bug, this is probably the problem. Mine is 4.6.2.\n\nNathann",
    "created_at": "2012-01-29T23:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130414",
    "user": "ncohen"
}
```

Hmmmm... Considering the bug, this is probably the problem. Mine is 4.6.2.

Nathann



---

archive/issue_comments_130415.json:
```json
{
    "body": "The other computer on which I don't have compilation error is with gcc (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9).\n\nUnfortunately, we cannot rely on gcc version to solve the problem.\n\nNathann, may be you can add a test around the definition of type subset_t to avoid redefinition, something like (not sure of the syntax but I know it can be done)\n\n\n```\n\n#ifndef _GUARD_SUBSET_T_DEFINITION_\n\t\ntypedef uint_least32_t subset_t;\n\n#define _GUARD_SUBSET_T_DEFINITION_ \n\n#endif\n\n```\n\nD.",
    "created_at": "2012-01-30T00:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130415",
    "user": "dcoudert"
}
```

The other computer on which I don't have compilation error is with gcc (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9).

Unfortunately, we cannot rely on gcc version to solve the problem.

Nathann, may be you can add a test around the definition of type subset_t to avoid redefinition, something like (not sure of the syntax but I know it can be done)


```

#ifndef _GUARD_SUBSET_T_DEFINITION_
	
typedef uint_least32_t subset_t;

#define _GUARD_SUBSET_T_DEFINITION_ 

#endif

```

D.



---

archive/issue_comments_130416.json:
```json
{
    "body": "Hellooooooo !!!\n\nCould you please try this new patch ? And could you give the 30-vertices segfault another try too ? `:-)`\n\nNathann",
    "created_at": "2012-01-30T12:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130416",
    "user": "ncohen"
}
```

Hellooooooo !!!

Could you please try this new patch ? And could you give the 30-vertices segfault another try too ? `:-)`

Nathann



---

archive/issue_comments_130417.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-01-30T12:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130417",
    "user": "ncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_130418.json:
```json
{
    "body": "Considering `rw.c` is part of Sage, there is no need for the file `COPYING`.",
    "created_at": "2012-01-30T13:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130418",
    "user": "jdemeyer"
}
```

Considering `rw.c` is part of Sage, there is no need for the file `COPYING`.



---

archive/issue_comments_130419.json:
```json
{
    "body": "Updated !\n\nNathann",
    "created_at": "2012-01-30T14:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130419",
    "user": "ncohen"
}
```

Updated !

Nathann



---

archive/issue_comments_130420.json:
```json
{
    "body": "Not good with 30-vertices on my 32bits / sage.5.beta1 / gcc 4.6.1 computer\n\n\n```\nsage: G = graphs.RandomTree(30)\nsage: G.rank_decomposition()\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n\n/path-to-sage/sage-5.0.beta1/devel/sage-myclone/sage/graphs/<ipython console> in <module>()\n\n/path-to-sage/sage-5.0.beta1/local/lib/python2.7/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)\n   2999 \n   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition\n-> 3001         return rank_decomposition(self, verbose = verbose)\n   3002 \n   3003     ### Matching\n\n/path-to-sage/sage-5.0.beta1/local/lib/python2.7/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:863)()\n\nRuntimeError: Segmentation fault\n```\n\n\nand still compilation errors on the other computer\n:(",
    "created_at": "2012-01-30T14:50:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130420",
    "user": "dcoudert"
}
```

Not good with 30-vertices on my 32bits / sage.5.beta1 / gcc 4.6.1 computer


```
sage: G = graphs.RandomTree(30)
sage: G.rank_decomposition()
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)

/path-to-sage/sage-5.0.beta1/devel/sage-myclone/sage/graphs/<ipython console> in <module>()

/path-to-sage/sage-5.0.beta1/local/lib/python2.7/site-packages/sage/graphs/graph.pyc in rank_decomposition(self, verbose)
   2999 
   3000         from sage.graphs.graph_decompositions.rankwidth import rank_decomposition
-> 3001         return rank_decomposition(self, verbose = verbose)
   3002 
   3003     ### Matching

/path-to-sage/sage-5.0.beta1/local/lib/python2.7/site-packages/sage/graphs/graph_decompositions/rankwidth.so in sage.graphs.graph_decompositions.rankwidth.rank_decomposition (sage/graphs/graph_decompositions/rankwidth.c:863)()

RuntimeError: Segmentation fault
```


and still compilation errors on the other computer
:(



---

archive/issue_comments_130421.json:
```json
{
    "body": "Hmmm... Is there any way to use musclotte from outside of the INRIA network. It is pretty hard to debug a code that runs on your computer `:-p`\n\nNathann",
    "created_at": "2012-01-30T15:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130421",
    "user": "ncohen"
}
```

Hmmm... Is there any way to use musclotte from outside of the INRIA network. It is pretty hard to debug a code that runs on your computer `:-p`

Nathann



---

archive/issue_comments_130422.json:
```json
{
    "body": "What about this new patch ? After this, I really have no idea of what to try :-p\n\nNathann",
    "created_at": "2012-01-30T15:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130422",
    "user": "ncohen"
}
```

What about this new patch ? After this, I really have no idea of what to try :-p

Nathann



---

archive/issue_comments_130423.json:
```json
{
    "body": "no change :(\nI will check the code asap.\nD.",
    "created_at": "2012-01-30T15:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130423",
    "user": "dcoudert"
}
```

no change :(
I will check the code asap.
D.



---

archive/issue_comments_130424.json:
```json
{
    "body": "Good news, I have identified the cause of my segfault !\n\nIn function `init_rw_dec`, with N=30, I have `sizeof(subset_t) * (1ul << n) == 0` !!!\nConsequently, the malloc function returns a pointer.\nThis is a stupid numerical problem.\nWe have `sizeof(subset_t)==4` and `(1ul<<30)==1073741824`. But at least on my computer, it happens that `4294967296==0 mod(2^32)`... \n\nSo you should add a test like this just after the malloc:\n\n```\nif((sizeof(subset_t) * (1ul << n)==0) && (n>0) && cslots) return(-1);\n```\n\n\nA similar test in function `init_rw` could be safer.\n\n\nNo news concerning the compilation error.\n\nBest,\nD.",
    "created_at": "2012-01-31T19:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130424",
    "user": "dcoudert"
}
```

Good news, I have identified the cause of my segfault !

In function `init_rw_dec`, with N=30, I have `sizeof(subset_t) * (1ul << n) == 0` !!!
Consequently, the malloc function returns a pointer.
This is a stupid numerical problem.
We have `sizeof(subset_t)==4` and `(1ul<<30)==1073741824`. But at least on my computer, it happens that `4294967296==0 mod(2^32)`... 

So you should add a test like this just after the malloc:

```
if((sizeof(subset_t) * (1ul << n)==0) && (n>0) && cslots) return(-1);
```


A similar test in function `init_rw` could be safer.


No news concerning the compilation error.

Best,
D.



---

archive/issue_comments_130425.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-01-31T19:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130425",
    "user": "dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_130426.json:
```json
{
    "body": "complement patch to fix compilation errors and segfaults",
    "created_at": "2012-02-01T12:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130426",
    "user": "dcoudert"
}
```

complement patch to fix compilation errors and segfaults



---

archive/issue_comments_130427.json:
```json
{
    "body": "Attachment [trac_11754_fix_compilation_error_and_a_segfault.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754_fix_compilation_error_and_a_segfault.patch) by dcoudert created at 2012-02-01 12:28:02\n\nThis complementary patch solves: \n\n* compilation errors discussed in this ticket on some versions of gcc\n* segfault with N=30 discussed in this ticket.\n\nApplying all attached files, I'm satisfied with this patch. What about you ?",
    "created_at": "2012-02-01T12:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130427",
    "user": "dcoudert"
}
```

Attachment [trac_11754_fix_compilation_error_and_a_segfault.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754_fix_compilation_error_and_a_segfault.patch) by dcoudert created at 2012-02-01 12:28:02

This complementary patch solves: 

* compilation errors discussed in this ticket on some versions of gcc
* segfault with N=30 discussed in this ticket.

Applying all attached files, I'm satisfied with this patch. What about you ?



---

archive/issue_comments_130428.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-01T12:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130428",
    "user": "dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_130429.json:
```json
{
    "body": "Hellooooooooooooo !!\n\nWell... `^^;`\n\nThe problem with this is that we usually avoid touching the source code we add to Sage, so that there is no problem when we have to update it... I've been personally yelled at once or twice for doing just that `^^;`\n\nI can forward the first fix to the author, for it is a bug of his own software, as for the second bug....\n\nWell, perhaps \"just this\" could be ok for Sage (Jeroen, are you still reading what's happening here ) ? `:-p`\n\nNathann",
    "created_at": "2012-02-01T16:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130429",
    "user": "ncohen"
}
```

Hellooooooooooooo !!

Well... `^^;`

The problem with this is that we usually avoid touching the source code we add to Sage, so that there is no problem when we have to update it... I've been personally yelled at once or twice for doing just that `^^;`

I can forward the first fix to the author, for it is a bug of his own software, as for the second bug....

Well, perhaps "just this" could be ok for Sage (Jeroen, are you still reading what's happening here ) ? `:-p`

Nathann



---

archive/issue_comments_130430.json:
```json
{
    "body": "OK, so please ask the author to perform the proposed modification in the rw.c file.\n\nFurthermore, tell the author of rw.h to add at the beginning of the file the #ifndef _SOME_FLAG_ followed by #define _SOME_FLAG_ 1, then the content of the actual rw.h file, and to end the file with the #endif command. This is standard way of writing .h files.\n\nBest,\n\nD.",
    "created_at": "2012-02-01T19:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130430",
    "user": "dcoudert"
}
```

OK, so please ask the author to perform the proposed modification in the rw.c file.

Furthermore, tell the author of rw.h to add at the beginning of the file the #ifndef _SOME_FLAG_ followed by #define _SOME_FLAG_ 1, then the content of the actual rw.h file, and to end the file with the #endif command. This is standard way of writing .h files.

Best,

D.



---

archive/issue_comments_130431.json:
```json
{
    "body": "Ok, in the end it's not really fair that Philipp should change his code to make ours work. I just added this \"ifndef\" preprocessor instruction in the rw.h file, and I guess it will not be the end of the world to remember if we have to update the code at some point (which I'd probably do myself anyway `:-p`).\n\nPlease tell me if it works on your computer, and let's roll `:-)`\n\nNathann",
    "created_at": "2012-02-23T15:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130431",
    "user": "ncohen"
}
```

Ok, in the end it's not really fair that Philipp should change his code to make ours work. I just added this "ifndef" preprocessor instruction in the rw.h file, and I guess it will not be the end of the world to remember if we have to update the code at some point (which I'd probably do myself anyway `:-p`).

Please tell me if it works on your computer, and let's roll `:-)`

Nathann



---

archive/issue_comments_130432.json:
```json
{
    "body": "(I also updated the original source code, just in case)\n\nNathann",
    "created_at": "2012-02-23T15:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130432",
    "user": "ncohen"
}
```

(I also updated the original source code, just in case)

Nathann



---

archive/issue_comments_130433.json:
```json
{
    "body": "Attachment [trac_11754-ifndef.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754-ifndef.patch) by ncohen created at 2012-02-23 15:47:02",
    "created_at": "2012-02-23T15:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130433",
    "user": "ncohen"
}
```

Attachment [trac_11754-ifndef.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754-ifndef.patch) by ncohen created at 2012-02-23 15:47:02



---

archive/issue_comments_130434.json:
```json
{
    "body": "Nathann,\n\nI have added a review patch because 1) the test in rw.h was not correct. We have to define a tag. 2) the test in rw.c was also incorrect due to missing braces. \n\nNow compilation is correct on both my 32 bits and 64 bits computers. The execution is correct, in particular it returns the correct error message when memory is insufficient. Tests are OK, and documentation was already OK.\n\nFor me the patch is now good to go.\n\nD.",
    "created_at": "2012-02-24T10:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130434",
    "user": "dcoudert"
}
```

Nathann,

I have added a review patch because 1) the test in rw.h was not correct. We have to define a tag. 2) the test in rw.c was also incorrect due to missing braces. 

Now compilation is correct on both my 32 bits and 64 bits computers. The execution is correct, in particular it returns the correct error message when memory is insufficient. Tests are OK, and documentation was already OK.

For me the patch is now good to go.

D.



---

archive/issue_comments_130435.json:
```json
{
    "body": "Hellooooo !!!\n\n> I have added a review patch because 1) the test in rw.h was not correct. We have to define a tag. 2) the test in rw.c was also incorrect due to missing braces. \n\nHmm... That should be fixed in *his* code. I will email him about it `O_o`\n\n> Now compilation is correct on both my 32 bits and 64 bits computers. The execution is correct, in particular it returns the correct error message when memory is insufficient. Tests are OK, and documentation was already OK.\n\nOne last mail exchange with him, and I'll be glad to see this patch merged ! `:-p`\n\nNathann",
    "created_at": "2012-02-24T11:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130435",
    "user": "ncohen"
}
```

Hellooooo !!!

> I have added a review patch because 1) the test in rw.h was not correct. We have to define a tag. 2) the test in rw.c was also incorrect due to missing braces. 

Hmm... That should be fixed in *his* code. I will email him about it `O_o`

> Now compilation is correct on both my 32 bits and 64 bits computers. The execution is correct, in particular it returns the correct error message when memory is insufficient. Tests are OK, and documentation was already OK.

One last mail exchange with him, and I'll be glad to see this patch merged ! `:-p`

Nathann



---

archive/issue_comments_130436.json:
```json
{
    "body": "I did some more tests with sage-5.0.beta5\n\n1. on a 32 bits computer with 4Go of RAM, gcc (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9) \n\n   * I tried first to apply only trac_11754.patch + trac_11754_warning.patch + trac_11754-ifndef.patch\n\n   * Install OK, tests, OK, functionality OK, but **problem when n = 30**: the execution starts as if mallocs were OK, but I don't have enough memory for 29 so it cannot work for 30\n   * Now, changing the ugly (unsafe?) test in init_rw from !``if(n > MAX_VERTICES || n && !(sizeof(uint_fast8_t) * (1ul << n)))!`` to !``if( ( (n > MAX_VERTICES) ||\u00a0 (n>0) ) && !(sizeof(uint_fast8_t) * (1ul << n)) )!`` solves the problem and I get the correct error message !\n2. on a 64 bits computer with 64Go of RAM, gcc (GCC) 4.4.3 20100127 (Red Hat 4.4.3-4) \n\n   * I have an installation error when using only  trac_11754.patch + trac_11754_warning.patch + trac_11754-ifndef.patch\n   * When patching the ifndef test in rw.h, I solve installation problem, and then every thing seems to work. However, I have no way to control execution with N>=29 due to computation time. So I don't know what's happening when N=30 (I have large enough memory, but computation should be huge).\n\nAltogether, I need the revision patch (as I already identified weeks ago) to have the patch properly installing and operating.\n\nD.",
    "created_at": "2012-02-24T13:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130436",
    "user": "dcoudert"
}
```

I did some more tests with sage-5.0.beta5

1. on a 32 bits computer with 4Go of RAM, gcc (GCC) 4.6.1 20110908 (Red Hat 4.6.1-9) 

   * I tried first to apply only trac_11754.patch + trac_11754_warning.patch + trac_11754-ifndef.patch

   * Install OK, tests, OK, functionality OK, but **problem when n = 30**: the execution starts as if mallocs were OK, but I don't have enough memory for 29 so it cannot work for 30
   * Now, changing the ugly (unsafe?) test in init_rw from !``if(n > MAX_VERTICES || n && !(sizeof(uint_fast8_t) * (1ul << n)))!`` to !``if( ( (n > MAX_VERTICES) ||  (n>0) ) && !(sizeof(uint_fast8_t) * (1ul << n)) )!`` solves the problem and I get the correct error message !
2. on a 64 bits computer with 64Go of RAM, gcc (GCC) 4.4.3 20100127 (Red Hat 4.4.3-4) 

   * I have an installation error when using only  trac_11754.patch + trac_11754_warning.patch + trac_11754-ifndef.patch
   * When patching the ifndef test in rw.h, I solve installation problem, and then every thing seems to work. However, I have no way to control execution with N>=29 due to computation time. So I don't know what's happening when N=30 (I have large enough memory, but computation should be huge).

Altogether, I need the revision patch (as I already identified weeks ago) to have the patch properly installing and operating.

D.



---

archive/issue_comments_130437.json:
```json
{
    "body": "Wysiwyg problem...\n\nSo change the test from\n\n```\nif(n > MAX_VERTICES || n && !(sizeof(uint_fast8_t) * (1ul << n)))\n```\n\n\nTo\n\n```\nif( ( (n > MAX_VERTICES) || (n>0) ) && !(sizeof(uint_fast8_t) * (1ul << n)) )\n```\n\n\nHonestly, which one is the fastest to read ?",
    "created_at": "2012-02-24T13:36:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130437",
    "user": "dcoudert"
}
```

Wysiwyg problem...

So change the test from

```
if(n > MAX_VERTICES || n && !(sizeof(uint_fast8_t) * (1ul << n)))
```


To

```
if( ( (n > MAX_VERTICES) || (n>0) ) && !(sizeof(uint_fast8_t) * (1ul << n)) )
```


Honestly, which one is the fastest to read ?



---

archive/issue_comments_130438.json:
```json
{
    "body": "Ok, the author told me he intended the priority to be different (a parenthesis around \"n && !(sizeof(uint_fast8_t) * (1ul << n))\", but it makes no difference anyway as we settle the case n=0 differently already.\n\nOn my machine everything runs fine with all 4 patches applied. If everything is fine on your computer too I think this patch can go. As for a possible updates in 50 years, we will still have this track ticket lying around `:-)`\n\nNathann",
    "created_at": "2012-02-24T20:34:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130438",
    "user": "ncohen"
}
```

Ok, the author told me he intended the priority to be different (a parenthesis around "n && !(sizeof(uint_fast8_t) * (1ul << n))", but it makes no difference anyway as we settle the case n=0 differently already.

On my machine everything runs fine with all 4 patches applied. If everything is fine on your computer too I think this patch can go. As for a possible updates in 50 years, we will still have this track ticket lying around `:-)`

Nathann



---

archive/issue_comments_130439.json:
```json
{
    "body": "Attachment [trac_11754-ifndef-rev.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754-ifndef-rev.patch) by dcoudert created at 2012-02-24 22:10:33\n\nThe author is right ;-)\n\nThe previous version was also working for me because the test was true for N> 31, n <0, and N=30, but it was an accident. With the correct version, we have the same result but it is more expected.\n\nI have updated the patch accordingly and its working fine on all my computers: compilation, tests, documentation, functionality, error messages.\n\nFor me it's good to go so I give positive review.\n\nD.\n\nPS: I hope the ARM guys will not experience similar problems than for vertex separation...",
    "created_at": "2012-02-24T22:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130439",
    "user": "dcoudert"
}
```

Attachment [trac_11754-ifndef-rev.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754-ifndef-rev.patch) by dcoudert created at 2012-02-24 22:10:33

The author is right ;-)

The previous version was also working for me because the test was true for N> 31, n <0, and N=30, but it was an accident. With the correct version, we have the same result but it is more expected.

I have updated the patch accordingly and its working fine on all my computers: compilation, tests, documentation, functionality, error messages.

For me it's good to go so I give positive review.

D.

PS: I hope the ARM guys will not experience similar problems than for vertex separation...



---

archive/issue_comments_130440.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-02-24T22:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130440",
    "user": "dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_130441.json:
```json
{
    "body": "Well, at least not \"the same ones\", as the author uses the correct types. And I'll do that too from now on `:-)`\n\nThank you for the review, by the way ! This is another of the patches that have been waiting for... ages ! `:-D`\n\nNathann",
    "created_at": "2012-02-24T22:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130441",
    "user": "ncohen"
}
```

Well, at least not "the same ones", as the author uses the correct types. And I'll do that too from now on `:-)`

Thank you for the review, by the way ! This is another of the patches that have been waiting for... ages ! `:-D`

Nathann



---

archive/issue_comments_130442.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-27T11:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130442",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_130443.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2012-03-01T17:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130443",
    "user": "jdemeyer"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_130444.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2012-03-01T17:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130444",
    "user": "jdemeyer"
}
```

Changing status from closed to new.



---

archive/issue_comments_130445.json:
```json
{
    "body": "Re-opening this as there some problems with the `MANIFEST.in`.  The following need to be added:\n\n```\n! sage/graphs/graph_decompositions/rankwidth/README\n! sage/graphs/graph_decompositions/rankwidth/__init__.py\n```\n",
    "created_at": "2012-03-01T17:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130445",
    "user": "jdemeyer"
}
```

Re-opening this as there some problems with the `MANIFEST.in`.  The following need to be added:

```
! sage/graphs/graph_decompositions/rankwidth/README
! sage/graphs/graph_decompositions/rankwidth/__init__.py
```




---

archive/issue_comments_130446.json:
```json
{
    "body": "Helloooo !!!\n\nIs this patch what you need ? `^^;`\n\nNathann",
    "created_at": "2012-03-03T08:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130446",
    "user": "ncohen"
}
```

Helloooo !!!

Is this patch what you need ? `^^;`

Nathann



---

archive/issue_comments_130447.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-03-03T08:30:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130447",
    "user": "ncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_130448.json:
```json
{
    "body": "Attachment [trac_11754-RM.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754-RM.patch) by ncohen created at 2012-03-03 08:32:04",
    "created_at": "2012-03-03T08:32:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130448",
    "user": "ncohen"
}
```

Attachment [trac_11754-RM.patch](tarball://root/attachments/some-uuid/ticket11754/trac_11754-RM.patch) by ncohen created at 2012-03-03 08:32:04



---

archive/issue_comments_130449.json:
```json
{
    "body": "Attachment [11754_manifest.patch](tarball://root/attachments/some-uuid/ticket11754/11754_manifest.patch) by jdemeyer created at 2012-03-04 20:50:50",
    "created_at": "2012-03-04T20:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130449",
    "user": "jdemeyer"
}
```

Attachment [11754_manifest.patch](tarball://root/attachments/some-uuid/ticket11754/11754_manifest.patch) by jdemeyer created at 2012-03-04 20:50:50



---

archive/issue_comments_130450.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-03-04T20:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130450",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_130451.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-03-05T13:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130451",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_130452.json:
```json
{
    "body": "I think there is an issue with this code as there is a extension module sage.graphs.graph_decompositions.rankwidth as well as a package (with __init__.py) sage/graphs/decompositions/rankwidth/ . I think that should really be fixed as it's ambiguous which should be used.",
    "created_at": "2012-03-16T17:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130452",
    "user": "mhansen"
}
```

I think there is an issue with this code as there is a extension module sage.graphs.graph_decompositions.rankwidth as well as a package (with __init__.py) sage/graphs/decompositions/rankwidth/ . I think that should really be fixed as it's ambiguous which should be used.



---

archive/issue_comments_130453.json:
```json
{
    "body": "To be fixed in a follow-up ticket of course.",
    "created_at": "2012-03-17T12:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130453",
    "user": "jdemeyer"
}
```

To be fixed in a follow-up ticket of course.



---

archive/issue_comments_130454.json:
```json
{
    "body": "This is now at #12684.",
    "created_at": "2012-03-17T17:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11582",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11582#issuecomment-130454",
    "user": "mhansen"
}
```

This is now at #12684.
